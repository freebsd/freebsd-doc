<?xml version="1.0" encoding="iso-8859-1"?>
<!--
     The FreeBSD Dutch Documentation Project

     $FreeBSD$

     %SOURCE% en_US.ISO8859-1/books/handbook/ppp-and-slip/chapter.xml
     %SRCID%  41645
-->
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="ppp-and-slip">
  <info><title>PPP en SLIP</title>
    <authorgroup>
      <author><personname><firstname>Jim</firstname><surname>Mock</surname></personname><contrib>Geherstructureerd, gereorganiseerd en geupdate
	  door </contrib></author>
    </authorgroup>
    <authorgroup>
      <author><personname><firstname>Remko</firstname><surname>Lodder</surname></personname><contrib>Vertaald door </contrib></author>
    </authorgroup>
  </info>

  

  <sect1 xml:id="ppp-and-slip-synopsis">
    <title>Overzicht</title>

    <indexterm xml:id="ppp-ppp">
      <primary>PPP</primary>
    </indexterm>

    <indexterm xml:id="ppp-slip">
      <primary>SLIP</primary>
    </indexterm>

    <para>&os; heeft een aantal manieren om de ene computer met de
      andere te verbinden.  Om een netwerk of internet verbinding
      op te zetten door een inbelmodem, of om anderen toe te
      staan dit te doen door de machine heen vereist het gebruik
      van PPP en SLIP.  Dit hoofdstuk beschrijft het opzetten van
      op modems gebaseerde diensten in meer detail.</para>

    <para>Na het lezen van dit hoofdstuk weet u:</para>

    <itemizedlist>
      <listitem>
	<para>Hoe gebruikers PPP opgezet kan worden.</para>
      </listitem>
      <listitem>
	<para>Hoe kernel-PPP opgezet kan worden (alleen voor
	  &os;&nbsp;7.X).</para>
      </listitem>
      <listitem>
	<para>Hoe <acronym>PPPoE</acronym> opgezet kan worden (PPP
	  over Ethernet).</para>
      </listitem>
      <listitem>
	<para>Hoe <acronym>PPPoA</acronym> opgezet kan worden (PPP
	  over ATM).</para>
      </listitem>
      <listitem>
	<para>Hoe een SLIP-server en cliënt opgezet kan worden en
	  hoe dat geconfigureerd wordt (alleen voor &os;&nbsp;7.X).</para>
      </listitem>
    </itemizedlist>

    <indexterm xml:id="ppp-ppp-user">
      <primary>PPP</primary>
      <secondary>gebruiker-PPP</secondary>
    </indexterm>

    <indexterm xml:id="ppp-ppp-kernel">
      <primary>PPP</primary>
      <secondary>kernel-PPP</secondary>
    </indexterm>

    <indexterm xml:id="ppp-ppp-ethernet">
      <primary>PPP</primary>
      <secondary>over Ethernet</secondary>
    </indexterm>

    <para>Voordat dit hoofdstuk gelezen wordt, moet u:</para>

    <itemizedlist>
      <listitem>
	<para>Bekend zijn met basis netwerk terminologie.</para>
      </listitem>

      <listitem>
	<para>De basis en doeleinden van een inbel verbinding
	  en van PPP en/of SLIP.</para>
      </listitem>
    </itemizedlist>

    <para>U kunt zich afvragen wat het verschil is tussen gebruiker-PPP
      en kernel-PPP.  Het antwoord is simpel: gebruiker-PPP verwerkt
      inkomend en uitgaande data in het gebruikersland in plaats van
      in de kernel.  Dit is duur in de zin van het kopiëren van de
      data tussen de kernel en het gebruikersland, maar levert meer
      mogelijkheden voor de PPP implementatie.  Gebruikers PPP gebruikt
      het <filename>tun</filename> apparaat om te communiceren met
      de buitenwereld.  Kernel-PPP maakt gebruik van het
      <filename>ppp</filename> apparaat.</para>

    <note>
      <para>Voor de rest van dit hoofdstuk, zal gebruiker-PPP gebruikt
	worden als <application>ppp</application> tenzij er onderscheid
	gemaakt moet worden met andere PPP software zoals
	<application>pppd</application>.  Tenzij anders vermeld moeten
	alle uitgelegde commando's in dit hoofdstuk gestart worden als
	de <systemitem class="username">root</systemitem> gebruiker.</para>
    </note>
  </sect1>

  <sect1 xml:id="userppp">
    <info><title>Gebruikmaken van gebruiker-PPP</title>
      <authorgroup>
	<author><personname><firstname>Tom</firstname><surname>Rhodes</surname></personname><contrib>Bijgewerkt en uitgebreid door </contrib></author>
      </authorgroup>
      <authorgroup>
	<author><personname><firstname>Brian</firstname><surname>Somers</surname></personname><contrib>Origineel bijgedragen door </contrib></author>
      </authorgroup>
      <authorgroup>
	<author><personname><firstname>Nik</firstname><surname>Clayton</surname></personname><contrib>Met input van </contrib></author>
	<author><personname><firstname>Dirk</firstname><surname>Frömberg</surname></personname></author>
	<author><personname><firstname>Peter</firstname><surname>Childs</surname></personname></author>
      </authorgroup>
    </info>

    

    <sect2>
      <title>Gebruiker-PPP</title>

      <sect3>
	<title>Vereisten</title>

	<para>Dit document gaat er vanuit dat u de volgende punten
	  beschikbaar heeft:</para>

	<itemizedlist>
	  <listitem>
	    <para>Een account bij een Internet Service Provider (ISP)<indexterm xml:id="ppp-isp"><primary>ISP</primary></indexterm>
	      waarmee verbinding gemaakt wordt door middel van
	      PPP<indexterm xml:id="ppp-ppp2"><primary>PPP</primary></indexterm>.</para>
	  </listitem>

	  <listitem>
	    <para>Een modem of een ander apparaat verbonden met uw PC en
	      correct geconfigureerd zodat u verbinding kan maken met uw
	      ISP.</para>
	  </listitem>

	  <listitem>
	    <para>De inbelnummers van uw ISP.</para>
	  </listitem>

	  <listitem>
	    <para>Uw loginnaam<indexterm xml:id="ppp-login"><primary>loginnaam</primary></indexterm> en wachtwoord<indexterm xml:id="ppp-password"><primary>wachtwoord</primary></indexterm> (danwel een combinatie van een
	      standaard &unix;<indexterm xml:id="ppp-unix"><primary>UNIX</primary></indexterm>-stijl
	      login en wachtwoord of een PAP<indexterm xml:id="ppp-pap"><primary>PAP</primary></indexterm> of CHAP<indexterm xml:id="ppp-chap"><primary>CHAP</primary></indexterm>
	      login en wachtwoordcombinatie).</para>
	  </listitem>

	  <listitem>
	    <para>Het IP-adres van één of meerdere
	      naamservers<indexterm xml:id="ppp-nameserver"><primary>naamserver</primary></indexterm>.  Normaal gesproken krijgt u twee IP
	      adressen van uw ISP om te gebruiken.  Als u er echter geen
	      één gekregen heeft, kunt u het commando
	      <command>enable dns</command> gebruiken in
	      <filename>ppp.conf</filename> en
	      <application>ppp</application> zal de naamservers voor
	      u configureren.  Deze optie is afhankelijk van de PPP
	      implementatie van de ISP, welke DNS onderhandeling
	      moet ondersteunen.</para>
	  </listitem>
	</itemizedlist>

	<para>De volgende informatie kan aangeleverd worden door uw
	  ISP maar is niet echt noodzakelijk:</para>

	<itemizedlist>
	  <listitem>
	    <para>Het IP-adres van de router van uw ISP.  De router is
	      de machine waarmee u verbinding maakt en welke ingesteld
	      wordt als de <emphasis>standaard route</emphasis>.  Als
	      u deze informatie niet heeft, kunt u een willekeurig
	      adres verzinnen waarna de PPP server van de ISP het juiste
	      adres vertelt zodra u verbinding maakt.</para>

	    <para>Dit IP-adres wordt door <application>ppp</application>
	      <literal>HISADDR</literal> genoemd.</para>
	  </listitem>

	  <listitem>
	    <para>Het netwerkmasker wat gebruikt moet worden.  Als uw ISP
	      deze niet heeft opgegeven, kan <systemitem class="netmask">255.255.255.255</systemitem> gebruikt
	      worden.</para>
	  </listitem>

	  <listitem>
	    <para>Als uw ISP u een vast IP-adres<indexterm xml:id="ppp-static-ip"><primary>statisch IP-adres</primary></indexterm> en hostnaam levert,
	      kunt u deze invoeren.  In andere gevallen bepaalt de
	      andere kant welk adres er uitgegeven wordt.</para>
	  </listitem>
	</itemizedlist>

	<para>Als u niet in bezit bent van de vereiste informatie, moet
	  u contact opnemen met uw ISP.</para>

	<note>
	  <para>Door de rest van dit hoofdstuk worden in veel van de
	    voorbeelden configuratie bestanden genummerd per
	    regel.  Deze nummers dienen alleen als hulp voor de
	    presentatie en discussie en zijn verder niet bedoeld om
	    daadwerkelijk geïmplementeerd te worden.  Een juiste
	    inspringing met tabs en spaties zijn daarbij ook
	    belangrijk.</para>
	</note>

      </sect3>

      <sect3>
	<title>Automatische configuratie van
	  <application>PPP</application></title>

	<indexterm>
	  <primary>PPP</primary>
	  <secondary>configuratie</secondary>
	</indexterm>

	<para>Zowel <command>ppp</command> als <command>pppd</command>
	  (de implementatie van PPP op kernel niveau) gebruiken de
	  configuratie bestanden die zich in de map <filename>/etc/ppp</filename> bevinden.  Voorbeelden
	  configuraties voor gebruiker-PPP kunnen gevonden worden in
	  <filename>/usr/share/examples/ppp/</filename>.</para>

	<para>Het configureren van <command>ppp</command> vereist
	  dat u een aantal bestanden bewerkt, afhankelijk van uw
	  eisen.  Wat u moet invoeren is deels afhankelijk van wat
	  uw ISP u aanbied met oog op statische IP-adressen (lees u
	  krijgt een statisch adres welke u altijd gebruikt) of
	  dynamisch (lees: uw IP-adres veranderd elke keer als
	  u verbinding maakt met uw ISP).</para>

	<sect4 xml:id="userppp-staticIP">
	  <title>PPP en statische IP-adressen</title>

	  <indexterm>
	    <primary>PPP</primary>
	    <secondary>met statische IP-adressen</secondary>
	  </indexterm>

	  <para>U moet het <filename>/etc/ppp/ppp.conf</filename>
	    bewerken.  Het zou dan als volgend eruit moeten zien:</para>

	  <note>
	    <para>Regels die eindigen met een <literal>:</literal>
	      starten in de eerste kolom (het begin van de regel)
	      &mdash; alle andere regels moeten inspringen zoals
	      getoond door middel van spaties of tabs.</para>
	  </note>

	  <programlisting>1     default:
2       set log Phase Chat LCP IPCP CCP tun command
3       ident user-ppp VERSION (built COMPILATIONDATE)
4       set device /dev/cuau0
5       set speed 115200
6       set dial "ABORT BUSY ABORT NO\\sCARRIER TIMEOUT 5 \
7                 \"\" AT OK-AT-OK ATE1Q0 OK \\dATDT\\T TIMEOUT 40 CONNECT"
8       set timeout 180
9       enable dns
10
11    provider:
12      set phone "(123) 456 7890"
13      set authname foo
14      set authkey bar
15      set login "TIMEOUT 10 \"\" \"\" gin:--gin: \\U word: \\P col: ppp"
16      set timeout 300
17      set ifaddr <replaceable>x.x.x.x</replaceable> <replaceable>y.y.y.y</replaceable> 255.255.255.255 0.0.0.0
18      add default HISADDR</programlisting>

	  <variablelist>
	    <varlistentry>
	      <term>Regel 1:</term>

	      <listitem>
		<para>Deze regel identificeert de standaard regel.
		  Commando's in deze regel worden automatisch gestart
		  zodra ppp gestart wordt.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>Regel 2:</term>

	      <listitem>
		<para>Zet de log paramaters aan.  Zodra de configuratie
		  naar verwachting werkt, moet deze regel aangepast
		  worden naar:</para>

		<programlisting>set log phase tun</programlisting>

		<para>om te voorkomen dat er extreem grote log files
		  gemaakt worden.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>Regel 3:</term>

	      <listitem>
		<para>Vertelt PPP hoe het zich moet identificeren
		  aan de router aan de andere kant, als deze
		  problemen heeft met het onderhandelen en het
		  opzetten van de link en het leveren van informatie
		  die de beheerders van de andere kant nuttig kunnen
		  vinden om zulke problemen te onderzoeken.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>Regel 4:</term>

	      <listitem>
		<para>Identificeert het apparaat waarmee het modem
		  verbonden is.  <filename>COM1</filename> is
		  <filename>/dev/cuau0</filename>
		  en
		  <filename>COM2</filename> is
		  <filename>/dev/cuau1</filename>.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>Regel 5:</term>

	      <listitem>
		<para>Stelt de snelheid in waarmee verbinding gemaakt
		  wordt.  Als 115200 niet werkt (wat wel zou moeten
		  kunnen met elk nieuw modem), probeert u dan de
		  instelling van 38400.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>Regels 6 &amp; 7:</term>

	      <listitem>
		<para>De inbelregel.  Gebruiker-PPP gebruikt<indexterm><primary>PPP</primary><secondary>gebruiker-PPP</secondary></indexterm> een
		  <quote>expect-send</quote> syntax wat vergelijkbaar is
		  met het &man.chat.8; programma.  Bekijk de handleiding
		  voor meer informatie over de mogelijkheden van deze
		  taal.</para>

		<para>Let op dat dit commando doorgaat op de volgende
		  regel zodat deze leesbaar blijft.  Elk commando in
		  <filename>ppp.conf</filename> kan dit doen als het
		  laatste karakter op een regel, het \ karakter is.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>Regel 8:</term>

	      <listitem>
		<para>Stelt de idle timeout in voor een link.  180
		  seconden is standaard, dus deze regel is puur
		  cosmetisch.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>Regel 9:</term>

	      <listitem>
		<para>Vertelt PPP om de andere kant te vragen om een
		  bevestiging van de lokale naamserver instellingen.  Als
		  u een lokale naamserver draait moet deze regel
		  uitgecommentarieërd of verwijderd worden.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>Regel 10:</term>

	      <listitem>
		<para>Een blanco regel voor de leesbaarheid.  Blanco
		  regels worden door PPP genegeerd.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>Regel 11:</term>

	      <listitem>
		<para>Identificeert een sectie voor de provider die
		  <quote>provider</quote> genoemd wordt.  Dit kan
		  gewijzigd worden in de naam van uw provider zodat er
		  later gebruik gemaakt van worden bij de optie
		  <option>load <replaceable>provider</replaceable></option>
		  om een verbinding op te zetten.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>Regel 12:</term>

	      <listitem>
		<para>Stelt het telefoonnummer in voor deze provider.
		  Meerdere telefoonnummers kunnen gespecificeerd worden
		  door gebruik te maken van de dubbele punt
		  (<literal>:</literal>) of het pipe karakter
		  (<literal>|</literal>) als scheidingsteken.  Het
		  verschil tussen de twee scheidingstekens wordt
		  beschreven in de &man.ppp.8; handleiding.
		  Om samen te vatten, als u wilt rouleren tussen de
		  nummers gebruikt u dan een dubbelepunt.  Als u altijd
		  het eerste nummer als eerste wilt draaien en alleen de
		  andere nummers wilt draaien als het eerste nummer
		  niet werkt, gebruik dan het pipe karakter.  Quote altijd
		  de hele set van telefoonnummers zoals getoond.</para>

		<para>U moet het telefoonnummer citeren met dubbele quotes
		  (<literal>"</literal>) als er enige intentie is in het
		  gebruik van spaties in het telefoonummer.  Dit kan een
		  simpele, maar subtiele fout creeëren.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>Regels 13 &amp; 14:</term>

	      <listitem>
		<para>Identificeert de gebruikersnaam en het
		  wachtwoord.  Wanneer gebruik gemaakt wordt van een
		  &unix; stijl login worden deze waarden verwezen
		  door het <command>set login</command> commando door
		  gebruik te maken van de \U en \P variabelen.
		  Wanneer er verbinding gemaakt wordt door PPP en CHAP
		  worden deze waardes gebruikt tijdens het
		  authenticeren.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>Regels 15:</term>

	      <listitem>
		<para>Als u gebruik maakt van PPP en CHAP, zal er geen
		  login op dit moment zijn, en moet deze regel
		  uitgecommentarieërd of verwijderd worden.  Zie het
		  <link linkend="userppp-PAPnCHAP">PAP<indexterm><primary>PAP</primary></indexterm> en CHAP<indexterm><primary>CHAP</primary></indexterm>
		    authenticatie</link> hoofdstuk voor meer details.</para>

		<para>De login regel is hetzelfde als de chat-achtige
		  syntax van de inbelregel.  In dit voorbeeld werkt
		  de reegl voor een dienst wiens login sessie als
		  volgt eruit ziet:</para>

		<screen>J. Random Provider
login: <replaceable>foo</replaceable>
password: <replaceable>bar</replaceable>
protocol: ppp</screen>

		<para>U moet dit script aanpassen om aan uw behoeften
		  te voldoen.  Wanneer u dit script voor het eerst
		  schrijft, moet u ervoor zorgen dat u de
		  <quote>chat</quote> log optie heeft aangezet zodat u
		  kunt bepalen of de communicatie gaat zoals
		  verwacht.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>Regel 16:</term>

	      <listitem>
		<para>Selt de standaard idle timeout<indexterm><primary>timeout</primary></indexterm> in (in seconden)
		  voor de connectie.  Hier wordt de connectie
		  automatisch afgesloten na 300 seconden van
		  inactiviteit.  Als u nooit een timeout wilt krijgen,
		  kunt u de waarde op nul zetten of gebruik maken van
		  de optie <option>-ddial</option> op de commando
		  regel.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>Regel 17:</term>

	      <listitem>
		<para>Stelt het interface adres in.  De regel
		  <replaceable>x.x.x.x</replaceable> moet vervangen
		  worden door het IP-adres<indexterm><primary>ISP</primary></indexterm> dat uw provider aan u heeft
		  uitgegeven.  De regel
		  <replaceable>y.y.y.y</replaceable> moet vervangen
		  worden door het IP-adres dat uw provider aan u
		  heeft gegeven voor de router (de machine waarmee
		  u verbinding maakt).  Als uw ISP u geen router
		  adres heeft gegeven, gebruik dan <systemitem class="netmask">10.0.0.2/0</systemitem>.  Als u gebruik
		  moet maken van een <quote>gegokt</quote>, zorg ervoor
		  dat er een regel staat in
		  <filename>/etc/ppp/ppp.linkup</filename> zoals
		  beschreven in de instructies voor <link linkend="userppp-dynamicIP">PPP en dynamische IP
		  adressen</link>.  Als deze regel weggelaten wordt
		  kan <command>ppp</command> niet in
		  <option>-auto</option> mode starten.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>Regel 18:</term>

	      <listitem>
		<para>Voegt een standaard routering toe naar uw providers
		  router.  Het speciale <literal>HISADDR</literal>
		  woord, wordt vervangen door het router adres zoals
		  gespecificeerd op regel 17.  Het is belangrijk dat
		  deze regel na regel 17 komt, anders is
		  <literal>HISADDR</literal> nog niet
		  geïnitialiseerd.</para>

		<para>Als u ppp niet in <option>-auto</option>
		  mode wilt draaien, moet deze regel verplaatst
		  worden naar het <filename>ppp.linkup</filename>
		  bestand.</para>
	      </listitem>
	    </varlistentry>
	  </variablelist>

	  <para>Het is niet nodig om een regel toe te voegen aan
	    <filename>ppp.linkup</filename> wanneer u een statisch
	    IP-adres krijgt en ppp met de <option>-auto</option> mode
	    gestart is omdat uw routerings tabel al correcte regels
	    heeft voordat u verbinding maakt.  U kunt echter een regel
	    aanmaken om programma's te starten nadat de verbinding
	    opgezet is.  Dit wordt later uitgelegd met een voorbeeld
	    over sendmail.</para>

	  <para>Voorbeeld van configuratiebestanden kunnen gevonden
	    worden in de map <filename>usr/share/examples/ppp</filename>.</para>
	</sect4>

	<sect4 xml:id="userppp-dynamicIP">
	  <title>PPP en dynamische IP-adressen</title>

	  <indexterm>
	    <primary>PPP</primary>
	    <secondary>met dynamische IP-adressen</secondary>
	  </indexterm>

	  <indexterm>
	    <primary>IPCP</primary>
	  </indexterm>

	  <para>Als uw provider geen statisch IP-adres aanlevert kan
	    <command>ppp</command> geconfigureerd worden om het lokale
	    en het remote adres te onderhandelen.  Dit wordt gedaan door
	    het <quote>gokken</quote> van een IP-adres en PPP toestaan
	    dit adres te corrigeren door gebruik te maken van het
	    IP Configuration Protocol (IPCP) nadat er een verbinding
	    opgezet is.  De <filename>ppp.conf</filename> configuratie
	    is verders hetzelfde als voor de
	    <link linkend="userppp-staticIP">PPP en statische IP
	      adressen</link>, met de volgende wijziging:</para>

	  <programlisting>17      set ifaddr 10.0.0.1/0 10.0.0.2/0 255.255.255.255 0.0.0.0</programlisting>

	  <para>Nogmaals, het regelnummer hoeft niet te worden
	    toegevoegd, deze dient puur ter referentie.  Indentatie
	    van minstens één spatie is vereist.</para>

	  <variablelist>
	    <varlistentry>
	      <term>Regel 17:</term>

	      <listitem>
		<para>Het nummer achter het <literal>/</literal> karakter
		  is het aantal netwerk master bits van het adres die ppp
		  eist.  Het is mogelijk dat u IP-adressen wilt gebruiken
		  die meer van toepassing zijn op uw situatie, maar
		  bovenstaand voorbeeld zal altijd werken.</para>

		<para>Het laatste argument (<literal>0.0.0.0</literal>)
		  vertelt PPP om te onderhandelen met het adres <systemitem class="ipaddress">0.0.0.0</systemitem> in plaats van met
		  <systemitem class="ipaddress">10.0.0.1</systemitem> en is benodigd
		  voor sommige ISPs.  Gebruik <literal>0.0.0.0</literal>
		  niet als eerste argument voor het commando
		  <command>set ifaddr</command>, omdat dit ervoor zorgt
		  dat PPP geen initiële route kan opzetten in
		  <option>-auto</option> mode.</para>
	      </listitem>
	    </varlistentry>
	  </variablelist>

	  <para>Als u niet draait in <option>-auto</option> mode, moet
	    u een nieuwe regel toevoegen aan
	    <filename>/etc/ppp/ppp.linkup</filename>.
	    <filename>ppp.linkup</filename> wordt uitgevoerd nadat een
	    connectie is opgezet.  Op dit moment krijgt
	    <command>ppp</command> het interface adres en is het mogelijk
	    om regels toe te voegen aan de route tabel:</para>

	  <programlisting>1     provider:
2      add default HISADDR</programlisting>

	  <variablelist>
	    <varlistentry>
	      <term>Regel 1:</term>

	      <listitem>
		<para>Bij het tot stand brengen van een verbinding
		  zal <command>ppp</command> kijken voor een
		  corresponderende regel in
		  <filename>ppp.linkup</filename> volgens de volgende
		  criteria: Als eerste, probeert het hetzelfde label te
		  vinden zoals gebruikt in <filename>ppp.conf</filename>.
		  Als dat mislukt, zoek dan een regel waarin het IP-adres
		  van onze router in voorkomt.  Deze regel bevat een IP
		  stijl van 4 octetten.  Als nu nog steeds geen
		  corresponderende regel gevonden is wordt er gezocht
		  naar de <literal>HISADDR</literal> regel.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>Regel 2:</term>

	      <listitem>
		<para>Deze regel verteld <command>ppp</command> om
		  een standaard routering toe te voegen die wijst
		  richting <literal>HISADDR</literal>.
		  <literal>HISADDR</literal> wordt vervangen door
		  het IP-adres van de router zoals onderhandeld door
		  IPCP.</para>
	      </listitem>
	    </varlistentry>
	  </variablelist>

	  <para>Zie de <literal>pmdemand</literal> regel in de bestanden
	    <filename>/usr/share/examples/ppp/ppp.conf.sample</filename>
	    en
	    <filename>/usr/share/examples/ppp/ppp.linkup.sample</filename>
	    voor een gedetailleerd voorbeeld.</para>
	</sect4>

	<sect4>
	  <title>Het ontvangen van binnenkomende gesprekken</title>

	  <indexterm>
	    <primary>PPP</primary>

	    <secondary>ontvangen van inkomende gesprekken</secondary>
	  </indexterm>

	  <para>Wanneer <application>ppp</application> geconfigureerd
	    is om inkomende gesprekken te ontvangen op een machine die
	    verbonden is met een LAN, moet u beslissen of er pakketten
	    worden doorgestuurd naar het LAN.  Als u dat doet, moet
	    u de andere kant een IP-adres geven uit het subnet van uw
	    LAN, en zult u gebruik moeten maken van het command
	    <command>enable proxy</command> in het
	    <filename>/etc/ppp/ppp.conf</filename> bestand.  U zult ook
	    moeten controleren of het <filename>/etc/rc.conf</filename>
	    bestand het volgende bevat:</para>

	  <programlisting>gateway_enable="YES"</programlisting>
	</sect4>

	<sect4>
	  <title>Welke getty?</title>

	  <para><link linkend="dialup">Het configureren van &os; voor
	      inbel diensten</link> levert een goede beschrijving van
	    het inschakelen van inbeldiensten door gebruik te maken
	    van &man.getty.8;.</para>

	  <para>Een alternatief voor <command>getty</command> is <link xlink:href="http://mgetty.greenie.net/">mgetty</link> (van de port
	    <package>comms/mgetty+sendfax</package>),
	    een betere versie van <command>getty</command> ontworpen
	    voor onder andere inbellijnen.</para>

	  <para>De voordelen van het gebruik van
	    <command>mgetty</command> is dat het actief
	    <emphasis>communiceert</emphasis> met modems, wat betekent
	    dat als de port uitgeschakeld is in
	    <filename>/etc/ttys</filename>, het modem de telefoon niet
	    zal beantwoorden.</para>

	  <para>Latere versies van <command>mgetty</command> (vanaf
	    0.99beta en later) ondersteunen ook het automatisch
	    detecteren van PPP stromen waardoor cliënten
	    zonder extra scripting toegang kunnen krijgen tot uw
	    server.</para>

	  <para>Raadpleeg naar <link linkend="userppp-mgetty">Mgetty en
	      AutoPPP</link> voor meer informatie over
	    <command>mgetty</command>.</para>
	</sect4>

	<sect4>
	  <title><application>PPP</application> Permissies</title>

	  <para>Het <command>ppp</command> commando moet normaal
	    gesproken gestart worden door de <systemitem class="username">root</systemitem>
	    gebruiker.  Als u echter wilt toestaan dat
	    <command>ppp</command> in server mode gestart wordt door
	    een normale gebruiker door het uitvoeren van
	    <command>ppp</command>, zoals beschreven hieronder, moet
	    deze gebruiker permissie krijgen om
	    <command>ppp</command> te starten.  Dit kan gedaam worden
	    door de gebruiker toe te voegen aan de
	    <systemitem class="groupname">network</systemitem> groep van het
	    <filename>/etc/group</filename> bestand.</para>

	  <para>U moet de gebruiker ook toegang geven tot
	    één of meerdere secties van het configuratie
	    bestand door gebruik te maken van het <command>allow</command>
	    commando:</para>

	  <programlisting>allow users fred mary</programlisting>

	  <para>Als dit commando wordt gebruikt in de
	    <literal>default</literal> sectie, geeft ppp alle
	    opgegeevn gebruikers toegang tot alle opties.</para>
	</sect4>

	<sect4>
	  <title>PPP shells voor dynamische IP-gebruikers</title>

	  <indexterm>
	    <primary>PPP shells</primary>
	  </indexterm>

	  <para>Creeër een bestand genaamd
	    <filename>/etc/ppp/ppp-shell</filename> welke de volgende
	    gegevens bevat:</para>

	  <programlisting>#!/bin/sh
IDENT=`echo $0 | sed -e 's/^.*-\(.*\)$/\1/'`
CALLEDAS="$IDENT"
TTY=`tty`

if [ x$IDENT = xdialup ]; then
        IDENT=`basename $TTY`
fi

echo "PPP voor $CALLEDAS op $TTY"
echo "Starten van PPP voor $IDENT"

exec /usr/sbin/ppp -direct $IDENT</programlisting>

	  <para>Dit script moet uitvoerbaar zijn.  Ook moet er een
	    symbolische link gemaakt worden naar dit script met de naam
	    <filename>ppp-dialup</filename> door gebruik te maken van
	    de volgende commando's:</para>

	  <screen>&prompt.root; <userinput>ln -s ppp-shell /etc/ppp/ppp-dialup</userinput></screen>

	  <para>U moet dit script gebruiken als de
	    <emphasis>shell</emphasis> voor al uw inbel gebruikers.
	    Dit is een voorbeeld uit <filename>/etc/passwd</filename>
	    voor een PPP inbelgebruiker met de gebruikersnaam
	    <systemitem class="username">pchilds</systemitem> (Let op, u mag niet direct het
	    wachtwoord bestand bewerken, gebruik daarom het programma
	    &man.vipw.8;).</para>

	  <programlisting>pchilds:*:1011:300:Peter Childs PPP:/home/ppp:/etc/ppp/ppp-dialup</programlisting>

	  <para>Creeër vervolgens een map <filename>/home/ppp</filename> die door iedereen
	    gelezen en beschreven kan worden en zet daar de volgende 0
	    byte grote bestanden in:</para>

	  <screen>-r--r--r--   1 root     wheel           0 May 27 02:23 .hushlogin
-r--r--r--   1 root     wheel           0 May 27 02:22 .rhosts</screen>

	  <para>welke voorkomen dat <filename>/etc/motd</filename>
	    getoond wordt.</para>
	</sect4>

	<sect4>
	  <title>PPP shells voor statische IP-gebruikers</title>

	  <indexterm>
	    <primary>PPP shells</primary>
	  </indexterm>

	  <para>Creeër het <filename>ppp-shell</filename> bestand
	    zoals hierboven, en voor elk account met een statisch
	    toegewezen IP-adres creeërt u een symbolische link naar
	    <filename>ppp-shell</filename>.</para>

	  <para>Als u bijvoorbeeld drie inbel gebruikers hebt genaamd
	    <systemitem class="username">fred</systemitem>, <systemitem class="username">sam</systemitem> en
	    <systemitem class="username">mary</systemitem> waar u een /24 CIDR netwerk voor
	    routeert, moet u het volgende typen:</para>

	  <screen>&prompt.root; <userinput>ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-fred</userinput>
&prompt.root; <userinput>ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-sam</userinput>
&prompt.root; <userinput>ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-mary</userinput></screen>

	  <para>Elk van deze inbelgebruikers moet de shell ingesteld
	    hebben op de symbolische link die hierboven is gecreeërd
	    (bijvoorbeeld <systemitem class="username">mary</systemitem>'s shell moet zijn
	    <filename>/etc/ppp/ppp-mary</filename>).</para>
	</sect4>

	<sect4>
	  <title>Het instellen van <filename>ppp.conf</filename> voor
	    dynamische IP-gebruikers</title>

	  <para>Het <filename>/etc/ppp/ppp.conf</filename> bestand moet
	    iets zoals hieronder bevatten:</para>

	  <programlisting>default:
  set debug phase lcp chat
  set timeout 0

ttyu0:
  set ifaddr 203.14.100.1 203.14.100.20 255.255.255.255
  enable proxy

ttyu1:
  set ifaddr 203.14.100.1 203.14.100.21 255.255.255.255
  enable proxy</programlisting>

	  <note>
	    <para>Het inspringen is belangrijk.</para>
	  </note>

	  <para>De <literal>default:</literal> sectie wordt altijd
	    geladen.  Voor elke inbellijn die ingeschakeld is in
	    <filename>/etc/ttys</filename> moet een soortgelijke
	    regel worden gemaakt als die voor <literal>ttyu0:</literal>
	    hierboven.  Elke regel moet een uniek IP-adres krijgen van
	    uw pool van IP-adressen voor dynamische gebruikers.</para>
	</sect4>

	<sect4>
	  <title>Het instellen van <filename>ppp.conf</filename> voor
	    statische IP-gebruikers.</title>

	  <para>Samen met de inhoud van het voorbeeld
	    <filename>/usr/share/examples/ppp/ppp.conf</filename>
	    bestand hierboven moet een sectie aangemaakt worden voor
	    elke van de statisch ingestelde inbelgebruikers.  We
	    gaan door met ons <systemitem class="username">fred</systemitem>,
	    <systemitem class="username">sam</systemitem> en <systemitem class="username">mary</systemitem>
	    voorbeeld.</para>

	  <programlisting>fred:
  set ifaddr 203.14.100.1 203.14.101.1 255.255.255.255

sam:
  set ifaddr 203.14.100.1 203.14.102.1 255.255.255.255

mary:
  set ifaddr 203.14.100.1 203.14.103.1 255.255.255.255</programlisting>

	  <para>Het <filename>/etc/ppp/ppp.linkup</filename> bestand
	    moet ook informatie over routeringen bevatten voor elke
	    statische IP-gebruiker waar nodig.  De regel hieronder
	    voegt een routering toe voor het
	    <systemitem class="ipaddress">203.14.201.0/24</systemitem> netwerk
	    via de ppp link van de gebruiker.</para>

	  <programlisting>fred:
  add 203.14.101.0 netmask 255.255.255.0 HISADDR

sam:
  add 203.14.102.0 netmask 255.255.255.0 HISADDR

mary:
  add 203.14.103.0 netmask 255.255.255.0 HISADDR</programlisting>
	</sect4>

	<sect4 xml:id="userppp-mgetty">
	  <title><command>mgetty</command> en AutoPPP</title>

	  <indexterm>
	    <primary><command>mgetty</command></primary>
	  </indexterm>

	  <indexterm>
	    <primary>AutoPPP</primary>
	  </indexterm>

	  <indexterm>
	    <primary>LCP</primary>
	  </indexterm>

	  <para>Standaard staat de optie <literal>AUTO_PPP</literal> in de port
	    <package>comms/mgetty+sendfax</package> welke
	    <command>mgetty</command> in staat stelt
	    om de LCP fase van PPP connecties te detecteren en aan de
	    hand daarvan automatisch een ppp shell te creeëren.
	    Echter, de standaard login procedure vindt in deze mode
	    niet plaats, waardoor het nodig is om de gebruikers te
	    authenticeren door middel van PAP of CHAP.</para>

	  <para>De volgende sectie gaat er vanuit dat u succesvol
	    de port <package>comms/mgetty+sendfax</package>
	    op uw systeem heeft gecompileerd en geïnstalleerd.</para>

	  <para>Zorg ervoor dat uw
	    <filename>/usr/local/etc/mgetty+sendfax/login.config</filename>
	    bestand de volgende inhoud heeft:</para>

	  <programlisting>/AutoPPP/ -     -		      /etc/ppp/ppp-pap-dialup</programlisting>

	  <para>Dit verteld <command>mgetty</command> om het
	    <filename>ppp-pap-dialup</filename> script te starten
	    wanneer er een PPP connectie gedetecteerd wordt.</para>

	  <para>Creeër een bestand genaamd
	    <filename>/etc/ppp/ppp-pap-dialup</filename> met de volgende
	    inhoud (het bestand moet uitvoerbaar zijn):</para>

	  <programlisting>#!/bin/sh
exec /usr/sbin/ppp -direct pap$IDENT</programlisting>

	  <para>Voor elke inbelregel die ingeschakeld is in
	    <filename>/etc/ttys</filename>, creeër een
	    corresponderende regel in
	    <filename>/etc/ppp/ppp.conf</filename>.  Dit gaat goed
	    samen met de definities die hierboven gedaan zijn.</para>

	  <programlisting>pap:
  enable pap
  set ifaddr 203.14.100.1 203.14.100.20-203.14.100.40
  enable proxy</programlisting>

	  <para>Elke gebruiker die op deze manier inlogt moet een
	    gebruikersnaam en wachtwoord hebben in het
	    <filename>/etc/ppp/ppp.secret</filename> bestand of de
	    volgende optie moet worden toegevoegd om gebruikers te
	    authenticeren via PAP vanuit het
	    <filename>/etc/passwd</filename> bestand.</para>

	  <programlisting>enable passwdauth</programlisting>

	  <para>Als u een aantal gebruikers een statisch IP-adres wilt
	    geven, kan dat gespecificeerd worden als het derde argument
	    in <filename>/etc/ppp/ppp.secret</filename>.  Zie
	    <filename>/usr/share/examples/ppp/ppp.secret.sample</filename>
	    voor een voorbeeld.</para>
	</sect4>

	<sect4>
	  <title>&microsoft; Extensies</title>

	  <indexterm>
	    <primary>DNS</primary>
	  </indexterm>

	  <indexterm>
	    <primary>NetBIOS</primary>
	  </indexterm>

	  <indexterm>
	    <primary>PPP</primary>

	    <secondary>&microsoft; extensies</secondary>
	  </indexterm>

	  <para>Het is mogelijk om PPP dusdanig te configuren dat deze
	    DNS en NetBIOS naamserver adressen meegeeft.</para>

	  <para>Om deze extensies in te schakelen met PPP versie 1.x
	    kunnen de volgende regels toegevoegd worden aan de relevante
	    sectie in <filename>/etc/ppp/ppp.conf</filename>:</para>

	  <programlisting>enable msext
set ns 203.14.100.1 203.14.100.2
set nbns 203.14.100.5</programlisting>

	  <para>en voor PPP versie 2 en hoger:</para>

	  <programlisting>accept dns
set dns 203.14.100.1 203.14.100.2
set nbns 203.14.100.5</programlisting>

	  <para>Dit verteld de cliënt het primaire en secundaire
	    naamserver adres, en geeft een NetBIOS naamserver
	    adres.</para>

	  <para>In versie 2 en hoger zal PPP gebruik maken van de
	    instellingen in <filename>/etc/resolv.conf</filename>
	    als de regel <literal>set dns</literal> niet wordt
	    gevonden.</para>
	</sect4>

	<sect4 xml:id="userppp-PAPnCHAP">
	  <title>PAP en CHAP authenticatie</title>

	  <indexterm><primary>PAP</primary></indexterm>

	  <indexterm><primary>CHAP</primary></indexterm>

	  <para>Sommige providers stellen hun systemen dusdanig in dat
	    het authenticatie gedeelte van uw verbinding wordt
	    afgehandeld door het PAP of CHAP authenticatie mechanisme.
	    Als dit het geval is zal uw provider u niet voorzien van een
	    <prompt>login:</prompt> prompt wanneer u verbinding maakt
	    maar zal deze meteen gaan communiceren over het PPP
	    protocol.</para>

	  <para>PAP is minder veilig dan CHAP, maar beveiliging is meestal
	    geen probleem omdat wachtwoorden, ook al worden deze in platte
	    tekst verstuurd met PAP, alleen worden verstuurd via een
	    seriële lijn.  Hier is maar weinig ruimte voor crackers
	    om stiekem mee te luisteren.</para>

	  <para>Terug verwijzende naar de <link linkend="userppp-staticIP">PPP en statische IP-adressen</link>
	    of <link linkend="userppp-dynamicIP">PPP en dynamische IP-adressen</link>
	    secties moeten de volgende aanpassingen gedaan worden:</para>

	  <programlisting>13      set authname <replaceable>Mijngebruikersnaam</replaceable>
14      set authkey <replaceable>Mijnwachtwoord</replaceable>
15      set login</programlisting>

	  <variablelist>
	    <varlistentry>
	      <term>Regel 13:</term>

	      <listitem>
		<para>Deze regel geeft uw PPP/CHAP gebruikersnaam aan.
		  U moet de juiste waardes invullen voor
		  <replaceable>Mijngebruikersnaam</replaceable>.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>Regel 14:</term>

	      <listitem>
		<para>Deze regel geeft uw PPP/CHAP wachtwoord<indexterm><primary>password</primary></indexterm> aan.
		  U moet de juiste waarde invullen voor
		  <replaceable>Mijnwachtwoord</replaceable>.  Misschien
		  wilt u een extra regel toevoegen als:</para>

		<programlisting>16      accept PAP</programlisting>

		<para>of</para>

		<programlisting>16      accept CHAP</programlisting>

		<para>om duidelijk te maken op welke manier u wilt
		  authenticeren, standaard worden zowel PAP als CHAP
		  geaccepteerd.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>Regel 15:</term>

	      <listitem>
		<para>Uw ISP zal normaal gesprokken niet eisen dat u
		  op de server aanlogt als u gebruik maakt van PAP of
		  CHAP.  Daarom moet u de <quote>set login</quote> regel
		  uitschakelen.</para>
	      </listitem>
	    </varlistentry>
	  </variablelist>
	</sect4>

	<sect4>
	  <title>Het aanpassen van uw <command>ppp</command> configuratie
	    terwijl deze in gebruik is</title>

	  <para>Het is mogelijk om tegen met het <command>ppp</command>
	    programma te communiceren terwijl deze in gebruik is op de
	    achtergrond, maar dat kan alleen als er een geschikte
	    diagnostische poort ingesteld is.  Om dit te kunnen doen
	    moet de volgende regel worden toegevoegd aan de
	    configuratie:</para>

	  <programlisting>set server /var/run/ppp-tun<replaceable>%d</replaceable> DiagnosticPassword 0177</programlisting>

	  <para>Dit vertelt PPP om te luisteren naar het gespecificeerde
	    &unix; domein socket, waarbij de cliënten gevraagd
	    worden om het opgegeven wachtwoord voordat toegang
	    verleend kan worden.  Het <literal>%d</literal> in de
	    naam wordt vervangen door het <filename>tun</filename>
	    apparaat dat gebruikt wordt voor de verbinding.</para>

	  <para>Zodra een socket ingesteld is kan het &man.pppctl.8;
	    programma gebruikt worden in scripts die het draaiende
	    programma willen bewerken.</para>
	</sect4>
      </sect3>

      <sect3 xml:id="userppp-nat">
	<title>De vertaalmogelijkheden van PPP voor netwerkadressen
	  gebruiken</title>

	<indexterm>
	  <primary>PPP</primary>

	  <secondary>NAT</secondary>
	</indexterm>

	<para>PPP heeft de mogelijkheid om interne NAT te gebruiken zonder
	  dat de kernel hiervoor iets hoeft te doen.  Deze functionaliteit
	  kan worden ingeschakeld door de volgende regel in
	  <filename>/etc/ppp/ppp.conf</filename>:</para>

	<programlisting>nat enable yes</programlisting>

	<para>Ook kan PPP NAT ingeschakeld worden door de optie
	  <literal>-nat</literal>.  Er is ook een
	  <filename>/etc/rc.conf</filename> optie genaamd
	  <literal>ppp_nat</literal> welke standaard ingeschakeld
	  is.</para>

	<para>Als u gebruik wilt maken van deze optie, kunt u de
	  volgende <filename>/etc/ppp/ppp.conf</filename> opties ook
	  nuttig vinden om binnenkomende connecties door te sturen:</para>

	<programlisting>nat port tcp 10.0.0.2:ftp ftp
nat port tcp 10.0.0.2:http http</programlisting>

	<para>of als u niets vertrouwd vanaf buitenaf:</para>

	<programlisting>nat deny_incoming yes</programlisting>
      </sect3>

      <sect3 xml:id="userppp-final">
	<title>Laatste systeemconfiguratie</title>

	<indexterm>
	  <primary>PPP</primary>

	  <secondary>configuratie</secondary>
	</indexterm>

	<para>U heeft nu <command>ppp</command> geconfigurerd, maar er
	  moeten nog een aantal dingen gedaan worden voordat deze klaar
	  is om te kunnen werken.  Hiervoor moeten een aantal
	  aanpassingen gedaan worden in het bestand
	  <filename>/etc/rc.conf</filename>.</para>

	<para>Van boven naar beneden kijkende zorgen we er als eerste
	  voor dat de <literal>hostname=</literal> regel ingesteld
	  is met bijvoorbeeld:</para>

	<programlisting>hostname="foo.example.com"</programlisting>

	<para>Als uw provider u een statisch adres en een naam heeft
	  gegeven is het waarschijnlijk handig dat u deze naam gebruikt
	  als uw hostnaam.</para>

	<para>Zoek naar de <literal>network_interfaces</literal>
	  variabele.  Als u uw systeem wilt configuren om in te bellen
	  bij uw provider wanneer nodig, zorg er dan voor dat het
	  <filename>tun0</filename> apparaat is toegevoegd aan deze
	  lijst.  Haal deze anders weg.</para>

	<programlisting>network_interfaces="lo0 tun0"
ifconfig_tun0=</programlisting>

	<note>
	  <para>De <literal>ifconfig_tun0</literal> variabele moet
	    leeg zijn, en een bestand genaamd
	    <filename>/etc/start_if.tun0</filename> moet aangemaakt
	    worden met de volgende inhoud:</para>

	  <programlisting>ppp -auto mysystem</programlisting>

	  <para>Dit script wordt uitgevoerd tijdens de netwerk
	    configuratie, waarbij uw ppp daemon wordt gestart in
	    automatische mode.  Als u een LAN heeft waarvoor deze
	    machine een router is wilt u wellicht ook de
	    <option>-alias</option> meegeven.  Bekijk de handleiding
	    voor verdere details.</para>
	</note>

	<para>Zorg ervoor dat het router programma is ingesteld op
	  <literal>NO</literal> door middel van de volgende regel in
	  uw <filename>/etc/rc.conf</filename> bestand:</para>

	<programlisting>router_enable="NO"</programlisting>

	<indexterm>
	  <primary><application>routed</application></primary>
	</indexterm>

	<para>Het is belangrijk dat de <command>routed</command> daemon
	  niet gestart wordt, omdat <command>routed</command> de neiging
	  heeft om de standaard routeringtabel regels die gemaakt
	  worden door <command>ppp</command> te verwijderen.</para>

	<para>Het is waarschijnlijk een goed idee om te zorgen dat de
	  <literal>sendmail_flags</literal> regel de <option>-q</option>
	  optie niet wordt meegenomen, anders zal
	  <command>sendmail</command> periodiek een zoek actie
	  verrichten op het netwerk, wat ervoor zorgt dat uw machine
	  gaat uitbellen.  U kunt het volgende instellen:</para>

	<programlisting>sendmail_flags="-bd"</programlisting>

	<indexterm>
	  <primary><application>sendmail</application></primary>
	</indexterm>

	<para>Het nadeel hiervan is dat u <command>sendmail</command>
	  moet forceren om de mailqueue periodiek te bekijken zodra
	  de ppp link op is door het typen van:</para>

	<screen>&prompt.root; <userinput>/usr/sbin/sendmail -q</userinput></screen>

	<para>U wilt wellicht gebruik maken van het
	  <command>!bg</command> commando in
	  <filename>ppp.linkup</filename> om dit automatisch te
	  doen:</para>

	<programlisting>1     provider:
2       delete ALL
3       add 0 0 HISADDR
4       !bg sendmail -bd -q30m</programlisting>

	<indexterm>
	  <primary>SMTP</primary>
	</indexterm>

	<para>Als u dit niet wilt doen, is het mogelijk om een
	  <quote>dfiler</quote> in te stellen welke SMTP verkeer
	  blokkeert.  Raadpleeg naar de voorbeeld bestanden voor
	  verdere details.</para>

	<para>Alles wat nu nog nodig is, is het herstarten van de
	  machine.  Na het herstarten kunt het volgende typen:</para>

	<screen>&prompt.root; <userinput>ppp</userinput></screen>

	<para>en daarna <command>dial provider</command> om de PPP
	  sessie te starten, of u indien u dat wilt kan
	  <command>ppp</command> automatisch sessies opzetten wanneer
	  er uitgaand verkeer is (en wanneer u geen
	  <filename>start_if.tun0</filename> script heeft aangemaakt),
	  typt u:</para>

	<screen>&prompt.root; <userinput>ppp -auto provider</userinput></screen>
      </sect3>

      <sect3>
	<title>Samenvatting</title>

	<para>Om samen te vatten zijn de volgende stappen benodigd om PPP
	  voor de eerste keer in te stellen:</para>

	<para>Aan de cliënt zijde:</para>

	<procedure>
	  <step>
	    <para>Zorg ervoor dat het <filename>tun</filename>
	      apparaat is ingeschakeld in uw kernel.</para>
	  </step>

	  <step>
	    <para>Zorg ervoor dat het apparaatbestand <filename>tunN</filename>
	      beschikbaar is in de map <filename>/dev</filename>.</para>
	  </step>

	  <step>
	    <para>Creeër een regel in
	      <filename>/etc/ppp/ppp.conf</filename>.  Het
	      <filename>pmdemand</filename> voorbeeld zou moeten
	      volstaand voor de meeste providers.</para>
	  </step>

	  <step>
	    <para>Als u dynamische IP-adressen heeft, creeër een
	      regel in <filename>/etc/ppp/ppp.linkup</filename>.</para>
	  </step>

	  <step>
	    <para>Update uw <filename>/etc/rc.conf</filename>
	      bestand.</para>
	  </step>

	  <step>
	    <para>Creeër een <filename>start_if.tun0</filename>
	      script als u op verzoek wilt inbellen.</para>
	  </step>
	</procedure>

	<para>Aan de server zijde:</para>

	<procedure>
	  <step>
	    <para>Zorg ervoor dat het <filename>tun</filename>
	      apparaat is ingeschakeld in uw kernel.</para>
	  </step>

	  <step>
	    <para>Zorg ervoor dat het apparaatbestand
	      <filename>tunN</filename>
	      beschikbaar is in de map <filename>/dev</filename>.</para>
	  </step>

	  <step>
	    <para>Creeër een regel in
	      <filename>/etc/passwd</filename> (door gebruik te maken
	      van het &man.vipw.8; programma).</para>
	  </step>

	  <step>
	    <para>Creeër een profiel in deze gebruikers home
	      directory die
	      <command>ppp -direct direct-server</command> start of
	      iets in die trant.</para>
	  </step>

	  <step>
	    <para>Creeër een regel in
	      <filename>/etc/ppp/ppp.conf</filename>.  Het
	      <filename>direct-server</filename> voorbeeld zou moeten
	      volstaan.</para>
	  </step>

	  <step>
	    <para>Creeër een regel in
	      <filename>/etc/ppp/ppp.linkup</filename>.</para>
	  </step>

	  <step>
	    <para>Update uw <filename>/etc/rc.conf</filename>
	      bestand.</para>
	  </step>
	</procedure>
      </sect3>
    </sect2>
  </sect1>

  <sect1 xml:id="ppp">
    <info><title>Kernel-PPP gebruiken</title>
      <authorgroup>
	<author><personname><firstname>Gennady B.</firstname><surname>Sorokopud</surname></personname><contrib>Delen origineel bijgedragen door </contrib></author>
	<author><personname><firstname>Robert</firstname><surname>Huff</surname></personname></author>
      </authorgroup>
    </info>

    

    <sect2>
      <title>Het opzetten van kernel-PPP</title>

      <warning>
	<para>Deze sectie geldt en is alleen geldig voor &os;&nbsp;7.X.</para>
      </warning>

      <indexterm>
	<primary>PPP</primary>

	<secondary>kernel-PPP</secondary>
      </indexterm>

      <para>Voordat u begint met het opzetten van PPP op uw machine,
	zorg ervoor dat het <command>pppd</command> commando zich
	bevindt in de map <filename>/usr/sbin</filename>
	en dat de map <filename>/etc/ppp</filename>
	bestaat.</para>

      <para><command>pppd</command> kan in twee verschillende modes
	werken:</para>

      <orderedlist>
	<listitem>
	  <para>Als een <quote>cliënt</quote> &mdash; u wilt uw
	    machine verbinden met de buitenwereld via een seriële
	    PPP-verbinding of een modemlijn.</para>
	</listitem>

	<listitem>
	  <para>Als een <quote>server</quote><indexterm><primary>PPP</primary><secondary>server</secondary></indexterm> &mdash; uw machine bevind
	    zich in het netwerk en wordt gebruikt om andere computers
	    te verbinden door middel van PPP.</para>
	</listitem>
      </orderedlist>

      <para>In beide gevallen moet u een bestand met opties instellen
	(<filename>/etc/ppp/options</filename> of
	<filename>~/.ppprc</filename> als er meer dan één
	gebruiker is op uw machine die gebruik maakt van PPP).</para>

      <para>U heeft ook enige modem/seriële software nodig
	(<package>comms/kermit</package> wordt
	aanbevolen), zodat u de andere kant kunt bellen en een
	verbinding kunt opzetten.</para>
    </sect2>

    <sect2>
      <info><title>Gebruik maken van <command>pppd</command> als
	cliënt</title>
	<authorgroup>
	  <author><personname><firstname>Trev</firstname><surname>Roydhouse</surname></personname><contrib>Gebaseerd op informatie geleverd door </contrib></author>
	</authorgroup>
      </info>

      

      <indexterm>
	<primary>PPP</primary>

	<secondary>cliënt</secondary>
      </indexterm>

      <indexterm>
	<primary>Cisco</primary>
      </indexterm>

      <para>De volgende <filename>/etc/ppp/options</filename> kan
	gebruikt worden om met een Cisco terminal server PPP lijn
	verbinding te maken.</para>

      <programlisting>crtscts         # Schakel hardware flow controle in
modem           # modem controle lijn
noipdefault     # De PPP-server aan de andere kant moet uw IP-adres
                # opgeven, als de machine aan de andere kant uw IP
                # adres niet meegeeft tijdens de IPCP onderhandeling
                # moet deze optie worden verwijderd
passive         # Wacht op LCP pakketten
domain ppp.foo.com      # Vul uw domein naam hier in

:<replaceable>remote_ip</replaceable>    # Vul het IP-adres van de PPP
                # server in deze wordt gebruikt om pakketten te
                # routeren via de PPP link.  Als u de noipdefault optie
                # niet heeft aangegeven verander dan deze regel in
                # <replaceable>local_ip</replaceable>:<replaceable>remote_ip</replaceable>

defaultroute    # Vul dit in als u wilt dat de PPP server de standaard
                # router wordt</programlisting>

      <para>Om verbinding te maken:</para>

      <indexterm><primary>Kermit</primary></indexterm>

      <indexterm><primary>modem</primary></indexterm>

      <procedure>
	<step>
	  <para>Bel naar de machine aan de andere kant door middel van
	    <application>Kermit</application> (of een ander modem
	    programma), en vul uw gebruikersnaam en wachtwoord in (of
	    wat er ook nodig is om de verbinding op te brengen met de
	    machine aan de andere kant).</para>
	</step>

	<step>
	  <para>Stop <application>Kermit</application> (zonder de lijn
	    op te hangen).</para>
	</step>

	<step>
	  <para>Type het volgende:</para>

	  <screen>&prompt.root; <userinput>/usr/sbin/pppd /dev/tty01 19200</userinput></screen>

	  <para>Wees er zeker van dat de juiste snelheid en het juiste
	    apparaat wordt aangesproken.</para>
	</step>
      </procedure>

      <para>Uw computer is nu verbonden met PPP.  Als de connectie
	faalt, kan de <option>debug</option> optie worden meegegeven
	in het <filename>/etc/ppp/options</filename> bestand waarna op
	de console berichten kunnen worden geraadpleegd om het probleem
	te achterhalen.</para>

      <para>Het volgende <filename>/etc/ppp/pppup</filename> script
	zal alle drie de stappen automatisch doen:</para>

      <programlisting>#!/bin/sh
pgrep -l pppd
pid=`pgrep pppd`
if [ "X${pid}" != "X" ] ; then
        echo 'killing pppd, PID=' ${pid}
        kill ${pid}
fi
pgrep -l kermit
pid=`pgrep kermit`
if [ "X${pid}" != "X" ] ; then
        echo 'killing kermit, PID=' ${pid}
        kill -9 ${pid}
fi

ifconfig ppp0 down
ifconfig ppp0 delete

kermit -y /etc/ppp/kermit.dial
pppd /dev/tty01 19200</programlisting>

      <indexterm>
	<primary>Kermit</primary>
      </indexterm>

      <para><filename>/etc/ppp/kermit.dial</filename> is een
	<application>Kermit</application> script dat belt en alle
	benodigde authorisaties doet op de machine aan de andere
	kant (een voorbeeld van zo'n script is bijgevoegd aan het
	einde van dit document).</para>

      <para>Gebruik het volgende <filename>/etc/ppp/pppdown</filename>
	script om de PPP lijn af te breken:</para>

      <programlisting>#!/bin/sh
pid=`pgrep pppd`
if [ X${pid} != "X" ] ; then
        echo 'killing pppd, PID=' ${pid}
        kill -TERM ${pid}
fi

pgrep -l kermit
pid=`pgrep kermit`
if [ "X${pid}" != "X" ] ; then
        echo 'killing kermit, PID=' ${pid}
        kill -9 ${pid}
fi

/sbin/ifconfig ppp0 down
/sbin/ifconfig ppp0 delete
kermit -y /etc/ppp/kermit.hup
/etc/ppp/ppptest</programlisting>

      <para>Controleer of <command>pppd</command> nog steeds draait door
	het uitvoeren van <filename>/usr/etc/ppp/ppptest</filename>,
	welke er als volgend uitziet:</para>

      <programlisting>#!/bin/sh
pid=`pgrep pppd`
if [ X${pid} != "X" ] ; then
        echo 'pppd running: PID=' ${pid-NONE}
else
        echo 'No pppd running.'
fi
set -x
netstat -n -I ppp0
ifconfig ppp0</programlisting>

      <para>Om het modem op te hangen, voer het
	<filename>/etc/ppp/kermit.hup</filename> script uit
	welke het volgende bevat:</para>

      <programlisting>set line /dev/tty01	; vul hier uw modem in
set speed 19200
set file type binary
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none

pau 1
out +++
inp 5 OK
out ATH0\13
echo \13
exit</programlisting>

      <para>Hier is een alternatieve methode welke gebruik maakt
	van <command>chat</command> in plaats van
	<command>kermit</command>:</para>

      <para>De volgende twee regels zijn voldoende om een
	<command>pppd</command> verbinding op te zetten.</para>

      <para><filename>/etc/ppp/options</filename>:</para>

      <programlisting>/dev/cuad1 115200

crtscts         # Schakel hardware flow controle in
modem           # modem controle lijn
connect "/usr/bin/chat -f /etc/ppp/login.chat.script"
noipdefault     # De PPP server aan de andere kant moet uw IP-adres
                # opgeven, als de machine aan de andere kant uw IP
                # adres niet meegeeft tijdens de IPCP onderhandeling
                # moet deze optie worden verwijderd
passive         # Wacht op LCP pakketten
domain <replaceable>your.domain</replaceable>   # Vul uw domein naam hier in

:<replaceable>remote_ip</replaceable>    # Vul het IP-adres van de PPP
                # server in deze wordt gebruikt om pakketten te
                # routeren via de PPP link.  Als u de noipdefault optie
                # niet heeft aangegeven verander dan deze regel in
                # <replaceable>local_ip</replaceable>:<replaceable>remote_ip</replaceable>

defaultroute    # Vul dit in als u wilt dat de PPP server de standaard
                # router wordt</programlisting>

      <para><filename>/etc/ppp/login.chat.script</filename>:</para>

      <note>
	<para>Het volgende moet op één regel.</para>
      </note>

      <programlisting>ABORT BUSY ABORT 'NO CARRIER' "" AT OK ATDT<replaceable>telefoon.nummer</replaceable>
  CONNECT "" TIMEOUT 10 ogin:-\\r-ogin: <replaceable>login-id</replaceable>
  TIMEOUT 5 sword: <replaceable>password</replaceable></programlisting>

      <para>Zodra deze zijn geïnstalleerd en correct aangepast is
	het enige dat gedaan moet worden, het starten van
	<command>pppd</command> zoals volgt:</para>

      <screen>&prompt.root; <userinput>pppd</userinput></screen>
    </sect2>

    <sect2>
      <title>Gebruik maken van <command>pppd</command> als
	server</title>

      <para><filename>/etc/ppp/options</filename> moet ongeveer het
	volgende bevatten:</para>

      <programlisting>crtscts                         # Hardware flow controle
netmask 255.255.255.0           # netmask (niet vereist)
192.114.208.20:192.114.208.165  # IP's van lokale en niet lokale hosten
                                # het lokale IP moet anders zijn dan
                                # degeen die is toegewezen aan de
                                # Ethernet (of andere) interface op uw
                                # machine.  remote IP is het IP-adres
                                # dat wordt toegewezen aan de machine
                                # aan de andere kant
domain ppp.foo.com              # uw domein
passive                         # Wacht op LCP
modem                           # modem lijn</programlisting>

      <para>Het volgende <filename>/etc/ppp/pppserv</filename> script
	zal <application>pppd</application> vertellen zich te gedragen
	als server:</para>

      <programlisting>#!/bin/sh
pgrep -l pppd
pid=`pgrep pppd`
if [ "X${pid}" != "X" ] ; then
        echo 'killing pppd, PID=' ${pid}
        kill ${pid}
fi
pgrep -l kermit
pid=`pgrep kermit`
if [ "X${pid}" != "X" ] ; then
        echo 'killing kermit, PID=' ${pid}
        kill -9 ${pid}
fi

# reset ppp interface
ifconfig ppp0 down
ifconfig ppp0 delete

# enable autoanswer mode
kermit -y /etc/ppp/kermit.ans

# run ppp
pppd /dev/tty01 19200</programlisting>

      <para>Gebruik dit <filename>/etc/ppp/pppservdown</filename> script
	om de server te stoppen:</para>

      <programlisting>#!/bin/sh
pgrep -l pppd
pid=`pgrep pppd`
if [ "X${pid}" != "X" ] ; then
        echo 'killing pppd, PID=' ${pid}
        kill ${pid}
fi
pgrep -l kermit
pid=`pgrep kermit`
if [ "X${pid}" != "X" ] ; then
        echo 'killing kermit, PID=' ${pid}
        kill -9 ${pid}
fi
ifconfig ppp0 down
ifconfig ppp0 delete

kermit -y /etc/ppp/kermit.noans</programlisting>

      <para>Het volgende <application>Kermit</application> script
	(<filename>/etc/ppp/kermit.ans</filename>) zal het automatisch
	beantwoorden van uw modem in of uitschakelen.  Het moet eruit
	zien als volgend:</para>

      <programlisting>set line /dev/tty01
set speed 19200
set file type binary
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none

pau 1
out +++
inp 5 OK
out ATH0\13
inp 5 OK
echo \13
out ATS0=1\13   ; Verander dit in out ATS0=0\13 als u automatisch
                ; beantwoorden wilt uitschakelen
inp 5 OK
echo \13
exit</programlisting>

      <para>Een script genaamd <filename>/etc/ppp/kermit.dial</filename>
	wordt gebruikt voor het bellen en authenticeren van de machine
	aan de andere kant.  U moet deze aanpassen aan uw wensen.  Vul in
	dit script uw inlognaam en wachtwoord in, u moet ook het input
	statement aanpassen afhankelijk hoe uw modem antwoordt en de
	communicatie van de machine aan de andere kant.</para>

      <programlisting>;
; Vul de seriële lijn in welke verbonden is met het modem
;
set line /dev/tty01
;
; Stel het modem snelheid in:
;
set speed 19200
set file type binary            ; volledige 8 bit bestands xfer
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none
set modem hayes
set dial hangup off
set carrier auto                ; Daarna stel SET CARRIER in indien nodig
set dial display on             ; Stel daarna SET DIAL in indien nodig
set input echo on
set input timeout proceed
set input case ignore
def \%x 0                       ; login prompt teller
goto slhup

:slcmd                          ; stel het modem in op commandomodus
echo Stel het modem in op commandomodus.
clear                           ; Verwijder ongelezen karakters uit de input buffer
pause 1
output +++                      ; hayes escape sequence
input 1 OK\13\10                ; wacht op OK
if success goto slhup
output \13
pause 1
output at\13
input 1 OK\13\10
if fail goto slcmd              ; Als het modem niet antwoordt met OK, probeer het opnieuw

:slhup                          ; hang de telefoon op
clear                           ; Verwijder ongelezen karakters uit de input buffer
pause 1
echo De telefoon wordt opgehangen.
output ath0\13                  ; hayes command voo on hook
input 2 OK\13\10
if fail goto slcmd              ; Als er geen OK antwoord is, stel het modem in op commandomodus

:sldial                         ; Draai het nummer
pause 1
echo Bellen.
output atdt9,550311\13\10               ; put phone number here
assign \%x 0                    ; zero the time counter

:look
clear                           ; Verwijder ongelezen karakters uit de input buffer
increment \%x                   ; Tel de seconden
input 1 {CONNECT }
if success goto sllogin
reinput 1 {NO CARRIER\13\10}
if success goto sldial
reinput 1 {NO DIALTONE\13\10}
if success goto slnodial
reinput 1 {\255}
if success goto slhup
reinput 1 {\127}
if success goto slhup
if &lt; \%x 60 goto look
else goto slhup

:sllogin                        ; login
assign \%x 0                    ; Stel de tijd teller in op nul
pause 1
echo Zoeken naar de login prompt

:slloop
increment \%x                   ; Tel de seconden
clear                           ; Verwijder ongelezen karakters uit de input buffer
output \13
;
; Stel hier de verwachte login prompt in:
;
input 1 {Username: }
if success goto sluid
reinput 1 {\255}
if success goto slhup
reinput 1 {\127}
if success goto slhup
if &lt; \%x 10 goto slloop         ; Probeer 10 x om een login prompt te krijgen
else goto slhup                 ; Hang op en probeer het nogmaals als er 10 mislukte pogingen zijn

:sluid
;
; Vul hier uw gebruikersnaam in:
;
output ppp-login\13
input 1 {Password: }
;
; Vul hier uw wachtwoord in:
;
output ppp-password\13
input 1 {Entering SLIP mode.}
echo
quit

:slnodial
echo \7Er is geen kiestoon, controleer de telefoon lijn!\7
exit 1

; local variables:
; mode: csh
; comment-start: "; "
; comment-start-skip: "; "
; end:</programlisting>
    </sect2>
  </sect1>

  <sect1 xml:id="ppp-troubleshoot">
    <info><title>Het problemen oplossen van
      <acronym>PPP</acronym>-verbindingen</title>
      <authorgroup>
	<author><personname><firstname>Tom</firstname><surname>Rhodes</surname></personname><contrib>Bijgedragen door </contrib></author>
      </authorgroup>
      
    </info>
    

    <indexterm>
      <primary>PPP</primary>

      <secondary>troubleshooten</secondary>
    </indexterm>

    <para>Deze sectie behandelt een paar problemen die kunnen
      optreden wanneer PPP wordt gebruikt over een modemverbinding.
      Bijvoorbeeld, misschien moet u exact weten wat de prompt is
      die het systeem waarop u inbelt presenteert.  Sommige
      providers presenteren de <literal>ssword</literal>
      prompt terwijl anderen <literal>password</literal> tonen
      als het <command>ppp</command> script niet goed geschreven is
      en de inlogin poging faalt.  De meest standaard manier om
      <command>ppp</command> verbindingen te onderzoeken op problemen
      is door handmatig een connectie op te zetten.  De volgende
      informatie helpt u om stap voor stap een handmatige connectie op
      te zetten.</para>

    <sect2>
      <title>Controleer de apparaatknooppunten</title>

      <para>Als er een eigen kernel gebruikt wordt, vergeet dan niet om
	de volgende regel in uw kernelinstellingenbestand op te
	nemen:</para>

      <programlisting>device	uart</programlisting>

      <para>Het apparaat <filename>uart</filename> is al in de kernel
	<literal>GENERIC</literal> opgenomen, dus zijn er in dit geval
	geen extra stappen nodig.  Controleer de resultaten van het
	commando <command>dmesg</command> voor het modemapparaat door
	middel van:</para>

      <screen>&prompt.root; <userinput>dmesg | grep uart</userinput></screen>

      <para>U zou enige informatie moeten ontvangen over de
	<filename>uart</filename> apparaten.  Deze bevinden zich op
	de COM-poorten die we nodig hebben.  Als uw modem zich gedraagt
	als een standaard seriële poort zou u deze moeten vinden
	als zijnde <filename>uart1</filename> of
	<filename>COM2</filename>.  Als dat klopt hoeft u de kernel
	niet opnieuw te bouwen.  Wanneer u de sio-apparaten controleert
	en het modem is op <filename>uart1</filename> te vinden of als
	<filename>COM2</filename> als u zich onder &ms-dos; bevindt,
	dan is uw modemapparaat
	<filename>/dev/cuau1</filename>.</para>
    </sect2>

    <sect2>
      <title>Handmatig verbinding maken</title>

      <para>Verbinding maken met het internet door handmatig controle
	te hebben over <command>ppp</command> is snel, makkelijk en een
	geweldige manier om problemen te vinden bij een verbinding
	of zelfs voor alleen het verkrijgen van inforamtie over hoe uw
	provider de <command>ppp</command> cliënt verbindingen
	behandelt.  Laten we starten met <application>PPP</application>
	vanaf de commando regel.  Let op dat in al onze voorbeelden we
	gebruik maken van <emphasis>example</emphasis> als hostnaam
	van de machine die <application>PPP</application> draait.  U
	start <command>ppp</command> door enkel het commando
	<command>ppp</command> te typen:</para>

      <screen>&prompt.root; <userinput>ppp</userinput></screen>

      <para>We hebben nu <command>ppp</command> gestart.</para>

      <screen>ppp ON example&gt; <userinput>set device /dev/cuau1</userinput></screen>

      <para>We stellen ons modem in, in dit geval is dat
	<filename>cuau1</filename>.</para>

      <screen>ppp ON example&gt; <userinput>set speed 115200</userinput></screen>

      <para>We stellen de verbindings snelheid in, in dit geval
	gebruiken we 115,200 <acronym>kbps</acronym>.</para>

      <screen>ppp ON example&gt; <userinput>enable dns</userinput></screen>

      <para>Vertel <command>ppp</command> om onze naam vertaler te
	configuren, en de juiste naamserver regels toe te voegen aan
	<filename>/etc/resolv.conf</filename>.  Als <command>ppp</command>
	onze hostnaam niet kan bepalen, kunnen we deze later
	instellen.</para>

      <screen>ppp ON example&gt; <userinput>term</userinput></screen>

      <para>Wissel naar <quote>terminal</quote> mode zodat we handmatig
	het modem kunnen bedienen.</para>

      <programlisting>deflink: Entering terminal mode on <filename>/dev/cuau1</filename>
type '~h' for help</programlisting>

      <screen><userinput>at</userinput>
OK
<userinput>atdt123456789</userinput></screen>

      <para>Gebruik <command>at</command> om het modem te initialiseren,
	en daarna <command>atdt</command> en het nummer voor uw provider
	om het inbel proces te beginnen.</para>

      <screen>CONNECT</screen>

      <para>Bevestiging van de verbinding, als we tegen problemen
	aanlopen met de verbinding, welke niet gerelateerd zijn aan de
	hardware, is dit de plek om te beginnen om de problemen op te
	lossen.</para>

      <screen>provider login:<userinput>myusername</userinput></screen>

      <para>Hier wordt u gevraagd om een gebruikersnaam.  Geef de
	gebruikersnaam op welke aangeleverd is door de provider.</para>

      <screen>provider pass:<userinput>mypassword</userinput></screen>

      <para>Deze keer worden we gevraagd voor een wachtwoord.
	Vul uw wachtwoord in welke u is aangeleverd door de provider.
	Net zoals het aanloggen op &os; zal het wachtwoord niet
	getoond worden.</para>

      <screen>Shell or PPP:<userinput>ppp</userinput></screen>

      <para>Afhankelijk van uw provider wordt deze prompt wellicht
	nooit getoond.  Hier wordt ons gevraagd of we een shell willen
	starten op de host van de provider, of dat we
	<command>ppp</command> willen starten.  In dit geval is er
	gekozen voor <command>ppp</command> omdat we een internet
	verbinding willen.</para>

      <screen>Ppp ON example&gt;</screen>

      <para>Let op dat in dit voorbeeld de eerste <option>p</option>
	een hoofdletter geworden is.  Dit geeft aan dat we succesvol
	verbonden zijn met de provider.</para>

      <screen>PPp ON example&gt;</screen>

      <para>We hebben ons succesvol geauthenticeerd bij onze
	provider en we wachten op een IP-adres dat ons wordt
	toegewezen.</para>

      <screen>PPP ON example&gt;</screen>

      <para>We hebben een <acronym>IP</acronym> adres verkregen en
	hebben succesvol een verbinding opgebouwd.</para>

      <screen>PPP ON example&gt;<userinput>add default HISADDR</userinput></screen>

      <para>Hier wordt een standaard route toegevoegd.  Deze moet worden
	toegevoegd voordat we kunnen communiceren met de buitenwereld
	aangezien de enige verbinding op dit moment met de andere machine
	is.  Als dit niet lukt omdat er al een route bestaat, kan er een
	<quote>bang</quote> karakter (<literal>!</literal>) geplaatst
	worden voor de <option>add</option> optie.  Als alternatief kan
	dit ook gedaan worden voordat de verbinding opgezet wordt,
	waarna een nieuwe route onderhandeld wordt.</para>

      <para>Als alles goed gegaan is, zou er nu een actieve
	verbinding moeten zijn met het internet, welke in de
	achtergrond gezet kan worden door <keycombo action="simul"><keycap>CTRL</keycap><keycap>z</keycap></keycombo>
	te gebruiken.  Als u ziet dat het commando <command>PPP</command>
	terugkeert naar <command>ppp</command> is de verbinding afgebroken.
	Dit is goed om te weten, aangezien dit de status van de verbinding
	toont.  Hoofdletter P's betekenen dat er een verbinding is met
	de provider, en kleine letters betekend dat de verbinding
	verloren is gegaan om welke reden dan ook.
	<command>ppp</command> kent alleen deze twee statussen.</para>

      <sect3>
	<title>Debuggen</title>

	<para>Als u een directe lijn heeft en geen verbinding kan
	  maken, zet dan hardware flow <acronym>CTS/RTS</acronym> uit
	  met de <option>set ctsrts off</option> optie.  Dit is meestal
	  het geval voor een <application>PPP</application> terminal
	  server waar <application>PPP</application> hangt wanneer deze
	  probeert te schrijven naar uw communicatie link, dus moet deze
	  wachten op een <acronym>CTS</acronym> of een Clear To Send
	  signaal welke misschien nooit komt.  Als u deze optie gebruikt,
	  moet u ook de <option>set accmap</option> optie gebruiken
	  welke benodigd kan zijn om hardware afhankelijkheden te
	  omzeilen door bepaalde karakters over en weer te sturen,
	  meestal XON/XOFF.  Zie de &man.ppp.8; handleiding voor meer
	  informatie over deze optie en hoe deze gebruikt kan worden.</para>

	<para>Als u een ouder modem heeft, kan het voorkomen dat u ook
	  de <option>set parity even</option> optie moet gebruiken.
	  De parity is standaard ingesteld op none maar wordt gebruikt
	  voor fout controle (met als gevolg een grote verhoging van
	  de hoeveelheid data) bij oudere modems en sommige
	  providers.  Dit is bijvoorbeeld een benodigde optie bij de
	  Compuserve provider.</para>

	<para>Het kan voorkomen dat <application>PPP</application> niet
	  terugkeert naar de commando mode, wat meestal betekent dat er
	  een onderhandelings fout is waarbij de provider wacht op uw
	  kant om de onderhandeling te kunnen beginnen.  Op dit
	  moment kunt u gebruik maken van het <command>~p</command>
	  commando om ppp te forceren om de configuratie informatie
	  te versturen.</para>

	<para>Als u nooit een inlogin prompt krijgt is het zeer
	  waarschijnlijk dat u <acronym>PAP</acronym> of
	  <acronym>CHAP</acronym> authenticatie moet gebruiken in plaats
	  van de &unix; stijl in het voorbeeld hierboven.  Om gebruik te
	  maken van <acronym>PAP</acronym> of <acronym>CHAP</acronym>
	  voegt u het volgende opties toe aan
	  <application>PPP</application> voordat u de terminal mode
	  ingaat:</para>

	<screen>ppp ON example&gt; <userinput>set authname mijngebruikersnaam</userinput></screen>

	<para>Waarbij <replaceable>mijngebruikersnaam</replaceable> moet
	  worden vervangen met de gebruikersnaam die wordt toegewezen
	  door de provider.</para>

	<screen>ppp ON example&gt; <userinput>set authkey mijnwachtwoord</userinput></screen>

	<para>Waarbij <replaceable>mijnwachtwoord</replaceable> moet
	  worden vervangen door het wachtwoord wat u is toegewezen door
	  de provider.</para>

	<para>Als u een goed werkende verbinding kunt maken maar het
	  onmogelijk lijkt om een domeinnaam te vinden, probeert u
	  dan &man.ping.8; te gebruiken met een <acronym>IP</acronym>
	  adres en kijk of er enige informatie terugkomt.  Als u 100
	  procent (100%) packet loss ziet is het zeer waarschijnlijk
	  dat u geen default route heeft gekregen.  Controleer nogmaals
	  of de optie <option>add default HISADDR</option>
	  ingesteld is tijdens de connectie.  Als u verbinding kunt
	  maken met een extern <acronym>IP</acronym> adres is het
	  mogelijk dat een naamserver niet is toegevoegd aan het
	  <filename>/etc/resolv.conf</filename> bestand.  Dit bestand
	  moet er uitzien als volgend:</para>

	<programlisting>domain <replaceable>example.com</replaceable>
nameserver <replaceable>x.x.x.x</replaceable>
nameserver <replaceable>y.y.y.y</replaceable></programlisting>

	<para>Waar <replaceable>x.x.x.x</replaceable> en
	  <replaceable>y.y.y.y</replaceable> moet worden vervangen door
	  het <acronym>IP</acronym> adres van uw providers
	  naamservers.  Deze informatie kan mogelijk wel of niet
	  geleverd zijn toen u zich inschreef, maar een snel telefoontje
	  naar uw provider zou hierin uitkomst kunnen bieden.</para>

	<para>U kunt ook &man.syslog.3; gebruiken om een log functie
	  voor <application>PPP</application> aan te maken.  Voeg het
	  volgende toe aan <filename>/etc/syslog.conf</filename>:</para>

	<programlisting>!ppp
*.*     /var/log/ppp.log</programlisting>

	<para>Deze functionaliteit bestaat in de meeste gevallen al.</para>
      </sect3>
    </sect2>
  </sect1>

  <sect1 xml:id="pppoe">
    <info><title>PPP gebruiken over Ethernet (PPPoE)</title>
      <authorgroup>
	<author><personname><firstname>Jim</firstname><surname>Mock</surname></personname><contrib>Bijgedragen
	    (vanaf http://node.to/freebsd/how-tos/how-to-freebsd-pppoe.html)
	    door </contrib></author>
      </authorgroup>
      
    </info>

    

    <indexterm>
      <primary>PPP</primary>
      <secondary>over Ethernet</secondary>
    </indexterm>

    <indexterm>
      <primary>PPPoE</primary>
      <see>PPP, over Ethernet</see>
    </indexterm>

    <para>Deze sectie beschrijft hoe PPP over Ethernet opgezet kan worden
      (<acronym>PPPoE</acronym>).</para>

    <sect2>
      <title>Het configureren van de kernel</title>

      <para>Inmiddels is het niet langer benodigd om de kernel
	configuratie aan te passen voor PPPoE.  Als de benodigde
	netgraph ondersteuning niet in de kernel aanwezig is zal deze
	dynamisch geladen worden door
	<application>ppp</application>.</para>
    </sect2>

    <sect2>
      <title>Het instellen van <filename>ppp.conf</filename></title>

      <para>Hieronder volgt een voorbeeld van een werkende
	<filename>ppp.conf</filename>:</para>

      <programlisting>default:
  set log Phase tun command # Er kan meer gedetailleerde logging ingeschakeld worden indien gewenst
  set ifaddr 10.0.0.1/0 10.0.0.2/0

name_of_service_provider:
  set device PPPoE:<replaceable>xl1</replaceable> # Vervang x11 met uw ethernet apparaat
  set authname UWLOGINNAAM
  set authkey UWWACHTWOORD
  set dial
  set login
  add default HISADDR</programlisting>

    </sect2>

    <sect2>
      <title>Het draaien van <application>ppp</application></title>

      <para>Als de <systemitem class="username">root</systemitem> gebruiker kunt u het
	volgende draaien:</para>

      <screen>&prompt.root; <userinput>ppp -ddial name_of_service_provider</userinput></screen>
    </sect2>

    <sect2>
      <title>Het pstarten van <application>ppp</application> tijdens het
	opstarten</title>

      <para>Voeg het volgende toe aan uw
	<filename>/etc/rc.conf</filename> bestand:</para>

      <programlisting>ppp_enable="YES"
ppp_mode="ddial"
ppp_nat="YES"	# Indien u nat wilt inschakelen voor het lokale netwerk, gebruik anders NO
ppp_profile="naam_van_service_provider"</programlisting>
    </sect2>

    <sect2>
      <title>Gebruik maken van een PPPoE service label</title>

      <para>Soms is het nodig om een service tag te gebruiken om
	verbinding te kunnen maken.  Service tags worden gebruikt om
	onderscheid te maken tussen de verschillende PPPoE servers
	die verbonden zijn met een netwerk.</para>

      <para>Uw provider zou u de juiste service tag gegevens verstrekt
	moeten hebben in de documentatie die opgeleverd is.  Als u deze
	niet kunt vinden in de documentatie moet u deze opvragen bij uw
	technische support afdeling van uw provider.</para>

      <para>Als allerlaatste optie kunt u de aangerade methode gebruiken
	van het
	<link xlink:href="http://www.roaringpenguin.com/pppoe/">Roaring Penguin
	  PPPoE</link> programma welke gevonden kan worden in de <link linkend="ports">Ports Collectie</link>.  Houd u echter in uw
	achterhoofd dat dit uw modem ernstige schade kan toebrengen,
	dus denkt u er goed over na voordat u het uitprobeert.
	Installeer simpelweg het programma dat is meegeleverd bij het
	modem door uw provider.  Open hierna het
	<guimenu>System</guimenu> menu vanuit het programma.  De naam van
	uw profiel moet hier te vinden zijn.  Meestal is deze
	<emphasis>ISP</emphasis>.</para>

      <para>De naam van het profiel (servicetag) zal worden gebruikt in
	de PPPoE configuratie regel van <filename>ppp.conf</filename>
	in het provider gedeelte van het <command>set device</command>
	commando (zie de &man.ppp.8; handleiding voor meer informatie
	hierover).  Dit zou er als volgend uit moeten zien:</para>

      <programlisting>set device PPPoE:<replaceable>xl1</replaceable>:<replaceable>ISP</replaceable></programlisting>

      <para>Vergeet u niet om <replaceable>xl1</replaceable> te
	vervangen door het juiste apparaat voor uw Ethernet
	kaart.</para>

      <para>Vergeet u niet om <replaceable>ISP</replaceable> te
	vergangen door het profiel wat hierboven ingesteld is.</para>

      <para>Voor meer informatie zie:</para>

      <itemizedlist>
	<listitem>
	  <para><link xlink:href="http://renaud.waldura.com/doc/freebsd/pppoe/">Cheaper
	      Broadband with FreeBSD on DSL</link> door Renaud
	    Waldura.</para>
	</listitem>
      </itemizedlist>
    </sect2>

    <sect2 xml:id="ppp-3com">

      <title>PPPoE met een &tm.3com;
	<trademark class="registered">HomeConnect</trademark> ADSL Modem Dual
	Link</title>

      <para>Dit modem volgt <link xlink:href="http://www.faqs.org/rfcs/rfc2516.html">RFC 2516</link>
	niet (<emphasis>Een methode voor het versturen van PPP over
	  Ethernet (PPPoE)</emphasis> geschreven door by L. Mamakos,
	K. Lidl, J. Evarts, D. Carrel, D. Simone, and R. Wheeler).
	Daarentegen is een ander type pakket code gebruikt voor de
	Ethernet frames.  Klaagt u alstublift bij
	<link xlink:href="http://www.3com.com/">3Com</link> als u vind dat
	ze zich aan de PPPoE specificatie moeten houden.</para>

      <para>Om &os; in staat te stellen om te communiceren met dit
	apparaat, moet er een sysctl ingesteld worden.  Dit kan
	automatisch tijdens het opstarten gedaan worden door het
	bewerken van <filename>/etc/sysctl.conf</filename>:</para>

      <programlisting>net.graph.nonstandard_pppoe=1</programlisting>

      <para>Dit kan ook direct gedaan worden met het commando:</para>

      <screen>&prompt.root; <userinput>sysctl net.graph.nonstandard_pppoe=1</userinput></screen>

      <para>Helaas is het, doordat dit een systeem brede instelling is,
	niet mogelijk om tegelijkertijd met een normale PPPoE
	cliënt of server en een
	&tm.3com; <trademark class="registered">HomeConnect</trademark>
	ADSL-modem te communiceren.</para>

    </sect2>
  </sect1>

  <sect1 xml:id="pppoa">
    <title>Gebruik maken van <application>PPP</application> over ATM
      (PPPoA)</title>

    <indexterm>
      <primary>PPP</primary>

      <secondary>over ATM</secondary>
    </indexterm>

    <indexterm>
      <primary>PPPoA</primary>

      <see>PPP, over ATM</see>
    </indexterm>

    <para>Het volgende beschrijft hoe PPP over ATM (PPPoA) opgezet kan
      worden.  PPPoA is een populaire keuze binnen Europese DSL
      providers.</para>

    <sect2>
      <title>Gebruik maken van PPPoA met de Alcatel &speedtouch; USB</title>

      <para>PPPoA ondersteuning voor dit apparaat wordt geleverd door
	middel van een port in &os; omdat de firmware wordt
	gedistribueerd onder <link xlink:href="http://www.speedtouchdsl.com/disclaimer_lx.htm">Alcatel's
	  licentie overeenkomst</link> en mag derhalve niet vrijelijk
	verspreid worden met het basis systeem van &os;.</para>

      <para>Om de software te installeren, wordt simpelweg de <link linkend="ports">Ports Collectie</link> gebruikt.  Installeer de
	<package>net/pppoa</package> port en volg de
	instructies die meegeleverd worden.</para>

      <para>Zoals de meeste USB apparaten moet de Alcatel &speedtouch;
	USB zijn firmware downloaden van de host computer om correct
	te kunnen werken.  Het is mogelijk om dit proces te automatiseren
	binnen &os; zodat deze overdracht elke keer gebeurd als het
	apparaat in een USB poort wordt gestoken.  De volgende informatie
	kan worden toegevoegd aan het <filename>/etc/usbd.conf</filename>
	bestand om deze automatische overdracht in te schakelen.  Dit
	bestand moet bewerkt worden door de <systemitem class="username">root</systemitem>
	gebruiker.</para>

      <programlisting>device "Alcatel SpeedTouch USB"
    devname "ugen[0-9]+"
    vendor 0x06b9
    product 0x4061
    attach "/usr/local/sbin/modem_run -f /usr/local/libdata/mgmt.o"</programlisting>

      <para>Om de USB daemon, <application>usbd</application>, te starten
	moet de volgende regel toegevoegd worden aan
	<filename>/etc/rc.conf</filename>:</para>

      <programlisting>usbd_enable="YES"</programlisting>

      <para>Het is ook mogelijk om <application>ppp</application> op te
	zetten om in te bellen tijdens het opstarten.  Om dit te doen
	moet de volgende regel worden toegevoegd aan
	<filename>/etc/rc.conf</filename>.  Voor deze procedure moet
	er ook aangelogt zijn als de <systemitem class="username">root</systemitem>
	gebruiker.</para>

      <programlisting>ppp_enable="YES"
ppp_mode="ddial"
ppp_profile="adsl"</programlisting>

      <para>Om dit correct te laten werken moet het voorbeeld
	<filename>ppp.conf</filename> bestand gebruikt worden welke
	geleverd wordt door de
	<package>net/pppoa</package> port.</para>
    </sect2>

    <sect2>
      <title>Gebruik maken van mpd</title>

      <para>U kunt <application>mpd</application> gebruiken om met een
	variateit aan diensten verbinding te maken, in het bijzonder
	PPTP diensten.  U kunt <application>mpd</application> vinden in
	de Ports Collectie, <package>net/mpd</package>.
	Veel ADSL-modems vereisen dat er een PPTP tunnel wordt
	gecreeërd tussen het modem en de computer, een voorbeeld
	van zo'n modem is de Alcatel &speedtouch; Home.</para>

      <para>Eerst moet u de port installeren waarna
	<application>mpd</application> geconfigureerd kan worden om
	uw eisen en provider instellingen op te geven.  De port
	plaatst een verzameling voorbeeldconfiguratiebestanden welke
	goed gedocumenteerd zijn in <filename>PREFIX/etc/mpd/</filename>.
	Let op dat <replaceable>PREFIX</replaceable> betekend dat dit de
	directory is waar uw ports in worden geïnstalleerd.
	Standaard is dit <filename>/usr/local/</filename>.  Een complete
	handleiding om <application>mpd</application> te configureren is
	beschikbaar in HTML formaat zodra de port geïnstalleerd is.
	Deze wordt geplaatst in <filename>PREFIX/share/doc/mpd/</filename>.
	Hieronder staat een voorbeeld configuratie om verbinding te
	maken met een ADSL dienstverlener door het gebruik van
	<application>mpd</application>.  De configuratie is verspreid
	over twee bestanden, allereerst het <filename>mpd.conf</filename>
	bestand:</para>

      <note>
	<para>Dit voorbeeld van het bestand <filename>mpd.conf</filename> werkt
	  alleen met <application>mpd</application> 4.X.</para>
      </note>

      <programlisting>default:
    load adsl

adsl:
    new -i ng0 adsl adsl
    set bundle authname <replaceable>gebruikersnaam</replaceable> <co xml:id="co-mpd-ex-user"/>
    set bundle password <replaceable>wachtwoord</replaceable> <co xml:id="co-mpd-ex-pass"/>
    set bundle disable multilink

    set link no pap acfcomp protocomp
    set link disable chap
    set link accept chap
    set link keep-alive 30 10

    set ipcp no vjcomp
    set ipcp ranges 0.0.0.0/0 0.0.0.0/0

    set iface route default
    set iface disable on-demand
    set iface enable proxy-arp
    set iface idle 0

    open</programlisting>

      <calloutlist>
	<callout arearefs="co-mpd-ex-user">
	  <para>De gebruikersnaam die gebruikt wordt om uzelf te
	    authenticeren aan uw provider.</para>
	</callout>

	<callout arearefs="co-mpd-ex-pass">
	  <para>Het wachtwoord wat gebruikt wordt om uzelf te
	    authenticeren aan uw provider.</para>
	</callout>
      </calloutlist>

      <para>Het <filename>mpd.links</filename> bestand bevat informatie
	over de link, of linken waarmee u verbinding wilt maken.  Een
	voorbeeld <filename>mpd.links</filename> wat bij bovenstaand
	voorbeeld hoort is hieronder gegeven:</para>

      <programlisting>adsl:
    set link type pptp
    set pptp mode active
    set pptp enable originate outcall
    set pptp self <replaceable>10.0.0.1</replaceable> <co xml:id="co-mpd-ex-self"/>
    set pptp peer <replaceable>10.0.0.138</replaceable> <co xml:id="co-mpd-ex-peer"/></programlisting>

      <calloutlist>
	<callout arearefs="co-mpd-ex-self">
	  <para>Het IP-adres van uw &os; computer waar vanaf
	    <application>mpd</application> gebruikt wordt.</para>
	</callout>

	<callout arearefs="co-mpd-ex-peer">
	  <para>Het IP-adres van uw ADSL-modem.  Voor de Alcatel
	    &speedtouch; Home is dit adres standaard <systemitem class="ipaddress">10.0.0.138</systemitem>.</para>
	</callout>
      </calloutlist>

      <para>Het is mogelijk om de verbinding makkelijk te initialiseren
	door het volgende commando als <systemitem class="username">root</systemitem> uit te
	voeren:</para>

      <screen>&prompt.root; <userinput>mpd -b adsl</userinput></screen>

      <para>U kunt de status van de verbinding zien met het volgende
	commando:</para>

      <screen>&prompt.user; <userinput>ifconfig ng0</userinput>
ng0: flags=88d1&lt;UP,POINTOPOINT,RUNNING,NOARP,SIMPLEX,MULTICAST&gt; mtu 1500
     inet 216.136.204.117 --&gt; 204.152.186.171 netmask 0xffffffff</screen>

      <para>Het gebruik van <application>mpd</application> is de
	aangeraden manier om met een ADSL dienst te verbinden met
	&os;.</para>
    </sect2>

    <sect2>
      <title>Gebruik maken van pptpclient</title>

      <para>Het is ook mogelijk om &os; te gebruiken om naar een
	andere PPPoA dienstenm verbinding te maken door middel van de
	<package>net/pptpclient</package> port.</para>

      <para>Om gebruik te maken van <package>net/pptpclient</package> om naar een DSL dienst
	verbinding te maken, installeert u de port of package en bewerkt
	u <filename>/etc/ppp/ppp.conf</filename>  U moet dit onder de
	<systemitem class="username">root</systemitem> gebruiker doen, om beide acties uit te
	voeren.  Een voorbeeld sectie van <filename>ppp.conf</filename>
	is hieronder gegeven.  Voor meer informatie over
	<filename>ppp.conf</filename> consulteert u de &man.ppp.8;
	handleiding.</para>

      <programlisting>adsl:
 set log phase chat lcp ipcp ccp tun command
 set timeout 0
 enable dns
 set authname <replaceable>gebruikersnaam</replaceable> <co xml:id="co-pptp-ex-user"/>
 set authkey <replaceable>wachtwoord</replaceable> <co xml:id="co-pptp-ex-pass"/>
 set ifaddr 0 0
 add default HISADDR</programlisting>

      <calloutlist>
	<callout arearefs="co-pptp-ex-user">
	  <para>De gebruikersnaam van uw account bij uw DSL
	    provider.</para>
	</callout>

	<callout arearefs="co-pptp-ex-pass">
	  <para>Het wachtwoord voor uw account.</para>
	</callout>
      </calloutlist>

      <warning>
	<para>Omdat u het wachtwoord van uw account in het
	  <filename>ppp.conf</filename> bestand in leesbare vorm moet
	  plaatsen, moet u ervoor zorgen dat niemand anders de inhoud
	  van dit bestand kan lezen.  De volgende serie van commando's
	  zorgt ervoor dat het bestand alleen leesbaar is door de
	  <systemitem class="username">root</systemitem> gebruiker.  Raadpleeg de
	  handleidingen van &man.chmod.1; en &man.chown.8; voor verdere
	  informatie.</para>

	<screen>&prompt.root; <userinput>chown root:wheel /etc/ppp/ppp.conf</userinput>
&prompt.root; <userinput>chmod 600 /etc/ppp/ppp.conf</userinput></screen>
      </warning>

      <para>Dit opent een tunnel voor een PPP sessie naar uw DSL router.
	Ethernet DSL-modems hebben een voor geconfigureerd LAN IP
	adres waarmee u verbinding maakt.  In het geval van de Alcatel
	&speedtouch; home is <systemitem class="ipaddress">10.0.0.138</systemitem>
	het adres.  Uw router documentatie vertelt u welk adres uw
	apparaat gebruikt.  Om de tunnel te openen en om een PPP sessie
	op te zetten, start u het volgende commando:</para>

      <screen>&prompt.root; <userinput>pptp address adsl</userinput></screen>

      <tip>
	<para>Het kan wenselijk zijn om een ampersand
	  (<quote>&amp;</quote>) toe te voegen aan het einde van het
	  vorige commando, omdat <application>pptp</application>
	  uw prompt niet teruggeeft.</para>
      </tip>

      <para>Er wordt een <filename>tun</filename> virtueel tunnel
	apparaat gecreeërd voor interactie tussen de
	<application>pptp</application> en <application>ppp</application>
	processen.  Zodra u terugbent op uw prompt, of als
	<application>pptp</application> bevestigd dat er een verbinding
	is, kunt u de tunnel als volgend inzien:</para>

      <screen>&prompt.user; <userinput>ifconfig tun0</userinput>
tun0: flags=8051&lt;UP,POINTOPOINT,RUNNING,MULTICAST&gt; mtu 1500
        inet 216.136.204.21 --&gt; 204.152.186.171 netmask 0xffffff00
        Opened by PID 918</screen>

      <para>Als het niet mogelijk is om verbinding te maken, controleert
	u de configuratie van uw router, welke meestal bereikbaar is
	door middel van <application>telnet</application> of via een
	web browser.  Als u nog steeds geen verbinding kunt maken moet
	u de resultaten van het <command>pptp</command> onderzoeken
	en de inhoud van het <application>ppp</application> log
	bestand, <filename>/var/log/ppp.log</filename> voor meer hints
	over wat er mis kan zijn.</para>
    </sect2>
  </sect1>

  <sect1 xml:id="slip">
    <info><title>Gebruik maken van SLIP</title>
      <authorgroup>
	<author><personname><firstname>Satoshi</firstname><surname>Asami</surname></personname><contrib>Origineel bijgedragen door </contrib></author>
      </authorgroup>
      <authorgroup>
	<author><personname><firstname>Guy</firstname><surname>Helmer</surname></personname><contrib>Met input van </contrib></author>
	<author><personname><firstname>Piero</firstname><surname>Serini</surname></personname></author>
      </authorgroup>
    </info>

    

    <indexterm><primary>SLIP</primary></indexterm>

    <warning>
      <para>Deze sectie geldt en is alleen geldig voor &os;&nbsp;7.X.</para>
    </warning>

    <sect2 xml:id="slipc">
      <title>Het opzetten van een SLIP-cliënt</title>

      <indexterm>
	<primary>SLIP</primary>

	<secondary>cliënt</secondary>
      </indexterm>

      <para>Het volgende is één manier om een &os; machine
	in te stellen voor gebruik met SLIP op een statisch host netwerk.
	Voor dynamische hostnaam toewijzing (uw adres veranderd elke keer
	als u inbelt), heeft u waarschijnlijk een meer complexe opzet
	nodig.</para>

      <para>Bepaal eerst aan welke seriële poort uw modem verbonden
	is.  Veel mensen gebruiken hiervoor een symbolische link zoals
	<filename>/dev/modem</filename> welke
	verwijst naar de echte naam van het apparaat <filename>/dev/cuadN</filename>.  Dit
	geeft de mogelijkheid om naam abstract te houden, voor het geval
	het modem ooit verplaatst wordt naar een andere poort.  Het kan
	best een vervelende klus zijn wanneer er een aantal bestanden in
	<filename>/etc</filename> en
	<filename>.kermrc</filename> bestanden verspreid over het gehele
	systeem gerepareerd moeten worden!</para>

      <note>
	<para><filename>/dev/cuad0</filename>
	  is <filename>COM1</filename>, <filename>cuad1</filename> is
	  <filename>COM2</filename>, etc.</para>
      </note>

      <para>Zorg ervoor dat u het volgende in uw kernel configuratie
	bestand hebt:</para>

      <programlisting>device   sl</programlisting>

      <para>Deze is standaard opgenomen in de
	<filename>GENERIC</filename> kernel, dus dat zou geen problemen
	moeten opleveren tenzij u deze verwijderd heeft.</para>

      <sect3>
	<title>Dingen die u maar eenmalig hoeft uit te voeren</title>

	<procedure>
	  <step>
	    <para>Voeg uw machine, de router en de naamservers toe
	      aan uw <filename>/etc/hosts</filename> bestand.  Ons
	      bestand ziet er als volgend uit:</para>

	    <programlisting>127.0.0.1               localhost loghost
136.152.64.181          water.CS.Example.EDU water.CS water
136.152.64.1            inr-3.CS.Example.EDU inr-3 slip-gateway
128.32.136.9            ns1.Example.EDU ns1
128.32.136.12           ns2.Example.EDU ns2</programlisting>
	  </step>

	  <step>
	    <para>Zorg ervoor dat u <literal>files</literal> voor
	      <literal>dns</literal> in de <literal>hosts:</literal>
	      sectie van uw <filename>/etc/nsswitch.conf</filename>
	      bestand.  Zonder deze parameters zouden er interessante
	      dingen kunnen gebeuren.</para>
	  </step>

	  <step>
	    <para>Bewerk het <filename>/etc/rc.conf</filename>
	      bestand.</para>

	    <orderedlist>
	      <listitem>
		<para>Stel uw hostnaam in door de regel te bewerken die
		  aangeeft:</para>

		<programlisting>hostname="myname.my.domain"</programlisting>

		<para>De volledig gekwalificeerde internet hostnaam
		  moet hier geplaatst worden.</para>
	      </listitem>

	      <listitem>
		<para>Stel de standaard router<indexterm><primary>standaard routering</primary></indexterm> in door het aanpassen
		  van de volgende regel van:</para>

		<programlisting>defaultrouter="NO"</programlisting>

		<para>naar:</para>

		<programlisting>defaultrouter="slip-gateway"</programlisting>
	      </listitem>
	    </orderedlist>
	  </step>

	  <step>
	    <para>Creeër en bestand genaamd
	      <filename>/etc/resolv.conf</filename> welke het volgende
	      bevat:</para>

	    <programlisting>domain CS.Example.EDU
nameserver 128.32.136.9
nameserver 128.32.136.12</programlisting>

	    <para>Zoals u kunt zien, stellen deze de naamserver<indexterm><primary>naamserver</primary></indexterm> hosten
	      in.  Uiteraard is het echte domein<indexterm><primary>domeinnaam</primary></indexterm> en adres afhankelijk
	      van uw omgeving.</para>
	  </step>

	  <step>
	    <para>Stel het wachtwoord in voor de
	      <systemitem class="username">root</systemitem> en de <systemitem class="username">toor</systemitem>
	      gebruikers (en elke andere gebruiker die geen wachtwoord
	      heeft).</para>
	  </step>

	  <step>
	    <para>Herstart de machine en controleeer of deze opkomt
	      met de correcte hostnaam.</para>
	  </step>
	</procedure>
      </sect3>

      <sect3>
	<title>Het opzetten van een SLIP-verbinding</title>

	<indexterm>
	  <primary>SLIP</primary>

	  <secondary>verbinding maken met</secondary>
	</indexterm>

	<procedure>
	  <step>
	    <para>Bel in, type <command>slip</command> op de prompt
	      en voer uw machine naam en wachtwoord in.  Wat is
	      vereist, is afhankelijk van uw omgeving.  Als u gebruik
	      maakt van <application>Kermit</application> kan een
	      script als de volgende gebruikt worden:</para>

	    <programlisting># kermit setup
set modem hayes
set line /dev/modem
set speed 115200
set parity none
set flow rts/cts
set terminal bytesize 8
set file type binary
# De volgende macro zal inbellen en ons inloggen.
define slip dial 643-9600, input 10 =&gt;, if failure stop, -
output slip\x0d, input 10 Username:, if failure stop, -
output silvia\x0d, input 10 Password:, if failure stop, -
output ***\x0d, echo \x0aCONNECTED\x0a</programlisting>

	    <para>Uiteraard moet u uw gebruikersnaam en wachtwoord
	      wijzigen zodat deze overeenkomen met die van u.  Nadat
	      dit gedaan is kunt u <command>slip</command> invullen op
	      de <application>Kermit</application> prompt om verbinding
	      te maken.</para>

	    <note>
	      <para>Het achterlaten van uw wachtwoord in leesbare tekst
		waar dan ook op het bestandssysteem is zeker een
		<emphasis>slecht</emphasis> idee.  Doe dit op eigen
		risico.</para>
	    </note>
	  </step>

	  <step>
	    <para>Laat <application>Kermit</application> daar (het
	      programma kan tijdelijk uitgeschakeld worden door
	      <keycombo>
		<keycap>Ctrl</keycap>
		<keycap>z</keycap>
	      </keycombo>) en type vervolgens als
	      <systemitem class="username">root</systemitem>:</para>

	    <screen>&prompt.root; <userinput>slattach -h -c -s 115200 /dev/modem</userinput></screen>

	    <para>Als u in staat bent om andere hosten met
	      <command>ping</command> te benaderen aan de andere kant
	      van de router, bent u verbonden!  Als dit niet werkt kunt
	      u wellicht de <option>-a</option> gebruiken in plaats van
	      de <option>-c</option> als argument voor
	      <command>slattach</command>.</para>
	  </step>
	</procedure>
      </sect3>

      <sect3>
	<title>Hoe de verbinding afgebroken moet worden</title>

	<para>Doe het volgende::</para>

	<screen>&prompt.root; <userinput>kill -INT `cat /var/run/slattach.modem.pid`</userinput></screen>

	<para>om <command>slattach</command> te stoppen.  Houd in uw
	  achterhoofd dat u dit als <systemitem class="username">root</systemitem> moet
	  doen.  Ga hierna terug naar <command>kermit</command> (door
	  het intypen van <command>fg</command> als u deze tijdelijk
	  uitgeschakeld had) en verlaat de applicatie
	  (<keycap>q</keycap>).</para>

	<para>De &man.slattach.8; handleiding zegt dat
	  <command>ifconfig sl0 down</command> uitgevoerd moet worden
	  om de interface uit te schakelen, maar dit lijkt geen verschil
	  op te leveren.  (<command>ifconfig sl0</command> lijkt
	  hetzelfde resultaat te geven.)</para>

	<para>Soms kan het gebeuren dat het modem weigert om de carrier
	  los te laten.  Start in dat geval simpelweg
	  <command>kermit</command> en stop deze wederom.  Meestal stopt
	  het met de tweede poging.</para>
      </sect3>

      <sect3>
	<title>Problemen oplossen</title>

	<para>Als dit niet werkt, voelt u zich dan vrij om rond te vragen
	  op de &a.net.name; mailing lijst.  De volgende dingen zijn
	  mensen al eens tegen aangelopen:</para>

	<itemizedlist>
	  <listitem>
	    <para>Het niet gebruiken van de <option>-c</option> of
	      <option>-a</option> optie voor <command>slattach</command>
	      (Dit zou niet fataal moeten zijn, maar sommige mensen
	      hebben aangegeven dat het de problemen oplostte.)</para>
	  </listitem>

	  <listitem>
	    <para>Het intypen van <option>s10</option> in plaats van
	      <option>sl0</option> (het verschil is wellicht lastig te
	      zien met sommige fonts).</para>
	  </listitem>

	  <listitem>
	    <para>Probeer <command>ifconfig sl0</command> uit te voeren
	      om de interface status te zien.  U kunt bijvoorbeeld
	      krijgen:</para>

	    <screen>&prompt.root; <userinput>ifconfig sl0</userinput>
sl0: flags=10&lt;POINTOPOINT&gt;
        inet 136.152.64.181 --&gt; 136.152.64.1 netmask ffffff00</screen>
	  </listitem>

	  <listitem>
	    <para>Als u <errorname>no route to host</errorname> krijgt
	      van het &man.ping.8; commando, is er mogelijk een probleem
	      met uw route tabel.  U kunt het
	      <command>netstat -r</command> commando uitvoeren om de
	      huidige routes te zien:</para>

	    <screen>&prompt.root; <userinput>netstat -r</userinput>
Routing tables
Destination      Gateway            Flags     Refs     Use  IfaceMTU    Rtt    Netmasks:

(root node)
(root node)

Route Tree for Protocol Family inet:
(root node) =&gt;
default          inr-3.Example.EDU  UG          8   224515  sl0 -      -
localhost.Exampl localhost.Example. UH          5    42127  lo0 -       0.438
inr-3.Example.ED water.CS.Example.E UH          1        0  sl0 -      -
water.CS.Example localhost.Example. UGH        34 47641234  lo0 -       0.438
(root node)</screen>

	    <para>Het voorgaand voorbeeld komt van een relatief druk
	      systeem.  De getallen op uw systeem zullen anders zijn
	      naar gelang de netwerk activiteiten.</para>

	  </listitem>
	</itemizedlist>
      </sect3>
    </sect2>

    <sect2 xml:id="slips">
      <title>Het opzetten van een SLIP-server</title>

      <indexterm>
	<primary>SLIP</primary>
	<secondary>server</secondary>
      </indexterm>

      <para>Dit document levert suggesties voor het opzetten van een
	SLIP-server op een &os; systeem, welke meestal betekent het
	configureren van uw systeem om automatisch verbindingen op te
	zetten wanneer er wordt ingelogt met remote SLIP
	cliënten.</para>

      <sect3 xml:id="slips-prereqs">
	<title>Eisen vooraf</title>

	<indexterm><primary>TCP/IP networking</primary></indexterm>

	<para>Deze sectie is vrij technisch van aard, dus achtergrond
	  informatie is vereist.  Er wordt aangenomen dat u bekend bent
	  met het TCP/IP-netwerk protocol, en in dan in het bijzonder
	  met netwerk en node adresseringen, netwerk adres maskers,
	  subnetten, routes en dynamische routering protocollen
	  zoals RIP.  Het configureren van een SLIP-dienst op een inbel
	  server vereist kennis van deze concepten en als u daarmee niet
	  bekend bent, leest u dan aub een versie van of
	  Craig Hunt's <emphasis>TCP/IP Network Administration</emphasis>
	  gepubliceerd door O'Reilly &amp; Associates, Inc. (ISBN Number
	  0-937175-82-X), of Douglas Comer's boeken over het TCP/IP
	  protocol.</para>

	<indexterm><primary>modem</primary></indexterm>

	<para>Daarnaast wordt er vanuit gegaan dat u reeds uw modem(s)
	  heeft geconfigureerd en dat u de juiste systeem bestanden
	  heeft aangepast zodat er logins mogelijk zijn door uw modem(s)
	  heen.  Als u dat nog niet heeft gedaan, zie dan <xref linkend="dialup"/> voor details over het opzetten van
	  inbel diensten.  Wellicht wilt u ook de handleiding bekijken
	  voor &man.sio.4; voor meer informatie over de seriële
	  port device driver en de &man.ttys.5;, &man.gettytab.5;,
	  &man.getty.8;, &amp; &man.init.8; handleidingen voor
	  informatie die relevant zijn voor het configureren van het
	  systeem zodat logins mogelijk worden op modems, en wellicht
	  &man.stty.1; voor informatie over het instellen van de
	  seriële poort (zoals <literal>clocal</literal> voor
	  direct verbonden seriële interfaces).</para>
      </sect3>

      <sect3>
	<title>Snel overzicht</title>

	<para>In een typische configuratie, werkt het gebruik van &os;
	  als een SLIP-server als volgend: een SLIP-gebruiker belt in
	  op uw &os; SLIP-server systeem en logt in met een speciaal
	  SLIP-login ID dat gebruik maakt van
	  <filename>/usr/sbin/sliplogin</filename>.  Het
	  <command>sliplogin</command> programma leest door het
	  <filename>/etc/sliphome/slip.hosts</filename> bestand om een
	  corresponderende regel te vinden voor de speciale gebruiker en
	  als deze een match vindt verbind het de seriële lijn met
	  een beschikbare SLIP-interface waarna het shellscript
	  <filename>/etc/sliphome/slip.login</filename> wordt uitgevoerd
	  om de SLIP-interface te configureren.</para>

	<sect4>
	  <title>Een voorbeeld van SLIP-server login</title>

	  <para>Bijvoorbeeld, als een SLIP-user-ID
	    <systemitem class="username">Shelmerg</systemitem>is, kan
	    <systemitem class="username">Shelmerg</systemitem>'s regel in
	    <filename>/etc/master.passwd</filename>  er als volgt
	    uitzien:</para>

	  <programlisting>Shelmerg:password:1964:89::0:0:Guy Helmer - SLIP:/usr/users/Shelmerg:/usr/sbin/sliplogin</programlisting>

	  <para>Wanneer <systemitem class="username">Shelmerg</systemitem> inlogt, zoekt het
	    <command>sliplogin</command> programma in het
	    <filename>/etc/sliphome/slip.hosts</filename> bestand voor
	    een regel dat een corresponderende user ID heeft, er kan
	    bijvoorbeeld een regel staan in
	    <filename>/etc/sliphome/slip.hosts</filename> dat eruit
	    ziet als volgend:</para>

	  <programlisting>Shelmerg        dc-slip sl-helmer       0xfffffc00		  autocomp</programlisting>

	  <para><command>sliplogin</command> zal de corresponderende
	    regel vinden en de seriële lijn koppelen aan de eerste
	    beschikbare SLIP-interface, waarna
	    <filename>/etc/sliphome/slip.login</filename> wordt
	    uitgevoerd zoals volgend:</para>

	  <programlisting>/etc/sliphome/slip.login 0 19200 Shelmerg dc-slip sl-helmer 0xfffffc00 autocomp</programlisting>

	  <para>Als alles goed gaat, zal
	    <filename>/etc/sliphome/slip.login</filename> een
	    <command>ifconfig</command> commando uitvoeren voor de SLIP
	    interface waaraan <command>sliplogin</command> zichzelf
	    koppelt (SLIP-interface 0 zoals in bovenstaand voorbeeld
	    was de eerste parameter in de lijst welke gegeven is aan
	    <filename>slip.login</filename>) om een lokaal IP-adres
	    in te stellen (<systemitem>dc-slip</systemitem>), een remote IP
	    adres (<systemitem>sl-helmer</systemitem>), een netwerk master voor
	    de SLIP-interface
	    (<systemitem class="netmask">0xfffffc00</systemitem>), en enkele
	    additionele vlaggen (<literal>autocomp</literal>).  Als
	    er iets misgaat zal <command>sliplogin</command> meestal
	    voldoende goede informatie loggen via de
	    <application>syslogd</application> daemon faciliteiten,
	    welke meestal logt naar
	    <filename>/var/log/messages</filename> (zie de handleidingen
	    van &man.syslogd.8; en &man.syslog.conf.5; en controleer het
	    <filename>/etc/syslog.conf</filename> bestand om te zien wat
	    <application>syslogd</application> logt en waar dit naartoe
	    gelogt wordt).</para>
	</sect4>
      </sect3>

      <sect3>
	<title>Kernel-configuratie</title>

	<indexterm>
	  <primary>kernel</primary>

	  <secondary>configuration</secondary>
	</indexterm>

	<indexterm>
	  <primary>SLIP</primary>
	</indexterm>

	<para>&os;'s standaard kernel (<filename>GENERIC</filename>)
	  heeft reeds ondersteuning voor SLIP (&man.sl.4;), in het
	  geval van een custom kernel moet de volgende regel worden
	  toegevoegd aan de kernel configuratie:</para>

	<programlisting>device   sl</programlisting>

	<para>Standaard zal uw &os; machine geen pakketten doorsturen.
	  Als u wilt dat uw &os; SLIP-server zich gedraagt als router
	  zult u het bestand <filename>/etc/rc.conf</filename> moeten
	  bewerken en de instelling van de
	  <literal>gateway_enable</literal> variabele moeten aanpassen
	  naar <option>YES</option>.  Dit zorgt ervoor dat de machine
	  na een herstart zich zal blijven gedragen als router.</para>

	<para>Om de instellingen meteen actief te maken kunt u het
	  volgende commando als <systemitem class="username">root</systemitem>
	  uitvoeren:</para>

	<screen>&prompt.root; service routing start</screen>

	<para>Raadpleeg aub <xref linkend="kernelconfig"/> over
	  het configureren van de &os; kernel voor meer hulp over het
	  herconfigureren van uw kernel.</para>
      </sect3>

      <sect3>
	<title>Sliplogin-configuratie</title>

	<para>Zoals eerder vermeld, zijn er drie bestanden in de map
	  <filename>/etc/sliphome</filename> die
	  onderdeel zijn van de configuratie voor
	  <filename>/usr/sbin/sliplogin</filename> (zie
	  &man.sliplogin.8; voor de actuele handleiding voor
	  <command>sliplogin</command>): <filename>slip.hosts</filename>,
	  welke de SLIP-gebruikers definieert en de gekoppelde IP
	  adressen; <filename>slip.login</filename>, welke meestal de
	  SLIP-interface configureert en (optioneel)
	  <filename>slip.logout</filename>, welke de effecten van
	  <filename>slip.login</filename> ongedaan maakt wanneer de
	  seriële verbinding verbroken wordt.</para>

	<sect4>
	  <title><filename>slip.hosts</filename> configuratie</title>

	  <para><filename>/etc/sliphome/slip.hosts</filename> bevat
	    regels welke minstens vier onderdelen heeft die
	    gescheiden worden door een spatie:</para>

	  <itemizedlist>
	    <listitem>
	      <para>SLIP-gebruikers login ID</para>
	    </listitem>

	    <listitem>
	      <para>Lokale adres (lokaal voor de SLIP-server) van de
		SLIP-link</para>
	    </listitem>

	    <listitem>
	      <para>Remote adres van de SLIP-link</para>
	    </listitem>

	    <listitem>
	      <para>Netwerk masker</para>
	    </listitem>
	  </itemizedlist>

	  <para>De lokale en remote adressen mogen host namen zijn
	    (Welke naar IP-adressen vertaald kunnen worden door
	    <filename>/etc/hosts</filename> of door de
	    <acronym>DNS</acronym> diensten, afhankelijk van uw
	    specificaties in het <filename>/etc/nsswitch.conf</filename>,
	    het netwerk masker mag een naam zijn dat vertaald kan worden
	    door een zoek opdracht in <filename>/etc/networks</filename>.
	    Op een voorbeeld systeem ziet het
	    <filename>/etc/sliphome/slip.hosts</filename> bestand er als
	    volgt uit:</para>

	  <programlisting>#
# login local-addr      remote-addr     mask            opt1    opt2
#                                               (normal,compress,noicmp)
#
Shelmerg  dc-slip       sl-helmerg      0xfffffc00      autocomp</programlisting>

	  <para>Aan het einde van deze regel staan één of
	    meerdere opties:</para>

	  <itemizedlist>
	    <listitem>
	      <para><option>normal</option> &mdash; geen compressie
		van de header</para>
	    </listitem>

	    <listitem>
	      <para><option>compress</option> &mdash; comprimeer
		headers</para>
	    </listitem>

	    <listitem>
	      <para><option>autocomp</option> &mdash; comprimeer de
		headers als de remote kant dit accepteert</para>
	    </listitem>

	    <listitem>
	      <para><option>noicmp</option> &mdash; schakelt ICMP
		pakketten uit (dus alle <quote>ping</quote> pakketten
		worden geweigerd in plaats van dat deze bandbreedte
		verbruiken)</para>
	    </listitem>
	  </itemizedlist>

	  <indexterm><primary>SLIP</primary></indexterm>

	  <indexterm><primary>TCP/IP networking</primary></indexterm>

	  <para>Uw keuze van een lokaal en remote adres voor uw SLIP
	    verbindingen is afhankelijk van of u een speciaal toegewezen
	    TCP/IP-subnet gebruikt, of dat u gebruik gaat maken van
	    <quote>proxy ARP</quote> op uw SLIP-server (het is geen
	    echte <quote>proxy ARP</quote>, maar het is de terminologie
	    welke in deze sectie gebruikt wordt om het te beschrijven).
	    Als u niet zeker bent welke methode u moet kiezen, of hoe u
	    IP-adressen moet toewijzen, raadpleegt u dan de TCP/IP
	    boeken die vermeld worden in de SLIP vereisten
	    (<xref linkend="slips-prereqs"/>) en/of vraag uw IP-netwerk
	    manager om hulp.</para>

	  <para>Als u gebruik gaat maken van een separaat subnet voor
	    uw SLIP-cliënten, moet u een subnet alloceren uit de
	    voor u toegewezen IP-ruimte, en elke SLIP-cliënt een
	    IP-adres geven uit dat subnet.  Daarna moet u waarschijnlijk
	    een statische route configureren voor uw SLIP-subnet via
	    uw SLIP-server naar de dichtsbijzijnde IP-router.</para>

	  <indexterm><primary>Ethernet</primary></indexterm>

	  <para>In het andere geval moet u gebruik maken van de
	    <quote>proxy ARP</quote> methode, u moet elke SLIP
	    cliënt een IP-adres geven uit het Ethernet-subnet van
	    uw SLIP-server, daarnaast moet u het
	    <filename>/etc/sliphome/slip.login</filename> en het
	    <filename>/etc/sliphome/slip.logout</filename> script
	    aanpassen om gebruik te maken van &man.arp.8; om de
	    <quote>proxy ARP</quote> regels te beheren in de SLIP
	    servers ARP tabel.</para>
	</sect4>

	<sect4>
	  <title><filename>slip.login</filename> configuratie</title>

	  <para>Een typisch <filename>/etc/sliphome/slip.login</filename>
	    bestand ziet er als volgend uit:</para>

	  <programlisting>#!/bin/sh -
#
#       @(#)slip.login  5.1 (Berkeley) 7/1/90

#
# generiek loginbestand voor een SLIP-lijn.  sliplogin voert deze uit
# met de volgende parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 inet $4 $5 netmask $6</programlisting>

	  <para>Dit <filename>slip.login</filename> bestand start
	    alleen het <command>ifconfig</command> commando voor de
	    betreffende SLIP-interace met het lokale en remote adres
	    met het netwerkmasker van de SLIP-interface.</para>

	  <para>Als u besloten heeft om gebruik te maken van de
	    <quote>proxy ARP</quote> methode (in plaats van het
	    gebruiken van een apart subnet voor uw SLIP-cliënten)
	    moet u het <filename>/etc/sliphome/slip.login</filename>
	    bestand aanpassen zodat deze er ongeveer als volgend
	    uitziet:</para>

	  <programlisting>#!/bin/sh -
#
#       @(#)slip.login  5.1 (Berkeley) 7/1/90

#
# generiek loginbestand voor een SLIP-lijn.  sliplogin voert deze uit
# met de volgende parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 inet $4 $5 netmask $6
# Beantwoord ARP Verzoeken voor de SLIP-cliënt met ons Ethernet
# adres
/usr/sbin/arp -s $5 00:11:22:33:44:55 pub</programlisting>

	  <para>De extra regel in het <filename>slip.login</filename>
	    bestand,
	    <command>arp -s &#36;5 00:11:22:33:44:55 pub</command>,
	    creeërt een ARP-regel in de ARP-tabel van de SLIP-server.
	    Deze ARP regel zorgt ervoor dat de SLIP-server antwoord
	    geeft met het Ethernet MAC adres van de SLIP-server wanneer
	    een andere IP-node op het Ethernet vraagt om te communiceren
	    met het IP-adres van de SLIP-cliënt.</para>

	  <indexterm>
	    <primary>Ethernet</primary>

	    <secondary>MAC address</secondary>
	  </indexterm>

	  <para>Wanneer u gebruik maakt van het voorbeeld hierboven,
	    wees u er dan zeker van dat u het Ethernet MAC adres
	    (<systemitem class="etheraddress">00:11:22:33:44:55</systemitem>) veranderd
	    in het MAC adres van uw systeem's Ethernet kaart, anders
	    werkt uw <quote>proxy ARP</quote> zeker niet!  U kunt het
	    Ethernet MAC adres van uw SLIP-server achterhalen door het
	    bekijken van het resultaat van <command>netstat -i</command>;
	    de tweede regel met resultaten moet er ongeveer als volgend
	    uitzien:</para>

	  <screen>ed0   1500  &lt;Link&gt;0.2.c1.28.5f.4a         191923	0   129457     0   116</screen>

	  <para>Dit geeft aan dat het specifieke Ethernet MAC adres van
	    het systeem is <systemitem class="etheraddress">00:02:c1:28:5f:4a</systemitem>
	    &mdash; de punten in het Ethernet MAC adres welke gegeven
	    wordt door <command>netstat -i</command> moet worden veranderd
	    in dubbele punten (<quote>:</quote>) en voorloop nullen
	    moeten worden toegevoegd aan elk enkel hexadecimaal getal
	    om het adres te converteren naar de vorm die &man.arp.8;
	    wenst; zie de handleiding van &man.arp.8; voor een compleet
	    overzicht van het gebruik hiervan.</para>

	  <note>
	    <para>Wanneer u
	      <filename>/etc/sliphome/slip.login</filename> en
	      <filename>/etc/sliphome/slip.logout</filename>, aanmaakt
	      moet het <quote>uitvoerbare</quote> bitje gezet zijn
	      (bijvoorbeeld <command>chmod 755
	      /etc/sliphome/slip.login /etc/sliphome/slip.logout</command>)
	      anders is <command>sliplogin</command> niet in staat om
	      deze uit te voeren.</para>
	  </note>
	</sect4>

	<sect4>
	  <title><filename>slip.logout</filename> configuratie</title>

	  <para><filename>/etc/sliphome/slip.logout</filename> is niet
	    strict noodzakelijk (tenzij u <quote>proxy ARP</quote>
	    implementeert), maar als beslist om deze aan te maken is
	    dit een voorbeeld basis <filename>slip.logout</filename>
	    script:</para>

	  <programlisting>#!/bin/sh -
#
#       slip.logout

#
# uitlogbestand voor een SLIP-regel.  sliplogin voert deze uit met de
# parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 down</programlisting>

	  <para>Als u gebruik maakt van <quote>proxy ARP</quote> wilt u
	    waarschijnlijk dat het
	    <filename>/etc/sliphome/slip.logout</filename> bestand de
	    ARP regel weghaalt voor de SLIP-cliënt:</para>

	  <programlisting>#!/bin/sh -
#
#       @(#)slip.logout

#
# uitlogbestand voor een SLIP-regel.  sliplogin voert deze uit met de
# parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 down
# Stop met het beantwoorden van ARP verzoeken voor de SLIP-cliënt
/usr/sbin/arp -d $5</programlisting>

	  <para>Het <command>arp -d &#36;5</command> verwijderd de ARP
	    regel, die <quote>proxy ARP</quote> heeft toegevoegd toen
	    de SLIP-cliënt inlogde.</para>

	  <para>Het is belangrijk om dit te herhalen: zorg ervoor
	    <filename>/etc/sliphome/slip.logout</filename> het
	    uitvoerbare bitje heeft gezet nadat deze gecreeërd
	    is (b.v.
	    <command>chmod 755 /etc/sliphome/slip.logout</command>).</para>
	</sect4>
      </sect3>

      <sect3>
	<title>Routering-overwegingen</title>

	<indexterm>
	  <primary>SLIP</primary>

	  <secondary>routering</secondary>
	</indexterm>

	<para>Als u geen gebruik maakt van de <quote>proxy ARP</quote>
	  voor het routeren van pakketten tussen uw SLIP-cliënten
	  en de rest van uw netwerk (en wellicht het internet), moeten
	  er misschien een aantal statische routeringen naar de best
	  bereikbare standaard router ingesteld worden om uw SLIP
	  cliënts te routeren via uw SLIP0server.</para>

	<sect4>
	  <title>Statische routeringen</title>

	  <indexterm><primary>statische routeringen</primary></indexterm>

	  <para>Het toevoegen van statische routeringen naar de dichts
	    bijzijnde router kan problematisch zijn (of zelfs onmogelijk
	    als u niet de bevoegdheden heft om dit te doen).  Als u een
	    netwerk heeft met meerdere routers binnen uw organisatie
	    kan het zijn dat sommige routers, zoals die van Cisco en
	    Proteon , niet alleen geconfigureerd moeten worden met de
	    statische route naar het SLIP-subnet, maar deze moeten dan
	    ook geconfigureerd worden over welke statische routes aan
	    andere routers verteld moeten worden.  Enige expertise en
	    fine tunen kan nodig zijn om statische routing te laten
	    werken.</para>
	</sect4>
      </sect3>
    </sect2>
  </sect1>
</chapter>
