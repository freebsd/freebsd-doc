<!--
     The FreeBSD Dutch Documentation Project

     $FreeBSD$

     %SOURCE%	en_US.ISO8859-1/books/handbook/linuxemu/chapter.sgml
     %SRCID%	1.141
-->

<chapter id="linuxemu">
  <chapterinfo>
    <authorgroup>
      <author>
	<firstname>Jim</firstname>
	<surname>Mock</surname>
	<contrib>Geherstructureerd en delen bijgewerkt door </contrib>
      </author>
      <!-- 22 Mar 2000 -->
    </authorgroup>
    <authorgroup>
      <author>
	<firstname>Brian N.</firstname>
	<surname>Handy</surname>
	<contrib>Origineel bijgedragen door </contrib>
      </author>
      <author>
	<firstname>Rich</firstname>
	<surname>Murphey</surname>
      </author>
    </authorgroup>
    <authorgroup>
      <author>
	<firstname>Ren&eacute;</firstname>
	<surname>Ladan</surname>
	<contrib>Vertaald door </contrib>
      </author>
    </authorgroup>
  </chapterinfo>

  <title>&linux; binaire compatibiliteit</title>

  <sect1 id="linuxemu-synopsis">
    <title>Overzicht</title>

    <para>&os; levert binaire compatibiliteit met verscheidene andere
      &unix; achtige besturingssystemen, waaronder &linux;.  Op dit
      moment kan de vraag gesteld worden waarom &os; nu precies
      &linux;-binairen moet kunnen draaien.  Het antwoord is dat veel
      bedrijven en ontwikkelaars alleen ontwikkelen voor &linux;, omdat
      dat het nieuwste <quote>hebbeding</quote> is in de wereld van
      computers.  Dat laat &os; gebruikers al zeurend achter bij
      diezelfde bedrijven en ontwikkelaars om originele &os; versies
      van hun applicaties.  Het probleem is dat veel van deze bedrijven
      zich niet goed realiseren hoeveel mensen hun product zouden
      gebruiken als er ook &os; versies van waren en de meesten blijven
      alleen voor &linux; ontwikkelen.  Dus wat moet een &os; gebruiker
      doen?  Hier komt de &linux; binaire compatibiliteit van &os; om
      de hoek kijken.</para>

    <para>In een notendop stelt de compatibiliteit &os; in staat om
      rond de 90% van alle &linux; applicaties zonder wijzigingen te
      draaien.  Dit omvat applicaties zoals
      <application>&staroffice;</application>, de &linux; versie van
      <application>&netscape;</application>,
      <application>&adobe;&nbsp;&acrobat;</application>,
      <application>&realplayer;</application>,
      <application><trademark>VMWare</trademark></application>,
      <application>&oracle;</application>,
      <application>&wordperfect;</application>,
      <application>Doom</application>,
      <application>Quake</application> en meer.  Er wordt zelfs gemeld
      dat in sommige gevallen &linux;-binairen beter presteren op &os;
      dan op &linux;.</para>

    <para>Er zijn echter enkele &linux;-specifieke
      besturingssysteemeigenschappen die niet door &os; ondersteund
      worden.  &linux;-binairen werken niet op &os; als ze overvloedig
      gebruik maken van &i386; specifieke aanroepen, zoals het
      aanzetten van de virtuele 8086 modus.</para>

    <para>Na het lezen van dit hoofdstuk weet de lezer:</para>

    <itemizedlist>
      <listitem>
	<para>Hoe &linux; binaire compatibiliteit op een systeem aan
	  te zetten;</para>
      </listitem>

      <listitem>
	<para>Hoe aanvullende &linux; gedeelde bibliotheken te
	  installeren;</para>
      </listitem>

      <listitem>
	<para>Hoe &linux; applicaties op een &os; systeem te
	  installeren;</para>
      </listitem>

      <listitem>
	<para>De implementatiedetails van &linux; compatibiliteit in
	  &os;.</para>
      </listitem>
    </itemizedlist>

    <para>Aangeraden voorkennis:</para>

    <itemizedlist>
      <listitem>
	<para>Hoe extra software van derden te installeren (<xref
	    linkend="ports">).</para>
      </listitem>
    </itemizedlist>
  </sect1>

  <sect1 id="linuxemu-lbc-install">
    <title>Installatie</title>

    <indexterm><primary>KLD (kernel loadable object)</primary></indexterm>

    <para>&linux; binaire compatibiliteit staat standaard niet aan.  De
      gemakkelijkste manier om deze functionaliteit aan te zetten is
      door het <literal>linux</literal> KLD object (<quote>Kernel
      LoaDable object</quote>) te laden.  Deze module kan geladen
      worden door het volgende commando als <username>root</username>
      uit te voeren:</para>

    <screen>&prompt.root; <userinput>kldload linux</userinput></screen>

    <para>Als &linux; compatibiliteit altijd aan moet staan, dan moet
      de volgende regel aan <filename>/etc/rc.conf</filename>
      toegevoegd worden:</para>

    <programlisting>linux_enable="YES"</programlisting>

    <para>Met &man.kldstat.8; kan gecontroleerd worden of de KLD
      geladen is:</para>

    <screen>&prompt.user; <userinput>kldstat</userinput>
Id Refs Address    Size     Name
 1    2 0xc0100000 16bd8    kernel
 7    1 0xc24db000 d000     linux.ko</screen>

    <indexterm>
      <primary>kernelopties</primary>

      <secondary>COMPAT_LINUX</secondary>
    </indexterm>

    <para>Als het om enige reden ongewenst of onmogelijk is de KLD te
      laden, dan kan de &linux; binaire compatibiliteit statisch in de
      kernel gecompileerd worden door
      <literal>options COMPAT_LINUX</literal> aan het
      kernelinstellingenbestand toe te voegen.  Daarna kan de nieuwe
      kernel zoals beschreven in <xref linkend="kernelconfig">
      ge&iuml;nstalleerd worden.</para>

    <sect2>
      <title>&linux; runtime bibliotheken installeren</title>

      <indexterm>
	<primary>&linux;</primary>

	<secondary>&linux; bibliotheken installeren</secondary>
      </indexterm>

      <para>Dit kan op twee manieren gedaan worden: door de <link
	  linkend="linuxemu-libs-port">linux_base</link> port te
	gebruiken of door ze <link
	  linkend="linuxemu-libs-manually">handmatig</link> te
	installeren.</para>

      <sect3 id="linuxemu-libs-port">
	<title>Installeren uit de linux_base port</title>

	<indexterm><primary>Portscollectie</primary></indexterm>

	<para>Dit is verreweg de gemakkelijkste weg om te bewandelen
	  om de runtime bibliotheken te installeren.  Het is net
	  als het installeren van andere ports uit de <ulink
	    type="html"
	    url="file://localhost/usr/ports/">Portscollectie</ulink>.
	  Dit kan met het volgende commando:</para>

	<screen>&prompt.root; <userinput>cd /usr/ports/emulators/linux_base-f10</userinput>
&prompt.root; <userinput>make install distclean</userinput></screen>

	<note>
	  <para>Op &os;-systemen v&oacute;&oacute;r &os;&nbsp;8.0 dient u de
	    port <filename role="package">emulators/linux_base-fc4</filename> in
	    plaats van <filename
	      role="package">emulators/linux_base-f10</filename> te
	    gebruiken.</para>
	</note>

	<para>Nu is er werkende &linux; binaire compatibiliteit.
	  Sommige programma's kunnen klagen over onjuiste kleine
	  versies van de systeembibliotheken.  Over het algemeen
	  schijnt dit echter geen probleem te zijn.</para>

	<note>
	  <para>Er kunnen verschillende versies van de <filename
	      role="package">emulators/linux_base</filename> port
	    beschikbaar zijn, overeenkomend met verschillende versies
	    van verscheidene &linux; distributies.  Het is verstandig
	    de port te installeren die het meest voldoet aan de eisen
	    van de &linux; applicaties die ge&iuml;nstalleerd gaan
	    worden.</para>
	</note>
      </sect3>

      <sect3 id="linuxemu-libs-manually">
	<title>Bibliotheken handmatig installeren</title>

	<para>Als de Portscollectie niet is ge&iuml;nstalleerd, kunnen
	  de bibliotheken met de hand ge&iuml;nstalleerd worden.  Om
	  alles te laten werken moeten de &linux; gedeelde bibliotheken
	  waarvan het programma afhankelijk is en de runtime linker
	  ge&iuml;nstalleerd worden.  Ook moet een <quote>shadow
	    root</quote> map aangemaakt worden,
	  <filename>/compat/linux</filename>, voor &linux; bibliotheken
	  op een &os; systeem.  Elke gedeelde bibliotheek die wordt
	  geopend door &linux; programma's die op &os; draaien, kijken
	  eerst in deze boomstructuur.  Dus als een &linux; programma
	  bijvoorbeeld <filename>/lib/libc.so</filename> laadt,
	  probeert &os; eerst
	  <filename>/compat/linux/lib/libc.so</filename> te openen, en
	  als die niet bestaat, probeert het
	  <filename>/lib/libc.so</filename> proberen.  Gedeelde
	  bibliotheken moeten in de schaduwmapstructuur
	  ge&iuml;nstalleerd worden in plaats van in de paden die het
	  &linux; <command>ld.so</command> rapporteert.</para>

	<para>In het algemeen geldt dat alleen de eerste paar keer
	  dat een &linux; binary wordt ge&iuml;nstalleerd op een &os;
	  systeem naar de gedeelde bibliotheken gezocht wordt waar
	  &linux;-binairen van afhankelijk zijn.  Na een tijd is de
	  verzameling van &linux; gedeelde bibliotheken op een systeem
	  voldoende groot om nieuw ge&iuml;mporteerde &linux;-binairen
	  te kunnen draaien zonder enig extra werk.</para>
      </sect3>

      <sect3>
	<title>Extra gedeelde bibliotheken installeren</title>

	<indexterm><primary>gedeelde bibliotheken</primary></indexterm>

	<para>Wat als de <filename>linux_base</filename> port is
	  ge&iuml;nstalleerd en een applicatie nog steeds klaagt over
	  ontbrekende gedeelde bibliotheken?  Op zich zijn er twee
	  mogelijkheden (voor het opvolgen van deze instructies zijn
	  <username>root</username> rechten op een &os; systeem
	  vereist).</para>

	<para>Als er toegang is tot een &linux; systeem kan gekeken
	  worden welke gedeelde bibliotheken de applicatie nodig heeft
	  en kunnen ze gekopieerd worden naar het &os systeem.  Dit
	  wordt toegelicht in het volgende voorbeeld:</para>

	<informalexample>
	  <para>Stel dat FTP gebruikt is om de &linux; binary van
	    <application>Doom</application> op te halen en die op een
	    &linux; systeem staat waar toegang tot is.  Dan kan met
	    <command>ldd linuxdoom</command> gecontroleerd worden welke
	    gedeelde bibliotheken er nodig zijn:</para>

	  <screen>&prompt.user; <userinput>ldd linuxdoom</userinput>
libXt.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libXt.so.3.1.0
libX11.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libX11.so.3.1.0
libc.so.4 (DLL Jump 4.5pl26) =&gt; /lib/libc.so.4.6.29</screen>

	  <indexterm><primary>symbolische links</primary></indexterm>

	  <para>Alle bestanden uit de laatste kolom zijn nodig en
	    moeten onder <filename>/compat/linux</filename> komen te
	    staat en de namen uit de eerste kolom moeten er als
	    symbolische links naar verwijzen.  Dit betekent dat
	    uiteindelijk deze bestanden op een &os; systeem
	    staan:</para>

	  <screen>/compat/linux/usr/X11/lib/libXt.so.3.1.0
/compat/linux/usr/X11/lib/libXt.so.3 -&gt; libXt.so.3.1.0
/compat/linux/usr/X11/lib/libX11.so.3.1.0
/compat/linux/usr/X11/lib/libX11.so.3 -&gt; libX11.so.3.1.0
/compat/linux/lib/libc.so.4.6.29
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.29</screen>

	  <blockquote>
	    <note>
	      <para>Als er al een &linux; gedeelde bibliotheek met een
		groot revisienummer overeenstemmend met de eerste kolom
		van de <command>ldd</command> uitvoer is, dan hoeft het
		bestand uit de laatste kolom niet naar een systeem
		gekopieerd te worden.  Het bestand dat er al staat moet
		werken.  Het is aan te raden om de gedeelde bibliotheek
		sowieso te kopi&euml;ren als het een nieuwere versie
		is.  De oude kan verwijderd worden, zolang de
		symbolische link maar naar de nieuwe wijst.  Dus als
		deze bibliotheken op een systeem staan:</para>

	      <screen>/compat/linux/lib/libc.so.4.6.27
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.27</screen>

	      <para>en een nieuwe binary zegt een latere versie nodig
		te hebben volgens de uitvoer van
		<command>ldd</command>:</para>

	      <screen>libc.so.4 (DLL Jump 4.5pl26) -&gt; libc.so.4.6.29</screen>

	      <para>Als slechts &eacute;&eacute;n of twee versies
		verouderd zijn in het laatste cijfer, dan hoeft
		<filename>/lib/libc.so.4.6.29</filename> niet
		gekopieerd te worden, omdat het programma goed moet
		werken met de ietwat oudere versie.  Als er echter
		behoefte aan is, kan besloten worden om
		<filename>libc.so</filename> sowieso te verplaatsen,
		en dat resulteert in:</para>

	      <screen>/compat/linux/lib/libc.so.4.6.29
/compat/linux/libc.so.4 -&gt; lbic.so.4.6.29</screen>
	    </note>
	  </blockquote>

	  <blockquote>
	    <note>
	      <para>Het symbolische linkmechanisme is
		<emphasis>alleen</emphasis> nodig voor
		&linux;-binairen.  De &os; runtime linker zorgt zelf
		voor het kijken naar passende grote revisienummers en
		daar hoeft geen zorg over te bestaan.</para>
	    </note>
	  </blockquote>
	</informalexample>
      </sect3>
    </sect2>

    <sect2>
      <title>&linux; ELF-binairen installeren</title>

      <indexterm>
	<primary>&linux;</primary>

	<secondary>ELF-binairen</secondary>
      </indexterm>

      <para>ELF-binairen hebben soms een extra stap van
	<quote>branding</quote> nodig.  Als er ongemerkte ELF-binairen
	worden gedraaid, ontstaat er een foutmelding zoals de
	volgende:</para>

      <screen>&prompt.user; <userinput>./mijn-linux-elf-binary</userinput>
ELF binary type not known
Abort</screen>

      <para>Om de &os; kernel te helpen &os; ELF-binairen en &linux;
	binairen uit elkaar te houden, kan &man.brandelf.1; gebruikt
	worden.</para>

      <screen>&prompt.user; <userinput>brandelf -t Linux mijn-linux-elf-binary</userinput></screen>

      <indexterm><primary>GNU gereedschapskist</primary></indexterm>

      <para>De GNU gereedschapskist plaatst nu automatisch de juiste
	merkinformatie in ELF-binairen , dus deze stap zou steeds
	overbodiger moeten worden in de toekomst.</para>
    </sect2>

    <sect2>
      <title>Een willekeurige toepassing gebaseerd op Linux RPM
	installeren</title>

      <para>&os; heeft zijn eigen pakketdatabase die wordt gebruikt om alle
	ports te volgen (ook &linux; ports).  De &linux; RPM-database wordt dus
	niet gebruikt (noch ondersteund).</para>

      <para>Als u echter een willekeurige toepassing die op &linux; RPM is
	gebaseerd moet installeren kan dit bereikt worden met:</para>

      <screen>&prompt.root; <userinput>cd /compat/linux</userinput>
&prompt.root; <userinput>rpm2cpio -q &lt; /pad/naar/linux.archief.rpm | cpio -id</userinput></screen>

      <para>Draai daarna brandelf op de ge&iuml;nstalleerde ELF-binairen (niet
	de bibliotheken!).  Een schone de&iuml;nstallatie is niet mogelijk, maar
	het kan helpen met testen.</para>
    </sect2>

    <sect2>
      <title>De hostnaamresolver instellen</title>

      <screen>resolv+: "bind" is an invalid keyword resolv+:
"hosts" is an invalid keyword</screen>

      <para>Als DNS niet werkt of de bovenstaande melding ontstaat, dan
	moet <filename>/compat/linux/etc/host.conf</filename> ingesteld
	worden met daarin:</para>

      <programlisting>order hosts, bind
multi on</programlisting>

      <para>De volgorde geeft aan dat <filename>/etc/hosts</filename>
	als eerste doorzocht wordt en DNS als tweede.  Als
	<filename>/compat/linux/etc/host.conf</filename> niet
	ge&iuml;nstalleerd is, vinden &linux; applicaties
	<filename>/etc/host.conf</filename> van &os; en klagen ze over
	de incompatibele &os; syntaxis.  <literal>bind</literal> moet
	verwijderd worden als er geen naamserver is ingesteld die
	gebruik maakt van <filename>/etc/resolv.conf</filename>.</para>
    </sect2>
  </sect1>

  <sect1 id="linuxemu-mathematica">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Boris</firstname>
	  <surname>Hollas</surname>
	  <contrib>Bijgewerkt voor Mathematica 5.X door </contrib>
	</author>
      </authorgroup>
    </sect1info>
    <title>&mathematica; installeren</title>

    <indexterm>
      <primary>applicaties</primary>

      <secondary><application>&mathematica;</application></secondary>
    </indexterm>

    <para>Dit document beschrijft het installatieproces van de &linux;
      versie van <application>&mathematica; 5.X</application> op een
      &os; systeem.</para>

    <para>De &linux; versie van <application>&mathematica;</application>
      of <application>&mathematica; for Students</application> kan
      direct bij Wolfram besteld worden op <ulink
	url="http://www.wolfram.com/"></ulink>.</para>

    <sect2>
      <title>De &mathematica; Installer draaien</title>

      <para>Ten eerste dient &os; te weten dat de Linux-binairen van
	<application>&mathematica;</application> de Linux ABI gebruiken.
	De gemakkelijkste manier om dit te doen is om het standaard
	ELF-merk op Linux te zetten voor alle ongemerkte binairen met
	het commando:</para>

      <screen>&prompt.root; <userinput>sysctl kern.fallback_elf_brand=3</userinput></screen>

      <para>Dit laat &os; aannemen dat alle ongemerkte ELF-binairen de
	Linux ABI gebruiken en dus zou de installer rechtstreeks van
	de CD-ROM moeten kunnen draaien.</para>

      <para>Kopieer nu het bestand <filename>MathInstaller</filename>
	naar de harde schijf:</para>

      <screen>&prompt.root; <userinput>mount /cdrom</userinput>
&prompt.root; <userinput>cp /cdrom/Unix/Installers/Linux/MathInstaller /localdir/</userinput></screen>

      <para>Vervang binnen dit bestand <literal>/bin/sh</literal> op de
	eerste regel door <literal>/compat/linux/bin/sh</literal>.  Dit
	zorgt ervoor dat de installer door de Linux-versie van
	&man.sh.1; wordt uitgevoerd.  Vervang vervolgens met een
	tekstverwerker of het onderstaande script in de volgende sectie
	alle voorkomens van <literal>Linux)</literal> door
	<literal>FreeBSD)</literal>.  Dit zorgt ervoor dat de
	<application>&mathematica;</application> installer, dat
	<command>uname -s</command> gebruikt om het besturingssysteem te
	bepalen, om &os; als een Linux-achtig besturingssysteem te
	behandelen.  Het aanroepen van <command>MathInstaller</command>
	zal nu <application>&mathematica;</application> installeren.
      </para>
    </sect2>

    <sect2>
      <title>De &mathematica;-executables wijzigen</title>

      <para>De shellscripts die <application>&mathematica;</application>
	aanmaakte tijdens de installatie moeten gewijzigd worden voordat
	u ze kunt gebruiken.  Als u <filename
	  class="directory">/usr/local/bin</filename> kiest als de map
	om <application>&mathematica;</application>-executables in te
	plaatsen, zult u in deze map symbolische links naar bestanden
	genaamd <filename>math</filename>,
	<filename>mathematica</filename>,
	<filename>Mathematica</filename>, en
	<filename>MathKernel</filename> aantreffen.  Vervang met een
	tekstverwerker of het volgende shellscript in elk van
	deze <literal>Linux)</literal> door <literal>FreeBSD</literal>:
      </para>

      <programlisting>#!/bin/sh
cd /usr/local/bin
for i in math mathematica Mathematica MathKernel
  do sed 's/Linux)/FreeBSD)/g' $i &gt; $i.tmp
  sed 's/\/bin\/sh/\/compat\/linux\/bin\/sh/g' $i.tmp &gt; $i
  rm $i.tmp
  chmod a+x $i
done</programlisting>
    </sect2>

    <sect2>
      <title>&mathematica; wachtwoord opvragen</title>

      <indexterm>
	<primary>Ethernet</primary>

	<secondary>MAC-adres</secondary>
      </indexterm>

      <para>Wanneer u <application>&mathematica;</application> voor de
	eerste keer start, zal u om een wachtwoord gevraagd worden.  Als
	u nog geen wachtwoord van Wolfram heeft verkregen, draait u het
	programma <command>mathinfo</command> in de installatiemap om uw
	<quote>machine-ID</quote> te verkrijgen.  Dit machine-ID is
	alleen op het MAC-adres van uw eerste Ethernetkaart gebaseerd,
	zodat u uw kopie van <application>&mathematica</application>
	niet op andere machines kunt draaien.</para>

      <para>Bij een registratie bij Wolfram, per email, telefoon of
	fax, wordt het <quote>machine ID</quote> opgegeven en zij
	reageren met een overeenkomstig wachtwoord dat uit groepen
	getallen bestaat.</para>
    </sect2>

    <sect2>
      <title>Het &mathematica; frontend over een netwerk
	draaien</title>

      <para><application>&mathematica;</application> gebruikt enkele
	speciale lettertypen om tekens af te beelden die niet aanwezig
	zijn in een standaard lettertypeverzameling (integralen,
	sommen, Griekse letters, enzovoort).  Het X-protocol vereist
	dat deze lettertypen <emphasis>lokaal</emphasis> worden
	ge&iuml;nstalleerd.  Dit betekent dat deze lettertypen
	gekopieerd moeten worden vanaf de CD-ROM of vanaf een host met
	<application>&mathematica;</application> erop naar de lokale
	machine.  Deze lettertypen worden meestal opgeslagen in
	<filename>/cdrom/Unix/Files/SystemFiles/Fonts</filename> op de
	CD-ROM of in
	<filename>/usr/local/mathematica/SystemFiles/Fonts</filename>
	op de harde schijf.  De eigenlijke lettertypen staan in de
	submap <filename>Type1</filename> en <filename>X</filename>.
	Er zijn verschillende manieren om ze te installeren, zoals
	hieronder staat beschreven.</para>

      <para>De eerste manier is om ze te kopi&euml;ren in
	&eacute;&eacute;n van de bestaande lettertypenmappen in
	<filename>/usr/X11R6/lib/X11/fonts</filename>.  Hiertoe dient
	<filename>fonts.dir</filename> bewerkt te worden door de namen
	van de lettertypen eraan toe te voegen het aantal lettertypen
	op de eerste regel te veranderen.  Als alternatief kan ook
	eenvoudig &man.mkfontdir.1; in de map gedraaid worden waar de
	lettertypen heen zijn gekopieerd.</para>

      <para>De tweede manier om dit te doen is door de mappen naar
	<filename>/usr/X11R6/lib/X11/fonts</filename> te
	kopi&euml;ren:</para>

      <screen>&prompt.root; <userinput>cd /usr/X11R6/lib/X11/fonts</userinput>
&prompt.root; <userinput>mkdir X</userinput>
&prompt.root; <userinput>mkdir MathType1</userinput>
&prompt.root; <userinput>cd /cdrom/Unix/Files/SystemFiles/Fonts</userinput>
&prompt.root; <userinput>cp X/* /usr/X11R6/lib/X11/fonts/X</userinput>
&prompt.root; <userinput>cp Type1/* /usr/X11R6/lib/X11/fonts/MathType1</userinput>
&prompt.root; <userinput>cd /usr/X11R6/lib/X11/fonts/X</userinput>
&prompt.root; <userinput>mkfontdir</userinput>
&prompt.root; <userinput>cd ../MathType1</userinput>
&prompt.root; <userinput>mkfontdir</userinput></screen>

      <para>Voeg nu de nieuwe lettertypenmappen toe aan het
	lettertypenpad:</para>

      <screen>&prompt.root; <userinput>xset fp+ /usr/X11R6/lib/X11/fonts/X</userinput>
&prompt.root; <userinput>xset fp+ /usr/X11R6/lib/X11/fonts/MathType1</userinput>
&prompt.root; <userinput>xset fp rehash</userinput></screen>

      <para>Als de <application>&xorg;</application> server gebruikt
	wordt, kunnen deze lettertypenmappen automatisch geladen worden
	door ze aan <filename>xorg.conf</filename> toe te
	voegen.</para>

      <note>
	<para>Voor <application>&xfree86;</application> servers is het
	instellingenbestand <filename>XF86Config</filename>.</para>
      </note>

      <indexterm><primary>lettertypen</primary></indexterm>

      <para>Als er nog <emphasis>geen</emphasis> map
	<filename>/usr/X11R6/lib/X11/fonts/Type1</filename> bestaat,
	kan de naam van de map <filename>MathType1</filename> in het
	bovenstaande voorbeeld veranderd worden naar
	<filename>Type1</filename>.</para>
    </sect2>
  </sect1>

  <sect1 id="linuxemu-maple">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Aaron</firstname>
	  <surname>Kaplan</surname>
<!--	  <address><email>aaron@lo-res.org</email></address>-->
	  <contrib>Bijgedragen door </contrib>
	</author>
      </authorgroup>

      <authorgroup>
	<author>
	  <firstname>Robert</firstname>
	  <surname>Getschmann</surname>
<!--	  <address><email>rob@getschmann.org</email></address>-->
	  <contrib>Met dank aan </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>&maple; installeren</title>

    <indexterm>
      <primary>applicaties</primary>

      <secondary><application>Maple</application></secondary>
    </indexterm>

    <para><application>&maple;</application> is een commercieel
      wiskundeprogramma vergelijkbaar met
      <application>&mathematica;</application>.  De software is te koop
      op <ulink url="http://www.maplesoft.com/"></ulink> en kan daar
      ook geregistreerd worden voor een licentiebestand.  Om deze
      software op &os; te installeren kunnen de volgende eenvoudige
      stappen gevolgd worden:</para>

    <procedure>
      <step>
	<para>Voer het <filename>INSTALL></filename> shellscript
	  uit van de productdistributie.  Kies de <quote>RedHat</quote>
	  optie als daarom wordt gevraagd door het
	  installatieprogramma.  Een typische installatiemap zou
	  <filename class="directory">/usr/local/maple</filename>
	  zijn.</para>
      </step>

      <step>
	<para>Bestel, als dat nog niet gedaan is, een licentie voor
	  <application>&maple;</application> van Maple Waterloo
	  Software (<ulink
	    url="http://register.maplesoft.com/"></ulink>) en kopieer
	  deze naar
	  <filename>/usr/local/maple/license/license.dat</filename>.
	</para>
      </step>

      <step>
	<para>Installeer de <application>FLEXlm</application>
	  licentiebeheerder met het installatieshellscript
	  <filename>INSTALL_LIC</filename>, dat geleverd wordt bij
	  <application>&maple;</application>.  Stel de primaire
	  hostnaam voor de machine in voor de licentieserver.</para>
      </step>

      <step>
	<para>Patch het bestand
	  <filename>/usr/local/maple/bin/maple.system.type</filename>
	  met het volgende:</para>

	<programlisting>   ----- knip ------------------
*** maple.system.type.orig      Sun Jul  8 16:35:33 2001
--- maple.system.type   Sun Jul  8 16:35:51 2001
***************
*** 72,77 ****
--- 72,78 ----
          # the IBM RS/6000 AIX case
          MAPLE_BIN="bin.IBM_RISC_UNIX"
          ;;
+     "FreeBSD"|\
      "Linux")
          # the Linux/x86 case
        # We have two Linux implementations, one for Red Hat and
   ----- knip einde van patch -----</programlisting>

	<para>Achter <literal>"FreeBSD"|</literal> mogen geen verdere
	  witvelden staan.</para>

	<para>Deze patch instrueert <application>&maple;</application>
	  om <quote>&os;</quote> als een &linux; systeem te herkennen.
	  Het shellscript <filename>bin/maple</filename> roept het
	  shellscript <filename>bin/maple.system.type</filename> aan,
	  dat op zijn beurt <command>uname -a</command> aanroept om
	  achter de naam van het besturingssysteem te komen.
	  Afhankelijk van de naam van het besturingssysteem zoekt het
	  uit welke binairen het moet gebruiken.</para>
      </step>

      <step>
	<para>Start de licentieserver.</para>

	<para>Het volgende script, ge&iuml;nstalleerd als
	  <filename>/usr/local/etc/rc.d/lmgrd.sh</filename>, is een
	  gemakkelijke manier om <command>lmgrd</command> op te
	  starten:</para>

	<programlisting>   ----- knip ------------

#! /bin/sh
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/X11R6/bin
PATH=${PATH}:/usr/local/maple/bin:/usr/local/maple/FLEXlm/UNIX/LINUX
export PATH

LICENSE_FILE=/usr/local/maple/license/license.dat
LOG=/var/log/lmgrd.log

case "$1" in
start)
	lmgrd -c ${LICENSE_FILE} 2>> ${LOG} 1&gt;&2
	echo -n " lmgrd"
	;;
stop)
	lmgrd -c ${LICENSE_FILE} -x lmdown 2>> ${LOG} 1&gt;&2
	;;
*)
	echo "Usage: `basename $0` {start|stop}" 1&gt;&2
	exit 64
	;;
esac

exit 0
   ----- knip ------------</programlisting></step>


      <step>
	<para><application>&maple;</application> testen:</para>

	<screen>&prompt.user; <userinput>cd /usr/local/maple/bin</userinput>
&prompt.user; <userinput>./xmaple</userinput></screen>

	<para>Nu hoort het programma te draaien.  Het is belangrijk om
	  Maplesoft te schrijven om ze te laten weten dat een echte
	  &os; versie gewenst is!</para>
      </step>
    </procedure>

    <sect2>
      <title>Gemeenschappelijke verborgen gevaren</title>

      <itemizedlist>
	<listitem>
	  <para>De <application>FLEXlm</application>
	    licentiebeheerder kan een lastig programma zijn om mee te
	    werken.  Aanvullende documentatie staat op <ulink
	      url="http://www.globetrotter.com/"></ulink>.</para>
	</listitem>

	<listitem>
	  <para><command>lmgrd</command> staat er bekend om erg
	    kieskeurig over het licentiebestand te zijn en core te
	    dumpen als er een probleem is.  Een correct licentiebestand
	    ziet er zo uit:</para>

	  <programlisting># =======================================================
# License File for UNIX Installations ("Pointer File")
# =======================================================
SERVER chillig ANY
#USE_SERVER
VENDOR maplelmg

FEATURE Maple maplelmg 2000.0831 permanent 1 XXXXXXXXXXXX \
         PLATFORMS=i86_r ISSUER="Waterloo Maple Inc." \
         ISSUED=11-may-2000 NOTICE=" Technische Universitat Wien" \
         SN=XXXXXXXXX</programlisting>

	  <note>
	    <para>Het serienummer en de sleutel zijn vervangen door
	      <quote>X</quote>'en.  <hostid>chillig</hostid> is de
	      hostnaam.</para>
	  </note>

	  <para>Het bewerken van het licentiebestand lukt zolang de
	    regel <quote>FEATURE</quote> niet verandert (die
	    beschermd is door de licentiesleutel).</para>
	</listitem>
      </itemizedlist>
    </sect2>
  </sect1>

  <sect1 id="linuxemu-matlab">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Dan</firstname>
	  <surname>Pelleg</surname>
	  <contrib>Bijgedragen door </contrib>
	</author>
	<!-- daniel+handbook@pelleg.org -->
      </authorgroup>
    </sect1info>

    <title>&matlab; installeren</title>

    <indexterm>
      <primary>applicaties</primary>

      <secondary><application>&matlab;</application></secondary>
    </indexterm>

    <para>Dit document beschrijft het installatieproces van de &linux;
      versie van <application>&matlab; 6.5</application> op een &os;
      systeem.  Het werkt best goed, met uitzondering van de
      <application>&java.virtual.machine;</application> (zie <xref
	linkend="matlab-jre">).</para>

    <para>De &linux; versie van <application>&matlab;</application> kan
      besteld worden bij The MathWorks op <ulink
	url="http://www.mathworks.com"></ulink>.  Er dient ook een
      licentiebestand of instructies hoe dat te maken te zijn.  Het is
      belangrijk om Maplesoft te schrijven om ze te laten weten dat een
      echte &os; versie gewenst is!</para>

    <sect2>
      <title>&matlab; installeren</title>

      <para>Om <application>&matlab;</application> te
	installeren:</para>

      <procedure>
	<step>
	  <para>Laad de installatie-CD-ROM en koppel die aan.  Start het
	    installatiescript als <username>root</username>:</para>

	  <screen>&prompt.root; <userinput>/compat/linux/bin/sh /cdrom/install</userinput></screen>

	  <tip>
	    <para>Het is een grafisch installatieprogramma.  Als er
	      foutmeldingen verschijnen dat het programma geen scherm
	      kan openen, kan <command>setenv HOME
		~<replaceable>GEBRUIKER</replaceable></command>
	      uitgevoerd worden, waar
	      <replaceable>GEBRUIKER</replaceable> de gebruiker is
	      waarmee &man.su.1; is gedaan.</para>
	  </tip>
	</step>

	<step>
	  <para>Als om de <application>&matlab;</application> rootmap
	    wordt gevraagd, dient
	    <userinput>/compat/linux/usr/local/matlab</userinput>
	    opgegeven te worden.</para>

	  <tip>
	    <para>Voer op de commandoregel het volgende uit om de
	      rest van het installatieproces gemakkelijk te houden:
	      <command>set
		MATLAB=/compat/linux/usr/local/matlab</command>.</para>
	  </tip>
	</step>

	<step>
	  <para>Wijzig het licentiebestand zoals aangegeven tijdens het
	    verkrijgen van de licentie voor
	    <application>&matlab;</application>.</para>

	  <tip>
	    <para>Dit bestand kan van tevoren gemaakt worden met een
	      tekstverwerker en door het te kopi&euml;ren naar
	      <filename>$MATLAB/license.dat</filename> voordat het
	      installatieprogramma vraagt om het te bewerken.</para>
	  </tip>
	</step>

	<step>
	  <para>Maak het installatieproces af.</para>
	</step>
      </procedure>

      <para>Nu is de installatie van
	<application>&matlab;</application> compleet.  De volgende
	stappen <quote>lijmen</quote> het aan het &os; systeem.</para>
    </sect2>

    <sect2>
      <title>Licentiebeheerder starten</title>

      <procedure>
	<step>
	  <para>Maak symbolische links voor de scriptbestanden van de
	    licentiebeheerder:</para>

	  <screen>&prompt.root; <userinput>ln -s $MATLAB/etc/lmboot /usr/local/etc/lmboot_TMW</userinput>
&prompt.root; <userinput>ln -s $MATLAB/etc/lmdown /usr/local/etc/lmdown_TMW</userinput>
	  </screen>
	</step>

	<step>
	  <para>Maak een opstartbestand in
	    <filename>/usr/local/etc/rc.d/flexlm.sh</filename>.
	    Onderstaand voorbeeld is een gewijzigde versie van het
	    meegeleverde <filename>$MATLAB/etc/rc.lm.glnx86</filename>.
	    De wijzigingen omvatten bestandslocaties en het starten
	    van de licentiebeheerder onder &linux;-emulatie.</para>

	  <programlisting>#!/bin/sh
case "$1" in
  start)
        if [ -f /usr/local/etc/lmboot_TMW ]; then
              /compat/linux/bin/sh /usr/local/etc/lmboot_TMW -u <replaceable>gebruikersnaam</replaceable> &amp;&amp; echo 'MATLAB_lmgrd'
        fi
        ;;
  stop)
	if [ -f /usr/local/etc/lmdown_TMW ]; then
            /compat/linux/bin/sh /usr/local/etc/lmdown_TMW  &gt; /dev/null 2&gt;&amp;1
	fi
        ;;
  *)
	echo "Usage: $0 {start|stop}"
	exit 1
	;;
esac

exit 0</programlisting>

	  <important>
	    <para>Het bestand moet uitvoerbaar zijn:</para>

	    <screen>&prompt.root; <userinput>chmod +x /usr/local/etc/rc.d/flexlm.sh</userinput></screen>

	    <para>Ook moet bovenstaande
	      <replaceable>gebruikersnaam</replaceable> vervangen
	      worden door een geldige gebruikersnaam op het systeem
	      (maar niet door <username>root</username>).</para>
	  </important>
	</step>

	<step>
	  <para>Start de licentiebeheerder op met het commando:</para>

	  <screen>&prompt.root; <userinput>/usr/local/etc/rc.d/flexlm.sh start</userinput></screen>
	</step>
      </procedure>
    </sect2>

    <sect2 id="matlab-jre">
      <title>De &java; runtime-omgeving linken</title>

      <para>Verander de <application>&java;</application> Runtime
	Environment Link naar een die werkt op &os;:</para>

      <screen>&prompt.root; <userinput>cd $MATLAB/sys/java/jre/glnx86</userinput>
&prompt.root; <userinput>unlink jre; ln -s ./jre1.1.8 ./jre</userinput></screen>
    </sect2>

    <sect2>
      <title>&matlab; opstartscript maken</title>

      <procedure>
	<step>
	  <para>Plaats het volgende startscript in
	    <filename>/usr/local/bin/matlab</filename>:</para>

	  <programlisting>#!/bin/sh
/compat/linux/bin/sh /compat/linux/usr/local/matlab/bin/matlab "$@"</programlisting>
	</step>

	<step>
	  <para>Geef vervolgens het commando
	    <command>chmod +x /usr/local/bin/matlab</command>.</para>
	</step>
      </procedure>

      <tip>
	<para>Afhankelijk van de versie van <filename
	    role="package">emulators/linux_base</filename>, kunnen er
	  fouten optreden als dit script draait.  Om dat te voorkomen,
	  dient in
	  <filename>/compat/linux/usr/local/matlab/bin/matlab</filename>
	  de regel:</para>

	<programlisting>if [ `expr "$lscmd" : '.*-&gt;.*'` -ne 0 ]; then</programlisting>

	<para>(in versie 13.0.1 staat dit op regel 410) veranderd te
	  worden in:</para>

	<programlisting>if test -L $newbase; then</programlisting>
      </tip>
    </sect2>

    <sect2>
      <title>&matlab; afsluitscript maken</title>

      <para>Het volgende is nodig om een probleem op te lossen dat
	samenhangt met het onjuist afsluiten van &matlab;.</para>

      <procedure>
	<step>
	  <para>Maak het bestand
	    <filename>$MATLAB/toolbox/local/finish.m</filename> dat
	    alleen de volgende regel bevat:</para>

	  <programlisting>! $MATLAB/bin/finish.sh</programlisting>

	  <note>
	    <para><literal>$MATLAB$</literal> is hier letterlijk
	      bedoeld.</para>
	  </note>

	  <tip>
	    <para>In dezelfde map staan de bestanden
	      <filename>finishsav.m</filename> en
	      <filename>finishdlg.m</filename>, die de mogelijkheid
	      geven om de werkomgeving te bewaren v&oacute;&oacute;r
	      het afsluiten.  Als &eacute;&eacute;n van deze scripts
	      gebruikt wordt, dient de bovenstaande regel direct na het
	      commando <literal>save</literal> ingevoegd te
	      worden.</para>
	  </tip>
	</step>

	<step>
	  <para>Maak het bestand
	    <filename>$MATLAB/bin/finish.sh</filename>, dat het
	    volgende bevat:</para>

	  <programlisting>#!/usr/compat/linux/bin/sh
(sleep 5; killall -1 matlab_helper) &
exit 0</programlisting>
	</step>

	<step>
	  <para>Maak het bestand uitvoerbaar:</para>

	  <screen>&prompt.root; <userinput>chmod +x $MATLAB/bin/finish.sh</userinput></screen>
	</step>
      </procedure>
    </sect2>

    <sect2 id="matlab-using">
      <title>&matlab; gebruiken</title>

      <para>Nu kan met <command>matlab</command> het programma gestart
	worden.</para>
    </sect2>
  </sect1>

  <sect1 id="linuxemu-oracle">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Marcel</firstname>
	  <surname>Moolenaar</surname>
	  <contrib>Bijgedragen door </contrib>
	</author>
	<!-- marcel@cup.hp.com -->
      </authorgroup>
    </sect1info>

    <title>&oracle; installeren</title>

    <indexterm>
      <primary>applicaties</primary>

      <secondary><application>Oracle</application></secondary>
    </indexterm>

    <sect2>
      <title>Voorwoord</title>

      <para>Hieronder wordt het installatieproces van
	<application>&oracle;&nbsp;8.0.5</application> en
	<application>&oracle;&nbsp;8.0.5.1 Enterprise
	  Edition</application> voor &linux; op een &os;-machine
	beschreven.</para>
    </sect2>

    <sect2>
      <title>De &linux;-omgeving installeren</title>

      <para>Uit de Portscollectie dienen <filename
	  role="package">emulators/linux_base</filename> en <filename
	  role="package">devel/linux_devtools</filename>
	ge&iuml;nstalleerd te zijn.  Als er problemen zijn met deze
	ports, kan het zijn dat de pakketten of oudere versies uit de
	Portscollectie gebruikt moeten worden.</para>

      <para>Om de intelligente agent te draaien, moet ook het Red Hat
	Tcl package ge&iuml;nstalleerd worden:
	<filename>tcl-8.0.3-20.i386.rpm</filename>.  Het algemene
	commando om pakketten te installeren met de offici&euml;le
	<application>RPM</application> port (<filename
	  role="package">archivers/rpm</filename>) is:</para>

      <screen>&prompt.root; <userinput>rpm -i --ignoreos --root /compat/linux --dbpath /var/lib/rpm <replaceable>package</replaceable></userinput></screen>

      <para>De installatie van het <replaceable>package</replaceable>
	hoort foutloos te verlopen.</para>
    </sect2>

    <sect2>
      <title>De &oracle;-omgeving cre&euml;ren</title>

      <para>Voordat <application>&oracle;</application>
	ge&iuml;nstalleerd kan worden, moet een juiste omgeving
	opgezet worden.  Dit document beschrijft alleen welke
	<emphasis>speciale</emphasis> dingen gedaan moeten worden om
	<application>&oracle;</application> voor &linux; op &os; te
	draaien, en niet wat beschreven staat in de
	<application>&oracle;</application>
	installatiehandleiding.</para>

      <sect3 id="linuxemu-kernel-tuning">
	<title>Kerneloptimalisatie</title>

	<indexterm><primary>kerneloptimalisatie</primary></indexterm>

	<para>Zoals beschreven staat in de
	  <application>&oracle;</application> installatiehandleiding
	  moet de maximale grootte van het gedeelde geheugen ingesteld
	  worden.  Op &os; moet <literal>SHMMAX</literal> niet gebruikt
	  worden.  <literal>SHMMAX</literal> wordt slechts uit
	  <literal>SHMMAXPGS</literal> en <literal>PGSIZE</literal>
	  berekend.  Daarom dient <literal>SHMMAXPGS</literal>
	  gedefinieerd te worden.  Alle andere opties kunnen gebruikt
	  worden zoals in de handleiding staat beschreven.
	  Bijvoorbeeld:</para>

	<programlisting>options SHMMAXPGS=10000
options SHMMNI=100
options SHMSEG=10
options SEMMNS=200
options SEMMNI=70
options SEMMSL=61</programlisting>

	<para>Deze opties kunnen naargelang het gebruik van
	  <application>&oracle;</application> ingesteld worden.</para>

	<para>Ook de volgende opties dienen in het
	  kernelinstellingenbestand te staan:</para>

	<programlisting>options SYSVSHM #SysV gedeeld geheugen
options SYSVSEM #SysV semaforen
options SYSVMSG #SysV interprocescommunicatie</programlisting>
      </sect3>

      <sect3 id="linuxemu-oracle-account">

	<title>&oracle; account</title>

	<para>Cree&euml;r een <username>oracle</username> account op
	  dezelfde manier als elk ander account.  Het
	  <username>oracle</username> account is alleen bijzonder in
	  het opzicht dat het een &linux; shell moet hebben.  Dat kan
	  door <literal>/compat/linux/bin/bash</literal> toe te voegen
	  aan <filename>/etc/shells</filename> en de shell voor het
	  <username>oracle</username> account in te stellen op
	  <filename>/compat/linux/bin/bash</filename>.</para>
      </sect3>

      <sect3 id="linuxemu-environment">
	<title>Omgeving</title>

	<para>Naast de normale <application>&oracle;</application>
	  variabelen als <envar>ORACLE_HOME</envar> en
	  <envar>ORACLE_SID</envar> moeten de volgende
	  omgevingsvariabelen ingesteld worden:</para>

	<informaltable frame="none">
	  <tgroup cols="2">

	  <colspec colwidth="1*">

	  <colspec colwidth="2*">
	    <thead>
	      <row>
		<entry>Variabele</entry>

		<entry>Waarde</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry><envar>LD_LIBRARY_PATH</envar></entry>

		<entry><literal>$ORACLE_HOME/lib</literal></entry>
	      </row>

	      <row>
		<entry><envar>CLASSPATH</envar></entry>

		<entry><literal>$ORACLE_HOME/jdbc/lib/classes111.zip</literal></entry>
	      </row>

	      <row>
		<entry><envar>PATH</envar></entry>

		<entry><literal>/compat/linux/bin;
/compat/linux/sbin;
/compat/linux/usr/bin;
/compat/linux/usr/sbin;
/bin;
/sbin;
/usr/bin;
/usr/sbin;
/usr/local/bin;
$ORACLE_HOME/bin</literal></entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>Het is aan te raden om alle omgevingsvariabelen in
	  <filename>.profile</filename> in te stellen.  Een volledig
	  voorbeeld is:</para>

	<programlisting>ORACLE_BASE=/oracle; export ORACLE_BASE
ORACLE_HOME=/oracle; export ORACLE_HOME
LD_LIBRARY_PATH=$ORACLE_HOME/lib
export LD_LIBRARY_PATH
ORACLE_SID=ORCL; export ORACLE_SID
ORACLE_TERM=386x; export ORACLE_TERM
CLASSPATH=$ORACLE_HOME/jdbc/lib/classes111.zip
export CLASSPATH
PATH=/compat/linux/bin:/compat/linux/sbin:/compat/linux/usr/bin
PATH=$PATH:/compat/linux/usr/sbin:/bin:/sbin:/usr/bin:/usr/sbin
PATH=$PATH:/usr/local/bin:$ORACLE_HOME/bin
export PATH</programlisting>
      </sect3>
    </sect2>

    <sect2>
      <title>&oracle; installeren</title>

      <para>Wegens een kleine inconsistentie in de &linux; emulator
	moet de map <filename>.oracle</filename> aangemaakt worden
	in <filename>/var/tmp</filename> voordat het
	installatieprogramma wordt gestart.  De gebruiker
	<username>oracle</username> moet de eigenaar van deze map
	zijn.  Nu hoort <application>&oracle;</application> zonder
	problemen te installeren.  Bij problemen dienen eerst de
	<application>&oracle;</application> distributie en/of de
	instellingen gecontroleerd te worden!  Nadat
	<application>&oracle;</application> is ge&iuml;nstalleerd,
	moeten de patches uit de volgende twee secties
	ge&iuml;nstalleerd worden.</para>

      <para>Een veelvoorkomend probleem is dat de adapter voor het
	TCP-protocol niet goed is ge&iuml;nstalleerd.  De consequentie
	daarvan is dat er geen TCP-listeners gestart kunnen worden.  De
	volgende acties helpen om dit probleem op te lossen:</para>

      <screen>&prompt.root; <userinput>cd $ORACLE_HOME/network/lib</userinput>
&prompt.root; <userinput>make -f ins_network.mk ntcontab.o</userinput>
&prompt.root; <userinput>cd $ORACLE_HOME/lib</userinput>
&prompt.root; <userinput>ar r libnetwork.a ntcontab.o</userinput>
&prompt.root; <userinput>cd $ORACLE_HOME/network/lib</userinput>
&prompt.root; <userinput>make -f ins_network.mk install</userinput></screen>

      <para>Hierna dient <filename>root.sh</filename> nogmaals te
	draaien!</para>

      <sect3 id="linuxemu-patch-root">
	<title><filename>root.sh</filename> patchen</title>

	<para>Als <application>&oracle;</application>
	  ge&iuml;nstalleerd wordt, worden sommige acties die als
	  <username>root</username> moeten worden uitgevoerd
	  geregistreerd in een shellscript met de naam
	  <filename>root.sh</filename>.  Dit script komt in de map
	  <filename>orainst</filename> te staan.  De volgende patch
	  dient uitgevoerd te worden op <filename>root.sh</filename> om
	  het de juiste locatie van <command>chown</command> te laten
	  gebruiken of als alternatief kan het script onder een
	  originele &linux; shell gedraaid worden</para>

	<programlisting>*** orainst/root.sh.orig Tue Oct 6 21:57:33 1998
--- orainst/root.sh Mon Dec 28 15:58:53 1998
***************
*** 31,37 ****
# This is the default value for CHOWN
# It will redefined later in this script for those ports
# which have it conditionally defined in ss_install.h
! CHOWN=/bin/chown
#
# Define variables to be used in this script
--- 31,37 ----
# This is the default value for CHOWN
# It will redefined later in this script for those ports
# which have it conditionally defined in ss_install.h
! CHOWN=/usr/sbin/chown
#
# Define variables to be used in this script</programlisting>

	<para>Als <application>&oracle;</application> niet vanaf
	  een CD-ROM wordt ge&iuml;nstalleerd, kan de broncode van
	  <filename>root.sh</filename> aangepast worden.  Die heet
	  <filename>rthd.sh</filename> en staat in de map
	  <filename>orainst</filename> in de broncodestructuur.
	</para>
      </sect3>

      <sect3 id="linuxemu-patch-tcl">
	<title>genclntsh patchen</title>

	<para>Het script <command>genclntsh</command> wordt gebruikt om
	  &eacute;&acute;n enkele gedeelde bibliotheek voor de
	  cli&euml;nt aan te maken.  Het wordt gebruikt tijdens het
	  maken van de demonstraties.  Met de volgende patch wordt de
	  definitie van <envar>PATH</envar> uitgecommentarieerd:</para>

	<programlisting>*** bin/genclntsh.orig Wed Sep 30 07:37:19 1998
--- bin/genclntsh Tue Dec 22 15:36:49 1998
***************
*** 32,38 ****
#
# Explicit path to ensure that we're using the correct commands
#PATH=/usr/bin:/usr/ccs/bin export PATH
! PATH=/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin export PATH
#
# each product MUST provide a $PRODUCT/admin/shrept.lst
--- 32,38 ----
#
# Explicit path to ensure that we're using the correct commands
#PATH=/usr/bin:/usr/ccs/bin export PATH
! #PATH=/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin export PATH
#
# each product MUST provide a $PRODUCT/admin/shrept.lst</programlisting>
      </sect3>
    </sect2>

    <sect2>
      <title>&oracle; draaien</title>

      <para>Als de instructies worden gevolgd, draait
	<application>&oracle;</application> als op &linux; zelf.</para>
    </sect2>
  </sect1>

  <sect1 id="sapr3">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Holger</firstname>
	  <surname>Kipp</surname>
	  <contrib>Bijgedragen door </contrib>
	</author>
      </authorgroup>
      <!-- holger.kipp@alogis.com -->
      <authorgroup>
	<author>
	  <firstname>Valentino</firstname>
	  <surname>Vaschetto</surname>
	  <contrib>Originele versie omgezet naar SGML door </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>&sap.r3; installeren</title>

    <indexterm>
      <primary>applicaties</primary>

      <secondary><application>&sap.r3;</application></secondary>
    </indexterm>

    <para>Installaties van <application>&sap;</application> Systemen
      die &os; gebruiken worden niet ondersteund door het &sap;
      ondersteuningsteam.  Zij bieden alleen ondersteuning voor
      gecertificeerde platformen.</para>

    <sect2 id="preface">
      <title>Voorwoord</title>

      <para>Dit document beschrijft een mogelijke manier om een
	<application>&sap.r3; System</application> met
	<application>&oracle; Database</application> voor &linux; op
	een &os; machine, inclusief de installatie van &os; en
	<application>&oracle;</application>.  Er worden twee
	instellingen beschreven:</para>

      <itemizedlist>
	<listitem>
	  <para><application>&sap.r3; 4.6B (IDES)</application> met
	    <application>&oracle; 8.0.5</application> op
	    &os;&nbsp;4.3&ndash;STABLE;.</para>
	</listitem>

	<listitem>
	  <para><application>&sap.r3; 4.6C</application> met
	    <application>&oracle; 8.1.7</application> op
	    &os;&nbsp;4.5&ndash;STABLE.</para>
	</listitem>
      </itemizedlist>

      <para>Hoewel dit document alle belangrijke stappen in meer detail
	probeert te beschrijven, is het niet bedoeld als een vervanging
	voor de <application>&oracle;</application> en
	<application>&sap.r3;</application>
	installatiehandleidingen.</para>

      <para>Voor specifieke vragen wordt verwezen naar de documentatie
	die geleverd wordt bij de <application>&sap.r3;</application>
	&linux; editie voor <application>&sap;</application> en
	<application>&oracle;</application> en de bronnen van
	<application>&oracle;</application> en
	<application>&sap; OSS</application>.</para>
    </sect2>

    <sect2 id="software">
      <title>Software</title>

      <para>Voor de <application>&sap;</application> installaties zijn
	de volgende CD-ROM gebruikt:</para>

      <sect3 id="software-46b">
	<title>&sap.r3; 4.6B, &oracle; 8.0.5</title>

	<informaltable frame="none">
	  <tgroup cols=3>
	    <thead>
	      <row>
		<entry>Naam</entry>

		<entry>Nummer</entry>

		<entry>Beschrijving</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry>KERNEL</entry>

		<entry>51009113</entry>

		<entry>SAP Kernel Oracle / Installation / AIX, Linux,
		  Solaris</entry>
	      </row>

	      <row>
		<entry>RDBMS</entry>

		<entry>51007558</entry>

		<entry>Oracle / RDBMS 8.0.5.X / Linux</entry>
	      </row>

	      <row>
		<entry>EXPORT1</entry>

		<entry>51010208</entry>

		<entry>IDES / DB-Export / Disc 1 of 6</entry>
	      </row>

	      <row>
		<entry>EXPORT2</entry>

		<entry>51010209</entry>

		<entry>IDES / DB-Export / Disc 2 of 6</entry>
	      </row>

	      <row>
		<entry>EXPORT3</entry>

		<entry>51010210</entry>

		<entry>IDES / DB-Export / Disc 3 of 6</entry>
	      </row>

	      <row>
		<entry>EXPORT4</entry>

		<entry>51010211</entry>

		<entry>IDES / DB-Export / Disc 4 of 6</entry>
	      </row>

	      <row>
		<entry>EXPORT5</entry>

		<entry>51010212</entry>

		<entry>IDES / DB-Export / Disc 5 of 6</entry>
	      </row>

	      <row>
		<entry>EXPORT6</entry>

		<entry>51010213</entry>

		<entry>IDES / DB-Export / Disc 6 of 6</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>Ook zijn de <application>&oracle; 8 Server</application>
	  (Pre-productie versie 8.0.5 voor &linux; kernelversie 2.0.33)
	  CD-ROM gebruikt, die niet echt noodzakelijk is en
	  &os;&nbsp;4.3-STABLE (een paar dagen na de 4.3-RELEASE).
	</para>
      </sect3>

      <sect3 id="software-46c">
	<title>&sap.r3; 4.6C SR2, &oracle; 8.1.7</title>

	<informaltable frame="none">
	  <tgroup cols=3>
	    <thead>
	      <row>
		<entry>Naam</entry>

		<entry>Nummer</entry>

		<entry>Beschrijving</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry>KERNEL</entry>

		<entry>51014004</entry>

		<entry>SAP Kernel Oracle / SAP Kernel Version 4.6D /
		  DEC, Linux</entry>
	      </row>

	      <row>
		<entry>RDBMS</entry>

		<entry>51012930</entry>

		<entry>Oracle 8.1.7/ RDBMS / Linux</entry>
	      </row>

	      <row>
		<entry>EXPORT1</entry>

		<entry>51013953</entry>

		<entry>Release 4.6C SR2 / Export / Disc 1 of 4</entry>
	      </row>

	      <row>
		<entry>EXPORT1</entry>

		<entry>51013953</entry>

		<entry>Release 4.6C SR2 / Export / Disc 2 of 4</entry>
	      </row>

	      <row>
		<entry>EXPORT1</entry>

		<entry>51013953</entry>

		<entry>Release 4.6C SR2 / Export / Disc 3 of 4</entry>
	      </row>

	      <row>
		<entry>EXPORT1</entry>

		<entry>51013953</entry>

		<entry>Release 4.6C SR2 / Export / Disc 4 of 4</entry>
	      </row>

	      <row>
		<entry>LANG1</entry>

		<entry>51013954</entry>

		<entry>Release 4.6C SR2 / Language / DE, EN, FR /
		  Disc 1 van 3</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>Afhankelijk van de talen die ge&iuml;nstalleerd moeten
	  worden kunnen aanvullende taal-CD-ROMs nodig zijn.  Hier
	  worden DE en EN gebruikt, dus is alleen de eerste taal-CD-ROM
	  nodig.  Een kleine kanttekening is dat de nummers van alle
	  vier de EXPORT CD-ROMs identiek zijn.  Ook hebben alle drie de
	  taal-CD-ROMs hetzelfde nummer (dit verschilt met de 4.6B IDES
	  release CD-ROM-nummering).  Ten tijde van schrijven draait
	  deze installatie op &os;&nbsp;4.5-STABLE (20.03.2002).</para>
      </sect3>
    </sect2>

    <sect2 id="sap-notes">
      <title>Opmerkingen over &sap;</title>

      <para>Het wordt aangeraden de volgende notities
	v&oacute;&oacute;r de installatie van
	<application>&sap.r3;</application> gelezen te hebben.  Ze
	waren bruikbaar tijdens de installatie:</para>

      <sect3 id="sap-notes-46b">
	<title>&sap.r3; 4.6B, &oracle; 8.0.5</title>

	<informaltable frame="none">
	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>Nummer</entry>

		<entry>Titel</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry>0171356</entry>

		<entry>SAP Software on Linux: Essential Comments</entry>
	      </row>

	      <row>
		<entry>0201147</entry>

		<entry>INST: 4.6C R/3 Inst. on UNIX - Oracle</entry>
	      </row>

	      <row>
		<entry>0373203</entry>

		<entry>Update / Migration Oracle 8.0.5 --&gt;
		  8.0.6/8.1.6 LINUX</entry>
	      </row>

	      <row>
		<entry>0072984</entry>

		<entry>Release of Digital UNIX 4.0B for Oracle</entry>
	      </row>

	      <row>
		<entry>0130581</entry>

		<entry>R3SETUP step DIPGNTAB terminates</entry>
	      </row>

	      <row>
		<entry>0144978</entry>

		<entry>Your system has not been installed correctly</entry>
	      </row>

	      <row>
		<entry>0162266</entry>

		<entry>Questions and tips for R3SETUP on
		  Windows NT / W2K</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>
      </sect3>

      <sect3 id="sap-notes-46c">
	<title>&sap.r3; 4.6C, &oracle; 8.1.7</title>

	<informaltable frame="none">
	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>Nummer</entry>

		<entry>Titel</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry>0015023</entry>

		<entry>Initializing table TCPDB (RSXP0004) (EBCDIC)</entry>
	      </row>

	      <row>
		<entry>0045619</entry>

		<entry>R/3 with several languages or typefaces</entry>
	      </row>

	      <row>
		<entry>0171356</entry>

		<entry>SAP Software on Linux: Essential Comments</entry>
	      </row>

	      <row>
		<entry>0195603</entry>

		<entry>RedHat 6.1 Enterprise version: Known problems</entry>
	      </row>

	      <row>
		<entry>0212876</entry>

		<entry>The new archiving tool SAPCAR</entry>
	      </row>

	      <row>
		<entry>0300900</entry>

		<entry>Linux: Released DELL Hardware</entry>
	      </row>

	      <row>
		<entry>0377187</entry>

		<entry>RedHat 6.2: important remarks</entry>
	      </row>

	      <row>
		<entry>0387074</entry>

		<entry>INST: R/3 4.6C SR2 Installation on UNIX</entry>
	      </row>

	      <row>
		<entry>0387077</entry>

		<entry>INST: R/3 4.6C SR2 Inst. on UNIX - Oracle</entry>
	      </row>

	      <row>
		<entry>0387078</entry>

		<entry>SAP Software on UNIX: OS Dependencies 4.6C SR2</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>
      </sect3>
    </sect2>

    <sect2 id="hardware-requirements">
      <title>Benodigde hardware</title>

      <para>De volgende uitrusting is voldoende voor de installatie van
	een <application>&sap.r3; Systeem</application>.  Voor
	productiegebruik geldt natuurlijk dat exactere gegevens nodig
	zijn:</para>

      <informaltable frame="none">
	<tgroup cols="3">
	  <thead>
	    <row>
	      <entry>Component</entry>

	      <entry>4.6B</entry>

	      <entry>4.6C</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry>Processor</entry>

	      <entry>2 x 800MHz &pentium; III</entry>

	      <entry>2 x 800MHz &pentium; III</entry>
	    </row>

	    <row>
	      <entry>Geheugen</entry>

	      <entry>1GB ECC</entry>

	      <entry>2GB ECC</entry>
	    </row>

	    <row>
	      <entry>Hardeschijfruimte</entry>

	      <entry>50-60GB (IDES)</entry>

	      <entry>50-60GB (IDES)</entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

      <para>Voor productiegebruik zijn &xeon; processoren met een grote
	cache, schijftoegang op hoge snelheid (SCSI,
	RAID-hardwarecontroller) USV en ECC-RAM aanbevolen.  De
	grote hoeveelheid benodigde schijfruimte is te wijten aan het
	vooringestelde IDES-systeem, dat 27&nbsp;GB aan
	databasebestanden aanmaakt tijdens de installatie.  Deze ruimte
	is ook voldoende voor beginnende productiesystemen en
	applicatiegegevens.</para>

      <sect3 id="hardware-46b">
	<title>&sap.r3; 4.6B, &oracle; 8.0.5</title>

	<para>De volgende kant-en-klare hardware werd gebruikt: een
	  dual processorbord met 2 800&nbsp;MHz &pentium;nbsp;III
	  processoren, &adaptec; 21960 Ultra160 SCSI adapter (om een
	  40/80&nbsp;GB DLT tapedrive en CD-ROM aan te spreken),
	  &mylex; &acceleraid; (2 kanalen, firmware 6.00-1-00 met
	  32&nbsp;MB RAM).  Aan de &mylex; RAID-controller zijn twee
	  17&nbsp;GB harde schijven (gespiegeld) en vier 36&nbsp;GB
	  harde schijven (RAID-niveau 5) bevestigd.</para>
      </sect3>

      <sect3 id="hardware-46c">
	<title>&sap.r3; 4.6C, &oracle; 8.1.7</title>

	<para>Voor deze installatie werd een &dell; &poweredge; 2500
	  gebruikt: een dual processorbord met twee 1000&nbsp;MHz
	  &pentium;&nbsp;III processoren (256&nbsp;kB cache), 2&nbsp;GB
	  PC133 ECC SDRAM, PERC/3 DC PCI RAID-controller met
	  128&nbsp;MB en een EIDE DVD-ROM-drive.  Aan de
	  RAID-controller zijn twee 18&nbsp;GB harde schijven
	  (gespiegeld) en vier 36&nbsp;GB harde schijven (RAID-niveau
	  5) bevestigd.</para>
      </sect3>
    </sect2>

    <sect2 id="installation">
      <title>Installatie van &os;</title>

      <para>Eerst moet &os; ge&iuml;nstalleerd worden.  Er zijn
	verschillende manieren om dit te doen.  Er staat meer informatie
	in <xref linkend="install-diff-media">.</para>

      <sect3 id="disk-layout">
	<title>Schijfindeling</title>

	<para>Om het eenvoudig te houden, werd voor zowel de
	  <application>&sap.r3; 46B</application> installatie als de
	  <application>&sap.r3; 46C SR2</application> installatie
	  dezelfde schijfindeling gebruikt.  Alleen de apparaatnamen
	  veranderden, omdat de installaties op verschillende hardware
	  werden gedaan (<filename>/dev/da</filename> respectievelijk
	  <filename>/dev/amr</filename>, dus als een AMI &megaraid;
	   wordt gebruikt, is <filename>/dev/amr0s1a</filename> te zien
	   in plaats van <filename>/dev/da0s1a</filename>):</para>

	<informaltable frame="none">
	  <tgroup cols="4">
	    <thead>
	      <row>
		<entry>Bestandssysteem</entry>

		<entry>Grootte</entry>

		<entry>Aangekoppeld op</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry><filename>/dev/da0s1a</filename></entry>

		<entry>1 GB</entry>

		<entry><filename>/</filename></entry>
	      </row>

	      <row>
		<entry><filename>/dev/da0s1b</filename></entry>

		<entry>6 GB</entry>

		<entry>swap</entry>
	      </row>

	      <row>
		<entry><filename>/dev/da0s1e</filename></entry>

		<entry>2 GB</entry>

		<entry><filename>/var</filename></entry>
	      </row>

	      <row>
		<entry><filename>/dev/da0s1f</filename></entry>

		<entry>8 GB</entry>

		<entry><filename>/usr</filename></entry>
	      </row>

	      <row>
		<entry><filename>/dev/da1s1e</filename></entry>

		<entry>45 GB</entry>

		<entry><filename>/compat/linux/oracle</filename></entry>
	      </row>

	      <row>
		<entry><filename>/dev/da1s1f</filename></entry>

		<entry>2 GB</entry>

		<entry><filename>/compat/linux/sapmnt</filename></entry>
	      </row>

	      <row>
		<entry><filename>/dev/da1s1g</filename></entry>

		<entry>2 GB</entry>

		<entry><filename>/compat/linux/usr/sap</filename></entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>De twee logische drives dienen tevoren met de &mylex;- of
	  PERC/3 RAID-software ingesteld en ge&iuml;nitialiseerd te
	  worden.  De software kan tijdens de opstartfase van het
	  <acronym>BIOS</acronym> gestart worden.</para>

	<para>De schijfindelingen wijken licht af van de aanbevelingen
	  van &sap;, omdat &sap; aanbeveelt om de
	  <application>&oracle;</application> submappen (en enkele
	  andere) gescheiden aan te koppelen.  Hier is besloten om ze
	  omwille van de eenvoud gewoon als echte submappen aan te
	  maken.</para>
      </sect3>

      <sect3 id="makeworldandnewkernel">
	<title><command>make world</command> en een nieuwe
	  kernel</title>

	<para>Nu dient de nieuwste -STABLE-broncode gedownload te
	  worden.  Nadat het kernelinstellingenbestand is aangepast,
	  kunnen de wereld en de kernel opnieuw gebouwd worden.
	  Hier moeten ook de <link
	    linkend="kerneltuning">kernelparameters</link> in staan die
	  nodig zijn voor <application>&sap.r3;</application> en
	  <application>&oracle;</application>.</para>
      </sect3>
    </sect2>

    <sect2 id="installingthelinuxenviornment">
      <title>De &linux;-omgeving installeren</title>

      <sect3 id="installinglinuxbase-system">
	<title>Het &linux; basissysteem installeren</title>

	<para>Eerst moet de <link
	    linkend="linuxemu-libs-port">linux_base</link> port
	  ge&iuml;nstalleerd worden (als
	  <username>root</username>):</para>

	<screen>&prompt.root; <userinput>cd /usr/ports/emulators/linux_base-fc4</userinput>
&prompt.root; <userinput>make install distclean</userinput></screen>
      </sect3>

      <sect3 id="installinglinuxdevelopment">
	<title>De &linux; ontwikkelomgeving installeren</title>

	<para>De &linux;-ontwikkelomgeving is volgens <xref
	    linkend="linuxemu-oracle"> noodzakelijk om
	  <application>&oracle;</application> op &os; te
	  installeren:</para>

	<screen>&prompt.root; <userinput>cd /usr/ports/devel/linux_devtools</userinput>
&prompt.root; <userinput>make install distclean</userinput></screen>

	<para>De &linux;-ontwikkelomgeving is alleen voor de
	  <application>&sap.r3; 46B IDES</application> installatie
	  ge&iuml;nstalleerd.  Het is niet nodig als de
	  <application>&oracle; DB</application> niet opnieuw wordt
	  gelinkt op het &os;-systeem.  Dit is het geval als de
	  <application>&oracle;</application> tarball van een
	  &linux;-systeem wordt gebruikt.</para>
      </sect3>

      <sect3 id="installingnecessaryrpms">
	<title>De benodigde RPM's installeren</title>

	<indexterm><primary>RPM's</primary></indexterm>

	<para>Om het <command>R3SETUP</command> programma te starten is
	  PAM-ondersteuning nodig.  Tijdens de eerste installatie van
	  <application>&sap;</application> op &os;&nbsp;4.3-STABLE is
	  geprobeerd om PAM met alle benodigde pakketten te installeren
	  en uiteindelijk is de installatie van het PAM-pakket
	  afgedwongen, wat werkte.  Voor <application>&sap.r3; 4.6C
	  SR 2</application> is we meteen de installatie van het PAM
	  RPM afgedwongen, wat ook werkte, dus lijkt het erop dat de
	  afhankelijke pakketten niet nodig zijn:</para>

	<screen>&prompt.root; <userinput>rpm -i --ignoreos --nodeps --root /compat/linux --dbpath /var/lib/rpm \
pam-0.68-7.rpm</userinput></screen>

	<para>Om <application>&oracle;&nbsp;8.0.5</application> de
	  intelligente agent te laten draaien, moest ook het
	  Tcl-package van RedHat
	  <filename>tcl-8.0.5-30.i386.prm</filename> ge&iuml;nstalleerd
	  worden (anders mislukt het herlinken tijdens de installatie
	  van <application>&oracle;</application>).  Er zijn nog wat
	  andere gevallen met betrekking tot het herlinken van
	  <application>&oracle;</application>, maar dat is een
	  <application>&oracle;</application> &linux;-geval en niet
	  &os;-specifiek.</para>
      </sect3>

      <sect3 id="linuxprocandfallbackelfbrand">
	<title>Aanvullende hints</title>

	<para>Het kan ook een goed idee zijn om
	  <literal>linprocfs</literal> aan
	  <filename>/etc/fstab</filename> toe te voegen.  Meer
	  informatie is te vinden in &man.linprocfs.5;.  Een andere
	  parameter om in te stellen is
	  <literal>kern.fallback_elf_brand=3</literal> in
	  <filename>/etc/sysctl.conf</filename>.</para>
      </sect3>
    </sect2>

    <sect2 id="creatingsapr3env">
      <title>De &sap.r3;-omgeving maken</title>

      <sect3 id="filesystemsandmountpoints">
	<title>De benodigde bestandssystemen en aankoppelpunten
	  cre&euml;ren</title>

	<para>Voor een eenvoudige installatie is het voldoende om de
	  volgende bestandssystemen aan te maken:</para>

	<informaltable frame="none">
	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>aankoppelpunt</entry>

		<entry>grootte in GB</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry><filename>/compat/linux/oracle</filename></entry>

		<entry>45&nbsp;GB</entry>
	      </row>

	      <row>
		<entry><filename>/compat/linux/sapmnt</filename></entry>

		<entry>2&nbsp;GB</entry>
	      </row>

	      <row>
		<entry><filename>/compat/linux/usr/sap</filename></entry>

		<entry>2&nbsp;GB</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>Het is ook noodzakelijk om enige aankoppelpunten te maken,
	  anders klaagt de <application>&sap;</application> Installer
	  als die de gemaakte aankoppelpunten controleert:</para>

	<screen>&prompt.root; <userinput>ln -s /compat/linux/oracle /oracle</userinput>
&prompt.root; <userinput>ln -s /compat/linux/sapmnt /sapmnt</userinput>
&prompt.root; <userinput>ln -s /compat/linux/usr/sap /usr/sap</userinput></screen>

	<para>Mogelijke foutmeldingen tijdens de installatie zijn (hier
	  met System <emphasis>PRD</emphasis> en de
	  <application>&sap.r3;&nbsp;4.6C
	  SR2</application>-installatie):</para>

	<screen>INFO 2002-03-19 16:45:36 R3LINKS_IND_IND SyLinkCreate:200
    Checking existence of symbolic link /usr/sap/PRD/SYS/exe/dbg to
    /sapmnt/PRD/exe. Creating if it does not exist...

WARNING 2002-03-19 16:45:36 R3LINKS_IND_IND SyLinkCreate:400
    Link /usr/sap/PRD/SYS/exe/dbg exists but it points to file
    /compat/linux/sapmnt/PRD/exe instead of /sapmnt/PRD/exe. The
    program cannot go on as long as this link exists at this
    location. Move the link to another location.

ERROR 2002-03-19 16:45:36 R3LINKS_IND_IND Ins_SetupLinks:0
    can not setup link '/usr/sap/PRD/SYS/exe/dbg' with content
    '/sapmnt/PRD/exe'</screen>
      </sect3>

      <sect3 id="creatingusersanddirectories">
	<title>Gebruikers en mappen aanmaken</title>

	<para><application>&sap.r3;</application> heeft twee gebruikers
	  en drie groepen nodig.  De gebruikersnamen zijn afhankelijk
	  van de <application>&sap;</application> system ID (SID) die
	  uit drie letters bestaat.  Enkele van deze SIDs zijn
	  gereserveerd door <application>&sap;</application>
	  (bijvoorbeeld <literal>SAP</literal> en
	  <literal>NIX</literal>.  In de
	  <application>&sap;</application>-documentatie staat een
	  complete lijst).  Voor de IDES-installatie is
	  <literal>IDS</literal> gebruikt, voor de 4.6C SR2-installatie
	  <literal>PRD</literal>, omdat dat systeem bedoeld is voor
	  productiegebruik.  Daarvoor zijn de volgende groepen gebruikt
	  (groep-IDs kunnen afwijken, dat zijn gewoon de waardes die
	  voor deze specifieke installatie gebruikt zijn):</para>

	<informaltable frame="none">
	  <tgroup cols="3">
	    <thead>
	      <row>
		<entry>groep-ID</entry>

		<entry>groepsnaam</entry>

		<entry>beschrijving</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry>100</entry>

		<entry>dba</entry>

		<entry>DataBase-Administrator</entry>
	      </row>

	      <row>
		<entry>101</entry>

		<entry>sapsys</entry>

		<entry>&sap; System</entry>
	      </row>

	      <row>
		<entry>102</entry>

		<entry>oper</entry>

		<entry>DataBase-Operator</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>Voor een standaard <application>&oracle;</application>-
	  installatie wordt slechts &eacute;&acute;n groep,
	  <groupname>dba</groupname>, gebruikt.  De groep
	  <groupname>oper</groupname> gebruikt ook de groep
	  <groupname>dba</groupname> (er staat meer informatie in de
	  <application>&oracle;</application>- en
	  <application>&sap;</application>-documentatie).</para>

	<para>Tevens zijn de volgende gebruikers nodig:</para>

	<informaltable frame="none">
	  <tgroup cols="6">
	    <thead>
	      <row>
		<entry>gebruikers-ID</entry>

		<entry>gebruikersnaam</entry>

		<entry>generieke naam</entry>

		<entry>groep</entry>

		<entry>aanvullende groepen</entry>

		<entry>beschrijving</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry>1000</entry>

		<entry>idsadm/prdadm</entry>

		<entry><replaceable>sid</replaceable>adm</entry>

		<entry>sapsys</entry>

		<entry>oper</entry>

		<entry>&sap;-beheerder</entry>
	      </row>

	      <row>
		<entry>1002</entry>

		<entry>oraids/oraprd</entry>

		<entry>ora<replaceable>sid</replaceable></entry>

		<entry>dba</entry>

		<entry>oper</entry>

		<entry>&oracle;-beheerder</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>De volgende regels voor &man.adduser.8; zijn nodig om de
	  <quote>&sap;-beheerder</quote>-gebruiker toe te
	  voegen:</para>

	<programlisting>Name: <replaceable>sid</replaceable>adm
Password: ******
Fullname: SAP-beheerder<replaceable>SID</replaceable>
Uid: 1000
Gid: 101 (sapsys)
Class:
Groups: sapsys dba
HOME: /home/<replaceable>sid</replaceable>adm
Shell: bash  (/compat/linux/bin/bash)</programlisting>

	<para>en deze voor de
	  <quote>&oracle;-beheerder</quote>-gebruiker:</para>

	<programlisting>Name: ora<replaceable>sid</replaceable>
Password: ******
Fullname: Oracle-beheerder<replaceable>SID</replaceable>
Uid: 1002
Gid: 100 (dba)
Class:
Groups: dba
HOME: /oracle/<replaceable>sid</replaceable>
Shell: bash  (/compat/linux/bin/bash)</programlisting>

	<para>De <application>&oracle;</application>-beheerder moet ook
	  in de groep <groupname>oper</groupname> zitten als de groepen
	  <groupname>dba</groupname> en <groupname>oper</groupname>
	  beiden gebruikt worden.</para>
      </sect3>

      <sect3 id="creatingdirectories">
	<title>Mappen aanmaken</title>

	<para>De volgende mappen worden normaalgesproken als aparte
	  bestandssystemen aangemaakt.  Dit is geheel afhankelijk van
	  de behoefte.  Hier is ervoor gekozen om ze als simpele mappen
	  aan te maken, omdat ze toch allemaal op dezelfde RAID-5
	  zitten:</para>

	<para>Eerst worden de eigenaren en rechten van sommige mappen
	  ingesteld (als <username>root</username>):</para>

	<screen>&prompt.root; <userinput>chmod 775 /oracle</userinput>
&prompt.root; <userinput>chmod 777 /sapmnt</userinput>
&prompt.root; <userinput>chown root:dba /oracle</userinput>
&prompt.root; <userinput>chown <replaceable>sid</replaceable>adm:sapsys /compat/linux/usr/sap</userinput>
&prompt.root; <userinput>chmod 775 /compat/linux/usr/sap</userinput></screen>

	<para>Als tweede worden de mappen als gebruiker <username>
	  ora<replaceable>sid</replaceable></username> aangemaakt.  Dat
	  zijn allemaal submappen van
	  <filename>/oracle<replaceable>SID</replaceable></filename>:
	</para>

	<screen>&prompt.root; <userinput>su - ora<replaceable>sid</replaceable></userinput>
&prompt.root; <userinput>cd /oracle/<replaceable>SID</replaceable></userinput>
&prompt.root; <userinput>mkdir mirrlogA mirrlogB origlogA origlogB</userinput>
&prompt.root; <userinput>mkdir sapdata1 sapdata2 sapdata3 sapdata4 sapdata5 sapdata6</userinput>
&prompt.root; <userinput>mkdir saparch sapreorg</userinput>
&prompt.root; <userinput>exit</userinput></screen>

	<para>Voor de <application>&oracle;
	    8.1.7</application>-installatie zijn enkele aanvullende
	  mappen nodig:</para>

	<screen>&prompt.root; <userinput>su - ora<replaceable>sid</replaceable></userinput>
&prompt.root; <userinput>cd /oracle</userinput>
&prompt.root; <userinput>mkdir 805_32</userinput>
&prompt.root; <userinput>mkdir client stage</userinput>
&prompt.root; <userinput>mkdir client/80x_32</userinput>
&prompt.root; <userinput>mkdir stage/817_32</userinput>
&prompt.root; <userinput>cd /oracle/<replaceable>SID</replaceable></userinput>
&prompt.root; <userinput>mkdir 817_32</userinput></screen>

	<note>
	  <para>De map <filename>client/80x_32</filename> wordt met
	    precies deze naam gebruikt.  De <emphasis>x</emphasis> mag
	    niet door een getal of iets dergelijks vervangen
	    worden.</para>
	</note>

	<para>In de derde stap worden de mappen als gebruiker
	  <username><replaceable>sid</replaceable>adm</username>
	  aangemaakt:</para>

	<screen>&prompt.root; <userinput>su - <replaceable>sid</replaceable>adm</userinput>
&prompt.root; <userinput>cd /usr/sap</userinput>
&prompt.root; <userinput>mkdir <replaceable>SID</replaceable></userinput>
&prompt.root; <userinput>mkdir trans</userinput>
&prompt.root; <userinput>exit</userinput></screen>
      </sect3>

      <sect3 id="entriesinslashetcslashservices">
	<title>Regels in <filename>/etc/services</filename></title>

	<para>Voor <application>&sap.r3;</application> zijn enkele
	  regels in het bestand <filename>/etc/services</filename>
	  nodig, die niet correct worden ingesteld tijdens de
	  installatie op &os;.  De volgende regels moeten toegevoegd
	  worden (op zijn minst die regels die met een instantienummer
	  overeenkomen, in dit geval <literal>00</literal>.  Het
	  kan geen kwaad om alle regels van <literal>00</literal> tot
	  en met <literal>99</literal> toe te voegen voor
	  <literal>dp</literal>, <literal>gw</literal>,
	  <literal>sp</literal> en <literal>ms</literal>).  Als er een
	  <application>SAProuter</application> gebruikt gaat worden of
	  toegang tot <application>&sap;</application> OSS nodig is,
	  dan is <literal>99</literal> ook nodig, aangezien poort 3299
	  gewoonlijk wordt gebruikt voor het
	  <application>SAProuter</application>-proces op het
	  doelsysteem:</para>

	  <programlisting>sapdp00  3200/tcp # SAP-dispatcher. 3200 + instantienummer
sapgw00  3300/tcp # SAP-gateway.    3300 + instantienummer
sapsp00  3400/tcp #                 3400 + instantienummer
sapms00  3500/tcp #                 3500 + instantienummer
sapms<replaceable>SID</replaceable> 3600/tcp # SAP-berichtenserver. 3600 + instantienummer
sapgw00s 4800/tcp # veilige SAP-gateway 4800 + instantienummer</programlisting>
      </sect3>

      <sect3 id="necessarylocales">
	<title>Benodigde lokalisaties</title>

	<indexterm><primary>locale</primary></indexterm>

	<para><application>&sap;</application> heeft tenminste twee
	  lokalisaties nodig die geen deel uitmaken van de standaard
	  RedHat-installatie.  &sap; biedt de benodigde RPMs als
	  downloadbare bestanden op hun FTP-server aan (die alleen
	  toegankelijk is voor klanten met OSS-toegang).  In notitie
	  0171356 staat een lijst van de benodigde RPMs.</para>

	<para>Het is ook mogelijk om gewoon de juiste links aan te
	  maken (bijvoorbeeld vanuit <emphasis>de_DE</emphasis> en
	  <emphasis>en_US</emphasis>), maar dat is niet aan te raden
	  voor productiesystemen (alhoewel het probleemloos op het
	  IDES-systeem werkte).  De volgende lokalisaties zijn
	  nodig:</para>

	<programlisting>de_DE.ISO-8859-1
en_US.ISO-8859-1</programlisting>

	<para>Nu moeten de volgende links gemaakt worden:</para>

	<screen>&prompt.root; <userinput>cd /compat/linux/usr/share/locale</userinput>
&prompt.root; <userinput>ln -s de_DE de_DE.ISO-8859-1</userinput>
&prompt.root; <userinput>ln -s en_US en_US.ISO-8859-1</userinput></screen>

	<para>Als ze niet aanwezig zijn, ontstaan er problemen tijdens
	  de installatie.  Als ze dan consequent genegeerd worden (door
	  de <literal>STATUS</literal> van de probleemstap op
	  <literal>OK</literal> te zetten in het bestand
	  <filename>CENTRDB.R3S</filename>), is het niet mogelijk om op
	  het <application>&sap;</application>- systeem aan te melden
	  zonder wat extra moeite.</para>
      </sect3>

      <sect3 id="kerneltuning">
	<title>Kerneloptimalisatie</title>

	<indexterm><primary>kerneloptimalisatie</primary></indexterm>

	<para><application>&sap.r3;</application>-systemen hebben veel
	  bronnen nodig.  Daarom zijn de volgende parameters
	  toegevoegd aan het kernelinstellingenbestand:</para>

	<programlisting>#Stel deze in voor geheugengierigheid (SAP en Oracle)
options MAXDSIZ="(1024*1024*1024)"
options DFLDSIZ="(1024*1024*1024)"
#System-V-opties nodig.
options SYSVSHM # SysV-stijl gedeeld geheugen
options SHMMAXPGS=262144 #maximum aantal gedeelde geheugenpagina's
#options SHMMAXPGS=393216 #gebruik dit voor de 46C installatieparameters
options SHMMNI=256 #maximun aantal identifier-interfaces voor gedeeld geheugen
options SHMSEG=100 #maximum aantal gedeeld-geheugensegmenten per proces
options SYSVMSG #SysV-stijl berichtenwachtrijen
options MSGSEG=32767 #maximum aantal berichtsegmenten in systeem
options MSGSSZ=32 #grootte van berichtensegment. MOET macht van 2 zijn
options MSGMNB=65535 #maximum aantal tekens per berichtenwachtrij
options MSGTQL=2046 #maximum aantal berichten in systeem
options SYSVSEM #SysV-stijl semaforen
options SEMMNU=256 #aantal semafoor-UNDO-structuren
options SEMMNS=1024 #aantal semaforen in systeem
options SEMMNI=520 #aantal semafoor-identifiers
options SEMUME=100 #aantal UNDO-sleutels</programlisting>

	<para>De minimumwaarden zijn aangegeven in de documentatie van
	  &sap;.  Omdat er geen beschrijving voor &linux; is, wordt
	  verwezen naar de HP-UX-sectie (32 bit) voor meer informatie.
	  Omdat het systeem voor de 4.6C SR2-installatie meer
	  hoofdgeheugen heeft, kunnen de gedeelde segmenten voor
	  <application>&sap;</application> en
	  <application>&oracle;</application> groter zijn..  Daarom kan
	  voor een groter aantal pagina's voor het gedeelde geheugen
	  gekozen worden.</para>

	<note>
	  <para>Op een standaardinstallatie van &os; op &i386; moeten
	    <literal>MAXDSIZ</literal> en <literal>DFLDSIZ</literal> op
	    maximaal 1&nbsp;GB blijven staan.  Anders kunnen er vreemde
	    fouten als <errorname>ORA-27102: out of memory</errorname>
	    en <errorname>Linux Error 12: Cannot allocate
	      memory</errorname> optreden.</para></note>
      </sect3>
    </sect2>

    <sect2 id="installingsapr3">
      <title>&sap.r3; installeren</title>

      <sect3 id="preparingsapcdroms">
	<title>De &sap;-CD-ROMs voorbereiden</title>

	<para>Tijdens de installatie moeten veel CD-ROMs aangekoppeld en
	  losgekoppeld worden.  Als er voldoende CD-ROM-drives zijn,
	  kunnen ze allemaal tegelijk aangekoppeld worden.  Hier is
	  besloten om de inhoud van de CD-ROMs naar de overeenkomende
	  mappen te kopi&euml;ren:</para>

	<programlisting>/oracle/<replaceable>SID</replaceable>/sapreorg/<replaceable>cd-naam</replaceable></programlisting>

	<para>Hierboven is <replaceable>cd-naam</replaceable>
	  &eacute;&eacute;n van <filename>KERNEL</filename>,
	  <filename>RDBMS</filename>, <filename>EXPORT1</filename>,
	  <filename>EXPORT2</filename>, <filename>EXPORT3</filename>,
	  <filename>EXPORT4</filename>, <filename>EXPORT5</filename> en
	  <filename>EXPORT6</filename> voor de
	  4.6B/IDES-installatie en &eacute;&eacute;n van
	  <filename>KERNEL</filename>, <filename>RDBMS</filename>,
	  <filename>DISK1</filename>, <filename>DISK2</filename>,
	  <filename>DISK3</filename>, <filename>DISK4</filename> en
	  <filename>LANG</filename> voor de 4.6C SR2-installatie.  Alle
	  bestandsnamen op de aangekoppelde CD-ROMs moeten in
	  hoofdletters staan of anders kan er gebruik gemaakt worden van
	  de optie <option>-g</option> bij het aankoppelen:</para>

	<screen>&prompt.root; <userinput>mount_cd9660 -g /dev/cd0a /mnt</userinput>
&prompt.root; <userinput>cp -R /mnt/* /oracle/<replaceable>SID</replaceable>/sapreorg/<replaceable>cd-naam</replaceable></userinput>
&prompt.root; <userinput>umount /mnt</userinput></screen>
      </sect3>

      <sect3 id="runningtheinstall-script">
	<title>Het installatiescript uitvoeren</title>

	<para>Eerst moet er een map <filename
	    class="directory">install</filename> worden
	  aangemaakt:</para>

	<screen>&prompt.root; <userinput>/oracle/<replaceable>SID</replaceable>/sapreorg/KERNEL/UNIX/INSTTOOL.SH</userinput></screen>

	<para>De IDES-installatie (4.6B) komt met een volledig
	  aangepast &sap.r3; -demonstratiesysteem, dus zijn er zes in
	  plaats van slechts drie EXPORT-CD-ROMs.  Op dit moment dient
	  het installatiesjabloon <filename>CENTRDB.R3S</filename> voor
	  het installeren van een standaard centrale instantie
	  (<application>&r3;</application> met database), niet de
	  IDES centrale instantie, dus moet de overeenkomende
	  <filename>CENTRDB.R3S</filename> vanuit de map <filename
	    class="directory">EXPORT1</filename> gekopieerd worden,
	  anders vraagt <command>R5SETUP</command> slechts om drie
	  EXPORT-CD-ROMs.</para>

	<para>De nieuwere uitgave <application>&sap; 4.6
	    SR2</application> komt met vier EXPORT-CD-ROMs.  Het
	  parameterbestand dat de installatiestappen beheert is
	  <filename>CENTRAL.R3S</filename>.  In tegenstelling tot
	  eerdere uitgaven zijn er geen aparte installatiesjablonen
	  voor een centrale instantie met of zonder database.
	  <application>&sap;</application> gebruikt een apart sjabloon
	  voor de installatie van de database.  Om de installatie op
	  een later tijdstip te opnieuw te starten is het echter
	  voldoende om met het originele bestand opnieuw te
	  starten.</para>

	<para>Tijdens en na de installatie eist
	  <application>&sap;</application> dat
	  <command>hostname</command> alleen de naam van de computer en
	  niet de volledig gekwalificeerde domeinnaam teruggeeft.  Dus
	  dient &ograve;f de computernaam op deze manier ingesteld te
	  worden, &ograve;f een alias ingesteld te worden met
	  <command>alias hostname='hostname -s'</command> voor zowel
	  <username><replaceable>ora</replaceable>sid</username> als
	  <username><replaceable>sid</replaceable>adm</username> (en
	  voor <username>root</username> tijdens minimaal de
	  installatiestappen die als <username>root</username> worden
	  uitgevoerd).  Het is ook mogelijk om de ge&iuml;nstalleerde
	  bestanden <filename>.profile</filename> en <filename>.login
	    </filename> van beide gebruikers die tijdens de installatie
	  worden ge&iuml;nstalleerd aan te passen.</para>
      </sect3>

      <sect3 id="startr3setup-46B">
	<title>Start <command>R3SETUP</command> 4.6B</title>

	<para>Ben er zeker van dat <envar>LD_LIBRARY_PATH</envar> juist
	  is ingesteld:</para>

	<screen>&prompt.root; <userinput>export LD_LIBRARY_PATH=/oracle/IDS/lib:/sapmnt/IDS/exe:/oracle/805_32/lib</userinput></screen>

	<para>Start <command>R3SETUP</command> als
	  <username>root</username> vanuit de installatiemap:</para>

	<screen>&prompt.root; <userinput>cd /oracle/IDS/sapreorg/install</userinput>
&prompt.root; <userinput>./R3SETUP -f CENTRDB.R3S</userinput></screen>

	<para>Het script stelt vervolgens wat vragen
	  (standaardantwoorden in haken, gevolgd door de eigenlijke
	  invoer):</para>

	<informaltable frame="none">
	  <tgroup cols="3">
	    <thead>
	      <row>
		<entry>Vraag</entry>

		<entry>Standaard</entry>

		<entry>Invoer</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry>Enter SAP System ID</entry>

		<entry>[C11]</entry>

		<entry>IDS<keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter SAP Instance Number</entry>

		<entry>[00]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter SAPMOUNT Directory</entry>

		<entry>[/sapmnt]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter name of SAP central host</entry>

		<entry>[troubadix.domain.de]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter name of SAP db host</entry>

		<entry>[troubadix]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Select character set</entry>

		<entry>[1] (WE8DEC)</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter Oracle server version (1) Oracle 8.0.5,
		  (2) Oracle 8.0.6, (3) Oracle 8.1.5,
		  (4) Oracle 8.1.6</entry>

		<entry> </entry>

		<entry>1<keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Extract Oracle Client archive</entry>

		<entry>[1] (Yes, extract)</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter path to KERNEL CD</entry>

		<entry>[/sapcd]</entry>

		<entry>/oracle/IDS/sapreorg/KERNEL</entry>
	      </row>

	      <row>
		<entry>Enter path to RDBMS CD</entry>

		<entry>[/sapcd]</entry>

		<entry>/oracle/IDS/sapreorg/RDBMS</entry>
	      </row>

	      <row>
		<entry>Enter path to EXPORT1 CD</entry>

		<entry>[/sapcd]</entry>

		<entry>/oracle/IDS/sapreorg/EXPORT1</entry>
	      </row>

	      <row>
		<entry>Directory to copy EXPORT1 CD</entry>

		<entry>[/oracle/IDS/sapreorg/CD4_DIR]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter path to EXPORT2 CD</entry>

		<entry>[/sapcd]</entry>

		<entry>/oracle/IDS/sapreorg/EXPORT2</entry>
	      </row>

	      <row>
		<entry>Directory to copy EXPORT2 CD</entry>

		<entry>[/oracle/IDS/sapreorg/CD5_DIR]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter path to EXPORT3 CD</entry>

		<entry>[/sapcd]</entry>

		<entry>/oracle/IDS/sapreorg/EXPORT3</entry>
	      </row>

	      <row>
		<entry>Directory to copy EXPORT3 CD</entry>

		<entry>[/oracle/IDS/sapreorg/CD6_DIR]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter path to EXPORT4 CD</entry>

		<entry>[/sapcd]</entry>

		<entry>/oracle/IDS/sapreorg/EXPORT4</entry>
	      </row>

	      <row>
		<entry>Directory to copy EXPORT4 CD</entry>

		<entry>[/oracle/IDS/sapreorg/CD7_DIR]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter path to EXPORT5 CD</entry>

		<entry>[/sapcd]</entry>

		<entry>/oracle/IDS/sapreorg/EXPORT5</entry>
	      </row>

	      <row>
		<entry>Directory to copy EXPORT5 CD</entry>

		<entry>[/oracle/IDS/sapreorg/CD8_DIR]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter path to EXPORT6 CD</entry>

		<entry>[/sapcd]</entry>

		<entry>/oracle/IDS/sapreorg/EXPORT6</entry>
	      </row>

	      <row>
		<entry>Directory to copy EXPORT6 CD</entry>

		<entry>[/oracle/IDS/sapreorg/CD9_DIR]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter amount of RAM for SAP + DB</entry>

		<entry> </entry>

		<entry>850<keycap>Enter</keycap> (in Megabytes)</entry>
	      </row>

	      <row>
		<entry>Service Entry Message Server</entry>

		<entry>[3600]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter Group-ID of sapsys</entry>

		<entry>[101]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter Group-ID of oper</entry>

		<entry>[102]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter Group-ID of dba</entry>

		<entry>[100]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter User-ID of
		  <replaceable>sid</replaceable>adm</entry>

		<entry>[1000]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter User-ID of
		  ora<replaceable>sid</replaceable></entry>

		<entry>[1002]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Number of parallel procs</entry>

		<entry>[2]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>Als de CD-ROMs niet naar de verschillende plaatsen
	  gekopieerd waren, kan het
	  <application>&sap;</application>-installatieprogramma de
	  benodigde CD-ROM niet vinden (ge&iuml;dentificeerd door het
	  bestand <filename>LABEL.ASC</filename> op de CD-ROM) en
	  vraagt het om de CD-ROM aan te koppelen en het aankoppelpad te
	  bevestigen of in te voeren.</para>

	<para>Het bestand <filename>CENTRDB.R3S</filename> kan fouten
	  bevatten.  In dit geval vroeg het nogmaals om de EXPORT4
	  CD-ROM, maar gaf het wel de juiste sleutel (6_LOCATION,
	  daarna 7_LOCATION enzovoorts) aan, dus kon gewoon doorgegaan
	  worden met het invoeren van de juiste waarden.</para>

	<para>Afgezien van enkele problemen die hieronder genoemd
	  worden, hoort alles vanzelf te gaan tot het punt waar de
	  software voor de &oracle;-database ge&iuml;nstalleerd moet
	  worden.</para>
      </sect3>

      <sect3 id="startr3setup-46C">
	<title><command>R3SETUP</command> 4.6C SR2 starten</title>

	<para><envar>LD_LIBRARY_PATH</envar> moet juist ingesteld
	  zijn.  Dit is een andere waarde dan die van de 4.6B
	  installatie met <application>&oracle;
	    8.0.5</application>:</para>

	<screen>&prompt.root; <userinput>export LD_LIBRARY_PATH=/sapmnt/PRD/exe:/oracle/PRD/817_32/lib</userinput></screen>

	<para>Start <command>R3SETUP</command> als gebruiker
	  <username>root</username> vanuit de installatiemap:</para>

	<screen>&prompt.root; <userinput>cd /oracle/PRD/sapreorg/install</userinput>
&prompt.root; <userinput>./R3SETUP -f CENTRAL.R3S</userinput></screen>

	<para>Het script stelt vervolgens enkele vragen
	  (standaardantwoorden tussen haken, gevolgd door de eigenlijke
	  invoer):</para>

	<informaltable frame="none">
	  <tgroup cols="3">
	    <thead>
	      <row>
		<entry>Vraag</entry>

		<entry>Standaard</entry>

		<entry>Invoer</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry>Enter SAP System ID</entry>

		<entry>[C11]</entry>

		<entry>PRD<keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter SAP Instance Number</entry>

		<entry>[00]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter SAPMOUNT Directory</entry>

		<entry>[/sapmnt]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter name of SAP central host</entry>

		<entry>[majestix]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter Database System ID</entry>

		<entry>[PRD]</entry>

		<entry>PRD<keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter name of SAP db host</entry>

		<entry>[majestix]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Select character set</entry>

		<entry>[1] (WE8DEC)</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter Oracle server version (2) Oracle 8.1.7</entry>

		<entry> </entry>

		<entry>2<keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Extract Oracle Client archive</entry>

		<entry>[1] (Yes, extract)</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter path to KERNEL CD</entry>

		<entry>[/sapcd]</entry>

		<entry>/oracle/PRD/sapreorg/KERNEL</entry>
	      </row>

	      <row>
		<entry>Enter amount of RAM for SAP + DB</entry>

		<entry>2044</entry>

		<entry>1800<keycap>Enter</keycap> (in Megabytes)</entry>
	      </row>

	      <row>
		<entry>Service Entry Message Server</entry>

		<entry>[3600]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter Group-ID of sapsys</entry>

		<entry>[100]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter Group-ID of oper</entry>

		<entry>[101]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter Group-ID of dba</entry>

		<entry>[102]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter User-ID of <username>oraprd</username></entry>

		<entry>[1002]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter User-ID of <username>prdadm</username></entry>

		<entry>[1000]</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>LDAP support</entry>

		<entry> </entry>

		<entry>3<keycap>Enter</keycap> (no support)</entry>
	      </row>

	      <row>
		<entry>Installation step completed</entry>

		<entry>[1] (continue)</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Choose installation service</entry>

		<entry>[1] (DB inst,file)</entry>

		<entry><keycap>Enter</keycap></entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>Tot dusver geeft het aanmaken van gebruikers een fout
	  in de fases OSUSERDBSID_IND_ORA (voor het aanmaken van de
	  gebruiker
	  <username>ora<replaceable>sid</replaceable></username>) en
	  OSUSERIDADM_IND_ORA (voor het aanmaken van de gebruiker
	  <username><replaceable>sid</replaceable>adm</username>).</para>
      </sect3>
    </sect2>

    <sect2 id="installingoracle805">
      <title>&oracle; 8.0.5 installeren</title>

      <para>Mogelijke problemen staan beschreven in de &sap; Notes en
	&oracle; <filename>Readme</filename> bestanden met betrekking
	tot &linux; en <application>&oracle; DB</application>.  De
	meeste, zoniet alle, problemen komen door incompatibele
	bibliotheken.</para>

      <para>Meer informatie over het installeren van
	<application>&oracle;</application> staat in <link
	  linkend="linuxemu-oracle">&oracle; Installeren</link>.</para>

      <sect3 id="installingtheoracle805withorainst">
	<title>&oracle; 8.0.5 installeren met
	  <command>orainst</command></title>

	<para>Als <application>&oracle; 8.0.5</application> gebruikt
	  moet worden, zijn enkele bibliotheken nodig voor het met
	  succes herlinken, omdat <application>&oracle;
	    8.0.5</application> met een oude versie van glibc gelinkt
	  was (RedHat 6.0) en RedHat 6.1 reeds een nieuwere glibc
	  gebruikt.  De volgende aanvullende pakketten moeten
	  ge&iuml;nstalleerd worden om er zeker van te zijn dat het
	  linken lukt:</para>

	<itemizedlist>
	  <listitem><para><filename>compat-libs-5.2-2.i386.rpm</filename></para></listitem>

	  <listitem><para><filename>compat-glibc-5.2-2.0.7.2.i386.rpm</filename></para></listitem>

	  <listitem><para><filename>compat-egcs-5.2-1.0.3a.1.i386.rpm</filename></para></listitem>

	  <listitem><para><filename>compat-egcs-c++-5.2.1.0.3a.1.i386.rpm</filename></para></listitem>

	  <listitem><para><filename>compat-binutils-5.2-2.9.1.0.23.1.i386.rpm</filename></para></listitem>
	</itemizedlist>

	<para>In de &sap; Notes of &oracle; <filename>Readme</filename>
	  staat meer informatie.  Als er geen keuze is (op het moment
	  van installeren was er niet genoeg tijd om dit te
	  controleren) kunnen de originele binairen gebruikt worden of
	  kunnen de herlinkte binairen van een origineel RedHat
	  systeem gebruikt worden.</para>

	<para>Om de intelligente agent te compileren moet het RedHat
	  Tcl package ge&iuml;nstalleerd zijn.  Als
	  <filename>tcl-8.0.3-20.i386.rpm</filename> niet te krijgen
	  is, doet een nieuwere versie zoals
	  <filename>tcl-8.0.5-30.i386.rpm</filename> voor RedHat 6.1
	  het ook.</para>

	<para>Afgezien van het herlinken is de installatie
	  rechttoe rechtaan:</para>

	<screen>&prompt.root; <userinput>su - oraids</userinput>
&prompt.root; <userinput>export TERM=xterm</userinput>
&prompt.root; <userinput>export ORACLE_TERM=xterm</userinput>
&prompt.root; <userinput>export ORACLE_HOME=/oracle/IDS</userinput>
&prompt.root; <userinput>cd $ORACLE_HOME/orainst_sap</userinput>
&prompt.root; <userinput>./orainst</userinput></screen>

	<para>Alle schermen dienen met <keycap>Enter</keycap>
	  bevestigd te worden totdat de software ge&iuml;nstalleerd is,
	  behalve dat de <emphasis>&oracle; On-Line Text
	    Viewer</emphasis> gedeselecteerd moet worden omdat deze
	  momenteel niet voor &linux; beschikbaar is.  Vervolgens wil
	  <application>&oracle;</application> met
	  <command>i386-glibc20-linux-gcc</command> herlinken, in
	  plaats van met de beschikbare <command>gcc</command>,
	  <command>egcs</command> of
	  <command>i386-redhat-linux-gcc</command>.</para>

	<para>Wegens tijdbeperkingen is besloten om de binairen van een
	<application>&oracle; 8.0.5 PreProduction</application>-uitgave
	te gebruiken, nadat de eerste poging om de versie van de
	RDBMS-CD-ROM werkend te krijgen mislukte en het vinden en
	gebruiken van de juiste RPMs was op dat moment een nachtmerrie
	was.</para>
      </sect3>

      <sect3 id="installingtheoracle805preproduction">
	<title>&oracle; 8.0.5 pre-productie versie voor
	  &linux; (kernel 2.0.33) installeren</title>

	<para>De installatie hiervan is vrij eenvoudig: koppel de CD-ROM
	  aan en start het installatieprogramma.  Het vraagt dan om de
	  plaats van de &oracle; thuismap en zet daar alle binairen
	  neer.  Op dat moment waren echter niet de restanten van
	  vorige pogingen om RDBMS te installeren verwijderd.</para>

	<para>Daarna kon <application>&oracle;</application> Database
	  zonder problemen gestart worden.</para>
      </sect3>
    </sect2>

    <sect2 id="installingoracle817">
      <title>De &oracle; 8.1.7 &linux; tarball installeren</title>

      <para>De tarball <filename>oracle81732.tgz</filename> die gemaakt
	is uit de installatiemap een &linux;-systeem kan uitgepakt
	worden in
	<filename>/oracle/<replaceable>SID</replaceable>/817_32/</filename>.
      </para>
    </sect2>

    <sect2 id="continuewithsapr4installation">
      <title>Ga door met de &sap.r3; installatie</title>

      <para>Als eerste dienen de omgevingsinstellingen van de
	gebruikers <username>idsamd</username>
	(<replaceable>sid</replaceable>adm) en
	<username>oraids</username> (ora<replaceable>sid</replaceable>)
	gecontroleerd te worden.  Ze moeten nu beiden beschikken over
	de bestanden <filename>.profile</filename>,
	<filename>.login</filename> en <filename>.cshrc</filename> die
	allemaal <command>hostname</command> gebruiken.  In het geval
	dat de hostnaam van het systeem de volledig gekwalificeerde
	naam is, moet <command>hostname</command> in
	<command>hostname&nbsp;&ndash;s</command> veranderd worden in
	alle drie de bestanden.</para>

      <sect3 id="databaseload">
	<title>Database laden</title>

	<para>Hierna kan <command>R3SETUP</command> &ograve;fwel
	  opnieuw gestart of voortgezet worden (afhankelijk van de
	  keuze voor exit of niet).  <command>R3SETUP</command> maakt
	  vervolgens de tabelruimten aan en laadt de gegevens (voor 46B
	  IDES van EXPORT1 tot en met EXPORT6, voor 46C van DISK1 tot
	  en met DISK4) met <command>R3load</command> in de
	  database.</para>

	<para>Wanneer het laden van de database is voltooid (dit kan
	  enkele uren duren) wordt om enkele wachtwoorden gevraagd.
	  Voor testinstallaties kunnen de welbekende
	  standaardwachtwoorden worden gebruikt.  Als veiligheid een
	  punt is moeten er andere wachtwoorden gebruikt worden!</para>

	<informaltable frame="none">
	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>Vraag</entry>

		<entry>Invoer</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry>Enter Password for sapr3</entry>

		<entry>sap<keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Confirum Password for sapr3</entry>

		<entry>sap<keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter Password for sys</entry>

		<entry>verander_tijdens_installeren<keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Confirm Password for sys</entry>

		<entry>verander_tijdens_installatie<keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Enter Password for system</entry>

		<entry>beheerder<keycap>Enter</keycap></entry>
	      </row>

	      <row>
		<entry>Confirm Password for system</entry>

		<entry>beheerder<keycap>Enter</keycap></entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>Hier waren er wat problemen met
	  <command>dipgntab</command> tijdens de installatie van
	  4.6B.</para>
      </sect3>

      <sect3 id="listener">
	<title>Listener</title>

	<para>Hieronder staat hoe de
	  <application>&oracle;</application> Listener als gebruiker
	  <username>ora<replaceable>sid</replaceable></username>
	  op kan starten:</para>

	<screen>&prompt.user; <userinput>umask 0; lsnrctl start</userinput></screen>

	<para>Anders kan de fout <errorcode>ORA-12546</errorcode>
	  optreden, omdat de sockets dan niet de juiste rechten
	  hebben.  Zie &sap; Note 072984.</para>
      </sect3>

      <sect3 id="mnlstables">
	<title>Bijwerken van MNLS tabellen</title>

	<para>Als het de bedoeling is niet-Latin-1-talen in te voeren
	  in het <application>&sap;</application>-systeem, dan moeten
	  de Multi National Language Support-tabellen bijgewerkt
	  worden.  Dit staat beschreven in de &sap; OSS Notes 15023 en
	  45619.  In alle andere gevallen kan deze vraag overgeslagen
	  worden tijdens de <application>&sap;</application>
	  installatie.</para>

	<note>
	  <para>Als er geen MNLS nodig is, is het nog steeds
	    noodzakelijk om de TCPDB-tabel te controleren en deze te
	    initialiseren als dit nog niet is gedaan.  Zie
	    &sap;-notities 0015023 en 0045619 voor meer
	    informatie.</para>
	</note>
      </sect3>
    </sect2>

    <sect2 id="postinstallationsteps">
      <title>Stappen na de installatie</title>

      <sect3 id="requestsapr3licensekey">
	<title>&sap.r3; licentiesleutel opvragen</title>

	<para>Er moet een <application>&sap.r3;</application>
	  licentiesleutel opgevraagd worden.  Dit is nodig omdat de
	  tijdelijke licentie die tijdens de installatie
	  ge&iuml;nstalleerd is, maar voor vier weken geldig is.  Eerst
	  moet de hardwaresleutel bekend zijn.  Deze wordt bekend door
	  als gebruiker <username>idsadm</username> aan te melden en
	  <command>saplicense</command> uit te voeren:</para>

	<screen>&prompt.root; <userinput>/sapmnt/IDS/exe/saplicense -get</userinput></screen>

	<para>Het uitvoeren van <command>saplicense</command> zonder
	  parameters geeft een lijst met opties.  Nadat de
	  licentiesleutel verkregen is, kan deze ge&iuml;nstalleerd
	  worden door middel van:</para>

	<screen>&prompt.root; <userinput>/sapmnt/IDS/exe/saplicense -install</userinput></screen>

	<para>Hierbij moeten de volgende waarden ingevoerd
	  worden:</para>

	<programlisting>SAP SYSTEM ID   = <replaceable>SID, 3 tekens</replaceable>
CUSTOMER KEY    = <replaceable>hardwaresleutel, 11 tekens</replaceable>
INSTALLATION NO = <replaceable>installatie, 10 cijfers</replaceable>
EXPIRATION DATE = <replaceable>jjjjmmdd, meestal "99991231"</replaceable>
LICENSE KEY     = <replaceable>licentiesleutel, 24 tekens</replaceable></programlisting>
      </sect3>

      <sect3 id="creatingusers">
	<title>Gebruikers aanmaken</title>

	<para>Nu kan een gebruiker binnen client 000 aangemaakt worden
	  (voor sommige taken is het nodig deze binnen client 000 aan
	  te maken, als maar een andere gebruiker dan gebruikers
	  <username>sap*</username> en <username>ddic</username> wordt
	  gebruikt).  Zoals gewoonlijk wordt als nieuwe gebruikersnaam
	  <username>wartung</username> (of <username>dienst</username>
	  in het Nederlands) gekozen.  Voor extra veiligheid moeten de
	  wachtwoorden van alle standaardgebruikers binnenin alle
	  clients worden veranderd (dit geldt ook voor gebruikers
	  <username>sap*</username> en
	  <username>ddic</username>).</para>
      </sect3>

      <sect3 id="configtranssysprofileopermodesetc">
	<title>Transportsysteem, profiel, werkmodi en dergelijke
	  instellen</title>

	<para>Vanuit client 000 dient, als een andere gebruiker
	  dan <username>ddic</username> of <username>sap*</username>,
	  tenminste het volgende ingesteld worden:</para>

	<informaltable frame="none">
	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>Taak</entry>

		<entry>Transactie</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry>Stel het transportsysteem in, bijvoorbeeld
		  als <emphasis>Stand-Alone Transport Domain
		    Entity</emphasis></entry>

		<entry>STMS</entry>
	      </row>

	      <row>
		<entry>Maak een profiel voor het systeem aan of wijzig
		  dit</entry>

		<entry>RZ10</entry>
	      </row>

	      <row>
		<entry>Beheer werkmodi en instanties</entry>

		<entry>RZ04</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>Deze en alle andere stappen die na de installatie
	  uitgevoerd moeten worden, staan uitvoerig beschreven in de
	  <application>&sap;</application> installatiehandleidingen.
	</para>
      </sect3>

      <sect3 id="editintsidsap">
	<title><filename>init<replaceable>sid</replaceable>.sap</filename>
	  (<filename>initIDS.sap</filename>) bewerken</title>

	<para>Het bestand
	  <filename>/oracle/IDS/dbs/initIDS.asp</filename> bevat het
	  <application>&sap;</application> back-upprofiel.  Hier moeten
	  de grootte van de te gebruiken tape, het compressietype,
	  enzovoorts gedefinieerd worden.  Om dit aan de gang te
	  krijgen met <command>sapdba</command> /
	  <command>brbackup</command> zijn de volgende waarden
	  veranderd:</para>

	<programlisting>compress = hardware
archive_function = copy_delete_save
cpio_flags = "-ov --format=newc --block-size=128 --quiet"
cpio_in_flags = "-iuv --block-size=128 --quiet"
tape_size = 38000M
tape_address = /dev/nsa0
tape_address_rew = /dev/sa0</programlisting>

	<para>Uitleg:</para>

	<para><varname>compress</varname>: de tape die gebruikt wordt
	  is een HP DLT1 die hardware-compressie ondersteunt.</para>

	<para><varname>archive_function</varname>: dit definieert het
	  standaardgedrag om &oracle;-archieflogs op te slaan: nieuwe
	  logboekbestanden worden op tape opgeslagen, reeds opgeslagen
	  logboekbestanden worden nogmaals opgeslagen en worden daarna
	  verwijderd.  Dit bespaart een hoop problemen als de
	  database hersteld moet worden en &eacute;&eacute;n van de
	  archieftapes versleten is.</para>

	<para><varname>cpio_flags</varname>: de standaard is om
	  <option>-B</option> te gebruiken die de blokgrootte op
	  5120&nbsp;bytes instelt.  Voor DLT tapes raadt HP een
	  blokgrootte van minimaal 32&nbsp;kB aan, dus is
	  <option>--block-size=128</option> gebruikt voor blokken van
	  64&nbsp;kB.  <option>--format=newc</option> is nodig omdat er
	  inodegetallen groter dan 65535 zijn.  De laatste optie
	  <option>--quiet</option> is nodig omdat
	  <command>brbackup</command> anders klaagt zodra
	  <command>cpio</command> het aantal opgeslagen blokken
	  meldt.</para>

	<para><varname>cpio_in_flags</varname>: vlaggen die nodig zijn
	  om de gegevens van de tape terug te laden.  Het formaat wordt
	  automatisch herkend.</para>

	<para><varname>tape_size</varname>: dit geeft gewoonlijk de
	  ruwe opslagcapaciteit van de tape.  Omwille van de veiligheid
	  (er wordt hardware-compressie gebruikt) is de waarde iets
	  lager dan de eigenlijke waarde.</para>

	<para><varname>tape_address</varname>: de naam van het
	  niet-opwindbare apparaat dat met <command>cpio</command>
	  gebruikt wordt.</para>

	<para><varname>tape_address_rew</varname>: de naam van het
	  opwindbare apparaat dat met <command>cpio</command> gebruikt
	  wordt.</para>
      </sect3>

      <sect3>
	<title>Instellingen na installatie</title>

	<para>De volgende parameters van
	  <application>&sap;</application> moeten na de installatie
	  geoptimaliseerd worden (voorbeelden voor IDES 46B, 1&nbsp;GB
	  geheugen):</para>

	<informaltable frame="none">
	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>Naam</entry>

		<entry>Waarde</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry>ztta/roll_extension</entry>

		<entry>250000000</entry>
	      </row>

	      <row>
		<entry>abap/heap_area_dia</entry>

		<entry>300000000</entry>
	      </row>

	      <row>
		<entry>abap/heap_area_nondia</entry>

		<entry>400000000</entry>
	      </row>

	      <row>
		<entry>em/initial_size_MB</entry>

		<entry>256</entry>
	      </row>

	      <row>
		<entry>em/blocksize_kB</entry>

		<entry>1024</entry>
	      </row>

	      <row>
		<entry>ipc/shm_psize_40</entry>

		<entry>70000000</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>&sap; notitie 0013026:</para>

	<informaltable frame="none">
	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>Naam</entry>

		<entry>Waarde</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry>ztta/dynpro_area</entry>

		<entry>2500000</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>&sap; notitie 0157246:</para>

	<informaltable frame="none">
	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>Naam</entry>

		<entry>Waarde</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry>rdisp/ROLL_MAXFS</entry>

		<entry>16000</entry>
	      </row>
	      <row>
		<entry>rdisp/PG_MAXFS</entry>

		<entry>30000</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<note>
	  <para>Met bovenstaande parameters kan op een op een systeem
	    met 1&nbsp;GB aan geheugen het geheugengebruik soortgelijk
	    zijn aan het volgende:</para>

	  <programlisting>Mem: 547M Active, 305M Inact, 109M Wired, 40M Cache, 112M Buf, 3492K Free</programlisting>
	</note>
      </sect3>
    </sect2>

    <sect2 id="problemsduringinstallation">
      <title>Problemen tijdens installatie</title>

      <sect3 id="restartr3setup">
	<title><command>R3SETUP</command> herstarten na oplossen
	  van een probleem</title>

	<para><command>R3SETUP</command> stopt als het een probleem
	  tegenkomt.  Nadat de bijhorende logbestanden zijn bekeken
	  en de fout is hersteld, moet <command>R3SETUP</command>
	  opnieuw gestart worden en gewoonlijk dient REPEAT
	  geselecteerd te worden bij de laatste stap waar
	  <command>R3SETUP</command> over klaagde.</para>

	<para><command>R3SETUP</command> kan gewoon met het bijhorende
	  bestand <filename>R3S</filename> worden opgestart:</para>

	<screen>&prompt.root; <userinput>./R3SETUP -f CENTRDB.R3S</userinput></screen>

	<para>voor 4.6B, of met</para>

	<screen>&prompt.root; <userinput>./R3SETUP -f CENTRAL.R3S</userinput></screen>

	<para>voor 4.6C, onafhankelijk van het feit of de fout optrad
	  met <filename>CENTRAL.R3S</filename> of met
	  <filename>DATABASE.R3S</filename>.</para>

	<note>
	  <para>Tijdens sommige fasen verwacht
	    <command>R3SETUP</command> dat zowel de database als
	    <application>&sap;</application> draaien (omdat die stappen
	    al voltooid waren).  Mochten er fouten optreden en kan
	    bijvoorbeeld de database niet gestart worden, dan moeten
	    de database en <application>&sap;</application> handmatig
	    worden gestart n&aacute;dat de fouten zijn hersteld en
	    voordat <command>R3SETUP </command> opnieuw wordt
	    gestart.</para>

	  <para>Ook de <application>&oracle;</application> listener
	    moet opnieuw gestarten worden (als
	    <username>ora<replaceable>sid</replaceable></username> met
	    <command>umask 0; lsnrctl start</command>) als die ook was
	    gestopt (bijvoorbeeld omdat het systeem opnieuw opgestart
	    moest worden).</para>
	</note>
      </sect3>

      <sect3 id="indoraduringduringr3setup">
	<title>OSUSERSIDADM_IND_ORA tijdens
	  <command>R3SETUP</command></title>

	<para>Als <command>R3SETUP</command> tijdens deze fase klaagt,
	  moet het sjabloonbestand dat <command>R3SETUP</command>
	  destijds gebruikte (<filename>CENTRDB.R3S</filename> (4.6B)
	  of &eacute;&eacute;n van <filename>CENTRAL.R3S</filename> of
	  <filename>DATABASE.R3S</filename> (4.6C)) worden gewijzigd.
	  Zoek <literal>[OSUSERSIDADM_IND_ORA]</literal> of zoek de
	  enige regel met <literal>STATUS=ERROR</literal> en wijzig de
	  volgende waarden:</para>

	<programlisting>HOME/home/<replaceable>sid</replaceable>adm (was leeg)
STATUS=OK (had status ERROR)</programlisting>

	<para>Daarna kan <command>R3SETUP</command> opnieuw gestart
	  worden.</para>
      </sect3>

      <sect3 id="indoraduringr3setup">
	<title>OSUSERDBSID_IND_ORA tijdens
	  <command>R3SETUP</command></title>

	<para><command>R3SETUP</command> klaagt mogelijk ook tijdens
	  deze fase.  De fout is vergelijkbaar met die in de fase
	  OSUSERSIDADM_IND_ORA.  Hier kan gewoon het sjabloonbestand
	  dat <command>R3SETUP</command> destijds gebruikte
	  (<filename>CENTRDB.R3S</filename> (4.6B) of
	  &eacute;&eacute;n van <filename>CENTRAL.R3S</filename> of
	  <filename>DATABASE.R3S</filename> (4.6C)) gewijzigd worden.
	  In <literal>[OSUSERDBSID_IND_ORA]</literal> of de enige regel
	  <literal>STATUS=ERROR</literal> en kan de volgende waarde
	  in die sectie gewijzigd worden:</para>

	<programlisting>STATUS=OK</programlisting>

	<para>Nu kan <command>R3SETUP</command> opnieuw gestart
	  worden.</para>
      </sect3>

      <sect3 id="oraviewvrffilenotfound">
	<title><errorname>oraview.vrf FILE NOT FOUND</errorname>
	  tijdens installatie van &oracle;</title>

	<para>De <emphasis>&oracle; On-Line Text Viewer</emphasis> is
	  niet gedeselecteerd voordat de installatie begon.  Dit
	  onderdeel is gemarkeerd om ge&iuml;nstalleerd te worden,
	  zelfs al is dit onderdeel momenteel niet beschikbaar op
	  &linux;.  Dit onderdeel dient gedeselecteerd te worden in het
	  <application>&oracle;</application> installatiemenu en de
	  installatie dient opnieuw gestart te worden.</para>
      </sect3>

      <sect3 id="textenvincalid">
	<title><errorname>TEXTENV_INVALID</errorname> tijdens
	  <command>R3SETUP</command>, RFC of SAPgui start</title>

	<para>Deze foutmelding geeft aan dat de juiste locale niet
	  ge&iuml;nstalleerd is.  &sap; notitie 0171356 geeft de
	  benodigde RPMs die ge&iuml;nstalleerd moeten worden
	  (bijvoorbeeld <filename>spalocales-1.0-3</filename> en
	  <filename>saposcheck-1.0-1</filename> voor RedHat 6.1).
	  Indien alle gerelateerde foutmeldingen genegeerd zijn en
	  de bijhorende <literal>STATUS</literal> van
	  <literal>ERROR</literal> in <literal>OK</literal> veranderd
	  zijn (in <filename>CENTRDB.R3S</filename>) telkens als
	  <command>R3SETUP</command> klaagde en
	  <command>R3SETUP</command> gewoon opnieuw gestart is, dan is
	  het <application>&sap;</application>-systeem onjuist
	  ingesteld en is het onmogelijk om met
	  <application>SAPgui</application> een verbinding met het
	  systeem te maken, zelfs al kan het systeem gestart worden.
	  Een poging om met de oude &linux;
	  <application>SAPgui</application> een verbinding te maken gaf
	  de volgende meldingen:</para>

	<programlisting>Sat May 5 14:23:14 2001
*** ERROR => no valid userarea given [trgmsgo. 0401]
Sat May 5 14:23:22 2001
*** ERROR => ERROR NR 24 occured [trgmsgi. 0410]
*** ERROR => Error when generating text environment. [trgmsgi. 0435]
*** ERROR => function failed [trgmsgi. 0447]
*** ERROR => no socket operation allowed [trxio.c 3363]
Speicherzugriffsfehler</programlisting>

	<para>Dit komt doordat <application>&sap.r3;</application> geen
	  juiste locale kan toekennen en ook doordat het zelf onjuist
	  is ingesteld (ontbrekende regels in sommige
	  databasetabellen).  Om een verbinding met
	  <application>&sap.r3;</application> te kunnen maken, moeten
	  de volgende regels aan het <filename>DEFAULT.PFL</filename>
	  worden toegevoegd (zie notitie 0043288):</para>

	<programlisting>abap/set_etct_env_at_new_mode = 0
install/collate/active = 0
rscp/TCP0B = TCP0B</programlisting>

	<para>Nu kan het <application>&sap;</application>-systeem
	  opnieuw gestart worden en kan een verbinding met het systeem
	  gemaakt worden, hoewel landspecifieke taalinstellingen anders
	  kunnen werken dan verwacht.  Nadat de landinstellingen zijn
	  gecorrigeerd (en de juiste locales zijn gegeven), kunnen
	  bovenstaande regels uit <filename>DEFAULT.PFL</filename>
	  verwijderd worden en kan het
	  <application>&sap;</application>-systeem opnieuw gestart
	  worden.</para>
      </sect3>

      <sect3 id="ora-00001">
	<title><errorcode>ORA-00001</errorcode></title>

	<para>Deze fout trad alleen op met <application>&oracle;
	    8.1.7</application> op &os;.  De reden was dat de
	  <application>&oracle;</application>-database zichzelf niet
	  goed kon initialiseren en crashte, waarbij het semaforen en
	  gedeeld geheugen op het systeem achterliet.  De volgende
	  poging om de database te starten geeft dan
	  <errorcode>ORA-00001</errorcode>.</para>

	<para>Met <command>ipcs -a</command> moeten de semaforen
	  opgezocht worden en verwijderd worden met
	  <command>ipcrm</command>.</para>
      </sect3>

      <sect3 id="ora-00445pmon">
	<title><errorcode>ORA-00445</errorcode> (achtergrondproces PMON
	  is niet gestart)</title>

	<para>Deze fout trad op met <application>&oracle;
	    8.1.7</application>.  Deze fout wordt gemeld als de database
	  met het gebruikelijke script <command>startsap</command>
	  wordt gestart (bijvoorbeeld
	  <command>startsap_majestix_00</command>) als gebruiker
	  <username>prdadm</username>.</para>

	<para>Een mogelijke manier om dit te omzeilen is om de database
	  in plaats daarvan als gebruiker <username>oraprd</username>
	  te starten met <command>svrmgrl</command>:</para>

	<screen>&prompt.user; <userinput>svrmgrl</userinput>
SVRMGR&gt; <userinput>connect internal;</userinput>
SVRMGR&gt; <userinput>startup;</userinput>
SVRMGR&gt; <userinput>exit</userinput></screen>
      </sect3>

      <sect3 id="ora-12546">
	<title><errorcode>ORA-12546</errorcode> (start listener met
	  juiste rechten)</title>

	<para>De <application>&oracle;</application> listener moet als
	  gebruiker <username>oraids</username> worden gestart:</para>

	<screen>&prompt.root; <userinput>umask 0; lsnrctl start</userinput></screen>

	<para>Anders kan <errorcode>ORA-12456</errorcode> optreden
	  omdat de sockets dan niet de juiste rechten hebben.  Zie
	  &sap; notitie 0072984.</para>
      </sect3>

      <sect3 id="ora-27102">
	<title><errorcode>ORA-27102</errorcode> (geen geheugen
	  beschikbaar)</title>

	<para>Deze fout trad op toen geprobeerd werd en om waarden
	  groter dan 1&nbsp;GB (1024x1024x1024) te gebruiken voor
	  <literal>MAXDSIZ</literal> en <literal>DFLDSIZ</literal>.
	  Ook kwam er de foutmelding <errorname>Linux Error 12: Cannot
	    allocate memory</errorname>.
	</para>
      </sect3>

      <sect3 id="dipgntabindind">
	<title>[DIPGNTAB_IND_IND] tijdens
	  <command>R3SETUP</command></title>

	<para>Dit wordt behandeld in &sap; notitie 0130581
	  (<command>R3SETUP</command> termineert).  Om een of andere
	  reden gebruikte het installatieproces tijdens de
	  IDES-specifieke installatie niet de juiste
	  <application>&sap;</application> systeemnaam
	  <quote>IDS</quote>, maar in plaats daarvan de lege string
	  <literal>""</literal>.  Dit leidt tot wat kleine problemen
	  met de toegang tot mappen omdat de paden dynamisch
	  gegenereerd worden door middel van
	  <replaceable>SID</replaceable> (in dit geval IDS).  Dus
	  werden niet de paden:</para>

	<programlisting>/usr/sap/IDS/SYS/...
/usr/sap/IDS/DVMGS00</programlisting>

	<para>maar de volgende paden gebruikt:</para>

	<programlisting>/usr/sap//SYS/...
/usr/sap/D00</programlisting>

	<para>Om de installatie voort te zetten, zijn een link en een
	  aanvullende map aangemaakt:</para>

	<screen>&prompt.root; <userinput>pwd</userinput>
/compat/linux/usr/sap
&prompt.root; <userinput>ls -l</userinput>
total 4
drwxr-xr-x 3  idsadm sapsys 512 May 5 11:20 D00
drwxr-x--x 5  idsadm sapsys 512 May 5 11:35 IDS
lrwxr-xr-x 1  root   sapsys 7 May 5 11:35 SYS -&gt; IDS/SYS
drwxrwxr-x 2  idsadm sapsys 512 May 5 13:00 tmp
drwxrwxr-x 11 idsadm sapsys 512 May 4 14:20 trans</screen>

	<para>Dit gedrag staat ook beschreven in &sap; notities 0029227
	  en 0008401.  Deze problemen traden niet op tijdens de
	  installatie van <application>&sap; 4.6C</application>.</para>
      </sect3>

      <sect3 id="rfcrswboiniindind">
	<title>[RFCRSWBOINI_IND_IND] tijdens
	  <command>R3SETUP</command></title>

	<para>Tijdens de installatie van <application>&sap;
	    4.6C</application> trad deze fout gewoon op als het gevolg
	  van een andere fout eerder in de installatie.  In dit geval
	  moeten de bijhorende logboekbestanden doorzocht worden om het
	  echte probleem te kunnen herstellen.</para>

	<para>Als na het doorzoeken van de logboekbestanden blijkt dat
	  deze fout inderdaad de juiste is (zie de &sap; notities),
	  dan kan de <literal>STATUS</literal> van de stap die het
	  probleem geeft van <literal>ERROR</literal> in
	  <literal>OK</literal> veranderd worden (in
	  <filename>CENTRDB.R3S</filename>) en kan
	  <command>R3SETUP</command> opnieuw gestart worden.  Na de
	  installatie moet rapport <literal>RSWBOINS</literal> van
	  transactie SE38 uitgevoerd worden.  In &sap; notitie 0162266
	  staat aanvullende informatie over de fasen
	  <literal>RFCRSWBOINI</literal> en
	  <literal>RFCRADDBDIF</literal>.</para>
      </sect3>

      <sect3 id="rfcraddbdifindind">
	<title>[RFCRADDBDIF_IND_IND] tijdens
	  <command>R3SETUP</command></title>

	<para>Hier gelden dezelfde beperkingen: er dient door het
	  doorzoeken van de logboekbestanden gecontroleerd te worden
	  dat deze fout niet veroorzaakt wordt door eerdere
	  problemen.</para>

	<para>Als bevestigd kan worden dat &sap; notitie 0162266 van
	  toepassing is, kan gewoon <literal>STATUS</literal> van de
	  stap die het probleem geeft van <literal>ERROR</literal> in
	  <literal>OK</literal> veranderd worden (in
	  <filename>CENTRDB.R3S</filename>) en
	  <command>R3SETUP</command> opnieuw gestart worden.  Na de
	  installatie moet het rapport <literal>RADDBDIF</literal> van
	  transactie SE38 uitgevoerd worden.</para>
      </sect3>

      <sect3 id="sigactionsig31">
	<title><errorcode>sigaction sig31: File size limit
	  exceeded</errorcode></title>

	<para>Deze fout trad op tijdens het starten van de
	  <application>&sap;</application>-processen
	  <emphasis>disp+work</emphasis>.  Als
	  <application>&sap;</application> met het script
	  <command>startsap</command> gestart wordt, worden er
	  subprocessen gestart die ontkoppelen en het vuile werk om
	  alle andere <application>&sap;</application>-processen te
	  starten opknappen.  Een gevolg hiervan is dat het script zelf
	  een verkeerde situatie niet opmerkt.</para>

	<para>Om te controleren of de <application>&sap;</application>
	  processen juist zijn gestart, kan de processtatus bekeken
	  worden met <command>ps ax | grep
	    <replaceable>SID</replaceable></command>, wat een lijst
	  geeft met alle processen van
	  <application>&oracle;</application> en
	  <application>&sap;</application>.  Als het ernaar uitziet dat
	  sommige processen ontbreken of als er geen verbinding met het
	  <application>&sap;</application>-systeem gemaakt kan worden,
	  is het verstandig de bijhorende logboekbestanden uit
	  <filename>/usr/sap/<replaceable>SID</replaceable>/DVEBMGS<replaceable>nr</replaceable>/work/</filename>
	  te bekijken.  De te controleren bestanden zijn
	  <filename>dev_ms</filename> en
	  <filename>dev_disp</filename>.</para>

	<para>Signaal 31 treedt hier op als de hoeveelheid gedeeld
	  geheugen die door <application>&oracle;</application> en
	  <application>&sap;</application> wordt gebruikt, groter is
	  dan wat in het kernelinstellingenbestand is ingesteld en dit
	  kan worden verholpen door een hogere waarde te
	  gebruiken:</para>

	<programlisting># grotere waarden voor 46C productiesystemen:
options SHMMAXPGS=393216
# kleinere waarde voldoende voor 46B:
#options SHMMAXPGS=262144</programlisting>
      </sect3>

      <sect3 id="saposcolfails">
	<title><command>saposcol</command> starten mislukt</title>

	<para>Er zijn wat problemen met het programma
	  <command>saposcol</command> (versie 4.6D).  Het
	  <application>&sap;</application>-systeem gebruikt
	  <command>saposcol</command> om informatie over de
	  systeemprestaties in te winnen.  Dit programma is niet
	  noodzakelijk om het <application>&sap;</application>-systeem
	  te gebruiken, dus kan dit probleem als onbelangrijk worden
	  beschouwd.  De oudere versie (4.6B) werkt wel, maar verzamelt
	  niet alle gegevens (veel aanroepen geven gewoon 0 terug,
	  bijvoorbeeld het processorgebruik).</para>
      </sect3>
    </sect2>
  </sect1>

  <sect1 id="linuxemu-advanced">
    <title>Gevorderde onderwerpen</title>

    <para>Hier wordt beschreven hoe de &linux; binaire compatibiliteit
      werkt.  Het meeste van wat nu volgt is sterk gebaseerd op een
      e-mailbericht van Terry Lambert
      <email>tlambert@primenet.com</email> aan &a.chat; (Message ID:
      <literal>&lt;199906020108.SAA07001@usr09.primenet.com&gt;</literal>).
    </para>

    <sect2>
      <title>Hoe werkt het?</title>

      <indexterm><primary>uitvoerklasselader</primary></indexterm>

      <para>&os; heeft een abstractie met de naam <quote>execution
	class loader</quote>.  Dit is een wig in de systeemaanroep
      &man.execve.2;.</para>

      <para>Wat er gebeurt is dat &os; een lijst van loaders heeft, in
	plaats van een enkele loader die terugvalt op de
	<literal>#!</literal> loader voor het draaien van elke
	shellinterpreter of shellscript.</para>

      <para>Vroeger onderzocht de enige loader op het &unix; platform
	het magische getal (in het algemeen de eerste 4 of 8 bytes van
	het bestand) om te zien of het een binary was die het systeem
	kende en als dat het geval was laadde het de binaire
	loader.</para>

      <para>Als het niet het binaire type voor het systeem was, faalde
	de aanroep naar &man.execve.2; en probeerde de shell het als
	shellopdrachten uit te voeren.</para>

      <para>Deze aanname was een standaard voor <quote>wat de huidige
	shell ook is.</quote></para>

      <para>Later werd er een hack gemaakt voor &man.sh.1; om de eerste
	twee tekens te onderzoeken en als die bestonden uit
	<literal>:\n</literal> voerde het in plaats hiervan de
	&man.csh.1; shell uit (het idee is dat SCO de hack als eerste
	maakte).</para>

      <para>Wat &os; nu doet is door een lijst van loaders gaan
	met een generieke <literal>#!</literal> loader die kennis heeft
	van interpreters in de zin van de karakters die volgen op de
	volgende witruimte tot de laatste, met uiteindelijk een
	terugval op <filename>/bin/sh</filename>.</para>

      <indexterm><primary>ELF</primary></indexterm>

      <para>Voor &linux; ABI-ondersteuning ziet &os; het magische getal
	als een ELF-binary (het maakt op dit punt geen onderscheid
	tussen &os;, &solaris;, &linux; of elk ander besturingssysteem
	dat een ELF-beeldtype heeft).</para>

      <indexterm><primary>&solaris;</primary></indexterm>

      <para>De ELF loader zoekt naar een gespecialiseerd
	<emphasis>merk</emphasis>, dat een commentaargedeelte in het
	ELF-beeld is en dat niet aanwezig is in SVR4/&solaris;
	ELF-binairen.</para>

      <para>Om &linux;-binairen werkend te krijgen, moeten ze
	<emphasis>gemerkt</emphasis> worden als het type
	<literal>Linux</literal> met &man.brandelf.1;:</para>

      <screen>&prompt.root; <userinput>brandelf -t Linux bestand</userinput></screen>

      <para>Als dit gedaan is, ziet de ELF loader het
	<literal>Linux</literal>-merk in het bestand.</para>

      <indexterm>
	<primary>ELF</primary>

	<secondary>merken</secondary>
      </indexterm>

      <para>Als de ELF loader het <literal>Linux</literal>-merk
	tegenkomt, verplaatst de loader een pointer in de
	<literal>proc</literal>-structuur.  Alle systeemaanroepen
	worden met deze pointer ge&iuml;ndexeerd (in een traditioneel
	&unix; systeem is dit de
	<literal>sysent[]</literal>-structuurarray, die de
	systeemaanroepen bevat).  Ook wordt het proces gemerkt voor
	speciale behandeling door de valstrikvector van de
	signaal-trampolinecode samen met nog meer (kleine) aanpassingen
	die door de &linux; kernelmodule worden afgehandeld.</para>

      <para>De &linux; kernelmodule bevat naast andere dingen een lijst
	van <literal>sysent[]</literal>-ingangen waarvan de adressen
	in de kernelmodule staan.</para>

      <para>Als een systeemaanroep door de &linux;-binary wordt
	aangeroepen, verwijdert de valstrikcode de referentie aan de
	functiepointer van de systeemaanroep en geeft die de
	ingangspunten van de systeemaanroep van &linux; en niet van
	&os;.</para>

      <para>Verder <emphasis>reroot</emphasis> de &linux;-modus
	dynamisch lookups.  Dit is wat de optie <option>union</option>
	(<emphasis>niet</emphasis> het <literal>unionfs</literal>
	bestandssysteemtype!) voor het aankoppelen van bestandssystemen
	effectief doet.  Eerst wordt een poging gedaan om het bestand
	in de map
	<filename>/compat/linux/<replaceable>origineel-pad</replaceable></filename>
	op te zoeken en <emphasis>vervolgens</emphasis> alleen als dat
	mislukt, wordt het bestand in
	<filename>/<replaceable>origineel-pad</replaceable></filename>
	opgezocht.  Dit zorgt ervoor dat binairen die andere binairen
	nodig hebben kunnen draaien (zo kan bijvoorbeeld de
	&linux;-gereedschapskist geheel onder &linux; ABI-ondersteuning
	draaien).  Dit betekent ook dat &linux;-binairen &os;-binairen
	kunnen laden en draaien als er geen overeenkomende
	&linux;-binairen zijn en dat er een &man.uname.1;-opdracht in
	de mappenstructuur <filename>/compat/linux</filename> gezet kan
	worden om er zeker van te zijn dat &linux;-binairen niet kunnen
	weten dat ze niet op &linux; draaien.</para>

      <para>Effectief bevindt er zich een &linux;-kernel in de
	&os;-kernel.  De verschillende onderliggende functies die alle
	functies implementeren die de kernel aanbiedt, zijn dezelfde
	tabelingangen voor de systeemaanroepen van &os; als van
	&linux;: bestandssysteembewerkingen, bewerkingen op het
	virtu&euml;le geheugen, signaalaflevering, System V IPC,
	enzovoort.  Het enige verschil is dat &os;-binairen de
	<emphasis>lijm</emphasis> functies voor &os; krijgen en dat de
	&linux;-binairen de <emphasis>lijm</emphasis>-functies voor
	&linux; krijgen (de meeste oudere besturingssystemen hadden
	alleen hun eigen <emphasis>lijm</emphasis>-functies: adressen
	van functies die in een statische globale
	<literal>sysent[]</literal> structuurarray werden opgeslagen,
	in plaats van adressen van functies waarvan dynamisch een
	ge&iuml;nitialiseerde pointer wordt verwijderd in de
	<literal>proc</literal>-structuur van het proces dat de aanroep
	doet).</para>

      <para>Welke is de eigenlijke &os; ABI?  Dat maakt niet uit.
	Eigenlijk is het enige verschil dat (op dit moment; dit kan
	eenvoudig veranderen in een toekomstige uitgave, en dat gebeurt
	waarschijnlijk na deze uitgave) de
	<emphasis>lijm</emphasis>-functies van &os; statisch gelinkt
	zijn in de kernel en dat de <emphasis>lijm</emphasis>-functies
	van &linux; zowel statisch gelinkt kunnen worden als dat ze
	door een kernelmodule worden benaderd.</para>

      <para>Maar is dit nu echt emulatie?  Nee.  Het is een
	ABI-implementatie, geen emulatie.  Er is geen emulator (of
	simulator, om de volgende vraag voor te zijn) bij
	betrokken.</para>

      <para>Dus waarom wordt het dan soms
	<quote>&linux;-emulatie</quote> genoemd?  Om het moeilijk te
	maken om &os; te verkopen!  Serieus, het is zo omdat de
	historische implementatie in een tijd werd gedaan toen er echt
	geen ander woord was om te beschrijven wat er aan de hand was,
	om te zeggen dat &os; &linux;-binairen draaide was niet waar
	als de code niet in de kernel gecompileerd werd of als een
	module geladen werd en er moest een woord zijn voor hetgeen
	geladen werd.  Vandaar <quote>de
	&linux;-emulator</quote>.</para>
    </sect2>
  </sect1>
</chapter>

<!--
     Local Variables:
     mode: sgml
     sgml-declaration: "../chapter.decl"
     sgml-indent-data: t
     sgml-omittag: nil
     sgml-always-quote-attributes: t
     sgml-parent-document: ("../book.sgml" "part" "chapter")
     End:
-->
