<!--
     The FreeBSD Mongolian Documentation Project

     Original revision 1.147

     $FreeBSD$
-->

<chapter id="mail">
  <chapterinfo>
    <authorgroup>
      <author>
	<firstname>Билл</firstname>
	<surname>Ллойд</surname>
	<contrib>Эхийг зохиосон </contrib>
      </author>
    </authorgroup>
    <authorgroup>
      <author>
	<firstname>Жим</firstname>
	<surname>Мок</surname>
	<contrib>Дахин эмхэтгэсэн </contrib>
	<!-- 2 Dec 1999 -->
      </author>
    </authorgroup>
    <authorgroup>
      <author>
	<firstname>Лодойсамбын</firstname>
	<surname>Баянзул</surname>
	<contrib>Орчуулсан </contrib>
      </author>
    </authorgroup>
  </chapterinfo>

  <title>Цахим Шуудан</title>

  <sect1 id="mail-synopsis">
    <title>Ерөнхий Агуулга</title>
    <indexterm><primary>email</primary></indexterm>

    <para><quote>Цахим Захидал</quote> буюу имэйл гэж нийтэд илүүтэй танигдсан энэ зүйл нь
өнөө үед хамгийн өргөн хэрэглэгдэх болсон харилцааны хэлбэр юм. 
Энэ бүлэгт &os; дээр захидлын серверийг зохион байгуулах анхан 
шатны танилцуулга болон &os; ашиглан цахим захидал илгээх болон 
хүлээн авах талаар үзэх болно; гэвч, энэ нь бүрэн хэмжээний танилцуулга 
болж чадахгүй бөгөөд олон чухал зүйлсийг оруулаагүй болно. 
Энэ сэдвээр бүрэн дүүрэн мэдээлэл авахыг хүсвэл, <xref linkend="bibliography"> 
хэсэгт байгаа номнуудын жагсаалтыг үзнэ үү.</para>

    <para>Энэ бүлгийг уншсаны дараа та дараах зүйлсийг мэдэж авах болно:</para>

    <itemizedlist>
      <listitem>
	<para>Цахим захидал хүлээн авах болон илгээхэд 
ямар програмууд оролцдог талаар</para>
      </listitem>

      <listitem>
	<para><application>sendmail</application>-н үндсэн тохиргооны файлууд 
FreeBSD дээр хаана байрладаг талаар</para>
      </listitem>

      <listitem>
        <para>Алсын болон дотоодын захидлын хайрцгуудын ялгаа</para>
      </listitem>

      <listitem>
	<para>Спам тараагчдыг өөрийн серверийг хууль бусаар дамжуулагч (relay) болгон 
ашиглахаас хэрхэн сэргийлэх талаар</para>
      </listitem>

      <listitem>
	<para><application>sendmail</application>-н оронд өөр 
Захидал Дамжуулах Агентийг хэрхэн суулгаж тохируулах талаар</para>
      </listitem>

      <listitem>
	<para>Захидлын сервертэй холбоотой түгээмэл тохиолддог асуудлуудыг 
хэрхэн шийдвэрлэх талаар</para>
      </listitem>

      <listitem>
	<para>SMTP-г UUCP-тэй хэрхэн ашиглах</para>
      </listitem>

      <listitem>
	<para>Системийг хэрхэн зөвхөн захидал илгээдэг болгож тохируулах талаар</para>
      </listitem>

      <listitem>
	<para>Утасны үзүүр ашигласан холболтоор захидлыг хэрхэн хэрэглэх талаар</para>
      </listitem>

      <listitem>
        <para>Аюулгүй байдлыг нэмэгдүүлэхийн тулд SMTP Магадлалтыг хэрхэн нэмэх талаар</para>
      </listitem>

      <listitem>
        <para><application>mutt</application> гэх мэт Хэрэглэгчийн Захидлын Агентийг хэрхэн 
суулгаж тохируулах талаар</para>
      </listitem>

      <listitem>

        <para>Өөрт ирсэн захидлыг алсын <acronym>POP</acronym> эсвэл <acronym>IMAP</acronym> 
серверээс хэрхэн татаж авах талаар</para>
      </listitem>

      <listitem>
        <para>Гаднаас ирэх захидлыг хэрхэн автоматаар шүүлтүүр болон 
дүрмүүдээр шалгах талаар</para>
      </listitem>
    </itemizedlist>

    <para>Энэ бүлгийг уншихын өмнө та дараах шаардлагыг хангасан байх ёстой:</para>

    <itemizedlist>
      <listitem>
	<para>Сүлжээний холболтоо зөв гүйцэтгэсэн байх (<xref linkend="advanced-networking">).</para>
      </listitem>

      <listitem>
	<para>Захидлын хост дээрээ DNS мэдээллийг зөв оруулж өгсөн байх (<xref linkend="network-servers">).</para>
      </listitem>

      <listitem>
	<para>Гуравдагч этгээдийн програмыг хэрхэн суулгах талаар мэдлэгтэй байх (<xref linkend="ports">).</para></listitem>
    </itemizedlist>
  </sect1>

  <sect1 id="mail-using">
    <title>Цахим Захидлыг Хэрэглэх нь</title>
    <indexterm><primary>POP</primary></indexterm>
    <indexterm><primary>IMAP</primary></indexterm>
    <indexterm><primary>DNS</primary></indexterm>

    <para>Цахим захидал солилцоход дараах үндсэн таван бүрэлдэхүүн оролцоно. 
Үүнд: <link linkend="mail-mua">хэрэглэгчийн програм</link>, <link linkend="mail-mta">сервер дэмон</link>, 
<link linkend="mail-dns">DNS</link>, <link linkend="mail-receive">алсын эсвэл дотоод захидлын хайрцаг</link> 
ба мэдээж <link linkend="mail-host">захидлын хост өөрөө</link> юм.</para>

    <sect2 id="mail-mua">
      <title>Хэрэглэгчийн Програм</title>

      <para>Захаас нь эхлээд дурдвал эдгээрт <application>mutt</application>, <application>alpine</application>, 
<application>elm</application>, <command>mail</command> зэрэг тушаалын мөрний програмууд, 
мөн <application>balsa</application>, <application>xfmail</application> зэрэг <acronym>GUI</acronym> програмууд, 
дээр нь WWW хөтөч зэрэг илүү <quote>нарийн төвөгтэй</quote> програмууд ч орно. 
Дээрх програмууд нь цахим захидлын гүйлгээг дотоод 
<link linkend="mail-host"><quote>захидлын хост</quote></link>-од <link linkend="mail-mta">сервер 
демонуудын</link> аль нэгийг дуудан шилжүүлэн өгөх, эсвэл <acronym>TCP</acronym>-р 
дамжуулан очих газар нь хүргэх ажлыг гүйцэтгэдэг.</para>
	</sect2>

    <sect2 id="mail-mta">
      <title>Захидлын Хостын Сервер Демон</title>
      <indexterm>
        <primary>захидлын серверийн дэмонууд</primary>
        <secondary><application>sendmail</application></secondary>
      </indexterm>
      <indexterm>
        <primary>захидлын серверийн дэмонууд</primary>
        <secondary><application>postfix</application></secondary>
      </indexterm>
      <indexterm>
        <primary>захидлын серверийн дэмонууд</primary>
        <secondary><application>qmail</application></secondary>
      </indexterm>
      <indexterm>
        <primary>захидлын серверийн дэмонууд</primary>
        <secondary><application>exim</application></secondary>
      </indexterm>

      <para>&os; нь анхдагч байдлаар <application>sendmail</application>-г агуулсан байдаг, 
гэхдээ бусад олон захидлын серверийн дэмонг дэмждэг. Үүнээс заримыг 
дурдвал:</para>

      <itemizedlist>
	<listitem>
	  <para><application>exim</application>;</para>
	</listitem>

	<listitem>
	  <para><application>postfix</application>;</para>
	</listitem>

	<listitem>
	  <para><application>qmail</application>.</para>
	</listitem>
      </itemizedlist>

      <para>Сервер дэмон ихэвчлэн хоёр үүрэг гүйцэтгэнэ&mdash;гаднаас ирж байгаа 
захидлыг хүлээн авах болон гадагшаа явж байгаа захидлыг очих газар нь 
хүргэх үүрэгтэй. Сервер дэмон нь захидлаа уншихын тулд <acronym>POP</acronym> эсвэл 
<acronym>IMAP</acronym> зэрэг протоколыг ашиглан захидлыг цуглуулж авах, эсвэл 
дотоод <filename>mbox</filename> эсвэл Maildir захидлын хайрцгууд руу холбогдох зэргийн 
аль алиных нь үүргийг хүлээдэг<emphasis>гүй</emphasis>. Үүний тулд нэмэлт 
<link linkend="mail-receive">дэмон</link> шаардлагатай.</para>

      <warning>
	<para><application>sendmail</application>-н хуучин хувилбаруудад 
халдагч таны машины дотоод болон алсын хандалтыг гартаа 
оруулж болох аюулгүй байдлын хувьд хүндхэн асуудлууд гарч байсан. 
Иймэрхүү асуудал гарахаас сэргийлж хамгийн сүүлийн хувилбарыг 
ашиглаж байгаа эсэхээ нягтлах шаардлагатай. Нэмэлт сонголт байдлаар, 
өөр <acronym>MTA</acronym>-г <link linkend="ports">&os; Портуудын Цуглуулга</link>ас суулгаарай.</para>
      </warning>
    </sect2>

    <sect2 id="mail-dns">
      <title>Цахим Захидал ба DNS</title>

      <para>Домэйн Нэрийн Систем (DNS) ба түүний дэмон <command>named</command> нь 
цахим захидлыг хүргэх ажилд чухал үүрэг гүйцэтгэдэг. Танай байгаа газраас 
өөр тийш захидал хүргэхийн тулд, сервер дэмон очих газрын хаягийг өөрөөр хэлбэл 
захидал хүлээж авах хостыг DNS-с асууна. Энэ үйл явц нөгөө талаас танд захидал 
явуулахад мөн давтагдана.</para>

      <indexterm>
	<primary>MX бичлэг</primary>
      </indexterm>

      <para><acronym>DNS</acronym> нь хост нэрийг IP хаягт буулгах үүрэгтэйгээс гадна, 
MX бичлэгүүд гэгддэг захидал хүргэхтэй холбоотой тусгай мэдээллийг 
агуулж байдаг. MX (Mail eXchanger буюу Захидал Солилцогч) бичлэг нь 
ямар хост, эсвэл хостууд, тухайн домэйны хаяглагдсан захидлыг 
хүлээж авах ёстойг заана. Хэрэв тухайн домэйны хувьд MX бичлэг 
байхгүй бол, захидлуудыг тухайн домэйноор нэрлэгдсэн хостын 
A бичлэгт харгалзах хост руу шууд дамжуулна.</para>

      <para>Ямар ч домэйны хувьд MX бичлэгүүдийг &man.host.1; тушаалыг ашиглан 
үзэж болно. Жишээг дор үзүүлэв:</para>

      <screen>&prompt.user; <userinput>host -t mx FreeBSD.org</userinput>
FreeBSD.org mail is handled (pri=10) by mx1.FreeBSD.org</screen>
    </sect2>

    <sect2 id="mail-receive">
      <title>Захидал хүлээн авах нь</title>
      <indexterm>
        <primary>цахим захидал</primary>
        <secondary>хүлээн авах</secondary>
      </indexterm>

      <para>Захидал хүлээж авах ажлыг захидлын хост гүйцэтгэнэ. 
Энэ хост таны домэйнд хаяглагдсан бүх захидлыг хүлээж авах ба 
түүнийг таны тохиргооноос хамаарч эсвэл <filename>mbox</filename> 
(захидал хадгалах анхдагч арга зам) эсвэл Maildir хэлбэрээр хадгална. 
Захидлыг хадгалсан л бол, түүнийг дотоодоос 
&man.mail.1; эсвэл <application>mutt</application> зэрэг програмыг ашиглан уншиж болно. 
Эсвэл алсаас хандан, <acronym>POP</acronym> эсвэл <acronym>IMAP</acronym> зэрэг протоколыг 
ашиглан цуглуулж авсны дараа уншиж болно. Энэ нь хэрэв та захидлаа зөвхөн 
дотоодоос шалгах хүсэлтэй байгаа бол, <acronym>POP</acronym> эсвэл 
<acronym>IMAP</acronym> сервер суулгах шаардлагагүй гэсэн үг юм.</para>

      <sect3 id="pop-and-imap">
        <title><acronym>POP</acronym> ба <acronym>IMAP</acronym> ашиглан алсын захидлын хайрцагт хандах нь</title>

        <indexterm><primary>POP</primary></indexterm>
        <indexterm><primary>IMAP</primary></indexterm>
	<para>Захидлын хайрцагт алсаас хандахын тулд, 
та <acronym>POP</acronym> эсвэл <acronym>IMAP</acronym> сервер руу хандах хэрэгтэй болно. 
Эдгээр протоколууд нь хэрэглэгчдэд өөрсдийн захидлын хайрцагт 
алсаас төвөггүйгээр хандах боломжийг олгодог. Хэдийгээр 
<acronym>POP</acronym> ба <acronym>IMAP</acronym> хоёул хэрэглэгчдэд 
захидлын хайрцагтаа алсаас хандах боломжийг олгодог боловч, 
<acronym>IMAP</acronym> нь илүү давуу талтай, дурдвал:</para>

        <itemizedlist>
          <listitem>
	    <para><acronym>IMAP</acronym> нь алсын серверээс захидлыг зөөж авчрахаас гадна 
мөн хадгалж чадна.</para>
          </listitem>

          <listitem>
	    <para><acronym>IMAP</acronym> нь зэрэг хийх өөрчлөлтийг дэмждэг.</para>
          </listitem>

          <listitem>
	    <para><acronym>IMAP</acronym> нь захидлыг бүтнээр нь биш, зөвхөн түүний 
төрхийг нь татаж авах боломжийг хэрэглэгчдэд олгодог тул, 
хурд удаантай холболттой үед үнэхээр хэрэгтэй байж чаддаг. 
Мөн сервер болон харилцагчийн хооронд дамжих өгөгдлийг хамгийн 
бага байлгахын тулд, сервер дээр хайлт явуулах зэрэг үйлдлийг хийж чаддаг.</para>
          </listitem>

        </itemizedlist>

        <para><acronym>POP</acronym> эсвэл <acronym>IMAP</acronym> сервер суулгахын тулд, 
дараах алхмуудыг хийх хэрэгтэй:</para>

        <procedure>
	  <step>
	    <para>Өөрийнхөө хэрэгцээ, шаардлагад тохирсон 
<acronym>IMAP</acronym> эсвэл <acronym>POP</acronym> серверийг сонгож авах. 
Өргөн хэрэглэгддэг зарим <acronym>POP</acronym> ба <acronym>IMAP</acronym> серверүүдийг 
жишээ болгон дурдвал:</para>

	      <itemizedlist>
	        <listitem>
		  <para><application>qpopper</application>;</para>
	        </listitem>

	        <listitem>
		  <para><application>teapop</application>;</para>
	        </listitem>

	        <listitem>
		  <para><application>imap-uw</application>;</para>
	        </listitem>

	        <listitem>
		  <para><application>courier-imap</application>;</para>
	        </listitem>

                <listitem>
                  <para><application>dovecot</application>;</para>
                </listitem>
	      </itemizedlist>

	  </step>

          <step>
	    <para>Өөрийн сонгосон <acronym>POP</acronym> эсвэл <acronym>IMAP</acronym> дэмонг 
портуудын цуглуулгаас суулгах.</para>
	  </step>

	  <step>
	    <para>Шаардлагатай бол, <acronym>POP</acronym> эсвэл <acronym>IMAP</acronym> серверийг 
ачаалахын тулд <filename>/etc/inetd.conf</filename> файлыг засварлах.</para>
	  </step>
        </procedure>

	<warning>
	  <para><acronym>POP</acronym> ба <acronym>IMAP</acronym> хоёул хэрэглэгчийн нэр, нэвтрэх үг 
зэрэг чухал мэдээллийг цэвэр текст чигээр нь 
дамжуулдаг болохыг энд тэмдэглэх хэрэгтэй болов уу. Энэ нь эдгээр протоколоор 
мэдээлэл дамжуулалтыг аюулгүй болгоё гэвэл сессүүдээ &man.ssh.1; хонгилоор эсвэл SSL ашиглан 
дамжуулах хэрэгтэй гэсэн үг юм. Сессүүдийг хонгилоор дамжуулах талаар 
<xref linkend="security-ssh-tunneling"> хэсэгт болон SSL-ийн талаар <xref linkend="openssl"> хэсэгт 
    тайлбарласан байгаа.</para>
        </warning>
      </sect3>

      <sect3 id="local">
        <title>Дотоод захидлын хайрцгуудад хандах нь</title>

	<para>Захидлын хайрцаг байрлаж байгаа сервер дээрх 
<acronym>MUA</acronym>-уудын тусламжтай захидлын хайрцгуудад 
дотоодоос нь шууд хандаж болно. Үүний тулд <application>mutt</application> эсвэл 
&man.mail.1; зэрэг програмуудыг ашиглана.
	</para>
      </sect3>
    </sect2>

    <sect2 id="mail-host">
      <title>Захидлын хост</title>
      <indexterm><primary>захидлын хост</primary></indexterm>

      <para>Захидлын хост гэж таны хост, магадгүй таны сүлжээнд хаяглагдсан 
захидлыг хүлээн авах, илгээх үүргийг гүйцэтгэж байгаа 
серверийг нэрлэнэ.</para>
    </sect2>
  </sect1>

  <sect1 id="sendmail">
    <sect1info>
      <authorgroup>
        <author>
          <firstname>Кристофер</firstname>
          <surname>Шамвэй</surname>
          <contrib>Хувь нэмрээ оруулсан </contrib>
        </author>
      </authorgroup>
      <authorgroup>
        <author>
          <firstname>Лодойсамбын</firstname>
          <surname>Баянзул</surname>
          <contrib>Орчуулсан </contrib>
        </author>
      </authorgroup>

     </sect1info>
    <title><application>sendmail</application>-г Тохируулах нь</title>

    <indexterm>
      <primary><application>sendmail</application></primary>
    </indexterm>

    <para>FreeBSD-н хувьд &man.sendmail.8; бол анхдагч Mail Transfer Agent буюу Захидал Дамжуулах 
Агент(MTA) юм. <application>sendmail</application>-н үүрэг бол Mail User Agent буюу Хэрэглэгчийн 
Захидлын Агент(<acronym>MUA</acronym>)-с захидал хүлээн авч, тохиргооны файлд хэрхэн 
зааж өгснөөс хамааран зохих захидал түгээгчид дамжуулна. 
<application>sendmail</application> нь мөн сүлжээний холболтуудыг хүлээн авч, 
захидлыг дотоод захидлын хайрцагт эсвэл өөр програмд дамжуулах чадвартай.</para>

    <para><application>sendmail</application> дараах тохиргооны файлуудыг ашигладаг:</para>

    <indexterm>
      <primary><filename>/etc/mail/access</filename></primary>
    </indexterm>
    <indexterm>
      <primary><filename>/etc/mail/aliases</filename></primary>
    </indexterm>
    <indexterm>
      <primary><filename>/etc/mail/local-host-names</filename></primary>
    </indexterm>
    <indexterm>
      <primary><filename>/etc/mail/mailer.conf</filename></primary>
    </indexterm>
    <indexterm>
      <primary><filename>/etc/mail/mailertable</filename></primary>
    </indexterm>
    <indexterm>
      <primary><filename>/etc/mail/sendmail.cf</filename></primary>
    </indexterm>
    <indexterm>
      <primary><filename>/etc/mail/virtusertable</filename></primary>
    </indexterm>
    <informaltable frame="none" pgwide="1">
      <tgroup cols="2">
	<thead>
	  <row>
	    <entry>Файлын Нэр</entry>
	    <entry>Үүрэг</entry>
	  </row>
	</thead>
	<tbody>
	  <row>
	    <entry>
	      <filename>/etc/mail/access</filename>
	    </entry>
	    <entry><application>sendmail</application>-н хандалтын өгөгдлийн сангийн файл</entry>
	  </row>
	  <row>
	    <entry>
	      <filename>/etc/mail/aliases</filename>
	    </entry>
	    <entry>Захидлын хайрцагны хуурамч дүрүүд</entry>
	  </row>
	  <row>
	    <entry>
	      <filename>/etc/mail/local-host-names</filename>
	    </entry>
	    <entry><application>sendmail</application> эдгээр хостуудаас захидал хүлээж авна.</entry>
    </row>
	  <row>
	    <entry>
	      <filename>/etc/mail/mailer.conf</filename>
	    </entry>
	    <entry>Захидал түгээгч програмын тохиргоо</entry>
	  </row>
	  <row>
	    <entry>
	      <filename>/etc/mail/mailertable</filename>
	    </entry>
	    <entry>Захидал түгээгчийн түгээлтийн хүснэгт</entry>
	  </row>
	  <row>
	    <entry>
	      <filename>/etc/mail/sendmail.cf</filename>
	    </entry>
	    <entry><application>sendmail</application>-н гол тохиргооны файл</entry>
	  </row>
	  <row>
	    <entry>
	      <filename>/etc/mail/virtusertable</filename>
	    </entry>
	    <entry>Хийсвэр хэрэглэгчид болон домэйн хүснэгтүүд</entry>
	  </row>
	</tbody>
      </tgroup>
    </informaltable>

  <sect2>
    <title><filename>/etc/mail/access</filename></title>

    <para>Хандалтын өгөгдлийн санд ямар хостууд болон IP хаягуудаас 
дотоод захидлын серверт хандах, ямар төрлийн хандалт хийхийг зааж 
өгсөн байна. Хостуудыг <option>OK</option>, <option>REJECT</option>, <option>RELAY</option> гэж тэмдэглэж 
болно эсвэл <application>sendmail</application>-н алдаа зохицуулах дэгд тодорхой алдааг зааж 
өгөн дамжуулж болно. <option>OK</option> гэсэн анхдагч утгаар тэмдэглэгдсэн 
хостууд энэ хостод хаяглагдсан захидлыг дамжуулах эрхтэй. <option>REJECT</option> 
гэж тэмдэглэгдсэн хостуудаас үүсэх холболтыг хүлээж авахгүй. 
<option>RELAY</option> гэж тэмдэглэгдсэн хостуудын хувьд энэ захидлын серверээр 
дамжуулан хааш нь ч хамаагүй захидал илгээж болно.</para>

      <example>
	<title><application>sendmail</application> Хандалтын Өгөгдлийн санг Тохируулах нь</title>

    <programlisting>cyberspammer.com                550 We do not accept mail from spammers
FREE.STEALTH.MAILER@            550 We do not accept mail from spammers
another.source.of.spam          REJECT
okay.cyberspammer.com           OK
128.32                          RELAY</programlisting>
      </example>

   <para>Энэ жишээн дээр бид таван бүртгэл харж байна. 
Захидал илгээгчийн хувьд хүснэгтийн зүүн баганад байгаа утгатай дүйвэл 
баруун баганад байгаа үйлдлийг гүйцэтгэнэ. Эхний хоёр жишээний хувьд 
<application>sendmail</application>-н алдаа зохицуулах дэгд алдааны мэдээллийг өгөх болно. 
Хүснэгтийн зүүн баганад байгаа утгатай захидал дүйсэн тохиолдолд 
алсын хостод энэ мэдээллийг өгөх болно. Дараагийн жишээн дээр, 
<hostid>another.source.of.spam</hostid> гэсэн тодорхой хостоос ирэх захидлыг бүгдийг буцаах болно. 
Түүний дараагийн жишээн дээр, <hostid role="fqdn">okay.cyberspammer.com</hostid> гэсэн хостоос 
ирэх холболтуудыг хүлээж авах болно. Энд хостын нэр өмнөх мөрний 
<hostid role="domainname">cyberspammer.com</hostid>-г бодвол илүү тодорхой байна. Илүү тодорхой 
заалт нь ерөнхий заалтыг дарж хүчингүй болгоно. Хамгийн сүүлийн жишээн дээр, 
<hostid>128.32</hostid>-р эхэлсэн IP хаягтай хостуудаас ирэх захидлыг өртөөлөн дамжуулахыг 
зааж байна. Эдгээр хостууд бусад серверт 
хаягласан захидлыг энэ захидлын серверээр дамжуулах боломжтой гэсэн үг юм.</para>

   <para>Энэ файлд өөрчлөлт оруулсны дараа, <filename>/etc/mail/</filename> дотор 
<command>make</command> тушаалыг өгөн өгөгдлийн санг шинэчлэх хэрэгтэй.</para>

   </sect2>
   <sect2>
    <title><filename>/etc/mail/aliases</filename></title>

    <para>Хуурамч дүрүүдийн өгөгдлийн санд хэрэглэгчид, файлууд, 
програмууд эсвэл бусад хуурамч дүрүүд рүү задардаг хийсвэр захидлын 
хайрцгуудын жагсаалтыг хадгалж байдаг. <filename>/etc/mail/aliases</filename> дотор 
хэрэглэж болох хэдэн жишээг дор үзүүлэв:</para>

      <example>
	<title>Захидлын Хуурамч дүрүүд</title>
    <programlisting>root: localuser
ftp-bugs: joe,eric,paul
bit.bucket:  /dev/null
procmail: "|/usr/local/bin/procmail"</programlisting>
      </example>

      <para>Бичих хэлбэр нь амархан; тодорхойлох хоёр цэгний зүүн талд 
байгаа захидлын хайрцагны нэр нь баруун талд байгаа зүйл болон задарна. 
Эхний жишээн дээр <username>root</username> захидлын хайрцгийг <username>localuser</username> 
захидлын хайрцаг болгон задалж байна. Энэ нэрийг цааш дахин 
хуурамч дүрийн өгөгдлийн сангаас хайх болно. Хэрэв энэ нэр олдохгүй бол, 
захидлыг <username>localuser</username> нэртэй дотоод хэрэглэгчид хүргэх болно. 
Дараагийн жишээн дээр захидлын жагсаалтыг үзүүлсэн байна. <username>ftp-bugs</username> 
захидлын хайрцагт ирэх захидлыг <username>joe</username>, <username>eric</username>, ба 
<username>paul</username> гэсэн гурван дотоод хэрэглэгчдэд задлах болно. Алсын захидлын 
хайрцгийг <email>user@example.com</email> хэлбэрээр оруулж болохыг энд тэмдэглэх 
хэрэгтэй. Дараагийн жишээн дээр захидлыг файлд, энэ жишээн дээр 
<filename>/dev/null</filename>-д бичихийг зааж байна. Хамгийн сүүлийн жишээн дээр, 
захидлын програмд илгээхийг, энэ тохиолдолд захидлыг &unix; хоолойгоор дамжуулан 
<filename>/usr/local/bin/procmail</filename>-н стандарт оролтод өгч байна.</para>

   <para>Энэ файлд өөрчлөлт оруулсны дараа, <filename>/etc/mail/</filename> дотор 
<command>make</command> тушаалыг өгөн өгөгдлийн санг шинэчлэх хэрэгтэй.</para>
  </sect2>
  <sect2>
    <title><filename>/etc/mail/local-host-names</filename></title>

    <para>Энэ бол &man.sendmail.8; дотоод хостууд байдлаар хүлээн авах 
хостуудын нэрийн жагсаалт юм. <application>sendmail</application> захидлыг нь хүлээж авах 
домэйн болон хостын нэрийг энэ файлд бичих хэрэгтэй. Жишээлбэл, 
хэрэв энэ захидлын сервер <hostid role="domainname">example.com</hostid> домэйн болон 
<hostid role="fqdn">mail.example.com</hostid> хостын захидлыг 
хүлээж авах ёстой бол, <filename>local-host-names</filename> файл дараах байдалтай 
байна:</para>

    <programlisting>example.com
mail.example.com</programlisting>

    <para>Энэ файлд өөрчлөлт ороход, өөрчлөлтүүдийг хүчинтэй болгохын тулд 
&man.sendmail.8;-г дахин эхлүүлэх шаардлагатай.</para>

  </sect2>

  <sect2>
    <title><filename>/etc/mail/sendmail.cf</filename></title>

    <para><application>sendmail</application>-н гол тохиргооны файл болох 
<filename>sendmail.cf</filename> нь захидлын хаягийг дахин бичихээс эхлүүлээд 
алсын захидлын серверт татгалзсан зурвас илгээх хүртэл бүх зүйлийг оруулаад 
<application>sendmail</application>-н ерөнхий үйл ажиллагааг хянана. 
Мэдээжийн хэрэг, ийм олон талын үүрэгтэй энэ тохиргооны файл 
нилээд ойлгомжгүй байх ба нарийвчлан авч үзэх нь энэ бүлгийн 
мэдлээс хальсан асуудал болно. Нэг баярлууштай нь, стандарт захидлын 
сервер байдлаар ашиглахад энэ файлд өөрчлөлт оруулах бараг шаардлагагүй 
байдаг.</para>

    <para><application>sendmail</application>-н гол тохиргооны файлыг <application>sendmail</application>-н 
шинж чанар, төлвийг илэрхийлсэн &man.m4.1; макронуудаас 
үүсгэж болно. Дэлгэрэнгүйг <filename>/usr/src/contrib/sendmail/cf/README</filename> файлаас үзэж болно.</para>

    <para>Энэ файлд өөрчлөлт ороход, өөрчлөлтүүдийг хүчинтэй болгохын тулд 
<application>sendmail</application>-г дахин эхлүүлэх шаардлагатай.</para>

  </sect2>
  <sect2>
    <title><filename>/etc/mail/virtusertable</filename></title>

    <para><filename>virtusertable</filename> нь хийсвэр домэйнууд ба захидлын хайрцгийн 
хаягуудыг жинхэнэ захидлын хайрцгуудад буулгана. Эдгээр захидлын 
хайрцгууд нь дотоод, алсын, <filename>/etc/mail/aliases</filename> дотор тодорхойлогдсон 
хуурамч дүр эсвэл файл байж болно.</para>

    <example>
	<title>Хийсвэр Домэйны Захидлын Буулгалтын Жишээ</title>

    <programlisting>root@example.com                root
postmaster@example.com          postmaster@noc.example.net
@example.com                    joe</programlisting>
      </example>

    <para>Дээрх жишээн дээр, <hostid role="domainname">example.com</hostid> домэйны хувь дахь 
буулгалтыг үзүүлсэн байна. Энэ файлыг дээрээс нь доош нь, 
эхний таарсныг авах байдлаар боловсруулна. Эхний мөрөнд 
<email>root@example.com</email>-г <username>root</username> гэсэн дотоод захидлын хайрцагт буулгаж байна. 
Дараагийн мөрөнд <email>postmaster@example.com</email>-г <hostid role="fqdn">noc.example.net</hostid> хост дээр байгаа 
<username>postmaster</username> захидлын хайрцагт буулгаж байна. Эцэст нь, 
хэрэв <hostid role="domainname">example.com</hostid>-той хаяг дээр дурдсаны алинд ч тохироогүй бол, 
хамгийн сүүлийн мөрөнд тохирох болно. Энэ мөрөнд <hostid role="domainname">example.com</hostid> домэйнтой 
бүх захидлын хаяг тохирох бөгөөд бүгд <username>joe</username> гэсэн дотоод захидлын 
хайрцагт буулгагдах болно.</para>

  </sect2>
  </sect1>

  <sect1 id="mail-changingmta">
    <sect1info>
      <authorgroup>
        <author>
          <firstname>Эндрю</firstname>
          <surname>Бүүтмэн</surname>
          <contrib>Бичсэн </contrib>
        </author>
      </authorgroup>
      <authorgroup>
        <author>
          <firstname>Грегори</firstname>
          <surname>Нэйл Шапиро</surname>
          <contrib>Цахим захидлаар мэдээлэл илгээсэн </contrib>
        </author>
      </authorgroup>
      <authorgroup>
        <author>
          <firstname>Лодойсамбын</firstname>
          <surname>Баянзул</surname>
          <contrib>Орчуулсан </contrib>
        </author>
      </authorgroup>

    </sect1info>
    <title>Өөрийн Захидал Дамжуулах Агентийг Солих нь</title>
    <indexterm>
      <primary>цахим захидал</primary>
      <secondary>mta-г өөрчлөх</secondary>
    </indexterm>

    <para>Урьд нь дурдсан шиг, FreeBSD дотор <application>sendmail</application> нь 
MTA (Mail Transfer Agent буюу Захидал Дамжуулах Агент) байдлаар аль хэдийн 
суучихсан ирдэг. Тиймээс анхдагч байдлаар, таны явуулж байгаа болон 
ирж байгаа захидлыг хариуцан ажиллаж байгаа.</para>

    <para>Гэвч янз бүрийн шалтгаанаар зарим 
системийн администраторууд системийнхээ MTA-г солих хүсэлтэй байдаг. 
Шалтгаан нь өөр MTA-г хэрэглэж үзэх хүсэлдээ хөтлөгдсөнөөс, эсвэл бусад захидал 
дамжуулагчдаас улбаалсан тусгай чадвар эсвэл 
багц шаардлагатай болох зэрэг янз бүр байдаг. 
Баярлууштай нь, ямар ч шалтгаантай байсан гэсэн FreeBSD нь өөрчлөлт хийхэд амархан 
байх боломжийг олгодог.</para>

    <sect2>
      <title>Шинэ MTA суулгах нь</title>

      <para>Танд олон төрлийн MTA-н сонголт байна. Өргөн сонголттой 
<link linkend="ports">FreeBSD Портуудын Цуглуулга</link>ас эхлэх нь хамгийн зөв эхлэл 
болно. Мэдээж FreeBSD дээр ажиллуулж чадаж л байвал, та хүссэн газраасаа 
хүссэн MTA-аа суулгах эрхтэй.</para>

      <para>Эхлээд шинэ MTA-аа суулгаж эхлэх хэрэгтэй. Нэгэнт суулгасны дараа, 
шинэ програм таны хэрэгцээг үнэхээр хангаж чадаж байна уу гэдгийг 
шалгах, <application>sendmail</application>-г бүрэн солихоос өмнө шинэ програмын 
тохиргоог хийх боломжтой. Ингэх явцад таны суулгаж байгаа 
шинэ програм <filename>/usr/bin/sendmail</filename> зэрэг системийн хоёртын 
файлуудыг дарж бичихгүй байхыг анхаарч байх хэрэгтэй. 
Үгүй бол, таныг тохиргоо хийхээс чинь өмнө захидлын шинэ програм 
чинь ажиллаж эхлэх болно.</para>

      <para>Сонгож авсан MTA програмынхаа тохиргоог хийхдээ тухайн 
програмын өөрийн холбогдох баримт бичгүүдийг үзнэ үү.</para>
    </sect2>

    <sect2 id="mail-disable-sendmail">
      <title><application>sendmail</application>-г идэвхгүй болгох нь</title>

	<warning>
	  <para>Хэрэв та <application>sendmail</application>-н гадагш захидал илгээх 
үйлчилгээг идэвхгүй болгосон бол, өөр захидал түгээх системээр 
түүнийг орлуулах нь чухал юм. Хэрэв тэгэхгүй бол &man.periodic.8; 
гэх мэт системийн функцууд өөрсдийн үр дүнгээ цахим захидлаар 
илгээх боломжгүй болж, хэвийн үйл ажиллагаа нь доголдох болно. 
Системийн нилээд хэсэгт <application>sendmail</application> ашигладаг байхаар 
бодолцсон байгаа. Хэрэв <application>sendmail</application>-г идэвхгүй болгосны 
дараа програмууд <application>sendmail</application>-н 
хоёртын файлыг ашиглан захидлыг үргэлжлүүлэн илгээсээр байвал, 
тэдгээр захидлууд <application>sendmail</application>-н идэвхгүй дараалалд орж, 
хэзээ ч хүрэх газраа очиж чадахгүй болно.</para>
	</warning>

	<para><application>sendmail</application>-г бүхэлд нь идэвхгүй болгохын тулд, 
гадагш захидал илгээх үйлчилгээг оруулаад, дараах мөрүүдийг:</para>

	  <programlisting>sendmail_enable="NO"
sendmail_submit_enable="NO"
sendmail_outbound_enable="NO"
sendmail_msp_queue_enable="NO"</programlisting>

	  <para><filename>/etc/rc.conf</filename> файлд оруулж өгөх шаардлагатай.</para>

	<para>Хэрэв та <application>sendmail</application>-н зөвхөн захидал хүлээн авах 
үйлчилгээг идэвхгүй болгох хүсэлтэй бол, дараах мөрийг:</para>

	  <programlisting>sendmail_enable="NO"</programlisting>

	<para><filename>/etc/rc.conf</filename> файлд оруулж өгөх шаардлагатай. 
<application>sendmail</application>-н эхлэл тохируулгуудын 
талаар дэлгэрэнгүй мэдээллийг &man.rc.sendmail.8; заавар хуудаснаас 
үзнэ үү.</para>
    </sect2>

    <sect2>
      <title>Өөрийн шинэ MTA-г систем ачаалах үед ажиллуулах нь</title>

      <para>postfix-д зориулсан дараах жишээн дээрх шиг тохиргооны мөрийг 
	<filename>/etc/rc.conf</filename> файлд нэмэн шинэ MTA-г ачаалах үед
	эхлүүлж болно.</para>

      <screen>&prompt.root; echo '<replaceable>postfix</replaceable>_enable=<quote>YES</quote>' &gt;&gt; /etc/rc.conf</screen>

      <para>MTA нь одоо автоматаар ачаалах үед эхлэх болно.</para>

    </sect2>

    <sect2>
      <title><application>sendmail</application>-г Системийн Анхдагч Захидал Түгээгч болгох нь</title>

      <para><application>sendmail</application> нь &unix; системүүдийн 
стандарт програм байхаар хаа сайгүй хэрэглэгддэг болохоор, 
зарим програм түүнийг системд аль хэдийн суучихсан, ажиллаж 
байгаа гэж тооцсон байдаг. Тиймээс, бусад олон MTA-ууд 
<application>sendmail</application>-н тушаалын мөрний интерфэйстэй нийцтэй 
шийдлүүдийг гаргадаг бөгөөд энэ нь <application>sendmail</application>-н 
оронд тэдгээр MTA-уудыг ашиглах боломжтой болгодог.</para>

      <para>Тиймээс, хэрэв өөр захидал түгээгч хэрэглэж байгаа бол, 
програмууд <application>sendmail</application>-н <filename>/usr/bin/sendmail</filename> 
гэх зэрэг хоёртын файлын оронд таны сонгосон захидал 
түгээгчийг хэрэглэж байгаа эсэхийг нягтлаарай. Аз болоход, 
FreeBSD танд энэ ажлыг хийж өгөх &man.mailwrapper.8; гэсэн системийг 
агуулж байдаг.</para>

      <para><application>sendmail</application> нь анх суусан байдлаараа ажиллаж 
байх үед, <filename>/etc/mail/mailer.conf</filename> файл дотор дараах мөрүүдийг 
харах болно:</para>

<programlisting>sendmail	 /usr/libexec/sendmail/sendmail
send-mail	/usr/libexec/sendmail/sendmail
mailq		/usr/libexec/sendmail/sendmail
newaliases	/usr/libexec/sendmail/sendmail
hoststat	/usr/libexec/sendmail/sendmail
purgestat	/usr/libexec/sendmail/sendmail</programlisting>

      <para>Энэ нь, эдгээр өргөн хэрэглэгддэг тушаалуудын 
аль нэгийг (<filename>sendmail</filename> өөрөө гэх мэт) ажиллуулахад, 
систем үнэн хэрэгтээ <filename>sendmail</filename> нэртэй захидлын 
дундын хянагчийн хуулбарыг дуудна гэсэн үг юм. Энэ захидлын 
дундын хянагч <filename>mailer.conf</filename> файлыг шалгаж, 
<filename>/usr/libexec/sendmail/sendmail</filename>-г оронд нь ажиллуулна. Энэ системийн тусламжтай 
дээрх анхдагч <filename>sendmail</filename> функцүүдийг дуудахад 
үнэндээ ажиллах хоёртын файлуудыг солиход амархан болгодог.</para>

      <para>Тиймээс хэрэв та <application>sendmail</application>-н оронд 
<filename>/usr/local/supermailer/bin/sendmail-compat</filename>-г ажиллуулах хүсэлтэй бол, 
<filename>/etc/mail/mailer.conf</filename> файлыг дараах байдлаар засаж бичих хэрэгтэй:</para>

<programlisting>sendmail	 /usr/local/supermailer/bin/sendmail-compat
send-mail	/usr/local/supermailer/bin/sendmail-compat
mailq		/usr/local/supermailer/bin/mailq-compat
newaliases	/usr/local/supermailer/bin/newaliases-compat
hoststat	/usr/local/supermailer/bin/hoststat-compat
purgestat	/usr/local/supermailer/bin/purgestat-compat</programlisting>

	</sect2>

	<sect2>
	  <title>Төгсгөл</title>

	<para>Өөрийн хүссэнээр бүх зүйлсийг тохируулсны дараа, 
нэгэнт хэрэггүй болсон <application>sendmail</application> процессуудыг 
зогсоож шинэ програмд хамаарах процессуудыг эхлүүлэх, 
эсвэл зүгээр л системийг дахин ачаалах хэрэгтэй. 
Системийг дахин ачаалах нь систем ачаалах явцад таны шинэ MTA-г 
ачаалах тохиргоог зөв хийсэн эсэхээ шалгахад тань тусална.</para>

      </sect2>
    </sect1>

  <sect1 id="mail-trouble">
    <title>Гэмтэл саатлыг арилгах нь</title>
    <indexterm>
      <primary>цахим захидал</primary>
      <secondary>гэмтэл саатлыг арилгах</secondary>
    </indexterm>

    <qandaset>
      <qandaentry>
        <question>
	<para>Яагаад би өөрийн сүлжээнд байгаа хостуудын хувьд FQDN-г хэрэглэх ёстой вэ?</para>
	</question>

	<answer>
	<para>Үнэндээ тухайн хост өөр домэйнд байгаа 
болохыг та анзаарах байх; жишээ нь, хэрэв та өөрөө 
<hostid role="fqdn">foo.bar.edu</hostid> домэйнд байгаа бөгөөд <hostid 
role="domainname">bar.edu</hostid> домэйнд байгаа <hostid>mumble</hostid> хост руу 
хандах хүсэлтэй бол түүнийг зүгээр <hostid>mumble</hostid> гэхийн оронд 
<hostid role="fqdn">mumble.bar.edu</hostid> гэсэн fully-qualified domain name буюу бүрэн-баталгаажсан 
домэйн нэрээр нь заах хэрэгтэй.</para>

	<indexterm><primary>BIND</primary></indexterm>
	<para>Урьд нь, BSD BIND тайлагчийн хувьд дээрх шиг хэрэглэж болдог байсан. 
Гэвч FreeBSD-тэй хамт ирдэг <application>BIND</application>-н одоогийн хувилбар дээр 
өөрийн оршин байгаа домэйноос бусад бүрэн баталгаажаагүй домэйн нэрийн хувьд 
анхдагч товчилсон нэрүүдийг хэрэглэж болохгүй болсон. Тиймээс баталгаажаагүй 
<hostid>mumble</hostid> гэсэн хостыг эсвэл <hostid role="fqdn">mumble.foo.bar.edu</hostid> гэж ойлгоно, 
эсвэл эх домэйнд хайх болно.</para>

        <para>Хайлт цааш <hostid role="domainname">mumble.bar.edu</hostid>, ба 
<hostid role="domainname">mumble.edu</hostid> болж үргэлжлэх бөгөөд энэ нь санаснаас шал өөр 
зүйл болон хувирна. Үүнийг яагаад буруу үйлдэл, бүр аюулгүй байдлын цоорхой 
гэж тооцох болсныг RFC 1535-с олж үзээрэй.</para>

        <para>Дээрх байдлаас гарахын тулд, өөрийн <filename>/etc/resolv.conf</filename> файл дотор:

          <programlisting>search foo.bar.edu bar.edu</programlisting>

          гэсэн мөрийг:

          <programlisting>domain foo.bar.edu</programlisting>

          мөрийн оронд бичих хэрэгтэй. Гэхдээ, хайлт хийх дэс дараалал нь 
RFC 1535-д заасны дагуу <quote>дотоод болон гадаад удирдлагын хязгаар</quote>ыг 
давах ёсгүйг анхаараарай.</para>
	</answer>
      </qandaentry>

      <indexterm>
	<primary>MX бичлэг</primary>
      </indexterm>

      <qandaentry>
	<question>
	<para><application>sendmail</application> <errorname>захидал өөр дээр минь тойроод ирж байна</errorname> гээд байна</para>
	</question>

	<answer>
	<para>Энэ асуултанд <application>sendmail</application>-н FAQ дараах байдалтай хариулсан 
байгаа:</para>

        <programlisting>I'm getting these error messages:

553 MX list for domain.net points back to relay.domain.net
554 &lt;user@domain.net&gt;... Local configuration error

How can I solve this problem?

You have asked mail to the domain (e.g., domain.net) to be
forwarded to a specific host (in this case, relay.domain.net)
by using an MX record, but the relay machine does not recognize
itself as domain.net. Add domain.net to /etc/mail/local-host-names
[known as /etc/sendmail.cw prior to version 8.10]
(if you are using FEATURE(use_cw_file)) or add <quote>Cw domain.net</quote>
to /etc/mail/sendmail.cf.</programlisting>

        <para><application>sendmail</application>-н FAQ-г <ulink url="http://www.sendmail.org/faq/"></ulink> хаягаар 
орж үзэж болох ба хэрэв та захидлын серверийнхээ тохиргоогоор нилээд 
<quote>оролдох</quote> бол эхлээд үүнийг уншихыг зөвлөж байна.</para>
	</answer>
      </qandaentry>

      <indexterm><primary>PPP</primary></indexterm>
      <qandaentry>
        <question>
	<para>Утсаар залгаж холбогддог PPP хост дээр захидлын серверийг хэрхэн 
ажиллуулах вэ?</para>
	</question>

	<answer>
	<para>Та LAN-д байгаа FreeBSD машиныг Интернэтэд холбох хүсэлтэй байна. 
Энэ FreeBSD машин тухайн LAN-ий хувьд захидлын гарц байх болно. PPP холболт бол тусгайлан 
бий болгосон зориулагдсан холболт биш юм.</para>

	<indexterm><primary>UUCP</primary></indexterm>
	<indexterm>
	  <primary>MX бичлэг</primary>
	</indexterm>

	<para>Үүний тулд хоёр арга байна. Нэг арга нь UUCP ашиглах юм.</para>

	<para>Нөгөө арга нь таны домэйны хувьд хоёрдогч 
MX үйлчилгээг үзүүлэх байнгын холболттой Интернэт сервертэй болох явдал юм. 
Жишээлбэл, хэрэв танай байгууллагын 
домэйн нэр <hostid role="domainname">example.com</hostid> бөгөөд танай Интернэтийн үйлчилгээ 
үзүүлэгч танай домэйны хувьд хоёрдогч MX үйлчилгээг үзүүлэхээр 
<hostid role="domainname">example.net</hostid> домэйныг дараах байдалтай тохируулжээ:</para>

	<programlisting>example.com.          MX        10      example.com.
                      MX        20      example.net.</programlisting>

	<para>Зөвхөн ганц хост эцсийн захидал хүлээн авагч байх ёстой 
(<hostid role="domainname">example.com</hostid> хостын 
<filename>/etc/mail/sendmail.cf</filename> файлд <literal>Cw example.com</literal>-г нэмнэ).</para>

	<para>Захиа явуулах гэж байгаа <command>sendmail</command> захидлыг явуулахаар 
оролдох үед эхлээд модем холбоосоор тантай (<hostid role="domainname">example.com</hostid>) 
холбогдохыг оролдоно. Та Интернэтэд холбогдоогүй байгаа учраас 
ихэнх тохиолдолд тантай холбогдож чадахгүй. Энэ тохиолдолд, 
<application>sendmail</application> автоматаар хоёрдогч MX сервер рүү, өөрөөр хэлбэл 
танай Интернэтийн үйлчилгээ үзүүлэгчид (<hostid role="domainname">example.net</hostid>) илгээх болно. 
Хоёрдогч MX сервер танай сервертэй холбогдохыг тогтмол оролдох 
ба ийм замаар анхдагч MX хост руу (<hostid role="domainname">example.com</hostid>) захидлыг хүргэх 
болно.</para>

	<para>Та дор үзүүлсэнтэй төстэй нэвтрэх скриптийг хэрэглэхийг хүсэж 
болзошгүй:</para>

	<programlisting>#!/bin/sh
# Put me in /usr/local/bin/pppmyisp
( sleep 60 ; /usr/sbin/sendmail -q ) &amp;
/usr/sbin/ppp -direct pppmyisp</programlisting>

	<para>Хэрэв та хэрэглэгчийн хувьд тусдаа нэвтрэх скрипт 
үүсгэх гэж байгаа бол дээрх скрипт дээр байгаагийн оронд 
<command>sendmail -qRexample.com</command>-г хэрэглэж болох юм. Энэ нь 
таны захидлын дараалалд байгаа <hostid role="domainname">example.com</hostid>-д очих 
бүх захидлыг тэр дор нь боловсруулахыг шаардана.</para>

	<para>Байдлыг хэрхэн цааш сайжруулахыг дор үзнэ үү:</para>

	<para>&a.isp;-с хулгайлсан зурвас.</para>

	<programlisting>&gt; we provide the secondary MX for a customer. The customer connects to
&gt; our services several times a day automatically to get the mails to
&gt; his primary MX (We do not call his site when a mail for his domains
&gt; arrived). Our sendmail sends the mailqueue every 30 minutes. At the
&gt; moment he has to stay 30 minutes online to be sure that all mail is
&gt; gone to the primary MX.
&gt;
&gt; Is there a command that would initiate sendmail to send all the mails
&gt; now? The user has not root-privileges on our machine of course.

In the <quote>privacy flags</quote> section of sendmail.cf, there is a
definition Opgoaway,restrictqrun

Remove restrictqrun to allow non-root users to start the queue processing.
You might also like to rearrange the MXs. We are the 1st MX for our
customers like this, and we have defined:

# If we are the best MX for a host, try directly instead of generating
# local config error.
OwTrue

That way a remote site will deliver straight to you, without trying
the customer connection.  You then send to your customer.  Only works for
<quote>hosts</quote>, so you need to get your customer to name their mail
machine <quote>customer.com</quote> as well as
<quote>hostname.customer.com</quote> in the DNS.  Just put an A record in
the DNS for <quote>customer.com</quote>.</programlisting>
        </answer>
      </qandaentry>

      <qandaentry>
        <question>
	  <para>Бусад хостоос захидал явуулахад яагаад 
<errorname>Relaying Denied</errorname> гэсэн алдаа байнга гараад байна вэ?</para>
	</question>

	<answer>
	  <para>FreeBSD-н анхдагч суулгацад <application>sendmail</application>-г 
зөвхөн ажиллаж байгаа хостоосоо захидал илгээдэг байхаар 
тохируулсан байдаг. Жишээ нь,  хэрэв нэг <acronym>POP</acronym> сервер байгаа бол, 
хэрэглэгчид сургууль, ажил, эсвэл бусад алсын байршлаас захидлаа шалгах 
боломжтой байх болно. Гэвч гаднаас захидал илгээж чадахгүй хэвээр байх 
болно. Ихэвчлэн, оролдого хийснээс хэдэн хормын дараа, 
<application>MAILER-DAEMON</application> <errorname>5.7 Relaying Denied</errorname> гэсэн алдааны мэдээлэлтэй 
захидлыг илгээх болно.</para>

	  <para>Энэ байдлаас гарах хэд хэдэн зам байна. 
Хамгийн энгийн арга бол өөрийн ISP-н хаягийг <filename>/etc/mail/relay-domains</filename>-д 
байгаа өртөөлөх (дамжуулах) домэйнуудын файлд бичих хэрэгтэй. Үүнийг хийх амархан 
аргыг үзүүлэв:</para>

	  <screen>&prompt.root; <userinput>echo "your.isp.example.com" &gt; /etc/mail/relay-domains</userinput></screen>

	  <para>Энэ файлыг үүсгэсэн эсвэл зассаны дараа, 
<application>sendmail</application>-г дахин эхлүүлэх хэрэгтэй. Хэрэв та 
сервер хариуцагч байгаад, захидлыг дотооддоо явуулах хүсэлгүй, эсвэл 
өөр машин дээрээс эсвэл бүр өөр ISP-с хулганы товч дараад л хийчих хялбар 
систем ашиглах хүсэлтэй байгаа бол энэ арга яг тохирно. 
Энэ арга ганцхан эсвэл хоёрхон захидлын бүртгэл үүсгэсэн тохиолдолд мөн 
тус болно. Хэрэв дээрх файлд олон тооны хаяг нэмэх шаардлагатай бол, 
зүгээр өөрийн дуртай засварлагч програмаар нээгээд домэйнуудаа 
мөр болгонд нэг байхаар нэмж бичих хэрэгтэй:</para>

	  <programlisting>your.isp.example.com
other.isp.example.net
users-isp.example.org
www.example.org</programlisting>

	  <para>Одоо, энэ жагсаалтад (хэрэглэгч таны систем дээр бүртгэлтэй 
гэсэн нөхцөлтэйгөөр) байгаа ямар ч хостоос, 
таны системээр дамжуулан явуулсан захидал амжилттай явах болно. 
Энэ бол хэрэглэгчиддээ таны системээр дамжуулан SPAM явуулах 
боломжийг олголгүйгээр, таны системээс алсаас захидал 
илгээх боломжийг олгох үнэхээр сайн арга юм.</para>

	</answer>
      </qandaentry>
    </qandaset>
  </sect1>

  <sect1 id="mail-advanced">
    <title>Дээд түвшний сэдвүүд</title>

    <para>Энэ хэсэг захидлын серверийн тохиргоо, 
бүхэл домэйнд зориулсан захидлын серверийг 
зохион байгуулах зэрэг илүү гүнзгий сэдвүүдийг хамрах болно.</para>

    <sect2 id="mail-config">
      <title>Үндсэн Тохиргоо</title>
      <indexterm>
        <primary>цахим захидал</primary>
        <secondary>тохиргоо</secondary>
      </indexterm>

      <para>Хэрэв та өөрийн нэрийн сервер ажиллуулж байгаа эсвэл 
<filename>/etc/resolv.conf</filename>-г тохируулсан л бол гадаад хостууд руу 
захидал илгээж чадах ёстой. Хэрэв та өөрийн хостод хаягласан 
захидлыг таны өөрийн FreeBSD машин дээрх MTA (жишээ нь <application>sendmail</application>) 
хүлээж авдаг болгохыг хүсэж байгаа бол, дараах хоёр арга зам байна:</para>

      <itemizedlist>
        <listitem>
          <para>Өөрөө нэрийн сервер ажиллуулаад, өөрийн домэйн нэр авах. 
Жишээлбэл, <hostid role="domainname">FreeBSD.org</hostid></para>
        </listitem>

        <listitem>
          <para>Захидлыг шууд өөрийн хост дээр хүлээж авдаг байх. 
Үүний тулд өөрийн машины одоогийн DNS нэрээр захидлыг хүлээн авах. Жишээлбэл, 
<hostid role="fqdn">example.FreeBSD.org</hostid>.</para>
        </listitem>
      </itemizedlist>

      <indexterm><primary>SMTP</primary></indexterm>
      <para>Дээрхээс алийг нь ч сонгосон бай, өөр дээрээ захидал шууд хүлээн авдаг 
байхын тулд байнгын статик IP хаягтай байх ёстой (ихэнх PPP залгадаг 
холболтынх шиг динамик хаяг биш). Хэрэв галт ханын цаана байгаа бол, 
галт хана тань руу чиглэсэн SMTP урсгалыг нэвтрүүлэх ёстой. 
Захидлыг шууд өөрийн хост дээр хүлээн авахын тулд, 
дараах хоёр нөхцөлийн аль нэгийг хангасан байх ёстой:</para>

      <itemizedlist>
        <indexterm><primary>MX record</primary></indexterm>
        <listitem>
          <para>Таны DNS дээрх (хамгийн бага дугаартай) MX бичлэг 
таны хостын IP хаяг руу заасан байх ёстой.</para>
        </listitem>

        <listitem>
          <para>Таны DNS дээр таны хостын IP хаяг руу заасан MX бичлэг байх ёсгүй.</para>
        </listitem>
      </itemizedlist>

      <para>Дээр дурдсаны аль нэгийг хангасан байхад, 
та өөрийн хост дээр захидал хүлээн авах боломжтой болно.</para>

      <para>Туршаад үзээрэй:</para>

      <screen>&prompt.root; <userinput>hostname</userinput>
example.FreeBSD.org
&prompt.root; <userinput>host example.FreeBSD.org</userinput>
example.FreeBSD.org has address 204.216.27.XX</screen>

      <para>Хэрэв дээрхтэй адил хариу гарч байвал, 
<email role="nolink">yourlogin@example.FreeBSD.org</email> хаяг руу илгээсэн захидал 
ямар ч асуудалгүй хүрэх газраа очих ёстой (<hostid role="fqdn">example.FreeBSD.org</hostid> 
дээр <application>sendmail</application> зөв ажиллаж байгаа гэж үзэв).</para>

      <para>Үүний оронд доор дурдсантай адил хариу авбал:</para>

      <screen>&prompt.root; <userinput>host example.FreeBSD.org</userinput>
example.FreeBSD.org has address 204.216.27.XX
example.FreeBSD.org mail is handled (pri=10) by hub.FreeBSD.org</screen>

      <para>таны хост руу илгээсэн бүх захидлууд 
(<hostid role="fqdn">example.FreeBSD.org</hostid>) шууд таны хост руу илгээгдэхийн оронд 
<hostid>hub</hostid> дээр адилхан хэрэглэгчийн нэр дээр цугларах болно.</para>

      <para>Дээрх мэдээллийг DNS сервер зохицуулан ажиллана. DNS-н 
<emphasis>M</emphasis>ail e<emphasis>X</emphasis>change буюу MX бичлэгт захидлыг хааш нь 
чиглүүлэх талаар мэдээлэл агуулагддаг. Хэрэв ямар ч MX бичлэг байхгүй бол, 
захидлыг IP хаягаар нь хостод дамжуулна.</para>

      <para><hostid role="fqdn">freefall.FreeBSD.org</hostid>-н MX бичлэг дараах байдалтай байна:</para>

      <programlisting>freefall		MX	30	mail.crl.net
freefall		MX	40	agora.rdrop.com
freefall		MX	10	freefall.FreeBSD.org
freefall		MX	20	who.cdrom.com</programlisting>

      <para>Таны харж байгаачлан, <hostid>freefall</hostid>-н хувьд олон MX бичлэг 
байна. Хамгийн бага MX дугаартай хост ажиллаж байвал 
захидлыг шууд хүлээж авах болно; хэрэв ямар нэг байдлаар 
энд хост руу хандах боломжгүй байвал бусад нь (заримдаа <quote>нөөц MX-үүд</quote> гэж 
нэрлэх нь бий) түр хугацаанд захидлыг хүлээж аваад, 
арай бага дугаартай хосттой холбоо тогтоох боломжтой болмогц 
түүн рүү дамжуулах гэм мэтчилэн явсаар, эцэст нь хамгийн бага дугаартай 
хост захидлыг хүлээн авах болно.</para>

      <para>Бусад MX-үүд таныхаас тусдаа Интернэт 
холболттой байх шаардлагатай. Таны ISP эсвэл өөр найрсаг 
газрууд танд энэ үйлчилгээг үзүүлэхэд асуудал байх ёсгүй.</para>
    </sect2>

    <sect2 id="mail-domain">
      <title>Таны домэйнд хаягласан Захидал</title>

      <para><quote>Захидлын хост</quote> (захидлын сервер гэж нэрлэх нь бий) 
зохион байгуулахын тулд, янз янзын ажлын машин руу 
явуулсан захидлыг энэ сервер рүү чиглүүлсэн байх ёстой. 
Үндсэндээ, өөрийн домэйнд байгаа ямар ч хостын захидлыг 
<quote>нэхэмжилж аваад</quote>(энэ тохиолдолд <hostid role="fqdn">*.FreeBSD.org</hostid>) 
түүнийг өөрийн захидлын сервер рүү дахин чиглүүлнэ гэсэн үг юм. 
Ингэснээр таны хэрэглэгчдийн захидлууд эзэн захидлын сервер дээр 
цуглах болно.</para>

      <indexterm><primary>DNS</primary></indexterm>
      <para>Үүнийг хялбар болгохын тулд, нэг 
<emphasis>хэрэглэгчийн нэр</emphasis>тэй хэрэглэгчийн данс 
хоёр машин дээр хоёулан дээр нь байх шаардлагатай. 
Үүнийг хийхдээ &man.adduser.8;-г ашиглаарай.</para>

      <para>Таны хэрэглэх захидлын хост 
таны сүлжээнд байгаа бүх ажлын машины хувьд 
томилж гаргасан захидал солилцогч байх ёстой. 
Энэ тохиргоог DNS сервер дээр дараах байдалтай хийнэ:</para>

      <programlisting>example.FreeBSD.org	A	204.216.27.XX		; Workstation
			MX	10 hub.FreeBSD.org	; Mailhost</programlisting>

      <para>Энэ нь ажлын машинд хаягласан 
захидлыг, A бичлэг хааш нь заахаас үл хамааран 
захидлын хост руу дахин чиглүүлэх болно. Ингэснээр захидал 
MX хост руу илгээгдэх болно.</para>

      <para>Та DNS сервер ажиллуулдаггүй бол дээр дурдсаныг 
өөрөө бие даан хийх боломжгүй юм. Хэрэв та 
DNS сервер ажиллуулдаггүй, эсвэл DNS сервер ажиллуулах 
боломжгүй бол өөрийн ISP эсвэл DNS үйлчилгээ үзүүлдэг газартаа 
хандаарай.</para>

      <para>Хэрэв та хийсвэр захидал байршуулах үйлчилгээ үзүүлдэг бол, 
дараах мэдээлэл тус болно. Таны үйлчлүүлэгч өөрийн 
домэйн нэртэй, тухайлбал <hostid role="domainname">customer1.org</hostid>, ба та 
<hostid role="domainname">customer1.org</hostid>-д хаягласан бүх захидлыг өөрийн захидлын 
хост <hostid role="fqdn">mail.myhost.com</hostid> руу чиглүүлэх хүсэлтэй байна гэж бодъё. 
Тэгвэл таны DNS дээрх бичлэг дараах байдалтай байх болно:</para>

      <programlisting>customer1.org		MX	10	mail.myhost.com</programlisting>

      <para><hostid role="domainname">customer1.org</hostid> домэйны зөвхөн захидлыг 
хариуцахын тулд A бичлэг <emphasis>шаардлагагүй</emphasis>.</para>

      <note>
	<para>A бичлэг байхгүй бол <hostid role="domainname">customer1.org</hostid> руу 
ping хийх боломжгүй болохыг анхаарна уу.</para>
      </note>

      <para>Хамгийн сүүлд хийх нэг зүйл бол 
өөрийн захидлын хост дээрх <application>sendmail</application>-д 
ямар ямар домэйнууд ба/эсвэл хостуудад хаягласан 
захидлыг хүлээн авахыг хэлж өгөх явдал юм. 
Үүнийг хэд хэдэн өөр аргаар хийж болно. 
Дараах аргуудын алийг ч хэрэглэж болно:</para>

      <itemizedlist>
        <listitem>
	  <para>Хэрэв та <literal>FEATURE(use_cw_file)</literal>-г хэрэглэж байгаа бол 
хостуудыг <filename>/etc/mail/local-host-names</filename> файл дотор 
нэмж бичих.</para>
	</listitem>

	<listitem>
	  <para>Хэрэв та <application>sendmail</application> 8.10 эсвэл 
түүнээс хойно гарсан хувилбарыг хэрэглэж байгаа бол 
<literal>Cwyour.host.com</literal> гэсэн мөрийг <filename>/etc/sendmail.cf</filename> эсвэл 
<filename>/etc/mail/sendmail.cf</filename> файл дотор бичих.</para>
	</listitem>
      </itemizedlist>
    </sect2>
  </sect1>

  <sect1 id="SMTP-UUCP">
    <sect1info>
      <authorgroup>
        <author>
	  <firstname>Цагаанхүүгийн</firstname>
	  <surname>Ганболд</surname>
	  <contrib>Орчуулсан  </contrib>
        </author>
      </authorgroup>
    </sect1info>
  <title>UUCP-тэй SMTP</title>

    <para>FreeBSD-тэй цуг ирдэг <application>sendmail</application>-ийн тохиргоо нь 
	Интернэт рүү шууд холбогддог сайтуудад зориулагдсан юм. Өөрсдийн захидлыг UUCP-ээр 
	солилцохыг хүссэн сайтууд <application>sendmail</application>-ийн өөр 
	тохиргооны файлыг суулгах ёстой.</para>

    <para><filename>/etc/mail/sendmail.cf</filename>-г гараар тохируулах нь 
	илүү нарийн, нэмэлт сэдэв юм. <application>sendmail</application> 
	хувилбар 8 нь тохиргооны файлуудаа &man.m4.1; урьдчилан процесс хийлтээр 
	үүсгэдэг. Жинхэнэ тохиргоо нь илүү дээд хийсвэрлэлтийн түвшинд болдог. 
	&man.m4.1;-ийн тохиргооны файлуудыг <filename>/usr/share/sendmail/cf</filename> 
	сангаас олж болно. <filename>cf</filename> сан дахь 
	<filename>README</filename> файл нь &man.m4.1; тохиргооны 
	үндсэн танилцуулга болон үйлчилдэг.</para>

    <para>UUCP хүргэлтийг дэмжих хамгийн шилдэг арга бол <literal>mailertable</literal> 
	боломжийг ашиглах явдал юм. Энэ нь чиглүүлэлтийн шийдвэрүүд гаргахдаа 
	<application>sendmail</application>-ийн ашигладаг мэдээллийн баазыг 
	үүсгэдэг.</para>

    <para>Эхлээд та өөрийн <filename>.mc</filename> файлыг үүсгэх хэрэгтэй. 
	<filename>/usr/share/sendmail/cf/cf</filename> сан цөөн хэдэн 
	жишээнүүдийг агуулдаг. Таныг өөрийнхөө файлыг <filename>foo.mc</filename> 
	гэж нэрлэсэн гэж үзэх юм бол түүнийг зөв <filename>sendmail.cf</filename> 
	болгож хөрвүүлэхийн тулд хийх зүйл тань:</para>

    <screen>&prompt.root; <userinput>cd /etc/mail</userinput>
&prompt.root; <userinput>make foo.cf</userinput>
&prompt.root; <userinput>cp foo.cf /etc/mail/sendmail.cf</userinput></screen>

    <para>Ердийн <filename>.mc</filename> файл иймэрхүү харагдаж болно:</para>

    <programlisting>VERSIONID(`<replaceable>Your version number</replaceable>') OSTYPE(bsd4.4)

FEATURE(accept_unresolvable_domains)
FEATURE(nocanonify)
FEATURE(mailertable, `hash -o /etc/mail/mailertable')

define(`UUCP_RELAY', <replaceable>your.uucp.relay</replaceable>)
define(`UUCP_MAX_SIZE', 200000)
define(`confDONT_PROBE_INTERFACES')

MAILER(local)
MAILER(smtp)
MAILER(uucp)

Cw    <replaceable>your.alias.host.name</replaceable>
Cw    <replaceable>youruucpnodename.UUCP</replaceable></programlisting>

    <para><literal>accept_unresolvable_domains</literal>,
      <literal>nocanonify</literal>, болон
      <literal>confDONT_PROBE_INTERFACES</literal> боломжуудыг 
	агуулсан мөрүүд нь захидал хүргэх явцын үед DNS-ийг ашиглуулахгүй байх болно. 
	<literal>UUCP_RELAY</literal> гэдэг нь UUCP хүргэлтийг дэмжихэд 
	шаардлагатай. .UUCP псевдо домэйн хаягуудтай ажиллаж чаддаг 
	Интернэтийн хостын нэрийг тавих хэрэгтэй; та өөрийн ISP-ийн захидал 
	өртөөлөгчийг энд бараг оруулах байх даа.</para>

    <para>Ингэснийхээ дараа танд <filename>/etc/mail/mailertable</filename> 
	файл хэрэгтэй болно. Хэрэв танд таны бүх захидлуудад ашиглагддаг, гадагш холбогдсон 
	зөвхөн ганц холболт байвал дараах файл хангалттай байх болно:</para>

    <programlisting>#
# makemap hash /etc/mail/mailertable.db &lt; /etc/mail/mailertable
.                             uucp-dom:<replaceable>your.uucp.relay</replaceable></programlisting>

    <para>Арай илүү төвөгтэй жишээ иймэрхүү харагдаж болно:</para>

    <programlisting>#
# makemap hash /etc/mail/mailertable.db &lt; /etc/mail/mailertable
#
horus.interface-business.de   uucp-dom:horus
.interface-business.de        uucp-dom:if-bus
interface-business.de         uucp-dom:if-bus
.heep.sax.de                  smtp8:%1
horus.UUCP                    uucp-dom:horus
if-bus.UUCP                   uucp-dom:if-bus
.                             uucp-dom:</programlisting>


    <para>Эхний гурван мөр нь домэйн руу хаяглагдсан захидал анхдагч чиглүүлэлт 
	рүү биш, харин хүргэх замыг <quote>товчлохын</quote> тулд UUCP хөрш рүү илгээгдэхийг 
	зохицуулдаг. Дараагийн мөр нь локал Ethernet домэйн руу хаяглагдсан, 
	SMTP ашиглан хүргэгдэж болох захидалтай ажилладаг. Эцэст нь 
	.UUCP псевдо домэйн маягаар бичигдсэн UUCP хөршүүд  
	<literal><replaceable>uucp-neighbor
      </replaceable>!<replaceable>recipient</replaceable></literal>-д 
	анхдагч дүрмүүдийг дарж бичих боломжийг олгохын тулд дурдагдсан. 
	Сүүлийн мөр нь үргэлж нэг цэг байдаг. Энэ нь UUCP хүргэлтээр дэлхий рүү гарах 
	таны универсал захидлын гарц болон үйлчилдэг UUCP хөрш рүү гаргана гэж 
	бусад бүгдийн хувьд зааж өгч байна. <literal>uucp-dom:</literal> түлхүүр 
	үгийн ард байрлах бүх цэгийн нэрс зөв UUCP хөршүүд байх ёстой бөгөөд 
	та тэдгээрийг <literal>uuname</literal> тушаал ашиглан шалгаж болно.</para>

    <para>Санаж явах зүйл бол энэ файл нь ашиглагдахаасаа өмнө DBM мэдээллийн баазын 
	файл руу хөрвүүлэгдэх шаардлагатай байдаг. Үүнийг хийх тушаалын мөрийг 
	<filename>mailertable</filename> файлын дээр хэсэгт тайлбар маягаар 
	хийх нь зүйтэй. Өөрийн <filename>mailertable</filename> файлыг 
	өөрчлөх бүртээ та энэ тушаалыг ажиллуулах ёстой юм.</para>

    <para>Төгсгөлийн зөвлөгөө: хэрэв та тухайн нэг захидлын чиглүүлэлт ажиллаж 
	байгаа эсэхэд эргэлзэж байгаа бол <application>sendmail</application>-ийн 
	<option>-bt</option> тохируулгыг тогтоох хэрэгтэй. Энэ нь 
	<application>sendmail</application>-ийг 
	<emphasis>хаягийн тест горим</emphasis>д эхлүүлдэг; <literal>3,0</literal> 
	гэж оруулаад захидал чиглүүлэлтийг тест хийхийг хүссэн хаягаа оруулах хэрэгтэй. 
	Сүүлийн мөр нь ашиглагдсан дотоод захидлын агент, энэ агентийн дуудаж 
	холбогдох хүрэх хост болон (магадгүй хөрвүүлэгдсэн) хаягийг хэлдэг. 
	Энэ горимоос <keycombo
      action="simul"><keycap>Ctrl</keycap><keycap>D</keycap></keycombo> 
	даран гарна.</para>

    <screen>&prompt.user; <userinput>sendmail -bt</userinput>
ADDRESS TEST MODE (ruleset 3 NOT automatically invoked)
Enter &lt;ruleset&gt; &lt;address&gt;
<prompt>&gt;</prompt> <userinput>3,0 foo@example.com</userinput>
canonify           input: foo @ example . com
...
parse            returns: $# uucp-dom $@ <replaceable>your.uucp.relay</replaceable> $: foo &lt; @ example . com . &gt;
<prompt>&gt;</prompt> <userinput>^D</userinput></screen>
  </sect1>

  <sect1 id="outgoing-only">
    <sect1info>
      <authorgroup>
        <author>
          <firstname>Билл</firstname>
          <surname>Моран</surname>
          <contrib>Хувь нэмэр болгон оруулсан </contrib>
        </author>
      </authorgroup>
      <authorgroup>
        <author>
	  <firstname>Цагаанхүүгийн</firstname>
	  <surname>Ганболд</surname>
	  <contrib>Орчуулсан  </contrib>
        </author>
      </authorgroup>
    </sect1info>

    <title>Зөвхөн илгээхээр тохируулах нь</title>

    <para>Өртөөлөх серверээр дамжуулан захидлыг илгээхийг зөвхөн хүсэх олон 
	тохиолдлууд байдаг. Зарим жишээнүүдийг дурдвал:</para>

    <itemizedlist>
      <listitem>
	<para>Таны компьютер ширээний машин, гэхдээ та &man.send-pr.1; 
	зэрэг програмуудыг ашиглахыг хүсэж байна гэж бодъё. Ингэхийн тулд 
	та өөрийн ISP-ийн захидал өртөөлөх серверийг ашиглах ёстой.</para>
      </listitem>

      <listitem>
	<para>Компьютер нь захидлыг локалаар зохицуулдаггүй сервер боловч 
	бүх захидлуудыг боловсруулахын тулд өртөөлөх сервер рүү дамжуулах 
	хэрэгтэй байгаа.</para>
      </listitem>
    </itemizedlist>

    <para>Бараг <acronym>MTA</acronym> бүр үүнийг хийх чадвартай байдаг. 
	Харамсалтай нь захидлыг зөвхөн дамжуулахын тулд 
	өргөн боломжтой <acronym>MTA</acronym>-г зөв тохируулах нь 
	маш төвөгтэй байдаг. <application>sendmail</application> болон
      <application>postfix</application> зэрэг програмуудыг 
	энэ зорилгоор ашиглах нь хэтэрхий юм.</para>

    <para>Мөн хэрэв та энгийн Интернэт хандалтын үйлчилгээг ашиглаж байгаа бол 
	таны гэрээ таныг <quote>захидлын сервер</quote> ажиллуулахыг хориглож 
	магадгүй юм.</para>

    <para>Тэдгээр хэрэгцээнүүдийг хангах хялбар арга бол <filename role="package">mail/ssmtp</filename> 
	портыг суулгах явдал юм. Дараах тушаалуудыг <username>root</username> 
	хэрэглэгчээр ажиллуулна:</para>

    <screen>&prompt.root; <userinput>cd /usr/ports/mail/ssmtp</userinput>
&prompt.root; <userinput>make install replace clean</userinput></screen>

    <para>Суулгасны дараа <filename role="package">mail/ssmtp</filename>-г 
	<filename>/usr/local/etc/ssmtp/ssmtp.conf</filename>-д байрлах 
	дөрвөн мөр бүхий файлаар тохируулж болно:</para>

    <programlisting>root=yourrealemail@example.com
mailhub=mail.example.com
rewriteDomain=example.com
hostname=_HOSTNAME_</programlisting>

    <para><username>root</username>-д зориулж өөрийн жинхэнэ захидлын хаягаа 
	ашиглахаа мартуузай. <hostid role="fqdn">mail.example.com</hostid>-ийн 
	оронд өөрийн ISP-ийн гарах захидлын өртөөлөх серверийг оруулаарай (зарим ISP-ууд нь 
	үүнийг <quote>гарах захидлын сервер</quote> эсвэл <quote>SMTP сервер</quote>
	гэдэг).</para>

    <para>Гарах захидлын үйлчилгээг нь оролцуулаад  <application>sendmail</application>-г 
	хориглохоо мартуузай. Дэлгэрэнгүйг <xref linkend="mail-disable-sendmail"> 
	хэсгээс үзнэ үү.</para>

    <para><filename role="package">mail/ssmtp</filename> нь бас бусад тохируулгуудтай 
	байдаг. Жишээнүүд болон дэлгэрэнгүй мэдээллийг 
	<filename>/usr/local/etc/ssmtp</filename> доторх жишээ 
	тохиргооны файл эсвэл <application>ssmtp</application>-ийн 
	гарын авлагын хуудаснаас үзнэ үү.</para>

    <para>Энэ маягаар <application>ssmtp</application>-г тохируулах нь 
	зөв ажиллахын тулд захидал илгээхийг шаарддаг, таны компьютер дээрх ямар ч програмыг 
	зөвшөөрөх болно. Ингэхдээ таны ISP-ийн хэрэглээний бодлогыг зөрчилгүйгээр 
	эсвэл таны компьютерийг спам илгээх зорилгоор булаан эзлэхийг зөвшөөрдөггүй 
	байна.</para>
  </sect1>

  <sect1 id="SMTP-dialup">
    <sect1info>
      <authorgroup>
        <author>
	  <firstname>Цагаанхүүгийн</firstname>
	  <surname>Ганболд</surname>
	  <contrib>Орчуулсан  </contrib>
        </author>
      </authorgroup>
    </sect1info>
    <title>Гадагш залгах холболтоор захидлыг ашиглах нь</title>

    <para>Хэрэв танд статик IP хаяг байгаа бол та анхдагч утгуудыг өөрчилж тааруулах 
	шаардлагагүй юм. Өөрийн хостын нэрийг өөрт заагдсан Интернэтийн нэрээр 
	тохируулах хэрэгтэй бөгөөд <application>sendmail</application> 
	үлдсэнийг нь хийх болно.</para>

    <para>Хэрэв та динамикаар заагдсан IP хаягтай бөгөөд Интернэт рүү диал ап 
	PPP холболтыг ашигладаг бол та өөрийн ISP-ийн захидлын сервер дээр магадгүй 
	захидлын хайрцагтай байна байх. Таны ISP-ийн домэйн <hostid role="domainname">example.net</hostid>, 
	таны хэрэглэгчийн нэр <username>user</username>, та 
	өөрийн машиныг <hostid role="fqdn">bsd.home</hostid> гэж 
	нэрлэсэн бөгөөд таны ISP танд <hostid
      role="fqdn">relay.example.net</hostid>-г захидал өртөөлөх сервер 
	болгож ашиглаж болно гэж хэлсэн гэж үзье.</para>

    <para>Өөрийн захидлын хайрцгаас захидал авахын тулд та татаж авах агентийг 
	суулгах ёстой. <application>fetchmail</application> хэрэгсэл нь 
	олон төрлийн протоколуудыг дэмждэг болохоор үүнд сайн сонголт болох юм. 
	Энэ програм нь багц хэлбэрээр эсвэл портын цуглуулгад байдаг (<filename
      role="package">mail/fetchmail</filename>). Ихэвчлэн 
	таны <acronym>ISP</acronym> <acronym>POP</acronym> үйлчилгээ 
	үзүүлдэг. Хэрэв та хэрэглэгчийн <acronym>PPP</acronym> ашиглаж байгаа бол 
	<filename>/etc/ppp/ppp.linkup</filename> дахь дараах оруулгыг 
	ашиглан Интернэтийн холболт тогтох үед өөрийн захидлыг автоматаар 
	авч болох юм:</para>

    <programlisting>MYADDR:
!bg su user -c fetchmail</programlisting>

    <para>Хэрэв та <application>sendmail</application>-г 
	локал биш бүртгэлүүдэд захидал илгээхийн тулд ашиглаж байгаа бол 
	(доор үзүүлсэн шиг) та өөрийнхөө Интернэтийн холболтыг тогтоосныхоо 
	дараа өөрийн захидлын дарааллыг <application>sendmail</application>-ээр 
	процесс хийлгэхийг хүсэх байх. Үүнийг хийхийн тулд энэ тушаалыг 
	<filename>/etc/ppp/ppp.linkup</filename> файлд 
	<command>fetchmail</command> тушаалын дараа байрлуулах хэрэгтэй:</para>

    <programlisting>  !bg su user -c "sendmail -q"</programlisting>

    <para>Та <hostid
      role="fqdn">bsd.home</hostid> дээр 
	<username>user</username>-т зориулсан бүртгэлтэй гэж бодъё. 
	<hostid
      role="fqdn">bsd.home</hostid> дээрх <username>user</username>-ийн 
	гэрийн санд <filename>.fetchmailrc</filename> файлыг үүсгэх хэрэгтэй:</para>

    <programlisting>poll example.net protocol pop3 fetchall pass MySecret</programlisting>

    <para>Энэ файл нь <literal>MySecret</literal> гэсэн нууц үгийг агуулдаг 
	болохоор уг файлыг <username>user</username>-ээс өөр хэн ч унших 
	ёсгүй юм.</para>

    <para>Зөв <literal>from:</literal> толгойтойгоор захидал илгээхийн 
	тулд та <application>sendmail</application>-д 
	<email role="nolink">user@bsd.home</email>-ийн оронд 
	<email>user@example.net</email>-г ашиглахыг хэлж өгөх ёстой. 
	Та бас <application>sendmail</application>-д 
	хурдан захидал дамжуулах боломжийг бүрдүүлэхийн тулд бүх захидлыг дамжуулахдаа 
	<hostid role="fqdn">relay.example.net</hostid>-ийг ашиглахыг бас хэлж 
	өгөхийг хүсэж болох юм.</para>

    <para>Дараах <filename>.mc</filename> файл нь хангалттай байх болно:</para>

    <programlisting>VERSIONID(`bsd.home.mc version 1.0')
OSTYPE(bsd4.4)dnl
FEATURE(nouucp)dnl
MAILER(local)dnl
MAILER(smtp)dnl
Cwlocalhost
Cwbsd.home
MASQUERADE_AS(`example.net')dnl
FEATURE(allmasquerade)dnl
FEATURE(masquerade_envelope)dnl
FEATURE(nocanonify)dnl
FEATURE(nodns)dnl
define(`SMART_HOST', `relay.example.net')
Dmbsd.home
define(`confDOMAIN_NAME',`bsd.home')dnl
define(`confDELIVERY_MODE',`deferred')dnl</programlisting>

    <para>Энэ <filename>.mc</filename> файлыг <filename>sendmail.cf</filename> 
	файл болгож хэрхэн хувиргах тухай дэлгэрэнгүйг өмнөх хэсгээс лавлана уу. 
	Бас <filename>sendmail.cf</filename>-г шинэчилснийхээ дараа 
	<application>sendmail</application>-г дахин эхлүүлэхээ мартуузай.</para>
  </sect1>

  <sect1 id="SMTP-Auth">
    <sect1info>
    <authorgroup>
      <author>
        <firstname>Жэймс</firstname>
        <surname>Горхам</surname>
        <contrib>Бичсэн </contrib>
      </author>
    </authorgroup>
      <authorgroup>
        <author>
	  <firstname>Цагаанхүүгийн</firstname>
	  <surname>Ганболд</surname>
	  <contrib>Орчуулсан  </contrib>
        </author>
      </authorgroup>
    </sect1info>

    <title>SMTP нэвтрэлт танилт</title>

    <para>Өөрийн захидлын сервертээ <acronym>SMTP</acronym> Authentication 
	буюу нэвтрэлт танилттай байх нь хэд хэдэн талаараа ашигтай байдаг. 
	<acronym>SMTP</acronym> нэвтрэлт танилт нь <application>sendmail</application>-д 
	аюулгүй байдлын өөр давхарга нэмж чадах бөгөөд хостоо сольдог хөдөлгөөнт 
	хэрэглэгчдийн хувьд өөрийн захидлын клиентийнхээ тохиргоог дахин тохируулалгүйгээр 
	захидлын серверээ ашиглах боломжийг олгодгоороо ашигтай байдаг.</para>

    <procedure>
      <step>
	<para><filename role="package">security/cyrus-sasl2</filename>-г 
	портоос суулгана. Та энэ портыг <filename role="package">security/cyrus-sasl2</filename> 
	сангаас олж болно. <filename role="package">security/cyrus-sasl2</filename> 
	порт нь хэд хэдэн эмхэтгэх үеийн тохируулгуудыг дэмждэг. Бидний ашиглах SMTP нэвтрэлт танилтын 
	аргын хувьд <option>LOGIN</option> тохируулга хаагдаагүй эсэхийг шалгаарай.</para>
      </step>


      <step>
	<para><filename role="package">security/cyrus-sasl2</filename>-г 
	суулгасны дараа <filename>/usr/local/lib/sasl2/Sendmail.conf</filename>-г 
	(байхгүй бол үүсгээрэй) засварлаж дараах мөрийг нэмэх хэрэгтэй:</para>

	<programlisting>pwcheck_method: saslauthd</programlisting>
      </step>

      <step>
	<para>Дараа нь <filename role="package">security/cyrus-sasl2-saslauthd</filename>-г 
	суулгаж дараах мөрийг нэмэхийн тулд <filename>/etc/rc.conf</filename>-г засварлана:</para>

	<programlisting>saslauthd_enable="YES"</programlisting>

	<para>тэгээд эцэст нь saslauthd дэмонг эхлүүлнэ:</para>

	<screen>&prompt.root; <userinput>/usr/local/etc/rc.d/saslauthd start</userinput></screen>

	<para>Энэ дэмон нь таны FreeBSD <filename>passwd</filename> мэдээллийн 
	баазаас нэвтрэлт таниулахын тулд <application>sendmail</application>-ийн хувьд 
	зуучлагч болдог. Энэ нь <acronym>SMTP</acronym> нэвтрэлт танилт ашиглах хэрэгтэй 
	хэрэглэгч бүрийн хувьд шинэ хэрэглэгчийн нэрс болон нууц үгсийг үүсгэх шаардлагагүй 
	болгож нэвтрэлт болон захидлын нууц үгийг өөрчлөлгүйгээр хэвээр байлгадаг юм.</para>
      </step>

      <step>
	<para>Одоо <filename>/etc/make.conf</filename>-г засварлаад дараах мөрүүдийг нэмэх хэрэгтэй:</para>

	<programlisting>SENDMAIL_CFLAGS=-I/usr/local/include/sasl -DSASL
SENDMAIL_LDFLAGS=-L/usr/local/lib
SENDMAIL_LDADD=-lsasl2</programlisting>

	<para>Эдгээр мөрүүд нь <application>sendmail</application>-д 
	<filename role="package">cyrus-sasl2</filename> руу эмхэтгэх үед холбоос 
	хийхэд шаардлагатай зөв тохиргооны сонголтуудыг өгөх болно. 
	<application>sendmail</application>-ийг суулгахаас өмнө 
	<filename role="package">cyrus-sasl2</filename> суусан байгаа 
	эсэхийг баталгаажуулаарай.</para>
      </step>

      <step>
	<para>Дараах тушаалуудыг ажиллуулж <application>sendmail</application>-г дахин эмхэтгэнэ:</para>

	<screen>&prompt.root; <userinput>cd /usr/src/lib/libsmutil</userinput>
&prompt.root; <userinput>make cleandir && make obj && make</userinput>
&prompt.root; <userinput>cd /usr/src/lib/libsm</userinput>
&prompt.root; <userinput>make cleandir && make obj && make</userinput>
&prompt.root; <userinput>cd /usr/src/usr.sbin/sendmail</userinput>
&prompt.root; <userinput>make cleandir && make obj && make && make install</userinput></screen>

	<para><filename>/usr/src</filename> тийм ч ихээр өөрчлөгдөөгүй бөгөөд 
	хэрэгцээтэй хуваалцдаг сангууд байгаа тохиолдолд <application>sendmail</application>-ийн эмхэтгэлт 
	ямар нэгэн асуудалгүй хийгдэх ёстой.</para>
      </step>

      <step>
	<para><application>sendmail</application> эмхэтгэгдэж дахин суулгагдсаны 
	дараа өөрийн <filename>/etc/mail/freebsd.mc</filename>
	  файлыг (аль эсвэл өөрийн <filename>.mc</filename> файл болгож ашигладаг тэр файлыг. Дахин давтагдахгүй 
	байхын тулд олон администраторууд &man.hostname.1;-ээс гарах гаралтыг ашиглан <filename>.mc</filename> файлаа 
	болгон сонгодог) засварлах хэрэгтэй. Эдгээр мөрүүдийг нэмэх хэрэгтэй:</para>

	<programlisting>dnl set SASL options
TRUST_AUTH_MECH(`GSSAPI DIGEST-MD5 CRAM-MD5 LOGIN')dnl
define(`confAUTH_MECHANISMS', `GSSAPI DIGEST-MD5 CRAM-MD5 LOGIN')dnl</programlisting>

	<para>Хэрэглэгчдийн нэвтрэлт танилтын хувьд <application>sendmail</application>-д 
	байдаг өөр аргуудыг эдгээр тохируулгууд нь тохируулдаг. Хэрэв та <application>pwcheck</application>-с
	өөр аргыг ашиглахыг хүсэж байгаа бол хамт ирсэн баримтаас үзнэ үү.</para>
      </step>

      <step>
	<para>Эцэст нь <filename>/etc/mail</filename> дотор байхдаа 
	&man.make.1;-г ажиллуулна. Энэ нь таны шинэ <filename>.mc</filename> 
	файлыг ажиллуулж <filename>freebsd.cf</filename> гэгдэх (өөрийн <filename>.mc</filename> 
	файлд зориулж ашигласан тэр) <filename>.cf</filename> файлыг үүсгэх болно. 
	Дараа нь <command>make install restart</command> тушаалыг 
	ашиглах хэрэгтэй. Энэ нь файлыг <filename>sendmail.cf</filename> руу 
	хуулж <application>sendmail</application>-г зөв ажиллуулах болно. 
	Энэ процессийн тухай дэлгэрэнгүй мэдээллийг <filename>/etc/mail/Makefile</filename> 
	файлаас лавлана уу.</para>
      </step>
    </procedure>

    <para>Хэрэв бүгд зөв явсан бол та өөрийн нэвтрэх мэдээллийг захидлын клиент уруугаа 
	оруулж тест захидал илгээж чадах ёстой. Илүү судлахын тулд 
	<application>sendmail</application>-ийн <option>LogLevel</option>-г 
	13 болгон тохируулж <filename>/var/log/maillog</filename> файлд
	алдаа гарах эсэхийг харах хэрэгтэй.</para>

    <para><ulink url="http://www.sendmail.org/~ca/email/auth.html">
      <acronym>SMTP</acronym> нэвтрэлт танилт</ulink>тай холбоотой дэлгэрэнгүй 
	мэдээллийг <application>sendmail</application> хуудаснаас үзнэ үү.</para>

  </sect1>

  <sect1 id="mail-agents">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Марк</firstname>
	  <surname>Силвэр</surname>
	  <contrib>Хамтран бичилцсэн </contrib>
	</author>
      </authorgroup>
      <authorgroup>
        <author>
	  <firstname>Шагдарын</firstname>
	  <surname>Нацагдорж</surname>
	  <contrib>Орчуулсан  </contrib>
        </author>
      </authorgroup>
    </sect1info>
    <title>Хэрэглэгчийн захидал дамжуулагчид</title>

    <indexterm>
      <primary>Хэрэглэгчийн захидал дамжуулагч</primary>
    </indexterm>

    <para>Mail User Agent (<acronym>MUA</acronym>) буюу хэрэглэгчийн
	  захидал дамжуулагч гэдэг нь  захиаг илгээх болон хүлээн авах 
	  зориулалттай програмууд байдаг. Мөн цаашилбал хоорондоо холбогдож
      <quote>захидал</quote> чулуудацгааснаар хэрэглэгчдийн
	  ажлыг түргэтгэж амарчилж чаддагаараа 
      <acronym>MUA</acronym> нар нь илүү хүчирхэг болж байгаа билээ. 
	  &os; нь өөртөө маш олон захиа дамжуулагч програмуудыг 
	  дэмждэг бөгөөд <link linkend="ports">FreeBSD портын цуглуулгаас</link>
	  та суулгах боломжтой.
      Хэрэглэгчид магадгүй график дүрслэлтэй
      <application>evolution</application> эсвэл
      <application>balsa</application>, мөн консол дээр тулгуурлаж ажилладаг 
	  програмууд болох <application>mutt</application>, <application>alpine</application>
      эсвэл <command>mail</command>, үгүй бол том байгууллагуудад ихэнхдээ
	  хэрэглэгддэг вэб харуулалттай захиа үзэгч зэргүүдээс сонгон хэрэглэх
	  боломж буй.</para>

    <sect2 id="mail-command">
      <title>mail</title>

      <para>&man.mail.1; бол &os;-н хэрэглэгчийн хэрэглэж болох 
	  анхдагч захиа дамжуулагч програм юм. Энэ нь 
	  консол дээр ажилладаг бөгөөд текст хэлбэрийн захиануудыг 
	  дамжуулах болон хүлээж авах бүх ерөнхий гүйцэтгэлийг санал болгодог ч
	  зарим хавсаргасан файлуудтай ажиллахад зарим хүчин чадал нь 
	  дутмаг бөгөөд зөвхөн дотоод захианы хайрцган дээр ажилладаг.</para>

      <para>Хэдийгээр <command>mail</command> гуай 
	  анхнаасаа  <acronym>POP</acronym> эсвэл
	<acronym>IMAP</acronym> серверүүдийг дэмждэггүй боловч 
	эдгээр сервер дээрх захианы хайрцгуудыг өөрийнхөө дотоод
	<filename>mbox</filename> файл уруу
	<application>fetchmail</application> програмыг ашиглан 
	хуулж чаддаг. <application>fetchmail</application>-н талаар энэ бүлэгт
	сүүлд танилцуулах болно (<xref
	linkend="mail-fetchmail">).</para>

      <para>Захиа хүлээж авах болон илгээхийн тулд 
	<command>mail</command> тушаал өгнө:</para>

      <screen>&prompt.user; <userinput>mail</userinput></screen>

      <para>Хэрэглэгч бүрд зориулсан
	<filename class="directory">/var/mail</filename> доторх 
	 захианы хайрцаг нь <command>mail</command> хэрэгслээр уншигддаг.
	Хэрэв захианы хайрцаг хоосон байвал ямар ч захиа алга байна гэсэн 
	мэдэгдэл харуулаад энэ хэрэгсэл гардаг. Захианы хайрцаг доторх 
	захиа уншигдах үед энэ хэрэгслийн харуулах нүүр хэсэг ажиллаж эхлэн
	захиануудыг жагсаалт болгож харуулдаг. Дараах маягаар захианууд нь 
	автоматаар дугаарлагдаж харуулагддаг:</para>

      <screen>Mail version 8.1 6/6/93.  Type ? for help.
"/var/mail/marcs": 3 messages 3 new
>N  1 root@localhost        Mon Mar  8 14:05  14/510   "test"
 N  2 root@localhost        Mon Mar  8 14:05  14/509   "user account"
 N  3 root@localhost        Mon Mar  8 14:05  14/509   "sample"</screen>

      <para>Захиануудыг одоо  <keycap>t</keycap>
	<command>захианы-дугаар</command> гэж тушаал өгснөөр тухайн 
	дугаартай захиаг уншина. Доорх жишээнд эхний захиаг уншиж харуулав:</para>

      <screen>&amp; <userinput>t 1</userinput>
Message 1:
From root@localhost  Mon Mar  8 14:05:52 2004
X-Original-To: marcs@localhost
Delivered-To: marcs@localhost
To: marcs@localhost
Subject: test
Date: Mon,  8 Mar 2004 14:05:52 +0200 (SAST)
From: root@localhost (Charlie Root)

This is a test message, please reply if you receive it.</screen>

      <para>Дээрх жишээн дээр харуулснаар  <keycap>t</keycap>
	товч дарж уншссан захианы толгой хэсгийг бүтнээр нь харуулж байна.
	Захианы үндсэн жагсаалт уруу буцаж очихын тулд <keycap>h</keycap>
	товчлуур хэрэглэгддэг.</para>

      <para>Хэрэв захианд хариулж бичих тохиолдол гарвал 
	<command>mail</command>-н 
	<keycap>R</keycap> эсвэл <keycap>r</keycap> товчнуудыг ашигладаг.
	<keycap>R</keycap> товч нь 
	<command>mail</command>-д зөвхөн илгээсэн хүнд нь хариулж бичихийг 
	зааж өгдөг байхад  <keycap>r</keycap> товч нь илгээсэн хүнээс гадна мөн 
	өөр бусад хүлээн авагчид уруу илгээх боломж өгдөг. Та мөн энэ 
	тушаалуудын ард нь захианы дугаар бичиж өгөн тухайн оноосон захианд
	хариулт бичиж болно. Ингэж хариулж бичих үйлдэл хийх үед 
	захианы хамгийн сүүлд нэг <keycap>.</keycap> гэсэн цэгтэй мөр 
	нэмэгддэгийг доорх жишээнээс харна уу:</para>

      <screen>&amp; <userinput>R 1</userinput>
To: root@localhost
Subject: Re: test

<userinput>Thank you, I did get your email.
.</userinput>
EOT</screen>

      <para>Шинэ захиа илгээхийн тулд <keycap>m</keycap>
	товч хэрэглэгддэг бөгөөд энэ товчлуурын араас хүлээн авах хүний 
	захианы хаягийг бичиж өгдөг. Олон хаяг бичигдэх тохиолдолд 
	захианы хаяг бүр <keycap>,</keycap> гэсэн таслал тэмдгээр
	тусгаарлагддаг. Дараа нь захианы гарчгийг бичиж сүүлд нь 
	захиагаа бичдэг. Захианы төгсгөл хэсгийг
	тусдаа нэг мөрөнд  <keycap>.</keycap> гэж цэг оруулж өгснөөр 
	захиаг дуусгадаг.</para>

      <screen>&amp; <userinput>mail root@localhost</userinput>
Subject: <userinput>I mastered mail

Now I can send and receive email using mail ... :)
.</userinput>
EOT</screen>

      <para><command>mail</command> хэрэгсэл дотор 
	<keycap>?</keycap> товчлуур дарснаар ямар ч үед 
	тусламж мэдээллийг харуулж болдог бөгөөд мөн &man.mail.1;-н 
	гарын авлаганд илүү дэлгэрэнгүй мэдээллийг харах боломж бий.</para>

      <note>
        <para>Өмнө тайлбарлаж байсны дагуу &man.mail.1; хэрэгсэл нь 
		анхнаасаа хавсралт файлтай ажиллах зориулалттай хийгдээгүй болохоор
		жаахан ядуувтар хэрэглэгддэг. Сүүлийн үеийн захидал дамжуулагчид 
		болох 
	  <application>mutt</application> нь хавсралт файлтай арай ухаалаг 
	  ажилладаг. Гэхдээ та заавал <command>mail</command>-г хэрэглэмээр 
	  байгаа бол <filename
	  role="package">converters/mpack</filename> порт танд хэрэг болох 
	  байх аа.</para>
      </note>
    </sect2>

    <sect2 id="mutt-command">
      <title>mutt</title>

      <para><application>mutt</application> бол жижигхэн боловч
	  маш хүчтэй захидал дамжуулагч бөгөөд дараах аятайхан шинж чанаруудыг
	  өөртөө агуулсан байдаг нь:</para>

      <itemizedlist>
        <listitem>
	  <para>Захиануудтай давхар зэрэг ажиллах</para>
        </listitem>

        <listitem>
	  <para>Захианд нууцлалын хувиргалт хийх болон цахим гарын үсэг зурахад зориулагдсан PGP дэмжлэгтэй</para>
        </listitem>

        <listitem>
	  <para>MIME дэмжлэгтэй</para>
        </listitem>

        <listitem>
	  <para>Maildir дэмжлэгтэй</para>
        </listitem>

        <listitem>
	  <para>Дурын өөрчлөлт хийх боломжтой.</para>
        </listitem>
      </itemizedlist>

      <para>Эдгээр шинж чанаруудын ачаар 
	<application>mutt</application> нь хамгийн өргөн 
	тархсан хэрэглэгчийн захидал дамжуулагч болж чадсан юм. <ulink
	url="http://www.mutt.org"></ulink> хаягнаас 
	<application>mutt</application>-н тухай дэлгэрэнгүй мэдээллийг харна уу.</para>

      <para><application>mutt</application>-н тогтвортой хувилбарыг
	 <filename
	role="package">mail/mutt</filename> портоос суулгаж болох бөгөөд
	хэрэв яг одоо хөгжүүлж буй хувилбарыг нь суулгахыг хүсвэл <filename
	role="package">mail/mutt-devel</filename> портоос суулгаарай.Портоо 
	суулгасны дараа <application>mutt</application>-г эхлүүлэхдээ 
	дараах тушаалыг өгдөг:</para>

      <screen>&prompt.user; <userinput>mutt</userinput></screen>

      <para><application>mutt</application> нь хэрэглэгчийн 
	  захианы хайрцгийг автоматаар <filename
	class="directory">/var/mail</filename> сангаас уншиж 
	хэрэв дотор нь захиа байвал харуулдаг. Хэрэв ямар ч захиа байхгүй 
	байвал хэрэглэгчээс тушаал оруулахыг 
	<application>mutt</application> хүлээх болно. 
	Доорх жишээнд <application>mutt</application>-н захидал 
	харуулалтыг үзүүлэв:</para>

      <mediaobject>
	<imageobject>
	  <imagedata fileref="mail/mutt1" format="PNG">
	</imageobject>
      </mediaobject>

      <para>Захиаг уншихын тулд 
	  сумтай товчоор захидлыг сонгож <keycap>Enter</keycap> товч дарна. 
	  
	<application>mutt</application>-н захидал хэрхэн дэлгэж харуулсныг 
	доорх зурган дээр харуулав:</para>

      <mediaobject>
	<imageobject>
	  <imagedata fileref="mail/mutt2" format="PNG">
	</imageobject>
      </mediaobject>

      <para>&man.mail.1; хэрэгсэлтэй ижилхэн 
	  <application>mutt</application> нь мөн зөвхөн илгээсэн хүнд 
	  нь юм уу эсвэл олон хүлээн авагч уруу хариулт бичиж болдог. 
	  Зөвхөн илгээсэн хүнд нь хариу бичихийн тулд 
	<keycap>r</keycap> товч дарна. Захиа илгээсэн хүнийг нь оруулаад
	бүлэг хүмүүс рүү захиа хариулж бичихийн тулд <keycap>g</keycap> 
	товч дардаг.</para>

      <note>
	<para><application>mutt</application> нь захиа бичих болон 
	  хариулахын тулд 
	  &man.vi.1; програмыг ашиглан захиа засварлалт хийлгэдэг. 
	  Гэхдээ өөрийн эхлэл сан дотроо  <filename>.muttrc</filename> 
	  файл үүсгэж 
	  <literal>editor</literal> хувьсагч үүсгэх эсвэл 
	  <envar>EDITOR</envar> гэсэн орчны хувьсагч үүсгэж өөрийн дуртай
	  засварлагчаа зааж өгч бас болно. 
	  <ulink url="http://www.mutt.org/"></ulink> хаягнаас та
	  <application>mutt</application>-н талаар хэрхэн тохируулж болох
	  дэлгэрэнгүй зааврыг харна уу.</para>
      </note>

      <para>Шинэ захиа бичихийн тулд 
	<keycap>m</keycap> товч хэрэглэнэ. Гарчгийг оруулсны дараа 
	 &man.vi.1; програмыг <application>mutt</application> ажиллуулж
	 захиагаа бичих боломж олгодог. Захиаг бичиж дууссаны дараа
	 <command>vi</command> програмаас хадгалаад гарсны дараа
	илгээх захиаг <application>mutt</application> програм нэгтгэж 
	харуулдаг. Захиагаа илгээхдээ <keycap>y</keycap> товч дарна. 
	Илгээхийн өмнөх нэгтгэсэн харуулалтыг дор зурганд үзүүлье:</para>

      <mediaobject>
	<imageobject>
	  <imagedata fileref="mail/mutt3" format="PNG">
	</imageobject>
      </mediaobject>

      <para><application>mutt</application> нь өөртөө мөн тусламжийн 
	  мэдээлэлтэй өгөөд  <keycap>?</keycap> товч дарж харуулагдана. 
	  Дэлгэцийн дээд хэсэгт ямар товч дарж болох тухай тайлбар
	  мэдээлэл харуулаастай байдаг.</para>

    </sect2>

    <sect2 id="alpine-command">
      <title>alpine</title>

      <para><application>alpine</application> програмыг эхлэн 
	  хэрэглэгчдэд зориулж үүсгэсэн бөгөөд нэмэлт шинж чанаруудыг 
	  агуулсан байдаг.</para>

      <warning>
	<para> <application>alpine</application>-н өмнөх хувилбаруудад
	  алсаас холбогдсон халдагчид тусгай кодыг хэрэглэгч маягаар 
	  холбогдон захиа маягаар илгээж уг аюултай кодыг гүйцэтгэж болдог 
	  аюултай нүх байжээ. Эдгээр
	  <emphasis>мэдэгдсэн</emphasis> хүндрэлүүд нь засагдсан 
	  боловч 
	  <application>alpine</application>-ы програмын аюулгүйн хамгаалалт
	  загвар нь тун сул болохоор  &os;-н аюулаас хамгаалагч нөхдүүд 
	  уг програмд өөр онгорхой нүх бий гэж итгэдэг юм байна. 
	  Та өөртөө гарах эрсдэлийг тооцож мэдэж байгаа бол
	  <application>alpine</application>-г суулгаарай.</para>
      </warning>

      <para><application>alpine</application>-н одоогийн хөгжүүлж байгаа 
	  хувилбарыг <filename
	role="package">mail/alpine</filename> портоос суулгана. 
	Порт суугдсаны дараа
	 <application>alpine</application>-г дараах тушаалаар эхлүүлдэг:</para>

      <screen>&prompt.user; <userinput>alpine</userinput></screen>

      <para>Анх удаагаа <application>alpine</application> ажиллах үедээ
	  мэндчилгээ болон товч заавар харуулаад <application>alpine</application>
	  зохиосон хүмүүст мэдээлэх журмын нэргүй  захиа илгээхийг хүсдэг.
	  Тэр нэргүй захиаг илгээхийн тулд <keycap>Enter</keycap> товч дарах
	  эсвэл мөн <keycap>E</keycap> товч дарж нэргүй захиа илгээх хэсгээс
	  хадгалахгүй гардаг. Мэндчилгээний хуудас дараах маягаар харагддаг:</para>

      <mediaobject>
	<imageobject>
	  <imagedata fileref="mail/pine1" format="PNG">
	</imageobject>
      </mediaobject>

      <para>Хэрэглэгчдэд дараа нь сумтай товчоор сонгож болдог 
	  үндсэн цэс харуулагддаг. 
	  Үндсэн цэс дотор шинэ захиа бичих, захиа агуулсан сан доторхоо 
	  харах, мөн хаяг хадгалалтаа зохицуулах зэрэг боломж байдаг. 
	  Доорх зурагт эдгээр боломжуудын цэсийг харуулсан үндсэн 
	  цэсийг үзүүлэв.</para>

      <para><application>alpine</application>-р нээгдсэн үндсэн сан бол
	 <filename class="directory">inbox</filename> гэсэн нэртэй сан байдаг. 
	 Захианы жагсаалтыг харахын тулд 
	<keycap>I</keycap> товч дарах, эсвэл  <guimenuitem>MESSAGE INDEX</guimenuitem>
	цэсийг сонгоно:</para>

      <mediaobject>
	<imageobject>
	  <imagedata fileref="mail/pine2" format="PNG">
	</imageobject>
      </mediaobject>

      <para>Захианы санд буй захиануудыг жагсааж харуулсны дараа
	  сумтай товчоор сонгож 
	<keycap>Enter</keycap> товч дарж уншина.</para>

      <mediaobject>
	<imageobject>
	  <imagedata fileref="mail/pine3" format="PNG">
	</imageobject>
      </mediaobject>

      <para>Доорх зурган дээр 
	<application>alpine</application> дээр энгийн захиаг 
	харуулав. Дэлгэцийн доод хэсэгт лавлах болгож гарын товчлууруудыг 
	харуулдаг. Жишээ нь <keycap>r</keycap> товч дарснаар одоогийн 
	харуулж байгаа захианд хариу бичнэ.</para>

      <mediaobject>
	<imageobject>
	  <imagedata fileref="mail/pine4" format="PNG">
	</imageobject>
      </mediaobject>

      <para><application>alpine</application> дээр захианд хариу бичих үед
	 <application>pico</application> засварлагч хэрэглэгддэг 
	 бөгөөд энэ засварлагч нь <application>alpine</application>-тай 
	 хамт суугддаг. <application>pico</application> хэрэгсэл нь 
	 захиа бичихэд маш энгийн бөгөөд &man.vi.1; эсвэл &man.mail.1; зэргийг
	 ашиглагчдыг бодвол шинэ хэрэглэгчид рүү илүү дөхүүлсэн байдаг. 
	 Хариулт захиагаа бичиж дуусаад 
	<keycombo action="simul"><keycap>Ctrl</keycap><keycap>X</keycap>
	</keycombo> товч дарж илгээдэг. Илгээхийн өмнө 
	<application>alpine</application> танаас лавлаж асуух болно.</para>

      <mediaobject>
	<imageobject>
	  <imagedata fileref="mail/pine5" format="PNG">
	</imageobject>
      </mediaobject>

      <para>Үндсэн цэснээс <guimenuitem>SETUP</guimenuitem> гэж сонгосноор 
	  <application>alpine</application>  програмыг та хүссэнээрээ өөрчлөх
	  боломжтой.  <ulink url="http://www.washington.edu/alpine/"></ulink>
	 хаягаас дэлгэрэнгүй мэдээллийг харна уу.</para>

    </sect2>
  </sect1>

  <sect1 id="mail-fetchmail">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Марк</firstname>
	  <surname>Силвэр</surname>
	  <contrib>Хувь нэмэр болгон оруулсан </contrib>
	</author>
      </authorgroup>
      <authorgroup>
        <author>
	  <firstname>Цагаанхүүгийн</firstname>
	  <surname>Ганболд</surname>
	  <contrib>Орчуулсан  </contrib>
        </author>
      </authorgroup>
    </sect1info>
    <title>fetchmail-г ашиглах нь</title>

    <indexterm>
      <primary>fetchmail</primary>
    </indexterm>

    <para><application>fetchmail</application> нь хэрэглэгчдэд 
	алсын <acronym>IMAP</acronym> болон <acronym>POP</acronym> 
	серверүүдээс захидал автоматаар татан авч локал захидлын хайрцгуудад 
	хадгалах боломжийг олгодог, өргөн боломжтой, 
	<acronym>IMAP</acronym> болон <acronym>POP</acronym> 
	клиент юм. Тэдгээр захидлын хайрцгуудад дараа нь хандахад илүү хялбар 
	байдаг. <application>fetchmail</application>-г 
	<filename role="package">mail/fetchmail</filename> портыг 
	ашиглан суулгаж болох бөгөөд төрөл бүрийн боломжуудыг санал болгодгоос 
	заримыг дурдвал:</para>

    <itemizedlist>
      <listitem>
	<para><acronym>POP3</acronym>,
	  <acronym>APOP</acronym>, <acronym>KPOP</acronym>,
	  <acronym>IMAP</acronym>, <acronym>ETRN</acronym> болон
	  <acronym>ODMR</acronym> протоколуудын дэмжлэг.</para>
      </listitem>

      <listitem>
	<para><acronym>SMTP</acronym>-г ашиглан захидал дамжуулах чадвар.
	Энэ нь шүүлт хийх, дамжуулалт хийх болон хэвийн ажиллахын тулд хуурамч дүр 
	үзүүлэх боломжийг олгодог.</para>
      </listitem>

      <listitem>
	<para>Шинэ захидлуудыг байнга шалгахын тулд дэмон горимоор ажиллуулж болно.</para>
      </listitem>

      <listitem>
	<para>Олон захидлын хайрцгуудыг хүлээн авч тэдгээрийг тохиргооноос хамааран 
	өөр локал хэрэглэгчүүд рүү дамжуулж чаддаг.</para>
      </listitem>
    </itemizedlist>

    <para><application>fetchmail</application>-ийн бүх боломжуудыг 
	тайлбарлах нь энэ баримтын хүрээнээс гадуур боловч зарим нэг үндсэн 
	боломжуудыг тайлбарлах болно. <application>fetchmail</application> 
	хэрэгсэл нь зөв ажиллахын тулд <filename>.fetchmailrc</filename> 
	гэгддэг тохиргооны файлыг шаарддаг. Энэ файл нь серверийн мэдээлэл 
	болон нэвтрэх итгэмжлэлүүдийг агуулдаг. Энэ файлын агуулгын мэдрэмтгий 
	чанараас болоод энэ файлыг зөвхөн эзэмшигч нь уншиж чаддаг байхаар болгон дараах 
	тушаал ашиглаж хийхийг зөвлөдөг:</para>

    <screen>&prompt.user; <userinput>chmod 600 .fetchmailrc</userinput></screen>

    <para>Дараах <filename>.fetchmailrc</filename> файл нь 
	ганц хэрэглэгчийн захидлын хайрцгийг <acronym>POP</acronym> ашиглан татаж 
	авах жишээ юм. Энэ нь <application>fetchmail</application>-г 
	<username>joesoap</username> хэрэглэгчийн нэр болон 
	<literal>XXX</literal> нууц үгийг ашиглан <hostid
      role="fqdn">example.com</hostid> руу холбогдыг зааж байна. Энэ жишээ нь 
	<username>joesoap</username> хэрэглэгчийг локал систем дэх 
	хэрэглэгч гэж бас үздэг.</para>

    <programlisting>poll example.com protocol pop3 username "joesoap" password "XXX"</programlisting>

    <para>Дараах жишээ нь олон <acronym>POP</acronym>
      	болон <acronym>IMAP</acronym> серверүүд рүү холбогдож 
	шаардлагатай тохиолдолд өөр локал хэрэглэгчид рүү дахин чиглүүлж байна:</para>

    <programlisting>poll example.com proto pop3:
user "joesoap", with password "XXX", is "jsoap" here;
user "andrea", with password "XXXX";
poll example2.net proto imap:
user "john", with password "XXXXX", is "myth" here;</programlisting>

    <para><application>fetchmail</application> хэрэгслийг <option>-d</option> 
	туг болон түүний дараа  <filename>.fetchmailrc</filename> файлд 
	жагсаагдсан серверүүдийг байнга шалгах тэр хугацааг (секундээр) зааж өгөн
	дэмон горимд ажиллуулж болдог. Дараах жишээ нь <application>fetchmail</application>-г 
	600 секунд бүр шалгахаар тохируулж байна:</para>

    <screen>&prompt.user; <userinput>fetchmail -d 600</userinput></screen>

    <para><application>fetchmail</application>-ийн тухай 
	дэлгэрэнгүй мэдээллийг <ulink
      url="http://fetchmail.berlios.de/"></ulink> хаягаас олж болно.</para>
  </sect1>

  <sect1 id="mail-procmail">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Марк</firstname>
	  <surname>Силвэр</surname>
	  <contrib>Хувь нэмэр болгон оруулсан </contrib>
	</author>
      </authorgroup>
      <authorgroup>
        <author>
	  <firstname>Цагаанхүүгийн</firstname>
	  <surname>Ганболд</surname>
	  <contrib>Орчуулсан  </contrib>
        </author>
      </authorgroup>
    </sect1info>
    <title>procmail-г ашиглах нь</title>

    <indexterm>
      <primary>procmail</primary>
    </indexterm>

    <para><application>procmail</application> хэрэгсэл нь ирж байгаа захидлыг 
	шүүхэд хэрэглэгддэг гайхамшигтай хүчтэй програм юм. Энэ нь хэрэглэгчдэд 
	ирж байгаа захидлуудад тааруулж <quote>дүрмүүдийг</quote> тодорхойлох 
	боломжийг олгодог бөгөөд энэ дүрмүүдийг ашиглан тусгай үйлдлүүд хийх эсвэл 
	захидлыг өөр захидлын хайрцаг ба/эсвэл цахим захидлын хаягууд руу дахин 
	чиглүүлэх зэрэг ажлуудыг хийж болох юм. <application>procmail</application>-г 
	<filename role="package">mail/procmail</filename> порт ашиглан суулгаж 
	болно. Суулгасны дараа үүнийг <acronym>MTA</acronym>-уудтай цуг ажиллахаар 
	тохируулж болно; дэлгэрэнгүй мэдээллийг өөрийн <acronym>MTA</acronym>-ийн 
	баримтаас лавлана уу. Мөн <application>procmail</application>-н 
	боломжуудыг ашиглаж байгаа хэрэглэгчийн гэрийн сан дахь <filename>.forward</filename> 
	файлд дараах мөрийг нэмж өгч болно:</para>

    <programlisting>"|exec /usr/local/bin/procmail || exit 75"</programlisting>

    <para>Дараах хэсэг нь <application>procmail</application>-ийн зарим үндсэн 
	дүрмүүдийг үзүүлэх бөгөөд тэдгээрийн юу хийдэг талаар товч тайлбар өгөх болно. 
	Эдгээр дүрмүүд болон бусдууд нь <filename>.procmailrc</filename> 
	файлд хийгдсэн байх ёстой бөгөөд энэ файл нь хэрэглэгчийн гэрийн санд 
	байрлах ёстой.</para>

    <para>Эдгээр дүрмүүдийн ихэнхийг &man.procmailex.5;-ийн гарын авлагын хуудаснаас 
	олж болно.</para>

    <para><email>user@example.com</email>-с ирсэн бүх захидлыг 
	<email role="nolink">goodmail@example2.com</email> гадаад хаяг уруу дамжуулна:</para>

    <programlisting>:0
* ^From.*user@example.com
! goodmail@example2.com</programlisting>

    <para>1000 байтаас бага бүх захидлуудыг <email role="nolink">goodmail@example2.com</email> 
	гадаад хаяг уруу дамжуулна:</para>

    <programlisting>:0
* &lt; 1000
! goodmail@example2.com</programlisting>

    <para><email>alternate@example.com</email> руу илгээсэн бүх захидлыг 
	<filename>alternate</filename> гэгдсэн захидлын хайрцагт хийнэ:</para>

    <programlisting>:0
* ^TOalternate@example.com
alternate</programlisting>

    <para><quote>Spam</quote> сэдэв бүхий бүх захидлыг <filename>/dev/null</filename> 
	уруу илгээнэ:</para>

    <programlisting>:0
^Subject:.*Spam
/dev/null</programlisting>

    <para>Ирж байгаа <hostid role="domainname">&os;.org</hostid> захидлын жагсаалтуудыг 
	шалгаж жагсаалт бүрийг өөрийнх нь захидлын хайрцаг уруу хийдэг, ашигтай зааврыг доор үзүүлэв:</para>

    <programlisting>:0
* ^Sender:.owner-freebsd-\/[^@]+@FreeBSD.ORG
{
	LISTNAME=${MATCH}
	:0
	* LISTNAME??^\/[^@]+
	FreeBSD-${MATCH}
}</programlisting>
  </sect1>
</chapter>

<!--
     Local Variables:
     mode: sgml
     sgml-declaration: "../chapter.decl"
     sgml-indent-data: t
     sgml-omittag: nil
     sgml-always-quote-attributes: t
     sgml-parent-document: ("../book.sgml" "part" "chapter")
     End:
-->
