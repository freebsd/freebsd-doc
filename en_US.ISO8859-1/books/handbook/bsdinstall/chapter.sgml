<!--
     The FreeBSD Documentation Project

     $FreeBSD$
-->

<chapter id="bsdinstall">
  <chapterinfo>
    <authorgroup>
      <author>
	<firstname>Jim</firstname>
	<surname>Mock</surname>
	<contrib>Restructured, reorganized, and parts
	  rewritten by </contrib>
      </author>
    </authorgroup>
    <authorgroup>
      <author>
	<firstname>Randy</firstname>
	<surname>Pratt</surname>
	<contrib>The sysinstall walkthrough, screenshots, and general
	  copy by </contrib>
      </author>
    </authorgroup>
    <authorgroup>
      <author>
	<firstname>Gavin</firstname>
	<surname>Atkinson</surname>
	<contrib>Updated for bsdinstall by </contrib>
      </author>

      <author>
	<firstname>Warren</firstname>
	<surname>Block</surname>
      </author>
    </authorgroup>
  </chapterinfo>

  <title>Installing &os;&nbsp;9.<replaceable>x</replaceable> and
    Later</title>

  <sect1 id="bsdinstall-synopsis">
    <title>Synopsis</title>

    <indexterm><primary>installation</primary></indexterm>

    <para>&os; comes with a text-based, easy to use installation
      program.  &os;&nbsp;9.0-RELEASE and later use an installation
      program called <application>bsdinstall</application>, while
      releases prior to &os;&nbsp;9.0-RELEASE using
      <application>sysinstall</application> for installation.  This
      chapter describes the use of
      <application>bsdinstall</application>.  The use of
      <application>sysinstall</application> is covered in <xref
	linkend="install">.</para>

    <para>After reading this chapter, you will know:</para>

    <itemizedlist>
      <listitem>
	<para>How to create the &os; installation media.</para>
      </listitem>

      <listitem>
	<!-- WB: verify this, including GPT partition notation (ada0p2) -->
	<para>How &os; subdivides and refers to hard disks.</para>
      </listitem>

      <listitem>
	<para>How to start
	  <application>bsdinstall</application>.</para>
      </listitem>

      <listitem>
	<para>The questions <application>bsdinstall</application> will
	  ask you, what they mean, and how to answer them.</para>
      </listitem>
    </itemizedlist>

    <para>Before reading this chapter, you should:</para>

    <itemizedlist>
      <listitem>
	<para>Read the supported hardware list that shipped with the
	  version of &os; you are installing, and verify that your
	  hardware is supported.</para>
      </listitem>
    </itemizedlist>

    <note>
      <para>In general, these installation instructions are written
	for &i386; (<quote>PC compatible</quote>) architecture
	computers.  Where applicable, instructions specific to other
	platforms will be listed.  There may be minor differences
	between the installer and what is shown here, so use this
	chapter as a general guide rather than as exact literal
	instructions.</para>
    </note>
  </sect1>

  <sect1 id="bsdinstall-hardware">
    <title>Hardware Requirements</title>

    <sect2 id="bsdinstall-hardware-minimal">
      <title>Minimal Configuration</title>

      <para>The minimal configuration to install &os; varies with the
	&os; version and the hardware architecture.</para>

      <para>A summary of this information is given in the following
	sections.  Depending on the method you choose to install &os;,
	you may also need a supported CDROM drive, and in some cases a
	network adapter.  This will be covered by <xref
	  linkend="bsdinstall-installation-media">.</para>

      <sect3>
	<title>&os;/&arch.i386;</title>

	<para>&os;/&arch.i386; requires a 486 or better processor and
	  at least 64&nbsp;MB of RAM.  At least 1.1&nbsp;GB of free
	  hard drive space is needed for the most minimal
	  installation.</para>

	<note>
	  <para>On old computers, increasing RAM and hard drive space
	    is usually more effective at improving performance than
	    installing a faster processor.</para>
	</note>
      </sect3>

      <sect3>
	<title>&os;/&arch.amd64;</title>

	<para>There are two classes of processors capable of running
	  &os;/&arch.amd64;.  The first are AMD64 processors,
	  including the &amd.athlon;64,
	  &amd.athlon;64-FX, &amd.opteron; or better
	  processors.</para>

	<para>The second class of processors that can use
	  &os;/&arch.amd64; includes those using the
	  &intel;&nbsp;EM64T architecture.  Examples of these
	  processors include the &intel;&nbsp;&core;&nbsp;2 Duo, Quad,
	  Extreme processor families, the &intel;&nbsp;&xeon; 3000,
	  5000, and 7000 sequences of processors, and the
	  &intel;&nbsp;&core; i3, i5 and i7 processors.</para>

	<para>If you have a machine based on an nVidia nForce3
	  Pro-150, you <emphasis>must</emphasis> use the BIOS setup to
	  disable the IO APIC.  If you do not have an option to do
	  this, you will likely have to disable ACPI instead.  There
	  are bugs in the Pro-150 chipset for which we have not yet
	  found a workaround.</para>
      </sect3>

      <sect3>
	<title>&os;/&arch.powerpc; &apple; &macintosh;</title>

	<para>All New World &apple; &macintosh; systems with built-in
	  USB are supported.  SMP is supported on machines with
	  multiple CPUs.</para>

	<para>A 32-bit kernel can only use the first 2&nbsp;GB of RAM.
	  &firewire; is not supported on the Blue & White PowerMac
	  G3.</para>
      </sect3>

      <sect3>
	<title>&os;/&arch.sparc64;</title>

	<para>Systems supported by &os;/&arch.sparc64; are listed at
	  the <ulink
	    url="http://www.freebsd.org/platforms/sparc.html">
	    FreeBSD/sparc64</ulink> Project.</para>

	<para>A dedicated disk is required for &os;/&arch.sparc64;.
	  It is not possible to share a disk with another operating
	  system at this time.</para>
      </sect3>
    </sect2>

    <sect2 id="bsdinstall-hardware-supported">
      <title>Supported Hardware</title>

      <para>Hardware architectures and devices supported by a &os;
	release are listed in the Hardware Notes file.  Usually named
	<filename>HARDWARE.TXT</filename>, the file is located in the
	root directory of the release media.  Copies of the supported
	hardware list are also available on the <ulink
	  url="http://www.FreeBSD.org/releases/index.html">Release
	  Information</ulink> page of the &os; web site.</para>
    </sect2>
  </sect1>

  <sect1 id="bsdinstall-pre">
    <title>Pre-Installation Tasks</title>

    <sect2>
      <title>Back Up Your Data</title>

      <para>Back up all important data on the target computer
	where &os; will be installed.  Test the backups before
	continuing.  The &os; installer will ask before making changes
	to the disk, but once the process has started it cannot be
	undone.</para>
    </sect2>

    <sect2 id="bsdinstall-where">
      <title>Decide Where to Install &os;</title>

      <para>If &os; will be the only operating system installed, and
	will be allowed to use the entire hard disk, the rest of
	this section can be skipped.  But if &os; will share the disk
	with other operating systems, an understanding of disk
	layout is useful during the installation.</para>

      <sect3 id="bsdinstall-where-i386">
	<title>Disk Layouts for &os;/&arch.i386; and
	  &os;/&arch.amd64;</title>

	<para>Hard disks can be divided into multiple sections.  These
	  sections are called
	  <firstterm>partitions</firstterm>.</para>

	<para>There are two ways of dividing a disk into partitions.
	  A traditional <firstterm>Master Boot Record</firstterm>
	  (<acronym role="Master Boot Record">MBR</acronym>) holds a
	  partition table defining up to four <firstterm>primary
	    partitions</firstterm>.  (For historical reasons, &os;
	  calls primary partitions <firstterm>slices</firstterm>.)  A
	  limit of only four partitions is restrictive for large
	  disks, so one of these primary partitions can be made into
	  an <firstterm>extended partition</firstterm>.  Multiple
	  <firstterm>logical partitions</firstterm> may then be
	  created inside the extended partition.  This may sound a
	  little unwieldy, and it is.</para>

	<para>The <firstterm>GUID Partition Table</firstterm>
	  (<acronym role="GUID Partition Table">GPT</acronym>) is a
	  newer and simpler method of partitioning a disk.  <acronym
	    role="GUID Partition Table">GPT</acronym> is far more
	  versatile than the traditional MBR partition table.  Common
	  <acronym>GPT</acronym> implementations allow up to 128
	  partitions per disk, eliminating the need for inconvenient
	  workarounds like logical partitions.</para>

	<warning>
	  <para>Some older operating systems like &windows;&nbsp;XP
	    are not compatible with the <acronym>GPT</acronym>
	    partition scheme.  If &os; will be sharing a disk with
	    such an operating system, <acronym role="Master Boot
	      Record">MBR</acronym> partitioning is required.</para>
	</warning>

	<para>&os;'s standard boot loader requires either a primary or
	  <acronym>GPT</acronym> partition.  (See <xref
	    linkend="boot"> for more information about the &os;
	  booting process.)  If all of the primary or
	  <acronym>GPT</acronym> partitions are already in use, one
	  must be freed for &os;.</para>

	<para>A minimal installation of &os; takes as little as
	  1&nbsp;GB of disk space.  However, that is a
	  <emphasis>very</emphasis> minimal install, leaving almost no
	  free space.  A more realistic minimum is 3&nbsp;GB without a
	  graphical environment, and 5&nbsp;GB or more if a graphical
	  user interface will be used.  Third-party application
	  software requires more space.</para>

	<para>A variety of <ulink
	    url="http://en.wikipedia.org/wiki/List_of_disk_partitioning_software">
	    free and commercial partition resizing tools</ulink> are
	  available.  <ulink
	    url="http://gparted.sourceforge.net/livecd.php">GParted
	  Live</ulink> is a free Live CD which includes the GParted
	  partition editor.  GParted is also included with many other
	  Linux Live CD distributions.</para>

	<warning>
	  <para>Disk partition applications can destroy data.  Make a
	    full backup and verify its integrity before modifying disk
	    partitions.</para>
	</warning>

	<para>Resizing &microsoft;&nbsp;Vista partitions can be
	  difficult.  A Vista installation CDROM can be useful when
	  attempting such an operation.</para>

	<example>
	  <title>Using an Existing Partition</title>

	  <para>A &windows; computer has a single 40&nbsp;GB disk that
	    has been split into two 20&nbsp;GB partitions.  &windows;
	    calls them <devicename>C:</devicename> and
	    <devicename>D:</devicename>.  The
	    <devicename>C:</devicename> partition contains 10&nbsp;GB
	    of data, and the <devicename>D:</devicename> partition
	    contains 5&nbsp;GB of data.</para>

	  <para>Moving the data from <devicename>D:</devicename> to
	    <devicename>C:</devicename> frees up the second partition
	    to be used for &os;.</para>
	</example>

	<example>
	  <title>Shrinking an Existing Partition</title>

	  <para>A &windows; computer has a single 40&nbsp;GB disk and
	    one large partition using the whole disk.  &windows; shows
	    this 40&nbsp;GB partition as a single
	    <devicename>C:</devicename>.  15&nbsp;GB of space is being
	    used.  The goal is to end up with &windows; in a
	    20&nbsp;GB partition, and have another 20&nbsp;GB
	    partition for &os;.</para>

	  <para>There are two ways to do this.</para>

	  <orderedlist>
	    <listitem>
	      <para>Back up your &windows; data.  Then reinstall
		&windows;, creating a 20&nbsp;GB partition during the
		install.</para>
	    </listitem>

	    <listitem>
	      <para>Use a partition resizing tool like
		<application>GParted</application> to shrink the
		&windows; partition and create a new partition in the
		freed space for &os;.</para>
	    </listitem>
	  </orderedlist>
	</example>

	<para>Disk partitions containing different operating systems
	  make it possible to run any one of those operating systems
	  at a time.  An alternative method that allows running
	  multiple operating systems at the same time is covered in
	  <xref linkend="virtualization">.</para>
      </sect3>
    </sect2>

    <sect2 id="bsdinstall-collect-network-information">
      <title>Collect Network Information</title>

      <para>Some &os; installation methods need a network connection
	to download files.  To connect to an Ethernet network (or
	cable or DSL modem with an Ethernet interface), the installer
	will request some information about the network.</para>

      <para><firstterm><acronym role="Dynamic Host Configuration
	    Protocol">DHCP</acronym></firstterm> is commonly used to
	provide automatic network configuration.  If
	<acronym>DHCP</acronym> is not available, this network
	information must be obtained from the local network
	administrator or service provider:</para>

      <orderedlist>
	<title>Network Information</title>

	<listitem>
	  <para><acronym role="Internet Protocol">IP</acronym>
	    address</para>
	</listitem>

	<listitem>
	  <para>Subnet mask</para>
	</listitem>

	<listitem>
	  <para>Default router <acronym>IP</acronym> address</para>
	</listitem>

	<listitem>
	  <para>domain name of the local network</para>
	</listitem>

	<listitem>
	  <para><acronym role="Domain Name System">DNS</acronym>
	    server <acronym>IP</acronym> address(es)</para>
	</listitem>
      </orderedlist>
    </sect2>

    <sect2>
      <title>Check for &os; Errata</title>

      <para>Although the &os;&nbsp;Project strives to ensure that each
	release of &os; is as stable as possible, bugs occasionally
	creep into the process.  On very rare occasions those bugs
	affect the installation process.  As these problems are
	discovered and fixed, they are noted in the <ulink
	  url="&url.base;/releases/9.0R/errata.html">FreeBSD
	Errata</ulink> on the &os; web site.  Check the errata before
	installing to make sure that there are no problems that might
	affect the installation.</para>

      <para>Information and errata for all the releases can be found
	on the <ulink url="&url.base;/releases/index.html">release
	  information</ulink> section of the <ulink
	  url="&url.base;/index.html">&os; web site</ulink>.</para>
    </sect2>

    <sect2 id="bsdinstall-installation-media">
      <title>Prepare the Installation Media</title>

      <para>A &os; installation is started by booting the computer
	with a &os; installation CD, DVD, or USB memory stick.  The
	installer is not a program that can be run from within another
	operating system.</para>

      <para>In addition to the standard installation media which
	contains copies of all the &os; installation files, there is a
	<emphasis>bootonly</emphasis> variant.  Bootonly install media
	does not have copies of the installation files, but downloads
	them from the network during an install.  The bootonly install
	CD is consequently much smaller, and reduces bandwidth usage
	during the install by only downloading required files.</para>

      <para>Copies of &os; installation media are available at the
	<ulink url="&url.base;/where.html#download">&os; web
	  site</ulink>.</para>

      <tip>
	<para>If you already have a copy of &os; on CDROM, DVD, or USB
	  memory stick, this section can be skipped.</para>
      </tip>

      <para>&os; CD and DVD images are bootable ISO files.  Only one
	CD or DVD is needed for an install.  Burn the ISO image to a
	bootable CD or DVD using the CD recording applications
	available with your current operating system.</para>

      <para>To create a bootable memory stick, follow these
	steps:</para>

      <procedure>
	<step>
	  <title>Acquire the Memory Stick Image</title>

	  <para>Memory stick images for &os;&nbsp;9.0-RELEASE and
	    later can be downloaded from the
	    <filename class="directory">ISO-IMAGES/</filename>
	    directory at
	    <literal>ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/<replaceable>arch</replaceable>/<replaceable>arch</replaceable>/ISO-IMAGES/<replaceable>version</replaceable>/&os;-<replaceable>version</replaceable>-RELEASE-<replaceable>arch</replaceable>-memstick.img</literal>.
	    Replace <replaceable>arch</replaceable> and
	    <replaceable>version</replaceable> with the
	    architecture and the version number which you want to
	    install, respectively.  For example, the memory stick
	    images for &os;/&arch.i386;&nbsp;9.0-RELEASE are
	    available from <ulink
	      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/&arch.i386;/&arch.i386;/ISO-IMAGES/9.0/&os;-9.0-RELEASE-&arch.i386;-memstick.img"></ulink>.</para>

	  <tip>
	    <para>A different directory path is used for
	      &os;&nbsp;8.<replaceable>X</replaceable> and earlier versions.  Details of
	      download and installation of &os;&nbsp;8.<replaceable>X</replaceable> and
	      earlier is covered in <xref linkend="install">.</para>
	  </tip>

	  <para>The memory stick image has a <filename>.img</filename>
	    extension.  The <filename
	      class="directory">ISO-IMAGES/</filename> directory
	    contains a number of different images, and the one needed
	    depends on the version of &os; being installed, and in
	    some cases, the target hardware.</para>

	  <important>
	    <para>Before proceeding, <emphasis>back up</emphasis> the
	      data on the USB stick, as this procedure will
	      <emphasis>erase</emphasis> it.</para>
	  </important>
	</step>

	<step>
	  <title>Write the Image File to the Memory Stick</title>

	  <procedure>
	    <title>Using &os; to Write the Image</title>

	    <warning>
	      <para>The example below shows <filename
		  class="devicefile">/dev/da0</filename> as the target
		device where the image will be written.  Be very
		careful that the correct device is used as the output
		target, or you may destroy existing data.</para>
	    </warning>

	    <step>
	      <title>Writing the Image with &man.dd.1;</title>

	      <para>The <filename>.img</filename> file is
		<emphasis>not</emphasis> a regular file.  It is an
		<emphasis>image</emphasis> of the complete contents of
		the memory stick.  It <emphasis>cannot</emphasis>
		simply be copied like a regular file, but must be
		written directly to the target device with
		&man.dd.1;:</para>

	      <screen>&prompt.root; <userinput>dd if=&os;-9.0-RELEASE-&arch.i386;-memstick.img of=/dev/<replaceable>da0</replaceable> bs=64k</userinput></screen>
	    </step>
	  </procedure>

	  <procedure>
	    <title>Using &windows; to Write the Image</title>

	    <warning>
	      <para>Be sure to give the correct drive letter as the
		output target, or you may overwrite and destroy
		existing data.</para>
	    </warning>

	    <step>
	      <title>Obtaining <application>Image Writer for
		  &windows;</application></title>

	      <para><application>Image Writer for
		  &windows;</application> is a free application that
		can correctly write an image file to a memory stick.
		Download it from <ulink
		  url="https://launchpad.net/win32-image-writer/"></ulink>
		and extract it into a folder.</para>
	    </step>

	    <step>
	      <title>Writing the Image with Image Writer</title>

	      <para>Double-click the
		<application>Win32DiskImager</application> icon to
		start the program.  Verify that the drive letter shown
		under <computeroutput>Device</computeroutput> is the
		drive with the memory stick.  Click the folder icon
		and select the image to be written to the memory
		stick.  Click
		<guibutton>[&nbsp;Save&nbsp;]</guibutton> to accept
		the image file name.  Verify that everything is
		correct, and that no folders on the memory stick are
		open in other windows.  When everything is ready,
		click <guibutton>[&nbsp;Write&nbsp;]</guibutton> to
		write the image file to the memory stick.</para>
	    </step>
	  </procedure>
	</step>
      </procedure>

      <note>
	<para>Installation from floppy disks is no longer
	  supported.</para>
      </note>

      <para>You are now ready to start installing &os;.</para>
    </sect2>
  </sect1>

  <sect1 id="bsdinstall-start">
    <title>Starting the Installation</title>

    <important>
      <para>By default, the installation will not make any changes to
	your disk(s) until you see the following message:</para>

      <literallayout class="monospaced">Your changes will now be written to disk.  If you
have chosen to overwrite existing data, it will
be PERMANENTLY ERASED. Are you sure you want to
commit your changes?</literallayout>

      <para>The install can be exited at any time prior to this
	warning without changing the contents of the hard drive.  If
	you are concerned that you have configured something
	incorrectly you can just turn the computer off before this
	point, and no damage will be done.</para>
    </important>

    <sect2 id="bsdinstall-starting">
      <title>Booting</title>

      <sect3 id="bsdinstall-starting-i386">
	<title>Booting on &i386; and &arch.amd64;</title>

	<procedure>
	  <step>
	    <para>If you prepared a <quote>bootable</quote> USB stick,
	      as described in
	      <xref linkend="bsdinstall-installation-media">, then
	      plug in your USB stick before turning on the
	      computer.</para>

	    <para>If you are booting from CDROM, then you will need to
	      turn on the computer, and insert the CDROM at the first
	      opportunity.</para>
	  </step>

	  <step>
	    <para>Configure your machine to boot from either the CDROM
	      or from USB, depending on the media being used for the
	      installation.  <acronym role="Basic Input/Output
		System">BIOS</acronym> configurations allow the
	      selection of a specific boot device.  Most systems also
	      provide for selecting a boot device during startup,
	      typically by pressing <keycap>F10</keycap>,
	      <keycap>F11</keycap>, <keycap>F12</keycap>, or
	      <keycap>Escape</keycap>.</para>
	  </step>

	  <step>
	    <para>If your computer starts up as normal and loads your
	      existing operating system, then either:</para>

	    <orderedlist>
	      <listitem>
		<para>The disks were not inserted early enough in the
		  boot process.  Leave them in, and try restarting
		  your computer.</para>
	      </listitem>

	      <listitem>
		<para>The <acronym>BIOS</acronym> changes earlier did
		  not work correctly.  You should redo that step until
		  you get the right option.</para>
	      </listitem>

	      <listitem>
		<para>Your particular <acronym>BIOS</acronym> does not
		  support booting from the desired media.  The <ulink
		    url="http://www.plop.at/en/bootmanager.html">Plop
		  Boot Manager</ulink> can be used to boot older
		  computers from CD or USB media.</para>
	      </listitem>
	    </orderedlist>
	  </step>

	  <step>
	    <para>&os; will start to boot.  If you are booting from
	      CDROM you will see a display similar to this (version
	      information omitted):</para>

	    <screen>Booting from CD-ROM...
645MB medium detected
CD Loader 1.2

Building the boot loader arguments
Looking up /BOOT/LOADER... Found
Relocating the loader and the BTX
Starting the BTX loader

BTX loader 1.00 BTX version is 1.02
Consoles: internal video/keyboard
BIOS CD is cd0
BIOS drive C: is disk0
BIOS drive D: is disk1
BIOS 636kB/261056kB available memory

FreeBSD/i386 bootstrap loader, Revision 1.1

Loading /boot/defaults/loader.conf
/boot/kernel/kernel text=0x64daa0 data=0xa4e80+0xa9e40 syms=[0x4+0x6cac0+0x4+0x88e9d]
\</screen>
	  </step>

	  <step>
	    <para>The &os; boot loader is displayed:</para>

	    <figure id="bsdinstall-boot-loader-menu">
	      <title>&os; Boot Loader Menu</title>
	      <mediaobject>
		<imageobject>
		  <imagedata
		    fileref="bsdinstall/bsdinstall-boot-loader-menu"
		    format="PNG">
		</imageobject>
	      </mediaobject>
	    </figure>

	    <para>Either wait ten seconds, or press
	      <keycap>Enter</keycap>.</para>
	  </step>
	</procedure>
      </sect3>

      <sect3>
	<title>Booting for &macintosh; &powerpc;</title>

	<para>On most machines, holding <keycap>C</keycap> on the
	  keyboard during boot will boot from the CD.  Otherwise, hold
	  <keycombo action="simul">
	    <keycap>Command</keycap>
	    <keycap>Option</keycap>
	    <keycap>O</keycap>
	    <keycap>F</keycap>
	  </keycombo>,
	  or
	  <keycombo action="simul">
	    <keycap>Windows</keycap>
	    <keycap>Alt</keycap>
	    <keycap>O</keycap>
	    <keycap>F</keycap>
	  </keycombo>
	  on non-&apple; keyboards.  At the <prompt>0 ></prompt>
	  prompt, enter</para>

	<screen><userinput>boot cd:,\ppc\loader cd:0</userinput></screen>

	<para>For Xserves without keyboards, see
	  <ulink url="http://support.apple.com/kb/TA26930">&apple;'s
	  support web site</ulink> about booting into Open
	  Firmware.</para>
      </sect3>

      <sect3>
	<title>Booting for &sparc64;</title>

	<para>Most &sparc64; systems are set up to boot automatically
	  from disk.  To install &os;, you need to boot over the
	  network or from a CDROM, which requires you to break into
	  the <acronym role="Programmable Read Only
	    Memory">PROM</acronym> (OpenFirmware).</para>

	<para>To do this, reboot the system, and wait until the boot
	  message appears.  It depends on the model, but should look
	  about like:</para>

	<screen>Sun Blade 100 (UltraSPARC-IIe), Keyboard Present
Copyright 1998-2001 Sun Microsystems, Inc.  All rights reserved.
OpenBoot 4.2, 128 MB memory installed, Serial #51090132.
Ethernet address 0:3:ba:b:92:d4, Host ID: 830b92d4.</screen>

	<para>If your system proceeds to boot from disk at this point,
	  you need to press
	  <keycombo
	    action="simul"><keycap>L1</keycap><keycap>A</keycap></keycombo>
	  or
	  <keycombo
	    action="simul"><keycap>Stop</keycap><keycap>A</keycap></keycombo>
	  on the keyboard, or send a <command>BREAK</command> over the
	  serial console (using for example <command>~#</command> in
	  &man.tip.1; or &man.cu.1;) to get to the <acronym
	    role="Programmable Read Only Memory">PROM</acronym>
	  prompt.  It looks like this:</para>

	<screenco>
	  <areaspec>
	    <area id="bsdinstall-prompt-single" coords="1 5">
	    <area id="bsdinstall-prompt-smp" coords="2 5">
	  </areaspec>

	  <screen><prompt>ok     </prompt>
<prompt>ok {0} </prompt></screen>

	  <calloutlist>
	    <callout arearefs="bsdinstall-prompt-single">
	      <para>This is the prompt used on systems with just one
		CPU.</para>
	    </callout>

	    <callout arearefs="bsdinstall-prompt-smp">
	      <para>This is the prompt used on SMP systems, the digit
		indicates the number of the active CPU.</para>
	    </callout>
	  </calloutlist>
	</screenco>

	<para>At this point, place the CDROM into your drive, and from
	  the <acronym>PROM</acronym> prompt, type
	  <command>boot cdrom</command>.</para>

      </sect3>

    </sect2>

    <sect2 id="bsdinstall-view-probe">
      <title>Reviewing the Device Probe Results</title>

      <para>The last few hundred lines that have been displayed on
	screen are stored and can be reviewed.</para>

      <para>To review the buffer, press <keycap>Scroll Lock</keycap>.
	This turns on scrolling in the display.  You can then use the
	arrow keys, or <keycap>PageUp</keycap> and
	<keycap>PageDown</keycap> to view the results.  Press
	<keycap>Scroll Lock</keycap> again to stop scrolling.</para>

      <para>Do this now, to review the text that scrolled off the
	screen when the kernel was carrying out the device probes.
	You will see text similar to <xref
	  linkend="bsdinstall-dev-probe">, although the precise text
	will differ depending on the devices that you have in your
	computer.</para>

      <figure id="bsdinstall-dev-probe">
	<title>Typical Device Probe Results</title>

	<screen>Copyright (c) 1992-2011 The FreeBSD Project.
Copyright (c) 1979, 1980, 1983, 1986, 1988, 1989, 1991, 1992, 1993, 1994
        The Regents of the University of California. All rights reserved.
FreeBSD is a registered trademark of The FreeBSD Foundation.
FreeBSD 9.0-RELEASE #0 r225473M: Sun Sep 11 16:07:30 BST 2011
    root@psi:/usr/obj/usr/src/sys/GENERIC amd64
CPU: Intel(R) Core(TM)2 Duo CPU     T9400  @ 2.53GHz (2527.05-MHz K8-class CPU)
  Origin = "GenuineIntel"  Id = 0x10676  Family = 6  Model = 17  Stepping = 6
  Features=0xbfebfbff&lt;FPU,VME,DE,PSE,TSC,MSR,PAE,MCE,CX8,APIC,SEP,MTRR,PGE,MCA,CMOV,PAT,PSE36,CLFLUSH,DTS,ACPI,MMX,FXSR,SSE,SSE2,SS,HTT,TM,PBE&gt;
  Features2=0x8e3fd&lt;SSE3,DTES64,MON,DS_CPL,VMX,SMX,EST,TM2,SSSE3,CX16,xTPR,PDCM,SSE4.1&gt;
  AMD Features=0x20100800&lt;SYSCALL,NX,LM&gt;
  AMD Features2=0x1&lt;LAHF&gt;
  TSC: P-state invariant, performance statistics
real memory  = 3221225472 (3072 MB)
avail memory = 2926649344 (2791 MB)
Event timer "LAPIC" quality 400
ACPI APIC Table: &lt;TOSHIB A0064   &gt;
FreeBSD/SMP: Multiprocessor System Detected: 2 CPUs
FreeBSD/SMP: 1 package(s) x 2 core(s)
 cpu0 (BSP): APIC ID:  0
 cpu1 (AP): APIC ID:  1
ioapic0: Changing APIC ID to 1
ioapic0 &lt;Version 2.0&gt; irqs 0-23 on motherboard
kbd1 at kbdmux0
acpi0: &lt;TOSHIB A0064&gt; on motherboard
acpi0: Power Button (fixed)
acpi0: reservation of 0, a0000 (3) failed
acpi0: reservation of 100000, b6690000 (3) failed
Timecounter "ACPI-safe" frequency 3579545 Hz quality 850
acpi_timer0: &lt;24-bit timer at 3.579545MHz&gt; port 0xd808-0xd80b on acpi0
cpu0: &lt;ACPI CPU&gt; on acpi0
ACPI Warning: Incorrect checksum in table [ASF!] - 0xFE, should be 0x9A (20110527/tbutils-282)
cpu1: &lt;ACPI CPU&gt; on acpi0
pcib0: &lt;ACPI Host-PCI bridge&gt; port 0xcf8-0xcff on acpi0
pci0: &lt;ACPI PCI bus&gt; on pcib0
vgapci0: &lt;VGA-compatible display&gt; port 0xcff8-0xcfff mem 0xff400000-0xff7fffff,0xe0000000-0xefffffff irq 16 at device 2.0 on pci0
agp0: &lt;Intel GM45 SVGA controller&gt; on vgapci0
agp0: aperture size is 256M, detected 131068k stolen memory
vgapci1: &lt;VGA-compatible display&gt; mem 0xffc00000-0xffcfffff at device 2.1 on pci0
pci0: &lt;simple comms&gt; at device 3.0 (no driver attached)
em0: &lt;Intel(R) PRO/1000 Network Connection 7.2.3&gt; port 0xcf80-0xcf9f mem 0xff9c0000-0xff9dffff,0xff9fe000-0xff9fefff irq 20 at device 25.0 on pci0
em0: Using an MSI interrupt
em0: Ethernet address: 00:1c:7e:6a:ca:b0
uhci0: &lt;Intel 82801I (ICH9) USB controller&gt; port 0xcf60-0xcf7f irq 16 at device 26.0 on pci0
usbus0: &lt;Intel 82801I (ICH9) USB controller&gt; on uhci0
uhci1: &lt;Intel 82801I (ICH9) USB controller&gt; port 0xcf40-0xcf5f irq 21 at device 26.1 on pci0
usbus1: &lt;Intel 82801I (ICH9) USB controller&gt; on uhci1
uhci2: &lt;Intel 82801I (ICH9) USB controller&gt; port 0xcf20-0xcf3f irq 19 at device 26.2 on pci0
usbus2: &lt;Intel 82801I (ICH9) USB controller&gt; on uhci2
ehci0: &lt;Intel 82801I (ICH9) USB 2.0 controller&gt; mem 0xff9ff800-0xff9ffbff irq 19 at device 26.7 on pci0
usbus3: EHCI version 1.0
usbus3: &lt;Intel 82801I (ICH9) USB 2.0 controller&gt; on ehci0
hdac0: &lt;Intel 82801I High Definition Audio Controller&gt; mem 0xff9f8000-0xff9fbfff irq 22 at device 27.0 on pci0
pcib1: &lt;ACPI PCI-PCI bridge&gt; irq 17 at device 28.0 on pci0
pci1: &lt;ACPI PCI bus&gt; on pcib1
iwn0: &lt;Intel(R) WiFi Link 5100&gt; mem 0xff8fe000-0xff8fffff irq 16 at device 0.0 on pci1
pcib2: &lt;ACPI PCI-PCI bridge&gt; irq 16 at device 28.1 on pci0
pci2: &lt;ACPI PCI bus&gt; on pcib2
pcib3: &lt;ACPI PCI-PCI bridge&gt; irq 18 at device 28.2 on pci0
pci4: &lt;ACPI PCI bus&gt; on pcib3
pcib4: &lt;ACPI PCI-PCI bridge&gt; at device 30.0 on pci0
pci5: &lt;ACPI PCI bus&gt; on pcib4
cbb0: &lt;RF5C476 PCI-CardBus Bridge&gt; at device 11.0 on pci5
cardbus0: &lt;CardBus bus&gt; on cbb0
pccard0: &lt;16-bit PCCard bus&gt; on cbb0
isab0: &lt;PCI-ISA bridge&gt; at device 31.0 on pci0
isa0: &lt;ISA bus&gt; on isab0
ahci0: &lt;Intel ICH9M AHCI SATA controller&gt; port 0x8f58-0x8f5f,0x8f54-0x8f57,0x8f48-0x8f4f,0x8f44-0x8f47,0x8f20-0x8f3f mem 0xff9fd800-0xff9fdfff irq 19 at device 31.2 on pci0
ahci0: AHCI v1.20 with 4 3Gbps ports, Port Multiplier not supported
ahcich0: &lt;AHCI channel&gt; at channel 0 on ahci0
ahcich1: &lt;AHCI channel&gt; at channel 1 on ahci0
ahcich2: &lt;AHCI channel&gt; at channel 4 on ahci0
acpi_lid0: &lt;Control Method Lid Switch&gt; on acpi0
battery0: &lt;ACPI Control Method Battery&gt; on acpi0
acpi_button0: &lt;Power Button&gt; on acpi0
acpi_acad0: &lt;AC Adapter&gt; on acpi0
acpi_toshiba0: &lt;Toshiba HCI Extras&gt; on acpi0
acpi_tz0: &lt;Thermal Zone&gt; on acpi0
attimer0: &lt;AT timer&gt; port 0x40-0x43 irq 0 on acpi0
Timecounter "i8254" frequency 1193182 Hz quality 0
Event timer "i8254" frequency 1193182 Hz quality 100
atkbdc0: &lt;Keyboard controller (i8042)&gt; port 0x60,0x64 irq 1 on acpi0
atkbd0: &lt;AT Keyboard&gt; irq 1 on atkbdc0
kbd0 at atkbd0
atkbd0: [GIANT-LOCKED]
psm0: &lt;PS/2 Mouse&gt; irq 12 on atkbdc0
psm0: [GIANT-LOCKED]
psm0: model GlidePoint, device ID 0
atrtc0: &lt;AT realtime clock&gt; port 0x70-0x71 irq 8 on acpi0
Event timer "RTC" frequency 32768 Hz quality 0
hpet0: &lt;High Precision Event Timer&gt; iomem 0xfed00000-0xfed003ff on acpi0
Timecounter "HPET" frequency 14318180 Hz quality 950
Event timer "HPET" frequency 14318180 Hz quality 450
Event timer "HPET1" frequency 14318180 Hz quality 440
Event timer "HPET2" frequency 14318180 Hz quality 440
Event timer "HPET3" frequency 14318180 Hz quality 440
uart0: &lt;16550 or compatible&gt; port 0x3f8-0x3ff irq 4 flags 0x10 on acpi0
sc0: &lt;System console&gt; at flags 0x100 on isa0
sc0: VGA &lt;16 virtual consoles, flags=0x300&gt;
vga0: &lt;Generic ISA VGA&gt; at port 0x3c0-0x3df iomem 0xa0000-0xbffff on isa0
ppc0: cannot reserve I/O port range
est0: &lt;Enhanced SpeedStep Frequency Control&gt; on cpu0
p4tcc0: &lt;CPU Frequency Thermal Control&gt; on cpu0
est1: &lt;Enhanced SpeedStep Frequency Control&gt; on cpu1
p4tcc1: &lt;CPU Frequency Thermal Control&gt; on cpu1
Timecounters tick every 1.000 msec
hdac0: HDA Codec #0: Realtek ALC268
hdac0: HDA Codec #1: Lucent/Agere Systems (Unknown)
pcm0: &lt;HDA Realtek ALC268 PCM #0 Analog&gt; at cad 0 nid 1 on hdac0
pcm1: &lt;HDA Realtek ALC268 PCM #1 Analog&gt; at cad 0 nid 1 on hdac0
usbus0: 12Mbps Full Speed USB v1.0
usbus1: 12Mbps Full Speed USB v1.0
usbus2: 12Mbps Full Speed USB v1.0
usbus3: 480Mbps High Speed USB v2.0
ugen0.1: &lt;Intel&gt; at usbus0
uhub0: &lt;Intel UHCI root HUB, class 9/0, rev 1.00/1.00, addr 1&gt; on usbus0
ugen1.1: &lt;Intel&gt; at usbus1
uhub1: &lt;Intel UHCI root HUB, class 9/0, rev 1.00/1.00, addr 1&gt; on usbus1
ugen2.1: &lt;Intel&gt; at usbus2
uhub2: &lt;Intel UHCI root HUB, class 9/0, rev 1.00/1.00, addr 1&gt; on usbus2
ugen3.1: &lt;Intel&gt; at usbus3
uhub3: &lt;Intel EHCI root HUB, class 9/0, rev 2.00/1.00, addr 1&gt; on usbus3
uhub0: 2 ports with 2 removable, self powered
uhub1: 2 ports with 2 removable, self powered
uhub2: 2 ports with 2 removable, self powered
uhub3: 6 ports with 6 removable, self powered
ugen2.2: &lt;vendor 0x0b97&gt; at usbus2
uhub8: &lt;vendor 0x0b97 product 0x7761, class 9/0, rev 1.10/1.10, addr 2&gt; on usbus2
ugen1.2: &lt;Microsoft&gt; at usbus1
ada0 at ahcich0 bus 0 scbus1 target 0 lun 0
ada0: &lt;Hitachi HTS543225L9SA00 FBEOC43C&gt; ATA-8 SATA 1.x device
ada0: 150.000MB/s transfers (SATA 1.x, UDMA6, PIO 8192bytes)
ada0: Command Queueing enabled
ada0: 238475MB (488397168 512 byte sectors: 16H 63S/T 16383C)
ada0: Previously was known as ad4
ums0: &lt;Microsoft Microsoft 3-Button Mouse with IntelliEyeTM, class 0/0, rev 1.10/3.00, addr 2&gt; on usbus1
SMP: AP CPU #1 Launched!
cd0 at ahcich1 bus 0 scbus2 target 0 lun 0
cd0: &lt;TEAC DV-W28S-RT 7.0C&gt; Removable CD-ROM SCSI-0 device
cd0: 150.000MB/s transfers (SATA 1.x, ums0: 3 buttons and [XYZ] coordinates ID=0
UDMA2, ATAPI 12bytes, PIO 8192bytes)
cd0: cd present [1 x 2048 byte records]
ugen0.2: &lt;Microsoft&gt; at usbus0
ukbd0: &lt;Microsoft Natural Ergonomic Keyboard 4000, class 0/0, rev 2.00/1.73, addr 2&gt; on usbus0
kbd2 at ukbd0
uhid0: &lt;Microsoft Natural Ergonomic Keyboard 4000, class 0/0, rev 2.00/1.73, addr 2&gt; on usbus0
Trying to mount root from cd9660:/dev/iso9660/FREEBSD_INSTALL [ro]...</screen>
      </figure>

      <para>Check the probe results carefully to make sure that &os;
	found all the devices you expected.  If a device was not
	found, then it will not be listed.  <link
	  linkend="kernelconfig-modules">Kernel modules</link> allows
	you to add in support for devices which are not in the
	<filename>GENERIC</filename> kernel.</para>

      <para>After the procedure of device probing, you will see
	<xref linkend="bsdinstall-choose-mode">.  The install media
	can be used in three ways: to install &os;, as a "live CD", or
	to simply access a &os; shell.  Use the arrow keys to choose
	an option, and <keycap>Enter</keycap> to select.</para>

      <figure id="bsdinstall-choose-mode">
	<title>Selecting Installation Media Mode</title>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="bsdinstall/bsdinstall-choose-mode"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>Selecting <guibutton>[&nbsp;Install&nbsp;]</guibutton>
	here will enter the installer.</para>
    </sect2>
  </sect1>

  <sect1 id="using-bsdinstall">
    <title>Introducing <application>bsdinstall</application></title>

    <para><application>bsdinstall</application> is a text-based &os;
      installer program written by &a.nwhitehorn; and introduced in
      2011 for &os;&nbsp;9.0.</para>

    <note>
      <para>&a.kmoore;'s <application>pc-sysinstall</application> is
	included with <ulink url="http://pcbsd.org">PC-BSD</ulink>,
	and can also be used to <ulink
	  url="http://wiki.pcbsd.org/index.php/Use_PC-BSD_Installer_to_Install_FreeBSD">
	  install &os;</ulink>.  Although sometimes confused with
	<application>bsdinstall</application>, the two are not
	related.</para>
    </note>

    <para>The <application>bsdinstall</application> menu system is
      controlled by the arrow keys, <keycap>Enter</keycap>,
      <keycap>Tab</keycap>, <keycap>Space</keycap>, and other
      keys.</para>

    <sect2 id="bsdinstall-keymap">
      <title>Selecting the Keymap Menu</title>

      <para>Depending on the system console being used,
	<application>bsdinstall</application> may initially prompt to
	select a non-default keyboard layout.</para>

      <figure id="bsdinstall-keymap-select-default">
	<title>Keymap Selection</title>
	<mediaobject>
	  <imageobject>
	    <imagedata
	      fileref="bsdinstall/bsdinstall-keymap-select-default"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>If <guibutton>[&nbsp;YES&nbsp;]</guibutton> is selected,
	the following keyboard selection screen will be displayed.
	Otherwise, this selection menu will not be displayed, and a
	default keyboard mapping will be used.</para>

      <figure id="bsdinstall-config-keymap">
	<title>Selecting Keyboard Menu</title>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="bsdinstall/bsdinstall-config-keymap"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>Select the keymap that most closely represents the mapping
	of the keyboard attached to the system, using the up/down
	arrow keys and pressing <keycap>Enter</keycap>.</para>

      <note>
	<para>Pressing <keycap>Esc</keycap> will use the default
	  keymap.  <guimenuitem>United States of America
	    ISO-8859-1</guimenuitem> is also a safe option if the
	  choice of keymap is not clear.</para>
      </note>
    </sect2>

    <sect2 id="bsdinstall-hostname">
      <title>Setting the Hostname</title>

      <para>Next, <application>bsdinstall</application> will prompt
	for the hostname to be given to the newly installed
	system.</para>

      <figure id="bsdinstall-config-hostname">
	<title>Setting the Hostname</title>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="bsdinstall/bsdinstall-config-hostname"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>The entered hostname should be a fully-qualified hostname,
	such as
	<hostid role="fqdn">machine3.example.com</hostid></para>
    </sect2>

    <sect2 id="bsdinstall-components">
      <title>Selecting Components to Install</title>

      <para>Next, <application>bsdinstall</application> will prompt to
	select optional components to install.</para>

      <figure id="bsdinstall-config-components">
	<title>Selecting Components to Install</title>
	<mediaobject>
	  <imageobject>
	    <imagedata
	      fileref="bsdinstall/bsdinstall-config-components"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>Deciding which components to install will depend largely
	on the intended use of the system and the amount of disk space
	available.  The &os; Kernel and userland (collectively the
	<quote>base system</quote>) are always installed.</para>

      <para>Depending on the type of installation, some of these
	components may not appear.</para>

      <itemizedlist>
	<title>Optional Components</title>

	<listitem>
	  <para><literal>doc</literal> - Additional documentation,
	    mostly of historical interest.  Documentation provided by
	    the &os; Documentation Project may be installed
	    later.</para>
	</listitem>

	<listitem>
	  <para><literal>games</literal> - Several traditional BSD
	    games, including <application>fortune</application>,
	    <application>rot13</application>, and others.</para>
	</listitem>

	<listitem>
	  <para><literal>lib32</literal> - Compatibility libraries for
	    running 32-bit applications on a 64-bit version of
	    &os;.</para>
	</listitem>

	<listitem>
	  <para><literal>ports</literal> - The &os; Ports
	    Collection.</para>

	  <para>The ports collection is an easy and convenient way to
	    install software.  The Ports Collection does not contain
	    the source code necessary to compile the software.
	    Instead, it is a collection of files which automates the
	    downloading, compiling and installation of third-party
	    software packages.  <xref linkend="ports"> discusses how
	    to use the ports collection.</para>

	  <warning>
	    <para>The installation program does not check to see if
	      you have adequate space.  Select this option only if you
	      have adequate hard disk space.  As of &os;&nbsp;9.0, the
	      &os; Ports Collection takes up about &ports.size; of
	      disk space.  You can safely assume a larger value for
	      more recent versions of &os;.</para>
	  </warning>
	</listitem>

	<listitem>
	  <para><literal>src</literal> - System source code.</para>

	  <para>&os; comes with full source code for both the kernel
	    and the userland.  Although not required for the majority
	    of applications, it may be required to build certain
	    software supplied as source (for example, device drivers
	    or kernel modules), or for developing &os; itself.</para>

	  <para>The full source tree requires 1&nbsp;GB of disk space,
	    and recompiling the entire &os; system requires an
	    additional 5&nbsp;GB of space.</para>
	</listitem>
      </itemizedlist>
    </sect2>
  </sect1>

  <sect1 id="bsdinstall-netinstall">
    <title>Installing from the Network</title>

    <para>The <emphasis>bootonly</emphasis> installation media does
      not hold copies of the installation files.  When a
      <emphasis>bootonly</emphasis> installation method is used, the
      files must be retrieved over a network connection as they are
      needed.</para>

    <figure id="bsdinstall-netinstall-notify">
      <title>Installing from the Network</title>

      <mediaobject>
	<imageobject>
	  <imagedata fileref="bsdinstall/bsdinstall-netinstall-files"
	    format="PNG">
	</imageobject>
      </mediaobject>
    </figure>

    <para>After the network connection has been configured as shown in
      <xref linkend="bsdinstall-config-network-dev">, a mirror site is
      selected.  Mirror sites cache copies of the &os; files.  Choose
      a mirror site located in the same region of the world as the
      computer on which &os; is being installed.  Files can be
      retrieved more quickly when the mirror is close to the target
      computer, and installation time will be reduced.</para>

    <figure id="bsdinstall-netinstall-mirror">
      <title>Choosing a Mirror</title>

      <mediaobject>
	<imageobject>
	  <imagedata
	    fileref="bsdinstall/bsdinstall-netinstall-mirrorselect"
	    format="PNG">
	</imageobject>
      </mediaobject>
    </figure>

    <para>Installation will continue as if the installation files
      were located on local media.</para>
  </sect1>

  <sect1 id="bsdinstall-partitioning">
    <title>Allocating Disk Space</title>

    <para>There are three ways to allocate disk space for &os;.
      <emphasis>Guided</emphasis> partitioning automatically sets up
      disk partitions, while <emphasis>Manual</emphasis> partitioning
      allows advanced users to create customized partitions.  Finally,
      there's the option of starting a shell where command-line
      programs like &man.gpart.8;, &man.fdisk.8;, and &man.bsdlabel.8;
      can be used directly.</para>
    <!-- WB: mention ZFS here? -->

    <figure id="bsdinstall-part-guided-manual">
      <title>Selecting Guided or Manual Partitioning</title>

      <mediaobject>
	<imageobject>
	  <imagedata
	    fileref="bsdinstall/bsdinstall-part-guided-manual"
	    format="PNG">
	</imageobject>
      </mediaobject>
    </figure>

    <sect2 id="bsdinstall-part-guided">
      <title>Guided Partitioning</title>

      <para>If multiple disks are connected, choose the one where &os;
	is to be installed.</para>

      <figure id="bsdinstall-part-guided-disk">
	<title>Selecting from Multiple Disks</title>
	<mediaobject>
	  <imageobject>
	    <imagedata
	      fileref="bsdinstall/bsdinstall-part-guided-disk"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>The entire disk can be allocated to &os;, or just a
	portion of it.  If
	<guibutton>[&nbsp;Entire&nbsp;Disk&nbsp;]</guibutton> is
	chosen, a general partition layout filling the whole disk is
	created.  Selecting
	<guibutton>[&nbsp;Partition&nbsp;]</guibutton> creates a
	partition layout in unused space on the disk.</para>

      <figure id="bsdinstall-part-entire-part">
	<title>Selecting Entire Disk or Partition</title>

	<mediaobject>
	  <imageobject>
	    <imagedata
	      fileref="bsdinstall/bsdinstall-part-entire-part"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>After the partition layout has been created, review it
	carefully for accuracy.  If a mistake has been made, selecting
	<guibutton>[&nbsp;Revert&nbsp;]</guibutton> will reset the
	partitions as they were previously, or
	<guibutton>[&nbsp;Auto&nbsp;]</guibutton> will recreate the
	automatic &os; partitions.  Partitions can be manually
	created, modified, or deleted.  When the partitioning is
	correct, select <guibutton>[&nbsp;Finish&nbsp;]</guibutton> to
	continue with the installation.</para>

      <figure id="bsdinstall-part-review">
	<title>Review Created Partitions</title>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="bsdinstall/bsdinstall-part-review"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>
    </sect2>

    <sect2 id="bsdinstall-part-manual">
      <title>Manual Partitioning</title>

      <para>Manual partitioning goes straight to the partition
	editor.</para>

      <figure id="bsdinstall-part-manual-create">
	<title>Manually Create Partitions</title>

	<mediaobject>
	  <imageobject>
	    <imagedata
	      fileref="bsdinstall/bsdinstall-part-manual-create"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>Highlighting a drive (<devicename>ada0</devicename> in
	this example) and selecting
	<guibutton>[&nbsp;Create&nbsp;]</guibutton> displays a menu
	for choosing the type of <firstterm>partitioning
	  scheme</firstterm>.</para>

      <figure id="bsdinstall-part-manual-partscheme">
	<title>Manually Create Partitions</title>

	<mediaobject>
	  <imageobject>
	    <imagedata
	      fileref="bsdinstall/bsdinstall-part-manual-partscheme"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para><acronym>GPT</acronym> partitioning is usually the most
	appropriate choice for PC-compatible computers.  Older PC
	operating systems that are not compatible with
	<acronym>GPT</acronym> may require <acronym>MBR</acronym>
	partitioning instead.  The other partitioning schemes are
	generally used for uncommon or older computer systems.</para>

      <table frame="none" rowsep="1" pgwide="1">
	<title>Partitioning Schemes</title>

	<tgroup cols="2" align="left">
	  <thead>
	    <row>
	      <entry align="left">Abbreviation</entry>
	      <entry align="left">Description</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry>APM</entry>
	      <entry><ulink
		  url="http://support.apple.com/kb/TA21692">Apple
		  Partition Map, used by &powerpc;
		  &macintosh;.</ulink></entry>
	    </row>

	    <row>
	      <entry>BSD</entry>
	      <entry>BSD Labels without an MBR, sometimes called
		"dangerously dedicated mode".  See
		&man.bsdlabel.8;.</entry>
	    </row>

	    <row>
	      <entry>GPT</entry>
	      <entry><ulink
		  url="http://en.wikipedia.org/wiki/GUID_Partition_Table">GUID
		  Partition Table.</ulink></entry>
	    </row>

	    <row>
	      <entry>MBR</entry>
	      <entry><ulink
		  url="http://en.wikipedia.org/wiki/Master_boot_record">Master
		  Boot Record.</ulink></entry>
	    </row>

	    <row>
	      <entry>PC98</entry>
	      <entry><ulink
		  url="http://en.wikipedia.org/wiki/Pc9801">MBR
		  variant, used by NEC PC-98
		  computers.</ulink></entry>
	    </row>

	    <row>
	      <entry>VTOC8</entry>
	      <entry>Volume Table Of Contents, used by Sun SPARC64 and
		UltraSPARC computers.</entry>
	    </row>
	  </tbody>
	</tgroup>
      </table>

      <para>After the partitioning scheme has been selected and
	created, selecting <guibutton>[&nbsp;Create&nbsp;]</guibutton>
	again will create new partitions.</para>

      <figure id="bsdinstall-part-manual-addpart">
	<title>Manually Create Partitions</title>

	<mediaobject>
	  <imageobject>
	    <imagedata
	      fileref="bsdinstall/bsdinstall-part-manual-addpart"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>A standard &os; <acronym>GPT</acronym> installation uses
	at least three partitions:</para>

      <itemizedlist>
	<title>Standard &os; <acronym>GPT</acronym> Partitions</title>

	<listitem>
	  <para><literal>freebsd-boot</literal> - &os; boot
	    code.</para>
	</listitem>

	<listitem>
	  <para><literal>freebsd-ufs</literal> - A &os; UFS
	    filesystem.</para>
	</listitem>

	<listitem>
	  <para><literal>freebsd-zfs</literal> - A &os; ZFS
	    filesystem.  See <xref linkend="filesystems-zfs">.</para>
	</listitem>

	<listitem>
	  <para><literal>freebsd-swap</literal> - &os; swap
	    space.</para>
	</listitem>
      </itemizedlist>

      <para>Multiple filesystem partitions can be used, and some
	people may prefer a traditional layout with separate
	partitions for the <filename>/</filename>,
	<filename>/var</filename>, <filename>/tmp</filename>, and <filename>/usr</filename>
	filesystems.  See <xref
	  linkend="bsdinstall-part-manual-splitfs"> for an
	example.</para>

      <para>See &man.gpart.8; for a complete list of available
	<acronym>GPT</acronym> partition types.</para>

      <para>Size may be entered with common abbreviations:
	<emphasis>K</emphasis> for kilobytes, <emphasis>M</emphasis>
	for megabytes, or <emphasis>G</emphasis> for gigabytes.</para>

      <tip>
	<para>Proper sector alignment provides the best performance,
	  and making partition sizes even multiples of 4K bytes helps
	  to ensure alignment on drives with either 512-byte or
	  4K-byte sectors.  Generally, using partition sizes that are
	  even multiples of 1M or 1G is the easiest way to make sure
	  every partition starts at an even multiple of 4K.  One
	  exception: at present, the <emphasis>freebsd-boot</emphasis>
	  partition should be no larger than 512K due to boot code
	  limitations.</para>
      </tip>

      <para>A mountpoint is needed if this partition will contain a
	filesystem.  If only a single UFS partition will be created,
	the mountpoint should be <filename>/</filename>.</para>

      <para>A <firstterm>label</firstterm> is also requested.  A label
	is a name by which this partition will be known.  Drive
	names or numbers can change if the drive is connected to
	a different controller or port, but the partition label does
	not change.  Referring to labels instead of drive names
	and partition numbers in files like
	<filename>/etc/fstab</filename> makes the system more tolerant
	of changing hardware.  GPT labels appear in
	<filename>/dev/gpt/</filename> when a disk is attached.
	Other partitioning schemes have different label
	capabilities, and their labels appear in different directories
	in <filename>/dev/</filename>.</para>

      <tip>
	<para>Use a unique label on every filesystem to avoid
	  conflicts from identical labels.  A few letters from the
	  computer's name, use, or location can be added to the label.
	  "labroot" or "rootfs-lab" for the UFS root partition on the
	  lab's computer, for example.</para>
      </tip>

      <example id="bsdinstall-part-manual-splitfs">
	<title>Creating Traditional Split Filesystem
	  Partitions</title>

	<para>For a traditional partition layout where the
	  <filename>/</filename>, <filename>/var</filename>,
	  <filename>/tmp</filename>, and <filename>/usr</filename>
	  directories are separate filesystems on their own
	  partitions, create a GPT partitioning scheme, then create
	  the partitions as shown.  Partition sizes shown are typical
	  for a 20G target disk.  If more space is available on the
	  target disk, larger swap or <filename>/var</filename>
	  partitions may be useful.  Labels shown here are prefixed
	  with <literal>ex</literal> for "example", but readers
	  should use other unique label values as described
	  above.</para>

	<para>By default, &os;'s <filename>gptboot</filename> expects
	  the first UFS partition found to be the
	  <filename>/</filename> partition.</para>

	<informaltable frame="none">
	  <tgroup cols="4">
	    <thead>
	      <row>
		<entry>Partition Type</entry>
		<entry>Size</entry>
		<entry>Mountpoint</entry>
		<entry>Label</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry><literal>freebsd-boot</literal></entry>
		<entry><literal>512K</literal></entry>
	      </row>

	      <row>
		<entry><literal>freebsd-ufs</literal></entry>
		<entry><literal>2G</literal></entry>
		<entry><filename>/</filename></entry>
		<entry><literal>exrootfs</literal></entry>
	      </row>

	      <row>
		<entry><literal>freebsd-swap</literal></entry>
		<entry><literal>4G</literal></entry>
		<entry></entry>
		<entry><literal>exswap</literal></entry>
	      </row>

	      <row>
		<entry><literal>freebsd-ufs</literal></entry>
		<entry><literal>2G</literal></entry>
		<entry><filename>/var</filename></entry>
		<entry><literal>exvarfs</literal></entry>
	      </row>

	      <row>
		<entry><literal>freebsd-ufs</literal></entry>
		<entry><literal>1G</literal></entry>
		<entry><filename>/tmp</filename></entry>
		<entry><literal>extmpfs</literal></entry>
	      </row>

	      <row>
		<entry><literal>freebsd-ufs</literal></entry>
		<entry>accept the default (remainder of the
		  disk)</entry>
		<entry><filename>/usr</filename></entry>
		<entry><literal>exusrfs</literal></entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>
      </example>

      <para>After the custom partitions have been created, select
	<guibutton>[&nbsp;Finish&nbsp;]</guibutton> to continue with
	the installation.</para>
    </sect2>
  </sect1>

  <sect1 id="bsdinstall-final-warning">
    <title>Committing to the Installation</title>

    <para>This is the last chance for aborting the installation to
      prevent changes to the hard drive.</para>

    <figure id="bsdinstall-final-confirmation">
      <title>Final Confirmation</title>

      <mediaobject>
	<imageobject>
	  <imagedata
	    fileref="bsdinstall/bsdinstall-final-confirmation"
	    format="PNG">
	</imageobject>
      </mediaobject>
    </figure>

    <para>Select <guibutton>[&nbsp;Commit&nbsp;]</guibutton> and press
      <keycap>Enter</keycap> to proceed.  If changes need to be made,
      select <guibutton>[&nbsp;Back&nbsp;]</guibutton> to return to
      the partition editor.
      <guibutton>[&nbsp;Revert&nbsp;&amp;&nbsp;Exit&nbsp;]
      </guibutton> will exit the installer without making any changes
      to the hard drive.</para>

    <para>Installation time will vary depending on the distributions
      chosen, installation media, and speed of the computer.
      There will be a series of
      messages displayed indicating progress.</para>

    <para>Firstly, the installer will write the partitions to the
      disk, and perform a <command>newfs</command> to initialise the
      partitions.</para>

    <para>If doing a network install,
      <application>bsdinstall</application> will then proceed to
      download the required distribution files.</para>
    <!-- XXXGA: What does it do if fetch fails? -->

    <figure id="bsdinstall-distfile-fetching">
      <title>Fetching Distribution Files</title>

      <mediaobject>
	<imageobject>
	  <imagedata fileref="bsdinstall/bsdinstall-distfile-fetching"
	    format="PNG">
	</imageobject>
      </mediaobject>
    </figure>

    <para>Next, the integrity of the distribution files is verified,
      to ensure they have not been corrupted during download or
      misread from the installation media.</para>

    <figure id="bsdinstall-distfile-verify">
      <title>Verifying Distribution Files</title>

      <mediaobject>
	<imageobject>
	  <imagedata
	    fileref="bsdinstall/bsdinstall-distfile-verifying"
	    format="PNG">
	</imageobject>
      </mediaobject>
    </figure>

    <para>Finally, the verified distribution files are extracted to
      the disk.</para>

    <figure id="bsdinstall-distfile-extract">
      <title>Extracting Distribution Files</title>

      <mediaobject>
	<imageobject>
	  <imagedata
	    fileref="bsdinstall/bsdinstall-distfile-extracting"
	    format="PNG">
	</imageobject>
      </mediaobject>
    </figure>

    <para>Once all requested distribution files have been extracted,
      <application>bsdinstall</application> will then drop straight
      into the post-installation configuration tasks (see
      <xref linkend="bsdinstall-post">).</para>
  </sect1>

  <sect1 id="bsdinstall-post">
    <title>Post-Installation</title>

    <para>Configuration of various options follows a successful
      installation of &os;.  An option can be configured by
      re-entering the configuration options from the final menu before
      booting into the newly installed &os; system.</para>

    <sect2 id="bsdinstall-post-root">
      <title>Setting the <username>root</username> Password</title>

      <para>The <username>root</username> password must be set.  Note
	that while entering the password, the characters being typed
	are not displayed on the screen.  After the password has been
	entered, it must be entered again.  This helps prevent typing
	errors.</para>

      <figure id="bsdinstall-post-set-root-passwd">
	<title>Setting the <username>root</username> Password</title>

	<mediaobject>
	  <imageobject>
	    <imagedata
	      fileref="bsdinstall/bsdinstall-post-root-passwd"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>After the password has been successfully entered, the
	installation will continue.</para>
    </sect2>

    <sect2 id="bsdinstall-config-network-dev">
      <title>Configuring Network Interfaces</title>

      <note>
	<para>Network configuration will be skipped if it has already
	  been done as part of a <emphasis>bootonly</emphasis>
	  installation.</para>
      </note>

      <para>A list of all the network interfaces found on the computer
	is shown next.  Select one to be configured.</para>

      <figure id="bsdinstall-configure-net-interface">
	<title>Choose a Network Interface</title>

	<mediaobject>
	  <imageobject>
	    <imagedata
	      fileref="bsdinstall/bsdinstall-configure-network-interface"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <sect3 id="bsdinstall-configure-net-wireless">
	<title>Configuring a Wireless Network Interface</title>

	<para>If a wireless network interface is chosen, wireless
	  identification and security parameters must be entered to
	  allow it to connect to the network.</para>

	<para>Wireless networks are identified by a Service Set
	  Identifier, or <acronym role="Service Set Identifier">
	  SSID</acronym>.  The <acronym role="Service Set
	  Identifier">SSID</acronym> is a short, unique name given to
	  each network.</para>

	<para>Most wireless networks encrypt transmitted data to
	  protect information from unauthorized viewing.  <acronym
	    role="Wi-Fi Protected Access II">WPA2</acronym> encryption
	  is strongly recommended.  Older encryption types, like
	  <acronym role="Wired Equivalent Privacy">WEP</acronym>,
	  offer very little security.</para>

	<para>The first step in connecting to a wireless network is to
	  scan for wireless access points.</para>

	<figure id="bsdinstall-wireless-scan">
	  <title>Scanning for Wireless Access Points</title>

	  <mediaobject>
	    <imageobject>
	      <imagedata
		fileref="bsdinstall/bsdinstall-configure-wireless-scan"
		format="PNG">
	    </imageobject>
	  </mediaobject>
	</figure>

	<para><acronym role="Service Set Identifiers">SSIDs</acronym>
	  found during the scan are listed, followed by a description
	  of the encryption types available for that network.  If the
	  desired <acronym role="Service Set
	    Identifier">SSID</acronym> doesn't appear in the list,
	  select <guibutton>[&nbsp;Rescan&nbsp;]</guibutton> to scan
	  again.  If the desired network still does not appear, check
	  for problems with antenna connections or try moving the
	  computer closer to the access point.  Rescan after each
	  change is made.</para>

	<figure id="bsdinstall-wireless-accesspoints">
	  <title>Choosing a Wireless Network</title>

	  <mediaobject>
	    <imageobject>
	      <imagedata
		fileref="bsdinstall/bsdinstall-configure-wireless-accesspoints"
		format="PNG">
	    </imageobject>
	  </mediaobject>
	</figure>

	<para>The encryption information for connecting to the
	  selected wireless network is entered after selecting the
	  network.  With <acronym role="Wi-Fi Protected Access
	    II">WPA2</acronym>, only a password (also known as the
	  Pre-Shared Key, or <acronym role="Pre-Shared
	    Key">PSK</acronym>) is needed.  Characters typed into the
	  input box are shown as asterisks for security.</para>

	<figure id="bsdinstall-wireless-wpa2">
	  <title>WPA2 Setup</title>

	  <mediaobject>
	    <imageobject>
	      <imagedata
		fileref="bsdinstall/bsdinstall-configure-wireless-wpa2setup"
		format="PNG">
	    </imageobject>
	  </mediaobject>
	</figure>

	<para>Network configuration continues after selection of the
	  wireless network and entry of the connection
	  information.</para>
      </sect3>

      <sect3 id="bsdinstall-ipv4">
	<title>Configuring IPv4 Networking</title>

	<para>Choose whether IPv4 networking is to be used.  This is
	  the most common type of network connection.</para>

	<figure id="bsdinstall-configure-net-ipv4">
	  <title>Choose IPv4 Networking</title>

	  <mediaobject>
	    <imageobject>
	      <imagedata
		fileref="bsdinstall/bsdinstall-configure-network-interface-ipv4"
		format="PNG">
	    </imageobject>
	  </mediaobject>
	</figure>

	<para>There are two methods of IPv4 configuration.
	  <firstterm><acronym role="Dynamic Host Configuration
	    Protocol">DHCP</acronym></firstterm> will automatically
	  configure the network interface correctly, and is the
	  preferred method.  <firstterm>Static</firstterm>
	  configuration requires manual entry of network
	  information.</para>

	<note>
	  <para>Do not enter random network information, as it will
	    not work.  Obtain the information shown in
	    <xref linkend="bsdinstall-collect-network-information">
	    from the network administrator or service provider.</para>
	</note>

	<sect4 id="bsdinstall-net-ipv4-dhcp-config">
	  <title>IPv4 DHCP Network Configuration</title>

	  <para>If a DHCP server is available, select
	    <guibutton>[&nbsp;Yes&nbsp;]</guibutton> to automatically
	    configure the network interface.</para>

	  <figure id="bsdinstall-net-ipv4-dhcp">
	    <title>Choose IPv4 DHCP Configuration</title>

	    <mediaobject>
	      <imageobject>
		<imagedata
		  fileref="bsdinstall/bsdinstall-configure-network-interface-ipv4-dhcp"
		  format="PNG">
	      </imageobject>
	    </mediaobject>
	  </figure>
	</sect4>

	<sect4 id="bsdinstall-net-ipv4-static-config">
	  <title>IPv4 Static Network Configuration</title>

	  <para>Static configuration of the network interface requires
	    entry of some IPv4 information.</para>

	  <figure id="bsdinstall-net-ipv4-static">
	    <title>IPv4 Static Configuration</title>

	    <mediaobject>
	      <imageobject>
		<imagedata
		  fileref="bsdinstall/bsdinstall-configure-network-interface-ipv4-static"
		  format="PNG">
	      </imageobject>
	    </mediaobject>
	  </figure>

	  <itemizedlist>
	    <listitem>
	      <para><literal>IP Address</literal> - The
		manually-assigned IPv4 address to be assigned to this
		computer.  This address must be unique and not already
		in use by another piece of equipment on the local
		network.</para>
	    </listitem>

	    <listitem>
	      <para><literal>Subnet Mask</literal> - The subnet mask
		used for the local network.  Typically, this is
		<literal>255.255.255.0</literal>.</para>
	    </listitem>

	    <listitem>
	      <para><literal>Default Router</literal> - The IP address
		of the default router on this network.  Usually this
		is the address of the router or other network
		equipment that connects the local network to the
		Internet.  Also known as the <emphasis>default
		  gateway</emphasis>.</para>
	    </listitem>
	  </itemizedlist>
	</sect4>
      </sect3>

      <sect3 id="bsdinstall-ipv6">
	<title>Configuring IPv6 Networking</title>

	<para>IPv6 is a newer method of network configuration.  If
	  IPv6 is available and desired, choose
	  <guibutton>[&nbsp;Yes&nbsp;]</guibutton> to select
	  it.</para>

	<figure id="bsdinstall-net-ipv6">
	  <title>Choose IPv6 Networking</title>

	  <mediaobject>
	    <imageobject>
	      <imagedata
		fileref="bsdinstall/bsdinstall-configure-network-interface-ipv6"
		format="PNG">
	    </imageobject>
	  </mediaobject>
	</figure>

	<para>IPv6 also has two methods of configuration.
	  <firstterm><acronym role="StateLess Address
	    AutoConfiguration">SLAAC</acronym> </firstterm>, or
	  <emphasis>StateLess Address AutoConfiguration</emphasis>,
	  will automatically configure the network interface
	  correctly.  <firstterm>Static</firstterm> configuration
	  requires manual entry of network information.</para>

	<sect4 id="bsdinstall-net-ipv6-slaac-config">
	  <title>IPv6 Stateless Address Autoconfiguration</title>

	  <para><acronym>SLAAC</acronym> allows an IPv6 network
	    component to request autoconfiguration information from a
	    local router.  See <ulink
	      url="http://tools.ietf.org/html/rfc4862">RFC4862</ulink>
	    for more information.</para>

	  <figure id="bsdinstall-net-ipv6-slaac">
	    <title>Choose IPv6 SLAAC Configuration</title>

	    <mediaobject>
	      <imageobject>
		<imagedata
		  fileref="bsdinstall/bsdinstall-configure-network-interface-slaac"
		  format="PNG">
	      </imageobject>
	    </mediaobject>
	  </figure>
	</sect4>

	<sect4 id="bsdinstall-net-ipv6-static-config">
	  <title>IPv6 Static Network Configuration</title>

	  <para>Static configuration of the network interface requires
	    entry of the IPv6 configuration information.</para>

	  <figure id="bsdinstall-net-ipv6-static">
	    <title>IPv6 Static Configuration</title>

	    <mediaobject>
	      <imageobject>
		<imagedata
		  fileref="bsdinstall/bsdinstall-configure-network-interface-ipv6-static"
		  format="PNG">
	      </imageobject>
	    </mediaobject>
	  </figure>

	  <itemizedlist>
	    <listitem>
	      <para><literal>IPv6 Address</literal> - The
		manually-assigned <acronym>IP</acronym> address to be
		assigned to this computer.  This address must be
		unique and not already in use by another piece of
		equipment on the local network.</para>
	    </listitem>

	    <listitem>
	      <para><literal>Default Router</literal> - The IPv6
		address of the default router on this network.
		Usually this is the address of the router or other
		network equipment that connects the local network to
		the Internet.  Also known as the <emphasis>default
		  gateway</emphasis>.</para>
	    </listitem>
	  </itemizedlist>
	</sect4>
      </sect3>

      <sect3 id="bsdinstall-net-dns">
	<title>Configuring <acronym role="Domain Name
	    System">DNS</acronym></title>

	<para>The <firstterm>Domain Name System</firstterm> (or
	  <emphasis><acronym role="Domain Name
	      System">DNS</acronym></emphasis>) Resolver converts
	  hostnames to and from network addresses.  If
	  <acronym>DHCP</acronym> or <acronym>SLAAC</acronym> was used
	  to autoconfigure the network interface, the Resolver
	  Configuration values may already be present.  Otherwise,
	  enter the local network's domain name in the Search field.
	  <acronym>DNS</acronym> #1 and <acronym>DNS</acronym> #2 are
	  the <acronym>IP</acronym> addresses for the local
	  <acronym>DNS</acronym> servers.  At least one
	  <acronym>DNS</acronym> server is required.</para>

	<figure id="bsdinstall-net-dns-config">
	  <title>DNS Configuration</title>

	  <mediaobject>
	    <imageobject>
	      <imagedata
		fileref="bsdinstall/bsdinstall-configure-network-ipv4-dns"
		format="PNG">
	    </imageobject>
	  </mediaobject>
	</figure>
      </sect3>
    </sect2>

    <sect2 id="bsdinstall-timezone">
      <title>Setting the Time Zone</title>

      <para>Setting the time zone for your machine will allow it to
	automatically correct for any regional time changes and
	perform other time zone related functions properly.</para>

      <para>The example shown is for a machine located in the Eastern
	time zone of the United States.  Your selections will vary
	according to your geographical location.</para>

      <figure id="bsdinstall-local-utc">
	<title>Select Local or UTC Clock</title>

	<mediaobject>
	  <imageobject>
	    <imagedata
	      fileref="bsdinstall/bsdinstall-set-clock-local-utc"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>Select <guibutton>[&nbsp;Yes&nbsp;]</guibutton>
	or <guibutton>[&nbsp;No&nbsp;]</guibutton> according to how
	the machine's clock is configured and press
	<keycap>Enter</keycap>.  If you don't know whether the system
	uses UTC or local time, select
	<guibutton>[&nbsp;No&nbsp;]</guibutton> to choose the more
	commonly-used local time.</para>

      <figure id="bsdinstall-timezone-region">
	<title>Select a Region</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="bsdinstall/bsdinstall-timezone-region"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>The appropriate region is selected using the arrow keys
	and then pressing <keycap>Enter</keycap>.</para>

      <figure id="bsdinstall-timezone-country">
	<title>Select a Country</title>

	<mediaobject>
	  <imageobject>
	    <imagedata
	      fileref="bsdinstall/bsdinstall-timezone-country"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>Select the appropriate country using the arrow keys
	and press <keycap>Enter</keycap>.</para>

      <figure id="bsdinstall-timezone-zone">
	<title>Select a Time Zone</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="bsdinstall/bsdinstall-timezone-zone"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>The appropriate time zone is selected using the arrow
	keys and pressing <keycap>Enter</keycap>.</para>

      <figure id="bsdinstall-timezone-confirmation">
	<title>Confirm Time Zone</title>

	<mediaobject>
	  <imageobject>
	    <imagedata
	      fileref="bsdinstall/bsdinstall-timezone-confirm"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>Confirm the abbreviation for the time zone is correct.
	If it looks okay, press <keycap>Enter</keycap> to continue
	with the post-installation configuration.</para>
    </sect2>

    <sect2 id="bsdinstall-sysconf">
      <title>Selecting Services to Enable</title>

      <para>Additional system services which will be started at boot
	can be enabled.  All of these services are optional.</para>

      <figure id="bsdinstall-config-serv">
	<title>Selecting Additional Services to Enable</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="bsdinstall/bsdinstall-config-services"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <itemizedlist>
	<title>Additional Services</title>

	<listitem>
	  <para><literal>sshd</literal> - Secure Shell
	    (<acronym role="Secure Shell">SSH</acronym>) daemon for
	    secure remote access.</para>
	</listitem>

	<listitem>
	  <para><literal>moused</literal> - Provides mouse usage
	    within the system console.</para>
	</listitem>

	<listitem>
	  <para><literal>ntpd</literal> - Network Time Protocol
	    (<acronym role="Network Time Protocol">NTP</acronym>)
	    daemon for automatic clock synchronization.</para>
	</listitem>

	<listitem>
	  <para><literal>powerd</literal> - System power control
	    utility for power control and energy saving.</para>
	</listitem>
      </itemizedlist>
    </sect2>

    <sect2 id="bsdinstall-crashdump">
      <title>Enabling Crash Dumps</title>

      <para><application>bsdinstall</application> will prompt if crash
	dumps should be enabled on the target system.  Enabling crash
	dumps can be very useful in debugging issues with the system,
	so users are encouraged to enable crash dumps whenever
	possible.  Select <guibutton>[&nbsp;Yes&nbsp;]</guibutton> to
	enable crash dumps, or <guibutton>[&nbsp;No&nbsp;]</guibutton>
	to proceed without crash dumps enabled.</para>

      <figure id="bsdinstall-config-crashdump">
	<title>Enabling Crash Dumps</title>

	<mediaobject>
	  <imageobject>
	    <imagedata
	      fileref="bsdinstall/bsdinstall-config-crashdump"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>
    </sect2>

    <sect2 id="bsdinstall-addusers">
      <title>Add Users</title>

      <para>Adding at least one user during the installation allows
	the system to be used without being logged in as
	<username>root</username>.  When logged in as
	<username>root</username>, there are essentially no limits or
	protection on what can be done.  Logging in as a normal user
	is safer and more secure.</para>

      <para>Select <guibutton>[&nbsp;Yes&nbsp;]</guibutton> to add new
	users.</para>

      <figure id="bsdinstall-add-user1">
	<title>Add User Accounts</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="bsdinstall/bsdinstall-adduser1"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>Enter the information for the user to be added.</para>

      <figure id="bsdinstall-add-user2">
	<title>Enter User Information</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="bsdinstall/bsdinstall-adduser2"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <itemizedlist>
	<title>User Information</title>

	<listitem>
	  <para><literal>Username</literal> - The name the user will
	    enter to log in.  Typically the first letter of their
	    first name combined with their last name.</para>
	</listitem>

	<listitem>
	  <para><literal>Full name</literal> - The user's full
	    name.</para>
	</listitem>

	<listitem>
	  <para><literal>Uid</literal> - User ID.  Typically, this
	    is left blank so the system will assign a value.</para>
	</listitem>

	<listitem>
	  <para><literal>Login group</literal> - The user's group.
	    Typically left blank to accept the default.</para>
	</listitem>

	<listitem>
	  <para><literal>Invite <replaceable>user</replaceable> into
	      other groups?</literal> - Additional groups to which the
	    user will be added as a member.</para>
	</listitem>

	<listitem>
	  <para><literal>Login class</literal> - Typically left blank
	    for the default.</para>
	</listitem>

	<listitem>
	  <para><literal>Shell</literal> - The interactive shell for
	    this user.  In the example, &man.csh.1; has been
	    chosen.</para>
	</listitem>

	<listitem>
	  <para><literal>Home directory</literal> - The user's home
	    directory.  The default is usually correct.</para>
	</listitem>

	<listitem>
	  <para><literal>Home directory permissions</literal> -
	    Permissions on the user's home directory.  The default is
	    usually correct.</para>
	</listitem>

	<listitem>
	  <para><literal>Use password-based authentication?</literal>
	    - Typically "yes".</para>
	</listitem>

	<listitem>
	  <para><literal>Use an empty password?</literal> -
	    Typically "no".</para>
	</listitem>

	<listitem>
	  <para><literal>Use a random password?</literal> - Typically
	    "no".</para>
	</listitem>

	<listitem>
	  <para><literal>Enter password</literal> - The actual
	    password for this user.  Characters typed will not show on
	    the screen.</para>
	</listitem>

	<listitem>
	  <para><literal>Enter password again</literal> - The password
	    must be typed again for verification.</para>
	</listitem>

	<listitem>
	  <para><literal>Lock out the account after
	      creation?</literal> - Typically "no".</para>
	</listitem>
      </itemizedlist>

      <para>After entering everything, a summary is shown, and the
	system asks if it is correct.  If a mistake was made during
	entry, enter <literal>no</literal> and try again.  If
	everything is correct, enter <literal>yes</literal> to create
	the new user.</para>

      <figure id="bsdinstall-add-user3">
	<title>Exit User and Group Management</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="bsdinstall/bsdinstall-adduser3"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>If there are more users to add, answer the "Add another
	user?" question with <literal>yes</literal>.  Enter
	<literal>no</literal> to finish adding users and continue the
	installation.</para>

      <para>For more information on adding users and user management,
	see <xref linkend="users">.</para>
    </sect2>

    <sect2 id="bsdinstall-final-conf">
      <title>Final Configuration</title>

      <para>After everything has been installed and configured, a
	final chance is provided to modify settings.</para>

      <figure id="bsdinstall-final-config">
	<title>Final Configuration</title>

	<mediaobject>
	  <imageobject>
	    <imagedata
	      fileref="bsdinstall/bsdinstall-finalconfiguration"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>Use this menu to make any changes or do any additional
	configuration before completing the installation.</para>

      <itemizedlist>
	<title>Final Configuration Options</title>

	<listitem>
	  <para><literal>Add User</literal> - Described in
	    <xref linkend="bsdinstall-addusers">.</para>
	</listitem>

	<listitem>
	  <para><literal>Root Password</literal> - Described in
	    <xref linkend="bsdinstall-post-root">.</para>
	</listitem>

	<listitem>
	  <para><literal>Hostname</literal> - Described in
	    <xref linkend="bsdinstall-hostname">.</para>
	</listitem>

	<listitem>
	  <para><literal>Network</literal> - Described in
	    <xref linkend="bsdinstall-config-network-dev">.</para>
	</listitem>

	<listitem>
	  <para><literal>Services</literal> - Described in
	    <xref linkend="bsdinstall-sysconf">.</para>
	</listitem>

	<listitem>
	  <para><literal>Time Zone</literal> - Described in
	    <xref linkend="bsdinstall-timezone">.</para>
	</listitem>

	<listitem>
	  <para><literal>Handbook</literal> - Download and install the
	    &os; Handbook (which is what you are reading now).</para>
	</listitem>
      </itemizedlist>

      <para>After any final configuration is complete, select
	<guibutton>Exit</guibutton> to leave the installation.</para>

      <figure id="bsdinstall-final-modification-shell">
	<title>Manual Configuration</title>

	<mediaobject>
	  <imageobject>
	    <imagedata
	      fileref="bsdinstall/bsdinstall-final-modification-shell"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para><application>bsdinstall</application> will prompt if there
	are any additional configuration that needs to be done before
	rebooting into the new system.  Select
	<guibutton>[&nbsp;Yes&nbsp;]</guibutton> to exit to a shell
	within the new system, or
	<guibutton>[&nbsp;No&nbsp;]</guibutton> to proceed to the last
	step of the installation.</para>

      <figure id="bsdinstall-final-main">
	<title>Complete the Installation</title>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="bsdinstall/bsdinstall-mainexit"
	      format="PNG">
	  </imageobject>
	</mediaobject>
      </figure>

      <para>If further configuration or special setup is needed,
	selecting <guibutton>[&nbsp;Live&nbsp;CD&nbsp;]</guibutton>
	will boot the install media into Live CD mode.</para>

      <para>When the installation is complete, select
	<guibutton>[&nbsp;Reboot&nbsp;]</guibutton> to reboot the
	computer and start the new &os; system.  Don't forget to
	remove the &os; install CD, DVD, or USB memory stick, or the
	computer may boot from it again.</para>
    </sect2>

    <sect2 id="bsdinstall-freebsdboot">
      <title>&os; Booting and Shutdown</title>

      <sect3 id="bsdinstall-freebsdboot-i386">
	<title>&os;/&arch.i386; Booting</title>

	<para>As &os; boots, many informational messages are
	  displayed. Most will scroll off the screen; this is normal.
	  After the system finishes booting, a login prompt is
	  displayed.  Messages that scrolled off the screen can be
	  reviewed by pressing <keycap>Scroll-Lock</keycap> to turn on
	  the <emphasis>scroll-back buffer</emphasis>.  The
	  <keycap>PgUp</keycap>, <keycap>PgDn</keycap>, and arrow keys
	  can be used to scroll back through the messages.  Pressing
	  <keycap>Scroll-Lock</keycap> again unlocks the display and
	  returns to the normal screen.</para>

	<para>At the <prompt>login:</prompt> prompt, enter the
	  username added during the installation,
	  <username>asample</username> in the example.  Avoid logging
	  in as <username>root</username> except when
	  necessary.</para>

	<para>The scroll-back buffer examined above is limited in
	  size, so not all of the messages may have been visible.
	  After logging in, most of them can be seen from the command
	  line by typing <command>dmesg | less</command> at the
	  prompt.  Press <keycap>q</keycap> to return to the command
	  line after viewing.</para>

	<para>Typical boot messages (version information
	  omitted):</para>

	<screen>Copyright (c) 1992-2011 The FreeBSD Project.
Copyright (c) 1979, 1980, 1983, 1986, 1988, 1989, 1991, 1992, 1993, 1994
        The Regents of the University of California. All rights reserved.
FreeBSD is a registered trademark of The FreeBSD Foundation.

    root@farrell.cse.buffalo.edu:/usr/obj/usr/src/sys/GENERIC amd64
CPU: Intel(R) Core(TM)2 Duo CPU     E8400  @ 3.00GHz (3007.77-MHz K8-class CPU)
  Origin = "GenuineIntel"  Id = 0x10676  Family = 6  Model = 17  Stepping = 6
  Features=0x783fbff&lt;FPU,VME,DE,PSE,TSC,MSR,PAE,MCE,CX8,APIC,SEP,MTRR,PGE,MCA,CMOV,PAT,PSE36,MMX,FXSR,SSE,SSE2&gt;
  Features2=0x209&lt;SSE3,MON,SSSE3&gt;
  AMD Features=0x20100800&lt;SYSCALL,NX,LM&gt;
  AMD Features2=0x1&lt;LAHF&gt;
real memory  = 536805376 (511 MB)
avail memory = 491819008 (469 MB)
Event timer "LAPIC" quality 400
ACPI APIC Table: &lt;VBOX   VBOXAPIC&gt;
ioapic0: Changing APIC ID to 1
ioapic0 &lt;Version 1.1&gt; irqs 0-23 on motherboard
kbd1 at kbdmux0
acpi0: &lt;VBOX VBOXXSDT&gt; on motherboard
acpi0: Power Button (fixed)
acpi0: Sleep Button (fixed)
Timecounter "ACPI-fast" frequency 3579545 Hz quality 900
acpi_timer0: &lt;32-bit timer at 3.579545MHz&gt; port 0x4008-0x400b on acpi0
cpu0: &lt;ACPI CPU&gt; on acpi0
pcib0: &lt;ACPI Host-PCI bridge&gt; port 0xcf8-0xcff on acpi0
pci0: &lt;ACPI PCI bus&gt; on pcib0
isab0: &lt;PCI-ISA bridge&gt; at device 1.0 on pci0
isa0: &lt;ISA bus&gt; on isab0
atapci0: &lt;Intel PIIX4 UDMA33 controller&gt; port 0x1f0-0x1f7,0x3f6,0x170-0x177,0x376,0xd000-0xd00f at device 1.1 on pci0
ata0: &lt;ATA channel 0&gt; on atapci0
ata1: &lt;ATA channel 1&gt; on atapci0
vgapci0: &lt;VGA-compatible display&gt; mem 0xe0000000-0xe0ffffff irq 18 at device 2.0 on pci0
em0: &lt;Intel(R) PRO/1000 Legacy Network Connection 1.0.3&gt; port 0xd010-0xd017 mem 0xf0000000-0xf001ffff irq 19 at device 3.0 on pci0
em0: Ethernet address: 08:00:27:9f:e0:92
pci0: &lt;base peripheral&gt; at device 4.0 (no driver attached)
pcm0: &lt;Intel ICH (82801AA)&gt; port 0xd100-0xd1ff,0xd200-0xd23f irq 21 at device 5.0 on pci0
pcm0: &lt;SigmaTel STAC9700/83/84 AC97 Codec&gt;
ohci0: &lt;OHCI (generic) USB controller&gt; mem 0xf0804000-0xf0804fff irq 22 at device 6.0 on pci0
usbus0: &lt;OHCI (generic) USB controller&gt; on ohci0
pci0: &lt;bridge&gt; at device 7.0 (no driver attached)
acpi_acad0: &lt;AC Adapter&gt; on acpi0
atkbdc0: &lt;Keyboard controller (i8042)&gt; port 0x60,0x64 irq 1 on acpi0
atkbd0: &lt;AT Keyboard&gt; irq 1 on atkbdc0
kbd0 at atkbd0
atkbd0: [GIANT-LOCKED]
psm0: &lt;PS/2 Mouse&gt; irq 12 on atkbdc0
psm0: [GIANT-LOCKED]
psm0: model IntelliMouse Explorer, device ID 4
attimer0: &lt;AT timer&gt; port 0x40-0x43,0x50-0x53 on acpi0
Timecounter "i8254" frequency 1193182 Hz quality 0
Event timer "i8254" frequency 1193182 Hz quality 100
sc0: &lt;System console&gt; at flags 0x100 on isa0
sc0: VGA &lt;16 virtual consoles, flags=0x300&gt;
vga0: &lt;Generic ISA VGA&gt; at port 0x3c0-0x3df iomem 0xa0000-0xbffff on isa0
atrtc0: &lt;AT realtime clock&gt; at port 0x70 irq 8 on isa0
Event timer "RTC" frequency 32768 Hz quality 0
ppc0: cannot reserve I/O port range
Timecounters tick every 10.000 msec
pcm0: measured ac97 link rate at 485193 Hz
em0: link state changed to UP
usbus0: 12Mbps Full Speed USB v1.0
ugen0.1: &lt;Apple&gt; at usbus0
uhub0: &lt;Apple OHCI root HUB, class 9/0, rev 1.00/1.00, addr 1&gt; on usbus0
cd0 at ata1 bus 0 scbus1 target 0 lun 0
cd0: &lt;VBOX CD-ROM 1.0&gt; Removable CD-ROM SCSI-0 device
cd0: 33.300MB/s transfers (UDMA2, ATAPI 12bytes, PIO 65534bytes)
cd0: Attempt to query device size failed: NOT READY, Medium not present
ada0 at ata0 bus 0 scbus0 target 0 lun 0
ada0: &lt;VBOX HARDDISK 1.0&gt; ATA-6 device
ada0: 33.300MB/s transfers (UDMA2, PIO 65536bytes)
ada0: 12546MB (25694208 512 byte sectors: 16H 63S/T 16383C)
ada0: Previously was known as ad0
Timecounter "TSC" frequency 3007772192 Hz quality 800
Root mount waiting for: usbus0
uhub0: 8 ports with 8 removable, self powered
Trying to mount root from ufs:/dev/ada0p2 [rw]...
Setting hostuuid: 1848d7bf-e6a4-4ed4-b782-bd3f1685d551.
Setting hostid: 0xa03479b2.
Entropy harvesting: interrupts ethernet point_to_point kickstart.
Starting file system checks:
/dev/ada0p2: FILE SYSTEM CLEAN; SKIPPING CHECKS
/dev/ada0p2: clean, 2620402 free (714 frags, 327461 blocks, 0.0% fragmentation)
Mounting local file systems:.
vboxguest0 port 0xd020-0xd03f mem 0xf0400000-0xf07fffff,0xf0800000-0xf0803fff irq 20 at device 4.0 on pci0
vboxguest: loaded successfully
Setting hostname: machine3.example.com.
Starting Network: lo0 em0.
lo0: flags=8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; metric 0 mtu 16384
        options=3&lt;RXCSUM,TXCSUM&gt;
        inet6 ::1 prefixlen 128
        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x3
        inet 127.0.0.1 netmask 0xff000000
        nd6 options=21&lt;PERFORMNUD,AUTO_LINKLOCAL&gt;
em0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        options=9b&lt;RXCSUM,TXCSUM,VLAN_MTU,VLAN_HWTAGGING,VLAN_HWCSUM&gt;
        ether 08:00:27:9f:e0:92
        nd6 options=29&lt;PERFORMNUD,IFDISABLED,AUTO_LINKLOCAL&gt;
        media: Ethernet autoselect (1000baseT &lt;full-duplex&gt;)
        status: active
Starting devd.
Starting Network: usbus0.
DHCPREQUEST on em0 to 255.255.255.255 port 67
DHCPACK from 10.0.2.2
bound to 192.168.1.142 -- renewal in 43200 seconds.
add net ::ffff:0.0.0.0: gateway ::1
add net ::0.0.0.0: gateway ::1
add net fe80::: gateway ::1
add net ff02::: gateway ::1
ELF ldconfig path: /lib /usr/lib /usr/lib/compat /usr/local/lib
32-bit compatibility ldconfig path: /usr/lib32
Creating and/or trimming log files.
Starting syslogd.
No core dumps found.
Clearing /tmp (X related).
Updating motd:.
Configuring syscons: blanktime.
Generating public/private rsa1 key pair.
Your identification has been saved in /etc/ssh/ssh_host_key.
Your public key has been saved in /etc/ssh/ssh_host_key.pub.
The key fingerprint is:
10:a0:f5:af:93:ae:a3:1a:b2:bb:3c:35:d9:5a:b3:f3 root@machine3.example.com
The key's randomart image is:
+--[RSA1 1024]----+
|    o..          |
|   o . .         |
|  .   o          |
|       o         |
|    o   S        |
|   + + o         |
|o . + *          |
|o+ ..+ .         |
|==o..o+E         |
+-----------------+
Generating public/private dsa key pair.
Your identification has been saved in /etc/ssh/ssh_host_dsa_key.
Your public key has been saved in /etc/ssh/ssh_host_dsa_key.pub.
The key fingerprint is:
7e:1c:ce:dc:8a:3a:18:13:5b:34:b5:cf:d9:d1:47:b2 root@machine3.example.com
The key's randomart image is:
+--[ DSA 1024]----+
|       ..     . .|
|      o  .   . + |
|     . ..   . E .|
|    . .  o o . . |
|     +  S = .    |
|    +  . = o     |
|     +  . * .    |
|    . .  o .     |
|      .o. .      |
+-----------------+
Starting sshd.
Starting cron.
Starting background file system checks in 60 seconds.

Thu Oct  6 19:15:31 MDT 2011

FreeBSD/amd64 (machine3.example.com) (ttyv0)

login:</screen>

	<para>Generating the RSA and DSA keys may take some time on
	  slower machines.  This happens only on the initial boot-up
	  of a new installation, and only if
	  <application>sshd</application> is set to start
	  automatically.  Subsequent boots will be faster.</para>

	<para>&os; does not install graphical environments by default,
	  but many are available.  See <xref linkend="x11"> for more
	  information.</para>
      </sect3>
    </sect2>

    <sect2 id="bsdinstall-shutdown">
      <title>&os; Shutdown</title>

      <para>Proper shutdown of a &os; computer helps protect data and
	even hardware from damage.  Do not just turn off the power.
	If the user is a member of the <groupname>wheel</groupname>
	group, become the superuser by typing <command>su</command> at
	the command line and entering the <username>root</username>
	password.  Otherwise, log in as <username>root</username> and
	use <command>shutdown -p now</command>.  The system will close
	down cleanly and turn itself off.</para>

      <para>The
	<keycombo action="simul">
	  <keycap>Ctrl</keycap>
	  <keycap>Alt</keycap>
	  <keycap>Del</keycap>
	</keycombo>
	key combination can be used to reboot the system, but is not
	recommended during normal operation.</para>
    </sect2>
  </sect1>

  <sect1 id="bsdinstall-install-trouble">
    <title>Troubleshooting</title>

    <indexterm>
      <primary>installation</primary>
      <secondary>troubleshooting</secondary>
    </indexterm>
    <para>The following section covers basic installation
      troubleshooting, such as common problems people have
      reported.</para>

    <sect2>
      <title>What to Do If Something Goes Wrong</title>

      <para>Due to various limitations of the PC architecture, it is
	impossible for probing to be 100% reliable, however, there are
	a few things you can do if it fails.</para>

      <para>Check the <ulink
	  url="http://www.FreeBSD.org/releases/index.html">Hardware
	  Notes</ulink> document for your version of &os; to make sure
	your hardware is supported.</para>

      <para>If your hardware is supported and you still experience
	lock-ups or other problems, you will need to build a
	<link linkend="kernelconfig">custom kernel</link>.  This will
	allow you to add in support for devices which are not present
	in the <filename>GENERIC</filename> kernel.  The kernel on the
	boot disks is configured assuming that most hardware devices
	are in their factory default configuration in terms of IRQs,
	IO addresses, and DMA channels.  If your hardware has been
	reconfigured, you will most likely need to edit the kernel
	configuration and recompile to tell &os; where to find
	things.</para>

      <para>It is also possible that a probe for a device not present
	will cause a later probe for another device that is present to
	fail.  In that case, the probes for the conflicting driver(s)
	should be disabled.</para>

      <note>
	<para>Some installation problems can be avoided or alleviated
	  by updating the firmware on various hardware components,
	  most notably the motherboard.  Motherboard firmware is
	  usually referred to as the <acronym>BIOS</acronym>.  Most
	  motherboard and computer manufacturers have a website for
	  upgrades and upgrade information.</para>

	<para>Manufacturers generally advise against upgrading the
	  motherboard <acronym>BIOS</acronym> unless there is a good
	  reason for doing so, like a critical update.  The upgrade
	  process <emphasis>can</emphasis> go wrong, leaving the
	  <acronym>BIOS</acronym> incomplete and the computer
	  inoperative.</para>
      </note>
    </sect2>

    <sect2>
      <title>Troubleshooting Questions and Answers</title>

      <qandaset>
	<qandaentry>
	  <question>
	    <para>My system hangs while probing hardware during boot,
	      or it behaves strangely during install.</para>
	  </question>

	  <answer>
	    <para>&os; makes extensive use of the system
	      ACPI service on the i386, amd64, and ia64 platforms to
	      aid in system configuration if it is detected during
	      boot.  Unfortunately, some bugs still exist in both the
	      ACPI driver and within system motherboards and
	      <acronym>BIOS</acronym>
	      firmware.  ACPI can be disabled by setting
	      the <literal>hint.acpi.0.disabled</literal> hint in the
	      third stage boot loader:</para>

	    <screen><userinput>set hint.acpi.0.disabled="1"</userinput></screen>

	    <para>This is reset each time the system is booted, so it
	      is necessary to
	      add <literal>hint.acpi.0.disabled="1"</literal> to the
	      file
	      <filename>/boot/loader.conf</filename>.  More
	      information about the boot loader can be found
	      in <xref linkend="boot-synopsis">.</para>
	  </answer>
	</qandaentry>
      </qandaset>
    </sect2>
  </sect1>
</chapter>

<!--
     Local Variables:
     mode: sgml
     sgml-declaration: "../chapter.decl"
     sgml-indent-data: t
     sgml-omittag: nil
     sgml-always-quote-attributes: t
     sgml-parent-document: ("../book.sgml" "part" "chapter")
     End:
-->
