<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>FreeBSD/pc98 5.2.1-RELEASE Installation Instructions</title>
<meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.7" />
<link rel="STYLESHEET" type="text/css" href="docbook.css" />
</head>
<body class="ARTICLE" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084"
alink="#0000FF">
<div class="ARTICLE">
<div class="TITLEPAGE">
<h1 class="TITLE"><a id="AEN2" name="AEN2">FreeBSD/pc98 5.2.1-RELEASE Installation
Instructions</a></h1>

<h3 class="CORPAUTHOR">The FreeBSD Project</h3>

<p class="COPYRIGHT">Copyright &copy; 2000, 2001, 2002, 2003 The FreeBSD Documentation
Project</p>

<hr />
</div>

<blockquote class="ABSTRACT">
<div class="ABSTRACT"><a id="AEN11" name="AEN11"></a>
<p>This article gives some brief instructions on installing FreeBSD/pc98 5.2.1-RELEASE,
with particular emphasis given to obtaining a FreeBSD distribution. Some notes on
troubleshooting and frequently-asked questions are also given.</p>
</div>
</blockquote>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="INSTALL" name="INSTALL">1 Installing FreeBSD</a></h2>

<p>This section documents the process of installing a new distribution of FreeBSD. These
instructions pay particular emphasis to the process of obtaining the FreeBSD
5.2.1-RELEASE distribution and to beginning the installation procedure. The <a
href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/install.html"
target="_top">``Installing FreeBSD''</a> chapter of the <a
href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/" target="_top">FreeBSD
Handbook</a> provides more in-depth information about the installation program itself,
including a guided walkthrough with screenshots.</p>

<p>If you are upgrading from a previous release of FreeBSD, please see <a
href="#UPGRADING">Section 3</a> for instructions on upgrading.</p>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="GETTING-STARTED" name="GETTING-STARTED">1.1 Getting
Started</a></h3>

<p>Probably the most important pre-installation step that can be taken is that of reading
the various instruction documents provided with FreeBSD. A roadmap of documents
pertaining to this release of FreeBSD can be found in <tt
class="FILENAME">README.TXT</tt>, which can usually be found in the same location as this
file; most of these documents, such as the release notes and the hardware compatibility
list, are also accessible in the Documentation menu of the installer.</p>

<p>Note that on-line versions of the FreeBSD <a
href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/faq/" target="_top">FAQ</a> and <a
href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/"
target="_top">Handbook</a> are also available from the <a href="http://www.FreeBSD.org/"
target="_top">FreeBSD Project Web site</a>, if you have an Internet connection.</p>

<p>This collection of documents may seem daunting, but the time spent reading them will
likely be saved many times over. Being familiar with what resources are available can
also be helpful in the event of problems during installation.</p>

<p>The best laid plans sometimes go awry, so if you run into trouble take a look at <a
href="#TROUBLE">Section 4</a>, which contains valuable troubleshooting information. You
should also read an updated copy of <tt class="FILENAME">ERRATA.TXT</tt> before
installing, since this will alert you to any problems which have reported in the interim
for your particular release.</p>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Important:</b> While FreeBSD does its best to safeguard against accidental loss of
data, it's still more than possible to <span class="emphasis"><i class="EMPHASIS">wipe
out your entire disk</i></span> with this installation if you make a mistake. Please do
not proceed to the final FreeBSD installation menu unless you've adequately backed up any
important data first.</p>
</blockquote>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN36" name="AEN36">1.2 Hardware Requirements</a></h3>

<p>FreeBSD for the NEC PC-98x1 requires a 386 or better processor to run (sorry, there is
no support for 286 processors) and at least 5 megs of RAM to install and 4 megs of RAM to
run. You will need at least 100MB of free hard drive space for the most minimal
installation. See below for ways of shrinking existing DOS partitions in order to install
FreeBSD.</p>

<p>If you are not familiar with configuring hardware for FreeBSD, you should be sure to
read the <tt class="FILENAME">HARDWARE.TXT</tt> file; it contains important information
on what hardware is supported by FreeBSD.</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="FLOPPIES" name="FLOPPIES">1.3 Floppy Disk Image
Instructions</a></h3>

<p>Depending on how you choose to install FreeBSD, you may need to create a set of floppy
disks (usually two) to begin the installation process. This section briefly describes how
to create these disks, either from a CDROM installation or from the Internet. Note that
in the common case of installing FreeBSD from CDROM, on a machine that supports bootable
CDROMs, the steps outlined in this section will not be needed and can be skipped.</p>

<p>For a normal CDROM or network installation, all you need to copy onto actual floppies
from the <tt class="FILENAME">floppies/</tt> directory are the <tt
class="FILENAME">kern.flp</tt> and <tt class="FILENAME">mfsroot.flp</tt> images (for
1.44MB floppies) or <tt class="FILENAME">kern-small.flp</tt> and <tt
class="FILENAME">mfsroot-small.flp</tt> images (for 1.2MB floppies).</p>

<p>Getting these images over the network is easy. Simply fetch the <var
class="REPLACEABLE">release</var><tt class="FILENAME">/floppies/kern.flp</tt>, <var
class="REPLACEABLE">release</var><tt class="FILENAME">/floppies/mfsroot.flp</tt>, and
<var class="REPLACEABLE">release</var><tt class="FILENAME">/floppies/drivers.flp</tt>
files from <a href="ftp://ftp.FreeBSD.org/" target="_top">ftp://ftp.FreeBSD.org/</a> or
one of the many mirrors listed at <a
href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/mirrors-ftp.html"
target="_top">FTP Sites</a> section of the Handbook, or on the <a
href="http://mirrorlist.FreeBSD.org/" target="_top">http://mirrorlist.FreeBSD.org/</a>
Web pages.</p>

<p>Get two blank, freshly formatted floppies and image copy <tt
class="FILENAME">kern.flp</tt> onto one and <tt class="FILENAME">mfsroot.flp</tt> onto
the other. These images are <span class="emphasis"><i class="EMPHASIS">not</i></span> DOS
files. You cannot simply copy them to a DOS or UFS floppy as regular files, you need to
``image'' copy them to the floppy with <tt class="FILENAME">rawrite.exe</tt> under DOS
(see the <tt class="FILENAME">tools</tt> directory on your CDROM or FreeBSD FTP mirror)
or the <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&amp;sektion=1&amp;manpath=FreeBSD+5.2.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">dd</span>(1)</span></a> command in
UNIX.</p>

<p>For example, to create the kernel floppy image from DOS, you'd do something like
this:</p>

<pre class="SCREEN">
<samp class="PROMPT">A&#62;</samp> <kbd class="USERINPUT">rawrite</kbd>
</pre>

<p>Assuming that you'd copied <tt class="FILENAME">rawrite.exe</tt> and <tt
class="FILENAME">kern.flp</tt> into a directory somewhere. You would do the same for <tt
class="FILENAME">mfsroot.flp</tt>, of course.</p>

<p>If you're creating the boot floppy from a UNIX machine, you may find that:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">dd if=floppies/kern.flp of=/dev/rfd0.1440</kbd>
</pre>

<p>or</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">dd if=floppies/kern-small.flp of=/dev/rfd0.1200</kbd>
</pre>

<p>work well, depending on your hardware and operating system environment (different
versions of UNIX have different names for the floppy drive).</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="START-INSTALLATION" name="START-INSTALLATION">1.4 Installing
FreeBSD from CDROM or the Internet</a></h3>

<p>The easiest type of installation is from CDROM. If you have a supported CDROM drive
and a FreeBSD installation CDROM, there is a next way of starting the installation from
it:</p>

<ul>
<li>
<p>Build a set of FreeBSD boot floppies from the <tt class="FILENAME">floppies/</tt>
directory in every FreeBSD distribution. Read <a href="#FLOPPIES">Section 1.3</a> for
more information on creating the bootable floppies under different operating systems.
Then you simply boot from the first floppy and you should soon be in the FreeBSD
installation.</p>
</li>
</ul>

<br />
<br />
<p>If you don't have a CDROM and would like to simply install over the net using PPP,
SLIP or a dedicated connection. You should start the installation by building a set of
FreeBSD boot floppies from the files <tt class="FILENAME">floppies/kern.flp</tt> and <tt
class="FILENAME">floppies/mfsroot.flp</tt> using the instructions found in <a
href="#FLOPPIES">Section 1.3</a>. Restart your computer using the <tt
class="FILENAME">kern.flp</tt> disk; when prompted, insert the <tt
class="FILENAME">mfsroot.flp</tt> disk. Then, please go to <a href="#FTPNFS">Section
1.5.5</a> for additional tips on installing via FTP or NFS.</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN212" name="AEN212">1.5 Detail on various installation
types</a></h3>

<p>Once you've gotten yourself to the initial installation screen somehow, you should be
able to follow the various menu prompts and go from there. If you've never used the
FreeBSD installation before, you are also encouraged to read some of the documentation in
the Documentation submenu as well as the general ``Usage'' instructions on the first
menu.</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> If you get stuck at a screen, press the <b class="KEYCAP">F1</b> key for
online documentation relevant to that specific section.</p>
</blockquote>
</div>

<p>If you've never installed FreeBSD before, or even if you have, the ``Standard''
installation mode is the most recommended since it makes sure that you'll visit all the
various important checklist items along the way. If you're much more comfortable with the
FreeBSD installation process and know <span class="emphasis"><i
class="EMPHASIS">exactly</i></span> what you want to do, use the ``Express'' or
``Custom'' installation options. If you're upgrading an existing system, use the
``Upgrade'' option.</p>

<p>The FreeBSD installer supports the direct use of floppy, DOS, tape, CDROM, FTP, NFS
and UFS partitions as installation media; further tips on installing from each type of
media are listed below.</p>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN251" name="AEN251">1.5.1 Installing from a Network
CDROM</a></h4>

<p>If you simply wish to install from a local CDROM drive then see <a
href="#START-INSTALLATION">Section 1.4</a>. If you don't have a CDROM drive on your
system and wish to use a FreeBSD distribution CD in the CDROM drive of another system to
which you have network connectivity, there are also several ways of going about it:</p>

<ul>
<li>
<p>If you would be able to FTP install FreeBSD directly from the CDROM drive in some
FreeBSD machine, it's quite easy: You simply add the following line to the password file
(using the <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8&amp;manpath=FreeBSD+5.2.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">vipw</span>(8)</span></a>
command):</p>

<pre class="SCREEN">
ftp:*:99:99::0:0:FTP:/cdrom:/sbin/nologin
</pre>

<p>On the machine on which you are running the install, go to the Options menu and set
Release Name to <var class="LITERAL">any</var>. You may then choose a Media type of <var
class="LITERAL">FTP</var> and type in <tt class="FILENAME">ftp://<var
class="REPLACEABLE">machine</var></tt> after picking ``URL'' in the ftp sites menu.</p>

<div class="WARNING">
<blockquote class="WARNING">
<p><b>Warning:</b> This may allow anyone on the local network (or Internet) to make
``anonymous FTP'' connections to this machine, which may not be desirable.</p>
</blockquote>
</div>
</li>

<li>
<p>If you would rather use NFS to export the CDROM directly to the machine(s) you'll be
installing from, you need to first add an entry to the <tt
class="FILENAME">/etc/exports</tt> file (on the machine with the CDROM drive). The
example below allows the machine <tt class="HOSTID">ziggy.foo.com</tt> to mount the CDROM
directly via NFS during installation:</p>

<pre class="SCREEN">
/cdrom          -ro             ziggy.foo.com
</pre>

<p>The machine with the CDROM must also be configured as an NFS server, of course, and if
you're not sure how to do that then an NFS installation is probably not the best choice
for you unless you're willing to read up on <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;manpath=FreeBSD+5.2.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rc.conf</span>(5)</span></a> and
configure things appropriately. Assuming that this part goes smoothly, you should be able
to enter: <tt class="FILENAME"><var class="REPLACEABLE">cdrom-host</var>:/cdrom</tt> as
the path for an NFS installation when the target machine is installed, e.g. <tt
class="FILENAME">wiggy:/cdrom</tt>.</p>
</li>
</ul>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN283" name="AEN283">1.5.2 Installing from Floppies</a></h4>

<p>If you must install from floppy disks, either due to unsupported hardware or just
because you enjoy doing things the hard way, you must first prepare some floppies for the
install.</p>

<p>First, make your boot floppies as described in <a href="#FLOPPIES">Section
1.3</a>.</p>

<p>Second, peruse <a href="#LAYOUT">Section 2</a> and pay special attention to the
``Distribution Format'' section since it describes which files you're going to need to
put onto floppy and which you can safely skip.</p>

<p>Next you will need, at minimum, as many 1.44MB floppies as it takes to hold all files
in the <tt class="FILENAME">bin</tt> (binary distribution) directory. If you're preparing
these floppies under DOS, then these floppies <span class="emphasis"><i
class="EMPHASIS">must</i></span> be formatted using the MS-DOS <tt
class="FILENAME">FORMAT</tt> command. If you're using Windows, use the Windows File
Manager format command.</p>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Important:</b> Frequently, floppy disks come ``factory preformatted''. While
convenient, many problems reported by users in the past have resulted from the use of
improperly formatted media. Re-format them yourself, just to make sure.</p>
</blockquote>
</div>

<p>If you're creating the floppies from another FreeBSD machine, a format is still not a
bad idea though you don't need to put a DOS filesystem on each floppy. You can use the <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8&amp;manpath=FreeBSD+5.2.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">disklabel</span>(8)</span></a> and
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8&amp;manpath=FreeBSD+5.2.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">newfs</span>(8)</span></a>
commands to put a UFS filesystem on a floppy, as the following sequence of commands
illustrates:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">fdformat -f 1440 fd0.1440</kbd>
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">disklabel -w -r fd0.1440 floppy3</kbd>
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">newfs -t 2 -u 18 -l 1 -i 65536 /dev/fd0</kbd>
</pre>

<p>After you've formatted the floppies for DOS or UFS, you'll need to copy the files onto
them. The distribution files are split into chunks conveniently sized so that 5 of them
will fit on a conventional 1.44MB floppy. Go through all your floppies, packing as many
files as will fit on each one, until you've got all the distributions you want packed up
in this fashion. Each distribution should go into its own subdirectory on the floppy,
e.g.: <tt class="FILENAME">a:\bin\bin.inf</tt>, <tt class="FILENAME">a:\bin\bin.aa</tt>,
<tt class="FILENAME">a:\bin\bin.ab</tt>, ...</p>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Important:</b> The <tt class="FILENAME">bin.inf</tt> file also needs to go on the
first floppy of the <tt class="FILENAME">bin</tt> set since it is read by the
installation program in order to figure out how many additional pieces to look for when
fetching and concatenating the distribution. When putting distributions onto floppies,
the <tt class="FILENAME">distname.inf</tt> file <span class="emphasis"><i
class="EMPHASIS">must</i></span> occupy the first floppy of each distribution set. This
is also covered in <tt class="FILENAME">README.TXT</tt>.</p>
</blockquote>
</div>

<p>Once you come to the Media screen of the install, select ``Floppy'' and you'll be
prompted for the rest.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN325" name="AEN325">1.5.3 Installing from a DOS
partition</a></h4>

<p>To prepare for installation from an MS-DOS partition you should simply copy the files
from the distribution into a directory called <tt class="FILENAME">FREEBSD</tt> on the
Primary DOS partition (<tt class="DEVICENAME">A:</tt>). For example, to do a minimal
installation of FreeBSD from DOS using files copied from the CDROM, you might do
something like this:</p>

<pre class="SCREEN">
<samp class="PROMPT">A:\&#62;</samp> <kbd class="USERINPUT">MD A:\FREEBSD</kbd>
<samp class="PROMPT">A:\&#62;</samp> <kbd
class="USERINPUT">XCOPY /S E:\BASE A:\FREEBSD\BASE</kbd>
</pre>

<p>Assuming that <tt class="DEVICENAME">E:</tt> was where your CD was mounted.</p>

<p>For as many distributions as you wish to install from DOS (and you have free space
for), install each one in a directory under <tt class="FILENAME">A:\FREEBSD</tt> - the
<tt class="FILENAME">BIN</tt> dist is only the minimal requirement.</p>

<p>Once you've copied the directories, you can simply launch the installation from
floppies as normal and select ``DOS'' as your media type when the time comes.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN353" name="AEN353">1.5.4 Installing from QIC/SCSI
Tape</a></h4>

<p>When installing from tape, the installation program expects the files to be simply
tar'ed onto it, so after fetching all of the files for the distributions you're
interested in, simply use <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1&amp;manpath=FreeBSD+5.2.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">tar</span>(1)</span></a> to get
them onto the tape with a command something like this:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd <var
class="REPLACEABLE">/where/you/have/your/dists</var></kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">tar cvf /dev/rsa0 <var
class="REPLACEABLE">dist1</var> .. <var class="REPLACEABLE">dist2</var></kbd>
</pre>

<p>When you go to do the installation, you should also make sure that you leave enough
room in some temporary directory (which you'll be allowed to choose) to accommodate the
<span class="emphasis"><i class="EMPHASIS">full</i></span> contents of the tape you've
created. Due to the non-random access nature of tapes, this method of installation
requires quite a bit of temporary storage. You should expect to require as much temporary
storage as you have stuff written on tape.</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> When going to do the installation, the tape must be in the drive <span
class="emphasis"><i class="EMPHASIS">before</i></span> booting from the boot floppies.
The installation ``probe'' may otherwise fail to find it.</p>
</blockquote>
</div>

<p>Now create a boot floppy as described in <a href="#FLOPPIES">Section 1.3</a> and
proceed with the installation.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="FTPNFS" name="FTPNFS">1.5.5 Installing over a Network using FTP
or NFS</a></h4>

<p>After making the boot floppies as described in the first section, you can load the
rest of the installation over a network using one of 3 types of connections: serial port,
parallel port, or Ethernet.</p>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="AEN378" name="AEN378">1.5.5.1 Serial Port</a></h5>

<p>SLIP support is rather primitive, and is limited primarily to hard-wired links, such
as a serial cable running between two computers. The link must be hard-wired because the
SLIP installation doesn't currently offer a dialing capability. If you need to dial out
with a modem or otherwise dialog with the link before connecting to it, then I recommend
that the PPP utility be used instead.</p>

<p>If you're using PPP, make sure that you have your Internet Service Provider's IP
address and DNS information handy as you'll need to know it fairly early in the
installation process. You may also need to know your own IP address, though PPP supports
dynamic address negotiation and may be able to pick up this information directly from
your ISP if they support it.</p>

<p>You will also need to know how to use the various ``AT commands'' for dialing out with
your particular brand of modem as the PPP dialer provides only a very simple terminal
emulator.</p>
</div>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="AEN384" name="AEN384">1.5.5.2 Parallel Port</a></h5>

<p>If a hard-wired connection to another FreeBSD or Linux machine is available, you might
also consider installing over a ``laplink'' style parallel port cable. The data rate over
the parallel port is much higher than what is typically possible over a serial line (up
to 50k/sec), thus resulting in a quicker installation. It's not typically necessary to
use ``real'' IP addresses when using a point-to-point parallel cable in this way and you
can generally just use RFC 1918 style addresses for the ends of the link (e.g. <tt
class="HOSTID">10.0.0.1</tt>, <tt class="HOSTID">10.0.0.2</tt>, etc).</p>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Important:</b> If you use a Linux machine rather than a FreeBSD machine as your
PLIP peer, you will also have to specify <var class="OPTION">link0</var> in the TCP/IP
setup screen's ``extra options for ifconfig'' field in order to be compatible with
Linux's slightly different PLIP protocol.</p>
</blockquote>
</div>
</div>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="AEN395" name="AEN395">1.5.5.3 Ethernet</a></h5>

<p>FreeBSD supports many common Ethernet cards; a table of supported cards is provided as
part of the FreeBSD Hardware Notes (see <tt class="FILENAME">HARDWARE.TXT</tt> in the
Documentation menu on the boot floppy or the top level directory of the CDROM). If you
are using one of the supported PCMCIA Ethernet cards, also be sure that it's plugged in
<span class="emphasis"><i class="EMPHASIS">before</i></span> the laptop is powered on.
FreeBSD does not, unfortunately, currently support ``hot insertion'' of PCMCIA cards
during installation.</p>

<p>You will also need to know your IP address on the network, the <var
class="OPTION">netmask</var> value for your subnet and the name of your machine. Your
system administrator can tell you which values are appropriate to your particular network
setup. If you will be referring to other hosts by name rather than IP address, you'll
also need a name server and possibly the address of a gateway (if you're using PPP, it's
your provider's IP address) to use in talking to it. If you want to install by FTP via an
HTTP proxy (see below), you will also need the proxy's address.</p>

<p>If you do not know the answers to these questions then you should really probably talk
to your system administrator <span class="emphasis"><i class="EMPHASIS">first</i></span>
before trying this type of installation. Using a randomly chosen IP address or netmask on
a live network is almost guaranteed not to work, and will probably result in a lecture
from said system administrator.</p>

<p>Once you have a network connection of some sort working, the installation can continue
over NFS or FTP.</p>
</div>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="AEN406" name="AEN406">1.5.5.4 NFS installation tips</a></h5>

<p>NFS installation is fairly straight-forward: Simply copy the FreeBSD distribution
files you want onto a server somewhere and then point the NFS media selection at it.</p>

<p>If this server supports only ``privileged port'' access (this is generally the default
for Sun and Linux workstations), you will need to set this option in the Options menu
before installation can proceed.</p>

<p>If you have a poor quality Ethernet card which suffers from very slow transfer rates,
you may also wish to toggle the appropriate Options flag.</p>

<p>In order for NFS installation to work, the server must also support ``subdir mounts'',
e.g. if your FreeBSD distribution directory lives on <tt
class="FILENAME">wiggy:/usr/archive/stuff/FreeBSD</tt>, then <tt
class="HOSTID">wiggy</tt> will have to allow the direct mounting of <tt
class="FILENAME">/usr/archive/stuff/FreeBSD</tt>, not just <tt class="FILENAME">/usr</tt>
or <tt class="FILENAME">/usr/archive/stuff</tt>.</p>

<p>In FreeBSD's <tt class="FILENAME">/etc/exports</tt> file this is controlled by the
<var class="OPTION">-alldirs</var> option. Other NFS servers may have different
conventions. If you are getting <var class="LITERAL">Permission Denied</var> messages
from the server then it's likely that you don't have this properly enabled.</p>
</div>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="AEN423" name="AEN423">1.5.5.5 FTP Installation tips</a></h5>

<p>FTP installation may be done from any mirror site containing a reasonably up-to-date
version of FreeBSD. A full menu of reasonable choices for almost any location in the
world is provided in the FTP site menu during installation.</p>

<p>If you are installing from some other FTP site not listed in this menu, or you are
having troubles getting your name server configured properly, you can also specify your
own URL by selecting the ``URL'' choice in that menu. A URL can contain a hostname or an
IP address, so something like the following would work in the absence of a name
server:</p>

<pre class="SCREEN">
ftp://216.66.64.162/pub/FreeBSD/releases/pc98/4.2-RELEASE
</pre>

<p>There are three FTP installation modes you can use:</p>

<ul>
<li>
<p>FTP: This method uses the standard ``Active'' mode for transfers, in which the server
initiates a connection to the client. This will not work through most firewalls but will
often work best with older FTP servers that do not support passive mode. If your
connection hangs with passive mode, try this one.</p>
</li>

<li>
<p>FTP Passive: This sets the FTP "Passive" mode which prevents the server from opening
connections to the client. This option is best for users to pass through firewalls that
do not allow incoming connections on random port addresses.</p>
</li>

<li>
<p>FTP via an HTTP proxy: This option instructs FreeBSD to use HTTP to connect to a proxy
for all FTP operations. The proxy will translate the requests and send them to the FTP
server. This allows the user to pass through firewalls that do not allow FTP at all, but
offer an HTTP proxy. You must specify the hostname of the proxy in addition to the FTP
server.</p>

<p>In the rare case that you have an FTP proxy that does not go through HTTP, you can
specify the URL as something like:</p>

<pre class="SCREEN">
<kbd class="USERINPUT">ftp://foo.bar.com:<var
class="REPLACEABLE">port</var>/pub/FreeBSD</kbd>
</pre>

<p>In the URL above, <var class="REPLACEABLE">port</var> is the port number of the proxy
FTP server.</p>
</li>
</ul>

<br />
<br />
</div>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN466" name="AEN466">1.6 Question and Answer Section for NEC
PC-98x1 Architecture Users</a></h3>
</div>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="LAYOUT" name="LAYOUT">2 Distribution Format</a></h2>

<p>A typical FreeBSD distribution directory looks something like this (exact details may
vary depending on version, architecture, and other factors):</p>

<pre class="SCREEN">
ERRATA.HTM      README.TXT      compat1x        dict            kernel
ERRATA.TXT      RELNOTES.HTM    compat20        doc             manpages
HARDWARE.HTM    RELNOTES.TXT    compat21        docbook.css     packages
HARDWARE.TXT    base            compat22        filename.txt    ports
INSTALL.HTM     boot            compat3x        floppies        proflibs
INSTALL.TXT     catpages        compat4x        games           src
README.HTM      cdrom.inf       crypto          info            tools
</pre>

<p>If you want to do a CDROM, FTP or NFS installation from this distribution directory,
all you need to do is make the 1.44MB boot floppies from the floppies directory (see <a
href="#FLOPPIES">Section 1.3</a> for instructions on how to do this), boot them and
follow the instructions. The rest of the data needed during the installation will be
obtained automatically based on your selections. If you've never installed FreeBSD
before, you also want to read the entirety of this document (the installation
instructions) file.</p>

<p>If you're trying to do some other type of installation or are merely curious about how
a distribution is organized, what follows is a more thorough description of some of these
items in more detail:</p>

<ol type="1">
<li>
<p>The <tt class="FILENAME">*.TXT</tt> and <tt class="FILENAME">*.HTM</tt> files contain
documentation (for example, this document is contained in both <tt
class="FILENAME">INSTALL.TXT</tt> and <tt class="FILENAME">INSTALL.HTM</tt>) and should
be read before starting an installation. The <tt class="FILENAME">*.TXT</tt> files are
plain text, while the <tt class="FILENAME">*.HTM</tt> files are HTML files that can be
read by almost any Web browser. Some distributions may contain documentation in other
formats as well, such as PDF or PostScript.</p>
</li>

<li>
<p><tt class="FILENAME">docbook.css</tt> is a Cascading Style Sheet (CSS) file used by
some Web browsers for formatting the HTML documentation.</p>
</li>

<li>
<p>The <tt class="FILENAME">base</tt>, <tt class="FILENAME">catpages</tt>, <tt
class="FILENAME">crypto</tt>, <tt class="FILENAME">dict</tt>, <tt
class="FILENAME">doc</tt>, <tt class="FILENAME">games</tt>, <tt
class="FILENAME">info</tt>, <tt class="FILENAME">manpages</tt>, <tt
class="FILENAME">proflibs</tt>, and <tt class="FILENAME">src</tt> directories contain the
primary distribution components of FreeBSD itself and are split into smaller files for
easy packing onto floppies (should that be necessary).</p>
</li>

<li>
<p>The <tt class="FILENAME">compat1x</tt>, <tt class="FILENAME">compat20</tt>, <tt
class="FILENAME">compat21</tt>, <tt class="FILENAME">compat22</tt>, <tt
class="FILENAME">compat3x</tt>, and <tt class="FILENAME">compat4x</tt> directories
contain distributions for compatibility with older releases and are distributed as single
gzip'd tar files - they can be installed during release time or later by running their
<tt class="FILENAME">install.sh</tt> scripts.</p>
</li>

<li>
<p>The <tt class="FILENAME">floppies/</tt> subdirectory contains the floppy installation
images; further information on using them can be found in <a href="#FLOPPIES">Section
1.3</a>.</p>
</li>

<li>
<p>The <tt class="FILENAME">packages</tt> and <tt class="FILENAME">ports</tt> directories
contain the FreeBSD Packages and Ports Collections. Packages may be installed from the
packages directory by running the command:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp><kbd
class="USERINPUT">/stand/sysinstall configPackages</kbd>
</pre>

<p>Packages can also be installed by feeding individual filenames in <tt
class="FILENAME">packages</tt>/ to the <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1&amp;manpath=FreeBSD+5.2.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pkg_add</span>(1)</span></a>
command.</p>

<p>The Ports Collection may be installed like any other distribution and requires about
100MB unpacked. More information on the ports collection may be obtained from <a
href="http://www.FreeBSD.org/ports/" target="_top">http://www.FreeBSD.org/ports/</a> or
locally from <tt class="FILENAME">/usr/share/doc/handbook</tt> if you've installed the
<tt class="FILENAME">doc</tt> distribution.</p>
</li>

<li>
<p>Last of all, the <tt class="FILENAME">tools</tt> directory contains various DOS tools
for discovering disk geometries, installing boot managers and the like. It is purely
optional and provided only for user convenience.</p>
</li>
</ol>

<br />
<br />
<p>A typical distribution directory (for example, the <tt class="FILENAME">info</tt>
distribution) looks like this internally:</p>

<pre class="SCREEN">
CHECKSUM.MD5    info.ab         info.ad         info.inf        install.sh
info.aa         info.ac         info.ae         info.mtree
</pre>

<p>The <tt class="FILENAME">CHECKSUM.MD5</tt> file contains MD5 signatures for each file,
should data corruption be suspected, and is purely for reference. It is not used by the
actual installation and does not need to be copied with the rest of the distribution
files. The <tt class="FILENAME">info.a*</tt> files are split, gzip'd tar files, the
contents of which can be viewed by doing:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cat info.a* | tar tvzf -</kbd>
</pre>

<p>During installation, they are automatically concatenated and extracted by the
installation procedure.</p>

<p>The <tt class="FILENAME">info.inf</tt> file is also necessary since it is read by the
installation program in order to figure out how many pieces to look for when fetching and
concatenating the distribution. When putting distributions onto floppies, the <tt
class="FILENAME">.inf</tt> file <span class="emphasis"><i
class="EMPHASIS">must</i></span> occupy the first floppy of each distribution set!</p>

<p>The <tt class="FILENAME">info.mtree</tt> file is another non-essential file which is
provided for user reference. It contains the MD5 signatures of the <span
class="emphasis"><i class="EMPHASIS">unpacked</i></span> distribution files and can be
later used with the <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mtree&amp;sektion=8&amp;manpath=FreeBSD+5.2.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mtree</span>(8)</span></a> program
to verify the installation permissions and checksums against any possible modifications
to the file. When used with the <tt class="FILENAME">base</tt> distribution, this can be
an excellent way of detecting trojan horse attacks on your system.</p>

<p>Finally, the <tt class="FILENAME">install.sh</tt> file is for use by those who want to
install the distribution after installation time. To install the info distribution from
CDROM after a system was installed, for example, you'd do:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /cdrom/info</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">sh install.sh</kbd>
</pre>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="UPGRADING" name="UPGRADING">3 Upgrading FreeBSD</a></h2>

<p>These instructions describe a procedure for doing a binary upgrade from an older
version of FreeBSD.</p>

<div class="WARNING">
<blockquote class="WARNING">
<p><b>Warning:</b> While the FreeBSD upgrade procedure does its best to safeguard against
accidental loss of data, it is still more than possible to <span class="emphasis"><i
class="EMPHASIS">wipe out your entire disk</i></span> with this installation! Please do
not accept the final confirmation request unless you have adequately backed up any
important data files.</p>
</blockquote>
</div>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Important:</b> These notes assume that you are using the version of <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8&amp;manpath=FreeBSD+5.2.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>
supplied with the version of FreeBSD to which you intend to upgrade. Using a mismatched
version of <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8&amp;manpath=FreeBSD+5.2.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a> is
almost guaranteed to cause problems and has been known to leave systems in an unusable
state. The most commonly made mistake in this regard is the use of an old copy of <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8&amp;manpath=FreeBSD+5.2.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>
from an existing installation to upgrade to a newer version of FreeBSD. This is <span
class="emphasis"><i class="EMPHASIS">not</i></span> recommended.</p>
</blockquote>
</div>

<div class="WARNING">
<blockquote class="WARNING">
<p><b>Warning:</b> Binary upgrades to FreeBSD 5.2.1-RELEASE from FreeBSD 4-STABLE are not
supported at this time. There are some files present in a FreeBSD 4-STABLE whose presence
can be disruptive, but are not removed by a binary upgrade. One notable example is that
an old <tt class="FILENAME">/usr/include/g++</tt> directory will cause C++ programs to
compile incorrectly (or not at all).</p>

<p></p>

<p>These upgrade instructions are provided for the use of users upgrading from relatively
recent FreeBSD 5-CURRENT snapshots.</p>
</blockquote>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN667" name="AEN667">3.1 Introduction</a></h3>

<p>The upgrade procedure replaces distributions selected by the user with those
corresponding to the new FreeBSD release. It preserves standard system configuration
data, as well as user data, installed packages and other software.</p>

<p>Administrators contemplating an upgrade are encouraged to study this section in its
entirety before commencing an upgrade. Failure to do so may result in a failed upgrade or
loss of data.</p>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN671" name="AEN671">3.1.1 Upgrade Overview</a></h4>

<p>Upgrading of a distribution is performed by extracting the new version of the
component over the top of the previous version. Files belonging to the old distribution
are not deleted.</p>

<p>System configuration is preserved by retaining and restoring the previous version of
the following files:</p>

<p><tt class="FILENAME">Xaccel.ini</tt>, <tt class="FILENAME">XF86Config</tt>, <tt
class="FILENAME">adduser.conf</tt>, <tt class="FILENAME">aliases</tt>, <tt
class="FILENAME">aliases.db</tt>, <tt class="FILENAME">amd.map</tt>, <tt
class="FILENAME">crontab</tt>, <tt class="FILENAME">csh.cshrc</tt>, <tt
class="FILENAME">csh.login</tt>, <tt class="FILENAME">csh.logout</tt>, <tt
class="FILENAME">cvsupfile</tt>, <tt class="FILENAME">dhclient.conf</tt>, <tt
class="FILENAME">disktab</tt>, <tt class="FILENAME">dm.conf</tt>, <tt
class="FILENAME">dumpdates</tt>, <tt class="FILENAME">exports</tt>, <tt
class="FILENAME">fbtab</tt>, <tt class="FILENAME">fstab</tt>, <tt
class="FILENAME">ftpusers</tt>, <tt class="FILENAME">gettytab</tt>, <tt
class="FILENAME">gnats</tt>, <tt class="FILENAME">group</tt>, <tt
class="FILENAME">hosts</tt>, <tt class="FILENAME">hosts.allow</tt>, <tt
class="FILENAME">hosts.equiv</tt>, <tt class="FILENAME">hosts.lpd</tt>, <tt
class="FILENAME">inetd.conf</tt>, <tt class="FILENAME">localtime</tt>, <tt
class="FILENAME">login.access</tt>, <tt class="FILENAME">login.conf</tt>, <tt
class="FILENAME">mail</tt>, <tt class="FILENAME">mail.rc</tt>, <tt
class="FILENAME">make.conf</tt>, <tt class="FILENAME">manpath.config</tt>, <tt
class="FILENAME">master.passwd</tt>, <tt class="FILENAME">motd</tt>, <tt
class="FILENAME">namedb</tt>, <tt class="FILENAME">networks</tt>, <tt
class="FILENAME">newsyslog.conf</tt>, <tt class="FILENAME">nsmb.conf</tt>, <tt
class="FILENAME">nsswitch.conf</tt>, <tt class="FILENAME">pam.conf</tt>, <tt
class="FILENAME">passwd</tt>, <tt class="FILENAME">periodic</tt>, <tt
class="FILENAME">ppp</tt>, <tt class="FILENAME">printcap</tt>, <tt
class="FILENAME">profile</tt>, <tt class="FILENAME">pwd.db</tt>, <tt
class="FILENAME">rc.conf</tt>, <tt class="FILENAME">rc.conf.local</tt>, <tt
class="FILENAME">rc.firewall</tt>, <tt class="FILENAME">rc.local</tt>, <tt
class="FILENAME">remote</tt>, <tt class="FILENAME">resolv.conf</tt>, <tt
class="FILENAME">rmt</tt>, <tt class="FILENAME">sendmail.cf</tt>, <tt
class="FILENAME">sendmail.cw</tt>, <tt class="FILENAME">services</tt>, <tt
class="FILENAME">shells</tt>, <tt class="FILENAME">skeykeys</tt>, <tt
class="FILENAME">spwd.db</tt>, <tt class="FILENAME">ssh</tt>, <tt
class="FILENAME">syslog.conf</tt>, <tt class="FILENAME">ttys</tt>, <tt
class="FILENAME">uucp</tt></p>

<p>The versions of these files which correspond to the new version are moved to <tt
class="FILENAME">/etc/upgrade/</tt>. The system administrator may peruse these new
versions and merge components as desired. Note that many of these files are
interdependent, and the best merge procedure is to copy all site-specific data from the
current files into the new.</p>

<p>During the upgrade procedure, the administrator is prompted for a location into which
all files from <tt class="FILENAME">/etc/</tt> are saved. In the event that local
modifications have been made to other files, they may be subsequently retrieved from this
location.</p>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN745" name="AEN745">3.2 Procedure</a></h3>

<p>This section details the upgrade procedure. Particular attention is given to items
which substantially differ from a normal installation.</p>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN748" name="AEN748">3.2.1 Backup</a></h4>

<p>User data and system configuration should be backed up before upgrading. While the
upgrade procedure does its best to prevent accidental mistakes, it is possible to
partially or completely destroy data and configuration information.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN751" name="AEN751">3.2.2 Mount Filesystems</a></h4>

<p>The disklabel editor is entered with the nominated disk's filesystem devices listed.
Prior to commencing the upgrade, the administrator should make a note of the device names
and corresponding mountpoints. These mountpoints should be entered here. <span
class="emphasis"><i class="EMPHASIS">Do not</i></span> set the ``newfs flag'' for any
filesystems, as this will cause data loss.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN756" name="AEN756">3.2.3 Select Distributions</a></h4>

<p>When selecting distributions, there are no constraints on which must be selected. As a
general rule, the <var class="LITERAL">base</var> distribution should be selected for an
update, and the <var class="LITERAL">man</var> distribution if manpages are already
installed. Other distributions may be selected beyond those originally installed if the
administrator wishes to add additional functionality.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="FSTAB" name="FSTAB">3.2.4 After Installation</a></h4>

<p>Once the installation procedure has completed, the administrator is prompted to
examine the new configuration files. At this point, checks should be made to ensure that
the system configuration is valid. In particular, the <tt
class="FILENAME">/etc/rc.conf</tt> and <tt class="FILENAME">/etc/fstab</tt> files should
be checked.</p>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN766" name="AEN766">3.3 Upgrading from Source Code</a></h3>

<p>Those interested in an upgrade method that allows more flexibility and sophistication
should take a look at <a
href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/cutting-edge.html"
target="_top">The Cutting Edge</a> in the FreeBSD Handbook. This procedure involves
rebuilding all of FreeBSD from source code. It requires reliable network connectivity,
extra disk space, and time, but has advantages for networks and other more complex
installations. This is roughly the same procedure as is used for track the -STABLE or
-CURRENT development branches.</p>

<p><tt class="FILENAME">/usr/src/UPDATING</tt> contains important information on updating
a FreeBSD system from source code. It lists various issues resulting from changes in
FreeBSD that may affect an upgrade.</p>

<p></p>
</div>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="TROUBLE" name="TROUBLE">4 Troubleshooting</a></h2>

<div class="SECT2">
<h3 class="SECT2"><a id="REPAIRING" name="REPAIRING">4.1 Repairing an Existing FreeBSD
Installation</a></h3>

<p>FreeBSD features a ``Fixit'' option in the top menu of the boot floppy. To use it, you
will also need either a <tt class="FILENAME">fixit.flp</tt> image floppy, generated in
the same fashion as the boot floppy, or the ``live filesystem'' CDROM; typically the
second CDROM in a multi-disc FreeBSD distribution.</p>

<p>To invoke fixit, simply boot the <tt class="FILENAME">kern.flp</tt> floppy, choose the
``Fixit'' item and insert the fixit floppy or CDROM when asked. You will then be placed
into a shell with a wide variety of commands available (in the <tt
class="FILENAME">/stand</tt> and <tt class="FILENAME">/mnt2/stand</tt> directories) for
checking, repairing and examining filesystems and their contents. Some UNIX
administration experience <span class="emphasis"><i class="EMPHASIS">is</i></span>
required to use the fixit option.</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN787" name="AEN787">4.2 Common Installation Problems for NEC
PC-98x1 Architecture Users</a></h3>
</div>
</div>
</div>

<hr />
<p align="center"><small>This file, and other release-related documents, can be
downloaded from <a href="ftp://ftp.FreeBSD.org/">ftp://ftp.FreeBSD.org/</a>.</small></p>

<p align="center"><small>For questions about FreeBSD, read the <a
href="http://www.FreeBSD.org/docs.html">documentation</a> before contacting &#60;<a
href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&#62;.</small></p>

<p align="center"><small>For questions about this documentation, e-mail &#60;<a
href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&#62;.</small></p>

<br />
<br />
</body>
</html>

