<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>FreeBSD/i386 6.3-RELEASE Installation Instructions</title>
<meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.79" />
<link rel="STYLESHEET" type="text/css" href="docbook.css" />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
</head>
<body class="ARTICLE" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084"
alink="#0000FF">
<div class="ARTICLE">
<div class="TITLEPAGE">
<h1 class="TITLE"><a id="AEN2" name="AEN2">FreeBSD/i386 6.3-RELEASE Installation
Instructions</a></h1>

<h3 class="CORPAUTHOR">The FreeBSD Project</h3>

<p class="COPYRIGHT">Copyright &copy; 2000, 2001, 2002, 2003, 2004, 2005, 2006 The
FreeBSD Documentation Project</p>

<hr />
</div>

<blockquote class="ABSTRACT">
<div class="ABSTRACT"><a id="AEN14" name="AEN14"></a>
<p>This article gives some brief instructions on installing FreeBSD/i386 6.3-RELEASE,
with particular emphasis given to obtaining a FreeBSD distribution. Some notes on
troubleshooting and frequently-asked questions are also given.</p>
</div>
</blockquote>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="INSTALL" name="INSTALL">1 Installing FreeBSD</a></h2>

<p>This section documents the process of installing a new distribution of FreeBSD. These
instructions pay particular emphasis to the process of obtaining the FreeBSD 6.3-RELEASE
distribution and to beginning the installation procedure. The <a
href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/install.html"
target="_top">&#8220;Installing FreeBSD&#8221;</a> chapter of the <a
href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/" target="_top">FreeBSD
Handbook</a> provides more in-depth information about the installation program itself,
including a guided walkthrough with screenshots.</p>

<p>If you are upgrading from a previous release of FreeBSD, please see <a
href="#UPGRADING">Section 3</a> for instructions on upgrading.</p>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="GETTING-STARTED" name="GETTING-STARTED">1.1 Getting
Started</a></h3>

<p>Probably the most important pre-installation step that can be taken is that of reading
the various instruction documents provided with FreeBSD. A roadmap of documents
pertaining to this release of FreeBSD can be found in <tt
class="FILENAME">README.TXT</tt>, which can usually be found in the same location as this
file; most of these documents, such as the release notes and the hardware compatibility
list, are also accessible in the Documentation menu of the installer.</p>

<p>Note that on-line versions of the FreeBSD <a
href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/faq/" target="_top">FAQ</a> and <a
href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/"
target="_top">Handbook</a> are also available from the <a href="http://www.FreeBSD.org/"
target="_top">FreeBSD Project Web site</a>, if you have an Internet connection.</p>

<p>This collection of documents may seem daunting, but the time spent reading them will
likely be saved many times over. Being familiar with what resources are available can
also be helpful in the event of problems during installation.</p>

<p>The best laid plans sometimes go awry, so if you run into trouble take a look at <a
href="#TROUBLE">Section 4</a>, which contains valuable troubleshooting information. You
should also read an updated copy of <tt class="FILENAME">ERRATA.TXT</tt> before
installing, since this will alert you to any problems which have reported in the interim
for your particular release.</p>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Important:</b> While FreeBSD does its best to safeguard against accidental loss of
data, it's still more than possible to <span class="emphasis"><i class="EMPHASIS">wipe
out your entire disk</i></span> with this installation if you make a mistake. Please do
not proceed to the final FreeBSD installation menu unless you've adequately backed up any
important data first.</p>
</blockquote>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN39" name="AEN39">1.2 Hardware Requirements</a></h3>

<p>FreeBSD for the i386 requires a 486 or better processor and at least 24&nbsp;MB of
RAM. You will need at least 150MB of free hard drive space for the most minimal
installation. See below for ways of shrinking existing DOS partitions in order to install
FreeBSD.</p>

<p>If you are not familiar with configuring hardware for FreeBSD, you should be sure to
read the <tt class="FILENAME">HARDWARE.TXT</tt> file; it contains important information
on what hardware is supported by FreeBSD.</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="FLOPPIES" name="FLOPPIES">1.3 Floppy Disk Image
Instructions</a></h3>

<p>Depending on how you choose to install FreeBSD, you may need to create a set of floppy
disks (usually four) to begin the installation process. This section briefly describes
how to create these disks, either from a CDROM installation or from the Internet. Note
that in the common case of installing FreeBSD from CDROM, on a machine that supports
bootable CDROMs, the steps outlined in this section will not be needed and can be
skipped.</p>

<p>For most CDROM or network installations, all you need to copy onto actual floppies
from the <tt class="FILENAME">floppies/</tt> directory are the <tt
class="FILENAME">boot.flp</tt> and <tt class="FILENAME">kern<tt
class="REPLACEABLE"><i>X</i></tt>.flp</tt> images (for 1.44MB floppies).</p>

<p>Getting these images over the network is easy. Simply fetch the <tt
class="REPLACEABLE"><i>release</i></tt><tt class="FILENAME">/floppies/boot.flp</tt>, and
all of the <tt class="REPLACEABLE"><i>release</i></tt><tt
class="FILENAME">/floppies/kern<tt class="REPLACEABLE"><i>X</i></tt>.flp</tt> files from
<a href="ftp://ftp.FreeBSD.org/" target="_top">ftp://ftp.FreeBSD.org/</a> or one of the
many mirrors listed at <a
href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/mirrors-ftp.html"
target="_top">FTP Sites</a> section of the Handbook, or on the <a
href="http://mirrorlist.FreeBSD.org/" target="_top">http://mirrorlist.FreeBSD.org/</a>
Web pages.</p>

<p>Get several blank, freshly formatted floppies and image copy <tt
class="FILENAME">boot.flp</tt> onto one and the <tt class="FILENAME">kern<tt
class="REPLACEABLE"><i>X</i></tt>.flp</tt> files onto the others. These images are <span
class="emphasis"><i class="EMPHASIS">not</i></span> DOS files. You cannot simply copy
them to a DOS or UFS floppy as regular files, you need to &#8220;image&#8221; copy them
to the floppy with <tt class="FILENAME">fdimage.exe</tt> under DOS (see the <tt
class="FILENAME">tools</tt> directory on your CDROM or FreeBSD FTP mirror) or the <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&sektion=1&manpath=FreeBSD+6.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">dd</span>(1)</span></a> command in
UNIX.</p>

<p>For example, to create the kernel floppy image from DOS, you'd do something like
this:</p>

<pre class="SCREEN">
<samp class="PROMPT">C&#62;</samp> <kbd class="USERINPUT">fdimage boot.flp a:</kbd>
</pre>

<p>Assuming that you'd copied <tt class="FILENAME">fdimage.exe</tt> and <tt
class="FILENAME">boot.flp</tt> into a directory somewhere. You would do the same for the
<tt class="FILENAME">kern<tt class="REPLACEABLE"><i>X</i></tt>.flp</tt> files, of
course.</p>

<p>If you're creating the boot floppy from a UNIX machine, you may find that:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">dd if=floppies/boot.flp of=/dev/rfd0</kbd>
</pre>

<p>or</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">dd if=floppies/boot.flp of=/dev/fd0</kbd>
</pre>

<p>or</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">dd if=floppies/boot.flp of=/dev/floppy</kbd>
</pre>

<p>work well, depending on your hardware and operating system environment (different
versions of UNIX have different names for the floppy drive).</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="START-INSTALLATION" name="START-INSTALLATION">1.4 Installing
FreeBSD from CDROM or the Internet</a></h3>

<p>The easiest type of installation is from CDROM. If you have a supported CDROM drive
and a FreeBSD installation CDROM, there are 2 ways of starting the installation from
it:</p>

<ul>
<li>
<p>If your system supports the &#8220;CDBOOT&#8221; standard for bootable CDROM media and
you have booting from CD enabled, simply put the FreeBSD installation CD in your CDROM
drive and boot the system to begin installation.</p>
</li>

<li>
<p>Build a set of FreeBSD boot floppies from the <tt class="FILENAME">floppies/</tt>
directory in every FreeBSD distribution. Read <a href="#FLOPPIES">Section 1.3</a> for
more information on creating the bootable floppies under different operating systems.
Then you simply boot from the first floppy and you should soon be in the FreeBSD
installation.</p>
</li>
</ul>

<br />
<br />
<p>If you don't have a CDROM (or your computer does not support booting from CDROM) and
would like to simply install over the net using PPP, SLIP or a dedicated connection, you
should start the installation by building a set of FreeBSD boot floppies from the files
<tt class="FILENAME">floppies/boot.flp</tt> and <tt class="FILENAME">floppies/kern<tt
class="REPLACEABLE"><i>X</i></tt>.flp</tt> using the instructions found in <a
href="#FLOPPIES">Section 1.3</a>. Restart your computer using the <tt
class="FILENAME">boot.flp</tt> disk; when prompted, insert the other disks as required.
Then, please go to <a href="#FTPNFS">Section 1.5.5</a> for additional tips on installing
via FTP or NFS.</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN214" name="AEN214">1.5 Detail on various installation
types</a></h3>

<p>Once you've gotten yourself to the initial installation screen somehow, you should be
able to follow the various menu prompts and go from there. If you've never used the
FreeBSD installation before, you are also encouraged to read some of the documentation in
the Documentation submenu as well as the general &#8220;Usage&#8221; instructions on the
first menu.</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> If you get stuck at a screen, press the <b class="KEYCAP">F1</b> key for
online documentation relevant to that specific section.</p>
</blockquote>
</div>

<p>If you've never installed FreeBSD before, or even if you have, the
&#8220;Standard&#8221; installation mode is the most recommended since it makes sure that
you'll visit all the various important checklist items along the way. If you're much more
comfortable with the FreeBSD installation process and know <span class="emphasis"><i
class="EMPHASIS">exactly</i></span> what you want to do, use the &#8220;Express&#8221; or
&#8220;Custom&#8221; installation options. If you're upgrading an existing system, use
the &#8220;Upgrade&#8221; option.</p>

<p>The FreeBSD installer supports the direct use of floppy, DOS, tape, CDROM, FTP, NFS
and UFS partitions as installation media; further tips on installing from each type of
media are listed below.</p>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN253" name="AEN253">1.5.1 Installing from a Network
CDROM</a></h4>

<p>If you simply wish to install from a local CDROM drive then see <a
href="#START-INSTALLATION">Section 1.4</a>. If you don't have a CDROM drive on your
system and wish to use a FreeBSD distribution CD in the CDROM drive of another system to
which you have network connectivity, there are also several ways of going about it:</p>

<ul>
<li>
<p>If you would be able to FTP install FreeBSD directly from the CDROM drive in some
FreeBSD machine, it's quite easy: You ensure an FTP server is running and then simply add
the following line to the password file (using the <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&sektion=8&manpath=FreeBSD+6.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">vipw</span>(8)</span></a>
command):</p>

<pre class="SCREEN">
ftp:*:99:99::0:0:FTP:/cdrom:/sbin/nologin
</pre>

<p>On the machine on which you are running the install, go to the Options menu and set
Release Name to <tt class="LITERAL">any</tt>. You may then choose a Media type of <tt
class="LITERAL">FTP</tt> and type in <tt class="FILENAME">ftp://<tt
class="REPLACEABLE"><i>machine</i></tt></tt> after picking &#8220;URL&#8221; in the ftp
sites menu.</p>

<div class="WARNING">
<blockquote class="WARNING">
<p><b>Warning:</b> This may allow anyone on the local network (or Internet) to make
&#8220;anonymous FTP&#8221; connections to this machine, which may not be desirable.</p>
</blockquote>
</div>
</li>

<li>
<p>If you would rather use NFS to export the CDROM directly to the machine(s) you'll be
installing from, you need to first add an entry to the <tt
class="FILENAME">/etc/exports</tt> file (on the machine with the CDROM drive). The
example below allows the machine <tt class="HOSTID">ziggy.foo.com</tt> to mount the CDROM
directly via NFS during installation:</p>

<pre class="SCREEN">
/cdrom          -ro             ziggy.foo.com
</pre>

<p>The machine with the CDROM must also be configured as an NFS server, of course, and if
you're not sure how to do that then an NFS installation is probably not the best choice
for you unless you're willing to read up on <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&sektion=5&manpath=FreeBSD+6.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rc.conf</span>(5)</span></a> and
configure things appropriately. Assuming that this part goes smoothly, you should be able
to enter: <tt class="FILENAME"><tt class="REPLACEABLE"><i>cdrom-host</i></tt>:/cdrom</tt>
as the path for an NFS installation when the target machine is installed, e.g. <tt
class="FILENAME">wiggy:/cdrom</tt>.</p>
</li>
</ul>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN285" name="AEN285">1.5.2 Installing from Floppies</a></h4>

<p>If you must install from floppy disks, either due to unsupported hardware or just
because you enjoy doing things the hard way, you must first prepare some floppies for the
install.</p>

<p>First, make your boot floppies as described in <a href="#FLOPPIES">Section
1.3</a>.</p>

<p>Second, peruse <a href="#LAYOUT">Section 2</a> and pay special attention to the
&#8220;Distribution Format&#8221; section since it describes which files you're going to
need to put onto floppy and which you can safely skip.</p>

<p>Next you will need, at minimum, as many 1.44MB floppies as it takes to hold all files
in the <tt class="FILENAME">bin</tt> (binary distribution) directory. If you're preparing
these floppies under DOS, then these floppies <span class="emphasis"><i
class="EMPHASIS">must</i></span> be formatted using the MS-DOS <tt
class="FILENAME">FORMAT</tt> command. If you're using Windows, use the Windows File
Manager format command.</p>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Important:</b> Frequently, floppy disks come &#8220;factory preformatted&#8221;.
While convenient, many problems reported by users in the past have resulted from the use
of improperly formatted media. Re-format them yourself, just to make sure.</p>
</blockquote>
</div>

<p>If you're creating the floppies from another FreeBSD machine, a format is still not a
bad idea though you don't need to put a DOS filesystem on each floppy. You can use the <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&sektion=8&manpath=FreeBSD+6.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">disklabel</span>(8)</span></a> and
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&sektion=8&manpath=FreeBSD+6.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">newfs</span>(8)</span></a>
commands to put a UFS filesystem on a floppy, as the following sequence of commands
illustrates:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">fdformat -f 1440 fd0</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">disklabel -w fd0 floppy3</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">newfs -i 65536 /dev/fd0</kbd>
</pre>

<p>After you've formatted the floppies for DOS or UFS, you'll need to copy the files onto
them. The distribution files are sized so that a floppy disk will hold a single file.
Each distribution should go into its own subdirectory on the floppy, e.g.: <tt
class="FILENAME">a:\bin\bin.inf</tt>, <tt class="FILENAME">a:\bin\bin.aa</tt>, <tt
class="FILENAME">a:\bin\bin.ab</tt>, ...</p>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Important:</b> The <tt class="FILENAME">bin.inf</tt> file also needs to go on the
first floppy of the <tt class="FILENAME">bin</tt> set since it is read by the
installation program in order to figure out how many additional pieces to look for when
fetching and concatenating the distribution. When putting distributions onto floppies,
the <tt class="FILENAME">distname.inf</tt> file <span class="emphasis"><i
class="EMPHASIS">must</i></span> occupy the first floppy of each distribution set.</p>
</blockquote>
</div>

<p>Once you come to the Media screen of the install, select &#8220;Floppy&#8221; and
you'll be prompted for the rest.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN326" name="AEN326">1.5.3 Installing from a DOS
partition</a></h4>

<p>To prepare for installation from an MS-DOS partition you should simply copy the files
from the distribution into a directory called <tt class="FILENAME">FREEBSD</tt> on the
Primary DOS partition (<tt class="DEVICENAME">C:</tt>). For example, to do a minimal
installation of FreeBSD from DOS using files copied from the CDROM, you might do
something like this:</p>

<pre class="SCREEN">
<samp class="PROMPT">C:\&#62;</samp> <kbd class="USERINPUT">MD C:\FREEBSD</kbd>
<samp class="PROMPT">C:\&#62;</samp> <kbd
class="USERINPUT">XCOPY /S E:\BASE C:\FREEBSD\BASE</kbd>
</pre>

<p>Assuming that <tt class="DEVICENAME">E:</tt> was where your CD was mounted.</p>

<p>For as many distributions as you wish to install from DOS (and you have free space
for), install each one in a directory under <tt class="FILENAME">C:\FREEBSD</tt> - the
<tt class="FILENAME">BIN</tt> dist is only the minimal requirement.</p>

<p>Once you've copied the directories, you can simply launch the installation from
floppies as normal and select &#8220;DOS&#8221; as your media type when the time
comes.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN354" name="AEN354">1.5.4 Installing from QIC/SCSI
Tape</a></h4>

<p>When installing from tape, the installation program expects the files to be simply
tar'ed onto it, so after fetching all of the files for the distributions you're
interested in, simply use <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&sektion=1&manpath=FreeBSD+6.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">tar</span>(1)</span></a> to get
them onto the tape with a command something like this:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd <tt
class="REPLACEABLE"><i>/where/you/have/your/dists</i></tt></kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">tar cvf /dev/sa0 <tt
class="REPLACEABLE"><i>dist1</i></tt> .. <tt class="REPLACEABLE"><i>dist2</i></tt></kbd>
</pre>

<p>When you go to do the installation, you should also make sure that you leave enough
room in some temporary directory (which you'll be allowed to choose) to accommodate the
<span class="emphasis"><i class="EMPHASIS">full</i></span> contents of the tape you've
created. Due to the non-random access nature of tapes, this method of installation
requires quite a bit of temporary storage. You should expect to require as much temporary
storage as you have stuff written on tape.</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> When going to do the installation, the tape must be in the drive <span
class="emphasis"><i class="EMPHASIS">before</i></span> booting from the boot floppies.
The installation &#8220;probe&#8221; may otherwise fail to find it.</p>
</blockquote>
</div>

<p>Now create a boot floppy as described in <a href="#FLOPPIES">Section 1.3</a> and
proceed with the installation.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="FTPNFS" name="FTPNFS">1.5.5 Installing over a Network using FTP
or NFS</a></h4>

<p>After making the boot floppies as described in the first section, you can load the
rest of the installation over a network using one of 3 types of connections: serial port,
parallel port, or Ethernet.</p>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="AEN379" name="AEN379">1.5.5.1 Serial Port</a></h5>

<p>SLIP support is rather primitive, and is limited primarily to hard-wired links, such
as a serial cable running between two computers. The link must be hard-wired because the
SLIP installation doesn't currently offer a dialing capability. If you need to dial out
with a modem or otherwise dialog with the link before connecting to it, then the PPP
utility should be used instead.</p>

<p>If you're using PPP, make sure that you have your Internet Service Provider's IP
address and DNS information handy as you'll need to know it fairly early in the
installation process. You may also need to know your own IP address, though PPP supports
dynamic address negotiation and may be able to pick up this information directly from
your ISP if they support it.</p>

<p>You will also need to know how to use the various &#8220;AT commands&#8221; for
dialing out with your particular brand of modem as the PPP dialer provides only a very
simple terminal emulator.</p>
</div>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="AEN385" name="AEN385">1.5.5.2 Parallel Port</a></h5>

<p>If a hard-wired connection to another FreeBSD or Linux machine is available, you might
also consider installing over a &#8220;laplink&#8221; style parallel port cable. The data
rate over the parallel port is much higher than what is typically possible over a serial
line (up to 50k/sec), thus resulting in a quicker installation. It's not typically
necessary to use &#8220;real&#8221; IP addresses when using a point-to-point parallel
cable in this way and you can generally just use RFC 1918 style addresses for the ends of
the link (e.g. <tt class="HOSTID">10.0.0.1</tt>, <tt class="HOSTID">10.0.0.2</tt>,
etc).</p>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Important:</b> If you use a Linux machine rather than a FreeBSD machine as your
PLIP peer, you will also have to specify <code class="OPTION">link0</code> in the TCP/IP
setup screen's &#8220;extra options for ifconfig&#8221; field in order to be compatible
with Linux's slightly different PLIP protocol.</p>
</blockquote>
</div>
</div>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="AEN396" name="AEN396">1.5.5.3 Ethernet</a></h5>

<p>FreeBSD supports most common Ethernet cards; a table of supported cards is provided as
part of the FreeBSD Hardware Notes (see <tt class="FILENAME">HARDWARE.TXT</tt> in the
Documentation menu on the boot floppy or the top level directory of the CDROM). If you
are using one of the supported PCMCIA Ethernet cards, also be sure that it's plugged in
<span class="emphasis"><i class="EMPHASIS">before</i></span> the laptop is powered on.
FreeBSD does not, unfortunately, currently support &#8220;hot insertion&#8221; of PCMCIA
cards during installation.</p>

<p>You will also need to know your IP address on the network, the <code
class="OPTION">netmask</code> value for your subnet and the name of your machine. Your
system administrator can tell you which values are appropriate to your particular network
setup. If you will be referring to other hosts by name rather than IP address, you'll
also need a name server and possibly the address of a gateway (if you're using PPP, it's
your provider's IP address) to use in talking to it. If you want to install by FTP via an
HTTP proxy (see below), you will also need the proxy's address.</p>

<p>If you do not know the answers to these questions then you should really probably talk
to your system administrator <span class="emphasis"><i class="EMPHASIS">first</i></span>
before trying this type of installation. Using a randomly chosen IP address or netmask on
a live network is almost guaranteed not to work, and will probably result in a lecture
from said system administrator.</p>

<p>Once you have a network connection of some sort working, the installation can continue
over NFS or FTP.</p>
</div>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="AEN407" name="AEN407">1.5.5.4 NFS installation tips</a></h5>

<p>NFS installation is fairly straight-forward: Simply copy the FreeBSD distribution
files you want onto a server somewhere and then point the NFS media selection at it.</p>

<p>If this server supports only &#8220;privileged port&#8221; access (this is generally
the default for Sun and Linux workstations), you may need to set this option in the
Options menu before installation can proceed.</p>

<p>If you have a poor quality Ethernet card which suffers from very slow transfer rates,
you may also wish to toggle the appropriate Options flag.</p>

<p>In order for NFS installation to work, the server must also support &#8220;subdir
mounts&#8221;, e.g. if your FreeBSD distribution directory lives on <tt
class="FILENAME">wiggy:/usr/archive/stuff/FreeBSD</tt>, then <tt
class="HOSTID">wiggy</tt> will have to allow the direct mounting of <tt
class="FILENAME">/usr/archive/stuff/FreeBSD</tt>, not just <tt class="FILENAME">/usr</tt>
or <tt class="FILENAME">/usr/archive/stuff</tt>.</p>

<p>In FreeBSD's <tt class="FILENAME">/etc/exports</tt> file this is controlled by the
<code class="OPTION">-alldirs</code> option. Other NFS servers may have different
conventions. If you are getting <tt class="LITERAL">Permission Denied</tt> messages from
the server then it's likely that you don't have this properly enabled.</p>
</div>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="AEN424" name="AEN424">1.5.5.5 FTP Installation tips</a></h5>

<p>FTP installation may be done from any mirror site containing a reasonably up-to-date
version of FreeBSD. A full menu of reasonable choices for almost any location in the
world is provided in the FTP site menu during installation.</p>

<p>If you are installing from some other FTP site not listed in this menu, or you are
having troubles getting your name server configured properly, you can also specify your
own URL by selecting the &#8220;URL&#8221; choice in that menu. A URL can contain a
hostname or an IP address, so something like the following would work in the absence of a
name server:</p>

<pre class="SCREEN">
ftp://216.66.64.162/pub/FreeBSD/releases/i386/4.2-RELEASE
</pre>

<p>There are three FTP installation modes you can use:</p>

<ul>
<li>
<p>FTP: This method uses the standard &#8220;Active&#8221; mode for transfers, in which
the server initiates a connection to the client. This will not work through most
firewalls but will often work best with older FTP servers that do not support passive
mode. If your connection hangs with passive mode, try this one.</p>
</li>

<li>
<p>FTP Passive: This sets the FTP "Passive" mode which prevents the server from opening
connections to the client. This option is best for users to pass through firewalls that
do not allow incoming connections on random port addresses.</p>
</li>

<li>
<p>FTP via an HTTP proxy: This option instructs FreeBSD to use HTTP to connect to a proxy
for all FTP operations. The proxy will translate the requests and send them to the FTP
server. This allows the user to pass through firewalls that do not allow FTP at all, but
offer an HTTP proxy. You must specify the hostname of the proxy in addition to the FTP
server.</p>

<p>In the rare case that you have an FTP proxy that does not go through HTTP, you can
specify the URL as something like:</p>

<pre class="SCREEN">
<kbd class="USERINPUT">ftp://foo.bar.com:<tt
class="REPLACEABLE"><i>port</i></tt>/pub/FreeBSD</kbd>
</pre>

<p>In the URL above, <tt class="REPLACEABLE"><i>port</i></tt> is the port number of the
proxy FTP server.</p>
</li>
</ul>
</div>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN445" name="AEN445">1.5.6 Tips for Serial Console
Users</a></h4>

<p>If you'd like to install FreeBSD on a machine using just a serial port (e.g. you don't
have or wish to use a VGA card), please follow these steps:</p>

<div class="PROCEDURE">
<ol type="1">
<li class="STEP">
<p>Connect some sort of ANSI (vt100) compatible terminal or terminal emulation program to
the <tt class="DEVICENAME">COM1</tt> port of the PC you are installing FreeBSD onto.</p>
</li>

<li class="STEP">
<p>Unplug the keyboard (yes, that's correct!) and then try to boot from floppy or the
installation CDROM, depending on the type of installation media you have, with the
keyboard unplugged.</p>
</li>

<li class="STEP">
<p>If you don't get any output on your serial console, plug the keyboard in again. If you
are booting from the CDROM, proceed to <a href="#HITSPACE">step 5</a> as soon as you hear
the beep.</p>
</li>

<li class="STEP">
<p>If booting from floppies, when access to the disk stops, insert the first of the <tt
class="FILENAME">kern<tt class="REPLACEABLE"><i>X</i></tt>.flp</tt> disks and press <b
class="KEYCAP">Enter</b>. When access to this disk finishes, insert the next <tt
class="FILENAME">kern<tt class="REPLACEABLE"><i>X</i></tt>.flp</tt> disk and press <b
class="KEYCAP">Enter</b>, and repeat until all <tt class="FILENAME">kern<tt
class="REPLACEABLE"><i>X</i></tt>.flp</tt> disks have been inserted. When disk activity
finishes, reinsert the <tt class="FILENAME">boot.flp</tt> floppy disk and press <b
class="KEYCAP">Enter</b>.</p>
</li>

<li class="STEP"><a id="HITSPACE" name="HITSPACE"></a>
<p>Once a beep is heard, hit the number <b class="KEYCAP">6</b>, then enter</p>

<pre class="SCREEN">
<kbd class="USERINPUT">boot -h</kbd>
</pre>

<p>and you should now definitely be seeing everything on the serial port. If that still
doesn't work, check your serial cabling as well as the settings on your terminal
emulation program or actual terminal device. It should be set for 9600 baud, 8 bits, no
parity.</p>
</li>
</ol>
</div>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN475" name="AEN475">1.6 Question and Answer Section for i386
Architecture Users</a></h3>

<div class="QANDASET">
<dl>
<dt>1.6.1. <a href="#Q1.6.1.">Help! I have no space! Do I need to delete everything
first?</a></dt>

<dt>1.6.2. <a href="#Q1.6.2.">Can I use compressed DOS filesystems from FreeBSD?</a></dt>

<dt>1.6.3. <a href="#Q1.6.3.">Can I mount my DOS extended partitions?</a></dt>

<dt>1.6.4. <a href="#Q1.6.4.">Can I run DOS binaries under FreeBSD?</a></dt>

<dt>1.6.5. <a href="#Q1.6.5.">Can I run <span
class="TRADEMARK">Microsoft</span>&reg;&nbsp;<span class="TRADEMARK">Windows</span>&reg;
applications under FreeBSD?</a></dt>

<dt>1.6.6. <a href="#Q1.6.6.">Can I run other Operating Systems under FreeBSD?</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q1.6.1." name="Q1.6.1."></a><b>1.6.1.</b> Help! I have no space! Do I need to
delete everything first?</p>
</div>

<div class="ANSWER">
<p><b></b>If your machine is already running DOS and has little or no free space
available for FreeBSD's installation, there are several alternatives for resizing
existing partitions so that you can install FreeBSD.</p>

<p>The <b class="APPLICATION">FIPS</b> utility, provided in the <tt
class="FILENAME">tools/</tt> subdirectory on the FreeBSD CDROM or on the various FreeBSD
ftp sites, can resize an existing FAT partition. It allows you to split an existing DOS
partition into two pieces, preserving the original partition and allowing you to install
onto the second free piece. You first &#8220;defrag&#8221; your DOS partition, using the
DOS 6.xx <tt class="FILENAME">DEFRAG</tt> utility or the <b class="APPLICATION">Norton
Disk Tools</b>, then run FIPS. It will prompt you for the rest of the information it
needs. Afterwards, you can reboot and install FreeBSD on the new partition. Also note
that FIPS will create the second partition as a &#8220;clone&#8221; of the first, so
you'll actually see that you now have two DOS Primary partitions where you formerly had
one. Don't be alarmed! You can simply delete the extra DOS Primary partition (making sure
it's the right one by examining its size).</p>

<p>For systems with NTFS partitions, a different tool, such as <b
class="APPLICATION">ntfsresize</b> or the commercially-available <b
class="APPLICATION">Partition Magic</b>, is required. <b
class="APPLICATION">ntfsresize</b>, as well as the <b class="APPLICATION">GParted</b>
graphical interface for partition resizing, is available on a number of Live CD Linux
distributions, such as <a href="http://www.sysresccd.org/"
target="_top">SystemRescueCD</a>.</p>

<p>Problems have been reported resizing Microsoft Vista partitions. Having a Vista
installation CDROM handy when attempting such an operation is recommended. As with all
such disk maintenance tasks, a current set of backups is also strongly advised.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q1.6.2." name="Q1.6.2."></a><b>1.6.2.</b> Can I use compressed DOS filesystems
from FreeBSD?</p>
</div>

<div class="ANSWER">
<p><b></b>No. If you are using a utility such as <b class="APPLICATION">Stacker</b>(tm)
or <b class="APPLICATION">DoubleSpace</b>(tm), FreeBSD will only be able to use whatever
portion of the filesystem you leave uncompressed. The rest of the filesystem will show up
as one large file (the stacked/dblspaced file!). <span class="emphasis"><i
class="EMPHASIS">Do not remove that file</i></span> as you will probably regret it
greatly!</p>

<p>It is probably better to create another uncompressed DOS extended partition and use
this for communications between DOS and FreeBSD if such is your desire.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q1.6.3." name="Q1.6.3."></a><b>1.6.3.</b> Can I mount my DOS extended
partitions?</p>
</div>

<div class="ANSWER">
<p><b></b>Yes. DOS extended partitions are mapped in at the end of the other
&#8220;slices&#8221; in FreeBSD, e.g. your <tt class="DEVICENAME">D:</tt> drive might be
<tt class="FILENAME">/dev/da0s5</tt>, your <tt class="DEVICENAME">E:</tt> drive <tt
class="FILENAME">/dev/da0s6</tt>, and so on. This example assumes, of course, that your
extended partition is on SCSI drive 0. For IDE drives, substitute <tt
class="LITERAL">ad</tt> for <tt class="LITERAL">da</tt> appropriately. You otherwise
mount extended partitions exactly like you would mount any other DOS drive, e.g.:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">mount -t msdos /dev/da0s5 /dos_d</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q1.6.4." name="Q1.6.4."></a><b>1.6.4.</b> Can I run DOS binaries under
FreeBSD?</p>
</div>

<div class="ANSWER">
<p><b></b>Ongoing work with BSDI's <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=doscmd&sektion=1&manpath=FreeBSD+6.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">doscmd</span>(1)</span></a>
utility will suffice in many cases, though it still has some rough edges. The <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/emulators/doscmd/pkg-descr"><tt
class="FILENAME">emulators/doscmd</tt></a> port/package can be found in the FreeBSD Ports
Collection. If you're interested in working on this, please send mail to the <a
href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-emulation"
target="_top">FreeBSD-emulation mailing list</a> and indicate that you're interested in
joining this ongoing effort!</p>

<p>The <a href="http://www.FreeBSD.org/cgi/url.cgi?ports/emulators/pcemu/pkg-descr"><tt
class="FILENAME">emulators/pcemu</tt></a> port/package in the FreeBSD Ports Collection
which emulates an 8088 and enough BIOS services to run DOS text mode applications. It
requires the X Window System (XFree86) to operate.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q1.6.5." name="Q1.6.5."></a><b>1.6.5.</b> Can I run <span
class="TRADEMARK">Microsoft</span>&reg;&nbsp;<span class="TRADEMARK">Windows</span>&reg;
applications under FreeBSD?</p>
</div>

<div class="ANSWER">
<p><b></b>There are several ports/packages in the FreeBSD Ports Collection which can
enable the use of many <span class="TRADEMARK">Windows</span> applications. The <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/emulators/wine/pkg-descr"><tt
class="FILENAME">emulators/wine</tt></a> port/package provides a compatibility layer on
top of FreeBSD which allow many <span class="TRADEMARK">Windows</span> applications to be
run within X Windows (XFree86).</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q1.6.6." name="Q1.6.6."></a><b>1.6.6.</b> Can I run other Operating Systems
under FreeBSD?</p>
</div>

<div class="ANSWER">
<p><b></b>Again, there are several ports/packages in the FreeBSD Ports Collection which
simulate "virtual machines" and allow other operating systems to run on top of FreeBSD.
The <a href="http://www.FreeBSD.org/cgi/url.cgi?ports/emulators/bochs/pkg-descr"><tt
class="FILENAME">emulators/bochs</tt></a> port/package allows <span
class="TRADEMARK">Microsoft</span>&nbsp;<span class="TRADEMARK">Windows</span>, Linux and
even other copies of FreeBSD to be run within a window on the FreeBSD desktop. The <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/emulators/vmware2/pkg-descr"><tt
class="FILENAME">emulators/vmware2</tt></a> and <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/emulators/vmware3/pkg-descr"><tt
class="FILENAME">emulators/vmware3</tt></a> ports/packages allow the commercial VMware
virtual machine software to be run on FreeBSD.</p>
</div>
</div>
</div>
</div>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="LAYOUT" name="LAYOUT">2 Distribution Format</a></h2>

<p>A typical FreeBSD distribution directory looks something like this (exact details may
vary depending on version, architecture, and other factors):</p>

<pre class="SCREEN">
ERRATA.HTM      README.TXT      compat1x        dict            kernel
ERRATA.TXT      RELNOTES.HTM    compat20        doc             manpages
HARDWARE.HTM    RELNOTES.TXT    compat21        docbook.css     packages
HARDWARE.TXT    base            compat22        filename.txt    ports
INSTALL.HTM     boot            compat3x        floppies        proflibs
INSTALL.TXT     catpages        compat4x        games           src
README.HTM      cdrom.inf       crypto          info            tools
</pre>

<p>These same files are contained in the first CDROM of a multi-disk set, but they are
laid out slightly differently on the disk. On most architectures, the installation CDROM
also contains a &#8220;live filesystem&#8221; in addition to the distribution files. The
live filesystem is useful when repairing or troubleshooting an existing FreeBSD
installation (see <a href="#TROUBLE">Section 4</a> for how to use this).</p>

<p>The <tt class="FILENAME">floppies</tt> directory will be of particular interest to
users who are unable to boot from the CDROM media (but are able to read the CDROM by
other means). It is easy to generate a set of 1.44MB boot floppies from the <tt
class="FILENAME">floppies</tt> directory (see <a href="#FLOPPIES">Section 1.3</a> for
instructions on how to do this) and use these to start an installation from CDROM, FTP,
or NFS. The rest of the data needed during the installation will be obtained
automatically based on your selections. If you've never installed FreeBSD before, you
also want to read the entirety of this document (the installation instructions) file.</p>

<p>If you're trying to do some other type of installation or are merely curious about how
a distribution is organized, what follows is a more thorough description of some of these
items in more detail:</p>

<ol type="1">
<li>
<p>The <tt class="FILENAME">*.TXT</tt> and <tt class="FILENAME">*.HTM</tt> files contain
documentation (for example, this document is contained in both <tt
class="FILENAME">INSTALL.TXT</tt> and <tt class="FILENAME">INSTALL.HTM</tt>) and should
be read before starting an installation. The <tt class="FILENAME">*.TXT</tt> files are
plain text, while the <tt class="FILENAME">*.HTM</tt> files are HTML files that can be
read by almost any Web browser. Some distributions may contain documentation in other
formats as well, such as PDF or PostScript.</p>
</li>

<li>
<p><tt class="FILENAME">docbook.css</tt> is a Cascading Style Sheet (CSS) file used by
some Web browsers for formatting the HTML documentation.</p>
</li>

<li>
<p>The <tt class="FILENAME">base</tt>, <tt class="FILENAME">catpages</tt>, <tt
class="FILENAME">crypto</tt>, <tt class="FILENAME">dict</tt>, <tt
class="FILENAME">doc</tt>, <tt class="FILENAME">games</tt>, <tt
class="FILENAME">info</tt>, <tt class="FILENAME">manpages</tt>, <tt
class="FILENAME">proflibs</tt>, and <tt class="FILENAME">src</tt> directories contain the
primary distribution components of FreeBSD itself and are split into smaller files for
easy packing onto floppies (should that be necessary).</p>
</li>

<li>
<p>The <tt class="FILENAME">compat1x</tt>, <tt class="FILENAME">compat20</tt>, <tt
class="FILENAME">compat21</tt>, <tt class="FILENAME">compat22</tt>, <tt
class="FILENAME">compat3x</tt>, and <tt class="FILENAME">compat4x</tt> directories
contain distributions for compatibility with older releases and are distributed as single
gzip'd tar files - they can be installed during release time or later by running their
<tt class="FILENAME">install.sh</tt> scripts.</p>
</li>

<li>
<p>The <tt class="FILENAME">floppies/</tt> subdirectory contains the floppy installation
images; further information on using them can be found in <a href="#FLOPPIES">Section
1.3</a>.</p>
</li>

<li>
<p>The <tt class="FILENAME">packages</tt> and <tt class="FILENAME">ports</tt> directories
contain the FreeBSD Packages and Ports Collections. Packages may be installed from the
packages directory by running the command:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">sysinstall configPackages</kbd>
</pre>

<p>Packages can also be installed by feeding individual filenames in <tt
class="FILENAME">packages</tt>/ to the <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&sektion=1&manpath=FreeBSD+6.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pkg_add</span>(1)</span></a>
command.</p>

<p>The Ports Collection may be installed like any other distribution and requires about
190MB unpacked. More information on the ports collection may be obtained from <a
href="http://www.FreeBSD.org/ports/" target="_top">http://www.FreeBSD.org/ports/</a> or
locally from <tt class="FILENAME">/usr/share/doc/handbook</tt> if you've installed the
<tt class="FILENAME">doc</tt> distribution.</p>
</li>

<li>
<p>Last of all, the <tt class="FILENAME">tools</tt> directory contains various DOS tools
for discovering disk geometries, installing boot managers and the like. It is purely
optional and provided only for user convenience.</p>
</li>
</ol>

<p>A typical distribution directory (for example, the <tt class="FILENAME">info</tt>
distribution) looks like this internally:</p>

<pre class="SCREEN">
CHECKSUM.MD5    info.ab         info.ad         info.inf        install.sh
info.aa         info.ac         info.ae         info.mtree
</pre>

<p>The <tt class="FILENAME">CHECKSUM.MD5</tt> file contains MD5 signatures for each file,
should data corruption be suspected, and is purely for reference. It is not used by the
actual installation and does not need to be copied with the rest of the distribution
files. The <tt class="FILENAME">info.a*</tt> files are split, gzip'd tar files, the
contents of which can be viewed by doing:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cat info.a* | tar tvzf -</kbd>
</pre>

<p>During installation, they are automatically concatenated and extracted by the
installation procedure.</p>

<p>The <tt class="FILENAME">info.inf</tt> file is also necessary since it is read by the
installation program in order to figure out how many pieces to look for when fetching and
concatenating the distribution. When putting distributions onto floppies, the <tt
class="FILENAME">.inf</tt> file <span class="emphasis"><i
class="EMPHASIS">must</i></span> occupy the first floppy of each distribution set!</p>

<p>The <tt class="FILENAME">info.mtree</tt> file is another non-essential file which is
provided for user reference. It contains the MD5 signatures of the <span
class="emphasis"><i class="EMPHASIS">unpacked</i></span> distribution files and can be
later used with the <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mtree&sektion=8&manpath=FreeBSD+6.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mtree</span>(8)</span></a> program
to verify the installation permissions and checksums against any possible modifications
to the file. When used with the <tt class="FILENAME">base</tt> distribution, this can be
an excellent way of detecting trojan horse attacks on your system.</p>

<p>Finally, the <tt class="FILENAME">install.sh</tt> file is for use by those who want to
install the distribution after installation time. To install the info distribution from
CDROM after a system was installed, for example, you'd do:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /cdrom/info</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">sh install.sh</kbd>
</pre>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="UPGRADING" name="UPGRADING">3 Upgrading FreeBSD</a></h2>

<p>These instructions describe a procedure for doing a binary upgrade from an older
version of FreeBSD.</p>

<div class="WARNING">
<blockquote class="WARNING">
<p><b>Warning:</b> While the FreeBSD upgrade procedure does its best to safeguard against
accidental loss of data, it is still more than possible to <span class="emphasis"><i
class="EMPHASIS">wipe out your entire disk</i></span> with this installation! Please do
not accept the final confirmation request unless you have adequately backed up any
important data files.</p>
</blockquote>
</div>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Important:</b> These notes assume that you are using the version of <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+6.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>
supplied with the version of FreeBSD to which you intend to upgrade. Using a mismatched
version of <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+6.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a> is
almost guaranteed to cause problems and has been known to leave systems in an unusable
state. The most commonly made mistake in this regard is the use of an old copy of <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+6.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>
from an existing installation to upgrade to a newer version of FreeBSD. This is <span
class="emphasis"><i class="EMPHASIS">not</i></span> recommended.</p>
</blockquote>
</div>

<div class="WARNING">
<blockquote class="WARNING">
<p><b>Warning:</b> Binary upgrades to FreeBSD 6.3-RELEASE from FreeBSD 4-STABLE are not
supported at this time. There are some files present in a FreeBSD 4-STABLE whose presence
can be disruptive, but are not removed by a binary upgrade. One notable example is that
an old <tt class="FILENAME">/usr/include/g++</tt> directory will cause C++ programs to
compile incorrectly (or not at all).</p>

<p>These upgrade instructions are provided for the use of users upgrading from relatively
recent FreeBSD 6.3-STABLE snapshots.</p>
</blockquote>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN704" name="AEN704">3.1 Introduction</a></h3>

<p>The upgrade procedure replaces distributions selected by the user with those
corresponding to the new FreeBSD release. It preserves standard system configuration
data, as well as user data, installed packages and other software.</p>

<p>Administrators contemplating an upgrade are encouraged to study this section in its
entirety before commencing an upgrade. Failure to do so may result in a failed upgrade or
loss of data.</p>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN708" name="AEN708">3.1.1 Upgrade Overview</a></h4>

<p>Upgrading of a distribution is performed by extracting the new version of the
component over the top of the previous version. Files belonging to the old distribution
are not deleted.</p>

<p>System configuration is preserved by retaining and restoring the previous version of
the following files:</p>

<p><tt class="FILENAME">Xaccel.ini</tt>, <tt class="FILENAME">XF86Config</tt>, <tt
class="FILENAME">adduser.conf</tt>, <tt class="FILENAME">aliases</tt>, <tt
class="FILENAME">aliases.db</tt>, <tt class="FILENAME">amd.map</tt>, <tt
class="FILENAME">crontab</tt>, <tt class="FILENAME">csh.cshrc</tt>, <tt
class="FILENAME">csh.login</tt>, <tt class="FILENAME">csh.logout</tt>, <tt
class="FILENAME">cvsupfile</tt>, <tt class="FILENAME">dhclient.conf</tt>, <tt
class="FILENAME">disktab</tt>, <tt class="FILENAME">dm.conf</tt>, <tt
class="FILENAME">dumpdates</tt>, <tt class="FILENAME">exports</tt>, <tt
class="FILENAME">fbtab</tt>, <tt class="FILENAME">fstab</tt>, <tt
class="FILENAME">ftpusers</tt>, <tt class="FILENAME">gettytab</tt>, <tt
class="FILENAME">gnats</tt>, <tt class="FILENAME">group</tt>, <tt
class="FILENAME">hosts</tt>, <tt class="FILENAME">hosts.allow</tt>, <tt
class="FILENAME">hosts.equiv</tt>, <tt class="FILENAME">hosts.lpd</tt>, <tt
class="FILENAME">inetd.conf</tt>, <tt class="FILENAME">localtime</tt>, <tt
class="FILENAME">login.access</tt>, <tt class="FILENAME">login.conf</tt>, <tt
class="FILENAME">mail</tt>, <tt class="FILENAME">mail.rc</tt>, <tt
class="FILENAME">make.conf</tt>, <tt class="FILENAME">manpath.config</tt>, <tt
class="FILENAME">master.passwd</tt>, <tt class="FILENAME">motd</tt>, <tt
class="FILENAME">namedb</tt>, <tt class="FILENAME">networks</tt>, <tt
class="FILENAME">newsyslog.conf</tt>, <tt class="FILENAME">nsmb.conf</tt>, <tt
class="FILENAME">nsswitch.conf</tt>, <tt class="FILENAME">pam.conf</tt>, <tt
class="FILENAME">passwd</tt>, <tt class="FILENAME">periodic</tt>, <tt
class="FILENAME">ppp</tt>, <tt class="FILENAME">printcap</tt>, <tt
class="FILENAME">profile</tt>, <tt class="FILENAME">pwd.db</tt>, <tt
class="FILENAME">rc.conf</tt>, <tt class="FILENAME">rc.conf.local</tt>, <tt
class="FILENAME">rc.firewall</tt>, <tt class="FILENAME">rc.local</tt>, <tt
class="FILENAME">remote</tt>, <tt class="FILENAME">resolv.conf</tt>, <tt
class="FILENAME">rmt</tt>, <tt class="FILENAME">sendmail.cf</tt>, <tt
class="FILENAME">sendmail.cw</tt>, <tt class="FILENAME">services</tt>, <tt
class="FILENAME">shells</tt>, <tt class="FILENAME">skeykeys</tt>, <tt
class="FILENAME">spwd.db</tt>, <tt class="FILENAME">ssh</tt>, <tt
class="FILENAME">syslog.conf</tt>, <tt class="FILENAME">ttys</tt>, <tt
class="FILENAME">uucp</tt></p>

<p>The versions of these files which correspond to the new version are moved to <tt
class="FILENAME">/etc/upgrade/</tt>. The system administrator may peruse these new
versions and merge components as desired. Note that many of these files are
interdependent, and the best merge procedure is to copy all site-specific data from the
current files into the new.</p>

<p>During the upgrade procedure, the administrator is prompted for a location into which
all files from <tt class="FILENAME">/etc/</tt> are saved. In the event that local
modifications have been made to other files, they may be subsequently retrieved from this
location.</p>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN782" name="AEN782">3.2 Procedure</a></h3>

<p>This section details the upgrade procedure. Particular attention is given to items
which substantially differ from a normal installation.</p>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN785" name="AEN785">3.2.1 Backup</a></h4>

<p>User data and system configuration should be backed up before upgrading. While the
upgrade procedure does its best to prevent accidental mistakes, it is possible to
partially or completely destroy data and configuration information.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN788" name="AEN788">3.2.2 Mount Filesystems</a></h4>

<p>The disklabel editor is entered with the nominated disk's filesystem devices listed.
Prior to commencing the upgrade, the administrator should make a note of the device names
and corresponding mountpoints. These mountpoints should be entered here. <span
class="emphasis"><i class="EMPHASIS">Do not</i></span> set the &#8220;newfs flag&#8221;
for any filesystems, as this will cause data loss.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN793" name="AEN793">3.2.3 Select Distributions</a></h4>

<p>When selecting distributions, there are no constraints on which must be selected. As a
general rule, the <tt class="LITERAL">base</tt> distribution should be selected for an
update, and the <tt class="LITERAL">man</tt> distribution if manpages are already
installed. Other distributions may be selected beyond those originally installed if the
administrator wishes to add additional functionality.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="FSTAB" name="FSTAB">3.2.4 After Installation</a></h4>

<p>Once the installation procedure has completed, the administrator is prompted to
examine the new configuration files. At this point, checks should be made to ensure that
the system configuration is valid. In particular, the <tt
class="FILENAME">/etc/rc.conf</tt> and <tt class="FILENAME">/etc/fstab</tt> files should
be checked.</p>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN803" name="AEN803">3.3 Upgrading from Source Code</a></h3>

<p>Those interested in an upgrade method that allows more flexibility and sophistication
should take a look at <a
href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/cutting-edge.html"
target="_top">The Cutting Edge</a> in the FreeBSD Handbook. This procedure involves
rebuilding all of FreeBSD from source code. It requires reliable network connectivity,
extra disk space, and time, but has advantages for networks and other more complex
installations. This is roughly the same procedure as is used for track the -STABLE or
-CURRENT development branches.</p>

<p><tt class="FILENAME">/usr/src/UPDATING</tt> contains important information on updating
a FreeBSD system from source code. It lists various issues resulting from changes in
FreeBSD that may affect an upgrade.</p>
</div>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="TROUBLE" name="TROUBLE">4 Troubleshooting</a></h2>

<div class="SECT2">
<h3 class="SECT2"><a id="REPAIRING" name="REPAIRING">4.1 Repairing an Existing FreeBSD
Installation</a></h3>

<p>FreeBSD features a &#8220;fixit&#8221; option in the top menu of the <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+6.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>
installation program. It provides a shell with common programs from the FreeBSD base
system; this environment is useful for repairing or troubleshooting an existing FreeBSD
installation. To use fixit mode, you will also need either the <tt
class="FILENAME">fixit.flp</tt> floppy, generated in the same fashion as the boot
floppies, or the &#8220;live filesystem&#8221; CDROM. In multi-disk FreeBSD
distributions, the live filesystem image is typically located on the installation disk.
Note that some UNIX system administration experience is required to use the fixit
option.</p>

<p>Generally, there are two ways of invoking fixit mode. Users who can boot from the
FreeBSD installation CDROM, should do so and then choose the &#8220;fixit&#8221; item
from the main <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+6.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>
menu. Then select the &#8220;CDROM/DVD&#8221; option from the fixit menu.</p>

<p>Users who cannot boot from CDROM, but can boot from floppy disk, require a few more
steps. In addition to the <tt class="FILENAME">boot.flp</tt> and <tt
class="FILENAME">kern<tt class="REPLACEABLE"><i>X</i></tt>.flp</tt> disks required for
installation, create the <tt class="FILENAME">fixit.flp</tt> floppy disk, in the same way
as the other floppy disks. Follow the instructions for booting the installation program
from floppy disk until reaching the main <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+6.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>
menu. At that point, choose the &#8220;fixit&#8221; item from the main <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+6.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>
menu. Then select the &#8220;Floppy&#8221; option from the fixit menu, and insert the <tt
class="FILENAME">fixit.flp</tt> floppy disk when prompted to do so.</p>

<p>The CDROM and floppy fixit environments are similar, but not identical. Both offer a
shell with a variety of commands available for checking, repairing and examining
filesystems and their contents. The CDROM version of fixit provides all of the commands
and programs available in the FreeBSD base system, through the live filesystem. By
contrast, the floppy fixit environment can only offer a subset of commands due to space
constraints.</p>

<p>In the floppy version of fixit, some standalone utilities can be found in <tt
class="FILENAME">/stand</tt> or <tt class="FILENAME">/mnt2/stand</tt>. In the CDROM
version of fixit, these same programs can be found in <tt class="FILENAME">/stand</tt> or
<tt class="FILENAME">/mnt2/rescue</tt> (as well as the rest of the programs from the live
filesystem, which can be found under <tt class="FILENAME">/mnt</tt>).</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN847" name="AEN847">4.2 Common Installation Problems for i386
Architecture Users</a></h3>

<div class="QANDASET">
<dl>
<dt>4.2.1. <a href="#Q4.2.1.">My system hangs while probing hardware during boot, or it
behaves strangely during install, or the floppy drive isn't probed.</a></dt>

<dt>4.2.3. <a href="#Q4.2.3.">My legacy ISA device used to be recognized in previous
versions of FreeBSD, but now it's not. What happened?</a></dt>

<dt>4.2.4. <a href="#Q4.2.4.">I go to boot from the hard disk for the first time after
installing FreeBSD, the kernel loads and probes my hardware, but stops with messages
like:</a></dt>

<dt>4.2.5. <a href="#Q4.2.5.">I go to boot from the hard disk for the first time after
installing FreeBSD, but the Boot Manager prompt just prints <tt class="LITERAL">F?</tt>
at the boot menu each time but the boot won't go any further.</a></dt>

<dt>4.2.6. <a href="#Q4.2.6.">The <span class="CITEREFENTRY"><span
class="REFENTRYTITLE">mcd</span>(4)</span> driver keeps thinking that it has found a
device and this stops my Intel EtherExpress card from working.</a></dt>

<dt>4.2.7. <a href="#Q4.2.7.">The system finds my <span class="CITEREFENTRY"><span
class="REFENTRYTITLE">ed</span>(4)</span> network card, but I keep getting device timeout
errors.</a></dt>

<dt>4.2.8. <a href="#Q4.2.8.">I booted the install floppy on my IBM ThinkPad (tm) laptop,
and the keyboard is all messed up.</a></dt>

<dt>4.2.9. <a href="#Q4.2.9.">My system can not find my Intel EtherExpress 16
card.</a></dt>

<dt>4.2.10. <a href="#Q4.2.10.">When installing on an EISA HP Netserver, my on-board
AIC-7xxx SCSI controller isn't detected.</a></dt>

<dt>4.2.11. <a href="#Q4.2.11.">I have a Panasonic AL-N1 or Rios Chandler Pentium machine
and I find that the system hangs before ever getting into the installation now.</a></dt>

<dt>4.2.12. <a href="#Q4.2.12.">I have this CMD640 IDE controller that is said to be
broken.</a></dt>

<dt>4.2.13. <a href="#Q4.2.13.">On a Compaq Aero notebook, I get the message &#8220;No
floppy devices found! Please check ...&#8221; when trying to install from
floppy.</a></dt>

<dt>4.2.14. <a href="#Q4.2.14.">When installing on a Dell Poweredge XE, Dell proprietary
RAID controller DSA (Dell SCSI Array) isn't recognized.</a></dt>

<dt>4.2.15. <a href="#Q4.2.15.">I have an IBM EtherJet PCI card, it is detected by the
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fxp</span>(4)</span> driver
correctly, but the lights on the card don't come on and it doesn't connect to the
network.</a></dt>

<dt>4.2.16. <a href="#Q4.2.16.">When I configure the network during installation on an
IBM Netfinity 3500, the system freezes.</a></dt>

<dt>4.2.17. <a href="#Q4.2.17.">When I install onto a drive managed by a Mylex PCI RAID
controller, the system fails to boot (eg. with a <tt class="LITERAL">read error</tt>
message).</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q4.2.1." name="Q4.2.1."></a><b>4.2.1.</b> My system hangs while probing
hardware during boot, or it behaves strangely during install, or the floppy drive isn't
probed.</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD 5.0 and above makes extensive use of the system ACPI service on the
i386, amd64 and ia64 platforms to aid in system configuration if it's detected during
boot. Unfortunately, some bugs still exist in both the ACPI driver and within system
motherboards and BIOS. The use of ACPI can be disabled by setting the
&#8220;hint.acpi.0.disabled&#8221; hint in the third stage boot loader:</p>

<pre class="SCREEN">
set hint.acpi.0.disabled="1"
</pre>

<p>This is reset each time the system is booted, so it is necessary to add <tt
class="LITERAL">hint.acpi.0.disabled="1"</tt> to the file <tt
class="FILENAME">/boot/loader.conf</tt>. More information about the boot loader can be
found in the FreeBSD Handbook.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q4.2.3." name="Q4.2.3."></a><b>4.2.3.</b> My legacy ISA device used to be
recognized in previous versions of FreeBSD, but now it's not. What happened?</p>
</div>

<div class="ANSWER">
<p><b></b>Some device drivers, like matcd, were removed over time due to lack of
maintainership or other reasons. Others still exist but are disabled because of their
intrusive hardware probe routines. The following ISA device drivers fall into this
category and can re-enabled from the third stage boot loader: aha, ahv, aic, bt, ed, cs,
sn, ie, fe, le, and lnc. To do this, stop the loader during it's 10 second countdown and
enter the following at the prompt:</p>

<pre class="SCREEN">
unset hint.foo.0.disabled
</pre>

<p>where <tt class="REPLACEABLE"><i>foo</i></tt> is the name of the driver to re-enable.
This can be set permanently by editing the file <tt
class="FILENAME">/boot/device.hints</tt> and removing the appropriate
&#8220;disabled&#8221; entry.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q4.2.4." name="Q4.2.4."></a><b>4.2.4.</b> I go to boot from the hard disk for
the first time after installing FreeBSD, the kernel loads and probes my hardware, but
stops with messages like:</p>

<pre class="SCREEN">
changing root device to ad1s1a panic: cannot mount root
</pre>

<p>What is wrong? What can I do?</p>

<p>What is this <tt class="LITERAL">bios_drive:interface(unit,partition)kernel_name</tt>
thing that is displayed with the boot help?</p>
</div>

<div class="ANSWER">
<p><b></b>There is a longstanding problem in the case where the boot disk is not the
first disk in the system. The BIOS uses a different numbering scheme to FreeBSD, and
working out which numbers correspond to which is difficult to get right.</p>

<p>In the case where the boot disk is not the first disk in the system, FreeBSD can need
some help finding it. There are two common situations here, and in both of these cases,
you need to tell FreeBSD where the root filesystem is. You do this by specifying the BIOS
disk number, the disk type and the FreeBSD disk number for that type.</p>

<p>The first situation is where you have two IDE disks, each configured as the master on
their respective IDE busses, and wish to boot FreeBSD from the second disk. The BIOS sees
these as disk 0 and disk 1, while FreeBSD sees them as <tt class="DEVICENAME">ad0</tt>
and <tt class="DEVICENAME">ad2</tt>.</p>

<p>FreeBSD is on BIOS disk 1, of type <tt class="LITERAL">ad</tt> and the FreeBSD disk
number is 2, so you would say:</p>

<pre class="SCREEN">
<kbd class="USERINPUT">1:ad(2,a)kernel</kbd>
</pre>

<p>Note that if you have a slave on the primary bus, the above is not necessary (and is
effectively wrong).</p>

<p>The second situation involves booting from a SCSI disk when you have one or more IDE
disks in the system. In this case, the FreeBSD disk number is lower than the BIOS disk
number. If you have two IDE disks as well as the SCSI disk, the SCSI disk is BIOS disk 2,
type <tt class="LITERAL">da</tt> and FreeBSD disk number 0, so you would say:</p>

<pre class="SCREEN">
<kbd class="USERINPUT">2:da(0,a)kernel</kbd>
</pre>

<p>To tell FreeBSD that you want to boot from BIOS disk 2, which is the first SCSI disk
in the system. If you only had one IDE disk, you would use '1:' instead.</p>

<p>Once you have determined the correct values to use, you can put the command exactly as
you would have typed it in the <tt class="FILENAME">/boot.config</tt> file using a
standard text editor. Unless instructed otherwise, FreeBSD will use the contents of this
file as the default response to the <tt class="LITERAL">boot:</tt> prompt.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q4.2.5." name="Q4.2.5."></a><b>4.2.5.</b> I go to boot from the hard disk for
the first time after installing FreeBSD, but the Boot Manager prompt just prints <tt
class="LITERAL">F?</tt> at the boot menu each time but the boot won't go any further.</p>
</div>

<div class="ANSWER">
<p><b></b>The hard disk geometry was set incorrectly in the Partition editor when you
installed FreeBSD. Go back into the partition editor and specify the actual geometry of
your hard disk. You must reinstall FreeBSD again from the beginning with the correct
geometry.</p>

<p>If you are failing entirely in figuring out the correct geometry for your machine,
here's a tip: Install a small DOS partition at the beginning of the disk and install
FreeBSD after that. The install program will see the DOS partition and try to infer the
correct geometry from it, which usually works.</p>

<p>The following tip is no longer recommended, but is left here for reference:</p>

<a id="AEN910" name="AEN910"></a>
<blockquote class="BLOCKQUOTE">
<p>If you are setting up a truly dedicated FreeBSD server or workstation where you don't
care for (future) compatibility with DOS, Linux or another operating system, you've also
got the option to use the entire disk (`A' in the partition editor), selecting the
non-standard option where FreeBSD occupies the entire disk from the very first to the
very last sector. This will leave all geometry considerations aside, but is somewhat
limiting unless you're never going to run anything other than FreeBSD on a disk.</p>
</blockquote>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q4.2.6." name="Q4.2.6."></a><b>4.2.6.</b> The <span class="CITEREFENTRY"><span
class="REFENTRYTITLE">mcd</span>(4)</span> driver keeps thinking that it has found a
device and this stops my Intel EtherExpress card from working.</p>
</div>

<div class="ANSWER">
<p><b></b>Set the hints &#8220;hint.mcd.0.disabled="1"&#8221; and
&#8220;hint.mcd.1.disabled="1"&#8221; in the third stage boot loader to disable the
probing of the <tt class="DEVICENAME">mcd0</tt> and <tt class="DEVICENAME">mcd1</tt>
devices. Generally speaking, you should only leave the devices that you will be using
enabled in your kernel.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q4.2.7." name="Q4.2.7."></a><b>4.2.7.</b> The system finds my <span
class="CITEREFENTRY"><span class="REFENTRYTITLE">ed</span>(4)</span> network card, but I
keep getting device timeout errors.</p>
</div>

<div class="ANSWER">
<p><b></b>Your card is probably on a different IRQ from what is specified in the <tt
class="FILENAME">/boot/device.hints</tt> file. The ed driver does not use the `soft'
configuration by default (values entered using EZSETUP in DOS), but it will use the
software configuration if you specify <tt class="LITERAL">-1</tt> in the hints for the
interface.</p>

<p>Either move the jumper on the card to a hard configuration setting (altering the
kernel settings if necessary), or specify the IRQ as <tt class="LITERAL">-1</tt> by
setting the hint &#8220;hint.ed.0.irq="-1"&#8221; This will tell the kernel to use the
soft configuration.</p>

<p>Another possibility is that your card is at IRQ 9, which is shared by IRQ 2 and
frequently a cause of problems (especially when you have a VGA card using IRQ 2!). You
should not use IRQ 2 or 9 if at all possible.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q4.2.8." name="Q4.2.8."></a><b>4.2.8.</b> I booted the install floppy on my IBM
ThinkPad (tm) laptop, and the keyboard is all messed up.</p>
</div>

<div class="ANSWER">
<p><b></b>Older IBM laptops use a non-standard keyboard controller, so you must tell the
keyboard driver (atkbd0) to go into a special mode which works on the ThinkPads. Set the
hint &#8220;hint.atkbd.0.flags="4"&#8221; and it should work fine.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q4.2.9." name="Q4.2.9."></a><b>4.2.9.</b> My system can not find my Intel
EtherExpress 16 card.</p>
</div>

<div class="ANSWER">
<p><b></b>You must set your Intel EtherExpress 16 card to be memory mapped at address
0xD0000, and set the amount of mapped memory to 32K using the Intel supplied <tt
class="FILENAME">softset.exe</tt> program.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q4.2.10." name="Q4.2.10."></a><b>4.2.10.</b> When installing on an EISA HP
Netserver, my on-board AIC-7xxx SCSI controller isn't detected.</p>
</div>

<div class="ANSWER">
<p><b></b>This is a known problem, and will hopefully be fixed in the future. In order to
get your system installed at all, set the hint &#8220;hw.eisa_slots="12"&#8221; in the
third stage loader.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q4.2.11." name="Q4.2.11."></a><b>4.2.11.</b> I have a Panasonic AL-N1 or Rios
Chandler Pentium machine and I find that the system hangs before ever getting into the
installation now.</p>
</div>

<div class="ANSWER">
<p><b></b>Your machine doesn't like the new <tt class="LITERAL">i586_copyout</tt> and <tt
class="LITERAL">i586_copyin</tt> code for some reason. To disable this, set the hint
&#8220;hint.npx.0.flags="1"&#8221;</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q4.2.12." name="Q4.2.12."></a><b>4.2.12.</b> I have this CMD640 IDE controller
that is said to be broken.</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD does not support this controller.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q4.2.13." name="Q4.2.13."></a><b>4.2.13.</b> On a Compaq Aero notebook, I get
the message &#8220;No floppy devices found! Please check ...&#8221; when trying to
install from floppy.</p>
</div>

<div class="ANSWER">
<p><b></b>With Compaq being always a little different from other systems, they do not
announce their floppy drive in the CMOS RAM of an Aero notebook. Therefore, the floppy
disk driver assumes there is no drive configured. Set the hint
&#8220;hint.fdc.0.flags="1"&#8221; This pretends the existence of the first floppy drive
(as a 1.44 MB drive) to the driver without asking the CMOS at all.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q4.2.14." name="Q4.2.14."></a><b>4.2.14.</b> When installing on a Dell
Poweredge XE, Dell proprietary RAID controller DSA (Dell SCSI Array) isn't
recognized.</p>
</div>

<div class="ANSWER">
<p><b></b>Configure the DSA to use AHA-1540 emulation using EISA configuration utility.
After that FreeBSD detects the DSA as an Adaptec AHA-1540 SCSI controller, with irq 11
and port 340. Under emulation mode system will use DSA RAID disks, but you cannot use
DSA-specific features such as watching RAID health.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q4.2.15." name="Q4.2.15."></a><b>4.2.15.</b> I have an IBM EtherJet PCI card,
it is detected by the <span class="CITEREFENTRY"><span
class="REFENTRYTITLE">fxp</span>(4)</span> driver correctly, but the lights on the card
don't come on and it doesn't connect to the network.</p>
</div>

<div class="ANSWER">
<p><b></b>We don't understand why this happens. Neither do IBM (we asked them). The card
is a standard Intel EtherExpress Pro/100 with an IBM label on it, and these cards
normally work just fine. You may see these symptoms only in some IBM Netfinity servers.
The only solution is to install a different Ethernet adapter.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q4.2.16." name="Q4.2.16."></a><b>4.2.16.</b> When I configure the network
during installation on an IBM Netfinity 3500, the system freezes.</p>
</div>

<div class="ANSWER">
<p><b></b>There is a problem with the onboard Ethernet in the Netfinity 3500 which we
have not been able to identify at this time. It may be related to the SMP features of the
system being misconfigured. You will have to install another Ethernet adapter and avoid
attempting to configure the onboard adapter at any time.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q4.2.17." name="Q4.2.17."></a><b>4.2.17.</b> When I install onto a drive
managed by a Mylex PCI RAID controller, the system fails to boot (eg. with a <tt
class="LITERAL">read error</tt> message).</p>
</div>

<div class="ANSWER">
<p><b></b>There is a bug in the Mylex driver which results in it ignoring the
&#8220;8GB&#8221; geometry mode setting in the BIOS. Use the 2GB mode instead.</p>
</div>
</div>
</div>
</div>
</div>
</div>

<hr />
<p align="center"><small>This file, and other release-related documents, can be
downloaded from <a href="ftp://ftp.FreeBSD.org/">ftp://ftp.FreeBSD.org/</a>.</small></p>

<p align="center"><small>For questions about FreeBSD, read the <a
href="http://www.FreeBSD.org/docs.html">documentation</a> before contacting &#60;<a
href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&#62;.</small></p>

<p align="center"><small>For questions about this documentation, e-mail &#60;<a
href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&#62;.</small></p>
</body>
</html>

