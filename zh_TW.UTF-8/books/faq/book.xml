<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE book PUBLIC "-//FreeBSD//DTD DocBook XML V5.0-Based Extension//EN" "http://www.FreeBSD.org/XML/share/xml/freebsd50.dtd" [
<!ENTITY bibliography SYSTEM "../../../share/xml/bibliography.xml">
<!ENTITY rel.numbranch "2">
<!-- number of branches that follow in this list --><!ENTITY rel.head "<emphasis xmlns='http://docbook.org/ns/docbook'>12-CURRENT</emphasis>">
<!ENTITY rel.head.relx "13.<replaceable xmlns='http://docbook.org/ns/docbook'>X</replaceable>">
<!ENTITY rel.head.releng "<symbol xmlns='http://docbook.org/ns/docbook'>head/</symbol>">
<!ENTITY rel.relx "12.<replaceable xmlns='http://docbook.org/ns/docbook'>X</replaceable>">
<!ENTITY rel.stable "<emphasis xmlns='http://docbook.org/ns/docbook'>12-STABLE</emphasis>">
<!ENTITY rel.releng "<symbol xmlns='http://docbook.org/ns/docbook'>stable/12/</symbol>">
<!ENTITY rel.relengdate "December 2018">
<!ENTITY rel2.relx "11.<replaceable xmlns='http://docbook.org/ns/docbook'>X</replaceable>">
<!ENTITY rel2.stable "<emphasis xmlns='http://docbook.org/ns/docbook'>11-STABLE</emphasis>">
<!ENTITY rel2.releng "<symbol xmlns='http://docbook.org/ns/docbook'>stable/11/</symbol>">
<!ENTITY rel2.relengdate "October 2016">
]>
<book xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:its="http://www.w3.org/2005/11/its" version="5.0" xml:lang="zh_TW">
  <info>
    <title>FreeBSD 11.<replaceable>X</replaceable> and 12.<replaceable>X</replaceable> 常見問答集</title>

    <author><orgname>FreeBSD 文件計畫</orgname></author>

    <copyright xml:lang="en">
      <year>1995</year>
      <year>1996</year>
      <year>1997</year>
      <year>1998</year>
      <year>1999</year>
      <year>2000</year>
      <year>2001</year>
      <year>2002</year>
      <year>2003</year>
      <year>2004</year>
      <year>2005</year>
      <year>2006</year>
      <year>2007</year>
      <year>2008</year>
      <year>2009</year>
      <year>2010</year>
      <year>2011</year>
      <year>2012</year>
      <year>2013</year>
      <year>2014</year>
      <year>2015</year>
      <year>2016</year>
      <year>2017</year>
      <year>2018</year>

      <holder>The FreeBSD Documentation Project</holder>
    </copyright>

    
<legalnotice xml:id="legalnotice">
  <title>版權所有</title>

  <para xml:lang="en">Redistribution and use in source (XML DocBook) and 'compiled'
    forms (XML, HTML, PDF, PostScript, RTF and so forth) with or without
    modification, are permitted provided that the following conditions are
    met:</para>

  <orderedlist>
    <listitem>
      <para xml:lang="en">Redistributions of source code (XML DocBook) must retain the
        above copyright notice, this list of conditions and the following
        disclaimer as the first lines of this file unmodified.</para>
    </listitem>

    <listitem>
      <para xml:lang="en">Redistributions in compiled form (transformed to other DTDs,
        converted to PDF, PostScript, RTF and other formats) must
        reproduce the above copyright notice, this list of conditions and
        the following disclaimer in the documentation and/or other
        materials provided with the distribution.</para>
    </listitem>
  </orderedlist>

  <important>
    <para xml:lang="en">THIS DOCUMENTATION IS PROVIDED BY THE FREEBSD DOCUMENTATION
      PROJECT "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING,
      BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
      FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL
      THE FREEBSD DOCUMENTATION PROJECT BE LIABLE FOR ANY DIRECT, INDIRECT,
      INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
      BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS
      OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
      ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR
      TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE
      USE OF THIS DOCUMENTATION, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
      DAMAGE.</para>
  </important>
</legalnotice>


    <legalnotice xml:id="trademarks" role="trademarks">
      <para>FreeBSD 是 FreeBSD基金會的註冊商標。</para>
      <para>Adobe, Acrobat, Acrobat Reader, 以及 PostScript 是 Adobe Systems Incorporated 在美國和/或其他國家的商標或註冊商標。</para>
      <para>IBM, AIX, OS/2, PowerPC, PS/2, S/390, 和 ThinkPad 是 國際商用機器公司在美國和其他國家的註冊商標或商標。</para>
      <para>IEEE, POSIX, 和 802 是 Institute of Electrical and Electronics Engineers, Inc. 在美國的註冊商標。</para>
      <para>Intel, Celeron, Centrino, Core, EtherExpress, i386, i486, Itanium, Pentium, 和 Xeon 是 Intel Corporation 及其分支機構在美國和其他國家的商標或註冊商標。</para>
      <para>Linux 是 Linus Torvalds 的註冊商標。</para>
      <para>Microsoft, IntelliMouse, MS-DOS, Outlook, Windows, Windows Media, 和 Windows NT 是 Microsoft Corporation 在美國和/或其他國家的商標或註冊商標。</para>
      <para>NetBSD 是 NetBSD基金會的註冊商標。</para>
      <para>Motif, OSF/1, and UNIX are registered trademarks and IT DialTone and The Open Group 是 The Open Group  在美國和其他國家的商標。</para>
      <para>Silicon Graphics, SGI, 和 OpenGL 是 Silicon Graphics, Inc. 在美國和/或其他國家的註冊商標。</para>
      <para>Sun, Sun Microsystems, Java, Java Virtual Machine, JDK, JRE, JSP, JVM, Netra, OpenJDK, Solaris, StarOffice, SunOS and VirtualBox 是 Sun Microsystems, Inc. 在美國和其他國家的註冊商標。</para>
      <para>許多製造商和經銷商使用一些稱為商標的圖案或文字設計來彰顯自己的產品。 本文中出現的眾多商標，以及 FreeBSD Project 本身廣所人知的商標，後面將以<quote>™</quote> 或 <quote>®</quote> 符號來標註。</para>
    </legalnotice>

    <releaseinfo xml:lang="en">$FreeBSD$</releaseinfo>

    <abstract>
      <para>這份文件是 FreeBSD 12.<replaceable>X</replaceable> 和 11.<replaceable>X</replaceable> 常見問答集 ( <acronym>(FAQ)</acronym> )。我們盡可能地讓這份  <acronym>FAQ</acronym> 提供有用的資訊 ; 如果您有任何改善建議，請寄到 <link xlink:href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-doc">FreeBSD 文件計畫郵件論壇</link>。</para>

      <para>本文件的最新版本可由 <link xlink:href="https://www.FreeBSD.org/doc/zh_TW.UTF-8/books/faq/index.html">FreeBSD 網站</link>取得。 也可以由 <link xlink:href="https://download.freebsd.org/ftp/doc/">FreeBSD FTP 伺服器</link>  以 HTTP 下載單一大型   <link xlink:href="book.html">HTML</link> 檔或是其他格式的檔案。</para>
    </abstract>
  </info>

  <chapter xml:id="introduction">
    <title>前言</title>

    <qandaset>
      <qandaentry>
	<question xml:id="what-is-FreeBSD">
	  <para>什麼是 FreeBSD？</para>
	</question>

	<answer>
	  <para>FreeBSD 是一個使用於桌機、筆電、伺服器與嵌入式系統平台的現代作業系統，支援多種<link xlink:href="https://www.FreeBSD.org/platforms/">平台</link>。</para>

	  <para>它是根據 U.C. Berkeley 所開發出來的 <quote>4.4BSD-Lite</quote> ，並加上了許多 <quote>4.4BSD-Lite2</quote> 的增強功能。它同時也間接使用了 U.C. Berkeley 所開發出來並由 William Jolitz 移植到 <trademark>i386</trademark> 的 <quote>Net/2</quote>，也就是 <quote>386BSD</quote>，不過現在 386BSD 的程式碼只剩下極少數還留 存在 FreeBSD 中。</para>

	  <para>FreeBSD 已被廣泛地被世界各地的公司行號、ISP、研究人員、電腦 專家、學生，以及家庭用戶所使用，用在工作、教育以及娛樂上。</para>

	  <para>如果想看關於 FreeBSD 更深入的資料，請看 <link xlink:href="@@URL_RELPREFIX@@/doc/zh_TW.UTF-8/books/handbook/index.html">FreeBSD 使用手冊</link>。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="FreeBSD-goals">
	  <para>發展 FreeBSD 計畫的目的是什麼？</para>
	</question>

	<answer>
	  <para>FreeBSD 計畫的目的是提供可以任意使用且沒有限制的穩定快速與一般用途的作業系統。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="bsd-license-restrictions">
	  <para>FreeBSD 版權有任何限制嗎？</para>
	</question>

	<answer>
	  <para>有的。但是這並不是限制你怎麼去使用這些程式碼，而是你怎麼看待 FreeBSD 這個計畫。可以在此閱讀 <link xlink:href="https://www.FreeBSD.org/copyright/freebsd-license.html"> 版權本文</link>，簡單來說總結如下:</para>

	  <itemizedlist>
	    <listitem>
	      <para>請勿宣稱是您寫了這個程式。</para>
	    </listitem>

	    <listitem>
	      <para>如果它出問題了，不要控告我們。</para>
	    </listitem>

	    <listitem>
	      <para>不要移除和修改版權</para>
	    </listitem>
	  </itemizedlist>

	  <para>我們許多人在這個計畫投入很多心血，並不會介意獲得一些財務上的報酬，但是我們並沒有堅持一定要有。我們相信我們首要的<quote>任務</quote>是將程式碼提供給所有使用者，無論他們有任何的目的，這麼一來，這些程式碼才能被用在最多地方，也才能發揮它們最大的利益。我們相信這就是自由軟體最基本的目標之一，而且我們會盡全力去支持它。</para>

	  <para>在我們 source tree 中有部份的程式碼是採用所謂的<link xlink:href="https://www.FreeBSD.org/copyright/COPYING">GNU General Public License (GPL)</link> 或 <link xlink:href="https://www.FreeBSD.org/copyright/COPYING.LIB">GNU Library General Public License (LGPL)</link>版權宣告，雖然這些版權宣告是用來保障而非限制使用者的權 利，畢竟是不那麼自由了些。由於這些 GPL 的軟體在商業使用上會引起 非常複雜的版權問題，因此只要有機會，我們會盡量以採用比較鬆的 <link xlink:href="https://www.FreeBSD.org/copyright/freebsd-license.html">FreeBSD 版權</link> 的軟體來取代這些 GPL 版權宣告的軟體。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="replace-current-OS">
	  <para>FreeBSD 可以取代我現在在用的作業系統嗎？</para>
	</question>

	<answer>
	  <para>對大部份的人來說是這樣沒錯，但事實上這問題並沒有這麼好回答。</para>

	  <para>大部份的人並不是真正在使用一個作業系統。他們使用的是應用程式 ；而那些應用程式才是真正用到作業系統的東西。FreeBSD 是設計用來提供一個強韌且功能完整的作業環境給應用程式來執行。它支援了多種瀏覽器，辦公室套件軟體，電子郵件閱讀軟體，繪圖程式，程式設計環境，網路伺服器軟體，以及幾乎所有你想要的東西。大部份的程式都可以靠 <link xlink:href="https://www.FreeBSD.org/ports/">Ports Collection</link> 來管理。</para>

	  <para>但是如果你想要使用的應用程式只能在某個特定的作業系統上面執行 的話，你就不能輕易地把它換掉，或者指望在 FreeBSD 上有很相似的應用程式才有機會。如果你想要的是一個強健的辦公室或是網路伺服器，或是一部穩定的工作站，FreeBSD 無疑是您的最佳選擇。世界各地有很多使用者，包括初學或資深的 <trademark class="registered">UNIX</trademark> 管理人員都選用 FreeBSD 當他們唯一的桌上作業系統。</para>

	  <para>如果你是從其他的 <trademark class="registered">UNIX</trademark>-like 環境轉換到 FreeBSD 的話會很熟悉。 <trademark class="registered">Windows</trademark> 或是 <trademark class="registered">Mac OS</trademark> 的使用者可能會對 <link xlink:href="https://www.trueos.org">TrueOS</link> 有興趣，他是基於 FreeBSD 的一個桌面環境發行版，非<trademark class="registered">UNIX</trademark> 使用者可能就要多花一點時間來學習怎麼用 <trademark class="registered">UNIX</trademark> 的 方法來做事。你可以從這份 <acronym>FAQ</acronym> 和 <link xlink:href="@@URL_RELPREFIX@@/doc/zh_TW.UTF-8/books/handbook/index.html">FreeBSD 使用手冊</link> 來入門。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="why-called-FreeBSD">
	  <para>為什麼要叫做 FreeBSD？</para>
	</question>

	<answer>
	  <itemizedlist>
	    <listitem>
	      <para>您可以免費使用它，即使是用於商業用途。</para>
	    </listitem>

	    <listitem>
	      <para>整個 FreeBSD 作業系統完整的原始程式都可以免費取得，而且不管是在使用，散佈或是整合進其他程式等各方面也只受到最小的限制 (不論是否用於商業用途)。</para>
	    </listitem>

	    <listitem>
	      <para>任何人都可以自由地把他對系統的改良或錯誤修正的程式碼加入 source tree 之中 (當然要符合幾個先決條件)。</para>
	    </listitem>
	  </itemizedlist>

	  <para>特別值得注意的是這裡的 “free” 出現了兩次，而且它們 的意思是不一樣的：一種代表 “免費”，另一種代表 “自由”。您可以拿 FreeBSD 去做任何您想要做的事，除了一些例外，例如您宣稱 FreeBSD 是您寫的。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="differences-to-other-bsds">
	  <para>FreeBSD 及 NetBSD, OpenBSD 以及其他 open source BSD 作業系統之間有何不同之處呢？</para>
	</question>

	<answer>
	  <para>James Howard 寫了一篇關於不同計畫的差異和歷史淵源的好文章叫 <link xlink:href="https://jameshoward.us/archive/the-bsd-family-tree/">The BSD Family Tree</link> 可以回答這個問題。雖然有些資訊有點過時，但是關於歷史淵源的部份仍是相當正確的。</para>

	  <para>時至今日，大部分的 BSD 家族仍是共用修補和程式碼的。這些 BSD 家族有著共同的祖先。</para>

	  <para> FreeBSD 的設計目的如 <xref linkend="FreeBSD-goals"/> 所述。其他 BSD 家族的設計目的如下所述：</para>

	  <itemizedlist>
	    <listitem>
	      <para>OpenBSD 目標在作業系統的安全性。OpenBSD團隊寫的 <citerefentry><refentrytitle>ssh</refentrytitle><manvolnum>1</manvolnum></citerefentry> 和 <citerefentry><refentrytitle>pf</refentrytitle><manvolnum>4</manvolnum></citerefentry> 都移植到了 FreeBSD。</para>
	    </listitem>

	    <listitem>
	      <para>NetBSD 目標在易於移植到其他的硬體平台。</para>
	    </listitem>

	    <listitem>
	      <para>DragonFly BSD 是 FreeBSD 4.8 的一個分支，發展出許多有趣的特色，包括 HAMMER 檔案系統和支援 <quote>vkernels</quote> 使用者模式。</para>
	    </listitem>
	  </itemizedlist>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="latest-version">
	  <para>最新版的 FreeBSD 是那一版？</para>
	</question>

	<answer>
	  <para>在 FreeBSD 開發的任何時間點，都有多個平行的分支。12.<replaceable>X</replaceable> releases 是從 <emphasis>12-STABLE</emphasis> 分支而來，而 11.<replaceable>X</replaceable> releases 是從 <emphasis>11-STABLE</emphasis> 分支而來。</para>

	  <para>在 9.0 之前，11.<replaceable>X</replaceable> 系列仍屬 <emphasis>-STABLE</emphasis>分支。 然而從13.<replaceable>X</replaceable> 發行開始，11.<replaceable>X</replaceable> 將只著重在重大問題上(比如：漏洞修補、安全維護)以及所謂的  <quote>extended support</quote> 。</para>

	  <para xml:lang="en">Version <link xlink:href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/i386/12.0-RELEASE/">12.0</link>
	    is the latest release from the <emphasis>12-STABLE</emphasis> branch; it was
	    released in December 2018.  Version <link xlink:href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/10.4-RELEASE/">10.4</link>
	    is the latest release from the <emphasis>11-STABLE</emphasis> branch; it
	    was released in October 2017.</para>

	  <para>Releases 版 <link linkend="release-freq">每幾個月</link> 才會發行一次。 雖然如此，有很多人和 FreeBSD 原始碼同步更新 (詳見 <link linkend="current">FreeBSD-CURRENT</link> 和 <link linkend="stable">FreeBSD-STABLE</link>的相關問題) ，但因為原始碼是一直不斷地在變動的，所以如果要這麼做的話得要花上更多的精力。</para>

	  <para>其他更多相關 FreeBSD 發行情報，可由 FreeBSD 網站上的  <link xlink:href="https://www.FreeBSD.org/releng/index.html#release-build">Release Engineering 頁面</link> 和 <citerefentry><refentrytitle>release</refentrytitle><manvolnum>7</manvolnum></citerefentry>得知。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="current">
	  <para>什麼是 <emphasis>FreeBSD-CURRENT</emphasis>?</para>
	</question>

	<answer>
	  <para><link xlink:href="@@URL_RELPREFIX@@/doc/zh_TW.UTF-8/books/handbook/current-stable.html#current">FreeBSD-CURRENT</link> 指的是正在發展中的作業系統版本，它終將在適當的時機成為 FreeBSD-STABLE 分支。它實在是只適合給系統發展者以及有毅力的業餘愛好者使用 。如果想要得到有關如何使用<emphasis>-CURRENT</emphasis>的深入資訊，請參考<link xlink:href="@@URL_RELPREFIX@@/doc/zh_TW.UTF-8/books/handbook/index.html">使用手冊</link>的<link xlink:href="@@URL_RELPREFIX@@/doc/zh_TW.UTF-8/books/handbook/current-stable.html#current">相關部份</link>。</para>

	  <para>如果您對 FreeBSD 本身並不是很熟悉那麼您就不應該使用FreeBSD-CURRENT。 這個分支的程式碼有時候變動得很快，而且可能會因此 而使您有好幾天的時間無法更新您的系統。我們假設使用 FreeBSD-CURRENT 的使用者都有能力去分析他們所遇到的問題，除錯，並且回報問題。</para>

	  <para>我們每天都會根據目前 <emphasis>-CURRENT</emphasis> 和 <emphasis>-STABLE</emphasis>  的狀況對這兩個分支各發行一個 <link xlink:href="@@URL_RELPREFIX@@/snapshots/">snapshot</link> 版。發表這些 snapshot 的目的在於：</para>

	  <itemizedlist>
	    <listitem>
	      <para>測試最新版的安裝程式。</para>
	    </listitem>

	    <listitem>
	      <para>提供一個簡單的方法給那些喜歡使用 <emphasis>-CURRENT</emphasis> 或是 <emphasis>-STABLE</emphasis> 但是沒有時間和頻寬去每天昇級的使用者。</para>
	    </listitem>

	    <listitem>
	      <para>為了替我們發展中的程式保留一個固定的參考點，以防止我們未來不幸搞砸了。(雖然一般而言 Subversion 可以防止類似這種的可怕事件)</para>
	    </listitem>

	    <listitem>
	      <para>為了確保所有需要測試的新功能或修正都可以得到最多的測試。</para>
	    </listitem>
	  </itemizedlist>

	  <para>我們不對 <emphasis>-CURRENT</emphasis> snapshot 做任何目的的 <quote>品質保證</quote> 。如果你想要的是一個穩定且經過充分測試過的系統的話， 最好選擇使用完整 releases.</para>

	  <para>您可以直接從 <link xlink:href="@@URL_RELPREFIX@@/snapshots/">snapshot</link> 取得 -CURRENT 的 snapshot release。</para>

	  <para>對每個有在活動的分支而言，都會定期產生一次 snapshots。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="stable">
	  <para>什麼是 <emphasis>FreeBSD-STABLE</emphasis> ?</para>
	</question>

	<answer>
	  <para>回溯到 FreeBSD 2.0.5 剛發表的時候，我們決定把 FreeBSD 的發展 分成兩支。一支叫做 <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/current-stable.html#stable">-STABLE</link>，另一支叫 <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/current-stable.html#current">-CURRENT</link>。主要發行版是由<emphasis>FreeBSD-STABLE</emphasis> 這個開發分支而來。他的變動較慢，而且一般來說假設他們都已經先在FreeBSD-CURRENT測試過了。然而在任何時候，FreeBSD-STABLE的原始碼仍有可能不一定適合一般用途，因為他可能包含在 FreeBSD-CURRENT 沒有發現到的錯誤。沒有能力和資源的使用者應該改使用 FreeBSD 正式發行版。<emphasis>FreeBSD-CURRENT</emphasis> 從2.0開始就是另一個分支，一直到12.0-RELEASE和之後的版本都還是。更多關於開發分支的資訊請見 <quote><link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/articles/releng/release-proc.html#rel-branch">FreeBSD Release Engineering: Creating the Release Branch</link></quote> ，分支的開發狀態和接下來的發行計畫時間表可以在 <link xlink:href="https://www.FreeBSD.org/releng">Release Engineering 資訊</link>  找到。</para>

	  <para>12.0-STABLE 是目前正在發展中的 <emphasis>-STABLE</emphasis> 分支。最新的 12.0-STABLE 是在 2018年12月發行的 12.0-RELEASE。</para>

	  <para><emphasis>12-CURRENT</emphasis> 這個分支是 FreeBSD 的 <emphasis>-CURRENT</emphasis> 分支，仍然不斷地在發展當中。 如果想要知道更多關於這個分支的資訊的話，請參考 <link linkend="current">什麼是 FreeBSD-CURRENT?</link> 。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="release-freq">
	  <para>每次新的 FreeBSD 將於什麼時候推出？</para>
	</question>

	<answer>
	  <para>一般而言，Release Engineering Team <email>re@FreeBSD.org</email> 約每18個月發行一次主要發行版本，約平均每8個月發行一次次要發行版本。每次新版本的發表時程都會事先公告， 相關的開發人員就會知道，什麼時候該先把手邊的計劃完成並且測試過， 此外，這些更動都已經完整地測試過，確保新功能不會影響系統的穩定度。 雖然，等這些好東西進入<emphasis>-STABLE</emphasis> 的時間令人等得有些不耐煩， 但是大多數的使用者都認為這種謹慎的態度是 FreeBSD 最好的優點之一。</para>

	  <para>有關發行情報的更多細節部分(包括 release 的行程表、進度)，都可在 FreeBSD 網站上的 <link xlink:href="https://www.FreeBSD.org/releng/index.html">發行情報</link> 上面獲得。</para>

	  <para>為了滿足那些需要 (或想要) 新鮮刺激感的使用者， 上面已經提到我們每周都會發行 snapshots 版可供使用。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="responsible">
	  <para>誰負責 FreeBSD 的發展？</para>
	</question>

	<answer>
	  <para>如果是一些有關 FreeBSD 計畫的關鍵性決定，像是整個計畫的走向 或是決定誰可以改 source tree 裡的程式碼這類的事，是由一個由 9 個 人所組成的 <link xlink:href="@@URL_RELPREFIX@@/administration.html#t-core">core team</link> 來決定。而有另一群超過 350 個人的 <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/articles/contributors/article.html#staff-committers">committers</link> 有權利可以直接修改 FreeBSD 的 source tree。</para>

	  <para>無論如何，大多數的改變都會事前在 <link linkend="mailing">郵件論壇</link>先討論過，而且不分角色，每個人都可以參與討論。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="where-get">
	  <para>我要如何取得 FreeBSD？</para>
	</question>

	<answer>
	  <para xml:lang="en">Every significant release of FreeBSD is available via
	    anonymous FTP from the <link xlink:href="ftp://ftp.FreeBSD.org/pub/FreeBSD/">FreeBSD
	      FTP site</link>:</para>

	  <itemizedlist>
	    <listitem>
	      <para xml:lang="en">The latest <emphasis>12-STABLE</emphasis> release,
		12.0-RELEASE can be found in the <link xlink:href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/i386/12.0-RELEASE/">12.0-RELEASE
		  directory</link>.</para>
	    </listitem>

	    <listitem>
	      <para><link linkend="current">-CURRENT</link> 和 <link linkend="stable">-STABLE</link> 分支的<link xlink:href="@@URL_RELPREFIX@@/snapshots/">Snapshot</link>版本通常每個月會做一次， 主要是為了提供給那些熱心的測試者和開發人員。</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en">The latest <emphasis>11-STABLE</emphasis> release,
		10.4-RELEASE can be found in the <link xlink:href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/10.4-RELEASE/">10.4-RELEASE
		  directory</link>.</para>
	    </listitem>
	  </itemizedlist>

	  <para>FreeBSD 的 CD、DVD，還有其他取得方式可以在 <link xlink:href="@@URL_RELPREFIX@@/doc/zh_TW.UTF-8/books/handbook/mirrors.html">the Handbook</link> 中找到解答。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="access-pr">
	  <para>我要如何去查詢、提交問題回報(Problem Report，簡稱PR)資料庫呢？</para>
	</question>

	<answer>
	  <para>所有使用者的變更要求都可以經由網頁版的 PR <link xlink:href="https://bugs.FreeBSD.org/search/">查詢</link> 界面來察看。</para>

	  <para>可以使用瀏覽器經由<link xlink:href="@@URL_RELPREFIX@@/support/bugreports.html">網頁版的 PR 界面</link> 來傳送問題回報</para>

	  <para>然而，在您回報問題之前，請先閱讀 <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/articles/problem-reports/article.html">如何撰寫 FreeBSD 的問題回報單</link>，這是一篇告訴你怎樣才能寫出一篇真正有用的問題回報單。</para>
	</answer>
      </qandaentry>
    </qandaset>
  </chapter>

  <chapter xml:id="support">
    <title>文件與技術支援</title>

    <qandaset>
      <qandaentry>
	<question xml:id="books">
	  <para>有哪些 FreeBSD 相關的好書呢？</para>
	</question>

	<answer>
	  <para>FreeBSD 文件計畫已陸續發表了相當廣泛範圍的文件，可在 <uri xlink:href="https://www.FreeBSD.org/docs.html">https://www.FreeBSD.org/docs.html</uri> 取得。除此之外，也可以參閱使用手冊的 <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/bibliography.html">參考書目</link>建議的其他書籍。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="doc-formats">
	  <para>這些文件有其他格式的嗎？像是：純文字(ASCII)或 <trademark class="registered">PostScript</trademark> 之類的格式？</para>
	</question>

	<answer>
	  <para>有的。這些文件都分別以不同格式儲存以及壓縮處理並放在 FTP 上面，可以從各個 FreeBSD FTP 站的 <link xlink:href="https://download.freebsd.org/ftp/doc/">/pub/FreeBSD/doc/</link> 目錄內找到你要的。</para>

	  <para>文件以幾種不同的方式分類。包括：</para>

	  <itemizedlist>
	    <listitem>
	      <para>文件名稱，例如：<literal>faq</literal> (常見問答集)或是 <literal>handbook</literal> (FreeBSD 使用手冊)等等。</para>
	    </listitem>

	    <listitem>
	      <para>文件的語言與編碼。他們是基於 FreeBSD 系統中 <filename>/usr/share/locale</filename> 裡所見到的語系名稱。目前包含的語言與編碼如下：</para>

	      <informaltable frame="none" pgwide="1">
		<tgroup cols="2">
		  <thead>
		    <row>
		      <entry>語系名稱</entry>

		      <entry>說明</entry>
		    </row>
		  </thead>

		  <tbody>
		    <row>
		      <entry><literal>en_US.ISO8859-1</literal></entry>

		      <entry>英文 (美國)</entry>
		    </row>

		    <row>
		      <entry><literal>bn_BD.ISO10646-1</literal></entry>

		      <entry>孟加拉文 (孟加拉)</entry>
		    </row>

		    <row>
		      <entry><literal>da_DK.ISO8859-1</literal></entry>

		      <entry>丹麥文 (丹麥)</entry>
		    </row>

		    <row>
		      <entry><literal>de_DE.ISO8859-1</literal></entry>

		      <entry>德文 (德國)</entry>
		    </row>

		    <row>
		      <entry><literal>el_GR.ISO8859-7</literal></entry>

		      <entry>希臘文 (希臘)</entry>
		    </row>

		    <row>
		      <entry><literal>es_ES.ISO8859-1</literal></entry>

		      <entry>西班牙文 (西班牙)</entry>
		    </row>

		    <row>
		      <entry><literal>fr_FR.ISO8859-1</literal></entry>

		      <entry>法文 (法國)</entry>
		    </row>

		    <row>
		      <entry><literal>hu_HU.ISO8859-2</literal></entry>

		      <entry>匈牙利文 (匈牙利)</entry>
		    </row>

		    <row>
		      <entry><literal>it_IT.ISO8859-15</literal></entry>

		      <entry>義大利文 (義大利)</entry>
		    </row>

		    <row>
		      <entry><literal>ja_JP.eucJP</literal></entry>

		      <entry>日文 (日本, EUC 編碼)</entry>
		    </row>

		    <row>
		      <entry><literal>ko_KR.UTF-8</literal></entry>

		      <entry>韓文 (韓國, UTF-8 編碼)</entry>
		    </row>

		    <row>
		      <entry><literal>mn_MN.UTF-8</literal></entry>

		      <entry>蒙古文 (蒙古, UTF-8 編碼)</entry>
		    </row>

		    <row>
		      <entry><literal>nl_NL.ISO8859-1</literal></entry>

		      <entry>荷蘭文 (荷蘭)</entry>
		    </row>

		    <row>
		      <entry><literal>pl_PL.ISO8859-2</literal></entry>

		      <entry>波蘭文 (波蘭)</entry>
		    </row>

		    <row>
		      <entry><literal>pt_BR.ISO8859-1</literal></entry>

		      <entry>葡萄牙文 (巴西)</entry>
		    </row>

		    <row>
		      <entry><literal>ru_RU.KOI8-R</literal></entry>

		      <entry>俄文 (俄羅斯, KOI8-R 編碼)</entry>
		    </row>

		    <row>
		      <entry><literal>tr_TR.ISO8859-9</literal></entry>

		      <entry>土耳其文 (土耳其)</entry>
		    </row>

		    <row>
		      <entry><literal>zh_CN.UTF-8</literal></entry>

		      <entry>簡體中文 (中國, UTF-8 編碼)</entry>
		    </row>

		    <row>
		      <entry><literal>zh_TW.UTF-8</literal></entry>

		      <entry>正體中文 (台灣, UTF-8 編碼)</entry>
		    </row>
		  </tbody>
		</tgroup>
	      </informaltable>

	      <note>
		<para>上列的各國翻譯語系文件中，並非所有文件都有翻譯。</para>
	      </note>
	    </listitem>

	    <listitem>
	      <para>文件的格式。我們的每份文件都提供許多不同的格式，每種格式各有利弊， 有些格式適合線上閱讀，有些則適合列印出美觀的文件。 這些不同格式的文件能夠確保我們的讀者們，無論是在螢幕上閱讀或是列印成紙本，都能夠閱讀他們感興趣的內容，目前有提供的格式如下：</para>

	      <informaltable frame="none" pgwide="1">
		<tgroup cols="2">
		  <thead>
		    <row>
		      <entry>格式</entry>

		      <entry>說明</entry>
		    </row>
		  </thead>

		  <tbody>
		    <row>
		      <entry><literal>html-split</literal></entry>

		      <entry>依章節區分成多個小的、互相連結的 HTML 檔案</entry>
		    </row>

		    <row>
		      <entry><literal>html</literal></entry>

		      <entry>所有內容包含在單一個 HTML 檔案</entry>
		    </row>

		    <row>
		      <entry><literal>pdf</literal></entry>

		      <entry> 	Adobe's PDF 格式</entry>
		    </row>

		    <row>
		      <entry><literal>ps</literal></entry>

		      <entry><trademark class="registered">PostScript</trademark></entry>
		    </row>

		    <row>
		      <entry><literal>rtf</literal></entry>

		      <entry><trademark class="registered">Microsoft</trademark> 的 RTF 格式</entry>
		    </row>

		    <row>
		      <entry><literal>txt</literal></entry>

		      <entry>純文字</entry>
		    </row>
		  </tbody>
		</tgroup>
	      </informaltable>

	      <note>
		<para>當用 Word 讀取 RTF 格式時，頁碼並不會被自動更新。在開啟檔案後按下<keycombo action="simul"><keycap>Ctrl</keycap><keycap>A</keycap></keycombo>, <keycombo action="simul"><keycap>Ctrl</keycap><keycap>End</keycap></keycombo>, <keycap>F9</keycap> 來更新頁碼。</para>
	      </note>
	    </listitem>

	    <listitem>
	      <para>壓縮和打包方式</para>

	      <orderedlist>
		<listitem>
		  <para>當採用 <literal>html-split</literal> 格式時，檔案先透過 <citerefentry><refentrytitle>tar</refentrytitle><manvolnum>1</manvolnum></citerefentry> 工具來進行打包。接著再將產生出來的 <filename>.tar</filename> 檔接透過第二點所述的壓縮方式壓縮。</para>
		</listitem>

		<listitem>
		  <para>其他的格式都是單一個檔案。例如 <filename>article.pdf</filename>、<filename>book.html</filename> ，以此類推。</para>

		  <para>這些檔案接著透過  <literal>zip</literal> 或  <literal>bz2</literal>  來壓縮。 <citerefentry><refentrytitle>tar</refentrytitle><manvolnum>1</manvolnum></citerefentry>  工具可用來解壓縮這些檔案。</para>

		  <para>因此 <trademark class="registered">PostScript</trademark> 版本的手冊經過 <literal>bzip2</literal> 壓縮後會存成一個叫做 <filename>book.ps.bz2</filename> 的檔案，並位於 <filename>handbook/</filename> 資料夾。</para>
		</listitem>
	      </orderedlist>
	    </listitem>
	  </itemizedlist>

	  <para>在選取格式與壓縮方式後，下載壓縮後的檔案並解壓縮，再把文件複製到想要的地方。</para>

	  <para>舉例來說，透過 <citerefentry><refentrytitle>bzip2</refentrytitle><manvolnum>1</manvolnum></citerefentry> 壓縮的英文問與答的章節分割 HTML 版本，可以在 <filename>doc/en_US.ISO8859-1/books/faq/book.html-split.tar.bz2</filename> 中找到。若要下載並解壓縮這個檔案，請輸入</para>

	  <screen><prompt>#</prompt> <userinput>fetch https://download.freebsd.org/ftp/doc/en_US.ISO8859-1/books/faq/book.html-split.tar.bz2</userinput>
<prompt>#</prompt> <userinput>tar xvf book.html-split.tar.bz2</userinput></screen>

	  <para>如果檔案被壓縮過的話，<application>tar</application> 會自動偵測正確的格式並解壓縮出一堆  <filename>.html</filename> 檔案。主要的檔案是 <filename>index.html</filename>，包含了主目錄跟介紹以及連接到文件其他部份的連結。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="mailing">
	  <para>哪裡有關於 FreeBSD 的郵遞論壇(mailing lists)呢？ 有哪些可以使用的 FreeBSD 新聞群組(news groups)呢?</para>
	</question>

	<answer>
	  <para>請參考FreeBSD 使用手冊上的 <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/eresources.html#eresources-mail"> 郵件論壇 (mailing-lists)</link> 。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="irc">
	  <para>有 FreeBSD IRC (Internet Relay Chat)頻道嗎？</para>
	</question>

	<answer>
	  <para>有的，大部分的 IRC 主機都有 FreeBSD 聊天頻道：</para>

	  <itemizedlist>
	    <listitem>
	      <para><link xlink:href="http://www.efnet.org/index.php">EFNet</link> 上的 <literal>#FreeBSDhelp</literal> 頻道專門用來幫助 FreeBSD 使用著</para>
	    </listitem>

	    <listitem>
	      <para><link xlink:href="http://freenode.net/">Freenode</link> 上的 <literal>#FreeBSD</literal> 頻道是一個有許多使用者的一般求助頻道。這個頻道時常聊一些題外話，但主要還是讓使用者問 FreeBSD 相關問題的地方。其他使用者可以協助解答一些基本的問題，並請盡量提供使用手冊的參考或是提供連結來提供更深入的資訊。雖然這個頻道有來自世界各地的使用者，但這是一個英文為主的頻道。非母語人士應該以英文提問，並在必要的時候移駕到 <literal>##freebsd-lang</literal> 頻道。</para>
	    </listitem>

	    <listitem>
	      <para><link xlink:href="http://www.dal.net/">DALNET</link> 的<literal>#FreeBSD</literal> 頻道，可由 <systemitem>irc.dal.net</systemitem> （位於美國）及<systemitem>irc.eu.dal.net</systemitem> （位於歐洲）進入。</para>
	    </listitem>

	    <listitem>
	      <para><link xlink:href="http://www.undernet.org/">UNDERNET</link> 上的 <literal>#FreeBSD</literal> 頻道可由 <systemitem>us.undernet.org</systemitem>（位於美國）及  <systemitem>eu.undernet.org</systemitem> （位於歐洲）進入。由於這是個輔助新手用的頻道， 請記得閱讀別人向你提及的連結或檔案。</para>
	    </listitem>

	    <listitem>
	      <para><link xlink:href="http://www.rusnet.org.ru/">RUSNET</link> 上的 <literal>#FreeBSD</literal> 頻道是俄語國家的 FreeBSD 使用者頻道。 這裡同時也是一般交流的討論好去處。</para>
	    </listitem>

	    <listitem>
	      <para><link xlink:href="http://freenode.net/">Freenode</link> 上的 <literal>#bsdchat</literal> 頻道是一個正體中文（UTF-8 編碼）頻道專門用來幫助 FreeBSD 使用著。這裡也歡迎一般非技術的交流討論。</para>
	    </listitem>
	  </itemizedlist>

	  <para xml:lang="en">The FreeBSD wiki has a <link xlink:href="https://wiki.freebsd.org/IRC/Channels">good
	      list</link> of IRC channels.</para>

	  <para>每個頻道都是不同且互相獨立的。因為他們的聊天風格不同，您可以每個都試試看來找到適合您的頻道。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="forums">
	  <para>有沒有任何網頁形式的 FreeBSD 論壇呢？</para>
	</question>
	<answer>
	  <para>官方的 FreeBSD 論壇位於  <link xlink:href="https://forums.FreeBSD.org/">https://forums.FreeBSD.org/</link>。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="training">
	  <para>可以從哪邊獲得商業化的 FreeBSD 的教育課程及技術支援呢？</para>
	</question>

	<answer>
	  <para><link xlink:href="http://www.ixsystems.com">iXsystems, Inc.</link>， <link xlink:href="http://www.freebsdmall.com/">FreeBSD 商城</link>的母公司，提供 FreeBSD 開發與調校解決方案與 FreeBSD 與 TrueOS 的軟體 <link xlink:href="http://www.ixsystems.com/support">支援</link>。</para>

	  <para>BSD Certification Group, Inc. 提供 DragonFly BSD、FreeBSD、NetBSD 與 OpenBSD 的系統管理認證。請參閱 <link xlink:href="http://www.BSDCertification.org">他們的網站</link> 來獲得更多資訊。</para>

	  <para>如果有其他組織提供技術訓練或技術支援，請聯絡 FreeBSD 計畫來加入以上清單。</para>
	</answer>
      </qandaentry>
    </qandaset>
  </chapter>

  <chapter xml:id="install">
    <info>
      <title>安裝</title>

      <author xml:lang="en">
	<personname>
	  <firstname>Nik</firstname>
	  <surname>Clayton</surname>
	</personname>
	<affiliation>
	  <address xml:lang="en">
	    <email>nik@FreeBSD.org</email>
	  </address>
	</affiliation>
      </author>
    </info>

    <qandaset>

      <qandaentry>
	<question xml:id="which-architecture">
	  <para xml:lang="en">Which platform should I download? I have a 64
	    bit capable <trademark class="registered">Intel</trademark> CPU,
	    but I only see <literal>amd64</literal>.</para>
	</question>

	<answer>
	  <para xml:lang="en">amd64 is the term FreeBSD uses for 64-bit
	    compatible x86 architectures (also known as "x86-64" or
	    "x64").  Most modern computers should use amd64.
	    Older hardware should use i386.  When installing
	    on a non-x86-compatible architecture, select the
	    platform which best matches the hardware.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="floppy-download">
	  <para xml:lang="en">Which file do I download to get FreeBSD?</para>
	</question>

	<answer>
	  <para xml:lang="en">On the <link xlink:href="https://www.freebsd.org/where.html">Getting
	      FreeBSD</link> page, select <literal>[iso]</literal> next
	    to the architecture that matches the hardware.</para>

	  <para xml:lang="en">Any of the following can be used:</para>

	  <informaltable frame="none" pgwide="1">
	    <tgroup cols="2">
	      <thead>
		<row>
		  <entry>檔案</entry>
		  <entry>描述</entry>
		</row>
	      </thead>

	      <tbody>
		<row>
		  <entry><filename>disc1.iso</filename></entry>
		  <entry xml:lang="en">Contains enough to install FreeBSD and
		    a minimal set of packages.</entry>
		</row>

		<row>
		  <entry><filename>dvd1.iso</filename></entry>
		  <entry xml:lang="en">Similar to <filename>disc1.iso</filename>
		    but with additional packages.</entry>
		</row>

		<row>
		  <entry><filename>memstick.img</filename></entry>
		  <entry xml:lang="en">A bootable image sufficient for writing to a
		    USB stick.</entry>
		</row>

		<row>
		  <entry><filename>bootonly.iso</filename></entry>
		  <entry xml:lang="en">A minimal image that requires network access
		    during installation to completely install
		    FreeBSD.</entry>
		</row>
	      </tbody>
	    </tgroup>
	  </informaltable>

	  <para xml:lang="en">Full instructions on this procedure and a little bit
	    more about installation issues in general can be found in
	    the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/bsdinstall.html">Handbook
	      entry on installing FreeBSD</link>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="floppy-image-too-large">
	  <para xml:lang="en">What do I do if the install image does not
	    boot?</para>
	</question>

	<answer>
	  <para xml:lang="en">This can be caused by not downloading the image in
	    <emphasis>binary</emphasis> mode when using
	    <acronym>FTP</acronym>.</para>

	  <para xml:lang="en">Some FTP clients default their transfer mode to
	    <emphasis>ascii</emphasis> and attempt to change any
	    end-of-line characters received to match the
	    conventions used by the client's system.  This will
	    almost invariably corrupt the boot image.  Check the
	    SHA-256 checksum of the downloaded boot image: if it
	    is not <emphasis>exactly</emphasis> that on the
	    server, then the download process is suspect.</para>

	  <para xml:lang="en">When using a command line FTP client, type
	    <emphasis>binary</emphasis> at the FTP command prompt
	    after getting connected to the server and before
	    starting the download of the image.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="install-instructions-location">
	  <para>可以在哪邊找到安裝 FreeBSD 的解說步驟呢？</para>
	</question>

	<answer>
	  <para>安裝說明可以在 <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/bsdinstall.html">使用手冊的安裝 FreeBSD</link> 找到。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="need-to-run">
	  <para>要跑 FreeBSD 至少需要什麼樣的配備呢？</para>
	</question>

	<answer>
	  <para>FreeBSD 需要 486 以上的 PC，64 MB 以上的 RAM，和至少 1.1 GB 的硬碟空間。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="custom-boot-floppy">
	  <para>要怎樣才能自行打造專用的安裝磁片呢？</para>
	</question>

	<answer>
	  <para>可以透過編譯客製化發行版本來建立客製化的 FreeBSD 安裝媒體。請參閱  <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/articles/releng/article.html">Release Engineering</link> 文章的說明。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="windows-coexist">
	  <para><trademark class="registered">Windows</trademark> 可以與 FreeBSD 共存嗎？</para>
	</question>

	<answer>
	  <para>如果 <trademark class="registered">Windows</trademark> 先安裝，那就可以。 FreeBSD 的開機管理程式將會管理 <trademark class="registered">Windows</trademark> 和 FreeBSD 的開機啟動。 如果 <trademark class="registered">Windows</trademark> 後安裝，它將覆蓋開機管理程式。如果發生這種情況，請見下一小節。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="bootmanager-restore">
	  <para xml:lang="en">Another operating system destroyed my Boot Manager.
	    How do I get it back?</para>
	</question>

	<answer>
	  <para xml:lang="en">This depends upon the boot manager.
	    The FreeBSD boot selection menu can be reinstalled using
	    <citerefentry><refentrytitle>boot0cfg</refentrytitle><manvolnum>8</manvolnum></citerefentry>.  For example, to restore the boot menu
	    onto the disk <replaceable>ada0</replaceable>:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>boot0cfg -B ada0</userinput></screen>

	  <para xml:lang="en">The non-interactive MBR bootloader can be installed
	    using <citerefentry><refentrytitle>gpart</refentrytitle><manvolnum>8</manvolnum></citerefentry>:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>gpart bootcode -b /boot/mbr ada0</userinput></screen>

	  <para xml:lang="en">For more complex situations, including GPT disks, see
	    <citerefentry><refentrytitle>gpart</refentrytitle><manvolnum>8</manvolnum></citerefentry>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="need-complete-sources">
	  <para>我需要安裝完整的原始碼嗎？</para>
	</question>

	<answer>
	  <para xml:lang="en">In general, no.  There is nothing in the base system
	    which requires the presence of the source to operate.
	    Some ports, like <package>sysutils/lsof</package>, will
	    not build unless the source is installed.  In particular,
	    if the port builds a kernel module or directly operates on
	    kernel structures, the source must be installed.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="need-kernel">
	  <para>需要重新 build kernel 嗎？</para>
	</question>

	<answer>
	  <para xml:lang="en">Usually not.  The supplied <literal>GENERIC</literal>
	    kernel contains the drivers an ordinary computer will
	    need.  <citerefentry><refentrytitle>freebsd-update</refentrytitle><manvolnum>8</manvolnum></citerefentry>, the FreeBSD binary upgrade
	    tool, cannot upgrade custom kernels, another reason to
	    stick with the <literal>GENERIC</literal> kernel when
	    possible.  For computers with very limited RAM, such as
	    embedded systems, it may be worthwhile to build a smaller
	    custom kernel containing just the required drivers.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="password-encryption">
	  <para xml:lang="en">Should I use DES, Blowfish, or MD5 passwords and how
	    do I specify which form my users receive?</para>
	</question>

	<answer>
	  <para xml:lang="en">FreeBSD uses
	    <emphasis>SHA512</emphasis> by
	    default.  DES
	    passwords are still available for backwards compatibility
	    with operating systems that still
	    use the less secure password format.  FreeBSD also supports
	    the Blowfish and MD5 password formats.  Which
	    password format to use for new passwords is controlled by
	    the <literal>passwd_format</literal> login capability in
	    <filename>/etc/login.conf</filename>, which takes values
	    of <literal>des</literal>, <literal>blf</literal> (if
	    these are available) or <literal>md5</literal>.  See the
	    <citerefentry><refentrytitle>login.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry> manual page for more information about
	    login capabilities.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ffs-limits">
	  <para xml:lang="en">What are the limits for FFS file systems?</para>
	</question>

	<answer>
	  <para xml:lang="en">For FFS file systems, the largest file system is
	    practically limited by the amount of memory required to
	    <citerefentry><refentrytitle>fsck</refentrytitle><manvolnum>8</manvolnum></citerefentry> the file system.  <citerefentry><refentrytitle>fsck</refentrytitle><manvolnum>8</manvolnum></citerefentry> requires one
	    bit per fragment, which with the default fragment size of
	    4 KB equates to 32 MB of memory per TB of disk.
	    This does mean that on architectures which limit userland
	    processes to 2 GB (e.g., <trademark>i386</trademark>), the maximum
	    <citerefentry><refentrytitle>fsck</refentrytitle><manvolnum>8</manvolnum></citerefentry>'able filesystem is ~60 TB.</para>

	  <para xml:lang="en">If there was not a <citerefentry><refentrytitle>fsck</refentrytitle><manvolnum>8</manvolnum></citerefentry> memory limit the
	    maximum filesystem size would be 2 ^ 64 (blocks)
	    * 32 KB =&gt; 16 Exa * 32 KB =&gt; 512
	    ZettaBytes.</para>

	  <para xml:lang="en">The maximum size of a single FFS file is approximately
	    2 PB with the default block size of 32 KB.  Each
	    32 KB block can point to 4096 blocks.  With triple
	    indirect blocks, the calculation is 32 KB * 12 +
	    32 KB * 4096 + 32 KB * 4096^2 + 32 KB *
	    4096^3.  Increasing the block size to 64 KB will
	    increase the max file size by a factor of 16.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="archsw-readin-failed-error">
	  <para xml:lang="en">Why do I get an error message, <errorname>readin
	      failed</errorname> after compiling and booting a new
	    kernel?</para>
	</question>

	<answer>
	  <para xml:lang="en">The world and kernel are out of sync.  This
	    is not supported.  Be sure to use <command>make
	      buildworld</command> and <command>make
	      buildkernel</command> to update the kernel.</para>

	  <para xml:lang="en">Boot the system by specifying the kernel directly at
	    the second stage, pressing any key when the
	    <literal>|</literal> shows up before loader is
	    started.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="general-configuration-tool">
	  <para>是否有工具可以執行安裝後的設定工作嗎？</para>
	</question>

	<answer>
	  <para>是的。<application>bsdconfig</application> 提供很棒的介面來進行 FreeBSD 安裝後設定。</para>
	</answer>
      </qandaentry>
    </qandaset>
  </chapter>

  <chapter xml:id="hardware">
    <title>硬體相容性</title>

    <sect1 xml:id="compatibility-general">
      <title>一般問題</title>

      <qandaset>
	<qandaentry>
	  <question xml:id="which-hardware-to-get">
	    <para xml:lang="en">I want to get a piece of hardware for my FreeBSD
	      system.  Which model/brand/type is best?</para>
	  </question>

	  <answer>
	    <para xml:lang="en">This is discussed continually on the FreeBSD mailing
	      lists but is to be expected since hardware changes so
	      quickly.  Read through the Hardware Notes
	      for FreeBSD <link xlink:href="https://www.FreeBSD.org/releases/12.0R/hardware.html">12.0</link>
	      or <link xlink:href="https://www.FreeBSD.org/releases/10.4R/hardware.html">10.4</link>
	      and search the mailing list <link xlink:href="https://www.FreeBSD.org/search/#mailinglists">archives</link>
	      before asking about the latest and greatest hardware.
	      Chances are a discussion about that type of hardware
	      took place just last week.</para>

	    <para xml:lang="en">Before purchasing a laptop, check the archives for
	      <link xlink:href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-mobile">FreeBSD laptop computer mailing list</link> and <link xlink:href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions">FreeBSD general questions mailing list</link>, or possibly a specific
	      mailing list for a particular hardware type.</para>
	  </answer>
	</qandaentry>

	<qandaentry>
	  <question xml:id="memory-upper-limitation">
	    <para xml:lang="en">What are the limits for memory? Does FreeBSD support
	      more than 4 GB of memory
	      (RAM)?  More than 16 GB?  More than
	      48 GB?</para>
	  </question>

	  <answer>
	    <para xml:lang="en">FreeBSD as an operating system generally supports
	      as much physical memory (RAM) as the platform it is
	      running on does.  Keep in mind that different platforms
	      have different limits for memory; for example <trademark>i386</trademark>
	      without <acronym>PAE</acronym> supports at most
	      4 GB of memory (and usually less than that because
	      of PCI address space) and <trademark>i386</trademark> with PAE supports at
	      most 64 GB memory.  As of FreeBSD 10, AMD64
	      platforms support up to 4 TB of physical
	      memory.</para>
	  </answer>
	</qandaentry>

	<qandaentry>
	  <question xml:id="memory-i386-over-4gb">
	    <para xml:lang="en">Why does FreeBSD report less than 4 GB memory when
	      installed on an <trademark>i386</trademark> machine?</para>
	  </question>

	  <answer>
	    <para xml:lang="en">The total address space on <trademark>i386</trademark> machines is
	      32-bit, meaning that at most 4 GB of memory is
	      addressable (can be accessed).  Furthermore, some
	      addresses in this range are reserved by hardware for
	      different purposes, for example for using and
	      controlling PCI devices, for accessing video memory, and
	      so on.  Therefore, the total amount of memory usable by
	      the operating system for its kernel and applications is
	      limited to significantly less than 4 GB.  Usually,
	      3.2 GB to 3.7 GB is the maximum usable
	      physical memory in this configuration.</para>

	    <para xml:lang="en">To access more than 3.2 GB to 3.7 GB of
	      installed memory (meaning up to 4 GB but also more
	      than 4 GB), a special tweak called
	      <acronym>PAE</acronym> must be used.  PAE stands for
	      Physical Address Extension and is a way for 32-bit x86
	      CPUs to address more than 4 GB of memory.  It
	      remaps the memory that would otherwise be overlaid by
	      address reservations for hardware devices above the
	      4 GB range and uses it as additional physical
	      memory (see <citerefentry><refentrytitle>pae</refentrytitle><manvolnum>4</manvolnum></citerefentry>).  Using PAE has some drawbacks;
	      this mode of memory access is a little bit slower than
	      the normal (without PAE) mode and loadable modules (see
	      <citerefentry><refentrytitle>kld</refentrytitle><manvolnum>4</manvolnum></citerefentry>) are not supported.  This means all drivers
	      must be compiled into the kernel.</para>

	    <para xml:lang="en">The most common way to enable PAE is to build a new
	      kernel with the special ready-provided kernel
	      configuration file called <filename>PAE</filename>,
	      which is already configured to build a safe kernel.
	      Note that some entries in this kernel configuration file
	      are too conservative and some drivers marked as unready
	      to be used with PAE are actually usable.  A rule of
	      thumb is that if the driver is usable on 64-bit
	      architectures (like AMD64), it is also usable with PAE.
	      When creating a custom kernel configuration
	      file, PAE can be enabled by adding the following
	      line:</para>

	    <programlisting xml:lang="en">options       PAE</programlisting>

	    <para xml:lang="en">PAE is not much used nowadays because most new x86
	      hardware also supports running in 64-bit mode, known as
	      AMD64 or <trademark class="registered">Intel</trademark> 64.  It has a much larger address
	      space and does not need such tweaks.  FreeBSD supports
	      AMD64 and it is recommended that this version of FreeBSD be
	      used instead of the <trademark>i386</trademark> version if 4 GB or more
	      memory is required.</para>
	  </answer>
	</qandaentry>
      </qandaset>
    </sect1>

    <sect1 xml:id="compatibility-processors">
      <title xml:lang="en">Architectures and Processors</title>

      <qandaset>
	<qandaentry>
	  <question xml:id="architectures">
	    <para xml:lang="en">Does FreeBSD support architectures other than the
	      x86?</para>
	  </question>

	  <answer>
	    <para xml:lang="en">Yes.  FreeBSD divides support into multiple tiers.
	      Tier 1 architectures, such as i386 or amd64; are fully
	      supported.  Tiers 2 and 3 are supported on a
	      best-effort basis.  A full explanation of the tier
	      system is available in the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/articles/committers-guide/archs.html">Committer's
		Guide.</link></para>

	    <para xml:lang="en">A complete  list of supported architectures can be
	      found on the <link xlink:href="https://www.FreeBSD.org/platforms/">platforms
		page.</link></para>
	  </answer>
	</qandaentry>

	<qandaentry>
	  <question xml:id="smp-support">
	    <para xml:lang="en">Does FreeBSD support Symmetric Multiprocessing
	      (SMP)?</para>
	  </question>

	  <answer>
	    <para xml:lang="en">FreeBSD supports symmetric multi-processor (SMP) on all
	      non-embedded platforms (e.g, i386, amd64,
	      etc.).  SMP is also supported in arm and MIPS kernels,
	      although some CPUs may not support this.  FreeBSD's SMP
	      implementation uses fine-grained locking, and
	      performance scales nearly linearly with number of
	      CPUs.</para>

	    <para xml:lang="en"><citerefentry><refentrytitle>smp</refentrytitle><manvolnum>4</manvolnum></citerefentry> has more details.</para>
	  </answer>
	</qandaentry>

	<qandaentry>
	  <question xml:id="microcode">
	    <para xml:lang="en">What is microcode?
	      How do I install <trademark class="registered">Intel</trademark> CPU microcode updates?</para>
	  </question>

	  <answer>
	    <para xml:lang="en">Microcode is a method of programmatically
	      implementing hardware level instructions.  This allows
	      for CPU bugs to be fixed without replacing the on board
	      chip.</para>

	    <para xml:lang="en">Install <package>sysutils/devcpu-data</package>,
	      then add:</para>

	    <programlisting xml:lang="en">microcode_update_enable="YES"</programlisting>

	    <para xml:lang="en">to <filename>/etc/rc.conf</filename></para>
	  </answer>
	</qandaentry>
      </qandaset>
    </sect1>

    <sect1 xml:id="compatibility-drives">
      <title xml:lang="en">Hard Drives, Tape Drives, and CD and DVD Drives</title>

      <qandaset>
	<qandaentry>
	  <question xml:id="supported-hard-drives">
	    <para xml:lang="en">What kind of hard drives does FreeBSD support?</para>
	  </question>

	  <answer>
	    <para xml:lang="en">FreeBSD supports EIDE, SATA, SCSI, and SAS drives (with
	      a compatible controller; see the next section), and all
	      drives using the original <quote>Western Digital</quote>
	      interface (MFM, RLL, ESDI, and of course IDE).  A few
	      ESDI controllers that use proprietary interfaces may not
	      work: stick to WD1002/3/6/7 interfaces and
	      clones.</para>
	  </answer>
	</qandaentry>

	<qandaentry>
	  <question xml:id="supported-scsi-controllers">
	    <para xml:lang="en">Which SCSI or SAS controllers are supported?</para>
	  </question>

	  <answer>
	    <para xml:lang="en">See the complete list in the Hardware Notes for FreeBSD
	      <link xlink:href="https://www.FreeBSD.org/releases/12.0R/hardware.html">12.0</link>
	      or <link xlink:href="https://www.FreeBSD.org/releases/10.4R/hardware.html">10.4</link>.</para>
	  </answer>
	</qandaentry>

	<qandaentry>
	  <question xml:id="tape-support">
	    <para xml:lang="en">What types of tape drives are supported?</para>
	  </question>

	  <answer>
	    <para xml:lang="en">FreeBSD supports all standard SCSI tape
	      interfaces.</para>
	  </answer>
	</qandaentry>

	<qandaentry>
	  <question xml:id="tape-changer-support">
	    <para xml:lang="en">Does FreeBSD support tape changers?</para>
	  </question>

	  <answer>
	    <para xml:lang="en">FreeBSD supports SCSI changers using the <citerefentry><refentrytitle>ch</refentrytitle><manvolnum>4</manvolnum></citerefentry>
	      device and the <citerefentry><refentrytitle>chio</refentrytitle><manvolnum>1</manvolnum></citerefentry> command.  The details of how
	      to control the changer can be found in
	      <citerefentry><refentrytitle>chio</refentrytitle><manvolnum>1</manvolnum></citerefentry>.</para>

	    <para xml:lang="en">While
	      <application>AMANDA</application> and some other
	      products already understands changers, other
	      applications only know how to move a tape from one point
	      to another.  In this case, keep track of which slot a
	      tape is in and which slot the tape currently in the
	      drive needs to go back to.</para>
	  </answer>
	</qandaentry>

	<qandaentry>
	  <question xml:id="supported-cdrom-drives">
	    <para xml:lang="en">Which CD-ROM and CD-RW drives are supported by
	      FreeBSD?</para>
	  </question>

	  <answer>
	    <para xml:lang="en">Any SCSI drive connected to a supported controller
	      is supported.  Most ATAPI compatible IDE CD-ROMs are
	      supported.</para>

	    <para xml:lang="en">FreeBSD supports any ATAPI-compatible IDE CD-R or CD-RW
	      drive.</para>

	    <para xml:lang="en">FreeBSD also supports any SCSI CD-R or CD-RW drives.
	      Install the <package>sysutils/cdrtools</package> port or
	      package, then use <command>cdrecord</command>.</para>
	  </answer>
	</qandaentry>
      </qandaset>
    </sect1>

    <sect1 xml:id="compatibility-kbd-mice">
      <title xml:lang="en">Keyboards and Mice</title>

      <qandaset>
	<qandaentry>
	  <question xml:id="moused">
	    <para xml:lang="en">Is it possible to use a mouse outside the
	      X Window system?</para>
	  </question>

	  <answer>
	    <para xml:lang="en">The default console driver,
	      <citerefentry><refentrytitle>syscons</refentrytitle><manvolnum>4</manvolnum></citerefentry>, provides the ability to use a mouse
	      pointer in text consoles to cut &amp; paste text.  Run
	      the mouse daemon, <citerefentry><refentrytitle>moused</refentrytitle><manvolnum>8</manvolnum></citerefentry>, and turn on the mouse
	      pointer in the virtual console:</para>

	    <screen xml:lang="en"><prompt>#</prompt> <userinput>moused -p /dev/xxxx -t yyyy</userinput>
<prompt>#</prompt> <userinput>vidcontrol -m on</userinput></screen>

	    <para xml:lang="en">Where <replaceable>xxxx</replaceable> is the mouse
	      device name and <replaceable>yyyy</replaceable> is a
	      protocol type for the mouse.  The mouse daemon can
	      automatically determine the protocol type of most mice,
	      except old serial mice.  Specify the
	      <literal>auto</literal> protocol to invoke automatic
	      detection.  If automatic detection does not work, see
	      the <citerefentry><refentrytitle>moused</refentrytitle><manvolnum>8</manvolnum></citerefentry> manual page for a list of supported
	      protocol types.</para>

	    <para xml:lang="en">For a PS/2 mouse, add
	      <literal>moused_enable="YES"</literal> to
	      <filename>/etc/rc.conf</filename> to start the mouse
	      daemon at boot time.  Additionally, to
	      use the mouse daemon on all virtual terminals instead of
	      just the console, add <literal>allscreens_flags="-m
		on"</literal> to
	      <filename>/etc/rc.conf</filename>.</para>

	    <para xml:lang="en">When the mouse daemon is running, access to the
	      mouse must be coordinated between the mouse daemon and
	      other programs such as X Windows.  Refer to the
	      <acronym>FAQ</acronym>
	      <link linkend="x-and-moused">Why does my mouse not work
		with X?</link> for more details on this issue.</para>
	  </answer>
	</qandaentry>

	<qandaentry>
	  <question xml:id="text-mode-cut-paste">
	    <para xml:lang="en">How do I cut and paste text with a mouse in the text
	      console?</para>
	  </question>

	  <answer>
	    <para xml:lang="en">It is not possible to remove data using the mouse.
	      However, it is possible to copy and paste.  Once the
	      mouse daemon is running as described in the <link linkend="moused">previous question</link>, hold down
	      button 1 (left button) and move the mouse to select a
	      region of text.  Then, press button 2 (middle button) to
	      paste it at the text cursor.  Pressing button 3 (right
	      button) will <quote>extend</quote> the selected region
	      of text.</para>

	    <para xml:lang="en">If the mouse does not have a middle button, it is
	      possible to emulate one or remap buttons using mouse
	      daemon options.  See the <citerefentry><refentrytitle>moused</refentrytitle><manvolnum>8</manvolnum></citerefentry> manual page for
	      details.</para>
	  </answer>
	</qandaentry>

	<qandaentry>
	  <question xml:id="mouse-wheel-buttons">
	    <para xml:lang="en">My mouse has a fancy wheel and buttons.  Can I use
	      them in FreeBSD?</para>
	  </question>

	  <answer>
	    <para xml:lang="en">The answer is, unfortunately, <quote>It
		depends</quote>.  These mice with additional features
	      require specialized driver in most cases.  Unless the
	      mouse device driver or the user program has specific
	      support for the mouse, it will act just like a standard
	      two, or three button mouse.</para>

	    <para xml:lang="en">For the possible usage of wheels in the X Window
	      environment, refer to <link linkend="x-and-wheel">that section</link>.</para>
	  </answer>
	</qandaentry>

	<qandaentry>
	  <question xml:id="keyboard-delete-key">
	    <para xml:lang="en">How do I use my delete key in <command>sh</command>
	      and <command>csh</command>?</para>
	  </question>

	  <answer>
	    <para xml:lang="en">For the <application>Bourne Shell</application>, add
	      the following lines to <filename>~/.shrc</filename>.
	      See <citerefentry><refentrytitle>sh</refentrytitle><manvolnum>1</manvolnum></citerefentry> and <citerefentry><refentrytitle>editrc</refentrytitle><manvolnum>5</manvolnum></citerefentry>.</para>

	    <programlisting xml:lang="en">bind ^? ed-delete-next-char # for console
bind ^[[3~ ed-delete-next-char # for xterm</programlisting>

	    <para xml:lang="en">For the <application>C Shell</application>, add the
	      following lines to <filename>~/.cshrc</filename>.
	      See <citerefentry><refentrytitle>csh</refentrytitle><manvolnum>1</manvolnum></citerefentry>.</para>

	    <programlisting xml:lang="en">bindkey ^? delete-char # for console
bindkey ^[[3~ delete-char # for xterm</programlisting>

	    <para xml:lang="en">For more information, see <link xlink:href="http://www.ibb.net/~anne/keyboard.html">this
		page</link>.</para>
	  </answer>
	</qandaentry>
      </qandaset>
    </sect1>

    <sect1 xml:id="compatibility-other">
      <title xml:lang="en">Other Hardware</title>

      <qandaset>
	<qandaentry>
	  <question xml:id="es1370-silent-pcm">
	    <para xml:lang="en">Workarounds for no sound from my <citerefentry><refentrytitle>pcm</refentrytitle><manvolnum>4</manvolnum></citerefentry> sound
	      card?</para>
	  </question>

	  <answer>
	    <para xml:lang="en">Some sound cards set their output volume to 0 at
	      every boot.  Run the following command every time the
	      machine boots:</para>

	    <screen xml:lang="en"><prompt>#</prompt> <userinput>mixer pcm 100 vol 100 cd 100</userinput></screen>
	  </answer>
	</qandaentry>

	<qandaentry>
	  <question xml:id="power-management-support">
	    <para xml:lang="en">Does FreeBSD support power management on my
	      laptop?</para>
	  </question>

	  <answer>
	    <para xml:lang="en">FreeBSD supports the <acronym>ACPI</acronym> features
	      found in modern hardware.  Further information can be
	      found in <citerefentry><refentrytitle>acpi</refentrytitle><manvolnum>4</manvolnum></citerefentry>.</para>
	  </answer>
	</qandaentry>
      </qandaset>
    </sect1>
  </chapter>

  <chapter xml:id="troubleshoot">
    <title xml:lang="en">Troubleshooting</title>

    <qandaset>
      <qandaentry>
	<question xml:id="pae">
	  <para xml:lang="en">Why is FreeBSD finding the wrong amount of memory on
	    <trademark>i386</trademark> hardware?</para>
	</question>

	<answer>
	  <para xml:lang="en">The most likely reason is the difference between
	    physical memory addresses and virtual addresses.</para>

	  <para xml:lang="en">The convention for most PC hardware is to use the
	    memory area between 3.5 GB and 4 GB for a
	    special purpose (usually for PCI).  This address space is
	    used to access PCI hardware.  As a result real, physical
	    memory cannot be accessed by that address space.</para>

	  <para xml:lang="en">What happens to the memory that should appear in that
	    location is hardware dependent.  Unfortunately,
	    some hardware does nothing and the ability to use that
	    last 500 MB of RAM is entirely lost.</para>

	  <para xml:lang="en">Luckily, most hardware remaps the memory to a higher
	    location so that it can still be used.  However, this can
	    cause some confusion when watching the boot
	    messages.</para>

	  <para xml:lang="en">On a 32-bit version of FreeBSD, the memory appears lost,
	    since it will be remapped above 4 GB, which a 32-bit
	    kernel is unable to access.  In this case, the solution is
	    to build a PAE enabled kernel.  See the entry on memory
	    limits for more information.</para>

	  <para xml:lang="en">On a 64-bit version of FreeBSD, or when running a
	    PAE-enabled kernel, FreeBSD will correctly detect and remap
	    the memory so it is usable.  During boot, however, it may
	    seem as if FreeBSD is detecting more memory than the system
	    really has, due to the described remapping.  This is
	    normal and the available memory will be corrected as the
	    boot process completes.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="signal11">
	  <para xml:lang="en">Why do my programs occasionally die with
	    <errorname>Signal 11</errorname> errors?</para>
	</question>

	<answer>
	  <para xml:lang="en">Signal 11 errors are caused when a process has
	    attempted to access memory which the operating system has
	    not granted it access to.  If something like this is
	    happening at seemingly random intervals,
	    start investigating the cause.</para>

	  <para xml:lang="en">These problems can usually be attributed to
	    either:</para>

	  <orderedlist>
	    <listitem>
	      <para xml:lang="en">If the problem is occurring only in a specific
		custom application, it is
		probably a bug in the code.</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en">If it is a problem with part of the base FreeBSD
		system, it may also be buggy code, but more often than
		not these problems are found and fixed long before us
		general <acronym>FAQ</acronym> readers get to use
		these bits of code (that is what -CURRENT is
		for).</para>
	    </listitem>
	  </orderedlist>

	  <para xml:lang="en">It is probably
	    not a FreeBSD bug if the
	    problem occurs compiling a program, but the activity
	    that the compiler is carrying out changes each
	    time.</para>

	  <para xml:lang="en">For example, if <command>make
	      buildworld</command> fails while trying
	    to compile <filename>ls.c</filename> into
	    <filename>ls.o</filename> and, when run again, it fails
	    in the same place, this is a broken build.  Try
	    updating source and try again.  If the compile fails
	    elsewhere, it is almost certainly due to hardware.</para>

	  <para xml:lang="en">In the first case, use a debugger such as
	    <citerefentry><refentrytitle>gdb</refentrytitle><manvolnum>1</manvolnum></citerefentry> to find the point in the program which is
	    attempting to access a bogus address and fix
	    it.</para>

	  <para xml:lang="en">In the second case, verify which piece of
	    hardware is at fault.</para>

	  <para xml:lang="en">Common causes of this include:</para>

	  <orderedlist>
	    <listitem>
	      <para xml:lang="en">The hard disks might be overheating: Check that
		the fans are still working, as the disk and
		other hardware might be overheating.</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en">The processor running is overheating: This might
		be because the processor has been overclocked, or the
		fan on the processor might have died.  In either case,
		ensure that the hardware is running at
		what it is specified to run at, at least while trying
		to solve this problem.  If it is not, clock it back
		to the default settings.)</para>

	      <para xml:lang="en">Regarding overclocking, it is far
		cheaper to have a slow system than a fried system that
		needs replacing!  Also the community is not
		sympathetic to problems on overclocked systems.</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en">Dodgy memory: if multiple memory
		SIMMS/DIMMS are installed, pull them all out and try
		running the machine with each SIMM or DIMM
		individually to narrow the problem down to either the
		problematic DIMM/SIMM or perhaps even a
		combination.</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en">Over-optimistic motherboard settings: the BIOS
		settings, and some motherboard jumpers, provide
		options to set various timings.  The defaults
		are often sufficient, but sometimes setting the wait
		states on RAM too low, or setting the <quote>RAM
		  Speed: Turbo</quote> option
		will cause strange behavior.  A possible idea is to
		set to BIOS defaults, after noting
		the current settings first.</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en">Unclean or insufficient power to the motherboard.
		Remove any unused I/O boards, hard disks, or
		CD-ROMs,
		or disconnect the power cable from them, to see if
		the power supply can manage a smaller load.  Or try
		another power supply, preferably one with a little
		more power.  For instance, if the current power supply
		is rated at 250 Watts, try one rated at
		300 Watts.</para>
	    </listitem>
	  </orderedlist>

	  <para xml:lang="en">Read the section on
	    <link linkend="signal11">Signal 11</link> for a further
	    explanation and a discussion on how memory testing
	    software or hardware can still pass faulty memory.  There
	    is an extensive <acronym>FAQ</acronym> on this at <link xlink:href="http://www.bitwizard.nl/sig11/">the SIG11
	      problem <acronym>FAQ</acronym></link>.</para>

	  <para xml:lang="en">Finally, if none of this has helped, it is possibly
	    a bug in FreeBSD.
	    Follow <link linkend="access-pr">these instructions</link>
	    to send a problem report.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="trap-12-panic">
	  <para xml:lang="en">My system crashes with either <errorname>Fatal trap
	      12: page fault in kernel mode</errorname>, or
	    <errorname>panic:</errorname>, and spits out a bunch of
	    information.  What should I do?</para>
	</question>

	<answer>
	  <para xml:lang="en">The FreeBSD developers are interested in these
	    errors, but need more information than just the error
	    message.  Copy the full crash message.  Then consult the
	    <acronym>FAQ</acronym> section on <link linkend="kernel-panic-troubleshooting">kernel
	      panics</link>, build a debugging kernel, and get a
	    backtrace.  This might sound difficult, but does not
	    require any programming skills.  Just follow the
	    instructions.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="proc-table-full">
	  <para xml:lang="en">What is the meaning of the error <errorname>maxproc
	      limit exceeded by uid %i, please see tuning(7) and
	      login.conf(5)</errorname>?</para>
	</question>

	<answer>
	  <para xml:lang="en">The FreeBSD kernel will only allow a certain number of
	    processes to exist at one time.  The number is based on
	    the <varname>kern.maxusers</varname> <citerefentry><refentrytitle>sysctl</refentrytitle><manvolnum>8</manvolnum></citerefentry>
	    variable.  <varname>kern.maxusers</varname> also affects
	    various other in-kernel limits, such as network buffers.
	    If the machine is heavily loaded,
	    increase <varname>kern.maxusers</varname>.  This will
	    increase these other system limits in addition to the
	    maximum number of processes.</para>

	  <para xml:lang="en">To adjust the <varname>kern.maxusers</varname> value,
	    see the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/configtuning-kernel-limits.html#kern-maxfiles">File/Process
	      Limits</link> section of the Handbook.  While that
	    section refers to open files, the same limits apply to
	    processes.</para>

	  <para xml:lang="en">If the machine is lightly loaded but running a very
	    large number of processes, adjust the
	    <varname>kern.maxproc</varname> tunable by defining it in
	    <filename>/boot/loader.conf</filename>.  The tunable will
	    not get adjusted until the system is rebooted.  For more
	    information about tuning tunables, see
	    <citerefentry><refentrytitle>loader.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry>.  If these processes are being run by
	    a single user, adjust
	    <varname>kern.maxprocperuid</varname> to be one less than
	    the new <varname>kern.maxproc</varname> value.  It must
	    be at least one less because one system program,
	    <citerefentry><refentrytitle>init</refentrytitle><manvolnum>8</manvolnum></citerefentry>, must always be running.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="remote-fullscreen">
	  <para xml:lang="en">Why do full screen applications on remote machines
	    misbehave?</para>
	</question>

	<answer>
	  <para xml:lang="en">The remote machine may be setting the terminal type to
	    something other than <literal>xterm</literal> which is
	    required by the FreeBSD console.  Alternatively the kernel
	    may have the wrong values for the width and height of the
	    terminal.</para>

	  <para xml:lang="en">Check the value of the <envar>TERM</envar>
	    environment variable is <literal>xterm</literal>.  If the
	    remote machine does not support that try
	    <literal>vt100</literal>.</para>

	  <para xml:lang="en">Run <command>stty -a</command> to check what the
	    kernel thinks the terminal dimensions are.  If they are
	    incorrect, they can be changed by running
	    <command>stty rows <replaceable>RR</replaceable> cols
	    <replaceable>CC</replaceable></command>.</para>

	  <para xml:lang="en">Alternatively, if the client machine has
	    <package>x11/xterm</package> installed, then running
	    <command>resize</command> will query the terminal for the
	    correct dimensions and set them.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="connection-delay">
	  <para xml:lang="en">Why does it take so long to connect to my computer via
	    <command>ssh</command> or
	    <command>telnet</command>?</para>
	</question>

	<answer>
	  <para xml:lang="en">The symptom: there is a long delay between the time
	    the TCP connection is established and the time when the
	    client software asks for a password (or, in
	    <citerefentry><refentrytitle>telnet</refentrytitle><manvolnum>1</manvolnum></citerefentry>'s case, when a login prompt
	    appears).</para>

	  <para xml:lang="en">The problem: more likely than not, the delay is caused
	    by the server software trying to resolve the client's IP
	    address into a hostname.  Many servers, including the
	    <application>Telnet</application> and
	    <application>SSH</application> servers that come with
	    FreeBSD, do this to store the hostname in a log file for
	    future reference by the administrator.</para>

	  <para xml:lang="en">The remedy: if the problem occurs whenever connecting
	    the client computer to any server, the problem
	    is with the client.  If the problem only occurs
	    when someone connects to the server computer, the
	    problem is with the server.</para>

	  <para xml:lang="en">If the problem is with the client, the only remedy is
	    to fix the DNS so the server can resolve it.  If this is
	    on a local network, consider it a server problem and keep
	    reading.  If this is on the Internet,
	    contact your ISP.</para>

	  <para xml:lang="en">If the problem is with the server on a
	    local network, configure the server
	    to resolve address-to-hostname queries for the local
	    address range.  See <citerefentry><refentrytitle>hosts</refentrytitle><manvolnum>5</manvolnum></citerefentry> and <citerefentry><refentrytitle>named</refentrytitle><manvolnum>8</manvolnum></citerefentry>
	    for more information.  If this is on the
	    Internet, the problem may be that the local server's
	    resolver is not functioning correctly.  To check, try to
	    look up another host such as
	    <systemitem>www.yahoo.com</systemitem>.  If it does not
	    work, that is the problem.</para>

	  <para xml:lang="en">Following a fresh install of FreeBSD, it is also possible
	    that domain and name server information is missing from
	    <filename>/etc/resolv.conf</filename>.  This will often
	    cause a delay in <application>SSH</application>, as the
	    option <literal>UseDNS</literal> is set to
	    <literal>yes</literal> by default in
	    <filename>/etc/ssh/sshd_config</filename>.  If this is
	    causing the problem, either fill in the
	    missing information in
	    <filename>/etc/resolv.conf</filename> or set
	    <literal>UseDNS</literal> to <literal>no</literal> in
	    <filename>sshd_config</filename> as a temporary
	    workaround.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="file-table-full">
	  <para xml:lang="en">Why does <errorname>file: table is full</errorname>
	    show up repeatedly in <citerefentry><refentrytitle>dmesg</refentrytitle><manvolnum>8</manvolnum></citerefentry>?</para>
	</question>

	<answer>
	  <para xml:lang="en">This error message indicates that the number of
	    available file descriptors have been exhausted on the
	    system.  Refer to the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/configtuning-kernel-limits.html#kern-maxfiles">kern.maxfiles</link>
	    section of the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/configtuning-kernel-limits.html">Tuning
	      Kernel Limits</link> section of the Handbook for a
	    discussion and solution.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="computer-clock-skew">
	  <para xml:lang="en">Why does the clock on my computer keep incorrect
	    time?</para>
	</question>

	<answer>
	  <para xml:lang="en">The computer has two or more clocks, and FreeBSD has
	    chosen to use the wrong one.</para>

	  <para xml:lang="en">Run <citerefentry><refentrytitle>dmesg</refentrytitle><manvolnum>8</manvolnum></citerefentry>, and check for lines that contain
	    <literal>Timecounter</literal>.  The one with the highest
	    quality value that FreeBSD chose.</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>dmesg | grep Timecounter</userinput>
Timecounter "i8254" frequency 1193182 Hz quality 0
Timecounter "ACPI-fast" frequency 3579545 Hz quality 1000
Timecounter "TSC" frequency 2998570050 Hz quality 800
Timecounters tick every 1.000 msec</screen>

	  <para xml:lang="en">Confirm this by checking the
	    <varname>kern.timecounter.hardware</varname>
	    <citerefentry><refentrytitle>sysctl</refentrytitle><manvolnum>3</manvolnum></citerefentry>.</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>sysctl kern.timecounter.hardware</userinput>
kern.timecounter.hardware: ACPI-fast</screen>

	  <para xml:lang="en">It may be a broken ACPI timer.  The simplest solution
	    is to disable the ACPI timer in
	    <filename>/boot/loader.conf</filename>:</para>

	  <programlisting xml:lang="en">debug.acpi.disabled="timer"</programlisting>

	  <para xml:lang="en">Or the BIOS may modify the TSC clock—perhaps to
	    change the speed of the processor when running from
	    batteries, or going into a power saving mode, but FreeBSD is
	    unaware of these adjustments, and appears to gain or lose
	    time.</para>

	  <para xml:lang="en">In this example, the <literal>i8254</literal> clock is
	    also available, and can be selected by writing its name to
	    the <varname>kern.timecounter.hardware</varname>
	    <citerefentry><refentrytitle>sysctl</refentrytitle><manvolnum>3</manvolnum></citerefentry>.</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>sysctl kern.timecounter.hardware=i8254</userinput>
kern.timecounter.hardware: TSC -&gt; i8254</screen>

	  <para xml:lang="en">The computer should now start keeping more accurate
	    time.</para>

	  <para xml:lang="en">To have this change automatically run at boot time,
	    add the following line to
	    <filename>/etc/sysctl.conf</filename>:</para>

	  <programlisting xml:lang="en">kern.timecounter.hardware=i8254</programlisting>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="indefinite-wait-buffer">
	  <para xml:lang="en">What does the error <errorname>swap_pager: indefinite
	      wait buffer:</errorname> mean?</para>
	</question>

	<answer>
	  <para xml:lang="en">This means that a process is trying to page memory
	    from
	    disk, and the page attempt has hung trying to access the
	    disk for more than 20 seconds.  It might be caused by bad
	    blocks on the disk drive, disk wiring, cables, or any
	    other disk I/O-related hardware.  If the drive itself is
	    bad, disk errors will appear in
	    <filename>/var/log/messages</filename> and in the output
	    of <command>dmesg</command>.  Otherwise, check the cables
	    and connections.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="lock-order-reversal">
	  <para xml:lang="en">What is a <errorname>lock order
	      reversal</errorname>?</para>
	</question>

	<answer>
	  <para xml:lang="en">The FreeBSD kernel uses a number of resource locks to
	    arbitrate contention for certain resources.  When multiple
	    kernel threads try to obtain multiple resource locks,
	    there's always the potential for a deadlock, where two
	    threads have each obtained one of the locks and blocks
	    forever waiting for the other thread to release one of the
	    other locks.  This sort of locking problem can be avoided
	    if all threads obtain the locks in the same order.</para>

	  <para xml:lang="en">A run-time lock diagnostic system called
	    <citerefentry><refentrytitle>witness</refentrytitle><manvolnum>4</manvolnum></citerefentry>, enabled in FreeBSD-CURRENT and disabled by
	    default for stable branches and releases, detects the
	    potential for deadlocks due to locking errors, including
	    errors caused by obtaining multiple resource locks with a
	    different order from different parts of the kernel.  The
	    <citerefentry><refentrytitle>witness</refentrytitle><manvolnum>4</manvolnum></citerefentry> framework tries to detect this problem as
	    it happens, and reports it by printing a message to the
	    system console about a <errorname>lock order
	      reversal</errorname> (often referred to also as
	    <acronym>LOR</acronym>).</para>

	  <para xml:lang="en">It is possible to get false positives, as
	    <citerefentry><refentrytitle>witness</refentrytitle><manvolnum>4</manvolnum></citerefentry> is conservative.  A true positive report
	    <emphasis>does not</emphasis> mean that a system is
	    dead-locked; instead it should be understood as a warning
	    that a deadlock could have happened here.</para>

	  <note>
	    <para xml:lang="en">Problematic <acronym>LOR</acronym>s tend to get
	      fixed quickly, so check the <link xlink:href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-current">FreeBSD-CURRENT mailing list</link> before posting
	      to it.</para>
	  </note>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="called-with-non-sleepable-locks-held">
	  <para xml:lang="en">What does <errorname>Called ...  with the following
	      non-sleepable locks held</errorname> mean?</para>
	</question>

	<answer>
	  <para xml:lang="en">This means that a function that may sleep was called
	    while a mutex (or other unsleepable) lock was held.</para>

	  <para xml:lang="en">The reason this is an error is because mutexes are not
	    intended to be held for long periods of time; they are
	    supposed to only be held to maintain short periods of
	    synchronization.  This programming contract allows device
	    drivers to use mutexes to synchronize with the rest of the
	    kernel during interrupts.  Interrupts (under FreeBSD) may not
	    sleep.  Hence it is imperative that no subsystem in the
	    kernel block for an extended period while holding a
	    mutex.</para>

	  <para xml:lang="en">To catch such errors, assertions may be added to the
	    kernel that interact with the <citerefentry><refentrytitle>witness</refentrytitle><manvolnum>4</manvolnum></citerefentry> subsystem to
	    emit a warning or fatal error (depending on the system
	    configuration) when a potentially blocking call is made
	    while holding a mutex.</para>

	  <para xml:lang="en">In summary, such warnings are non-fatal, however with
	    unfortunate timing they could cause undesirable effects
	    ranging from a minor blip in the system's responsiveness
	    to a complete system lockup.</para>

	  <para xml:lang="en">For additional information about locking in FreeBSD see
	    <citerefentry><refentrytitle>locking</refentrytitle><manvolnum>9</manvolnum></citerefentry>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="touch-not-found">
	  <para xml:lang="en">Why does
	    <buildtarget xml:lang="en">buildworld</buildtarget>/<buildtarget xml:lang="en">installworld</buildtarget>
	    die with the message <errorname>touch: not
	      found</errorname>?</para>
	</question>

	<answer>
	  <para xml:lang="en">This error does not mean that the <citerefentry><refentrytitle>touch</refentrytitle><manvolnum>1</manvolnum></citerefentry>
	    utility is missing.  The error is instead probably due to
	    the dates of the files being set sometime in the future.
	    If the CMOS clock is set to local time, run
	    <command>adjkerntz -i</command> to adjust
	    the kernel clock when booting into single-user
	    mode.</para>
	</answer>
      </qandaentry>
    </qandaset>
  </chapter>

  <chapter xml:id="applications">
    <title xml:lang="en">User Applications</title>

    <qandaset>
      <qandaentry>
	<question xml:id="user-apps">
	  <para xml:lang="en">Where are all the user applications?</para>
	</question>

	<answer>
	  <para xml:lang="en">Refer to <link xlink:href="@@URL_RELPREFIX@@/ports/index.html">the ports
	      page</link> for info on software packages ported to
	    FreeBSD.  The list currently tops 24,000 and is
	    growing daily, so come back to check often or subscribe to
	    the <link xlink:href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-announce">FreeBSD announcements mailing list</link> for periodic updates on new
	    entries.</para>

	  <para xml:lang="en">Most ports should work on all supported versions of
	    FreeBSD.  Those that do not are specifically marked as such.
	    Each time a FreeBSD release is made, a snapshot of the ports
	    tree at the time of release in also included in the
	    <filename>ports/</filename> directory.</para>

	  <para xml:lang="en">FreeBSD supports compressed binary packages to easily
	    install and uninstall ports.  Use <citerefentry><refentrytitle>pkg</refentrytitle><manvolnum>7</manvolnum></citerefentry> to control
	    the installation of packages.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="how-do-download-ports-tree">
	  <para xml:lang="en">How do I download the Ports tree? Should I be using
	    Subversion?</para>
	</question>

	<answer>
	  <para xml:lang="en">Any of the methods listed here work:</para>

	  <itemizedlist>
	    <listitem>
	      <para xml:lang="en">Use portsnap for most use cases.  Refer to <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/ports-using.html">Using
		the Ports Collection</link> for instructions on how to
		use this tool.</para>
	    </listitem>
	    <listitem>
	      <para xml:lang="en">Use Subversion if custom patches to the
		ports tree are needed.  Refer to <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/svn.html">Using
		  Subversion</link> for details.</para>
	    </listitem>
	  </itemizedlist>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="java">
	  <para xml:lang="en">Does FreeBSD support <trademark>Java</trademark>?</para>
	</question>

	<answer>
	  <para xml:lang="en">Yes.  Refer to <link xlink:href="@@URL_RELPREFIX@@/java/index.html">https://www.FreeBSD.org/java/</link>
	    for more information.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ports-4x">
	  <para xml:lang="en">Why can I not build this port on my
	    11.<replaceable>X</replaceable> -, or
	    12.<replaceable>X</replaceable> -STABLE machine?</para>
	</question>

	<answer>
	  <para xml:lang="en">If the installed FreeBSD version lags significantly
	    behind <emphasis>-CURRENT</emphasis> or
	    <emphasis>-STABLE</emphasis>, update the Ports Collection
	    using the instructions in <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/ports-using.html">Using
	      the Ports Collection</link>.  If the system is
	    up-to-date, someone might have committed a change to the
	    port which works for <emphasis>-CURRENT</emphasis> but
	    which broke the port for <emphasis>-STABLE</emphasis>.
	    <link xlink:href="https://bugs.FreeBSD.org/submit/">Submit</link>
	    a bug report, since the Ports Collection is supposed to
	    work for both the <emphasis>-CURRENT</emphasis> and
	    <emphasis>-STABLE</emphasis> branches.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="make-index">
	  <para xml:lang="en">I just tried to build <filename>INDEX</filename> using
	    <command>make index</command>, and it failed.  Why?</para>
	</question>

	<answer>
	  <para xml:lang="en">First, make sure that the Ports Collection is
	    up-to-date.  Errors that affect building
	    <filename>INDEX</filename> from an up-to-date copy of the
	    Ports Collection are high-visibility and are thus almost
	    always fixed immediately.</para>

	  <para xml:lang="en">There are rare cases where <filename>INDEX</filename>
	    will not build due to odd cases involving
	    <varname>OPTIONS_SET</varname>
	    being set in <filename>make.conf</filename>.  If
	    you suspect that this is the case, try to make
	    <filename>INDEX</filename> with those variables
	    turned off before reporting it to <link xlink:href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports">FreeBSD ports mailing list</link>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ports-update">
	  <para xml:lang="en">I updated the sources, now how do I update my
	    installed ports?</para>
	</question>

	<answer>
	  <para xml:lang="en">FreeBSD does not include a port upgrading tool, but it
	    does have some tools to make the upgrade process somewhat
	    easier.  Additional tools are available to simplify
	    port handling and are described the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/ports-using.html">Upgrading
	      Ports</link> section in the FreeBSD Handbook.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ports-major-upgrade">
	  <para xml:lang="en">Do I need to recompile every port each time I perform
	    a major version update?</para>
	</question>

	<answer>
	  <para xml:lang="en">Yes!  While a recent system will run with
	    software compiled under an older release,
	    things will randomly crash and fail to work once
	    other ports are installed or updated.</para>

	  <para xml:lang="en">When the system is upgraded, various shared libraries,
	    loadable modules, and other parts of the system will be
	    replaced with newer versions.  Applications linked against
	    the older versions may fail to start or, in other cases,
	    fail to function properly.</para>

	  <para xml:lang="en">For more information, see <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/updating-upgrading-freebsdupdate.html#freebsdupdate-upgrade">the
	      section on upgrades</link> in the FreeBSD Handbook.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ports-minor-upgrade">
	  <para xml:lang="en">Do I need to recompile every port each time I perform
	    a minor version update?</para>
	</question>

	<answer>
	  <para xml:lang="en">In general, no.  FreeBSD developers do their utmost to
	    guarantee binary compatibility across all releases with
	    the same major version number.  Any exceptions will be
	    documented in the Release Notes, and advice given there
	    should be followed.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="minimal-sh">
	  <para xml:lang="en">Why is <command>/bin/sh</command> so minimal?  Why
	    does FreeBSD not use <command>bash</command> or another
	    shell?</para>
	</question>

	<answer>
	  <para xml:lang="en">Many people need to write shell scripts which will be
	    portable across many systems.  That is why <trademark class="registered">POSIX</trademark>
	    specifies the shell and utility commands in great detail.
	    Most scripts are written in Bourne shell (<citerefentry><refentrytitle>sh</refentrytitle><manvolnum>1</manvolnum></citerefentry>), and
	    because several important programming interfaces
	    (<citerefentry><refentrytitle>make</refentrytitle><manvolnum>1</manvolnum></citerefentry>, <citerefentry><refentrytitle>system</refentrytitle><manvolnum>3</manvolnum></citerefentry>, <citerefentry><refentrytitle>popen</refentrytitle><manvolnum>3</manvolnum></citerefentry>, and
	    analogues in higher-level scripting languages like Perl
	    and Tcl) are specified to use the Bourne shell to
	    interpret commands.  Because the Bourne shell is so often
	    and widely used, it is important for it to be quick to
	    start, be deterministic in its behavior, and have a small
	    memory footprint.</para>

	  <para xml:lang="en">The existing implementation is our best effort at
	    meeting as many of these requirements simultaneously as we
	    can.  To keep <command>/bin/sh</command> small, we have
	    not provided many of the convenience features that other
	    shells have.  That is why other more featureful shells
	    like <command>bash</command>, <command>scsh</command>,
	    <citerefentry><refentrytitle>tcsh</refentrytitle><manvolnum>1</manvolnum></citerefentry>, and <command>zsh</command> are available.
	    Compare the memory utilization of
	    these shells by looking at the <quote>VSZ</quote> and
	    <quote>RSS</quote> columns in a <command>ps -u</command>
	    listing.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="midi-sound-files">
	  <para xml:lang="en">How do I create audio CDs from my MIDI files?</para>
	</question>

	<answer>
	  <para xml:lang="en">To create audio CDs from MIDI files, first install
	    <package>audio/timidity++</package> from ports then
	    install manually the GUS patches set by Eric A. Welsh,
	    available at <uri xlink:href="http://alleg.sourceforge.net/digmid.html">http://alleg.sourceforge.net/digmid.html</uri>.
	    After <application>TiMidity++</application> has been
	    installed properly, MIDI files may be converted to WAV
	    files with the following command line:</para>

	  <screen xml:lang="en"><prompt>%</prompt> <userinput>timidity -Ow -s 44100 -o /tmp/juke/01.wav 01.mid</userinput></screen>

	  <para xml:lang="en">The WAV files can then be converted to other formats
	    or burned onto audio CDs, as described in the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/creating-cds.html">FreeBSD
	      Handbook</link>.</para>
	</answer>
      </qandaentry>
    </qandaset>
  </chapter>

  <chapter xml:id="kernelconfig">
    <title xml:lang="en">Kernel Configuration</title>

    <qandaset>
      <qandaentry>
	<question xml:id="make-kernel">
	  <para xml:lang="en">I would like to customize my kernel.  Is it
	    difficult?</para>
	</question>

	<answer>
	  <para xml:lang="en">Not at all!  Check out the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/kernelconfig.html">kernel
	      config section of the Handbook</link>.</para>

	  <note>
	    <para xml:lang="en">The new <filename>kernel</filename> will be
	      installed to the <filename>/boot/kernel</filename>
	      directory along with its modules, while the old kernel
	      and its modules will be moved to the
	      <filename>/boot/kernel.old</filename> directory.  If
	      a mistake is made in the
	      configuration, simply boot the previous version of the
	      kernel.</para>
	  </note>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="why-kernel-big">
	  <para xml:lang="en">Why is my kernel so big?</para>
	</question>

	<answer>
	  <para xml:lang="en"><literal>GENERIC</literal> kernels shipped with FreeBSD
	    are compiled in <emphasis>debug mode</emphasis>.
	    Kernels built in debug mode contain debug data in
	    separate files that are used for debugging.
	    FreeBSD releases prior to 11.0 store these debug files in
	    the same directory as the kernel itself,
	    <filename>/boot/kernel/</filename>.
	    In FreeBSD 11.0 and later the debug files are stored in
	    <filename>/usr/lib/debug/boot/kernel/</filename>.
	    Note that there will be little or no performance loss from
	    running a debug kernel, and it is useful to keep one
	    around in case of a system panic.</para>

	  <para xml:lang="en">When running low on disk space, there
	    are different options to reduce the size of
	    <filename>/boot/kernel/</filename> and
	    <filename>/usr/lib/debug/</filename>.</para>

	  <para xml:lang="en">To not install the symbol files,
	    make sure the following line exists in
	    <filename>/etc/src.conf</filename>:</para>

	  <programlisting xml:lang="en">WITHOUT_KERNEL_SYMBOLS=yes</programlisting>

	  <para xml:lang="en">For more information see <citerefentry><refentrytitle>src.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry>.</para>

	  <para xml:lang="en">If you want to avoid building debug files altogether,
	    make sure that both of the following are true:</para>

	  <itemizedlist>
	    <listitem>
	      <para xml:lang="en">This line does not exist in the kernel
		configuration file:</para>

	      <programlisting xml:lang="en">makeoptions DEBUG=-g</programlisting>
	    </listitem>

	    <listitem>
	      <para xml:lang="en">Do not run <citerefentry><refentrytitle>config</refentrytitle><manvolnum>8</manvolnum></citerefentry> with
		<option>-g</option>.</para>
	    </listitem>
	  </itemizedlist>

	  <para xml:lang="en">Either of the above settings will cause the kernel to
	    be built in debug mode.</para>

	  <para xml:lang="en">To build and install only the specified modules, list
	    them in
	    <filename>/etc/make.conf</filename>:</para>

	  <programlisting xml:lang="en">MODULES_OVERRIDE= <replaceable>accf_http ipfw</replaceable></programlisting>

	  <para xml:lang="en">Replace <emphasis>accf_httpd ipfw</emphasis> with a
	    list of needed modules.  Only the listed modules will be
	    built.  This reduces the size of the kernel
	    directory and decreases the amount of time needed to
	    build the kernel.  For more information, read
	    <filename>/usr/share/examples/etc/make.conf</filename>.</para>

	  <para xml:lang="en">Unneeded devices can be removed from the kernel
	    to further reduce the size.  See <xref linkend="make-kernel"/> for more information.</para>

	  <para xml:lang="en">To put any of these options into effect, follow the
	    instructions to <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/kernelconfig-building.html">build
	      and install</link> the new kernel.</para>

	  <para xml:lang="en">For reference, the FreeBSD 11 amd64 kernel
	    (<filename>/boot/kernel/kernel</filename>) is
	    approximately 25 MB.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="generic-kernel-build-failure">
	  <para xml:lang="en">Why does every kernel I try to build fail to compile,
	    even <filename>GENERIC</filename>?</para>
	</question>

	<answer>
	  <para xml:lang="en">There are a number of possible causes for this
	    problem:</para>

	  <itemizedlist>
	    <listitem>
	      <para xml:lang="en">The source
		tree is different from the one used to build the
		currently running system.  When attempting an upgrade,
		read <filename>/usr/src/UPDATING</filename>, paying
		particular attention to the <quote>COMMON
		  ITEMS</quote> section at the end.</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en">The <command>make buildkernel</command> did not
		complete successfully.  The <command>make
		  buildkernel</command> target relies on files
		generated by the <command>make buildworld</command>
		target to complete its job correctly.</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en">Even when building <link linkend="stable">FreeBSD-STABLE</link>, it is possible
		that the source tree was fetched at a time when it was
		either being modified or it was broken.
		Only releases are guaranteed to be
		buildable, although <link linkend="stable">FreeBSD-STABLE</link> builds fine the
		majority of the time.  Try re-fetching the source tree
		and see if the problem goes away.  Try using a
		different mirror in case the previous one is having
		problems.</para>
	    </listitem>
	  </itemizedlist>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="scheduler-in-use">
	  <para xml:lang="en">Which scheduler is in use on a
	    running system?</para>
	</question>

	<answer>
	  <para xml:lang="en">The name of the scheduler currently being used is
	    directly available as the value of the
	    <varname>kern.sched.name</varname> sysctl:</para>

	  <screen xml:lang="en"><prompt>%</prompt> sysctl <replaceable>kern.sched.name</replaceable>
kern.sched.name: ULE</screen>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="scheduler-kern-quantum">
	  <para xml:lang="en">What is <varname>kern.sched.quantum</varname>?</para>
	</question>

	<answer>
	  <para xml:lang="en"><varname>kern.sched.quantum</varname> is the maximum
	    number of ticks a process can run without being preempted
	    in the 4BSD scheduler.</para>
	</answer>
      </qandaentry>
    </qandaset>
  </chapter>

  <chapter xml:id="disks">
    <title xml:lang="en">Disks, File Systems, and Boot Loaders</title>

    <qandaset>
      <qandaentry>
	<question xml:id="adding-disks">
	  <para xml:lang="en">How can I add my new hard disk to my FreeBSD
	    system?</para>
	</question>

	<answer>
	  <para xml:lang="en">See the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/disks-adding.html">Adding
	      Disks</link> section in the FreeBSD Handbook.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="new-huge-disk">
	  <para xml:lang="en">How do I move my system over to my huge new
	    disk?</para>
	</question>

	<answer>
	  <para xml:lang="en">The best way is to reinstall the operating system on
	    the new disk, then move the user data over.  This is
	    highly recommended when tracking
	    <emphasis>-STABLE</emphasis> for more than one release or
	    when updating a release instead of installing a new one.
	    Install booteasy on both disks with <citerefentry><refentrytitle>boot0cfg</refentrytitle><manvolnum>8</manvolnum></citerefentry> and
	    dual boot until you are happy with the new configuration.
	    Skip the next paragraph to find out how to move the data
	    after doing this.</para>

	  <para xml:lang="en">Alternatively, partition and label the new disk with
	    either <citerefentry><refentrytitle>sade</refentrytitle><manvolnum>8</manvolnum></citerefentry> or <citerefentry><refentrytitle>gpart</refentrytitle><manvolnum>8</manvolnum></citerefentry>.  If the disks are
	    MBR-formatted, booteasy can be installed on both disks
	    with <citerefentry><refentrytitle>boot0cfg</refentrytitle><manvolnum>8</manvolnum></citerefentry> so that the computer can dual boot
	    to the old or new system after the copying is done.</para>

	  <para xml:lang="en">Once the new disk set up,
	    the data cannot just be copied.  Instead, use tools that
	    understand device files and system flags, such as
	    <citerefentry><refentrytitle>dump</refentrytitle><manvolnum>8</manvolnum></citerefentry>.  Although it is recommended
	    to move the data while in single-user mode, it
	    is not required.</para>

	  <para xml:lang="en">When the disks are formatted with
	    <acronym>UFS</acronym>, never use anything but
	    <citerefentry><refentrytitle>dump</refentrytitle><manvolnum>8</manvolnum></citerefentry> and <citerefentry><refentrytitle>restore</refentrytitle><manvolnum>8</manvolnum></citerefentry> to move the root file
	    system.  These commands should also be used when moving a
	    single partition to another empty partition.  The sequence
	    of steps to use <command>dump</command> to move the data
	    from one <acronym>UFS</acronym> partitions to a new
	    partition is:</para>

	  <procedure>
	    <step>
	      <para xml:lang="en"><command>newfs</command> the new partition.</para>
	    </step>

	    <step>
	      <para xml:lang="en"><command>mount</command> it on a temporary mount
		point.</para>
	    </step>

	    <step>
	      <para xml:lang="en"><command>cd</command> to that directory.</para>
	    </step>

	    <step>
	      <para xml:lang="en"><command>dump</command> the old partition, piping
		output to the new one.</para>
	    </step>
	  </procedure>

	  <para xml:lang="en">For example, to move
	    <filename>/dev/ada1s1a</filename> with
	    <filename>/mnt</filename> as the temporary mount point,
	    type:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>newfs /dev/ada1s1a</userinput>
<prompt>#</prompt> <userinput>mount /dev/ada1s1a /mnt</userinput>
<prompt>#</prompt> <userinput>cd /mnt</userinput>
<prompt>#</prompt> <userinput>dump 0af - / | restore rf -</userinput></screen>

	  <para xml:lang="en">Rearranging partitions with
	    <command>dump</command> takes a bit more work.  To merge a
	    partition like <filename>/var</filename> into its parent,
	    create the new partition large enough for both, move the
	    parent partition as described above, then move the child
	    partition into the empty directory that the first move
	    created:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>newfs /dev/ada1s1a</userinput>
<prompt>#</prompt> <userinput>mount /dev/ada1s1a /mnt</userinput>
<prompt>#</prompt> <userinput>cd /mnt</userinput>
<prompt>#</prompt> <userinput>dump 0af - / | restore rf -</userinput>
<prompt>#</prompt> <userinput>cd var</userinput>
<prompt>#</prompt> <userinput>dump 0af - /var | restore rf -</userinput></screen>

	  <para xml:lang="en">To split a directory from its parent, say putting
	    <filename>/var</filename> on its own partition when it was
	    not before, create both partitions, then mount the child
	    partition on the appropriate directory in the temporary
	    mount point, then move the old single partition:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>newfs /dev/ada1s1a</userinput>
<prompt>#</prompt> <userinput>newfs /dev/ada1s1d</userinput>
<prompt>#</prompt> <userinput>mount /dev/ada1s1a /mnt</userinput>
<prompt>#</prompt> <userinput>mkdir /mnt/var</userinput>
<prompt>#</prompt> <userinput>mount /dev/ada1s1d /mnt/var</userinput>
<prompt>#</prompt> <userinput>cd /mnt</userinput>
<prompt>#</prompt> <userinput>dump 0af - / | restore rf -</userinput></screen>

	  <para xml:lang="en">The <citerefentry><refentrytitle>cpio</refentrytitle><manvolnum>1</manvolnum></citerefentry> and <citerefentry><refentrytitle>pax</refentrytitle><manvolnum>1</manvolnum></citerefentry> utilities are also
	    available for moving user data.  These are known to lose
	    file flag information, so use them with caution.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="safe-softupdates">
	  <para xml:lang="en">Which partitions can safely use Soft Updates?  I have
	    heard that Soft Updates on <filename>/</filename> can
	    cause problems.  What about Journaled Soft Updates?</para>
	</question>

	<answer>
	  <para xml:lang="en">Short answer: Soft Updates can usually be safely used
	    on all partitions.</para>

	  <para xml:lang="en">Long answer:  Soft Updates has two characteristics
	    that may be undesirable on certain partitions.  First, a
	    Soft Updates partition has a small chance of losing data
	    during a system crash.  The partition will not be
	    corrupted as the data will simply be lost.  Second, Soft
	    Updates can cause temporary space shortages.</para>

	  <para xml:lang="en">When using Soft Updates, the kernel can take up to
	    thirty seconds to write changes to the physical disk.
	    When a large file is deleted the file still resides on
	    disk until the kernel actually performs the deletion.
	    This can cause a very simple race condition.  Suppose
	    one large file is deleted and another large file is
	    immediately created.  The first large file is not yet
	    actually removed from the physical disk, so the disk might
	    not have enough room for the second large file.  This will
	    produce an error that the partition does not have enough
	    space, even though a large chunk of space has just been
	    released.  A few seconds later, the file creation works as
	    expected.</para>

	  <para xml:lang="en">If a system should crash after the kernel accepts a
	    chunk of data for writing to disk, but before that data is
	    actually written out, data could be lost.  This risk is
	    extremely small, but generally manageable.</para>

	  <para xml:lang="en">These issues affect all partitions using Soft Updates.
	    So, what does this mean for the root partition?</para>

	  <para xml:lang="en">Vital information on the root partition changes very
	    rarely.  If the system crashed during the thirty-second
	    window after such a change is made, it is possible that
	    data could be lost.  This risk is negligible for most
	    applications, but be aware that it exists.  If
	    the system cannot tolerate this much risk, do not use
	    Soft Updates on the root file system!</para>

	  <para xml:lang="en"><filename>/</filename> is traditionally one of the
	    smallest partitions.  If
	    <filename>/tmp</filename> is on
	    <filename>/</filename>, there may be intermittent
	    space problems.  Symlinking <filename>/tmp</filename> to
	    <filename>/var/tmp</filename> will solve this
	    problem.</para>

	  <para xml:lang="en">Finally, <citerefentry><refentrytitle>dump</refentrytitle><manvolnum>8</manvolnum></citerefentry> does not work in live mode (-L)
	    on a filesystem, with Journaled Soft Updates
	    (<acronym>SU+J</acronym>).</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="mount-foreign-fs">
	  <para xml:lang="en">Can I mount other foreign file systems under
	    FreeBSD?</para>
	</question>

	<answer>
	  <para xml:lang="en">FreeBSD supports a variety of other file systems.</para>

	  <variablelist>
	    <varlistentry>
	      <term xml:lang="en">UFS</term>

	      <listitem>
		<para xml:lang="en">UFS CD-ROMs can be mounted directly on FreeBSD.
		  Mounting disk partitions from Digital UNIX and other
		  systems that support UFS may be more complex,
		  depending on the details of the disk partitioning
		  for the operating system in question.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term xml:lang="en">ext2/ext3</term>

	      <listitem>
		<para xml:lang="en">FreeBSD supports <literal>ext2fs</literal> and
		  <literal>ext3fs</literal> partitions.  See
		  <citerefentry><refentrytitle>ext2fs</refentrytitle><manvolnum>5</manvolnum></citerefentry> for more information.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term xml:lang="en">NTFS</term>

	      <listitem>
		<para xml:lang="en">FUSE based NTFS support is available as a port
		  (<package>sysutils/fusefs-ntfs</package>).  For more
		  information see <link xlink:href="http://www.tuxera.com/community/ntfs-3g-manual/"><application>ntfs-3g</application></link>.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term xml:lang="en">FAT</term>

	      <listitem>
		<para xml:lang="en">FreeBSD includes a read-write FAT driver.  For more
		  information, see <citerefentry><refentrytitle>mount_msdosfs</refentrytitle><manvolnum>8</manvolnum></citerefentry>.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term xml:lang="en">ZFS</term>

	      <listitem>
		<para>FreeBSD 包含由 <trademark>Sun</trademark> 移植過來的 ZFS 驅動程式。 目前的建議是僅在記憶體充足的 amd64 平臺上使用它。有關更詳細資訊, 請參閱 <citerefentry><refentrytitle>zfs</refentrytitle><manvolnum>8</manvolnum></citerefentry>。</para>
	      </listitem>
	    </varlistentry>
	  </variablelist>

	  <para xml:lang="en">FreeBSD includes the Network File System
	    <acronym>NFS</acronym> and the FreeBSD Ports Collection
	    provides several FUSE applications to support many other
	    file systems.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="mount-dos">
	  <para xml:lang="en">How do I mount a secondary DOS partition?</para>
	</question>

	<answer>
	  <para xml:lang="en">The secondary DOS partitions are found after
	    <emphasis>all</emphasis> the primary partitions.  For
	    example, if <literal>E</literal> is the
	    second DOS partition on the second SCSI drive, there will
	    be a device file for <quote>slice 5</quote> in
	    <filename>/dev</filename>.  To mount it:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>mount -t msdosfs /dev/da1s5 /dos/e</userinput></screen>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="crypto-file-system">
	  <para xml:lang="en">Is there a cryptographic file system for FreeBSD?</para>
	</question>

	<answer>
	  <para xml:lang="en">Yes, <citerefentry><refentrytitle>gbde</refentrytitle><manvolnum>8</manvolnum></citerefentry> and <citerefentry><refentrytitle>geli</refentrytitle><manvolnum>8</manvolnum></citerefentry>.
	    See the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/disks-encrypting.html">Encrypting
	      Disk Partitions</link> section of the FreeBSD
	    Handbook.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="grub-loader">
	  <para xml:lang="en">How do I boot FreeBSD and <trademark class="registered">Linux</trademark> using
	    <application>GRUB</application>?</para>
	</question>

	<answer>
	  <para xml:lang="en">To boot FreeBSD using <application>GRUB</application>,
	    add the following to either
	    <filename>/boot/grub/menu.lst</filename> or
	    <filename>/boot/grub/grub.conf</filename>, depending upon
	    which is used by the <trademark class="registered">Linux</trademark> distribution.</para>

	  <programlisting xml:lang="en">title FreeBSD 9.1
	root <replaceable>(hd0,a)</replaceable>
	kernel /boot/loader</programlisting>

	  <para xml:lang="en">Where <replaceable>hd0,a</replaceable> points to the
	    root partition on the first disk.  To specify
	    the slice number, use something like this
	    <replaceable>(hd0,2,a)</replaceable>.  By default, if the
	    slice number is omitted, <application>GRUB</application>
	    searches the first slice
	    which has the <literal>a</literal> partition.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="booteasy-loader">
	  <para xml:lang="en">How do I boot FreeBSD and <trademark class="registered">Linux</trademark> using
	    <application>BootEasy?</application></para>
	</question>

	<answer>
	  <para xml:lang="en">Install LILO at the start of the <trademark class="registered">Linux</trademark> boot
	    partition instead of in the Master Boot Record.  You can
	    then boot LILO from
	    <application>BootEasy</application>.</para>

	  <para xml:lang="en">This is recommended when running <trademark class="registered">Windows</trademark> and <trademark class="registered">Linux</trademark>
	    as it makes it simpler to get <trademark class="registered">Linux</trademark> booting again if
	    <trademark class="registered">Windows</trademark> is reinstalled.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="changing-bootprompt">
	  <para xml:lang="en">How do I change the boot prompt from
	    <literal>???</literal> to something more
	    meaningful?</para>
	</question>

	<answer>
	  <para xml:lang="en">This cannot be accomplished with the standard boot
	    manager without rewriting it.  There are a number of other
	    boot managers in the <filename>sysutils</filename>
	    category of the Ports Collection.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="removable-drives">
	  <para xml:lang="en">How do I use a new removable drive?</para>
	</question>

	<answer>
	  <para xml:lang="en">If the drive already has a file system on it,
	    use a command like this:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>mount -t msdosfs /dev/da0s1 /mnt</userinput></screen>

	  <para xml:lang="en">If the drive will only be used with FreeBSD systems,
	    partition it with <acronym>UFS</acronym> or
	    <acronym>ZFS</acronym>.  This will provide long filename
	    support, improvement in performance, and stability.  If
	    the drive will be used by other operating systems, a more
	    portable choice, such as msdosfs, is better.</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>dd if=/dev/zero of=/dev/da0 count=2</userinput>
<prompt>#</prompt> <userinput>gpart create -s GPT /dev/da0</userinput>
<prompt>#</prompt> <userinput>gpart add -t freebsd-ufs /dev/da0</userinput></screen>

	  <para xml:lang="en">Finally, create a new file system:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>newfs /dev/da0p1</userinput></screen>

	  <para xml:lang="en">and mount it:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>mount /dev/da0s1 /mnt</userinput></screen>

	  <para xml:lang="en">It is a good idea to add a line to
	    <filename>/etc/fstab</filename> (see <citerefentry><refentrytitle>fstab</refentrytitle><manvolnum>5</manvolnum></citerefentry>) so you
	    can just type <command>mount /mnt</command> in the
	    future:</para>

	  <programlisting xml:lang="en">/dev/da0p1 /mnt ufs rw,noauto 0 0</programlisting>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="mount-cd-superblock">
	  <para xml:lang="en">Why do I get <errorname>Incorrect super
	      block</errorname> when mounting a CD?</para>
	</question>

	<answer>
	  <para xml:lang="en">The type of device to mount must be specified.  This
	    is described in the Handbook section on <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/creating-cds.html#mounting-cd">Using
	      Data CDs</link>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="cdrom-not-configured">
	  <para xml:lang="en">Why do I get <errorname>Device not
	      configured</errorname> when mounting a CD?</para>
	</question>

	<answer>
	  <para xml:lang="en">This generally means that there is no CD in the
	    drive, or the drive is not visible on the bus.
	    Refer to the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/creating-cds.html#mounting-cd">Using
	      Data CDs</link> section of the Handbook for a detailed
	    discussion of this issue.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="cdrom-unicode-filenames">
	  <para xml:lang="en">Why do all non-English characters in filenames show up
	    as <quote>?</quote> on my CDs when mounted in FreeBSD?</para>
	</question>

	<answer>
	  <para xml:lang="en">The CD probably uses the <quote>Joliet</quote>
	    extension for storing information about files and
	    directories.  This is discussed in the Handbook section on
	   <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/creating-cds.html#mounting-cd">Using
	      Data CD-ROMs</link>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="burncd-isofs">
	  <para xml:lang="en">A CD burned under FreeBSD cannot be read
	    under any other operating system.  Why?</para>
	</question>

	<answer>
	  <para xml:lang="en">This means a raw file was burned to the CD, rather
	    than creating an ISO 9660 file system.  Take a look
	    at the Handbook section on <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/creating-cds.html#mounting-cd">Using
	      Data <acronym>CD</acronym>s</link>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="copy-cd">
	  <para xml:lang="en">How can I create an image of a data CD?</para>
	</question>

	<answer>
	  <para xml:lang="en">This is discussed in the Handbook section on <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/creating-cds.html#mkisofs">Writing
	      Data to an <acronym>ISO</acronym> File System</link>.
	    For more on working with CD-ROMs, see the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/creating-cds.html">Creating
	      CDs Section</link> in the Storage chapter in the
	    Handbook.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="mount-audio-CD">
	  <para xml:lang="en">Why can I not <command>mount</command> an audio
	    CD?</para>
	</question>

	<answer>
	  <para xml:lang="en">Trying to mount an audio CD will produce an error
	    like <errorname>cd9660: /dev/cd0: Invalid
	      argument</errorname>.  This is because
	    <command>mount</command> only works on file systems.
	    Audio CDs do not have file systems; they just have data.
	    Instead, use a program that reads audio CDs, such as the
	    <package>audio/xmcd</package> package or port.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="multi-session-CD">
	  <para xml:lang="en">How do I <command>mount</command> a multi-session
	    CD?</para>
	</question>

	<answer>
	  <para xml:lang="en">By default, <citerefentry><refentrytitle>mount</refentrytitle><manvolnum>8</manvolnum></citerefentry> will attempt to mount the
	    last data track (session) of a CD.  To
	    load an earlier session, use the
	    <option>-s</option> command line argument.  Refer to
	    <citerefentry><refentrytitle>mount_cd9660</refentrytitle><manvolnum>8</manvolnum></citerefentry> for specific examples.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="user-floppymount">
	  <para xml:lang="en">How do I let ordinary users mount CD-ROMs, DVDs,
	    USB drives, and other removable media?</para>
	</question>

	<answer>
	  <para xml:lang="en">As <systemitem class="username">root</systemitem> set
	    the sysctl variable <varname>vfs.usermount</varname> to
	    <literal>1</literal>.</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>sysctl vfs.usermount=1</userinput></screen>

	  <para xml:lang="en">To make this persist across reboots, add the line
	    <literal>vfs.usermount=1</literal> to
	    <filename>/etc/sysctl.conf</filename> so that it is reset
	    at system boot time.</para>

	  <para xml:lang="en">Users can only mount devices they have read
	    permissions to.  To allow users to mount a device
	    permissions must be set in
	    <filename>/etc/devfs.conf</filename>.</para>

	  <para xml:lang="en">For example, to allow users to mount the first USB
	    drive add:</para>

	  <programlisting xml:lang="en"># Allow all users to mount a USB drive.
	    own       /dev/da0       root:operator
	    perm      /dev/da0       0666</programlisting>

	  <para xml:lang="en">All users can now mount devices they could read onto a
	    directory that they own:</para>

	  <screen xml:lang="en"><prompt>%</prompt> <userinput>mkdir ~/my-mount-point</userinput>
<prompt>%</prompt> <userinput>mount -t msdosfs /dev/da0 ~/my-mount-point</userinput></screen>

	  <para xml:lang="en">Unmounting the device is simple:</para>

	  <screen xml:lang="en"><prompt>%</prompt> <userinput>umount ~/my-mount-point</userinput></screen>

	  <para xml:lang="en">Enabling <varname>vfs.usermount</varname>, however,
	    has negative security implications.  A better way to
	    access <trademark class="registered">MS-DOS</trademark> formatted media is to use the
	    <package>emulators/mtools</package> package in the Ports
	    Collection.</para>

	  <note>
	    <para xml:lang="en">The device name used in the previous examples must
	      be changed according to the configuration.</para>
	  </note>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="du-vs-df">
	  <para xml:lang="en">The <command>du</command> and <command>df</command>
	    commands show different amounts of disk space available.
	    What is going on?</para>
	</question>

	<answer>
	  <para xml:lang="en">This is due to how these commands actually work.
	    <command>du</command> goes through the directory tree,
	    measures how large each file is, and presents the totals.
	    <command>df</command> just asks the file system how much
	    space it has left.  They seem to be the same thing, but a
	    file without a directory entry will affect
	    <command>df</command> but not
	    <command>du</command>.</para>

	  <para xml:lang="en">When a program is using a file, and the file is
	    deleted, the file is not really removed from the file
	    system until the program stops using it.  The file is
	    immediately deleted from the directory listing, however.
	    As an example, consider a file large enough
	    to affect the output of
	    <command>du</command> and <command>df</command>.  A
	    file being viewed with <command>more</command> can be
	    deleted wihout causing an error.
	    The entry is
	    removed from the directory so no other program or user can
	    access it.  However, <command>du</command> shows that it
	    is gone as it has walked the directory tree and the
	    file is not listed.  <command>df</command> shows that it
	    is still there, as the file system knows that
	    <command>more</command> is still using that space.  Once
	    the <command>more</command> session ends,
	    <command>du</command> and <command>df</command> will
	    agree.</para>

	  <para xml:lang="en">This situation is common on web servers.  Many people
	    set up a FreeBSD web server and forget to rotate the log
	    files.  The access log fills up <filename>/var</filename>.
	    The new administrator deletes the file, but the system
	    still complains that the partition is full.  Stopping and
	    restarting the web server program would free the file,
	    allowing the system to release the disk space.  To prevent
	    this from happening, set up <citerefentry><refentrytitle>newsyslog</refentrytitle><manvolnum>8</manvolnum></citerefentry>.</para>

	  <para xml:lang="en">Note that Soft Updates can delay the freeing of disk
	    space and it can take up to 30 seconds for the
	    change to be visible.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="add-swap-space">
	  <para xml:lang="en">How can I add more swap space?</para>
	</question>

	<answer>
	  <para xml:lang="en">This section <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/adding-swap-space.html">of
	      the Handbook</link> describes how to do this.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="manufacturer-disk-size">
	  <para xml:lang="en">Why does FreeBSD see my disk as smaller than the
	    manufacturer says it is?</para>
	</question>

	<answer>
	  <para xml:lang="en">Disk manufacturers calculate gigabytes as a billion
	    bytes each, whereas FreeBSD calculates them as
	    1,073,741,824 bytes each.  This explains why, for
	    example, FreeBSD's boot messages will report a disk that
	    supposedly has 80 GB as holding
	    76,319 MB.</para>

	  <para xml:lang="en">Also note that FreeBSD will (by default) <link linkend="disk-more-than-full">reserve</link> 8% of the
	    disk space.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="disk-more-than-full">
	  <para xml:lang="en">How is it possible for a partition to be more than
	    100% full?</para>
	</question>

	<answer>
	  <para xml:lang="en">A portion of each UFS partition (8%, by default) is
	    reserved for use by the operating system and the
	    <systemitem class="username">root</systemitem> user.
	    <citerefentry><refentrytitle>df</refentrytitle><manvolnum>1</manvolnum></citerefentry> does not count that space when calculating the
	    <literal>Capacity</literal> column, so it can exceed 100%.
	    Notice that the <literal>Blocks</literal>
	    column is always greater than the sum of the
	    <literal>Used</literal> and <literal>Avail</literal>
	    columns, usually by a factor of 8%.</para>

	  <para xml:lang="en">For more details, look up <option>-m</option> in
	    <citerefentry><refentrytitle>tunefs</refentrytitle><manvolnum>8</manvolnum></citerefentry>.</para>
	</answer>
      </qandaentry>

    </qandaset>
  </chapter>

  <chapter xml:id="all-about-zfs">
    <title xml:lang="en">ZFS</title>

    <qandaset>
      <qandaentry>
	<question xml:id="how-much-ram-for-zfs">
	  <para>使用 ZFS 最少需要多少記憶體？</para>
	</question>

	<answer>
	  <para>至少需要 4GB 的記憶體才能跑得順，但不同的工作負載可能會造成相當大的差異。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="what-is-zil">
	  <para>ZIL 是什麼而又何時會被使用？</para>
	</question>

	<answer>
	  <para>The <acronym>ZIL</acronym> (<acronym>ZFS</acronym> 動向日誌) 是一個紀錄日誌，用以實現系統當機時 POSIX 寫入保證的語義，多個正常 ZFS 寫入動作會被分成多個交易處理群組，並在交易處理群組被填滿時寫入磁碟 (<quote>Transaction Group Commit</quote>)。然而像 <citerefentry><refentrytitle>fsync</refentrytitle><manvolnum>2</manvolnum></citerefentry> 這樣的系統呼叫，會要求該系統呼叫在返回前，能承諾已將資料寫入磁碟，ZIL 就是用來紀錄確認為已執行寫入的資料，但其實尚未存在於磁碟上，即尚未完成交易處理，交易處理群組具有時間戳記，在系統當機後，找到 ZIL 最後一個有效的時間戳記，即將遺失的資料再舍併至磁碟上。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="need-ssd-for-zil">
	  <para>我需要用固態硬碟 (SSD) 來存 ZIL 嗎？</para>
	</question>

	<answer>
	  <para>ZFS 預設將 ZIL 儲存在包含所有資料的 zpool 中，如果應用程式的寫入負載很重，將 ZIL 儲存在同步速度非常快的獨立設備中，藉由循序寫入效能的提高可以改善整個系統的效能，對於其他類型的工作負載， 固態硬碟就不會有太大的助益。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="what-is-l2arc">
	  <para>L2ARC 是什麼？</para>
	</question>

	<answer>
	  <para>The <acronym>L2ARC</acronym> (Second Level Adaptive Replacement Cache) 是存於快速儲存設備 <acronym>SSD</acronym> 上的讀取快取，此快取在重新開機後會消失，請注意記憶體是第一層的快取，只有在記憶體不足的情況下才需要 L2ARC。</para>

	  <para>L2ARC 需要 ARC 的空間來為其製作索引，因此，有一種反常的情況，如果有一種工作集 (working set) 可以完美地剛好放入 ARC，一旦系統使用 L2ARC，該工作集的運作將不再完美，因為 ARC 需要用一部分空間來保存 L2ARC 的索引，以至於必須將工作集的一部分存入比記憶體慢的 L2ARC。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="should-enable-dedup">
	  <para>建議啟用去冗餘 (deduplication)  嗎？</para>
	</question>

	<answer>
	  <para>一般而言，不建議這麼做。</para>

	  <para>去冗餘需要相當多的記憶體，而且會讓讀寫磁碟所需的時間變長，除非磁碟上儲存了非常多重複的資料，例如：虛擬機的映像檔或者是使用者的備份資料，否則開啟去冗餘可能弊大於利。另一個需要考量的狀況是：啟用去冗餘功能之後再將其關閉，無法將磁碟上去冗餘的狀態立即逆轉，必須等到下次修改了之前被去冗餘的資料，變更的區塊才會再被複製一份。</para>

	  <para>去冗餘也可能會導致某些非預期的情況，特別是刪除檔案時可能會慢很多。</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="zpool-fully-full">
	  <para>在我建立的 ZFS pool 中無法刪除和新增檔案，應該怎麼修復？</para>
	</question>

	<answer>
	  <para>這很有可能是該 pool 的空間使用率已達 100% 滿了，因 ZFS 需要儲存空間以將紀錄交易處理的輔助資料 (metadata) 寫入，為了讓該 pool 回復至可用狀態，必須用檔案切除的方法 (truncate 命令) 刪除不重要的檔案：</para>

	  <screen><prompt>%</prompt> <userinput>truncate -s 0 unimportant-file</userinput></screen>

	  <para>因為檔案切除不需要建立交易處理紀錄，並能釋放出可使用的磁碟區塊。</para>

	  <note>
	    <para>如果系統曾進行過額外的 ZFS dataset 調校，例如：去冗餘，釋放出來的空間也許不會立即可得。</para>
	  </note>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="zfs-ssd-trim">
	  <para>ZFS 支援固態硬碟 (SSD) 的 TRIM 功能嗎？</para>
	</question>

	<answer>
	  <para>自 FreeBSD 10-CURRENT 修定 r<revnumber>240868</revnumber> 開始，就支援 ZFS TRIM。ZFS TRIM 的支援分別已在 r<revnumber>252162</revnumber> 和 r<revnumber>251419</revnumber> 的修訂，加進所有 FreeBSD-STABLE 分支。</para>

	  <para>ZFS TRIM 預設就已開啟，也可以將其關閉，只要加入一行設定到  <filename>/etc/sysctl.conf</filename>:</para>

	  <programlisting>vfs.zfs.trim.enabled=0</programlisting>

	  <note>
	    <para>ZFS TRIM 也可能某些設定中會無效，例如：在採用 GELI 裝置上的 ZFS 檔案系統。</para>
	  </note>
	</answer>
      </qandaentry>
    </qandaset>
  </chapter>

  <chapter xml:id="admin">
    <title xml:lang="en">System Administration</title>

    <qandaset>
      <qandaentry>
	<question xml:id="startup-config-files">
	  <para xml:lang="en">Where are the system start-up configuration
	    files?</para>
	</question>

	<answer>
	  <para xml:lang="en">The primary configuration file is
	    <filename>/etc/defaults/rc.conf</filename> which is
	    described in <citerefentry><refentrytitle>rc.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry>.  System startup scripts
	    such as <filename>/etc/rc</filename> and
	    <filename>/etc/rc.d</filename>, which are described in
	    <citerefentry><refentrytitle>rc</refentrytitle><manvolnum>8</manvolnum></citerefentry>, include this file.  <emphasis>Do not edit this
	      file!</emphasis>  Instead, to edit an entry in
	    <filename>/etc/defaults/rc.conf</filename>, copy the line
	    into <filename>/etc/rc.conf</filename> and change it
	    there.</para>

	  <para xml:lang="en">For example, if to start <citerefentry><refentrytitle>named</refentrytitle><manvolnum>8</manvolnum></citerefentry>, the
	    included DNS server:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>echo 'named_enable="YES"' &gt;&gt; /etc/rc.conf</userinput></screen>

	  <para xml:lang="en">To start up local services, place shell scripts in the
	    <filename>/usr/local/etc/rc.d</filename> directory.  These
	    shell scripts should be set executable, the default file
	    mode is <literal>555</literal>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="adding-users">
	  <para xml:lang="en">How do I add a user easily?</para>
	</question>

	<answer>
	  <para xml:lang="en">Use the <citerefentry><refentrytitle>adduser</refentrytitle><manvolnum>8</manvolnum></citerefentry> command, or the <citerefentry><refentrytitle>pw</refentrytitle><manvolnum>8</manvolnum></citerefentry>
	    command for more complicated situations.</para>

	  <para xml:lang="en">To remove the user, use the <citerefentry><refentrytitle>rmuser</refentrytitle><manvolnum>8</manvolnum></citerefentry> command or,
	    if necessary, <citerefentry><refentrytitle>pw</refentrytitle><manvolnum>8</manvolnum></citerefentry>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="root-not-found-cron-errors">
	  <para xml:lang="en">Why do I keep getting messages like <errorname>root:
	      not found</errorname> after editing
	    <filename>/etc/crontab</filename>?</para>
	</question>

	<answer>
	  <para xml:lang="en">This is normally caused by editing the system crontab.
	    This is not the correct way to do things as the system
	    crontab has a different format to the per-user crontabs.
	    The system
	    crontab has an extra field, specifying which user to run
	    the command as.  <citerefentry><refentrytitle>cron</refentrytitle><manvolnum>8</manvolnum></citerefentry> assumes this user is the
	    first word of the command to execute.  Since no such
	    command exists, this error message is displayed.</para>

	  <para xml:lang="en">To delete the extra, incorrect crontab:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>crontab -r</userinput></screen>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="su-wheel-group">
	  <para xml:lang="en">Why do I get the error, <errorname>you are not in the
	      correct group to su root</errorname> when I try to
	    <command>su</command> to <systemitem class="username">root</systemitem>?</para>
	</question>

	<answer>
	  <para xml:lang="en">This is a security feature.  In order to
	    <command>su</command> to
	    <systemitem class="username">root</systemitem>, or any
	    other account with superuser privileges, the user account
	    must be a member of the
	    <systemitem class="groupname">wheel</systemitem> group.
	    If this feature were not there, anybody with an
	    account on a system who also found out <systemitem class="username">root</systemitem>'s password would be
	    able to gain superuser level access to the system.</para>

	  <para xml:lang="en">To allow someone to <command>su</command> to
	    <systemitem class="username">root</systemitem>, put
	    them in the <systemitem class="groupname">wheel</systemitem> group using
	    <command>pw</command>:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>pw groupmod wheel -m lisa</userinput></screen>

	  <para xml:lang="en">The above example will add user <systemitem class="username">lisa</systemitem> to the group
	    <systemitem class="groupname">wheel</systemitem>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="rcconf-readonly">
	  <para xml:lang="en">I made a mistake in <filename>rc.conf</filename>, or
	    another startup file, and now I cannot edit it because the
	    file system is read-only.  What should I do?</para>
	</question>

	<answer>
	  <para xml:lang="en">Restart the system using <userinput>boot
	      -s</userinput> at the loader prompt to enter single-user
	    mode.  When prompted for a shell pathname, press
	    <keycap>Enter</keycap> and run <command>mount -urw
	      /</command> to re-mount the root file system in
	    read/write mode.  You may also need to run <command>mount
	      -a -t ufs</command> to mount the file system where your
	    favorite editor is defined.  If that editor is on a
	    network file system, either configure the network manually
	    before mounting the network file systems, or use an editor
	    which resides on a local file system, such as
	    <citerefentry><refentrytitle>ed</refentrytitle><manvolnum>1</manvolnum></citerefentry>.</para>

	  <para xml:lang="en">In order to use a full screen editor such as
	    <citerefentry><refentrytitle>vi</refentrytitle><manvolnum>1</manvolnum></citerefentry> or <citerefentry vendor="ports"><refentrytitle>emacs</refentrytitle><manvolnum>1</manvolnum></citerefentry>, run
	    <command>export TERM=xterm</command>
	    so that these editors can load the correct data from the
	    <citerefentry><refentrytitle>termcap</refentrytitle><manvolnum>5</manvolnum></citerefentry> database.</para>

	  <para xml:lang="en">After performing these steps, edit
	    <filename>/etc/rc.conf</filename> to
	    fix the syntax error.  The error message displayed
	    immediately after the kernel boot messages should indicate
	    the number of the line in the file which is at
	    fault.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="printer-setup">
	  <para xml:lang="en">Why am I having trouble setting up my printer?</para>
	</question>

	<answer>
	  <para xml:lang="en">See the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/printing.html">Handbook
	      entry on printing</link> for troubleshooting
	    tips.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="keyboard-mappings">
	  <para xml:lang="en">How can I correct the keyboard mappings for my
	    system?</para>
	</question>

	<answer>
	  <para xml:lang="en">Refer to the Handbook section on <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/using-localization.html">using
	      localization</link>, specifically the section on <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/using-localization.html#setting-console">console
	      setup</link>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="user-quotas">
	  <para xml:lang="en">Why can I not get user quotas to work properly?</para>
	</question>

	<answer>
	  <orderedlist>
	    <listitem>
	      <para xml:lang="en">It is possible that the kernel is not configured
		to use quotas.  In this case,
		add the following line to the kernel configuration
		file and recompile the kernel:</para>

	      <programlisting xml:lang="en">options QUOTA</programlisting>

	      <para xml:lang="en">Refer to the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/quotas.html">Handbook
		  entry on quotas</link> for full details.</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en">Do not turn on quotas on
		<filename>/</filename>.</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en">Put the quota file on the file system that the
		quotas are to be enforced on:</para>

	      <informaltable frame="none" pgwide="1">
		<tgroup cols="2">
		  <thead>
		    <row>
		      <entry xml:lang="en">File System</entry>

		      <entry xml:lang="en">Quota file</entry>
		    </row>
		  </thead>

		  <tbody>
		    <row>
		      <entry xml:lang="en"><filename>/usr</filename></entry>

		      <entry xml:lang="en"><filename>/usr/admin/quotas</filename></entry>
		    </row>

		    <row>
		      <entry xml:lang="en"><filename>/home</filename></entry>

		      <entry xml:lang="en"><filename>/home/admin/quotas</filename></entry>
		    </row>

		    <row>
		      <entry xml:lang="en">…</entry>

		      <entry xml:lang="en">…</entry>
		    </row>
		  </tbody>
		</tgroup>
	      </informaltable>
	    </listitem>
	  </orderedlist>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="sysv-ipc">
	  <para xml:lang="en">Does FreeBSD support System V IPC primitives?</para>
	</question>

	<answer>
	  <para xml:lang="en">Yes, FreeBSD supports System V-style IPC, including
	    shared memory, messages and semaphores, in the
	    <filename>GENERIC</filename> kernel.  With a custom
	    kernel, support may be loaded with the
	    <filename>sysvshm.ko</filename>,
	    <filename>sysvsem.ko</filename> and
	    <filename>sysvmsg.ko</filename> kernel modules, or
	    enabled in the custom kernel by adding the following lines
	    to the kernel configuration file:</para>

	  <programlisting xml:lang="en">options    SYSVSHM          # enable shared memory
options    SYSVSEM          # enable for semaphores
options    SYSVMSG          # enable for messaging</programlisting>

	  <para xml:lang="en">Recompile and install the kernel.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="sendmail-alternative">
	  <para xml:lang="en">What other mail-server software can I use instead of
	    <application>Sendmail</application>?</para>
	</question>

	<answer>
	  <para xml:lang="en">The <link xlink:href="http://www.sendmail.org/"><application>Sendmail</application></link>
	    server is the default mail-server software for FreeBSD, but
	    it can be replaced with another
	    MTA installed from the Ports Collection.  Available ports
	    include <package>mail/exim</package>,
	    <package>mail/postfix</package>, and
	    <package>mail/qmail</package>.  Search the mailing lists
	    for discussions regarding the advantages and disadvantages
	    of the available MTAs.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="forgot-root-pw">
	  <para xml:lang="en">I have forgotten the <systemitem class="username">root</systemitem> password!  What do I
	    do?</para>
	</question>

	<answer>
	  <para xml:lang="en">Do not panic!  Restart the system, type
	    <userinput>boot -s</userinput> at the
	    <literal>Boot:</literal> prompt to enter single-user mode.
	    At the question about the shell to use, hit
	    <keycap>Enter</keycap> which will display a
	    <prompt>#</prompt> prompt.  Enter <command>mount
	      -urw /</command> to remount the root file system
	    read/write, then run <command>mount -a</command> to
	    remount all the file systems.  Run <command>passwd
	      root</command> to change the <systemitem class="username">root</systemitem> password then run
	    <citerefentry><refentrytitle>exit</refentrytitle><manvolnum>1</manvolnum></citerefentry> to continue booting.</para>

	  <note>
	    <para xml:lang="en">If you are still prompted to give the <systemitem class="username">root</systemitem> password when
	      entering the single-user mode, it means that the console
	      has been marked as <literal>insecure</literal> in
	      <filename>/etc/ttys</filename>.  In this case, it will
	      be required to boot from a FreeBSD installation disk,
	      choose the <guimenuitem>Live CD</guimenuitem> or
	      <guimenuitem>Shell</guimenuitem> at the beginning of the
	      install process and issue the commands mentioned above.
	      Mount the specific partition in this
	      case and then chroot to it.  For example, replace
	      <command>mount -urw /</command> with
	      <command>mount /dev/ada0p1 /mnt; chroot /mnt</command>
	      for a system on
	      <replaceable>ada0p1</replaceable>.</para>
	  </note>

	  <note>
	    <para xml:lang="en">If the root partition cannot be mounted from
	      single-user mode, it is possible that the partitions are
	      encrypted and it is impossible to mount them without the
	      access keys.  For more information see the section
	      about encrypted disks in the FreeBSD <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/disks-encrypting.html">Handbook</link>.</para>
	  </note>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="CAD-reboot">
	  <para xml:lang="en">How do I keep <keycombo action="simul"><keycap>Control</keycap><keycap>Alt</keycap><keycap>Delete</keycap></keycombo>
	    from rebooting the system?</para>
	</question>

	<answer>
	  <para xml:lang="en">When using <citerefentry><refentrytitle>syscons</refentrytitle><manvolnum>4</manvolnum></citerefentry>, the default console
	    driver, build and install a new kernel with this line in
	    the configuration file:</para>

	  <programlisting xml:lang="en">options SC_DISABLE_REBOOT</programlisting>

	  <para xml:lang="en">This can also be done by setting the following
	    <citerefentry><refentrytitle>sysctl</refentrytitle><manvolnum>8</manvolnum></citerefentry> which does not require a reboot or kernel
	    recompile:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>sysctl hw.syscons.kbd_reboot=0</userinput></screen>

	  <note>
	    <para xml:lang="en">The above two methods are exclusive:  The
	      <citerefentry><refentrytitle>sysctl</refentrytitle><manvolnum>8</manvolnum></citerefentry> does not exist if the kernel is compiled
	      with <literal>SC_DISABLE_REBOOT</literal>.</para>
	  </note>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="dos-to-unix-txt">
	  <para xml:lang="en">How do I reformat DOS text files to <trademark class="registered">UNIX</trademark>
	    ones?</para>
	</question>

	<answer>
	  <para xml:lang="en">Use this <citerefentry><refentrytitle>perl</refentrytitle><manvolnum>1</manvolnum></citerefentry> command:</para>

	  <screen xml:lang="en"><prompt>%</prompt> <userinput>perl -i.bak -npe 's/\r\n/\n/g' file(s)</userinput></screen>

	  <para xml:lang="en">where <replaceable>file(s)</replaceable> is one or
	    more files to process.  The modification is done in-place,
	    with the original file stored with a
	    <filename>.bak</filename> extension.</para>

	  <para xml:lang="en">Alternatively, use <citerefentry><refentrytitle>tr</refentrytitle><manvolnum>1</manvolnum></citerefentry>:</para>

	  <screen xml:lang="en"><prompt>%</prompt> <userinput>tr -d '\r' &lt; dos-text-file &gt; unix-file</userinput></screen>

	  <para xml:lang="en"><replaceable>dos-text-file</replaceable> is the file
	    containing DOS text while
	    <replaceable>unix-file</replaceable> will contain the
	    converted output.  This can be quite a bit faster than
	    using <command>perl</command>.</para>

	  <para xml:lang="en">Yet another way to reformat DOS text files is to use
	    the <package>converters/dosunix</package> port from the
	    Ports Collection.  Consult its documentation about the
	    details.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="reread-rc">
	  <para xml:lang="en">How do I re-read <filename>/etc/rc.conf</filename> and
	    re-start <filename>/etc/rc</filename> without a
	    reboot?</para>
	</question>

	<answer>
	  <para xml:lang="en">Go into single-user mode and then back to multi-user
	    mode:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>shutdown now</userinput>
<prompt>#</prompt> <userinput>return</userinput>
<prompt>#</prompt> <userinput>exit</userinput></screen>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="release-candidate">
	  <para xml:lang="en">I tried to update my system to the latest
	    <emphasis>-STABLE</emphasis>, but got
	    <emphasis>-BETA<replaceable>x</replaceable></emphasis>,
	    <emphasis>-RC</emphasis> or
	    <emphasis>-PRERELEASE</emphasis>!  What is going
	    on?</para>
	</question>

	<answer>
	  <para xml:lang="en">Short answer: it is just a name.
	    <emphasis>RC</emphasis> stands for <quote>Release
	      Candidate</quote>.  It signifies that a release is
	    imminent.  In FreeBSD, <emphasis>-PRERELEASE</emphasis> is
	    typically synonymous with the code freeze before a
	    release.  (For some releases, the
	    <emphasis>-BETA</emphasis> label was used in the same way
	    as <emphasis>-PRERELEASE</emphasis>.)</para>

	  <para xml:lang="en">Long answer: FreeBSD derives its releases from one of two
	    places.  Major, dot-zero, releases, such as 9.0-RELEASE
	    are branched from the head of the development stream,
	    commonly referred to as <link linkend="current">-CURRENT</link>.  Minor releases, such
	    as 6.3-RELEASE or 5.2-RELEASE, have been snapshots of the
	    active <link linkend="stable">-STABLE</link> branch.
	    Starting with 4.3-RELEASE, each release also now has its
	    own branch which can be tracked by people requiring an
	    extremely conservative rate of development (typically only
	    security advisories).</para>

	  <para xml:lang="en">When a release is about to be made, the branch from
	    which it will be derived from has to undergo a certain
	    process.  Part of this process is a code freeze.  When a
	    code freeze is initiated, the name of the branch is
	    changed to reflect that it is about to become a release.
	    For example, if the branch used to be called 6.2-STABLE,
	    its name will be changed to 6.3-PRERELEASE to signify the
	    code freeze and signify that extra pre-release testing
	    should be happening.  Bug fixes can still be committed to
	    be part of the release.  When the source code is in shape
	    for the release the name will be changed to 6.3-RC to
	    signify that a release is about to be made from it.  Once
	    in the RC stage, only the most critical bugs found can be
	    fixed.  Once the release (6.3-RELEASE in this example) and
	    release branch have been made, the branch will be renamed
	    to 6.3-STABLE.</para>

	  <para xml:lang="en">For more information on version numbers and the
	    various Subversion branches, refer to the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/articles/releng/article.html">Release
	      Engineering</link> article.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="kernel-chflag-failure">
	  <para xml:lang="en">I tried to install a new kernel, and the
	    <citerefentry><refentrytitle>chflags</refentrytitle><manvolnum>1</manvolnum></citerefentry> failed.  How do I get around this?</para>
	</question>

	<answer>
	  <para xml:lang="en">Short answer: the security level is
	    greater than 0.  Reboot directly to single-user mode to
	    install the kernel.</para>

	  <para xml:lang="en">Long answer: FreeBSD disallows changing system flags at
	    security levels greater than 0.  To check the current
	    security level:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>sysctl kern.securelevel</userinput></screen>

	  <para xml:lang="en">The security level cannot be lowered in multi-user
	    mode, so boot to single-user mode to install the kernel,
	    or change the security level in
	    <filename>/etc/rc.conf</filename> then reboot.  See the
	    <citerefentry><refentrytitle>init</refentrytitle><manvolnum>8</manvolnum></citerefentry> manual page for details on
	    <literal>securelevel</literal>, and see
	    <filename>/etc/defaults/rc.conf</filename> and the
	    <citerefentry><refentrytitle>rc.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry> manual page for more information on
	    <filename>rc.conf</filename>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="kernel-securelevel-time">
	  <para xml:lang="en">I cannot change the time on my system by more than one
	    second!  How do I get around this?</para>
	</question>

	<answer>
	  <para xml:lang="en">Short answer: the system is at a security level
	    greater than 1.  Reboot directly to single-user mode to
	    change the date.</para>

	  <para xml:lang="en">Long answer: FreeBSD disallows changing the time by more
	    that one second at security levels greater than 1.  To
	    check the security level:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>sysctl kern.securelevel</userinput></screen>

	  <para xml:lang="en">The security level cannot be lowered in multi-user
	    mode.  Either boot to single-user mode to change the date
	    or change the security level in
	    <filename>/etc/rc.conf</filename> and reboot.  See the
	    <citerefentry><refentrytitle>init</refentrytitle><manvolnum>8</manvolnum></citerefentry> manual page for details on
	    <literal>securelevel</literal>, and see
	    <filename>/etc/defaults/rc.conf</filename> and the
	    <citerefentry><refentrytitle>rc.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry> manual page for more information on
	    <filename>rc.conf</filename>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="statd-mem-leak">
	  <para xml:lang="en">Why is <command>rpc.statd</command> using 256 MB
	    of memory?</para>
	</question>

	<answer>
	  <para xml:lang="en">No, there is no memory leak, and it is not using
	    256 MB of memory.  For convenience,
	    <command>rpc.statd</command> maps an obscene amount of
	    memory into its address space.  There is nothing terribly
	    wrong with this from a technical standpoint; it just
	    throws off things like <citerefentry><refentrytitle>top</refentrytitle><manvolnum>1</manvolnum></citerefentry> and <citerefentry><refentrytitle>ps</refentrytitle><manvolnum>1</manvolnum></citerefentry>.</para>

	  <para xml:lang="en"><citerefentry><refentrytitle>rpc.statd</refentrytitle><manvolnum>8</manvolnum></citerefentry> maps its status file (resident on
	    <filename>/var</filename>) into its address space; to save
	    worrying about remapping the status file later when it
	    needs to grow, it maps the status file with a generous
	    size.  This is very evident from the source code, where
	    one can see that the length argument to <citerefentry><refentrytitle>mmap</refentrytitle><manvolnum>2</manvolnum></citerefentry> is
	    <literal>0x10000000</literal>, or one sixteenth of the
	    address space on an IA32, or exactly 256 MB.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="unsetting-schg">
	  <para xml:lang="en">Why can I not unset the <literal>schg</literal> file
	    flag?</para>
	</question>

	<answer>
	  <para xml:lang="en">The system is running at securelevel greater than 0.
	    Lower the securelevel and try again.  For more
	    information, see <link linkend="securelevel">the
	      <acronym>FAQ</acronym> entry on securelevel</link> and
	    the <citerefentry><refentrytitle>init</refentrytitle><manvolnum>8</manvolnum></citerefentry> manual page.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="vnlru">
	  <para xml:lang="en">What is <literal>vnlru</literal>?</para>
	</question>

	<answer>
	  <para xml:lang="en"><literal>vnlru</literal> flushes and frees vnodes when
	    the system hits the <varname>kern.maxvnodes</varname>
	    limit.  This kernel thread sits mostly idle, and only
	    activates when there is a huge amount of RAM and users are
	    accessing tens of thousands of tiny files.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="top-memory-states">
	  <para xml:lang="en">What do the various memory states displayed by
	    <command>top</command> mean?</para>
	</question>

	<!-- Provided by John Dyson via Usenet -->
	<answer>
	  <itemizedlist>
	    <listitem>
	      <para xml:lang="en"><literal>Active</literal>: pages recently
		statistically used.</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en"><literal>Inactive</literal>: pages recently
		statistically unused.</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en"><literal>Cache</literal>: (most often) pages that
		have percolated from inactive to a status where they
		maintain their data, but can often be immediately
		reused (either with their old association, or reused
		with a new association).  There can be certain
		immediate transitions from <literal>active</literal>
		to <literal>cache</literal> state if the page is known
		to be clean (unmodified), but that transition is a
		matter of policy, depending upon the algorithm choice
		of the VM system maintainer.</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en"><literal>Free</literal>: pages without data
		content, and can be immediately used in certain
		circumstances where cache pages might be ineligible.
		Free pages can be reused at interrupt or process
		state.</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en"><literal>Wired</literal>: pages that are fixed
		into memory, usually for kernel purposes, but also
		sometimes for special use in processes.</para>
	    </listitem>
	  </itemizedlist>

	  <para xml:lang="en">Pages are most often written to disk (sort of a VM
	    sync) when they are in the inactive state, but active
	    pages can also be synced.  This depends upon the CPU
	    tracking of the modified bit being available, and in
	    certain situations there can be an advantage for a block
	    of VM pages to be synced, whether they are active or
	    inactive.  In most common cases, it is best to think of
	    the inactive queue to be a queue of relatively unused
	    pages that might or might not be in the process of being
	    written to disk.  Cached pages are already synced, not
	    mapped, but available for immediate process use with their
	    old association or with a new association.  Free pages are
	    available at interrupt level, but cached or free pages can
	    be used at process state for reuse.  Cache pages are not
	    adequately locked to be available at interrupt
	    level.</para>

	  <para xml:lang="en">There are some other flags (e.g., busy flag or busy
	    count) that might modify some of the described
	    rules.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="free-memory-amount">
	  <para xml:lang="en">How much free memory is available?</para>
	</question>

	<!-- Provided by John Dyson via Usenet -->
	<answer>
	  <para xml:lang="en">There are a couple of kinds of <quote>free
	      memory</quote>.  One kind is the amount of memory
	    immediately available without paging anything else out.
	    That is approximately the size of cache queue + size of
	    free queue (with a derating factor, depending upon system
	    tuning).  Another kind of <quote>free memory</quote> is
	    the total amount of <acronym>VM</acronym> space.  That can
	    be complex, but is dependent upon the amount of swap space
	    and memory.  Other kinds of <quote>free memory</quote>
	    descriptions are also possible, but it is relatively
	    useless to define these, but rather it is important to
	    make sure that the paging rate is kept low, and to avoid
	    running out of swap space.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="var-empty">
	  <para xml:lang="en">What is <filename>/var/empty</filename>?</para>
	</question>

	<answer>
	  <para xml:lang="en"><filename>/var/empty</filename> is a directory that
	    the <citerefentry><refentrytitle>sshd</refentrytitle><manvolnum>8</manvolnum></citerefentry> program uses when performing privilege
	    separation.  The <filename>/var/empty</filename>
	    directory is empty, owned by <systemitem class="username">root</systemitem> and has the
	    <literal>schg</literal> flag set.  This directory should
	    not be deleted.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="newsyslog-expectations">
	  <para xml:lang="en">I just changed
	    <filename>/etc/newsyslog.conf</filename>.  How can I check
	    if it does what I expect?</para>
	</question>

	<answer>
	  <para xml:lang="en">To see what <citerefentry><refentrytitle>newsyslog</refentrytitle><manvolnum>8</manvolnum></citerefentry> will do, use the
	    following:</para>

	  <screen xml:lang="en"><prompt>%</prompt> <userinput>newsyslog -nrvv</userinput></screen>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="timezone">
	  <para xml:lang="en">My time is wrong, how can I change the
	    timezone?</para>
	</question>

	<answer>
	  <para xml:lang="en">Use <citerefentry><refentrytitle>tzsetup</refentrytitle><manvolnum>8</manvolnum></citerefentry>.</para>
	</answer>
      </qandaentry>
    </qandaset>
  </chapter>

  <chapter xml:id="x">
    <title xml:lang="en">The X Window System and Virtual Consoles</title>

    <qandaset>
      <qandaentry>
	<question xml:id="whatis-X">
	  <para xml:lang="en">What is the X Window System?</para>
	</question>

	<answer>
	  <para xml:lang="en">The X Window System (commonly <literal>X11</literal>)
	    is the most widely available windowing system capable of
	    running on <trademark class="registered">UNIX</trademark> or <trademark class="registered">UNIX</trademark> like systems, including
	    FreeBSD.  <link xlink:href="http://www.x.org/wiki/">The X.Org
	      Foundation</link> administers the <link xlink:href="http://en.wikipedia.org/wiki/X_Window_System_core_protocol">X
	      protocol standards</link>, with the current reference
	    implementation, version 11 release 7.7, so
	    references are often shortened to
	    <literal>X11</literal>.</para>

	  <para xml:lang="en">Many implementations are available for different
	    architectures and operating systems.  An implementation of
	    the server-side code is properly known as an <literal>X
	      server</literal>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="running-X">
	  <para xml:lang="en">I want to run Xorg, how do I go about it?</para>
	</question>

	<answer>
	  <para xml:lang="en">To install Xorg do one of the following:</para>

	  <para xml:lang="en">Use the <package>x11/xorg</package>
	    meta-port, which builds and installs every Xorg
	    component.</para>

	  <para xml:lang="en">Use <package>x11/xorg-minimal</package>, which builds
	    and installs only the necessary Xorg components.</para>

	  <para xml:lang="en">Install Xorg from FreeBSD packages:</para>

	  <screen xml:lang="en"><userinput><prompt>#</prompt> pkg install xorg</userinput></screen>

	  <para xml:lang="en">After the installation of Xorg, follow the
	    instructions from the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/x-config.html">X11
	      Configuration</link> section of the FreeBSD
	    Handbook.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="running-X-securelevels">
	  <para xml:lang="en">I <emphasis>tried</emphasis> to run X, but I get a
	    <errorname>No devices detected.</errorname> error when I
	    type <command>startx</command>.  What do I do now?</para>
	</question>

	<answer>
	  <para xml:lang="en">The system is probably running at a raised
	    <literal>securelevel</literal>.  It is not possible to
	    start X at a raised <literal>securelevel</literal> because
	    X requires write access to <citerefentry><refentrytitle>io</refentrytitle><manvolnum>4</manvolnum></citerefentry>.  For more
	    information, see at the <citerefentry><refentrytitle>init</refentrytitle><manvolnum>8</manvolnum></citerefentry> manual page.</para>

	  <para xml:lang="en">There are two solutions to the problem: set the
	    <literal>securelevel</literal> back down to zero or run
	    <citerefentry vendor="xfree86"><refentrytitle>xdm</refentrytitle><manvolnum>1</manvolnum></citerefentry> (or an alternative display manager) at boot
	    time before the <literal>securelevel</literal> is
	    raised.</para>

	  <para xml:lang="en">See <xref linkend="xdm-boot"/> for more information
	    about running <citerefentry vendor="xfree86"><refentrytitle>xdm</refentrytitle><manvolnum>1</manvolnum></citerefentry> at boot time.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="x-and-moused">
	  <para xml:lang="en">Why does my mouse not work with X?</para>
	</question>

	<answer>
	  <para xml:lang="en">When using <citerefentry><refentrytitle>syscons</refentrytitle><manvolnum>4</manvolnum></citerefentry>, the default console
	    driver, FreeBSD can be configured to support a mouse pointer
	    on each virtual screen.  To avoid conflicting with X,
	    <citerefentry><refentrytitle>syscons</refentrytitle><manvolnum>4</manvolnum></citerefentry> supports a virtual device called
	    <filename>/dev/sysmouse</filename>.  All mouse events
	    received from the real mouse device are written to the
	    <citerefentry><refentrytitle>sysmouse</refentrytitle><manvolnum>4</manvolnum></citerefentry> device via <citerefentry><refentrytitle>moused</refentrytitle><manvolnum>8</manvolnum></citerefentry>.  To use the
	    mouse on one or more virtual consoles,
	    <emphasis>and</emphasis> use X, see <xref linkend="moused" remap="another section"/> and set up
	    <citerefentry><refentrytitle>moused</refentrytitle><manvolnum>8</manvolnum></citerefentry>.</para>

	  <para xml:lang="en">Then edit <filename>/etc/X11/xorg.conf</filename> and
	    make sure the following lines exist:</para>

	  <programlisting xml:lang="en">Section "InputDevice"
   Option          "Protocol" "SysMouse"
   Option          "Device" "/dev/sysmouse"
.....</programlisting>

	  <para xml:lang="en">Starting with Xorg version 7.4, the
	    <literal>InputDevice</literal> sections in
	    <filename>xorg.conf</filename> are ignored in favor of
	    autodetected devices.  To restore the old behavior, add
	    the following line to the <literal>ServerLayout</literal>
	    or <literal>ServerFlags</literal> section:</para>

	  <programlisting xml:lang="en">Option "AutoAddDevices" "false"</programlisting>

	  <para xml:lang="en">Some people prefer to use
	    <filename>/dev/mouse</filename> under X.  To make this
	    work, <filename>/dev/mouse</filename> should be linked
	    to <filename>/dev/sysmouse</filename> (see
	    <citerefentry><refentrytitle>sysmouse</refentrytitle><manvolnum>4</manvolnum></citerefentry>) by adding the following line to
	    <filename>/etc/devfs.conf</filename> (see
	    <citerefentry><refentrytitle>devfs.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry>):</para>

	  <programlisting xml:lang="en">link    sysmouse    mouse</programlisting>

	  <para xml:lang="en">This link can be created by restarting <citerefentry vendor="current"><refentrytitle>devfs</refentrytitle><manvolnum>5</manvolnum></citerefentry>
	    with the following command (as <systemitem class="username">root</systemitem>):</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>service devfs restart</userinput></screen>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="x-and-wheel">
	  <para xml:lang="en">My mouse has a fancy wheel.  Can I use it in X?</para>
	</question>

	<answer>
	  <para xml:lang="en">Yes, if X is configured for a 5 button mouse.  To
	    do this, add the lines <literal>Buttons 5</literal>
	    and <literal>ZAxisMapping 4 5</literal> to the
	    <quote>InputDevice</quote> section of
	    <filename>/etc/X11/xorg.conf</filename>, as seen in this
	    example:</para>

	  <programlisting xml:lang="en">Section "InputDevice"
   Identifier      "Mouse1"
   Driver          "mouse"
   Option          "Protocol" "auto"
   Option          "Device" "/dev/sysmouse"
   Option          "Buttons" "5"
   Option          "ZAxisMapping" "4 5"
EndSection</programlisting>

	    <para xml:lang="en">The mouse can be enabled in
	      <application>Emacs</application>by adding these
	      lines to <filename>~/.emacs</filename>:</para>

	    <programlisting xml:lang="en">;; wheel mouse
(global-set-key [mouse-4] 'scroll-down)
(global-set-key [mouse-5] 'scroll-up)</programlisting>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="x-and-synaptic">
	  <para xml:lang="en">My laptop has a Synaptics touchpad.  Can I use it in
	    X?</para>
	</question>

	<answer>
	  <para xml:lang="en">Yes, after configuring a few things to make
	    it work.</para>

	  <para xml:lang="en">In order to use the Xorg synaptics driver,
	    first remove <literal>moused_enable</literal> from
	    <filename>rc.conf</filename>.</para>

	  <para xml:lang="en">To enable synaptics, add the following line to
	    <filename>/boot/loader.conf</filename>:</para>

	  <programlisting xml:lang="en">hw.psm.synaptics_support="1"</programlisting>

	  <para xml:lang="en">Add the following to
	    <filename>/etc/X11/xorg.conf</filename>:</para>

	  <programlisting xml:lang="en">Section "InputDevice"
Identifier  "Touchpad0"
Driver      "synaptics"
Option      "Protocol" "psm"
Option      "Device" "/dev/psm0"
EndSection</programlisting>

	  <para xml:lang="en">And be sure to add the following into the
	    <quote>ServerLayout</quote> section:</para>

	  <programlisting xml:lang="en">InputDevice    "Touchpad0" "SendCoreEvents"</programlisting>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="no-remote-x11">
	  <para xml:lang="en">How do I use remote X displays?</para>
	</question>

	<answer>
	  <para xml:lang="en">For security reasons, the default setting is to not
	    allow a machine to remotely open a window.</para>

	  <para xml:lang="en">To enable this feature, start
	    <application>X</application> with the optional
	    <option>-listen_tcp</option> argument:</para>

	  <screen xml:lang="en"><prompt>%</prompt> <userinput>startx -listen_tcp</userinput></screen>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="virtual-console">
	  <para xml:lang="en">What is a virtual console and how do I make
	    more?</para>
	</question>

	<answer>
	  <para xml:lang="en">Virtual consoles provide
	    several simultaneous sessions on the same machine without
	    doing anything complicated like setting up a network or
	    running X.</para>

	  <para xml:lang="en">When the system starts, it will display a login prompt
	    on the monitor after displaying all the boot messages.
	    Type in your login name and password to
	    start working on the first virtual
	    console.</para>

	  <para xml:lang="en">To start another
	    session, perhaps to look at documentation for a program
	    or to read mail while waiting for an
	    FTP transfer to finish,
	    hold down <keycap>Alt</keycap> and press
	    <keycap>F2</keycap>.  This will display the login prompt
	    for the second virtual
	      console.  To go back to the
	    original session, press <keycombo action="simul"><keycap>Alt</keycap><keycap>F1</keycap></keycombo>.</para>

	  <para xml:lang="en">The default FreeBSD installation has eight virtual
	    consoles enabled.  <keycombo action="simul"><keycap>Alt</keycap><keycap>F1</keycap></keycombo>,
	    <keycombo action="simul"><keycap>Alt</keycap><keycap>F2</keycap></keycombo>,
	    <keycombo action="simul"><keycap>Alt</keycap><keycap>F3</keycap></keycombo>,
	    and so on will switch between these virtual
	    consoles.</para>

	  <para xml:lang="en">To enable more of virtual consoles, edit
	    <filename>/etc/ttys</filename> (see <citerefentry><refentrytitle>ttys</refentrytitle><manvolnum>5</manvolnum></citerefentry>) and add
	    entries for <filename>ttyv8</filename> to
	    <filename>ttyvc</filename>, after the comment on
	    <quote>Virtual terminals</quote>:</para>

	  <programlisting xml:lang="en"># Edit the existing entry for ttyv8 in /etc/ttys and change
# "off" to "on".
ttyv8   "/usr/libexec/getty Pc"         xterm  on secure
ttyv9   "/usr/libexec/getty Pc"         xterm  on secure
ttyva   "/usr/libexec/getty Pc"         xterm  on secure
ttyvb   "/usr/libexec/getty Pc"         xterm  on secure</programlisting>

	  <para xml:lang="en">The more virtual
	    terminals, the more resources that are used.  This can be
	    problematic on systems with 8 MB RAM or less.
	    Consider changing <literal>secure</literal> to
	    <literal>insecure</literal>.</para>

	  <important>
	    <para xml:lang="en">In order to run an X server, at least one virtual
	      terminal must be left to <literal>off</literal> for it
	      to use.  This means that only eleven of the Alt-function
	      keys can be used as virtual consoles so that one is left
	      for the X server.</para>
	  </important>

	  <para xml:lang="en">For example, to run X and eleven virtual consoles, the
	    setting for virtual terminal 12 should be:</para>

	  <programlisting xml:lang="en">ttyvb   "/usr/libexec/getty Pc"         xterm  off secure</programlisting>

	  <para xml:lang="en">The easiest way to activate the
	    virtual consoles is to reboot.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="vty-from-x">
	  <para xml:lang="en">How do I access the virtual consoles from X?</para>
	</question>

	<answer>
	  <para xml:lang="en">Use <keycombo action="simul"><keycap>Ctrl</keycap><keycap>Alt</keycap><keycap>F<replaceable>n</replaceable></keycap></keycombo>
	    to switch back to a virtual console.  Press <keycombo action="simul"><keycap>Ctrl</keycap><keycap>Alt</keycap><keycap>F1</keycap></keycombo>
	    to return to the first virtual console.</para>

	  <para xml:lang="en">Once at a text console, use
	    <keycombo action="simul"><keycap>Alt</keycap><keycap>F<replaceable>n</replaceable></keycap></keycombo>
	    to move between them.</para>

	  <para xml:lang="en">To return to the X session, switch to the
	    virtual console running X.  If X was started from the
	    command line using <command>startx</command>,
	    the X session will attach to the next unused virtual
	    console, not the text console from which it was invoked.
	    For eight active virtual terminals, X will
	    run on the ninth, so use <keycombo action="simul"><keycap>Alt</keycap><keycap>F9</keycap></keycombo>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="xdm-boot">
	  <para xml:lang="en">How do I start <application>XDM</application> on
	    boot?</para>
	</question>

	<answer>
	  <para xml:lang="en">There are two schools of thought on how to start
	    <citerefentry vendor="xfree86"><refentrytitle>xdm</refentrytitle><manvolnum>1</manvolnum></citerefentry>.  One school starts <command>xdm</command>
	    from <filename>/etc/ttys</filename> (see <citerefentry><refentrytitle>ttys</refentrytitle><manvolnum>5</manvolnum></citerefentry>)
	    using the supplied example, while the other runs
	    <command>xdm</command> from
	    <filename>rc.local</filename> (see <citerefentry><refentrytitle>rc</refentrytitle><manvolnum>8</manvolnum></citerefentry>) or from an
	    <filename>X</filename> script in
	    <filename>/usr/local/etc/rc.d</filename>.  Both are
	    equally valid, and one may work in situations where the
	    other does not.  In both cases the result is the same: X
	    will pop up a graphical login prompt.</para>

	  <para xml:lang="en">The <citerefentry><refentrytitle>ttys</refentrytitle><manvolnum>5</manvolnum></citerefentry> method has the advantage of
	    documenting which vty X will start on and passing the
	    responsibility of restarting the X server on logout to
	    <citerefentry><refentrytitle>init</refentrytitle><manvolnum>8</manvolnum></citerefentry>.  The <citerefentry><refentrytitle>rc</refentrytitle><manvolnum>8</manvolnum></citerefentry> method makes it easy to
	    <command>kill</command> <command>xdm</command> if there is
	    a problem starting the X server.</para>

	  <para xml:lang="en">If loaded from <citerefentry><refentrytitle>rc</refentrytitle><manvolnum>8</manvolnum></citerefentry>, <command>xdm</command>
	    should be started without any arguments.
	    <command>xdm</command> must start
	    <emphasis>after</emphasis> <citerefentry><refentrytitle>getty</refentrytitle><manvolnum>8</manvolnum></citerefentry> runs, or else
	    <command>getty</command> and <command>xdm</command> will
	    conflict, locking out the console.  The best way around
	    this is to have the script sleep 10 seconds or so then
	    launch <command>xdm</command>.</para>

	  <para xml:lang="en">When starting <command>xdm</command> from
	    <filename>/etc/ttys</filename>, there still is a chance of
	    conflict between <command>xdm</command> and <citerefentry><refentrytitle>getty</refentrytitle><manvolnum>8</manvolnum></citerefentry>.
	    One way to avoid this is to add the <literal>vt</literal>
	    number in
	    <filename>/usr/local/lib/X11/xdm/Xservers</filename>:</para>

	  <programlisting xml:lang="en">:0 local /usr/local/bin/X vt4</programlisting>

	  <para xml:lang="en">The above example will direct the X server to run in
	    <filename>/dev/ttyv3</filename>.  Note the number is
	    offset by one.  The X server counts the vty from one,
	    whereas the FreeBSD kernel numbers the vty from zero.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="xconsole-failure">
	  <para xml:lang="en">Why do I get <errorname>Couldn't open
	      console</errorname> when I run
	    <command>xconsole</command>?</para>
	</question>

	<answer>
	  <para xml:lang="en">When <application>X</application> is started with
	    <command>startx</command>, the permissions on
	    <filename>/dev/console</filename> will
	    <emphasis>not</emphasis> get changed, resulting in things
	    like <command>xterm -C</command> and
	    <command>xconsole</command> not working.</para>

	  <para xml:lang="en">This is because of the way console permissions are set
	    by default.  On a multi-user system, one does not
	    necessarily want just any user to be able to write on the
	    system console.  For users who are logging directly onto a
	    machine with a VTY, the <citerefentry><refentrytitle>fbtab</refentrytitle><manvolnum>5</manvolnum></citerefentry> file exists to solve
	    such problems.</para>

	  <para xml:lang="en">In a nutshell, make sure an uncommented line of the
	    form is in <filename>/etc/fbtab</filename> (see
	    <citerefentry><refentrytitle>fbtab</refentrytitle><manvolnum>5</manvolnum></citerefentry>):</para>

	  <programlisting xml:lang="en">/dev/ttyv0 0600 /dev/console</programlisting>

	  <para xml:lang="en">It will ensure that whomever logs in on
	    <filename>/dev/ttyv0</filename> will own the
	    console.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ps2-x">
	  <para xml:lang="en">Why does my PS/2 mouse misbehave under X?</para>
	</question>

	<answer>
	  <para xml:lang="en">The mouse and the mouse driver may have become out of
	    synchronization.  In rare cases, the driver may also
	    erroneously report synchronization errors:</para>

	  <programlisting xml:lang="en">psmintr: out of sync (xxxx != yyyy)</programlisting>

	  <para xml:lang="en">If this happens, disable the synchronization check
	    code by setting the driver flags for the PS/2 mouse driver
	    to <literal>0x100</literal>.  This can be easiest achieved
	    by adding <literal>hint.psm.0.flags="0x100"</literal> to
	    <filename>/boot/loader.conf</filename> and
	    rebooting.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="mouse-button-reverse">
	  <para xml:lang="en">How do I reverse the mouse buttons?</para>
	</question>

	<answer>
	  <para xml:lang="en">Type
	    <command>xmodmap -e "pointer = 3 2 1"</command>.  Add this
	    command to <filename>~/.xinitrc</filename> or
	    <filename>~/.xsession</filename> to make it happen
	    automatically.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="install-splash">
	  <para xml:lang="en">How do I install a splash screen and where do I find
	    them?</para>
	</question>

	<answer>
	  <para xml:lang="en">The detailed answer for this question can be found in
	    the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/boot-splash.html">Boot
	    Time Splash Screens</link> section of the FreeBSD
	    Handbook.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="windows-keys">
	  <para xml:lang="en">Can I use the <keycap>Windows</keycap> keys on my
	    keyboard in X?</para>
	</question>

	<answer>
	  <para xml:lang="en">Yes.  Use <citerefentry vendor="xfree86"><refentrytitle>xmodmap</refentrytitle><manvolnum>1</manvolnum></citerefentry> to
	    define which functions the keys should perform.</para>

	  <para xml:lang="en">Assuming all Windows keyboards are
	    standard, the keycodes for these three keys are the
	    following:</para>

	  <itemizedlist>
	    <listitem>
	      <para xml:lang="en"><keycode>115</keycode> —
		<keycap>Windows</keycap> key, between the left-hand
		<keycap>Ctrl</keycap> and <keycap>Alt</keycap>
		keys</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en"><keycode>116</keycode> —
		<keycap>Windows</keycap> key, to the right of
		<keycap>AltGr</keycap></para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en"><keycode>117</keycode> —
		<keycap>Menu</keycap>, to the left of the right-hand
		<keycap>Ctrl</keycap></para>
	    </listitem>
	  </itemizedlist>

	  <para xml:lang="en">To have the left <keycap>Windows</keycap> key print a
	    comma, try this.</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>xmodmap -e "keycode 115 = comma"</userinput></screen>

	  <para xml:lang="en">To have the <keycap>Windows</keycap> key-mappings
	    enabled automatically every time X is started, either put
	    the <command>xmodmap</command> commands in
	    <filename>~/.xinitrc</filename> or, preferably, create
	    a <filename>~/.xmodmaprc</filename> and include the
	    <command>xmodmap</command> options, one per line, then add
	    the following line to
	    <filename>~/.xinitrc</filename>:</para>

	  <programlisting xml:lang="en">xmodmap $HOME/.xmodmaprc</programlisting>

	  <para xml:lang="en">For example, to map the 3 keys to be
	    <keycap>F13</keycap>, <keycap>F14</keycap>, and
	    <keycap>F15</keycap>, respectively.  This would make it
	    easy to map them to useful functions within applications
	    or the window manager.</para>

	  <para xml:lang="en">To do this, put the following in
	    <filename>~/.xmodmaprc</filename>.</para>

	  <programlisting xml:lang="en">keycode 115 = F13
keycode 116 = F14
keycode 117 = F15</programlisting>

	  <para xml:lang="en">For the <package>x11-wm/fvwm2</package> desktop
	    manager, one could map the keys so that
	    <keycap>F13</keycap> iconifies or de-iconifies the
	    window the cursor is in, <keycap>F14</keycap> brings the
	    window the cursor is in to the front or, if it is already
	    at the front, pushes it to the back, and
	    <keycap>F15</keycap> pops up the main Workplace
	    menu even if the cursor is not on the
	    desktop, which is useful when no part of
	    the desktop is visible.</para>

	  <para xml:lang="en">The following entries in
	    <filename>~/.fvwmrc</filename> implement the
	    aforementioned setup:</para>

	  <programlisting xml:lang="en">Key F13        FTIWS    A        Iconify
Key F14        FTIWS    A        RaiseLower
Key F15        A        A        Menu Workplace Nop</programlisting>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="x-3d-acceleration">
	  <para xml:lang="en">How can I get 3D hardware acceleration for
	    <trademark class="registered">OpenGL</trademark>?</para>
	</question>

	<answer>
	  <para xml:lang="en">The availability of 3D acceleration depends on the
	    version of Xorg and the type of video
	    chip.  For an nVidia chip, use
	    the binary drivers provided for FreeBSD by installing one of
	    the following ports:</para>

	  <para xml:lang="en">The latest versions of nVidia cards are supported
	    by the <package>x11/nvidia-driver</package>
	    port.</para>

	  <para xml:lang="en">Older drivers are available as
	    <package>x11/nvidia-driver-<replaceable>###</replaceable></package></para>

	  <para xml:lang="en">nVidia provides detailed information on which
	    card is supported by which driver on their web site: <uri xlink:href="http://www.nvidia.com/object/IO_32667.html">http://www.nvidia.com/object/IO_32667.html</uri>.</para>

	  <para xml:lang="en">For Matrox G200/G400, check the
	    <package>x11-drivers/xf86-video-mga</package>
	    port.</para>

	  <para xml:lang="en">For ATI Rage 128 and Radeon see
	    <citerefentry vendor="xorg"><refentrytitle>ati</refentrytitle><manvolnum>4</manvolnum></citerefentry>, <citerefentry vendor="xorg"><refentrytitle>r128</refentrytitle><manvolnum>4</manvolnum></citerefentry> and <citerefentry vendor="xorg"><refentrytitle>radeon</refentrytitle><manvolnum>4</manvolnum></citerefentry>.</para>
	</answer>
      </qandaentry>
    </qandaset>
  </chapter>

  <chapter xml:id="networking">
    <title xml:lang="en">Networking</title>

    <qandaset>
      <qandaentry>
	<question xml:id="diskless-booting">
	  <para xml:lang="en">Where can I get information on <quote>diskless
	      booting</quote>?</para>
	</question>

	<answer>
	  <para xml:lang="en"><quote>Diskless booting</quote> means that the FreeBSD
	    box is booted over a network, and reads the necessary
	    files from a server instead of its hard disk.  For full
	    details, see <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/network-diskless.html">the
	      Handbook entry on diskless booting</link>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="router">
	  <para xml:lang="en">Can a FreeBSD box be used as a dedicated network
	    router?</para>
	</question>

	<answer>
	  <para xml:lang="en">Yes.  Refer to the Handbook entry on <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/advanced-networking.html">advanced
	      networking</link>, specifically the section on <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/network-routing.html">routing
	      and gateways</link>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="win95-connection">
	  <para xml:lang="en">Can I connect my <trademark class="registered">Windows</trademark> box to the Internet via
	    FreeBSD?</para>
	</question>

	<answer>
	  <para xml:lang="en">Typically, people who ask this question have two PCs
	    at home, one with FreeBSD and one with some version of
	    <trademark class="registered">Windows</trademark> the idea is to use the FreeBSD box to connect to
	    the Internet and then be able to access the Internet from
	    the <trademark class="registered">Windows</trademark> box through the FreeBSD box.  This is really
	    just a special case of the previous question and works
	    perfectly well.</para>

	  <para xml:lang="en">Dialup users must use <option>-nat</option>
	    and set <literal>gateway_enable</literal> to
	    <emphasis>YES</emphasis> in
	    <filename>/etc/rc.conf</filename>.  For more information,
	    refer to <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> or the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/userppp.html">Handbook
	      entry on user PPP</link>.</para>

	  <para xml:lang="en">If the connection to the Internet is over Ethernet,
	    use <citerefentry><refentrytitle>natd</refentrytitle><manvolnum>8</manvolnum></citerefentry>.  A tutorial can be found in the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/firewalls-ipfw.html#network-natd">natd</link>
	    section of the Handbook.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="slip-ppp-support">
	  <para xml:lang="en">Does FreeBSD support PPP?</para>
	</question>

	<answer>
	  <para xml:lang="en">Yes.  <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> provides support for both incoming
	    and outgoing connections.</para>

	  <para xml:lang="en">For more information on how to use this, refer to
	    the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/ppp-and-slip.html">Handbook
	      chapter on PPP</link>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="natd">
	  <para xml:lang="en">Does FreeBSD support NAT or Masquerading?</para>
	</question>

	<answer>
	  <para xml:lang="en">Yes.  For instructions on how to use NAT over a PPP
	    connection, see the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/userppp.html">Handbook
	      entry on PPP</link>.  To use NAT over
	    some other sort of network connection, look at the
	    <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/firewalls-ipfw.html#network-natd">natd</link>
	    section of the Handbook.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ethernet-aliases">
	  <para xml:lang="en">How can I set up Ethernet aliases?</para>
	</question>

	<answer>
	  <para xml:lang="en">If the alias is on the same subnet as an address
	    already configured on the interface, add
	    <literal>netmask 0xffffffff</literal> to this
	    command:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>ifconfig <replaceable>ed0</replaceable> alias <replaceable>192.0.2.2 </replaceable>netmask 0xffffffff</userinput></screen>

	  <para xml:lang="en">Otherwise, specify the network address and
	    netmask as usual:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>ifconfig <replaceable>ed0</replaceable> alias <replaceable>172.16.141.5</replaceable> netmask 0xffffff00</userinput></screen>

	  <para xml:lang="en">More information can be found in the FreeBSD <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/configtuning-virtual-hosts.html">Handbook</link>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="nfs-linux">
	  <para xml:lang="en">Why can I not NFS-mount from a <trademark class="registered">Linux</trademark> box?</para>
	</question>

	<answer>
	  <para xml:lang="en">Some versions of the <trademark class="registered">Linux</trademark> NFS code only accept
	    mount requests from a privileged port; try to issue the
	    following command:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>mount -o -P linuxbox:/blah /mnt</userinput></screen>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="exports-errors">
	  <para xml:lang="en">Why does <command>mountd</command> keep telling me it
	    <errorname>can't change attributes</errorname> and that I
	    have a <errorname>bad exports list</errorname> on my FreeBSD
	    NFS server?</para>
	</question>

	<answer>
	  <para xml:lang="en">The most frequent problem is not understanding the
	    correct format of <filename>/etc/exports</filename>.
	    Review <citerefentry><refentrytitle>exports</refentrytitle><manvolnum>5</manvolnum></citerefentry> and the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/network-nfs.html">NFS</link>
	    entry in the Handbook, especially the section on <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/network-nfs.html#configuring-nfs">configuring
	      NFS</link>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ip-multicast">
	  <para xml:lang="en">How do I enable IP multicast support?</para>
	</question>

	<answer>
	  <para xml:lang="en">Install the <package>net/mrouted</package> package
	    or port and add
	    <literal>mrouted_enable="YES"</literal> to
	    <filename>/etc/rc.conf</filename> start this service at
	    boot time.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="fqdn-hosts">
	  <para xml:lang="en">Why do I have to use the FQDN for hosts on my
	    site?</para>
	</question>

	<answer>
	  <para xml:lang="en">See the answer in the FreeBSD <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/mail-trouble.html">Handbook</link>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="network-permission-denied">
	  <para xml:lang="en">Why do I get an error, <errorname>Permission
	      denied</errorname>, for all networking
	    operations?</para>
	</question>

	<answer>
	  <para xml:lang="en">If the kernel is compiled with the
	    <literal>IPFIREWALL</literal> option, be aware
	    that the default policy is to deny all packets that are
	    not explicitly allowed.</para>

	  <para xml:lang="en">If the firewall is unintentionally misconfigured,
	    restore network operability by
	    typing the following as <systemitem class="username">root</systemitem>:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>ipfw add 65534 allow all from any to any</userinput></screen>

	  <para xml:lang="en">Consider setting
	    <literal>firewall_type="open"</literal> in
	    <filename>/etc/rc.conf</filename>.</para>

	  <para xml:lang="en">For further information on configuring this
	    firewall, see the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/firewalls-ipfw.html">Handbook
	      chapter</link>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ipfw-fwd">
	  <para xml:lang="en">Why is my <command>ipfw</command> <quote>fwd</quote>
	    rule to redirect a service to another machine not
	    working?</para>
	</question>

	<answer>
	  <para xml:lang="en">Possibly because network address translation (NAT) is
	    needed instead of just forwarding packets.  A
	    <quote>fwd</quote> rule only forwards packets, it does not
	    actually change the data inside the packet.  Consider this
	    rule:</para>

	  <screen xml:lang="en">01000 fwd <replaceable>10.0.0.1</replaceable> from any to <replaceable>foo 21</replaceable></screen>

	  <para xml:lang="en">When a packet with a destination address of
	    <replaceable>foo</replaceable> arrives at the machine with
	    this rule, the packet is forwarded to
	    <replaceable>10.0.0.1</replaceable>, but it still has the
	    destination address of <replaceable>foo</replaceable>.
	    The destination address of the packet is
	    not changed to
	    <replaceable>10.0.0.1</replaceable>.  Most machines would
	    probably drop a packet that they receive with a
	    destination address that is not their own.  Therefore,
	    using a <quote>fwd</quote> rule does not often work the
	    way the user expects.  This behavior is a feature and not
	    a bug.</para>

	  <para xml:lang="en">See the <link linkend="service-redirect"><acronym>FAQ</acronym> about
	      redirecting services</link>, the <citerefentry><refentrytitle>natd</refentrytitle><manvolnum>8</manvolnum></citerefentry> manual, or
	    one of the several port redirecting utilities in the <link xlink:href="@@URL_RELPREFIX@@/ports/index.html">Ports
	      Collection</link> for a correct way to do this.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="service-redirect">
	  <para xml:lang="en">How can I redirect service requests from one machine
	    to another?</para>
	</question>

	<answer>
	  <para xml:lang="en">FTP and other service requests can be redirected with
	    the <package>sysutils/socket</package> package or port.
	    Replace the entry for the service in
	    <filename>/etc/inetd.conf</filename> to call
	    <command>socket</command>, as seen in this example for
	    <application>ftpd</application>:</para>

	  <programlisting xml:lang="en">ftp stream tcp nowait nobody /usr/local/bin/socket socket <replaceable>ftp.example.com</replaceable> <replaceable>ftp</replaceable></programlisting>

	  <para xml:lang="en">where <replaceable>ftp.example.com</replaceable> and
	    <replaceable>ftp</replaceable> are the host and port to
	    redirect to, respectively.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="bandwidth-mgr-tool">
	  <para xml:lang="en">Where can I get a bandwidth management tool?</para>
	</question>

	<answer>
	  <para xml:lang="en">There are three bandwidth management tools available
	    for FreeBSD.  <citerefentry><refentrytitle>dummynet</refentrytitle><manvolnum>4</manvolnum></citerefentry> is integrated into FreeBSD as
	    part of <citerefentry><refentrytitle>ipfw</refentrytitle><manvolnum>4</manvolnum></citerefentry>.  <link xlink:href="http://www.sonycsl.co.jp/person/kjc/programs.html">ALTQ</link>
	    has been integrated into FreeBSD as part of <citerefentry><refentrytitle>pf</refentrytitle><manvolnum>4</manvolnum></citerefentry>.
	    Bandwidth Manager from <link xlink:href="http://www.etinc.com/">Emerging
	      Technologies</link> is a commercial product.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="bpf-not-configured">
	  <para xml:lang="en">Why do I get <errorname>/dev/bpf0: device not
	      configured</errorname>?</para>
	</question>

	<answer>
	  <para xml:lang="en">The running application requires the Berkeley
	    Packet Filter (<citerefentry><refentrytitle>bpf</refentrytitle><manvolnum>4</manvolnum></citerefentry>), but it was removed from a
	    custom kernel.  Add this to the kernel config file and
	    build a new kernel:</para>

	  <programlisting xml:lang="en">device bpf        # Berkeley Packet Filter</programlisting>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="mount-smb-share">
	  <para xml:lang="en">How do I mount a disk from a <trademark class="registered">Windows</trademark> machine that is
	    on my network, like smbmount in <trademark class="registered">Linux</trademark>?</para>
	</question>

	<answer>
	  <para xml:lang="en">Use the <application>SMBFS</application> toolset.  It
	    includes a set of kernel modifications and a set of
	    userland programs.  The programs and information are
	    available as <citerefentry><refentrytitle>mount_smbfs</refentrytitle><manvolnum>8</manvolnum></citerefentry> in the base
	    system.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="icmp-response-bw-limit">
	  <para xml:lang="en">What are these messages about: <errorname>Limiting
	      icmp/open port/closed port response</errorname> in my
	    log files?</para>
	</question>

	<answer>
	  <para xml:lang="en">This kernel message indicates that some activity is
	    provoking it to send a large amount of ICMP or TCP reset
	    (RST) responses.  ICMP responses are
	    often generated as a result of attempted connections to
	    unused UDP ports.  TCP resets are generated as a result of
	    attempted connections to unopened TCP ports.  Among
	    others, these are the kinds of activities which may cause
	    these messages:</para>

	  <itemizedlist>
	    <listitem>
	      <para xml:lang="en">Brute-force denial of service (DoS) attacks (as
		opposed to single-packet attacks which exploit a
		specific vulnerability).</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en">Port scans which attempt to connect to a large
		number of ports (as opposed to only trying a few
		well-known ports).</para>
	    </listitem>
	  </itemizedlist>

	  <para xml:lang="en">The first number in the message indicates how many
	    packets the kernel would have sent if the limit was not in
	    place, and the second indicates the limit.  This limit
	    is controlled using
	    <varname>net.inet.icmp.icmplim</varname>.  This example
	    sets the limit to <literal>300</literal>
	    packets per second:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>sysctl net.inet.icmp.icmplim=300</userinput></screen>

	  <para xml:lang="en">To disable these messages
	    without disabling response
	    limiting, use
	    <varname>net.inet.icmp.icmplim_output</varname>
	    to disable the output:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>sysctl net.inet.icmp.icmplim_output=0</userinput></screen>

	  <para xml:lang="en">Finally, to disable response limiting completely,
	    set <varname>net.inet.icmp.icmplim</varname> to
	    <literal>0</literal>.  Disabling response limiting is
	    discouraged for the reasons listed above.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="unknown-hw-addr-format">
	  <para xml:lang="en">What are these <errorname>arp: unknown hardware
	      address format</errorname> error messages?</para>
	</question>

	<answer>
	  <para xml:lang="en">This means that some device on the local Ethernet is
	    using a MAC address in a format that FreeBSD does not
	    recognize.  This is probably caused by someone
	    experimenting with an Ethernet card somewhere else on the
	    network.  This is most commonly seen on cable modem
	    networks.  It is harmless, and should not affect the
	    performance of the FreeBSD system.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="arp-wrong-iface">
	  <para xml:lang="en">Why do I keep seeing messages like:
	    <errorname>192.168.0.10 is on
	      fxp1 but got reply from 00:15:17:67:cf:82 on
	      rl0</errorname>, and how do I disable it?</para>
	</question>

	<answer>
	  <para xml:lang="en">Because a packet is coming from outside the network
	    unexpectedly.  To disable them, set
	    <varname>net.link.ether.inet.log_arp_wrong_iface</varname>
	    to <literal>0</literal>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ipv6-only">
	  <para xml:lang="en">How do I compile an IPv6 only kernel?</para>
	</question>

	<answer>
	  <para xml:lang="en">Configure your kernel with these settings:

	    <screen xml:lang="en">include GENERIC
ident GENERIC-IPV6ONLY
makeoptions MKMODULESENV+="WITHOUT_INET_SUPPORT="
nooptions INET
nodevice gre</screen></para>
	</answer>
      </qandaentry>
    </qandaset>
  </chapter>

  <chapter xml:id="security">
    <title xml:lang="en">Security</title>

    <qandaset>
      <qandaentry>
	<question xml:id="sandbox">
	  <para xml:lang="en">What is a sandbox?</para>
	</question>
	<answer>
	  <para xml:lang="en"><quote>Sandbox</quote> is a security term.  It can
	    mean two things:</para>

	  <itemizedlist>
	    <listitem>
	      <para xml:lang="en">A process which is placed inside a set of virtual
		walls that are designed to prevent someone who breaks
		into the process from being able to break into the
		wider system.</para>

	      <para xml:lang="en">The process is only able to run inside the walls.
		Since nothing the process does in regards to executing
		code is supposed to be able to breach the walls, a
		detailed audit of its code is not needed in order to
		be able to say certain things about its
		security.</para>

	      <para xml:lang="en">The walls might be a user ID, for example.
		This is the definition used in the <citerefentry><refentrytitle>security</refentrytitle><manvolnum>7</manvolnum></citerefentry>
		and <citerefentry><refentrytitle>named</refentrytitle><manvolnum>8</manvolnum></citerefentry> man pages.</para>

	      <para xml:lang="en">Take the <literal>ntalk</literal> service, for
		example (see <citerefentry><refentrytitle>inetd</refentrytitle><manvolnum>8</manvolnum></citerefentry>).  This service used to run
		as user ID <systemitem class="username">root</systemitem>.  Now it runs as
		user ID <systemitem class="username">tty</systemitem>.  The <systemitem class="username">tty</systemitem> user is a sandbox
		designed to make it more difficult for someone who has
		successfully hacked into the system via
		<literal>ntalk</literal> from being able to hack
		beyond that user ID.</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en">A process which is placed inside a simulation of
		the machine.  It means that someone who is able to
		break into the process may believe that he can break
		into the wider machine but is, in fact, only breaking
		into a simulation of that machine and not modifying
		any real data.</para>

	      <para xml:lang="en">The most common way to accomplish this is to build
		a simulated environment in a subdirectory and then run
		the processes in that directory chrooted so that
		<filename>/</filename> for that process is this
		directory, not the real <filename>/</filename> of the
		system).</para>

	      <para xml:lang="en">Another common use is to mount an underlying file
		system read-only and then create a file system layer
		on top of it that gives a process a seemingly
		writeable view into that file system.  The process may
		believe it is able to write to those files, but only
		the process sees the effects — other processes
		in the system do not, necessarily.</para>

	      <para xml:lang="en">An attempt is made to make this sort of sandbox so
		transparent that the user (or hacker) does not realize
		that he is sitting in it.</para>
	    </listitem>
	  </itemizedlist>

	  <para xml:lang="en"><trademark class="registered">UNIX</trademark> implements two core sandboxes.  One is at the
	    process level, and one is at the userid level.</para>

	  <para xml:lang="en">Every <trademark class="registered">UNIX</trademark> process is completely firewalled off from
	    every other <trademark class="registered">UNIX</trademark> process.  One process cannot modify the
	    address space of another.</para>

	  <para xml:lang="en">A <trademark class="registered">UNIX</trademark> process is owned by a particular userid.  If
	    the user ID is not the <systemitem class="username">root</systemitem> user, it serves to
	    firewall the process off from processes owned by other
	    users.  The user ID is also used to firewall off
	    on-disk data.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="securelevel">
	  <para xml:lang="en">What is securelevel?</para>
	</question>

	<answer>
	  <para xml:lang="en"><literal>securelevel</literal> is a security
	    mechanism implemented in the kernel.  When the securelevel
	    is positive, the kernel restricts certain tasks; not even
	    the superuser (<systemitem class="username">root</systemitem>) is allowed to do
	    them.  The securelevel mechanism limits the ability
	    to:</para>

	  <itemizedlist>
	    <listitem>
	      <para xml:lang="en">Unset certain file flags, such as
		<literal>schg</literal> (the system immutable
		flag).</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en">Write to kernel memory via
		<filename>/dev/mem</filename> and
		<filename>/dev/kmem</filename>.</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en">Load kernel modules.</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en">Alter firewall rules.</para>
	    </listitem>
	  </itemizedlist>

	  <para xml:lang="en">To check the status of the securelevel on a running
	    system:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>sysctl -n kern.securelevel</userinput></screen>

	  <para xml:lang="en">The output contains the current value of the
	    securelevel.  If it is greater than 0, at
	    least some of the securelevel's protections are
	    enabled.</para>

	  <para xml:lang="en">The securelevel of a running system cannot be lowered
	    as this would defeat its purpose.  If a task requires that
	    the securelevel be non-positive, change the
	    <varname>kern_securelevel</varname> and
	    <varname>kern_securelevel_enable</varname> variables in
	    <filename>/etc/rc.conf</filename> and reboot.</para>

	  <para xml:lang="en">For more information on securelevel and the specific
	    things all the levels do, consult <citerefentry><refentrytitle>init</refentrytitle><manvolnum>8</manvolnum></citerefentry>.</para>

	  <warning>
	    <para xml:lang="en">Securelevel is not a silver bullet; it has many
	      known deficiencies.  More often than not, it provides a
	      false sense of security.</para>

	    <para xml:lang="en">One of its biggest problems is that in order for it
	      to be at all effective, all files used in the boot
	      process up until the securelevel is set must be
	      protected.  If an attacker can get the system to execute
	      their code prior to the securelevel being set (which
	      happens quite late in the boot process since some things
	      the system must do at start-up cannot be done at an
	      elevated securelevel), its protections are invalidated.
	      While this task of protecting all files used in the boot
	      process is not technically impossible, if it is
	      achieved, system maintenance will become a nightmare
	      since one would have to take the system down, at least
	      to single-user mode, to modify a configuration
	      file.</para>

	    <para xml:lang="en">This point and others are often discussed on the
	      mailing lists, particularly the <link xlink:href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-security">FreeBSD security mailing list</link>.
	      Search the archives <link xlink:href="@@URL_RELPREFIX@@/search/index.html">here</link>
	      for an extensive discussion.  A more fine-grained
	      mechanism is preferred.</para>
	  </warning>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="extra-named-port">
	  <para xml:lang="en"><application>BIND9</application>
	    (<command>named</command>) is listening on some
	    high-numbered ports.  What is going on?</para>
	</question>

	<answer>
	  <para xml:lang="en">BIND uses a random high-numbered port for outgoing
	    queries.  Recent versions of it choose a new, random UDP
	    port for each query.  This may cause problems for some
	    network configurations, especially if a firewall blocks
	    incoming UDP packets on particular ports.  To
	    get past that firewall, try the
	    <literal>avoid-v4-udp-ports</literal> and
	    <literal>avoid-v6-udp-ports</literal> options to avoid
	    selecting random port numbers within a blocked
	    range.</para>

	  <warning>
	    <para xml:lang="en">If a port number (like 53) is specified via the
	      <literal>query-source</literal> or
	      <literal>query-source-v6</literal> options in
	      <filename>/usr/local/etc/namedb/named.conf</filename>,
	      randomized
	      port selection will not be used.  It is strongly
	      recommended that these options not be used to specify
	      fixed port numbers.</para>
	  </warning>

	  <para xml:lang="en">Congratulations, by the way.  It is good practice to
	    read <citerefentry><refentrytitle>sockstat</refentrytitle><manvolnum>1</manvolnum></citerefentry> output and notice odd
	    things!</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="sendmail-port-587">
	  <para xml:lang="en">The <application>Sendmail</application> daemon is
	    listening on port 587 as well as the standard port 25!
	    What is going on?</para>
	</question>

	<answer>
	  <para xml:lang="en">Recent versions of <application>Sendmail</application>
	    support a mail submission feature that runs over port 587.
	    This is not yet widely supported, but is growing in
	    popularity.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="toor-account">
	  <para xml:lang="en">What is this UID 0 <systemitem class="username">toor</systemitem> account?  Have I been
	    compromised?</para>
	</question>

	<answer>
	  <para xml:lang="en">Do not worry.  <systemitem class="username">toor</systemitem> is an
	    <quote>alternative</quote> superuser account, where toor
	    is root spelled backwards.  It is intended to be used with
	    a non-standard shell so the default shell for <systemitem class="username">root</systemitem> does not need to
	    change.  This is important as shells which are not part of
	    the base distribution, but are instead installed from
	    ports or packages, are installed in
	    <filename>/usr/local/bin</filename> which, by default,
	    resides on a different file system.  If <systemitem class="username">root</systemitem>'s shell is located in
	    <filename>/usr/local/bin</filename> and the
	    file system
	    containing <filename>/usr/local/bin</filename>) is not
	    mounted, <systemitem class="username">root</systemitem> will not be able to
	    log in to fix a problem and will have to reboot into
	    single-user mode in order to enter the path to a
	    shell.</para>

	  <para xml:lang="en">Some people use <systemitem class="username">toor</systemitem> for day-to-day
	    <systemitem class="username">root</systemitem> tasks with
	    a non-standard shell, leaving <systemitem class="username">root</systemitem>, with a standard
	    shell, for single-user mode or emergencies.  By default, a
	    user cannot log in using <systemitem class="username">toor</systemitem> as it does not have a
	    password, so log in as <systemitem class="username">root</systemitem> and set a password
	    for <systemitem class="username">toor</systemitem> before
	    using it to login.</para>
	</answer>
      </qandaentry>
    </qandaset>
  </chapter>

  <chapter xml:id="ppp">
    <title xml:lang="en">PPP</title>

    <qandaset>
      <qandaentry>
	<question xml:id="userppp">
	  <para xml:lang="en">I cannot make <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> work.  What am I doing
	    wrong?</para>
	</question>

	<answer>
	  <para xml:lang="en">First, read <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> and
	    the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/ppp-and-slip.html#userppp">PPP
	      section of the Handbook</link>.  To assist in
	    troubleshooting, enable logging with the
	    following command:</para>

	  <programlisting xml:lang="en">set log Phase Chat Connect Carrier lcp ipcp ccp command</programlisting>

	  <para xml:lang="en">This command may be typed at the <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> command
	    prompt or it may be entered at the start of the
	    <literal>default</literal> section
	    in <filename>/etc/ppp/ppp.conf</filename>.  Make sure that
	    <filename>/etc/syslog.conf</filename> contains the lines
	    below and the file <filename>/var/log/ppp.log</filename>
	    exists:</para>

	  <programlisting xml:lang="en">!ppp
*.*        /var/log/ppp.log</programlisting>

	  <para xml:lang="en">A lot about what is going can be learned from the log
	    file.  Do not worry if it does not all make sense as
	    it may make sense to someone else.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ppp-hangs">
	  <para xml:lang="en">Why does <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> hang when I run it?</para>
	</question>

	<answer>
	  <para xml:lang="en">This is usually because the hostname will not
	    resolve.  The best way to fix this is to make sure that
	    <filename>/etc/hosts</filename> is read first by the
	    by ensuring that the <literal>hosts</literal> line is
	    listed first in <filename>/etc/host.conf</filename>.
	    Then, put an entry in <filename>/etc/hosts</filename> for
	    the local machine.  If there is no local network, change
	    the <systemitem>localhost</systemitem> line:</para>

	  <programlisting xml:lang="en">127.0.0.1        foo.example.com foo localhost</programlisting>

	  <para xml:lang="en">Otherwise, add another entry for the host.
	    Consult the relevant manual pages for more details.</para>

	  <para xml:lang="en">When finished, verify that this command is successful:
	    <command>ping -c1 `hostname`</command>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ppp-nodial-auto">
	  <para xml:lang="en">Why will <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> not dial in
	    <literal>-auto</literal> mode?</para>
	</question>

	<answer>
	  <para xml:lang="en">First, check that a default route exists.  This
	    command should display two entries:</para>

	  <programlisting xml:lang="en">Destination        Gateway            Flags     Refs     Use     Netif Expire
default            10.0.0.2           UGSc        0        0      tun0
10.0.0.2           10.0.0.1           UH          0        0      tun0</programlisting>

	  <para xml:lang="en">If
	    a default route is not listed, make sure that the
	    <literal>HISADDR</literal> line has been added to
	    <filename>/etc/ppp/ppp.conf</filename>.</para>

	  <para xml:lang="en">Another reason for the default route line being
	    missing is that a default
	    route has been added to <filename>/etc/rc.conf</filename>
	    and this line is missing
	    from <filename>/etc/ppp/ppp.conf</filename>:</para>

	  <programlisting xml:lang="en">delete ALL</programlisting>

	  <para xml:lang="en">If this is the case, go back to the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/userppp.html#userppp-final">Final
	      System Configuration</link> section of the
	    Handbook.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="no-route-to-host">
	  <para xml:lang="en">What does <errorname>No route to host</errorname>
	    mean?</para>
	</question>

	<answer>
	  <para xml:lang="en">This error is usually because the following section
	    is missing in
	    <filename>/etc/ppp/ppp.linkup</filename>:</para>

	  <programlisting xml:lang="en">MYADDR:
  delete ALL
  add 0 0 HISADDR</programlisting>

	  <para xml:lang="en">This is only necessary for a dynamic IP address or
	    when the address of the default gateway is unknown.  When
	    using interactive mode, the following can be typed in
	    after entering packet mode.  Packet mode
	    is indicated by the capitalized <acronym>PPP</acronym> in
	    the prompt:</para>

	  <programlisting xml:lang="en">delete ALL
add 0 0 HISADDR</programlisting>

	  <para xml:lang="en">Refer to the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/userppp.html#userppp-dynamicip">PPP
	      and Dynamic IP addresses</link> section of the Handbook
	    for further details.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="connection-threeminutedrop">
	  <para xml:lang="en">Why does my connection drop after about 3
	    minutes?</para>
	</question>

	<answer>
	  <para xml:lang="en">The default PPP timeout is 3 minutes.  This can be
	    adjusted with the following line:</para>

	  <programlisting xml:lang="en">set timeout <replaceable>NNN</replaceable></programlisting>

	  <para xml:lang="en">where <replaceable>NNN</replaceable> is the number of
	    seconds of inactivity before the connection is closed.  If
	    <replaceable>NNN</replaceable> is zero, the connection is
	    never closed due to a timeout.  It is possible to put this
	    command in <filename>ppp.conf</filename>, or to type it at
	    the prompt in interactive mode.  It is also possible to
	    adjust it on the fly while the line is active by
	    connecting to <application>ppp</application>'s server
	    socket using <citerefentry><refentrytitle>telnet</refentrytitle><manvolnum>1</manvolnum></citerefentry> or <citerefentry><refentrytitle>pppctl</refentrytitle><manvolnum>8</manvolnum></citerefentry>.  Refer to
	    the <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> man page for further details.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ppp-drop-heavy-load">
	  <para xml:lang="en">Why does my connection drop under heavy load?</para>
	</question>

	<answer>
	  <para xml:lang="en">If Link Quality Reporting (<acronym>LQR</acronym>) is
	    configured, it is possible that too many
	    <acronym>LQR</acronym> packets are lost between the FreeBSD
	    system and the peer.  <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> deduces that the line
	    must therefore be bad, and disconnects.
	    <acronym>LQR</acronym> is disabled by default and can be
	    enabled with the following line:</para>

	  <programlisting xml:lang="en">enable lqr</programlisting>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ppp-drop-random">
	  <para xml:lang="en">Why does my connection drop after a random amount of
	    time?</para>
	</question>

	<answer>
	  <para xml:lang="en">Sometimes, on a noisy phone line or even on a line
	    with call waiting enabled, the modem may hang up because
	    it incorrectly thinks that it lost carrier.</para>

	  <para xml:lang="en">There is a setting on most modems for determining how
	    tolerant it should be to temporary losses of carrier.
	    Refer to the modem manual for details.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ppp-hangs-random">
	  <para xml:lang="en">Why does my connection hang after a random amount of
	    time?</para>
	</question>

	<answer>
	  <para xml:lang="en">Many people experience hung connections with no
	    apparent explanation.  The first thing to establish is
	    which side of the link is hung.</para>

	  <para xml:lang="en">When using an external modem, try
	    using <citerefentry><refentrytitle>ping</refentrytitle><manvolnum>8</manvolnum></citerefentry> to see if the <acronym>TD</acronym>
	    light is flashing when data is transmitted.  If it flashes
	    but the <acronym>RD</acronym> light does not, the
	    problem is with the remote end.  If <acronym>TD</acronym>
	    does not flash, the problem is local.  With an internal
	    modem, use the <literal>set
	      server</literal> command in
	    <filename>ppp.conf</filename>.  When the hang occurs,
	    connect to <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> using <citerefentry><refentrytitle>pppctl</refentrytitle><manvolnum>8</manvolnum></citerefentry>.  If the
	    network connection suddenly revives due to the activity on
	    the diagnostic socket, or if it will not
	    connect but the <literal>set socket</literal>
	    command succeeded at startup time, the problem is local.
	    If it can connect but things are still hung, enable local
	    logging with <literal>set log local async</literal>
	    and use <citerefentry><refentrytitle>ping</refentrytitle><manvolnum>8</manvolnum></citerefentry> from another window or terminal to
	    make use of the link.  The async logging will show the
	    data being transmitted and received on the link.  If data
	    is going out and not coming back, the problem is
	    remote.</para>

	  <para xml:lang="en">Having established whether the problem is local or
	    remote, there are now two possibilities:</para>

	  <itemizedlist>
	    <listitem>
	      <para xml:lang="en">If the problem is remote, read on entry <xref linkend="ppp-remote-not-responding"/>.</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en">If the problem is local, read on entry <xref linkend="ppp-hung"/>.</para>
	    </listitem>
	  </itemizedlist>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ppp-remote-not-responding">
	  <para xml:lang="en">The remote end is not responding.  What can I
	    do?</para>
	</question>

	<answer>
	  <para xml:lang="en">There is very little that can be done about this.
	    Many ISPs will refuse to help users not running a
	    <trademark class="registered">Microsoft</trademark> OS.  Add <literal>enable lqr</literal> to
	    <filename>/etc/ppp/ppp.conf</filename>, allowing
	    <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> to detect the remote failure and hang up.
	    This detection is relatively slow and therefore not that
	    useful.</para>

	  <para xml:lang="en">First, try disabling all local compression by adding
	    the following to the configuration:</para>

	  <programlisting xml:lang="en">disable pred1 deflate deflate24 protocomp acfcomp shortseq vj
deny pred1 deflate deflate24 protocomp acfcomp shortseq vj</programlisting>

	  <para xml:lang="en">Then reconnect to ensure that this makes no
	    difference.  If things improve or if the problem is solved
	    completely, determine which setting makes the difference
	    through trial and error.  This is good information for
	    the ISP, although it may make
	    it apparent that it is not a <trademark class="registered">Microsoft</trademark> system.</para>

	  <para xml:lang="en">Before contacting the ISP, enable async logging
	    locally and wait until the connection hangs again.  This
	    may use up quite a bit of disk space.  The last data read
	    from the port may be of interest.  It is usually ASCII
	    data, and may even describe the problem (<errorname>Memory
	      fault</errorname>, <errorname>Core
	      dumped</errorname>).</para>

	  <para xml:lang="en">If the ISP is helpful, they should be able to enable
	    logging on their end, then when the next link drop occurs,
	    they may be able to tell why their side is having a
	    problem.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ppp-hung">
	  <para xml:lang="en"><citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> has hung.  What can I do?</para>
	</question>

	<answer>
	  <para xml:lang="en">In this case, rebuild <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> with
	    debugging information, and then use <citerefentry><refentrytitle>gdb</refentrytitle><manvolnum>1</manvolnum></citerefentry> to grab a
	    stack trace from the <application>ppp</application>
	    process that is stuck.  To rebuild the
	    <application>ppp</application> utility with debugging
	    information, type:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>cd /usr/src/usr.sbin/ppp</userinput>
<prompt>#</prompt> <userinput>env DEBUG_FLAGS='-g' make clean</userinput>
<prompt>#</prompt> <userinput>env DEBUG_FLAGS='-g' make install</userinput></screen>

	  <para xml:lang="en">Then, restart <application>ppp</application>
	    and wait until it hangs again.  When the debug build of
	    <application>ppp</application> hangs, start
	    <application>gdb</application> on the stuck process by
	    typing:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>gdb ppp `pgrep ppp`</userinput></screen>

	  <para xml:lang="en">At the <application>gdb</application> prompt,
	    use the <command>bt</command> or <command>where</command>
	    commands to get a stack trace.  Save the output of the
	    <application>gdb</application> session, and
	    <quote>detach</quote> from the running process by typing
	    <command>quit</command>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ppp-same-magic">
	  <para xml:lang="en">I keep seeing errors about magic being the same.  What
	    does it mean?</para>
	</question>

	<answer>
	  <para xml:lang="en">Occasionally, just after connecting, there may be
	    messages in the log that say <errorname>Magic is
	      same</errorname>.  Sometimes, these messages are
	    harmless, and sometimes one side or the other exits.  Most
	    PPP implementations cannot survive this problem, and even
	    if the link seems to come up, there will be repeated
	    configure requests and configure acknowledgments in the
	    log file until <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> eventually gives up and closes
	    the connection.</para>

	  <para xml:lang="en">This normally happens on server machines with slow
	    disks that are spawning a <citerefentry><refentrytitle>getty</refentrytitle><manvolnum>8</manvolnum></citerefentry> on the port, and
	    executing <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> from a login script or program after
	    login.  There were reports of it happening consistently
	    when using slirp.  The reason is that in the time taken
	    between <citerefentry><refentrytitle>getty</refentrytitle><manvolnum>8</manvolnum></citerefentry> exiting and <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> starting,
	    the client-side <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> starts sending Line Control
	    Protocol (LCP) packets.  Because ECHO is still switched on
	    for the port on the server, the client <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> sees
	    these packets <quote>reflect</quote> back.</para>

	  <para xml:lang="en">One part of the LCP negotiation is to establish a
	    magic number for each side of the link so that
	    <quote>reflections</quote> can be detected.  The protocol
	    says that when the peer tries to negotiate the same magic
	    number, a NAK should be sent and a new magic number should
	    be chosen.  During the period that the server port has
	    ECHO turned on, the client <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> sends LCP packets,
	    sees the same magic in the reflected packet and NAKs it.
	    It also sees the NAK reflect (which also means <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry>
	    must change its magic).  This produces a potentially
	    enormous number of magic number changes, all of which are
	    happily piling into the server's tty buffer.  As soon as
	    <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> starts on the server, it is flooded with magic
	    number changes and almost immediately decides it has tried
	    enough to negotiate LCP and gives up.  Meanwhile, the
	    client, who no longer sees the reflections, becomes happy
	    just in time to see a hangup from the server.</para>

	  <para xml:lang="en">This can be avoided by allowing the peer to start
	    negotiating with the following line in
	    <filename>ppp.conf</filename>:</para>

	  <programlisting xml:lang="en">set openmode passive</programlisting>

	  <para xml:lang="en">This tells <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> to wait for the server to
	    initiate LCP negotiations.  Some servers however may never
	    initiate negotiations.  In this case, try
	    something like:</para>

	  <programlisting xml:lang="en">set openmode active 3</programlisting>

	  <para xml:lang="en">This tells <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> to be passive for 3 seconds,
	    and then to start sending LCP requests.  If the peer
	    starts sending requests during this period, <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry>
	    will immediately respond rather than waiting for the full
	    3 second period.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ppp-lcp-constant">
	  <para xml:lang="en">LCP negotiations continue until the connection is
	    closed.  What is wrong?</para>
	</question>

	<answer>
	  <para xml:lang="en">There is currently an implementation mis-feature in
	    <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> where it does not associate LCP, CCP &amp;
	    IPCP responses with their original requests.  As a result,
	    if one PPP implementation is more than 6 seconds slower
	    than the other side, the other side will send two
	    additional LCP configuration requests.  This is
	    fatal.</para>

	  <para xml:lang="en">Consider two implementations,
	    <systemitem>A</systemitem> and <systemitem>B</systemitem>.
	    <systemitem>A</systemitem> starts sending LCP requests
	    immediately after connecting and
	    <systemitem>B</systemitem> takes 7 seconds to start.  When
	    <systemitem>B</systemitem> starts,
	    <systemitem>A</systemitem> has sent 3 LCP REQs.  We are
	    assuming the line has ECHO switched off, otherwise we
	    would see magic number problems as described in the
	    previous section.  <systemitem>B</systemitem> sends a REQ,
	    then an ACK to the first of <systemitem>A</systemitem>'s
	    REQs.  This results in <systemitem>A</systemitem> entering
	    the <acronym>OPENED</acronym> state and sending and ACK
	    (the first) back to <systemitem>B</systemitem>.  In the
	    meantime, <systemitem>B</systemitem> sends back two more
	    ACKs in response to the two additional REQs sent by
	    <systemitem>A</systemitem> before
	    <systemitem>B</systemitem> started up.
	    <systemitem>B</systemitem> then receives the first ACK
	    from <systemitem>A</systemitem> and enters the
	    <acronym>OPENED</acronym> state.
	    <systemitem>A</systemitem> receives the second ACK from
	    <systemitem>B</systemitem> and goes back to the
	    <acronym>REQ-SENT</acronym> state, sending another (forth)
	    REQ as per the RFC.  It then receives the third ACK and
	    enters the <acronym>OPENED</acronym> state.  In the
	    meantime, <systemitem>B</systemitem> receives the forth
	    REQ from <systemitem>A</systemitem>, resulting in it
	    reverting to the <acronym>ACK-SENT</acronym> state and
	    sending another (second) REQ and (forth) ACK as per the
	    RFC.  <systemitem>A</systemitem> gets the REQ, goes into
	    <acronym>REQ-SENT</acronym> and sends another REQ.  It
	    immediately receives the following ACK and enters
	    <acronym>OPENED</acronym>.</para>

	  <para xml:lang="en">This goes on until one side figures out that they are
	    getting nowhere and gives up.</para>

	  <para xml:lang="en">The best way to avoid this is to configure one side to
	    be <literal>passive</literal> — that is, make one
	    side wait for the other to start negotiating.  This can be
	    done with the following command:</para>

	  <programlisting xml:lang="en">set openmode passive</programlisting>

	  <para xml:lang="en">Care should be taken with this option.  This command
	    can also be used to limit the amount of time that
	    <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> waits for the peer to begin
	    negotiations:</para>

	  <programlisting xml:lang="en">set stopped <replaceable>N</replaceable></programlisting>

	  <para xml:lang="en">Alternatively, the following command (where
	    <replaceable>N</replaceable> is the number of seconds to
	    wait before starting negotiations) can be used:</para>

	  <programlisting xml:lang="en">set openmode active <replaceable>N</replaceable></programlisting>

	  <para xml:lang="en">Check the manual page for details.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ppp-shell-test-lockup">
	  <para xml:lang="en">Why does <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> lock up when I shell out to test
	    it?</para>
	</question>

	<answer>
	  <para xml:lang="en">When using <command>shell</command> or
	    <command>!</command>, <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> executes a shell
	    or the passed arguments.  The
	    <application>ppp</application> program will wait for the
	    command to complete before continuing.  Any attempt to
	    use the PPP link while running the command will appear as
	    a frozen link.  This is because <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> is
	    waiting for the command to complete.</para>

	  <para xml:lang="en">To execute commands like this, use
	    <command>!bg</command> instead.  This will execute the
	    given command in the background, and <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> can
	    continue to service the link.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ppp-null-modem">
	  <para xml:lang="en">Why does <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> over a null-modem cable never
	    exit?</para>
	</question>

	<answer>
	  <para xml:lang="en">There is no way for <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> to automatically
	    determine that a direct connection has been dropped.  This
	    is due to the lines that are used in a null-modem serial
	    cable.  When using this sort of connection, LQR should
	    always be enabled with the following line:</para>

	  <programlisting xml:lang="en">enable lqr</programlisting>

	  <para xml:lang="en">LQR is accepted by default if negotiated by the
	    peer.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ppp-auto-noreasondial">
	  <para xml:lang="en">Why does <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> dial for no reason in
	    <option>-auto</option> mode?</para>
	</question>

	<answer>
	  <para xml:lang="en">If <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> is dialing unexpectedly,
	    determine the cause, and set up dial filters to
	    prevent such dialing.</para>

	  <para xml:lang="en">To determine the cause, use the following line:</para>

	  <programlisting xml:lang="en">set log +tcp/ip</programlisting>

	  <para xml:lang="en">This will log all traffic through the connection.  The
	    next time the line comes up unexpectedly, the
	    reason will be logged with a convenient timestamp next to
	    it.</para>

	  <para xml:lang="en">Next, disable dialing under these circumstances.
	    Usually, this sort of problem arises due to DNS lookups.
	    To prevent DNS lookups from establishing a connection
	    (this will <emphasis>not</emphasis> prevent <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry>
	    from passing the packets through an established
	    connection), use the following:</para>

	  <programlisting xml:lang="en">set dfilter 1 deny udp src eq 53
set dfilter 2 deny udp dst eq 53
set dfilter 3 permit 0/0 0/0</programlisting>

	  <para xml:lang="en">This is not always suitable, as it will effectively
	    break demand-dial capabilities.  Most programs
	    will need a DNS lookup before doing any other network
	    related things.</para>

	  <para xml:lang="en">In the DNS case, try to determine what is actually
	    trying to resolve a host name.  A lot of the time,
	    <application>Sendmail</application> is the culprit.  Make
	    sure to configure <application>Sendmail</application> not
	    to do any DNS lookups in its configuration file.  See the
	    section on <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/smtp-dialup.html">using
	      email with a dialup connection</link> in the FreeBSD
	    Handbook for details.  You may
	    also want to add the following line to
	    <filename>.mc</filename>:</para>

	  <programlisting xml:lang="en">define(`confDELIVERY_MODE', `d')dnl</programlisting>

	  <para xml:lang="en">This will make <application>Sendmail</application>
	    queue everything until the queue is run, usually,
	    every 30 minutes, or until a <command>sendmail
	      -q</command> is done, perhaps from
	    <filename>/etc/ppp/ppp.linkup</filename>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ccp-errors">
	  <para xml:lang="en">What do these CCP errors mean?</para>
	</question>

	<answer>
	  <para xml:lang="en">I keep seeing the following errors in my log
	    file:</para>

	  <programlisting xml:lang="en">CCP: CcpSendConfigReq
CCP: Received Terminate Ack (1) state = Req-Sent (6)</programlisting>

	  <para xml:lang="en">This is because <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> is trying to negotiate
	    Predictor1 compression, but the peer does not want to
	    negotiate any compression at all.  The messages are
	    harmless, but can be silenced by disabling the
	    compression:</para>

	  <programlisting xml:lang="en">disable pred1</programlisting>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ppp-connectionspeed">
	  <para xml:lang="en">Why does <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> not log my connection
	    speed?</para>
	</question>

	<answer>
	  <para xml:lang="en">To log all lines of the modem
	    conversation, enable the
	    following:</para>

	  <programlisting xml:lang="en">set log +connect</programlisting>

	  <para xml:lang="en">This will make <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> log everything up until the
	    last requested <quote>expect</quote> string.</para>

	  <para xml:lang="en">To see the connect speed when using
	    PAP or CHAP,
	    make sure to configure <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> to
	    expect the whole CONNECT line, using something
	    like this:</para>

	  <programlisting xml:lang="en">set dial "ABORT BUSY ABORT NO\\sCARRIER TIMEOUT 4 \
  \"\" ATZ OK-ATZ-OK ATDT\\T TIMEOUT 60 CONNECT \\c \\n"</programlisting>

	  <para xml:lang="en">This gets the CONNECT, sends nothing, then expects a
	    line-feed, forcing <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> to read the whole CONNECT
	    response.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="ppp-ignores-backslash">
	  <para xml:lang="en">Why does <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> ignore the <literal>\</literal>
	    character in my chat script?</para>
	</question>

	<answer>
	  <para xml:lang="en">The <application>ppp</application> utility parses each
	    line in its configuration files so that it can interpret
	    strings such as <literal>set phone "123 456 789"</literal>
	    correctly and realize that the number is actually only
	    one argument.  To specify a
	    <literal>"</literal> character, escape it
	    using a backslash (<literal>\</literal>).</para>

	  <para xml:lang="en">When the chat interpreter parses each argument, it
	    re-interprets the argument to find any special escape
	    sequences such as <literal>\P</literal> or
	    <literal>\T</literal>.  As a result
	    of this double-parsing, remember to use the
	    correct number of escapes.</para>

	  <para xml:lang="en">To actually send a <literal>\</literal>
	    character, do something
	    like:</para>

	  <programlisting xml:lang="en">set dial "\"\" ATZ OK-ATZ-OK AT\\\\X OK"</programlisting>

	  <para xml:lang="en">It will result in the following sequence:</para>

	  <programlisting xml:lang="en">ATZ
OK
AT\X
OK</programlisting>

	  <para xml:lang="en">Or:</para>

	  <programlisting xml:lang="en">set phone 1234567
set dial "\"\" ATZ OK ATDT\\T"</programlisting>

	  <para xml:lang="en">It will result in the following sequence:</para>

	  <programlisting xml:lang="en">ATZ
OK
ATDT1234567</programlisting>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="fcs-errors">
	  <para xml:lang="en">What are FCS errors?</para>
	</question>

	<answer>
	  <para xml:lang="en">FCS stands for Frame Check Sequence.  Each PPP packet
	    has a checksum attached to ensure that the data being
	    received is the data being sent.  If the FCS of an
	    incoming packet is incorrect, the packet is dropped and
	    the HDLC FCS count is increased.  The HDLC error values
	    can be displayed using the <literal>show hdlc</literal>
	    command.</para>

	  <para xml:lang="en">If the link is bad or if the serial driver is dropping
	    packets, it will produce the occasional FCS error.
	    This is not usually worth worrying about although it does
	    slow down the compression protocols substantially.</para>

	  <para xml:lang="en">If the link freezes as soon as it connects and
	    produces a large number of FCS errors, make sure the modem
	    is not using software flow control (XON/XOFF).  If the
	    link must use software flow control, use
	    <literal>set accmap 0x000a0000</literal> to
	    tell <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> to escape the <literal>^Q</literal> and
	    <literal>^S</literal> characters.</para>

	  <para xml:lang="en">Another reason for too many FCS errors may be
	    that the remote end has stopped talking
	    <acronym>PPP</acronym>.  In this case, enable
	    <literal>async</literal> logging to
	    determine if the incoming data is actually a login or
	    shell prompt.  If it is a shell prompt at the remote
	    end, it is possible to terminate <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> without
	    dropping the line by using <command>close lcp</command>
	    followed by <command>term</command>) to reconnect to
	    the shell on the remote machine.</para>

	  <para xml:lang="en">If nothing in the log file indicates why the link
	    was terminated, ask the remote
	    administrator or ISP why the session was
	    terminated.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="desperation">
	  <para xml:lang="en">None of this helps — I am desperate!  What can I
	    do?</para>
	</question>

	<answer>
	  <para xml:lang="en">If all else fails, send the details of the error, the
	    configuration files, how <citerefentry><refentrytitle>ppp</refentrytitle><manvolnum>8</manvolnum></citerefentry> is being started, the
	    relevant parts of the log file, and the
	    output of <command>netstat -rn</command>, before and after
	    connecting, to the <link xlink:href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions">FreeBSD general questions mailing list</link>.</para>
	</answer>
      </qandaentry>
    </qandaset>
  </chapter>

  <chapter xml:id="serial">
    <title xml:lang="en">Serial Communications</title>

    <para xml:lang="en">This section answers common questions about serial
      communications with FreeBSD.  PPP is covered in the <link linkend="networking">Networking</link> section.</para>

    <qandaset>
      <qandaentry>
	<question xml:id="multiport-serial-support">
	  <para xml:lang="en">Which multi-port serial cards are supported by
	    FreeBSD?</para>
	</question>

	<answer>
	  <para xml:lang="en">There is a list of these in the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/serial.html">Serial
	      Communications</link> chapter of the Handbook.</para>

	  <para xml:lang="en">Most multi-port PCI cards that are based on 16550 or
	    clones are supported with no extra effort.</para>

	  <para xml:lang="en">Some unnamed clone cards have also been known to work,
	    especially those that claim to be AST compatible.</para>

	  <para xml:lang="en">Check <citerefentry><refentrytitle>uart</refentrytitle><manvolnum>4</manvolnum></citerefentry> and <citerefentry><refentrytitle>sio</refentrytitle><manvolnum>4</manvolnum></citerefentry> to get more
	    information on configuring such cards.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="serial-console-prompt">
	  <para xml:lang="en">How do I get the boot: prompt to show on the serial
	    console?</para>
	</question>

	<answer>
	  <para xml:lang="en">See <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/serialconsole-setup.html">this
	      section of the Handbook</link>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="found-serial">
	  <para xml:lang="en">How do I tell if FreeBSD found my serial ports or modem
	    cards?</para>
	</question>

	<answer>
	  <para xml:lang="en">As the FreeBSD kernel boots, it will probe for the serial
	    ports for which the kernel is configured.
	    Either watch the boot messages closely
	    or run this command after the system is up and
	    running:</para>

	  <screen xml:lang="en"><prompt>%</prompt> <userinput>grep -E '^(sio|uart)[0-9]' &lt; /var/run/dmesg.boot</userinput>
sio0: &lt;16550A-compatible COM port&gt; port 0x3f8-0x3ff irq 4 flags 0x10 on acpi0
sio0: type 16550A
sio1: &lt;16550A-compatible COM port&gt; port 0x2f8-0x2ff irq 3 on acpi0
sio1: type 16550A</screen>

	  <para xml:lang="en">This example shows two serial ports.  The first is on
	    IRQ4, port address
	    <literal>0x3f8</literal>, and has a 16550A-type UART chip.
	    The second uses the same kind of chip but is on
	    IRQ3 and is at port address
	    <literal>0x2f8</literal>.  Internal modem cards are
	    treated just like serial ports, except that they
	    always have a modem attached to the
	    port.</para>

	  <para xml:lang="en">The <filename>GENERIC</filename> kernel includes
	    support for two serial ports using the same IRQ and port
	    address settings in the above example.  If these settings
	    are not right for the system, or if there are more modem
	    cards or serial ports than the kernel is
	    configured for, reconfigure using the instructions in
	    <link linkend="make-kernel">building a kernel</link>
	    for more details.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="access-serial-ports">
	  <para xml:lang="en">How do I access the serial ports on FreeBSD?</para>
	</question>

	<answer>
	  <para xml:lang="en">The third serial port, <filename>sio2</filename>,
	    or <filename>COM3</filename>,
	    is on <filename>/dev/cuad2</filename> for dial-out
	    devices, and on <filename>/dev/ttyd2</filename> for
	    dial-in devices.  What is the difference between these two
	    classes of devices?</para>

	  <para xml:lang="en">When
	    opening <filename>/dev/ttydX</filename> in blocking mode,
	    a process will wait for the corresponding
	    <filename>cuadX</filename> device to become inactive, and
	    then wait for the carrier detect line to go active.  When
	    the <filename>cuadX</filename> device is opened, it makes
	    sure the serial port is not already in use by the
	    <filename>ttydX</filename> device.  If the port is
	    available, it steals it from the
	    <filename>ttydX</filename> device.  Also, the
	    <filename>cuadX</filename> device does not care about
	    carrier detect.  With this scheme and an auto-answer
	    modem, remote users can log in and local users can still
	    dial out with the same modem and the system will take care
	    of all the conflicts.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="enable-multiport-serial">
	  <para xml:lang="en">How do I enable support for a multi-port serial
	    card?</para>
	</question>

	<answer>
	  <para xml:lang="en">The section on kernel configuration provides
	    information about configuring the kernel.  For a
	    multi-port serial card, place an <citerefentry><refentrytitle>sio</refentrytitle><manvolnum>4</manvolnum></citerefentry> line for each
	    serial port on the card in the <citerefentry vendor="current"><refentrytitle>device.hints</refentrytitle><manvolnum>5</manvolnum></citerefentry> file.
	    But place the IRQ specifiers on only one of the entries.
	    All of the ports on the card should share one IRQ.  For
	    consistency, use the last serial port to specify the IRQ.
	    Also, specify the following option in the kernel
	    configuration file:</para>

	  <programlisting xml:lang="en">options COM_MULTIPORT</programlisting>

	  <para xml:lang="en">The following <filename>/boot/device.hints</filename>
	    example is for an AST 4-port serial card on
	    IRQ 12:</para>

	  <programlisting xml:lang="en">hint.sio.4.at="isa"
hint.sio.4.port="0x2a0"
hint.sio.4.flags="0x701"
hint.sio.5.at="isa"
hint.sio.5.port="0x2a8"
hint.sio.5.flags="0x701"
hint.sio.6.at="isa"
hint.sio.6.port="0x2b0"
hint.sio.6.flags="0x701"
hint.sio.7.at="isa"
hint.sio.7.port="0x2b8"
hint.sio.7.flags="0x701"
hint.sio.7.irq="12"</programlisting>

	  <para xml:lang="en">The flags indicate that the master port has minor
	    number <literal>7</literal> (<literal>0x700</literal>),
	    and all the ports share an IRQ
	    (<literal>0x001</literal>).</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="default-serial-params">
	  <para xml:lang="en">Can I set the default serial parameters for a
	    port?</para>
	</question>

	<answer>
	  <para xml:lang="en">See the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/serial.html#serial-hw-config">Serial
	      Communications</link> section in the FreeBSD
	    Handbook.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="enable-dialup">
	  <para xml:lang="en">How can I enable dialup logins on my modem?</para>
	</question>

	<answer>
	  <para xml:lang="en">Refer to the section about <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/dialup.html">Dial-in
	      Services</link> in the FreeBSD Handbook.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="dumb-terminal">
	  <para xml:lang="en">How can I connect a dumb terminal to my FreeBSD
	    box?</para>
	</question>

	<answer>
	  <para xml:lang="en">This information is in the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/term.html">Terminals</link>
	    section of the FreeBSD Handbook.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="cannot-tip">
	  <para xml:lang="en">Why can I not run <command>tip</command> or
	    <command>cu</command>?</para>
	</question>

	<answer>
	  <para xml:lang="en">The built-in <citerefentry><refentrytitle>tip</refentrytitle><manvolnum>1</manvolnum></citerefentry> and
	    <citerefentry><refentrytitle>cu</refentrytitle><manvolnum>1</manvolnum></citerefentry> utilities can only access the
	    <filename>/var/spool/lock</filename> directory via user
	    <systemitem class="username">uucp</systemitem> and group
	    <systemitem class="groupname">dialer</systemitem>.
	    Use the <systemitem class="groupname">dialer</systemitem> group to control
	    who has access to the modem or remote systems by adding
	    user accounts to <systemitem class="groupname">dialer</systemitem>.</para>

	  <para xml:lang="en">Alternatively, everyone can be configured to run
	    <citerefentry><refentrytitle>tip</refentrytitle><manvolnum>1</manvolnum></citerefentry> and <citerefentry><refentrytitle>cu</refentrytitle><manvolnum>1</manvolnum></citerefentry> by typing:</para>

	  <screen xml:lang="en"><prompt>#</prompt> <userinput>chmod 4511 /usr/bin/cu</userinput>
<prompt>#</prompt> <userinput>chmod 4511 /usr/bin/tip</userinput></screen>
	</answer>
      </qandaentry>
    </qandaset>
  </chapter>

  <chapter xml:id="misc">
    <title xml:lang="en">Miscellaneous Questions</title>

    <qandaset>
      <qandaentry>
	<question xml:id="more-swap">
	  <para xml:lang="en">FreeBSD uses a lot of swap space even when the computer
	    has free memory left.  Why?</para>
	</question>

	<answer>
	  <para xml:lang="en">FreeBSD will proactively move entirely idle, unused pages
	    of main memory into swap in order to make more main memory
	    available for active use.  This heavy use of swap is
	    balanced by using the extra free memory for
	    caching.</para>

	  <para xml:lang="en">Note that while FreeBSD is proactive in this regard, it
	    does not arbitrarily decide to swap pages when the system
	    is truly idle.  Thus, the system will not be all
	    paged out after leaving it
	    idle overnight.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="top-freemem">
	  <para xml:lang="en">Why does <command>top</command> show very little free
	    memory even when I have very few programs running?</para>
	</question>

	<answer>
	  <para xml:lang="en">The simple answer is that free memory is wasted
	    memory.  Any memory that programs do not actively
	    allocate is used within the FreeBSD kernel as disk cache.
	    The values shown by <citerefentry><refentrytitle>top</refentrytitle><manvolnum>1</manvolnum></citerefentry> labeled as
	    <literal>Inact</literal> and <literal>Laundry</literal>
	    are cached data at different
	    aging levels.  This cached data means the system does not
	    have to access a slow disk again for data it has accessed
	    recently, thus increasing overall performance.  In
	    general, a low value shown for <literal>Free</literal>
	    memory in <citerefentry><refentrytitle>top</refentrytitle><manvolnum>1</manvolnum></citerefentry> is good, provided it is not
	    <emphasis>very</emphasis> low.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="chmod-symlinks">
	  <para xml:lang="en">Why will <command>chmod</command> not change the
	    permissions on symlinks?</para>
	</question>

	<answer>
	  <para xml:lang="en">Symlinks do not have permissions, and by default,
	    <citerefentry><refentrytitle>chmod</refentrytitle><manvolnum>1</manvolnum></citerefentry> will follow symlinks to change the
	    permissions on the source file, if possible.  For
	    the file, <filename>foo</filename> with a symlink named
	    <filename>bar</filename>, this command
	    will always succeed.</para>

	  <screen xml:lang="en"><prompt>%</prompt> <userinput>chmod g-w bar</userinput></screen>

	  <para xml:lang="en">However, the permissions on <filename>bar</filename>
	    will not have changed.</para>

	  <para xml:lang="en">When changing modes of the file hierarchies rooted in
	    the files instead of the files themselves, use
	    either <option>-H</option> or <option>-L</option> together
	    with <option>-R</option> to make this work.  See
	    <citerefentry><refentrytitle>chmod</refentrytitle><manvolnum>1</manvolnum></citerefentry> and <citerefentry><refentrytitle>symlink</refentrytitle><manvolnum>7</manvolnum></citerefentry> for more
	    information.</para>

	  <warning>
	    <para xml:lang="en"><option>-R</option> does a
	      <emphasis>recursive</emphasis> <citerefentry><refentrytitle>chmod</refentrytitle><manvolnum>1</manvolnum></citerefentry>.  Be
	      careful about specifying directories or symlinks to
	      directories to <citerefentry><refentrytitle>chmod</refentrytitle><manvolnum>1</manvolnum></citerefentry>.  To change the
	      permissions of a directory referenced by a symlink, use
	      <citerefentry><refentrytitle>chmod</refentrytitle><manvolnum>1</manvolnum></citerefentry> without any options and follow the symlink
	      with a trailing slash (<filename>/</filename>).  For
	      example, if <filename>foo</filename> is a symlink to
	      directory <filename>bar</filename>, to
	      change the permissions of <filename>foo</filename>
	      (actually <filename>bar</filename>), do
	      something like:</para>

	    <screen xml:lang="en"><prompt>%</prompt> <userinput>chmod 555 foo/</userinput></screen>

	    <para xml:lang="en">With the trailing slash, <citerefentry><refentrytitle>chmod</refentrytitle><manvolnum>1</manvolnum></citerefentry> will follow
	      the symlink, <filename>foo</filename>, to change the
	      permissions of the directory,
	      <filename>bar</filename>.</para>
	  </warning>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="dos-binaries">
	  <para xml:lang="en">Can I run DOS binaries under FreeBSD?</para>
	</question>

	<answer>
	  <para xml:lang="en">Yes.  A DOS emulation program,
	    <package>emulators/doscmd</package>, is available in the
	    FreeBSD Ports Collection.</para>

	  <para xml:lang="en">If <application>doscmd</application> will not suffice,
	    <package>emulators/pcemu</package>
	    emulates an 8088 and enough BIOS services to run many DOS
	    text-mode applications.  It requires the X Window
	    System.</para>

	  <para xml:lang="en">The Ports Collection also has
	    <package>emulators/dosbox</package>.  The main focus of
	    this application is emulating old DOS games using the
	    local file system for files.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="translation">
	  <para xml:lang="en">What do I need to do to translate a FreeBSD document into
	    my native language?</para>
	</question>

	<answer>
	  <para xml:lang="en">See the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/fdp-primer/translations.html">Translation
	      <acronym>FAQ</acronym></link> in the FreeBSD Documentation
	    Project Primer.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="freebsd-mail-bounces">
	  <para xml:lang="en">Why does my email to any address at <systemitem class="fqdomainname">FreeBSD.org</systemitem>
	    bounce?</para>
	</question>

	<answer>
	  <para xml:lang="en">The <systemitem class="fqdomainname">FreeBSD.org</systemitem> mail
	    system implements some <application>Postfix</application>
	    checks on incoming mail and rejects mail that is either
	    from misconfigured relays or otherwise appears likely to
	    be spam.  Some of the specific requirements are:</para>

	  <itemizedlist>
	    <listitem>
	      <para xml:lang="en">The IP address of the SMTP client must
		"reverse-resolve" to a forward confirmed
		hostname.</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en">The fully-qualified hostname given in the
		SMTP conversation (either HELO or EHLO) must resolve
		to the IP address of the client.</para>
	    </listitem>
	  </itemizedlist>

	  <para xml:lang="en">Other advice to help mail reach its destination
	    include:</para>

	  <itemizedlist>
	    <listitem>
	      <para xml:lang="en">Mail should be sent in plain text, and messages
		sent to mailing lists should generally be no more than
		200KB in length.</para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en">Avoid excessive cross posting.  Choose
		<emphasis>one</emphasis> mailing list which seems most
		relevant and send it there.</para>
	    </listitem>
	  </itemizedlist>

	  <para xml:lang="en">If you still have trouble with email infrastructure at
	    <systemitem class="fqdomainname">FreeBSD.org</systemitem>,
	    send a note with the details to
	    <email>postmaster@freebsd.org</email>;  Include a
	    date/time interval so that logs may be reviewed —
	    and note that we only keep one week's worth of mail logs.
	    (Be sure to specify the time zone or offset from
	    UTC.)</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="free-account">
	  <para xml:lang="en">Where can I find a free FreeBSD account?</para>
	</question>

	<answer>
	  <para xml:lang="en">While FreeBSD does not provide open access to any of
	    their servers, others do provide open access <trademark class="registered">UNIX</trademark>
	    systems.  The charge varies and limited services may be
	    available.</para>

	  <para xml:lang="en"><link xlink:href="http://www.arbornet.org/">Arbornet,
	      Inc</link>, also known as <emphasis>M-Net</emphasis>,
	    has been providing open access to <trademark class="registered">UNIX</trademark> systems since
	    1983.  Starting on an Altos running System III, the site
	    switched to BSD/OS in 1991.  In June of 2000, the site
	    switched again to FreeBSD.  <emphasis>M-Net</emphasis> can be
	    accessed via <application>telnet</application> and
	    <application>SSH</application> and provides basic access
	    to the entire FreeBSD software suite.  However, network
	    access is limited to members and patrons who donate to the
	    system, which is run as a non-profit organization.
	    <emphasis>M-Net</emphasis> also provides an bulletin board
	    system and interactive chat.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="daemon-name">
	  <para xml:lang="en">What is the cute little red guy's name?</para>
	</question>

	<answer>
	  <para xml:lang="en">He does not have one, and is just called <quote>the
	      BSD daemon</quote>.  If you insist upon using a name,
	    call him <quote>beastie</quote>.  Note that
	    <quote>beastie</quote> is pronounced
	    <quote>BSD</quote>.</para>

	  <para xml:lang="en">More about the BSD daemon is available on his <link xlink:href="http://www.mckusick.com/beastie/index.html">home
	      page</link>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="use-beastie">
	  <para xml:lang="en">Can I use the BSD daemon image?</para>
	</question>

	<answer>
	  <para xml:lang="en">Perhaps.  The BSD daemon is copyrighted by Marshall
	    Kirk McKusick.  Check his <link xlink:href="http://www.mckusick.com/beastie/mainpage/copyright.html">Statement
	      on the Use of the BSD Daemon Figure</link> for detailed
	    usage terms.</para>

	  <para xml:lang="en">In summary, the image can be used in a tasteful
	    manner, for personal use, so long as appropriate credit
	    is given.  Before using the logo commercially, contact
	    Kirk McKusick <email>mckusick@FreeBSD.org</email> for permission.  More details are
	    available on the <link xlink:href="http://www.mckusick.com/beastie/index.html">BSD
	      Daemon's home page</link>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="daemon-images">
	  <para xml:lang="en">Do you have any BSD daemon images I could use?</para>
	</question>

	<answer>
	  <para xml:lang="en">Xfig and eps drawings are available under
	    <filename>/usr/share/examples/BSD_daemon/</filename>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="glossary">
	  <para xml:lang="en">I have seen an acronym or other term on the mailing
	    lists and I do not understand what it means.  Where should
	    I look?</para>
	</question>

	<answer>
	  <para xml:lang="en">Refer to the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/freebsd-glossary.html">FreeBSD
	      Glossary</link>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="bikeshed-painting">
	  <para xml:lang="en">Why should I care what color the bikeshed is?</para>
	</question>

	<answer>
	  <para xml:lang="en">The really, really short answer is that you should
	    not.  The somewhat longer answer is that just because you
	    are capable of building a bikeshed does not mean you
	    should stop others from building one just because you do
	    not like the color they plan to paint it.  This is a
	    metaphor indicating that you need not argue about every
	    little feature just because you know enough to do so.
	    Some people have commented that the amount of noise
	    generated by a change is inversely proportional to the
	    complexity of the change.</para>

	  <para xml:lang="en">The longer and more complete answer is that after a
	    very long argument about whether <citerefentry><refentrytitle>sleep</refentrytitle><manvolnum>1</manvolnum></citerefentry> should take
	    fractional second arguments, Poul-Henning Kamp <email>phk@FreeBSD.org</email> posted a long
	    message entitled <quote><link xlink:href="http://www.bikeshed.com">A
	      bike shed (any color will do) on greener
	      grass...</link></quote>.  The appropriate portions of
	    that message are quoted below.</para>

	  <blockquote>
	    <attribution xml:lang="en">Poul-Henning Kamp <email>phk@FreeBSD.org</email> on <link xlink:href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hackers">freebsd-hackers</link>, October 2,
	      1999</attribution>

	    <para xml:lang="en"><quote>What is it about this bike shed?</quote>
	      Some of you have asked me.</para>

	    <para xml:lang="en">It is a long story, or rather it is an old story,
	      but it is quite short actually.  C. Northcote Parkinson
	      wrote a book in the early 1960s, called
	      <quote>Parkinson's Law</quote>, which contains a lot of
	      insight into the dynamics of management.</para>

	    <para xml:lang="en"><emphasis>[snip a bit of commentary on the
		book]</emphasis></para>

	    <para xml:lang="en">In the specific example involving the bike shed, the
	      other vital component is an atomic power-plant, I guess
	      that illustrates the age of the book.</para>

	    <para xml:lang="en">Parkinson shows how you can go into the board of
	      directors and get approval for building a multi-million
	      or even billion dollar atomic power plant, but if you
	      want to build a bike shed you will be tangled up in
	      endless discussions.</para>

	    <para xml:lang="en">Parkinson explains that this is because an atomic
	      plant is so vast, so expensive and so complicated that
	      people cannot grasp it, and rather than try, they fall
	      back on the assumption that somebody else checked all
	      the details before it got this far.  Richard P. Feynmann
	      gives a couple of interesting, and very much to the
	      point, examples relating to Los Alamos in his
	      books.</para>

	    <para xml:lang="en">A bike shed on the other hand.  Anyone can build one
	      of those over a weekend, and still have time to watch
	      the game on TV.  So no matter how well prepared, no
	      matter how reasonable you are with your proposal,
	      somebody will seize the chance to show that he is doing
	      his job, that he is paying attention, that he is
	      <emphasis>here</emphasis>.</para>

	    <para xml:lang="en">In Denmark we call it <quote>setting your
		fingerprint</quote>.  It is about personal pride and
	      prestige, it is about being able to point somewhere and
	      say <quote>There!  <emphasis>I</emphasis> did
		that.</quote> It is a strong trait in politicians, but
	      present in most people given the chance.  Just think
	      about footsteps in wet cement.</para>
	  </blockquote>
	</answer>
      </qandaentry>
    </qandaset>
  </chapter>

  <chapter xml:id="funnies">
    <title xml:lang="en">The FreeBSD Funnies</title>

    <qandaset>
      <qandaentry>
	<question xml:id="very-very-cool">
	  <para xml:lang="en">How cool is FreeBSD?</para>
	</question>

	<answer>
	  <para xml:lang="en">Q.  Has anyone done any temperature testing while
	    running FreeBSD?  I know <trademark class="registered">Linux</trademark> runs cooler than DOS, but
	    have never seen a mention of FreeBSD.  It seems to run really
	    hot.</para>

	  <para xml:lang="en">A.  No, but we have done numerous taste tests on
	    blindfolded volunteers who have also had 250 micrograms of
	    LSD-25 administered beforehand.  35% of the volunteers
	    said that FreeBSD tasted sort of orange, whereas <trademark class="registered">Linux</trademark>
	    tasted like purple haze.  Neither group mentioned any
	    significant variances in temperature.  We eventually had
	    to throw the results of this survey out entirely anyway
	    when we found that too many volunteers were wandering out
	    of the room during the tests, thus skewing the results.
	    We think most of the volunteers are at Apple now, working
	    on their new <quote>scratch and sniff</quote> GUI.  It is
	    a funny old business we are in!</para>

	  <para xml:lang="en">Seriously, FreeBSD uses the <acronym>HLT</acronym> (halt)
	    instruction when the system is idle thus lowering its
	    energy consumption and therefore the heat it generates.
	    Also if you have <acronym>ACPI</acronym> (Advanced
	    Configuration and Power Interface) configured, then FreeBSD
	    can also put the CPU into a low power mode.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="letmeoutofhere">
	  <para xml:lang="en">Who is scratching in my memory banks??</para>
	</question>

	<answer>
	  <para xml:lang="en">Q.  Is there anything <quote>odd</quote> that FreeBSD
	    does when compiling the kernel which would cause the
	    memory to make a scratchy sound?  When compiling (and for
	    a brief moment after recognizing the floppy drive upon
	    startup, as well), a strange scratchy sound emanates from
	    what appears to be the memory banks.</para>

	  <para xml:lang="en">A.  Yes!  You will see frequent references to
	    <quote>daemons</quote> in the BSD documentation, and what
	    most people do not know is that this refers to genuine,
	    non-corporeal entities that now possess your computer.
	    The scratchy sound coming from your memory is actually
	    high-pitched whispering exchanged among the daemons as
	    they best decide how to deal with various system
	    administration tasks.</para>

	  <para xml:lang="en">If the noise gets to you, a good <command>fdisk
	      /mbr</command> from DOS will get rid of them, but do not
	    be surprised if they react adversely and try to stop you.
	    In fact, if at any point during the exercise you hear the
	    satanic voice of Bill Gates coming from the built-in
	    speaker, take off running and do not ever look back!
	    Freed from the counterbalancing influence of the BSD
	    daemons, the twin demons of DOS and <trademark class="registered">Windows</trademark> are often
	    able to re-assert total control over your machine to the
	    eternal damnation of your soul.  Now that you know, given
	    a choice you would probably prefer to get used to the
	    scratchy noises, no?</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="changing-lightbulbs">
	  <para xml:lang="en">How many FreeBSD hackers does it take to change a
	    lightbulb?</para>
	</question>

	<answer>
	  <para xml:lang="en">One thousand, one hundred and sixty-nine:</para>

	  <para xml:lang="en">Twenty-three to complain to -CURRENT about the lights
	    being out;</para>

	  <para xml:lang="en">Four to claim that it is a configuration problem, and
	    that such matters really belong on -questions;</para>

	  <para xml:lang="en">Three to submit PRs about it, one of which is misfiled
	    under doc and consists only of <quote>it's
	      dark</quote>;</para>

	  <para xml:lang="en">One to commit an untested lightbulb which breaks
	    buildworld, then back it out five minutes later;</para>

	  <para xml:lang="en">Eight to flame the PR originators for not including
	    patches in their PRs;</para>

	  <para xml:lang="en">Five to complain about buildworld being broken;</para>

	  <para xml:lang="en">Thirty-one to answer that it works for them, and they
	    must have updated at a bad time;</para>

	  <para xml:lang="en">One to post a patch for a new lightbulb to
	    -hackers;</para>

	  <para xml:lang="en">One to complain that he had patches for this three
	    years ago, but when he sent them to -CURRENT they were
	    just ignored, and he has had bad experiences with the PR
	    system; besides, the proposed new lightbulb is
	    non-reflexive;</para>

	  <para xml:lang="en">Thirty-seven to scream that lightbulbs do not belong
	    in the base system, that committers have no right to do
	    things like this without consulting the Community, and
	    WHAT IS -CORE DOING ABOUT IT!?</para>

	  <para xml:lang="en">Two hundred to complain about the color of the bicycle
	    shed;</para>

	  <para xml:lang="en">Three to point out that the patch breaks
	    <citerefentry><refentrytitle>style</refentrytitle><manvolnum>9</manvolnum></citerefentry>;</para>

	  <para xml:lang="en">Seventeen to complain that the proposed new lightbulb
	    is under GPL;</para>

	  <para xml:lang="en">Five hundred and eighty-six to engage in a flame war
	    about the comparative advantages of the GPL, the BSD
	    license, the MIT license, the NPL, and the personal
	    hygiene of unnamed FSF founders;</para>

	  <para xml:lang="en">Seven to move various portions of the thread to -chat
	    and -advocacy;</para>

	  <para xml:lang="en">One to commit the suggested lightbulb, even though it
	    shines dimmer than the old one;</para>

	  <para xml:lang="en">Two to back it out with a furious flame of a commit
	    message, arguing that FreeBSD is better off in the dark than
	    with a dim lightbulb;</para>

	  <para xml:lang="en">Forty-six to argue vociferously about the backing out
	    of the dim lightbulb and demanding a statement from
	    -core;</para>

	  <para xml:lang="en">Eleven to request a smaller lightbulb so it will fit
	    their Tamagotchi if we ever decide to port FreeBSD to that
	    platform;</para>

	  <para xml:lang="en">Seventy-three to complain about the SNR on -hackers
	    and -chat and unsubscribe in protest;</para>

	  <para xml:lang="en">Thirteen to post <quote>unsubscribe</quote>,
	    <quote>How do I unsubscribe?</quote>, or <quote>Please
	      remove me from the list</quote>, followed by the usual
	    footer;</para>

	  <para xml:lang="en">One to commit a working lightbulb while everybody is
	    too busy flaming everybody else to notice;</para>

	  <para xml:lang="en">Thirty-one to point out that the new lightbulb would
	    shine 0.364% brighter if compiled with TenDRA (although it
	    will have to be reshaped into a cube), and that FreeBSD
	    should therefore switch to TenDRA instead of GCC;</para>

	  <para xml:lang="en">One to complain that the new lightbulb lacks
	    fairings;</para>

	  <para xml:lang="en">Nine (including the PR originators) to ask <quote>what
	      is MFC?</quote>;</para>

	  <para xml:lang="en">Fifty-seven to complain about the lights being out two
	    weeks after the bulb has been changed.</para>

	  <para xml:lang="en"><emphasis>Nik Clayton <email>nik@FreeBSD.org</email> adds:</emphasis></para>

	  <para xml:lang="en"><emphasis>I was laughing quite hard at
	      this.</emphasis></para>

	  <para xml:lang="en"><emphasis>And then I thought, <quote>Hang on,
	      shouldn't there be '1 to document it.' in that list
	      somewhere?</quote></emphasis></para>

	  <para xml:lang="en"><emphasis>And then I was enlightened
	      :-)</emphasis></para>

	  <para xml:lang="en"><emphasis>Thomas Abthorpe <email>tabthorpe@FreeBSD.org</email></emphasis> says:
	    <quote>None, <emphasis>real</emphasis> FreeBSD hackers are
	      not afraid of the dark!</quote></para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="dev-null">
	  <para xml:lang="en">Where does data written to
	    <filename>/dev/null</filename> go?</para>
	</question>

	<answer>
	  <para xml:lang="en">It goes into a special data sink in the CPU where it
	    is converted to heat which is vented through the heatsink
	    / fan assembly.  This is why CPU cooling is increasingly
	    important; as people get used to faster processors, they
	    become careless with their data and more and more of it
	    ends up in <filename>/dev/null</filename>, overheating
	    their CPUs.  If you delete <filename>/dev/null</filename>
	    (which effectively disables the CPU data sink) your CPU
	    may run cooler but your system will quickly become
	    constipated with all that excess data and start to behave
	    erratically.  If you have a fast network connection you
	    can cool down your CPU by reading data out of
	    <filename>/dev/random</filename> and sending it off
	    somewhere; however you run the risk of overheating your
	    network connection and <filename>/</filename> or angering
	    your ISP, as most of the data will end up getting
	    converted to heat by their equipment, but they generally
	    have good cooling, so if you do not overdo it you should
	    be OK.</para>

	  <para xml:lang="en"><emphasis>Paul Robinson adds:</emphasis></para>

	  <para xml:lang="en">There are other methods.  As every good sysadmin
	    knows, it is part of standard practice to send data to the
	    screen of interesting variety to keep all the pixies that
	    make up your picture happy.  Screen pixies (commonly
	    mis-typed or re-named as <quote>pixels</quote>) are
	    categorized by the type of hat they wear (red, green or
	    blue) and will hide or appear (thereby showing the color
	    of their hat) whenever they receive a little piece of
	    food.  Video cards turn data into pixie-food, and then
	    send them to the pixies — the more expensive the
	    card, the better the food, so the better behaved the
	    pixies are.  They also need constant stimulation —
	    this is why screen savers exist.</para>

	  <para xml:lang="en">To take your suggestions further, you could just throw
	    the random data to console, thereby letting the pixies
	    consume it.  This causes no heat to be produced at all,
	    keeps the pixies happy and gets rid of your data quite
	    quickly, even if it does make things look a bit messy on
	    your screen.</para>

	  <para xml:lang="en">Incidentally, as an ex-admin of a large ISP who
	    experienced many problems attempting to maintain a stable
	    temperature in a server room, I would strongly discourage
	    people sending the data they do not want out to the
	    network.  The fairies who do the packet switching and
	    routing get annoyed by it as well.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="punk-my-friend">
	  <para xml:lang="en">My colleague sits at the computer too much, how
	    can I prank her?</para>
	</question>

	<answer>
	  <para xml:lang="en">Install <package role="port">games/sl</package> and
	    wait for her to mistype <userinput>sl</userinput> for
	    <command>ls</command>.</para>
	</answer>
      </qandaentry>
    </qandaset>
  </chapter>

  <chapter xml:id="advanced">
    <title xml:lang="en">Advanced Topics</title>

    <qandaset>
      <qandaentry>
	<question xml:id="learn-advanced">
	  <para xml:lang="en">How can I learn more about FreeBSD's internals?</para>
	</question>

	<answer>
	  <para xml:lang="en">See the <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/arch-handbook">FreeBSD
	      Architecture Handbook</link>.</para>

	  <para xml:lang="en">Additionally, much general <trademark class="registered">UNIX</trademark> knowledge is
	    directly applicable to FreeBSD.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="how-to-contribute">
	  <para xml:lang="en">How can I contribute to FreeBSD?  What can I do to
	    help?</para>
	</question>

	<answer>
	  <para xml:lang="en">We accept all types of contributions: documentation,
	    code, and even art.  See the article on <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/articles/contributing/article.html">Contributing
	      to FreeBSD</link> for specific advice on how to do
	    this.</para>

	  <para xml:lang="en">And thanks for the thought!</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="define-snap-release">
	  <para xml:lang="en">What are snapshots and releases?</para>
	</question>

	<answer>
	  <para xml:lang="en">There are currently 2 active/semi-active
	    branches in the FreeBSD <link xlink:href="http://svnweb.FreeBSD.org/base/">Subversion
	      Repository</link>.  (Earlier branches are only changed
	    very rarely, which is why there are only 2
	    active branches of development):</para>

	  <itemizedlist>
	    <listitem>
	      <para xml:lang="en"><symbol>stable/11/</symbol> AKA
		<emphasis>11-STABLE</emphasis></para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en"><symbol>stable/12/</symbol> AKA
		<emphasis>12-STABLE</emphasis></para>
	    </listitem>

	    <listitem>
	      <para xml:lang="en"><symbol>head/</symbol> AKA
		<emphasis>-CURRENT</emphasis> AKA
		<emphasis>12-CURRENT</emphasis></para>
	    </listitem>
	  </itemizedlist>

	  <para xml:lang="en"><literal>HEAD</literal> is not an actual branch tag.
	    It is a symbolic constant for
	    the current, non-branched development
		stream known as
	    <emphasis>-CURRENT</emphasis>.</para>

	  <para xml:lang="en">Right now, <emphasis>-CURRENT</emphasis> is the
	    13.<replaceable>X</replaceable> development stream; the <emphasis>12-STABLE</emphasis>
	    branch, <symbol>stable/12/</symbol>, forked off from
	    <emphasis>-CURRENT</emphasis> in December 2018 and the
	    <emphasis>11-STABLE</emphasis> branch, <symbol>stable/11/</symbol>, forked off from
	    <emphasis>-CURRENT</emphasis> in October 2016.</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="kernel-panic-troubleshooting">
	  <para xml:lang="en">How can I make the most of the data I see when my
	    kernel panics?</para>
	</question>

	<answer>
	  <para xml:lang="en">Here is typical kernel panic:</para>

	  <programlisting xml:lang="en">Fatal trap 12: page fault while in kernel mode
fault virtual address   = 0x40
fault code              = supervisor read, page not present
instruction pointer     = 0x8:0xf014a7e5
stack pointer           = 0x10:0xf4ed6f24
frame pointer           = 0x10:0xf4ed6f28
code segment            = base 0x0, limit 0xfffff, type 0x1b
                        = DPL 0, pres 1, def32 1, gran 1
processor eflags        = interrupt enabled, resume, IOPL = 0
current process         = 80 (mount)
interrupt mask          =
trap number             = 12
panic: page fault</programlisting>

	  <para xml:lang="en">This message is not enough.  While the instruction
	    pointer value is important, it is also configuration
	    dependent as it varies depending on the kernel image.
	    If it is a <filename>GENERIC</filename> kernel
	    image from one of the snapshots, it is possible for
	    somebody else to track down the offending function, but
	    for a custom kernel, only you can tell us where the fault
	    occurred.</para>

	  <para xml:lang="en">To proceed:</para>

	  <procedure>
	    <step>
	      <para xml:lang="en">Write down the instruction pointer value.  Note
		that the <literal>0x8:</literal> part at the beginning
		is not significant in this case: it is the
		<literal>0xf0xxxxxx</literal> part that we
		want.</para>
	    </step>

	    <step>
	      <para xml:lang="en">When the system reboots, do the following:</para>

	      <screen xml:lang="en"><prompt>%</prompt> <userinput>nm -n kernel.that.caused.the.panic | grep f0xxxxxx</userinput></screen>

	      <para xml:lang="en">where <literal>f0xxxxxx</literal> is the
		instruction pointer value.  The odds are you will not
		get an exact match since the symbols in the kernel
		symbol table are for the entry points of functions and
		the instruction pointer address will be somewhere
		inside a function, not at the start.  If you do not
		get an exact match, omit the last digit from the
		instruction pointer value and try again:</para>

	      <screen xml:lang="en"><prompt>%</prompt> <userinput>nm -n kernel.that.caused.the.panic | grep f0xxxxx</userinput></screen>

	      <para xml:lang="en">If that does not yield any results, chop off
		another digit.  Repeat until there is some sort of
		output.  The result will be a possible list of
		functions which caused the panic.  This is a less than
		exact mechanism for tracking down the point of
		failure, but it is better than nothing.</para>
	    </step>
	  </procedure>

	  <para xml:lang="en">However, the best way to track down the cause of a
	    panic is by capturing a crash dump, then using
	    <citerefentry><refentrytitle>kgdb</refentrytitle><manvolnum>1</manvolnum></citerefentry> to generate a stack trace on the crash
	    dump.</para>

	  <para xml:lang="en">In any case, the method is this:</para>

	  <procedure>
	    <step>
	      <para xml:lang="en">Make sure that the following line is included in
		the kernel configuration file:</para>

	      <programlisting xml:lang="en">makeoptions     DEBUG=-g          # Build kernel with gdb(1) debug symbols</programlisting>
	    </step>

	    <step>
	      <para xml:lang="en">Change to the <filename>/usr/src</filename>
		directory:</para>

	      <screen xml:lang="en"><prompt>#</prompt> <userinput>cd /usr/src</userinput></screen>
	    </step>

	    <step>
	      <para xml:lang="en">Compile the kernel:</para>

	      <screen xml:lang="en"><prompt>#</prompt> <userinput>make buildkernel KERNCONF=<replaceable>MYKERNEL</replaceable></userinput></screen>
	    </step>

	    <step>
	      <para xml:lang="en">Wait for <citerefentry><refentrytitle>make</refentrytitle><manvolnum>1</manvolnum></citerefentry> to finish compiling.</para>
	    </step>

	    <step>
	      <screen xml:lang="en"><prompt>#</prompt> <userinput>make installkernel KERNCONF=MYKERNEL</userinput></screen>
	    </step>

	    <step>
	      <para xml:lang="en">Reboot.</para>
	    </step>
	  </procedure>

	  <note>
	    <para xml:lang="en">If <varname>KERNCONF</varname> is not included,
	      the <filename>GENERIC</filename> kernel will instead
	      be built and installed.</para>
	  </note>

	  <para xml:lang="en">The <citerefentry><refentrytitle>make</refentrytitle><manvolnum>1</manvolnum></citerefentry> process will have built two kernels.
	    <filename>/usr/obj/usr/src/sys/MYKERNEL/kernel</filename>
	    and
	    <filename>/usr/obj/usr/src/sys/MYKERNEL/kernel.debug</filename>.
	    <filename>kernel</filename> was installed as
	    <filename>/boot/kernel/kernel</filename>, while
	    <filename>kernel.debug</filename> can be used as the
	    source of debugging symbols for <citerefentry><refentrytitle>kgdb</refentrytitle><manvolnum>1</manvolnum></citerefentry>.</para>

	  <para xml:lang="en">To capture a crash dump, edit
	    <filename>/etc/rc.conf</filename> and set
	    <literal>dumpdev</literal> to point to either the swap
	    partition or <literal>AUTO</literal>.  This will cause the
	    <citerefentry><refentrytitle>rc</refentrytitle><manvolnum>8</manvolnum></citerefentry> scripts to use the <citerefentry><refentrytitle>dumpon</refentrytitle><manvolnum>8</manvolnum></citerefentry> command to
	    enable crash dumps.  This command can also be run
	    manually.  After a panic, the crash dump can be recovered
	    using <citerefentry><refentrytitle>savecore</refentrytitle><manvolnum>8</manvolnum></citerefentry>; if <literal>dumpdev</literal> is
	    set in <filename>/etc/rc.conf</filename>, the <citerefentry><refentrytitle>rc</refentrytitle><manvolnum>8</manvolnum></citerefentry>
	    scripts will run <citerefentry><refentrytitle>savecore</refentrytitle><manvolnum>8</manvolnum></citerefentry> automatically and put
	    the crash dump in <filename>/var/crash</filename>.</para>

	  <note>
	    <para xml:lang="en">FreeBSD crash dumps are usually the same size as
	      physical RAM.  Therefore, make sure there is enough
	      space in <filename>/var/crash</filename> to hold the
	      dump.  Alternatively, run <citerefentry><refentrytitle>savecore</refentrytitle><manvolnum>8</manvolnum></citerefentry> manually
	      and have it recover the crash dump to another directory
	      with more room.  It is possible to limit the
	      size of the crash dump by using <literal>options
		MAXMEM=N</literal> where
	      <replaceable>N</replaceable> is the size of kernel's
	      memory usage in KBs.  For example, for 1 GB
	      of RAM, limit the kernel's memory usage to
	      128 MB, so that the crash dump size
	      will be 128 MB instead of 1 GB.</para>
	  </note>

	  <para xml:lang="en">Once the crash dump has been recovered , get a
	    stack trace as follows:</para>

	  <screen xml:lang="en"><prompt>%</prompt> <userinput>kgdb /usr/obj/usr/src/sys/MYKERNEL/kernel.debug /var/crash/vmcore.0</userinput>
<prompt>(kgdb)</prompt> <userinput>backtrace</userinput></screen>

	  <para xml:lang="en">Note that there may be several screens worth of
	    information.  Ideally, use <citerefentry><refentrytitle>script</refentrytitle><manvolnum>1</manvolnum></citerefentry> to
	    capture all of them.  Using the unstripped kernel image
	    with all the debug symbols should show the exact line of
	    kernel source code where the panic occurred.  The stack
	    trace is usually read from the bottom up to trace
	    the exact sequence of events that lead to the crash.
	    <citerefentry><refentrytitle>kgdb</refentrytitle><manvolnum>1</manvolnum></citerefentry> can also be used to print out the contents of
	    various variables or structures to examine the system
	    state at the time of the crash.</para>

	  <tip>
	    <para xml:lang="en">If a second computer is available, <citerefentry><refentrytitle>kgdb</refentrytitle><manvolnum>1</manvolnum></citerefentry> can
	      be configured to do remote debugging, including setting
	      breakpoints and single-stepping through the kernel
	      code.</para>
	  </tip>

	  <note>
	    <para xml:lang="en">If <literal>DDB</literal> is enabled and the
	      kernel drops into the debugger, a panic
	      and a crash dump can be forced by typing
	      <literal>panic</literal> at the <literal>ddb</literal>
	      prompt.  It may stop in the debugger again during the
	      panic phase.  If it does, type
	      <literal>continue</literal> and it will finish the crash
	      dump.</para>
	  </note>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="dlsym-failure">
	  <para xml:lang="en">Why has <function>dlsym()</function> stopped working
	    for ELF executables?</para>
	</question>

	<answer>
	  <para xml:lang="en">The ELF toolchain does not, by default, make the
	    symbols defined in an executable visible to the dynamic
	    linker.  Consequently <function>dlsym()</function>
	    searches on handles obtained from calls to
	    <function>dlopen(NULL, flags)</function> will fail to find
	    such symbols.</para>

	  <para xml:lang="en">To search, using
	    <function>dlsym()</function>, for symbols present in the
	    main executable of a process, link the
	    executable using the <option>--export-dynamic</option>
	    option to the ELF linker (<citerefentry><refentrytitle>ld</refentrytitle><manvolnum>1</manvolnum></citerefentry>).</para>
	</answer>
      </qandaentry>

      <qandaentry>
	<question xml:id="change-kernel-address-space">
	  <para xml:lang="en">How can I increase or reduce the kernel address space
	    on i386?</para>
	</question>

	<answer>
	  <para xml:lang="en">By default, the kernel address space is 1 GB
	    (2 GB for PAE) for i386.  When running a
	    network-intensive server or using
	    ZFS, this will probably not be
	    enough.</para>

	  <para xml:lang="en">Add the following line to the kernel configuration
	    file to increase available space and rebuild the
	    kernel:</para>

	  <programlisting xml:lang="en">options KVA_PAGES=<replaceable>N</replaceable></programlisting>

	  <para xml:lang="en">To find the correct value of
	    <replaceable>N</replaceable>, divide the desired address
	    space size (in megabytes) by four.  (For example, it is
	    <literal>512</literal> for 2 GB.)</para>
	</answer>
      </qandaentry>
    </qandaset>
  </chapter>

  <chapter xml:id="acknowledgments">
    <title xml:lang="en">Acknowledgments</title>

    <para xml:lang="en">This innocent little Frequently Asked Questions document has
      been written, rewritten, edited, folded, spindled, mutilated,
      eviscerated, contemplated, discombobulated, cogitated,
      regurgitated, rebuilt, castigated, and reinvigorated over the
      last decade, by a cast of hundreds if not thousands.
      Repeatedly.</para>

    <para xml:lang="en">We wish to thank every one of the people responsible, and we
      encourage you to <link xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/articles/contributing/article.html">join
	them</link> in making this <acronym>FAQ</acronym> even
      better.</para>
  </chapter>
</book>
