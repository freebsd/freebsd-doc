<!--
     The FreeBSD Documentation Project
     The FreeBSD French Documentation Project

     $FreeBSD$
     Original revision: 1.128
-->

<chapter id="multimedia">
 <chapterinfo>
  <authorgroup>
   <author>
    <firstname>Ross</firstname>
    <surname>Lippert</surname>
    <contrib>Mise en forme par </contrib>
   </author>
  </authorgroup>
 </chapterinfo>

 <title>Multim&eacute;dia</title>
 &trans.a.fonvieille;
  <sect1 id="multimedia-synopsis">
  <title>Synopsis</title>

    <para>FreeBSD supporte une grande vari&eacute;t&eacute; de cartes son, vous
      permettant d'obtenir un son haute fid&eacute;lit&eacute; &agrave; partir
      de votre ordinateur.  Ceci inclut la possibilit&eacute; d'enregistrer et
      de jouer les formats &ldquo;MPEG Audio Layer 3&rdquo; (MP3), WAV et Ogg
      Vorbis aussi bien que de nombreux autres formats.  Le catalogue de
      logiciels port&eacute;s de FreeBSD contient &eacute;galement des
      applications vous permettant d'&eacute;diter vos enregistrements,
      rajouter des effets sonores, et contr&ocirc;ler des
      p&eacute;riph&eacute;riques MIDI.</para>

    <para>Avec un peu d'exp&eacute;rimentation,
      FreeBSD pourra lire des fichiers vid&eacute;o et des DVDs.  Le
      nombre d'applications pour encoder, convertir, et lire divers
      supports vid&eacute;o est plus limit&eacute; que le
      nombre d'applications &eacute;quivalentes dans le domaine
      du son.  Par exemple au
      moment de l'&eacute;criture de ces lignes, il n'existe pas de
      bonne application d'encodage dans le catalogue des logiciels
      port&eacute;s de FreeBSD, qui pourra &ecirc;tre utilis&eacute;e pour
      convertir d'un format &agrave; un autre, comme peut le faire pour
      le son le programme <filename
      role="package">audio/sox</filename>.  Cependant, le paysage
      logiciel dans ce domaine &eacute;volue rapidement.</para>

    <para>Ce chapitre d&eacute;crira les &eacute;tapes
      n&eacute;cessaires pour configurer votre carte son.  La configuration
      et l'installation d'X11
      (<xref linkend="x11">) ont
      d&eacute;j&agrave; pris soin des probl&egrave;mes mat&eacute;riel
      de votre carte vid&eacute;o, bien qu'il puisse y avoir quelques
      r&eacute;glages &agrave; ajuster pour obtenir une meilleure
      lecture des vid&eacute;os.</para>

    <para>Apr&egrave;s la lecture de ce chapitre, vous conna&icirc;trez:</para>

    <itemizedlist>
      <listitem>
        <para>Comment configurer votre syst&egrave;me afin que votre
	  carte son soit reconnue.</para>
      </listitem>

      <listitem>
        <para>Les m&eacute;thodes pour tester le fonctionnement de votre
	  carte.</para>
      </listitem>

      <listitem>
        <para>Comment faire face aux probl&egrave;mes de configuration
	  de votre carte son.</para>
      </listitem>

      <listitem>
        <para>Comment jouer et encoder des MP3s.</para>
      </listitem>

      <listitem>
        <para>Comment la vid&eacute;o est support&eacute;e par
	  X11.</para>
      </listitem>

      <listitem>
        <para>Quelques logiciels port&eacute;s qui donnent de bon
	  r&eacute;sultats pour lire/encoder de la vid&eacute;o.</para>
      </listitem>

      <listitem>
	<para>Comment lire des DVDs, des fichiers <filename>.mpg</filename> et
	  <filename>.avi</filename>.</para>
      </listitem>

      <listitem>
	<para>Comment extraire l'information pr&eacute;sente sur des
	  CDs et des DVDs.</para>
      </listitem>

      <listitem>
	<para>Comment configurer une carte TV.</para>
      </listitem>

      <listitem>
	<para>Comment configurer un scanner.</para>
      </listitem>
    </itemizedlist>

    <para>Avant de lire ce chapitre, vous devrez:</para>

    <itemizedlist>
      <listitem><para>Savoir comment configurer et installer un
        nouveau noyau (<xref
        linkend="kernelconfig">).</para></listitem>
    </itemizedlist>

    <warning>
      <para>Essayer de monter des CDs audio avec
	la commande &man.mount.8; aura pour r&eacute;sultat
	une erreur, au moins, et une <emphasis>panique du
	noyau</emphasis>, au pire.  Ces supports ont des codages
	sp&eacute;cifiques qui diff&egrave;rent du syst&egrave;me
	de fichiers ISO classique.</para>
    </warning>

  </sect1>

  <sect1 id="sound-setup">
    <sect1info>
      <authorgroup>
        <author>
	 <firstname>Moses</firstname>
	 <surname>Moore</surname>
	 <contrib>Contribution de </contrib>
	 <!-- 20 November 2000 -->
        </author>
      </authorgroup>
      <authorgroup>
	<author>
	 <firstname>Marc</firstname>
	 <surname>Fonvieille</surname>
	 <contrib>Augment&eacute;e pour &os;&nbsp;5.X par </contrib>
	 <!-- 13 September 2004 -->
	</author>
      </authorgroup>
    </sect1info>

    <title>Configurer une carte son</title>

  <sect2 id="sound-device">
    <title>Configuration du syst&egrave;me</title>

    <indexterm><primary>PCI</primary></indexterm>
    <indexterm><primary>ISA</primary></indexterm>
    <indexterm><primary>cartes son</primary></indexterm>
    <para>Avant que vous commenciez, vous devriez conna&icirc;tre le
      mod&egrave;le de carte son que vous avez, la puce qu'elle utilise, et si
      c'est une carte PCI ou ISA.  FreeBSD supporte une grande
      vari&eacute;t&eacute; de cartes PCI et ISA.
      Consultez la liste des p&eacute;riph&eacute;riques audio
      support&eacute;s des <ulink url="&rel.current.hardware;">notes
      de compatibilit&eacute; mat&eacute;riel</ulink> pour voir si
      votre carte est support&eacute;e.  Ces notes indiqueront
      &eacute;galement quel pilote supporte votre carte.</para>

    <indexterm>
      <primary>noyau</primary>
      <secondary>configuration</secondary>
    </indexterm>

    <para>Pour utiliser votre carte son, vous devrez charger le pilote
      de p&eacute;riph&eacute;rique appropri&eacute;.  Cela peut &ecirc;tre
      fait de deux fa&ccedil;ons.  La plus simple est de charger le module pour
      votre carte son avec &man.kldload.8;, ce qui peut &ecirc;tre
      soit fait &agrave; partir de la ligne de commande:</para>

    <screen>&prompt.root; <userinput>kldload snd_emu10k1</userinput></screen>

    <para>soit en ajoutant la ligne appropri&eacute;e dans le fichier
      <filename>/boot/loader.conf</filename> comme cela:</para>

    <programlisting>snd_emu10k1_load="YES"</programlisting>

    <para>Ces exemples concernent la carte Creative &soundblaster;
      Live!.  Les autres modules son chargeables sont list&eacute;s dans
      <filename>/boot/defaults/loader.conf</filename>.  Si vous
      n'&ecirc;tes pas s&ucirc;r du pilote &agrave; utiliser, vous
      pouvez tenter de charger le pilote
      <filename>snd_driver</filename>:</para>

    <screen>&prompt.root; <userinput>kldload snd_driver</userinput></screen>

    <para>C'est un m&eacute;ta-pilote
      chargeant directement les pilotes les plus courants.  Cela
      acc&eacute;l&egrave;re la recherche du pilote
      adapt&eacute;.  Il est &eacute;galement possible de charger
      l'int&eacute;gralit&eacute; des pilotes de cartes son en
      utilisant le syst&egrave;me
      <filename>/boot/loader.conf</filename>.</para>

    <para>Si vous voulez conna&icirc;tre le pilote
      s&eacute;lectionn&eacute; lors du chargement du
      m&eacute;ta-pilote <filename>snd_driver</filename>, vous pouvez
      consulter le fichier <filename>/dev/sndstat</filename> &agrave;
      cet effet, et cela &agrave; l'aide de la commande <command>cat
      /dev/sndstat</command>.</para>

    <para>Une seconde m&eacute;thode est de compiler le
      support pour votre carte son en statique dans votre noyau.  La
      section ci-dessous fournit les informations n&eacute;cessaires pour
      ajouter le support de votre mat&eacute;riel de cette mani&egrave;re.
      Pour plus d'informations au sujet de la recompilation de votre noyau,
      veuillez consulter le <xref linkend="kernelconfig">.</para>

    <sect3>
      <title>Configurer un noyau sur mesure avec support du
	son</title>

      <para>La premi&egrave;re chose &agrave; effectuer est d'ajouter
	au noyau le pilote de p&eacute;riph&eacute;rique audio
	g&eacute;n&eacute;rique &man.sound.4;; pour cela vous devrez
	ajouter la ligne suivante au fichier de configuration du
	noyau:</para>

      <programlisting>device sound</programlisting>

      <para>Ensuite, vous devez ajouter le support pour votre carte
	son.  Par cons&eacute;quent, vous devez savoir quel pilote
	supporte la carte.  Consultez la liste des
	p&eacute;riph&eacute;riques audio support&eacute;s des <ulink
	url="&rel.current.hardware;">notes de compatibilit&eacute;
	mat&eacute;riel</ulink> pour d&eacute;terminer le pilote
	correct pour votre carte son.  Par exemple, une carte son
	Creative &soundblaster; Live! est support&eacute;e par le
	pilote &man.snd.emu10k1.4;.  Pour ajouter le support pour
	cette carte, utilisez ce qui suit:</para>

      <programlisting>device snd_emu10k1</programlisting>

      <para>Assurez-vous de lire la page de manuel du pilote pour la
	syntaxe &agrave; utiliser.  La syntaxe de la configuration
	du noyau pour chaque pilote de carte son support&eacute;e
	peut &ecirc;tre &eacute;galement trouv&eacute;e dans
	le fichier <filename>/usr/src/sys/conf/NOTES</filename>.</para>

      <para>Les cartes son ISA non-PnP pourront n&eacute;cessiter de
	fournir au noyau des informations sur le param&eacute;trage de
	la carte (IRQ, port d'E/S, etc.), comme c'est en g&eacute;n&eacute;ral le
	cas pour toutes les cartes ISA non-PnP.  Cela s'effectue par
	l'interm&eacute;diaire du fichier
	<filename>/boot/device.hints</filename>.  Au d&eacute;marrage
	du syst&egrave;me, le chargeur (&man.loader.8;) lira ce
	fichier et passera les param&egrave;tres au noyau.  Par
	exemple, une vieille carte ISA non-PnP Creative &soundblaster;
	16 utilisera le pilote &man.snd.sbc.4; de paire avec <literal>snd_sb16</literal>, on ajoutera alors la ligne suivante
	au fichier de configuration du noyau:</para>

      <programlisting>device snd_sbc
device snd_sb16</programlisting>

      <para>avec &eacute;galement ceci dans le fichier
	<filename>/boot/device.hints</filename>:</para>

      <programlisting>hint.sbc.0.at="isa"
hint.sbc.0.port="0x220"
hint.sbc.0.irq="5"
hint.sbc.0.drq="1"
hint.sbc.0.flags="0x15"</programlisting>

      <para>Dans ce cas, la carte utilise le port d'E/S
	<literal>0x220</literal> et l'IRQ <literal>5</literal>.</para>

      <para>La syntaxe utilis&eacute;e dans le fichier
	<filename>/boot/device.hints</filename> est abord&eacute;e
	dans la page de manuel du pilote &man.sound.4; ainsi que celle
	du pilote sp&eacute;cifique &agrave; la carte son.</para>

      <para>Les param&egrave;tres donn&eacute;s ci-dessus sont ceux
	par d&eacute;faut.  Dans certains cas, vous pouvez avoir
	besoin de modifier l'IRQ ou tout autre param&egrave;tre en
	fonction de votre carte son.  Consultez la page de manuel
	&man.snd.sbc.4; pour plus d'informations au sujet de cette
	carte.</para>
    </sect3>
  </sect2>

  <sect2 id="sound-testing">
    <title>Tester la carte son</title>

    <para>Apr&egrave;s avoir red&eacute;marr&eacute; avec le noyau
      modifi&eacute;, ou apr&egrave;s avoir charg&eacute; le module
      n&eacute;cessaire, la carte son devrait appara&icirc;tre dans le
      tampon des messages du syst&egrave;me (&man.dmesg.8;) d'un
      mani&egrave;re proche de la suivante:</para>

    <screen>pcm0: &lt;Intel ICH3 (82801CA)&gt; port 0xdc80-0xdcbf,0xd800-0xd8ff irq 5 at device 31.5 on pci0
pcm0: [GIANT-LOCKED]
pcm0: &lt;Cirrus Logic CS4205 AC97 Codec&gt;</screen>

    <para>L'&eacute;tat de la carte son peut &ecirc;tre
      contr&ocirc;l&eacute;e par l'interm&eacute;diaire du fichier
      <filename>/dev/sndstat</filename>:</para>

    <screen>&prompt.root; <userinput>cat /dev/sndstat</userinput>
FreeBSD Audio Driver (newpcm)
Installed devices:
pcm0: &lt;Intel ICH3 (82801CA)&gt; at io 0xd800, 0xdc80 irq 5 bufsz 16384
kld snd_ich (1p/2r/0v channels duplex default)</screen>

    <para>Le r&eacute;sultat pourra &ecirc;tre diff&eacute;rent sur
      votre syst&egrave;me.  Si aucun p&eacute;riph&eacute;rique
      <devicename>pcm</devicename> n'appara&icirc;t, retournez en
      arri&egrave;re et revoyez ce qui a &eacute;t&eacute; fait
      pr&eacute;c&eacute;demment.  Contr&ocirc;lez &agrave; nouveau votre
      fichier de configuration du noyau et v&eacute;rifiez que vous
      avez choisi le p&eacute;riph&eacute;rique correct.  Les
      probl&egrave;mes courants sont list&eacute;s dans la
      <xref linkend="troubleshooting">.</para>

    <para>Si tout va bien, vous devriez avoir maintenant une carte son
      qui fonctionne.  Si la sortie audio de votre lecteur de CD-ROM ou de DVD-ROM est
      correctement reli&eacute;e &agrave; votre carte son, vous pouvez
      introduire un CD dans le lecteur et le jouer avec
      &man.cdcontrol.1;:</para>

      <screen>&prompt.user; <userinput>cdcontrol -f /dev/acd0 play 1</userinput></screen>

    <para>Diverses applications, comme <filename
      role="package">audio/workman</filename> offrent une meilleure
      interface.  Vous pouvez vouloir installer une application
      comme <filename role="package">audio/mpg123</filename> pour
      &eacute;couter des fichiers audio MP3.</para>

    <para>Une autre m&eacute;thode
      rapide pour tester la carte est d'envoyer des donn&eacute;es au
      <filename>/dev/dsp</filename>, de la mani&egrave;re
      suivante:</para>

    <screen>&prompt.user; <userinput>cat <replaceable>filename</replaceable> &gt; /dev/dsp</userinput></screen>

    <para>o&ugrave; <replaceable>filename</replaceable> peut
      &ecirc;tre n'importe quel fichier.  Cette ligne de commande
      devrait produire des sons, confirmant le bon fonctionnement de
      la carte son.</para>

    <para>Les niveaux du mixer de la carte son peuvent &ecirc;tre
      modifi&eacute;s par la commande &man.mixer.8;.  Plus de
      d&eacute;tails peuvent &ecirc;tre trouv&eacute;s dans la page de
      manuel &man.mixer.8;.</para>

    <sect3 id="troubleshooting">
      <title>Probl&egrave;mes courants</title>

      <indexterm><primary>fichiers sp&eacute;ciaux de
	p&eacute;riph&eacute;rique</primary></indexterm>
      <indexterm><primary>port d'E/S</primary></indexterm>
      <indexterm><primary>IRQ</primary></indexterm>
      <indexterm><primary>DSP</primary></indexterm>

      <informaltable frame="none" pgwide="1">
	<tgroup cols="2">
	  <thead>
	    <row>
	     <entry>Erreur</entry>
	      <entry>Solution</entry>
	    </row>
          </thead>

	  <tbody>
            <row>
              <entry><errorname>sb_dspwr(XX) timed out</errorname></entry>
              <entry><para>Le port d'E/S n'est pas configur&eacute;
	        correctement.</para></entry>
            </row>

            <row>
              <entry><errorname>bad irq XX</errorname></entry>
	      <entry><para>L'IRQ s&eacute;lectionn&eacute;e est incorrecte.
		V&eacute;rifiez que l'IRQ choisie et l'IRQ de la carte son sont
		les m&ecirc;mes.</para></entry>
            </row>

            <row>
              <entry><errorname>xxx: gus pcm not attached, out of
    	        memory</errorname></entry>
              <entry><para>Il n'y a pas suffisamment de m&eacute;moire
	        disponible pour utiliser ce p&eacute;riph&eacute;rique.</para></entry>
            </row>

            <row>
              <entry><errorname>xxx: can't open /dev/dsp!</errorname></entry>
              <entry><para>V&eacute;rifiez avec la commande
		<command>fstat | grep dsp</command> si une autre
		application maintient le p&eacute;riph&eacute;rique ouvert.
		Souvent &agrave; l'origine de ce type de probl&egrave;me on
		trouve <application>esound</application> et le support son de <application>KDE</application>.</para></entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </sect3>
  </sect2>

  <sect2 id="sound-multiple-sources">
    <sect2info>
     <authorgroup>
      <author>
       <firstname>Munish</firstname>
       <surname>Chopra</surname>
       <contrib>Contribution de </contrib>
      </author>
     </authorgroup>
    </sect2info>
    <title>Utiliser des sources sonores multiples</title>

    <para>Il est souvent int&eacute;ressant de pouvoir jouer
      simultan&eacute;ment du son &agrave; partir de multiples
      sources, comme lorsque <application>esound</application> ou
      <application>artsd</application> ne supportent pas le partage du
      p&eacute;riph&eacute;rique son avec certaines applications.</para>

    <para>FreeBSD vous permet de le faire par l'interm&eacute;diaire
      de <emphasis>Canaux Sonores Virtuels</emphasis>, qui peuvent
      &ecirc;tre activ&eacute;s avec la fonction &man.sysctl.8;.  Les canaux
      virtuels vous permettent de multiplexer la sortie de
      votre carte son en mixant le son au niveau du noyau.</para>

    <para>Pour configurer le nombre de canaux virtuels, il existe deux
      param&egrave;tres de sysctl qui, si vous avez les privil&egrave;ges
      de l'utilisateur <username>root</username>, peuvent
      &ecirc;tre configur&eacute;s comme ceci:</para>
    <screen>&prompt.root; <userinput>sysctl hw.snd.pcm0.vchans=4</userinput>
&prompt.root; <userinput>sysctl hw.snd.maxautovchans=4</userinput></screen>

    <para>L'exemple ci-dessus alloue quatre canaux virtuels, ce qui est
      un nombre suffisant pour une utilisation classique.
    <varname>hw.snd.pcm0.vchans</varname> est le nombre de canaux
      virtuels que poss&egrave;de <devicename>pcm0</devicename>,
      et est configurable une fois que le p&eacute;riph&eacute;rique
      a &eacute;t&eacute; attach&eacute; au syst&egrave;me.
      <literal>hw.snd.maxautovchans</literal> est le nombre de canaux
      virtuels allou&eacute;s &agrave; un nouveau
      p&eacute;riph&eacute;rique audio quand il est attach&eacute;
      &agrave; l'aide de &man.kldload.8;.  Comme le module
      <devicename>pcm</devicename> peut &ecirc;tre charg&eacute;
      ind&eacute;pendamment des pilotes de p&eacute;riph&eacute;riques,
      <literal>hw.snd.maxautovchans</literal> peut stocker combien de
      canaux virtuels seront allou&eacute;s &agrave; chaque
      p&eacute;riph&eacute;rique attach&eacute; par la suite.</para>

    <note>
      <para>Vous ne pouvez pas modifier le nombre de canaux virtuels
	pour un p&eacute;riph&eacute;rique en cours d'utilisation.
	Quittez avant tout autre chose les programmes utilisant le
	p&eacute;riph&eacute;rique en question, comme les lecteurs de
	fichiers sonores ou les <quote>daemons</quote> audios.</para>
    </note>

    <para>Si vous n'utilisez pas &man.devfs.5;, vous devrez faire
      pointer vos applications sur
      <filename>/dev/dsp0</filename>.<replaceable>x</replaceable>,
      o&ugrave; <replaceable>x</replaceable> est 0 &agrave; 3 si
      <varname>hw.snd.pcm.0.vchans</varname> est fix&eacute; &agrave; 4.
      Sur un syst&egrave;me utilisant &man.devfs.5;, ce qui
      pr&eacute;c&egrave;de sera automatiquement effectu&eacute;
      de fa&ccedil;on transparente pour le programme qui
      r&eacute;clame le p&eacute;riph&eacute;rique
      <filename>/dev/dsp0</filename>.</para>
   </sect2>

    <sect2>
      <sect2info>
	<authorgroup>
	  <author>
	    <firstname>Josef</firstname>
	    <surname>El-Rayes</surname>
	    <contrib>Contribution de </contrib>
	  </author>
	</authorgroup>
      </sect2info>

      <title>D&eacute;finir les valeurs par d&eacute;faut du mixeur
	des diff&eacute;rents canaux</title>

      <para>Les valeurs par d&eacute;faut du mixeur des
	diff&eacute;rents canaux sont fix&eacute;es en dur dans le
	code source du pilote &man.pcm.4;.  Il existe plusieurs
	applications et &ldquo;daemons&rdquo; qui vous permettent de
	fixer les valeurs du mixeur qui seront m&eacute;moris&eacute;es entre
	chaque invocation, mais
	ce n'est pas une solution id&eacute;ale.  Il est possible
	r&eacute;gler les valeurs par d&eacute;faut au niveau du
	pilote &mdash; ceci se fait en d&eacute;finissant les valeurs
	ad&eacute;quates dans le fichier
	<filename>/boot/device.hints</filename>.  Par exemple:</para>

      <programlisting>hint.pcm.0.vol="50"</programlisting>

      <para>Cela fixera le volume du canal &agrave; une valeur par
	d&eacute;faut de 50; d&egrave;s que le module &man.pcm.4; est
	charg&eacute;.</para>
    </sect2>
  </sect1>

  <sect1 id="sound-mp3">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Chern</firstname>
	  <surname>Lee</surname>
	  <contrib>Contribution de </contrib>
	</author>
      </authorgroup>
      <!-- 11 Sept 2001 -->
    </sect1info>

    <title>Fichiers MP3</title>

    <para>Les fichiers MP3 (MPEG Layer 3 Audio) donnent un son proche de
      la qualit&eacute; d'un CD audio, il n'y a aucune raison pour que votre
      station de travail FreeBSD ne puisse pas en profiter.</para>

    <sect2 id="mp3-players">
      <title>Lecteurs de MP3s</title>

      <para>De loin, le plus populaire des lecteurs MP3 pour
	X11 est
        <application>XMMS</application> (X Multimedia System). Les
	th&egrave;mes (skins) de <application>Winamp</application> peuvent
	&ecirc;tre utilis&eacute;s avec <application>XMMS</application>
	d&egrave;s lors que l'interface est quasiment identique &agrave; celle
	du <application>Winamp</application> de Nullsoft.
	<application>XMMS</application> dispose aussi d'un support natif
	pour modules externes (plug-in).</para>

      <para><application>XMMS</application> peut &ecirc;tre install&eacute;
	&agrave; partir du catalogue de logiciels port&eacute;s
	<filename role="package">multimedia/xmms</filename> ou de la version
	pr&eacute;-compil&eacute;e.</para>

      <para>L'interface d'<application>XMMS</application> est intuitive,
        avec une liste de lecture, un &eacute;galiseur graphique, et plus.
	Ceux qui sont familiers avec <application>Winamp</application>
	trouveront <application>XMMS</application> simple
	d'utilisation.</para>

      <para>Le logiciel port&eacute; <filename
        role="package">audio/mpg123</filename> est une alternative, un
        lecteur de MP3 en ligne de commande.</para>

      <para><application>mpg123</application> peut &ecirc;tre utilis&eacute; en
	sp&eacute;cifiant le p&eacute;riph&eacute;rique sonore et le fichier
	MP3 sur la ligne de commande, comme montr&eacute; ci-dessous:</para>

      <screen>&prompt.root; <userinput>mpg123 -a <replaceable>/dev/dsp1.0</replaceable> Foobar-GreatestHits.mp3</userinput>
High Performance MPEG 1.0/2.0/2.5 Audio Player for Layer 1, 2 and 3.
Version 0.59r (1999/Jun/15). Written and copyrights by Michael Hipp.
Uses code from various people. See 'README' for more!
THIS SOFTWARE COMES WITH ABSOLUTELY NO WARRANTY! USE AT YOUR OWN RISK!





Playing MPEG stream from Foobar-GreastestHits.mp3 ...
MPEG 1.0 layer III, 128 kbit/s, 44100 Hz joint-stereo
</screen>

      <para><literal>/dev/dsp1.0</literal> devrait &ecirc;tre remplac&eacute;
	par le p&eacute;riph&eacute;rique <devicename>dsp</devicename>
	correspondant sur votre syst&egrave;me.</para>

    </sect2>

    <sect2 id="rip-cd">
      <title>Extraire les pistes de CDs Audio</title>

      <para>Avant d'encoder la totalit&eacute; d'un CD ou une piste en MP3, les
	donn&eacute;es audio doivent &ecirc;tre extraites et
	transf&eacute;r&eacute;es sur le disque dur.  Cela se fait en copiant
	les donn&eacute;es brutes CDDA (CD Digital Audio) en fichiers WAV.</para>

      <para>L'utilitaire <command>cdda2wav</command>, qui fait partie de
	la suite <filename role="package">sysutils/cdrtools</filename>,
	est utilis&eacute; pour extraire les donn&eacute;es audio de CDs et les
	informations rattach&eacute;es.</para>

      <para>Avec le CD audio dans le lecteur, la commande suivante peut
	&ecirc;tre utilis&eacute;e (en tant que <username>root</username>) pour
	convertir l'int&eacute;gralit&eacute; d'un CD en fichiers WAV (un par
	piste):</para>

      <screen>&prompt.root; <userinput>cdda2wav -D <replaceable>0,1,0</replaceable> -B</userinput></screen>

      <para><application>cdda2wav</application> supportera &eacute;galement les
	lecteurs de CDROM ATAPI (IDE).  Pour faire l'extraction &agrave; partir
	d'un lecteur IDE, pr&eacute;cisez le nom du p&eacute;riph&eacute;rique
	&agrave; la place de l'unit&eacute; SCSI.  Par exemple, pour extraite
	la piste 7 &agrave; partir d'un lecteur IDE:</para>

      <screen>&prompt.root; <userinput>cdda2wav -D <replaceable>/dev/acd0</replaceable> -t 7</userinput></screen>

      <para>Le <option>-D <replaceable>0,1,0</replaceable></option>
	sp&eacute;cifie le p&eacute;riph&eacute;rique SCSI
	<devicename>0,1,0</devicename>, qui correspond &agrave; ce qui est
	donn&eacute; par la commande
	<command>cdrecord -scanbus</command>.</para>

      <para>Pour extraire des pistes individuelles, utilisez l'option
	<option>-t</option> comme ceci:</para>

      <screen>&prompt.root; <userinput>cdda2wav -D <replaceable>0,1,0</replaceable> -t 7</userinput></screen>

      <para>Cet exemple extrait la septi&egrave;me piste du CD audio.  Pour
	extraire un ensemble de pistes, par exemple, de la piste 1 &agrave; 7,
	pr&eacute;cisez un intervalle:</para>

      <screen>&prompt.root; <userinput>cdda2wav -D <replaceable>0,1,0</replaceable> -t 1+7</userinput></screen>

      <para>L'utilitaire &man.dd.1; peut &eacute;galement &ecirc;tre
	utilis&eacute; pour extraire des pistes audios &agrave; partir de
	lecteurs ATAPI, consultez la <xref
	linkend="duplicating-audiocds"> pour plus d'informations sur
	cette possibilit&eacute;.</para>

    </sect2>

    <sect2 id="mp3-encoding">
      <title>Encoder des MP3s</title>

      <para>De nos jours, l'encodeur mp3 &agrave; utiliser est
	<application>lame</application>.
	<application>Lame</application> peut &ecirc;tre trouv&eacute; dans le
	catalogue de logiciels port&eacute;s:
	<filename role="package">audio/lame</filename>.</para>

      <para>En utilisant les fichiers WAV extraits, la commande suivante
	convertira le fichier <filename>audio01.wav</filename> en
	<filename>audio01.mp3</filename>:</para>

      <screen>&prompt.root; <userinput>lame -h -b <replaceable>128</replaceable> \
--tt "<replaceable>La chanson XY</replaceable>" \
--ta "<replaceable>Artiste XY</replaceable>" \
--tl "<replaceable>Album XY</replaceable>" \
--ty "<replaceable>2001</replaceable>" \
--tc "<replaceable>Extrait et encod&eacute; par XY</replaceable>" \
--tg "<replaceable>Genre</replaceable>" \
<replaceable>audio01.wav audio01.mp3</replaceable></userinput></screen>

      <para>128&nbsp;kbits semble &ecirc;tre le taux standard actuel du d&eacute;bit
	audio utilis&eacute; pour les MP3s. Nombreux sont ceux qui
	pr&eacute;f&egrave;rent des taux de haute qualit&eacute;: 160 ou 192.
	Plus le d&eacute;bit audio est &eacute;lev&eacute; plus
	l'espace disque utilis&eacute; par le fichier MP3 sera grand mais la
	qualit&eacute; sera meilleure.  L'option <option>-h</option> active le
	mode &ldquo;haute qualit&eacute;, mais un peu plus lent&rdquo;.  Les
	options commen&ccedil;ant par <option>--t</option> indiquent des
	balises ID3, qui g&eacute;n&eacute;ralement contiennent les
	informations sur le morceau, devant &ecirc;tre
	int&eacute;gr&eacute;es au fichier MP3.
	D'autres informations sur l'encodage peuvent &ecirc;tre trouv&eacute;es
	en consultant la page de manuel de Lame.</para>
    </sect2>

    <sect2 id="mp3-decoding">
      <title>D&eacute;coder des MP3s</title>

      <para>Afin de pouvoir graver un CD audio &agrave; partir de fichiers MP3,
	ces derniers doivent &ecirc;tre convertis dans le format WAV non
	compress&eacute;.  <application>XMMS</application> et
	<application>mpg123</application> supportent tous les deux la
	sortie de fichiers MP3 en format de fichier non
	compress&eacute;.</para>

      <para>Ecriture sur le disque avec <application>XMMS</application>:</para>

      <procedure>
	<step>
	  <para>Lancez <application>XMMS</application>.</para>
	</step>

	<step>
	  <para>Clic-droit sur la fen&ecirc;tre pour faire appara&icirc;tre le
	    menu d'<application>XMMS</application>.</para>
	</step>

	<step>
	  <para>S&eacute;lectionner <literal>Preference</literal> sous
	    <literal>Options</literal>.</para>
	</step>

	<step>
	  <para>Changez l'option &ldquo;Output Plugin&rdquo; pour
	    &ldquo;Disk Writer Plugin&rdquo;.</para>
	</step>

	<step>
	  <para>Appuyez sur <literal>Configure</literal>.</para>
	</step>

	<step>
	  <para>Entrez (ou choisissez browse) un r&eacute;pertoire o&ugrave; va
	    &ecirc;tre &eacute;crit le fichier d&eacute;compress&eacute;.</para>
	</step>

	<step>
	  <para>Chargez le fichier MP3 dans <application>XMMS</application>
	    comme &agrave; l'accoutum&eacute;, avec le volume &agrave; 100% et
	    l'&eacute;galiseur (EQ settings) d&eacute;sactiv&eacute;.</para>
	</step>

	<step>
	  <para>Appuyez sur <literal>Play</literal> &mdash;
	    <application>XMMS</application> devrait se comporter comme
	    s'il jouait le MP3, mais aucun son ne sera audible.  Il est
	    en fait en train de &ldquo;jouer&rdquo; le MP3 dans un
	    fichier.</para>
	</step>

	<step>
	  <para>V&eacute;rifiez que vous avez r&eacute;tabli l'option
	    &ldquo;Output Plugin&rdquo; &agrave; sa valeur de d&eacute;part
	    afin de pouvoir &eacute;couter &agrave; nouveau des MP3s.</para>
	</step>
      </procedure>

      <para>Ecriture sur le disque avec <application>mpg123</application>:</para>

      <procedure>
	<step>
	  <para>Lancez <command>mpg123 -s <replaceable>audio01.mp3</replaceable>
	    &gt; audio01.pcm</command></para>
	</step>
      </procedure>

      <para><application>XMMS</application> cr&eacute;e un fichier au format
	WAV, tandis que <application>mpg123</application> convertit le
	fichier MP3 en donn&eacute;es audio PCM brutes.  Ces deux formats
	peuvent &ecirc;tre utilis&eacute;s avec
	<application>cdrecord</application> pour cr&eacute;er des CDs audio.
	Vous devez utiliser des fichiers PCM bruts avec
	&man.burncd.8;.  Si vous utilisez des fichiers WAV, vous
	noterez un petit parasite au d&eacute;but de chaque piste, ce son est
	l'ent&ecirc;te du fichier WAV.  Vous pouvez simplement retirer
	l'ent&ecirc;te d'un fichier WAV avec l'utilitaire
	<application>SoX</application> (il peut &ecirc;tre install&eacute;
	&agrave; partir du logiciel port&eacute; <filename
	role="package">audio/sox</filename> ou de la version
	pr&eacute;-compil&eacute;e):</para>

      <screen>&prompt.user; <userinput>sox -t wav -r 44100 -s -w -c 2 <replaceable>track.wav track.raw</replaceable></userinput></screen>

      <para>Lisez la <xref linkend="creating-cds"> pour plus d'informations
	sur l'utilisation d'un graveur de CD sous FreeBSD.</para>
    </sect2>
  </sect1>

 <sect1 id="video-playback">
  <sect1info>
    <authorgroup>
      <author>
        <firstname>Ross</firstname>
	<surname>Lippert</surname>
	<contrib>Contribution de </contrib>
      </author>
    </authorgroup>
    <!-- 5 June 2002 -->
  </sect1info>

  <title>Lecture des Vid&eacute;os</title>

    <para>Les applications pour lire des vid&eacute;os
      sont assez r&eacute;centes et se d&eacute;veloppent
      tr&egrave;s rapidement.  Soyez patient.  Tout ne va pas
      fonctionner aussi bien que cela pu &ecirc;tre le cas avec
      le son.</para>

    <para>Avant que vous ne commenciez, vous devrez conna&icirc;tre
      le mod&egrave;le de carte vid&eacute;o dont vous disposez ainsi
      que le circuit int&eacute;gr&eacute; qu'elle utilise.  Alors
      qu'<application>&xorg;</application> et <application>&xfree86;</application> supportent une large
      vari&eacute;t&eacute; de cartes
      vid&eacute;o, seul un petit nombre d'entre elles donne de bonnes
      performances en lecture de vid&eacute;os.  Pour obtenir la liste
      des extensions support&eacute;es par le serveur X utilisant votre
      carte employez la commande &man.xdpyinfo.1; durant le
      fonctionnement d'X11.</para>

    <para>C'est une bonne id&eacute;e d'avoir un court fichier MPEG
      qui pourra &ecirc;tre utilis&eacute; comme fichier test pour
      &eacute;valuer divers lecteurs et leurs options.  Comme certains
      programmes de lecture de DVD chercheront un support DVD sur
      <filename>/dev/dvd</filename> par d&eacute;faut, ou ont ce
      p&eacute;riph&eacute;rique fix&eacute; d&eacute;finitivement dans
      leur code, vous pourrez trouver utile de cr&eacute;er des liens
      symboliques vers les p&eacute;riph&eacute;riques corrects:</para>

      <screen>&prompt.root; <userinput>ln -sf /dev/acd0 /dev/dvd</userinput>
&prompt.root; <userinput>ln -sf /dev/acd0 /dev/rdvd</userinput></screen>

    <para>Notez qu'en raison de la nature du syst&egrave;me
      &man.devfs.5;, les liens cr&eacute;&eacute;s &agrave; la main
      comme les pr&eacute;c&eacute;dents ne seront pas
      conserv&eacute;s si vous red&eacute;marrez le syst&egrave;me.
      Afin de cr&eacute;er automatiquement les liens symboliques
      d&egrave;s que vous red&eacute;marrez votre syst&egrave;me,
      ajoutez les lignes suivantes au fichier
      <filename>/etc/devfs.conf</filename>:</para>

    <programlisting>link acd0 dvd
link acd0 rdvd</programlisting>

    <para>De plus, le d&eacute;codage de DVD, qui n&eacute;cessite
      de faire appel &agrave; des fonctions sp&eacute;ciales du
      lecteur de DVD, demande d'avoir la permission d'&eacute;crire sur les
      p&eacute;riph&eacute;riques DVD.</para>

    <para>Pour augmenter la m&eacute;moire partag&eacute;e
      pour l'interface X11, il est recommand&eacute; que les valeurs de
      certaines variables &man.sysctl.8; soient augment&eacute;es:</para>

      <programlisting>kern.ipc.shmmax=67108864
kern.ipc.shmall=32768</programlisting>

  <sect2 id="video-interface">
    <title>D&eacute;terminer les capacit&eacute;s vid&eacute;o</title>

    <indexterm><primary>XVideo</primary></indexterm>
    <indexterm><primary>SDL</primary></indexterm>
    <indexterm><primary>DGA</primary></indexterm>

    <para>Il y a plusieurs mani&egrave;res possibles pour
      afficher de la vid&eacute;o sous X11.  Ce qui fonctionnera vraiment est
      &eacute;norm&eacute;ment d&eacute;pendant du mat&eacute;riel.
      Chaque m&eacute;thode d&eacute;crite ci-dessous donnera
      diff&eacute;rents r&eacute;sultats en fonction du mat&eacute;riel.
      De plus, le rendu de la vid&eacute;o sous X11 est un sujet recevant
      beaucoup d'attention derni&egrave;rement, et avec chaque nouvelle
      version d'<application>&xorg;</application>, ou d'<application>&xfree86;</application>, il pourra y avoir des
      am&eacute;liorations significatives.</para>

    <para>Une liste des interfaces vid&eacute;o communes:</para>

    <orderedlist>
    <listitem>
      <para>X11: sortie X11 classique utilisant de la m&eacute;moire
	partag&eacute;e.</para>
    </listitem>
    <listitem>
      <para>XVideo: une extension de l'interface X11 qui supporte
	la vid&eacute;o sur n'importe quelle partie de l'&eacute;cran
	contr&ocirc;l&eacute; par X11.</para>
    </listitem>
    <listitem>
      <para>SDL: &ldquo;Simple Directmedia Layer&rdquo; - couche simple
	d'acc&egrave;s directe au m&eacute;dia.</para>
    </listitem>
    <listitem>
      <para>DGA: &ldquo;Direct Graphics Access&rdquo; - acc&egrave;s direct au
	graphique.</para>
    </listitem>
    <listitem>
      <para>SVGAlib: couche graphique bas niveau pour la console.</para>
    </listitem>
    </orderedlist>

    <sect3 id="video-interface-xvideo">
    <title>XVideo</title>

      <para><application>&xorg;</application> et <application>&xfree86; 4.X</application> disposent d'une extension
	appel&eacute;e
        <emphasis>XVideo</emphasis> (&eacute;galement connue sous les termes
	Xvideo, Xv, ou xv) qui permet d'afficher directement de la
	vid&eacute;o &agrave; travers une acc&eacute;l&eacute;ration
	sp&eacute;cifique.  Cette extension fournit une tr&egrave;s bonne
	qualit&eacute; de rendu m&ecirc;me sur les machines bas de gamme.</para>
      <para>Pour v&eacute;rifier si l'extension fonctionne utilisez
	<command>xvinfo</command>:</para>

        <screen>&prompt.user; <userinput>xvinfo</userinput></screen>

      <para>XVideo est support&eacute; pour votre carte si le
	r&eacute;sultat de la commande ressemble &agrave;:</para>
<screen>X-Video Extension version 2.2
screen #0
  Adaptor #0: "Savage Streams Engine"
    number of ports: 1
    port base: 43
    operations supported: PutImage
    supported visuals:
      depth 16, visualID 0x22
      depth 16, visualID 0x23
    number of attributes: 5
      "XV_COLORKEY" (range 0 to 16777215)
              client settable attribute
              client gettable attribute (current value is 2110)
      "XV_BRIGHTNESS" (range -128 to 127)
              client settable attribute
              client gettable attribute (current value is 0)
      "XV_CONTRAST" (range 0 to 255)
              client settable attribute
              client gettable attribute (current value is 128)
      "XV_SATURATION" (range 0 to 255)
              client settable attribute
              client gettable attribute (current value is 128)
      "XV_HUE" (range -180 to 180)
              client settable attribute
              client gettable attribute (current value is 0)
    maximum XvImage size: 1024 x 1024
    Number of image formats: 7
      id: 0x32595559 (YUY2)
        guid: 59555932-0000-0010-8000-00aa00389b71
        bits per pixel: 16
        number of planes: 1
        type: YUV (packed)
      id: 0x32315659 (YV12)
        guid: 59563132-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
      id: 0x30323449 (I420)
        guid: 49343230-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
      id: 0x36315652 (RV16)
        guid: 52563135-0000-0000-0000-000000000000
        bits per pixel: 16
        number of planes: 1
        type: RGB (packed)
        depth: 0
        red, green, blue masks: 0x1f, 0x3e0, 0x7c00
      id: 0x35315652 (RV15)
        guid: 52563136-0000-0000-0000-000000000000
        bits per pixel: 16
        number of planes: 1
        type: RGB (packed)
        depth: 0
        red, green, blue masks: 0x1f, 0x7e0, 0xf800
      id: 0x31313259 (Y211)
        guid: 59323131-0000-0010-8000-00aa00389b71
        bits per pixel: 6
        number of planes: 3
        type: YUV (packed)
      id: 0x0
        guid: 00000000-0000-0000-0000-000000000000
        bits per pixel: 0
        number of planes: 0
        type: RGB (packed)
        depth: 1
        red, green, blue masks: 0x0, 0x0, 0x0</screen>

    <para>Notez &eacute;galement que les formats list&eacute;s
      (YUV2, YUV12, etc...) ne sont pas pr&eacute;sents dans chaque
      impl&eacute;mentation d'XVideo et leur absence pourra g&ecirc;ner
      certains programmes.</para>

    <para>Si le r&eacute;sultat ressemble &agrave;:</para>
<screen>X-Video Extension version 2.2
screen #0
no adaptors present</screen>

    <para>Alors XVideo n'est probablement pas support&eacute; pour votre
      carte.</para>

    <para>Si XVideo n'est pas support&eacute; pour votre carte,
      cela signifie seulement qu'il sera plus difficile pour votre
      syst&egrave;me d'affichage de r&eacute;pondre aux demandes
      du rendu vid&eacute;o en termes de puissance de calcul.  En fonction
      de votre carte vid&eacute;o et de votre processeur, vous pourriez
      encore obtenir de bons r&eacute;sultats.  Vous devriez
      probablement vous documenter sur les m&eacute;thodes pour
      am&eacute;liorer les performances en lisant la <xref
      linkend="video-further-reading">.</para>

    </sect3>

    <sect3 id="video-interface-SDL">
    <title>&ldquo;Simple Directmedia Layer&rdquo; - couche simple
      d'acc&egrave;s directe au m&eacute;dia</title>

    <para>La couche simple d'acc&egrave;s directe au m&eacute;dia, SDL,
      a &eacute;t&eacute; pr&eacute;vue pour &ecirc;tre
      une couche de portage entre &microsoft.windows;, BeOS, et &unix;,
      permettant &agrave; des applications &ldquo;cross-platform&rdquo;
      qui font un usage efficace du son et du graphique d'&ecirc;tre
      d&eacute;velopp&eacute;es.  La couche SDL fournit une abstraction
      de bas niveau
      vers le mat&eacute;riel qui peut parfois &ecirc;tre plus
      efficace que l'interface X11.</para>

    <para>La biblioth&egrave;que SDL peut &ecirc;tre trouv&eacute;e
      dans <filename role="package">devel/sdl12</filename>.</para>

    </sect3>

    <sect3 id="video-interface-DGA">
    <title>&ldquo;Direct Graphics Access&rdquo; - acc&egrave;s direct au
      graphique</title>

    <para>L'acc&egrave;s direct au graphique est une extension X11
      qui permet &agrave; un programme de bypasser le serveur X et
      d'acc&eacute;der directement au mat&eacute;riel.  Comme il
      repose sur une copie bas niveau de la m&eacute;moire, les
      programmes l'utilisant doivent &ecirc;tre
      ex&eacute;cut&eacute;s avec les privil&egrave;ges de l'utilisateur
      <username>root</username>.</para>

    <para>L'extension DGA et ses performances peuvent &ecirc;tre
      test&eacute;es avec &man.dga.1;.  Quand <command>dga</command> est
      ex&eacute;cut&eacute;, il changera les couleurs de l'affichage
      &agrave; chaque appui sur une touche.  Pour quitter, utilisez la touche
      <keycap>q</keycap>.</para>

    </sect3>

  </sect2>

  <sect2 id="video-ports">
    <title>Logiciels port&eacute;s et pr&eacute;-compil&eacute;s
      relatifs &agrave; la vid&eacute;o</title>

    <indexterm><primary>logiciels port&eacute;s
      vid&eacute;o</primary></indexterm>
    <indexterm><primary>logiciels pr&eacute;-compil&eacute;s
      vid&eacute;o</primary></indexterm>

    <para>Cette section traite des logiciels disponibles dans le
      catalogue des logiciels port&eacute;s de FreeBSD qui peuvent &ecirc;tre
      utilis&eacute;s pour lire de la vid&eacute;o.  Les applications
      vid&eacute;os sont un domaine de d&eacute;veloppement tr&egrave;s
      actif, et les capacit&eacute;s de diverses applications seront
      sujettes &agrave; des divergences avec la description
      donn&eacute;e ici.</para>

    <para>Premi&egrave;rement, il est important de savoir que plusieurs des
      applications vid&eacute;os fonctionnant sous FreeBSD ont
      &eacute;t&eacute; d&eacute;velopp&eacute;es comme des applications pour
      Linux.  Plusieurs de ces applications sont encore
      consid&eacute;r&eacute;es comme &eacute;tant de qualit&eacute; b&ecirc;ta.
      Parmi les probl&egrave;mes que l'on peut rencontrer avec
      les applications vid&eacute;os sous &os;, nous trouvons:</para>

      <orderedlist>

      <listitem>
        <para>Une application ne peut pas lire un fichier produit par
	  une autre application.</para>
      </listitem>

      <listitem>
        <para>Une application ne peut pas lire un fichier quelle a
	  produit.</para>
      </listitem>

      <listitem>
        <para>La m&ecirc;me application sur deux machines
	  diff&eacute;rentes, recompil&eacute;e sur chaque machine pour
	  la machine elle-m&ecirc;me, jouera le fichier
	  diff&eacute;remment.</para>
      </listitem>

      <listitem>
        <para>Un filtre apparemment insignifiant comme un changement
	  d'&eacute;chelle de l'image donne de tr&egrave;s mauvais
	  r&eacute;sultats en raison d'une routine de changement
	  d'&eacute;chelle bogu&eacute;e.</para>
      </listitem>

      <listitem>
        <para>Une application qui plante r&eacute;guli&egrave;rement.</para>
      </listitem>

      <listitem>
        <para>La documentation n'est pas install&eacute;e avec le logiciel
	  port&eacute; et peut &ecirc;tre trouv&eacute;e sur Internet ou
	  dans le r&eacute;pertoire
          <filename class="directory">work</filename> du logiciel port&eacute;.</para>
      </listitem>

      </orderedlist>

    <para>Parmin ces applications, nombreuses sont celles qui peuvent pr&eacute;senter des &ldquo;Linuxismes&rdquo;.  Aussi, il y peut y avoir des probl&egrave;mes
      r&eacute;sultants de la fa&ccedil;on dont certaines
      biblioth&egrave;ques standards sont impl&eacute;ment&eacute;es
      dans les distributions Linux, ou certaines caract&eacute;ristiques
      du noyau Linux qui ont &eacute;t&eacute; employ&eacute;es
      par les auteurs des applications.
      Ces
      probl&egrave;mes ne sont pas toujours remarqu&eacute;s et
      contourn&eacute;s par les
      responsables du portage du logiciel ce qui peut mener vers
      quelques ennuis comme ceux-ci:</para>

      <orderedlist>

      <listitem>
        <para>L'utilisation de <filename>/proc/cpuinfo</filename> pour
	  d&eacute;tecter les caract&eacute;ristiques du processeur.</para>
      </listitem>

      <listitem>
        <para>Une mauvaise utilisation des &ldquo;threads&rdquo; qui
	  provoque le blocage de programme au lieu de se terminer
	  compl&egrave;tement.</para>
      </listitem>

      <listitem>
        <para>Des logiciels habituellement utilis&eacute;s en conjonction
	  avec l'application ne sont pas encore dans le catalogue des
	  logiciels port&eacute;s.</para>
      </listitem>

      </orderedlist>

      <para>Jusqu'ici, les d&eacute;veloppeurs de ces applications ont
	&eacute;t&eacute; coop&eacute;ratifs avec les responsables
	des logiciels port&eacute;s pour minimiser les modifications
	n&eacute;cessaires au portage.</para>

    <sect3 id="video-mplayer">
      <title>MPlayer</title>

      <para><application>MPlayer</application> est une application pour lire des
	vid&eacute;os r&eacute;cemment et rapidement
	d&eacute;velopp&eacute;e.  Les objectifs de l'&eacute;quipe
	de <application>MPlayer</application> sont la rapidit&eacute; et la
	flexibilit&eacute; sur
	Linux et autre &unix;.  Le projet fut d&eacute;marr&eacute; quand
	le fondateur de l'&eacute;quipe en
	eu assez des mauvaises performances en lecture des autres
	lecteurs disponibles.  Certains diront que l'interface graphique a
	&eacute;t&eacute; sacrifi&eacute;e pour une conception
	rationalis&eacute;e.  Cependant, une fois que vous avez les options en ligne de
	commande et les combinaisons de touches en main, cela fonctionne
	tr&egrave;s bien.</para>

      <sect4 id="video-mplayer-building">
        <title>Compiler MPlayer</title>
        <indexterm><primary>mplayer</primary>
	           <secondary>compilation</secondary></indexterm>

        <para><application>MPlayer</application> r&eacute;side dans <filename
          role="package">multimedia/mplayer</filename>.
	  <application>MPlayer</application>
	  effectue un certain nombre de contr&ocirc;le du
	  mat&eacute;riel durant le processus de compilation, il en
	  r&eacute;sulte un
	  binaire qui ne sera pas portable d'un syst&egrave;me &agrave; l'autre.
	  Ainsi il est important d'utiliser le logiciel port&eacute; et de ne
	  pas utiliser un logiciel pr&eacute;-compil&eacute;.
	  En plus, un certain nombre d'options peuvent &ecirc;tre
	  sp&eacute;cifi&eacute;es dans la ligne de commande <command>make</command>,
	  comme d&eacute;crit dans le fichier <filename>Makefile</filename>
	  et au d&eacute;part de la compilation:</para>

	<screen>&prompt.root; <userinput>cd /usr/ports/multimedia/mplayer</userinput>
&prompt.root; <userinput>make</userinput>
N - O - T - E

Take a careful look into the Makefile in order
to learn how to tune mplayer towards you personal preferences!
For example,
make WITH_GTK1
builds MPlayer with GTK1-GUI support.
If you want to use the GUI, you can either install
/usr/ports/multimedia/mplayer-skins
or download official skin collections from
http://www.mplayerhq.hu/homepage/dload.html
</screen>

	<para>Les options par d&eacute;faut du logiciel port&eacute;
	  devraient &ecirc;tre suffisantes pour la plupart des
	  utilisateurs.  Cependant si vous avez besoin du codec XviD,
	  vous devez sp&eacute;cifier l'option
	  <makevar>WITH_XVID</makevar> dans la ligne de commande.  Le
	  p&eacute;riph&eacute;rique DVD par d&eacute;faut peut
	  &eacute;galement &ecirc;tre d&eacute;fini avec l'option
	  <makevar>WITH_DVD_DEVICE</makevar>, par d&eacute;faut
	  <filename>/dev/acd0</filename> sera utilis&eacute;.</para>

        <para>Au moment de l'&eacute;criture de ces lignes, le logiciel
	  port&eacute; de <application>MPlayer</application> compilera sa
	  documentation HTML et deux ex&eacute;cutables,
	  <command>mplayer</command> et
	  <command>mencoder</command>, qui est un outil pour r&eacute;-encoder
	  de la vid&eacute;o.</para>

        <para>La documentation HTML de <application>MPlayer</application> est
	  tr&egrave;s
	  compl&egrave;te.  Si le lecteur trouve l'information sur le
	  mat&eacute;riel vid&eacute;o et les interfaces manquante dans ce
	  chapitre, la documentation de <application>MPlayer</application> est
	  une alternative tr&egrave;s
	  compl&egrave;te.  Vous devriez certainement prendre le temps de
	  lire la documentation de <application>MPlayer</application>,
	  si vous &ecirc;tes &agrave; la recherche d'informations sur le support
	  vid&eacute;o sous &unix;.</para>

      </sect4>

      <sect4 id="video-mplayer-using">
        <title>Utiliser MPlayer</title>
        <indexterm><primary>MPlayer</primary>
	           <secondary>utiliser</secondary></indexterm>

        <para>Chaque utilisateur de <application>MPlayer</application> doit
	  cr&eacute;er un
	  sous-r&eacute;pertoire <filename>.mplayer</filename> dans son
	  r&eacute;pertoire d'utilisateur.  Pour cr&eacute;er ce
	  sous-r&eacute;pertoire n&eacute;cessaire, vous pouvez taper ce qui
	  suit:</para>

<screen>&prompt.user; <userinput>cd /usr/ports/multimedia/mplayer</userinput>
&prompt.user; <userinput>make install-user</userinput></screen>

	<para>Les options de commande de <command>mplayer</command> sont
	  donn&eacute;es dans la page de manuel.  Pour plus de d&eacute;tails
	  il y a la documentation HTML.  Dans cette section, nous
	  d&eacute;crirons que quelques unes des utilisations les plus courantes.</para>

	<para>Pour lire &agrave; un fichier, comme
	  <filename><replaceable>testfile.avi</replaceable></filename> en utilisant une des
	  diverses interfaces vid&eacute;o utilisez l'option
	  <option>-vo</option>:</para>

	  <screen>&prompt.user; <userinput>mplayer -vo xv testfile.avi</userinput></screen>
	  <screen>&prompt.user; <userinput>mplayer -vo sdl testfile.avi</userinput></screen>
	  <screen>&prompt.user; <userinput>mplayer -vo x11 testfile.avi</userinput></screen>
	  <screen>&prompt.root; <userinput>mplayer -vo dga testfile.avi</userinput></screen>
	  <screen>&prompt.root; <userinput>mplayer -vo 'sdl:dga' testfile.avi</userinput></screen>

	<para>Cela vaut la peine d'essayer toutes ces options, comme
	  leur performance relative d&eacute;pend de nombreux facteurs
	  et variera de fa&ccedil;on significative avec le
	  mat&eacute;riel.</para>

	<para>Pour lire un DVD, remplacez
	 <filename>testfile.avi</filename> par <option>dvd://<replaceable>N</replaceable> -dvd-device
	 <replaceable>DEVICE</replaceable></option> o&ugrave; <replaceable>N</replaceable> est
	 le num&eacute;ro du titre &agrave; jouer et
	 <filename><replaceable>DEVICE</replaceable></filename> est
	 le fichier sp&eacute;cial de p&eacute;riph&eacute;rique correspondant
	 au lecteur de DVD.  Par exemple, pour jouer le titre 3 depuis
	 <filename>/dev/dvd</filename>:</para>

	  <screen>&prompt.root; <userinput>mplayer -vo xv dvd://3 -dvd-device /dev/dvd</userinput></screen>

	<note>
	  <para>Le p&eacute;riph&eacute;rique DVD par d&eacute;faut
	    peut &ecirc;tre d&eacute;fini lors de la compilation du
	    logiciel port&eacute; <application>MPlayer</application> par
	    l'interm&eacute;diaire de l'option
	    <makevar>WITH_DVD_DEVICE</makevar>.  Par d&eacute;faut, ce
	    p&eacute;riph&eacute;rique est
	    <filename>/dev/acd0</filename>.  Plus de d&eacute;tails
	    peuvent &ecirc;tre trouv&eacute;s dans le
	    <filename>Makefile</filename> du logiciel
	    port&eacute;.</para>
	</note>

	<para>Pour arr&ecirc;ter, avancer, etc..., consultez
	  les combinaisons de touches, qui sont donn&eacute;es en
	  ex&eacute;cutant <command>mplayer -h</command> ou lisez
	  la page de manuel.</para>

        <para>D'autres options importantes pour la lecture sont:
          <option>-fs -zoom</option> qui active le mode plein &eacute;cran
          et <option>-framedrop</option> qui aide au niveau des
	  performances.</para>

	<para>Pour que la ligne de commande &agrave; taper ne devienne pas trop
	  longue, l'utilisateur peut cr&eacute;er un fichier
	  <filename>.mplayer/config</filename> et y fixer les options
	  par d&eacute;faut:</para>
<programlisting>vo=xv
fs=yes
zoom=yes</programlisting>

	<para>Enfin, <command>mplayer</command> peut &ecirc;tre
	  utilis&eacute; pour extraire une piste du DVD dans un fichier
	  <filename>.vob</filename>.
	  Pour r&eacute;cup&eacute;rer la seconde piste vid&eacute;o
	  d'un DVD, tapez ceci:</para>

	  <screen>&prompt.root; <userinput>mplayer -dumpstream -dumpfile out.vob dvd://2 -dvd-device /dev/dvd</userinput></screen>

        <para>Le fichier de sortie, <filename>out.vob</filename>, sera du
	  MPEG et peut &ecirc;tre manipul&eacute; par les autres
	  logiciels d&eacute;crits dans cette section.</para>

      </sect4>
      <sect4 id="video-mencoder">
        <title>mencoder</title>
        <indexterm>
	  <primary>mencoder</primary>
	</indexterm>

	<para>Avant
	  d'utiliser <command>mencoder</command> c'est une bonne
	  id&eacute;e de vous familiariser avec les options donn&eacute;es
	  par la documentation HTML.  Il existe une page de manuel, mais
	  elle n'est pas tr&egrave;s utile sans la documentation en HTML.
	  Il y a d'innombrables fa&ccedil;ons d'am&eacute;liorer la
	  qualit&eacute;, diminuer le d&eacute;bit binaire, et
	  modifier les formats, et certaines de ces options peuvent faire
	  la diff&eacute;rence entre de bonnes et mauvaises performances.
	  Voici quelques exemples pour y arriver.  Tout d'abord une
	  simple copie:</para>

	 <screen>&prompt.user; <userinput>mencoder input.avi -oac copy -ovc copy -o output.avi</userinput></screen>

         <para>De mauvaises combinaisons d'options peuvent conduire
	   &agrave; des fichiers illisibles
	   m&ecirc;me par <command>mplayer</command>.  Aussi, si
	   vous voulez juste extraire un fichier, restez sur l'option
	   <option>-dumpfile</option> de <command>mplayer</command>.</para>

	 <para>Pour convertir <filename>input.avi</filename> au format MPEG4
	   avec un codage audio MPEG3 (<filename
	   role="package">audio/lame</filename> est n&eacute;cessaire):</para>

	 <screen>&prompt.user; <userinput>mencoder input.avi -oac mp3lame -lameopts br=192 \
	 -ovc lavc -lavcopts vcodec=mpeg4:vhq -o output.avi</userinput></screen>

	 <para>Ceci a produit un fichier lisible par <command>mplayer</command>
	   et <command>xine</command>.</para>

	 <para><filename>input.avi</filename> peut &ecirc;tre remplac&eacute;
	   par <option>dvd://1 -dvd-device /dev/dvd</option> et ex&eacute;cut&eacute; en tant
	   que <username>root</username> pour r&eacute;-encoder directement un
	   titre DVD.  Puisque vous &ecirc;tes susceptible de ne pas
	   &ecirc;tre satisfait du r&eacute;sultat la premi&egrave;re fois, il
	   est recommand&eacute; d'extraire le titre vers un fichier et de
	   travailler sur le fichier.</para>
      </sect4>
    </sect3>

    <sect3 id="video-xine">
    <title>Le lecteur xine</title>

    <para>Le lecteur <application>xine</application> est un projet de grande
      envergure visant non seulement
      &agrave; &ecirc;tre une solution vid&eacute;o tout-en-un, mais
      &eacute;galement de produire une biblioth&egrave;que de base
      r&eacute;utilisable et un ex&eacute;cutable modulaire qui peut
      &ecirc;tre &eacute;tendu gr&acirc;ce &agrave; des greffons.
      Il est fourni sous forme
      pr&eacute;-compil&eacute;e et de logiciel port&eacute;, <filename
      role="package">multimedia/xine</filename>.</para>

    <para>Le lecteur <application>xine</application>
      est encore un peu brut, mais c'est
      clairement un bon d&eacute;but.  Dans la pratique,
      <application>xine</application> demande soit un
      processeur rapide avec une carte vid&eacute;o rapide, soit
      l'extension XVideo.  L'interface graphique est utilisable, mais
      peu pratique.</para>

    <para>Au moment de l'&eacute;criture de ces lignes, il n'y a pas
      de module d'entr&eacute;e fourni avec <application>xine</application>
      qui lira les DVDs cod&eacute;s
      en CSS.  Il existe des versions tiers qui ont des modules
      &agrave; cet effet int&eacute;gr&eacute;s, mais aucune de ces
      derni&egrave;res ne se trouve dans le catalogue des logiciels
      port&eacute;s de FreeBSD.</para>

    <para>Compar&eacute; &agrave; <application>MPlayer</application>,
      <application>xine</application> fait plus pour l'utilisateur,
      mais au m&ecirc;me moment, rend inaccessible &agrave; l'utilisateur
      certains contr&ocirc;les bien pr&eacute;cis.  Le lecteur
      <application>xine</application> se comporte le mieux
      sur les interfaces XVideo.</para>

    <para>Par d&eacute;faut, le lecteur <application>xine</application>
      lancera une interface graphique.  Les menus peuvent alors
      &ecirc;tre utilis&eacute;s pour ouvrir un fichier pr&eacute;cis:</para>

      <screen>&prompt.user; <userinput>xine</userinput></screen>

    <para>Alternativement, le lecteur peut &ecirc;tre invoqu&eacute;
      pour jouer directement un fichier sans l'interface
      graphique avec la commande:</para>

      <screen>&prompt.user; <userinput>xine -g -p mymovie.avi</userinput></screen>

    </sect3>

    <sect3 id="video-ports-transcode">
    <title>Les utilitaires transcode</title>

    <para>Le logiciel <application>transcode</application> n'est pas un
      lecteur, mais une suite d'outils pour
      r&eacute;-encoder les fichiers audio et vid&eacute;o.
      Avec <application>transcode</application>,
      on a la capacit&eacute; de fusionner des fichiers vid&eacute;os,
      r&eacute;parer les fichiers endommag&eacute;s, en utilisant les outils
      en ligne de commande avec des interfaces de flots
      <filename>stdin/stdout</filename>.</para>

    <para>Un grand nombre d'options peut &ecirc;tre
      pr&eacute;cis&eacute; lors de la compilation du logiciel
      port&eacute; <filename
      role="package">multimedia/transcode</filename>, nous
      recommandons d'utiliser la ligne de commande suivante pour
      compiler <application>transcode</application>:</para>

    <screen>&prompt.root; <userinput>make WITH_OPTIMIZED_CFLAGS=yes WITH_LIBA52=yes WITH_LAME=yes WITH_OGG=yes \
WITH_MJPEG=yes -DWITH_XVID=yes</userinput></screen>

    <para>Le param&eacute;trage propos&eacute; devrait convenir
      &agrave; la plupart des utilisateurs.</para>

    <para>Pour illustrer les capacit&eacute;s de
      <command>transcode</command>, voici un exemple montrant comment
      convertir un fichier DivX en fichier MPEG-1 en standard PAL (VCD
      PAL):</para>

      <screen>&prompt.user; <userinput>transcode -i input.avi -V --export_prof vcd-pal -o output_vcd</userinput>
&prompt.user; <userinput>mplex -f 1 -o output_vcd.mpg output_vcd.m1v output_vcd.mpa</userinput></screen>

    <para>Le fichier MPEG r&eacute;sultant,
      <filename>output_vcd.mpg</filename>, peut &ecirc;tre directement
      lu avec <application>MPlayer</application>.  Vous pourrez
      m&ecirc;me le graver sur un CD pour cr&eacute;er ainsi un
      Vid&eacute;o CD; dans ce cas vous devrez installer et utiliser
      les programmes <filename
      role="package">multimedia/vcdimager</filename> et <filename
      role="package">sysutils/cdrdao</filename>.</para>

    <para>Il existe une page de manuel pour
      <command>transcode</command>, mais il est conseill&eacute; de
      consulter &eacute;galement le <ulink
      url="http://www.transcoding.org/cgi-bin/transcode">wiki de
      transcode</ulink> pour plus d'information et des
      exemples.</para>
    </sect3>

  </sect2>

  <sect2 id="video-further-reading">
    <title>Lectures suppl&eacute;mentaires</title>

    <para>Les diff&eacute;rents logiciels vid&eacute;o pour &os; se d&eacute;veloppent
      rapidement.  Il est fort possible que dans un futur proche
      plusieurs des probl&egrave;mes abord&eacute;s ici seront r&eacute;solus.
      Entre temps
      ceux qui veulent tirer partie des possibilit&eacute;s
      audio/vid&eacute;o de FreeBSD devront se d&eacute;brouiller avec des
      connaissances extraites de plusieurs FAQs et guides et utiliser
      diff&eacute;rentes applications.
      Cette section existe pour fournir au lecteur des r&eacute;f&eacute;rences
      sur ces documentations additionnelles.</para>

    <para>La
      <ulink url="http://www.mplayerhq.hu/DOCS/">documentation de
      MPlayer</ulink> est techniquement tr&egrave;s instructive.
      Ces documents devraient probablement &ecirc;tre consult&eacute;s
      par quiconque d&eacute;sirant obtenir un niveau &eacute;lev&eacute;
      d'expertise sur la vid&eacute;o et &unix;.
      La liste de diffusion de <application>MPlayer</application> est hostile &agrave;
      toute personne qui n'a pas pris la peine de lire la documentation,
      aussi si vous projetez de leur envoyer des rapports de bogue,
      lisez la documentation!</para>

    <para>Le
      <ulink url="http://dvd.sourceforge.net/xine-howto/en_GB/html/howto.html">       HOWTO de xine</ulink>
      contient un chapitre sur l'am&eacute;lioration des performances qui est
      g&eacute;n&eacute;ral &agrave; tous les lecteurs
      de vid&eacute;o.</para>

    <para>Et enfin, il y a quelques autres applications prometteuses que
      le lecteur devrait essayer:</para>

    <itemizedlist>

       <listitem>
         <para><ulink
	   url="http://avifile.sourceforge.net/">Avifile</ulink> qui est
	   &eacute;galement un logiciel port&eacute; <filename
	   role='package'>multimedia/avifile</filename>.</para>
       </listitem>

       <listitem>
         <para><ulink
	   url="http://www.dtek.chalmers.se/groups/dvd/">Ogle</ulink>
	   qui est &eacute;galement un logiciel port&eacute; <filename
	   role='package'>multimedia/ogle</filename>.</para>
       </listitem>

       <listitem>
         <para><ulink url="http://xtheater.sourceforge.net/">Xtheater</ulink></para>
       </listitem>

      <listitem>
	<para><filename
	role="package">multimedia/dvdauthor</filename>, un logiciel
	libre pour la cr&eacute;ation de DVDs.</para>
      </listitem>

    </itemizedlist>

  </sect2>
 </sect1>

  <sect1 id="tvcard">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Josef</firstname>
	  <surname>El-Rayes</surname>
	  <contrib>Contibution originale de </contrib>
	</author>
      </authorgroup>
      <authorgroup>
	<author>
	  <firstname>Marc</firstname>
	  <surname>Fonvieille</surname>
	  <contrib>Augment&eacute;e et adapt&eacute;e par </contrib>
	  <!-- 02 January 2004 -->
	</author>
      </authorgroup>
    </sect1info>

    <title>Configuration des cartes TV</title>
    <indexterm>
      <primary>cartes TV</primary>
    </indexterm>

    <sect2>
      <title>Introduction</title>

      <para>Les cartes TV vous permettent de regarder sur votre
	ordinateur la t&eacute;l&eacute;vision par voie hertzienne ou
	par c&acirc;ble.  La plupart d'entre elles acceptent de la
	vid&eacute;o composite par l'interm&eacute;diaire de
	connecteurs RCA ou S-video et certaines de ces cartes
	disposent d'un tuner radio FM.</para>

      <para>&os; founit le support pour les cartes TV PCI utilisant un
	circuit de capture video Brooktree Bt848/849/878/879 ou
	Conexant CN-878/Fusion 878a &agrave; l'aide du pilote
	&man.bktr.4;.  Vous devez &eacute;galement vous assurer que la
	carte dispose d'un tuner support&eacute;, consultez la page de
	manuel &man.bktr.4; pour une liste des tuners
	support&eacute;s.</para> </sect2>

    <sect2>
      <title>Ajout du pilote de p&eacute;riph&eacute;rique</title>

      <para>Pour utiliser votre carte, vous devrez charger le pilote
	&man.bktr.4;, cela peut &ecirc;tre effectu&eacute; en ajoutant
	la ligne suivante au fichier
	<filename>/boot/loader.conf</filename>:</para>

      <programlisting>bktr_load="YES"</programlisting>

      <para>Alternativement, vous pouvez compiler en statique dans le
	noyau le support pour la carte TV, dans ce cas ajouter les
	lignes suivantes dans votre fichier de configuration du
	noyau:</para>

      <programlisting>device	 bktr
device	iicbus
device	iicbb
device	smbus</programlisting>

      <para>Ces pilotes de p&eacute;riph&eacute;riques
	suppl&eacute;mentaires sont n&eacute;cessaires &eacute;tant
	donn&eacute; que les composants de la carte sont
	interconnect&eacute;s via un bus I2C.  Compilez et installez,
	ensuite, un nouveau noyau.</para>

      <para>Une fois que le support a &eacute;t&eacute; ajout&eacute;
	au syst&egrave;me, vous devez red&eacute;marrer votre machine.
	Durant le processus de d&eacute;marrage, votre carte TV
	devrait appara&icirc;tre de cette mani&egrave;re:</para>

      <programlisting>bktr0: &lt;BrookTree 848A&gt; mem 0xd7000000-0xd7000fff irq 10 at device 10.0 on pci0
iicbb0: &lt;I2C bit-banging driver&gt; on bti2c0
iicbus0: &lt;Philips I2C bus&gt; on iicbb0 master-only
iicbus1: &lt;Philips I2C bus&gt; on iicbb0 master-only
smbus0: &lt;System Management Bus&gt; on bti2c0
bktr0: Pinnacle/Miro TV, Philips SECAM tuner.</programlisting>

      <para>Bien &eacute;videmment ces messages peuvent varier en
	fonction de votre mat&eacute;riel.  Cependant assurez-vous que
	le tuner est correctement d&eacute;tect&eacute;; il est
	possible de forcer certains des param&egrave;tres
	d&eacute;tect&eacute; &agrave; l'aide du syst&egrave;me
	&man.sysctl.8; et d'options de configuration du noyau.  Par
	exemple, si vous d&eacute;sirez forcer le tuner pour un tuner
	Philips SECAM, vous devrez ajouter la ligne suivante au
	fichier de configuration du noyau:</para>

      <programlisting>options OVERRIDE_TUNER=6</programlisting>

      <para>ou vous pouvez directement utiliser &man.sysctl.8;:</para>

      <screen>&prompt.root; <userinput>sysctl hw.bt848.tuner=6</userinput></screen>

      <para>Consultez la page de manuel &man.bktr.4; et le fichier
	<filename>/usr/src/sys/conf/NOTES</filename> pour plus de
	d&eacute;tails sur les options disponibles.</para>
    </sect2>

    <sect2>
      <title>Applications utiles</title>

      <para>Pour utiliser votre carte TV, vous devrez installer une
	des applications suivantes:</para>

      <itemizedlist>
	<listitem>
	  <para><filename role="package">multimedia/fxtv</filename>
	    qui permet de regarder la t&eacute;l&eacute;vision et
	    d'enregistrer des images, du son et de la
	    vid&eacute;o.</para>
	</listitem>
	<listitem>
	  <para><filename role="package">multimedia/xawtv</filename>
	    est &eacute;galement une application pour regarder la
	    t&eacute;l&eacute;vision avec les m&ecirc;mes
	    fonctionnalit&eacute;s que
	    <application>fxtv</application>.</para>
	</listitem>
	<listitem>
	  <para><filename role="package">misc/alevt</filename>
	    d&eacute;code et affiche les informations
	    Vid&eacute;otexte/T&eacute;l&eacute;texte.</para>
	</listitem>
	<listitem>
	  <para><filename role="package">audio/xmradio</filename>, un
	    programme pour utiliser le tuner FM fourni avec certaines
	    cartes TV.</para>
	</listitem>
	<listitem>
	  <para><filename role="package">audio/wmtune</filename>, une
	    application int&eacute;grable dans votre environnement de
	    travail pour g&eacute;rer les tuners radio.</para>
	</listitem>
      </itemizedlist>

      <para>Plus d'applications sont disponibles dans le catalogue
	des logiciels port&eacute;s de &os;.</para>
    </sect2>

    <sect2>
      <title>En cas de probl&egrave;me</title>

      <para>Si vous rencontrez un quelconque probl&egrave;me avec
	votre carte TV, vous devriez contr&ocirc;ler tout d'abord que
	le circuit de capture video et le tuner sont vraiment
	support&eacute;s par le pilote &man.bktr.4; et si vous avez
	utilis&eacute; les bonnes options de configuration.  Pour plus
	de support et pour les diverses questions que vous pouvez vous
	poser &agrave; propos de votre carte TV, vous pouvez contacter
	et utiliser les archives de la liste de diffusion
	&a.multimedia.name;.</para>
    </sect2>
  </sect1>

  <sect1 id="scanners">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Marc</firstname>
	  <surname>Fonvieille</surname>
	  <contrib>Ecrit par </contrib>
	  <!-- 04 August 2004 -->
	</author>
      </authorgroup>
    </sect1info>

    <title>Scanners</title>
    <indexterm>
      <primary>scanners</primary>
    </indexterm>

    <sect2>
      <title>Introduction</title>

      <para>Sous &os;, l'acc&egrave;s aux scanners est
	possible gr&acirc;ce &agrave; l'<acronym
	role="Interface de Programmation d'Applications">API</acronym>
	<application>SANE</application> (Scanner Access Now Easy)
	disponible dans le catalogue des logiciels port&eacute;s.
	<application>SANE</application> utilisera &eacute;galement
	certains pilotes de p&eacute;riph&eacute;riques &os; pour
	acc&eacute;der &agrave; la partie mat&eacute;rielle du
	scanner.</para>

      <para>&os; supporte les scanners SCSI et USB.  Assurez-vous que
	votre scanner est support&eacute; par
	<application>SANE</application> avant d'effectuer une
	quelconque configuration.  <application>SANE</application>
	dispose d'une liste des <ulink
	url="http://www.sane-project.org/sane-supported-devices.html">p&eacute;riph&eacute;riques
	support&eacute;s</ulink> qui peut vous informer sur le support
	et son statut pour un scanner particulier.  La page de manuel
	&man.uscanner.4; donne &eacute;galement une liste des scanners
	USB support&eacute;s.</para>
    </sect2>

    <sect2>
      <title>Configuration du noyau</title>

      <para>Comme mentionn&eacute; plus haut les interfaces SCSI et
	USB sont support&eacute;es.  En fonction de l'interface de
	votre scanner, diff&eacute;rents pilotes de
	p&eacute;riph&eacute;rique sont n&eacute;cessaires.</para>

      <sect3 id="scanners-kernel-usb">
	<title>Interface USB</title>

	<para>Le noyau <filename>GENERIC</filename> inclut par
	  d&eacute;faut les pilotes n&eacute;cessaires au support des
	  scanners USB.  Si vous d&eacute;cidez d'utiliser un noyau
	  personnalis&eacute;, assurez-vous que les lignes suivantes
	  sont pr&eacute;sentes dans votre fichier de configuration du
	  noyau:</para>

	<programlisting>device usb
device uhci
device ohci
device uscanner</programlisting>

	<para>En fonction du contr&ocirc;leur USB pr&eacute;sent sur
	  votre carte m&egrave;re, vous n'avez besoin que d'une des
	  deux lignes <literal>device uhci</literal> et
	  <literal>device ohci</literal>, cependant avoir ces deux
	  lignes simultan&eacute;ment dans la configuration du noyau
	  est sans risque.</para>

	<para>Si vous ne d&eacute;sirez pas recompiler votre noyau et
	  que votre noyau n'est pas le <filename>GENERIC</filename>,
	  vous pouvez directement charger le module du pilote
	  &man.uscanner.4; &agrave; l'aide de la commande
	  &man.kldload.8;:</para>

	<screen>&prompt.root; <userinput>kldload uscanner</userinput></screen>

	<para>Pour charger ce module &agrave; chaque d&eacute;marrage
	  du syst&egrave;me, ajoutez la ligne suivante au fichier
	  <filename>/boot/loader.conf</filename>:</para>

	<programlisting>uscanner_load="YES"</programlisting>

	<para>Apr&egrave;s avoir red&eacute;marr&eacute; avec le bon
	  noyau, ou apr&egrave;s avoir charg&eacute; le module
	  n&eacute;cessaire, branchez votre scanner USB.  Une ligne
	  montrant la d&eacute;tection de votre scanner
	  devrait appara&icirc;tre dans le tampon des messages du
	  syst&egrave;me (&man.dmesg.8;):</para>

	<screen>uscanner0: EPSON EPSON Scanner, rev 1.10/3.02, addr 2</screen>

	<para>Ceci nous indique que notre scanner utilise le fichier
	  sp&eacute;cial de p&eacute;riph&eacute;rique
	  <filename>/dev/uscanner0</filename>.</para>
      </sect3>

      <sect3>
	<title>Interface SCSI</title>

	<para>Si votre scanner dispose d'une interface SCSI, il est
	  important de conna&icirc;tre quelle carte contr&ocirc;leur
	  SCSI vous utiliserez.  En fonction du contr&ocirc;leur sur
	  la carte, vous devrez adapter votre configuration du noyau.
	  Le noyau <filename>GENERIC</filename> supporte les
	  contr&ocirc;leurs SCSI les plus courants.  Assurez-vous
	  d'avoir lu le fichier <filename>NOTES</filename>
	  et ajoutez la
	  ligne ad&eacute;quate dans votre fichier de configuration du
	  noyau.  En plus du pilote de votre carte SCSI, vous avez
	  besoin des lignes suivantes dans votre fichier de
	  configuration du noyau:</para>

	<programlisting>device scbus
device pass</programlisting>

	<para>Une fois que votre noyau a &eacute;t&eacute;
	  correctement compil&eacute; et install&eacute;, vous devriez &ecirc;tre en
	  mesure de voir les p&eacute;riph&eacute;riques au
	  d&eacute;marrage:</para>

	<screen>pass2 at aic0 bus 0 target 2 lun 0
pass2: &lt;AGFA SNAPSCAN 600 1.10&gt; Fixed Scanner SCSI-2 device
pass2: 3.300MB/s transfers</screen>

	<para>Si votre scanner n'&eacute;tait pas aliment&eacute; au
	  d&eacute;marrage du syst&egrave;me, il est encore possible
	  de forcer sa d&eacute;tection, en en sondant le bus SCSI
	  avec la commande &man.camcontrol.8;:</para>

	<screen>&prompt.root; <userinput>camcontrol rescan all</userinput>
Re-scan of bus 0 was successful
Re-scan of bus 1 was successful
Re-scan of bus 2 was successful
Re-scan of bus 3 was successful</screen>

	<para>Ensuite le scanner appara&icirc;tra dans la liste des
	  p&eacute;riph&eacute;riques SCSI:</para>

	<screen>&prompt.root; <userinput>camcontrol devlist</userinput>
&lt;IBM DDRS-34560 S97B&gt;              at scbus0 target 5 lun 0 (pass0,da0)
&lt;IBM DDRS-34560 S97B&gt;              at scbus0 target 6 lun 0 (pass1,da1)
&lt;AGFA SNAPSCAN 600 1.10&gt;           at scbus1 target 2 lun 0 (pass3)
&lt;PHILIPS CDD3610 CD-R/RW 1.00&gt;     at scbus2 target 0 lun 0 (pass2,cd0)</screen>

	<para>Plus de d&eacute;tails sur les
	  p&eacute;riph&eacute;riques SCSI sont disponibles dans les
	  pages de manuel &man.scsi.4; et &man.camcontrol.8;.</para>
      </sect3>
    </sect2>

    <sect2>
      <title>Configuration de SANE</title>

      <para>Le syst&egrave;me <application>SANE</application> est
	divis&eacute; en deux parties: les
	<quote>backend</quote>s (<filename
	role="package">graphics/sane-backends</filename>) et les
	<quote>frontend</quote>s (<filename
	role="package">graphics/sane-frontends</filename>).  Les
	<quote>backend</quote>s fournissent l'acc&egrave;s au scanner.
	La liste des <ulink
	url="http://www.sane-project.org/sane-supported-devices.html">p&eacute;riph&eacute;riques
	support&eacute;s</ulink> par <application>SANE</application>
	indique quel <quote>backend</quote> supportera votre scanner.
	Il est indispensable de d&eacute;terminer correctement le
	<quote>backend</quote> relatif &agrave; votre scanner si vous
	voulez &ecirc;tre en mesure d'utiliser votre
	p&eacute;riph&eacute;rique.  La partie
	<quote>frontend</quote>s fournie l'interface graphique de
	num&eacute;risation
	(<application>xscanimage</application>).</para>

      <para>La premi&egrave;re &eacute;tape est d'installer le
	logiciel port&eacute; <filename
	role="package">graphics/sane-backends</filename> ou sa version
	pr&eacute;-compil&eacute;e.  Ensuite, utilisez la commande
	<command>sane-find-scanner</command> pour contr&ocirc;ler la
	d&eacute;tection du scanner par l'ensemble
	<application>SANE</application>:</para>

      <screen>&prompt.root; <userinput>sane-find-scanner -q</userinput>
found SCSI scanner "AGFA SNAPSCAN 600 1.10" at /dev/pass3</screen>

      <para>Le r&eacute;sultat de la commande affichera le type
	d'interface utilis&eacute;e par le scanner et le fichier
	sp&eacute;cial de p&eacute;riph&eacute;rique utilis&eacute;
	pour attacher le scanner au syst&egrave;me.  Le fabricant et
	le mod&egrave;le peuvent ne pas appara&icirc;tre, cela n'est
	pas important.</para>

      <note>
	<para>Certains scanners USB requi&egrave;rent le chargement
	  pr&eacute;alable d'un <quote>firmware</quote>, cela est
	  expliqu&eacute; dans la page de manuel du
	  <quote>backend</quote> utilis&eacute;.  Vous devriez
	  &eacute;galement consulter les pages de manuel de
	  &man.sane-find-scanner.1; et &man.sane.7;.</para>
      </note>

      <para>Nous devons maintenant v&eacute;rifier si le scanner sera
	identifi&eacute; par un <quote>frontend</quote> de
	num&eacute;risation.  Par d&eacute;faut, les
	<quote>backend</quote>s <application>SANE</application> sont
	fournies avec un outil en ligne de commande appel&eacute;
	&man.scanimage.1;.  Cette commande vous permet de lister les
	p&eacute;riph&eacute;riques et d'effectuer une acquisition
	d'image &agrave; partir de la ligne de commande.  L'option
	<option>-L</option> est employ&eacute;e pour afficher les
	scanners pr&eacute;sents sur le syst&egrave;me:</para>

      <screen>&prompt.root; <userinput>scanimage -L</userinput>
device `snapscan:/dev/pass3' is a AGFA SNAPSCAN 600 flatbed scanner</screen>

      <para>Aucun r&eacute;sultat, ou un message disant qu'aucun
	scanner n'a &eacute;t&eacute; identifi&eacute; indiquent que
	&man.scanimage.1; est incapable d'identifier le scanner.  Si
	cela se produit, vous devrez &eacute;diter le fichier de
	configuration du <quote>backend</quote> du scanner et
	d&eacute;finir le type de scanner utilis&eacute;.  Le
	r&eacute;pertoire <filename
	class="directory">/usr/local/etc/sane.d/</filename> contient
	tous les fichiers de configurations des
	<quote>backend</quote>s.  Ce probl&egrave;me d'identification
	appara&icirc;t essentiellement avec certains scanners
	USB.</para>

      <para>Par exemple, avec le scanner USB utilis&eacute; dans la
	<xref linkend="scanners-kernel-usb">,
	<command>sane-find-scanner</command> nous donne l'information
	suivante:</para>

      <screen>&prompt.root; <userinput>sane-find-scanner -q</userinput>
found USB scanner (UNKNOWN vendor and product) at device /dev/uscanner0</screen>
      <para>Le scanner est correctement d&eacute;tect&eacute;, il
	utilise l'interface USB et est attach&eacute; au fichier
	sp&eacute;cial de p&eacute;riph&eacute;rique
	<filename>/dev/uscanner0</filename>.  Nous pouvons maintenant
	v&eacute;rifier si le scanner est correctement
	identifi&eacute;:</para>

      <screen>&prompt.root; <userinput>scanimage -L</userinput>

No scanners were identified. If you were expecting something different,
check that the scanner is plugged in, turned on and detected by the
sane-find-scanner tool (if appropriate). Please read the documentation
which came with this software (README, FAQ, manpages).</screen>

      <para>Comme le scanner n'est pas identifi&eacute;, nous devons
	&eacute;diter le fichier
	<filename>/usr/local/etc/sane.d/epson.conf</filename>.  Le
	scanner utilis&eacute; &eacute;tait un &epson.perfection;
	1650, nous en d&eacute;duisons donc que ce scanner utilisera
	le <quote>backend</quote> <literal>epson</literal>.
	Assurez-vous de bien lire les commentaires d'aide
	pr&eacute;sents dans les fichiers de configuration des
	<quote>backend</quote>s.  Les modifications &agrave; faire
	sont relativement simples: commentez toutes les lignes
	concernant une interface diff&eacute;rente de celle
	utilis&eacute;e par votre scanner (dans notre cas, nous
	commenterons toutes les lignes d&eacute;butant par le mot
	<literal>scsi</literal> &eacute;tant donn&eacute; que notre
	scanner utilise une interface USB), ajoutez ensuite &agrave;
	la fin du fichier une ligne indiquant l'interface et le
	fichier sp&eacute;cial de p&eacute;riph&eacute;rique
	utilis&eacute;.  Dans ce cas, nous ajoutons la ligne
	suivante:</para>

      <programlisting>usb /dev/uscanner0</programlisting>

      <para>Veuillez vous assurer de bien lire les commentaires
	fournis dans les fichiers de configurations des
	<quote>backend</quote>s ainsi que les pages de manuel
	correspondantes pour plus de d&eacute;tails concernant la
	syntaxe correcte &agrave; utiliser.  Nous pouvons maintenant
	v&eacute;rifier si le scanner est identifi&eacute;:</para>

      <screen>&prompt.root; <userinput>scanimage -L</userinput>
device `epson:/dev/uscanner0' is a Epson GT-8200 flatbed scanner</screen>

      <para>Notre scanner a &eacute;t&eacute; identifi&eacute;.  Ce
	n'est pas important si la marque et le mod&egrave;le ne
	correspondent pas au scanner.  L'important est le champ
	<literal>`epson:/dev/uscanner0'</literal>, qui nous donne le
	<quote>backend</quote> et le fichier sp&eacute;cial de
	p&eacute;riph&eacute;rique corrects.</para>

      <para>Une fois que la commande <command>scanimage -L</command>
	est en mesure d'identifier le scanner, la configuration est
	termin&eacute;e.  Le p&eacute;riph&eacute;rique est pr&ecirc;t
	&agrave; effectuer sa premi&egrave;re
	num&eacute;risation.</para>

      <para>Bien que &man.scanimage.1; permette d'effectuer une
	num&eacute;risation &agrave; partir de la ligne de commande,
	il est pr&eacute;f&eacute;rable d'utiliser une interface
	graphique.  <application>SANE</application> offre une
	interface graphique simple mais efficace:
	<application>xscanimage</application> (<filename
	role="package">graphics/sane-frontends</filename>).</para>

      <para><application>Xsane</application> (<filename
	role="package">graphics/xsane</filename>) est une autre
	interface graphique de num&eacute;risation assez populaire.
	Ce programme offre des fonctions avanc&eacute;es comme
	diff&eacute;rents mode de num&eacute;risation (photocopie,
	fax, etc.), la correction des couleurs, la num&eacute;risation
	par lots, etc.  Ces deux applications sont utilisables comme
	greffon pour <application>GIMP</application>.</para>
    </sect2>

    <sect2>
      <title>Donner l'acc&egrave;s au scanner aux autres
	utilisateurs</title>

      <para>Toutes les op&eacute;rations pr&eacute;c&eacute;dentes ont
	&eacute;t&eacute; effectu&eacute;es avec les privil&egrave;ges
	<username>root</username>.  Vous pourrez, cependant, avoir
	besoin que d'autres utilisateurs puissent acc&eacute;der au
	scanner.  L'utilisateur devra avoir les permissions de lecture
	et d'&eacute;criture sur le fichier sp&eacute;cial de
	p&eacute;riph&eacute;rique <filename>/dev/uscanner0</filename>
	dont le propri&eacute;taire est le groupe
	<groupname>operator</groupname>.  L'ajout de l'utilisateur
	<username>joe</username> au groupe
	<groupname>operator</groupname> lui autorisera l'acc&egrave;s
	au scanner:</para>

      <screen>&prompt.root; <userinput>pw groupmod operator -m <replaceable>joe</replaceable></userinput></screen>

      <para>Pour plus de d&eacute;tails, consultez la page de manuel
	de &man.pw.8;.  Vous devez &eacute;galement fixer les
	permissions d'&eacute;criture correctes (0660 or 0664) sur le
	fichier sp&eacute;cial de p&eacute;riph&eacute;rique
	<filename>/dev/uscanner0</filename>, par d&eacute;faut le
	groupe <groupname>operator</groupname> n'a qu'un acc&egrave;s
	en lecture.  Cela se fait en ajoutant les lignes suivantes au
	fichier <filename>/etc/devfs.rules</filename>:</para>

      <programlisting>[system=5]
add path uscanner0 mode 660</programlisting>

      <para>Ajoutez ensuite ce qui suit au fichier
	<filename>/etc/rc.conf</filename> et red&eacute;marrez la
	machine:</para>

      <programlisting>devfs_system_ruleset="system"</programlisting>

      <para>Plus d'information concernant ces lignes peut &ecirc;tre
	trouv&eacute;e dans la page de manuel &man.devfs.8;.</para>

      <note>
	<para>Bien s&ucirc;r, pour des raisons de
	  s&eacute;curit&eacute;, vous devriez r&eacute;fl&eacute;chir
	  &agrave; deux fois avant d'ajouter un utilisateur &agrave;
	  n'importe quel groupe, tout particuli&egrave;rement au groupe
	  <groupname>operator</groupname>.</para>
      </note>
    </sect2>
</chapter>

<!--
     Local Variables:
     mode: sgml
     sgml-declaration: "../chapter.decl"
     sgml-indent-data: t
     sgml-omittag: nil
     sgml-always-quote-attributes: t
     sgml-parent-document: ("../book.sgml" "part" "chapter")
     End:
-->
