<!--
     The FreeBSD Documentation Project
     The FreeBSD French Documentation Project

     $FreeBSD$
     Original revision: 1.213
-->

<chapter id="ports">
  <title>Installer des applications: les logiciels pr&eacute;-compil&eacute;s
    et les logiciels port&eacute;s</title>
    &trans.a.fonvieille;

  <sect1 id="ports-synopsis">
    <title>Synopsis</title>

    <indexterm><primary>logiciels port&eacute;s</primary></indexterm>
    <indexterm><primary>logiciels pr&eacute;-compil&eacute;s</primary></indexterm>
    <para>FreeBSD est livr&eacute; avec une riche collection d'outils en tant
      que partie du syst&egrave;me de base.  Cependant, beaucoup de choses
      peuvent &ecirc;tre faites avant d'avoir besoin de recourir &agrave;
      l'installation d'une application tiers pour effectuer un travail
      pr&eacute;cis.  FreeBSD fournit deux technologies compl&eacute;mentaires
      pour installer des logiciels tiers sur votre syst&egrave;me:
      le Catalogue des logiciels port&eacute;s de FreeBSD, et les logiciels
      pr&eacute;-compil&eacute;s.  L'un ou l'autre des syst&egrave;mes peut
      &ecirc;tre utilis&eacute; pour installer les nouvelles versions de vos
      applications favorites &agrave; partir d'un
      support local ou directement depuis le r&eacute;seau.</para>

    <para>Apr&egrave;s la lecture de ce chapitre, vous saurez:</para>

    <itemizedlist>
      <listitem>
	<para>Comment installer des logiciels tiers
	  pr&eacute;-compil&eacute;s.</para>
      </listitem>
      <listitem>
	<para>Comment compiler des logiciels tiers &agrave; partir du catalogue
	  de logiciels port&eacute;s.</para>
      </listitem>
      <listitem>
	<para>Comment effacer les logiciels pr&eacute;-compil&eacute;s ou
	  port&eacute;s pr&eacute;c&eacute;demment install&eacute;s.</para>
      </listitem>
      <listitem>
	<para>Comment modifier les param&egrave;tres par d&eacute;faut
	  utilis&eacute;s par le catalogue des logiciels
	  port&eacute;s.</para>
      </listitem>
      <listitem>
	<para>Comment mettre &agrave; jour vos logiciels
	  port&eacute;s.</para>
      </listitem>
    </itemizedlist>
  </sect1>

  <sect1 id="ports-overview">
    <title>G&eacute;n&eacute;ralit&eacute;s sur l'installation de logiciels</title>

    <para>Si vous avez utilis&eacute; auparavant un syst&egrave;me &unix; vous
      saurez que la proc&eacute;dure typique pour installer les logiciels
      tiers ressemble &agrave; ceci:</para>

    <procedure>
      <step>
	<para>T&eacute;l&eacute;charger le logiciel, qui peut &ecirc;tre
	  distribu&eacute; sous forme de code source, ou sous forme d'un
	  binaire.</para>
      </step>

      <step>
	<para>Extraire le logiciel de son format de distribution
	  (g&eacute;n&eacute;ralement une archive tar compress&eacute;e
	  soit avec &man.compress.1;, soit avec &man.gzip.1;, ou encore &man.bzip2.1;).</para>
      </step>

      <step>
	<para>Recherchez la documentation (peut &ecirc;tre un fichier
	  <filename>INSTALL</filename> ou <filename>README</filename>, ou des fichiers dans un sous
	  r&eacute;pertoire <filename>doc/</filename>) et lisez les
	  informations sur comment installer le logiciel.</para>
      </step>

      <step>
	<para>Si le logiciel &eacute;tait distribu&eacute; sous forme de
	  sources, compilez-le.  Cela peut impliquer l'&eacute;dition d'un
	  <filename>Makefile</filename>, ou l'ex&eacute;cution d'une
	  proc&eacute;dure <command>configure</command>, et d'autres
	  activit&eacute;s.</para>
      </step>

      <step>
	<para>Tester et installer le logiciel.</para>
      </step>
    </procedure>

    <para>Et cela si seulement tout ce passe bien.  Si vous installez un
      logiciel qui n'a pas &eacute;t&eacute; sp&eacute;cialement port&eacute;
      pour FreeBSD, il se peut que vous deviez &eacute;diter le code source
      pour le faire fonctionner correctement.</para>

    <para>Si vous le voulez, vous pouvez continuer d'installer des
      logiciels suivant la m&eacute;thode &ldquo;traditionnelle&rdquo; sous
      FreeBSD.  Cependant, FreeBSD fournit deux technologies avec
      lesquelles vous pouvez vous &eacute;conomiser beaucoup d'efforts: les
      logiciels pr&eacute;-compil&eacute;s et le catalogue des logiciels
      port&eacute;s.  A l'heure de l'&eacute;criture de ces lignes, plus de
      &os.numports; applications tiers ont &eacute;t&eacute; mises &agrave;
      disposition de cette fa&ccedil;on.</para>

    <para>Pour n'importe quelle application donn&eacute;e, le logiciel
      pr&eacute;-compil&eacute; FreeBSD pour cette application est un unique
      fichier &agrave; t&eacute;l&eacute;charger.  Il contient les copies
      pr&eacute;-compil&eacute;es de toutes les
      commandes de l'application, ainsi que tous fichiers de
      configuration et documentation.  Un logiciel pr&eacute;-compil&eacute;
      t&eacute;l&eacute;charg&eacute; peut &ecirc;tre manipul&eacute; avec
      les commandes FreeBSD de gestion des logiciels
      pr&eacute;-compil&eacute;s, comme &man.pkg.add.1;,
      &man.pkg.delete.1;, &man.pkg.info.1;, et ainsi de suite.
      L'installation d'une nouvelle application peut &ecirc;tre
      effectu&eacute;e gr&acirc;ce &agrave; une unique commande.</para>

    <para>Un logiciel port&eacute; pour FreeBSD est un ensemble de fichiers
      con&ccedil;us pour automatiser le processus de compilation d'une
      application &agrave; partir du code source.</para>

    <para>Rappelez-vous qu'il y a un certain nombre d'&eacute;tapes que vous
      effectueriez si vous compiliez un programme vous-m&ecirc;me (t&eacute;l&eacute;chargement, extraction,
      application de correctifs, compilation, installation).  Les
      fichiers qui composent un logiciel port&eacute; contiennent toute
      l'information n&eacute;cessaire pour permettre au syst&egrave;me de faire
      cela pour vous.  Vous lancez une poign&eacute;e de commandes simples et
      le code source de l'application est automatiquement
      t&eacute;l&eacute;charg&eacute;, extrait, corrig&eacute;, compil&eacute;,
      et install&eacute; pour vous.</para>

    <para>En fait, le catalogue des logiciels port&eacute;s peut &ecirc;tre
      utilis&eacute; pour g&eacute;n&eacute;rer ce qui pourra plus tard
      &ecirc;tre manipul&eacute; avec <command>pkg_add</command> et d'autres
      commandes de gestion des logiciels pr&eacute;-compil&eacute;s qui
      seront pr&eacute;sent&eacute;s sous peu.</para>

    <para>Les logiciels pr&eacute;-compil&eacute;s et le catalogue des
      logiciels port&eacute;s comprennent la notion de
      <emphasis>d&eacute;pendances</emphasis>.
      Supposez que vous voulez installer une application qui d&eacute;pend
      de l'installation d'une biblioth&egrave;que particuli&egrave;re.
      L'application et la biblioth&egrave;que ont &eacute;t&eacute; toutes
      deux rendues disponibles sous forme de logiciel port&eacute; pour
      FreeBSD ou de logiciel pr&eacute;-compil&eacute;.
      Si vous utilisez la commande <command>pkg_add</command> ou le
      catalogue des logiciels port&eacute;s pour ajouter l'application, tous
      les deux remarqueront que la biblioth&egrave;que n'a pas &eacute;t&eacute;
      install&eacute;e, et installeront automatiquement en premier la
      biblioth&egrave;que.</para>

    <para>Etant donn&eacute; que les deux technologies sont presque semblables,
      vous pourriez vous demander pourquoi FreeBSD s'ennuie avec les
      deux.  Les logiciels pr&eacute;-compil&eacute;s et le catalogue de
      logiciels port&eacute;s ont chacun leurs propres forces, et celle que vous
      emploierez d&eacute;pendra de votre pr&eacute;f&eacute;rence.</para>

    <itemizedlist>
      <title>Avantages des logiciels pr&eacute;-compil&eacute;s</title>

      <listitem>
	<para>L'archive compress&eacute;e d'un logiciel
	  pr&eacute;-compil&eacute; est g&eacute;n&eacute;ralement plus
	  petite que l'archive compress&eacute;e contenant le
	  code source de l'application.</para>
      </listitem>

      <listitem>
	<para>Les logiciels pr&eacute;-compil&eacute;s ne
	  n&eacute;cessitent pas de compilation suppl&eacute;mentaire.
	  Pour les grosses applications, comme
	  <application>Mozilla</application>,
	  <application>KDE</application>, ou <application>GNOME</application>
	  cela peut s'av&eacute;rer important, particuli&egrave;rement si
	  vous &ecirc;tes sur un syst&egrave;me lent.</para>
      </listitem>

      <listitem>
	<para>Les logiciels pr&eacute;-compil&eacute;s ne demandent pas une
	  compr&eacute;hension du processus impliqu&eacute; dans la compilation de
	  logiciels sous FreeBSD.</para>
      </listitem>
    </itemizedlist>

    <itemizedlist>
      <title>Avantages du catalogue des logiciels port&eacute;s</title>

      <listitem>
	<para>Les logiciels pr&eacute;-compil&eacute;s sont normalement
	  compil&eacute;s avec des options conservatrices, parce qu'ils
	  doivent pouvoir tourner sur le plus grand nombre de syst&egrave;mes.
	  En installant &agrave; partir du catalogue des logiciels
	  port&eacute;s, vous pouvez ajuster les options de compilation pour
	  (par exemple) g&eacute;n&eacute;rer du code
	  sp&eacute;cifique au Pentium IV ou &agrave; l'Athlon.</para>
      </listitem>

      <listitem>
	<para>Certaines applications ont des options de compilation
	  concernant ce qu'elles peuvent faire et ne pas faire.  Par
	  exemple, <application>Apache</application> peut &ecirc;tre
	  configur&eacute; avec une tr&egrave;s large vari&eacute;t&eacute;
	  d'options int&eacute;gr&eacute;es diff&eacute;rentes.
	  En compilant &agrave; partir du catalogue des logiciels
	  port&eacute;s vous n'avez pas &agrave; accepter les options par
	  d&eacute;faut, et vous pouvez
	  les configurez vous-m&ecirc;me.</para>

	<para>Dans certains cas, de multiples logiciels
	  pr&eacute;-compil&eacute;s existeront pour la m&ecirc;me
	  application pour sp&eacute;cifier certaines configurations.
	  Par exemple, <application>Ghostscript</application> est
	  disponible comme logiciel pr&eacute;-compil&eacute;
	  <filename>ghostscript</filename> et
	  <filename>ghostscript-nox11</filename> , en fonction de si
	  vous avez install&eacute; ou non un serveur X11.  Ce type
	  d'arrangement est possible avec les logiciels
	  pr&eacute;-compil&eacute;s, mais devient rapidement impossible
	  si une application a plus d'une ou deux options de
	  compilation.</para>
      </listitem>

      <listitem>
	<para>Les licences de certains logiciels interdisent les
	  distributions binaires.  Ils doivent &ecirc;tre distribu&eacute;s sous
	  forme de code source.</para>
      </listitem>

      <listitem>
	<para>Certaines personnes ne font pas confiance aux
	  distributions binaires.  Au moins avec le code source, vous
	  pouvez (en th&eacute;orie) le parcourir et chercher les
	  probl&egrave;mes
	  potentiels par vous-m&ecirc;me.</para>
      </listitem>

      <listitem>
	<para>Si vous avez des correctifs locaux, vous aurez besoin du
	  code source afin de les appliquer.</para>
      </listitem>

      <listitem>
	<para>Certaines personnes aiment avoir le code source &agrave;
	  port&eacute;e de main, ainsi elles peuvent le lire si elles
	  s'ennuient, le
	  modifier, y faire des emprunts (si la licence le permet bien
	  s&ucirc;r), etc...</para>
      </listitem>
    </itemizedlist>

    <para>Pour suivre les mises &agrave; jour du catalogue des logiciels
      port&eacute;s, inscrivez-vous &agrave; la &a.ports-bugs;.</para>

    <para>Le reste de ce chapitre expliquera comment utiliser les
      logiciels pr&eacute;-compil&eacute;s et le catalogue des logiciels
      port&eacute;s et la
      gestion des logiciels tiers sous FreeBSD.</para>
  </sect1>

  <sect1 id="ports-finding-applications">
    <title>Trouver votre application</title>

    <para>Avant que vous puissiez installer des applications
      vous devez savoir ce que vous voulez, et comment se nomment les
      applications.</para>

    <para>La liste des applications disponibles pour FreeBSD augmente de
      jours en jours.  Heureusement, il y a plusieurs fa&ccedil;ons de trouver
      ce que vous d&eacute;sirez:</para>

    <itemizedlist>
      <listitem>
	<para>Le site web de FreeBSD maintient &agrave; jour une liste, dans
	  laquelle on peut effectuer des recherches, de toutes les
	  applications disponibles &agrave; l'adresse
	  <ulink url="../../../../ports/index.html">http://www.FreeBSD.org/ports/</ulink>.
	  Le catalogue des logiciels port&eacute;s est divis&eacute; en cat&eacute;gories, et vous pouvez soit
	  chercher une application par son nom (si vous le connaissez),
	  soit lister toutes les applications disponibles dans une
	  cat&eacute;gorie.</para>
      </listitem>

      <indexterm><primary>FreshPorts</primary></indexterm>

      <listitem>
	<para>Dan Langille maintient FreshPorts, &agrave; l'adresse
	  <ulink url="http://www.FreshPorts.org/"></ulink>.
	  FreshPorts suit les modifications des applications dans le
	  catalogue des logiciels port&eacute;s, vous permet de
	  &ldquo;surveiller&rdquo; un ou plusieurs logiciels port&eacute;s, et
	  peut vous envoyer un courrier &eacute;lectronique quand ils sont mis
	  &agrave; jour.</para>
      </listitem>

      <indexterm><primary>FreshMeat</primary></indexterm>

      <listitem>
	<para>Si vous ne connaissez pas le nom de l'application que vous
	  voulez, essayez d'utiliser un site comme FreshMeat
	  (<ulink url="http://www.freshmeat.net/"></ulink>)
	  pour trouver une application, ensuite v&eacute;rifiez sur le site de
	  FreeBSD si l'application a d&eacute;j&agrave; &eacute;t&eacute;
	  port&eacute;e.</para>
      </listitem>
    </itemizedlist>
  </sect1>

  <sect1 id="packages-using">
    <sect1info>
      <authorgroup>
        <author>
          <firstname>Chern</firstname>
	  <surname>Lee</surname>
	  <contrib>Contribution de </contrib>
        </author>
      </authorgroup>
    <!-- 30 Mar 2001 -->
    </sect1info>

    <title>Utiliser le syst&egrave;me des logiciels
      pr&eacute;-compil&eacute;s</title>

    <sect2>
      <title>Installation d'un logiciel pr&eacute;-compil&eacute;</title>
      <indexterm>
        <primary>logiciels pr&eacute;-compil&eacute;s</primary>
        <secondary>installation</secondary>
      </indexterm>

      <indexterm>
        <primary><command>pkg_add</command></primary>
      </indexterm>
      <para>Vous pouvez utiliser l'utilitaire &man.pkg.add.1; pour
	installer un logiciel pr&eacute;-compil&eacute; FreeBSD &agrave;
	partir d'un fichier
	local ou d'un serveur sur le r&eacute;seau.</para>

      <example>
        <title>T&eacute;l&eacute;charger un logiciel pr&eacute;-compil&eacute;
	  &agrave; la main puis l'installer localement</title>

        <screen>&prompt.root; <userinput>ftp -a <replaceable>ftp2.FreeBSD.org</replaceable></userinput>
Connected to ftp2.FreeBSD.org.
220 ftp2.FreeBSD.org FTP server (Version 6.00LS) ready.
331 Guest login ok, send your email address as password.
230-
230-     This machine is in Vienna, VA, USA, hosted by Verio.
230-         Questions? E-mail freebsd@vienna.verio.net.
230-
230-
230 Guest login ok, access restrictions apply.
Remote system type is UNIX.
Using binary mode to transfer files.
<prompt>ftp></prompt> <userinput>cd /pub/FreeBSD/ports/packages/sysutils/</userinput>
250 CWD command successful.
<prompt>ftp></prompt> <userinput>get lsof-4.56.4.tgz</userinput>
local: lsof-4.56.4.tgz remote: lsof-4.56.4.tgz
200 PORT command successful.
150 Opening BINARY mode data connection for 'lsof-4.56.4.tgz' (92375 bytes).
100% |**************************************************| 92375       00:00 ETA
226 Transfer complete.
92375 bytes received in 5.60 seconds (16.11 KB/s)
<prompt>ftp></prompt> <userinput>exit</userinput>
&prompt.root; <userinput>pkg_add <replaceable>lsof-4.56.4.tgz</replaceable></userinput></screen>
      </example>

      <para>Si vous n'avez pas une source locale de logiciels
	pr&eacute;-compil&eacute;s (comme l'ensemble de CDROM de FreeBSD)
	alors il sera probablement plus facile d'utiliser l'option
	<option>-r</option> de &man.pkg.add.1;.  Cela fera d&eacute;terminer
	automatiquement &agrave; l'utilitaire le format objet et la version
	corrects et ensuite r&eacute;cup&eacute;rer et installer le logiciel
	pr&eacute;-compil&eacute; &agrave; partir d'un site FTP.</para>

      <indexterm>
        <primary><command>pkg_add</command></primary></indexterm>
      <screen>&prompt.root; <userinput>pkg_add -r <replaceable>lsof</replaceable></userinput></screen>

      <para>L'exemple ci-dessus t&eacute;l&eacute;chargera le logiciel
	pr&eacute;-compil&eacute;
	correct sans plus d'intervention de l'utilisateur.
	Si vous d&eacute;sirez indiquer un autre miroir &os; pour les
	logiciels pr&eacute;-compil&eacute;s &agrave; la place du site
	de distribution principal, vous devez positionner en
	cons&eacute;quence la variable d'environnement
	<envar>PACKAGESITE</envar>, pour remplacer les
	param&egrave;tres par d&eacute;faut.
	&man.pkg.add.1; utilise &man.fetch.3; pour t&eacute;l&eacute;charger les
	fichiers, qui respecte diverses variables d'environnement, dont
	<envar>FTP_PASSIVE_MODE</envar>, <envar>FTP_PROXY</envar>, et
	<envar>FTP_PASSWORD</envar>.  Il se peut que vous ayez besoin de
	configurer une ou plusieurs de ces derni&egrave;res si vous &ecirc;tes
	derri&egrave;re un coupe-feu, ou devez utiliser un proxy FTP/HTTP.
	Consultez la page de manuel &man.fetch.3; pour la liste compl&egrave;te
	des variables.  Vous pouvez &eacute;galement remarquer que dans
	l'exemple ci-dessus <literal>lsof</literal> est utilis&eacute; au lieu
	de <literal>lsof-4.56.4</literal>.  Quand la fonction de
	r&eacute;cup&eacute;ration &agrave; distance est utilis&eacute;e,
	le num&eacute;ro de version doit &ecirc;tre retir&eacute;.
	&man.pkg.add.1; t&eacute;l&eacute;chargera automatiquement la
	toute derni&egrave;re version de l'application.</para>

      <para>Les logiciels pr&eacute;-compil&eacute;s sont distribu&eacute;s
	dans les formats <filename>.tgz</filename> et <filename>.tbz</filename>.  Vous pouvez les trouver
	sur <ulink
	url="ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/packages/"></ulink>, ou
	sur le CDROM de distribution de FreeBSD.  Chaque CD de
	l'ensemble de 4-CD de FreeBSD (et le PowerPak, etc...) contient
	des logiciels pr&eacute;-compil&eacute;s dans le r&eacute;pertoire
	<filename>/packages</filename>.  L'organisation des logiciels
	pr&eacute;-compil&eacute;s est semblable &agrave; celle de
	l'arborescence <filename>/usr/ports</filename>.  Chaque
	cat&eacute;gorie poss&egrave;de son propre r&eacute;pertoire, et
	chaque logiciel pr&eacute;-compil&eacute; peut &ecirc;tre
	trouv&eacute; dans le r&eacute;pertoire <filename>All</filename>.</para>

      <para>La structure de r&eacute;pertoires du syst&egrave;me de logiciels
	pr&eacute;-compil&eacute;s correspond &agrave; celle du catalogue
	des logiciels port&eacute;s; ils travaillent ensemble pour former
	l'int&eacute;gralit&eacute; du syst&egrave;me de logiciels
	pr&eacute;-compil&eacute;s/port&eacute;s.</para>

    </sect2>

    <sect2>
      <title>Gestion des logiciels pr&eacute;-compil&eacute;s</title>

      <indexterm>
        <primary>logiciels pr&eacute;-compil&eacute;s</primary>
        <secondary>gestion</secondary>
      </indexterm>
      <para>&man.pkg.info.1; est un utilitaire qui liste et d&eacute;crit les
	divers logiciels pr&eacute;-compil&eacute;s install&eacute;s.
      </para>

      <indexterm>
        <primary><command>pkg_info</command></primary>
      </indexterm>
      <screen>&prompt.root; <userinput>pkg_info</userinput>
cvsup-16.1          A general network file distribution system optimized for CV
docbook-1.2         Meta-port for the different versions of the DocBook DTD
...</screen>
      <para>&man.pkg.version.1; est un utilitaire qui r&eacute;capitule les
	versions de tous les logiciels pr&eacute;-compil&eacute;s
	install&eacute;s.  Il compare la version du logiciel
	pr&eacute;-compil&eacute; avec la version
	actuelle trouv&eacute;e dans le catalogue des logiciels port&eacute;s.
      </para>
      <indexterm>
        <primary><command>pkg_version</command></primary>
      </indexterm>
        <screen>&prompt.root; <userinput>pkg_version</userinput>
cvsup                       =
docbook                     =
...</screen>

      <para>Les symboles dans la seconde colonne indiquent l'&acirc;ge relatif
	de la version install&eacute;e et de la version disponible dans le
	catalogue des logiciels port&eacute;s local.</para>

      <informaltable frame="none">
        <tgroup cols="2">
	  <thead>
            <row>
              <entry>Symbole</entry>
              <entry>Signification</entry>
            </row>
          </thead>

 	  <tbody>
  	    <row>
	    <entry>=</entry> <entry>La version du logiciel
	      pr&eacute;-compil&eacute; install&eacute;e est &eacute;quivalente
	      &agrave; celle de celui trouv&eacute; dans le
	      catalogue des logiciels port&eacute;s local.</entry>
  	    </row>

        <row><entry>&lt;</entry>
	<entry>La version install&eacute;e est plus ancienne que celle
	  disponible dans le catalogue des logiciels port&eacute;s.</entry>
	</row>

        <row><entry>&gt;</entry><entry>La version install&eacute;e est plus
	  r&eacute;cente que celle trouv&eacute;e dans le catalogue local des
	  logiciels port&eacute;s. (le catalogue local des logiciels
	  port&eacute;s est probablement ancien)</entry></row>

        <row><entry>?</entry><entry>Le logiciel pr&eacute;-compil&eacute;
	  ne peut &ecirc;tre
	  trouv&eacute; dans l'index du catalogue des logiciels
	  port&eacute;s.  (Cela peut se produire quand, par exemple,
	  un logiciel install&eacute; est supprim&eacute; du catalogue des logiciels
	  port&eacute;s ou renomm&eacute;.)</entry></row>

        <row><entry>*</entry><entry>Il y a de multiples versions de ce
	  logiciel pr&eacute;-compil&eacute;.</entry></row>

	</tbody>
	</tgroup>
    </informaltable>
    </sect2>

    <sect2>
      <title>Effacer un logiciel pr&eacute;-compil&eacute;</title>
      <indexterm>
        <primary><command>pkg_delete</command></primary>
      </indexterm>
      <indexterm>
        <primary>logiciels pr&eacute;-compil&eacute;s</primary>
        <secondary>effacer</secondary>
      </indexterm>
      <para>Pour d&eacute;sinstaller un logiciel pr&eacute;-compil&eacute;
	pr&eacute;c&eacute;demment install&eacute;, utilisez l'utilitaire
	&man.pkg.delete.1;.</para>

      <screen>&prompt.root; <userinput>pkg_delete <replaceable>xchat-1.7.1</replaceable></userinput></screen>
    </sect2>

    <sect2>
      <title>Divers</title>
      <para>Toute l'information sur les logiciels pr&eacute;-compil&eacute;s
	est stock&eacute;e dans le r&eacute;pertoire
	<filename>/var/db/pkg</filename>.  La liste des fichiers
	install&eacute;s pour chaque logiciel pr&eacute;-compil&eacute;
	peut &ecirc;tre trouv&eacute;e dans des fichiers de ce
	r&eacute;pertoire.</para>
    </sect2>
  </sect1>

  <sect1 id="ports-using">
    <title>Utiliser le catalogue des logiciels port&eacute;s</title>

    <para>Les sections suivantes fournissent des instructions de base
      sur l'utilisation du catalogue des logiciels port&eacute;s pour installer
      et d&eacute;sinstaller des programmes sur votre syst&egrave;me.</para>

    <sect2 id="ports-tree">
      <title>Obtenir le catalogue des logiciels port&eacute;s</title>

      <para>Avant que vous puissiez installer des logiciels port&eacute;s, vous
	devez d'abord r&eacute;cup&eacute;rer le catalogue des logiciels
	port&eacute;s&mdash; qui est essentiellement un ensemble de
	<filename>Makefiles</filename>, de correctifs, et de fichiers de
	description habituellement plac&eacute;s dans
	<filename>/usr/ports</filename>.</para>

      <para>Quand vous avez install&eacute; votre syst&egrave;me FreeBSD,
	<application>Sysinstall</application> vous a demand&eacute; si vous
	aimeriez installer le catalogue des logiciels port&eacute;s.  Si vous
	avez choisi non, vous pouvez suivre ces instructions pour
	obtenir le catalogue des logiciels port&eacute;s:</para>

      <procedure>
	<title>La m&eacute;thode Sysinstall</title>

	<para>Cette m&eacute;thode implique l'utilisation &agrave; nouveau de
	  <application>sysinstall</application> pour installer
	  manuellement le catalogue des logiciels port&eacute;s.</para>

	<step>
	  <para>En tant que <username>root</username>, lancez
	    <command>/stand/sysinstall</command> comme montr&eacute;
	    ci-dessous:</para>

	  <screen>&prompt.root; <userinput>/stand/sysinstall</userinput></screen>
	</step>

	<step>
	  <para>Faites d&eacute;filer l'&eacute;cran vers le bas et
	    s&eacute;lectionnez <guimenuitem>Configure</guimenuitem>,
	    appuyez sur <keycap>Entr&eacute;e</keycap>.</para>
	</step>

	<step>
	  <para>Faites d&eacute;filer l'&eacute;cran vers le bas et
	    s&eacute;lectionnez <guimenuitem>Distributions</guimenuitem>,
	    appuyez sur <keycap>Entr&eacute;e</keycap>.</para>
	</step>

	<step>
	  <para>Faites d&eacute;filer l'&eacute;cran vers le bas jusqu'&agrave;
	    <guimenuitem>ports</guimenuitem>, appuyez sur
	    <keycap>Espace</keycap>.</para>
	</step>

	<step>
	  <para>Remontez jusqu'&agrave; <guimenuitem>Exit</guimenuitem>,
	    appuyez sur <keycap>Entr&eacute;e</keycap>.</para>
	</step>

	<step>
	  <para>Choisissez le support d'installation d&eacute;sir&eacute;,
	    comme un CDROM, par FTP, etc...</para>
	</step>

	<step>
	  <para>Remontez jusqu'&agrave; <guimenuitem>Exit</guimenuitem>
	    et appuyez sur <keycap>Enter</keycap>.</para>
	</step>

	<step>
	  <para>Appuyez sur la touche <keycap>X</keycap> pour quitter
	    <application>sysinstall</application>.</para>
	</step>
      </procedure>

      <para>Une autre alternative pour obtenir et garder &agrave; jour votre
	catalogue des logiciels port&eacute;s est d'utiliser
	<application>CVSup</application>.  Jetez un coup d'oeil au
	fichier <application>CVSup</application> du catalogue des
	logiciels port&eacute;s,
	<filename>/usr/share/examples/cvsup/ports-supfile</filename>.
	Consultez <link linkend="cvsup">Utiliser CVSup</link> (<xref
	linkend="cvsup">) pour plus d'information sur l'utilisation de
	<application>CVSup</application> et ce fichier.</para>

      <procedure>
	<title>La m&eacute;thode CVSup</title>

	<para>C'est une m&eacute;thode rapide pour r&eacute;cup&eacute;rer
	  le catalogue des
	  logiciels port&eacute;s en utilisant <application>CVSup</application>.
	  Si vous voulez garder &agrave; jour votre catalogue, ou apprendre
	  plus au sujet de <application>CVSup</application>, lisez les
	  sections mentionn&eacute;es pr&eacute;c&eacute;demment.</para>

	<step>
	  <para>Installer le logiciel port&eacute;
	    <filename role="package">net/cvsup</filename>.  Voir <link
	      linkend="cvsup-install">Installation de CVSup</link> (<xref
	      linkend="cvsup-install">) pour plus de details.</para>
	</step>

	<step>
	  <para>En tant que <username>root</username>, copier
	    <filename>/usr/share/examples/cvsup/ports-supfile</filename>
	    &agrave; un nouvel emplacement, comme <filename>/root</filename> ou
	    votre r&eacute;pertoire d'utilisateur.</para>
	</step>

	<step>
	  <para>Editez <filename>ports-supfile</filename>.</para>
	</step>

	<step>
	  <para>Remplacez <replaceable>CHANGE_THIS.FreeBSD.org</replaceable>
	    avec un serveur <application>CVSup</application> proche de
	    vous.  Voir <link linkend="cvsup-mirrors">Sites CVSup</link>
	    (<xref linkend="cvsup-mirrors">) pour une liste compl&egrave;te des
	    sites miroirs.</para>
	</step>

	<step>
	  <para>Lancez <command>cvsup</command>:</para>

	  <screen>&prompt.root; <userinput>cvsup -g -L 2 <replaceable>/root/ports-supfile</replaceable></userinput></screen>
	</step>

	<step>
	  <para>L'ex&eacute;cution ult&eacute;rieure de cette commande
	    t&eacute;l&eacute;chargera et appliquera
	    tous les changements r&eacute;cents &agrave;
	    votre catalogue des logiciels port&eacute;s sans
	    pour autant recompiler vos logiciels.</para>
	</step>
      </procedure>
    </sect2>

    <sect2 id="ports-skeleton">
      <title>Installation de logiciels port&eacute;s</title>

      <indexterm>
        <primary>logiciels port&eacute;s</primary>
        <secondary>installation</secondary>
      </indexterm>
      <para>La premi&egrave;re chose qui devrait &ecirc;tre expliqu&eacute;e
	quand on aborde le catalogue des logiciels port&eacute;s est ce que
	l'on entend par &ldquo;squelette&rdquo;.  En bref, un squelette
	est un ensemble minimal de fichiers qui indique &agrave; votre
	syst&egrave;me FreeBSD comment compiler et installer proprement un
	programme.  Chaque squelette contient:</para>

      <itemizedlist>
	<listitem>
	  <para>Un fichier <filename>Makefile</filename>.  Le fichier
	    <filename>Makefile</filename> contient les diverses
	    d&eacute;clarations qui indiquent comment l'application devrait
	    &ecirc;tre compil&eacute;e et o&ugrave; elle devrait &ecirc;tre
	    install&eacute;e sur votre syst&egrave;me.</para>
	</listitem>

	<listitem>
	  <para>Un fichier <filename>distinfo</filename>.  Ce fichier
	    contient l'information &agrave; propos des fichiers qui doivent
	    &ecirc;tre t&eacute;l&eacute;charg&eacute;s pour compiler le
	    logiciel, et leurs sommes de contr&ocirc;le, pour s'assurer que
	    ces fichiers n'ont pas &eacute;t&eacute;
	    corrompus durant le t&eacute;l&eacute;chargement en
	    utilisant &man.md5.1;.</para>
	</listitem>

	<listitem>
	  <para>Un r&eacute;pertoire <filename>files</filename>.
	    Ce r&eacute;pertoire
	    contient les correctifs pour permettre la compilation et
	    l'installation du programme sur votre syst&egrave;me FreeBSD.  Les
	    correctifs sont &agrave; la base de petits fichiers qui indiquent
	    des modifications sur des fichiers particuliers.  Ils sont
	    sous forme de fichiers texte, qui disent &ldquo;Effacer la
	    ligne 10&rdquo; ou &ldquo;Modifier la ligne 26
	    par...&rdquo;.  Les correctifs sont &eacute;galement connus sous le
	    nom de &ldquo;diffs&rdquo; car ils sont
	    g&eacute;n&eacute;r&eacute;s par le programme &man.diff.1;.</para>

	  <para>Ce r&eacute;pertoire peut &eacute;galement contenir d'autres
	    fichiers utilis&eacute;s pour la compilation du logiciel
	    port&eacute;.</para>
	</listitem>

	<listitem>
	  <para>Un fichier <filename>pkg-descr</filename>.  C'est une
	    description plus d&eacute;taill&eacute;e du programme, souvent en
	    plusieurs lignes.</para>
	</listitem>

	<listitem>
	  <para>Un fichier <filename>pkg-plist</filename>.  C'est une
	    liste de tous les fichiers qui seront install&eacute;s par le
	    logiciel port&eacute;.  Il indique &eacute;galement au
	    syst&egrave;me des logiciels port&eacute;s quels fichiers
	    sont &agrave; effacer lors d'une d&eacute;sinstallation.</para>
	</listitem>
      </itemizedlist>

      <para>Certains logiciels port&eacute;s utilisent d'autres fichiers,
	comme <filename>pkg-message</filename>.  Le catalogue des
	logiciels port&eacute;s utilise ces fichiers pour faire face &agrave;
	certaines situations sp&eacute;ciales.  Si vous d&eacute;sirez plus
	de d&eacute;tails
	au sujet de ces fichiers, et sur les logiciels port&eacute;s en
	g&eacute;n&eacute;ral, consultez le <ulink
	url="../porters-handbook/index.html">Manuel du d&eacute;veloppeur de
	logiciels port&eacute;s</ulink>.</para>

      <para>Maintenant que vous avez suffisamment d'information de fond
	au sujet du r&ocirc;le du catalogue des logiciels port&eacute;s,
	vous &ecirc;tes fin pr&ecirc;t &agrave; installer votre premier logiciel
	port&eacute;.  Cela peut &ecirc;tre fait de deux fa&ccedil;ons
	diff&eacute;rentes, et chacune sera expliqu&eacute;e ci-dessous.</para>

      <para>Avant que nous entrions dans le vif du sujet, vous devez
	s&eacute;lectionner le logiciel port&eacute; &agrave; installer.
	Il existe quelques mani&egrave;res de le faire, la mani&egrave;re
	la plus simple &eacute;tant d'utiliser
	la <ulink url="../../../../ports/index.html">liste des logiciels
	port&eacute;s sur le site de FreeBSD</ulink>.  Vous pouvez passer en
	revue les listes de logiciels ou utiliser la fonction de
	recherche sur le site.  Chaque logiciel port&eacute; inclut
	&eacute;galement une description donc vous pouvez lire un peu
	plus au sujet de chaque logiciel avant de d&eacute;cider de
	l'installer.</para>

      <para>Une autre m&eacute;thode consiste &agrave; utiliser la commande
	&man.whereis.1;.  Tapez simplement <command>whereis
	<replaceable>file</replaceable></command> o&ugrave;
	<replaceable>file</replaceable> est le programme que vous voulez
	installer.  S'il est trouv&eacute; sur le syst&egrave;me, on
	vous indiquera o&ugrave;
	il se trouve, de la mani&egrave;re suivante:</para>

      <screen>&prompt.root; <userinput>whereis lsof</userinput>
lsof: /usr/ports/sysutils/lsof</screen>

      <para>Cela nous indique que <command>lsof</command> (un utilitaire
	syst&egrave;me) peut &ecirc;tre trouv&eacute; dans le r&eacute;pertoire
	<filename>/usr/ports/sysutils/lsof</filename>.</para>

      <para>Encore une autre fa&ccedil;on de trouver un logiciel port&eacute;
	particulier est d'utiliser le m&eacute;canisme de recherche
	interne du catalogue des logiciels port&eacute;s.  Pour utiliser la
	fonction de recherche, vous devrez vous trouver dans le
	r&eacute;pertoire <filename>/usr/ports</filename>.  Une fois dans ce
	r&eacute;pertoire, lancez <command>make search
	name=<replaceable>program-name</replaceable></command> o&ugrave;
	<replaceable>program-name</replaceable> repr&eacute;sente le nom du
	programme que vous voulez localiser.  Par exemple, si vous
	recherchiez <command>lsof</command>:</para>

      <screen>&prompt.root; <userinput>cd /usr/ports</userinput>
&prompt.root; <userinput>make search name=lsof</userinput>
Port:   lsof-4.56.4
Path:   /usr/ports/sysutils/lsof
Info:   Lists information about open files (similar to fstat(1))
Maint:  obrien@FreeBSD.org
Index:  sysutils
B-deps:
R-deps: </screen>

      <para>La partie du message de sortie &agrave; laquelle vous devez
	pr&ecirc;ter attention est la ligne &ldquo;Path:&rdquo;, car cela vous
	indique o&ugrave; trouver le logiciel port&eacute;.  Les autres
	informations ne sont pas n&eacute;cessaires afin d'installer
	le logiciel
	port&eacute;, aussi on en parlera pas ici.</para>

      <para>Pour une recherche plus en profondeur vous pouvez &eacute;galement
	utiliser <command>make search
	key=<replaceable>string</replaceable></command> o&ugrave;
	<replaceable>string</replaceable> est le texte &agrave; rechercher.
	Cela recherche les noms de logiciels port&eacute;s, les commentaires,
	les descriptions et les d&eacute;pendances et peut &ecirc;tre
	utilis&eacute; pour
	trouver des logiciels port&eacute;s se rapportant &agrave; un sujet
	particulier si vous ne connaissez pas le nom du programme que
	vous cherchez.</para>

      <para>Dans les deux cas, la cha&icirc;ne de caract&egrave;re de
	recherche n'est pas sensible &agrave; la casse des caract&egrave;res.
	Rechercher &ldquo;LSOF&rdquo; m&egrave;nera aux m&ecirc;me
	r&eacute;sultats que la recherche de &ldquo;lsof&rdquo;.</para>

      <note>
        <para>Vous devez avoir ouvert une session sous l'utilisateur
	  <username>root</username> pour installer des logiciels
	  port&eacute;s.</para>
      </note>

      <para>Maintenant que vous avez trouv&eacute; le logiciel port&eacute;
	que vous d&eacute;sirez installer, vous &ecirc;tes pr&ecirc;t pour
	l'installation en tant
	que telle.  Le logiciel port&eacute; contient les instructions pour
	compiler le code source, mais ne contient pas le code source.
	Vous pouvez obtenir le code source &agrave; partie d'un CDROM ou de
	l'Internet.  Le code source est distribu&eacute; de la fa&ccedil;on dont
	l'auteur le d&eacute;sire.  Fr&eacute;quemment c'est une archive tar
	compress&eacute;e avec gzip, mais elle pourra &ecirc;tre
	compress&eacute;e avec un
	autre outil ou m&ecirc;me non compress&eacute;e.  Le code source d'un
	programme, peu importe la forme sous laquelle il est distribu&eacute;,
	est appel&eacute; un fichier &ldquo;distfile&rdquo;.  Vous pouvez
	obtenir le &ldquo;distfile&rdquo; depuis un CDROM ou depuis
	l'Internet.</para>

      <sect3 id="ports-cd">
        <title>Installer des logiciels port&eacute;s &agrave; partir d'un
	  CDROM</title>

        <indexterm>
          <primary>logiciels port&eacute;s</primary>
          <secondary>installation &agrave; partir d'un CDROM</secondary>
        </indexterm>
        <para>Les images des CDROM officiels du Projet FreeBSD ne
	  contiennent plus les distfiles.  Ils prennent beaucoup
	  d'espace qui est bien mieux utilis&eacute; par les logiciels
	  pr&eacute;-compil&eacute;s.  Les CDROMs comme ceux du FreeBSD PowerPak
	  inclus les distfiles, et vous pouvez les commander
	  aupr&egrave;s d'un vendeur comme <ulink
	  url="http://www.freebsdmall.com/">FreeBSD Mall</ulink>.  Cette
	  section suppose que vous disposez d'un tel jeu de
	  CDROM.</para>

        <para>Placez votre CDROM FreeBSD dans le lecteur.  Montez-le sur
	  <filename>/cdrom</filename> (Si vous utilisez un point de
	  montage diff&eacute;rent, l'installation ne fonctionnera pas).  Pour
	  commencer, rendez-vous dans le r&eacute;pertoire du logiciel
	  port&eacute; que vous voulez installer:</para>

        <screen>&prompt.root; <userinput>cd /usr/ports/sysutils/lsof</userinput></screen>

        <para>Une fois &agrave; l'int&eacute;rieur du r&eacute;pertoire
	  <filename>lsof</filename> vous verrez le squelette du logiciel
	  port&eacute;.  L'&eacute;tape suivante est de compiler
	  (&eacute;galement appel&eacute; la
	  &ldquo;construction&rdquo;) le logiciel port&eacute;.  Cela est fait en tapant
	  simplement <command>make</command> &agrave; l'invite.  Une fois que
	  c'est fait, vous devriez voir quelque chose comme ceci:</para>

        <screen>&prompt.root; <userinput>make</userinput>
&gt;&gt; lsof_4.57D.freebsd.tar.gz doesn't seem to exist in /usr/ports/distfiles/.
&gt;&gt; Attempting to fetch from file:/cdrom/ports/distfiles/.
===&gt;  Extracting for lsof-4.57
...
[extraction output snipped]
...
&gt;&gt; Checksum OK for lsof_4.57D.freebsd.tar.gz.
===&gt;  Patching for lsof-4.57
===&gt;  Applying FreeBSD patches for lsof-4.57
===&gt;  Configuring for lsof-4.57
...
[configure output snipped]
...
===&gt;  Building for lsof-4.57
...
[compilation output snipped]
...
&prompt.root;</screen>

        <para>Notez qu'une fois la compilation termin&eacute;e, vous vous
	  retrouvez face &agrave; l'invite.  L'&eacute;tape suivante est
	  d'installer
	  le logiciel port&eacute;.  Afin de l'installer, vous devez juste
	  ajouter un mot &agrave; la commande <command>make</command>, et ce
	  mot est <command>install</command>:</para>

        <screen>&prompt.root; <userinput>make install</userinput>
===&gt;  Installing for lsof-4.57
...
[installation output snipped]
...
===&gt;   Generating temporary packing list
===&gt;   Compressing manual pages for lsof-4.57
===&gt;   Registering installation for lsof-4.57
===&gt;  SECURITY NOTE:
      This port has installed the following binaries which execute with
      increased privileges.
&prompt.root;</screen>

        <para>Une fois de retour &agrave; l'invite, vous devriez &ecirc;tre
	  en mesure d'ex&eacute;cuter l'application que vous venez juste
	  d'installer.
	  Comme <command>lsof</command> est un programme qui tourne avec
	  des privil&egrave;ges accrus, un avertissement sur la
	  s&eacute;curit&eacute; est affich&eacute;.  Durant la compilation
	  et l'installation de logiciels port&eacute;s, vous devriez faire
	  attention &agrave; tout avertissement qui
	  pourrait appara&icirc;tre.</para>

        <note>
          <para>Vous pouvez vous &eacute;conomiser une &eacute;tape
	    suppl&eacute;mentaire en lan&ccedil;ant juste
	    <command>make install</command> &agrave; la place de
	    <command>make</command> et <command>make install</command>
	    sous forme de deux &eacute;tapes s&eacute;par&eacute;es.</para>
	</note>

	<note>
	  <para>Certains interpr&eacute;teurs de commandes maintiennent un
	    cache des commandes qui sont disponibles dans les
	    r&eacute;pertoires list&eacute;s dans la variable d'environnement
	    <envar>PATH</envar>, pour acc&eacute;l&eacute;rer les
	    op&eacute;rations de
	    recherche des fichiers ex&eacute;cutables de ces commandes.  Si
	    vous utilisez un de ces interpr&eacute;teurs de commandes, vous
	    pourrez avoir &agrave; utiliser la commande
	    <command>rehash</command> apr&egrave;s l'installation d'un logiciel
	    port&eacute;, avant que la commande fra&icirc;chement
	    install&eacute;e ne puisse &ecirc;tre utilis&eacute;e.
	    Cela est vrai pour les interpr&eacute;teurs de
	    commandes faisant partie du syst&egrave;me de base
	    (comme <command>tcsh</command>) et les interpr&eacute;teurs de
	    commandes qui sont disponibles en tant que logiciels port&eacute;s
	    (par exemple, <filename
	    role="package">shells/zsh</filename>).</para>
	</note>

        <note>
          <para>Soyez conscient que les licences de quelques logiciels
	    port&eacute;s ne permettent pas leur pr&eacute;sence sur le CDROM.
	    Cela peut &ecirc;tre d&ucirc; &agrave; la n&eacute;cessit&eacute;
	    de remplir un formulaire
	    d'enregistrement avant le t&eacute;l&eacute;chargement, ou que la
	    redistribution n'est pas permise, ou toute autre raison.  Si vous d&eacute;sirez
	    installer un logiciel port&eacute; qui n'est pas disponible sur le
	    CDROM, vous devrez vous connecter afin d'effectuer cela
	    (voir la <link linkend="ports-inet">section
	    suivante</link>).</para>
	</note>
      </sect3>

      <sect3 id="ports-inet">
      <title>Installer des logiciels port&eacute;s &agrave; partir
	d'Internet</title>

        <para>Comme pour la section pr&eacute;c&eacute;dente, cette section
	  suppose que vous avez une connexion internet qui fonctionne.  Si ce
	  n'est pas le cas, vous devrez effectuer l'<link
	  linkend="ports-cd">installation par CDROM</link>, ou mettre
	  manuellement une copie des sources dans le r&eacute;pertoire
	  <filename
	  role="directory">/usr/ports/distfiles</filename>.</para>

        <para>L'installation d'un logiciel port&eacute; &agrave; partir
	  d'Internet est effectu&eacute;e de la m&ecirc;me mani&egrave;re
	  que si vous installiez &agrave; partir
	  d'un CDROM.  La seule diff&eacute;rence entre les deux est que le
	  distfile est t&eacute;l&eacute;charg&eacute; sur Internet
	  plut&ocirc;t qu'obtenu sur le CDROM.</para>

        <para>Les &eacute;tapes impliqu&eacute;es sont identiques:</para>

        <screen>&prompt.root; <userinput>make install</userinput>
&gt;&gt; lsof_4.57D.freebsd.tar.gz doesn't seem to exist in /usr/ports/distfiles/.
&gt;&gt; Attempting to fetch from ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/distfiles/.
Receiving lsof_4.57D.freebsd.tar.gz (439860 bytes): 100%
439860 bytes transferred in 18.0 seconds (23.90 kBps)
===&gt;  Extracting for lsof-4.57
...
[extraction output snipped]
...
&gt;&gt; Checksum OK for lsof_4.57D.freebsd.tar.gz.
===&gt;  Patching for lsof-4.57
===&gt;  Applying FreeBSD patches for lsof-4.57
===&gt;  Configuring for lsof-4.57
...
[configure output snipped]
...
===&gt;  Building for lsof-4.57
...
[compilation output snipped]
...
===&gt;  Installing for lsof-4.57
...
[installation output snipped]
...
===&gt;   Generating temporary packing list
===&gt;   Compressing manual pages for lsof-4.57
===&gt;   Registering installation for lsof-4.57
===&gt;  SECURITY NOTE:
      This port has installed the following binaries which execute with
      increased privileges.
&prompt.root;</screen>

        <para>Comme vous pouvez le voir, la seule diff&eacute;rence est la
	  ligne qui indique o&ugrave; le syst&egrave;me a
	  r&eacute;cup&eacute;r&eacute; les sources du
	  logiciel port&eacute;.</para>

	<para>Le catalogue des logiciels port&eacute;s utilise &man.fetch.1;
	  pour t&eacute;l&eacute;charger les fichiers, qui respecte diverses
	  variables d'environnement, dont <envar>FTP_PASSIVE_MODE</envar>,
	  <envar>FTP_PROXY</envar>, et <envar>FTP_PASSWORD</envar>.  Il
	  se peut que vous ayez besoin de configurer une ou plusieurs
	  de ces derni&egrave;res si vous &ecirc;tes derri&egrave;re un
	  coupe-feu, ou devez utiliser un proxy FTP/HTTP.
	  Consultez la page de manuel &man.fetch.3; pour la liste
	  compl&egrave;te des variables.</para>

	<para>Pour les utilisateurs qui ne peuvent rester
	  connect&eacute;s &agrave; l'Internet ind&eacute;finiment, il
	  existe la commande <command>make
	  <maketarget>fetch</maketarget></command>.  Ex&eacute;cutez
	  cette commande &agrave; la base du catalogue des logiciels
	  port&eacute;s (<filename
	  role="directory">/usr/ports</filename>) et les fichiers
	  n&eacute;cessaires seront t&eacute;l&eacute;charg&eacute;s.
	  Cette commande fonctionnera &eacute;galement dans les
	  sous-r&eacute;pertoires du catalogue, par exemple: <filename
	  role="directory">/usr/ports/net</filename>.  Notez que si un
	  logiciel port&eacute; d&eacute;pend de biblioth&egrave;ques
	  particuli&egrave;res ou d'autres logiciels port&eacute;s,
	  cette commande de r&eacute;cup&eacute;rera
	  <emphasis>pas</emphasis> les sources de ces logiciels.
	  Remplacez <maketarget>fetch</maketarget> par
	  <maketarget>fetch-recursive</maketarget> si vous voulez
	  r&eacute;cup&eacute;rer &eacute;galement les sources des
	  logiciels dont d&eacute;pend un logiciel
	  port&eacute;.</para>

	<note>
	  <para>Vous pouvez compiler tous les logiciels d'une
	    cat&eacute;gorie ou de l'ensemble du catalogue en
	    ex&eacute;cutant la commande <command>make</command> dans un
	    r&eacute;pertoire de base, juste comme la commande
	    <command>make <makevar>fetch</makevar></command>
	    pr&eacute;c&eacute;dente.  C'est, cependant, une id&eacute;e
	    dangereuse &eacute;tant donn&eacute; que certains logiciels
	    port&eacute;s ne peuvent coexister.  Dans d'autres cas,
	    certains logiciels port&eacute;s peuvent installer des
	    fichiers diff&eacute;rents ayant le m&ecirc;me
	    nom.</para></note>

	<para>Dans de rares cas les utilisateurs peuvent vouloir
	  r&eacute;cup&eacute;rer les archives &agrave; partir d'un
	  site diff&eacute;rent du <makevar>MASTER_SITES</makevar> par
	  d&eacute;faut (l'emplacement par d&eacute;faut &agrave;
	  partir duquel les fichiers sont
	  t&eacute;l&eacute;charg&eacute;s).  Vous pouvez surcharger
	  l'option <makevar>MASTER_SITES</makevar> avec la commande
	  suivante:</para>

	<screen>&prompt.root; <userinput>cd /usr/ports/<replaceable>r&eacute;pertoire</replaceable></userinput>
&prompt.root; <userinput>make MASTER_SITE_OVERRIDE= \
ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/distfiles/ fetch</userinput></screen>

	<para>Dans cet exemple nous modifions la valeur par
	  d&eacute;faut de l'option <makevar>MASTER_SITES</makevar>
	  pour <hostid
	  role="fqdn">ftp.FreeBSD.org/pub/FreeBSD/ports/distfiles/</hostid>.</para>

	<note>
	  <para>Certains logiciels port&eacute;s autorisent (ou
	    m&ecirc;me n&eacute;cessitent) des options de compilation
	    qui permettent l'activation/d&eacute;sactivation de parties
	    de l'application qui ne sont pas n&eacute;cessaires, de
	    certaines options de s&eacute;curit&eacute;, et autres
	    personnalisations.  Quelques noms de logiciels viennent
	    imm&eacute;diatement &agrave; l'esprit: <filename
	    role="package">www/mozilla</filename>, <filename
	    role="package">security/gpgme</filename>, et <filename
	    role="package">mail/sylpheed-claws</filename>.  Un message
	    sera affich&eacute; quand de telles options sont
	    disponibles.</para></note>
      </sect3>

      <sect3>
	<title>Modifier les r&eacute;pertoires par d&eacute;faut des
	  logiciels port&eacute;s</title>

	<para>Il est parfois utile (ou obligatoire) d'utiliser des
	  r&eacute;pertoires diff&eacute;rents pour les archives et le
	  catalogue des logiciels port&eacute;s.  Les variables
	  <makevar>PORTSDIR</makevar> et <makevar>PREFIX</makevar>
	  permettent de modifier les r&eacute;pertoires par
	  d&eacute;faut.  Par exemple:</para>

	<screen>&prompt.root; <userinput>make PORTSDIR=/usr/home/example/ports install</userinput></screen>

	<para>compilera le logiciel dans le r&eacute;pertoire
	  <filename
	  role="directory">/usr/home/example/ports</filename> et
	  installera tout dans <filename
	  role="directrory">/usr/local</filename>.</para>

	<screen>&prompt.root; <userinput>make PREFIX=/usr/home/example/local install</userinput></screen>

	<para>le compilera dans <filename
	  role="directrory">/usr/ports</filename> et l'installera dans
	  <filename
	  role="directory">/usr/home/example/local</filename>.</para>

	<para>Et bien s&ucirc;r</para>

	<screen>&prompt.root; <userinput>make PORTSDIR=../ports PREFIX=../local install</userinput></screen>

	<para>combinera les deux (c'est trop long pour tenir sur cette
	  page, mais cela devrait vous donner une id&eacute;e
	  g&eacute;n&eacute;rale).</para>

	<para>Alternativement, ces variables peuvent &eacute;galement
	  &ecirc;tre configur&eacute;es dans votre environnement.
	  Consultez la page de manuel de votre interpr&eacute;teur de
	  commandes pour des instructions sur la proc&eacute;dure
	  &agrave; suivre.</para>
      </sect3>

      <sect3>
	<title>Travailler avec <command>imake</command></title>

	<para>Certains logiciels port&eacute;s qui utilisent
	  <command>imake</command> (une partie du syst&egrave;me X
	  Window) ne fonctionnent pas correctement avec la variable
	  <makevar>PREFIX</makevar>, et insisteront pour s'installer
	  sous <filename role="directory">/usr/X11R6</filename>.  De
	  fa&ccedil;on similaire, certains logiciels Perl ignorent
	  <makevar>PREFIX</makevar> et s'installent dans
	  l'arborescence Perl.  Faire en sorte que ces logiciels
	  port&eacute;s respectent <makevar>PREFIX</makevar> est une
	  t&acirc;che difficile voire impossible.</para>
      </sect3>
    </sect2>

    <sect2 id="ports-removing">
      <title>Supprimer des logiciels port&eacute;s install&eacute;s</title>

      <indexterm>
	<primary>logiciels port&eacute;s</primary>
	<secondary>d&eacute;sinstallation</secondary>
      </indexterm>
      <para>Maintenant que vous savez comment installer des logiciels
	port&eacute;s, vous vous demandez probablement comment les effacer,
	juste au cas o&ugrave; vous en installez un et plus tard vous vous
	apercevez que vous n'avez pas install&eacute; le bon logiciel
	port&eacute;.  Nous d&eacute;sinstallerons notre exemple
	pr&eacute;c&eacute;dent (qui &eacute;tait
	<command>lsof</command> pour ceux d'entre vous qui n'ont pas
	suivi).  Comme pour l'installation de logiciels port&eacute;s, la
	premi&egrave;re chose que vous devez faire et de vous rendre dans le
	r&eacute;pertoire du logiciel port&eacute;,
	<filename>/usr/ports/sysutils/lsof</filename>.  Apr&egrave;s avoir
	chang&eacute; de r&eacute;pertoire, vous &ecirc;tes pr&ecirc;t pour
	d&eacute;sinstaller
	<command>lsof</command>.  C'est fait gr&acirc;ce &agrave; la commande
	<command>make deinstall</command>:</para>

      <screen>&prompt.root; <userinput>cd /usr/ports/sysutils/lsof</userinput>
&prompt.root; <userinput>make deinstall</userinput>
===&gt;  Deinstalling for lsof-4.57</screen>

      <para>C'&eacute;tait relativement facile.  Vous avez retir&eacute;
	<command>lsof</command> de votre syst&egrave;me.
	Si vous d&eacute;sirez le
	r&eacute;installer, vous pouvez le faire en lan&ccedil;ant <command>make
	reinstall</command> depuis le r&eacute;pertoire
	<filename>/usr/ports/sysutils/lsof</filename>.</para>

      <para>La s&eacute;quence <command>make deinstall</command> et
	<command>make reinstall</command> ne fonctionnera pas une fois
	que vous avez lanc&eacute; <command>make clean</command>.  Si vous
	voulez d&eacute;installer un logiciel port&eacute; apr&egrave;s
	le nettoyage,
	utilisez &man.pkg.delete.1; comme d&eacute;crit dans la
	section <link linkend="packages-using">Utiliser le syst&egrave;me
	des logiciels pr&eacute;-compil&eacute;s</link> du Manuel.</para>
    </sect2>

    <sect2 id="ports-disk-space">
      <title>Logiciels port&eacute;s et espace disque</title>

      <indexterm>
	<primary>logiciels port&eacute;s</primary>
	<secondary>espace disque</secondary>
      </indexterm>
      <para>A la longue, l'utilisation du catalogue des logiciels
	port&eacute;s peut rapidement consommer votre espace disque.
	Pour cette raison vous devriez toujours penser &agrave; nettoyer
	les r&eacute;pertoires de travail en utilisant la commande
	<command>make clean</command>.  Cela effacera le
	r&eacute;pertoire <filename role="directory">work</filename>
	apr&egrave;s la compilation et l'installation d'un logiciel
	port&eacute;.  Vous pouvez &eacute;galement supprimer les
	archives <filename>.tar</filename> du r&eacute;pertoire
	<filename role="directory">distfiles</filename>, et supprimer
	les ports install&eacute;s quand ils sont devenus
	inutiles.</para>

      <para>Certains utilisateurs choisissent de limiter le nombre de
	cat&eacute;gories dans le catalogue des logiciels
	port&eacute;s en pla&ccedil;ant des entr&eacute;es dans le
	fichier <filename>refuse</filename>.  De cette fa&ccedil;on
	quand ils lanceront <application>CVSup</application>, ce
	dernier ne r&eacute;cup&eacute;rera pas les fichiers des
	cat&eacute;gories mentionn&eacute;es dans ce fichier.</para>
    </sect2>

    <sect2 id="ports-upgrading">
      <title>Mise &agrave; jour des logiciels port&eacute;s</title>

      <indexterm>
	<primary>portupgrade</primary>
      </indexterm>
      <indexterm>
	<primary>logiciels port&eacute;s</primary>
	<secondary>mise &agrave; jour</secondary>
      </indexterm>
      <para>Maintenir &agrave; jour vos logiciels port&eacute;s peut
	&ecirc;tre un travail p&eacute;nible.  Par exemple, pour mettre
	&agrave; jour un logiciel vous iriez dans le r&eacute;pertoire
	du logiciel port&eacute;, compileriez le logiciel,
	d&eacute;sinstalleriez l'ancienne version, installeriez la
	nouvelle version, et puis finalement vous feriez le
	&ldquo;m&eacute;nage&rdquo; dans le r&eacute;pertoire du
	logiciel port&eacute;.  Imaginez faire cela pour cinq logiciels,
	p&eacute;nible n'est-ce pas?  C'&eacute;tait un probl&egrave;me
	important dans le pass&eacute; pour les administateurs
	syst&egrave;me, mais maintenant nous disposons d'utilitaires se
	chargeant &agrave; notre place de ce travail.  Par exemple
	l'utilitaire <filename
	role="package">sysutils/portupgrade</filename> s'occupera de
	tout &agrave; votre place!  Installez-le comme vous le feriez
	pour tout autre logiciel port&eacute; en utilisant la commande
	<command>make <makevar>install clean</makevar></command>.</para>

      <para>Cr&eacute;ez maintenant la base de donn&eacute;es avec la
	commande <command>pkgdb -F</command>.  Une recherche des
	logiciels port&eacute;s install&eacute;s sera effectu&eacute;e
	ainsi que la cr&eacute;ation d'un fichier de base de
	donn&eacute;es dans le r&eacute;pertoire <filename
	role="directory">/var/db/pkg</filename>.  Maintenant, si vous
	ex&eacute;cutez <command>portupgrade -a</command>, le
	programme lira la base de donn&eacute;es et le fichier
	<filename>INDEX</filename> des logiciels port&eacute;s.  Puis
	<application>portupgrade</application> commencera le
	t&eacute;l&eacute;chargement, la compilation, la sauvegarde,
	l'installation, et le nettoyage des logiciels port&eacute;s
	qui doivent &ecirc;tre mis &agrave; jour.  Le programme
	<application>portupgrade</application> propose de nombreuses
	options pour les diff&eacute;rents cas de figure, les plus
	importants &eacute;tant pr&eacute;sent&eacute;s plus
	bas.</para>

      <para>Si vous d&eacute;sirez mettre &agrave; jour une
	application particuli&egrave;re et non pas la base de
	donn&eacute;es compl&egrave;te, utilisez la commande
	<command>portupgrade
	<replaceable>nom_application</replaceable></command>, ajoutez
	les indicateurs <option>-r</option> si
	<application>portupgrade</application> doit mettre &agrave;
	jour &eacute;galement toutes les applications
	d&eacute;pendantes de l'application donn&eacute;e, et
	<option>-R</option> pour &eacute;galement mettre &agrave; jour
	les applications n&eacute;cessaires &agrave; l'application
	donn&eacute;e.  Pour utiliser les versions
	pr&eacute;-compil&eacute;es plut&ocirc;t que les logiciels
	port&eacute;s pour l'installation, utilisez l'option
	<option>-P</option> et pour juste r&eacute;cup&eacute;rer les
	sources sans compiler ni installer quelque chose, utilisez
	<option>-F</option>.  Pour plus d'informations consultez la
	page de manuel &man.portupgrade.1;.</para>

      <note>
	<para>Il est important de mettre &agrave; jour
	  r&eacute;guli&egrave;rement la base de donn&eacute;es en
	  utilisant <command>pkgdb -F</command> pour en corriger les
	  inconsistances, tout particuli&egrave;rement quand
	  <application>portupgrade</application> vous le demande.  Ne
	  stoppez pas <application>portupgrade</application> quand il
	  met &agrave; jour la base de donn&eacute;es des applications
	  install&eacute;es, cela laisserait la base de donn&eacute;es
	  dans un &eacute;tat inconsistant.</para>
      </note>

      <para>Il existe d'autres utilitaires en mesure d'effectuer ce
	travail, consultez le r&eacute;pertoire <filename
	role="directory">ports/sysutils</filename> &agrave; ce
	sujet.</para>
    </sect2>
  </sect1>

  <sect1 id="ports-nextsteps">
    <title>Activit&eacute;s de post-installation</title>

    <para>Apr&egrave;s l'installation d'une nouvelle application vous voudrez
      normalement lire la documentation qui a pu &ecirc;tre &eacute;galement
      install&eacute;e, &eacute;diter les fichiers de configuration
      n&eacute;cessaires, v&eacute;rifier que l'application est
      lanc&eacute;e au d&eacute;marrage (si c'est un
      daemon), et ainsi de suite.</para>

    <para>Les &eacute;tapes que vous devez suivre pour configurer
      chaque application seront bien &eacute;videmment diff&eacute;rentes.
      Cependant, si vous venez juste d'installer une nouvelle application
      et que vous vous demandez &ldquo;Et maintenant?&rdquo; les astuces
      suivantes pourront vous aider:</para>

    <itemizedlist>
      <listitem>
	<para>Utilisez &man.pkg.info.1; pour d&eacute;terminer quels fichiers
	  ont &eacute;t&eacute; install&eacute;s et &agrave; quel endroit.
	  Par exemple, si vous
	  venez juste d'installer FooPackage version 1.0.0, alors la
	  commande</para>

	<screen>&prompt.root; <userinput>pkg_info -L foopackage-1.0.0 | less</userinput></screen>

	<para>affichera tous les fichiers install&eacute;s par le logiciel
	  pr&eacute;-compil&eacute;.  Portez une attention toute
	  particuli&egrave;re aux
	  fichiers dans les r&eacute;pertoires <filename>man/</filename>, qui
	  seront des pages de manuel, dans les r&eacute;pertoires
	  <filename>etc/</filename> , qui seront des fichiers de
	  configuration, et dans <filename>doc/</filename> qui seront de
	  la documentation plus compl&egrave;te.</para>

	<para>Si vous n'&ecirc;tes pas s&ucirc;r de la version de
	  l'application qui vient juste d'&ecirc;tre install&eacute;e,
	  une commande comme</para>

	<screen>&prompt.root; <userinput>pkg_info | grep -i <replaceable>foopackage</replaceable></userinput></screen>

	<para>d&eacute;terminera tous les logiciels
	  pr&eacute;-compil&eacute;s install&eacute;s qui
	  ont <replaceable>foopackage</replaceable> dans leur nom.
	  Remplacez <replaceable>foopackage</replaceable> dans votre
	  ligne de commande par ce qui convient.</para>
      </listitem>

      <listitem>
	<para>Une fois que vous avez identifi&eacute; o&ugrave; les
	  pages de manuel de l'application ont &eacute;t&eacute;
	  install&eacute;es, consultez-les en utilisant
	  la commande  &man.man.1;.  De m&ecirc;me, jetez un coup d'oeil
	  aux exemples de fichiers de configuration, et toute autre
	  documentation additionnelle qui peut avoir &eacute;t&eacute;
	  fournie.</para>
      </listitem>

      <listitem>
	<para>Si l'application a un site web, consultez-le pour de la
	  documentation suppl&eacute;mentaire, des listes de questions
	  fr&eacute;quemment pos&eacute;es, etc.  Si vous n'&ecirc;tes
	  pas s&ucirc;r de
	  l'adresse du site web, elle peut &ecirc;tre affich&eacute;e dans le
	  r&eacute;sultat de la commande:</para>

	<screen>&prompt.root; <userinput>pkg_info <replaceable>foopackage-1.0.0</replaceable></userinput></screen>

	<para>La ligne <literal>WWW:</literal>, si elle est pr&eacute;sente,
	  devrait donner l'URL du site web de l'application.</para>
      </listitem>

      <listitem>
	<para>Les logiciels qui doivent &ecirc;tre lanc&eacute;s au
	  d&eacute;marrage (comme les serveurs Internet) installent
	  g&eacute;n&eacute;ralement un exemple de proc&eacute;dure de
	  lancement dans le r&eacute;pertoire <filename
	  role="directory">/usr/local/etc/rc.d</filename>.  Vous devriez
	  contr&ocirc;ler si ce fichier est correct et l'&eacute;diter
	  ou le renommer si n&eacute;cessaire.  Consultez la section
	  <link linkend="configtuning-starting-services">D&eacute;marrer
	  des services</link> pour plus d'informations.</para>
      </listitem>
    </itemizedlist>
  </sect1>

  <sect1 id="ports-broken">
    <title>Que faire avec les logiciels port&eacute;s ne fonctionnant
      pas?</title>

      <para>Si vous rencontrez un portage qui ne fonctionne pas, il y a
	certaines choses que vous pouvez faire:</para>

      <orderedlist>
        <listitem>
	  <para>Corrigez le probl&egrave;me!  Le <ulink
	    url="../porters-handbook/index.html">Manuel du d&eacute;veloppeur
	    de logiciels port&eacute;s</ulink> inclut des informations
	    d&eacute;taill&eacute;es sur l'infrastructure des logiciels
	    port&eacute;s vous permettant de corriger le portage
	    &eacute;ventuellement d&eacute;fectueux
	    ou m&ecirc;me soumettre le votre!</para>
	</listitem>

	<listitem>
	  <para>Rousp&eacute;tez&mdash;<emphasis>par courrier
	    &eacute;lectronique
	    uniquement</emphasis>!  Envoyez un courrier &eacute;lectronique au
	    responsable du logiciel port&eacute; tout d'abord.  Tapez la
	    commande <command>make maintainer</command> ou lisez le
	    fichier <filename>Makefile</filename> pour trouver l'adresse
	    &eacute;lectronique du responsable.  Pensez &agrave;
	    pr&eacute;ciser le nom et la
	    version du logiciel port&eacute; (envoyer la ligne
	    <literal>&dollar;FreeBSD:</literal> du fichier
	    <filename>Makefile</filename>) et les messages d'erreurs
	    quand vous &eacute;crivez au responsable.  Si vous n'obtenez pas de
	    r&eacute;ponse du responsable vous pouvez utiliser
	    &man.send-pr.1; pour soumettre un rapport de
	    bogue.</para>
	</listitem>

	<listitem>
	  <para>R&eacute;cup&eacute;rez la version pr&eacute;-compil&eacute;e
	    sur un serveur FTP proche de vous.  Le catalogue de
	    &ldquo;r&eacute;f&eacute;rence&rdquo; des logiciels
	    pr&eacute;-compil&eacute;s se trouve
	    sur <hostid role="fqdn">ftp.FreeBSD.org</hostid> dans le
	    r&eacute;pertoire
	    <ulink
	    url="ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/packages/">packages</ulink>,
	    mais v&eacute;rifiez <emphasis>d'abord</emphasis> votre miroir
	    local!  Il y a globalement plus de chances que cela marche,
	    que d'essayez de compiler &agrave; partir des sources, et cela va
	    &eacute;galement beaucoup plus vite.  Utilisez le programme
	    &man.pkg.add.1; pour installer le logiciel
	    pr&eacute;-compil&eacute; sur votre syst&egrave;me.</para>
	</listitem>
      </orderedlist>
  </sect1>

</chapter>

<!--
     Local Variables:
     mode: sgml
     sgml-declaration: "../chapter.decl"
     sgml-indent-data: t
     sgml-omittag: nil
     sgml-always-quote-attributes: t
     sgml-parent-document: ("../book.sgml" "part" "chapter")
     End:
-->
