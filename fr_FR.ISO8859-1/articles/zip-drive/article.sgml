<!--
     The FreeBSD Documentation Project
     The FreeBSD French Documentation Project

     $FreeBSD$
     Version française : Michel Boucey
     Original revision: n.nn

-->   
<!-- %man; -->

<!DOCTYPE ARTICLE PUBLIC "-//FreeBSD//DTD DocBook V3.1-Based Extension//EN" [
<!ENTITY % man PUBLIC "-//FreeBSD//ENTITIES DocBook Manual Page Entities//EN"> %man;
<!ENTITY % urls PUBLIC "-//FreeBSD//ENTITIES Common Document URL Entities//FR"> %urls;
<!ENTITY % abstract PUBLIC "-//FreeBSD//ENTITIES DocBook Abstract Entities//FR"> %abstract;
<!ENTITY % artheader PUBLIC "-//FreeBSD//ENTITIES DocBook ArtHeader Entities//FR"> %artheader;
<!ENTITY % translators PUBLIC "-//FreeBSD//ENTITIES DocBook Translator Entities//FR"> %translators;

<!ENTITY % authors SYSTEM "../../../en_US.ISO_8859-1/books/handbook/authors.ent"> %authors;
<!ENTITY % mailing-lists SYSTEM "../../books/handbook/mailing-lists.ent"> %mailing-lists;
<!ENTITY rel.current CDATA "3.2">


]>

<article lang="fr">
  <artheader>
    <title>Les lecteurs ZIP</title>

    <authorgroup>
      <author>
	<firstname>Jason</firstname>
	<surname>Bacon</surname>
	
	<affiliation>
	  <address><email>acadix@execpc.com</email></address>
	</affiliation>
      </author>
    </authorgroup>
   <abstract>
      &abstract.license;
      &abstract.disclaimer;
      &trans.a.boucey;
   </abstract>
  </artheader>

  <sect1>
    <title>Les bases au sujet des lecteurs ZIP</title>

    <para>Les disques ZIP sont des disques magnétiques amovibles de grande 
      capacité, accessibles en lecture et en écriture par les lecteurs ZIP de 
      marque IOMEGA.  Les disques ZIP sont similaires aux disquettes, en 
      étant cependant bien plus rapides et en ayant une capacité bien 
      supérieure. Alors qu'une disquette comporte typiquement 1.44 Mo,
      les disques ZIP sont disponibles en deux capacités, à savoir 100 Mo
      et 250 Mo. Les lecteurs ZIP ne  doivent pas être confondus avec
      super-disquette, un lecteur de disquette de 120 Mo de capacité,
      qui accepte aussi les traditionnelles disquettes de 1.44 Mo de
      capacité.</para>

    <para>IOMEGA vends aussi un lecteur à la capacité et aux performances 
      supérieurs appelé JAZZ.  Les lecteurs JAZZ sont livrés en 1 Go et 2
      Go de capacité.</para>

    <para>Les lecteurs ZIP sont disponibles en unité interne ou externe, 
      utilisant l'une des trois interfaces suivantes :</para>
    
    <orderedlist>
      <listitem>
	<para>L'interface SCSI (Small Computer Standard Interface) est 
	  l'interface la plus rapide, la plus sophistiquée, la plus extensible, 
	  et la plus chère.  L'interface SCSI est utilisée sur tous types 
	  d'ordinateur, du PC à la station de travail RISC, jusqu'aux 
	  mini-ordinateurs, pour connecter tous types de périphériques
	  tels que lecteurs de disque, lecteurs de bande, scanners, etc.
	  Les lecteurs ZIP SCSI peuvent être internes ou externes, étant 
	  entendu que votre adaptateur SCSI possède un connecteur 
	  externe.</para>
	
	<note>
	  <para>Si vous utilisez un matériel SCSI externe, il est important 
	    de ne jamais le connecter ni le déconnecter tout pendant 
	    que l'ordinateur est en fonctionnement. Faire ceci risque de 
	    causer des dommages aux systèmes de fichiers sur les disques
	    en cours de connection.</para>
	</note>
	
	<para>Si vous souhaitez le maximum de performance et la plus grande 
	  facilité d'installation, l'interface SCSI est le meilleur choix.  Cela 
	  demandera certainement l'adjonction d'un adaptateur SCSI, puisque la 
	  majorité des PC (exception faite des serveurs hautes performances) 
	  ne comportent pas d'origine de support SCSI.  Chaque adaptateur peut 
	  prendre en charge 7 ou 15 périphériques SCSI, selon le modèle.</para>
	
	<para>Chaque périphérique SCSI a son propre contrôleur, et ces 
	  contrôleurs sont assez intelligents et bien standardisés (le 
	  second `S' de SCSI est l'abréviation de Standard), ce qui signifie 
	  , du point de vue du système d'exploitation, que tous les lecteurs de 
	  disques SCSI sont quasiment identiques, ceci vaut aussi pour les 
	  lecteurs de bandes, etc.  Pour prendre en charge du matériel SCSI, le 
	  système d'exploitation n'a besoin que d'un pilote (driver) propre à 
	  l'adaptateur utilisé, et un pilote générique propre à chaque type de 
	  matériel, à savoir un pilote pour disque SCSI, un pilote pour lecteur 
	  de bande, et ainsi de suite.  Il y a certains matériels SCSI qui 
	  peuvent être mieux utilisés grâce à des pilotes spécialisés (comme par 
	  exemple les lecteurs DAT), mais, généralement, ils fonctionnent bien 
	  avec le pilote générique. Il se peut alors que le pilote générique ne prenne pas
	  en compte un certain nombre de caractèristiques spécifiques.</para>
	
	<para>Utiliser un lecteur ZIP SCSI consiste simplement à déterminer 
	  quel fichier matériel dans le répertoire <filename>/dev</filename> 
	  représente le lecteur ZIP. Pour ce faire, on peut observer les messages lors 
	  de l'amorçage de BSD (ou dans <filename>/var/log/messages</filename> après le 
	  démarrage), où vous verrez une ligne ressemblant fort à ceci:</para>
	
	<programlisting>da1: &lt;IOMEGA ZIP 100 D.13&gt; Removable Direct Access SCSI-2 Device</programlisting>

	<para>Cela signifie que le lecteur ZIP est représenté par le fichier 
	  <filename>/dev/da1</filename>.</para>
      </listitem>

      <listitem>
	 <para>L'interface IDE (Integrated Drive Electronics) est une interface 
	   de lecteur de disque bon marché utilisée pour les ordinateurs de bureau. 
	   La plus grande partie des matériels IDE est strictement interne.</para>

	<para>Les performances des lecteurs ZIP IDE sont comparables à celles des  
	  lecteurs ZIP SCSI (l'interface IDE n'est pas aussi rapide que l'interface 
	  SCSI, mais les performances des lecteurs ZIP sont limitées essentiellement 
	  par leur mécanique, non pas à cause du bus SCSI).</para>
	
	<para>L'inconvénient de l'interface IDE sont les limites qu'elle impose.
	  La plupart des adaptateurs IDE ne peuvent prendre en charge que deux 
	  périphériques, et ne sont en général pas conçues pour le long terme. Par 
	  exemple, l'interface originelle IDE ne prend pas en charge les disques durs 
	  comportant plus de 1024 cylindres, ce qui oblige de nombreuses personnes à 
	  mettre à jour prématurément leurs équipements.  Si vous prévoyez d'étendre 
	  votre PC par l'adjonction d'un nouveau disque dur, d'un lecteur de bande, 
	  ou d'un scanner, vous pouvez investir dans un adaptateur SCSI et ZIP SCSI 
	  afin d'éviter des problèmes dans le futur.</para>

	<para>Les périphériques IDE sous FreeBSD sont préfixés par un <literal>w</literal>.
	  Par exemple, un disque dur IDE peut être <filename>/dev/wd0</filename>, 
	  un lecteur de cdrom IDE (ATAPI) peut être <filename>/dev/wcd1</filename>, 
	  et ainsi de suite.</para>
      </listitem>

      <listitem>
	<para>L'interface port parallèle est populaire grâce aux périphériques externes 
	  portables tels que lecteurs ZIP externes, scanners, parce que potentiellement 
	  chaque ordinateur possède un port parallèle standard (habituellement utilisé 
	  pour les imprimantes).  Ceci rend aisé pour tout un chacun le transfert de données 
	  entre ordinateurs par simple le transport de ces lecteurs ZIP.</para>

	<para>Les performances seront en général moindre qu'avec un lecteur ZIP ou IDE, 
	  du fait de la vitesse limitée du port parallèle. Cette vitesse varie 
	  considérablement d'un ordinateur à l'autre, et peut souvent être configurée
	  à partir du système BIOS. Certaines machines demanderont une configuration du 
	  BIOS pour pouvoir faire fonctionner le port parallèle en mode bidirectionnel 
	  (Les ports parallèles ont seulement été conçus à l'origine pour fournir des 
	  données sortantes vers les imprimantes)</para>
      </listitem>
    </orderedlist>
  </sect1>

  <sect1>
    <title>ZIP parallèle : Le pilote <devicename>vpo</devicename></title>

    <para>Pour utiliser un lecteur ZIP port parallèle sous FreeBSD, le pilote 
      <devicename>vpo</devicename> doit être configuré dans le noyau. Les lecteurs 
      ZIP port parallèle ont aussi un contrôleur SCSI intégré. Le pilote vpo authorise 
      le noyau FreeBSD à communiquer avec le contrôleur SCSI du lecteur ZIP au travers 
      du port parallèle.</para>
    
    <para>Depuis que le pilote vpo ne fait plus parti du noyau en standard (au 
      moins pour FreeBSD 3.2), vous avez à reconstruire le noyau afin de rendre 
      accessible ce périphérique.  La démarche de reconstruction d'un noyau est indiquée 
      en détails dans une autre section.  Les étapes suivantes indiquent brièvement 
      la démarche à suivre afin de mettre en état de marche le pilote vpo:</para>
    
    <orderedlist>
      <listitem>
	<para>Lancer <command>/stand/sysinstall</command>, et installer les sources 
	  du noyau sur votre système.</para>

	<screen>&prompt.root; <userinput>cd /sys/i386/conf</userinput>
&prompt.root; <userinput>cp GENERIC MYKERNEL</userinput></screen>

	<para>Editer <filename>MYKERNEL</filename>, changer la ligne 
	  <literal>ident</literal> en <literal>MYKERNEL</literal>, et décommenter 
	  la ligne décrivant le pilote vpo.</para>
	
	<para>Si vous possédez un second port parallèle, vous pourriez avoir besoin 
	  de copier la section dédiée à <literal>ppc0</literal> pour créer le 
	  périphérique <literal>ppc1</literal>.  Le second port parallèle utilise 
	  généralement l'IRQ 5 et l'adresse 378.  Seul l'IRQ est requise pour le 
	  fichier de configuration.</para>

	<para>Si votre disque dur est un SCSI, vous courez au devant d'un problème 
	  dans l'ordre de la détection des périphériques, qui entrainera le système 
	  à tenter d'utiliser le lecteur ZIP en tant que périphérique racine. Le démarrage 
	  échouera alors, à moins que vous ayez installé un système de fichiers racine 
	  sur le disque ZIP! Dans ce cas, vous aurez besoin de forcer le noyau à lier
	  le disque SCSI racine à <filename>/dev/da0</filename>, à savoir le disque SCSI
	  racine. Cela assignera alors le disque ZIP au prochain disque SCSI disponible,
	  à savoir <literal>/dev/da1</literal>. Pour forcer votre disque dur SCSI en 
	  <literal>da0</literal>, changer la ligne

	  <programlisting>device  da0</programlisting>

	  en

	  <programlisting>disk da0 at scbus0 target 0 unit 0</programlisting></para>

	<para>Vous aurez probablement à changer la cible afin de la faire correspondre à
	  l' ID SCSI de votre disque dur. vous devrez aussi forcer l'entrée scbus0  afin
	  de l'ajuster à votre contrôleur.  Par exemple, si vous avez un contrôleur 15xx
	  de chez Adaptec, vous changerez
	  
	  <programlisting>controller scbus0</programlisting>

	  en

	  <programlisting>controller scbus0 at aha0</programlisting></para>

	<para>En dernier lieu, puisque vous étes en train d'éditer le fichier de 
	  configuration du noyau, profitez-en pour ôter tous les pilotes inutiles. 
	  Cela doit être fait avec de grandes précautions, et seulement si vous avez 
	  assez confiance en vous en ce qui concerne les modifications du noyau. Ôter 
	  les pilotes inutiles réduira la taille du noyau, laissant plus de mémoire disponible 
	  à vos applications.  Afin de déterminer les pilotes qui ne sont pas nécessaires, 
	  allez à la fin du fichier <filename>/var/log/messages</filename>, et recherchez 
	  les lignes comportant "not found" (non trouvé). Commenter alors ces périphériques 
	  dans votre fichier de configuration (par un # en tête de ligne). Vous pouvez aussi 
	  changer d'autres options afin de réduire la taille et d'accroître la rapidité de 
	  votre noyau. Lisez la section concernant la reconstruction du noyau pour de 
	  plus amples informations.</para>
      </listitem>

      <listitem>
	<para>Il est maintenant temps de compiler le noyau:</para>

	<screen>&prompt.root; <userinput>/usr/sbin/config MYKERNEL</userinput>
&prompt.root; <userinput>cd ../../compile/MYKERNEL</userinput>	  
&prompt.root; <userinput>make clean depend && make all install</userinput></screen>
      </listitem>
    </orderedlist>
    
    <para>Après le reconstruction du noyau, vous devez redémarrer.  Assurez-vous 
      que le lecteur ZIP est connecté au port parallèle avant que le démarrage ne 
      commence. Vous devriez voir apparaître le lecteur ZIP parmi les messages de 
      démarrage en tant que périphérique vp0 ou vp1, selon le port parallèle auquel 
      le lecteur est rattaché.  Vous devez pouvoir voir aussi à quel fichier 
      périphérique le lecteur ZIP a été associé. Ce sera <filename>/dev/da0</filename> 
      si vous n'avez pas d'autre disque SCSI dans le système, ou <filename>/dev/da1</filename> 
      si vous avez un disque dur SCSI à la racine de votre système.</para>
  </sect1>

  <sect1>
    <title>Monter les disques ZIP</title>

    <para>Pour accéder à un disque ZIP, vous avez simplement à le monter, comme 
      n'importe quel autre périphérique. Le système de fichiers est représenté 
      par la quatrième tranche sur le périphérique, que ce soit pour un disque ZIP 
      en SCSI ou en parallèle, vous devriez faire:</para>
    
    <screen>&prompt.root; <userinput>mount_msdos /dev/da1s4 /mnt</userinput></screen>

    <para>Pour les lecteurs ZIP IDE:</para>
    
    <screen>&prompt.root; <userinput>mount_msdos /dev/wd1s4 /mnt</userinput></screen>

    <para>Cela facilitera aussi les choses de mettre à jour <filename>/etc/fstab</filename> 
      afin de rendre le montage plus aisé. Ajoutez une ligne telle que la suivante, ajustée 
      à votre système:
    
      <programlisting>/dev/da1s4  /zip msdos rw,noauto  0 0</programlisting>
    
      et créer le répertoire <filename>/zip</filename>.</para>
    
    <para>Vous pouvez alors monter simplement en tapant 

      <screen>&prompt.root; <userinput>mount /zip</userinput></screen>

      et démonter en entrant

      <screen>&prompt.root; <userinput>umount /zip</userinput></screen></para>

    <para>Pour savoir plus sur le format de <filename>/etc/fstab</filename>, 
      voir &man.fstab.5;.</para>
    
    <para>Vous pouvez aussi créer un système de fichiers FreeBSD sur un disque 
      ZIP en utilisant &man.newfs.8;.  Cependant, le disque ne sera utilisable 
      que par un système FreeBSD, et peut-être par quelques clônes Unix 
      reconnaissant le système de fichiers FreeBSD (mais certainement pas par
      DOS ou Windows).</para>
  </sect1>
</article>






