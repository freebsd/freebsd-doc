<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE article PUBLIC "-//FreeBSD//DTD DocBook XML V5.0-Based Extension//EN"
  "http://www.FreeBSD.org/XML/share/xml/freebsd50.dtd">
<!--
	The FreeBSD Project - http://www.FreeBSD.org
	The FreeBSD French Documentation Project

	$FreeBSD$
	Original revision: 46895
-->

<article xmlns="http://docbook.org/ns/docbook"
  xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0"
  xml:id="leapseconds" xml:lang="fr">

  <info>
    <title>Support des secondes intercalaires par FreeBSD</title>

    <pubdate>$FreeBSD$</pubdate>
  </info>
    &trans.a.fonvieille;

  <sect1 xml:id="leapseconds-definition">
    <title>Introduction</title>

    <para>Une <emphasis>seconde intercalaire</emphasis> est une
      correction d'une seconde afin de synchroniser les échelles de
      temps atomique avec la rotation de la Terre.  Cet article décrit
      comme FreeBSD gère les secondes intercalaires.</para>

    <para>Au moment de l'écriture de ce document, le prochain ajout
      d'une seconde intercalaire aura lieu le 30 Juin 2015 à 23:59:60
      UTC.  Cette seconde intercalaire se produira pendant un jour de
      travail pour le nord et le sud de l'Amérique ainsi que pour la
      région Asie-Pacifique.</para>

    <para>Les secondes intercalaires sont annoncées par l'<link
      xlink:href="http://datacenter.iers.org/"><acronym>IERS</acronym></link>
      dans le <link
      xlink:href="http://datacenter.iers.org/web/guest/bulletins/-/somos/5Rgv/product/16">Bulletin
      C</link>.</para>

    <para>Le principe des secondes intercalaires est décrit dans la
      <link
      xlink:href="https://tools.ietf.org/html/rfc7164#section-3">RFC
      7164</link>. Consultez à ce sujet également
      <citerefentry><refentrytitle>time2posix</refentrytitle><manvolnum>3</manvolnum></citerefentry>.</para>
  </sect1>

  <sect1 xml:id="leapseconds-posix">
    <title>Gestion par défaut de la seconde intercalaire sous
      FreeBSD</title>

    <para>La méthode la plus simple pour gérer les secondes
      intercalaires est l'ensemble des règles <acronym>POSIX</acronym>
      de gestion du temps qu'utilise par défaut FreeBSD combiné avec
      <link
      xlink:href="@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/network-ntp.html"><acronym>NTP</acronym></link>.
      Quand
      <citerefentry><refentrytitle>ntpd</refentrytitle><manvolnum>8</manvolnum></citerefentry>
      tourne sur le système et que l'heure est synchronisée avec des
      serveurs <acronym>NTP</acronym> qui gèrent correctement les
      secondes intercalaires, la seconde intercalaire fera que le
      système répétera automatiquement la dernière seconde de la
      journée.  Aucun autre ajustement ne sera nécessaire.</para>

    <para>Si les serveurs <acronym>NTP</acronym> de référence ne
      gèrent pas correctement les secondes intercalaires,
      <citerefentry><refentrytitle>ntpd</refentrytitle><manvolnum>8</manvolnum></citerefentry>
      mettra à jour l'heure d'une seconde après que le serveur en
      amont ait constaté la modification de l'heure et qu'il se soit
      mis lui-même à l'heure.</para>

    <para>Si <acronym>NTP</acronym> n'est pas utilisé, un ajustement
      manuel de l'horloge système sera nécessaire après le passage de
      la seconde intercalaire.</para>
  </sect1>

  <sect1 xml:id="leapseconds-cautions">
    <title>Mises en garde</title>

    <para>Les secondes intermédiaires sont ajoutées au même moment
      partout dans le monde à minuit <acronym>UTC</acronym>.  Au
      Japon c'est au milieu de la manitée, à midi dans le Pacifique,
      en fin d'après-midi en Amérique, et la nuit en Europe.</para>

    <para>Nous pensons et nous nous attendons que FreeBSD, si on lui a
      fourni un service <acronym>NTP</acronym> correct et stable, se
      comporte comme attendu durant la seconde intercalaire, comme il
      le fit lors des secondes intercalaires précédentes.</para>

    <para>Cependant, nous attirons votre attention sur le fait que
      pratiquement aucune application n'a jamais rien demandé au noyau
      au sujet des secondes intercalaires.  Notre expérience est que,
      telle qu'elles ont été prévues, les secondes intercalaires sont
      essentiellement une nouvelle répétition de la seconde précédant
      la seconde intercalaire, et cela est une surprise pour la
      plupart des programmeurs d'applications.</para>

    <para>D'autres systèmes d'exploitation et d'autres ordinateurs
      peuvent ou pas gérer la seconde intercalaire de la même manière
      que FreeBSD, et les systèmes sans service <acronym>NTP</acronym>
      correct et stable n'auront aucune connaissance des secondes
      intercalaires.</para>

    <para>Il est pas rare pour des ordinateurs de planter en raison
      des secondes intercalaires, et l'expérience a montré qu'une
      grande partie des serveurs <acronym>NTP</acronym> publiques
      pourront gérer et annoncer les secondes intercalaires de manière
      incorrecte.</para>

    <para>Essayez de vous assurer que rien d'horrible ne s'est produit
      à cause de la seconde intercalaire.</para>
  </sect1>

  <sect1 xml:id="leapseconds-testing">
    <title>Test</title>

    <para>Il est possible de vérifier si une seconde intercalaire sera
      utilisée.  En raison de la nature de <acronym>NTP</acronym>, le
      test pourra ne pas fonctionner 24 heures avant la seconde
      intercalaire.  Certaines horloges de référence n'annoncent les
      secondes intercalaires qu'une heure avant leur ajout.
      Questionnons le démon <acronym>NTP</acronym>:</para>

    <screen><prompt>%</prompt> <userinput>ntpq -c 'rv 0 leap'</userinput></screen>

    <para>Un affichage comprenant le terme
      <literal>leap_add_sec</literal> indique un support des secondes
      intercalaires.  Avant les 24 heures précédant la seconde
      intercalaire, ou après que la seconde intercalaire se soit
      écoulée, le terme <literal>leap_none</literal> sera
      affiché.</para>
  </sect1>

  <sect1 xml:id="leapseconds-conclusion">
    <title>Conclusion</title>

    <para>En pratique, les secondes intercalaires ne sont pas un
      problème sous FreeBSD.  Nous espérons que cette présentation
      aide à clarifier ce à quoi il faut s'attendre et comment rendre
      l'ajout de la seconde intercalaire plus aisé.</para>
  </sect1>
</article>
