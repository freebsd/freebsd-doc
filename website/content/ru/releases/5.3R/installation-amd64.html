<?xml version="1.0" encoding="koi8-r"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>Инструкции по установке FreeBSD/amd64 5.3-RELEASE</title>
<meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.7" />
<link rel="STYLESHEET" type="text/css" href="docbook.css" />
<meta http-equiv="Content-Type" content='text/html; charset="koi8-r"' />
</head>
<body class="ARTICLE" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084"
alink="#0000FF">
<div class="ARTICLE">
<div class="TITLEPAGE">
<h1 class="TITLE"><a id="AEN2" name="AEN2">Инструкции по установке FreeBSD/amd64
5.3-RELEASE</a></h1>

<h3 class="CORPAUTHOR">Проект FreeBSD</h3>

<p class="COPYRIGHT">Copyright &copy; 2000, 2001, 2002, 2003, 2004 Проект
документирования FreeBSD</p>

<hr />
</div>

<blockquote class="ABSTRACT">
<div class="ABSTRACT"><a id="AEN12" name="AEN12"></a>
<p>Эта статья дает краткие инструкции по установке FreeBSD/amd64 5.3-RELEASE, особое
внимание уделено получению дистрибутива FreeBSD. Представлены также отдельные заметки по
решению проблем и часто задаваемые вопросы.</p>
</div>
</blockquote>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="INSTALL" name="INSTALL">1. Установка FreeBSD</a></h2>

<p>Этот раздел описывает процесс установки новой системы FreeBSD. Особое внимание уделено
получению дистрибутива FreeBSD 5.3-RELEASE и началу процедуры установки. Глава <a
href="http://www.FreeBSD.org/doc/ru_RU.KOI8-R/books/handbook/install.html"
target="_top">``Установка FreeBSD''</a> <a
href="http://www.FreeBSD.org/doc/ru_RU.KOI8-R/books/handbook/" target="_top">Руководства
FreeBSD</a> предоставляет более подробную информацию о самой программе установке, включая
пошаговую инструкцию по установке с иллюстрациями.</p>

<p>Если вы обновляете предыдущий релиз FreeBSD, ознакомьтесь с <a href="#UPGRADING">Разд.
3</a>, где находятся инструкции по обновлению.</p>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="GETTING-STARTED" name="GETTING-STARTED">1.1. Перед
установкой</a></h3>

<p>Возможно наиболее важным действием, которое должно быть выполнено перед установкой,
является чтение различных инструкций, поставляемых с FreeBSD. Обзор документов,
поставляемых с этим релизом FreeBSD, можно найти в <tt class="FILENAME">README.TXT</tt>,
который обычно находится там же, где и этот файл; большинство таких документов
(информация о релизе, список совместимого оборудования) доступны также из меню
Documentation программы установки.</p>

<p>Он-лайн версии FreeBSD <a href="http://www.FreeBSD.org/doc/ru_RU.KOI8-R/books/faq/"
target="_top">FAQ</a> и <a href="http://www.FreeBSD.org/doc/ru_RU.KOI8-R/books/handbook/"
target="_top">Handbook</a> доступны также с <a href="http://www.FreeBSD.org/ru/"
target="_top">веб сайта Проекта FreeBSD</a>, если у вас есть подключение к интернет.</p>

<p>Этот набор документов может показаться сложным, но время, потраченное на их чтение,
окупится многократно. Ознакомление с доступными ресурсами также может помочь в случае
проблем при установке.</p>

<p>Даже правильные действия иногда приводят к неудаче, так что если вы столкнулись с
проблемами, обратитесь к <a href="#TROUBLE">Разд. 4</a>, где находится информация по
решению проблем. Вам также понадобится прочесть свежую копию файла <tt
class="FILENAME">ERRATA.TXT</tt> перед установкой, он предупредит вас о проблемах,
которые были обнаружены за время существования данного релиза.</p>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Важно:</b> Хотя FreeBSD уделяет основное внимание предотвращению потери данных, все
же более чем возможна <span class="emphasis"><i class="EMPHASIS">потеря всех данных на
диске</i></span> при ошибке во время установки. Не переходите к последнему меню установки
FreeBSD до тех пор, пока не было выполнено резервное копирование важных данных.</p>
</blockquote>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN37" name="AEN37">1.2. Требования к аппаратному
обеспечению</a></h3>

<p>FreeBSD для AMD64 работает с процессорами Athlon64, Athlon64-FX, Opteron или выше.</p>

<p>Если ваш компьютер основан на nVidia nForce3 Pro-150, вам НЕОБХОДИМО использовать BIOS
setup для выключения IO APIC. Если соответствующий параметр отсутствует, вам скорее всего
потребуется выключить ACPI. В чипсете Pro-150 есть ошибки, для которых мы еще не нашли
обходного пути.</p>

<p>Если вы не знакомы с настройкой оборудования для FreeBSD, обязательно прочтите файл
<tt class="FILENAME">HARDWARE.TXT</tt>; в нем содержится важная информация по
оборудованию, поддерживаемому FreeBSD.</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="FLOPPIES" name="FLOPPIES">1.3. Инструкции по созданию
дискет</a></h3>

<p>Установка с дискеты не поддерживается в FreeBSD/amd64.</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="START-INSTALLATION" name="START-INSTALLATION">1.4. Установка
FreeBSD с CDROM или через интернет</a></h3>

<p>Проще всего выполнить установку с CDROM. Если у вас есть поддерживаемый привод CDROM и
установочный CD FreeBSD, существует два способа установки с него:</p>

<ul>
<li>
<p>Если ваша система поддерживает стандарт ``CDBOOT'' загрузочных CDROM и загрузка с CD
включена, просто поместите установочный CD FreeBSD в привод и загрузите систему для
начала установки.</p>
</li>

<li>
<p>Создайте набор загрузочных дискет FreeBSD из каталога <tt
class="FILENAME">floppies/</tt> дистрибутива FreeBSD. Прочтите <a href="#FLOPPIES">Разд.
1.3</a> с более подробной информацией по созданию загрузочных дискет под различными
операционными системами. Затем просто загрузитесь с первой дискеты, и вскоре начнется
установка FreeBSD.</p>
</li>
</ul>

<br />
<br />
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN200" name="AEN200">1.5. Детальная информация по различным
типам установки</a></h3>

<p>Как только появится первый экран программы установки, вы сможете следовать различным
меню этой программы. Если вы никогда раньше не использовали программу установки FreeBSD,
вы можете также прочесть некоторую документацию из подменю Documentation, как и общие
инструкции ``Usage'' из первого меню.</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Замечание:</b> Если вы встретились с затруднениями, нажмите клавишу <b
class="KEYCAP">F1</b> для вызова онлайн документации, относящейся к этому разделу.</p>
</blockquote>
</div>

<p>Если вы никогда раньше не устанавливали FreeBSD, или даже если устанавливали,
рекомендуемым способом установки является ``Standard'', поскольку он гарантирует
выполнение всех наиболее важных пунктов установки. Если вы хорошо знакомы с процессом
установки FreeBSD и <span class="emphasis"><i class="EMPHASIS">точно</i></span> знаете,
что нужно делать, используйте установку ``Express'' или ``Custom''. Если вы обновляете
существующую систему, используйте параметр ``Upgrade''.</p>

<p>Программа установки FreeBSD поддерживает непосредственное использование дискет,
разделов DOS, NFS, UFS, лент и CDROM в качестве дистрибутивных носителей; дальнейшие
инструкции по установке с каждого из этих носителей приведены ниже.</p>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN239" name="AEN239">1.5.1. Установка с CDROM по сети</a></h4>

<p>Если вы просто хотите установить систему с локального привода CDROM, прочтите <a
href="#START-INSTALLATION">Разд. 1.4</a>. Если в вашей системе нет привода CDROM и вы
хотите использовать CDROM на другой системе, к которой у вас есть подключение по сети,
существует несколько способов чтобы сделать это:</p>

<ul>
<li>
<p>Если у вас есть возможность установки FreeBSD через FTP непосредственно с CDROM на
другом компьютере FreeBSD, это очень просто: убедитесь, что FTP сервер работает и
добавьте следующую строку в файл паролей (используя <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">vipw</span>(8)</span></a>):</p>

<pre class="SCREEN">
ftp:*:99:99::0:0:FTP:/cdrom:/sbin/nologin
</pre>

<p>На компьютере, где вы производите установку, перейдите к меню Options и установите имя
релиза в <var class="LITERAL">any</var>. Затем вы можете выбрать тип носителя <var
class="LITERAL">FTP</var>, <tt class="FILENAME">ftp://<var
class="REPLACEABLE">machine</var></tt> после выбора ``URL'' в меню ftp сайтов.</p>

<div class="WARNING">
<blockquote class="WARNING">
<p><b>Внимание:</b> Это позволит любому в локальной сети (или интернет) создавать
``анонимные'' FTP соединения с этим компьютером, что может быть нежелательно.</p>
</blockquote>
</div>
</li>

<li>
<p>Если вместо этого вы хотите использовать NFS для непосредственного экспорта
содержимого CDROM на компьютер, с которого будет вестись установка, сначала потребуется
добавить запись в файл <tt class="FILENAME">/etc/exports</tt> (на компьютере, где
находится привод CDROM). Пример ниже позволяет компьютеру <tt
class="HOSTID">ziggy.foo.com</tt> смонтировать CDROM во время установки непосредственно
через NFS:</p>

<pre class="SCREEN">
/cdrom          -ro             ziggy.foo.com
</pre>

<p>Конечно, компьютер с CDROM должен быть также настроен в качестве NFS сервера, и если
вы не уверены как сделать это, NFS вероятно не лучший выбор для вас, пока вы не прочтете
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&sektion=5&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rc.conf</span>(5)</span></a> и не
настроите все правильно. Предполагая, что эта часть прошла нормально, вы должны ввести:
<tt class="FILENAME"><var class="REPLACEABLE">cdrom-host</var>:/cdrom</tt> в качестве
пути к NFS компьютеру, где находится дистрибутив, например <tt
class="FILENAME">wiggy:/cdrom</tt>.</p>
</li>
</ul>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN271" name="AEN271">1.5.2. Установка с дискет</a></h4>

<p>Если вам необходимо выполнять установку с дискет, или из-за неподдерживаемого
оборудования, или потому, что вам нравится делать все сложным способом, необходимо
сначала подготовить дискеты.</p>

<p>Сначала подготовьте дискеты, как описано в <a href="#FLOPPIES">Разд. 1.3</a>.</p>

<p>Затем, внимательно прочтите <a href="#LAYOUT">Разд. 2</a> и обратите особое внимание
на раздел ``Distribution Format'', поскольку он описывает файлы, которые необходимо
поместить на дискеты и те, которые вы можете пропустить.</p>

<p>Затем вам потребуется, как минимум, столько 1.44MB дискет, сколько необходимо для
вмещения всех файлов из каталога <tt class="FILENAME">bin</tt> (binary distribution).
Если вы подготавливаете эти дискеты под DOS, они <span class="emphasis"><i
class="EMPHASIS">должны</i></span> быть отформатированы с использованием команды MS-DOS
<tt class="FILENAME">FORMAT</tt>. Если вы используете Windows, воспользуйтесь командой
format из Windows File Manager.</p>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Важно:</b> Зачастую диски поставляются уже отформатированными. Хотя это удобно,
многие проблемы, о которых сообщали пользователи, стали причиной использования
неправильно отформатированных носителей. Переформатируйте их самостоятельно, просто для
уверенности.</p>
</blockquote>
</div>

<p>Если вы создаете дискеты на другом компьютере с FreeBSD, форматирование все еще может
потребоваться, хотя нет необходимости создавать файловую систему DOS на каждой дискете.
Вы можете использовать команды <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">disklabel</span>(8)</span></a> и
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">newfs</span>(8)</span></a> для
создания на дискетах файловой системы UFS, что проиллюстрировано в следующей
последовательности команд:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">fdformat -f 1440 fd0</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">disklabel -w fd0 floppy3</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">newfs -i 65536 /dev/fd0</kbd>
</pre>

<p>После форматирования дискет для DOS или UFS, вам потребуется скопировать на них файлы.
Файлы дистрибутива разделены на части такого размера, чтобы на каждую дискету помещался
один файл. Каждый дистрибутивный набор должен располагаться на дискете в своем
собственном каталоге, т.е.: <tt class="FILENAME">a:\bin\bin.inf</tt>, <tt
class="FILENAME">a:\bin\bin.aa</tt>, <tt class="FILENAME">a:\bin\bin.ab</tt>, ...</p>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Важно:</b> Файл <tt class="FILENAME">bin.inf</tt> также необходимо поместить на
первую дискету набора <tt class="FILENAME">bin</tt>, поскольку он читается программой
установки для определения количества дополнительных частей, которые необходимо объединить
в дистрибутивный набор. При помещении дистрибутивных наборов на дискеты, файл <tt
class="FILENAME">distname.inf</tt> <span class="emphasis"><i
class="EMPHASIS">должен</i></span> помещаться на первую дискету каждого дистрибутивного
набора.</p>
</blockquote>
</div>

<p>Как только в программе установки появится экран Media, выберите ``Floppy'' и
продолжайте установку.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN311" name="AEN311">1.5.3. Установка с раздела DOS</a></h4>

<p>Для подготовке к установке с раздела MS-DOS вы должны просто скопировать файлы из
дистрибутива в каталог <tt class="FILENAME">FREEBSD</tt> на основном разделе DOS (<tt
class="DEVICENAME">C:</tt>). Например, для выполнения минимальной установки FreeBSD с
раздела DOS, используя файлы, скопированные с CDROM, вы можете сделать примерно
следующее:</p>

<pre class="SCREEN">
<samp class="PROMPT">C:\&#62;</samp> <kbd class="USERINPUT">MD C:\FREEBSD</kbd>
<samp class="PROMPT">C:\&#62;</samp> <kbd
class="USERINPUT">XCOPY /S E:\BASE C:\FREEBSD\BASE</kbd>
</pre>

<p>Предполагается, что на <tt class="DEVICENAME">E:</tt> смонтирован CD.</p>

<p>Для всех дистрибутивных наборов, которые вы хотите установить с раздела DOS (и для
которых у вас есть свободное место), выполните копирование в каталог <tt
class="FILENAME">C:\FREEBSD</tt> -- минимально необходимый набор это <tt
class="FILENAME">BIN</tt>.</p>

<p>Как только вы скопировали каталоги, просто запустите установку с дискет как обычно и
выберите ``DOS'' в качестве носителя когда придет время.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN336" name="AEN336">1.5.4. Установка с QIC/SCSI ленты</a></h4>

<p>При установке с ленты, программа установки предполагает, что файлы помещены на нее с
помощью <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">tar</span>(1)</span></a>, поэтому
после загрузки всех файлов дистрибутивных наборов, которые вам нужны, используйте <tt
class="COMMAND">tar</tt> для помещения их на ленту с помощью примерно такой команды:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd <var
class="REPLACEABLE">/where/you/have/your/dists</var></kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">tar cvf /dev/sa0 <var
class="REPLACEABLE">dist1</var> .. <var class="REPLACEABLE">dist2</var></kbd>
</pre>

<p>При установке вы также должны убедиться, что оставлено достаточно места во временном
каталоге (который вам будет предложено выбрать) для помещения <span class="emphasis"><i
class="EMPHASIS">полного</i></span> содержимого созданной ленты. В связи с невозможностью
произвольного доступа к содержимого ленты, этот метод установки требует места во
временном хранилище. Отведите столько места, сколько потребуется для распаковки
дистрибутивных наборов, помещенных на ленту.</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Замечание:</b> Для установки лента должна быть помещена в привод <span
class="emphasis"><i class="EMPHASIS">до</i></span> загрузки с дискет. Иначе программа
установки может не найти ее во время тестирования устройств.</p>
</blockquote>
</div>

<p>Теперь создайте загрузочные дискеты, как описано в <a href="#FLOPPIES">Разд. 1.3</a> и
приступайте к установке.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="FTPNFS" name="FTPNFS">1.5.5. Установка по сети через FTP или
NFS</a></h4>

<p>После создания загрузочных дискет, как описано в первом разделе, вы можете загрузить
остальные файлы по сети, используя 3 типа соединения: последовательный порт, параллельный
порт или Ethernet.</p>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="AEN361" name="AEN361">1.5.5.1. Последовательный порт</a></h5>

<p>Поддержка SLIP довольно примитивна, и ограничена в основном постоянными соединениями,
такими как последовательный кабель между двумя компьютерами. Соединение должно быть
постоянным, поскольку программа SLIP на данный момент не предоставляет возможности
дозвона. Если вам требуется дозвон по модему или иной способ подготовки соединения перед
его установкой, используйте PPP.</p>

<p>При использовании PPP, убедитесь, что у вас есть IP адрес провайдера и сведения о DNS,
так как они понадобятся на ранней стадии процесса установки. Вам также может
потребоваться знать собственный IP адрес, поскольку PPP поддерживает динамическое
согласование адресов и может получить эту информацию непосредственно от провайдера, если
он предоставляет такую возможность.</p>

<p>Вам также могут понадобиться сведения об использовании различных ``AT команд'' вашей
модели модема, поскольку программа дозвона PPP предоставляет только очень простой
эмулятор терминала.</p>
</div>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="AEN367" name="AEN367">1.5.5.2. Параллельный порт</a></h5>

<p>Если доступно аппаратное подключение к другому компьютеру FreeBSD или Linux, вы можете
также провести установку через параллельный ``laplink'' кабель. Скорость передачи данных
через параллельный порт гораздо выше, чем это обычно возможно через последовательную
линию (до 50к/сек), в результате установка проходит быстрее. Обычно не требуется
использовать ``настоящий'' IP адрес при PPP соединении таким способом и вы можете
использовать адреса RFC 1918 для концов соединения (например <tt
class="HOSTID">10.0.0.1</tt>, <tt class="HOSTID">10.0.0.2</tt>, и т.д.).</p>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Важно:</b> Если вы используете компьютер с Linux, а не с FreeBSD в качестве
удаленной стороны PLIP, потребуется также указать <var class="OPTION">link0</var> в окне
настройки TCP/IP, поле ``extra options for ifconfig'', для обеспечения совместимости с
несколько иначе реализованным PLIP протоколом Linux.</p>
</blockquote>
</div>
</div>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="AEN378" name="AEN378">1.5.5.3. Ethernet</a></h5>

<p>FreeBSD поддерживает большинство широко распространенных карт Ethernet; таблица
совместимых карт является частью информации об оборудовании (<tt
class="FILENAME">HARDWARE.TXT</tt> в меню Documentation на загрузочной дискете или в
корневом каталоге CDROM). Если вы используете одну из поддерживаемых PCMCIA Ethernet
карт, убедитесь также, что она подключена <span class="emphasis"><i
class="EMPHASIS">до</i></span> включения лэптопа. К сожалению, FreeBSD не поддерживает
определение PCMCIA карт ``на ходу'' во время установки.</p>

<p>Вам также потребуется узнать ваш IP адрес в сети, сетевую маску для вашей подсети, и
имя вашего компьютера. Ваш системный администратор может подсказать вам, какие значения
подойдут для данной настройки. Если вы будете обращаться к другим хостам по имени вместо
IP адреса, вам также потребуется сервер имен и возможно адрес шлюза (если вы используете
PPP, это IP адрес вашего провайдера). Если вы хотите выполнить установку с FTP через HTTP
прокси (см. ниже), потребуется также адрес прокси.</p>

<p>Если вы не знаете ответа на эти вопросы, вам возможно лучше поговорить с системным
администратором <span class="emphasis"><i class="EMPHASIS">перед</i></span> началом этого
типа установки. Использование произвольно выбираемых IP адресов или сетевых маск в
действующей сети почти наверняка не будет работать и возможно вам придется выслушать
лекцию от рассерженного системного администратора.</p>

<p>Как только вы настроили какой-либо тип сетевого подключения, установка может быть
продолжена через NFS или FTP.</p>
</div>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="AEN388" name="AEN388">1.5.5.4. Советы по установке через
NFS</a></h5>

<p>Установка через NFS довольно проста: скопируйте необходимые файлы дистрибутива FreeBSD
куда-либо на сервер и укажите на них при выборе NFS типа носителя.</p>

<p>Если этот сервер поддерживает доступ только через ``привилегированные порты'' (обычно
это режим по умолчанию для рабочих станций Sun и Linux), вам может потребоваться
установить соответствующий параметр в меню Options перед началом установки.</p>

<p>Если ваша Ethernet карта плохого качества и скорость передачи данных очень низка, вы
возможно также захотите установить соответствующий флаг в Options.</p>

<p>Для установки через NFS, сервер также должен поддерживать ``subdir mounts'', т.е. если
каталог вашего дистрибутива FreeBSD находится в <tt
class="FILENAME">wiggy:/usr/archive/stuff/FreeBSD</tt>, <tt class="HOSTID">wiggy</tt>
должен позволять непосредственное монтирование <tt
class="FILENAME">/usr/archive/stuff/FreeBSD</tt>, а не только <tt
class="FILENAME">/usr</tt> или <tt class="FILENAME">/usr/archive/stuff</tt>.</p>

<p>В файле FreeBSD <tt class="FILENAME">/etc/exports</tt> это поведение управляется
параметром <var class="OPTION">-alldirs</var>. Другие сервера NFS могут иметь другие
соглашения. Если вы получаете сообщения сервера <var class="LITERAL">Permission
Denied</var>, скорее всего эта возможность не включена.</p>
</div>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="AEN405" name="AEN405">1.5.5.5. Советы по установке через
FTP</a></h5>

<p>FTP установка может быть выполнена с любого зеркалирующего сервера, содержащего свежую
версию FreeBSD. Полный список, позволяющий выбрать зеркало почти для любого региона мира,
появляется во время установки через FTP.</p>

<p>Если вы выполняете установку с FTP сайта, не входящего в этот список, или существует
проблема с настройкой сервера имен, вы можете также задать собственный URL путем выбора
``URL'' в этом меню. URL может содержать имя хоста или IP адрес, так что при отсутствии
сервера имен подойдет URL вроде этого:</p>

<pre class="SCREEN">
ftp://216.66.64.162/pub/FreeBSD/releases/amd64/4.2-RELEASE
</pre>

<p>Существует три типа FTP установки, которые вы можете использовать:</p>

<ul>
<li>
<p>FTP: Этот метод использует стандартный ``активный'' режим передачи данных, в котором
сервер устанавливает соединение с клиентом. Этот метод не будет работать через
большинство брандмауэров, но зачастую лучше работает со старыми FTP серверами, которые не
поддерживают пассивный режим. Если соединение обрывается в пассивном режиме, попробуйте
этот режим.</p>
</li>

<li>
<p>FTP Passive: Устанавливает ``пассивный'' режим, который не позволяет серверу
устанавливать соединение с клиентом. Этот параметр отлично подходит пользователям,
находящимся за брандмауэрами, которые не разрешают входящих соединений по произвольным
адресам портов.</p>
</li>

<li>
<p>FTP через HTTP прокси: Этот параметр указывает FreeBSD использовать HTTP для
выполнения через прокси всех FTP операций. Прокси будет транслировать запросы и
отправлять их серверу FTP. Это позволяет пользователю проходить через брандмауэры,
которые вообще не разрешают использование FTP, но предоставляют HTTP прокси. Вы должны
указать имя хоста прокси в дополнение к FTP серверу.</p>

<p>В редких случаях, когда FTP прокси не работает через HTTP, вы можете указать URL
примерно так:</p>

<pre class="SCREEN">
<kbd class="USERINPUT">ftp://foo.bar.com:<var
class="REPLACEABLE">port</var>/pub/FreeBSD</kbd>
</pre>

<p>В URL выше, <var class="REPLACEABLE">port</var> это номер порта FTP прокси
сервера.</p>
</li>
</ul>

<br />
<br />
</div>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN427" name="AEN427">1.5.6. Советы для последовательной
консоли</a></h4>

<p>Если вы предпочитаете устанавливать FreeBSD на компьютер, использующий только
последовательный порт (т.е. не имеющий VGA карты), следуйте данной инструкции:</p>

<div class="PROCEDURE">
<ol type="1">
<li>
<p>Подключите любой ANSI (vt100) совместимый терминал или программу эмуляции терминала к
<tt class="DEVICENAME">COM1</tt> порту PC, на который вы устанавливаете FreeBSD.</p>
</li>

<li>
<p>Отключите клавиатуру (да, это правильно!) и попробуйте загрузиться с дискеты или
дистрибутивного CDROM, в зависимости от типа имеющегося дистрибутивного носителя, с
отключенной клавиатурой.</p>
</li>

<li>
<p>Если вы не видите ничего на последовательной консоли, подключите клавиатуру опять.
Если вы загружаетесь с CDROM, выполните <a href="#HITSPACE">шаг 5</a> после получения
сигналов.</p>
</li>

<li>
<p>При загрузке с дискет, после остановки чтения с диска вставьте первый диск <tt
class="FILENAME">kernX.flp</tt> и нажмите <b class="KEYCAP">Enter</b>. После остановки
чтения с диска вставьте следующий диск <tt class="FILENAME">kernX.flp</tt> и нажмите <b
class="KEYCAP">Enter</b>, и так далее для всех дисков <tt
class="FILENAME">kernX.flp</tt>. Когда загрузка завершится, вставьте опять <tt
class="FILENAME">boot.flp</tt> и нажмите <b class="KEYCAP">Enter</b>.</p>
</li>

<li><a id="HITSPACE" name="HITSPACE"></a>
<p>После звукового сигнала нажмите цифру <b class="KEYCAP">6</b>, затем введите</p>

<pre class="SCREEN">
<kbd class="USERINPUT">boot -h</kbd>
</pre>

<p>и теперь информация должна выводиться в последовательный порт. Если это все еще не
работает, проверьте последовательный кабель и настройки программы эмуляции терминала или
терминального устройства. Они должны быть включены на 9600 кбит, 8 бит, без проверки
четности.</p>
</li>
</ol>
</div>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN454" name="AEN454">1.6. Вопросы и ответы для пользователей
AMD64</a></h3>

<div class="QANDASET">
<dl>
<dt>1.6.1. <a href="#Q1.6.1.">Помогите! У меня нет места! Нужно ли сначала все
удалить?</a></dt>

<dt>1.6.2. <a href="#Q1.6.2.">Могу я использовать сжатые файловые системы DOS из
FreeBSD?</a></dt>

<dt>1.6.3. <a href="#Q1.6.3.">Могу ли я смонтировать расширенные разделы DOS?</a></dt>

<dt>1.6.4. <a href="#Q1.6.4.">Могу ли я запускать исполняемые файлы DOS в
FreeBSD?</a></dt>

<dt>1.6.5. <a href="#Q1.6.5.">Могу ли я запускать в FreeBSD приложения <span
class="TRADEMARK">Microsoft</span>(R) <span
class="TRADEMARK">Windows</span>(R)?</a></dt>

<dt>1.6.6. <a href="#Q1.6.6.">Могу ли я запускать в FreeBSD другие операционные
системы?</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q1.6.1." name="Q1.6.1."></a><b>1.6.1.</b> Помогите! У меня нет места! Нужно ли
сначала все удалить?</p>
</div>

<div class="ANSWER">
<p><b></b>Если на вашем компьютере уже установлена DOS и для установки FreeBSD нет или
недостаточно места, еще не все потеряно! Вам может помочь утилита <b
class="APPLICATION">FIPS</b>, находящаяся в каталоге <tt class="FILENAME">tools/</tt>
FreeBSD CDROM или на различных ftp сайтах FreeBSD.</p>

<p><b class="APPLICATION">FIPS</b> позволяет вам разделить существующее пространство DOS
на две части, сохраняя имеющиеся данные и делая возможной установку на вторую свободную
часть. Сначала необходимо выполнить дефрагментацию раздела DOS, используя утилиту <tt
class="FILENAME">DEFRAG</tt> из DOS 6.xx или <b class="APPLICATION">Norton Disk
Tools</b>, затем запустите FIPS. Он запросит всю необходимую информацию. Затем вы можете
перегрузиться и установить FreeBSD в новый раздел. Учтите также, что FIPS создаст второй
раздел как ``клон'' первого, получатся два основных раздела DOS. Не волнуйтесь! Вы можете
просто удалить второй первичный раздел DOS (убедившись, что это именно тот раздел,
проверив его размер).</p>

<p><b class="APPLICATION">FIPS</b> в настоящее время НЕ работает с разделами NTFS. Для
работы с такими разделами вам потребуется коммерческий продукт, такой как <b
class="APPLICATION">Partition Magic</b>. Это становится проблемой только в том случае,
если раздел Windows занимает весь диск и вы не хотите выполнять установку с нуля.</p>

<p><b class="APPLICATION">FIPS</b> не работает с расширенными разделами DOS.
Поддерживаются основные разделы Windows 95/98/ME FAT32.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q1.6.2." name="Q1.6.2."></a><b>1.6.2.</b> Могу я использовать сжатые файловые
системы DOS из FreeBSD?</p>
</div>

<div class="ANSWER">
<p><b></b>Нет. Если вы используете такую утилиту как <b
class="APPLICATION">Stacker</b>(tm) или <b class="APPLICATION">DoubleSpace</b>(tm),
FreeBSD сможет использовать только ту часть файловой системы, которую вы оставили
несжатой. Остальная часть файловой системы будет показана в виде одного большого файла
(файл stacked/dblspaced!). <span class="emphasis"><i class="EMPHASIS">Не удаляйте этот
файл</i></span>!</p>

<p>Возможно лучше создать другой несжатый расширенный DOS раздел и использовать его для
передачи файлов между DOS и FreeBSD, если это требуется.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q1.6.3." name="Q1.6.3."></a><b>1.6.3.</b> Могу ли я смонтировать расширенные
разделы DOS?</p>
</div>

<div class="ANSWER">
<p><b></b>Да. Расширенные разделы DOS именуются после других ``слайсов'' FreeBSD, т.е.
<tt class="DEVICENAME">D:</tt> может стать <tt class="FILENAME">/dev/da0s5</tt>, <tt
class="DEVICENAME">E:</tt> -- <tt class="FILENAME">/dev/da0s6</tt> и т.д. В этом примере
предполагается, что расширенный раздел находится на диске SCSI 0. Для дисков IDE замените
<var class="LITERAL">da</var> на <var class="LITERAL">ad</var> соответственно. Иными
словами, расширенные разделы монтируются так же, как и любые другие DOS диски, т.е.:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">mount -t msdos /dev/da0s5 /dos_d</kbd>
</pre>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q1.6.4." name="Q1.6.4."></a><b>1.6.4.</b> Могу ли я запускать исполняемые файлы
DOS в FreeBSD?</p>
</div>

<div class="ANSWER">
<p><b></b>Хотя еще имеются некоторые острые углы, во многих случаях может подойти утилита
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=doscmd&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">doscmd</span>(1)</span></a>,
работа над которой продолжается. Порт/пакет <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/emulators/doscmd/pkg-descr"><tt
class="FILENAME">emulators/doscmd</tt></a> можно найти в коллекции портов FreeBSD. Если
вы заинтересованы в работе над этой утилитой, отправьте письмо в <a
href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-emulation" target="_top">Список
рассылки, посвящённый эмуляции во FreeBSD</a> и укажите, что вы заинтересованы в этой
продолжающейся работе!</p>

<p>Порт/пакет <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/emulators/pcemu/pkg-descr"><tt
class="FILENAME">emulators/pcemu</tt></a> в коллекции портов FreeBSD эмулирует 8088 и
BIOS сервисы для запуска текстовых приложений DOS. Для работы ему требуется X Window
System (XFree86).</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q1.6.5." name="Q1.6.5."></a><b>1.6.5.</b> Могу ли я запускать в FreeBSD
приложения <span class="TRADEMARK">Microsoft</span>(R) <span
class="TRADEMARK">Windows</span>(R)?</p>
</div>

<div class="ANSWER">
<p><b></b>Существуют несколько портов/пакетов в коллекции портов FreeBSD, которые могут
сделать возможным использование многих приложений <span class="TRADEMARK">Windows</span>.
Порт/пакет <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/emulators/wine/pkg-descr"><tt
class="FILENAME">emulators/wine</tt></a> предоставляет уровень совместимости над FreeBSD,
который позволяет многим <span class="TRADEMARK">Windows</span> приложениям работать в X
Windows (XFree86).</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q1.6.6." name="Q1.6.6."></a><b>1.6.6.</b> Могу ли я запускать в FreeBSD другие
операционные системы?</p>
</div>

<div class="ANSWER">
<p><b></b>В коллекции портов находятся несколько портов/пакетов, которые имитируют
``виртуальные машины'' и позволяют другим операционным системам работать поверх FreeBSD.
Порт/пакет <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/emulators/bochs/pkg-descr"><tt
class="FILENAME">emulators/bochs</tt></a> позволяет <span
class="TRADEMARK">Microsoft</span> <span class="TRADEMARK">Windows</span>, Linux и
даже другим копиям FreeBSD работать внутри окна рабочего стола FreeBSD. Порты/пакеты <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/emulators/vmware2/pkg-descr"><tt
class="FILENAME">emulators/vmware2</tt></a> и <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/emulators/vmware3/pkg-descr"><tt
class="FILENAME">emulators/vmware3</tt></a> позволяют запускать в FreeBSD коммерческие
виртуальные машины VMware.</p>
</div>
</div>
</div>
</div>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="LAYOUT" name="LAYOUT">2. Содержимое дистрибутива</a></h2>

<p>Типичный каталог дистрибутива FreeBSD выглядит примерно так (детали могут отличаться в
зависимости от версии, архитектуры, и других факторов):</p>

<pre class="SCREEN">
ERRATA.HTM      README.TXT      compat1x        dict            kernel
ERRATA.TXT      RELNOTES.HTM    compat20        doc             manpages
HARDWARE.HTM    RELNOTES.TXT    compat21        docbook.css     packages
HARDWARE.TXT    base            compat22        filename.txt    ports
INSTALL.HTM     boot            compat3x        floppies        proflibs
INSTALL.TXT     catpages        compat4x        games           src
README.HTM      cdrom.inf       crypto          info            tools
</pre>

<p>Если вы хотите выполнить CDROM, FTP или NFS установку из этого каталога, все, что
потребуется, это сделать 1.44MB загрузочные дискеты (см. <a href="#FLOPPIES">Разд.
1.3</a>), загрузиться с них и следовать инструкциям. Остальные файлы, необходимые для
установки, будут получены автоматически на основе вашего выбора. Если вы никогда раньше
не устанавливали FreeBSD, потребуется также полностью прочитать этот документ (файл
инструкций по установке).</p>

<p>Если вы хотите выполнить установку другого типа, или хотите узнать больше об
организации дистрибутива, вам поможет нижеследующая более детальная информация:</p>

<ol type="1">
<li>
<p>Файлы <tt class="FILENAME">*.TXT</tt> и <tt class="FILENAME">*.HTM</tt> содержат
документацию (например, этот документ находится в <tt class="FILENAME">INSTALL.TXT</tt> и
<tt class="FILENAME">INSTALL.HTM</tt>), их необходимо прочесть перед началом установки.
Файлы <tt class="FILENAME">*.TXT</tt> это простой текст, а файлы <tt
class="FILENAME">*.HTM</tt> это HTML файлы, которые могут быть просмотрены практически
любым веб браузером. Некоторые дистрибутивы могут также содержать документацию в других
форматах, таких как PDF или PostScript.</p>
</li>

<li>
<p><tt class="FILENAME">docbook.css</tt> это файл Cascading Style Sheet (CSS),
используемый некоторыми веб браузерами для форматирования HTML документации.</p>
</li>

<li>
<p>Каталоги <tt class="FILENAME">base</tt>, <tt class="FILENAME">catpages</tt>, <tt
class="FILENAME">crypto</tt>, <tt class="FILENAME">dict</tt>, <tt
class="FILENAME">doc</tt>, <tt class="FILENAME">games</tt>, <tt
class="FILENAME">info</tt>, <tt class="FILENAME">manpages</tt>, <tt
class="FILENAME">proflibs</tt>, и <tt class="FILENAME">src</tt> содержат основные
компоненты дистрибутива FreeBSD и разделены на небольшие файлы, которые могут поместиться
на дискеты (если это потребуется).</p>
</li>

<li>
<p>Каталоги <tt class="FILENAME">compat1x</tt>, <tt class="FILENAME">compat20</tt>, <tt
class="FILENAME">compat21</tt>, <tt class="FILENAME">compat22</tt>, <tt
class="FILENAME">compat3x</tt>, и <tt class="FILENAME">compat4x</tt> содержат
дистрибутивные наборы совместимости со старыми релизами и находятся в одиночных
упакованных gzip tar файлах -- они могут быть установлены во время установки релиза или
позже путем запуска соответствующих скриптов <tt class="FILENAME">install.sh</tt>.</p>
</li>

<li>
<p>В каталоге <tt class="FILENAME">floppies/</tt> находятся образы загрузочных дискет;
дальнейшая информация по их использованию дана в <a href="#FLOPPIES">Разд. 1.3</a>.</p>
</li>

<li>
<p>Каталоги <tt class="FILENAME">packages</tt> и <tt class="FILENAME">ports</tt> содержат
коллекцию пакетов и портов FreeBSD. Пакеты могут быть установлены из каталога <tt
class="FILENAME">packages</tt> следующей командой:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp><kbd
class="USERINPUT">/stand/sysinstall configPackages</kbd>
</pre>

<p>Пакеты также могут быть установлены путем задания отдельных имен пакетов в каталоге
<tt class="FILENAME">packages</tt>/ команде <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pkg_add</span>(1)</span></a>.</p>

<p>Коллекция портов может быть установлена как любой другой дистрибутивный набор и
требует около 190MB места. Дальнейшая информация по коллекции портов может быть получена
с <a href="http://www.FreeBSD.org/ru/ports/"
target="_top">http://www.FreeBSD.org/ru/ports/</a> или локально из <tt
class="FILENAME">/usr/share/doc/handbook</tt> если вы установили дистрибутивный набор <tt
class="FILENAME">doc</tt>.</p>
</li>

<li>
<p>Наконец, каталог <tt class="FILENAME">tools</tt> содержит различные утилиты DOS для
определения геометрии диска, установки загрузочных менеджеров и т.п. Эти утилиты
опциональны и предоставляются только для удобства пользователей.</p>
</li>
</ol>

<br />
<br />
<p>Типичный дистрибутивный каталог (например, <tt class="FILENAME">info</tt>) изнутри
выглядит примерно так:</p>

<pre class="SCREEN">
CHECKSUM.MD5    info.ab         info.ad         info.inf        install.sh
info.aa         info.ac         info.ae         info.mtree
</pre>

<p>Файл <tt class="FILENAME">CHECKSUM.MD5</tt> содержит контрольные суммы MD5 для каждого
файла, которые помогают определить не поврежден ли файл. Он не используется программой
установки и его не требуется копировать вместе с остальными файлами набора. Файлы <tt
class="FILENAME">info.a*</tt> это части упакованного gzip tar файла, содержимое которого
может быть просмотрено так:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cat info.a* | tar tvzf -</kbd>
</pre>

<p>Во время установки эти части автоматически объединяются и извлекаются программой
установки.</p>

<p>Файл <tt class="FILENAME">info.inf</tt> также необходим, поскольку он читается
программой установки для определения числа частей, которые необходимо объединить в
дистрибутивный набор. При помещении дистрибутивных наборов на дискеты, файл <tt
class="FILENAME">.inf</tt> <span class="emphasis"><i class="EMPHASIS">должен</i></span>
быть помещен на первую дискету каждого дистрибутивного набора!</p>

<p>Файл <tt class="FILENAME">info.mtree</tt> это еще один не-необходимый файл,
предоставляемый для информации. Он содержит контрольные суммы MD5 для <span
class="emphasis"><i class="EMPHASIS">распакованных</i></span> дистрибутивных файлов и в
дальнейшем может использоваться программой <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mtree&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mtree</span>(8)</span></a> для
проверки возможного изменения файлов. Использование этого файла из набора <tt
class="FILENAME">base</tt> это хороший способ обнаружения троянских атак на вашу
систему.</p>

<p>Наконец, <tt class="FILENAME">install.sh</tt> предназначен для тех, кто хочет
установить дистрибутивный набор после установки системы. Например, для установки набора
info с CDROM после установки системы, вы можете выполнить:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /cdrom/info</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">sh install.sh</kbd>
</pre>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="UPGRADING" name="UPGRADING">3. Обновление FreeBSD</a></h2>

<p>Эта инструкция описывает процедуру бинарного обновления с предыдущих версий
FreeBSD.</p>

<div class="WARNING">
<blockquote class="WARNING">
<p><b>Внимание:</b> Хотя процедура обновления FreeBSD предпринимает все меры для
предотвращения потери данных, все еще более чем возможно <span class="emphasis"><i
class="EMPHASIS">потерять все содержимое жесткого диска</i></span> во время обновления!
Пожалуйста, не подтверждайте установку без наличия резервной копии всех важных
файлов.</p>
</blockquote>
</div>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Важно:</b> Здесь предполагается, что вы используете <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>,
поставляемую с той версией FreeBSD, до которой вы хотите обновиться. Использование другой
версии <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>
это почти гарантия возникновения проблем, система будет приведена в неработоспособное
состояние. Наиболее часто совершаемая в этом случае ошибка -- это использование старой
копии <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a> из
существующей системы для обновления FreeBSD до новой версии. Это <span
class="emphasis"><i class="EMPHASIS">не</i></span> рекомендуется.</p>
</blockquote>
</div>

<div class="WARNING">
<blockquote class="WARNING">
<p><b>Внимание:</b> Бинарное обновление до FreeBSD 5.3-RELEASE с FreeBSD 4-STABLE на
данный момент не поддерживается. В FreeBSD 4-STABLE есть несколько файлов, наличие
которых может быть разрушительно, но они не удаляются бинарным обновлением. Один
известный пример это старый каталог <tt class="FILENAME">/usr/include/g++</tt>, наличие
которого приводит неправильной компиляции C++ программ (или они не компилируются
вообще).</p>

<p>Эти инструкции по обновлению предоставляются для пользователей, обновляющихся с
относительно свежих FreeBSD 5-STABLE снэпшотов.</p>
</blockquote>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN678" name="AEN678">3.1. Введение</a></h3>

<p>Процедура обновления заменяет выбранные пользователем дистрибутивные наборы на наборы
из нового релиза FreeBSD. Она сохраняет файлы настройки системы, как и данные
пользователя, установленные пакеты и другое программное обеспечение.</p>

<p>Администраторам, выполняющим обновление, предлагается изучить этот раздел полностью
перед началом обновления.</p>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN682" name="AEN682">3.1.1. Обзор обновления</a></h4>

<p>Обновление дистрибутива производится путем извлечения новой версии компонентов поверх
предыдущей версии. Файлы, принадлежащие старому дистрибутиву, не удаляются.</p>

<p>Настройки системы сохраняются путем сохранения и восстановления предыдущей версии
следующих файлов:</p>

<p><tt class="FILENAME">Xaccel.ini</tt>, <tt class="FILENAME">XF86Config</tt>, <tt
class="FILENAME">adduser.conf</tt>, <tt class="FILENAME">aliases</tt>, <tt
class="FILENAME">aliases.db</tt>, <tt class="FILENAME">amd.map</tt>, <tt
class="FILENAME">crontab</tt>, <tt class="FILENAME">csh.cshrc</tt>, <tt
class="FILENAME">csh.login</tt>, <tt class="FILENAME">csh.logout</tt>, <tt
class="FILENAME">cvsupfile</tt>, <tt class="FILENAME">dhclient.conf</tt>, <tt
class="FILENAME">disktab</tt>, <tt class="FILENAME">dm.conf</tt>, <tt
class="FILENAME">dumpdates</tt>, <tt class="FILENAME">exports</tt>, <tt
class="FILENAME">fbtab</tt>, <tt class="FILENAME">fstab</tt>, <tt
class="FILENAME">ftpusers</tt>, <tt class="FILENAME">gettytab</tt>, <tt
class="FILENAME">gnats</tt>, <tt class="FILENAME">group</tt>, <tt
class="FILENAME">hosts</tt>, <tt class="FILENAME">hosts.allow</tt>, <tt
class="FILENAME">hosts.equiv</tt>, <tt class="FILENAME">hosts.lpd</tt>, <tt
class="FILENAME">inetd.conf</tt>, <tt class="FILENAME">localtime</tt>, <tt
class="FILENAME">login.access</tt>, <tt class="FILENAME">login.conf</tt>, <tt
class="FILENAME">mail</tt>, <tt class="FILENAME">mail.rc</tt>, <tt
class="FILENAME">make.conf</tt>, <tt class="FILENAME">manpath.config</tt>, <tt
class="FILENAME">master.passwd</tt>, <tt class="FILENAME">motd</tt>, <tt
class="FILENAME">namedb</tt>, <tt class="FILENAME">networks</tt>, <tt
class="FILENAME">newsyslog.conf</tt>, <tt class="FILENAME">nsmb.conf</tt>, <tt
class="FILENAME">nsswitch.conf</tt>, <tt class="FILENAME">pam.conf</tt>, <tt
class="FILENAME">passwd</tt>, <tt class="FILENAME">periodic</tt>, <tt
class="FILENAME">ppp</tt>, <tt class="FILENAME">printcap</tt>, <tt
class="FILENAME">profile</tt>, <tt class="FILENAME">pwd.db</tt>, <tt
class="FILENAME">rc.conf</tt>, <tt class="FILENAME">rc.conf.local</tt>, <tt
class="FILENAME">rc.firewall</tt>, <tt class="FILENAME">rc.local</tt>, <tt
class="FILENAME">remote</tt>, <tt class="FILENAME">resolv.conf</tt>, <tt
class="FILENAME">rmt</tt>, <tt class="FILENAME">sendmail.cf</tt>, <tt
class="FILENAME">sendmail.cw</tt>, <tt class="FILENAME">services</tt>, <tt
class="FILENAME">shells</tt>, <tt class="FILENAME">skeykeys</tt>, <tt
class="FILENAME">spwd.db</tt>, <tt class="FILENAME">ssh</tt>, <tt
class="FILENAME">syslog.conf</tt>, <tt class="FILENAME">ttys</tt>, <tt
class="FILENAME">uucp</tt></p>

<p>Версии этих файлов, соответствующие новой версии системы, перемещаются в <tt
class="FILENAME">/etc/upgrade/</tt>. Системный администратор может объединить эти версии
если требуется. Обратите внимание, что многие из этих файлов взаимно зависимы, и лучшая
процедура объединения -- это копирование специфичных данных из старых версий файлов в
новые.</p>

<p>Во время процедуры обновления у администратора запрашивается место для сохранения
файлов из <tt class="FILENAME">/etc/</tt>. Если в используемые файлы будут внесены
изменения, они могут быть последовательно восстановлены из этого каталога.</p>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN756" name="AEN756">3.2. Процедура</a></h3>

<p>Этот раздел описывает детали процедуры обновления. Особое внимание уделено моментам,
которые существенно отличаются от обычной установки.</p>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN759" name="AEN759">3.2.1. Резервное копирование</a></h4>

<p>Данные пользователей и настройки системы должны быть сохранены перед обновлением. Хотя
процедура обновления делает все для предотвращения случайных ошибок, возможно частичное
или полное уничтожение данных и настроечной информации.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN762" name="AEN762">3.2.2. Монтирование файловых
систем</a></h4>

<p>Запускается редактор дисковых разделов со списком устройств имеющихся файловых систем.
Перед началом обновления администратор должен обратить внимание имена устройств и
соответствующие точки монтирования. Эти точки монтирования должны быть введены здесь.
<span class="emphasis"><i class="EMPHASIS">Не</i></span> устанавливайте ``newfs flag''
для файловых систем, поскольку это приведет к потере данных.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN767" name="AEN767">3.2.3. Выбор дистрибутивных
наборов</a></h4>

<p>На выбор дистрибутивных наборов не накладывается ограничений. Общее правило состоит в
том, что для обновления должен быть выбран дистрибутивный набор <var
class="LITERAL">base</var>, и <var class="LITERAL">man</var> если страницы справочника
уже установлены. Другие дистрибутивные наборы могут быть позже, если администратор
захочет добавить дополнительные возможности.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="FSTAB" name="FSTAB">3.2.4. После установки</a></h4>

<p>После завершения процедуры установки администратору предлагается проверить новые файлы
настройки. В этот момент должна быть выполнена проверка правильности настроек системы. В
частности, необходимо проверить файлы <tt class="FILENAME">/etc/rc.conf</tt> и <tt
class="FILENAME">/etc/fstab</tt>.</p>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN777" name="AEN777">3.3. Обновление из исходных
текстов</a></h3>

<p>Для тех, кто интересуется более гибким и ``интеллектуальным'' методом обновления,
существует глава Руководства FreeBSD <a
href="http://www.FreeBSD.org/doc/ru_RU.KOI8-R/books/handbook/cutting-edge.html"
target="_top">На переднем крае разработок</a>. Эта процедура относится к пересборке
FreeBSD из исходных текстов. Она требует хорошего сетевого подключения, свободного места
на диске и времени, но имеет преимущества при сетевых и других более сложных установках.
Это та же процедура, что используется для отслеживания ветвей разработки -STABLE или
-CURRENT.</p>

<p><tt class="FILENAME">/usr/src/UPDATING</tt> содержит важную информацию по обновлению
системы FreeBSD из исходных текстов. В нем отражены различные вопросы, относящиеся к
изменениям в FreeBSD, которые могут повлиять на обновление.</p>
</div>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="TROUBLE" name="TROUBLE">4. Решение проблем</a></h2>

<div class="SECT2">
<h3 class="SECT2"><a id="REPAIRING" name="REPAIRING">4.1. Восстановление существующей
установки FreeBSD</a></h3>

<p>FreeBSD предоставляет опцию ``Fixit'' в верхнем меню загрузочной дискеты. Для ее
использования вам потребуется или дискета с <tt class="FILENAME">fixit.flp</tt>,
созданная тем же способом, что и загрузочная дискета, или ``live filesystem'' CDROM;
обычно это второй CDROM в многодисковом дистрибутиве FreeBSD.</p>

<p>Для запуска fixit загрузите дискету <tt class="FILENAME">kern.flp</tt>, выберите
``Fixit'' из меню и вставьте fixit дискету или CDROM после приглашения. Появится оболочка
с множеством команд (в каталогах <tt class="FILENAME">/stand</tt> и <tt
class="FILENAME">/mnt2/stand</tt>) для проверки, восстановления и просмотра файловых
систем и их содержимого. Для использования этой возможности <span class="emphasis"><i
class="EMPHASIS">требуется</i></span> некоторый опыт администрирования UNIX.</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN798" name="AEN798">4.2. Проблемы, с которыми наиболее часто
сталкиваются пользователи архитектуры AMD64</a></h3>
</div>
</div>
</div>

<hr />
<p align="center"><small>Этот файл и другие документы, относящиеся к данной версии
FreeBSD, могут быть найдены по адресу <a
href="ftp://ftp.FreeBSD.org/">ftp://ftp.FreeBSD.org/</a>.</small></p>

<p align="center"><small>Если у вас возник вопрос, касающийся FreeBSD, прочтите <a
href="http://www.FreeBSD.org/ru/docs.html">документацию,</a> прежде чем написать письмо в
&#60;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&#62;.</small></p>

<p align="center"><small>Всем пользователям FreeBSD 5-STABLE рекомендуется подписаться на
список рассылки &#60;<a
href="mailto:stable@FreeBSD.org">stable@FreeBSD.org</a>&#62;.</small></p>

<p align="center"><small>Вопросы, касающиеся этого документа, вы можете направить по
адресу &#60;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&#62;.</small></p>
</body>
</html>

