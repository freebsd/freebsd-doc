<?xml version="1.0" encoding="koi8-r"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>Инструкции по установке FreeBSD/alpha 5.4-RELEASE</title>
<meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.79" />
<link rel="STYLESHEET" type="text/css" href="docbook.css" />
<meta http-equiv="Content-Type" content="text/html; charset=koi8-r" />
</head>
<body class="ARTICLE" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084"
alink="#0000FF">
<div class="ARTICLE">
<div class="TITLEPAGE">
<h1 class="TITLE"><a id="AEN2" name="AEN2">Инструкции по установке FreeBSD/alpha
5.4-RELEASE</a></h1>

<h3 class="CORPAUTHOR">Проект FreeBSD</h3>

<p class="COPYRIGHT">Copyright &copy; 2000, 2001, 2002, 2003, 2004 Проект
документирования FreeBSD</p>

<hr />
</div>

<blockquote class="ABSTRACT">
<div class="ABSTRACT"><a id="AEN12" name="AEN12"></a>
<p>Эта статья дает краткие инструкции по установке FreeBSD/alpha 5.4-RELEASE, особое
внимание уделено получению дистрибутива FreeBSD. Представлены также отдельные заметки по
решению проблем и часто задаваемые вопросы.</p>
</div>
</blockquote>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="INSTALL" name="INSTALL">1. Установка FreeBSD</a></h2>

<p>Этот раздел описывает процесс установки новой системы FreeBSD. Особое внимание уделено
получению дистрибутива FreeBSD 5.4-RELEASE и началу процедуры установки. Глава <a
href="http://www.FreeBSD.org/doc/ru_RU.KOI8-R/books/handbook/install.html"
target="_top">``Установка FreeBSD''</a> <a
href="http://www.FreeBSD.org/doc/ru_RU.KOI8-R/books/handbook/" target="_top">Руководства
FreeBSD</a> предоставляет более подробную информацию о самой программе установке, включая
пошаговую инструкцию по установке с иллюстрациями.</p>

<p>Если вы обновляете предыдущий релиз FreeBSD, ознакомьтесь с <a href="#UPGRADING">Разд.
3</a>, где находятся инструкции по обновлению.</p>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="GETTING-STARTED" name="GETTING-STARTED">1.1. Перед
установкой</a></h3>

<p>Возможно наиболее важным действием, которое должно быть выполнено перед установкой,
является чтение различных инструкций, поставляемых с FreeBSD. Обзор документов,
поставляемых с этим релизом FreeBSD, можно найти в <tt class="FILENAME">README.TXT</tt>,
который обычно находится там же, где и этот файл; большинство таких документов
(информация о релизе, список совместимого оборудования) доступны также из меню
Documentation программы установки.</p>

<p>Он-лайн версии FreeBSD <a href="http://www.FreeBSD.org/doc/ru_RU.KOI8-R/books/faq/"
target="_top">FAQ</a> и <a href="http://www.FreeBSD.org/doc/ru_RU.KOI8-R/books/handbook/"
target="_top">Handbook</a> доступны также с <a href="http://www.FreeBSD.org/ru/"
target="_top">веб сайта Проекта FreeBSD</a>, если у вас есть подключение к интернет.</p>

<p>Этот набор документов может показаться сложным, но время, потраченное на их чтение,
окупится многократно. Ознакомление с доступными ресурсами также может помочь в случае
проблем при установке.</p>

<p>Даже правильные действия иногда приводят к неудаче, так что если вы столкнулись с
проблемами, обратитесь к <a href="#TROUBLE">Разд. 4</a>, где находится информация по
решению проблем. Вам также понадобится прочесть свежую копию файла <tt
class="FILENAME">ERRATA.TXT</tt> перед установкой, он предупредит вас о проблемах,
которые были обнаружены за время существования данного релиза.</p>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Важно:</b> Хотя FreeBSD уделяет основное внимание предотвращению потери данных, все
же более чем возможна <span class="emphasis"><i class="EMPHASIS">потеря всех данных на
диске</i></span> при ошибке во время установки. Не переходите к последнему меню установки
FreeBSD до тех пор, пока не было выполнено резервное копирование важных данных.</p>
</blockquote>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN37" name="AEN37">1.2. Требования к аппаратному
обеспечению</a></h3>

<p>FreeBSD для Alpha/AXP поддерживает платформы, описанные в <tt
class="FILENAME">HARDWARE.TXT</tt>.</p>

<p>Вам потребуется отдельный диск для FreeBSD/alpha. На данный момент совместное
использование диска с другой операционной системой невозможно. Этот диск должен быть
подключен к SCSI контроллеру, поддерживаемому SRM firmware или к IDE контроллеру, если
загрузка с IDE дисков поддерживается.</p>

<p>Корневая файловая система ОБЯЗАТЕЛЬНО должна быть первым разделом (раздел <tt
class="LITERAL">a</tt>) на диске для, чтобы стала возможной загрузка.</p>

<p>Вам потребуется firmware SRM консоли для вашей платформы. В отдельных случаях возможно
переключение между AlphaBIOS (или ARC) firmware и SRM. В других потребуется загрузка
нового firmware с веб сайта поставщика оборудования.</p>

<p>Если вы не знакомы с настройкой оборудования для FreeBSD, обязательно прочтите файл
<tt class="FILENAME">HARDWARE.TXT</tt>; в нем содержится важная информация по
оборудованию, поддерживаемому FreeBSD.</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="FLOPPIES" name="FLOPPIES">1.3. Инструкции по созданию
дискет</a></h3>

<p>В зависимости от способа установки FreeBSD, вам может потребоваться создание набора
дискет (обычно трех) для начала процесса установки. Этот раздел кратко описывает как
создать эти диски с установочного CDROM или из интернет. Обратите внимание, что в общем
случае установки FreeBSD с CDROM на компьютере, поддерживающем загрузочные CDROM, этот
шаг не требуется и может быть пропущен.</p>

<p>Для большинства установок с CDROM или по сети, вам потребуются скопировать образы
дискет <tt class="FILENAME">boot.flp</tt> и <tt class="FILENAME">kern<tt
class="REPLACEABLE"><i>X</i></tt>.flp</tt> из каталога <tt
class="FILENAME">floppies/</tt> (для 1.44MB дискет).</p>

<p>Получить эти образы по сети просто. Загрузите <tt
class="REPLACEABLE"><i>release</i></tt><tt class="FILENAME">/floppies/boot.flp</tt> и все
<tt class="REPLACEABLE"><i>release</i></tt><tt class="FILENAME">/floppies/kern<tt
class="REPLACEABLE"><i>X</i></tt>.flp</tt> с <a href="ftp://ftp.FreeBSD.org/"
target="_top">ftp://ftp.FreeBSD.org/</a> или с одного из зеркал, перечисленных в разделе
<a href="http://www.FreeBSD.org/doc/ru_RU.KOI8-R/books/handbook/mirrors-ftp.html"
target="_top">FTP зеркала</a> Руководства или, или на страницах <a
href="http://mirrorlist.FreeBSD.org/"
target="_top">http://mirrorlist.FreeBSD.org/</a>.</p>

<p>Возьмите несколько чистых, только что отформатированных дискет и поместите образ <tt
class="FILENAME">boot.flp</tt> на первую, а <tt class="FILENAME">kern<tt
class="REPLACEABLE"><i>X</i></tt>.flp</tt> на остальные. Эти образы <span
class="emphasis"><i class="EMPHASIS">не</i></span> DOS файлы. Вы не можете просто
скопировать их на DOS или UFS дискету как обычные файлы, потребуется размещение образов
на диске с помощью <tt class="FILENAME">fdimage.exe</tt> под DOS (находится в каталоге
<tt class="FILENAME">tools</tt> на CDROM или на FTP зеркалах FreeBSD) или с помощью
команды <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&sektion=1&manpath=FreeBSD+5.4-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">dd</span>(1)</span></a> в UNIX.</p>

<p>Например, для создания дискеты с образом ядра под DOS, вам потребуется выполнить
примерно такую команду:</p>

<pre class="SCREEN">
<samp class="PROMPT">C&#62;</samp> <kbd class="USERINPUT">fdimage boot.flp a:</kbd>
</pre>

<p>Предполагается, что вы скопировали <tt class="FILENAME">fdimage.exe</tt> и <tt
class="FILENAME">boot.flp</tt> в отдельный каталог. Для файлов <tt
class="FILENAME">kern<tt class="REPLACEABLE"><i>X</i></tt>.flp</tt> действия будут
аналогичны.</p>

<p>Если вы создаете загрузочную дискету на компьютере UNIX, используйте команду:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">dd if=floppies/boot.flp of=/dev/rfd0</kbd>
</pre>

<p>или</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">dd if=floppies/boot.flp of=/dev/fd0</kbd>
</pre>

<p>или</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">dd if=floppies/boot.flp of=/dev/floppy</kbd>
</pre>

<p>в зависимости от имеющегося оборудования и операционной системы (различные версии UNIX
по-разному именуют устройства гибких дисков).</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="START-INSTALLATION" name="START-INSTALLATION">1.4. Установка
FreeBSD с CDROM или через интернет</a></h3>

<p>Проще всего выполнить установку с CDROM. Если у вас есть поддерживаемый привод CDROM и
установочный CD FreeBSD, то вы можете загрузить FreeBSD непосредственно с него. Вставьте
диск в привод и наберите следующую команду для начала установки (подставив другое имя
CDROM если потребуется):</p>

<pre class="SCREEN">
&gt;&gt;&gt;<kbd class="USERINPUT">boot dka0</kbd>
</pre>

<p>В качестве альтернативы вы можете начать установку с дискеты. Для начала вам
потребуется создать набор загрузочных дискет из <tt
class="FILENAME">floppies/boot.flp</tt> и файлов <tt class="FILENAME">floppies/kern<tt
class="REPLACEABLE"><i>X</i></tt>.flp</tt>, используя инструкции из <a
href="#FLOPPIES">Разд. 1.3</a>. Вставьте <tt class="FILENAME">boot.flp</tt>, для запуска
установки из приглашения SRM консоли (<tt class="LITERAL">&gt;&gt;&gt;</tt>) наберите
следующую команду:</p>

<pre class="SCREEN">
&gt;&gt;&gt;<kbd class="USERINPUT">boot dva0</kbd>
</pre>

<p>Вставьте остальные дискеты когда появится приглашение и после загрузки появится первое
окно программы установки.</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN209" name="AEN209">1.5. Детальная информация по различным
типам установки</a></h3>

<p>Как только появится первый экран программы установки, вы сможете следовать различным
меню этой программы. Если вы никогда раньше не использовали программу установки FreeBSD,
вы можете также прочесть некоторую документацию из подменю Documentation, как и общие
инструкции ``Usage'' из первого меню.</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Замечание:</b> Если вы встретились с затруднениями, нажмите клавишу <b
class="KEYCAP">F1</b> для вызова онлайн документации, относящейся к этому разделу.</p>
</blockquote>
</div>

<p>Если вы никогда раньше не устанавливали FreeBSD, или даже если устанавливали,
рекомендуемым способом установки является ``Standard'', поскольку он гарантирует
выполнение всех наиболее важных пунктов установки. Если вы хорошо знакомы с процессом
установки FreeBSD и <span class="emphasis"><i class="EMPHASIS">точно</i></span> знаете,
что нужно делать, используйте установку ``Express'' или ``Custom''. Если вы обновляете
существующую систему, используйте параметр ``Upgrade''.</p>

<p>Программа установки FreeBSD поддерживает непосредственное использование дискет,
разделов DOS, NFS, UFS, лент и CDROM в качестве дистрибутивных носителей; дальнейшие
инструкции по установке с каждого из этих носителей приведены ниже.</p>

<p>Как только процедура установки будет завершена, вы сможете запустить FreeBSD/alpha
путем набора в приглашении SRM примерно следующей команды:</p>

<pre class="SCREEN">
&gt;&gt;&gt;<kbd class="USERINPUT">boot dkc0</kbd>
</pre>

<p>Она указывает firmware загружаться с указанного диска. Для поиска SRM имен дисков на
компьютере, используйте команду <tt class="LITERAL">show device</tt>:</p>

<pre class="SCREEN">
&gt;&gt;&gt;<kbd class="USERINPUT">show device</kbd>
dka0.0.0.4.0               DKA0           TOSHIBA CD-ROM XM-57  3476
dkc0.0.0.1009.0            DKC0                       RZ1BB-BS  0658
dkc100.1.0.1009.0          DKC100             SEAGATE ST34501W  0015
dva0.0.0.0.1               DVA0
ewa0.0.0.3.0               EWA0              00-00-F8-75-6D-01
pkc0.7.0.1009.0            PKC0                  SCSI Bus ID 7  5.27
pqa0.0.0.4.0               PQA0                       PCI EIDE
pqb0.0.1.4.0               PQB0                       PCI EIDE
</pre>

<p>Этот пример взят с Digital Personal Workstation 433au и показывает три диска,
подключенных к машине. Первый это CDROM, называющийся <tt class="DEVICENAME">dka0</tt>, а
другие два диска называются <tt class="DEVICENAME">dkc0</tt> и <tt
class="DEVICENAME">dkc100</tt> соответственно.</p>

<p>Вы можете указать какой файл ядра загружать и какие параметры загрузки использовать
параметрами <code class="OPTION">-file</code> и <code class="OPTION">-flags</code>,
например:</p>

<pre class="SCREEN">
<samp class="PROMPT">&gt;&gt;&gt;</samp> <kbd
class="USERINPUT">boot -file kernel.old -flags s</kbd>
</pre>

<p>Для автоматической загрузки FreeBSD/alpha, используйте следующие команды:</p>

<pre class="SCREEN">
<samp class="PROMPT">&gt;&gt;&gt;</samp> <kbd class="USERINPUT">set boot_osflags a</kbd>
<samp class="PROMPT">&gt;&gt;&gt;</samp> <kbd
class="USERINPUT">set bootdef_dev dkc0</kbd>
<samp class="PROMPT">&gt;&gt;&gt;</samp> <kbd
class="USERINPUT">set auto_action BOOT</kbd>
</pre>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN248" name="AEN248">1.5.1. Установка с CDROM по сети</a></h4>

<p>Если вы просто хотите установить систему с локального привода CDROM, прочтите <a
href="#START-INSTALLATION">Разд. 1.4</a>. Если в вашей системе нет привода CDROM и вы
хотите использовать CDROM на другой системе, к которой у вас есть подключение по сети,
существует несколько способов чтобы сделать это:</p>

<ul>
<li>
<p>Если у вас есть возможность установки FreeBSD через FTP непосредственно с CDROM на
другом компьютере FreeBSD, это очень просто: убедитесь, что FTP сервер работает и
добавьте следующую строку в файл паролей (используя <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&sektion=8&manpath=FreeBSD+5.4-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">vipw</span>(8)</span></a>):</p>

<pre class="SCREEN">
ftp:*:99:99::0:0:FTP:/cdrom:/sbin/nologin
</pre>

<p>На компьютере, где вы производите установку, перейдите к меню Options и установите имя
релиза в <tt class="LITERAL">any</tt>. Затем вы можете выбрать тип носителя <tt
class="LITERAL">FTP</tt>, <tt class="FILENAME">ftp://<tt
class="REPLACEABLE"><i>machine</i></tt></tt> после выбора ``URL'' в меню ftp сайтов.</p>

<div class="WARNING">
<blockquote class="WARNING">
<p><b>Внимание:</b> Это позволит любому в локальной сети (или интернет) создавать
``анонимные'' FTP соединения с этим компьютером, что может быть нежелательно.</p>
</blockquote>
</div>
</li>

<li>
<p>Если вместо этого вы хотите использовать NFS для непосредственного экспорта
содержимого CDROM на компьютер, с которого будет вестись установка, сначала потребуется
добавить запись в файл <tt class="FILENAME">/etc/exports</tt> (на компьютере, где
находится привод CDROM). Пример ниже позволяет компьютеру <tt
class="HOSTID">ziggy.foo.com</tt> смонтировать CDROM во время установки непосредственно
через NFS:</p>

<pre class="SCREEN">
/cdrom          -ro             ziggy.foo.com
</pre>

<p>Конечно, компьютер с CDROM должен быть также настроен в качестве NFS сервера, и если
вы не уверены как сделать это, NFS вероятно не лучший выбор для вас, пока вы не прочтете
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&sektion=5&manpath=FreeBSD+5.4-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rc.conf</span>(5)</span></a> и не
настроите все правильно. Предполагая, что эта часть прошла нормально, вы должны ввести:
<tt class="FILENAME"><tt class="REPLACEABLE"><i>cdrom-host</i></tt>:/cdrom</tt> в
качестве пути к NFS компьютеру, где находится дистрибутив, например <tt
class="FILENAME">wiggy:/cdrom</tt>.</p>
</li>
</ul>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN280" name="AEN280">1.5.2. Установка с дискет</a></h4>

<p>Если вам необходимо выполнять установку с дискет, или из-за неподдерживаемого
оборудования, или потому, что вам нравится делать все сложным способом, необходимо
сначала подготовить дискеты.</p>

<p>Сначала подготовьте дискеты, как описано в <a href="#FLOPPIES">Разд. 1.3</a>.</p>

<p>Затем, внимательно прочтите <a href="#LAYOUT">Разд. 2</a> и обратите особое внимание
на раздел ``Distribution Format'', поскольку он описывает файлы, которые необходимо
поместить на дискеты и те, которые вы можете пропустить.</p>

<p>Затем вам потребуется, как минимум, столько 1.44MB дискет, сколько необходимо для
вмещения всех файлов из каталога <tt class="FILENAME">bin</tt> (binary distribution).
Если вы подготавливаете эти дискеты под DOS, они <span class="emphasis"><i
class="EMPHASIS">должны</i></span> быть отформатированы с использованием команды MS-DOS
<tt class="FILENAME">FORMAT</tt>. Если вы используете Windows, воспользуйтесь командой
format из Windows File Manager.</p>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Важно:</b> Зачастую диски поставляются уже отформатированными. Хотя это удобно,
многие проблемы, о которых сообщали пользователи, стали причиной использования
неправильно отформатированных носителей. Переформатируйте их самостоятельно, просто для
уверенности.</p>
</blockquote>
</div>

<p>Если вы создаете дискеты на другом компьютере с FreeBSD, форматирование все еще может
потребоваться, хотя нет необходимости создавать файловую систему DOS на каждой дискете.
Вы можете использовать команды <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&sektion=8&manpath=FreeBSD+5.4-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">disklabel</span>(8)</span></a> и
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&sektion=8&manpath=FreeBSD+5.4-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">newfs</span>(8)</span></a> для
создания на дискетах файловой системы UFS, что проиллюстрировано в следующей
последовательности команд:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">fdformat -f 1440 fd0</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">disklabel -w fd0 floppy3</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">newfs -i 65536 /dev/fd0</kbd>
</pre>

<p>После форматирования дискет для DOS или UFS, вам потребуется скопировать на них файлы.
Файлы дистрибутива разделены на части такого размера, чтобы на каждую дискету помещался
один файл. Каждый дистрибутивный набор должен располагаться на дискете в своем
собственном каталоге, т.е.: <tt class="FILENAME">a:\bin\bin.inf</tt>, <tt
class="FILENAME">a:\bin\bin.aa</tt>, <tt class="FILENAME">a:\bin\bin.ab</tt>, ...</p>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Важно:</b> Файл <tt class="FILENAME">bin.inf</tt> также необходимо поместить на
первую дискету набора <tt class="FILENAME">bin</tt>, поскольку он читается программой
установки для определения количества дополнительных частей, которые необходимо объединить
в дистрибутивный набор. При помещении дистрибутивных наборов на дискеты, файл <tt
class="FILENAME">distname.inf</tt> <span class="emphasis"><i
class="EMPHASIS">должен</i></span> помещаться на первую дискету каждого дистрибутивного
набора.</p>
</blockquote>
</div>

<p>Как только в программе установки появится экран Media, выберите ``Floppy'' и
продолжайте установку.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN345" name="AEN345">1.5.4. Установка с QIC/SCSI ленты</a></h4>

<p>При установке с ленты, программа установки предполагает, что файлы помещены на нее с
помощью <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&sektion=1&manpath=FreeBSD+5.4-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">tar</span>(1)</span></a>, поэтому
после загрузки всех файлов дистрибутивных наборов, которые вам нужны, используйте <tt
class="COMMAND">tar</tt> для помещения их на ленту с помощью примерно такой команды:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd <tt
class="REPLACEABLE"><i>/where/you/have/your/dists</i></tt></kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">tar cvf /dev/sa0 <tt
class="REPLACEABLE"><i>dist1</i></tt> .. <tt class="REPLACEABLE"><i>dist2</i></tt></kbd>
</pre>

<p>При установке вы также должны убедиться, что оставлено достаточно места во временном
каталоге (который вам будет предложено выбрать) для помещения <span class="emphasis"><i
class="EMPHASIS">полного</i></span> содержимого созданной ленты. В связи с невозможностью
произвольного доступа к содержимого ленты, этот метод установки требует места во
временном хранилище. Отведите столько места, сколько потребуется для распаковки
дистрибутивных наборов, помещенных на ленту.</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Замечание:</b> Для установки лента должна быть помещена в привод <span
class="emphasis"><i class="EMPHASIS">до</i></span> загрузки с дискет. Иначе программа
установки может не найти ее во время тестирования устройств.</p>
</blockquote>
</div>

<p>Теперь создайте загрузочные дискеты, как описано в <a href="#FLOPPIES">Разд. 1.3</a> и
приступайте к установке.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="FTPNFS" name="FTPNFS">1.5.5. Установка по сети через FTP или
NFS</a></h4>

<p>После создания загрузочных дискет, как описано в первом разделе, вы можете загрузить
остальные файлы по сети, используя 3 типа соединения: последовательный порт, параллельный
порт или Ethernet.</p>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="AEN370" name="AEN370">1.5.5.1. Последовательный порт</a></h5>

<p>Поддержка SLIP довольно примитивна, и ограничена в основном постоянными соединениями,
такими как последовательный кабель между двумя компьютерами. Соединение должно быть
постоянным, поскольку программа SLIP на данный момент не предоставляет возможности
дозвона. Если вам требуется дозвон по модему или иной способ подготовки соединения перед
его установкой, используйте PPP.</p>

<p>При использовании PPP, убедитесь, что у вас есть IP адрес провайдера и сведения о DNS,
так как они понадобятся на ранней стадии процесса установки. Вам также может
потребоваться знать собственный IP адрес, поскольку PPP поддерживает динамическое
согласование адресов и может получить эту информацию непосредственно от провайдера, если
он предоставляет такую возможность.</p>

<p>Вам также могут понадобиться сведения об использовании различных ``AT команд'' вашей
модели модема, поскольку программа дозвона PPP предоставляет только очень простой
эмулятор терминала.</p>
</div>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="AEN376" name="AEN376">1.5.5.2. Параллельный порт</a></h5>

<p>Если доступно аппаратное подключение к другому компьютеру FreeBSD или Linux, вы можете
также провести установку через параллельный ``laplink'' кабель. Скорость передачи данных
через параллельный порт гораздо выше, чем это обычно возможно через последовательную
линию (до 50к/сек), в результате установка проходит быстрее. Обычно не требуется
использовать ``настоящий'' IP адрес при PPP соединении таким способом и вы можете
использовать адреса RFC 1918 для концов соединения (например <tt
class="HOSTID">10.0.0.1</tt>, <tt class="HOSTID">10.0.0.2</tt>, и т.д.).</p>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Важно:</b> Если вы используете компьютер с Linux, а не с FreeBSD в качестве
удаленной стороны PLIP, потребуется также указать <code class="OPTION">link0</code> в
окне настройки TCP/IP, поле ``extra options for ifconfig'', для обеспечения совместимости
с несколько иначе реализованным PLIP протоколом Linux.</p>
</blockquote>
</div>
</div>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="AEN387" name="AEN387">1.5.5.3. Ethernet</a></h5>

<p>FreeBSD поддерживает большинство широко распространенных карт Ethernet; таблица
совместимых карт является частью информации об оборудовании (<tt
class="FILENAME">HARDWARE.TXT</tt> в меню Documentation на загрузочной дискете или в
корневом каталоге CDROM). Если вы используете одну из поддерживаемых PCMCIA Ethernet
карт, убедитесь также, что она подключена <span class="emphasis"><i
class="EMPHASIS">до</i></span> включения лэптопа. К сожалению, FreeBSD не поддерживает
определение PCMCIA карт ``на ходу'' во время установки.</p>

<p>Вам также потребуется узнать ваш IP адрес в сети, сетевую маску для вашей подсети, и
имя вашего компьютера. Ваш системный администратор может подсказать вам, какие значения
подойдут для данной настройки. Если вы будете обращаться к другим хостам по имени вместо
IP адреса, вам также потребуется сервер имен и возможно адрес шлюза (если вы используете
PPP, это IP адрес вашего провайдера). Если вы хотите выполнить установку с FTP через HTTP
прокси (см. ниже), потребуется также адрес прокси.</p>

<p>Если вы не знаете ответа на эти вопросы, вам возможно лучше поговорить с системным
администратором <span class="emphasis"><i class="EMPHASIS">перед</i></span> началом этого
типа установки. Использование произвольно выбираемых IP адресов или сетевых маск в
действующей сети почти наверняка не будет работать и возможно вам придется выслушать
лекцию от рассерженного системного администратора.</p>

<p>Как только вы настроили какой-либо тип сетевого подключения, установка может быть
продолжена через NFS или FTP.</p>
</div>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="AEN397" name="AEN397">1.5.5.4. Советы по установке через
NFS</a></h5>

<p>Установка через NFS довольно проста: скопируйте необходимые файлы дистрибутива FreeBSD
куда-либо на сервер и укажите на них при выборе NFS типа носителя.</p>

<p>Если этот сервер поддерживает доступ только через ``привилегированные порты'' (обычно
это режим по умолчанию для рабочих станций Sun и Linux), вам может потребоваться
установить соответствующий параметр в меню Options перед началом установки.</p>

<p>Если ваша Ethernet карта плохого качества и скорость передачи данных очень низка, вы
возможно также захотите установить соответствующий флаг в Options.</p>

<p>Для установки через NFS, сервер также должен поддерживать ``subdir mounts'', т.е. если
каталог вашего дистрибутива FreeBSD находится в <tt
class="FILENAME">wiggy:/usr/archive/stuff/FreeBSD</tt>, <tt class="HOSTID">wiggy</tt>
должен позволять непосредственное монтирование <tt
class="FILENAME">/usr/archive/stuff/FreeBSD</tt>, а не только <tt
class="FILENAME">/usr</tt> или <tt class="FILENAME">/usr/archive/stuff</tt>.</p>

<p>В файле FreeBSD <tt class="FILENAME">/etc/exports</tt> это поведение управляется
параметром <code class="OPTION">-alldirs</code>. Другие сервера NFS могут иметь другие
соглашения. Если вы получаете сообщения сервера <tt class="LITERAL">Permission
Denied</tt>, скорее всего эта возможность не включена.</p>
</div>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="AEN414" name="AEN414">1.5.5.5. Советы по установке через
FTP</a></h5>

<p>FTP установка может быть выполнена с любого зеркалирующего сервера, содержащего свежую
версию FreeBSD. Полный список, позволяющий выбрать зеркало почти для любого региона мира,
появляется во время установки через FTP.</p>

<p>Если вы выполняете установку с FTP сайта, не входящего в этот список, или существует
проблема с настройкой сервера имен, вы можете также задать собственный URL путем выбора
``URL'' в этом меню. URL может содержать имя хоста или IP адрес, так что при отсутствии
сервера имен подойдет URL вроде этого:</p>

<pre class="SCREEN">
ftp://216.66.64.162/pub/FreeBSD/releases/alpha/4.2-RELEASE
</pre>

<p>Существует три типа FTP установки, которые вы можете использовать:</p>

<ul>
<li>
<p>FTP: Этот метод использует стандартный ``активный'' режим передачи данных, в котором
сервер устанавливает соединение с клиентом. Этот метод не будет работать через
большинство брандмауэров, но зачастую лучше работает со старыми FTP серверами, которые не
поддерживают пассивный режим. Если соединение обрывается в пассивном режиме, попробуйте
этот режим.</p>
</li>

<li>
<p>FTP Passive: Устанавливает ``пассивный'' режим, который не позволяет серверу
устанавливать соединение с клиентом. Этот параметр отлично подходит пользователям,
находящимся за брандмауэрами, которые не разрешают входящих соединений по произвольным
адресам портов.</p>
</li>

<li>
<p>FTP через HTTP прокси: Этот параметр указывает FreeBSD использовать HTTP для
выполнения через прокси всех FTP операций. Прокси будет транслировать запросы и
отправлять их серверу FTP. Это позволяет пользователю проходить через брандмауэры,
которые вообще не разрешают использование FTP, но предоставляют HTTP прокси. Вы должны
указать имя хоста прокси в дополнение к FTP серверу.</p>

<p>В редких случаях, когда FTP прокси не работает через HTTP, вы можете указать URL
примерно так:</p>

<pre class="SCREEN">
<kbd class="USERINPUT">ftp://foo.bar.com:<tt
class="REPLACEABLE"><i>port</i></tt>/pub/FreeBSD</kbd>
</pre>

<p>В URL выше, <tt class="REPLACEABLE"><i>port</i></tt> это номер порта FTP прокси
сервера.</p>
</li>
</ul>

<br />
<br />
</div>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN436" name="AEN436">1.5.6. Советы для последовательной
консоли</a></h4>

<p>Если вы предпочитаете устанавливать FreeBSD на компьютер, использующий только
последовательный порт (т.е. не имеющий VGA карты), следуйте данной инструкции:</p>

<div class="PROCEDURE">
<ol type="1">
<li class="STEP">
<p>Подключите любой ANSI (vt100) совместимый терминал или программу эмуляции терминала к
<tt class="DEVICENAME">COM1</tt> порту PC, на который вы устанавливаете FreeBSD.</p>
</li>

<li class="STEP">
<p>Отключите клавиатуру (да, это правильно!) и попробуйте загрузиться с дискеты или
дистрибутивного CDROM, в зависимости от типа имеющегося дистрибутивного носителя, с
отключенной клавиатурой.</p>
</li>

<li class="STEP">
<p>Если вы не видите ничего на последовательной консоли, подключите клавиатуру опять.
Если вы загружаетесь с CDROM, выполните <a href="#HITSPACE">шаг 5</a> после получения
сигналов.</p>
</li>

<li class="STEP">
<p>При загрузке с дискет, после остановки чтения с диска вставьте первый диск <tt
class="FILENAME">kern<tt class="REPLACEABLE"><i>X</i></tt>.flp</tt> и нажмите <b
class="KEYCAP">Enter</b>. После остановки чтения с диска вставьте следующий диск <tt
class="FILENAME">kern<tt class="REPLACEABLE"><i>X</i></tt>.flp</tt> и нажмите <b
class="KEYCAP">Enter</b>, и так далее для всех дисков <tt class="FILENAME">kern<tt
class="REPLACEABLE"><i>X</i></tt>.flp</tt>. Когда загрузка завершится, вставьте опять <tt
class="FILENAME">boot.flp</tt> и нажмите <b class="KEYCAP">Enter</b>.</p>
</li>

<li class="STEP"><a id="HITSPACE" name="HITSPACE"></a>
<p>После звукового сигнала нажмите цифру <b class="KEYCAP">6</b>, затем введите</p>

<pre class="SCREEN">
<kbd class="USERINPUT">boot -h</kbd>
</pre>

<p>и теперь информация должна выводиться в последовательный порт. Если это все еще не
работает, проверьте последовательный кабель и настройки программы эмуляции терминала или
терминального устройства. Они должны быть включены на 9600 кбит, 8 бит, без проверки
четности.</p>
</li>
</ol>
</div>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN466" name="AEN466">1.6. Вопросы и ответы для пользователей
Alpha/AXP</a></h3>

<div class="QANDASET">
<dl>
<dt>1.6.1. <a href="#Q1.6.1.">Могу ли я загрузиться с ARC или Alpha BIOS
консоли?</a></dt>

<dt>1.6.2. <a href="#Q1.6.2.">Помогите!! У меня нет места! Должен ли я сначала все
удалить??</a></dt>

<dt>1.6.3. <a href="#Q1.6.3.">Могу ли я смонтировать расширенные разделы Compaq Tru64 или
VMS?</a></dt>

<dt>1.6.4. <a href="#Q1.6.4.">Что насчет поддержки бинарных файлов Compaq Tru64
(OSF/1)?</a></dt>

<dt>1.6.5. <a href="#Q1.6.5.">Что насчет поддержки исполняемых файлов Linux?</a></dt>

<dt>1.6.6. <a href="#Q1.6.6.">Что насчет поддержки бинарных файлов NT Alpha?</a></dt>
</dl>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q1.6.1." name="Q1.6.1."></a><b>1.6.1.</b> Могу ли я загрузиться с ARC или Alpha
BIOS консоли?</p>
</div>

<div class="ANSWER">
<p><b></b>Нет. FreeBSD, так же как Compaq Tru64 и VMS, загружается только с SRM
консоли.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q1.6.2." name="Q1.6.2."></a><b>1.6.2.</b> Помогите!! У меня нет места! Должен
ли я сначала все удалить??</p>
</div>

<div class="ANSWER">
<p><b></b>К сожалению, да.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q1.6.3." name="Q1.6.3."></a><b>1.6.3.</b> Могу ли я смонтировать расширенные
разделы Compaq Tru64 или VMS?</p>
</div>

<div class="ANSWER">
<p><b></b>В данное время нет.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q1.6.4." name="Q1.6.4."></a><b>1.6.4.</b> Что насчет поддержки бинарных файлов
Compaq Tru64 (OSF/1)?</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD очень хорошо запускает приложения Tru64 с помощью пакета/порта <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/emulators/osf1_base/pkg-descr"><tt
class="FILENAME">emulators/osf1_base</tt></a>.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q1.6.5." name="Q1.6.5."></a><b>1.6.5.</b> Что насчет поддержки исполняемых
файлов Linux?</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD может выполнять бинарные файлы AlphaLinux с помощью порта/пакета <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/emulators/linux_base/pkg-descr"><tt
class="FILENAME">emulators/linux_base</tt></a>.</p>
</div>
</div>

<div class="QANDAENTRY">
<div class="QUESTION">
<p><a id="Q1.6.6." name="Q1.6.6."></a><b>1.6.6.</b> Что насчет поддержки бинарных файлов
NT Alpha?</p>
</div>

<div class="ANSWER">
<p><b></b>FreeBSD не может выполнять приложения NT, хотя и может монтировать разделы
NT.</p>
</div>
</div>
</div>
</div>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="LAYOUT" name="LAYOUT">2. Содержимое дистрибутива</a></h2>

<p>Типичный каталог дистрибутива FreeBSD выглядит примерно так (детали могут отличаться в
зависимости от версии, архитектуры, и других факторов):</p>

<pre class="SCREEN">
ERRATA.HTM      README.TXT      compat1x        dict            kernel
ERRATA.TXT      RELNOTES.HTM    compat20        doc             manpages
HARDWARE.HTM    RELNOTES.TXT    compat21        docbook.css     packages
HARDWARE.TXT    base            compat22        filename.txt    ports
INSTALL.HTM     boot            compat3x        floppies        proflibs
INSTALL.TXT     catpages        compat4x        games           src
README.HTM      cdrom.inf       crypto          info            tools
</pre>

<p>Те же файлы находятся на первом диске мультидискового набора, но расположены там
немного по-другому. Для большинства архитектур на диске с установкой находится также
``live filesystem''. Она полезна при восстановлении или решении проблем с существующей
установкой FreeBSD (обратитесь к <a href="#TROUBLE">Разд. 4</a> за инструкциями по ее
использованию).</p>

<p>Каталог <tt class="FILENAME">floppies</tt> представляет определенный интерес для
пользователей, которые не могут выполнить загрузку с компакт-диска (но могут прочитать
его содержимое. Несложно создать набор 1.44Мб загрузочных дискет, воспользовавшись
каталогом <tt class="FILENAME">floppies</tt> (см. <a href="#FLOPPIES">Разд. 1.3</a>), и
использовать их для запуска установки с CDROM, FTP, или NFS. Остальные файлы, необходимые
для установки, будут получены автоматически на основе вашего выбора. Если вы никогда
раньше не устанавливали FreeBSD, потребуется также полностью прочитать этот документ
(файл инструкций по установке).</p>

<p>Если вы хотите выполнить установку другого типа, или хотите узнать больше об
организации дистрибутива, вам поможет нижеследующая более детальная информация:</p>

<ol type="1">
<li>
<p>Файлы <tt class="FILENAME">*.TXT</tt> и <tt class="FILENAME">*.HTM</tt> содержат
документацию (например, этот документ находится в <tt class="FILENAME">INSTALL.TXT</tt> и
<tt class="FILENAME">INSTALL.HTM</tt>), их необходимо прочесть перед началом установки.
Файлы <tt class="FILENAME">*.TXT</tt> это простой текст, а файлы <tt
class="FILENAME">*.HTM</tt> это HTML файлы, которые могут быть просмотрены практически
любым веб браузером. Некоторые дистрибутивы могут также содержать документацию в других
форматах, таких как PDF или PostScript.</p>
</li>

<li>
<p><tt class="FILENAME">docbook.css</tt> это файл Cascading Style Sheet (CSS),
используемый некоторыми веб браузерами для форматирования HTML документации.</p>
</li>

<li>
<p>Каталоги <tt class="FILENAME">base</tt>, <tt class="FILENAME">catpages</tt>, <tt
class="FILENAME">crypto</tt>, <tt class="FILENAME">dict</tt>, <tt
class="FILENAME">doc</tt>, <tt class="FILENAME">games</tt>, <tt
class="FILENAME">info</tt>, <tt class="FILENAME">manpages</tt>, <tt
class="FILENAME">proflibs</tt>, и <tt class="FILENAME">src</tt> содержат основные
компоненты дистрибутива FreeBSD и разделены на небольшие файлы, которые могут поместиться
на дискеты (если это потребуется).</p>
</li>

<li>
<p>Каталоги <tt class="FILENAME">compat1x</tt>, <tt class="FILENAME">compat20</tt>, <tt
class="FILENAME">compat21</tt>, <tt class="FILENAME">compat22</tt>, <tt
class="FILENAME">compat3x</tt>, и <tt class="FILENAME">compat4x</tt> содержат
дистрибутивные наборы совместимости со старыми релизами и находятся в одиночных
упакованных gzip tar файлах -- они могут быть установлены во время установки релиза или
позже путем запуска соответствующих скриптов <tt class="FILENAME">install.sh</tt>.</p>
</li>

<li>
<p>В каталоге <tt class="FILENAME">floppies/</tt> находятся образы загрузочных дискет;
дальнейшая информация по их использованию дана в <a href="#FLOPPIES">Разд. 1.3</a>.</p>
</li>

<li>
<p>Каталоги <tt class="FILENAME">packages</tt> и <tt class="FILENAME">ports</tt> содержат
коллекцию пакетов и портов FreeBSD. Пакеты могут быть установлены из каталога <tt
class="FILENAME">packages</tt> следующей командой:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp><kbd
class="USERINPUT">/stand/sysinstall configPackages</kbd>
</pre>

<p>Пакеты также могут быть установлены путем задания отдельных имен пакетов в каталоге
<tt class="FILENAME">packages</tt>/ команде <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&sektion=1&manpath=FreeBSD+5.4-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pkg_add</span>(1)</span></a>.</p>

<p>Коллекция портов может быть установлена как любой другой дистрибутивный набор и
требует около 190MB места. Дальнейшая информация по коллекции портов может быть получена
с <a href="http://www.FreeBSD.org/ru/ports/"
target="_top">http://www.FreeBSD.org/ru/ports/</a> или локально из <tt
class="FILENAME">/usr/share/doc/handbook</tt> если вы установили дистрибутивный набор <tt
class="FILENAME">doc</tt>.</p>
</li>

<li>
<p>Наконец, каталог <tt class="FILENAME">tools</tt> содержит различные утилиты DOS для
определения геометрии диска, установки загрузочных менеджеров и т.п. Эти утилиты
опциональны и предоставляются только для удобства пользователей.</p>
</li>
</ol>

<br />
<br />
<p>Типичный дистрибутивный каталог (например, <tt class="FILENAME">info</tt>) изнутри
выглядит примерно так:</p>

<pre class="SCREEN">
CHECKSUM.MD5    info.ab         info.ad         info.inf        install.sh
info.aa         info.ac         info.ae         info.mtree
</pre>

<p>Файл <tt class="FILENAME">CHECKSUM.MD5</tt> содержит контрольные суммы MD5 для каждого
файла, которые помогают определить не поврежден ли файл. Он не используется программой
установки и его не требуется копировать вместе с остальными файлами набора. Файлы <tt
class="FILENAME">info.a*</tt> это части упакованного gzip tar файла, содержимое которого
может быть просмотрено так:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cat info.a* | tar tvzf -</kbd>
</pre>

<p>Во время установки эти части автоматически объединяются и извлекаются программой
установки.</p>

<p>Файл <tt class="FILENAME">info.inf</tt> также необходим, поскольку он читается
программой установки для определения числа частей, которые необходимо объединить в
дистрибутивный набор. При помещении дистрибутивных наборов на дискеты, файл <tt
class="FILENAME">.inf</tt> <span class="emphasis"><i class="EMPHASIS">должен</i></span>
быть помещен на первую дискету каждого дистрибутивного набора!</p>

<p>Файл <tt class="FILENAME">info.mtree</tt> это еще один не-необходимый файл,
предоставляемый для информации. Он содержит контрольные суммы MD5 для <span
class="emphasis"><i class="EMPHASIS">распакованных</i></span> дистрибутивных файлов и в
дальнейшем может использоваться программой <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mtree&sektion=8&manpath=FreeBSD+5.4-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mtree</span>(8)</span></a> для
проверки возможного изменения файлов. Использование этого файла из набора <tt
class="FILENAME">base</tt> это хороший способ обнаружения троянских атак на вашу
систему.</p>

<p>Наконец, <tt class="FILENAME">install.sh</tt> предназначен для тех, кто хочет
установить дистрибутивный набор после установки системы. Например, для установки набора
info с CDROM после установки системы, вы можете выполнить:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /cdrom/info</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">sh install.sh</kbd>
</pre>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="UPGRADING" name="UPGRADING">3. Обновление FreeBSD</a></h2>

<p>Эта инструкция описывает процедуру бинарного обновления с предыдущих версий
FreeBSD.</p>

<div class="WARNING">
<blockquote class="WARNING">
<p><b>Внимание:</b> Хотя процедура обновления FreeBSD предпринимает все меры для
предотвращения потери данных, все еще более чем возможно <span class="emphasis"><i
class="EMPHASIS">потерять все содержимое жесткого диска</i></span> во время обновления!
Пожалуйста, не подтверждайте установку без наличия резервной копии всех важных
файлов.</p>
</blockquote>
</div>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Важно:</b> Здесь предполагается, что вы используете <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+5.4-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>,
поставляемую с той версией FreeBSD, до которой вы хотите обновиться. Использование другой
версии <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+5.4-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>
это почти гарантия возникновения проблем, система будет приведена в неработоспособное
состояние. Наиболее часто совершаемая в этом случае ошибка -- это использование старой
копии <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+5.4-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a> из
существующей системы для обновления FreeBSD до новой версии. Это <span
class="emphasis"><i class="EMPHASIS">не</i></span> рекомендуется.</p>
</blockquote>
</div>

<div class="WARNING">
<blockquote class="WARNING">
<p><b>Внимание:</b> Бинарное обновление до FreeBSD 5.4-RELEASE с FreeBSD 4-STABLE на
данный момент не поддерживается. В FreeBSD 4-STABLE есть несколько файлов, наличие
которых может быть разрушительно, но они не удаляются бинарным обновлением. Один
известный пример это старый каталог <tt class="FILENAME">/usr/include/g++</tt>, наличие
которого приводит неправильной компиляции C++ программ (или они не компилируются
вообще).</p>

<p>Эти инструкции по обновлению предоставляются для пользователей, обновляющихся с
относительно свежих FreeBSD 5-STABLE снэпшотов.</p>
</blockquote>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN695" name="AEN695">3.1. Введение</a></h3>

<p>Процедура обновления заменяет выбранные пользователем дистрибутивные наборы на наборы
из нового релиза FreeBSD. Она сохраняет файлы настройки системы, как и данные
пользователя, установленные пакеты и другое программное обеспечение.</p>

<p>Администраторам, выполняющим обновление, предлагается изучить этот раздел полностью
перед началом обновления.</p>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN699" name="AEN699">3.1.1. Обзор обновления</a></h4>

<p>Обновление дистрибутива производится путем извлечения новой версии компонентов поверх
предыдущей версии. Файлы, принадлежащие старому дистрибутиву, не удаляются.</p>

<p>Настройки системы сохраняются путем сохранения и восстановления предыдущей версии
следующих файлов:</p>

<p><tt class="FILENAME">Xaccel.ini</tt>, <tt class="FILENAME">XF86Config</tt>, <tt
class="FILENAME">adduser.conf</tt>, <tt class="FILENAME">aliases</tt>, <tt
class="FILENAME">aliases.db</tt>, <tt class="FILENAME">amd.map</tt>, <tt
class="FILENAME">crontab</tt>, <tt class="FILENAME">csh.cshrc</tt>, <tt
class="FILENAME">csh.login</tt>, <tt class="FILENAME">csh.logout</tt>, <tt
class="FILENAME">cvsupfile</tt>, <tt class="FILENAME">dhclient.conf</tt>, <tt
class="FILENAME">disktab</tt>, <tt class="FILENAME">dm.conf</tt>, <tt
class="FILENAME">dumpdates</tt>, <tt class="FILENAME">exports</tt>, <tt
class="FILENAME">fbtab</tt>, <tt class="FILENAME">fstab</tt>, <tt
class="FILENAME">ftpusers</tt>, <tt class="FILENAME">gettytab</tt>, <tt
class="FILENAME">gnats</tt>, <tt class="FILENAME">group</tt>, <tt
class="FILENAME">hosts</tt>, <tt class="FILENAME">hosts.allow</tt>, <tt
class="FILENAME">hosts.equiv</tt>, <tt class="FILENAME">hosts.lpd</tt>, <tt
class="FILENAME">inetd.conf</tt>, <tt class="FILENAME">localtime</tt>, <tt
class="FILENAME">login.access</tt>, <tt class="FILENAME">login.conf</tt>, <tt
class="FILENAME">mail</tt>, <tt class="FILENAME">mail.rc</tt>, <tt
class="FILENAME">make.conf</tt>, <tt class="FILENAME">manpath.config</tt>, <tt
class="FILENAME">master.passwd</tt>, <tt class="FILENAME">motd</tt>, <tt
class="FILENAME">namedb</tt>, <tt class="FILENAME">networks</tt>, <tt
class="FILENAME">newsyslog.conf</tt>, <tt class="FILENAME">nsmb.conf</tt>, <tt
class="FILENAME">nsswitch.conf</tt>, <tt class="FILENAME">pam.conf</tt>, <tt
class="FILENAME">passwd</tt>, <tt class="FILENAME">periodic</tt>, <tt
class="FILENAME">ppp</tt>, <tt class="FILENAME">printcap</tt>, <tt
class="FILENAME">profile</tt>, <tt class="FILENAME">pwd.db</tt>, <tt
class="FILENAME">rc.conf</tt>, <tt class="FILENAME">rc.conf.local</tt>, <tt
class="FILENAME">rc.firewall</tt>, <tt class="FILENAME">rc.local</tt>, <tt
class="FILENAME">remote</tt>, <tt class="FILENAME">resolv.conf</tt>, <tt
class="FILENAME">rmt</tt>, <tt class="FILENAME">sendmail.cf</tt>, <tt
class="FILENAME">sendmail.cw</tt>, <tt class="FILENAME">services</tt>, <tt
class="FILENAME">shells</tt>, <tt class="FILENAME">skeykeys</tt>, <tt
class="FILENAME">spwd.db</tt>, <tt class="FILENAME">ssh</tt>, <tt
class="FILENAME">syslog.conf</tt>, <tt class="FILENAME">ttys</tt>, <tt
class="FILENAME">uucp</tt></p>

<p>Версии этих файлов, соответствующие новой версии системы, перемещаются в <tt
class="FILENAME">/etc/upgrade/</tt>. Системный администратор может объединить эти версии
если требуется. Обратите внимание, что многие из этих файлов взаимно зависимы, и лучшая
процедура объединения -- это копирование специфичных данных из старых версий файлов в
новые.</p>

<p>Во время процедуры обновления у администратора запрашивается место для сохранения
файлов из <tt class="FILENAME">/etc/</tt>. Если в используемые файлы будут внесены
изменения, они могут быть последовательно восстановлены из этого каталога.</p>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN773" name="AEN773">3.2. Процедура</a></h3>

<p>Этот раздел описывает детали процедуры обновления. Особое внимание уделено моментам,
которые существенно отличаются от обычной установки.</p>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN776" name="AEN776">3.2.1. Резервное копирование</a></h4>

<p>Данные пользователей и настройки системы должны быть сохранены перед обновлением. Хотя
процедура обновления делает все для предотвращения случайных ошибок, возможно частичное
или полное уничтожение данных и настроечной информации.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN779" name="AEN779">3.2.2. Монтирование файловых
систем</a></h4>

<p>Запускается редактор дисковых разделов со списком устройств имеющихся файловых систем.
Перед началом обновления администратор должен обратить внимание имена устройств и
соответствующие точки монтирования. Эти точки монтирования должны быть введены здесь.
<span class="emphasis"><i class="EMPHASIS">Не</i></span> устанавливайте ``newfs flag''
для файловых систем, поскольку это приведет к потере данных.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN784" name="AEN784">3.2.3. Выбор дистрибутивных
наборов</a></h4>

<p>На выбор дистрибутивных наборов не накладывается ограничений. Общее правило состоит в
том, что для обновления должен быть выбран дистрибутивный набор <tt
class="LITERAL">base</tt>, и <tt class="LITERAL">man</tt> если страницы справочника уже
установлены. Другие дистрибутивные наборы могут быть позже, если администратор захочет
добавить дополнительные возможности.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="FSTAB" name="FSTAB">3.2.4. После установки</a></h4>

<p>После завершения процедуры установки администратору предлагается проверить новые файлы
настройки. В этот момент должна быть выполнена проверка правильности настроек системы. В
частности, необходимо проверить файлы <tt class="FILENAME">/etc/rc.conf</tt> и <tt
class="FILENAME">/etc/fstab</tt>.</p>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN794" name="AEN794">3.3. Обновление из исходных
текстов</a></h3>

<p>Для тех, кто интересуется более гибким и ``интеллектуальным'' методом обновления,
существует глава Руководства FreeBSD <a
href="http://www.FreeBSD.org/doc/ru_RU.KOI8-R/books/handbook/cutting-edge.html"
target="_top">На переднем крае разработок</a>. Эта процедура относится к пересборке
FreeBSD из исходных текстов. Она требует хорошего сетевого подключения, свободного места
на диске и времени, но имеет преимущества при сетевых и других более сложных установках.
Это та же процедура, что используется для отслеживания ветвей разработки -STABLE или
-CURRENT.</p>

<p><tt class="FILENAME">/usr/src/UPDATING</tt> содержит важную информацию по обновлению
системы FreeBSD из исходных текстов. В нем отражены различные вопросы, относящиеся к
изменениям в FreeBSD, которые могут повлиять на обновление.</p>
</div>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="TROUBLE" name="TROUBLE">4. Решение проблем</a></h2>

<div class="SECT2">
<h3 class="SECT2"><a id="REPAIRING" name="REPAIRING">4.1. Восстановление существующей
установки FreeBSD</a></h3>

<p>FreeBSD предоставляет опцию ``fixit'' в главном меню программы установки <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+5.4-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>.
Опция открывает командную строку, из которой доступны основные программы базовой системы
FreeBSD; эта опция полезна для восстановления или решения проблем существующей установке
FreeBSD. Для использования режима fixit вам потребуется либо дискета <tt
class="FILENAME">fixit.flp</tt>, созданная таким же образом, как и загрузочные дискеты,
или компакт-диск с ``live filesystem''. В многодисковых наборах FreeBSD, образ live
filesystem обычно находится на диске с установкой. Обратите внимание, что для
использования режима fixit требуется некоторый опыт системного администрирования
UNIX.</p>

<p>Есть два стандартных способа войти в режим fixit. Пользователи, которые могут
загрузиться с установочного компакт-диска FreeBSD, могут воспользоваться пунктом
``fixit'' из главного меню <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+5.4-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>.
Затем нужно выбрать опцию этого меню ``CDROM/DVD''.</p>

<p>Пользователям, которые не могут загрузиться с компакт-диска, но могут загрузиться с
дискет, потребуется выполнить несколько больше шагов. В дополнение к дискетам <tt
class="FILENAME">boot.flp</tt> и <tt class="FILENAME">kern<tt
class="REPLACEABLE"><i>X</i></tt>.flp</tt>, необходимым для установки, создайте дискету
<tt class="FILENAME">fixit.flp</tt>, тем же способом, что и другие дискеты. Следуйте
инструкциям по загрузке программы установки с дискет до момента входа в меню <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+5.4-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>.
После этого выберите опцию ``fixit'' из главного меню <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+5.4-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>.
Затем выберите опцию ``Floppy'' и вставьте дискету <tt class="FILENAME">fixit.flp</tt>,
когда появится соответствующее приглашение.</p>

<p>Содержимое компакт-диска и дискеты похожи, но не идентичны. В обеих случаях
предоставляется командная строка с набором команд для проверки, восстановления файловых
систем и их содержимого. Версия на компакт-диске предоставляет посредством live
filesystem весь набор команд и программ, доступных в базовой системе FreeBSD. На дискете
находится ограниченный набор команд, вследствие ограничений по объему.</p>

<p>В версии на дискете, некоторые утилиты могут находиться в каталоге <tt
class="FILENAME">/stand</tt>, или <tt class="FILENAME">/mnt2/stand</tt>. В версии на
компакт диске, те же программы могут находиться в каталоге <tt
class="FILENAME">/stand</tt> или <tt class="FILENAME">/mnt2/rescue</tt> (вместе с другими
программами из live filesystem, которые расположены в <tt
class="FILENAME">/mnt</tt>).</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN839" name="AEN839">4.2. Проблемы, с которыми наиболее часто
сталкиваются пользователи архитектуры Alpha/AXP</a></h3>
</div>
</div>
</div>

<hr />
<p align="center"><small>Этот файл и другие документы, относящиеся к данной версии
FreeBSD, могут быть найдены по адресу <a
href="ftp://ftp.FreeBSD.org/">ftp://ftp.FreeBSD.org/</a>.</small></p>

<p align="center"><small>Если у вас возник вопрос, касающийся FreeBSD, прочтите <a
href="http://www.FreeBSD.org/ru/docs.html">документацию,</a> прежде чем написать письмо в
&#60;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&#62;.</small></p>

<p align="center"><small>Всем пользователям FreeBSD 5-STABLE рекомендуется подписаться на
список рассылки &#60;<a
href="mailto:stable@FreeBSD.org">stable@FreeBSD.org</a>&#62;.</small></p>

<p align="center"><small>Вопросы, касающиеся этого документа, вы можете направить по
адресу &#60;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&#62;.</small></p>
</body>
</html>

