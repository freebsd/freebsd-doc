---
title: "FreeBSD 15.0-RELEASE Release Notes"
sidenav: download
---

:localRel: 15.0
:releaseCurrent: 15.0-RELEASE
:releaseBranch: 15-STABLE
:releasePrev: 14.0-RELEASE
:releaseNext: 15.1-RELEASE
:releaseType: "release"

include::shared/ru/urls.adoc[]

= FreeBSD {releaseCurrent} Release Notes
:doctype: article
:toc: macro
:toclevels: 1
:icons: font

== Аннотация

[.abstract-title]
Информация о релизе FreeBSD {releaseCurrent} содержит сводку изменений, внесённых в базовую систему FreeBSD на линии разработки {releaseBranch}.
Этот документ перечисляет применимые рекомендации по безопасности, выпущенные с момента последнего релиза, а также значительные изменения в ядре FreeBSD и пользовательском пространстве.
Также представлены некоторые краткие замечания по обновлению.

[[intro]]
== Введение

Этот документ содержит информацию о релизе FreeBSD {releaseCurrent}.
В нём описываются недавно добавленные, изменённые или удалённые функции FreeBSD.
Также предоставляются некоторые замечания по обновлению с предыдущих версий FreeBSD.

Дистрибутив выпуска, к которому применяется эта информация о релизе, представляет собой последнюю точку на ветке разработки {releaseBranch} с момента её создания.
Информация о предварительно собранных бинарных дистрибутивах выпуска вдоль этой ветки может быть найдена на https://www.FreeBSD.org/ru/releases/[].

Дистрибутив выпуска, к которому применяется эта информация о релизе, представляет собой точку на ветке разработки {releaseBranch} между {releasePrev} и будущим {releaseNext}.
Информация о предварительно собранных бинарных дистрибутивах выпуска вдоль этой ветки может быть найдена на https://www.FreeBSD.org/ru/releases/[].

Этот дистрибутив FreeBSD {releaseCurrent} является дистрибутивом выпуска.
Его можно найти на https://www.FreeBSD.org/ru/releases/[] или любом из его зеркал.
Дополнительная информация о получении этого (или других) дистрибутивов выпуска FreeBSD может быть найдена в link:{handbook}/mirrors[приложении "Получение FreeBSD"] к link:{handbook}/[Руководству FreeBSD].

Все пользователи призываются ознакомиться с исправлениями выпуска перед установкой FreeBSD.
Документ исправлений обновляется "последней" информацией, обнаруженной поздно в цикле выпуска или после выпуска.
Обычно он содержит информацию об известных ошибках, рекомендациях по безопасности и исправлениях документации.
Актуальная копия исправлений для FreeBSD {releaseCurrent} может быть найдена на веб-сайте FreeBSD.

Этот документ описывает наиболее заметные для пользователя новые или изменённые функции в FreeBSD с момента {releasePrev}.
В общем, изменения, описанные здесь, уникальны для ветки {releaseBranch}, если они не помечены специально как функции MERGED.

Типичные пункты информации о релизе документируют недавние рекомендации по безопасности, выпущенные после {releasePrev}, новые драйверы или поддержку оборудования, новые команды или опции, основные исправления ошибок или обновления предоставленного программного обеспечения.
Они также могут перечислять изменения в основных портах/пакетах или практиках инженерии выпусков.
Очевидно, что информация о релизе не может перечислить каждое отдельное изменение, внесённое в FreeBSD между выпусками; этот документ фокусируется в основном на рекомендациях по безопасности, изменениях, заметных для пользователя, и основных архитектурных улучшениях.

[[upgrade]]
== Обновление с предыдущих выпусков FreeBSD

Бинарные обновления между версиями RELEASE (и снимками различных веток безопасности) поддерживаются с помощью утилиты man:freebsd-update[8].
См. процедуру обновления для конкретного выпуска, link:../installation/#upgrade-binary[информацию об обновлении FreeBSD {releaseCurrent}], с более подробной информацией в Руководстве FreeBSD link:{handbook}cutting-edge/#freebsdupdate-upgrade[процедура бинарного обновления].
Это обновит неизменённые утилиты пользовательского пространства, а также неизменённые ядра GENERIC, распространяемые как часть официального выпуска FreeBSD.
Утилита man:freebsd-update[8] требует, чтобы обновляемый хост имел подключение к Интернету.

Обновления на основе исходного кода (основанные на перекомпиляции базовой системы FreeBSD из исходного кода) с предыдущих версий поддерживаются в соответствии с инструкциями в [.filename]#/usr/src/UPDATING#.

[IMPORTANT]
====
Обновление FreeBSD следует предпринимать только после резервного копирования _всех_ данных и конфигурационных файлов.
====

[[security-errata]]
== Безопасность и исправления

В этом разделе перечислены различные бюллетени безопасности и уведомления об ошибках с момента {releasePrev}.

[[security]]
=== Бюллетени безопасности

[.informaltable]
[cols="1,1,1", frame="none", options="header"]
|===
| Advisory
| Date
| Topic

|https://www.freebsd.org/security/advisories/FreeBSD-SA-23:17.pf.asc[FreeBSD-SA-23:17.pf]
|05 December 2023
|TCP spoofing vulnerability in man:pf[4]

|https://www.freebsd.org/security/advisories/FreeBSD-SA-23:18.nfsclient.asc[FreeBSD-SA-23:18.nfsclient]
|12 December 2023
|NFS client data corruption and kernel memory disclosure

|https://www.freebsd.org/security/advisories/FreeBSD-SA-23:19.openssh.asc[FreeBSD-SA-23:19.openssh]
|19 December 2023
|Prefix Truncation Attack in the SSH protocol

|https://www.freebsd.org/security/advisories/FreeBSD-SA-24:01.bhyveload.asc[FreeBSD-SA-24:01.bhyveload]
|14 February 2024
|man:bhyveload[8] host file access

|https://www.freebsd.org/security/advisories/FreeBSD-SA-24:02.tty.asc[FreeBSD-SA-24:02.tty]
|14 February 2024
|man:jail[2] information leak

|https://www.freebsd.org/security/advisories/FreeBSD-SA-24:03.unbound.asc[FreeBSD-SA-24:03.unbound]
|28 March 2024
|Multiple vulnerabilities in unbound

|https://www.freebsd.org/security/advisories/FreeBSD-SA-24:04.openssh.asc[FreeBSD-SA-24:04.openssh]
|01 July 2024
|OpenSSH pre-authentication remote code execution

|https://www.freebsd.org/security/advisories/FreeBSD-SA-24:05.pf.asc[FreeBSD-SA-24:05.pf]
|07 August 2024
|pf incorrectly matches different ICMPv6 states in the state table

|https://www.freebsd.org/security/advisories/FreeBSD-SA-24:06.ktrace.asc[FreeBSD-SA-24:06.ktrace]
|07 August 2024
|man:ktrace[2] fails to detach when executing a setuid binary

|https://www.freebsd.org/security/advisories/FreeBSD-SA-24:07.nfsclient.asc[FreeBSD-SA-24:07.nfsclient]
|07 August 2024
|NFS client accepts file names containing path separators

|https://www.freebsd.org/security/advisories/FreeBSD-SA-24:08.openssh.asc[FreeBSD-SA-24:08.openssh]
|07 August 2024
|OpenSSH pre-authentication async signal safety issue

|https://www.freebsd.org/security/advisories/FreeBSD-SA-24:09.libnv.asc[FreeBSD-SA-24:09.libnv]
|04 September 2024
|Multiple vulnerabilities in libnv

|https://www.freebsd.org/security/advisories/FreeBSD-SA-24:10.bhyve.asc[FreeBSD-SA-24:10.bhyve]
|04 September 2024
|man:bhyve[8] privileged guest escape via TPM device passthrough

|https://www.freebsd.org/security/advisories/FreeBSD-SA-24:11.ctl.asc[FreeBSD-SA-24:11.ctl]
|04 September 2024
|Multiple issues in man:ctl[4] CAM Target Layer

|https://www.freebsd.org/security/advisories/FreeBSD-SA-24:12.bhyve.asc[FreeBSD-SA-24:12.bhyve]
|04 September 2024
|man:bhyve[8] privileged guest escape via USB controller

|https://www.freebsd.org/security/advisories/FreeBSD-SA-24:13.openssl.asc[FreeBSD-SA-24:13.openssl]
|04 September 2024
|Possible DoS in X.509 name checks in OpenSSL

|https://www.freebsd.org/security/advisories/FreeBSD-SA-24:14.umtx.asc[FreeBSD-SA-24:14.umtx]
|04 September 2024
|umtx Kernel panic or Use-After-Free

|https://www.freebsd.org/security/advisories/FreeBSD-SA-24:15.bhyve.asc[FreeBSD-SA-24:15.bhyve]
|19 September 2024
|man:bhyve[8] out-of-bounds read access via XHCI emulation

|https://www.freebsd.org/security/advisories/FreeBSD-SA-24:16.libnv.asc[FreeBSD-SA-24:16.libnv]
|19 September 2024
|Integer overflow in libnv

|https://www.freebsd.org/security/advisories/FreeBSD-SA-24:17.bhyve.asc[FreeBSD-SA-24:17.bhyve]
|29 October 2024
|Multiple issues in the bhyve hypervisor

|https://www.freebsd.org/security/advisories/FreeBSD-SA-24:18.ctl.asc[FreeBSD-SA-24:18.ctl]
|29 October 2024
|Unbounded allocation in man:ctl[4] CAM Target Layer

|https://www.freebsd.org/security/advisories/FreeBSD-SA-24:19.fetch.asc[FreeBSD-SA-24:19.fetch]
|29 October 2024
|Certificate revocation list man:fetch[1] option fails

|https://www.freebsd.org/security/advisories/FreeBSD-SA-25:01.openssh.asc[FreeBSD-SA-25:01.openssh]
|29 January 2025
|OpenSSH Keystroke Obfuscation Bypass

|https://www.freebsd.org/security/advisories/FreeBSD-SA-25:02.fs.asc[FreeBSD-SA-25:02.fs]
|29 January 2025
|Buffer overflow in some filesystems via NFS

|https://www.freebsd.org/security/advisories/FreeBSD-SA-25:03.etcupdate.asc[FreeBSD-SA-25:03.etcupdate]
|29 January 2025
|Unprivileged access to system files

|https://www.freebsd.org/security/advisories/FreeBSD-SA-25:04.ktrace.asc[FreeBSD-SA-25:04.ktrace]
|29 January 2025
|Uninitialized kernel memory disclosure via man:ktrace[2]

|https://www.freebsd.org/security/advisories/FreeBSD-SA-25:05.openssh.asc[FreeBSD-SA-25:05.openssh]
|21 February 2025
|Multiple vulnerabilities in OpenSSH

|https://www.freebsd.org/security/advisories/FreeBSD-SA-25:06.xz.asc[FreeBSD-SA-25:06.xz]
|02 July 2025
|Use-after-free in multi-threaded xz decoder

|https://www.freebsd.org/security/advisories/FreeBSD-SA-25:07.libarchive.asc[FreeBSD-SA-25:07.libarchive]
|08 August 2025
|Integer overflow in libarchive leading to double free
|===

[[errata]]
=== Уведомления об ошибках

[.informaltable]
[cols="1,1,1", frame="none", options="header"]
|===
| Уведомление об ошибках
| Дата
| Содержание

|https://www.freebsd.org/security/advisories/FreeBSD-EN-23:15.sanitizer.asc[FreeBSD-EN-23:15:sanitizer]
|01 December 2023
|Clang sanitizer failure with ASLR enabled

|https://www.freebsd.org/security/advisories/FreeBSD-EN-23:16.openzfs.asc[FreeBSD-EN-23:16:openzfs]
|01 December 2023
|OpenZFS data corruption

|https://www.freebsd.org/security/advisories/FreeBSD-EN-23:17.ossl.asc[FreeBSD-EN-23:17:ossl]
|05 December 2023
|man:ossl[4]'s AES-GCM implementation may give incorrect results

|https://www.freebsd.org/security/advisories/FreeBSD-EN-23:18.openzfs.asc[FreeBSD-EN-23:18:openzfs]
|05 December 2023
|High CPU usage by ZFS kernel threads

|https://www.freebsd.org/security/advisories/FreeBSD-EN-23:19.pkgbase.asc[FreeBSD-EN-23:19:pkgbase]
|05 December 2023
|Incorrect pkgbase version number for FreeBSD {releasePrev}.

|https://www.freebsd.org/security/advisories/FreeBSD-EN-23:20.vm.asc[FreeBSD-EN-23:20:vm]
|05 December 2023
|Incorrect results from the kernel physical memory allocator

|https://www.freebsd.org/security/advisories/FreeBSD-EN-23:21.tty.asc[FreeBSD-EN-23:21:tty]
|24 November 2023
|man:tty[4] IUTF8 causes a kernel panic

|https://www.freebsd.org/security/advisories/FreeBSD-EN-23:22.vfs.asc[FreeBSD-EN-23:22:vfs]
|05 December 2023
|ZFS snapshot directories not accessible over NFS

|https://www.freebsd.org/security/advisories/FreeBSD-EN-24:01.tzdata.asc[FreeBSD-EN-24:01:tzdata]
|14 February 2024
|Timezone database information update

|https://www.freebsd.org/security/advisories/FreeBSD-EN-24:02.libutil.asc[FreeBSD-EN-24:02:libutil]
|14 February 2024
|Login class resource limits and CPU mask bypass

|https://www.freebsd.org/security/advisories/FreeBSD-EN-24:03.kqueue.asc[FreeBSD-EN-24:03:kqueue]
|14 February 2024
|man:kqueue_close[2] page fault on exit using man:rfork[2]

|https://www.freebsd.org/security/advisories/FreeBSD-EN-24:04.ip.asc[FreeBSD-EN-24:04:ip]
|14 February 2024
|Kernel panic triggered by man:bind[2]

|https://www.freebsd.org/security/advisories/FreeBSD-EN-24:05.tty.asc[FreeBSD-EN-24:05:tty]
|28 March 2024
|TTY Kernel Panic

|https://www.freebsd.org/security/advisories/FreeBSD-EN-24:06.wireguard.asc[FreeBSD-EN-24:06:wireguard]
|28 March 2024
|Insufficient barriers in WireGuard man:if_wg[4]

|https://www.freebsd.org/security/advisories/FreeBSD-EN-24:07.clang.asc[FreeBSD-EN-24:07:clang]
|28 March 2024
|Clang crash when certain optimization is enabled

|https://www.freebsd.org/security/advisories/FreeBSD-EN-24:08.kerberos.asc[FreeBSD-EN-24:08:kerberos]
|28 March 2024
|Kerberos segfaults when using weak crypto

|https://www.freebsd.org/security/advisories/FreeBSD-EN-24:09.zfs.asc[FreeBSD-EN-24:09:zfs]
|24 April 2024
|High CPU usage by kernel threads related to ZFS

|https://www.freebsd.org/security/advisories/FreeBSD-EN-24:10.zfs.asc[FreeBSD-EN-24:10:zfs]
|19 June 2024
|Kernel memory leak in ZFS

|https://www.freebsd.org/security/advisories/FreeBSD-EN-24:11.ldns.asc[FreeBSD-EN-24:11:ldns]
|19 June 2024
|LDNS uses nameserver commented out in resolv.conf

|https://www.freebsd.org/security/advisories/FreeBSD-EN-24:12.killpg.asc[FreeBSD-EN-24:12:killpg]
|19 June 2024
|Lock order reversal in killpg causing livelock

|https://www.freebsd.org/security/advisories/FreeBSD-EN-24:13.libc%2B%2B.asc[FreeBSD-EN-24:13:libc++]
|19 June 2024
|Incorrect size passed to heap allocated std::string delete

|https://www.freebsd.org/security/advisories/FreeBSD-EN-24:14.ifconfig.asc[FreeBSD-EN-24:14:ifconfig]
|07 August 2024
|Incorrect ifconfig netmask assignment

|https://www.freebsd.org/security/advisories/FreeBSD-EN-24:15.calendar.asc[FreeBSD-EN-24:15:calendar]
|04 September 2024
|man:cron[8] / man:periodic[8] session login

|https://www.freebsd.org/security/advisories/FreeBSD-EN-24:16.pf.asc[FreeBSD-EN-24:16:pf]
|19 September 2024
|Incorrect ICMPv6 state handling in pf

|https://www.freebsd.org/security/advisories/FreeBSD-EN-24:17.pam_xdg.asc[FreeBSD-EN-24:17:pam_xdg]
|20 October 2024
|XDG runtime directory's file descriptor leak at login

|https://www.freebsd.org/security/advisories/FreeBSD-EN-25:01.rpc.asc[FreeBSD-EN-25:01.rpc]
|29 January 2025
| NULL pointer dereference in the NFSv4 client

|https://www.freebsd.org/security/advisories/FreeBSD-EN-25:02.audit.asc[FreeBSD-EN-25:02.audit]
|29 January 2025
|System call auditing disabled by DTrace

|https://www.freebsd.org/security/advisories/FreeBSD-EN-25:03.tzdata.asc[FreeBSD-EN-25:03.tzdata]
|29 January 2025
|Timezone database information update

|https://www.freebsd.org/security/advisories/FreeBSD-EN-25:04.tzdata.asc[FreeBSD-EN-25:04.tzdata]
|10 April 2025
|Timezone database information update

|https://www.freebsd.org/security/advisories/FreeBSD-EN-25:05.expat.asc[FreeBSD-EN-25:05.expat]
|10 April 2025
|Update expat to 2.7.1

|https://www.freebsd.org/security/advisories/FreeBSD-EN-25:06.daemon.asc[FreeBSD-EN-25:06.daemon]
|10 April 2025
|man:daemon[8] missing signals

|https://www.freebsd.org/security/advisories/FreeBSD-EN-25:07.openssl.asc[FreeBSD-EN-25:07.openssl]
|10 April 2025
|Update OpenSSL to 3.0.16

|https://www.freebsd.org/security/advisories/FreeBSD-EN-25:08.caroot.asc[FreeBSD-EN-25:08.caroot]
|10 April 2025
|Root certificate bundle update

|https://www.freebsd.org/security/advisories/FreeBSD-EN-25:09.libc.asc[FreeBSD-EN-25:09:libc]
|02 July 2025
|Dynamically-loaded C++ libraries crashing at exit

|https://www.freebsd.org/security/advisories/FreeBSD-EN-25:10.zfs.asc[FreeBSD-EN-25:10:zfs]
|02 July 2025
|Corruption in ZFS replication streams from encrypted datasets

|https://www.freebsd.org/security/advisories/FreeBSD-EN-25:11.ena.asc[FreeBSD-EN-25:11:ena]
|02 July 2025
|ena resets and kernel panic on Nitro v4 or newer instances

|https://www.freebsd.org/security/advisories/FreeBSD-EN-25:12.efi.asc[FreeBSD-EN-25:12:efi]
|08 August 2025
|man:bsdinstall[8] not copying the correct loader on systems with IA32 UEFI firmware.

|https://www.freebsd.org/security/advisories/FreeBSD-EN-25:13.wlan_tkip.asc[FreeBSD-EN-25:13:wlan_tkip]
|08 August 2025
|net80211 TKIP crypto support fails for some drivers

|https://www.freebsd.org/security/advisories/FreeBSD-EN-25:14.route.asc[FreeBSD-EN-25:14:route]
|08 August 2025
|man:route[8] monitor buffers too much when redirected to a file
|===

[[userland]]
== Пользовательское пространство

Этот раздел охватывает изменения и дополнения в пользовательских приложениях, предоставленном программном обеспечении и системных утилитах.

[[userland-config]]
=== Изменения конфигурации пользовательского пространства

Доступна новая переменная `kdc_restart`, которая управляет man:kdc[8] (или `krb5kdc`) под man:daemon[8].
Установите `kdc_restart="YES"` в man:rc.conf[5] для автоматического перезапуска kdc при аварийном завершении.
Установите `kdc_restart_delay="N"` на количество секунд задержки перед перезапуском kdc.
gitref:abc4b3088941[repository=src]

По умолчанию изменения, показываемые в электронной почте средством man:periodic[8] из скриптов `daily`, показывают меньший контекст, чем раньше, для уменьшения размера вывода.
Поведение может контролироваться переменной `daily_diff_flags` в man:periodic.conf[5].
Аналогично, изменения, показываемые скриптами безопасности, показывают меньший контекст, чем ранее, контролируемые переменной `security_status_diff_flags` в man:periodic.conf[5].
gitref:538994626b9f[repository=src], gitref:37dc394170a5[repository=src], gitref:128e78ffb084[repository=src]

[[userland-programs]]
=== Изменения пользовательских приложений

Утилита man:adduser[8], используемая man:bsdinstall[8], теперь будет создавать набор данных ZFS для домашнего каталога нового пользователя, если родительский каталог находится на наборе данных ZFS.
Доступна опция командной строки для отключения использования отдельного набора данных.
Также доступно шифрование ZFS.
gitref:516009ce8d38[repository=src]

Программа man:date[1] теперь поддерживает наносекунды.
Например: `date -Ins` выводит "2024-04-22T12:20:28,763742224+02:00" и `date +%N` выводит "415050400".
gitref:eeb04a736cb9[repository=src]

Утилита man:dtrace[1] теперь может генерировать машиночитаемый вывод в JSON, XML и HTML с использованием man:libxo[3].
gitref:aef4504139a4[repository=src] (Спонсировано Innovate UK)

Утилита man:lastcomm[1] теперь отображает временные метки с точностью до секунд.
gitref:692c0a2e80c1[repository=src] (Спонсировано DSS Gmbh)

Утилита man:ldconfig[8] теперь поддерживает файлы подсказок любого порядка байтов.
Формат по умолчанию — собственный порядок байтов хоста.
gitref:fa7b31166ddb[repository=src]

Утилита man:usbconfig[8] теперь читает описания USB-вендоров и продуктов из [.filename]#/usr/share/misc/usb_vendors#, когда они доступны, аналогично тому, что делает man:pciconf[8].
gitref:7b9a772f9f64[repository=src]

Добавлена опция для изменения каталога в man:env[1], которая тесно напоминает функцию в версии env от GNU, хотя она не поддерживает длинные опции.
gitref:08e8554c4a39[repository=src] (Спонсировано Klara, Inc.)

Исправлен флаг `-U` в man:ps[1] для выбора процессов по реальным идентификаторам пользователей.
Это то, что требует POSIX для опции `-U` и, возможно, поведение, которое большинству пользователей действительно нужно в большинстве случаев.
Раньше `-U` выбирал процессы по их эффективным идентификаторам пользователей (что является поведением, требуемым POSIX для опции `-u`).
gitref:a2132d91739d[repository=src].
(Спонсировано The FreeBSD Foundation).

Сделана опция '-O' более универсальной и предсказуемой для man:ps[1].
Список столбцов отображения man:ps[1] теперь сначала строится без учёта опций `-O`.
На втором шаге все столбцы, переданные через `-O`, окончательно вставляются после первого столбца PID построенного до сих пор отображения (если он существует, иначе в начале), в порядке их появления в качестве аргументов для опций `-O`.
gitref:1fc8cb547cd4[repository=src].
(Спонсировано The FreeBSD Foundation).

Удалены неявно запрошенные столбцы с дублирующимися данными в man:ps[1].
До этого изменения, при добавлении большего количества столбцов в отображение через опции командной строки, если пользователь запрашивал добавление некоторого "готового" отображения (через опции `-j`, `-l`, `-u` или `-v`), столбцы в нём, которые были "дубликатами" уже запрошенных (что означает, что они имеют то же ключевое слово, независимо от того, были ли их заголовки настроены), в конечном итоге опускались.
gitref:7aa2f4826717[repository=src].
(Спонсировано The FreeBSD Foundation).

Добавлены флаги для фильтрации переменных тюрьмы и vnet в выводе man:sysctl[8].
Чтобы пользователям не приходилось обращаться к исходному коду, чтобы определить, является ли переменная переменной тюрьмы / vnet или нет.
gitref:615c9ce250ee[repository=src].

man:grep[1] больше не следует символическим ссылкам по умолчанию для рекурсивных поисков.
Это соответствует задокументированному поведению на странице Справочника.
gitref:3a2ec5957ea9[repository=src]

[[userland-contrib]]
=== Предоставленное программное обеспечение

One True Awk (man:awk[1]) обновлён до 2-го издания с новой поддержкой -csv и поддержкой UTF-8.
Использован снимок 20250804.
gitref:b45a181a74c8[repository=src]

Комплект man:sendmail[8] обновлён до версии 8.18.1, устраняя CVE-2023-51765.
gitref:58ae50f31e95[repository=src]

`bc` обновлён до 7.0.2.
gitref:90ea553a0d30[repository=src]

`libarchive` обновлён до 3.7.7.
gitref:2ae238160f20[repository=src]

`libcbor` обновлён до 0.11.0.
gitref:1755b9daa693[repository=src] (Спонсировано The FreeBSD Foundation)

`libcxxrt` обновлён до вендорного снимка 6f2fdfebcd62.
gitref:d0dcee46d971[repository=src]

`libfido2` обновлён до 1.14.0.
gitref:128bace5102e[repository=src] (Спонсировано The FreeBSD Foundation)

`libpcap` обновлён до 1.10.5.
gitref:26f21a6494b4[repository=src] (Спонсировано The FreeBSD Foundation)

`tcpdump` обновлён до 4.99.5.
gitref:ec3da16d8bc1[repository=src] (Спонсировано The FreeBSD Foundation)

`unbound` обновлён до 1.22.0.
gitref:0a096a7b3ae8[repository=src]

`llvm` обновлён до 19.1.7-0-gcd708029e0b2.
gitref:dc3f24ea8a25[repository=src]


man:zfs[8]: OpenZFS обновлён до zfs-2.2-release(2.2.7)(gitref:2ec8b6948070[repository=src]).

man:xz[1] обновлён до 5.8.1(gitref:9679eedea94c[repository=src]).

man:less[1] обновлён до v668(gitref:0bb4c188d363[repository=src]).

man:file[1] обновлён до 5.46(gitref:71c92e6b94f0[repository=src]).

man:expat[3] обновлён до 2.7.1(gitref:6f7ee9ac036e[repository=src]).

`tzdata` обновлён до 2025b(gitref:475082194ac8[repository=src]).

OpenSSH обновлён до 9.9p2(gitref:059b786b7db5[repository=src]).
(Спонсировано The FreeBSD Foundation).

OpenSSL обновлён до 3.0.16(gitref:cb29db243bd0[repository=src]).

`googletest` обновлён с 1.14.0 до 1.15.2(gitref:1d67cec52542[repository=src]).
Одно заметное изменение — GoogleTest 1.15.x теперь официально требует C++-14 (1.14.x требовал C++-11).

`spleen` обновлён до Spleen 2.1.0(gitref:26336203d32c[repository=src]).

[[userland-libraries]]
=== Библиотеки времени выполнения и API

Процедура man:setusercontext[3] в `libutil` теперь будет устанавливать приоритет процесса (nice) из файла [.filename]#.login.conf# из домашнего каталога при соответствующих условиях, а также из системного man:login.conf[5].
Приоритет теперь может иметь значение `inherit`, указывающее, что приоритет должен быть неизменным от родительского процесса.
Аналогично, umask может иметь значение `inherit`.
gitref:6f6186e19fe5[repository=src], gitref:a8c273b3c97f[repository=src], gitref:d2d66fedc418[repository=src] (Спонсировано Kumacom SAS)

Многие строковые и операции с памятью в библиотеке C теперь используют расширения SIMD (single instruction multiple data) для улучшенной производительности, когда они доступны на системах amd64; см. man:simd[7].
(Спонсировано The FreeBSD Foundation)

Теперь существует гораздо лучшая реализация 128-битной функции `tgammal` в математической библиотеке, man:math[3], на платформах, которые её поддерживают.
gitref:8df6c930c151[repository=src]

man:fma[3] теперь возвращает правильно подписанный ноль при предоставлении определённых малых входных данных (как наблюдалось в тестовом наборе Python).
gitref:dc39004bc670[repository=src]
(Спонсировано The FreeBSD Foundation)

Добавлена функция `cap_rights_is_empty`.
Она сообщает, установлены ли какие-либо права в `cap_rights_t`.
gitref:e77813f7e4a3[repository=src]
(Спонсировано The FreeBSD Foundation)

`libcxxrt` обновлён до версии 6f2fdfebcd62 из вышестоящего репозитория(gitref:d9901a23bd2f[repository=src]).

[[userland-deprecated-programs]]
=== Устаревшие приложения

man:fdisk[8] был устаревшим в пользу man:gpart[8] в течение длительного времени, но не был удалён; запуск этого приложения покажет предупреждение о миграции на man:gpart[8].
gitref:3958be5c29da[repository=src] (Спонсировано The FreeBSD Foundation)

Точность man:asinf[3] и man:acosf[3] улучшена.
gitref:33c82f11c267[repository=src]

Обновлено предупреждение об устаревании, чтобы отметить, что man:gvinum[8] удалён в 15.0(gitref:dec497a9fcbf[repository=src]).

Добавлено уведомление об устаревании для man:syscons[4].
man:syscons[4] не совместим с UEFI, не поддерживает UTF-8 и заблокирован Giant.
Конкретного графика удаления ещё нет, но поддержка блокировки Giant ожидается к исчезновению через один или два основных цикла выпуска.
(gitref:8c922db4f3d9[repository=src]).
(Спонсировано The FreeBSD Foundation).

OpenSSH планирует удалить поддержку алгоритма подписи DSA в начале 2025 года.

Функциональность man:publickey[5] устарела.
Она использует DES, и вероятно, что никто не использует это в 2025 году.
(gitref:9197c04a251b[repository=src]).

[[cloud]]
== Поддержка облачных сред

Этот раздел охватывает изменения в поддержке облачных сред.

{releaseCurrent} поддерживает cloudinit, включая скрипт запуска `nuageinit` и поддержку раздела `config-drive`.
Он совместим с OpenStack и многими хостинг-провайдерами.
См. веб-сайт https://cloud-init.io[cloud-init] и сообщения коммитов,
gitref:16a6da44e28d[repository=src] gitref:227e7a205edf[repository=src]. (Спонсировано OVHcloud)

Проект FreeBSD теперь публикует образы контейнеров, совместимые с OCI.
gitref:8a688fcc242e[repository=src]

Проект FreeBSD теперь публикует образы Oracle Cloud Infrastructure.
См.
link:https://cloudmarketplace.oracle.com/marketplace/app/freebsd-release[список FreeBSD в Oracle Cloud Infrastructure]
для получения дополнительной информации.
gitref:77b296a2582b[repository=src]

API "shutdown" и "reboot" в облаке Amazon EC2 теперь работают для экземпляров arm64.
Старые экземпляры, обновлённые до FreeBSD {releaseCurrent}, должны иметь `debug.acpi.quirks="8"` установленным в `/boot/loader.conf`.
gitref:28b881840df7[repository=src] (Спонсировано Amazon)

Проект FreeBSD теперь публикует "маленькие" образы EC2; это "базовые" образы минус отладочные символы, тесты, 32-битные библиотеки, отладчик LLDB, агент Amazon SSM и AWS CLI.
gitref:953142d6baf3[repository=src] (Спонсировано Amazon)

[[kernel]]
== Ядро

В этом разделе рассматриваются изменения в конфигурациях ядра, настройке системы и параметрах системного управления, которые не отнесены к другим категориям.

[[kernel-general]]
=== Общие изменения в ядре

Реализованы подпрограммы `fpu_kern_enter` и `fpu_kern_leave` для powerpc, что позволяет использовать в ядре функции шифрования man:ossl[4], использующие регистры с плавающей запятой и векторные регистры.
gitref:91e53779b4fc[repository=src]

Добавлена поддержка устаревшего PCI hotplug на arm64.
gitref:355f02cddbf0[repository=src].
(Спонсировано Arm Ltd).

Определен общий узел 'mac' для параметров клетки (jail) MAC в man:mac[3].
Будет использоваться man:mac_do[4].
gitref:66fb52a27279[repository=src].
(Спонсировано The FreeBSD Foundation).

Новый системный вызов `setcred()` и связанные с ним MAC-хуки.
Этот новый системный вызов позволяет установить все необходимые учетные данные процесса за один раз: эффективный, реальный и сохраненный UID, эффективный, реальный и сохраненный GID, дополнительные группы и метку MAC.
Его преимущество перед стандартными системными вызовами для установки учетных данных (такими как `setuid()`, `seteuid()` и т.д.) заключается в том, что он позволяет модулям MAC, таким как man:mac_do[4], ограничивать набор учетных данных, которые некоторый процесс может получить, детализированным образом.
gitref:c1d7552dddb5[repository=src].
(Спонсировано The FreeBSD Foundation).

Добавлена поддержка нескольких пользователей и групп в качестве целей для одного правила в man:mac_do[4].
Поддержка групповых целей необходима для того, чтобы man:mac_do[4] мог применять ограниченный набор допустимых новых групп, передаваемых в `setgroups()`.
Кроме того, этот набор групп также должен иметь возможность зависеть от целевого UID, поскольку в UNIX пользователи и группы тесно связаны (пользователи автоматически помещаются только в группы, указанные через '/etc/passwd' (основная группа) и '/etc/group' (дополнительные)).
gitref:83ffc412b2e9[repository=src].
(Спонсировано The FreeBSD Foundation).

Обновлен man:sysctl[8] для присоединения и запуска в клетке (jail).
Это позволяет родительской клетке получать или устанавливать состояние ядра, когда в дочерней клетке не установлен man:sysctl[8] (например, в облегченных контейнерах OCI или slim клетках).
Это особенно полезно при манипулировании системными параметрами (sysctl) jail, prison или vnet.
Например, `sysctl -j foo -Ja` или `sysctl -j foo net.fibs=2`.
gitref:8d5d7e2ba3a6[repository=src].

Разрешена настройка переменных man:sysctl[9] vnet через загрузчик.
В gitref:3da1cf1e88f8[repository=src] значение флага `CTLFLAG_TUN` расширено для автоматической проверки наличия переменной окружения ядра, которая должна инициализировать `SYSCTL` во время ранней загрузки.
Это работает для всех типов `SYSCTL`, как статических, так и динамически созданных, за исключением `SYSCTL`, принадлежащих VNET.
Отметим, что реализация имеет ограничение.
Она ведет себя так же, как и не-vnet настройки загрузчика.
То есть, после инициализации ядра или модулей любые изменения (например, через `kenv`) переменной окружения ядра не повлияют на соответствующую vnet-переменную в последующих создаваемых VNET.
Чтобы преодолеть это, можно использовать `TUNABLE_XXX_FETCH` для получения переменной окружения ядра в эти vnet-переменные во время создания vnet.
gitref:894efae09de4[repository=src]

man:sound[4]: Выделение vchans по требованию.
Рефакторинг `pcm_chnalloc()` и объединение с частями `vchan_setnew()` (теперь удалена) и созданием канала в `dsp_open()` в новую функцию `dsp_chn_alloc()`.
Функция отвечает за использование свободного HW-канала (если `vchans` отключены) или выделение нового vchan.
`hw.snd.vchans_enable` (ранее `hw.snd.maxautovchans`) и `dev.pcm.X.{play|rec}.vchans` теперь работают как настройки для включения/отключения `vchans`, в отличие от установки их количества и/или (де-)выделения vchans.
Поскольку эти sysctl больше не запускают никаких (де-)выделений, их эффект мгновенен, тогда как раньше установка `dev.pcm.X.{play|rec}.vchans` в очень большое значение могла привести к зависанию машины (при попытке выделить новые vchans).
gitref:960ee8094913[repository=src].
(Спонсировано	The FreeBSD Foundation).

LinuxKPI: `linux_alloc_pages()` теперь учитывает `__GFP_NORETRY`.
Это исправляет замедления в drm-kmod, которые со временем усугубляются по мере фрагментации физической памяти (и, вероятно, также зависят от других факторов).
gitref:831e6fb0baf6[repository=src]
(Спонсировано The FreeBSD Foundation).

Локальные потоковые сокеты (AF_UNIX/SOCK_STREAM) и сокеты последовательных пакетов (AF_UNIX/SOCK_SEQPACKET) были улучшены для лучшей пропускной способности при объемной передаче и времени приема-передачи.
Сокет SOCK_SEQPACKET был приведен в соответствие со спецификацией и теперь ведет себя как настоящий потоковый сокет, тогда как в предыдущих выпусках FreeBSD он мог проявлять особенности
дейтаграммного сокета. Приложения, которые использовали SOCK_SEQPACKET некорректно и полагались на старые ошибки реализации, возможно, потребуется адаптировать.
gitref:d15792780760[repository=src]

[[drivers]]
== Устройства и драйверы

В этом разделе рассматриваются изменения и дополнения в устройствах и драйверах устройств, появившиеся после {releasePrev}.

[[drivers-device]]
=== Драйверы устройств

Доступен драйвер для контроллеров Ethernet-сети man:ice[4] в серии Intel E800, которые поддерживают работу на скорости 100 Гб/с.
Он был обновлен до версии 1.43.2-k.
gitref:38a1655adcb3[repository=src] (Спонсировано Intel Corporation)

man:rtw88[4]: Влит драйвер rtw88 от Realtek на основе Linux v6.17 (gitref:c1d365f39e08[repository=src]).
Возможная проблема, когда устройства не могут пройти аутентификацию, все еще исследуется.
(Спонсировано The FreeBSD Foundation).

man:rtw89[4]: Влит драйвер rtw89 от Realtek на основе Linux v6.17 (gitref:b35044b38f74[repository=src]).
Драйвер недостаточно тестирован и все еще может иметь проблемы.
(Спонсировано The FreeBSD Foundation).

man:iwlwifi[4]: Влит драйвер iwlwifi mvm/mld от Intel на основе Linux v6.17 (gitref:69caa1cf3ce5[repository=src]).
Для чипсетов на основе BE200 потребуется более новая прошивка, требующая дополнительных исправлений в драйвере, которых нет в этом выпуске.
(Спонсировано The FreeBSD Foundation).

В драйвер man:iwlwifi[4] для устройств Wi-Fi от Intel внесены многочисленные улучшения стабильности.
(Спонсировано The FreeBSD Foundation)

Теперь поддерживаются несколько регионов PCI MCFG на amd64 и i386, что обеспечивает доступ к пространству конфигурации PCI для доменов (сегментов), отличных от 0.
gitref:4b5f64408804[repository=src]

Драйвер Ethernet man:smsc[4] теперь может получать значение `smsc95xx.macaddr`, передаваемое некоторыми моделями Raspberry Pi, и использовать его для MAC-адреса.
Он всегда использует стабильный MAC-адрес, даже если в EEPROM нет адреса.
gitref:028e4c6548e4[repository=src]

Фреймворк `snd_clone` был удален из звуковой подсистемы, включая связанные sysctl, что упрощает систему.
Узлы для каждого канала ([.filename]#/dev/dspX.Y#) больше не создаются, только основное устройство ([.filename]#/dev/dspX#).
gitref:e6c51f6db8d7[repository=src] (Спонсировано The FreeBSD Foundation)

Теперь аудио поддерживает асинхронное отключение устройства.
Это значительно упрощает горячее подключение и отключение таких устройств, как USB-гарнитуры, и облегчает использование PulseAudio в случаях, требующих перевода операционной системы в режим сна и пробуждения (suspend и resume).
gitref:d692c314d29a[repository=src] (Спонсировано The FreeBSD Foundation)

`ena` обновлена до версии 2.8.0.
gitref:6bf02434bd9a[repository=src] (Спонсировано Amazon, Inc.)

`ice_ddp` обновлена до версии 1.3.41.0.
gitref:a9d78bb714e3[repository=src] (Спонсировано Intel Corporation)

Добавлена поддержка Tiger Lake-H в драйвер man:hda[4].
gitref:dbb6f488df6e[repository=src]

Добавлена поддержка Meteor Lake в драйвер man:ichsmb[4].
gitref:14c22e28e4ee[repository=src]
(Спонсировано Framework Computer Inc)
(Спонсировано The FreeBSD Foundation)

Добавлена поддержка Meteor Lake в драйвер man:ig4[4].
gitref:56f0fc0011c2[repository=src]

Доступен новый драйвер для беспроводных сетей, поддерживающий некоторые чипсеты Realtek: man:rtw89[4].
gitref:a2d1e07f6451[repository=src] (Спонсировано The FreeBSD Foundation)

Поддержка Realtek 8156/8156B перенесена из man:cdce[4] в man:ure[4] для повышения производительности и надежности.
gitref:630077a84186[repository=src] (Спонсировано The FreeBSD Foundation)

Добавлена поддержка объектов ACPI GPIO _AEI.
gitref:1db6ffb2a482[repository=src] (Спонсировано Amazon)

man:nvme[4] и man:nvmecontrol[8] включены для всех архитектур.
gitref:24687a65dd7f[repository=src], gitref:aba2d7f89dcf[repository=src]
(Спонсировано Chelsio Communications и Netflix)

Версия драйвера man:mpi3mr[4] обновлена до 8.14.0.2.0(gitref:e6d4b221ba7c[repository=src]).

Заголовок MPI для man:mpi3mr[4] обновлен до версии 36.
Это соответствует последней спецификации MPI.
Это включает обновленные структуры, определения полей и константы, необходимые для совместимости с обновленной прошивкой.
(gitref:60cf1576501d[repository=src]).

Драйвер man:mpi3mr[4] теперь входит в GENERIC (gitref:e2b8fb2202c2[repository=src]).

man:rtw88[4]: Влит драйвер rtw88 от Realtek на основе Linux v6.14 (gitref:8ef442451791[repository=src]).
(Спонсировано The FreeBSD Foundation).

man:rtw89[4]: Влит драйвер rtw89 от Realtek на основе Linux v6.14 (gitref:b6e8b845aeab[repository=src]).
(Спонсировано The FreeBSD Foundation).

man:iwmbtfw[4]: Добавлена поддержка адаптеров bluetooth 9260/9560 (gitref:8e62ae9693bd[repository=src]).
Необходимые файлы прошивки уже включены в порт package:comms/iwmbt-firmware[].

Версия драйвера man:ena[4] обновлена до v2.8.1 (gitref:a1685d25601e[repository=src]).
(Спонсировано Amazon, Inc.)

man:bnxt[4]: Включена поддержка NPAR на сетевых картах BCM57504 10/25GbE.
(gitref:54f842ed8897[repository=src]).

man:bnxt[4]: Добавлена поддержка PCI ID 5760X (Thor2).
Добавлены PCI ID для Thor2.
(gitref:45e161020c2d[repository=src]).

man:bnxt[4]: Добавлена поддержка модулей со скоростью 400G (gitref:32fdad17f060[repository=src]).

man:ix[4]: Добавлена поддержка SFP модулей 1000BASE-BX.
Добавлена поддержка BiDi модулей на 1 Гбит/с.
(gitref:89d4096950c4[repository=src]).

man:igc[4]: Исправлено подключение для устройств I226-K и LMVP.
Идентификаторы этих устройств были в списке PCI ID драйвера для подключения, но `igc_set_mac_type()` никогда не была настроена для установки правильного типа mac для этих устройств.
Исправлено путем добавления этих ID в блок switch, чтобы они распознавались драйвером, а не возвращали ошибку.
Это исправляет подключение man:igc[4] для встроенного контроллера I226-K на материнской плате ASRock Z790 PG-ITX/TB4, позволяя его распознать и использовать.
gitref:f034ddd2fa38[repository=src].

Удален старый обработчик sysctl itr из man:em[4].
Эта реализация имела различные ошибки. Преобразование/масштабирование единиц измерения было неправильным, а также она некорректно обрабатывала устройства 82574L или man:igb[4].
С новым кодом AIM ожидается, что большинству пользователей не потребуется вручную настраивать этот параметр.
gitref:edf50670e215[repository=src]
(Спонсировано	BBOX.io).

Добавлена поддержка адаптеров USB-to-Serial от Brainboxes в man:uftdi[4].
(gitref:47db906375b5[repository=src])

Добавлен драйвер man:iwx[4], поддерживающий серию беспроводных сетевых адаптеров M.2 Intel Wi-Fi 6.
gitref:2ad0f7e91582[repository=src] (Спонсировано The FreeBSD Foundation)

Новый драйвер сотового модема поддерживает USB-сетевые устройства, реализующие Mobile Broadband Interface Model (MBIM): man:umb[4].
Сопутствующая утилита man:umbctl[8] используется для отображения или установки параметров интерфейса сотового модема MBIM (4G/LTE).
gitref:0f1bf1c22a0c[repository=src] (Спонсировано The FreeBSD Foundation)

[[drivers-removals]]
=== Устаревшие и удаленные драйверы

Запланировано удаление man:agp[4] в FreeBSD 15.0, и страница Справочника теперь указывает, что он устарел.
gitref:92af7c97e197[repository=src]

Запланировано удаление man:syscons[4] в будущих выпусках, и в страницах Справочника он помечен как устаревший, чтобы уведомить пользователей о необходимости перехода на man:vt[4].
gitref:2bc5b1d60512[repository=src] (Спонсировано The FreeBSD Foundation)

[[storage]]
== Подсистема хранения данных

В этом разделе рассматриваются изменения и дополнения в файловых системах и других подсистемах хранения данных, как локальных, так и сетевых.

[[storage-nfs]]
=== NFS

Сервер man:mountd[8] был изменен для использования man:strunvis[3] при декодировании имен каталогов в файле(ах) man:exports[5].
Это позволяет использовать специальные символы, такие как пробелы, в именах каталогов.
`vis -M` может быть использована для кодирования таких имен каталогов; смотрите man:vis[1].
gitref:2c83f1ada435[repository=src]

Добавлены новые переменные man:sysctl[8] в разделах `kern.rpc.unenc` и `kern.rpc.tls`, которые позволяют администратору NFS-сервера определять, насколько активно используется NFS-over-TLS.
Большое количество неудачных рукопожатий может указывать на проблему в конфигурации NFS.
gitref:b8e137d8d32d[repository=src]

[[storage-ufs]]
=== UFS

Отложенные обновления (soft updates) теперь включены по умолчанию при создании новой файловой системы UFS с помощью man:newfs[8].
gitref:6b2af2d88ffd[repository=src]

[[storage-zfs]]
=== ZFS

[[storage-general]]
=== Общее хранилище

Определена новая опция командной строки `-a` для man:mountd[8].
Когда файловая система экспортировалась с флагом `-alldirs`, экспорт проходил успешно, даже если путь к каталогу не был точкой монтирования файловой системы сервера.
gitref:ead3cd3ef628[repository=src]

Документированы недавние изменения в структуре файловых дескрипторов.
gitref:ca22082c01a7[repository=src]

Разрешено передавать `{NGROUPS_MAX} + 1` групп в man:mountd[8].
`NGROUPS_MAX` — это всего лишь минимальный максимум допустимого количества дополнительных групп.
Фактическое значение во время выполнения может быть больше.
Соответственно, разрешено указывать больше групп (теперь, несколькими коммитами ранее, man:nmount[2] был изменен аналогичным образом).
gitref:ca9614d8f64a[repository=src]
(Спонсировано The FreeBSD Foundation).

[[boot-loader]]
== Изменения в загрузчике

В этом разделе рассматриваются загрузчик, меню загрузки и другие изменения, связанные с загрузкой системы.

man:loader[8] теперь читает локальные конфигурационные файлы, перечисленные в переменной `local_loader_conf_files`, после других конфигурационных файлов, по умолчанию это [.filename]#/boot/loader.conf.local#.
gitref:a25531db0fc2[repository=src]

man:loader[8] теперь можно настроить на чтение определенных конфигурационных файлов на основе переменных planar maker, planar product, system product и uboot m_product из SMBIOS.
На данный момент лучшей документацией является сообщение коммита git,
gitref:3eb3a802a31b[repository=src].

Улучшено определение консоли в man:loader[8] на системах с EFI.
Если переменная ConOut отсутствует, проверяется ConIn.
Если найдено несколько устройств, предпочтение отдается последовательному порту.
gitref:20a6f4779ac6[repository=src] (Спонсировано Netflix)

Поддержка кадрового буфера в man:loader[8] теперь может использовать текстовый видео-драйвер, что приводит к экономии места.
gitref:57ca2848c0aa[repository=src] (Спонсировано Netflix)

Обнаружение ACPI теперь выполняется раньше в man:loader.efi[8] на системах arm64.
Копия [.filename]#loader.efi# на разделе EFI должна быть обновлена на системах arm64, использующих ACPI.
gitref:05cf4dda599a[repository=src] gitref:16c09de80135[repository=src]

Загрузчик LinuxBoot можно использовать для загрузки FreeBSD из Linux на системах aarch64, а также amd64.
gitref:46010641267[repository=src] (Спонсировано Netflix)

В загрузчик BIOS была возвращена поддержка gzip и bzip2, но удалена поддержка графического режима (по умолчанию) для решения проблем с размером.
(Загрузчик EFI не изменился, с поддержкой всех этих функций.)
gitref:4d3b05a8530e[repository=src] (Спонсировано Netflix)

man:loader.efi[8]: Предпочитать точку входа v3 (64-битную) в man:smbios[4].
Быть последовательным с тем, что делается при загрузке без EFI (но с той разницей, что EFI работает в 64-битном режиме на 64-битных платформах, поэтому нет ограничения, чтобы точка входа v3 находилась ниже 4 ГБ).
gitref:807d51be8040[repository=src].
(Спонсировано The FreeBSD Foundation).

man:libsa[3]: Предпочитать точку входа v3 (64-битную) при загрузке без EFI в man:smbios[4].
Когда присутствуют и 32-битная, и 64-битная точки входа, спецификация SMBIOS гласит, что 64-битная точка входа всегда имеет по крайней мере все структуры, на которые ссылается 32-битная точка входа.
Другими словами, 32-битная точка входа предоставлена для совместимости, поэтому предполагается, что у 64-битной версии больше шансов быть заполненной адекватными значениями.
gitref:93af0db0d529[repository=src]
(Спонсировано The FreeBSD Foundation).

man:libsa[3]: Использовать 64-битную точку входа, если таблица ниже 4 ГБ при загрузке без EFI в man:smbios[4].
На amd64 загрузочные блоки и загрузчик без EFI скомпилированы как 32-битные клиенты BTX, поэтому не могут обращаться к адресам за пределами 4 ГБ.
Однако 64-битная точка входа может ссылаться на таблицу структур ниже 4 ГБ, которую можно использовать, если BIOS не предоставляет 32-битную точку входа.
Ситуация аналогична для powerpc64.
gitref:7b0350b376c0[repository=src].
(Спонсировано The FreeBSD Foundation).

Поиск точки входа v3 (64-битной) в первую очередь при загрузке с BIOS в man:smbios[4].
При загрузке с BIOS (т.е. не с EFI) также выполнять поиск 64-битной версии точки входа SMBIOS.
Это позволяет обнаруживать и сообщать правильную версию SMBIOS в BIOS, которые предоставляют только таблицу v3, как это происходит на виртуальных машинах Hetzner.
Для машин, которые предоставляют обе, использовать таблицу v3 в приоритете, последовательно со случаем EFI.
gitref:145ef4af15f0[repository=src].
(Спонсировано The FreeBSD Foundation).

[[network]]
== Сетевая подсистема

В этом разделе описываются изменения, влияющие на работу сети в FreeBSD.

[[network-protocols]]
=== Сетевые протоколы

Множество улучшений сетевого стека, включая улучшения производительности и исправления ошибок для стека man:sctp[4].

Дескрипторы, возвращаемые man:sctp_peeloff[2], теперь наследуют возможности от родительского сокета.
gitref:ae3d7e27abc9[repository=src]
(Спонсировано The FreeBSD Foundation)

[[network-general]]
=== Общие сетевые вопросы

Утилита man:ifconfig[8] больше не разрешает назначать IP-адреса базовым интерфейсам-участникам man:bridge[4].
Для временного обхода этой защитной меры используйте man:sysctl[8] net.link.bridge.member_ifaddrs.
Ожидается, что этот sysctl будет удален в FreeBSD 16.
gitref:b61850c4e6f6[repository=src]

Поддержка ARP (man:arp[4]) для сетей стандарта 802 была восстановлена; она была случайно удалена вместе с поддержкой FDDI.
(Это отличается от стандартной инкапсуляции Ethernet.)
gitref:d776dd5fbd48[repository=src]

Теперь можно собрать ядро с поддержкой IPv6 (INET6) без поддержки IPv4 (INET).
gitref:6df9fa1c6b83[repository=src] и другие

Модуль netgraph man:ng_ipfw[4] больше не обрезает cookie до 16 бит, позволяя использовать полные 32 бита.
gitref:dadf64c5586e[repository=src]

Добавлена поддержка AIM (Adaptive Interrupt Moderation) в драйвер man:igc[4].
gitref:472a0ccf847a[repository=src] (Спонсировано Rubicon Communications, LLC ("Netgate") и BBOX.io)

Эта функция также была добавлена в драйверы man:lem[4], man:em[4] и man:igb[4]. Считается, что серьезный регресс производительности UDP, появившийся в FreeBSD 12.0, включая NFS поверх UDP, исправлен этим изменением.
gitref:49f12d5b38f6[repository=src] (Спонсировано Rubicon Communications, LLC ("Netgate") и BBOX.io)

Обновлен man:ip6addrctl[8] для присоединения и запуска в клетке (jail).
Это упростит управление политиками выбора адресов для vnet клетки, особенно для облегченных контейнеров OCI или slim клетки.
gitref:b709f7b38cc4[repository=src]

Преобразование `PF_DEFAULT_TO_DROP` в настраиваемую через загрузчик vnet-переменную 'net.pf.default_to_drop' для man:pf[4].
gitref:7f7ef494f11d[repository=src] ввел опцию времени компиляции `PF_DEFAULT_TO_DROP`, чтобы сделать правило по умолчанию для man:pf[4] отбрасывающим.
В то время как это изменение предоставляет настраиваемую через загрузчик vnet-переменную 'net.pf.default_to_drop', чтобы пользователи могли изменить правило по умолчанию без перекомпиляции модуля man:pf[4].
gitref:3965be101c43[repository=src]

[[wireless-networking]]
=== Беспроводные сети

Слой совместимости LinuxKPI 802.11 man:linuxkpi_wlan[4] получил поддержку протокола Galois/Counter Mode (GCMP) из man:wlan_gcmp[4]. (Спонсировано The FreeBSD Foundation)

Вслед за другими драйверами, прошивка man:iwlwififw[4] была удалена из базовой системы в пользу решения на основе портов и поддержки man:fwget[8]. В случае обновления с более ранних выпусков пользователи должны заранее установить пакеты с прошивками. (Спонсировано The FreeBSD Foundation)

Беспроводной драйвер man:iwlwifi[4] поддерживает 802.11ac (VHT) для некоторого оборудования Intel Wi-Fi 5 и всего оборудования Intel Wi-Fi 6 и Wi-Fi 7. (Спонсировано The FreeBSD Foundation)
Беспроводной драйвер man:iwx[4] поддерживает 802.11ac (VHT) для оборудования Intel Wi-Fi 6. (Спонсировано The FreeBSD Foundation)
Беспроводной драйвер man:rtwn[4] поддерживает 802.11ac (VHT) для чипсетов RTL8812A и RTL8821A.

[[hardware]]
== Поддержка оборудования

В этом разделе рассматривается общая поддержка оборудования для физических машин, гипервизоров и сред виртуализации, а также изменения и обновления оборудования, которые не вошли в другие разделы данного документа.

Пожалуйста, ознакомьтесь с link:https://www.freebsd.org/releases/{localRel}R/hardware[списком оборудования], поддерживаемого {releaseCurrent}, а также со link:https://www.freebsd.org/platforms/[страницей платформ] для получения полного списка поддерживаемых архитектур ЦП.

[[hardware-virtualization]]
=== Поддержка виртуализации

Добавлено обнаружение гипервизора NVMM.
gitref:34f40baca641[repository=src]

Сервер VNC в man:bhyve[8] теперь показывает правильные цвета при использовании клиента package:www/novnc[].
gitref:f9e09dc5b1d5[repository=src]

В среде Hyper-V сброс TLB (Translation Lookaside Buffer) теперь выполняется с использованием гипервызовов вместо IPI (Inter-Processor Interrupt), что обеспечивает до 40% улучшения производительности TLB.
gitref:7ece5993b787[repository=src] (Спонсировано Microsoft)

Несколько исправлений ошибок и изменений конфигурации в совокупности позволяют осуществлять горячее подключение устройств на экземплярах EC2 как x86, так и arm64 ("Graviton").
Пользователям, обновляющим экземпляры EC2 с более ранних выпусков FreeBSD, следует установить `hw.pci.intx_reroute=0` и `debug.acpi.quirks="56"` в `/boot/loader.conf`.

[[linuxulator]]
=== Совместимость с бинарными файлами Linux

Флаг `AT_NO_AUTOMOUNT` теперь игнорируется для всех вариантов stat() в Linuxulator (поскольку поведение, задаваемое флагом, уже соответствует поведению FreeBSD), что улучшает совместимость с Linux-приложениями.
gitref:99d3ce80ba07[repository=src]
(Спонсировано The FreeBSD Foundation)

[[multimedia]]
== Мультимедиа

Множество улучшений аудио-стека, включая поддержку горячей замены в man:mixer[8] и добавление man:mididump[1].
gitref:cf9d2fb18433[repository=src] (Спонсировано The FreeBSD Foundation)
gitref:7224e9f2d4af[repository=src] (Спонсировано The FreeBSD Foundation)

[[documentation]]
== Документация

В этом разделе рассматриваются изменения на страницах Справочника (man:man[1]) и другой документации, поставляемой в составе базовой системы.

[[man-pages]]
=== Страницы Справочника

Новая страница Справочника man:networking[7] предоставляет краткое руководство по подключению системы к сетям, включая Wi-Fi, и ссылки на другие страницы Справочника и Руководство FreeBSD.
gitref:39f92a4c4c49[repository=src]

Ссылаться на man:graid[8] и man:zfs[8] вместо man:gvinum[8] в man:ccdconfig[8]).
(gitref:55cb3a33d920[repository=src]).

man:ps[1]: Документировано изменение в поведении для `-a`/`-A`.
Описано практическое следствие изменения gitref:93a94ce731a8[repository=src]: указание `-a`/`-A` приводит к выводу всех процессов независимо от наличия других опций выбора процессов (за исключением `-x`/`-X`, которые управляют фильтром).
gitref:eed005b57895[repository=src].
(Спонсировано The FreeBSD Foundation).

man:ps[1]: Изменение в поведении для опции `-U`.
gitref:4e4739dd0745[repository=src]
(Спонсировано The FreeBSD Foundation).

man:ps[1]: Изменение способа сопоставления процессов текущего пользователя.
gitref:7219648f60d1[repository=src].
(Спонсировано The FreeBSD Foundation).

man:ps[1]: Сопоставление процессов текущего пользователя с использованием эффективного UID.
Это приводит man:ps[1] FreeBSD в соответствие с POSIX.
gitref:1e8dc267ca91[repository=src].
(Спонсировано The FreeBSD Foundation).

man:mac_do[4]: Изменение синтаксиса правил; Предоставлены подсказки и указатели.
gitref:0c3357dfa18f[repository=src].
(Спонсировано The FreeBSD Foundation).

man:firewire[4]: Добавлено уведомление об устаревании.
Первоначально это обсуждалось как часть планирования FreeBSD 15, но не было реализовано вовремя.
Уведомление об устаревании добавлено сейчас с ожиданием, что оно будет удалено до выхода FreeBSD 16.
gitref:fc889167c319[repository=src].
(Спонсировано The FreeBSD Foundation).

Контроллеры Ethernet-коммутаторов man:mtkswitch[4], man:ip17x[4], man:ar40xx[4] и man:e6000sw[4] получили начальные страницы Справочника.

man:mount[8] получил пример перемонтирования всех файловых систем в режим чтения/записи в однопользовательском режиме.

Описания на страницах Справочника для модулей lua man:loader[8] были переформулированы для оптимизации результатов поиска man:apropos[1].

В руководство по стилю страниц Справочника, man:style.mdoc[5], добавлен раздел для перечисления поддерживаемого оборудования.
При указании таким образом поддерживаемое оборудование будет перечислено в link:https://www.freebsd.org/releases/{localRel}R/hardware[заметках о поддерживаемом оборудовании].
В этом выпуске этот раздел был добавлен или переработан во многих страницах Справочника.

Проделана большая работа по добавлению man:sysctl[8] и переменных окружения в Справочник.
Попробуйте искать их с помощью `apropos Va=here.is.the.sysctl` или `apropos Ev=here_is_the_environment_variable`.

Раздел man:intro[5] Справочника по форматам файлов был пересмотрен с включением улучшений из OpenBSD.

[[ports]]
== Коллекция портов и инфраструктура пакетов

В этом разделе рассматриваются изменения в Коллекции портов FreeBSD, инфраструктуре пакетов, а также в инструментах обслуживания и установки пакетов.

Новый репозиторий `FreeBSD-kmods` включен в конфигурационный файл man:pkg[8] по умолчанию `/etc/pkg/FreeBSD.conf`.
Этот репозиторий содержит модули ядра, скомпилированные специально для {releaseCurrent}, а не для ветки {releaseBranch}.
Установка модулей ядра из этого репозитория позволяет драйверам с нестабильными интерфейсами ядра, в частности графическим драйверам, работать даже тогда, когда основной репозиторий {releaseBranch} содержит пакеты, собранные на предыдущем выпуске. (gitref:a47542f71511[repository=src]).

Репозитории `FreeBSD` и `FreeBSD-kmods`, определенные в `/etc/pkg/FreeBSD.conf`, были переименованы в `FreeBSD-ports` и `FreeBSD-ports-kmods` соответственно.
Пользователям, которые переопределяют их в `/usr/local/etc/pkg/repos`, необходимо скорректировать свою конфигурацию в соответствии с новыми именами.

[[Installer]]
=== Установщик

Установщик FreeBSD, man:bsdinstall[8], теперь поддерживает загрузку и установку пакетов с прошивками после завершения установки базовой системы FreeBSD.
gitref:03c07bdc8b31[repository=src] (Спонсировано The FreeBSD Foundation)

[[ports-packages]]
=== Изменения в упаковке

Пакет package:net/wifi-firmware-kmod@release[] был добавлен в набор пакетов на DVD для предоставления необходимых прошивок для Wi-Fi драйверов.
gitref:8c6df7ead19c[repository=src] (Спонсировано The FreeBSD Foundation)

[[future-releases]]
== Общие замечания относительно будущих выпусков FreeBSD

//
// The FreeBSD Russian Documentation Project
//
// Original EN revision (20.11.2025): 525c0942da4e1a45873128f5a1921d4130825c67
//
