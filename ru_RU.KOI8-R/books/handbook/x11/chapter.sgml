<!--
     The FreeBSD Russian Documentation Project

     $FreeBSD$
     $FreeBSDru: frdp/doc/ru_RU.KOI8-R/books/handbook/x11/chapter.sgml,v 1.68 2008/05/13 13:46:29 den Exp $

     Original revision: r34751
-->

<chapter id="x11">
  <chapterinfo>
    <authorgroup>
      <author>
	<firstname>Ken</firstname>
	<surname>Tom</surname>
	<contrib>Обновили для сервера X.Org X11 </contrib>
      </author>
      <author>
	<firstname>Marc</firstname>
	<surname>Fonvieille</surname>
      </author>
    </authorgroup>
    <authorgroup>
      <author>
	<firstname>Андрей</firstname>
	<surname>Захватов</surname>
	<contrib>Перевод на русский язык: </contrib>
      </author>
    </authorgroup>
  </chapterinfo>

  <title>X Window System</title>

  <sect1 id="x11-synopsis">
    <title>Обзор</title>

    <para>FreeBSD использует X11 для того, чтобы дать пользователям мощный
      графический интерфейс.  X11 является свободно доступной версией
      X Window System, реализованной в <application>&xorg;</application> и
      <application>&xfree86;</application> (а также других программных
      пакетах, здесь не рассматриваемых).  В версиях &os; до и включая
      &os;&nbsp;5.2.1-RELEASE сервером X11
      по умолчанию был <application>&xfree86;</application>, выпускаемый
      The &xfree86; Project, Inc.  Начиная с &os;&nbsp;5.3-RELEASE,
      официальной версией X11 по умолчанию стал
      <application>&xorg;</application>, разработанный
      X.Org Foundation под лицензией, очень похожей на ту, которая используется
      &os;.  Под &os; существуют также коммерческие X серверы.</para>

    <para>Эта глава посвящена установке и настройке
      X11 в системе FreeBSD, с акцентом на релиз
      <application>&xorg;</application> &xorg.version;.
      За информацией о настройке <application>&xfree86;</application>
      (в более старых релизах &os; <application>&xfree86;</application>
      был реализацией X11 по умолчанию), или более старых релизов
      <application>&xorg;</application>, всегда можно обратиться к старым
      версиям Руководства &os; по адресу <ulink
      url="http://docs.FreeBSD.org/doc/"></ulink>.</para>

    <para>За дополнительной информацией по видео оборудованию, поддерживаемому
      X11, обратитесь к веб сайту
      <ulink url="http://www.x.org/">&xorg;</ulink>.</para>

    <para>После чтения этой главы вы будете знать:</para>

    <itemizedlist>
      <listitem>
	<para>Как установить и настроить X11.</para>
      </listitem>

      <listitem>
	<para>О различных компонентах X Window System и их
	  взаимодействии.</para>
      </listitem>

      <listitem>
	<para>Как установить и использовать различные оконные менеджеры.</para>
      </listitem>

      <listitem>
	<para>Как использовать шрифты &truetype; в X11.</para>
      </listitem>

      <listitem>
	<para>Как настроить вашу систему на графический интерфейс входа
	  (<application>XDM</application>).</para>
      </listitem>
    </itemizedlist>

    <para>Перед чтением этой главы вам потребуется:</para>

    <itemizedlist>
      <listitem>
	<para>Узнать, как устанавливать дополнительное программное обеспечение
	  сторонних разработчиков (<xref linkend="ports">).</para>
      </listitem>
    </itemizedlist>
  </sect1>

  <sect1 id="x-understanding">
    <title>Основы X</title>

    <para>Первое знакомство с X может оказаться чем-то вроде шока для тех, кто
      работал с другими графическими системами, такими, как &microsoft.windows;
      или &macos;.</para>

    <para>Хотя нет необходимости вникать во все детали различных компонентов X и
      их взаимодействия, некоторые базовые знания делают возможным
      использование сильных сторон X.</para>

    <sect2>
      <title>Почему именно X?</title>

      <para>X не является первой оконной системой для &unix;, но она
	самая популярная из них.  До работы над X команда ее разработчиков трудилась
	над другой оконной системой.  Та система называлась <quote>W</quote>
	(от <quote>Window</quote>).  X была просто следующей
	буквой в романском алфавите.</para>

      <para>X можно называть <quote>X</quote>, <quote>X Window System</quote>,
	<quote>X11</quote> и множеством других терминов.  Факт использования названия
	<quote>X Windows</quote> для X11 может задеть интересы некоторых
	людей; дополнительную информацию по этому поводу можно найти на
	странице справочной системы &man.X.7;.</para>
    </sect2>

    <sect2>
      <title>Модель клиент/сервер в X</title>

      <para>X изначально разрабатывалась, чтобы быть системой, ориентированной
	на работу в сети с использованием модели
	<quote>клиент-сервер</quote>.</para>

      <para>В модели работы X <quote>X-сервер</quote> работает на компьютере с
	клавиатурой, монитором и мышью.  Область ответственности сервера
	включает управление
	дисплеем, обработку ввода с клавиатуры, мыши и других устройств
	ввода или вывода (например, <quote>планшет</quote> может быть
	использован в качестве устройства ввода, а видеопроектор в качестве
	альтернативного устройства вывода).  Каждое
	X-приложение (например, <application>XTerm</application> или
	<application>&netscape;</application>) является
	<quote>клиентом</quote>.  Клиент посылает сообщения серверу, такие,
	как <quote>Пожалуйста, нарисуй окно со следующими координатами</quote>,
	а сервер посылает в ответ сообщения типа <quote>Пользователь только что
	щёлкнул мышью на кнопке OK</quote>.</para>

      <para>В случае
	использования дома или в офисе, сервер и клиенты X как правило будут работать на
	том же самом компьютере.  Однако реально возможно запускать X-сервер
	на менее мощном настольном компьютере, а приложения X (клиенты) на,
	скажем, мощной и дорогой машине, обслуживающей целый офис.  В этом
	сценарии X-клиент и сервер общаются через сеть.</para>

      <para>Некоторых это вводит в заблуждение, потому что терминология X
	в точности обратна тому, что они ожидают.  Они полагают, что
	<quote>X-сервер</quote> будет большой мощной машиной, стоящей на полу,
	а <quote>X-клиентом</quote> является машина, стоящая на их
	столах.</para>

      <para>Важно помнить, что X-сервером является машина с монитором и
	клавиатурой, а X-клиенты являются программами, выводящими окна.</para>

      <para>В протоколе нет ничего, что заставляет машины клиента и сервера
	работать под управлением одной и той же операционной системы, или
	даже быть одним и тем же типом компьютера.  Определённо возможно
	запускать X-сервер в &microsoft.windows; или &macos; от Apple, и есть
	множество свободно распространяемых и коммерческих приложений, которые
	это реализуют.</para>
    </sect2>

    <sect2>
      <title>Оконный менеджер</title>

      <para>Философия построения X очень похожа на философию построения &unix;,
	<quote>инструменты, не политика</quote>.  Это значит, что X не пытаются
	диктовать то, как должна быть выполнена работа.  Вместо этого
	пользователю предоставляются инструменты, а за пользователем остается
	принятие решения о том, как использовать эти инструменты.</para>

      <para>Этот подход расширен в X тем, что не задается, как окна должны
	выглядеть на экране, как их двигать мышью, какие комбинации клавиш
	должны использоваться для переключения между окнами (то есть
	<keycombo action="simul">
	  <keycap>Alt</keycap>
	  <keycap>Tab</keycap>
	</keycombo>, в случае использования &microsoft.windows;), как должны
	выглядеть заголовки окон, должны ли в них быть кнопки для закрытия, и
	прочее.</para>

      <para>Вместо этого X делегирует ответственность за это приложению,
	которое называется <quote>Window Manager</quote> (Менеджер Окон).  Есть
	десятки оконных менеджеров для X: <application>AfterStep</application>,
	<application>Blackbox</application>, <application>ctwm</application>,
	<application>Enlightenment</application>,
	<application>fvwm</application>, <application>Sawfish</application>,
	<application>twm</application>,
	<application>WindowMaker</application> и другие.  Каждый из этих
	оконных менеджеров предоставляет различные внешние виды и удобства;
	некоторые из них поддерживают <quote>виртуальные рабочие столы</quote>;
	некоторые из них позволяют изменять назначения комбинаций
	клавиш, используемых для управления рабочим столом; в некоторых есть
	кнопка <quote>Start</quote> или нечто подобное; некоторые поддерживают
	<quote>темы</quote>, позволяя изменять внешний вид, поменяв тему.
	Эти оконные менеджеры, а также множество
	других, находятся в категории <filename>x11-wm</filename> коллекции
	портов.</para>

      <para>Кроме того, оболочки <application>KDE</application> и
	<application>GNOME</application> имеют собственные оконные
	менеджеры, которые интегрированы в оболочку.</para>

      <para>Каждый оконный менеджер также имеет собственный механизм настройки;
	некоторые предполагают наличие вручную созданного конфигурационного
	файла; некоторые предоставляют графические инструменты для выполнения
	большинства работ по настройке; по крайней мере один
	(<application>Sawfish</application>) имеет конфигурационный файл,
	написанный на диалекте языка Lisp.</para>

      <note>
	<title>Политика фокусирования</title>

	<para>Другой особенностью, за которую отвечает оконный менеджер,
	  является <quote>политика фокусирования</quote> мыши.  Каждая оконная
	  система должна иметь некоторый способ выбора окна для активации
	  получения нажатий клавиш, а также визуальную индикацию того, какое
	  окно активно.</para>

	<para>Широко известная политика фокусировки называется
	  <quote>щелчок-для-фокуса</quote> (<quote>click-to-focus</quote>).
	  Эта модель используется в
	  &microsoft.windows;, когда окно становится активным после получения
	  щелчка мыши.</para>

	<para>X не поддерживает никакой конкретной политики фокусирования.
	  Вместо этого менеджер окон управляет тем, какое окно владеет фокусом
	  в каждый конкретный момент времени.  Различные оконные менеджеры
	  поддерживают разные методы фокусирования.  Все они поддерживают метод
	  щелчка для фокусирования, и большинство из них поддерживают некоторые
	  другие методы.</para>

	<para>Самыми популярными политики фокусирования являются:</para>

	<variablelist>
	  <varlistentry>
	    <term>фокус следует за мышью (focus-follows-mouse)</term>

	    <listitem>
	      <para>Фокусом владеет то окно, что находится под
		указателем мыши.  Это не обязательно будет окно, которое
		находится поверх всех остальных.  Фокус меняется при
		указании на другое окно, при этом также нет нужды щёлкать на
		нём.</para>
	    </listitem>
	  </varlistentry>

	  <varlistentry>
	    <term>нечеткий фокус (sloppy-focus)</term>

	    <listitem>
	      <para>С политикой focus-follows-mouse если мышь помещается
		поверх корневого окна (или заднего фона), то никакое окно
		фокус не получает, а нажатия клавиш просто пропадают.
		При использовании политики нечёткого фокуса он меняется
		только когда курсор попадает на новое окно, но не когда
		уходит с текущего окна.</para>
	    </listitem>
	  </varlistentry>

	  <varlistentry>
	    <term>щелчок для выбора фокуса (click-to-focus)</term>

	    <listitem>
	      <para>Активное окно выбирается щелчком мыши.  Затем окно
		может быть <quote>поднято</quote> и появится поверх всех
		других окон.  Все нажатия клавиш теперь будут направляться
		в это окно, даже если курсор переместится к другому.</para>
	    </listitem>
	  </varlistentry>
	</variablelist>

	<para>Многие оконные менеджеры поддерживают и другие политики, а также
	  вариации перечисленных.  Обязательно обращайтесь к документации по
	  оконному менеджеру.</para>
      </note>
    </sect2>

    <sect2>
      <title>Виджеты</title>

      <para>Подход X, заключающийся в предоставлении инструментов, а не
	политики, распространяется и на виджеты, которые располагаются на
	экране в каждом приложении.</para>

      <para><quote>Виджет</quote> (widget) является термином для всего в
	пользовательском интерфейсе, на чём можно
	щёлкать или каким-то образом управлять; кнопки, зависимые (radio
	buttons) и независимые (check boxes) опции, иконки, списки и так
	далее.  В &microsoft.windows; это называется <quote>элементами
	управления</quote> (<quote>controls</quote>).</para>

      <para>&microsoft.windows; и &macos; от Apple имеют очень жёсткую
	политику относительно виджетов.  Предполагается, что разрабатываемые
	приложения обязательно должны иметь похожий внешний вид.  Что касается
	X, то было решено, что не нужно требовать обязательного использования
	какого-то определённого графического стиля или набора виджетов.</para>

      <para>В результате не стоит ожидать от X-приложений
	похожести во внешнем виде.  Существует несколько популярных наборов
	виджетов и их разновидностей, включая оригинальный набор виджетов
	Athena от MIT, <application>&motif;</application> (по
	образу которого был разработан набор виджетов в &microsoft.windows;,
	все эти скошенные углы и три разновидности серого цвета),
	<application>OpenLook</application> и другие.</para>

      <para>В большинстве появляющихся в настоящее время приложений для X будет
	использоваться современно выглядящий набор виджетов, либо Qt,
	используемый в <application>KDE</application>, либо
	GTK+, используемый проектом
	<application>GNOME</application>.  В этом отношении наблюдается
	унификация внешнего вида рабочего стола в &unix;, что определённо
	облегчает жизнь начинающему пользователю.</para>
    </sect2>
  </sect1>

  <sect1 id="x-install">
    <title>Установка X11</title>

    <para>Версией X11 по умолчанию для &os; является
      <application>&xorg;</application>.  <application>&xorg;</application>
      это сервер X дистрибутива открытой реализации X Window System,
      выпущенной X.Org Foundation.  <application>&xorg;</application> основан на коде
      <application>&xfree86&nbsp;4.4RC2</application> и X11R6.6.
      Версия <application>&xorg;</application>, доступная на данный момент
      из коллекции портов &os;: &xorg.version;.</para>

    <para>Для сборки и установки <application>&xorg;</application> из
      Коллекции портов, выполните:</para>

    <screen>&prompt.root; <userinput>cd /usr/ports/x11/xorg</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>

    <note>
      <para>Перед сборкой полной версии <application>&xorg;</application>
	удостоверьтесь в наличии хотя бы 4&nbsp;GB свободного места.</para>
    </note>

    <para>Кроме того, X11 может быть установлен непосредственно из
      пакетов.  Бинарные пакеты, устанавливаемые &man.pkg.add.1;,
      доступны и для X11.  Когда &man.pkg.add.1; используется для удаленной
      загрузки пакетов, номер версии пакета необходимо удалить.
      &man.pkg.add.1; автоматически установит последнюю версию
      приложения.</para>

    <para>Таким образом, для загрузки и установки пакета
      <application>&xorg;</application>, просто наберите:</para>

    <screen>&prompt.root; <userinput>pkg_add -r xorg</userinput></screen>

    <note>
      <para>В примерах выше будет установлен полный дистрибутив
	X11, включая серверы, клиенты, шрифты
	и так далее.  Также доступны и отдельные пакеты и порты для
	различных частей X11.</para>
    </note>

    <para>В оставшейся части главы будет рассказано о том, как сконфигурировать
      X11 и настроить рабочее окружение.</para>

  <sect1 id="x-config">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Christopher</firstname>
	  <surname>Shumway</surname>
	  <contrib>Текст предоставил </contrib>
	  <!-- Июль 2001 -->
	</author>
      </authorgroup>
    </sect1info>

    <title>Конфигурация X11</title>

    <indexterm><primary>&xorg;</primary></indexterm>
    <indexterm><primary>X11</primary></indexterm>

    <sect2>
      <title>Перед тем, как начать</title>

      <para>Перед настройкой X11
	необходима следующая информация о конфигурируемой системе:</para>

      <itemizedlist>
	<listitem>
	  <para>Характеристики монитора</para>
	</listitem>

	<listitem>
	  <para>Набор микросхем, используемый в видеоадаптере</para>
	</listitem>

	<listitem>
	  <para>Объём видеопамяти</para>
	</listitem>
      </itemizedlist>

      <indexterm>
	<primary>частота горизонтальной развертки</primary>
      </indexterm>

      <indexterm><primary>частота вертикальной развертки</primary></indexterm>

      <para>Характеристики монитора используются в
	X11 для определения рабочего
	разрешения и частоты.  Эти характеристики обычно могут быть получены из
	документации, которая прилагается к монитору или с сайта производителя.
	Тут нужны два диапазона значений, для частоты горизонтальной развёртки
	и для частоты вертикальной синхронизации.</para>

      <para>Набор микросхем графического адаптера определяет, модуль какого
	драйвера использует X11 для работы с
	графическим оборудованием.
	Для большинства типов микросхем это может быть определено
	автоматически, но все же его полезно знать на тот случай, когда
	автоматическое определение не работает правильно.</para>

      <para>Объём видеопамяти графического адаптера определяет разрешение и
	глубину цвета, с которым может работать система.  Это важно, чтобы
	пользователь знал ограничения системы.</para>
    </sect2>

    <sect2>
      <title>Конфигурирование X11</title>

      <para>Начиная с версии 7.3, <application>&xorg;</application>
	зачастую может работать без какого-либо файла настройки,
	для его запуска достаточно просто набрать:</para>

      <screen>&prompt.user; <userinput>startx</userinput></screen>

      <para>Начиная с версии 7.4, <application>&xorg;</application>
	может использовать <acronym>HAL</acronym> для автоматического поиска клавиатуры и мыши.
	Порты <filename role="package">sysutils/hal</filename> и
	<filename role="package">devel/dbus</filename> будут инсталлированы как 
	зависимости <filename role="package">x11/xorg</filename>, но для
	их включения необходимо иметь следующие записи в 
	<filename>/etc/rc.conf</filename> file:</para>

      <programlisting>hald_enable="YES"
dbus_enable="YES"</programlisting>

      <para>Эти сервисы должны быть запущены (вручную или при 
	загрузки системы) до последующей загрузки <application>&xorg;</application>
	конфигурации.</para>

     <para>Автоматическая конфигурация не всегда может сработать на некотором оборудовании,
	либо создать не совсем ту настройку, которая желаема. В этих случаях, необходима ручная 
	настройка конфигурации.</para>

     <note>
	<para>Такие оконные менеджеры, как
	  <application>GNOME</application>,
	  <application>KDE</application> или
	  <application>Xfce</application> имеют собственные утилиты, позволяющие пользователю
	  легко устанавливать такие параметры, как разрешение экрана.
	  Поэтому, если конфигурация по-умолчанию не подходящая и вы 
	  планируете инсталлировать эти оконные менеджеры, просто можете
	  продолжить настройку рабочей среды, используя их собственные утилиты 
	  для установок параметров экрана.</para>
      </note>      

      <para>Процесс настройки X11 является
	многошаговым.  Первый шаг заключается в построении начального
	конфигурационного файла. 
	Работая с правами суперпользователя, просто 
	запустите:</para>

<screen>&prompt.root; <userinput>Xorg -configure</userinput></screen>

      <para>При этом в каталоге <filename>/root</filename> будет создан скелет
	конфигурационного файла X11 под именем
	<filename>xorg.conf.new</filename> (там, куда после &man.su.1; или
	непосредственного входа будет указывать переменная
	<envar>$HOME</envar>).  Программа
	X11 сделает попытку распознать графическое оборудование системы и
	запишет конфигурационный файл, загружающий правильные драйверы для
	обнаруженного оборудования в системе.</para>

      <para>Следующим шагом является тестирование существующей конфигурации для
	проверки того, что <application>&xorg;</application> может работать
	с графическим оборудованием в настраиваемой системе.  Для этого
	выполните:</para>

      <screen>&prompt.root; <userinput>Xorg -config xorg.conf.new</userinput></screen>

      <para>Начиная с <application>&xorg;</application> 7.4 и выше,
	это тестирование покажет лишь черный экран, что делает диагностику
	не совсем полноценным. Старое поведение будет доступно
	при использовании опции <option>retro</option></para>

      <screen>&prompt.root; <userinput>Xorg -config xorg.conf.new -retro</userinput></screen>

      <para>Если появилась чёрно-белая сетка и курсор мыши в виде
	X, то настройка была выполнена успешно.  Для завершения тестирования
	просто нажмите одновременно
	<keycombo action="simul">
	  <keycap>Ctrl</keycap>
	  <keycap>Alt</keycap>
	  <keycap>Backspace</keycap>
	</keycombo>.</para>

     <note>
	<para>Данная комбинация включена по-умолчанию до
	  <application>&xorg;</application> версии 7.3.  Для включения этого в
	  версии 7.4 и выше, вы должны ввести следующую 
	  команду в любом эмуляторе X терминала:</para>

	<screen>&prompt.user; <userinput>setxkbmap -option terminate:ctrl_alt_bksp</userinput></screen>

	<para>или создать конфигурационный файл клавиатуры для 
	  <application>hald</application> называемый
	  <filename>x11-input.fdi</filename> и сохранить его в 
	  <filename
	  class="directory">/usr/local/etc/hal/fdi/policy</filename>
	  директории.  Данный файл должен содержать следующие
	  строчки:</para>

	<programlisting>&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;deviceinfo version="0.2"&gt;
  &lt;device&gt;
    &lt;match key="info.capabilities" contains="input.keyboard"&gt;
	  &lt;merge key="input.x11_options.XkbOptions" type="string"&gt;terminate:ctrl_alt_bksp&lt;/merge&gt;
    &lt;/match&gt;
  &lt;/device&gt;
&lt;/deviceinfo&gt;</programlisting>

	<para>Вам может потребоваться перезагрузка системы для вступления параметров
	  <application>hald</application> в силу.</para>
      </note>

      
	<para>Если мышь не работает, ее необходимо настроить.
	  Обратитесь к <xref linkend="mouse"> в главе об установке
	  &os;. Дополнительно, начиная с версии 
	  7.4, секция <literal>InputDevice</literal> в 
	  <filename>xorg.conf</filename> игнорируется в пользу 
          автоматического поиска устройств. Для возвращения старого поведения, добавьте
	  следующие строчки в секции <literal>ServerLayout</literal> или
	  <literal>ServerFlags</literal>:</para>
      
	  <programlisting>Option "AutoAddDevices" "false"</programlisting>

	  <para>Устройства ввода могут конфигурированы затем как в предыдущих версиях,
             вместе с другими необходимыми опциями (такими, как переключение раскладок клавиатуры
	    например).</para>

      <note>
	<para>Как ранее уже сообщалось, начиная с версии 7.4, по-умолчанию,
	  <application>hald</application> демон будет пытаться распознать
	  вашу клавиатуру автоматически. Есть возможность, что раскладка вашей 
	   клавиатуры или ее модель будут определены некорректно. Такие оконные
	  менеджеры как <application>GNOME</application>,
	  <application>KDE</application> или
	  <application>Xfce</application> содержат свои инструменты для конфигурирования 
          клавиатур. Тем не менее, можно установить параметры клавиатуры	  
          непосредственно с помощью утилиты &man.setxkbmap.1; или через
	  <application>hald</application>конфигурационные правила.</para>

	<para>Например, если вы хотите использовать клавиши PC 102 клавиатуры,
          идущая с французской раскладкой, мы должны создать конфигурационный файл
          клавиатуры для <application>hald</application>
	  называемый <filename>x11-input.fdi</filename> и сохранить в 
	  <filename
	  class="directory">/usr/local/etc/hal/fdi/policy</filename>
	  директории. Этот файл должен содержать следующие
          строчки:</para>

	<programlisting>&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;deviceinfo version="0.2"&gt;
  &lt;device&gt;
    &lt;match key="info.capabilities" contains="input.keyboard"&gt;
	  &lt;merge key="input.x11_options.XkbModel" type="string"&gt;pc102&lt;/merge&gt;
	  &lt;merge key="input.x11_options.XkbLayout" type="string"&gt;fr&lt;/merge&gt;
    &lt;/match&gt;
  &lt;/device&gt;
&lt;/deviceinfo&gt;</programlisting>

	<para>Если этот файл уже существует, просто скопируйте и добавьте эти строчки в 
            файл данный файл.</para>

	<para>Вы должны будете перезагрузить систему, чтобы заставить
	  <application>hald</application> применить настройки.</para>

	<para>Есть возможность проделать ту же конфигурацию из X терминала 
          или скрипт следующей командой:</para>

	<screen>&prompt.user; <userinput>setxkbmap -model pc102 -layout fr</userinput></screen>

	<para>Файл
	  <filename>/usr/local/share/X11/xkb/rules/base.lst</filename>
	  содержит список различных клавиатур, доступные опции 
	  и раскладки.</para>
      </note>

      <indexterm><primary>Тонкая настройка X11</primary></indexterm>

      <para>Теперь выполните тонкую настройку в файле
	<filename>xorg.conf.new</filename> по своему вкусу.
	Откройте файл в текстовом редакторе, таком, как	&man.emacs.1; или
	&man.ee.1;.  Сначала задайте частоты для
	монитора.  Они обычно обозначаются как частоты горизонтальной и
	вертикальной синхронизации.  Эти значения добавляются в файл
	<filename>xorg.conf.new</filename> в
	раздел <literal>"Monitor"</literal>:</para>

      <programlisting>Section "Monitor"
        Identifier   "Monitor0"
        VendorName   "Monitor Vendor"
        ModelName    "Monitor Model"
        HorizSync    30-107
        VertRefresh  48-120
EndSection</programlisting>

      <para>Ключевых слов <literal>HorizSync</literal> и
	<literal>VertRefresh</literal> может и не оказаться в
	файле конфигурации.  Если их нет, то они должны быть добавлены, с
	указанием корректных значений горизонтальной частоты синхронизации
	после ключевого слова <literal>HorizSync</literal> и вертикальной
	частоты синхронизации после ключевого слова
	<literal>VertRefresh</literal>.  В примере выше были введены частоты
	монитора настраиваемой системы.</para>

      <para>X позволяет использовать возможности технологии DPMS (Energy Star)
	с поддерживающими её мониторами.  Программа &man.xset.1; управляет
	временными задержками и может явно задавать режимы ожидания, останова
	и выключения.  Если вы хотите включить использование возможностей
	DPMS вашего монитора, вы должны добавить следующую строку в раздел,
	описывающий монитор:</para>

      <programlisting>Option       "DPMS"</programlisting>

      <indexterm>
	<primary><filename>xorg.conf</filename></primary>
      </indexterm>

      <para>Пока файл конфигурации <filename>xorg.conf.new</filename>
	открыт
	в редакторе, выберите желаемые разрешение и глубину цвета, которые
	будут использоваться по умолчанию.  Они задаются в разделе
	<literal>"Screen"</literal>:</para>

      <programlisting>Section "Screen"
        Identifier "Screen0"
        Device     "Card0"
        Monitor    "Monitor0"
        DefaultDepth 24
        SubSection "Display"
                Viewport  0 0
                Depth     24
                Modes     "1024x768"
        EndSubSection
EndSection</programlisting>

      <para>Ключевое слово <literal>DefaultDepth</literal> описывает
	глубину цвета, с которой будет работа по умолчанию.  Это значение
	может быть переопределено при помощи параметра командной строки
	<option>-depth</option> для &man.Xorg.1;.
	Ключевое слово
	<literal>Modes</literal> описывает разрешение, с которым нужно
	работать при данной глубине цвета.  Заметьте, что поддерживаются
	только те стандартные режимы VESA, что определены графическим
	оборудованием настраиваемой системы.  В примере выше глубина цвета по
	умолчанию равна двадцати четырём битам на пиксел.  При такой глубине
	цвета принимается разрешение в 1024 на 768 точек.</para>

      <para>Наконец, запишите конфигурационный файл и
	протестируйте его при помощи тестового режима, описанного выше.</para>

      <note>
	<para>При решении проблем могут помочь лог файлы X11, в которых
	  находится информация по каждому устройству, к которому
	  подключен сервер X11.  Лог файлам
	  <application>&xorg;</application> названия даются в формате
	  <filename>/var/log/Xorg.0.log</filename>.  Имена лог файлам
	  могут даваться от <filename>Xorg.0.log</filename> до
	  <filename>Xorg.8.log</filename> и так далее.</para>
      </note>

      <para>Если все в порядке, то конфигурационный файл нужно установить в
	общедоступное место, где его сможет найти &man.Xorg.1;.
	Обычно это <filename>/etc/X11/xorg.conf</filename> или
	<filename>/usr/local/etc/X11/xorg.conf</filename>.</para>

      <screen>&prompt.root; <userinput>cp xorg.conf.new /etc/X11/xorg.conf</userinput></screen>

      <para>Теперь процесс настройки X11 завершен.
	<application>&xorg;</application> теперь можно запустить с помощью
	&man.startx.1;.  X11 можно также запустить через
	&man.xdm.1;.</para>
    </sect2>

    <sect2>
      <title>Тонкие вопросы настройки</title>

      <sect3>
	<title>Конфигурирование при работе с графическими чипсетами &intel;
	  i810</title>

	<indexterm><primary>графический чипсет Intel i810</primary></indexterm>

	<para>Конфигурирование при работе с интегрированными наборами микросхем
	  &intel; i810 требует наличия <devicename>agpgart</devicename>,
	  программного интерфейса AGP, посредством которого
	  X11 будет управлять адаптером.  Подробности смотрите на странице
	  справочника &man.agp.4;.</para>

	<para>Это позволит конфигурировать графическое оборудование точно так
	  же, как и любой другой графический адаптер.  Заметьте, что для
	  систем, у которых драйвер &man.agp.4; в ядро не вкомпилирован,
	  попытка погрузить модуль с помощью &man.kldload.8; окончится
	  неудачно.  Этот драйвер должен оказаться в ядре во время загрузки,
	  либо вкомпилированным, либо подгруженным посредством
	  <filename>/boot/loader.conf</filename>.</para>
      </sect3>

      <sect3>
	<title>Настройка широкоэкранного режима</title>

	<indexterm><primary>настройка широкоэкранного режима</primary></indexterm>

	<para>Для этого раздела необходимо несколько больше навыков настройки.
	  Если после использования описанных выше инструментов настройки в
	  результате рабочей конфигурации не получается, в лог файлах достаточно
	  информации для доведения конфигурации до рабочего уровня.  Для настройки
	  используется текстовый редактор.</para>

	<para>Существующие широкоэкранные стандарты (WSXGA, WSXGA+, WUXGA, WXGA,
	  WXGA+, и т.д.) поддерживают форматы изображения 16:10 и 10:9, которые
	  могут быть проблемными.  Для формата 16:10, например, возможны следующие
	  разрешения экрана:</para>

	<itemizedlist>
	  <listitem><para>2560x1600</para></listitem>
	  <listitem><para>1920x1200</para></listitem>
	  <listitem><para>1680x1050</para></listitem>
	  <listitem><para>1440x900</para></listitem>
	  <listitem><para>1280x800</para></listitem>
	</itemizedlist>

	<para>Иногда достаточно добавить одно из этих разрешений в качестве параметра
	  <literal>Mode</literal> в раздел <literal>Section "Screen"</literal>
	  вот так:</para>

	<programlisting>Section "Screen"
Identifier "Screen0"
Device     "Card0"
Monitor    "Monitor0"
DefaultDepth 24
SubSection "Display"
	Viewport  0 0
	Depth     24
	Modes     "1680x1050"
EndSubSection
EndSection</programlisting>

	<para><application>&xorg;</application> может извлечь информацию о разрешении
	  из монитора посредством I2C/DDC, так что у него есть данные, какие
	  частоты и разрешения может поддерживать монитор.</para>

	<para>Если эти <literal>ModeLines</literal> не определены в драйверах,
	  может потребоваться дополнительная настройка
	  <application>&xorg;</application>.  Используя
	  <filename>/var/log/Xorg.0.log</filename>, можно извлечь достаточно
	  информации для создания рабочей строки <literal>ModeLine</literal> вручную.
	  Просто обратитесь к следующей информации:</para>

	<programlisting>(II) MGA(0): Supported additional Video Mode:
(II) MGA(0): clock: 146.2 MHz   Image Size:  433 x 271 mm
(II) MGA(0): h_active: 1680  h_sync: 1784  h_sync_end 1960 h_blank_end 2240 h_border: 0
(II) MGA(0): v_active: 1050  v_sync: 1053  v_sync_end 1059 v_blanking: 1089 v_border: 0
(II) MGA(0): Ranges: V min: 48  V max: 85 Hz, H min: 30  H max: 94 kHz, PixClock max 170 MHz</programlisting>

	<para>Эта информация называется EDID.  Создание <literal>ModeLine</literal>
	  из сводится к расположению номеров в правильном порядке:</para>

	<programlisting>ModeLine &lt;name&gt; &lt;clock&gt; &lt;4 horiz. timings&gt; &lt;4 vert. timings&gt;</programlisting>

	<para>Для нашего примера <literal>ModeLine</literal> в <literal>Section
	  "Monitor"</literal> будет выглядеть так:</para>

	<programlisting>Section "Monitor"
Identifier      "Monitor1"
VendorName      "Bigname"
ModelName       "BestModel"
ModeLine        "1680x1050" 146.2 1680 1784 1960 2240 1050 1053 1059 1089
Option          "DPMS"
EndSection</programlisting>

	<para>После завершения редактирования конфигурации, X должен запуститься
	  в новом широкоэкранном разрешении.</para>
      </sect3>
    </sect2>
  </sect1>

  <sect1 id="x-fonts">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Murray</firstname>
	  <surname>Stokely</surname>
	  <contrib>Текст предоставил </contrib>
	</author>
      </authorgroup>
    </sect1info>
    <title>Использование шрифтов в X11</title>

    <sect2 id="type1">
      <title>Шрифты Type1</title>

      <para>Шрифты, используемые по умолчанию и распространяемые вместе с
	X11, вряд ли можно назвать идеально
	подходящими для применения в обычных издательских приложениях.  Большие
	презентационные шрифты выглядят рвано и непрофессионально, а мелкие
	шрифты в <application>&netscape;</application> вообще невозможно
	разобрать.  Однако есть некоторое количество свободно распространяемых
	высококачественных шрифтов Type1 (&postscript;), которые можно без
	изменений использовать с X11.  К примеру, в наборе шрифтов URW
	(<filename role="package">x11-fonts/urwfonts</filename>) имеются
	высококачественные версии стандартных шрифтов type1 (<trademark
	class="registered">Times Roman</trademark>, <trademark
	class="registered">Helvetica</trademark>, <trademark
	class="registered">Palatino</trademark> и другие).  В набор Freefonts
	(<filename role="package">x11-fonts/freefonts</filename>) включено ещё
	больше шрифтов, однако большинство из них предназначено для
	использования в программном обеспечении для работы с графикой,
	например, <application>Gimp</application>, и они не вполне пригодны
	для использования в качестве
	экранных шрифтов.  Кроме того, X11 с
	минимальными усилиями может быть настроена на использование шрифтов
	&truetype;. Более детальная информация находится на странице
	справочной системы &man.X.7; и в <link linkend="truetype">разделе о
	шрифтах &truetype;</link> ниже.</para>

      <para>Для установки вышеупомянутых коллекций шрифтов Type1 из коллекции
	портов выполните следующие команды:</para>

      <screen>&prompt.root; <userinput>cd /usr/ports/x11-fonts/urwfonts</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>

      <para>То же самое нужно будет сделать для коллекции freefont и других.
	Чтобы X-сервер обнаруживал
	этих шрифты, добавьте соответствующую строку в
	файл настройки X сервера (<filename>/etc/X11/xorg.conf</filename>),
	которая должна выглядеть так:</para>

      <programlisting>FontPath "/usr/local/lib/X11/fonts/URW/"</programlisting>

      <para>Либо из командной строки при работе с X выполните:</para>

      <screen>&prompt.user; <userinput>xset fp+ /usr/local/lib/X11/fonts/URW</userinput>
&prompt.user; <userinput>xset fp rehash</userinput></screen>

      <para>Это сработает, но будет потеряно, когда сеанс работы с X будет
	закрыт, если эта команда не будет добавлена в начальный файл
	(<filename>~/.xinitrc</filename> в случае обычного сеанса через
	<command>startx</command>
	или <filename>~/.xsession</filename> при входе через графический
	менеджер типа <application>XDM</application>).  Третий способ
	заключается в использовании нового файла
	<filename>/usr/local/etc/fonts/local.conf</filename>: посмотрите
	раздел об <link linkend="antialias">антиалиасинге</link>.</para>
    </sect2>

    <sect2 id="truetype">
      <title>Шрифты &truetype;</title>

      <indexterm><primary>Шрифты TrueType</primary></indexterm>
      <indexterm>
	<primary>шрифты</primary>
	<secondary>TrueType</secondary>
      </indexterm>

      <para>В <application>&xorg;</application> имеется встроенная
	поддержка шрифтов &truetype;.  Имеются два модуля, которые могут
	обеспечить эту функциональность.  В нашем примере используется модуль
	freetype, потому что он в большей степени похож на другие механизмы
	для работы с шрифтами.  Для включения модуля freetype достаточно в
	раздел <literal>"Module"</literal> файла
	<filename>/etc/X11/xorg.conf</filename> добавить следующую
	строчку.</para>

      <programlisting>Load  "freetype"</programlisting>

      <para>Теперь создайте каталог для шрифтов &truetype;
	(к примеру, <filename>/usr/local/lib/X11/fonts/TrueType</filename>) и
	скопируйте все шрифты &truetype; в этот каталог.  Имейте в виду,
	что напрямую использовать шрифты &truetype; с &macintosh; нельзя;
	для использования с X11 они должны
	быть в формате &unix;/&ms-dos;/&windows;.  После того, как файлы будут
	скопированы в этот каталог, воспользуйтесь утилитой
	<application>ttmkfdir</application> для создания файла
	<filename>fonts.dir</filename>, который укажет подсистеме вывода
	шрифтов X на местоположение этих новых файлов.
	<command>ttmkfdir</command> имеется в Коллекции Портов FreeBSD:
	<filename role="package">x11-fonts/ttmkfdir</filename>.</para>

      <screen>&prompt.root; <userinput>cd /usr/local/lib/X11/fonts/TrueType</userinput>
&prompt.root; <userinput>ttmkfdir -o fonts.dir</userinput></screen>

      <para>После этого добавьте каталог со шрифтами &truetype;
	к маршруту поиска шрифтов.  Это делается точно также, как описано выше
	для шрифтов <link linkend="type1">Type1</link>, то есть
	выполните</para>

      <screen>&prompt.user; <userinput>xset fp+ /usr/local/lib/X11/fonts/TrueType</userinput>
&prompt.user; <userinput>xset fp rehash</userinput></screen>

      <para>или добавьте строку <option>FontPath</option> в файл
	<filename>xorg.conf</filename>.</para>

      <para>Это всё.  Теперь <application>&netscape;</application>,
	<application>Gimp</application>,
	<application>&staroffice;</application> и все остальные X-приложения
	должны увидеть установленные шрифты &truetype;.  Очень маленькие (как
	текст веб-страницы на дисплее с высоким разрешением) и очень большие (в
	<application>&staroffice;</application>) шрифты будут теперь выглядеть
	гораздо лучше.</para>
    </sect2>

    <sect2 id="antialias">
      <sect2info>
	<authorgroup>
	  <author>
	    <firstname>Joe Marcus</firstname>

	    <surname>Clarke</surname>

	    <contrib>Обновление выполнил </contrib>
	    <!-- Май 2003 -->
	  </author>
	</authorgroup>
      </sect2info>

      <title>Антиалиасинг шрифтов</title>

      <indexterm>
	<primary>шрифты с антиалиасингом</primary>
      </indexterm>

      <indexterm>
	<primary>шрифты</primary>

	<secondary>антиалиасинг</secondary>
      </indexterm>

      <para>Антиалиасинг присутствует в X11 начиная с
	<application>&xfree86;</application>,
	версии 4.0.2.  Однако настройка шрифтов была довольно
	громоздка вплоть до появления <application>&xfree86;</application>
	4.3.0.  Начиная с версии <application>&xfree86;</application> 4.3.0,
	все шрифты, расположенные в каталогах
	<filename>/usr/local/lib/X11/fonts/</filename> и
	<filename>~/.fonts/</filename>, автоматически становятся доступными для
	применения антиалиасинга в приложениях, использующих Xft.  Не все
	приложения могут использовать Xft, но во многих его поддержка
	присутствует.  Примерами приложений, использующих Xft, является Qt
	версий 2.3 и более поздних (это инструментальный пакет для оболочки
	<application>KDE</application>), GTK+ версий 2.0 и более поздних (это
	инструментальный пакет для оболочки <application>GNOME</application>),
	а также <application>Mozilla</application> версий 1.2 и более
	поздних.</para>

      <para>Для применения к шрифтам антиалиасинга, а также
	для настройки параметров антиалиасинга, создайте (или отредактируйте,
	если он уже существует) файл
	<filename>/usr/local/etc/fonts/local.conf</filename>.  Некоторые мощные
	возможности системы шрифтов Xft могут быть настроены при помощи этого
	файла; в этом разделе описаны лишь некоторые простые возможности.  Для
	выяснения всех деталей, пожалуйста, обратитесь к
	&man.fonts-conf.5;.</para>

      <indexterm><primary>XML</primary></indexterm>

      <para>Этот файл должен быть сформирован в формате XML.  Обратите особое
	внимание на регистр символов, и удостоверьтесь, что все тэги корректно
	закрыты.  Файл начинается обычным заголовком XML, за которым следуют
	DOCTYPE и
	тэг <literal>&lt;fontconfig&gt;</literal>:</para>

      <programlisting>
        &lt;?xml version="1.0"?&gt;
        &lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;
        &lt;fontconfig&gt;
      </programlisting>

      <para>Как и говорилось ранее, все шрифты из каталога
	<filename>/usr/local/lib/X11/fonts/</filename>, а также
	<filename>~/.fonts/</filename> уже доступны для приложений,
	использующих Xft.  Если вы хотите добавить каталог, отличный от этих
	двух, добавьте строчку, подобную следующей, в файл
	<filename>/usr/local/etc/fonts/local.conf</filename>:</para>

      <programlisting>&lt;dir&gt;/path/to/my/fonts&lt;/dir&gt;</programlisting>

      <para>После добавления новых шрифтов, и особенно новых каталогов со
	шрифтами, вы должны выполнить следующую команду для перестроения
	кэшей шрифтов:</para>

      <screen>&prompt.root; <userinput>fc-cache -f</userinput></screen>

      <para>Антиалиасинг делает границы несколько размытыми, что делает очень
	мелкий текст более читабельным и удаляет <quote>лесенки</quote> из
	текста большого размера, но может вызвать нечёткость при применении к
	тексту обычного размера.  Для исключения размеров шрифтов, меньших 14, из
	антиалиасинга, добавьте такие строки:</para>

      <programlisting>        &lt;match target="font"&gt;
            &lt;test name="size" compare="less"&gt;
                &lt;double&gt;14&lt;/double&gt;
            &lt;/test&gt;
            &lt;edit name="antialias" mode="assign"&gt;
                &lt;bool&gt;false&lt;/bool&gt;
            &lt;/edit&gt;
        &lt;/match&gt;
        &lt;match target="font"&gt;
            &lt;test name="pixelsize" compare="less" qual="any"&gt;
                &lt;double&gt;14&lt;/double&gt;
            &lt;/test&gt;
            &lt;edit mode="assign" name="antialias"&gt;
                &lt;bool&gt;false&lt;/bool&gt;
            &lt;/edit&gt;
        &lt;/match&gt;</programlisting>

      <indexterm>
	<primary>шрифты</primary>

	<secondary>межсимвольное расстояние</secondary>
      </indexterm>

      <para>Для некоторых моноширинных шрифтов антиалиасинг может также
	оказаться неприменимым при определении межсимвольного интервала.  В
	частности, эта проблема возникает с <application>KDE</application>.
	Одним из возможных решений для этого
	является жесткое задание межсимвольного интервала в 100.  Добавьте
	следующие строки:</para>

      <programlisting>       &lt;match target="pattern" name="family"&gt;
           &lt;test qual="any" name="family"&gt;
               &lt;string&gt;fixed&lt;/string&gt;
           &lt;/test&gt;
           &lt;edit name="family" mode="assign"&gt;
               &lt;string&gt;mono&lt;/string&gt;
           &lt;/edit&gt;
        &lt;/match&gt;
        &lt;match target="pattern" name="family"&gt;
            &lt;test qual="any" name="family"&gt;
                &lt;string&gt;console&lt;/string&gt;
            &lt;/test&gt;
            &lt;edit name="family" mode="assign"&gt;
                &lt;string&gt;mono&lt;/string&gt;
            &lt;/edit&gt;
        &lt;/match&gt;</programlisting>

      <para>(это создаст алиасы <literal>"mono"</literal> для других
	общеупотребительных имён шрифтов фиксированного размера), а затем
	добавьте:</para>

      <programlisting>         &lt;match target="pattern" name="family"&gt;
             &lt;test qual="any" name="family"&gt;
                 &lt;string&gt;mono&lt;/string&gt;
             &lt;/test&gt;
             &lt;edit name="spacing" mode="assign"&gt;
                 &lt;int&gt;100&lt;/int&gt;
             &lt;/edit&gt;
         &lt;/match&gt;      </programlisting>

      <para>С некоторыми шрифтами, такими, как Helvetica, при антиалиасинге
	могут возникнуть проблемы .  Обычно это проявляется в виде шрифта,
	который наполовину вертикально обрезан.  Хуже того, это может
	привести к сбоям таких приложений, как
	<application>Mozilla</application>.  Во избежание этого следует
	добавить следующее в файл <filename>local.conf</filename>:</para>

      <programlisting>         &lt;match target="pattern" name="family"&gt;
             &lt;test qual="any" name="family"&gt;
                 &lt;string&gt;Helvetica&lt;/string&gt;
             &lt;/test&gt;
             &lt;edit name="family" mode="assign"&gt;
                 &lt;string&gt;sans-serif&lt;/string&gt;
             &lt;/edit&gt;
         &lt;/match&gt;        </programlisting>

      <para>После того, как вы закончите редактирование
	<filename>local.conf</filename>, удостоверьтесь, что файл завершен
	тэгом <literal>&lt;/fontconfig&gt;</literal>.  Если этого не сделать,
	ваши изменения будут проигнорированы.</para>

      <para>Набор шрифтов по умолчанию, поставляемый с
	X11, не очень подходит, если
	включается антиалиасинг.  Гораздо лучший набор шрифтов, используемых
	по умолчанию, можно найти в порте
	<filename role="package">x11-fonts/bitstream-vera</filename>.  Этот
	порт установит файл
	<filename>/usr/local/etc/fonts/local.conf</filename>, если такого ещё
	не существует.  Если файл существует, то порт создаст файл
	<filename>/usr/local/etc/fonts/local.conf-vera</filename>.  Перенесите
	содержимое этого файла в
	<filename>/usr/local/etc/fonts/local.conf</filename>, и шрифты
	Bitstream автоматически заменят используемые по умолчанию в
	X11 шрифты Serif, Sans Serif и
	Monospaced.</para>

      <para>Наконец, пользователи могут добавлять собственные наборы
	посредством персональных файлов <filename>.fonts.conf</filename>.
	Для этого каждый пользователь должен просто создать файл
	<filename>~/.fonts.conf</filename>.  Этот файл также должен быть в
	формате XML.</para>

      <indexterm><primary>LCD-дисплей</primary></indexterm>
      <indexterm><primary>Шрифты</primary>
	<secondary>LCD-дисплей</secondary></indexterm>

      <para>И последнее замечание: при использовании дисплея LCD может
	понадобиться включение разбиения точек.  При этом компоненты красного,
	зелёного и голубого цветов (разделяемые по горизонтали),
	рассматриваются как отдельные точки для улучшения разрешения экрана
	по горизонтали; результат может оказаться потрясающим.  Для включения
	этого механизма добавьте такую строчку где-нибудь в файле
	<filename>local.conf</filename>:</para>

      <programlisting>
        &lt;match target="font"&gt;
            &lt;test qual="all" name="rgba"&gt;
                &lt;const&gt;unknown&lt;/const&gt;
            &lt;/test&gt;
            &lt;edit name="rgba" mode="assign"&gt;
                &lt;const&gt;rgb&lt;/const&gt;
            &lt;/edit&gt;
        &lt;/match&gt;
      </programlisting>

      <note>
	<para>В зависимости от типа дисплея, <literal>rgb</literal> может
	  потребоваться заменить на <literal>bgr</literal>,
	  <literal>vrgb</literal> или <literal>vbgr</literal>: пробуйте и
	  смотрите, что работает лучше.</para>
      </note>

      <indexterm>
	<primary>Mozilla</primary>
	<secondary>отключение шрифтов с антиалиасингом</secondary>
      </indexterm>

      <para>Антиалиасинг должен быть включен при следующем запуске X-сервера.
	Однако программы должны знать, как использовать его преимущества.
	В настоящее время инструментальный пакет Qt умеет ими пользоваться,
	так что вся оболочка <application>KDE</application> может
	использовать шрифты с антиалиасингом.
	GTK+ и <application>GNOME</application>
	также можно заставить использовать антиалиасинг посредством капплета
	<quote>Font</quote> (обратитесь к <xref
	linkend="x11-wm-gnome-antialias"> для выяснения всех подробностей).
	По умолчанию <application>Mozilla</application> версий 1.2 и выше
	будет автоматически использовать антиалиасинг.  Для отмены
	использования антиалиасинга
	перестройте <application>Mozilla</application> с флагом
	<makevar>-DWITHOUT_XFT</makevar>.</para>
    </sect2>
  </sect1>

  <sect1 id="x-xdm">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Seth</firstname>
	  <surname>Kingsley</surname>
	  <contrib>Текст предоставил </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>Менеджеры экранов (Display Managers) X</title>

    <sect2>
      <title>Вступление</title>

      <indexterm>
	<primary>X Display Manager</primary>
      </indexterm>

      <para>Менеджер Экранов X (<application>XDM</application>) это
	необязательный компонент
	X Window System, который используется для управления входом
	пользователей в систему.
	Это полезно в ряде ситуаций, например для минимальных
	<quote>X Терминалов</quote>,
	десктопов, больших сетевых серверов экранов. Так как X Window System
	не зависит от сетей и протоколов, то существует множество различных
	конфигураций для X клиентов и серверов, запущенных на различных
	компьютерах, подключенных к сети.  <application>XDM</application>
	предоставляет графический
	интерфейс для выбора сервера, к которому вы желаете подключится, и
	введения информации, авторизующей пользователя, например комбинации
	логина и пароля.</para>

      <para><application>XDM</application> можно рассматривать как аналог
	программы &man.getty.8;, предоставляющий такие же возможности
	для пользователей
	(смотрите <xref linkend="term-config"> для подробной информации).
	И это именно так, <application>XDM</application> производит вход в
	систему для подключенного
	пользователя и запускает управляющую сессию для пользователя (обычно
	это менеджер окон X). После этого <application>XDM</application>
	ожидает завершения
	приложения, означающее завершение пользователем работы и
	отключает управляющую сессию.  Затем
	<application>XDM</application> может снова вывести
	приглашение к входу в систему и ожидать входа другого пользователя.
      </para>
    </sect2>

    <sect2>
      <title>Использование XDM</title>

      <para>Программой даемона <application>XDM</application> является
	<filename>/usr/local/bin/xdm</filename>.  Эта программа может быть
	запущена от пользователя <username>root</username> в любой момент, и
	она начнёт управлять дисплеем X на локальной машине.
	Если <application>XDM</application> нужно запускать
	в фоновом режиме каждый раз при запуске компьютера, то наиболее
	правильный способ &mdash; это добавить новую запись в
	<filename>/etc/ttys</filename>. Для более подробной информации о
	формате и использовании этого файла смотрите <xref
	linkend="term-etcttys">.  Вот строка, которую необходимо добавить
	в файл <filename>/etc/ttys</filename> для того, чтобы запустить
	даемон <application>XDM</application> на виртуальном терминале:</para>

      <screen>ttyv8	"/usr/local/bin/xdm -nodaemon"	xterm	off secure</screen>

      <para>По умолчанию эта запись отключена; для её включения
	нужно заменить пятое поле с <literal>off</literal> на
	<literal>on</literal> и перезапустить &man.init.8;, используя метод,
	описанный в <xref linkend="term-hup">.  Первое поле это название
	терминала, которым будет управлять программа, <literal>ttyv8</literal>.
	Это означает, что <application>XDM</application> будет запущен на 9ом
	виртуальном терминале.</para>    </sect2>

    <sect2>
      <title>Конфигурирование XDM</title>

      <para>Конфигурационные файлы <application>XDM</application> находятся в
	каталоге
	<filename>/usr/local/lib/X11/xdm</filename>.  В нём размещаются
	насколько файлов, которые используются для изменения
	поведения и внешнего вида <application>XDM</application>.
	Обычно это следующие файлы:</para>

	<informaltable frame="none" pgwide="1">
	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>Файл</entry>
		<entry>Описание</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry><filename>Xaccess</filename></entry>
		<entry>Правила авторизации клиентов.</entry>
	      </row>

	      <row>
		<entry><filename>Xresources</filename></entry>
		<entry>Значения ресурсов X по умолчанию.</entry>
	      </row>

	      <row>
		<entry><filename>Xservers</filename></entry>
		<entry>Список локальных и удаленных экранов.</entry>
	      </row>

	      <row>
		<entry><filename>Xsession</filename></entry>
		<entry>Сценарий сессии по умолчанию.</entry>
	      </row>

	      <row>
		<entry><filename>Xsetup_</filename>*</entry>

	        <entry>Скрипт для запуска приложений до появления приглашения
	          к входу в систему.</entry>
	      </row>

	      <row>
		<entry><filename>xdm-config</filename></entry>
		<entry>Глобальный конфигурационный файл для всех экранов
		  запущенных на локальной машине</entry>
	      </row>

	      <row>
		<entry><filename>xdm-errors</filename></entry>
		<entry>Ошибки сгенерированные серверной программой.</entry>
	      </row>

	      <row>
		<entry><filename>xdm-pid</filename></entry>
		<entry>ID процесса запущенного XDM.</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

      <para>В этом каталоге также находятся несколько командных сценариев
	и программ, используемых для настройки рабочего стола (desktop)
	при запуске <application>XDM</application>.  Назначение
	каждого из этих файлов будет вкратце описано.  Точный синтаксис и
	информация по их использованию находятся в &man.xdm.1;.</para>

      <para>В конфигурации по умолчанию выводится простое прямоугольное окно
	приглашения ко входу в систему с именем компьютера, написанным
	сверху большим шрифтом, и строками ввода <quote>Login:</quote> и
	<quote>Password:</quote> внизу. Это хорошая отправная точка
	для изменения внешнего вида экранов
	<application>XDM</application>.</para>

      <sect3>
	<title>Xaccess</title>

	<para>Протокол, по которому происходит подключение дисплеев,
	  управляемых <application>XDM</application>, называется X Display
	  Manager Connection
	  Protocol (XDMCP).  Этот файл представляет собой
	  набор правил для управления XDMCP соединениями с
	  удалёнными машинами.  Он игнорируется, пока
	  стандартный файл <filename>xdm-config</filename> не содержит
	  указаний по обслуживанию удалённых соединений.</para>
      </sect3>

      <sect3>
	<title>Xresources</title>

	<para>Это файл содержит установки по умолчанию для
	  приложений, запущенных в экране выбора серверов и экране
	  приглашения к входу в систему.  В нем может быть
	  изменён вид программы входа в систему. Формат этого файла
	  идентичен файлу app-defaults, описанному
	  в документации к X11.</para>
      </sect3>

      <sect3>
	<title>Xservers</title>

	<para>Это список удаленных экранов, которые XDM должен предоставить
	  как варианты для входа в систему.</para>
      </sect3>

      <sect3>
	<title>Xsession</title>
	<para>Этот файл представляет из себя командный сценарий по умолчанию
	  для пользователей, вошедших в систему с использованием
	  <application>XDM</application>.
	  Обычно каждый пользователь имеет собственный сценарий входа в файле
	  <filename>~/.xsession</filename>, который используется
	  вместо этого сценария.</para>
      </sect3>

      <sect3>
	<title>Xsetup_*</title>
	<para>Они запускаются автоматически перед тем, как показывается экран
	  выбора сервера или экран входа в систему. Для каждого экрана
	  (display) есть свой сценарий с именем <filename>Xsetup_</filename>,
	  за которым следует локальный номер экрана (например,
	  <filename>Xsetup_0</filename>).
	  Обычно эти сценарии запускают одну или две программы в
	  фоновом режиме, например <command>xconsole</command>.</para>
      </sect3>

      <sect3>
	<title>xdm-config</title>

	<para>Здесь содержатся настройки в формате app-defaults,
	  которые применимы ко всем экранам данного компьютера.</para>
      </sect3>

      <sect3>
	<title>xdm-errors</title>

	<para>Здесь находится выдача X серверов, которые
	  <application>XDM</application> пытается запустить.  Если экран,
	  который <application>XDM</application> пытается
	  открыть, отключается по некоторым причинам, то это хорошее
	  место для поиска сообщений об ошибках. Эти сообщения также
	  записываются в пользовательский файл
	  <filename>~/.xsession-errors</filename> для каждого сеанса.</para>
      </sect3>
    </sect2>

    <sect2>
      <title>Использование сетевого сервера дисплеев</title>

      <para>Для того, чтобы позволить другим клиентам подключаться к серверу
	дисплеев, необходимо отредактировать правила
	контроля доступа и включить обслуживание сетевых соединений.
	По умолчанию они выключены, что является хорошим решением
	с точки зрения обеспечения безопасности.  Для того, чтобы
	позволить <application>XDM</application> принимать сетевые соединения,
	в первую очередь
	закомментируйте строку в файле <filename>xdm-config</filename>:</para>

      <screen>! БЕЗОПАСНОСТЬ: do not listen for XDMCP or Chooser requests
! Закомментируйте эти линии, если вы хотите управлять X терминалами с xdm 
DisplayManager.requestPort:     0</screen>

      <para>и потом перезапустите <application>XDM</application>.  Помните,
	что комментарии в файлах app-defaults начинаются с символа
	<quote>!</quote>, а не как обычно, <quote>#</quote>.  Может
	потребоваться более жёсткий контроль доступа &mdash; взгляните на примеры из
	<filename>Xaccess</filename> и обратитесь к странице справочника
	&man.xdm.1; за дальнейшей информацией.</para>
    </sect2>

    <sect2>
      <title>Замены для XDM</title>

      <para>Существует несколько программ, заменяющих
	<application>XDM</application>.  Одна из них,
	<application>kdm</application> (поставляемая вместе с
	<application>KDE</application>), описана далее в этой главе.  В
	<application>kdm</application> имеется много визуальных и
	косметических улучшений, а также функциональность, позволяющая
	пользователям выбирать собственные оконные менеджеры во время
	входа в систему.</para>
    </sect2>
  </sect1>

  <sect1 id="x11-wm">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Valentino</firstname>
	  <surname>Vaschetto</surname>
	  <contrib>Текст предоставил </contrib>
	</author>
	<!-- Июнь 2001 -->
      </authorgroup>
    </sect1info>

    <title>Графические оболочки</title>

    <para>В этом разделе описываются различные графические оболочки, доступные
      в X для FreeBSD.  Термин <quote>графическая оболочка</quote> может
      использоваться для чего угодно, от простого менеджера окон до
      полнофункционального набора приложений для рабочего стола, типа
      <application>KDE</application> или
      <application>GNOME</application>.</para>

    <sect2 id="x11-wm-gnome">
      <title>GNOME</title>

      <sect3 id="x11-wm-gnome-about">
	<title>О GNOME</title>

	<indexterm><primary>GNOME</primary></indexterm>

	<para><application>GNOME</application> является дружественной к
	  пользователю графической
	  оболочкой, позволяющей пользователям легко использовать и настраивать
	  свои компьютеры.  В <application>GNOME</application> имеется панель
	  (для запуска приложений и
	  отображения их состояния), рабочий стол (где могут быть размещены
	  данные и приложения), набор стандартных инструментов и приложений для
	  рабочего стола, а также набор соглашений, облегчающих совместную
	  работу и согласованность приложений.  Пользователи других
	  операционных систем или оболочек при использовании такой мощной
	  графической оболочки, какую обеспечивает
	  <application>GNOME</application>, должны чувствовать
	  себя в родной среде.  Дополнительную информацию относительно
	  <application>GNOME</application> во FreeBSD можно найти на сайте
	  <ulink url="http://www.FreeBSD.org/gnome">FreeBSD GNOME
	  Project</ulink>. Web сайт также содержит достаточно исчерпывающие
	  FAQ'и, касающиеся установки, конфигурирования и управления
	  <application>GNOME</application>.</para>
      </sect3>

      <sect3 id="x11-wm-gnome-install">
	<title>Установка GNOME</title>

	<para>Программу проще всего установить из пакета или коллекции
	  портов:</para>

	<para>Для установки пакета <application>GNOME</application> из сети,
	  просто наберите:</para>

	<screen>&prompt.root; <userinput>pkg_add -r gnome2</userinput></screen>

	<para>Для построения <application>GNOME</application> из
	  исходных текстов используйте дерево портов:</para>

	<screen>&prompt.root; <userinput>cd /usr/ports/x11/gnome2</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>

	<para>После установки <application>GNOME</application> нужно указать
	  X-серверу на запуск <application>GNOME</application> вместо
	  стандартного оконного менеджера.</para>

	<para>Самый простой путь запустить
	  <application>GNOME</application> - это использовать
	  <application>GDM</application> (GNOME Display Manager).
	  <application>GDM</application>, который устанавливается, как
	  часть <application>GNOME</application> (но отключен по умолчанию),
	  может быть включён путём добавления <literal>gdm_enable="YES"</literal>
	  в <filename>/etc/rc.conf</filename>.  После перезагрузки,
	  <application>GNOME</application> запустится автоматически
	  после того, как вы зарегистрируйтесь в системе.  Никакой
	  дополнительной конфигурации не требуется.</para>

	<para><application>GNOME</application> может также быть запущен
	  из командной строки с помощью конфигурирования файла
	  <filename>.xinitrc</filename>.  Если файл
	  <filename>.xinitrc</filename> уже откорректирован, то просто
	  замените строку, в которой запускается используемый менеджер окон,
	  на ту, что вызовет
	  <application>/usr/local/bin/gnome-session</application>.
	  Если в конфигурационном файле нет ничего особенного, то будет
	  достаточно просто набрать:</para>

	<screen>&prompt.user; <userinput>echo "/usr/local/bin/gnome-session" &gt; ~/.xinitrc</userinput></screen>

	<para>Теперь наберите <command>startx</command>, и будет запущена
	  графическая оболочка <application>GNOME</application>.</para>

	<note>
	  <para>Если используется более старый менеджер дисплеев типа
	    <application>XDM</application>, то это не сработает.  Вместо этого
	    создайте выполнимый файл <filename>.xsession</filename> с той
	    же самой командой в нём.  Для этого отредактируйте файл,
	    заменив существующую команду запуска оконного
	    менеджера на
	    <application>/usr/local/bin/gnome-session</application>:</para>
	</note>

	<screen>&prompt.user; <userinput>echo "#!/bin/sh" &gt; ~/.xsession</userinput>
&prompt.user; <userinput>echo "/usr/local/bin/gnome-session" &gt;&gt; ~/.xsession</userinput>
&prompt.user; <userinput>chmod +x ~/.xsession</userinput></screen>

	<para>Ещё одним вариантом является настройка менеджера дисплеев таким
	  образом, чтобы он позволял выбирать оконный менеджер во время входа в
	  систему; в разделе о <link linkend="x11-wm-kde-details">KDE в
	  подробностях</link> описывается, как сделать это для
	  <application>kdm</application>, менеджера дисплеев из
	  <application>KDE</application>.</para>
      </sect3>

      <sect3 id="x11-wm-gnome-antialias">
	<title>Шрифты с антиалиасингом и GNOME</title>

	<indexterm><primary>GNOME</primary>
	  <secondary>антиалиасинг шрифтов</secondary></indexterm>
	<para>X11 поддерживает антиалиасинг посредством своего расширения
	  <quote>RENDER</quote>.  GTK+ 2.0 и более поздние версии (это
	  инструментальный пакет, используемый
	  <application>GNOME</application>) могут использовать такую
	  функциональность.  Настройка антиалиасинга описана в
	  <xref linkend="antialias">.  Таким образом, при наличии современного
	  <application>GNOME</application>, возможно использование
	  антиалиасинга.  Просто перейдите в
	  <menuchoice>
	    <guimenu>Applications</guimenu>
	    <guisubmenu>Desktop Preferences</guisubmenu>
	    <guimenuitem>Font</guimenuitem></menuchoice>
	  и выберите либо
	  <guibutton>Best shapes</guibutton>,
	  <guibutton>Best contrast</guibutton>, либо
	  <guibutton>Subpixel smoothing (LCDs)</guibutton>.  Для приложений
	  GTK+, которые не являются частью оболочки
	  <application>GNOME</application>, задайте в качестве значения
	  переменной окружения <varname>GDK_USE_XFT</varname>
	  <literal>1</literal> перед запуском программы.</para>
      </sect3>
    </sect2>

    <sect2 id="x11-wm-kde">
      <title>KDE</title>

      <indexterm><primary>KDE</primary></indexterm>

      <sect3 id="x11-wm-kde-about">
	<title>О KDE</title>

	<para><application>KDE</application> является простой в использовании
	  современной графической оболочкой.  Вот лишь некоторые из
	  преимуществ, которые
	  даёт пользователю <application>KDE</application>:</para>

	<itemizedlist>
	  <listitem>
	    <para>Прекрасный современный рабочий стол</para>
	  </listitem>

	  <listitem>
	    <para>Рабочий стол, полностью прозрачный для работы в сети</para>
	  </listitem>

	  <listitem>
	    <para>Интегрированная система помощи, обеспечивающая удобный и
	      согласованный доступ к системе помощи по использованию рабочего
	      стола <application>KDE</application> и его приложений</para>
	  </listitem>

	  <listitem>
	    <para>Единообразный внешний вид и управление во всех приложениях
	      <application>KDE</application></para>
	  </listitem>

	  <listitem>
	    <para>Стандартизированные меню и панели инструментов, комбинации
	      клавиш, цветовые схемы и так далее.</para>
	  </listitem>

	  <listitem>
	    <para>Интернационализация: в <application>KDE</application>
	      поддерживается более 40 языков</para>
	  </listitem>

	  <listitem>
	    <para>Централизованное единообразное конфигурирование рабочего
	      стола в диалоговом режиме</para>
	  </listitem>

	  <listitem>
	    <para>Большое количество полезных приложений для
	      <application>KDE</application></para>
	  </listitem>
	</itemizedlist>

	<para>Совместно с <application>KDE</application> 
	  поставляется веб-браузер под
	  названием <application>Konqueror</application>, который
	  является серьезным соперником другим браузерам для &unix;-систем.
	  Дополнительную информацию о <application>KDE</application> можно
	  найти на веб-сайте <ulink url="http://www.kde.org/">KDE в
	  FreeBSD</ulink>.  Для получения информации и информационных ресурсов,
	  специфичных для <application>KDE</application> во FreeBSD, обратитесь
	  к сайту команды <ulink url="http://freebsd.kde.org/">FreeBSD-KDE
	  team</ulink>.</para>
	
	<para>Имеется две версии <application>KDE</application> доступные на FreeBSD.  Версия 3
	  была доступна очень долгое время и она является очень зрелой. Версия 4 - это следующее
          поколение, также доступное через Коллекцию Портов. 
	  Обе версии могут быть инсталлированы одновременно.</para>
      </sect3>

      <sect3 id="x11-wm-kde-install">
	<title>Установка KDE</title>

	<para>Как и в случае с <application>GNOME</application> или любой
	  другой графической оболочкой, программное обеспечение можно легко
	  установить из пакета или из Коллекции Портов:</para>

	<para>Для установки пакета <application>KDE3</application> из сети,
	  просто наберите:</para>

	<screen>&prompt.root; <userinput>pkg_add -r kde</userinput></screen>

	<para>Для установки пакета <application>KDE4</application> из сети,
	  просто наберите:</para>

        <screen>&prompt.root; <userinput>pkg_add -r kde4</userinput></screen>

	<para>&man.pkg.add.1; автоматически загрузит самую последнюю версию
	  приложения.</para>

	<para>Для построения <application>KDE3</application> из исходных
	  текстов, воспользуйтесь деревом портов:</para>

	<screen>&prompt.root; <userinput>cd /usr/ports/x11/kde3</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>

	  <para>Для построения <application>KDE4</application> из исходных
          текстов, воспользуйтесь деревом портов:</para>

	<screen>&prompt.root; <userinput>cd /usr/ports/x11/kde4</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>

	<para>После установки <application>KDE</application> нужно
	  указать X-серверу на запуск этого приложения вместо оконного
	  менеджера, используемого по умолчанию.  Это достигается
	  редактированием файла <filename>.xinitrc</filename>:</para>

	<para>Для <application>KDE3</application>:</para>

	<screen>&prompt.user; <userinput>echo "exec startkde" &gt; ~/.xinitrc</userinput></screen>

	<para>Для <application>KDE4</application>:</para>

	<screen>&prompt.user; <userinput>echo "exec /usr/local/kde4/bin/startkde" &gt; ~/.xinitrc</userinput></screen>

	<para>Теперь при вызове X Window System по команде
	  <command>startx</command> в качестве оболочки будет использоваться
	  <application>KDE</application>.</para>

	<para>При использовании менеджера дисплеев типа
	  <application>XDM</application> настройка несколько отличается.
	  Вместо этого нужно отредактировать файл
	  <filename>.xsession</filename>.  Указания для
	  <application>kdm</application> описаны далее в этой главе.</para>
      </sect3>
    </sect2>

    <sect2 id="x11-wm-kde-details">
      <title>Более подробно о KDE</title>

      <para>Теперь, когда <application>KDE</application> установлена в
	системе, можно узнать много нового из её справочных страниц или просто
	указанием и щелканьем по различным меню.  Пользователи &windows; или
	&mac; будут чувствовать себя как дома.</para>

      <para>Лучшим справочником по <application>KDE</application> является
	онлайновая документация.  <application>KDE</application>
	поставляется с собственным веб-браузером, который называется
	<application>Konqueror</application>,
	десятками полезных приложений и подробной документацией.  В оставшейся
	части этого раздела обсуждаются технические вопросы, трудные для
	понимания при случайном исследовании.</para>

      <sect3 id="x11-wm-kde-kdm">
	<title>Менеджер дисплеев KDE</title>

	<indexterm>
	  <primary>KDE</primary>

	  <secondary>менеджер дисплеев</secondary>
	</indexterm>

	<para>Администратору многопользовательской системы может
	  потребоваться графический экран для входа пользователей
	  в систему.  Вы можете использовать <link
	  linkend="x-xdm">XDM</link>, как это описано
	  ранее.  Однако в <application>KDE</application> имеется
	  альтернативный менеджер <application>kdm</application>, который был
	  разработан более привлекательным и с
	  большим количеством настраиваемых опций для входа в систему.  В
	  частности, пользователи могут легко выбирать (посредством меню),
	  какую оболочку (<application>KDE</application>,
	  <application>GNOME</application> или что-то ещё) запускать после
	  входа в систему.</para>

	<para>Для того, чтобы разрешить запуск <application>kdm</application>,
	  измените в файле <filename>/etc/ttys</filename> строку, относящуюся
	  к консоли <literal>ttyv8</literal>:</para>

	<para>Для <application>KDE3</application>:</para>

	<programlisting>ttyv8 "/usr/local/bin/kdm -nodaemon" xterm on secure</programlisting>

	<para>Для <application>KDE4</application>:</para>

	<programlisting>ttyv8 "/usr/local/kde4/bin/kdm -nodaemon" xterm on secure</programlisting>
      </sect3>

    </sect2>

    <sect2 id="x11-wm-xfce">
      <title>XFce</title>

      <sect3 id="x11-wm-xfce-about">
	<title>О XFce</title>

	<para><application>XFce</application> является графической оболочкой,
	  построенной на основе инструментального пакета GTK+, используемого в
	  <application>GNOME</application>, но она гораздо легче и предназначена
	  для тех, кому нужен простой, эффективно работающий рабочий стол,
	  который легко использовать и настраивать.  Визуально он выглядит
	  очень похоже на <application>CDE</application>, который есть в
	  коммерческих &unix;-системах.  Вот некоторые из достоинств
	  <application>XFce</application>:</para>

	<itemizedlist>
	  <listitem>
	    <para>Простой, лёгкий в обращении рабочий стол</para>
	  </listitem>

	  <listitem>
	    <para>Полностью настраиваемый при помощи мыши, с
	      интерфейсом drag and drop и так далее</para>
	  </listitem>

	  <listitem>
	    <para>Главная панель похожа на <application>CDE</application>, с
	      меню, апплетами и возможностями по быстрому запуску
	      приложений</para>
	  </listitem>

	  <listitem>
	    <para>Интегрированный оконный менеджер, менеджер файлов,
	      управление звуком, модуль совместимости с
	      <application>GNOME</application> и прочее</para>
	  </listitem>

	  <listitem>
	    <para>Возможность использования тем (так как использует
	      GTK+)</para>
	  </listitem>

	  <listitem>
	    <para>Быстрый, легкий и эффективный: идеален для
	      устаревших/слабых машин или для машин с ограниченной
	      памятью</para>
	  </listitem>
	</itemizedlist>

	<para>Дополнительную информацию о <application>XFce</application>
	  можно найти на <ulink url="http://www.xfce.org/">сайте
	  XFce</ulink>.</para>
      </sect3>

      <sect3 id="x11-wm-xfce-install">
	<title>Установка XFce</title>

	<para>Для <application>XFce</application> имеется (на момент написания
	  этого текста) бинарный пакет.  Для его установки просто
	  наберите:</para>

	<screen>&prompt.root; <userinput>pkg_add -r xfce4</userinput></screen>

	<para>Либо, в случае построения из исходных текстов, используйте
	  Коллекцию Портов: </para>

	<screen>&prompt.root; <userinput>cd /usr/ports/x11-wm/xfce4</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>

	<para>Теперь укажите X-серверу на запуск
	  <application>XFce</application> при следующем
	  запуске X.  Просто наберите:</para>

	<screen>&prompt.user; <userinput>echo "/usr/local/bin/startxfce4" &gt; ~/.xinitrc</userinput></screen>

	<para>При следующем запуске X в качестве рабочего стола
	  будет использоваться <application>XFce</application>.
	  Как сказано выше, если используется
	  менеджер дисплеев, такой, как <filename>XDM</filename>, создайте
	  файл <filename>.xsession</filename> так, как это
	  описано в разделе о <link linkend="x11-wm-gnome">GNOME</link>, но
	  с командой <filename>/usr/local/bin/startxfce4</filename>, либо
	  настройте менеджер дисплеев так, чтобы он разрешил выбор рабочего
	  стола во время входа в систему, как это описано в разделе о <link
	  linkend="x11-wm-kde-kdm">kdm</link>.</para>
      </sect3>
    </sect2>
  </sect1>
</chapter>

<!--
     Local Variables:
     mode: sgml
     sgml-declaration: "../chapter.decl"
     sgml-indent-data: t
     sgml-omittag: nil
     sgml-always-quote-attributes: t
     sgml-parent-document: ("../book.sgml" "part" "chapter")
     End:
-->
