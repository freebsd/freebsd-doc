<!--
     The FreeBSD Russian Documentation Project

     $FreeBSDru: frdp/doc/ru_RU.KOI8-R/books/faq/book.sgml,v 1.211 2007/01/12 17:29:36 gad Exp $

     Original revision: 1.790
-->

<!DOCTYPE book PUBLIC "-//FreeBSD//DTD DocBook V4.1-Based Extension//EN" [
<!ENTITY % books.ent PUBLIC "-//FreeBSD//ENTITIES DocBook FreeBSD Books Entity Set//EN">
%books.ent;
<!ENTITY bibliography SYSTEM "../../../share/sgml/bibliography.sgml">
]>

<book lang="ru">
  <bookinfo>
    <title>Часто задаваемые вопросы по FreeBSD 4.X, 5.X и 6.X</title>

    <corpauthor>The FreeBSD Documentation Project</corpauthor>

    <pubdate>$FreeBSD$</pubdate>

    <copyright>
      <year>1995</year>
      <year>1996</year>
      <year>1997</year>
      <year>1998</year>
      <year>1999</year>
      <year>2000</year>
      <year>2001</year>
      <year>2002</year>
      <year>2003</year>
      <year>2004</year>
      <year>2005</year>
      <year>2006</year>
      <holder>The FreeBSD Documentation Project</holder>
    </copyright>

    &bookinfo.legalnotice;

    <legalnotice id="trademarks" role="trademarks">
      &tm-attrib.freebsd;
      &tm-attrib.3com;
      &tm-attrib.adobe;
      &tm-attrib.creative;
      &tm-attrib.cvsup;
      &tm-attrib.ibm;
      &tm-attrib.ieee;
      &tm-attrib.intel;
      &tm-attrib.iomega;
      &tm-attrib.linux;
      &tm-attrib.microsoft;
      &tm-attrib.mips;
      &tm-attrib.netscape;
      &tm-attrib.opengroup;
      &tm-attrib.oracle;
      &tm-attrib.sgi;
      &tm-attrib.sparc;
      &tm-attrib.sun;
      &tm-attrib.usrobotics;
      &tm-attrib.xfree86;
      &tm-attrib.general;
    </legalnotice>

    <abstract>
      <para>Этот документ является так называемым FAQ (Frequently Asked
        Questions), то есть списком Часто Задаваемых Вопросов по FreeBSD версий
        4.X, 5.X и 6.X.  Если не оговорено обратное, предполагается,
        что все замечания справедливы для версий FreeBSD 4.0 и выше.  Если вы
        хотите помочь в составлении этого документа, пошлите письмо в &a.doc;.
        Последняя редакция этого документа всегда доступна с <ulink
        url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/faq/index.html">
        Web-сервера FreeBSD</ulink>.  Его также
        можно получить в виде одного большого <ulink url="book.html">
        HTML-файла</ulink> по HTTP или в виде обычного текстового файла, файла
        формата &postscript;, PDF или другого формата с <ulink
        url="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">FTP-сервера</ulink>.
        Вы также можете осуществить <ulink
        url="&url.base;/search/search.html">поиск</ulink> в
        FAQ.</para>
    </abstract>
  </bookinfo>

  <chapter id="introduction">
    <title>Вступление</title>

    <para>Добро пожаловать в FAQ по FreeBSD 4.X-6.X!</para>

    <para>Как и обычный FAQ конференций Usenet, этот документ содержит
      большинство из часто задаваемых вопросов, касающихся операционной системы
      FreeBSD (и, конечно же, ответы на них).  Первоначально предназначенный для
      уменьшения потока сообщений и избежания повторения одних и тех же
      вопросов, постепенно FAQ превратился в ценный источник информации.</para>

    <para>Мы прилагаем все усилия, чтобы сделать этот FAQ максимально
      информативным; если у вас есть идеи по его усовершенствованию,
      пожалуйста, напишите нам на адрес &a.doc;.</para>

    <qandaset>
      <qandaentry>
        <question id="what-is-FreeBSD">
          <para>FreeBSD - что это такое?</para>
        </question>

        <answer>
          <para>В двух словах, FreeBSD - это &unix;-подобная операционная
            система для платформ Alpha/AXP, AMD64 и &intel; EM64T, &i386;
            IA-64, PC-98 и &ultrasparc;, разработанная на основе операционной
            системы <quote>4.4BSD-Lite</quote> с некоторыми
            усовершенствованиями, взятыми из <quote>4.4BSD-Lite2</quote>
            Калифорнийского Университета (Беркли).  Также она косвенно
            базируется на 386BSD (BSD Net/2, перенесённой на платформу &i386;
            Уильямом Джолитцем (William Jolitz)), хотя от того первоначального
            кода осталось очень мало.  Более подробные объяснения того, что
            представляет из себя FreeBSD и для чего она может вам пригодиться,
            можно найти на <ulink url="&url.base;/index.html">домашней
            странице FreeBSD</ulink>.</para>

          <para>FreeBSD используется компаниями, Интернет-провайдерами,
            научными работниками, профессионалами в вычислительной технике,
            студентами и рядовыми пользователями по всему миру для работы,
            образования и отдыха.</para>

          <para>Для более детального знакомства с FreeBSD, пожалуйста,
            обратитесь к <ulink url="&url.books.handbook;/index.html">
            Руководству по FreeBSD</ulink>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="FreeBSD-goals">
          <para>Какова цель FreeBSD?</para>
        </question>

        <answer>
          <para>Цель, преследуемая проектом FreeBSD - это предоставление
            программного обеспечения, которое может быть использовано в любых
            целях без каких бы то ни было ограничений.  Многие из нас
            вкладывают значительные усилия в её разработку (и проектирование) и
            определённо были бы не против получения финансовой поддержки, но
            требовать её мы не будем.  Мы надеемся, что наша основная и самая
            значительная <quote>миссия</quote> - предоставить код всем
            желающим, для любых целей, так чтобы он нашел самое широкое
            применение и принёс наибольшую пользу.  Это, на наш взгляд, одна
            из самых фундаментальных целей Free Software, которую мы с
            энтузиазмом поддерживаем.</para>

          <para>Часть исходного кода нашей системы, подпадающая под действие
            <ulink url="http://www.FreeBSD.org/copyright/COPYING">GNU General
            Public License (GPL)</ulink> или <ulink
            url="http://www.FreeBSD.org/copyright/COPYING.LIB">GNU Library
            General Public License (LGPL)</ulink>, имеет несколько
            больше ограничений, хотя и представляет собой навязывание доступа к
            исходным текстам, а не наоборот, как обычно.  Из-за дополнительных
            сложностей, которые могут возникнуть в случае коммерческого
            использования программного обеспечения GPL, мы стараемся, где
            только это возможно, заменить подобное программное обеспечение
            аналогичным, но подпадающим под менее строгую <ulink
            url="http://www.FreeBSD.org/copyright/freebsd-license.html">
            лицензию FreeBSD</ulink>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="bsd-license-restrictions">
          <para>Есть ли в лицензии FreeBSD какие-то ограничения?</para>
        </question>

        <answer>
          <para>Да.  Эти ограничения не касаются того, как именно вы
            используете код, но главным образом описывают ваше отношение при
            этом в целом к Проекту FreeBSD.  Если у вас есть серьезные
            проблемы с лицензированием, прочтите собственно <ulink
            url="http://www.FreeBSD.org/copyright/freebsd-license.html">текст
            лицензионного соглашения</ulink>.  Упрощенно оно может быть вкратце
            изложено следующим образом.</para>

          <itemizedlist>
            <listitem>
              <para>Не говорите, что это написано вами.</para>
            </listitem>

            <listitem>
              <para>Не судитесь с нами, если что-то не работает.</para>
            </listitem>
          </itemizedlist>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="replace-current-OS">
          <para>Может ли FreeBSD заменить операционную систему, используемую
            мною сейчас?</para>
        </question>

        <answer>
          <para>Для большинства людей, да.  Но этот ответ не так уж
            однозначен.</para>

          <para>Большинство пользователей на самом деле не используют
            операционную систему.  Они работают с приложениями.  Именно
            прикладные программы и используют операционную систему.  FreeBSD
            разработана для того, чтобы дать надежное и полнофункциональное
            окружение для приложений.  Она поддерживает широкий спектр
            Web-браузеров, офисных пакетов, программ для работы с электронной
            почтой, графических пакетов, программных сред, сетевых серверов и
            практически все, что вы можете захотеть.  Большинство этих
            приложений могут быть получено из <ulink
            url="http://www.FreeBSD.org/ports/">Коллекции
            Портов</ulink>.</para>

          <para>Если вам необходимо использовать приложение, которое доступно
            только для одной операционной системы, вам просто нельзя заменять
            операционную систему.  Однако есть вероятность, что похожая
            программа существует для FreeBSD.  Если вам нужен стабильно
            работающий сервер для офиса или сервер Интернет, надежная рабочая
            станция или просто возможность выполнять работу без сбоев, FreeBSD
            практически всегда справится со всем, что вам нужно.  Многие
            пользователи по всему миру, включая как новичков, так и опытных
            администраторов &unix;, используют FreeBSD в качестве своей
            единственной настольной операционной системы.</para>

          <para>Если вы переходите на FreeBSD с какого-то другого варианта
            &unix;, вы уже знаете большинство ваших потребностей.  Если вы
            привыкли к таким графическими операционными системам, как &windows;
            или старым версиям &macos;, будьте готовы к затратам
            дополнительного
            времени на изучение подхода &unix; к работе.  Этот FAQ и <ulink
            url="&url.books.handbook;/index.html">Руководство по
            FreeBSD</ulink> являются прекрасным способом начать это
            изучение.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="why-called-FreeBSD">
          <para>Почему система называется именно FreeBSD?</para>
        </question>

        <answer>
          <para>
            <itemizedlist>
              <listitem>
                <para>Она может использоваться безо всяческих выплат, даже
                  для извлечения выгоды.</para>
              </listitem>

              <listitem>
                <para>Все исходные тексты операционной системы свободно
                  доступны, на её использование в других разработках (как
                  коммерческих, так и некоммерческих) и дальнейшее
                  распространение наложены минимальные ограничения.</para>
              </listitem>

              <listitem>
                <para>Любой, у кого есть усовершенствования или исправления,
                  может предоставить свой код и он будет (правда, с парой
                  оговорок) добавлен в исходные тексты системы.</para>
              </listitem>
            </itemizedlist>
          </para>

          <para>Следует отметить, что слово <quote>free</quote>
            используется здесь в двух смыслах, один означает
            <quote>бесплатно</quote>, а другой <quote>вы можете делать всё,
            что хотите</quote>.  За исключением пары вещей, которые вы
            <emphasis>не можете</emphasis> делать с FreeBSD, например,
            претендовать на то, что являетесь её разработчиком, на самом
            деле можно делать с ней всё, что вам заблагорассудится.</para>
        </answer>
      </qandaentry>


      <qandaentry>
	<question id="differences-to-other-bsds">
	  <para>В чём заключается разница между FreeBSD и NetBSD, OpenBSD
            и другими операционными системами с открытыми кодами
            семейства BSD?</para>
	</question>

	<answer>
	  <para>Джеймс Ховард (James Howard) создал хорошее описание истории и
            различий между различными проектами для журнала <ulink
	    url="http://www.daemonnews.org/">DaemonNews</ulink> под названием
	    <ulink url="http://www.daemonnews.org/200104/bsd_family.html">
	    Семейное древо BSD</ulink>, в котором даётся подробный ответ на
            этот вопрос.</para>
	</answer>
      </qandaentry>


      <qandaentry>
        <question id="latest-version">
          <para>Какова последняя версия FreeBSD?</para>
        </question>

<!--
  Этот ответ является хаком для работы с тем фактом, что теперь имеется
  несколько "последних" версий FreeBSD.
-->

        <answer>
          <para>На данном этапе разработки FreeBSD существуют три параллельно
            разрабатываемые ветки; релизы делаются в двух из трёх веток.  Серия
            релизов 5.X выполняется из ветки <emphasis>5-STABLE</emphasis>, а
            серия релизов 6.X выполняется из <emphasis>6-STABLE</emphasis>.</para>

          <para>До выпуска 5.3 линейка 4.X была единственной, известной как
            <emphasis>-STABLE</emphasis>.  Однако после выхода 5.3, линейка 4.X
	    получит статус <quote>extended support</quote> (расширенная
	    поддержка) и вноситься будут исправления только для серьезных
	    проблем, к примеру исправления, связанные с безопасностью.
	    Ещё будут релизы из ветки <emphasis>5-STABLE</emphasis>, но она считается
	    <quote>устаревшей</quote> и большинство текущих изменений будут
	    только частью <emphasis>6-STABLE</emphasis>.</para>

          <para>Версия <ulink
            url="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/&rel.current;-RELEASE/">
            &rel.current;</ulink>, выпущенная &rel.current.date;, является
            самым последним релизом ветки <emphasis>6-STABLE</emphasis>.
            Версия <ulink
            url="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/&rel2.current;-RELEASE/">
            &rel2.current;</ulink>, выпущенная &rel2.current.date;, является
            самым последним релизом ветки <emphasis>5-STABLE</emphasis>.</para>

          <para>Если вкратце, то ветка <emphasis>-STABLE</emphasis>
            предназначена поставщикам услуг Internet, корпоративным
            пользователям, а также всем тем, кому в первую очередь нужна
            надёжность и минимальное количество отличий от последнего
            релиза по сравнению с новыми (и, возможно, ненадёжно работающими)
            возможностями последнего снэпшота <emphasis>-CURRENT</emphasis>.
            Релизы можно делать из любой ветки, но
            <emphasis>-CURRENT</emphasis> можно использовать только в том
            случае, если вы уверены, что готовы к постоянным (по
            сравнению со <emphasis>-STABLE</emphasis>) изменениям в работе
            системы.</para>

          <para>Релизы делаются <link linkend="release-freq">раз в
            несколько месяцев</link>.  Хотя многие стараются отслеживать
            актуальное состояние исходных текстов FreeBSD (обратите внимание на
            вопросы о <link linkend="current">&os.current;</link> и <link
            linkend="stable">&os.stable;</link>), делать это не обязательно,
            так как исходные тексты постоянно меняются.</para>

          <para>Более полную информацию о релизах FreeBSD можно получить со
            страницы о <ulink url="http://www.FreeBSD.org/releng/index.html">
            Процессе выпуска релизов</ulink> на Web-сайте FreeBSD.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="current">
          <para>Что такое FreeBSD-CURRENT?</para>
        </question>

        <answer>
          <para><ulink
            url="&url.books.handbook;/cutting-edge.html#CURRENT">
            &os.current;</ulink> - это версия операционной системы,
            находящаяся в стадии разработки, которая должна потом стать
            новой веткой &os.stable;.  Таким образом, она представляет реальный
            интерес только для разработчиков системы и её фанатов.  Обратитесь
            к <ulink url="&url.books.handbook;/cutting-edge.html#CURRENT">
            соответствующему
            разделу</ulink> <ulink url="&url.books.handbook;/index.html">
            Руководства</ulink> для прояснения деталей работы с
            -CURRENT.</para>

          <para>Если вы не специалист по операционным системам или не в
            состоянии отличить реальную проблему от временных явлений, вы не
            должны использовать &os.current;.  Эта ветвь зачастую меняется
            очень быстро и вполне может быть просто не работоспособна
            некоторое время.  Те, кто используют &os.current;, должны быть
            в состоянии анализировать любые проблемы и сообщать о них, если
            это действительно ошибки, а не <quote>глюки</quote>.  Сообщения
            типа <quote>make world produces some error about groups</quote>
            в списке рассылки -CURRENT могут быть восприняты
            пренебрежительно.</para>

          <para>Ежедневно из веток -CURRENT и -STABLE делаются <ulink
            url="&url.base;/releases/snapshots.html">снэпшоты</ulink>.
            Дистрибутивы некоторых снэпшотов сделаны общедоступными.
            Их предназначение:</para>

          <itemizedlist>
            <listitem>
              <para>Тестирование самой последней версии программы установки
                системы.</para>
            </listitem>

            <listitem>
              <para>Дать людям, которые хотят работать с -CURRENT или -STABLE,
                но не имеют времени или возможности (пропускной способности)
                для отслеживания ежедневных изменений, простой способ её
                установки.</para>
            </listitem>

            <listitem>
              <para>Фиксация точки для последующих ссылок в случае,
                если позже мы что-нибудь очень сильно сломаем. (Хотя CVS, как
                правило, не позволяет случиться ничему такому ужасному :)</para>
            </listitem>

            <listitem>
              <para>Все новые возможности, которым требуется тестирование,
                должны иметь как можно больше потенциальных тестеров.</para>
            </listitem>
          </itemizedlist>

          <para>Не утверждается, что всякий снэпшот -CURRENT имеет качество
            <quote>готового продукта</quote>.  Если вам нужна стабильно
            работающая и полностью оттестированная система, то необходимо
            дождаться выхода полного релиза или воспользоваться снэпшотами
            -STABLE.</para>

          <para>Снэпшоты доступны непосредственно с <ulink
	    url="ftp://current.FreeBSD.org/pub/FreeBSD/snapshots/">
	    ftp://current.FreeBSD.org/pub/FreeBSD/snapshots/</ulink>.</para>

          <para>Снэпшоты, как правило, генерируются ежедневно для всех активно
            разрабатываемых веток.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="stable">
          <para>В чём смысл FreeBSD-STABLE?</para>
        </question>

        <answer>
          <para>После того, как была выпущена FreeBSD 2.0.5, разработка FreeBSD
            разделилась на две части.  Одна ветка получила название <ulink
            url="&url.books.handbook;/current-stable.html#STABLE">
            -STABLE</ulink>, а другая <ulink
            url="&url.books.handbook;/current-stable.html#CURRENT">
            -CURRENT</ulink>.
            FreeBSD-STABLE предназначена для провайдеров услуг Интернет и
            других коммерческих пользователей, для которых неожиданные
            изменения или экспериментальные возможности
            весьма нежелательны.  В неё вносятся только хорошо оттестированные
            исправления и другие небольшие последовательные усовершенствования.
            С другой стороны, FreeBSD-CURRENT являлась единой веткой, не
            разрываемой с момента выхода версии 2.0 и ведущей к
            6.0-RELEASE и последующим релизам.  Непосредственно перед выходом
            6.0-RELEASE была создана ветка 6-STABLE, а &os.current; стала
            7-CURRENT.  Для получения более подробной информации обратитесь к
            разделу статьи <quote><ulink
            url="&url.articles.releng;/release-proc.html#REL-BRANCH">
            Подготовка релизов FreeBSD: Создание ветки
            релиза</ulink></quote>.</para>

          <para>Ветвь 2.2-STABLE была завершена выходом релиза 2.2.8.  Ветвь
            3-STABLE была завершена выходом релиза 3.5.1.  Единственными
            изменениями в этих ветвях могут быть только исправления ошибок,
            касающихся безопасности.  Поддержка веток 4-STABLE и 5-STABLE продолжится
            некоторое время, но в основном будет касаться исправления ошибок в
            информационной защите и других серьёзных вопросах.</para>

          <para>Активно разрабатываемой веткой -STABLE является
	    &rel.current;-STABLE.  Последним релизом ветки &rel.current;-STABLE является
            &rel.current;-RELEASE, выпущенный &rel.current.date;.</para>

          <para>Активно разрабатываемой веткой -CURRENT является ветка
            7-CURRENT, которая движется к созданию следующего поколения &os;.
            Прочтите ответ на вопрос <link linkend="current">Что такое
            &os;-CURRENT?</link> для получения более подробной информации об
            этой ветке.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="release-freq">
          <para>В какой момент выпускаются новые версии FreeBSD?</para>
        </question>

        <answer>
          <para>&a.re; выпускает новую версию FreeBSD в среднем раз в четыре
            месяца.  Даты релизов обычно объявляются заранее, так что те, кто
            работает над системой, знают, когда их проекты должны быть
            закончены и протестированы.  Период тестирования предшествует
            выходу каждого релиза, для того, чтобы удостовериться в том, что
            добавление новых возможностей не повлияло на стабильность работы
            релиза.  Многие пользователи расценивают такую осторожность
            как одну из приятнейших черт FreeBSD, хотя необходимость дожидаться
            -STABLE для получения всех этих новых возможностей может
            несколько разочаровывать.</para>

          <para>Дополнительная информация о процессе подготовки релиза (в том
            числе планы выпуска последующих релизов) может быть найдена на
            страницах Web-сайта FreeBSD, посвящённых <ulink
            url="http://www.FreeBSD.org/releng/index.html">выпуску
            релизов</ulink>.</para>

          <para>Для тех, кому нужно или хочется, ежедневно выпускаются
            бинарные релизы, как это описано выше.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="responsible">
          <para>Кто разрабатывает FreeBSD?</para>
        </question>

        <answer>
          <para>Решения, которые касаются ключевых моментов в проекте FreeBSD,
            такие, как общее направление развития проекта или кто
            может добавлять код к дереву исходных текстов, принимаются <ulink
            url="&url.articles.contributors;/article.html#STAFF-CORE">основной
            командой</ulink> разработчиков (Core Team), состоящей из 9 человек.
            Также существует многочисленная группа, состоящая из более чем 300
            так называемых <ulink
            url="&url.articles.contributors;/article.html#STAFF-COMMITTERS">
            коммиттеров</ulink> (committers), которые могут вносить изменения
            прямо в дерево исходных текстов FreeBSD.</para>

          <para>Однако большинство нетривиальных изменений широко обсуждается
            в <link linkend="mailing">списках рассылки</link>, и не существует
            никаких ограничений на участие в подобных дискуссиях.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="where-get">
          <para>Где можно найти FreeBSD?</para>
        </question>

        <answer>
          <para>Все основные релизы FreeBSD доступны по FTP с <ulink
            url="ftp://ftp.FreeBSD.org/pub/FreeBSD/">FTP-сервера
            FreeBSD</ulink>:</para>

          <itemizedlist>
            <listitem>
              <para>Последний релиз 6-STABLE, &rel.current;-RELEASE, можно
                найти в <ulink
                url="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/&rel.current;-RELEASE">
                каталоге с &rel.current;-RELEASE</ulink>.</para>
            </listitem>

            <listitem>
              <para><ulink url="ftp://current.FreeBSD.org/pub/FreeBSD/">
                Снэпшот-релизы</ulink> для ветки <link
                linkend="current">-CURRENT</link> выпускаются ежедневно, но
                они нужны исключительно для разработчиков и тех, кто тестирует
                самые последние наработки.</para>
            </listitem>

            <listitem>
              <para>Последний релиз 5-STABLE, &rel2.current;-RELEASE, можно
                найти в <ulink
                url="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/&rel2.current;-RELEASE/">
                каталоге с &rel2.current;-RELEASE</ulink>.</para>
            </listitem>

            <listitem>
              <para><ulink
                url="ftp://current.FreeBSD.org/pub/FreeBSD/snapshots/">Снэпшоты
                5.X</ulink> обычно делаются ежедневно.</para>
            </listitem>
          </itemizedlist>

          <para>Информация о получении/приобретении FreeBSD на CD, DVD и
            других носителях доступна в <ulink
            url="&url.books.handbook;/mirrors.html">Руководстве</ulink>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="access-pr">
          <para>Как можно получить доступ к базе сообщений о проблемах (Problem
            Report)?</para>
        </question>

        <answer>
          <para>База данных всех сообщений пользователей о проблемах может быть
            запрошена с помощью нашего <ulink
            url="http://www.FreeBSD.org/cgi/query-pr-summary.cgi?query">
            Web-интерфейса</ulink>.</para>

	  <para>Команда &man.send-pr.1; может быть использована для передачи
	    и изменения сообщений о проблемах через электронную почту.
	    Альтернативно можно использовать <ulink
	    url="http://www.freebsd.org/send-pr.html">Web-интерфейс для отсылки
	    сообщений об ошибках</ulink> через браузер.</para>

          <para>Перед тем, как посылать сообщение об ошибке, пожалуйста,
            прочтите статью <ulink
            url="&url.articles.problem-reports;/article.html">Составление
            сообщений о проблеме во FreeBSD</ulink> о том, как писать хорошие
            сообщения об ошибках.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="other-info-sources">
          <para>Другие источники информации.</para>
        </question>

        <answer>
          <para>Пожалуйста, посмотрите список имеющейся <ulink
            url="http://www.FreeBSD.org/docs.html">документации</ulink> на
            главной странице сайта <ulink
            url="http://www.FreeBSD.org">FreeBSD</ulink>.</para>
        </answer>
      </qandaentry>
    </qandaset>
  </chapter>


  <chapter id="support">
    <title>Документация и поддержка</title>

    <qandaset>
      <qandaentry>
        <question id="books">
          <para>Есть ли хорошие книги о FreeBSD?</para>
        </question>

        <answer>
          <para>В рамках проекта создан широкий спектр документации, которая
            доступна в on-line по следующей ссылке: <ulink
            url="http://www.FreeBSD.org/docs.html"></ulink>.  Эти же самые
            документы доступны и в виде пакаджей, которые можно с лёгкостью
            установить в вашу систему FreeBSD.  Детальная информация о пакаджах
            с документацией может быть найдена в последующих параграфах.</para>

          <para>Кроме того, в Библиографии в конце этого FAQ и в Руководстве
            имеются ссылки на другие рекомендуемые для чтения книги.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="doc-formats">
          <para>Есть ли версии документации в другом формате, например,
            в виде обычного текста ASCII или &postscript;?</para>
        </question>

        <answer>
          <para>Да.  Документация имеется в нескольких различных форматах и
            упакованная разными способами на FTP-сервере FreeBSD, и находится
            она в каталоге <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">
            /pub/FreeBSD/doc/</ulink>.</para>

          <para>Документация подразделяется на категории различными способами.
            Это включает:</para>

          <itemizedlist>
            <listitem>
              <para>Имя документа, например, <literal>faq</literal> или
                <literal>handbook</literal>.</para>
            </listitem>

            <listitem>
              <para>Язык и кодировка документа.  Они опираются на имена
                локализаций, которые вы найдёте в каталоге
                <filename>/usr/share/locale</filename> вашей системы FreeBSD.
                На данный момент для документации поддерживаются следующие
                языки и кодировки:</para>

              <informaltable frame="none" pgwide="1">
                <tgroup cols="2">
                  <thead>
                    <row>
                      <entry>Кодировка</entry>

                      <entry>Язык</entry>
                    </row>
                  </thead>

                  <tbody>
                    <row>
                      <entry><literal>en_US.ISO8859-1</literal></entry>

                      <entry>Английский (США)</entry>
                    </row>

                    <row>
                      <entry><literal>de_DE.ISO8859-1</literal></entry>

                      <entry>Немецкий</entry>
                    </row>

                    <row>
                      <entry><literal>es_ES.ISO8859-1</literal></entry>

                      <entry>Испанский</entry>
                    </row>

                    <row>
                      <entry><literal>fr_FR.ISO8859-1</literal></entry>

                      <entry>Французский</entry>
                    </row>

                    <row>
                      <entry><literal>it_IT.ISO8859-15</literal></entry>

                      <entry>Итальянский</entry>
                    </row>

                    <row>
                      <entry><literal>ja_JP.eucJP</literal></entry>

                      <entry>Японский (кодировка EUC)</entry>
                    </row>

                    <row>
                      <entry><literal>ru_RU.KOI8-R</literal></entry>

                      <entry>Русский (кодировка KOI8-R)</entry>
                    </row>

		    <row>
		      <entry><literal>zh_CN.GB2312</literal></entry>

		      <entry>Упрощённый китайский (кодировка GB2312)</entry>
		    </row>

                    <row>
                      <entry><literal>zh_TW.Big5</literal></entry>

                      <entry>Традиционный китайский (кодировка Big5)</entry>
                    </row>
                  </tbody>
                </tgroup>
              </informaltable>

              <note>
                <para>Некоторые документы могут иметься не на всех
                  языках.</para>
              </note>
            </listitem>

            <listitem>
              <para>Формат документа.  Мы создаём документацию в нескольких
                различных форматах.  У каждого из форматов имеются свои плюсы
                и свои минусы.  Некоторые форматы лучше подходят для чтения
                в on-line, когда как другие предназначены для получения
                эстетично выглядящей на бумаге копии.  Наличие документации
                во всех этих форматах обеспечивает возможность прочтения
                нашими пользователями любой её части как с экрана монитора, так
                и на бумаге после вывода на печать.  На данный момент
                поддерживаются следующие форматы;</para>

              <informaltable frame="none" pgwide="1">
                <tgroup cols="2">
                  <thead>
                    <row>
                      <entry>Формат</entry>

                      <entry>Значение</entry>
                    </row>
                  </thead>

                  <tbody>
                    <row>
                      <entry><literal>html-split</literal></entry>

                      <entry>Набор маленьких связанных друг с другом
                        HTML-файлов.</entry>
                    </row>

                    <row>
                      <entry><literal>html</literal></entry>

                      <entry>Один большой HTML-файл, полностью содержащий
                        документ.</entry>
                    </row>

                    <row>
                      <entry><literal>pdb</literal></entry>

                      <entry>Формат баз данных Palm Pilot, для использования с
                        утилитой <ulink
                        url="http://www.iSilo.com/">iSilo</ulink>.</entry>
                    </row>

                    <row>
                      <entry><literal>pdf</literal></entry>

                      <entry>Adobe's Portable Document Format</entry>
                    </row>

                    <row>
                      <entry><literal>ps</literal></entry>

                      <entry>&postscript;</entry>
                    </row>

                    <row>
                      <entry><literal>rtf</literal></entry>

                      <entry>Rich Text Format от Microsoft
                        <footnote>
                          <para>Номера страниц при загрузке в Word
                            автоматически не обновляются.  Нажмите
                            <keycombo action="simul">
                              <keycap>CTRL</keycap>
                              <keycap>A</keycap>
                            </keycombo>,
                            <keycombo action="simul">
                              <keycap>CTRL</keycap>
                              <keycap>END</keycap>
                            </keycombo>,
                            <keycap>F9</keycap> после загрузки документа для
                            обновления номеров страниц.</para>
                        </footnote>
                      </entry>
                    </row>

                    <row>
                      <entry><literal>txt</literal></entry>

                      <entry>Обычный текст</entry>
                    </row>
                  </tbody>
                </tgroup>
              </informaltable>
            </listitem>

            <listitem>
              <para>Способ компрессии и создания архива.  Сейчас используется
                три.</para>

              <orderedlist>
                <listitem>
                  <para>В случае формата <literal>html-split</literal>, файлы
                    архивируются с помощью &man.tar.1;.  Получающийся файл
                    <filename>.tar</filename> затем подвергается сжатию по
                    схемам, подробно описываемым далее.</para>
                </listitem>

                <listitem>
                  <para>Все другие форматы генерируют один файл с именем
                    <filename>book.<replaceable>format</replaceable></filename>
                    (то есть <filename>book.pdb</filename>,
                    <filename>book.html</filename>, и так далее).</para>

                  <para>Эти файлы затем сжимаются по двум схемам сжатия.</para>

                  <informaltable frame="none" pgwide="1">
                    <tgroup cols="2">
                      <thead>
                        <row>
                          <entry>Схема</entry>

                          <entry>Описание</entry>
                        </row>
                      </thead>

                      <tbody>
                        <row>
                          <entry><literal>zip</literal></entry>

                          <entry>Формат Zip.  Если вам нужно будет развернуть
                            это во FreeBSD, то потребуется установить сначала
                            порт <filename
                            role="package">archivers/unzip</filename>.</entry>
                        </row>

                        <row>
                          <entry><literal>bz2</literal></entry>

                          <entry>Формат BZip2.  Используется реже, чем Zip,
                            но, как правило, даёт файлы меньшего размера.
                            Чтобы работать с такими файлами, установите порт
                            <filename
                            role="package">archivers/bzip2</filename>.</entry>
                        </row>
                      </tbody>
                    </tgroup>
                  </informaltable>

                  <para>Таким образом, версия Руководства в формате
                    &postscript;,
                    упакованная с помощью BZip2, будет находиться в файле с
                    именем <filename>book.ps.bz2</filename> в каталоге
                    <filename>handbook/</filename>.</para>
                </listitem>
              </orderedlist>
            </listitem>
          </itemizedlist>

          <para>После выбора формата и способа компрессии, в котором вы хотите
            получить файл, вы должны определиться, должен ли он быть в виде
            <emphasis>пакаджа</emphasis> FreeBSD.</para>

          <para>Плюсом сгрузки и установки в виде пакаджа является то, что
            документация затем может управляться обычными средствами для
            работы с пакаджами, такими, как &man.pkg.add.1;
            и &man.pkg.delete.1;.</para>

          <para>Если вы решили сгрузить и установить пакадж, то вы должны
            знать имя файла.  Файлы, содержащие документацию в виде пакаджей,
            находятся в каталоге <filename>packages</filename>.  Каждый такой
            файл имеет вид <filename><replaceable>document-name</replaceable>.<replaceable>lang</replaceable>.<replaceable>encoding</replaceable>.<replaceable>format</replaceable>.tgz</filename>.</para>

          <para>Например, FAQ на английском языке в формате PDF находится в
            пакадже <filename>faq.en_US.ISO8859-1.pdf.tgz</filename>.</para>

          <para>Зная это, для установки пакаджа с англоязычным FAQ в формате
            PDF вы можете воспользоваться следующей командой.</para>

          <screen>&prompt.root; <userinput>pkg_add ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/packages/faq.en_US.ISO8859-1.pdf.tgz</userinput></screen>

          <para>Сделав это, можно использовать утилиту &man.pkg.info.1; для
            определения того, куда файл был установлен.</para>

          <screen>&prompt.root; <userinput>pkg_info -f faq.en_US.ISO8859-1.pdf</userinput>
Information for faq.en_US.ISO8859-1.pdf:

Packing list:
        Package name: faq.en_US.ISO8859-1.pdf
        CWD to /usr/share/doc/en_US.ISO8859-1/books/faq
File: book.pdf
        CWD to .
File: +COMMENT (ignored)
File: +DESC (ignored)</screen>

          <para>Как видите, <filename>book.pdf</filename> будет установлен в
            <filename>/usr/share/doc/en_US.ISO8859-1/books/faq</filename>.</para>

          <para>Если же вы не хотите использовать пакаджи, то вам нужно самим
            сгрузить упакованные файлы, распаковать их, а затем скопировать
            документацию в соответствующие места.</para>

          <para>Например, версия FAQ в виде отдельных HTML-файлов, упакованная
            при помощи &man.bzip2.1;, находится в файле
            <filename>doc/ru_RU.KOI8-R/books/faq/book.html-split.tar.bz2</filename>.
            Для сгрузки и распаковки этого файла вам нужно сделать вот
            что.</para>

          <screen>&prompt.root; <userinput>fetch ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/en_US.ISO8859-1/books/faq/book.html-split.tar.bz2</userinput>
&prompt.root; <userinput>bzip2 -d book.html-split.tar.bz2</userinput>
&prompt.root; <userinput>tar xvf book.html-split.tar</userinput></screen>

          <para>У вас получится набор файлов <filename>.html</filename>.
            Главным является <filename>index.html</filename>, и в нём
            находится оглавление, вводный материал и ссылки на остальные части
            документа.  После этого вы их можете копировать и перемещать при
            необходимости на окончательное местоположение.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="mailing">
          <para>Где найти информацию по спискам рассылки FreeBSD?</para>
        </question>

        <answer>
          <para>Исчерпывающая информация содержится в <ulink
            url="&url.books.handbook;/eresources.html#ERESOURCES-MAIL">
            разделе</ulink>
            Руководства, который посвящён спискам рассылки.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="newsgroups">
          <para>Какие существуют телеконференции по FreeBSD?</para>
        </question>

        <answer>
          <para>Полная информация о группах новостей есть в <ulink
            url="&url.books.handbook;/eresources-news.html">разделе</ulink>
            Руководства, касающемся телеконференций.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="irc">
          <para>Существуют ли каналы IRC (Internet Relay Chat) по
            FreeBSD?</para>
        </question>

        <answer>
          <para>Да, большинство сетей IRC имеют канал FreeBSD:</para>

          <para>
            <itemizedlist>
              <listitem>
                <para>Канал <literal>#FreeBSD</literal> в сети <ulink
                  url="http://www.efnet.org/index.php">EFNet</ulink> посвящён
                  FreeBSD, но не обращайтесь туда за технической поддержкой и
                  даже не пытайтесь найти человека, который поможет вам
                  обойтись без чтения страниц Справочника или собственных
                  изысканий.  Этот канал предназначен в первую и основную
                  очередь для общения, и в круг обсуждаемых тем входят секс,
                  спорт, ядерное оружие, как будто это и есть FreeBSD.  В
                  общем, вас предупредили!  Канал доступен на сервере
                  <hostid>irc.chat.org</hostid>.</para>
              </listitem>

              <listitem>
                <para>Канал <literal>#FreeBSDhelp</literal> в сети <ulink
                  url="http://www.efnet.org/index.php">EFNet</ulink>
                  предназначен для помощи пользователям FreeBSD.  Здесь гораздо
                  более благосклонно относятся к вопросам, чем на канале
                  <literal>#FreeBSD</literal>.</para>
              </listitem>

              <listitem>
                <para>Канал <literal>#FreeBSD</literal> в сети <ulink
                  url="http://www.dal.net/">DALNET</ulink>
                  доступен на сервере <hostid>irc.dal.net</hostid> в США и на
                  <hostid>irc.eu.dal.net</hostid> в Европе.</para>
              </listitem>

              <listitem>
                <para>Канал <literal>#FreeBSDHelp</literal> в сети
                  <ulink url="http://www.dal.net/">DALNET</ulink>
                  доступен на серверах <hostid>irc.dal.net</hostid> в США
                  и <hostid>irc.eu.dal.net</hostid> в Европе.</para>
              </listitem>

              <listitem>
                <para>Канал <literal>#FreeBSD</literal> в сети <ulink
                  url="http://www.undernet.org/">UNDERNET</ulink>
                  доступен на серверах <hostid>us.undernet.org</hostid> в США и
                  <hostid>eu.undernet.org</hostid> в Европе.  Так как это канал
                  взаимопомощи, приготовьтесь к чтению документации, к которой
                  вас отошлют.</para>
              </listitem>

	      <listitem>
		<para>Канал <literal>#FreeBSD</literal> в сети
		<ulink url="http://www.rusnet.org.ru/">RUSNET</ulink>
		это канал для русскоговорящих посетителей, посвящённый
	        помощи пользователям &os;.  Также это хорошее место
		для не технических дискуссий.</para>
           </listitem>
            </itemizedlist>
          </para>

          <para>Все эти каналы разные и не имеют отношения друг к другу.  Их
            стили общения также отличаются, так что вам, может быть, придётся
            попробовать все, чтобы найти тот, который соответствует вашему
            стилю.  Как и обычно с <emphasis>любым</emphasis> каналом IRC,
            если вы легко раздражаетесь или не можете иметь дела с большим
            количеством лиц школьного (и младшего школьного) возраста,
            пытающихся озвучить свои попытки самоутвердиться, не обращайте на
            это внимания.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="training">
          <para>Где можно пройти платные курсы по FreeBSD и получить
            поддержку?</para>
        </question>

        <answer>
          <para>DaemonNews проводит платные курсы и осуществляет коммерческую
            поддержку FreeBSD.  Дополнительную информацию можно найти на их
            сайте <ulink url="http://www.bsdmall.com/">BSD Mall</ulink>.</para>

          <para>FreeBSD Mall предоставляет поддержку FreeBSD на коммерческой
            основе.  Вы можете получить более полную информацию с их <ulink
            url="http://www.freebsdmall.com/">Web-сайта</ulink>.</para>

          <para>Чтобы попасть в этот список, другие организации,
            осуществляющие обучение и поддержку, должны обратиться к
            нам в проект.</para>
        </answer>
      </qandaentry>
    </qandaset>
  </chapter>


  <chapter id="install">
    <chapterinfo>
      <author>
        <firstname>Nik</firstname>
        <surname>Clayton</surname>
        <affiliation>
          <address><email>nik@FreeBSD.org</email></address>
        </affiliation>
      </author>
    </chapterinfo>

    <title>Установка</title>

    <qandaset>
      <qandaentry>
        <question id="floppy-download">
          <para>Какой файл нужно скачать для установки FreeBSD?</para>
        </question>

        <answer>
          <para>Для 4.X вам нужны образы двух дискет:
            <filename>floppies/kernel.flp</filename> и
            <filename>floppies/mfsroot.flp</filename>.  Эти образы нужно
            перенести на дискеты с помощью таких утилит, как
            <command>fdimage</command> или &man.dd.1;.
            Во &os; 5.3 и её более поздних версиях структура загрузочных
            дисков была изменена.  Вам понадобятся файлы
            <filename>floppies/boot.flp</filename> и все
            <filename>floppies/kern<replaceable>X</replaceable></filename>
            (последних на данный момент имеется два).</para>

          <para>Если вы хотите скачать дистрибутив самостоятельно (например,
            для установки с раздела DOS), вот список рекомендованных частей
            дистрибутива:</para>

          <itemizedlist>
            <listitem>
              <para>base/ (bin/ для 4.X)</para>
            </listitem>

            <listitem>
              <para>manpages/</para>
            </listitem>

            <listitem>
              <para>compat*/</para>
            </listitem>

            <listitem>
              <para>doc/</para>
            </listitem>

            <listitem>
              <para>src/ssys.*</para>
            </listitem>
          </itemizedlist>

          <para>Полные инструкции по этой процедуре и об установке вообще можно
            найти в <ulink url="&url.books.handbook;/install.html">
            разделе</ulink> Руководства, посвящённом установке FreeBSD.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="floppy-image-too-large">
          <para>Помогите! Загрузочный файл не помещается на дискету!</para>
        </question>

        <answer>
          <para>На дискету размером 3.5 дюйма (1.44 Мбайт) может поместиться
            1474560 байт данных.  Образ дискеты имеет размер ровно 1474560
            байт.</para>

          <para>Типичные ошибки при подготовке загрузочной дискеты:</para>

          <itemizedlist>
            <listitem>
              <para>Образ дискеты был загружен по FTP не в режиме
                <emphasis>binary</emphasis>.</para>

              <para>Некоторые клиентские программы FTP используют по умолчанию
                текстовый (<emphasis>ascii</emphasis>) режим передачи и
                пытаются поменять все принятые последовательности символов
                "конец строки" на соответствующие им в вашей системе.  В таком
                случае образ загрузочного диска будет неизбежно испорчен.
                Проверьте размер полученного файла: если он не
                <emphasis>точно</emphasis> такой же, как на FTP-сервере, то
                ошибка произошла, скорее всего, в процессе передачи.</para>

              <para>Во избежание этого введите команду
                <emphasis>binary</emphasis> в командной строке FTP после того,
                как вы подключитесь к серверу, но до того, как начали
                скачивать файл.</para>
            </listitem>

            <listitem>
              <para>Для переноса образа на дискету была использована команда DOS
                <command>copy</command> (или её аналог с графическим
                интерфейсом).</para>

              <para>Программы типа <command>copy</command> не работают с
                образами дискет, предназначенными для загрузки.  Образ содержит
                полное содержимое дискеты, дорожка за дорожкой, и не
                предназначен для помещения на дискету в качестве обычного
                файла. Вам необходимо перенести его на дискету
                <quote>непосредственно</quote>, используя низкоуровневые
                средства (такие, как <command>fdimage</command> или
                <command>rawrite</command>), описанные в <ulink
                url="&url.books.handbook;/install.html">
                Руководстве</ulink>.</para>
            </listitem>
          </itemizedlist>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="install-instructions-location">
          <para>Где инструкции по установке FreeBSD?</para>
        </question>

        <answer>
          <para>Инструкции по установке могут быть найдены в
            <ulink url="&url.books.handbook;/install.html">главе</ulink>
            Руководства, посвящённой установке FreeBSD.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="need-to-run">
          <para>Что мне нужно иметь для запуска FreeBSD?</para>
        </question>

        <answer>
          <para>Для версий, предшествующих 5.X, вам нужен ПК не ниже 386, с 5
            или более мегабайтами ОЗУ и по крайней мере 60 Мбайтами свободного
            пространства на жёстком диске.  Программе установки &os; требуется
            несколько больше оперативной памяти, так что на практике
            минимальным требованием для отдельно стоящей системы является 16
            Мбайт оперативной памяти.</para>

          <para>Для работы &os; версий 5.X и выше необходим ПК класса 486 и
            выше с оперативной памятью объёмом не менее 24 Мбайт и жёстким
            диском объёмом не менее 150 Мбайт.</para>

          <para>Все версии &os; могут работать с недорогими
            графическими адаптерами MDA, но для работы с X11R6 требуется
            адаптер стандарта VGA или лучше.</para>

          <para>Обратитесь также к <xref linkend="hardware">.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="four-meg-ram-install">
          <para>У меня только 4 Мбайт оперативной памяти.  Смогу ли я
            установить FreeBSD?</para>
        </question>

        <answer>
          <para>Для установки &os; 4.X требуется не менее 5 Мбайт ОЗУ, а для
            установки &os; 5.X и более новых версий понадобится не менее 8
            Мбайт оперативной памяти.</para>

          <para>Все версии FreeBSD до версии 5.X будут
            <emphasis>работать</emphasis> с 4 Мбайтами ОЗУ, просто на 4 Мбайтах
            нельзя запустить установочную программу.  Вы
            можете добавить дополнительную память для выполнения установки, а
            после того, как система заработает,
            вернуться к конфигурации с 4 Мбайтами.  Либо вы можете перенести
            ваш диск на компьютер с достаточным объёмом оперативной памяти,
            установить на него систему и вернуть диск обратно.</para>

          <para>Для работы с 4 Мбайтами оперативной памяти вы должны построить
            специальное ядро.  Кто-то даже ухитрялся загружать &os; с 2
            Мбайтами оперативной памяти, хотя система была практически
            неработоспособна.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="custom-boot-floppy">
          <para>Как сделать оригинальную загрузочную дискету?</para>
        </question>

        <answer>
          <para>В настоящий момент нет <emphasis>простого</emphasis> способа
            сделать оригинальную загрузочную дискету.  Вам придётся делать
            новый релиз полностью, включая загрузочную дискету.</para>

          <para>Чтобы сделать оригинальный релиз, следуйте инструкциям в
            статье о <ulink url="&url.articles.releng;/article.html">процессе
            выпуска релизов</ulink>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="multiboot">
          <para>Могу ли я иметь более чем одну операционную систему на моём
            ПК?</para>
        </question>

        <answer>
          <para>Взгляните на это <ulink
            url="&url.articles.multi-os;/index.html">
            руководство</ulink>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="windows-coexist">
          <para>Может ли &windows; сосуществовать с FreeBSD?</para>
        </question>

        <answer>
          <para>Сначала установите &windows;, а затем FreeBSD.  Менеджер
            загрузки FreeBSD будет управлять процессом загрузки &windows; или
            FreeBSD.  Если после этого вы ещё раз выполните процедуру установки
            &windows;, то при этом менеджер загрузки будет грубо
            удалён.  Если такое случится, обратитесь к следующему
            разделу.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="win95-damaged-boot-manager">
          <para>&windows; уничтожила мой менеджер загрузки! Как мне его
            вернуть?</para>
        </question>

        <answer>
          <para>Вы можете переустановить менеджер загрузки FreeBSD тремя
            способами:</para>

          <itemizedlist>
            <listitem>
              <para>Запустите DOS, перейдите в каталог tools/ вашего
                дистрибутива FreeBSD и найдите программу
                <filename>bootinst.exe</filename>.  Запустите её следующим
                образом:</para>

              <screen><prompt>...\TOOLS&gt;</prompt> <userinput>bootinst.exe boot.bin</userinput></screen>

              <para>и менеджер загрузки будет переустановлен.</para>
            </listitem>

            <listitem>
              <para>Загрузитесь с установочной дискеты FreeBSD и перейдите в
                меню установки Custom install.  Выберите пункт Partition.
                Выберите устройство, на котором будет располагаться ваш
                менеджера загрузки (это будет самый первый диск) и когда вы
                перейдете к редактированию
                разделов, первым делом (то есть ещё не делая никаких изменений)
                выберите (W)rite.  Последует запрос на подтверждение, ответьте
                yes, и когда вы попадёте в меню выбора менеджера загрузки,
                выберите пункт <quote>Boot Manager</quote>.  Менеджер загрузки
                будет переписан на диск.  Теперь нужно выйти из меню установки
                и загрузиться с винчестера как обычно.</para>
            </listitem>

            <listitem>
              <para>Загрузитесь с установочной дискеты (или компакт-диска)
                FreeBSD и найдите пункт меню <quote>Fixit</quote>.  Выберите
                Fixit floppy или CDROM #2 (<quote>живая</quote> файловая
                система) соответственно вашему случаю и вы окажетесь в
                приглашении командного процессора.
                Теперь выполните следующую команду:</para>

              <screen><prompt>Fixit#</prompt> <userinput>fdisk -B -b /boot/boot0 <replaceable>bootdevice</replaceable></userinput></screen>

              <para>подставив вместо <replaceable>bootdevice</replaceable>
                название реально используемого для загрузки устройства,
                например, <devicename>ad0</devicename> (первый диск IDE),
                <devicename>ad4</devicename> (первый диск IDE на дополнительном
                контроллере), <devicename>da0</devicename> (первый диск SCSI) и
                тому подобное.</para>
            </listitem>
          </itemizedlist>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="boot-on-thinkpad">
          <para>На компьютерах IBM Thinkpad серий A, T и X операционная система
            устанавливается, но при следующей перезагрузке машины зависают.
            Как можно от этого избавиться?</para>
        </question>

        <answer>
          <para>Из-за ошибки в первых версиях BIOS от IBM раздел FreeBSD на
            этих машинах распознаётся как возможный служебный раздел FAT для
            режима сна.  Когда BIOS пытается обработать раздел FreeBSD,
            происходит зависание.</para>

          <para>Согласно IBM<footnote> <para>Письмо от Keith Frechette
            <email>kfrechet@us.ibm.com</email>.</para></footnote>,
            исправление включено в следующие релизы моделей/BIOS.</para>

          <informaltable frame="none" pgwide="1">
            <tgroup cols="2">
              <thead>
                <row>
                  <entry>Модель</entry>

                  <entry>Номер версии BIOS</entry>
                </row>
              </thead>

              <tbody>
                <row>
                  <entry>T20</entry>

                  <entry>IYET49WW и выше</entry>
                </row>

                <row>
                  <entry>T21</entry>

                  <entry>KZET22WW и выше</entry>
                </row>

                <row>
                  <entry>A20p</entry>

                  <entry>IVET62WW и выше</entry>
                </row>

                <row>
                  <entry>A20m</entry>

                  <entry>IWET54WW и выше</entry>
                </row>

                <row>
                  <entry>A21p</entry>

                  <entry>KYET27WW и выше</entry>
                </row>

                <row>
                  <entry>A21m</entry>

                  <entry>KXET24WW и выше</entry>
                </row>

                <row>
                  <entry>A21e</entry>

                  <entry>KUET30WW</entry>
                </row>
              </tbody>
            </tgroup>
          </informaltable>

          <para>Сообщалось, что в более поздних версиях BIOS от IBM эта ошибка
            может появиться снова.  <ulink
            url="http://docs.FreeBSD.org/cgi/mid.cgi?20010427133759.A71732">Это
            сообщение</ulink> от Jacques Vidrine в &a.mobile; описывает
            процедуру, выполнение которой может помочь, если ваш новый лэптоп
            от IBM не загружает FreeBSD, и вы можете изменить BIOS.</para>

          <para>Если у вас BIOS более ранней версии и обновление для вас не
            представляется возможным, то это можно обойти, установив FreeBSD,
            изменив идентификатор раздела, используемый FreeBSD и установив
            новые загрузочные блоки, которые могут работать с различными ID
            разделов.</para>

          <para>Во-первых, вам нужно привести компьютер в состояние, когда он
            проходит через экран самотестирования.  Для этого требуется включить
            машину, не позволяя ей найти раздел FreeBSD на ведущем диске.  Одним
            из способов сделать это является извлечение винчестера и временное
            его установка на более старый ThinkPad (такой, как ThinkPad 600) или
            настольный ПК с подходящим переходным кабелем.  Здесь вы можете
            удалить раздел FreeBSD и вернуть диск на место.  ThinkPad должен
            загружаться снова.</para>

          <para>С работающей машиной вы можете использовать процедуру, описанную
            здесь, для получения рабочей системы FreeBSD.</para>

          <procedure>
            <step>
              <para>Сгрузите файлы <filename>boot1</filename> и
                <filename>boot2</filename> по адресу <ulink
                url="http://people.FreeBSD.org/~bmah/ThinkPad/"></ulink>.
                Поместите эти файлы куда-нибудь, откуда вы сможете их потом
                взять.</para>
            </step>

            <step>
              <para>Установите FreeBSD обычным образом на ThinkPad.
                <emphasis>Не используйте</emphasis> режим <literal>Dangerously
                Dedicated</literal>.  <emphasis>Не перезагружайтесь</emphasis>
                после окончания установки.</para>
            </step>

            <step>
              <para>Переключитесь в экран <quote>Emergency Holographic
                Shell</quote> (<keycombo action="simul"><keycap>ALT</keycap>
                <keycap>F4</keycap></keycombo>) или запустите оболочку
                <quote>fixit</quote>.</para>
            </step>

            <step>
              <para>Используйте команду &man.fdisk.8; для изменения
                идентификатора раздела FreeBSD со <literal>165</literal> на
                <literal>166</literal> (этот тип используется в OpenBSD).</para>
            </step>

            <step>
              <para>Перепишите файлы <filename>boot1</filename> и
                <filename>boot2</filename> на локальную файловую систему.</para>
            </step>

            <step>
              <para>Для записи <filename>boot1</filename> и
                <filename>boot2</filename> на слайс с FreeBSD воспользуйтесь
                командой &man.disklabel.8;.</para>

              <screen>&prompt.root; <userinput>disklabel -B -b boot1 -s boot2 ad0s<replaceable>n</replaceable></userinput></screen>

              <para>Здесь <replaceable>n</replaceable> означает номер слайса,
                в котором установлена FreeBSD.</para>
            </step>

            <step>
              <para>Выполните перезагрузку.  В приглашении загрузчика вам будет
                дан выбор для загрузки <literal>OpenBSD</literal>.  На самом
                деле при этом загружается FreeBSD.</para>
            </step>
          </procedure>

          <para>Случай, когда вы хотите загружать OpenBSD и FreeBSD на одном и
            том же лэптопе, оставлен читателю в качестве упражнения.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="install-bad-blocks">
          <para>Можно ли производить установку на диск с повреждёнными
            блоками?</para>
        </question>

        <answer>
          <para>Вы можете это сделать, но это плохая идея.</para>

          <para>Если вы обнаружите испорченные блоки на современном диске IDE,
            то весьма вероятно, что он скоро выйдет из строя совсем
            (собственная способность переносить испорченные блоки исчерпана,
            что означает очень большую порчу поверхности); мы рекомендуем
            приобрести новый диск.</para>

          <para>Если повреждённые блоки находятся на SCSI диске, взгляните на
            <link linkend="awre">такое решение</link>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="boot-floppy-strangeness">
          <para>Странные вещи происходят при загрузке с установочного
            диска!</para>
        </question>

        <answer>
          <para>Если вы видите, что машина зависает или неожиданно
            перезагружается, когда вы пытаетесь загрузиться с установочной
            дискеты, вы должны задать себе три вопроса:-</para>

          <orderedlist>
            <listitem>
              <para>Вы используете новую, только что отформатированную дискету
                (предпочтительно неиспользованную прямо из коробки, а не ту,
                что пришла с популярным журналом и последние три года провела
                под диваном)?</para>
            </listitem>

            <listitem>
              <para>Вы скачали образ дискеты в двоичном режиме?
                (не смущайтесь, даже лучшие из нас время от времени скачивают
                двоичный файл в режиме ASCII!)</para>
            </listitem>

            <listitem>
              <para>Если вы используете &windows; 95 или 98, удостоверьтесь,
                что вы запускаете <command>fdimage</command> или
                <command>rawrite</command> в режиме чистого DOS?  Эти
                операционные системы могут влиять на программы, работающие
                непосредственно с оборудованием, что и делает программа
                создания установочного диска; даже запуск из DOS в графической
                оболочке может вызвать проблемы.</para>
            </listitem>
          </orderedlist>

          <para>Есть сведения, что &netscape; вызывает проблемы при скачивании
            загрузочного диска, так что лучше всего использовать специальную
            программу FTP, если она у вас есть.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="no-install-cdrom">
          <para>Я загрузился с ATAPI CDROM, однако программа установки
            сообщила, что CDROM не найден.  Куда он подевался?</para>
        </question>

        <answer>
          <para>Обычной причиной возникновения такой проблемы является
            неправильно сконфигурированный привод CDROM.  Теперь зачастую ПК
            продаются с CDROM, установленным как ведомое устройство на втором
            контроллере IDE, но без ведущего устройства на этом контроллере.
            Согласно спецификации ATAPI, такая конфигурация неверна, однако
            &windows; в таком случае всё же работает, и BIOS игнорирует это при
            загрузке.  Вот почему BIOS может видеть CDROM при загрузке, а
            FreeBSD для завершения установки - нет.</para>

          <para>Переконфигурируйте вашу систему так, чтобы CDROM оказался либо
            основным устройством на том IDE-контроллере, на котором он
            установлен, либо ведомым устройством на контроллере IDE, который
            имеет ведущее устройство.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="install-PLIP">
          <para>Можно ли я установить систему на лэптоп через PLIP (Parallel
            Line IP)?</para>
        </question>

        <answer>
          <para>Да.  Используйте стандартный кабель Laplink.  Если необходимо,
            обратитесь к <ulink url="&url.books.handbook;/network-plip.html">
            разделу Руководства о PLIP</ulink> для выяснения деталей о работе
            в сети через параллельный порт.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="geometry">
          <para>Какие параметры диска я должен использовать?</para>
        </question>

        <answer>
          <note>
            <para>Под <quote>параметрами</quote> диска мы понимаем число
              дорожек, головок и секторов на дорожку на диске, что для простоты
              обозначается как C/H/S.  Именно так работает BIOS персональных
              компьютеров при чтении или записи диска.</para>
          </note>

          <para>Это вызывает много недоразумений у начинающих системных
            администраторов.  Прежде всего, <emphasis>физические</emphasis>
            параметры диска SCSI не имеют никакого значения, так как FreeBSD
            работает в терминах дисковых блоков.  Фактически нет такого
            показателя, как <emphasis>физические параметры</emphasis>, так как
            плотность размещения секторов различна по всему диску.  То, что
            производители называют <emphasis>физическими
            параметрами</emphasis>, есть не что иное, как параметры, которые
            они получили по занимаемому пространству.  Для
            дисков IDE, FreeBSD работает в терминах C/H/S, но во всех
            современных дисках они преобразовываются во внутреннее
            представление.</para>

          <para>Имеют значение только <emphasis>логические</emphasis>
            параметры.  Это то, что получает BIOS, когда спрашивает
            <quote>какие у тебя параметры?</quote>  Затем они используются для
            обращения к диску.  Так как FreeBSD использует BIOS при загрузке,
            очень важно получить верные параметры.  В частности, если у вас на
            диске находятся несколько операционных систем, они обе должны иметь
            одинаковое представление о параметрах диска.  В противном случае
            серьёзные проблемы при загрузке неизбежны!</para>

          <para>В случае дисков SCSI, параметры используются в зависимости от
            того, включена ли поддержка расширенной трансляции на вашем
            контроллере (что часто обозначается как <quote>поддержка дисков
            DOS &gt;1GB</quote> или что-то похожее).  Если эта возможность
            выключена, то используйте <replaceable>N</replaceable> дорожек, 64
            головки и 32 сектора на дорожку, где <replaceable>N</replaceable>
            - это ёмкость диска в мегабайтах.  Например, 2-гигабайтный диск
            должен иметь 2048 дорожек, 64 головки и 32 сектора на
            дорожку.</para>

          <para>Если трансляция <emphasis>включена</emphasis> (что обычно
            используется для преодоления некоторых ограничений &ms-dos;) и
            ёмкость диска превышает 1&nbsp;Гбайт, используется M дорожек, 63
            сектора на дорожку (<emphasis>не</emphasis> 64) и 255 головок, где
            <literal>M</literal> обозначает объём диска в мегабайтах,
            поделённый на 7.844238 (!).  Таким
            образом, наш диск объёмом 2&nbsp;Гбайт будет иметь 261 дорожку, 63
            сектора на дорожку и 255 головок.</para>

          <para>Если вы не уверены, или FreeBSD ошибается при определении
            параметров диска во время установки, самый простой способ решить
            эту проблему - создать на диске маленький раздел DOS.  После этого
            BIOS должна определить параметры диска правильно (и вы всегда
            можете удалить раздел DOS в редакторе разделов, если вы не хотите
            его сохранить.  Однако вы можете оставить его для настройки сетевых
            адаптеров и тому подобных вещей.</para>

          <para>Кроме того, существует свободно доступная утилита,
            распространяемая вместе с FreeBSD, которая называется
            <filename>pfdisk.exe</filename>.  Вы можете найти её в каталоге
            <filename>tools</filename> компакт-диска с FreeBSD или на различных
            FTP-серверах с FreeBSD.  Эту программу можно использовать для
            определения параметров, используемых другими операционными
            системами, расположенными на вашем диске.  Затем вы можете
            использовать эти параметры в редакторе разделов.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="disk-divide-restrictions">
          <para>Есть ли ограничения на разбиение диска?</para>
        </question>

        <answer>
          <para>Да.  Вы должны убедиться, что корневой раздел находится до
            1024 дорожки, так чтобы BIOS могла загрузить с него ядро.
            (Заметьте, что это ограничение BIOS компьютера, а не
            FreeBSD).</para>

          <para>Для диска SCSI, это, как правило, будет означать, что
            корневой раздел располагается в первых 1024 Мбайтах (или в первых
            4096 Мбайтах, если включен режим расширенной трансляции -
            посмотрите предыдущий вопрос).  Для дисков IDE соответствующее
            значение равно 504 Мбайтам.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="disk-manager">
          <para>Совместима ли FreeBSD с менеджерами дисков?</para>
        </question>

        <answer>
          <para>FreeBSD распознаёт Ontrack Disk Manager и допускает его
            использование.  Другие менеджеры дисков не поддерживаются.</para>

          <para>Если вы хотите использовать диск с FreeBSD, вам не нужен
            менеджер диска.  Отконфигурируйте диск на столько пространства,
            сколько сможет обработать BIOS (обычно 504 Мбайта), и
            FreeBSD распознает, сколько места у вас есть на самом деле.
            Если вы используете старый диск с контроллером MFM, вам может
            потребоваться точно указать FreeBSD количество используемых
            дорожек.</para>

          <para>Если вы хотите использовать FreeBSD совместно с другой
            операционной системой, это можно сделать и без менеджера диска:
            удостоверьтесь, что загрузочный раздел FreeBSD и раздел для другой
            операционной системы не выходят за пределы 1024 дорожки. Если вы
            будете осторожны, 20 мегабайтного раздела для загрузки будет
            достаточно.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="missing-os">
          <para>При загрузке FreeBSD первый раз после установки выдаётся
            сообщение <errorname>Missing Operating System</errorname>.  В чём
            дело?</para>
        </question>

        <answer>
          <para>Это классический  случай, когда FreeBSD и DOS или другая
            операционная система конфликтуют по поводу <link
            linkend="geometry">параметров</link> диска.  Вам нужно будет
            переустановить FreeBSD, но имейте в виду, что инструкции, данные
            выше, помогают всегда.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="stop-at-boot-manager">
          <para>После приглашения менеджера загрузки <prompt>F?</prompt>
            ничего не происходит.</para>
        </question>

        <answer>
          <para>Это ещё один признак проблемы, описанной в предыдущем разделе.
            Параметры диска в BIOS и параметры, используемые FreeBSD, не
            совпадают.  Если ваш контроллер или BIOS поддерживают трансляцию
            дорожек (часто обозначаемую как <literal>&gt;1GB drive
            support</literal>), попробуйте включить эту возможность и
            переустановить FreeBSD.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="need-complete-sources">
          <para>Нужно ли устанавливать все исходные тексты системы?</para>
        </question>

        <answer>
          <para>В общем случае, нет.  Однако мы настоятельно рекомендуем
            установить, как минимум, исходные тексты набора
            <literal>base</literal>, включающий некоторые файлы, здесь
            упоминаемые, и <literal>sys</literal>, в который включены исходные
            тексты ядра.  Для работы системы присутствия исходных текстов не
            требуется, разве что для программы конфигурирования ядра
            &man.config.8;.  За исключением исходных текстов ядра, структура
            исходных текстов системы позволяет монтировать их в режиме "только
            для чтения" через NFS и генерировать выполнимые файлы программ
            (из-за ограничений в исходных текстах ядра мы рекомендуем
            монтировать их не прямо в <filename>/usr/src</filename>, а в
            какой-нибудь другой каталог с символическими ссылками для
            дублирования структуры каталогов).</para>

          <para>Наличие исходных текстов системы значительно облегчает процесс
            перехода на новые версии FreeBSD.</para>

          <para>Для выбора подмножества исходных текстов, которое вы хотите
            установить, используйте пункт меню Custom, когда находитесь в меню
            Distributions программы установки.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="need-kernel">
          <para>Нужно ли перекомпилировать ядро?</para>
        </question>

        <answer>
          <para>Построение нового ядра всегда было необходимым шагом при
            установке FreeBSD, однако последние релизы предоставляют более
            дружественные методы конфигурации ядра.  При использовании версий
            4.X и более ранних, в командной строке на приглашение загрузчика
            FreeBSD (boot:) введите <option>-c</option> и вы попадёте в экран
            визуальной настройки, которая позволяет конфигурировать настройки
            ядра для большинства адаптеров ISA.  Во &os; 5.X и выше этот
            подход был заменён на более гибкую систему параметров, которые
            можно задать из приглашения загрузчика.</para>

          <para>В дальнейшем всё же стоит построить новое ядро, содержащее
            только те драйверы, которые вам нужны, для того, чтобы сэкономить
            немного ОЗУ, хотя для большинства систем это делать больше не
            обязательно.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="password-encryption">
          <para>Какой из паролей DES, Blowfish или MD5 я должен использовать,
            и как указать, какого типа пароли используются
            пользователями?</para>
        </question>

        <answer>
          <para>По умолчанию во FreeBSD используется формат паролей на основе
            <emphasis>MD5</emphasis>.  Это делается в предположении, что он
            более защищён, чем традиционный формат паролей &unix;, в котором
            используется схема на основе алгоритма <emphasis>DES</emphasis>.
            Пароли DES остаются применимыми, если вам нужно использовать файл
            паролей совместно с более старыми операционными системами, в
            которых используется менее защищённый формат паролей (их можно
            использовать, если в программе sysinstall вы выберите установку
            дистрибутива <quote>crypto</quote> или установите исходные тексты
            пакета crypto в случае построения из исходных текстов).  Установка
            криптографических библиотек позволит вам также использовать пароли
            в более защищённом формате Blowfish.  Управление выбором
            используемого формата для новых паролей осуществляется через
            параметр входа <quote>passwd_format</quote> в файле
            <filename>/etc/login.conf</filename>, принимающий значения
            <quote>des</quote>, <quote>blf</quote> (если они есть) или
            <quote>md5</quote>.  Более подробная информация о параметрах входа
            находится на странице Справочника &man.login.conf.5;.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="boot-floppy-hangs">
          <para>Загрузка с установочной дискеты прерывается на сообщении
            <literal>Probing Devices...</literal>. Почему?</para>
        </question>

        <answer>
          <para>Если у вас установлены устройства IDE &iomegazip; или jaz;,
            уберите их и попробуйте снова. Они могут мешать установочной
            программе.  После того, как система будет установлена, вы можете
            снова подключить устройства. Надеемся, что это будет исправлено в
            более поздних релизах.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="panic-on-install-reboot">
          <para>Почему появляется сообщение <errorname>panic: cant mount
            root</errorname> после перезагрузки только что установленной
            системы.</para>
        </question>

        <answer>
          <para>Эта ошибка проявляется, когда есть несогласованность между
            представлениями загрузочного блока и ядра о дисковых устройствах.
            Эта ошибка обычно проявляется на системах с двумя дисками IDE, с
            винчестерами, установленными как ведущий или единственный на
            отдельных контроллерах IDE, с FreeBSD, установленной на втором
            контроллере IDE.  Программа в загрузочных блоках полагает, что
            система установлена на ad0 (второй диск BIOS), тогда как ядро
            даёт первому диску на втором контроллере название ad2.  После
            обнаружения устройства ядро пытается смонтировать то, что
            загрузочные блоки выдают за загрузочный диск, ad0, тогда как он
            на самом деле ad2, и ошибается.</para>

          <para>Для решения этой проблемы выполните одно из следующих
            действий:</para>

          <orderedlist>
            <listitem>
              <para>Перезагрузите систему и нажмите
                <keycap>Enter</keycap> при появлении приглашения
                <literal>Booting kernel in 10 seconds; hit [Enter] to
                interrupt</literal>.  Вы окажетесь в загрузчике.</para>

              <para>После этого наберите <literal>set
                root_disk_unit="<replaceable>disk_number</replaceable>"</literal>.
                Здесь в качестве <replaceable>disk_number</replaceable> должен
                быть указан <literal>0</literal>, если FreeBSD установлена на
                ведущем диске первого контроллера IDE, <literal>1</literal>,
                если она установлена на ведомом диске первого контроллера IDE,
                <literal>2</literal>, если система находится на ведущем диске
                второго IDE-контроллера и <literal>3</literal>, если она
                установлена на ведомом диске второго контроллера IDE.</para>

              <para>Затем введите команду <literal>boot</literal>, и ваша
                система должна нормально загрузиться.</para>

              <para>Чтобы сделать эти изменения постоянными (то есть чтобы вам
                не было нужды выполнять эти действия каждый раз при
                перезагрузке или включении вашей машины с FreeBSD), поместите
                строчку
                <literal>root_disk_unit="<replaceable>disk_number</replaceable>"</literal>
                в файл <filename>/boot/loader.conf.local</filename>.</para>
            </listitem>

            <listitem>
              <para>Поместите диск с FreeBSD на первичный контроллер IDE, так
                чтобы именования диском пришли в соответствие.</para>
            </listitem>
          </orderedlist>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="memory-limits">
          <para>Какие имеются ограничения на объём оперативной памяти?</para>
        </question>

        <answer>
          <para>Для стандартной системы &i386; размер оперативной памяти
            ограничен 4 Гбайтами.  Начиная с &os; версий 4.9 и 5.1,
            поддерживается дополнительный объём памяти через &man.pae.4;.
            Это требует перекомпиляции ядра с включением дополнительного
            параметра PAE:</para>

          <programlisting>options       PAE</programlisting>

          <para>&os;/pc98 имеет ограничение в 4 Гбайта оперативной памяти,
            PAE здесь использовать невозможно.  Во &os;/alpha лимит памяти
            зависит от типа используемого оборудования - для выяснения всех
            тонкостей обратитесь к Замечаниям по оборудованию релиза для
            Alpha.  Остальные архитектуры, поддерживаемые &os;, имеют гораздо
            большие теоретические ограничения объёмов памяти (многие
            терабайты).</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="ffs-limits">
          <para>Какие существуют ограничения для файловой системы ffs?</para>
        </question>

        <answer>
          <para>Для файловой системы ffs максимальный теоретический размер
            равен 8 терабайтам (2Г блоков) или 16 Тбайт при стандартном размере
            блока 8К.  На практике есть программное ограничение в 1 терабайт,
            но с некоторыми модификациями достижимы 4 терабайта (и такие
            системы существуют).</para>

          <para>Максимальный размер одного файла ffs равен примерно 1Г блоков,
            или 4 Тбайта при размере блока 4К.</para>

          <table>
            <title>Максимальные размеры файлов</title>

            <tgroup cols="3">
              <thead>
                <row>
                  <entry>размер блока fs</entry>

                  <entry>работает</entry>

                  <entry>должно работать</entry>
                </row>
              </thead>

              <tbody>
                <row>
                  <entry>4K</entry>

                  <entry>4T-1</entry>

                  <entry>&gt;4T</entry>
                </row>

                <row>
                  <entry>8K</entry>

                  <entry>&gt;32G</entry>

                  <entry>32T-1</entry>
                </row>

                <row>
                  <entry>16K</entry>

                  <entry>&gt;128G</entry>

                  <entry>32T-1</entry>
                </row>

                <row>
                  <entry>32K</entry>

                  <entry>&gt;512G</entry>

                  <entry>64T-1</entry>
                </row>

                <row>
                  <entry>64K</entry>

                  <entry>&gt;2048G</entry>

                  <entry>128T-1</entry>
                </row>
              </tbody>
            </tgroup>
          </table>

          <para>При размере блока файловой системы 4К, тройная адресация
            блоков работает и всё должно быть ограничено максимальным
            количеством блоков, которое задаётся в виде тройной переадресации
            блока (примерно 1K^3 + 1K^2 + 1K), однако всё ограничивается
            (ошибочным) лимитом 1Г-1 на количество блоков файловой системы.
            Это ограничение должно быть равным 2Г-1. При количестве блоков,
            приближающемся к 2Г-1, появляются некоторые ошибки, но этот предел
            недостижим при размере блока 4К.</para>

          <para>При размере блока 8К и больше, всё должно быть ограничено
            лимитом 2Г-1 на количество блоков файловой системы, но реально
            ограничено пределом в 1Г-1 на число блоков файловой системы.
            Использование верного ограничения в 2Г-1 блоков вызывает
            проблемы.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="archsw-readin-failed-error">
          <para>Я скомпилировал новое ядро и при загрузке получил сообщение об
            ошибке <errorname>archsw.readin.failed</errorname>.</para>
        </question>

        <answer>
          <para>Это произошло, потому что ваше ядро и компоненты системы не
            синхронизированы.  Такая ситуация не поддерживается.  Обязательно
            воспользуйтесь командами <command>make buildworld</command> и
            <command>make buildkernel</command> для обновления вашего
            ядра.</para>

          <para>Вы можете загрузить систему, непосредственно указав ядро на
            втором этапе загрузки, нажав любую клавишу до запуска загрузчика
            при появлении символов |.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="security-profiles">
          <para>Что такое <quote>профили безопасности</quote>?</para>
        </question>

        <answer>
          <para><quote>Профиль безопасности</quote> (security profile) является
            набором настраиваемых параметров, при помощи которых делается
            попытка достичь желаемый баланс между безопасностью и удобством
            работы, разрешая или запрещая запуск определенных программ и
            изменяя другие настройки.  Все подробности можно найти в разделе
            <ulink
            url="&url.books.handbook;/install-post.html#SECURITYPROFILE">
            Профиль безопасности</ulink> главы Руководства о <ulink
            url="&url.books.handbook;/install-post.html">действиях после
            установки</ulink>.</para>
        </answer>
      </qandaentry>

      <qandaentry>
	<question id="boot-acpi">
	  <para>Установка аварийно завершается ещё при загрузке системы,
	    что я могу сделать</para>
	</question>

	<answer>
	  <para>Попытайтесь отключить поддержку ACPI.  Когда загрузится
	    загрузчик, нажмите пробел.  Система отобразит <screen>OK</screen>.
	    Наберите <screen><userinput>unset acpi_load</userinput></screen>,
	    затем <screen><userinput>boot</userinput></screen>.</para>
	</answer>
      </qandaentry>

    </qandaset>
  </chapter>


  <chapter id="hardware">
    <title>Аппаратная совместимость</title>

    <sect1 id="compatibility-general">
      <title>Вопросы общего характера</title>

      <qandaset>
        <qandaentry>
          <question id="which-hardware-to-get">
            <para>Я хочу приобрести аппаратуру для моей системы FreeBSD.  Какая
              модель/производитель/тип лучше всего?</para>
          </question>

          <answer>
            <para>Это постоянно обсуждается в списках рассылки FreeBSD.  Так
              как аппаратура меняется так быстро, мы это ожидаем.  Мы
              <emphasis>всё же</emphasis> настоятельно рекомендуем, чтобы вы
              прочитали Hardware Notes для &os; <ulink
              url="&rel.current.hardware;">&rel.current;</ulink> или <ulink
              url="&rel2.current.hardware;">&rel2.current;</ulink>, а также
              выполнили поиск по <ulink
              url="http://www.FreeBSD.org/search/#mailinglists">архивам</ulink>
              списков рассылки перед тем, как задавать вопросы о самом последнем
              и лучшем оборудовании.  Весьма вероятно, что обсуждение требуемого
              вам оборудование как раз было на прошлой неделе.</para>

            <para>Если вы подбираете лэптоп, посмотрите архивы списка рассылки
              FreeBSD-mobile.  В противном случае вам нужны архивы
              FreeBSD-questions или, возможно, специфичные списки рассылки по
              конкретному типу оборудования.</para>
          </answer>
        </qandaentry>
      </qandaset>
    </sect1>


    <sect1 id="compatibility-processors">
      <title>Аппаратные платформы и процессоры</title>

      <qandaset>
        <qandaentry>
          <question id="architectures">
            <para>Поддерживает ли FreeBSD аппаратные платформы, отличные от
              x86?</para>
          </question>

          <answer>
            <para>Да.  В настоящее время FreeBSD поддерживает архитектуры Intel
              x86 и DEC (сейчас Compaq) Alpha.  Начиная с FreeBSD 5.0, также
              поддерживаются архитектуры AMD64 и Intel EM64T, IA-64 и
              &sparc64;.  Планируются к поддержке платформы &mips; и
              &powerpc;, дополнительную информацию о происходящей работе
              можно получить, подписавшись соответственно на &a.ppc;
              или &a.mips;.  Для обсуждение общих вопросов, касающихся новых
              аппаратных платформ, предназначен &a.platforms;.</para>

            <para>Если аппаратная платформа Вашего компьютера не поддерживается
              FreeBSD и Вам нужно его запустить прямо сейчас, мы советуем
              обратить Ваш взгляд также на <ulink
              url="http://www.NetBSD.org">NetBSD</ulink> и
              <ulink url="http://www.OpenBSD.org">OpenBSD</ulink>.</para>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="smp-support">
            <para>Поддерживает ли FreeBSD многопроцессорные системы
              (SMP)?</para>
          </question>

          <answer>
            <para>Да.  Поддержка SMP в ядре <emphasis>GENERIC</emphasis> по
              умолчанию была включена с момента выпуска &os; 5.2.</para>

            <para>Для релиза &os; 5.3 также предполагалось включить эту
              поддержку по умолчанию, однако проблемы, возникающие при работе
              ядра с SMP на некоторых однопроцессорных машинах, заставили нас
              отключить поддержку SMP до их решения.  Для &os; 5.4 эта задача
              является приоритетной.</para>

            <para>Во &os; 4.X поддержка SMP в используемом по умолчанию ядре
              не задана, так что для её включения вам нужно перекомпилировать
              ядро.  Посмотрите файл <filename>/sys/i386/conf/LINT</filename>,
              чтобы определить, какие параметры нужно поместить в
              конфигурационный файл вашего ядра.</para>
          </answer>
        </qandaentry>
      </qandaset>
    </sect1>


    <sect1 id="compatibility-drives">
      <title>Жёсткие диски, ленточные устройства и приводы CD и DVD</title>

      <qandaset>
        <qandaentry>
          <question id="supported-hard-drives">
            <para>Какие типы винчестеров поддерживает FreeBSD?</para>
          </question>

          <answer>
            <para>FreeBSD работает с дисками стандартов EIDE и SCSI (с
              соответствующими контроллерами; обратитесь к следующему разделу), и
              всеми дисками, использующими оригинальный интерфейс <quote>Western
              Digital</quote> (MFM, RLL, ESDI и, конечно же, IDE).  Некоторые
              контроллеры ESDI, использующие собственные интерфейсы, могут и не
              работать: к таким относятся WD1002/3/6/7 и их клоны.</para>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="supported-scsi-controllers">
            <para>Какие поддерживаются контроллеры SCSI?</para>
          </question>

          <answer>
            <para>Полный список приведён в Hardware Notes для &os;
              <ulink url="&rel.current.hardware;">&rel.current;</ulink> или
              <ulink url="&rel2.current.hardware;">&rel2.current;</ulink>.</para>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="tape-support">
            <para>Какие типы стримеров поддерживаются?</para>
          </question>

          <answer>
            <para>FreeBSD поддерживает устройства SCSI и QIC-36 (с интерфейсом
              QIC-02), включая 8-мм (Exabyte) и DAT.</para>

            <para>Некоторые ранние модели 8-мм стримеров не совсем соответствуют
              стандарту SCSI-2 и могут работать не совсем хорошо.</para>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="tape-changer-support">
            <para>Поддерживает ли FreeBSD роботов для смены лент?</para>
          </question>

          <answer>
            <para>FreeBSD поддерживает роботизированные устройства SCSI через
              устройство &man.ch.4; и команду &man.chio.1;.  Подробная
              информация об управлении такими роботами может быть найдена на
              странице Справочника по команде &man.chio.1;.</para>

            <para>Если вы не используете <application>AMANDA</application>
              или другое программное обеспечение, умеющее работать с роботами,
              имейте в виду, что они могут только переносить ленты с одного
              места на другое, так что вам нужно самим отслеживать, в каком
              слоте находится нужная лента, и в какой слот нужно вернуть ленту,
              находящуюся в стримере.</para>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="supported-cdrom-drives">
            <para>Какие приводы CDROM поддерживаются во FreeBSD?</para>
          </question>

          <answer>
            <para>Поддерживаются любые SCSI-устройства чтения компакт дисков,
              подключенные к поддерживаемому контроллеру.</para>

            <para>Кроме того, поддерживаются следующие оригинальные интерфейсы
              CDROM:</para>

            <itemizedlist>
              <listitem>
                <para>Mitsumi LU002 (8bit), LU005 (16bit) и FX001D (16bit 2x
                  Speed).</para>
              </listitem>

              <listitem>
                <para>Sony CDU 31/33A</para>
              </listitem>

              <listitem>
                <para>Sound Blaster не-SCSI CDROM</para>
              </listitem>

              <listitem>
                <para>Matsushita/Panasonic CDROM</para>
              </listitem>

              <listitem>
                <para>ATAPI-совместимые IDE CDROM</para>
              </listitem>
            </itemizedlist>

            <para>Все не-SCSI адаптеры славятся своей медлительностью по
              сравнению со SCSI, а некоторые CDROM стандарта ATAPI могут и не
              работать.</para>

            <para>Официальный FreeBSD CDROM ISO, а также диски CDROM от Daemon
              News и FreeBSD Mall, являются загрузочными.</para>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="supported-cdrw-drives">
            <para>Какие приводы CD-RW поддерживаются во FreeBSD?</para>
          </question>

          <answer>
            <para>FreeBSD поддерживает все ATAPI-совместимые IDE-приводы CD-R
              или CD-RW.  Более полную информацию можно найти на справочной
              странице по команде &man.burncd.8;.</para>

            <para>FreeBSD поддерживает также все SCSI-приводы CD-R или CD-RW.
              Установите и используйте программу <command>cdrecord</command> из
              системы портов или пакаджей, но проверьте, что в вашем ядре
              присутствует устройство <devicename>pass</devicename>.</para>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="zip-support">
            <para>Поддерживает ли FreeBSD устройства &iomegazip;?</para>
          </question>

          <answer>
            <para>FreeBSD поддерживает &iomegazip;-устройства SCSI и ATAPI
              (IDE).  Устройству SCSI ZIP могут быть назначены SCSI ID только
              5 или 6, а если BIOS вашего SCSI-адаптера поддерживает такую
              возможность, вы можете с него даже загрузиться.  Неизвестно,
              какие адаптеры позволяют загрузиться с устройств, номера которых
              отличны от 0 или 1, так что вам придётся обратиться к
              документации, если вам это нужно.</para>

            <para>FreeBSD также поддерживает устройства Zip, работающие через
              параллельный порт.  Проверьте, содержит ли ваше ядро драйверы для
              <devicename>scbus0</devicename>, <devicename>da0</devicename>,
              <devicename>ppbus0</devicename> и <devicename>vp0</devicename>
              (ядро GENERIC содержит всё это, кроме
              <devicename>vp0</devicename>).  Если эти драйверы имеются, то
              устройство должно быть доступно как
              <devicename>/dev/da0s4</devicename>.  Диски могут быть смонтированы
              командами <command>mount /dev/da0s4 /mnt</command> или (для дисков
              dos) <command>mount_msdos /dev/da0s4 /mnt</command>
              соответственно.</para>

            <para>Также посмотрите <link linkend="media-change">FAQ по съёмным
              носителям</link> далее в этой главе, а также <link
              linkend="removable-drives">замечание о
              <quote>форматировании</quote></link> в главе об
              администрировании.</para>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="jaz-zip-removable-support">
            <para>Поддерживает ли FreeBSD съёмные диски типа &jaz; или
              EZ?</para>
          </question>

          <answer>
            <para>Они работают.  Большинство из них являются устройствами SCSI,
              так что для FreeBSD они выглядят как диски SCSI.  IDE EZ
              выглядят как приводы IDE.</para>

            <para>При загрузке системы проверьте, что все внешние устройства
              включены.</para>

            <para><anchor id="media-change">Для смены носителя в процессе
              работы, прочтите страницы справочной системы по командам
              &man.mount.8;, &man.umount.8; и &man.camcontrol.8; (для
              устройств SCSI) или &man.atacontrol.8; (для устройств IDE), и
              дополнительно <link linkend="removable-drives">обсуждение
              вопросов использования сменных дисков</link> далее в этом
              FAQ.</para>
          </answer>
        </qandaentry>
      </qandaset>
    </sect1>


    <sect1 id="compatibility-kbd-mice">
      <title>Клавиатуры и мыши</title>

      <qandaset>
        <qandaentry>
          <question id="usbkbd">
            <para>Поддерживает ли FreeBSD USB клавиатуры?</para>
          </question>

          <answer>
            <para>FreeBSD имеет встроенную поддержку
              клавиатур USB.  Включите поддержку USB в
              файле <filename>/etc/rc.conf</filename>.</para>

            <para>После включения поддержки USB-клавиатуры в системе
              AT-клавиатуре будет соответствовать
              <devicename>/dev/kbd0</devicename>, а клавиатуре USB
              <devicename>/dev/kbd1</devicename>, если они обе подключены к
              системе.  Если присутствует только клавиатура USB, ей будет
              соответствовать <devicename>/dev/ukbd0</devicename>.</para>

            <para>Если вы хотите использовать клавиатуру USB на консоли, вы
              должны явно указать драйверу консоли на использование имеющейся
              клавиатуры USB.  Это может быть сделано в процессе инициализации
              системы следующей командой.</para>

            <screen>&prompt.root; <userinput>kbdcontrol -k /dev/kbd1 &lt; /dev/ttyv0 &gt; /dev/null</userinput></screen>

            <para>Заметьте, что, если клавиатура USB является единственной
              присутствующей, она доступна как <devicename>/dev/ukbd0</devicename>,
              и поэтому команда должна выглядеть примерно так:</para>

            <screen>&prompt.root; <userinput>kbdcontrol -k /dev/ukbd0 &lt; /dev/ttyv0 &gt; /dev/null</userinput></screen>

            <para>Вышеуказанную команду хорошо бы добавить в
              <filename>/etc/rc.i386</filename>.</para>

            <para>Как только вы всё это сделаете, клавиатура USB будет работать и
              в X-окружении без каких-либо особых настроек.</para>

            <para>Выключение и включение USB-клавиатуры на ходу может ещё не
              работать совершенно корректно.  Во избежание неприятностей мы
              рекомендуем подключить клавиатуру перед запуском системы и не
              отключать её до завершения работы системы.</para>

            <para>За дополнительной информацией обратитесь к страницам
              справочной системы по &man.ukbd.4;.</para>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="busmouse">
            <para>У меня необычная мышь типа bus mouse. Как её настроить?</para>
          </question>

          <answer>
            <para>FreeBSD поддерживает мыши типов bus mouse и InPort bus mouse
              от таких производителей, как Microsoft, Logitech и ATI.  В ядре
              GENERIC драйвера таких устройств нет.  Для построения
              специального ядра с драйвером такой мыши, добавьте в
              конфигурационный файл ядра следующую строку:</para>

            <programlisting>device mse0 at isa? port 0x23c irq5</programlisting>

            <para>Мыши типа bus mouse обычно поставляются с отдельными
              интерфейсными адаптерами.  Они позволяют установить адрес порта
              ввода/вывода и номер IRQ, отличающиеся от приведённых выше.  Для
              получения дополнительной информации обратитесь к документации по
              вашей мыши и странице Справочника &man.mse.4;.</para>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="ps2mouse">
            <para>Как использовать мышь PS/2 (типа <quote>mouse port</quote>
              или <quote>keyboard</quote>)?</para>
          </question>

          <answer>
            <para>Мышь PS/2 системой поддерживается.  Необходимый драйвер
              устройства, <devicename>psm</devicename>, включён в ядро
              GENERIC.</para>

            <para>Если в вашем ядре его нет, то добавьте следующую строку в
              файл конфигурации ядра и постройте новое ядро.</para>

            <programlisting>device psm0 at atkbdc? irq 12</programlisting>

            <para>После того, как ядро правильно обнаружило
              <devicename>psm0</devicename> во время загрузки, проверьте
              наличие файла устройства для <devicename>psm0</devicename> в
              каталоге <filename>/dev</filename>.  Файл можно создать,
              набрав:</para>

            <screen>&prompt.root; <userinput>cd /dev; sh MAKEDEV psm0</userinput></screen>

            <para>войдя в систему администратором.</para>

            <note>
              <para>Вы можете пропустить этот шаг, если используете FreeBSD
                5.0-RELEASE или более новую версию с включенным механизмом
                &man.devfs.5;, так как необходимые файлы устройств будут
                создаваться в каталоге <filename>/dev</filename>
                автоматически.</para>
            </note>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="moused">
            <para>Можно ли каким-либо образом использовать мышь, кроме
              X Window?</para>
          </question>

          <answer>
            <para>Если вы используете стандартный драйвер консоли,
              &man.syscons.4;, то можете использовать указатель мыши в текстовых
              консолях для выделения и переноса текста.  Запустите демон мыши,
              &man.moused.8;, и включите отображение указателя мыши на
              виртуальной консоли:</para>

            <screen>&prompt.root; <userinput>moused -p /dev/<replaceable>xxxx</replaceable> -t <replaceable>yyyy</replaceable></userinput>
&prompt.root; <userinput>vidcontrol -m on</userinput></screen>

            <para>Здесь <replaceable>xxxx</replaceable> - это имя устройства
              мыши, а <replaceable>yyyy</replaceable> - тип протокола,
              используемого мышью.  Даемон мыши может автоматически определять
              тип протокола большинства мышей, за исключением старых, работающих
              по последовательному интерфейсу.  Для выполнения автоматического
              определения в качестве протокола укажите <literal>auto</literal>.
              Если автоматическое определение не работает, то обратитесь к
              справочным страницам по &man.moused.8; для получения списка
              поддерживаемых типов протоколов.</para>

            <para>Если у вас мышь типа PS/2, просто добавьте строчку
              <literal>moused_enable="YES"</literal> в файл
              <filename>/etc/rc.conf</filename> для запуска даемона мыши во
              время загрузки системы.  Кроме того, если вы хотите использовать
              даемон мыши во всех виртуальных терминалах, а не только на консоли,
              добавьте <literal>allscreens_flags="-m on"</literal> в файле
              <filename>/etc/rc.conf</filename>.</para>

            <para>После запуска даемона мыши, доступ к мыши должен
              согласовываться между даемоном мыши и другими программами типа X
              Window.  Обратитесь к вопросу из FAQ <link linkend="x-and-moused">
              Почему моя мышь не работает с X?</link> для получения более полной
              информации по этому вопросу.</para>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="text-mode-cut-paste">
            <para>Как можно вырезать и копировать текст с помощью мыши в
              текстовой консоли?</para>
          </question>

          <answer>
            <para>После того, как вы запустили даемон мыши (посмотрите <link
              linkend="moused">предыдущий раздел</link>), нажмите кнопку 1
              (левую) и двигайте мышь для выделения текста.  Затем
              нажмите кнопку 2 (среднюю) для его вставки с позиции текстового
              курсора.  Нажатие кнопки 3 (правой) <quote>расширит</quote>
              выбранную текстовую область.</para>

            <para>Если у вашей мыши отсутствует средняя кнопка, вы можете её
              сэмулировать или переназначить кнопки опциями даемона мыши.
              Обратитесь к справочным страницам по &man.moused.8; для получения
              полной информации.</para>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="mouse-wheel-buttons">
            <para>У моей мыши есть дополнительные колёсико и кнопочки.  Можно ли
              их использовать во FreeBSD?</para>
          </question>

          <answer>
            <para>Ответ, к сожалению, <quote>в зависимости от
              обстоятельств</quote>.  Эти мышки с дополнительными возможностями,
              как правило, требуют наличия специальных драйверов.  До тех пор,
              пока драйвер мыши или прикладная программа не будут иметь отдельную
              поддержку такой мыши, она будет работать как стандартная двух- или
              трёхкнопочная мышь.</para>

            <para>Возможные способы использования колёсиков мыши при работе в X
              Window описаны в <link linkend="x-and-wheel">другом
              разделе</link>.</para>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="laptop-mouse-trackball">
            <para>Как использовать мышь/трэкболл/сенсорную панель на
              лэптопе?</para>
          </question>

          <answer>
            <para>Посмотрите <link linkend="ps2mouse">ответ на предыдущий
              вопрос</link>.</para>
          </answer>
        </qandaentry>
      </qandaset>
    </sect1>


    <sect1 id="compatibility-networking">
      <title>Сетевые и последовательные устройства</title>

      <qandaset>
        <qandaentry>
          <question id="network-cards">
            <para>Какие сетевые адаптеры поддерживает FreeBSD?</para>
          </question>

          <answer>
            <para>Обратитесь к файлу Hardware Notes, поставляемому с каждым
              релизом FreeBSD, для получения полного списка.</para>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="internal-plugnplay-modem">
            <para>Почему FreeBSD не может найти внутренний модем Plug &amp;
              Play?</para>
          </question>

          <answer>
            <para>Вам нужно добавить PnP ID вашего модема в список PnP ID
              драйвера последовательного порта.  Для включения поддержки Plug
              &amp; Play, откомпилируйте новое ядро с опцией <literal>controller
              pnp0</literal> в конфигурационном файле, и перезагрузите машину.
              Ядро выведет список ID всех найденных PnP-устройств.  Добавьте PnP
              ID модема в таблицу в файле
              <filename>/sys/i386/isa/sio.c</filename>, где-то в районе 2777
              строки.  Чтобы найти таблицу, поищите слово
              <literal>SUP1310</literal> в структуре
              <literal>siopnp_ids[]</literal>.  Снова постройте ядро,
              установите его и перезагрузитесь.  Теперь ваш модем должен
              быть опознан.</para>

            <para>Вам может понадобиться отконфигурировать PnP-устройства командой
              <literal>pnp</literal> в конфигураторе во время загрузки следующим
              образом:</para>

            <programlisting>pnp 1 0 enable os irq0 3 drq0 0 port0 0x2f8</programlisting>

            <para>чтобы модем был распознан.</para>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="support-winmodem">
            <para>Поддерживает ли FreeBSD программные модемы, такие, как
              Winmodem?</para>
          </question>

          <answer>
            <para>FreeBSD поддерживает работу со многими программными модемами
              посредством специального дополнительного программного обеспечения.
              Установка порта <filename role="package">comms/ltmdm</filename>
              добавит поддержку
              для модемов на основе очень популярного набора микросхем Lucent LT.
              Порт <filename role="package">comms/mwavem</filename> поддерживает
              модемы, установленные в лэптопах IBM Thinkpad 600 и 700.</para>

            <para>Вы не сможете установить FreeBSD, работая через программный
              модем; это программное обеспечение должно быть установлено после
              установки ОС.</para>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="support-broadcom">
	    <para>Существует ли собственный драйвер для адаптеров Broadcom
              43xx?</para>
	  </question>

	  <answer>
	    <para>Нет, и вряд ли появится.</para>

	    <para>Broadcom отказывается от публикации информации о
              программировании производимых ею микросхем беспроводной связи,
              по-видимому из-за того, что в них используется программное
              управление радиопередатчиком.  Для того, чтобы компоненты прошли
              сертификацию FCC, пользователи не должны иметь возможность изменять
              значения несущих частот, параметров модуляции и излучаемой
              мощности.  Однако без понимания того, как программировать
              микросхему, написать драйвер практически невозможно.</para>
	  </answer>
        </qandaentry>


        <qandaentry>
          <question id="multiport-serial-support">
            <para>Какие многопортовые последовательные адаптеры поддерживаются во
              FreeBSD?</para>
          </question>

          <answer>
            <para>Список таких устройств находится в разделе о <ulink
              url="&url.books.handbook;/install.html#INSTALL-MISC">различных
              устройствах</ulink> Руководства.</para>

            <para>Некоторые безымянные клоны таких адаптеров тоже работают
              нормально, особенно те, которые заявляют о своей совместимости
              с AST.</para>

            <para>Прочтите страницы Справочника о &man.sio.4; для получения
              подробной информации о конфигурировании таких адаптеров.</para>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="serial-console-prompt">
            <para>Как сделать, чтобы приглашение boot: выводилось на консоль на
              последовательном порту?</para>
          </question>

          <answer>
            <orderedlist>
              <listitem>
                <para>Постройте ядро с параметром
                  <literal>options COMCONSOLE</literal>.</para>
              </listitem>

              <listitem>
                <para>Создайте файл /boot.config, поместив туда только текст
                  <option>-P</option>.</para>
              </listitem>

              <listitem>
                <para>Отключите клавиатуру.</para>
              </listitem>
            </orderedlist>

            <para>Подробная информация находится в файле
              <filename>/usr/src/sys/i386/boot/biosboot/README.serial</filename>.</para>
          </answer>
        </qandaentry>
      </qandaset>
    </sect1>


    <sect1 id="compatibility-sound">
      <title>Звуковые устройства</title>

      <qandaset>
        <qandaentry>
          <question id="sound-card-support">
            <para>Какие звуковые адаптеры поддерживаются во FreeBSD?</para>
          </question>

          <answer>
            <para>&os; поддерживает различные звуковые адаптеры, в том числе
              &soundblaster;, &soundblaster; Pro, &soundblaster; 16, Pro Audio
              Spectrum 16, AdLib и Gravis UltraSound (дополнительную информацию
              можно найти в <ulink url="&url.base;/releases/">Информации о
              релизе &os;</ulink> и странице справочной системы
              по &man.snd.4;).  Имеется также ограниченная поддержка MPU-401
              и совместимых с ним адаптеров.  Поддерживаются и адаптеры,
              соответствующие спецификации &microsoft; Sound System.</para>

            <note>
              <para>Это касается только звука!  Этот драйвер не поддерживает
                CDROM, SCSI или джойстики ни на каких подобных адаптерах, кроме
                &soundblaster;.  Поддерживаются устройства на SCSI-интерфейсе
                &soundblaster; и не-SCSI CDROM, но загрузиться с них
                невозможно.</para>
            </note>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="es1370-silent-pcm">
            <para>Есть ли решение проблемы отсутствия звука при использовании
              звуковых адаптеров &man.pcm.4;?</para>
          </question>

          <answer>
            <para>Некоторые звуковые адаптеры, в частности, es1370, при каждой
              загрузки сбрасывают уровень громкости в 0.  Выполняйте следующую
              команду при каждой загрузке машины:</para>

            <screen>&prompt.root; <userinput>mixer pcm 100 vol 100 cd 100</userinput></screen>
          </answer>
        </qandaentry>
      </qandaset>
    </sect1>


    <sect1 id="compatibility-other">
      <title>Другое оборудование</title>

      <qandaset>
        <qandaentry>
          <question id="other-device-support">
            <para>Какие ещё устройства поддерживаются во FreeBSD?</para>
          </question>

          <answer>
            <para>В <ulink
              url="&url.books.handbook;/install.html#INSTALL-MISC">
              Руководстве</ulink>
              приведён список остальных устройств, которые поддерживаются во
              FreeBSD.</para>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="power-management-support">
            <para>Поддерживает ли FreeBSD управление энергосбережением на
              лэптопах?</para>
          </question>

          <answer>
            <para>FreeBSD версий 4.X и выше поддерживает <acronym>APM</acronym>
              на некоторых машинах.  Более полная информация может быть найдена
              в справочной странице по &man.apm.4;.</para>

            <para>FreeBSD 5.X и последующие её версии поддерживают функции
              <acronym>ACPI</acronym>, реализованные в основной массе
              современного оборудования.  Дополнительную информацию можно найти
              на странице справочной системы &man.acpi.4;.  Если система
              поддерживает как <acronym>APM</acronym>, так и
              <acronym>ACPI</acronym>, можно использовать любую из них.  Мы
              рекомендуем опробовать обе и выбрать ту, что подходит вам в
              большей степени.</para>
          </answer>
        </qandaentry>


	<qandaentry>
	  <question id="disable-acpi">
	    <para>Как я могу отключить ACPI?</para>
	</question>
     
	  <answer>
	    <para>Добавьте строчку <screen>hint.acpi.0.disabled="1"</screen>
	      в файл <filename>/boot/device.hints</filename>.</para>
	  </answer>
        </qandaentry>


        <qandaentry>
          <question id="micron-hang-boot">
            <para>Компьютеры Micron зависают при загрузке</para>
          </question>

          <answer>
            <para>Некоторые материнские платы Micron имеют BIOS, не
              удовлетворяющую стандарту PCI BIOS, что приводит к печальным
              последствиям при загрузке FreeBSD, потому что имеет место
              несоответствие устройств PCI занимаемым ими адресам.</para>

            <para>Для устранения этой проблемы отключите в BIOS опцию
              <quote>Plug and Play Operating System</quote>.</para>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="asusk7v-boot-failure">
            <para>При загрузке с установочной дискеты машины с материнской платой
              ASUS K7V зависают.  Как это исправить?</para>
          </question>

          <answer>
            <para>Войдите в настройку BIOS и выключите <quote>защиту от
              загрузочных вирусов</quote>.</para>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="micron-3comnic-failure">
            <para>Почему сетевой адаптер &tm.3com; PCI не работает с компьютерами
              Micron?</para>
          </question>

          <answer>
            <para>Некоторые материнские платы Micron имеют BIOS, не
              удовлетворяющие стандарту PCI BIOS, что приводит к несоответствию
              устройств PCI занимаемым ими адресам.  Это приводит к печальным
              последствиям при загрузке FreeBSD.</para>

            <para>Для решения этой проблемы отключите в BIOS опцию <quote>Plug
              and Play Operating System</quote>.</para>
          </answer>
        </qandaentry>


	<qandaentry>
	  <question id="newcard-does-not-work">
	    <para>Моя PCMCIA карточка не работает.  Я получаю сообщение:
	      <quote>cbb0: unsupported card type detected.</quote>
	      Что мне делать?</para>
	  </question>

	  <answer>
	    <para>Вы можете попробовать использовать изначальную OLDCARD
	      реализацию.  Отредактируйте ваш конфигурационный файл ядра
	      и удалите следующие строчки:
	      <programlisting>device cbb
device pccard
device cardbus</programlisting>
	     Затем добавьте:
	     <programlisting>device pcic
device card 1</programlisting>
	     Пересоберите и установите новое ядро, как описано в главе
	     <ulink url="&url.books.handbook;/kernelconfig.html">Настройка
	     ядра FreeBSD</ulink>.</para>
	  </answer>
       </qandaentry>
      </qandaset>
    </sect1>
  </chapter>


  <chapter id="troubleshoot">
    <title>Устранение некоторых проблем</title>

    <qandaset>
      <qandaentry>
	<question id="pae">
	  <para>Почему &os; определяет неправильное количество памяти?</para>
	</question>

	<answer>
	  <para>Причина заключается в различии между адресами физической
	    и виртуальной памяти.</para>

	  <para>Существующее соглашение для большинства оборудования ПК заключается в
	    использовании пространства памяти, лежащей в диапазоне между
	    3.5Гб и 4Гб для специальных нужд (обычно для нужд PCI).  Это пространство
	    адресов используется для доступа к PCI оборудованию.  Как результат, реальная
	    физическая память не может виднеться в данном адресном пространстве.</para>

	  <para>Какие действия выполняются с памятью в данном регионе зависит от вашего оборудования.
	    К сожалению, некоторое оборудование ничего не выполняет и возможность
	    использовать эти 500Мб ОЗУ полностью потеряна.</para>

	  <para>К счастью, большинство оборудования перераспределяет память к более
	    верхней позиции, так что она всё ещё может использоваться.  Тем не
	    менее, это может вызвать некоторое замешательство, если вы посмотрите
	    сообщения, выдаваемые при загрузке.</para>

	  <para>На 32 битной версии &os;, кажется что эта память потерялась.
	    На самом деле она перераспределится в промежуток, лежащий за 4Гб,
	    который не видим для 32 битного ядра.  В данном случае, решение
	    заключается в сборке ядра, с включенной опцией PAE.  За дополнительной
	    информацией обращайтесь к
	    <link linkend="memory-limits">этой статье FAQ</link>.</para>

	  <para>На 64 битной версии &os; или в случае использования ядра с
	    включённым PAE, &os; корректно определит и перераспределит память,
	    так, что она станет годной к использованию.  Тем не менее, во время
	    загрузки может показаться, что &os; определяет больше памяти, чем реально
	    имеется в системе.  Это нормально и информация о доступной памяти будет
	    скоректированна по окончанию процесса загрузки.</para>
	</answer>
      </qandaentry>

      <qandaentry>
        <question id="awre">
          <para>На моём винчестеры есть запорченные блоки!</para>
        </question>

        <answer>
          <para>Если это SCSI-устройство, то винчестер должен иметь возможность
            автоматической переадресации таких блоков.  Однако во многих
            поставляемых дисках эта возможность отключена.</para>

          <para>Для включения переадресации запорченных блоков, измените
            режим работы устройства, что может быть выполнено пользователем
            <username>root</username> по команде</para>

          <screen>&prompt.root; <userinput>camcontrol modepage sd0 -m 1 -e -P 3</userinput></screen>

          <para>и изменить значения параметров AWRE и ARRE с 0 на 1:-</para>

          <programlisting>AWRE (Auto Write Reallocation Enbld):  1
ARRE (Auto Read Reallocation Enbld):  1</programlisting>

          <para>Контроллеры современных IDE-дисков имеют встроенную функцию
            переадресации запорченных блоков, которая на момент продажи
            включена.</para>

          <para>Если вы увидите предупреждения о запорченных блоках (на любом
            типе устройства), это значит, что пришло время подумать над заменой
            диска.  Вы можете воспользоваться диагностической программой
            производителя диска для поиска этих запорченных блоков, и в лучшем
            случае это только отнимет ваше время.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="hpnetserver-scsi-failure">
          <para>Почему FreeBSD не распознаёт SCSI-контроллер на машине HP
            Netserver?</para>
        </question>

        <answer>
          <para>В общем-то это известная проблема.  EISA-контроллеры SCSI,
            расположенные на материнской плате машин HP Netserver, занимают
            EISA-слот номер 11, так что все <quote>настоящие</quote> слоты
            EISA будут ему предшествовать.  Так как адресное пространство для
            слотов EISA выше 10 пересекается с адресным пространством,
            предназначенным для PCI, то автоконфигуратор FreeBSD в настоящее
            время не может эту проблему нормально обойти.</para>

          <para>Так что пока лучшее, что вы можете предпринять, это попытаться
            указать, что пересечения диапазонов адресов нет :), установив опцию
            ядра <literal>EISA_SLOTS</literal> в значение 12.
            Отконфигурируйте и откомпилируйте ядро так, как это описано в <ulink
            url="&url.books.handbook;/kernelconfig.html">разделе
            Руководства</ulink> о конфигурировании ядра.</para>

          <para>Конечно, это даст вам типичную ситуации "курица или яйцо"
            при установке системы на такой машине.  Для обхода этой проблемы
            внутри <emphasis>UserConfig</emphasis> есть специальный хак.  Не
            используя <quote>визуального</quote> интерфейса, а только
            интерфейс командной строки, просто наберите</para>

          <programlisting>eisa 12
quit</programlisting>

          <para>в приглашении, и установите систему как обычно.  В любом
            случае рекомендуется, что вы отконфигурируете и установите
            собственное ядро.</para>

          <para>Надеемся, что будущие версии будут содержать полное решение
            этой проблемы.</para>

          <note>
            <para>Вы не сможете использовать режим <literal>dangerously
              dedicated</literal> на машинах HP Netserver.  Полное описание
              причин содержится в <link linkend="dedicate">этом
              замечании</link>.</para>
          </note>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="ed1-timeout">
          <para>Выдаются сообщения типа <errorname>ed1:
            timeout</errorname>.</para>
        </question>

        <answer>
          <para>Обычно это вызвано конфликтом прерываний (например, двух
            адаптеров, использующих один и тот же IRQ).  Загрузите систему с
            опцией -c и смените строку, описывающую ed0/de0/...  на
            соответствующую вашей системе.</para>

          <para>Если вы используете разъём BNC сетевого адаптера, таймауты
            устройства могут быть вызваны плохим терминированием.  Чтобы это
            проверить, подключите терминатор к адаптеру (без кабеля) и
            посмотрите, не исчезли ли сообщения об ошибках.</para>

          <para>Некоторые NE2000-совместимые адаптеры выдают такую ошибку,
            если нет связи по UTP-порту или отключен кабель.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="bad-3c509">
          <para>Почему мой адаптер &tm.3com; 3C509 перестал работать без всякой
            видимой причины?</para>
        </question>

        <answer>
          <para>Этот адаптер имеет странную привычку терять информацию о своих
            настройках.  Обновите настройки вашего адаптера при помощи утилиты
            <command>3c5x9.exe</command> из DOS.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="printer-slow">
          <para>Мой параллельный принтер печатает невероятно медленно.  Что тут
            можно сделать?</para>
        </question>

        <answer>
          <para>Если проблема только в том, что принтер работает ужасно
            медленно, попробуйте сменить <ulink
            url="&url.books.handbook;/printing-intro-setup.html#PRINTING-PARALLEL-PORT-MODE">
            режим работы порта принтера</ulink> так, как это описано в разделе
            <ulink url="&url.books.handbook;/printing-intro-setup.html">
            Настройка принтера</ulink> Руководства.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="signal11">
          <para>Программы аварийно завершают работу с ошибкой <errorname>Signal
            11</errorname>.</para>
        </question>

        <answer>
          <para>Ошибки выполнения, связанные с сигналом 11, происходят,
            когда ваш процесс пытается обратиться к области памяти, доступ к
            которой ему не был дан операционной системой.  Если что-то подобное
            происходит в случайные, на первый взгляд, промежутки времени, то
            вам нужно попытаться выяснить подробности происходящих событий
            более детально.</para>

          <para>Эти проблемы могут быть классифицированы следующим
            образом:</para>

          <orderedlist>
            <listitem>
              <para>Если проблема возникает только в определённом приложении,
                которое было самостоятельно вами разработано, то, скорее всего,
                это ошибка в вашем коде.</para>
            </listitem>

            <listitem>
              <para>Если это проблема в части базового комплекта системы
                FreeBSD, то это тоже может быть ошибка в программном коде, хотя
                в большинстве случаев такие проблемы обнаруживаются и ошибки
                исправляются задолго до того, как обычным читателям FAQ
                доводится использовать этот код (именно для этого предназначена
                версия -current).</para>
            </listitem>
          </orderedlist>

          <para>В частности, достоверно <emphasis>не</emphasis> ошибка FreeBSD,
            если вы сталкиваетесь с проблемой при компиляции программы, но при
            работе компилятора место сбоя каждый раз изменяется.</para>

          <para>Например, положим, что вы запускаете команду <quote>make
            buildworld</quote> и компиляция завершилась аварийно при попытке
            компиляции <filename>ls.c</filename> в <filename>ls.o</filename>.
            Если при следующей попытке повторно выполнить <quote>make
            buildworld</quote> компиляция прервётся на том же самом месте,
            то это ошибки процесса построения -- попробуйте обновить исходные
            тексты и попробуйте снова.  Если же компиляция прерывается в
            каком-то другом месте, то в этом практически достоверно виновато
            оборудование.</para>

          <para>Что вы должны сделать:</para>

          <para>В первом случае вы должны воспользоваться отладчиком, к
            примеру, gdb, для нахождения точки программы, в которой делается
            попытка доступа к неверному адресу и затем исправить эту
            ошибку.</para>

          <para>Во втором случае вам нужно проверить, что ваше оборудование
            исправно.</para>

          <para>Среди часто приводящих к этому причин:</para>

          <orderedlist>
            <listitem>
              <para>Ваши винчестеры могут перегреваться: Проверьте работу
	        вентиляторов в вашем системном блоке, так как ваш диск (и может,
	        также другие компоненты, могут перегреваться).</para>
            </listitem>

            <listitem>
              <para>Работающий процессор перегревается: Это может произойти
                из-за выхода частоты процессора за рабочие границы или поломки
	        вентилятора на процессоре.  В любом случае вам нужно
                убедиться, что ваше оборудование работает так, как ему
                положено, по крайней мере, на момент поиска причин
                неисправности, другими словами, установите частоту работы на
                настройки по умолчанию.</para>

              <para>Если вы превысили рабочие частоты работы процессора,
                заметьте, что дешевле обходится медленная система, чем
                сгоревшая система, требующая замены!  Также общество не часто
                симпатизирует проблемам на таких системах, вне зависимости от
                того, считаете ли вы увеличение рабочей частоты не влияющим на
                работу или нет.</para>
            </listitem>

            <listitem>
              <para>Хитрая память: Если у вас установлено множество микросхем
	        SIMM/DIMM, то вытащите их все и попытайтесь поработать
                индивидуально с каждой микросхемой SIMM или DIMM и локализовать
                проблему либо до проблематичной микросхемы DIMM/SIMM, либо даже
                их комбинации.</para>
            </listitem>

            <listitem>
              <para>Чересчур оптимистические настройки материнской платы: При
                настройке вашей BIOS и выборе положения перемычек на
                материнской плате вы имеете возможность задать различные
                частоты и задержки, и в большинстве случаев настройки по
                умолчанию достаточны, но иногда установка слишком малых
                периодов ожидания для ОЗУ, установка параметра <quote>RAM
                Speed: Turbo</quote> и подобных параметров в BIOS вызовет
                странное поведение.  Возможным решением может стать установка
                параметров BIOS по умолчанию, но сначала стоит записать ваши
                настройки!</para>
            </listitem>

            <listitem>
              <para>Неустойчивое или недостаточное электропитание материнской
                платы.  Если в вашей системе есть неиспользуемые адаптеры
                ввода/вывода, винчестеры или приводы компакт-дисков, попробуйте
                временно их убрать или отключить от кабеля электропитания,
                чтобы посмотреть, сможет ли ваш блок питания работать с меньшей
                нагрузкой.  Или попробуйте воспользоваться другим блоком
                питания, желательно большей мощности (например, если имеющийся
                блок питания рассчитан на 250 Ватт, попробуйте другой
                мощностью 300 Ватт).</para>
            </listitem>
          </orderedlist>

          <para>Вы также должны прочитать FAQ по SIG11 (ссылка дана ниже), в
            котором даны прекрасные описания всех этих проблем, хотя и с точки
            зрения &linux;.  Также обсуждается, как аппаратура или программное
            обеспечение для тестирования памяти могут пропускать сбойную
            память.</para>

          <para>Наконец, если ничего из этого не помогает, то возможно, что
            просто вы нашли ошибку во FreeBSD и должны следовать инструкциям
            по посылке сообщений о проблемах.</para>

          <para>Подробная информация по этому вопросу содержится в <ulink
            url="http://www.bitwizard.nl/sig11/">FAQ по проблеме
            SIG11</ulink>.</para>
          </answer>
        </qandaentry>


        <qandaentry>
          <question id="trap-12-panic">
            <para>Моя система аварийно завершает работу с сообщениями
              <errorname>Fatal trap 12: page fault in kernel mode</errorname>
              либо <errorname>panic:</errorname>, и выдаёт много дополнительной
              информации.  Что мне делать?</para>
          </question>

          <answer>
            <para>Разработчики FreeBSD очень интересуются такими ошибками, но
              им нужно несколько больше информации, чем просто факт
              возникновения этой ошибки.  Полностью скопируйте сообщение.
              Затем обратитесь к разделу FAQ об <link
              linkend="KERNEL-PANIC-TROUBLESHOOTING">аварийных завершениях
              работы ядра</link>, постройте отладочное ядро и получите
              трассу вызовов.  Это может звучать трудной задачей, но вам не
              нужны никакие знания программирования; просто следуйте
              указаниям.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="screen-loses-sync">
          <para>При загрузке монитор темнеет и теряет синхронизацию!</para>
        </question>

        <answer>
          <para>Это известная проблема с видеоадаптерами ATI Mach 64.  Она
            вызвана тем, что этот адаптер использует адрес
            <literal>2e8</literal>, как и четвёртый последовательный порт.
            Из-за ошибки (или особенности работы?) в драйвере &man.sio.4; он
            обращается к порту, даже если он не существует, и
            <emphasis>даже</emphasis> если вы отключите sio3 (четвёртый порт),
            который, как правило, использует этот адрес ввода/вывода.</para>

          <para>Пока это не исправлено, используйте следующий метод:</para>

          <orderedlist>
            <listitem>
              <para>В приглашении загрузчика наберите <option>-c</option>.
                (Это переведёт ядро в режим конфигурации).</para>
            </listitem>

            <listitem>
              <para>Отключите устройства <devicename>sio0</devicename>,
                <devicename>sio1</devicename>, <devicename>sio2</devicename> и
                <devicename>sio3</devicename> (все их).  После этого драйвер
                sio не будет активизироваться и проблем не будет.</para>
            </listitem>

            <listitem>
              <para>Для продолжения загрузки наберите exit.</para>
            </listitem>
          </orderedlist>

          <para>Если вам нужно использовать последовательные порты, вы должны
            построить новое ядро со следующей модификацией: в файле
            <filename>/usr/src/sys/i386/isa/sio.c</filename> найдите строчку,
            содержащую число <literal>0x2e8</literal> и удалите её вместе с
            предшествующий запятой (оставив следующую).  После этого следуйте
            обычным указаниям по построению ядра.</para>

          <para>Даже после этих изменений вы можете обнаружить, что X Window
            работает ненормально.  Если это произошло, удостоверьтесь, что вы
            используете &xfree86; версии не ниже 3.3.3.  Этот и последующие
            релизы имеют встроенную поддержку адаптеров Mach64 и даже отдельный
            X-сервер для таких адаптеров.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="reallybigram">
          <para>Почему FreeBSD использует только 64 Мбайт ОЗУ, тогда как
            установлено все 128 Мбайт?</para>
        </question>

        <answer>
          <para>Так как для определения объёма памяти FreeBSD использует
            информацию BIOS, она ограничена 16 битами, используемыми для
            выражения размера ОЗУ в килобайтах (65535 Кбайт = 64 Мбайт) (или
            меньше... некоторые BIOS ограничивают размеры памяти до 16 Мбайт).
            Если у вас больше чем 64 Мбайт ОЗУ, FreeBSD будет пытаться
            обнаружить эту память; однако эта попытка может и не
            удаться).</para>

          <para>Для решения этой проблемы вам нужно использовать опцию ядра,
            указанную ниже.  Способ выяснения полной информации о памяти из
            BIOS существует, но у нас нет места в загрузочном блоке, чтобы это
            делать.  Когда проблема нехватки места в загрузочных блоках будет
            решена, мы будем использовать расширенные функции BIOS для
            получения полной информации о памяти... но пока мы остановились на
            опции ядра.</para>

          <para><literal>options "MAXMEM=<replaceable>n</replaceable>"</literal></para>

          <para>Здесь <replaceable>n</replaceable> - это объём памяти в
            килобайтах.  Для машины со 128 Мбайт ОЗУ вам нужно использовать
            значение <literal>131072</literal>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="kmem-map-too-small">
          <para>Объём оперативной памяти моей системы превышает 1 Гбайт, работа
            завершается аварийно с выдачей сообщения <quote>kmem_map too
            small</quote> messages.  Что не так?</para>
        </question>

        <answer>
          <para>Как правило, FreeBSD определяет параметры ядра, в частности,
            максимальное количество одновременно открытых файлов, исходя из
            объёма памяти, установленного в системе.  В системах, имеющих 1
            Гбайт или больший объём оперативной памяти, этот механизм
            <quote>автоматического определения параметров</quote> может выбрать
            слишком большие значения: при запуске ядро выделяет пространство
            под различные таблицы и другие структуры, которые заполняют
            основной объём доступной ядру памяти.  В дальнейшем при работе
            системы у ядра не остаётся пространства для динамического
            распределения памяти, и оно завершает работу аварийно.</para>

          <para>Скомпилируйте новое ядро, добавив параметр
            <option>VM_KMEM_SIZE_MAX</option> в конфигурационный файл ядра,
            увеличив его максимальный размер до 400&nbsp;Мбайт
            (<option>options VM_KMEM_SIZE_MAX=419430400</option>).
            400&nbsp;Мбайт должно быть достаточно для машин с объёмом
            оперативной до 6&nbsp;Гбайт.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="panic-kmemmap-too-small">
          <para>В моей системе нет 1 Гбайта оперативной памяти, однако FreeBSD
            аварийно завершает работу, выдавая сообщение <errorname>kmem_map
            too small!</errorname></para>
        </question>

        <answer>
          <para>Такое завершение работы показывает, что системе не хватает
            виртуальной памяти для сетевых буферов (точнее, структур mbuf). Вы
            можете увеличить количество виртуальной памяти для структур mbuf,
            если будете действовать в соответствии с инструкциями раздела
            <ulink
            url="&url.books.handbook;/configtuning-kernel-limits.html#NMBCLUSTERS">
            Ограничения сети</ulink> Руководства.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="proc-table-full">
          <para>Почему я получаю сообщение об ошибке <errorname>/kernel: proc:
            table is full</errorname>?</para>
        </question>

        <answer>
          <para>Ядро FreeBSD позволяет существовать одновременно ограниченному
            числу процессов.  Оно вычисляется на основании параметра
            <literal>MAXUSERS</literal> в конфигурации ядра.
            <literal>MAXUSERS</literal> также влияет на другие ограничения
            ядра, такие как буферы работы с сетью (обратитесь к <link
            linkend="panic-kmemmap-too-small">этому</link> рассмотренному ранее
            вопросу).  Если ваша машина сильно загружена, вам, наверное,
            понадобится увеличить <literal>MAXUSERS</literal>.  Кроме
            максимального числа процессов, это увеличит значения и других
            параметров, ограничивающих систему.</para>

          <para>Для корректировки значения <literal>MAXUSERS</literal>
            обратитесь к разделу <ulink
            url="&url.books.handbook;/configtuning-kernel-limits.html#KERN-MAXFILES">
            Ограничения файлов/процессов</ulink> Руководства.  (Хотя в нём
            говорится об открытых файлах, те же самые ограничения касаются и
            процессов.)</para>

          <para>Если ваша машина загружена слабо, и просто у вас
            слишком много процессов, то вы можете настроить это через sysctl
            <varname>kern.maxproc</varname>.  Если данная переменная нуждается
	    в настройке, она должна быть определена в
	    <filename>/boot/loader.conf</filename>.  За дополнительной информацией,
	    касающейся работы с sysctl переменными обращайтесь к страницам
	    справочника &man.loader.conf.5; и &man.sysctl.conf.5;.  Если эти
	    процессы запущены одним и тем же пользователем, вам также задать значение
            <varname>kern.maxprocperuid</varname> на единицу меньшим, чем новое
            значение <varname>kern.maxproc</varname>.  (Оно должно быть по
            крайней мере на единицу меньшим, потому что системная программа
            &man.init.8;, должна работать всегда.)</para>

          <para>Чтобы сохранить значения sysctl, задайте
            их в <filename>/etc/sysctl.conf</filename>.  Дополнительную информацию
	    о настройке системы с помощью &man.sysctl.8; можно найти в главе
	    Руководства <ulink
	    url="&url.books.handbook;/configtuning-sysctl.html">Настройка с
	    помощью sysctl</ulink> </para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="cmap-busy-panic">
          <para>При перезагрузке с новым ядром выдаётся сообщение
            <literal>CMAP busy panic</literal>.</para>
        </question>

        <answer>
          <para>Процедура определения устаревших файлов
            <filename>/var/db/kvm_*.db</filename> иногда даёт сбой и использует
            не те файлы, что может вызвать аварийный останов системы.</para>

          <para>Если это случилось, перезагрузитесь в однопользовательском
            режиме и выполните команду:</para>

          <screen>&prompt.root; <userinput>rm /var/db/kvm_*.db</userinput></screen>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="brkadrint-illegal-host-access">
          <para>Что означает сообщение <errorname>ahc0: brkadrint,  Illegal
            Host Access at seqaddr 0x0</errorname></para>
        </question>

        <answer>
          <para>Это - результат конфликта со SCSI-адаптером Ultrastor. </para>

          <para>Во время загрузки войдите в меню конфигурации ядра и выключите
            устройство <devicename>uha0</devicename>, являющееся источником
            этой проблемы.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="aci0-illegal-cable">
          <para>При загрузке моей системы выдается сообщение об ошибке
            <errorname>ahc0: illegal cable configuration</errorname>.  С
            подключением кабеля все в порядке.  Что происходит?</para>
        </question>

        <answer>
          <para>На вашей материнской плате отсутствует внешняя логика
            поддержки автоматического терминирования.  Установите в вашем SCSI
            BIOS правильное терминирование для вашей конфигурации вместо
            автоматического терминирования.  Драйвер AIC7XXX не может
            определить, есть ли внешняя логика для распознавания кабеля (и,
            соответственно, автоматического терминирования).  Драйвер просто
            полагает, что эта поддержка должна быть, если конфигурация,
            содержащаяся в EEPROM, установлена в  "automatic termination".  Без
            внешней логики распознавания кабеля драйвер часто будет ошибаться
            при настройке терминирования, что может сказаться на надежности
            шины SCSI.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="mail-loopback">
          <para>Sendmail сообщает, что <errorname>mail loops back to
            myself</errorname></para>
        </question>

        <answer>
          <para>В FAQ по sendmail на это дан такой ответ:-</para>

          <literallayout>
        * Выдаются сообщения "Local configuration error", примерно такие:

        553 relay.domain.net config error: mail loops back to myself
        554 &lt;user@domain.net&gt;... Local configuration error

        Как можно решить эту проблему?

        Согласно записям MX, почта для домена (скажем, domain.net) была
        перенаправлена на указанный хост (в нашем случае relay.domain.net),
        но он не распознаётся как domain.net.  Добавьте строку domain.net в
        файл /etc/mail/local-host-names (если вы используете
        FEATURE(use_cw_file)) или добавьте "Cw domain.net"
        в /etc/mail/sendmail.cf.
          </literallayout>

        <para>Текущая версия <ulink
          url="ftp://rtfm.mit.edu/pub/usenet/news.answers/mail/sendmail-faq">
          FAQ по sendmail</ulink> больше не поставляется вместе с sendmail.
          Однако этот документ регулярно помещается в конференции
          <ulink url="news:comp.mail.sendmail">comp.mail.sendmail</ulink>,
          <ulink url="news:comp.mail.misc">comp.mail.misc</ulink>,
          <ulink url="news:comp.mail.smail">comp.mail.smail</ulink>,
          <ulink url="news:comp.answers">comp.answers</ulink> и
          <ulink url="news:news.answers">news.answers</ulink>.
          Вы можете получить копию по электронной почте, послав сообщение,
          содержащее команду
          <literal>send usenet/news.answers/mail/sendmail-faq</literal> в теле
          письма, в адрес <email>mail-server@rtfm.mit.edu</email>.</para>
      </answer>
    </qandaentry>


<qandaentry>
  <question id="remote-fullscreen">
    <para>Полноэкранные приложения на удалённой машине ведут себя
      неправильно!</para>
  </question>

  <answer>

  <para>На удалённой машине тип терминала может быть установлен в значение,
    отличное от типа терминала <literal>cons25</literal>, требуемом при
    использовании консоли FreeBSD.</para>

  <para>Есть несколько возможных способов решения этой проблемы:</para>

  <itemizedlist>
    <listitem>
      <para>После входа на другую машину установите значение переменной
        окружения TERM равным <literal>ansi</literal> или
        <literal>sco</literal>, если эта машина знает об этих
        типах терминалов.</para>
    </listitem>

    <listitem>
      <para>Используйте эмулятор VT100, например <application>screen</application>
        на консоли FreeBSD. <application>Screen</application> даёт вам
        возможность открывать несколько рабочих сеансов на одном терминале,
        и она имеет ещё ряд полезных особенностей.  Каждое окно программы
        <application>screen</application> ведёт себя как терминал VT100, так
        что переменная TERM на удалённой машине должна быть установлена в
        значение <literal>vt100</literal>.</para>
    </listitem>

    <listitem>
      <para>Опишите терминал <literal>cons25</literal> в базе данных
        характеристик терминалов на удалённой машине.  Способ описания
        зависит от используемой на этой машине операционной системе.  Вам
        может помочь чтение руководств по администрированию удалённой
        системы.</para>
    </listitem>

    <listitem>
      <para>Запустите X-сервер на стороне FreeBSD и войдите на удалённую
        систему с помощью какого-либо эмулятора терминала, работающего в X
        Window, такого, как <command>xterm</command> или
        <command>rxvt</command>.  Переменная окружения TERM на удалённой
        машине должна быть установлена в значение <literal>xterm</literal>
        или <literal>vt100</literal>.</para>
    </listitem>
  </itemizedlist>
  </answer>
</qandaentry>


      <qandaentry>
        <question id="calcru-negative">
          <para>Почему выводятся сообщения <errorname>calcru: negative
            time...</errorname>?</para>
        </question>

        <answer>
          <para>Это может быть вызвано различными аппаратными или программными
            проблемами, связанными с прерываниями.  Это может быть связано как
            с ошибками при программировании, так и с природой самих устройств.
            Например, работа с TCP/IP по параллельному порту с использованием
            большого MTU приводит к этой проблеме, также как использование
            графических акселераторов; в последнем случае вы должны проверить
            настройку прерываний на графическом адаптере.</para>

          <para>Одним из проявлений этой проблемы является прерывание работы
            процессов с диагностическим сообщением <quote>SIGXCPU exceeded cpu
            time limit</quote>.</para>

          <para>Если эта проблема не может быть решена, измените значение
            системной переменной:</para>

          <screen>&prompt.root; <userinput>sysctl -w kern.timecounter.method=1</userinput></screen>

	  <note>
	    <para>Использование опции <option>-w</option> для &man.sysctl.8;
              не рекомендуется и полностью игнорируется во &os; 4.4-RELEASE и
              всех последующих версиях.  Вы можете безболезненно опустить её
              при задании параметров при помощи <command>sysctl</command>, как
              это показано выше.</para>
	  </note>

          <para>Это коснётся производительности системы, но, принимая во
            внимание источник этой проблемы, это будет незаметно.  Если
            проблема всё ещё даёт о себе знать, оставьте значение этой
            переменной равным единичке и увеличьте значение параметра
            <literal>NTIMECOUNTER</literal> в файле конфигурации вашего ядра.
            Если в конце концов вы достигнете значения
            <literal>NTIMECOUNTER=20</literal>, то вам эту проблему решить не
            удастся, прерывания дают слишком большую нагрузку на процессор,
            чтобы обеспечить отслеживание времени.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="pnp-not-found">
          <para>Почему после обновления FreeBSD до версии 4.X мой PnP-адаптер
            больше не обнаруживается (или определяется
            как <literal>unknown</literal>)?</para>
        </question>

        <answer>
          <para>FreeBSD 4.X теперь гораздо более
            <emphasis>PnP-центрична</emphasis>, что отражается на некоторых
            устройствах PnP (к примеру, звуковых адаптерах и внутренних
            модемах), перестающих работать, хотя они функционировали в системе
            FreeBSD 3.X.</para>

          <para>Причины такого поведения объясняются в следующем сообщении
            электронной почты, опубликованном в &a.questions;
            Питером Уэммом (Peter Wemm) в ответ на вопрос о внутреннем модеме,
            который перестал распознаваться после обновления до FreeBSD 4.X
            (комментарии внутри <literal>[]</literal> были добавлены для
            пояснения контекста послания.</para>

          <note>
            <para>Содержание этой цитаты по сравнению с оригинальным текстом
              было изменено.</para>
          </note>

          <blockquote>
            <para>BIOS, поддерживающая PNP, предварительно отводит и оставляет
              ему [модему] место в адресном пространстве портов, так что [в
              3.X] процедура обнаружения в старом стиле ISA
              <quote>находит</quote> его здесь.</para>

            <para>В 4.0 код для работы с ISA гораздо более PnP-центричен.
              [В 3.X] было возможно при распознавании ISA найти
              <quote>беспризорное</quote> устройство и затем по идентификатору
              PNP-устройства произвести поиск и получить ошибку из-за конфликта
              ресурсов.  Поэтому для предотвращения повторной процедуры
              распознавания в нём сначала выключаются все управляемые
              адаптеры.  Это также означает, что для поддерживаемого
              оборудования PnP нужно знать их PnP-идентификаторы.  Имеются
              планы на обеспечение возможности настройки этого со стороны
              пользователя.</para>
          </blockquote>

          <para>Чтобы заставить устройство работать снова, требуется определить
            его PnP-идентификатор и добавить его в список, который используется
            процедурой распознавания ISA для идентификации устройств PnP.  Этот
            идентификатор можно получить при помощи программы &man.pnpinfo.8;,
            найдя устройство в её выдаче, вот, например, вывод команды
            &man.pnpinfo.8; в случае внутреннего модема:</para>

          <screen>&prompt.root; <userinput>pnpinfo</userinput>
Checking for Plug-n-Play devices...

Card assigned CSN #1
Vendor ID PMC2430 (0x3024a341), Serial Number 0xffffffff
PnP Version 1.0, Vendor Version 0
Device Description: Pace 56 Voice Internal Plug & Play Modem

Logical Device ID: PMC2430 0x3024a341 #0
	Device supports I/O Range Check
TAG Start DF
    I/O Range 0x3f8 .. 0x3f8, alignment 0x8, len 0x8
	[16-bit addr]
    IRQ: 4  - only one type (true/edge)</screen>

          <para>[лишние строки TAG исключены]</para>

          <screen>TAG End DF
End Tag

Successfully got 31 resources, 1 logical fdevs
-- card select # 0x0001

CSN PMC2430 (0x3024a341), Serial Number 0xffffffff

Logical device #0
IO:  0x03e8 0x03e8 0x03e8 0x03e8 0x03e8 0x03e8 0x03e8 0x03e8
IRQ 5 0
DMA 4 0
IO range check 0x00 activate 0x01</screen>

          <para>Информация, которая вам нужна, находится в строке <quote>Vendor
            ID</quote> в самом начале вывода команды.  Шестнадцатеричное число в
            скобках (в этом примере 0x3024a341) является PnP-идентификатором, а
            строчка, идущая прямо перед ним (PMC2430) является уникальным
            ASCII-идентификатором.</para>

          <para>Либо, если в списке, выдаваемом &man.pnpinfo.8;, адаптера нет,
            можно воспользоваться утилитой &man.pciconf.8;.  Вот часть выдачи
            команды <command>pciconf -vl</command> для интегрированного в
            материнскую плату звукового адаптера:</para>

          <screen>&prompt.root; <userinput>pciconf -vl</userinput>
chip1@pci0:31:5:        class=0x040100 card=0x00931028 chip=0x24158086 rev=0x02hdr=0x00
    vendor   = 'Intel Corporation'
    device   = '82801AA 8xx Chipset AC'97 Audio Controller'
    class    = multimedia
    subclass = audio</screen>

          <para>В данном случае вам нужно использовать значение для
            <varname>chip</varname>, <quote>0x24158086</quote>.</para>

          <para>Эту информацию (ID производителя или номер микросхемы) нужно
            добавить в файл <filename>/usr/src/sys/isa/sio.c</filename>.</para>

          <para>Сначала вы должны сделать резервную копию файла
            <filename>sio.c</filename> просто на тот случай, если что-то пойдёт
            не так.  Эта копия также может потребоваться для создания патча для
            посылки его вместе с вашим PR (вы же собираетесь послать PR, не
            правда ли?) отредактировав файл <filename>sio.c</filename> и
            поискав строчку</para>

          <programlisting>static struct isa_pnp_id sio_ids[] = {</programlisting>

          <para>после чего переместитесь ниже и найдите подходящее место, чтобы
            добавить строчку для вашего устройства.  Записи имеют примерно такой
            вид, и они отсортированы по ASCII-строкам Vendor ID, которые должны
            быть помещены в поле комментария справа от строки кода вместе с
            полным описанием устройства (если оно поместится) или частью из
            <emphasis>Device Description</emphasis> вывода программы
            &man.pnpinfo.8;:</para>

          <programlisting>{0x0f804f3f, NULL},	/* OZO800f - Zoom 2812 (56k Modem) */
{0x39804f3f, NULL},	/* OZO8039 - Zoom 56k flex */
{0x3024a341, NULL},	/* PMC2430 - Pace 56 Voice Internal Modem */
{0x1000eb49, NULL},	/* ROK0010 - Rockwell ? */
{0x5002734a, NULL},	/* RSS0250 - 5614Jx3(G) Internal Modem */</programlisting>

          <para>Добавьте шестнадцатеричный идентификатор Vendor ID вашего
            устройства в соответствующее место, сохраните файл, перестройте
            ядро и выполните перезагрузку.  Ваше устройство должно теперь быть
            найдено в виде устройства <literal>sio</literal>, как это и было во
            FreeBSD 3.X</para>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="nlist-failed">
    <para>Почему при запуске некоторых программ, например,
      <command>top</command> или <command>systat</command>, выдается
      сообщение об ошибке <errorname>nlist failed</errorname>?</para>
  </question>

  <answer>
  <para>Проблема в том, что приложение, которое вы пытаетесь запустить,
    ищет специфические ссылки в ядре, но по каким-либо причинам не может
    их найти; эта ошибка происходит от одной из следующих проблем:</para>

  <itemizedlist>
    <listitem>
      <para>Ваше ядро и программы пользователей не соответствуют друг другу
        (например, вы построили ядро, но не выполнили команду
        <maketarget>installworld</maketarget>, или наоборот), и поэтому
        таблица имен отличается от того, что думают о ней пользовательские
        приложения.  Если это ваш случай, просто завершите процесс
        обновления (обратитесь к файлу
        <filename>/usr/src/UPDATING</filename> для выяснения правильной
        последовательности действий).</para>
    </listitem>

    <listitem>
      <para>Для загрузки ядра вы не используете
        <command>/boot/loader</command>, а делаете это непосредственно из
        boot2 (обратитесь к справочно странице по &man.boot.8;).  Хотя нет
        ничего плохого в обходе <command>/boot/loader</command>, обычно
        работу по доступности символьной информации ядра из
        пользовательских приложений он выполняет лучше.</para>
    </listitem>
  </itemizedlist>
  </answer>
</qandaentry>


<qandaentry>
  <question id="connection-delay">
    <para>Почему подключение через <command>ssh</command> или
      <command>telnet</command> к моему компьютеру занимает так долго времени?
    </para>
  </question>

  <answer>
  <para>Симптом: между моментом установления TCP-соединения и выдачей
    клиентским программным обеспечением запроса на ввод пароля (или, в случае
    использования &man.telnet.1;, выдачей приглашения на вход) проходит
    большой промежуток времени.</para>

  <para>Проблема: скорее всего, задержка вызвана программным обеспечением на
    стороне сервера, которое пытается преобразовать IP-адрес клиента в
    имя хоста.  Многие серверы, включая Telnet и SSH, поставляемые с FreeBSD,
    делают это для того, чтобы, кроме всего прочего, записать имя хоста в
    файле журнала для справки администратора.</para>

  <para>Лечение: Если проблема возникает вне зависимости от того, к какому
    серверу вы подключаетесь с вашего компьютера (клиента), то причина в
    клиенте; или же, если проблема возникает только при чьей-либо попытке
    подключиться к вашему компьютеру (серверу), то проблема с сервером.</para>

  <para>Если проблема с клиентом, то единственным методом ее решения является
    исправление DNS, чтобы сервер смог распознать вашу машину.  Если это
    происходит в локальной сети, то предположите, что это проблема с сервером и
    продолжайте чтение; обратно, если это происходит в глобальной сети Интернет,
    то в большинстве случаев вам нужно обратиться к вашему провайдеру и
    попросить исправить положение.</para>

  <para>Если проблема с сервером, и это происходит в локальной сети, то вам
    нужно настроить сервер для разрешения запросов на преобразование адреса в
    имя хоста в диапазоне ваших локальных адресов.  Обратитесь к страницам
    Справочника по &man.hosts.5; и &man.named.8; для получения более подробной
    информации.  Если это происходит в глобальной сети Интернет, то проблема
    может заключаться в некорректной работе ресолвера вашего сервера.  Для
    проверки попробуйте найти другой хост, скажем,
    <hostid>www.yahoo.com</hostid>.  Если это не работает, то проблема у
    вас.</para>

  <para>Из-за свежей установки &os;, также возможно, что информация о домене
    и сервере имён отсутствует в <filename>/etc/resolv.conf</filename>.  Это
    часто будет вызывать задержку в работе <application>SSH</application>, так
    как опция <quote>UseDNS</quote> по умолчанию установлена в значение
    <quote>yes</quote> в файле <filename>sshd_config</filename> из каталога
    <filename>/etc/ssh</filename>.  Если именно это является причиной проблемы,
    то вам нужно будет либо добавить недостающую информацию в
    <filename>/etc/resolv.conf</filename>, либо в качестве временной меры
    установить <quote>UseDNS</quote> в <quote>no</quote> в файле
    <filename>sshd_config</filename>.</para>
  </answer>
</qandaentry>

      <qandaentry>
        <question id="stray-irq">
          <para>Что означает сообщение <errorname>stray IRQ</errorname>?</para>
        </question>

	<answer>
	  <para>Потерянные IRQ являются признаком странностей в работе
            аппаратных IRQ, в основном оборудования, которое удаляет свои
            запросы на прерывание посреди цикла подтверждения запроса на
            прерывание.</para>

	  <para>Имеется три варианта работы с такими ситуациями:</para>

	  <itemizedlist>
	    <listitem>
	      <para>Примириться с сообщениями.  В любом случае подавляются все
                сообщения, кроме каждых первых 5 на IRQ.</para>
	    </listitem>

	    <listitem>
	      <para>Убрать предупреждающие сообщения, изменив параметр 5 на 0 в
                функции <function>isa_strayintr()</function>, так что все
                предупреждения будут подавлены.</para>
	    </listitem>

	    <listitem>
	      <para>Избавиться от предупреждений, установив параллельный порт,
                использующий IRQ 7 и драйвер PPP для него (это есть на
                большинстве систем), и установив диск IDE или другое
                оборудование, использующее IRQ 15 и подходящий драйвер.</para>
	    </listitem>
	  </itemizedlist>
	</answer>
      </qandaentry>


      <qandaentry>
        <question id="file-table-full">
          <para>Почему в dmesg регулярно выводятся сообщения <errorname>file:
            table is full</errorname>?</para>
        </question>

        <answer>
          <para>Такое сообщение об ошибке сигнализирует о том, что в вашей
            системе исчерпано количество доступных файловых дескрипторов.
            Пожалуйста, обратитесь к разделу <ulink
            url="&url.books.handbook;/configtuning-kernel-limits.html#KERN-MAXFILES">
            kern.maxfiles</ulink> главы о <ulink
            url="&url.books.handbook;/configtuning-kernel-limits.html">
            Настройке ограничений ядра</ulink> Руководства для выяснения всех
            подробностей и устранения этой проблемы.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="laptop-clock-skew">
          <para>Почему часы на моем лэптопе показывают неправильное
            время?</para>
        </question>

        <answer>
          <para>В вашем лэптопе установлены двое или большее количество
            таймеров, а FreeBSD выбрала не тот.</para>

          <para>Запустите &man.dmesg.8; и посмотрите строки, содержащие слово
            <literal>Timecounter</literal>.  В последней из них указан таймер,
            выбранный системой, и, скорее всего, это будет
            <literal>TSC</literal>.</para>

          <screen>&prompt.root; <userinput>dmesg | grep Timecounter</userinput>
Timecounter "i8254"  frequency 1193182 Hz
Timecounter "TSC"  frequency 595573479 Hz</screen>

          <para>Вы можете удостовериться в этом, проверив
            &man.sysctl.3;-переменную
            <varname>kern.timecounter.hardware</varname>.</para>

          <screen>&prompt.root; <userinput>sysctl kern.timecounter.hardware</userinput>
kern.timecounter.hardware: TSC</screen>

          <para>BIOS может изменить частоту TSC&mdash;может, для изменения
            скорости работы процессора при работе от батареек или переводя в
            режим пониженного электропитания, но FreeBSD не отслеживает это и
            в результате часы начинают спешить или отставать.</para>

          <para>В этом примере имеется также и таймер <literal>i8254</literal>,
            и он может быть выбран записью его имени в
            &man.sysctl.3;-переменную
            <varname>kern.timecounter.hardware</varname>.</para>

          <screen>&prompt.root; <userinput>sysctl -w kern.timecounter.hardware=i8254</userinput>
kern.timecounter.hardware: TSC -&gt; i8254</screen>

          <para>Теперь ваш лэптоп будет аккуратнее следить за временем.</para>

          <para>Чтобы это изменение вступало в силу во время загрузки системы,
            добавьте в файл <filename>/etc/sysctl.conf</filename> такую
            строчку.</para>

          <programlisting>kern.timecounter.hardware=i8254</programlisting>
	</answer>
      </qandaentry>


      <qandaentry>
	<question id="null-null">
	  <para>Почему мой лэптоп некорректно распознаёт PC-карты?</para>
	</question>

	<answer>
	  <para>Эта проблема часто встречается на лэптопах, которые работают
            более чем с одной операционной системой.  Некоторые не-BSD
            операционные системы оставляют аппаратную часть PC-карт в
            неустойчивом состоянии.  <command>pccardd</command> распознает
            карту как <errorname>"(null)""(null)"</errorname>, а не как
            реально используемую модель.</para>

	  <para>Вы должны убрать всё питание со слота PC-карты для полного
            сброса аппаратуры.  Полностью выключите лэптоп.  (Не переводите его
            ни в спящий, ни в ждущий режим; питание должно быть выключено
            полностью.)  Подождите несколько секунд и перезагрузитесь.  Теперь
            ваша PC-карта должна заработать.</para>

	  <para>В некоторых лэптопах аппаратная часть неверно сообщает о
            своём выключении.  Если описанное выше не работает, остановите
            работу, выньте батарею, подождите несколько секунд, вставьте
            батарею и перезагрузитесь.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="boot-read-error">
          <para>Сразу после экрана BIOS начальный загрузчик FreeBSD выводит
            сообщение <errorname>Read error</errorname> и
            останавливается.</para>
        </question>

        <answer>
          <para>Начальный загрузчик FreeBSD неверно определяет параметры
            винчестера.  Их можно установить вручную утилитой fdisk при
            создании или изменении параметров слайса FreeBSD.</para>

          <para>Правильные значения параметров диска можно посмотреть в BIOS.
            Обратите внимание на число дорожек, головок и секторов для этого
            диска.</para>

          <para>В подпрограмме fdisk утилиты &man.sysinstall.8; нажмите
            <keycap>G</keycap> для установки параметров диска (disk
            geometry).</para>

          <para>Появится диалоговое окно, запрашивающее количество дорожек,
            головок и секторов.  Задайте значения, взятые из BIOS и разделяемые
            символами слэша.  Например, 5000 дорожек, 250 головок и 60 секторов
            будут введены как <userinput>5000/250/60</userinput>.</para>

          <para>Нажмите enter для установки этих значений, а затем клавишу
            <keycap>W</keycap> для того, чтобы записать новую таблицу
            разделов на диск.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="bootmanager-restore">
          <para>Другая операционная система уничтожила мой менеджер загрузки,
            как мне его восстановить?</para>
        </question>

        <answer>
          <para>Запустите утилиту &man.sysinstall.8; и выберите пункт
            Configure, а затем Fdisk.  Выберите диск, на котором ранее
            находился менеджер загрузки, при помощи клавиши
            <keycap>пробел</keycap>.  Нажмите <keycap>W</keycap> для записи
            изменений на диск.  Появится диалоговое окно для выбора
            устанавливаемого начального загрузчика.  Выберите нужный, и он
            будет восстановлен.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="indefinite-wait-buffer">
          <para>Что означает сообщение <errorname>swap_pager: indefinite
            wait buffer:</errorname>?</para>
        </question>

        <answer>
          <para>Это значит, что процесс пытается сбросить страницу памяти на
            диск, и попытка сделать это оканчивается неудачно вот уже в течение
            более чем 20 секунд.  Это может быть вызвано испорченными блоками
            на диске, кабелями, подключением или другим оборудованием
            ввода/вывода.  Если диск сам по себе на самом деле испорчен, вы
            также увидите ошибки работы с диском в
            <filename>/var/log/messages</filename> и при работе команды
            <command>dmesg</command>.  В противном случае проверьте кабели и
            подключения.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="udma-icrc">
          <para>Что означают ошибки <quote>UDMA ICRC</quote>, и как их
            исправить?</para>
        </question>

        <answer>
          <para>Драйвер &man.ata.4; сообщает об ошибках
            <quote>UDMA ICRC</quote>, когда нарушается передача в или с
            диска в режиме DMA.  Драйвер будет повторять передачу
            несколько раз.  Если повторные попытки окончатся неудачей, он
            переключится из режима DMA в более медленный режим PIO
            взаимодействия с устройством.</para>

          <para>Проблема может возникать по многим причинам, хотя самым
            распространённой является неправильное или сбоящее подключение
            кабелей.  Проверьте кабели ATA на наличие повреждений и
            соответствие используемому режиму Ultra DMA.  Если вы используете
            диски на съёмных салазках, они также должны быть совместимыми с
            этим режимом.  Удостоверьтесь, что все соединения подключены
            хорошо.  Проблемы также наблюдались, когда старый диск
            устанавливался на тот же самый канал ATA, что и Ultra DMA 66 (или
            более быстрый) диск.  Наконец, такие ошибки могут указывать на
            сбойность самого диска.  Большинство производителей дисков
            предоставляют программное обеспечение для тестирования своих
            дисков, так что проверьте свой диск, и, если это необходимо,
            сделайте резервную копию данных и замените его.</para>

          <para>Для просмотра и выбора режимов DMA или PIO для каждого
            устройства ATA можно использовать утилиту &man.atacontrol.8;.  В
            частности, команда <command>atacontrol mode
            <replaceable>channel</replaceable></command> выдаст режимы,
            используемые заданным каналом ATA, причём первичный канал
            нумеруется нулём, и так далее.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="lock-order-reversal">
          <para>Что означают сообщения <errorname>lock order
            reversal</errorname>?</para>
        </question>

        <answer>
          <para>&a.rwatson; очень кратко ответил на этот вопрос в списке
            рассылки freebsd-current в теме <quote><ulink
            url="http://docs.freebsd.org/cgi/getmsg.cgi?fetch=65165+0+/usr/local/www/db/text/2003/freebsd-current/20031221.freebsd-current">lock
            order reversal - что это означает?</ulink></quote></para>

          <blockquote>
            <attribution>&a.rwatson; в списке рассылки freebsd-current, 14
              декабря 2003</attribution>

            <para>Эти предупреждения выдаются подсистемой отслеживания
              блокировок в реальном времени Witness, включаемой в ядра FreeBSD
              -CURRENT (и отсутствующей в релизах).  Более полную информацию
              о Witness можно получить из страницы справочной системы
              &man.witness.4;, в которой описаны её возможности.  Кроме всего
              прочего, Witness выполняет в режиме реального времени проверку
              последовательности блокировок, используя предопределённые
              последовательности и выдавая на консоль предупреждения при их
              нарушении.  Это делается с целью обнаружения возможного
              появления неснимаемых блокировок при нарушении
              последовательности их установки.  Можно считать, что Witness
              является несколько консервативной системой, поэтому выдаёт
              ложные срабатывания.  В случае, когда Witness безошибочно
              обнаружила проблему с последовательностью блокировок, то это
              говорит о том, что "если вам не повезёт, то неснимаемая
              блокировка появится здесь".  Существует несколько известных
              случаев ложного срабатывания, которые нам ещё
              предстоит описать более подробно для снижения потока бесполезных
              сообщений.  Другие, не столь распространённые ситуации, обычно
              связаны с ошибками в недавно добавленных блокировках, которые
              достаточно быстро исправляются благодаря неустанной генерации
              сообщений со стороны Witness :-).</para>
          </blockquote>

          <note>
            <para>Обратитесь к <ulink
              url="http://sources.zabbadoz.net/freebsd/lor.html">страничке
              Бьорна Зиба</ulink> (Bjoern Zeeb), посвящённой порядку
              блокировок, чтобы узнать об известных ситуациях его
              изменения.</para>
          </note>
        </answer>
      </qandaentry>

      <qandaentry>
        <question id="called-with-non-sleepable-locks-held">
          <para>Что означают сообщения <errorname>Called ... with
	    the following non-sleepable locks held</errorname>?</para>
        </question>
            
        <answer>
          <para>Это означает, что функция, которая может находиться в
	      <quote>спящем</quote> состоянии была вызвана во время
	      использования мьютекс (или другого не <quote>засыпающего</quote>)
	      блокирования.</para> 

          <para>Причина этого - ошибка, потому что мьютексы не предполагают
	      находиться в удерживаемом состоянии длительные промежутки
	      времени, а блокировать только на короткие периоды синхронизации.
	      Это правило позволяет драйверам устройств использовать мьютексы
	      для синхронизации с остальной частью ядра во время прерываний.
	      Прерывания (во FreeBSD) могут находиться не в <quote>спящем
	      состоянии</quote>.  Следовательно необходимо, чтобы не было
	      подсистем в ядре, которые бы занимались блокировкой длительный
	      период, используя мьютекс.</para>

          <para>Для ловли таких ошибок, в ядро могут быть добавлены
	      assertions, которые будут взаимодействовать с подсистемой witness
	      для генерирования предупреждения или фатальной ошибки (в
	      зависимости от системной конфигурации) в случаях когда
	      производится потенциально блокирующий вызов с удержанием
	      мьютекса.</para>

          <para>В общем, такие предупреждения не критичны, но тем не менее,
	      с неудачной синхронизацией (timing) они могут вызвать нежелательные
	      эффекты, начиная от незначительной задержки в ответной реакции системы
	      до полной блокировки системы.</para>
        </answer>
      </qandaentry>

      <qandaentry>
	<question id="touch-not-found">
	  <para>Почему процесс buildworld/installworld завершается с сообщением
	    <errorname>touch: not found</errorname>?</para>
	</question>

	<answer>
	  <para>Эта ошибка не означает, что не найдена утилита &man.touch.1;.
	    Ошибка наверняка появляется из-за того, что даты модификации файлов
	    установлены в будущем.  Если ваши CMOS часы установлены на локальное
	    время, то вам надо отрегулировать часовой механизм ядра, запустив
	    команду <command>adjkerntz&nbsp;-i</command>, при загрузке в
	    однопользовательском режиме.</para>
	</answer>
      </qandaentry>
    </qandaset>
  </chapter>


  <chapter id="commercial">
    <title>Коммерческие приложения</title>

    <note>
      <para>Этот раздел выглядит довольно заброшенным, однако мы,
        конечно же, надеемся, что производители сделают добавления! :)  Проект
        FreeBSD финансово не заинтересован в успехах ни одной из компаний,
        которые здесь упоминаются, хотя приводит их список в интересах
        общества (в предположении, что коммерческий интерес к FreeBSD может
        положительно повлиять на дальнейшее развитие FreeBSD).  Мы просим
        поставщиков коммерческого программного обеспечения присылать нам
        информацию о ваших продуктах для включения в этот список.  Более
        полный список производителей находится на <ulink
        url="&url.base;/commercial/commercial.html">странице
        производителей</ulink>.</para>
    </note>

    <qandaset>
      <qandaentry>
        <question id="officesuite">
          <para>Где можно найти набор офисных программ для FreeBSD?</para>
        </question>

        <answer>
          <para>Офисный пакет с открытым кодом <ulink
            url="http://www.openoffice.org">OpenOffice.org</ulink> имеет версию,
            предназначенную для работы во FreeBSD.  &linux;-версия <ulink
            url="http://www.sun.com/staroffice/">StarOffice</ulink>,
            расширенной закрытой версии OpenOffice.org, также работает во
            FreeBSD.</para>

          <para>В Коллекции Портов FreeBSD имеется также множество текстовых
            редакторов, электронных таблиц и программ для работы с
            изображениями.</para>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="motif">
    <para>Где можно купить &motif; для FreeBSD?</para>
  </question>

  <answer>
  <para>Open Group опубликовала исходные тексты &motif; 2.2.2.  Вы
    можете установить пакет <literal>open-motif</literal>
    или скомпилировать его из портов.  Воспользуйтесь <ulink
    url="&url.books.handbook;/ports.html">секцией Порты Руководства</ulink> для
    получения детальной информации о том, как это сделать.

    <note>
      <para>Лицензия Open &motif; позволяет распространение только если
      библиотека используется на <ulink url="http://www.opensource.org/">
      ОС с открытыми исходными текстами</ulink>.</para>
    </note>
  </para>

  <para>В дополнении нужно сказать, что существуют также дистрибьюторы
    предлагающие коммерческий вариант &motif;. Эта библиотека не
    бесплатна, но ее лицензия позволяет вести разработку приложений с
    закрытыми исходными текстами. Обратитесь в фирму
    <link linkend="apps2go">Apps2go</link>, предлагающую
    самый дешёвый дистрибутив &motif; 2.1.20 для FreeBSD (как для &i386;, так
    и для Alpha) в формате ELF.<anchor id="apps2go"></para>

  <para>Существуют два дистрибутива, <quote>для разработчиков</quote>
    (<quote>development edition</quote>) и ещё более дешёвая <quote>времени
    выполнения</quote> (<quote>runtime edition</quote>).  В эти дистрибутивы
    включены:</para>

  <itemizedlist>
    <listitem>
      <para>OSF/&motif; manager, xmbind, panner, wsm.</para>
    </listitem>

    <listitem>
      <para>Пакет разработчика с uil, mrm, xm, xmcxx, файлами include
        и Imake.</para>
    </listitem>

    <listitem>
      <para>Статические и динамические ELF-библиотеки.</para>
    </listitem>

    <listitem>
      <para>Демонстрационные приложения.</para>
    </listitem>
  </itemizedlist>

  <para>При оформлении заказа не забудьте указать, что вам нужна версия &motif;
    именно для FreeBSD (не забудьте также указать архитектуру процессора)!
    <emphasis>Apps2go</emphasis> также продаёт версии для NetBSD и OpenBSD.  В
    настоящий момент их можно получить только по FTP.</para>

  <variablelist>
    <varlistentry><term>Дополнительная информация</term>
      <listitem>
        <para><ulink
          url="http://www.apps2go.com/">WWW-сервер Apps2go</ulink></para>
      </listitem>
    </varlistentry>

    <varlistentry><term>или</term>
      <listitem>
        <para>электронные адреса отделов <ulink
          url="mailto:sales@apps2go.com">продаж</ulink> и <ulink
          url="mailto:support@apps2go.com">поддержки</ulink>.</para>
      </listitem>
    </varlistentry>

    <varlistentry><term>или</term>
      <listitem>
        <para>телефоны (817) 431 8775  и +1 817 431-8775</para>
      </listitem>
    </varlistentry>
  </variablelist>

  <para>Обратитесь в фирму <link linkend="xig">Xi Graphics</link> за
    дистрибутивом &motif; 2.0 для FreeBSD в формате a.out.</para>

  <para>В этот дистрибутив включены:</para>

  <itemizedlist>
    <listitem>
      <para>OSF/&motif; manager, xmbind, panner, wsm.</para>
    </listitem>

    <listitem>
      <para>Пакет разработчика с uil, mrm, xm, xmcxx, файлами include
        и Imake.</para>
    </listitem>

    <listitem>
      <para>Статические и динамические библиотеки (для использования с
        FreeBSD 2.2.8 и ранее).</para>
    </listitem>

    <listitem>
      <para>Демонстрационные приложения.</para>
    </listitem>

    <listitem>
      <para>Отформатированные страницы Справочника.</para>
    </listitem>
  </itemizedlist>

  <para>При заказе обязательно укажите, что вам требуется версия &motif; именно
    для FreeBSD!  <emphasis>Xi Graphics</emphasis> также предлагает версии
    для BSDI и &linux;.  В настоящее время это набор из 4 дискет... в будущем
    это будет стандартный дистрибутив на компакт-диске, как их CDE.</para>

  </answer>
</qandaentry>


      <qandaentry>
        <question id="cde">
          <para>Где можно купить CDE для FreeBSD?</para>
        </question>

        <answer>
          <para>Фирма <link linkend="xig">Xi Graphics</link> предлагала CDE для
            FreeBSD, но сейчас этот продукт в продаже отсутствует.</para>

          <para><ulink url="http://www.kde.org/">KDE</ulink> - это свободно
            распространяемый вариант графической среды для X11, которая во
            многом похожа на CDE.  Вам может также приглянуться <ulink
            url="http://www.xfce.org/">xfce</ulink>.  Как KDE, так и xfce могут
            быть найдены в <ulink url="&url.base;/ports/">коллекции
            портов</ulink>.</para>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="commercial-xserver">
    <para>Существуют ли коммерческие высокопроизводительные X-серверы?</para>
  </question>

  <answer>

  <para>Да, фирма <ulink url="http://www.xig.com/">Xi Graphics</ulink>
    предлагает свои продукты Accelerated-X для FreeBSD и других систем
    на базе Intel.</para>

  <para>Xi Graphics предлагает высокопроизводительный X-сервер, который
    обеспечивает простую конфигурацию, поддержку нескольких видеоадаптеров
    и поставляется только в бинарной форме, в форме стандартного
    дистрибутива на дискетах для FreeBSD и &linux;.  Xi Graphics также
    предлагает высокопроизводительный X-сервер с поддержкой компьютеров
    класса laptop.<anchor id="xig"></para>

  <para>Имеется бесплатная <quote>демонстрационная</quote> версия 5.0.</para>

  <para>Xi Graphics также предлагает &motif; и CDE для FreeBSD (смотрите
    выше).</para>

  <variablelist>
    <varlistentry><term>Дополнительная информация</term>
      <listitem>
        <para><ulink url="http://www.xig.com/">
          Xi Graphics WWW page</ulink></para>
      </listitem>
    </varlistentry>

    <varlistentry><term>или</term>
      <listitem>
        <para><ulink url="mailto:sales@xig.com">Sales</ulink> или <ulink
          url="mailto:support@xig.com">Support</ulink> по email.</para>
      </listitem>
    </varlistentry>

    <varlistentry><term>или</term>
      <listitem>
        <para>телефон (800) 946 7433  или +1 303 298-7478.</para>
      </listitem>
    </varlistentry>
  </variablelist>
  </answer>
</qandaentry>


<qandaentry>
  <question id="database-systems">
    <para>Существуют ли СУБД для FreeBSD?</para>
  </question>

  <answer>

  <para>Да!  Обратитесь к разделу <ulink
    url="&url.base;/commercial/software_bycat.html#CATEGORY_DATABASE">
    Поставщики программного обеспечения</ulink> на Web-сервере FreeBSD.</para>

  <para>Также посмотрите раздел <ulink
    url="&url.base;/ports/databases.html">Базы данных</ulink>
    Коллекции портов.</para>

  </answer>
</qandaentry>


      <qandaentry>
        <question id="oracle-support">
          <para>Можно ли запустить &oracle; на FreeBSD?</para>
        </question>

        <answer>
          <para>Да. Руководство по настройке &linux;-&oracle; на FreeBSD
            находится по следующим адресам:</para>

          <itemizedlist>
            <listitem>
              <para><ulink url="http://www.scc.nl/~marcel/howto-oracle.html">
                http://www.scc.nl/~marcel/howto-oracle.html</ulink></para>
            </listitem>

            <listitem>
              <para><ulink
                url="http://www.lf.net/lf/pi/oracle/install-linux-oracle-on-freebsd">
                http://www.lf.net/lf/pi/oracle/install-linux-oracle-on-freebsd</ulink></para>
            </listitem>
          </itemizedlist>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="commercial-webbrowsers">
          <para>Существуют ли коммерческие Web-браузеры для &os;?</para>
        </question>

        <answer>
          <para>Да.  Opera является многоплатформенным Web-браузером, который
            выпущен и для &os;.  Посетите сайт <ulink
            url="http://www.opera.com/">www.opera.com</ulink> для выяснения
            всех деталей.  Среди портов также есть версия Opera, оплачиваемая
            показом рекламных баннеров.</para>
        </answer>
      </qandaentry>
    </qandaset>
  </chapter>


<chapter id="applications">
<title>Прикладные программы</title>

<qandaset>
<qandaentry>
  <question id="user-apps">
    <para>Итак, где находятся все прикладные программы?</para>
  </question>

  <answer>

  <para>Пожалуйста, загляните на <ulink url="&url.base;/ports/index.html">
    страницу портов</ulink>, содержащую информацию о программных продуктах,
    перенесённых во FreeBSD.  На данный момент в этом списке находится более
    &os.numports; приложений и он ежедневно увеличивается, так что почаще туда
    заглядывайте или подпишитесь на <link
    linkend="mailing">список рассылки</link>
    <literal>freebsd-announce</literal>, в котором публикуется информация
    о появлении новых приложений.</para>

  <para>Большинство портов должны нормально работать на системах веток
    4.X, 5.X и 6.X.  При выходе
    нового релиза FreeBSD в него в каталог <filename>ports/</filename>
    включается актуальная на момент выхода коллекция портов.</para>

  <para>Мы также поддерживаем концепцию <quote>пакаджа</quote>, являющегося не
    более чем упакованным дистрибутивом в бинарной форме с некоторыми
    встроенными возможностями по его настройке во время установки. Пакадж
    может быть легко установлен и деинсталлирован снова без углубления
    в детали того, какие файлы должны быть установлены.</para>

  <para>Используйте меню установки пакаджей в
    <filename>/stand/sysinstall</filename> (в пункте меню post-configuration)
    или запускайте &man.pkg.add.1; с указанием конкретных файлов
    с пакаджами, которые вы хотите установить.  Файл с пакаджем, как
    правило, идентифицируется по его суффиксу <filename>.tgz</filename> или
    <filename>.tbz</filename>.  Для обладателей дистрибутива системы на
    компакт-диске предназначен каталог
    <filename>packages/All</filename>, содержащий все эти файлы.  Они также
    могут быть получены по сети для разных версий FreeBSD со следующих
    серверов:</para>

  <variablelist>
    <varlistentry><term>для 4.X-RELEASE/4-STABLE</term>
      <listitem>
        <para><ulink
          url="ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/i386/packages-4-stable/">
          ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/i386/packages-4-stable/</ulink></para>
      </listitem>
    </varlistentry>

    <varlistentry><term>для 5.X-RELEASE/5-STABLE</term>
      <listitem>
        <para><ulink
          url="ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/i386/packages-5-stable/">
          ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/i386/packages-5-stable/</ulink></para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>для 6.X-RELEASE/6-STABLE</term>
        <listitem>
          <para><ulink
            url="ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/i386/packages-6-stable/">
            ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/i386/packages-6-stable</ulink></para>
        </listitem>
    </varlistentry>

    <varlistentry>
      <term>для 7-CURRENT</term>
	<listitem>
	  <para><ulink
	    url="ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/i386/packages-7-current/">
	    ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/i386/packages-7-current</ulink></para>
	</listitem>
    </varlistentry>

  </variablelist>

  <para>или с ближайшего к вам зеркального сервера.</para>

  <para>Имейте в виду, что не все порты могут быть доступны в виде
    пакаджей, так как постоянно идёт добавление новых. Неплохо время от
    времени проверять, какие пакаджи доступны на основном сервере <ulink
    url="ftp://ftp.FreeBSD.org/pub/FreeBSD/">ftp.FreeBSD.org</ulink>.</para>

  </answer>
</qandaentry>


      <qandaentry>
        <question id="configure-inn">
          <para>Как настроить INN (Internet News) на моей машине?</para>
        </question>

        <answer>
          <para>После установки пакаджа или порта <filename
            role="package">news/inn</filename> для начала загляните на <ulink
            url="http://www.visi.com/~barr/INN.html">страничку Дэйва
            Бэрра</ulink> (Dave Barr), посвящённую INN, где вы
            найдёте соответствующий FAQ.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="java">
          <para>Поддерживает ли FreeBSD среду &java;?</para>
        </question>

        <answer>
          <para>Да.  Посетите страницу <ulink
            url="&url.base;/java/index.html">
            http://www.FreeBSD.org/java/</ulink>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="ports-4x">
          <para>Почему некоторый порт не компилируется на моей машине
            с 4.X-STABLE?</para>
        </question>

        <answer>
          <para>Если вы используете FreeBSD версии, значительно отстающей от
            -CURRENT или -STABLE, вам может потребоваться обновить Коллекцию
            портов.  Дополнительную информацию о том, как это сделать, можно
            найти в <ulink url="&url.books.porters-handbook;/keeping-up.html">
            соответствующем разделе</ulink> Руководства по созданию портов.
            Если ваша Коллекция портов находится в актуальном состоянии,
            то, скорее всего, кто-то внёс изменения в порт, так что
            он работает в -CURRENT, но не работает в -STABLE.  Так как
            предполагается, что коллекция портов должна работать как в ветке
            -CURRENT, так и в ветви -STABLE, то, пожалуйста, пошлите сообщение
            об этой ошибке с помощью команды &man.send-pr.1;.</para>
        </answer>
      </qandaentry>


      <qandaentry>
	<question id="make-index">
	  <para>Я попытался сформировать файл <filename>INDEX</filename>
	    командой <command>make index</command>, однако попытка окончилась
            неудачей.  Почему?</para>
	</question>

	<answer>
	  <para>Первым делом всегда проверяйте, что ваша Коллекция портов
            находится в актуальном состоянии.  Ошибки, которые отражаются на
            построении файла <filename>INDEX</filename> из актуальной копии
            Коллекции портов, бросаются в глаза и поэтому практически всегда
            исправляются немедленно.</para>

	  <para>Если ваши данные обновлены, возможно, вы столкнулись с другой
            проблемой.  У команды <command>make index</command> имеется
            известная ошибка, касающаяся работы с неполными копиями
            Коллекции портов.  При выполнении команды предполагается, что у вас
            имеется локальная копия каждого порта, от которого зависит любой
            другой порт, локальная копия которого у вас имеется.  Предположив,
            что у вас на диске есть копия <filename>foo/bar</filename>, и
	    <filename>foo/bar</filename> зависит от
            <filename>baz/quux</filename>, то у вас также должна быть копия
            <filename>baz/quux</filename>, а также всех портов, от которых
            зависит <filename>baz/quux</filename>, и так далее.  В противном
            случае у <command>make index</command> будет недостаточно
            информации для создания дерева зависимостей.</para>

	  <para>В частности, эта проблема отражается на пользователях &os;,
            использующих &man.cvsup.1; для отслеживания Коллекции портов, но
            отказывающихся от установки определенных категорий приложений их
            перечислением в файле <filename>refuse</filename>.  Теоретически
            любой пользователь может отказаться от некоторых категорий, однако
            на практике имеется слишком много портов, которые зависят от
            портов, относящихся к другим категориям.  Пока кто-нибудь не
            предложит решения этой проблемы, общая рекомендация заключается в
            том, что если вы хотите сформировать <filename>INDEX</filename>, то
            должны иметь полную копию Коллекции портов.</para>

	  <para>В редких случаях <filename>INDEX</filename> не перестраивается
            из-за странных комбинаций значений переменных
            <makevar>WITH_<replaceable>*</replaceable></makevar> или
	    <makevar>WITHOUT_<replaceable>*</replaceable></makevar>, заданных в
            файле <filename>make.conf</filename>.  Если вы думаете, что это ваш
            случай, прежде чем сообщать об этом в &a.ports;, попытайтесь
            сформировать <filename>INDEX</filename> с
            отключенными значениями этих переменных.</para>
	</answer>
      </qandaentry>


      <qandaentry>
        <question id="cvsup-in-base">
          <para>Почему CVSup не интегрирована в основное дерево FreeBSD?</para>
        </question>

	<answer>
          <para>Базовый комплект установки FreeBSD спроектирован
            самодостаточным - то есть операционную систему возможно полностью
            построить, имея весьма ограниченный набор инструментов.  Так, все
            инструменты, действительно необходимые для компиляции исходных
            текстов FreeBSD, сами поставляются с исходными текстами.  Речь идёт
            о компиляторе C (&man.gcc.1;), &man.make.1;, &man.awk.1; и подобных
            средствах.</para>

	  <para>Так как CVSup написан на языке Modula-3, его включение в
            базовый комплект FreeBSD также потребует добавление и поддержку
            компилятора Modula-3.  Это приведёт как к увеличению как дискового
            пространства, требуемого исходным текстам FreeBSD, так и усилий
            по их поддержке.  Таким образом, как
            разработчикам, так и пользователям гораздо проще иметь CVSup в
            виде отдельного порта, который легко устанавливается как пакадж,
            размещаемый на установочных CD с FreeBSD.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="ports-update">
          <para>Я обновил исходные тексты, как теперь обновить установленные
            порты?</para>
        </question>

        <answer>
          <para>С FreeBSD не поставляется инструмент обновления портов, но
            есть несколько программ, несколько облегчающих этот процесс.  Вы
            можете также установить дополнительные инструменты для упрощения
            работы с портами.</para>

          <para>Команда &man.pkg.version.1; может генерировать скрипт, который
            обновит установленные порты до последних версий, присутствующих в
            дереве портов.</para>

          <screen>&prompt.root; <userinput>pkg_version -c &gt; <replaceable>/tmp/myscript</replaceable></userinput></screen>

          <para>Получаемый скрипт <emphasis>необходимо</emphasis>
            отредактировать вручную перед его использованием.  Последние версии
            команды &man.pkg.version.1; заставляют делать это, помещая в начало
            скрипта команду &man.exit.1;.</para>

          <para>Вы должны сохранить выводимый результат работы скрипта, так как
            в нем отмечаются пакаджи, зависящие от тех, что были обновлены.
            Их также может потребоваться обновить.  Обычный случай, когда
            требуется обновление, это случай изменения номеров версии
            динамической библиотеки, так что порты, использующие эту
            библиотеку, должны быть перекомпилированы для использования новой
            версии.</para>

	  <note>
            <para>Начиная с FreeBSD 5.0 (и для более поздних версий),
	      &man.pkg.version.1; более не поддерживает параметр
              <option>-c</option>.</para>
	  </note>

          <para>Если у вас достаточный объем дискового пространства, вы можете
            использовать инструмент <command>portupgrade</command> для
            автоматизации всего этого.  В <command>portupgrade</command>
            включены различные утилиты для упрощения работы с пакаджами.  Он
            находится в <filename
            role="package">sysutils/portupgrade</filename>.  Так как он написан
            на языке Ruby, то вряд ли <command>portupgrade</command> может быть
            кандидатом на включение в поставку FreeBSD.  Однако это вовсе не
            значит, что его нельзя использовать.</para>

          <para>Если ваша система находится в работе постоянно, для создания
            списка портов, которым может потребоваться обновление, каждую
            неделю, можно использовать систему &man.periodic.8;, задав
            <literal>weekly_status_pkg_enable="YES"</literal> в файле
            <filename>/etc/periodic.conf</filename>.</para>
        </answer>
      </qandaentry>

      <qandaentry>
        <question id="minimal-sh">
          <para>Почему возможности <command>/bin/sh</command> так малы?
            Почему бы во FreeBSD не использовать <command>bash</command> или
            какой-либо другой командный процессор?</para>
        </question>

        <answer>
          <para>Потому что в стандарте &posix; сказано, что все командные
            процессоры должны вести себя так же, как shell.</para>

          <para>Более подробный ответ заключается в следующем: многим
            требуется, чтобы разрабатываемые скрипты для командного процессора
            были переносимы между многими системами.  Именно поэтому в &posix;
            очень подробно описан командный процессор и набор утилит.
            Большинство скриптов пишутся на языке процессора Bourne shell, к
            тому же некоторые важные программные вызовы (&man.make.1;,
            &man.system.3;, &man.popen.3; и их аналоги на языках скриптов
            высокого уровня, таких как Perl или Tcl) предполагают для
            интерпретации команд использование именно Bourne shell.  Так как
            Bourne shell используется столь широко и часто, то очень важно,
            чтобы он стартовал очень быстро, его поведение было строго
            регламентировано и при этом потребности в оперативной памяти были
            малы.</para>

          <para>В имеющейся реализации мы приложили максимум усилий для
            воплощения в жизнь всех этих требований одновременно.  Для того,
            чтобы сохранить <command>/bin/sh</command> небольшим по размеру,
            мы не включили многие из обычных возможностей, которые имеются в
            других командных процессорах.  Однако в Коллекцию Портов включены
            командные процессоры, обладающие гораздо большими возможностями,
            такие, как bash, scsh, tcsh и zsh.  (Вы можете сами сравнить
            использование памяти всеми этими оболочками, посмотрев в колонки
            <quote>VSZ</quote> и <quote>RSS</quote> вывода команды
            <command>ps -u</command>).</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="netscape-slow-startup">
          <para>Почему &netscape; и Opera запускаются так долго?</para>
        </question>

        <answer>
          <para>Обычно проблема заключается в том, что на вашей машине
            неправильно настроен DNS.  И &netscape;, и Opera при запуске
            обращаются к DNS.  Браузер не появится на вашем рабочем столе, пока
            программа либо не получит ответ на свой запрос, либо не определит,
            что система к сети не подключена.</para>
        </answer>
      </qandaentry>


      <qandaentry>
	<question id="ports-base-update">
	  <para>Я обновил некоторые разделы Коллекции Портов при помощи CVSup,
            и теперь многие порты перестали строиться со странными
            диагностическими сообщениями!  Что случилось?  Коллекция Портов
            каким-то образом оказалась неработоспособной?</para>
	</question>

	<answer>
	  <para>Если вы обновляете Коллекцию Портов только частично, используя
            один из более мелких наборов CVSup, обходясь без CVSup-набора
	    <literal>ports-all</literal>, то вы должны
            <emphasis>всегда</emphasis> обновлять также и набор
	    <literal>ports-base</literal>!  Причины описаны в <ulink
	    url="&url.books.handbook;/cvsup.html#CVSUP-COLLEC-PBASE-WARN">
            Руководстве</ulink>.</para>
	</answer>
      </qandaentry>


      <qandaentry>
	<question id="midi-sound-files">
	  <para>Как создать аудио-CD из файлов MIDI?</para>
	</question>

	<answer>
          <para>Для создания аудио-CD из MIDI-файлов сначала установите из
            портов программу <filename
            role="package">audio/timidity++</filename>, затем установите набор
            патчей GUS от Эрика Уэлша (Eric A. Welsh), доступный по адресу
            <ulink url="http://www.stardate.bc.ca/eawpatches/html/default.htm">
            </ulink>.  После корректной установки timidity++ midi-файлы могут
            быть преобразованы в wav-файлы следующей командой:</para>

          <screen>&prompt.user; <userinput>timidity -Ow -s 44100 -o /tmp/juke/01.wav 01.mid</userinput></screen>

          <para>wav-файлы затем могут быть преобразованы в другие форматы или
            записаны как аудио-CD, что описано в Руководстве FreeBSD.</para>
        </answer>
      </qandaentry>
    </qandaset>
  </chapter>


  <chapter id="kernelconfig">
    <title>Конфигурирование ядра</title>

    <qandaset>
      <qandaentry>
        <question id="make-kernel">
          <para>Я хочу изменить настройки ядра.  Это сложно?</para>
        </question>

        <answer>
          <para>Вовсе нет! Обратитесь к <ulink
            url="&url.books.handbook;/kernelconfig.html">соответствующему
            разделу</ulink> Руководства, который посвящён этому вопросу.</para>

          <note>
            <para>Мы рекомендуется сохранить копию вашего нового файла ядра
              <filename>/kernel</filename> в файл
              <filename>kernel.ГГММДД</filename> после того, как вы получите
              нормально работающее ядро.  Также сделайте резервную копию нового
              каталога <filename>/modules</filename> в каталог
              <filename>/modules.ГГММДД</filename>.  В таком случае, если вы
              испортите что-либо в вашем конфигурационном файле, то сможете
              загрузить резервное ядро, вместо того, чтобы начинать всё снова
              с <filename>kernel.GENERIC</filename>.  Это, в частности, имеет
              смысл, если вы производите загрузку системы с контроллера,
              который не поддерживается в стандартном ядре GENERIC.</para>
          </note>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="missing-hw-float">
          <para>Я не могу скомпилировать ядро. Отсутствует
            <literal>_hw_float</literal>.Почему?</para>
        </question>

        <answer>
          <para>Наверное, вы удалили <devicename>npx0</devicename> (посмотрите
            справку по &man.npx.4;) из вашего файла конфигурации ядра, потому
            что у вас нет математического сопроцессора.  Устройство
            <devicename>npx0</devicename> является
            <emphasis>ОБЯЗАТЕЛЬНЫМ</emphasis>.  Где-то в вашем оборудовании всё
            же присутствует устройство, обеспечивающее поддержку вычислений с
            плавающей точкой, которое уже не является отдельной микросхемой,
            как это было в старые добрые времена 386 процессоров.  Вы
            <emphasis>должны</emphasis> включить поддержку устройства
            <devicename>npx0</devicename>.  Даже если вам удастся построить
            ядро без поддержки <devicename>npx0</devicename>, оно всё равно не
            загрузится.</para>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="why-kernel-big">
    <para>Почему моё ядро такое большое (больше 10&nbsp;Мбайт)?</para>
  </question>

  <answer>

  <para>Скорее всего, вы компилировали ядро в <emphasis>отладочном
    режиме</emphasis>.  Ядра, построенные в этом режиме, содержат много
    символьной информации, которая используется для отладки и сильно
    увеличивает размер ядра.  Заметьте, что уменьшения производительности при
    использовании
    отладочного ядра нет или оно незначительно, однако отладочное ядро
    полезно иметь под рукой на случай аварийного завершения работы
    системы.</para>

  <para>Однако, если вы испытываете нехватку дискового пространства или
    просто не хотите использовать отладочное ядро, проверьте, что имеют
    место следующие две вещи:</para>

  <itemizedlist>
    <listitem>
      <para>В конфигурационном файле вашего ядра нет строчки, имеющей такой
        вид:</para>

      <programlisting>makeoptions DEBUG=-g</programlisting>
    </listitem>

    <listitem>
      <para>Вы не запускали утилиту &man.config.8; с опцией
        <option>-g</option>.</para>
    </listitem>
  </itemizedlist>

  <para>В любой из вышеописанных ситуаций ядро будет построено с
    отладочным режимом.  Если же вы точно следуете указанным шагам, то сможете
    построить обычное ядро и заметите значительное уменьшение его размера;
    большинство ядер имеют размер от 1.5&nbsp;Мбайт до 2&nbsp;Мбайт.</para>

  </answer>
</qandaentry>


      <qandaentry>
        <question id="multiport-serial-interrupts">
          <para>Почему появляются конфликты прерываний при включении поддержки
            многопортовых коммуникационных адаптеров.</para>
        </question>

        <answer>
          <para>Когда я компилирую ядро с поддержкой многопортовых
            коммуникационных адаптеров, сообщается, что только первый порт
            будет тестироваться, а все остальные пропускаются из-за конфликтов
            прерываний.  Как это исправить?</para>

          <para>Проблема состоит в том, что во FreeBSD встроен код,
            предохраняющий ядро от аппаратных и программных конфликтов.
            Вам нужно убрать указания IRQ на всех портах, кроме одного.
            Например:</para>

          <programlisting>#
# Высокоскоростной многопортовый коммуникационный адаптер - 16550 UARTS
#
device sio2 at isa? port 0x2a0 tty irq 5 flags 0x501 vector siointr
device sio3 at isa? port 0x2a8 tty flags 0x501 vector siointr
device sio4 at isa? port 0x2b0 tty flags 0x501 vector siointr
device sio5 at isa? port 0x2b8 tty flags 0x501 vector siointr</programlisting>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="generic-kernel-build-failure">
          <para>Почему мне не удаётся откомпилировать ни один вариант ядра, даже
            GENERIC?</para>
        </question>

        <answer>
          <para>Есть несколько причин, приводящих к возникновению этой
            проблемы.  Вот они, в случайном порядке:</para>

          <itemizedlist>
            <listitem>
              <para>Вы не используете новые цели <command>make
                buildkernel</command> и <command>make installkernel</command>,
                и ваше дерево исходных текстов отличается от того, которое
                использовалось для построения работающей в данный момент
                системы (например, вы выполняете построение 4.3-RELEASE на
                системе 4.0-RELEASE).  Если вы пытаетесь выполнить обновление,
                то, пожалуйста, прочитайте файл
                <filename>/usr/src/UPDATING</filename>, обратив особое внимание
                на раздел <quote>COMMON ITEMS</quote> в его конце.</para>
            </listitem>

            <listitem>
              <para>Вы используете новые цели <command>make
                buildkernel</command> и <command>make installkernel</command>,
                но выполнение цели <command>make buildworld</command> не было
                завершено.  Полное и корректное выполнение цели <command>make
                buildkernel</command> зависит от файлов, генерирующихся при
                выполнении цели <command>make buildworld</command>.</para>
            </listitem>

            <listitem>
              <para>Даже если вы пытаетесь построить <link
                linkend="stable">FreeBSD-STABLE</link>, возможно, что вы
                скачали дерево исходных текстов в момент, когда оно
                модифицировалось или было неработоспособно по другим причинам;
                абсолютно гарантируется построение только релизов, хотя в
                большинстве случаев <link linkend="stable">
                FreeBSD-STABLE</link> строится без проблем.  Если вы ещё этого
                не сделали, попробуйте сгрузить дерево исходных текстов
                повторно и посмотреть, разрешилась ли проблема.  Попробуйте
                использовать другой сервер в случае, если есть проблемы с тем,
                который вы используете сейчас.</para>
            </listitem>
          </itemizedlist>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="scheduler-in-use">
          <para>Каким образом можно определить, какой планировщик используется
            в работающей системе?</para>
        </question>

        <answer>
          <para>Если вы работаете с &os; версии 5.2.1 или более ранней,
            проверьте существование sysctl-переменной
            <literal>kern.quantum</literal>.  Если она у вас есть, то вы должны
            увидеть примерно такое сообщение:</para>

          <screen>&prompt.user; sysctl <replaceable>kern.quantum</replaceable>
kern.sched.quantum: 99960</screen>

          <para>Если sysctl-переменная <literal>kern.quantum</literal>
            существует, то у вас используется планировщик 4BSD.  Если это не
            так, то вы получите сообщение об ошибке, которое выдаст
            &man.sysctl.8;, (и которое вы можете проигнорировать):</para>

          <screen>&prompt.user; sysctl <replaceable>kern.sched.quantum</replaceable>
sysctl: unknown oid 'kern.sched.quantum'</screen>

          <para>Во &os; версий 5.3-RELEASE и выше название используемого
            планировщика доступно напрямую в виде значения sysctl-параметра
            <literal>kern.sched.name</literal>:</para>

          <screen>&prompt.user; sysctl <replaceable>kern.sched.name</replaceable>
kern.sched.name: 4BSD</screen>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="scheduler-kern-quantum">
          <para>Что такое <literal>kern.quantum</literal>?</para>
        </question>

        <answer>
          <para><literal>kern.quantum</literal> определяет максимальное
            количество тактов, которое процесс может выполняться, не будучи
            прерванным.  Этот параметр специфичен для планировщика 4BSD, так
            что вы можете использовать его наличие для определения типа
            используемого планировщика.  Во &os; версий 5.X и выше параметр
            <literal>kern.quantum</literal> был переименован в
            <literal>kern.sched.quantum</literal>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="scheduler-kern-sched-quantum">
          <para>Что такое <literal>kern.sched.quantum</literal>?</para>
        </question>

        <answer>
          <para>Обратитесь к <xref linkend="scheduler-kern-quantum"></para>
        </answer>
      </qandaentry>
    </qandaset>
  </chapter>


  <chapter id="disks">
    <title>Диски, файловые системы и начальные загрузчики</title>

    <qandaset>
      <qandaentry>
        <question id="adding-disks">
          <para>Как добавить в систему новый диск?</para>
        </question>

        <answer>
          <para>Обратитесь к Руководству по форматированию дисков на сервере
            <ulink url="&url.articles.formatting-media;/index.html">
            www.FreeBSD.org</ulink>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="new-huge-disk">
          <para>Как перенести систему на большой новый диск?</para>
        </question>

        <answer>
          <para>Самый лучший способ заключается в переустановке ОС на новый
            диск и последующем переносе данных пользователей.	Это очень
            рекомендуется делать, если вы следовали ветке -STABLE в течение
            более одного релиза или обновляли релиз, а не устанавливали
            новый.  Вы можете установить программу booteasy на оба диска с
            помощью команды &man.boot0cfg.8; и выполнять загрузку с любого из
            них до тех пор, пока не будете удовлетворены новой конфигурацией
            системы.  Пропустите следующий абзац, чтобы перейти к вопросу
            переноса данных после этой операции.</para>

          <para>Если вы решили не делать новой установки, то вам нужно разбить
            на разделы и разметить новый диск с помощью
            <filename>/stand/sysinstall</filename> или &man.fdisk.8; и
            &man.disklabel.8;.	Вы также должны установить на оба диска
            программу booteasy с помощью &man.boot0cfg.8;, чтобы иметь
            возможность выполнять загрузку как старой, так и новой системы
            после выполнения копирования.  Обратитесь к <ulink
            url="&url.articles.formatting-media;/index.html">
            руководству по форматированию носителей</ulink> за подробным
            описанием этого процесса.</para>

          <para>Итак, после подготовки диска вы можете переносить данные.  К
            сожалению, вы не можете просто скопировать данные.	Такие вещи, как
            файлы устройств (в каталоге <filename>/dev</filename>), флаги и
            ссылки будут этому мешать.	Вам нужно использовать инструменты,
            которые работают с такими случаями, а именно &man.dump.8;.  Хотя
            рекомендуется выполнять перенос данных в однопользовательском
            режиме, это не обязательное условие.</para>

          <para>Вы не должны использовать ничего, кроме &man.dump.8; и
            &man.restore.8; для переноса корневой файловой системы.  Команда
            &man.tar.1; может сработать, а может и не сработать.  Также вы
            должны использовать &man.dump.8; и &man.restore.8; при переносе
            одного раздела в другой пустой раздел.  Последовательность шагов
            при использовании программы dump для переноса данных раздела в
            новый раздел такова:</para>

          <procedure>
            <step>
              <para>выполните команду newfs над новым разделом.</para>
            </step>

            <step>
              <para>смонтируйте его во временный каталог.</para>
            </step>

            <step>
              <para>перейдите в этот каталог.</para>
            </step>

            <step>
              <para>Выполните команду dump над старым разделом, направив вывод в
	        новый раздел.</para>
            </step>
          </procedure>

          <para>Например, если вы собираетесь перенести корневую файловую
            систему на устройство <devicename>/dev/ad1s1a</devicename> с
            использованием каталога <filename>/mnt</filename> в качестве
            временной точки монтирования, то это делается так:</para>

          <screen>&prompt.root; <userinput>newfs /dev/ad1s1a</userinput>
&prompt.root; <userinput>mount /dev/ad1s1a /mnt</userinput>
&prompt.root; <userinput>cd /mnt</userinput>
&prompt.root; <userinput>dump 0af - / | restore xf -</userinput></screen>

          <para>Переразбиение разделов с использованием dump требует несколько
            больше усилий.  Для объединения раздела типа
            <filename>/var</filename> с его вышестоящим разделом, создайте новый
            раздел, достаточно большой для размещения их обоих, переместите
            вышестоящий раздел так, как это описано выше, а затем переместите
            нижестоящий раздел в пустой каталог, созданный при первом
            перемещении:</para>

          <screen>&prompt.root; <userinput>newfs /dev/ad1s1a</userinput>
&prompt.root; <userinput>mount /dev/ad1s1a /mnt</userinput>
&prompt.root; <userinput>cd /mnt</userinput>
&prompt.root; <userinput>dump 0af - / | restore xf -</userinput>
&prompt.root; <userinput>cd var</userinput>
&prompt.root; <userinput>dump 0af - /var | restore xf -</userinput></screen>

          <para>Для отделения каталога от вышестоящего, скажем, для размещения
            <filename>/var</filename> в собственном разделе, которого не было,
            создайте оба раздела, затем смонтируйте нижестоящий раздел в
            подходящий каталог во временную точку монтирования, а затем
            переместите старый единый раздел:</para>

          <screen>&prompt.root; <userinput>newfs /dev/ad1s1a</userinput>
&prompt.root; <userinput>newfs /dev/ad1s1d</userinput>
&prompt.root; <userinput>mount /dev/ad1s1a /mnt</userinput>
&prompt.root; <userinput>mkdir /mnt/var</userinput>
&prompt.root; <userinput>mount /dev/ad1s1d /mnt/var</userinput>
&prompt.root; <userinput>cd /mnt</userinput>
&prompt.root; <userinput>dump 0af - / | restore xf -</userinput></screen>

          <para>Вы можете использовать &man.cpio.1;, &man.pax.1;, &man.tar.1;
            вместо &man.dump.8; для данных пользователей.  На момент написания
            этого документа было известно, что они теряют информацию о флагах
            файлов, так что используйте их с осторожностью.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="dangerously-dedicated">
          <para>Не угрожает ли режим <quote>dangerously dedicated</quote> моему
            здоровью?</para>
        </question>

        <answer>
          <para><anchor id="dedicate">В процессе установки вы можете выбрать
            два различных метода разбиения вашего диска (дисков).  По умолчанию
            это делается
            в режиме совместимости с другими операционными системами на этой же
            машине с использованием записей в таблице разделов fdisk (то, что
            называется <quote>слайсом</quote> во FreeBSD), со слайсом
            (разделом), выделенным FreeBSD.  Опционально, вы можете выбрать
            установку менеджера загрузки для переключения между операционными
            системами.  Либо вы можете выделить диск полностью под FreeBSD, не
            заботясь о совместимости с другими операционными системами.</para>

          <para>Почему же этот режим называется <quote>dangerous</quote>? Дело
            в том, что диск в этом режиме не будет содержать того, что обычные
            утилиты для ПК распознают как таблицу разделов.  В зависимости от
            того, насколько хорошо они написаны, они могут сообщить вам об
            этом, как только обнаружат такой диск, или, что гораздо хуже,
            могут запортить загрузчик BSD, даже не спрашивая и не сообщая об
            этом.  К тому же известно, что разметка диска в режиме
            <quote>dangerously dedicated</quote> вводит в заблуждение BIOS
            многих производителей, включая AWARD (которые используются в
            компьютерах HP Netserver, Micronics и многих других) и Symbios/NCR
            (производителя популярных SCSI-контроллеров серии 53C8xx).  И это не
            полный список, есть ещё другие производители.  Симптомами подобных
            проблем является сообщение <errorname>read error</errorname>,
            выводимое загрузчиком FreeBSD, когда он не может найти сам себя, а
            также зависания системы при загрузке.</para>

          <para>Тогда зачем вообще нужен этот режим?  Он экономит всего лишь
            несколько килобайт дискового пространства и может вызвать
            серьёзные проблемы при новой установке.  Причиной появления
            этого режима является желание избежать появления одной из самых
            распространённых проблем, с которой сталкиваются новички -
            соответствие параметров BIOS и реальных параметров диска.</para>

          <para><quote>Параметры</quote> диска являются устаревшей концепцией,
            но она лежит в основе работы BIOS с диском.  Когда программа
            установки FreeBSD создаёт слайсы, она записывает их расположение в
            соответствии с тем, как с ними будет работать BIOS.  Если это
            делается неправильно, вы не сможете выполнить загрузку
            системы.</para>

          <para>Режим <quote>dangerously dedicated</quote> пытается обойти
            это, упрощая решение данной проблемы.  Иногда он делает это
            правильно.  Однако это значит, что его нужно использовать только
            как последнюю альтернативу - есть способы получше, решающие
            проблему в 99 случаях из 100.</para>

          <para>Итак, как избежать использования режима <quote>DD</quote> во
            время установки?  Сначала запишите параметры диска, которые
            сообщает BIOS.  Вы можете выяснить это, заставив ядро вывести эти
            параметры при загрузке, указав <option>-v</option> в приглашении
            <literal>boot:</literal>, или используя <command>boot -v</command>
            в загрузчике.  Перед тем, как запустится программа установки, ядро
            выведет параметры, используемые BIOS.  Не волнуйтесь - подождите
            запуска программы установки, а затем воспользуйтесь скроллингом,
            чтобы посмотреть значения этих параметров.  Как правило, BIOS
            нумерует диски в том же порядке, что и FreeBSD, сначала IDE, затем
            SCSI.</para>

          <para>Когда вы разбиваете диск на слайсы, проверьте, что параметры
            диска, выводимые в окне программы FDISK, корректны (то есть они
            соответствуют параметрам BIOS); если это не так, нажмите
            <keycap>g</keycap>, чтобы их исправить.  Вы можете это
            сделать, если на диске нет абсолютно ничего или если этот диск был
            перенесён с другой системы.  Заметьте, что это касается только
            загрузочного диска; FreeBSD прекрасно разберётся с остальными
            дисками, которые могут у вас быть.</para>

          <para>Как только вы добились соответствия параметров диска в BIOS и
            FreeBSD, скорее всего, проблем у вас больше не будет, и
            использовать режим <quote>DD</quote> не потребуется.  Если,
            однако, страшное сообщение <errorname>read error</errorname>
            продолжает появляться при загрузке, самое время перекреститься и
            попробовать этот режим - терять вам больше нечего.</para>

          <para>Чтобы вернуть диск из режима <quote>dangerously
            dedicated</quote> к нормальному режиму использования, есть два
            способа.  Первый заключается в том, что вы записываете достаточное
            количество байтов NULL поверх MBR, чтобы любая программа установки
            системы полагала,
            что это чистый диск. Это можно сделать, например, командой</para>

          <screen>&prompt.root; <userinput>dd if=/dev/zero of=/dev/rda0 count=15</userinput></screen>

          <para>Другой способ - недокументированной командой DOS</para>

          <screen><prompt>C:\&gt;</prompt> <userinput>fdisk /mbr</userinput></screen>

          <para>установить новую MBR, удалив загрузчик BSD.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="safe-softupdates">
          <para>На каких разделах можно без опаски использовать механизм
            Soft Updates?  Я слышал, что использование Soft Updates на
            <filename>/</filename> могут приводить к проблемам.</para>
        </question>

        <answer>
          <para>Краткий ответ: обычно вы можете использовать Soft Updates
            без опаски на всех разделах.</para>

          <para>Подробный ответ: Было несколько возражений против использования
            Soft Updates на корневом разделе.  Soft Updates имеют две
            характеристики, которые этому способствуют.  Во-первых, раздел с
            Soft Updates имеет мало шансов потери данных по время
            аварийного останова системы.  (Раздел не будет попорчен; просто
            будут потеряны данные.)  Кроме того, Soft Updates могут приводить к
            временной нехватке дискового пространства.</para>

          <para>При использовании Soft Updates ядро может задерживать до
            тридцати секунд реальную запись изменений на физический диск.  Если
            вы удаляете большой файл, он остается на диске, пока ядро не
            выполнит удаления на самом деле.  Это может привести к очень
            простой проблеме.  Предположим, что вы удалили один большой файл и
            тут же создали другой большой файл.  Первый большой файл еще не
            удален реально с физического диска, так что на диске может не
            оказаться достаточного пространства для второго большого файла.  Вы
            получите ошибку, говорящую о том, что на разделе нет достаточного
            пространства, хотя вы точно знаете, что только что освободили
            его большой объем!  Если вы попробуете еще раз выполнить операцию
            секундами позже, создание файла сработает так, как это и ожидалось.
            Это не раз заставляло пользователей почесать голову и дважды
            проверить свое психическое здоровье, файловую систему FreeBSD и оба
            этих объекта.</para>

          <para>Если система может аварийно остановиться после того, как ядро
            примет набор данных для записи на диск, но перед тем, как данные
            реально запишутся, то данные могут потеряться или оказаться
            испорченными.  Такой риск весьма мал, но в общем-то, управляем.
            Использование кэширование записи на IDE очень сильно увеличивает
            этот риск; настоятельно рекомендуется выключить кэширование записи
            для IDE при использовании Soft Updates.</para>

          <para>Эти проблемы влияют на все разделы, использующие Soft Updates.
            Итак, что это означает для корневого раздела?</para>

          <para>Жизненно важная информация на корневом разделе меняется очень
            редко.  Файлы, такие, как <filename>/kernel</filename> и содержимое
            <filename>/etc</filename> меняется только при обслуживании системы,
            или когда пользователи меняют свои пароли.  Если в системе
            произойдет сбой в период тридцатисекундного окна после выполнения
            такого изменения, возможно, что данные окажутся потерянными.  Этот
            риск незначителен для большинства применений, но вы должны иметь в
            виду, что он есть.  Если ваша система не может принять такой риск,
            не используйте Soft Updates с корневой файловой системой!</para>

          <para><filename>/</filename> традиционно является одним из самых
            маленьких разделов.  По умолчанию FreeBSD размещает каталог
            <filename>/tmp</filename> в <filename>/</filename>.  Если у вас
            забит <filename>/tmp</filename>, вы можете встретиться с
            возникающими время от времени проблемами с исковым пространством.
            Создание символической ссылки <filename>/tmp</filename>,
            указывающей на <filename>/var/tmp</filename>, решит эту
            проблему.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="inappropriate-ccd">
          <para>Что не так с устройством ccd?</para>
        </question>

        <answer>
          <para>Симптом выглядит так:</para>

          <screen>&prompt.root; <userinput>ccdconfig -C</userinput>
ccdconfig: ioctl (CCDIOCSET): /dev/ccd0c: Inappropriate file type or format</screen>

          <para>Это сообщение обычно выдаётся, когда вы пытаетесь объединить
            разделы <literal>c</literal>, по умолчанию имеющие тип
            <literal>unused</literal>.  Драйвер ccd требует, чтобы
            используемые разделы имели тип FS_BSDFFS.  Отредактируйте метки
            тех дисков, которые вы хотите использовать, сменив типы разделов
            на <literal>4.2BSD</literal>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="ccd-disklabel">
          <para>Почему невозможно отредактировать метку диска ccd?</para>
        </question>

        <answer>
          <para>Симптом выглядит так:</para>

          <screen>&prompt.root; <userinput>disklabel ccd0</userinput>
(здесь выводится информация о диске, пробуем отредактировать метку)
&prompt.root; <userinput>disklabel -e ccd0</userinput>
(редактирование, сохранение, выход)
disklabel: ioctl DIOCWDINFO: No disk label on disk;
use "disklabel -r" to install initial label</screen>

          <para>Это происходит из-за того, что метка диска, возвращаемая ccd,
            на самом деле <quote>ненастоящая</quote>, не соответствующая
            реально располагающейся на диске.  Вы можете решить эту проблему,
            явно записав эту метку обратно следующим образом:</para>

          <screen>&prompt.root; <userinput>disklabel ccd0 &gt; /tmp/disklabel.tmp</userinput>
&prompt.root; <userinput>disklabel -Rr ccd0 /tmp/disklabel.tmp</userinput>
&prompt.root; <userinput>disklabel -e ccd0</userinput>
(теперь это будет работать)</screen>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="mount-foreign-fs">
          <para>Можно ли смонтировать другие файловые системы?</para>
        </question>

        <answer>
          <para>FreeBSD поддерживает ряд других файловых систем.</para>

          <variablelist>
            <varlistentry>
              <term>Digital UNIX</term>

              <listitem>
                <para>Компакт-диски с файловой системой UFS могут быть
	          смонтированы без всяких проблем.  Монтирование файловых
                  систем Digital UNIX или других систем, поддерживающих UFS,
                  может быть более сложным, в зависимости от особенностей
                  разбиения диска конкретной операционной системой.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>&linux;</term>

              <listitem>
                <para>FreeBSD поддерживает разделы <literal>ext2fs</literal>.
                  За дополнительной информацией обратитесь к странице
                  справочника &man.mount.ext2fs.8;.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>&windowsnt;</term>

              <listitem>
                <para>Во FreeBSD имеется драйвер доступа к NTFS в режиме
                  только для чтения.  Для получения более полной
                  информации обратитесь к странице справочника &man.mount.ntfs.8;.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>FAT</term>

              <listitem>
                <para>Во FreeBSD имеется драйвер для работы с FAT в режиме
                  чтения-записи.  Для получения дополнительной информации
                  обратитесь к странице справочника &man.mount.msdosfs.8;.</para>
              </listitem>
            </varlistentry>

	    <varlistentry>
	      <term>ReiserFS</term>

	      <listitem>
		<para>Во FreeBSD имеется драйвер для работы с ReiserFS в режиме
		  только для чтения.  Для получения более полной
		  информации обратитесь к странице справочника &man.mount.reiserfs.8;.</para>
	      </listitem>
	    </varlistentry>
          </variablelist>

          <para>FreeBSD также поддерживает такие сетевые файловые системы, как
            NFS (смотрите &man.mount.nfs.8;), NetWare (смотрите
            &man.mount.nwfs.8;) и файловые системы SMB в стиле Microsoft
            (обратитесь к &man.mount.smbfs.8;).
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="mount-dos">
          <para>Как смонтировать вторичный раздел DOS?</para>
        </question>

        <answer>
          <para>Вторичные разделы DOS находятся после ВСЕХ первичных разделов.
            Например, если раздел <quote>E</quote> является вторым разделом
            DOS на втором диске SCSI, вам нужно создать специальные файлы для
            пятого <quote>слайса</quote> в каталоге <filename>/dev</filename>,
            а затем смонтировать <devicename>/dev/da1s5</devicename>:</para>

          <screen>&prompt.root; <userinput>cd /dev</userinput>
&prompt.root; <userinput>sh MAKEDEV da1s5</userinput>
&prompt.root; <userinput>mount -t msdos /dev/da1s5 /dos/e</userinput></screen>

          <note>
            <para>Вы можете пропустить этот шаг, если используете FreeBSD
              5.0-RELEASE или более новую версию с включенным механизмом
              &man.devfs.5;.</para>
          </note>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="crypto-filesystem">
          <para>Существует ли криптографическая файловая система для
            &os;?</para>
        </question>

        <answer>
          <para>Да.  FreeBSD версии 5.0 включает в себя &man.gbde.8;,
            а во FreeBSD 6.0 добавлена &man.geli.8;.  При работе с предыдущими
            релизами обратите внимание на порт <filename
            role="package">security/cfs</filename>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="nt-bootloader">
          <para>Как можно использовать загрузчик &windowsnt; для запуска
            FreeBSD?</para>
        </question>

        <answer>
          <para>Идея заключается в копировании первого сектора корневого
            раздела FreeBSD в файл, находящийся в разделе DOS/&windowsnt;.
            Предположим, что вы назвали этот файл
            <filename>c:\bootsect.bsd</filename> (по аналогии с
            <filename>c:\bootsect.dos</filename>), после чего можете
            отредактировать файл <filename>c:\boot.ini</filename>, чтобы он
            выглядел примерно так:</para>

          <programlisting>[boot loader]
timeout=30
default=multi(0)disk(0)rdisk(0)partition(1)\WINDOWS
[operating systems]
multi(0)disk(0)rdisk(0)partition(1)\WINDOWS="Windows NT"
C:\BOOTSECT.BSD="FreeBSD"
C:\="DOS"</programlisting>

          <para>Если FreeBSD установлена на тот же самый диск, что и
            загрузочный раздел &windowsnt;, просто скопируйте
            <filename>/boot/boot1</filename> в
            <filename>C:\BOOTSECT.BSD</filename>.  Однако, если FreeBSD
            установлена на другой диск, то <filename>/boot/boot1</filename>
            работать не будет, нужно копировать
            <filename>/boot/boot0</filename>.</para>

          <para><filename>/boot/boot0</filename> нужно устанавливать с помощью
            sysinstall, выбрав менеджер загрузки FreeBSD в диалоговом окне при
            выборе менеджера загрузки.  Это потому что
            в <filename>/boot/boot0</filename> область таблицы разделов
            заполнена символами NULL, а sysinstall копирует сюда таблицу
            разделов перед тем, как скопировать
            <filename>/boot/boot0</filename> в область MBR.</para>

          <warning>
            <para>Не копируйте просто <filename>/boot/boot0</filename> вместо
              <filename>/boot/boot1</filename>, этим вы перезапишете таблицу
              разделов винчестера и ваш компьютер перестанет
              загружаться!</para>
          </warning>

          <para>При запуске менеджер загрузки FreeBSD задаёт ОС, которая
            загружалась последний раз, устанавливая для этой операционной
            системы признак активизации в таблице разделов, а затем записывает
            512 байт самого себя обратно в MBR, так что если вы просто
            скопируете <filename>/boot/boot0</filename>
            в <filename>C:\BOOTSECT.BSD</filename>, то в MBR будет записана
            пустая таблица разделов с флагом активности в некотором
            месте.</para>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="lilo-bootloader">
    <para>Как загрузить FreeBSD и &linux; с помощью LILO?</para>
  </question>

  <answer>

  <para>Если у вас установлены FreeBSD и &linux; на одном и том же диске,
    следуйте указаниям по установке LILO о загрузке не-&linux; операционных
    систем.  Они сводятся к следующему:</para>

  <para>Загрузите &linux; и добавьте следующие строки в файл
    <filename>/etc/lilo.conf</filename>:</para>

  <programlisting>
other=/dev/hda2
table=/dev/hda
label=FreeBSD
  </programlisting>

  <para>(здесь мы предполагаем, что слайс с FreeBSD известен &linux; как
    <devicename>/dev/hda2</devicename>; измените эту строку в соответствии
    с вашей конфигурацией).  Затем достаточно будет запустить
    <command>lilo</command>, войдя в систему как администратор.</para>

  <para>Если FreeBSD располагается на другом диске, вам нужно добавить строчку
    <literal>loader=/boot/chain.b</literal> в конфигурационный файл
    LILO.  Например:</para>

  <programlisting>
other=/dev/dab4
table=/dev/dab
loader=/boot/chain.b
label=FreeBSD
  </programlisting>

  <para>В некоторых случаях для успешной загрузки со второго диска вам
    может потребоваться указать номер диска BIOS загрузчику FreeBSD.
    Например, если диск SCSI с FreeBSD определяется BIOS как диск 1,
    в приглашении загрузчика FreeBSD нужно указать:</para>

  <screen>
Boot: <userinput>1:da(0,a)/kernel</userinput>
  </screen>

  <para>Вы можете настроить &man.boot.8;
    на автоматическое принятие таких параметров во время загрузки.</para>

  <para>В документе <ulink
    url="http://sunsite.unc.edu/LDP/HOWTO/mini/Linux+FreeBSD.html">
    &linux;+FreeBSD mini-HOWTO</ulink> содержится много информации,
    касающейся взаимодействия FreeBSD и &linux;.</para>

  </answer>
</qandaentry>

      <qandaentry>
	<question id="grub-loader">
	  <para>Как загрузить &os; и &linux; с помощью GRUB?</para>
	</question>

	<answer>
	  <para>Настройка загрузки &os;, используя GRUB очень простой
	    процесс.  Всего лишь добавьте следующие строки в ваш
	    конфигурационный файл
	    <filename>/boot/grub/grub.conf</filename>.</para>

	  <programlisting>title FreeBSD 6.1
	root (hd0,a)
	kernel /boot/loader
	  </programlisting>

	  <para>Где <literal>hd0,a</literal> указывает на ваш корневой раздел
	    на первом диске.  Если вам нужно указать номер слайса, который должен
	    использоваться, напишите что-то вроде <literal>(hd0,2,a)</literal>.
	    По умолчанию, если номер слайса не указан, GRUB ищет первый слайс,
	    содержащий в себе партицию <literal>'a'</literal>.</para>
	</answer>
      </qandaentry>

      <qandaentry>
        <question id="booteasy-loader">
          <para>Как загрузить FreeBSD и &linux; с помощью BootEasy?</para>
        </question>

        <answer>
          <para>Установите LILO в начало загрузочного раздела &linux;, а не в
            Master Boot Record.  После этого можно запустить LILO из
            BootEasy.</para>

          <para>Это рекомендуется сделать в любом случае при одновременном
            использовании &windows; 95 и &linux;, чтобы упростить
            восстановление работоспособности &linux; после переустановки
            &windows; 95 (которая является Ревнивой Операционной Системой и
            не терпит
            присутствия других операционных систем в Master Boot Record).</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="changing-bootprompt">
          <para>Как сменить приглашение загрузчика с <literal>???</literal> на
            что-нибудь более значащее?</para>
        </question>

        <answer>
          <para>Вы не можете сделать это со стандартным менеджером загрузки, не
            переписав его.  Среди портов из категории
            <filename>sysutils</filename> есть несколько других менеджеров
            загрузки, которые предоставляют такую функциональность.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="removable-drives">
          <para>Как использовать устройство для чтения сменных дисков?</para>
        </question>

        <answer>
          <para>Каким бы ни было это устройство, типа &iomegazip;, EZ (или даже обычным
            дисководом, если вы хотите его использовать) или каким-то
            другим, как только оно будет установлено и распознано
            системой, и вы вставите в него картридж/дискету/что-там-ещё, всё
            будет выглядеть примерно одинаково.</para>

          <para>(этот раздел основан на материалах <ulink
            url="http://www.vmunix.com/mark/FreeBSD/ZIP-FAQ.html">
            FAQ по устройствам ZIP</ulink> Марка Мэйо (Mark Mayo))</para>

          <para>Если это устройство ZIP или обычный дисковод, и у вас уже есть
            файловая система DOS на дискетах, то вы можете использовать команду
            типа:</para>

          <screen>&prompt.root; <userinput>mount -t msdos /dev/fd0c /floppy</userinput></screen>

          <para>для обычных дискет, или</para>

          <screen>&prompt.root; <userinput>mount -t msdos /dev/da2s4 /zip</userinput></screen>

          <para>для дискет ZIP со стандартной конфигурацией.</para>

          <para>Для других дисков посмотрите их параметры с помощью команды
            &man.fdisk.8; или &man.sysinstall.8;.</para>

          <para>Остальные примеры даны для привода ZIP на da2, третьем диске
            SCSI.</para>

          <para>Если это дискета или сменный диск, который будет
            использоваться для обмена информацией с другими людьми, хорошей
            идеей будет помещение туда файловой системы BSD.  Вы получите
            поддержку длинных имён файлов, увеличение производительности по
            крайней мере в два раза и гораздо большую надёжность.  Первым
            делом вам снова будет нужно выполнить разбиение диска на
            разделы/файловые системы.  Вы можете воспользоваться утилитой
            &man.fdisk.8; либо &man.sysinstall.8;, а в случае небольшого
            диска, на котором не нужно располагать несколько операционных
            систем, просто сотрите таблицу разделов (слайсов) FAT и используйте
            разбиение на разделы BSD.</para>

          <screen>&prompt.root; <userinput>dd if=/dev/zero of=/dev/rda2 count=2</userinput>
&prompt.root; <userinput>disklabel -Brw da2 auto</userinput></screen>

          <para>Вы можете использовать &man.disklabel.8; или &man.sysinstall.8;
            для создания нескольких разделов BSD.
            Вам наверняка придётся это сделать, если вы станете добавлять место
            для раздела подкачки на винчестере, хотя это не имеет отношения к
            устройствам типа ZIP.</para>

          <para>В итоге вы должны создать новую файловую систему (в этом примере
            она занимает весь наш диск ZIP):</para>

          <screen>&prompt.root; <userinput>newfs /dev/rda2c</userinput></screen>

          <para>и смонтировать её:</para>

          <screen>&prompt.root; <userinput>mount /dev/da2c /zip</userinput></screen>

          <para>Хорошо ещё добавить строку типа следующей в файл
            <filename>/etc/fstab</filename> (прочтите справку по &man.fstab.5;),
            чтобы в будущем можно было просто давать команду
            <command>mount /zip</command>:</para>

          <programlisting>/dev/da2c /zip ffs rw,noauto 0 0</programlisting>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="mount-cd-superblock">
          <para>При монтировании компакт-диска, выдаётся сообщение
            <errorname>Incorrect super block</errorname>.</para>
        </question>

        <answer>
          <para>В параметрах команды &man.mount.8; вам нужно указать тип
            устройства, который вы собираетесь смонтировать.  Это описано в
            <ulink url="&url.books.handbook;/creating-cds.html">разделе
            Руководства об оптических носителях</ulink>, а именно в разделе
            <ulink url="&url.books.handbook;/creating-cds.html#MOUNTING-CD">
            Использование CD с данными</ulink>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="cdrom-not-configured">
          <para>При монтировании компакт-диска выдаётся сообщение
            <literal>Device not configured</literal>.</para>
        </question>

        <answer>
          <para>Обычно это означает, что в приводе CDROM нет компакт-диска либо
            устройство на шине не было увидено.  Пожалуйста, посмотрите раздел
            об <ulink url="&url.books.handbook;/creating-cds.html#MOUNTING-CD">
            использовании CD с данными</ulink> в Руководстве, где подробно
            обсуждается этот вопрос.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="cdrom-unicode-filenames">
          <para>Когда я монтирую CDROM, все неанглийские символы в именах
            файлов выводятся как <quote>?</quote>.</para>
        </question>

        <answer>
          <para>Скорее всего, на вашем компакт-диске для хранения информации о
            файлах и каталогах используется расширение <quote>Joliet</quote>.
            Это описано в главе Руководства о <ulink
            url="&url.books.handbook;/creating-cds.html">создании и
            использовании CDROM</ulink>, а именно в разделе об <ulink
            url="&url.books.handbook;/creating-cds.html#MOUNTING-CD">
            использовании CDROM с данными</ulink>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="burncd-isofs">
          <para>Я записал CD во FreeBSD и теперь не могу считать его ни в какой
            другой операционной системой.  Почему?</para>
        </question>

        <answer>
          <para>Скорее всего, вы записали на CD непосредственно необработанный
            файл без первоначального создания файловой системы ISO 9660.
            Прочтите <ulink url="&url.books.handbook;/creating-cds.html">главу
            Руководства о создании CDROM</ulink>, в частности, раздел о
            <ulink url="&url.books.handbook;/creating-cds.html#RAWDATA-CD">
            записи данных непосредственно на компакт-диски</ulink>.</para>
	</answer>
      </qandaentry>


      <qandaentry>
        <question id="copy-cd">
          <para>Как создать образ CD с данными?</para>
        </question>

        <answer>
          <para>Это описано в разделе Руководства о <ulink
            url="&url.books.handbook;/creating-cds.html#IMAGING-CD">копировании
            CD с данными</ulink>.  Более полную информацию о работе с
            компакт-дисками можно найти в разделе о <ulink
            url="&url.books.handbook;/creating-cds.html">создании
            компакт-дисков</ulink>
            главы об устройствах хранения данных Руководства.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="mount-audio-CD">
          <para>Почему я не могу смонтировать (командой
            <command>mount</command> аудио CD?</para>
         </question>

        <answer>
          <para>Если вы попытаетесь смонтировать аудио CD, вы получите примерно
            такое сообщение об ошибке: <errorname>cd9660: /dev/acd0c: Invalid
            argument</errorname>.  Причина этого заключается в том, что команда
            <command>mount</command> работает только с файловыми системами.  На
            аудио CD файловых систем нет; они содержат только данные.  Вам
            нужна программа, читающая аудио CD, например, порт
            <filename role="package">audio/xmcd</filename> port.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="multi-session-CD">
          <para>Как выполнить <command>mount</command> для многосеансового
            CD?</para>
        </question>

        <answer>
          <para>По умолчанию &man.mount.8; будет пытаться смонтировать
            последнюю дорожку (сеанс) CD с данными.  Если вы хотите
            загрузить более ранний сеанс, то должны воспользоваться опцией
            командной строки <option>-s</option>.  Пожалуйста, обратитесь к
            справке по команде &man.mount.cd9660.8; для получения конкретных
            примеров.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="user-floppymount">
          <para>Как разрешить обычным пользователям монтировать дискеты,
            компакт-диски и другие сменные носители?</para>
        </question>

        <answer>
          <para>Обычным пользователям можно позволить монтировать устройства.
            Вот как это делается:</para>

          <procedure>
            <step>
              <para>Как пользователь <username>root</username>, установите
                системную переменную <varname>vfs.usermount</varname> в
                значение <literal>1</literal>.</para>

              <screen>&prompt.root; <userinput>sysctl -w vfs.usermount=1</userinput></screen>
            </step>

            <step>
              <para>Работая пользователем <username>root</username>, назначьте
	        соответствующие права на устройства с поблочным доступом,
	        которые соответствуют сменным носителям.</para>

              <para>Например, чтобы позволить пользователям монтировать дискеты
	        в первом дисководе, воспользуйтесь командой</para>
		
              <screen>&prompt.root; <userinput>chmod 666 /dev/fd0</userinput></screen>

              <para>Чтобы разрешить пользователям из группы
                <groupname>operator</groupname> монтировать CDROM,
                сделайте так:</para>

              <screen>&prompt.root; <userinput>chgrp operator /dev/acd0c</userinput>
&prompt.root; <userinput>chmod 640 /dev/acd0c</userinput></screen>
            </step>

            <step>
              <para>Если вы используете &os; версии 5.X или выше, то вам нужно
                внести изменения в файл <filename>/etc/devfs.conf</filename>,
                чтобы они сохранялись между перезагрузками.</para>

              <para>Как пользователь <username>root</username>, добавьте нужные
                строки в файл <filename>/etc/devfs.conf</filename>.  К примеру,
                чтобы разрешить пользователям монтировать диски на первом
                приводе для гибких дисков, добавьте такую строчку:</para>

              <programlisting># Разрешить пользователям монтировать дискеты.
own	/dev/fd0	root:operator
perm	/dev/fd0	0666</programlisting>

              <para>Чтобы разрешить пользователям группы
                <groupname>operator</groupname> монтировать диск в приводе
                CD-ROM, добавьте такую строку:</para>

              <programlisting># Разрешить членам группы operator монтировать CD-ROM.
own	/dev/acd0	root:operator
perm	/dev/acd0	0660</programlisting>
            </step>

            <step>
              <para>Наконец, добавьте строчку
                <literal><varname>vfs.usermount</varname>=1</literal> в файл
                <filename>/etc/sysctl.conf</filename>, чтобы она срабатывала
                во время загрузки системы.</para>
            </step>
          </procedure>

          <para>Теперь все пользователи могут монтировать дискету
            <devicename>/dev/fd0</devicename> в собственные каталоги:</para>

          <screen>&prompt.user; <userinput> mkdir ~/my-mount-point</userinput>
&prompt.user; <userinput> mount -t msdos /dev/fd0 ~/my-mount-point</userinput></screen>
          <para>Пользователи из группы <groupname>operator</groupname> теперь
            могут монтировать CDROM <devicename>/dev/acd0c</devicename>
            в собственные каталоги:</para>

          <screen>&prompt.user; <userinput> mkdir ~/my-mount-point</userinput>
&prompt.user; <userinput> mount -t cd9660 /dev/acd0c ~/my-mount-point</userinput></screen>

          <para>Размонтирование устройства осуществляется просто:</para>

          <screen>&prompt.user; <userinput>umount ~/my-mount-point</userinput></screen>

          <para>Использование <varname>vfs.usermount</varname>, однако, имеет
            некоторые негативные стороны, связанные с вопросами безопасности.
            Более правильным способом работы с носителями в формате &ms-dos;
            является использование пакета <filename
            role="package">emulators/mtools</filename>
            из Коллекции портов.</para>

          <note>
            <para>Имя, использованное для обозначения устройства в предыдущих
              примерах, должно быть изменено в соответствии с конфигурацией
              вашей системы.</para>
          </note>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="du-vs-df">
          <para>Команды <command>du</command> и <command>df</command>
            показывают разный объем доступного дискового пространства.  Что
            происходит?</para>
        </question>

        <answer>
          <para>Вам нужно разобраться, что на самом деле делают команды
            <command>du</command> и <command>df</command>.
            <command>du</command> проходит по дереву каталогов, замеряя,
            насколько большой объем занимает каждый файл, и выдает общий объем.
            <command>df</command> просто запрашивает файловую систему об
            оставшемся объеме.  Это выглядит как одно и то же, однако файл без
            записи в каталоге затронет <command>df</command>, но не повлияет на
            <command>du</command>.</para>

          <para>Когда программа использует файл, а вы его удалили, файл на
            самом деле не удаляется из файловой системы, пока программа не
            прекратит его использовать.  Однако файл тут же удаляется из списка
            каталога.  Вы можете легко это видеть при помощи такой программы,
            как <command>more</command>.  Предположим, что у вас имеется файл,
            настолько большой, что его присутствие влияет на вывод команд
            <command>du</command> и <command>df</command>.  (Так как в
            настоящее время диски могут быть настолько большими, это может быть
            <emphasis>очень</emphasis> большой файл!)  Если вы удалите этот
            файл в процессе работы <command>more</command> над ним, на команду
            <command>more</command> это не повлияет и она не сообщит, что не
            может просматривать файл.  Запись о файле просто удалена из
            каталога, так что другие программы или пользователи не смогут к
            нему обратиться.  <command>du</command> покажет, что файл исчез
            &mdash; она просматривает дерево каталогов, а файла там не будет.
            <command>df</command> показывает, что он все еще здесь, так как
            файловая система знает, что <command>more</command> все еще
            использует это пространство.  Как только вы закончите работу с
            <command>more</command>, команды <command>du</command> и
            <command>df</command> придут в соответствие.</para>

          <para>Заметьте, что подсистема отложенных обновлений (Soft Updates)
            может задерживать освобождение дискового пространства; вам может
            потребоваться подождать до 30 секунд, прежде, чем изменения будут
            заметны!</para>

          <para>Такая ситуация часта на Web-серверах.  Многие устанавливают
            Web-сервер на FreeBSD и забывают обновлять файлы протоколов.
            Журнал доступа заполняет <filename>/var</filename>.  Новый
            администратор удаляет файл, но система все еще сообщает о том, что
            раздел заполнен.  Остановка и перезапуск программы Web-сервера
            освободит файл, позволяя системе освободить дисковое пространство.
            Для предотвращения этого настройте &man.newsyslog.8;.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="add-swap-space">
          <para>Как добавить дополнительную виртуальную память?</para>
        </question>

        <answer>
          <para>В главе Руководства о <ulink
            url="&url.books.handbook;/config-tuning.html">конфигурации и тонкой
            настройке</ulink> вы найдёте <ulink
            url="&url.books.handbook;/adding-swap-space.html">раздел</ulink>, в
            котором описывается, как это сделать.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="manufacturer-disk-size">
          <para>Почему &os; считает, что размер моего диска меньше, чем
            заявляет его производитель?</para>
        </question>

        <answer>
          <para>Производители дисков считают гигабайт равным миллиарду байтов,
            а &os; приравнивает его к 1073741824 байтов.  Это объясняет,
            почему, к примеру, в сообщениях при загрузке &os; указывается, что
            ёмкость диска, объём которого должен быть равным 80 Гбайт,
            составляет 76319&nbsp;Мбайт.</para>

          <para>Заметьте также, что &os; будет (по умолчанию) <link
             linkend="disk-more-than-full">резервировать</link> 8% ёмкости
             диска.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="disk-more-than-full">
          <para>Почему возможно заполнение раздела больше чем на 100%?</para>
        </question>

        <answer>
	  <para>Часть каждого раздела UFS (по умолчанию 8%) зарезервировано для
            использования операционной системой и пользователем
	    <username>root</username>.  Утилита &man.df.1; не учитывает это
            при подсчёте значения в колонке <literal>Capacity</literal>, так
            что оно может превышать 100%.  Также вы заметите, что колонка
	    <literal>Blocks</literal> всегда больше, чем сумма значений в
            колонках <literal>Used</literal> и <literal>Avail</literal>,
            обычно на 8%.</para>

	  <para>Для получения более подробной информации обратитесь к описанию
            опции <option>-m</option> в справке по &man.tunefs.8;.</para>
        </answer>
      </qandaentry>
    </qandaset>
  </chapter>


  <chapter id="admin">
    <title>Системное администрирование</title>

    <qandaset>
      <qandaentry>
        <question id="startup-config-files">
          <para>Где расположены файлы конфигурации системы?</para>
        </question>

        <answer>
          <para>Основным настроечным файлом является
            <filename>/etc/defaults/rc.conf</filename> (обратитесь к
            &man.rc.conf.5;)  Скрипты начального запуска системы, такие, как
            <filename>/etc/rc</filename> и <filename>/etc/rc.d</filename>
            (обратитесь к &man.rc.8;) просто включают этот файл.  <emphasis>Не
            редактируйте этот файл!</emphasis>  Вместо этого, если в файле
            <filename>/etc/defaults/rc.conf</filename> имеется параметр,
            который вы хотите изменить, то вы должны скопировать строчку с ним
            в файл <filename>/etc/rc.conf</filename> и поменять его значение
            именно здесь.</para>

          <para>Например, если вы хотите запустить named, поставляемый сервер
            DNS, то всё, что вам нужно сделать, это:</para>

          <screen>&prompt.root; <userinput>echo named_enable="YES" &gt;&gt; /etc/rc.conf</userinput></screen>

          <para>Чтобы запустить местные сервисы, поместите скрипты в каталог
            <filename>/usr/local/etc/rc.d</filename>.  У этих скриптов
            должен быть выставлен бит выполнимости, и их имена должны
            оканчиваться на .sh.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="adding-users">
          <para>Как проще всего добавить пользователя?</para>
        </question>

        <answer>
          <para>Используйте команду &man.adduser.8; или &man.pw.8; в случае
            выполнения более сложных операций.</para>

          <para>Чтобы удалить пользователя, используйте команду
            &man.rmuser.8; или, если это будет необходимо, &man.pw.8;.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="root-not-found-cron-errors">
          <para>Почему после редактирования моего файла crontab я получаю
            сообщения вида <errorname>root: not found</errorname>?</para>
        </question>

        <answer>
          <para>Обычно это случается при редактировании системного crontab-файла
            (<filename>/etc/crontab</filename>) и последующего использования
            утилиты &man.crontab.1; для его установки:</para>

          <screen>&prompt.root; <userinput>crontab /etc/crontab</userinput></screen>

          <para>Это неправильно.  Системный crontab-файл имеет формат, отличный
            от пользовательских crontab-файлов, которые обновляет утилита
            &man.crontab.1; (страница Справочника по &man.crontab.5; описывает
            отличия более подробно).</para>

          <para>Если это именно то, что вы сделали, то дополнительный
            crontab-файл является просто копией файла
            <filename>/etc/crontab</filename> в неправильном формате.  Удалите
            его такой командой:</para>

          <screen>&prompt.root; <userinput>crontab -r</userinput></screen>

          <para>В следующий раз при редактировании файла
            <filename>/etc/crontab</filename>, вам не нужно делать ничего для
            оповещения утилиты &man.cron.8; о сделанных изменениях, так как она
            распознает их автоматически.</para>

          <para>Если вы хотите запускать что-то один раз в день, неделю или
            месяц, то, наверное, лучше обновить скрипты
            <filename>/usr/local/etc/periodic</filename> и позволить команде
            &man.periodic.8;, запускаемой системной cron-утилитой, планировать
            их выполнение вместе с другими периодическими системными
            задачами.</para>

          <para>Реальная причина ошибки заключается в том, что системный
            crontab-файл имеет дополнительное поле, указывающее, какой
            пользователь запускает команду.  В системном crontab-файле,
            поставляемом с FreeBSD и используемом по умолчанию, это
            пользователь <username>root</username> для всех строк.  Если этот
            crontab-файл используется в качестве crontab-файла пользователя
            <username>root</username> (что <emphasis>не то же самое</emphasis>,
            что системный crontab-файл), &man.cron.8; полагает, что слово
            <literal>root</literal> является первым в команде на выполнение,
            но такой команды не существует.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="su-wheel-group">
          <para>Команда <command>su</command> выдает, что <errorname>you are
            not in the correct group to su root</errorname>, когда я пытаюсь
            сменить привилегии на <username>root</username>.</para>
        </question>

        <answer>
          <para>Это особенность работы системы защиты.  Для того, чтобы
            изменить свои привилегии на пользователя <username>root</username>
            (или любого другого пользователя, имеющего привилегии
            администратора), вы должны быть членом группы
            <groupname>wheel</groupname>.  Если бы этого не было, любой,
            имеющий доступ к системе и узнавший пароль пользователя
            <username>root</username>, смог получить в системе
            администраторские полномочия.  С такой же защитой этого не
            получится; &man.su.1; будет препятствовать попыткам даже ввести
            пароль, если некто не являетесь членом группы
            <groupname>wheel</groupname>.</para>

          <para>Чтобы разрешить кому-либо менять привилегии на
            <username>root</username>, просто включите его в группу
            <groupname>wheel</groupname>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="rcconf-readonly">
          <para>Я сделал ошибку в файле <filename>rc.conf</filename> или в
            каком-то другом файле начальной загрузки, и теперь не могу его
            отредактировать из-за того, что файловая система находится в
            режиме только для чтения.  Что мне делать?</para>
        </question>

        <answer>
          <para>При получении приглашения на ввод полного пути до командного
            процессора, просто нажмите <literal>ENTER</literal>, а затем
            выполните команду <command>mount /</command> для повторного
            монтирования корневой файловой системы в режиме чтения/записи.  Вам
            может также потребоваться выполнить команду <command>mount -a -t
            ufs</command> для монтирования файловой системы, в которой
            расположен ваш любимый редактор.  Если редактор расположен на
            сетевой файловой системе, то вам потребуется выполнить сетевые
            настройки вручную до монтирования сетевой файловой системы, либо
            воспользоваться редактором, находящимся в локальной файловой
            системе, таким, как &man.ed.1;.</para>

          <para>Если вы собираетесь использовать полноэкранный редактор,
            такой, как &man.vi.1; или &man.emacs.1;, то вам нужно будет
            выполнить команду <command>export TERM=cons25</command>, чтобы
            такие редакторы смогли корректно взять данные из базы данных
            &man.termcap.5;.</para>

          <para>После выполнения этих шагов вы сможете отредактировать файл
            <filename>/etc/rc.conf</filename> так, как вы это обычно делаете
            для исправления ошибки.  Сообщение об ошибке, выводимое сразу же
            после сообщений при загрузке ядра, должно указать вам на номер
            строки в файле, которая содержит ошибку.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="printer-setup">
          <para>У меня проблемы с установкой принтера.</para>
        </question>

        <answer>
          <para>Обратитесь к соответствующему <ulink
            url="&url.books.handbook;/printing.html">разделу</ulink>
            Руководства, посвящённому печати.  В нём описаны решения
            большинства ваших проблем.</para>

          <para>Некоторые принтеры для выполнения любых операций по печати
            требуют наличия на хосте драйвера.  Такие так называемые
            <quote>WinPrinters</quote> изначально во FreeBSD не
            поддерживаются.  Если ваш принтер не работает в DOS или &windowsnt;
            4.0, то, скорее всего, это WinPrinter.  Единственное, что вам
            остаётся сделать в надежде на то, что вы заставите его работать,
            это проверить, поддерживает ли его порт
            <filename role="package">print/pnm2ppa</filename>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="keyboard-mappings">
          <para>Раскладка клавиатуры неверна.</para>
        </question>

        <answer>
          <para>Пожалуйста, обратитесь к разделу Руководства, посвящённому
            <ulink url="&url.books.handbook;/using-localization.html">
            использованию локализации</ulink>, а именно к части, описывающей
            <ulink
            url="&url.books.handbook;/using-localization.html#SETTING-CONSOLE">
            настройку консоли</ulink>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="pnp-resources">
          <para>У меня при загрузке появляются сообщения вида
            <errorname>unknown: &lt;PNP0303&gt; can't assign
            resources</errorname></para>
        </question>

        <answer>
          <para>Ниже следует часть письма, опубликованного в списке рассылки
            freebsd-current.</para>

          <blockquote>
            <attribution>&a.wollman;, 24 апреля 2001</attribution>

            <para>Сообщение <quote>can't assign resources</quote> говорит о
              том, что устройство является устаревшим ISA-устройством, для
              которого в ядре присутствует драйвер, не поддерживающий PnP.  К
              таким устройствам относятся контроллеры клавиатуры, микросхема
              контроллера программируемых прерываний, а также другие части
              стандартного набора.  Ресурсы не могут выделены, потому что уже
              есть драйвер, использующий эти адреса.</para>
          </blockquote>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="user-quotas">
          <para>Почему не получается заставить работать дисковые квоты?</para>
        </question>

        <answer>
          <!-- XXX Наверное, это самый худший ответ во всём документе. -->
          <orderedlist>
	    <listitem>
	      <para>Возможно, что ваше ядро не сконфигурировано должным образом
		для работы с квотами.  Если это действительно так, то вам надо
		добавить следующую строчку в ваш конфигурационный файл ядра и
		пересобрать его:</para>
		<programlisting>options QUOTA</programlisting>

		<para>Пожалуйста, прочтите <ulink url="&url.books.handbook;/quotas.html">главу
		  руководства по квотам</ulink> для полной информации.</para>
	    </listitem>

            <listitem>
              <para>Не включайте квотирование на <filename>/</filename>.</para>
            </listitem>

            <listitem>
              <para>Помещайте файл с квотами в ту файловую систему, которую
                он обслуживает, то есть:</para>

              <informaltable frame="none" pgwide="1">
                <tgroup cols="2">
                  <thead>
                    <row>
                      <entry>Файловая система</entry>

                      <entry>Файл квот</entry>
                    </row>
                  </thead>

                  <tbody>
                    <row>
                      <entry><filename>/usr</filename></entry>

                      <entry><filename>/usr/admin/quotas</filename></entry>
                    </row>

                    <row>
                      <entry><filename>/home</filename></entry>

                      <entry><filename>/home/admin/quotas</filename></entry>
                    </row>

                    <row>
                      <entry>&hellip;</entry>

                      <entry>&hellip;</entry>
                    </row>
                  </tbody>
                </tgroup>
              </informaltable>
            </listitem>
          </orderedlist>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="sysv-ipc">
          <para>Поддерживает ли FreeBSD вызовы IPC из System V?</para>
        </question>

        <answer>
          <para>Да, во FreeBSD в ядро GENERIC включена поддержка IPC в стиле
            System V, в том числе совместно используемой памяти, сообщений и
            семафоров.  Для включения их поддержки в конфигурационный файл
            вашего ядра нужно добавить следующие строки.</para>

          <programlisting>options    SYSVSHM          # enable shared memory
options    SYSVSEM          # enable for semaphores
options    SYSVMSG          # enable for messaging</programlisting>

          <para>Перекомпилируйте и переустановите ядро.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="sendmail-alternative">
          <para>Какое другое программное обеспечение для почтового сервера
            можно использовать вместо Sendmail?</para>
        </question>

        <answer>
          <para><ulink url="http://www.sendmail.org/">Sendmail</ulink> является
            программным обеспечением для работы почтового сервера во FreeBSD,
            используемым по умолчанию, но вы можете с легкостью заменить его
            другим MTA (к примеру, установленным из портов).</para>

          <para>В дереве портов уже имеются различные альтернативные MTA, из
            которых <filename role="package">mail/exim</filename>,
            <filename role="package">mail/postfix</filename>,
            <filename role="package">mail/qmail</filename> и
            <filename role="package">mail/zmailer</filename> являются одними
            из самых популярных.</para>

	  <para>Разнообразие хорошо, а тот факт, что у вас есть выбор из многих
            различных почтовых серверов, является хорошим признаком; поэтому
            попытайтесь не задавать вопросы типа
            <quote>Sendmail лучше, чем Qmail?</quote> в списках рассылки.  Если
            вы захотите получить ответ, сначала просмотрите архивы списков
            рассылки.  Достоинства и недостатки каждого из имеющихся MTA уже
            обсуждались неоднократно.</para>
	</answer>
      </qandaentry>


      <qandaentry>
        <question id="forgot-root-pw">
          <para>Я забыл пароль пользователя <username>root</username>!  Что
            делать?</para>
        </question>

        <answer>
          <para>Без паники!  Перезапустите систему, наберите
            <userinput>boot -s</userinput> в приглашении Boot:
            для входа в однопользовательский режим.  На вопрос об
            используемой оболочке нажмите ENTER.  На приглашение
            &prompt.root; введите <command>mount -u /</command>, чтобы
            перемонтировать корневую файловую систему в режиме чтения/записи,
            после чего выполните команду <command>mount -a</command> для
            монтирования всех файловых систем.  Запустите команду
            <command>passwd root</command>, чтобы сменить
            пароль пользователя <username>root</username>, а затем
            &man.exit.1; для продолжения процесса загрузки.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="CAD-reboot">
          <para>Как запретить перезагрузку по нажатию <keycombo
            action="simul"><keycap>Control</keycap><keycap>Alt</keycap>
            <keycap>Delete</keycap></keycombo>?</para>
        </question>

        <answer>
          <para>Если вы используете драйвер консоли syscons (который является
            стандартным), перегенерируйте и установите новое ядро с
            параметром</para>

          <programlisting>options SC_DISABLE_REBOOT</programlisting>

          <para>в конфигурационном файле.  Если же вы используете драйвер
            консоли PCVT, то вместо вышеуказанной включите в конфигурационный
            файл следующую строку.</para>

          <programlisting>options PCVT_CTRL_ALT_DEL</programlisting>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="dos-to-unix-txt">
          <para>Как преобразовать текстовые файлы DOS в формат &unix;?</para>
        </question>

        <answer>
          <para>Воспользуйтесь следующей командой с использованием perl:</para>

          <screen>&prompt.user; <userinput>perl -i.bak -npe 's/\r\n/\n/g' file ...</userinput></screen>

          <para>где file - это имя файла(ов) для преобразования.
            Преобразование делается в том же самом файле, оригинальные файлы
            сохраняются с расширением .bak.</para>

          <para>Это преобразование также можно выполнить с помощью команды
            &man.tr.1;:</para>

          <screen>&prompt.user; <userinput>tr -d '\r' &lt; <replaceable>dos-text-file</replaceable> &gt; <replaceable>unix-file</replaceable></userinput></screen>

          <para>где <replaceable>dos-text-file</replaceable> - это имя файла,
            содержащего текст DOS, а в файл
            <replaceable>unix-file</replaceable> будет помещён уже
            преобразованный текст.  Этот способ может работать гораздо
            быстрее, чем при использовании perl.</para>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="kill-by-name">
    <para>Как прервать процесс по имени?</para>
  </question>

  <answer>
  <para>Используйте команду &man.killall.1;.</para>
  </answer>
</qandaentry>


<qandaentry>
  <question id="root-acl">
    <para>Почему <command>su</command> выдаёт сообщение о том, что я
    не вхожу в <username>root</username> ACL?</para>
  </question>

  <answer>

  <para>Эта ошибка выдаётся распределённой системой аутентификации Kerberos.
    Эта ошибка не фатальна, однако это раздражает.  Вы можете запустит su
    с ключом -K либо деинсталлировать Kerberos, как описано в следующем
    разделе.</para>

  </answer>
</qandaentry>


      <qandaentry>
        <question id="uninstall-kerberos">
          <para>Как деинсталлировать Kerberos?</para>
        </question>

        <answer>
          <para>Чтобы убрать Kerberos из системы, переустановите дистрибутив
            bin того релиза, который у вас запущен.  Если у вас есть CDROM, вы
            можете смонтировать компакт-диск (положим, в каталог
            <filename>/cdrom</filename>) и выполнить команду</para>

          <screen>&prompt.root; <userinput>cd /cdrom/bin</userinput>
&prompt.root; <userinput>./install.sh</userinput></screen>

          <para>Либо вы можете убрать все опции
            <makevar>MAKE_KERBEROS</makevar> из файла
            <filename>/etc/make.conf</filename> и выполнить полное перестроение
            системы.</para>
        </answer>
      </qandaentry>


      <qandaentry>
	<question id="where-is-makedev">
	  <para>Что случилось с <filename>/dev/MAKEDEV</filename>?</para>
	</question>

	<answer>
	  <para>Во FreeBSD 5.X и выше используется система &man.devfs.8;,
            работы с устройствами "по требованию".  Драйверы устройств
            автоматически создают новые файлы
            устройств, как только в них появляется необходимость, таким образом
            обходясь без <filename>/dev/MAKEDEV</filename>.</para>

	  <para>Если вы работаете с FreeBSD 4.X или более ранней версией, и
            файл <filename>/dev/MAKEDEV</filename> отсутствует, то у вас
            действительно есть проблема.  Возьмите копию из исходных кодов
            системы, как правило, из
            <filename>/usr/src/etc/MAKEDEV</filename>.</para>
	</answer>
      </qandaentry>


<qandaentry>
  <question id="add-pty">
    <para>Как добавить в систему дополнительные псевдотерминалы?</para>
  </question>

  <answer>
  <para>Если у вас много пользователей, работающий в сеансах telnet, ssh, X
    или в screen, вам можете столкнуться с проблемой нехватки
    псевдотерминалов.  Их количество можно увеличить следующим образом:</para>

  <procedure>
    <step>
      <para>Откомпилируйте и установите новое ядро, в конфигурационный
        файл которого входит такая строка:</para>

      <programlisting>
pseudo-device pty 256
      </programlisting>
    </step>

    <step>
      <para>Выполните следующие команды:</para>

      <screen>
&prompt.root; <userinput>cd /dev</userinput>
&prompt.root; <userinput>sh MAKEDEV pty{1,2,3,4,5,6,7}</userinput>
      </screen>

      <para>для создания 256 дополнительных файлов устройств для новых
        терминалов.</para>
    </step>

    <step>
      <para>Отредактируйте файл <filename>/etc/ttys</filename>, добавив по
        строке для каждого из 256 терминалов.  Они должны соответствовать
        формату существующих строк, то есть должны выглядеть вот так:</para>

      <programlisting>
ttyqc none network
      </programlisting>

      <para>Порядок назначения букв при записи в виде регулярного выражения
        имеет вид <literal>tty[pqrsPQRS][0-9a-v]</literal>.</para>
    </step>

    <step>
      <para>Теперь осталось только перезапустить систему с новым ядром.</para>
    </step>
  </procedure>
  </answer>
</qandaentry>


      <qandaentry>
        <question id="create-snd0">
          <para>Почему не получается создать устройство snd0?</para>
        </question>

        <answer>
          <para>Такого устройства, как <devicename>snd</devicename>, не
            существует.  Это название используется в качестве краткого
            обозначения различных устройств, которые составляют во FreeBSD
            звуковой драйвер, таких как <devicename>mixer</devicename>,
            <devicename>sequencer</devicename> и
            <devicename>dsp</devicename>.</para>

          <para>Для создания этих устройств вы должны сделать следующее:</para>

          <screen>&prompt.root; <userinput>cd /dev</userinput>
&prompt.root; <userinput>sh MAKEDEV snd0</userinput></screen>

          <note>
            <para>Вы можете пропустить этот шаг, если используете FreeBSD
              5.0-RELEASE или более новую версию с включенным механизмом
              &man.devfs.5;.</para>
          </note>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="reread-rc">
    <para>Как перечитать содержимое <filename>/etc/rc.conf</filename> и
      перестартовать <filename>/etc/rc</filename> без перезагрузки системы?
    </para>
  </question>

  <answer>

  <para>Перейдите в однопользовательский режим, а затем возвратитесь обратно
    в многопользовательский.</para>

  <para>На консоли выполните следующее:</para>

  <screen>
&prompt.root; <userinput>shutdown now</userinput>
(Замечание: без -r или -h)

&prompt.root; <userinput>return</userinput>
&prompt.root; <userinput>exit</userinput>
  </screen>

  </answer>
</qandaentry>


      <qandaentry>
        <question id="release-candidate">
          <para>Я пытался обновить мою систему до последней -STABLE, а
            получил -BETAx, -RC или -PRERELEASE!  Что происходит?</para>
        </question>

        <answer>
          <para>Краткий ответ: это же просто название.  RC означает
            <quote>Release Candidate</quote>.  Это значит, что вскоре
            произойдет выход релиза.  Во FreeBSD появление -PRERELEASE, как
            правило, равнозначно прекращению внесения изменений в код системы
            перед появлением релиза.  (Для некоторых релизом метка -BETA
            использовалась точно так же, как и PRERELEASE.)</para>

          <para>Подробный ответ: во FreeBSD релизы выпускаются из одного из
            двух мест.  Крупные релизы, точка-ноль, такие, как
            4.0-RELEASE и 5.0-RELEASE, ответвляются от основного потока
            разработки, более известного как <link
            linkend="current">-CURRENT</link>.	Мелкие релизы, такие, как
            4.1-RELEASE или 5.2-RELEASE, являлись снэпшотами активной ветки
            <link linkend="stable">-STABLE</link>.  Начиная с 4.3-RELEASE,
            каждый релиз также имеет свою ветвь, которой могут следовать те,
            кому необходим сверхконсервативный метод обновления (как правило,
            внесение только тех исправлений, которые касаются вопросов
            обеспечения безопасности).</para>

          <para>Когда делается релиз, то ветвь, из которой он выпускается,
            подвергается некоторой подготовке.  Частью этого процесса является
            замораживание кода.  Когда инициируется замораживание кода, то имя
            ветки изменяется для того, чтобы отразить факт близости релиза.
            Например, если ветка называлась 4.5-STABLE, то её имя будет
            изменено на 4.6-PRERELEASE, чтобы обозначить момент прекращения
            внесения изменений в код системы и период дополнительного
            тестирования перед выходом релиза.  В это время исправления ошибок
            могут быть внесены в код системы для того, чтобы быть включенными в
            релиз.  Когда исходный код подготовлен к выпуску релиза, имя будет
            изменено на 4.6-RC для обозначения того, что релиз будет сделан,
            скорее всего, именно из этого кода.  Когда код находится на этапе
            RC, в нём могут исправляться только самые критичные ошибки.  Как
            только релиз (в нашем примере 4.6-RELEASE) и ветка релиза будут
            созданы, ветвь будет переименована в 4.6-STABLE.</para>

          <para>Для получения дополнительной информации о номерах версий и
            различных ветках CVS обратитесь к статье о <ulink
            url="&url.articles.releng;/article.html">выпуске
            релизов</ulink>.</para>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="kernel-chflag-failure">
    <para>Я попытался установить новое ядро, однако утилита chflags не
      сработала.  Как это обойти?</para>
  </question>

  <answer>

  <para>Краткий ответ: Скорее всего, вы работаете в режиме безопасности,
    большем, чем 0.  Для установки ядра перезагрузите машину и войдите в
    однопользовательский режим.</para>

  <para>Подробный ответ: FreeBSD запрещает менять системные флаги при работе
    на уровнях безопасности, превышающих 0.  Вы можете определить ваш
    уровень такой командой:</para>

  <screen>
&prompt.root; <userinput>sysctl kern.securelevel</userinput>
  </screen>

  <para>Вы не можете понизить уровень безопасности; для установки ядра вам
    нужно перезагрузиться в однопользовательский режим, или изменить уровень
    безопасности в <filename>/etc/rc.conf</filename>, а затем выполнить
    перезагрузку.  Обратитесь к странице Справочника по &man.init.8; за
    подробной информацией об уровне безопасности и посмотрите
    <filename>/etc/defaults/rc.conf</filename> и справочную страницу по
    &man.rc.conf.5; для выяснения подробностей о файле rc.conf.</para>

  </answer>
</qandaentry>


<qandaentry>
  <question id="kernel-securelevel-time">
    <para>Не получается изменить системное время больше чем на одну секунду!
       Как это обойти?</para>
  </question>

  <answer>

  <para>Краткий ответ: Скорее всего, вы работаете на уровне безопасности,
    превышающем 1.  Для смены даты перезагрузите машину и войдите в
    однопользовательский режим.</para>

  <para>Подробный ответ: FreeBSD запрещает менять системное время на больше
    чем одну секунду при работе на уровнях безопасности, превышающих 1.  Вы
    можете определить ваш уровень такой командой:</para>

  <screen>
&prompt.root; <userinput>sysctl kern.securelevel</userinput>
  </screen>

  <para>Вы не можете понизить уровень безопасности; для изменения даты вам
    нужно перезагрузиться в однопользовательский режим, или изменить уровень
    безопасности в <filename>/etc/rc.conf</filename>, а затем выполнить
    перезагрузку.  Обратитесь к странице Справочника по &man.init.8; за
    подробной информацией об уровне безопасности, и посмотрите
    <filename>/etc/defaults/rc.conf</filename> и справочную страницу по
    &man.rc.conf.5; для выяснения подробностей о файле rc.conf.</para>

  </answer>
</qandaentry>


      <qandaentry>
        <question id="statd-mem-leak">
          <para>В <command>rpc.statd</command>; есть ошибка работы с памятью!
            Он использует 256&nbsp;Мбайт оперативной памяти!</para>
        </question>

        <answer>
          <para>Нет, там нет ошибок и он не использует 256 Мбайт памяти.  Для
            удобства <command>rpc.statd</command> отображает неприлично
            большой кусок памяти в своё адресное пространство.  Здесь нет
            ничего неправильного с технической точки зрения, это просто
            сбивает с толку программы вроде &man.top.1; и &man.ps.1;</para>

          <para>&man.rpc.statd.8; отображает свой статусный файл
            (находящийся на <filename>/var</filename>) в свое адресное
            пространство.  Для того, чтобы постоянно не беспокоиться о будущих
            переотражениях, когда файл вырастет в размерах, он просто
            отображает его с огромным размером заранее. Это просто заметить
            в исходных текстах, где как вы можете увидеть параметр длина
            к функции &man.mmap.2; имеет значение
            <literal>0x10000000</literal>, или одна шестнадцатая адресного
            пространства для IA32, то есть 256 Мбайт.</para>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="unsetting-schg">
    <para>Почему я не могу снять с файла флаг <literal>schg</literal>?</para>
  </question>

  <answer>

  <para>Вы работаете в системе с повышенным (то есть большим, чем 0) уровнем
    защиты.  Понизьте уровень защиты и попробуйте еще раз.  Для получения более
    подробной информации обратитесь к <link linkend="securelevel">разделу FAQ
    об уровне защиты</link> и справочной странице о &man.init.8;.</para>

  </answer>
</qandaentry>


      <qandaentry>
        <question id="ssh-shosts">
          <para>Почему в SSH аутентификация посредством файла
            <filename>.shosts</filename> не включена по умолчанию в
            последних версиях FreeBSD?</para>
        </question>

        <answer>
          <para>Причиной, по которой <filename>.shosts</filename>
            аутентификация не работает по умолчанию в последних версиях
            FreeBSD, является то что &man.ssh.1; не устанавливается более
            с битом изменения привилегий на пользователя
            <username>root</username>.  Если вы хотите
            <quote>исправить</quote> это, то вы можете сделать одно
            из двух нижеприведённых действий:</para>

          <itemizedlist>
            <listitem>
              <para>Как постоянную правку, установите
	        <makevar>ENABLE_SUID_SSH</makevar> в <literal>true</literal> в
                файле <filename>/etc/make.conf</filename> и перекомпилируйте
                <command>ssh</command>.</para>
            </listitem>

            <listitem>
              <para>Как временную правку измените права доступа к файлу
	        <filename>/usr/bin/ssh</filename> на <literal>4555</literal>
	        командой <command>chmod 4555 /usr/bin/ssh</command> из-под
	        администратора.  А потом добавьте строку
	        <makevar>ENABLE_SUID_SSH=true</makevar> в файл
	        <filename>/etc/make.conf</filename>, чтоб это изменение
	        осталось в силе после очередного обновления системы с помощью
	        <command>make world</command>.</para>
            </listitem>
          </itemizedlist>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="vnlru">
          <para>Что такое <literal>vnlru</literal>?</para>
        </question>

        <answer>
          <para><literal>vnlru</literal> сбрасывает и освобождает vnode, когда
            система достигает своего ограничения по параметру
            <varname>kern.maxvnodes</varname>.  Этот подпроцесс ядра в основном
            работает вхолостую и активируется только при наличии огромного
            объема ОЗУ и обращении к десяткам или тысячам файлов маленького
            размера.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="top-memory-states">
	  <para>Что означают различные состояния памяти, показываемые утилитой
	    <command>top</command>?</para>
        </question>

<!-- Предоставил John Dyson через Usenet -->

        <answer>
          <itemizedlist>
            <listitem>
              <para><literal>Active</literal>: по статистике страницы недавно
                использовались.</para>
            </listitem>

            <listitem>
               <para><literal>Inactive</literal>: по статистике страницы
                 недавно не использовались.</para>
            </listitem>

            <listitem>
              <para><literal>Cache</literal>: (наиболее часто)
                страницы, которых перемещены из числа неактивных в статус, в
                котором они содержат данные, но которые могут часто сразу же
                использоваться повторно (как с их старым содержимым, так и
                повторно с новым.)  Это может быть некоторое непосредственное
                перемещение из состояния <literal>active</literal> в состояние
                <literal>cache</literal>, если известно, что страница чиста (не
                модифицировалась), но такое
                перемещение определяется политикой, зависящей от выбора
                алгоритма разработчиком VM-системы.</para>
            </listitem>

            <listitem>
              <para><literal>Free</literal>: страницы, не содержащие данных,
                и которые могут быть использованы при некоторых условиях,
                когда страницы кэша могут не подойти.  Свободные страницы
                могут повторно использоваться в состояниях прерывания или
                процессах.</para>
            </listitem>

            <listitem>
              <para><literal>Wired</literal>: страницы, зафиксированные в
                памяти, обычно для использования ядром, а также иногда для
                специального использования процессами.</para>
            </listitem>
          </itemizedlist>

          <para>Страницы чаще всего записываются на диск (типа синхронизации
            VM), когда они находятся в неактивном состоянии, однако страницы
            в активном состоянии также могут сбрасываться (но это требует
            наличия определённых возможностей процессора.)  Это зависит от
            наличия и возможности отслеживания со стороны ЦП бита
            'модифицированности', и в некоторых ситуациях это может быть лучше
            для блока синхронизируемых страниц VM, вне зависимости от их
            активности.  В большинстве встречающихся ситуаций лучше всего
            представлять неактивную очередь как очередь сравнительно
            неиспользуемых страниц, которые могут быть, а могут и не быть в
            процессе записи на диск.  Кэшируемые страницы уже
            синхронизированы, не отображаются, но доступны для
            непосредственного использования процессом со своей старой или новой
            привязкой.  Свободные страницы доступны на уровне прерывания,
            однако кэшируемые или свободные страницы могут использоваться в
            процессе повторно.  Кэшируемые страницы недостаточно заблокированы
            для того, чтобы быть доступными на уровне прерывания.</para>

          <para>Есть ещё некоторые другие флаги (например, флаг занятости или
            счётчик занятости), которые могут изменить некоторые описанные
            правила.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="free-memory-amount">
	  <para>Сколько свободной памяти доступно?</para>
        </question>

<!-- Предоставил John Dyson посредством Usenet -->

        <answer>
          <para>Есть несколько понятий <quote>свободной памяти</quote>.  В
            одном случае это объём памяти, непосредственно доступной в данный
            момент без страничной выгрузки чего-либо.  Этот объём равен
            примерно размеру очереди кэша + размер очереди на высвобождение (с
            учётом допустимых отклонений, зависящих от настроек системы.)  В
            другом случае <quote>свободная память</quote> обозначает общий
            объём пространства <acronym>VM</acronym>.  Он может сложно
            вычисляться, но зависит от объёма раздела подкачки и памяти.
            Другие определения <quote>свободной памяти</quote> также возможны,
            но они достаточно бесполезны, ведь в любом случае важно сохранять
            низкий уровень подкачки и избегать исчерпания раздела
            подкачки.</para>
        </answer>
      </qandaentry>


      <qandaentry>
	<question id="var-empty">
	  <para>Что такое <filename>/var/empty</filename>?  Я не могу его
            удалить!</para>
	</question>

	<answer>
	  <para><filename>/var/empty</filename> представляет собой каталог,
            который использует программа &man.sshd.8; при выполнении разделения
            полномочий.  Каталог <filename>/var/empty</filename> пуст, его
            владельцем является <username>root</username> и на нём установлен
            флаг <literal>schg</literal>.</para>

	  <para>Хотя этот каталог удалять не рекомендуется, для выполнения этой
            операции вам нужно сначала снять флаг <literal>schg</literal>.
            Обратитесь к справочным страницам по &man.chflags.1; для получения
            более полной информации (и помните про ответ на <link
            linkend="unsetting-schg">вопрос о снятии флага schg</link>).</para>
	</answer>
      </qandaentry>
    </qandaset>
  </chapter>


  <chapter id="x">
    <title>X Window System и виртуальные консоли</title>

    <qandaset>
      <qandaentry>
        <question id="whatis-X">
          <para>Что такое X Window System?</para>
        </question>

        <answer>
          <para>X Window System является самой широкодоступной оконной
            системой, которая может работать на &unix; и &unix;-подобных
            системах, в том числе и во &os;.  Разработкой стандартов на
            используемый <ulink url="http://www.x.org/X11_protocol.html">
            X-протокол</ulink> занимается организация <ulink
            url="http://www.x.org">The X.Org Foundation</ulink>.
            На данный момент последняя версия спецификаций имеет номер 11.6,
            поэтому вы часто будете встречать краткую ссылку на них в виде
            сокращения <literal>X11R6</literal> или даже просто
            <literal>X11</literal>.</para>

          <para>Для разных архитектур и операционных систем существует
            множество реализаций этой системы.  Реализацию кода для
            серверной части называют <literal>X-сервером</literal>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="which-X">
          <para>Какие реализации X существуют для &os;?</para>
        </question>

        <answer>
          <para>Исторически складывалось так, что во &os; в качестве
            используемой по умолчанию реализации X выступал пакет
            &xfree86;, который поддерживает <ulink
            url="http://www.xfree86.org">The XFree86 Project,
	    Inc.</ulink>  Данное программное обеспечение устанавливалось по
            умолчанию в версиях &os; до 4.10 и 5.2.  Хотя &xorg; поддерживала
            в то время свою реализацию, в целом она позиционировалась как
            ссылочная платформа, от чего долгие годы значительно
            страдала.</para>

	  <para>Однако в начале 2004 года несколько разработчиков XFree86
            покинули проект из-за разногласий по поводу темпов внесения
            изменений в код, будущего направления развития и личных конфликтов.
            Теперь они передают свой код непосредственно в &xorg;.
            Одновременно с этим &xorg; обновила своё дерево исходных текстов до
            состояния, соответствующего последнему релизу &xfree86;
            перед изменением лицензионного соглашения (<application>XFree86
            version 4.3.99.903</application>), включила туда множество
            изменений, ранее поддерживаемых отдельно, и выпустила этот набор
            как <application>X11R6.7.0</application>.  Существует отдельный,
            но связанный с этим проект <ulink
            url="http://www.freedesktop.org">freedesktop.org</ulink> (для
            краткости <literal>fd.o</literal>), работающий над
            перепроектированием оригинального кода &xfree86;, в котором больше
            нагрузки должно лечь на графический адаптер (для улучшения
            производительности), и который должен стать более модульным (для
            улучшения поддержки и ускорения выпуска
            релизов, а также упрощения настройки).  &xorg; планирует включить
            изменения, разработанные freedesktop.org, в свои будущие
            релизы.</para>

          <para>С июля 2004 в &os.current; в качестве реализации, используемой
            по умолчанию, &xfree86; была заменена на &xorg;.  Порты
	    для &xfree86; (<filename role="package">x11/XFree86-4</filename> и
	    зависимые от него) остаются в Коллекции портов и будут
            использоваться по умолчанию для &os.stable;.</para>

          <note>
            <para>Текст выше описывает реализацию X, установленную по
              умолчанию.  Вообще возможна установка любой реализации в
              соответствии с указаниями от 20040723, находящимися в файле
              <filename>/usr/ports/UPDATING</filename>.</para>
          </note>

          <warning>
            <para>Пока невозможно смешивать части разных реализаций;
              необходимо выбрать какую-то одну из имеющихся.</para>
          </warning> 

          <note>
            <para>Последующие вопросы относятся к реализации &xfree86;, однако
              большинство из них относятся также и к реализации &xorg;.  Хотя в
              качестве конфигурационного файла для реализации &xorg; по
              умолчанию выступает <filename>xorg.conf</filename>, в случае его
              отсутствия ищется <filename>XF86Config</filename>.</para>
          </note>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="xorg-compatibility">
          <para>Будут ли имеющиеся приложения работать с пакетом &xorg;?</para>
        </question>

        <answer>
          <para>Программное обеспечение &xorg; разработано в соответствии с
            теми же спецификациями X11R6, которым удовлетворяет &xfree86;, так
            что основная масса приложений будет работать без изменений.
            Использование нескольких редко используемых протоколов
            (<literal>XIE</literal>, <literal>PEX</literal> и
            <literal>lbxproxy</literal>) будет ограничено, однако первые два
            из них портом &xfree86; для &os; тоже не поддерживаются.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="xfree86-split">
          <para>Всё же почему разделились два проекта X?</para>
        </question>

        <answer>
          <para>Ответ на этот вопрос находится вне круга проблем, описываемых
            в FAQ.  Заметим, что в Internet в архивах различных списков
            рассылки хранится объёмная переписка.  Для изучения истории этого
            вопроса, пожалуйста, воспользуйтесь вашей любимой поисковой
            системой, а не задавайте вопросы в списках рассылки &os;.  Может
            статься, что только непосредственные участники событий будут знать
            доподлинно все произошедшее.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="why-choose-xorg">
          <para>Почему для установки по умолчанию во &os; были выбраны
            порты &xorg;?</para>
        </question>

        <answer>
          <para>Разработчики &xorg; заявляют, что их целями является более
            частый выпуск релизов и быстрое добавление новых функций.  Если
            они смогут это осуществить, что их разработка будет весьма
            привлекательна.  Кроме того, использование их программного
            обеспечение продолжает подпадать под условия стандартного для X
            лицензионного соглашения, когда как &xfree86; пользуется несколько
            модифицированным её вариантом.</para>

          <note>
            <para>Данное решение всё ещё выглядит сомнительным.  Только время
              покажет, какая же реализация технически превосходит другую.
              Пользователь &os; должен сам выбрать, какой реализации он
              отдаёт предпочтение.</para>
          </note>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="running-X">
          <para>Я хочу запустить X, как это сделать?</para>
        </question>

        <answer>
          <para>Самый простой способ - это указать во время установки, что вы
            хотите использовать X.</para>

          <para>Если вы планируете установить X на уже работающую систему, то
            вам необходимо использовать мета-порт <filename
            role="package">x11/xorg</filename>, который построит и установит
            все необходимые компоненты.</para>

          <para>Затем следуйте указаниям в документации по утилите
            &man.xorgconfig.1;, которая предназначена для настройки &xorg;
            на работу с вашим графическим адаптером/мышью/и т.д.  Вас может также
            заинтересовать утилита &man.xorgcfg.1;, которая обеспечивает
            процесс настройки X графическим интерфейсом.</para>

          <para>Для получения более полной информации прочтите раздел о <ulink
            url="&url.books.handbook;/x11.html">X11</ulink> Руководства
            FreeBSD.</para>

          <para>Вы можете также попробовать сервер Xaccel.  За подробной
            информацией обратитесь к разделу, посвящённому продуктам фирмы
	    <link linkend="xig">Xi Graphics</link>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="running-X-securelevels">
          <para>Я <emphasis>попытался</emphasis> запустить X, но получил
            сообщение <errorname>KDENABIO failed (Operation not
            permitted)</errorname> после ввода команды
            <command>startx</command>.  Что мне теперь делать?</para>
        </question>

        <answer>
          <para>Вероятнее всего, в вашей системе установлен повышенный уровень
            безопасности.  При повышенном уровне защиты систему X запустить
            невозможно, потому что X требуются права на операции записи в
            устройство <devicename>/dev/io</devicename>.  Дополнительную
            информацию можно найти на страницах справочной системы по
            &man.init.8;.</para>

          <para>Так что вопрос сводится к тому, как вам это обойти, и у вас
            здесь есть в основном два варианта: понизить ваш уровень защиты
            обратно к нулю (обычно это делается в
            <filename>/etc/rc.conf</filename>) или во время загрузки
            запускать &man.xdm.1; (до того, как повышается уровень
            защиты).</para>

          <para>Обратитесь к <xref linkend="xdm-boot"> для получения более
            полной информации о запуске &man.xdm.1; во время загрузки.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="x-and-moused">
          <para>Почему моя мышь не работает с X?</para>
        </question>

        <answer>
          <para>Если вы используете syscons (стандартный драйвер консоли), то
            можете настроить поддержку указателя мыши во всех виртуальных
            экранах.  Во избежание конфликтов с X, драйвер syscons поддерживает
            виртуальное устройство <devicename>/dev/sysmouse</devicename>.  Все
            события, получаемые от реальной мыши, пишутся в устройство sysmouse
            через moused.  Если вы хотите использовать вашу мышь на одной или
            нескольких виртуальных консолях, <emphasis>продолжая</emphasis>
            использовать X, посмотрите <xref linkend="moused"
            remap="другой раздел"> и настройте moused.</para>

          <para>Затем отредактируйте <filename>/etc/X11/XF86Config</filename> так,
            чтобы в нём были следующие строки.</para>

          <programlisting>Section        Pointer
Protocol       "SysMouse"
Device         "/dev/sysmouse"
.....</programlisting>

          <para>Пример выше предназначен для &xfree86; 3.3.2 и выше и для
            &xorg; 6.7.0.  Для более ранних версий параметр
            <emphasis>Protocol</emphasis> должен быть
            <emphasis>MouseSystems</emphasis>.</para>

	  <para>В случае использования &xorg;, редактируйте
	    <filename>/etc/X11/xorg.conf</filename>.  Хотя, указанный выше
	    формат записи поддерживается по причинам совместимости, предпочтительнее
	    использовать секцию InputDevice, как в следующем примере:</para>

	  <programlisting>Section "InputDevice"
   Option          "Protocol" "SysMouse"
   Option          "Device" "/dev/sysmouse"
.....</programlisting>

          <para>Некоторые предпочитают использовать в X устройство
            <devicename>/dev/mouse</devicename>.  Чтобы оно работало, файл
            устройства <devicename>/dev/mouse</devicename> должен являться
            ссылкой на <devicename>/dev/sysmouse</devicename> (посмотрите
            справку по &man.sysmouse.4;):</para>

          <screen>&prompt.root; <userinput>cd /dev</userinput>
&prompt.root; <userinput>rm -f mouse</userinput>
&prompt.root; <userinput>ln -s sysmouse mouse</userinput></screen>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="x-and-wheel">
          <para>У моей мыши есть колёсико.  Могу ли я его использовать при
            работе в X?</para>
        </question>

        <answer>
          <para>Да.</para>

          <para>Вам нужно указать X, что используется 5-кнопочная мышь.  Для
            этого просто добавьте строчки <literal>Buttons 5</literal> и
            <literal>ZAxisMapping 4 5</literal> в раздел
            <quote>InputDevice</quote> файла
            <filename>/etc/XF86Config</filename>.  Например, в
            вашем файле <filename>/etc/XF86Config</filename> секция
            <quote>InputDevice</quote> может принять такой вид:</para>

          <example>
            <title>Секция <quote>InputDevice</quote> для мыши с
              колёсиком из конфигурационных файлов для &xfree86; и
              &xorg;
            </title>

            <programlisting>Section "InputDevice"
   Identifier      "Mouse1"
   Driver          "mouse"
   Option          "Protocol" "auto"
   Option          "Device" "/dev/sysmouse"
   Option          "Buttons" "5"
   Option          "ZAxisMapping" "4 5"
EndSection</programlisting>
          </example>

          <example>
            <title>Пример <quote>.emacs</quote> для простой прокрутки страницы
              при помощи мыши с колёсиком (опционально)</title>

            <programlisting>;; wheel mouse
(global-set-key [mouse-4] 'scroll-down)
(global-set-key [mouse-5] 'scroll-up)</programlisting>
          </example>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="no-remote-x11">
          <para>Как использовать удалённые X-дисплеи?</para>
        </question>

        <answer>
          <para>Из соображений обеспечения информационной безопасности
            открывать удалённые окна на машине по умолчанию запрещено.</para>

          <para>Для включения этой возможности просто запустите
            <application>X</application> с аргументом
            <option>-listen_tcp</option>:</para>

          <screen>&prompt.user; <userinput>startx -listen_tcp</userinput></screen>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="window-menu-weird">
          <para>Меню и диалоговые окна в X Window работают неправильно!</para>
        </question>

        <answer>
          <para>Попробуйте выключить <keycap>Num Lock</keycap>.</para>

          <para>Если клавиша <keycap>Num Lock</keycap> во время загрузки по
            умолчанию включена, добавьте в секцию <literal>Keyboard</literal>
            файла <filename>XF86Config</filename> следующую строку.</para>

          <programlisting># Let the server do the NumLock processing.  This should only be
# required when using pre-R6 clients
    ServerNumLock</programlisting>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="virtual-console">
          <para>Что такое виртуальные консоли и как изменить их
            количество?</para>
        </question>

        <answer>
          <para>Виртуальные консоли, упрощённо говоря, позволяют вам иметь
            несколько одновременных сеансов работы с той же самой машиной без
            установки какой бы то ни было сети или запуска X.</para>

          <para>При запуске системы после вывода сообщений этапа загрузки на
            консоль выдаётся приглашение на вход в систему.  Вы можете ввести
            своё имя и пароль и начать работать (или играть!) на первой
            виртуальной консоли.</para>

          <para>В какой-то момент вы можете захотеть запустить ещё одну сеанс,
            скажем, чтобы заглянуть в документацию по программе, которую вы
            запустили или для для чтения электронной почты во время ожидания
            завершения передачи данных по FTP.  Просто нажмите <keycombo
            action="simul"><keycap>Alt</keycap><keycap>F2</keycap></keycombo>
            (удерживая клавишу <keycap>Alt</keycap>, нажмите
            <keycap>F2</keycap>) и вы обнаружите приглашение, ждущее вас на
            второй <quote>виртуальной консоли</quote>!  Когда захотите
            вернуться к первоначальному сеансу, нажмите <keycombo
            action="simul"><keycap>Alt</keycap>
            <keycap>F1</keycap></keycombo>.</para>

          <para>После установки по умолчанию во FreeBSD задействованы восемь
            виртуальных консолей, а комбинации клавиш
            <keycombo action="simul"><keycap>Alt</keycap>
            <keycap>F1</keycap></keycombo>, <keycombo
            action="simul"><keycap>Alt</keycap><keycap>F2</keycap></keycombo>,
            <keycombo action="simul"><keycap>Alt</keycap>
            <keycap>F3</keycap></keycombo> и так далее служат для переключения
            между ними.</para>

          <para>Чтобы увеличить количество консолей, отредактируйте файл
            <filename>/etc/ttys</filename> (посмотрите справку
            по &man.ttys.5;), добавив туда записи для терминалов с именами от
            <devicename>ttyv4</devicename> до <devicename>ttyvc</devicename>
            после слов <quote>Virtual terminals</quote>:</para>

          <programlisting># Edit the existing entry for ttyv3 in /etc/ttys and change
# "off" to "on".
ttyv3   "/usr/libexec/getty Pc"         cons25  on secure
ttyv4   "/usr/libexec/getty Pc"         cons25  on secure
ttyv5   "/usr/libexec/getty Pc"         cons25  on secure
ttyv6   "/usr/libexec/getty Pc"         cons25  on secure
ttyv7   "/usr/libexec/getty Pc"         cons25  on secure
ttyv8   "/usr/libexec/getty Pc"         cons25  on secure
ttyv9   "/usr/libexec/getty Pc"         cons25  on secure
ttyva   "/usr/libexec/getty Pc"         cons25  on secure
ttyvb   "/usr/libexec/getty Pc"         cons25  on secure</programlisting>

          <para>Используйте из них столько, сколько посчитаете нужным.  Чем
            больше виртуальных терминалов у вас имеется, тем больше ресурсов
            они используют; это может иметь значение, если у вас меньше чем
            8 Мбайт ОЗУ.  Вы можете сменить статус консолей с
            <literal>secure</literal> на <literal>insecure</literal>.</para>

          <important>
            <para>Если вы хотите запустить X, вы <emphasis>должны</emphasis>
              оставить для него по крайней мере один неиспользуемый (или
              выключенный) виртуальный терминал.  Таким образов, если вы хотите
              иметь приглашения login на всех двенадцати функциональных клавиши,
              то вам не повезло - вы можете это сделать только для одиннадцати
              из них, если хотите на этой же машине ещё запустить
              X-сервер.</para>
          </important>

          <para>Самым простым способом убрать консоль является просто её
            выключение.  Например, если вы запустили на всех 12 консолях
            виртуальные терминалы, как указано выше, и ещё хотите запустить
            X, то должны будете изменить параметры двенадцатого виртуального
            терминала с:</para>

          <programlisting>ttyvb   "/usr/libexec/getty Pc"         cons25  on  secure</programlisting>

          <para>на:</para>

          <programlisting>ttyvb   "/usr/libexec/getty Pc"         cons25  off secure</programlisting>

          <para>Если на вашей клавиатуре только десять функциональных клавиш,
            то последние строки будут выглядеть так:</para>

          <programlisting>ttyv9   "/usr/libexec/getty Pc"         cons25  off secure
ttyva   "/usr/libexec/getty Pc"         cons25  off secure
ttyvb   "/usr/libexec/getty Pc"         cons25  off secure</programlisting>

          <para>(Вы также можете просто их удалить.)</para>

          <para>После того, как вы отредактировали файл
            <filename>/etc/ttys</filename>, проверьте, что у вас имеется
            достаточное количество устройств для виртуальных терминалов.
            Самый простой способ сделать это:</para>

          <screen>&prompt.root; <userinput>cd /dev</userinput>
&prompt.root; <userinput>sh MAKEDEV vty12</userinput></screen>

	  <note>
	    <para>Во FreeBSD 5.X и выше при использовании
              <literal>DEVFS</literal>,
              вам не нужно создавать устройства вручную, потому что необходимые
              файлы устройств будут создаваться в каталоге <filename
              class="directory">/dev</filename> автоматически.</para>
	  </note>

          <para>Самым простым (и надёжным) способом активировать виртуальные
            консоли является перезагрузка.  Однако если вы вовсе не хотите
            этого делать, просто остановите X Window System и выполните (как
            пользователь <username>root</username>):</para>

          <screen>&prompt.root; <userinput>kill -HUP 1</userinput></screen>

          <para>При этом требуется, чтобы вы полностью закрыли X Window, если
            она была запущена, до запуска этой команды.  Если вы это не
            сделаете, ваша система может повиснуть/заблокироваться после
            выполнения команды kill.</para>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="vty-from-x">
    <para>Как осуществляется доступ к виртуальным консолям из X?</para>
  </question>

  <answer>

  <para>Используйте комбинацию клавиш
    <keycombo action="simul">
      <keycap>Ctrl</keycap>
      <keycap>Alt</keycap>
      <keycap>F<replaceable>n</replaceable></keycap>
    </keycombo>
    для переключения обратно в виртуальную консоль.  Нажатие
    <keycombo action="simul">
      <keycap>Ctrl</keycap>
      <keycap>Alt</keycap>
      <keycap>F1</keycap>
    </keycombo>
    вернёт вас на первую виртуальную консоль.</para>

  <para>После того, как вы оказались в текстовой консоли, можете использовать,
    как обычно, комбинации
    <keycombo action="simul">
      <keycap>Alt</keycap>
      <keycap>F<replaceable>n</replaceable></keycap>
    </keycombo> для переключения между ними.</para>

  <para>Чтобы вернуться в сеанс работы X, вы должны переключиться в виртуальную
    консоль, на которой запущена X Window.  Если вы запустили X из командной
    строки (например, при помощи команды <command>startx</command>), то сеанс
    работы X будет привязан к следующей неиспользуемой виртуальной консоли, а
    не к той текстовой консоли, с которой он был запущен.  Если у вас имеется
    восемь активных виртуальных терминалов, то X будет работать на девятом, и
    вам нужно будет воспользоваться комбинацией
    <keycombo action="simul">
      <keycap>Alt</keycap>
      <keycap>F9</keycap>
    </keycombo>
    для возврата в X.</para>

  </answer>
</qandaentry>


<qandaentry>
  <question id="xdm-boot">
    <para>Как запустить XDM во время загрузки?</para>
  </question>

  <answer>

  <para>Есть две философские школы, проповедующие различные методы запуска
    &man.xdm.1;.  Последователи одного течения запускают xdm из
    <filename>/etc/ttys</filename> (посмотрите &man.ttys.5;), используя
    приводимый пример, тогда как другие вставляют запуск xdm в скрипт
    <filename>rc.local</filename> (посмотрите справку по &man.rc.8;) или
    <filename>X.sh</filename>, помещая последний в каталог
    <filename>/usr/local/etc/rc.d</filename>.  Оба метода равноправны, и один
    из них может работать в ситуациях, с которыми не справляется другой и
    наоборот.  В обоих случая результат один и тот же: X выводит
    графическое приглашение login:.</para>

  <para>Плюсом метода с использованием ttys является документирование того,
    на каком vty будет запущен X и то, что ответственность за перезапуск
    X-сервера при завершении сеанса работы лежит на процессе init.  Метод
    с использованием rc.local позволяет просто прекратить работу xdm, если
    при запуске X возникли какие-нибудь проблемы.</para>

  <para>Из rc.local <command>xdm</command> должен быть запущен без
    аргументов, (то есть как даемон).  xdm должен быть запущен ПОСЛЕ запуска
    &man.getty.8;, иначе они будут конфликтовать, блокируя консоль.  Лучше всего
    выдержать паузу секунд на 10 и потом запустить <command>xdm</command>.
  </para>

  <para>Если <command>xdm</command> запускается из
    <filename>/etc/ttys</filename>, то есть вероятность конфликта между
    <command>xdm</command> и &man.getty.8;.  Одним из способов
    избежать этого является добавление номера <literal>vt</literal> в файл
    <filename>/usr/X11R6/lib/X11/xdm/Xservers</filename>.</para>

  <programlisting>
:0 local /usr/X11R6/bin/X vt4
  </programlisting>

  <para>В вышеприведённом случае X-серверу указывается работать на
    <devicename>/dev/ttyv3</devicename>.  Заметьте, что номера отличаются на
    единицу.  Дело в том, что X-сервер считает vty от единицы, когда как
    отсчёт vty в ядре FreeBSD ведётся с нуля.</para>

  </answer>
</qandaentry>


<qandaentry>
  <question id="xconsole-failure">
    <para>При запуске xconsole выдаётся сообщение <errorname>Couldn't open
      console</errorname>.</para>
  </question>

  <answer>
  <para>Если вы запускаете <application>X</application> с использованием
    сценария <application>startx</application> права на устройство
    <devicename>/dev/console</devicename>
    <emphasis>не</emphasis> изменяются, поэтому такие программы, как
    <application>xterm -C</application> и
    <application>xconsole</application>, не будут работать.</para>

  <para>Это зависит от прав доступа, установленных для консоли по умолчанию.
    В многопользовательской системе вовсе не нужно, чтобы любой
    пользователь мог выводить информацию на системную консоль.  Для
    пользователей, вошедших в систему через VTY, для решения этой проблемы
    существует файл &man.fbtab.5;.</para>

  <para>В общем, раскомментируйте строчку вида</para>

  <programlisting>
/dev/ttyv0 0600 /dev/console
  </programlisting>

  <para>в файле <filename>/etc/fbtab</filename> (посмотрите справку по
    &man.fbtab.5;), и этого будет достаточно для того, чтобы всякий, кто вошёл
    в систему с терминала <devicename>/dev/ttyv0</devicename>, имел доступ к
    консоли.</para>
  </answer>
</qandaentry>


      <qandaentry>
        <question id="xfree86-root">
          <para>Раньше я запускал &xfree86;, работая как обычный пользователь, а
            теперь при запуске выдается сообщение о том, что я должен быть
            пользователем <username>root</username>!</para>
        </question>

        <answer>
          <para>Все X-серверы должны запускаться пользователем
            <username>root</username>, чтобы иметь прямой доступ к вашему
            видеооборудованию. Более старые версии &xfree86;
            (&lt;= 3.3.6) устанавливали все поставляемые серверы так, что они
            автоматически запускались пользователем root (с установленным битом
            смены владельца запускаемого процесса).  Несомненно, это рискованно,
            потому что X-серверы являются большими, сложными программами.  Более
            новые версии &xfree86; не устанавливают на серверах бит смены
            владельца на пользователя <username>root</username> именно по этой
            причине.</para>

          <para>Очевидно, что запускать X-сервер, работая как
            пользователь <username>root</username>, неправильно и небезопасно.
            Есть два способа использовать X, работая как
            обычный пользователь.  Первый способ заключается в использовании
            <application>xdm</application> или другого менеджера дисплеев (к
            примеру, <application>kdm</application>); второй способ - в
            использовании программы <command>Xwrapper</command>.</para>

          <para><application>xdm</application> представляет собой даемон,
            который обрабатывает входы в систему в графическом режиме.  Обычно
            он запускается во время загрузки и отвечает за аутентификацию
            пользователей и запуск их сеансов; практически это графический
            аналог программ &man.getty.8; и &man.login.1;.  Более подробная
            информация о <application>xdm</application> находится в <ulink
            url="http://www.xfree86.org/sos/resources.html">документации по
            &xfree86;</ulink> и в <link linkend="xdm-boot">соответствующем разделе
            FAQ</link>.</para>

          <para><command>Xwrapper</command> является оболочкой для X-сервера;
            это маленькая утилита. позволяющая кому-либо запускать X-сервер и
            достаточно безопасная в использовании.  Она выполняет некоторую
            проверку передаваемых ей в командной строке аргументов, и если всё
            в порядке, запускает соответствующий X-сервер.  Если по каким-либо
            причинам вы не хотите запускать менеджер дисплеев, то эта утилита
            вам подойдет.  Если у вас установлена полная коллекция портов, вы
            можете найти этот порт в каталоге
            <filename>/usr/ports/x11/wrapper</filename>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="ps2-x">
          <para>Моя мышь PS/2 в X работает неправильно.</para>
        </question>

        <answer>
          <para>Вполне может быть, что ваша мышь и её драйвер
            рассинхронизировались.</para>

          <para>В редких случаях драйвер может ошибочно обнаруживать проблемы
            с синхронизацией, и вы будете видеть такие сообщения ядра:</para>

          <programlisting>psmintr: out of sync (xxxx != yyyy)</programlisting>

          <para>и заметите, что мышь теперь работает неправильно.</para>

          <para>Если это случится, отмените проверку согласования, установив
            значение флага для драйвера мыши PS/2 в 0x100.  Войдите в
            конфигуратор <emphasis>UserConfig</emphasis>, задав опцию
            <option>-c</option> в приглашении загрузчика:</para>

          <screen>boot: <userinput>-c</userinput></screen>

          <para>Затем в командной строке <emphasis>UserConfig</emphasis>
            наберите:</para>

          <screen>UserConfig&gt; <userinput>flags psm0 0x100</userinput>
UserConfig&gt; <userinput>quit</userinput></screen>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="ps2-mousesystems">
          <para>Почему моя мышь PS/2 от MouseSystems не работает?</para>
        </question>

        <answer>
          <para>Было несколько сообщений, что некоторые модели мышей PS/2 от
            MouseSystems работают только в режиме <quote>высокого
            разрешения</quote>.  В других режимах курсор мыши постоянно
            прыгает в верхний левый угол экрана.</para>

          <para>Укажите флаг 0x04 драйверу мыши PS/2 для перевода её в режим
            высокого разрешения.  Войдите в <emphasis>UserConfig</emphasis>,
            задав опцию <option>-c</option> в приглашении загрузчика:</para>

          <screen>boot: <userinput>-c</userinput></screen>

          <para>Затем в командной строке <emphasis>UserConfig</emphasis>
            наберите:</para>

          <screen>UserConfig&gt; <userinput>flags psm0 0x04</userinput>
UserConfig&gt; <userinput>quit</userinput></screen>

          <para>В предыдущем разделе описана возможная причина проблем с
            мышью.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="imake-tmpl">
          <para>При компиляции приложений для X программа
            <command>imake</command> не может найти файл
            <filename>Imake.tmpl</filename>.  Где он находится?</para>
        </question>

        <answer>
          <para>Файл <filename>Imake.tmpl</filename> является частью пакета
            Imake, стандартного инструмента для построения X-приложений.
            Он, также как ещё несколько заголовочных файлов, требуемых для
            построения X-приложений, содержится в дистрибутиве программ X.  Вы
            можете их установить из &man.sysinstall.8; или взять из
            дистрибутива X. </para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="xfree86-version">
          <para>Я хочу установить другой X-сервер.</para>
        </question>

        <answer>
          <para>В версиях &os;, предшествующих 5.3, по умолчанию будет
            использоваться <application>&xfree86;&nbsp;4.X</application>, а в
            последующих версиях по умолчанию будет использоваться
            <application>&xorg;</application>.  Если вы хотите использовать
            реализацию X11, отличную от используемой по умолчанию, добавьте
            следующую строку в файл <filename>/etc/make.conf</filename> (если
            у вас этого файла нет, создайте его):</para>

          <programlisting>X_WINDOW_SYSTEM=        xorg</programlisting>

          <para>Эта переменная может приниматься значения
            <literal>xorg</literal>, <literal>xfree86-4</literal> или
            <literal>xfree86-3</literal>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="mouse-button-reverse">
          <para>Как поменять местами кнопки мыши?</para>
        </question>

        <answer>
          <para>Поместите команду <command>xmodmap
            -e "pointer = 3 2 1"</command> в один из ваших скриптов
            <filename>.xinitrc</filename> или
            <filename>.xsession</filename>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="install-splash">
          <para>Как установить экранную заставку и где такие заставки можно
            найти?</para>
        </question>

        <answer>
          <para>Во &os; есть возможность вывода <quote>заставки</quote> во
            время загрузки.  На данный момент экраны заставок должны быть
            256-цветными файлами формата BMP <filename>*.BMP</filename> или
            ZSoft PCX (<filename>*.PCX</filename>).  Кроме того, они должны
            иметь размер 320x200 или меньше для работы со стандартными
            адаптерами VGA.  Если вы включили поддержку VESA при компиляции
            ядра, сможете использовать заставки размером до 1024x768.
            Реальная поддержка VESA может быть вкомпилирована в ядро при
            указании опции <literal>VESA</literal> либо загружена в виде
            kld-модуля ядра во время начальной загрузки.</para>

          <para>Чтобы использовать заставку, вам нужно изменить файлы,
            управляющие процессом загрузки &os;.</para>

          <para>Вам нужно создать файл <filename>/boot/loader.rc</filename>,
            содержащий следующие строки:</para>

          <programlisting>include /boot/loader.4th
start</programlisting>

          <para>и файл <filename>/boot/loader.conf</filename> со
            строками:</para>

          <programlisting>splash_bmp_load="YES"
bitmap_load="YES"</programlisting>

          <para>Здесь предполагается, что в качестве заставки вы
            используете файл <filename>/boot/splash.bmp</filename>.  Если
            вы используете PCX-файл, скопируйте его под именем
            <filename>/boot/splash.pcx</filename>, создайте файл
            <filename>/boot/loader.rc</filename>, как указано выше, и
            создайте файл <filename>/boot/loader.conf</filename>, который
            содержит следующее:</para>

          <programlisting>splash_pcx_load="YES"
bitmap_load="YES"
bitmap_name="/boot/splash.pcx"</programlisting>

          <para>Теперь всё, что вам нужно - это сама заставка.  Поищите
            заставки в галерее по адресу <ulink
            url="http://www.baldwin.cx/splash/"></ulink>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="windows-keys">
          <para>Можно ли в X использовать клавиши &windows;, которые есть на
            клавиатуре?</para>
        </question>

        <answer>
          <para>Да.  Всё, что вам нужно сделать, это с помощью &man.xmodmap.1;
            задать функции, которые вы хотите к этим клавишам привязать.</para>

          <para>Положим, что все клавиатуры <quote>&windows;</quote> стандартны и
            3 клавиши имеют следующие клавиатурные коды</para>

          <itemizedlist>
            <listitem>
              <para>115 - клавиша &windows; между клавишами Ctrl и
                Alt с левой стороны</para>
            </listitem>

            <listitem>
              <para>116 - клавиша &windows; справа от клавиши
                <keycap>AltGr</keycap></para>
            </listitem>

            <listitem>
              <para>117 - клавиша <keycap>Menu</keycap>, слева от клавиши
                <keycap>Ctrl</keycap>, находящейся справа</para>
            </listitem>
          </itemizedlist>

          <para>Чтобы заставить левую клавишу &windows; набирать запятую,
            попробуйте выполнить такую команду:</para>

          <screen>&prompt.root; <userinput>xmodmap -e "keycode 115 = comma"</userinput></screen>

          <para>Чтобы увидеть результат, вам нужно будет перезапустить ваш
            оконный менеджер.</para>

          <para>Для того, чтобы переопределения клавиш &windows;
            выполнялось автоматически
            каждый раз при запуске X, можно поместить вызов команд
            <command>xmodmap</command> в ваш <filename>~/.xinitrc</filename>
            либо, что предпочтительней, создать файл
            <filename>~/.xmodmaprc</filename> и включить в него параметры
            для <command>xmodmap</command>, по одному на строку, и добавить
            строку</para>

          <programlisting>xmodmap $HOME/.xmodmaprc</programlisting>

          <para>в ваш <filename>~/.xinitrc</filename>.</para>

          <para>Например, вы можете переопределить эти 3 клавиши так, чтобы они
            выполняли функции клавиш <keycap>F13</keycap>, <keycap>F14</keycap>
            и <keycap>F15</keycap> соответственно.  Это позволит
            легко привязать их к полезным функциям в приложениях или вашем
            менеджере окон, как будет показано далее.</para>

          <para>Чтобы сделать это, поместите в файл
            <filename>~/.xmodmaprc</filename> вот такие строки:</para>

          <programlisting>keycode 115 = F13
keycode 116 = F14
keycode 117 = F15</programlisting>

          <para>Если, к примеру, вы используете <command>fvwm2</command>, то
            можете переопределить клавиши таким образом, что
            <keycap>F13</keycap> сворачивает в иконку (или восстанавливает
            предыдущие размеры) окна, на которое указывает курсор,
            <keycap>F14</keycap> перемещает окно с курсором на передний план
            или, если оно уже впереди, возвращает обратно, а
            <keycap>F15</keycap> вызывает главное меню приложения
            Workplace, даже если курсор находится не на рабочем
            столе, что бывает полезно, если нет
            ни одного видимого кусочка рабочего стола (к тому же логотип на
            клавише соответствует этой функции).</para>

          <para>Вот строки из <filename>~/.fvwmrc</filename>, с помощью которых
            достигаются описанные выше функции:</para>

          <programlisting>Key F13        FTIWS    A        Iconify
Key F14        FTIWS    A        RaiseLower
Key F15        A        A        Menu Workplace Nop</programlisting>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="x-3d-acceleration">
          <para>Как заставить работать аппаратное ускорение 3D-графики для
            &opengl;?</para>
        </question>

        <answer>
          <para>Наличие 3D-ускорения зависит от версии используемого вами
            сервера &xfree86; или &xorg; и типа графического адаптера.  Если у
            вас адаптер NVIDIA, то вы можете использовать бинарные файлы
            драйверов для FreeBSD, размещённые в разделе <ulink
            url="http://www.nvidia.com/content/drivers/drivers.asp">
            Drivers</ulink> их сайта.  Дополнительную информацию об
            использования аппаратного ускорения в &xfree86;-4 или &xorg; с
            другими адаптерами, включая Matrox G200/G400, ATI Rage 128/Radeon,
            а также 3dfx Voodoo 3, 4, 5 и Banshee, можно почерпнуть на
            страничке <ulink url="http://people.FreeBSD.org/~anholt/dri/">
            XFree86-4 Direct Rendering on FreeBSD</ulink>.  Пользователи
            &xfree86; версии 3.3 могут воспользоваться портом Utah-GLX,
            находящимся в <filename
            role="package">graphics/utah-glx</filename>, для
            получения частичного ускорения
            &opengl; для наборов микросхем Matrox Gx00, ATI Rage Pro, SiS 6326,
            i810, Savage и старых адаптеров NVIDIA.</para>
        </answer>
      </qandaentry>
    </qandaset>
  </chapter>


  <chapter id="networking">
    <title>Работа в сети</title>

<qandaset>
<qandaentry>
  <question id="diskless-booting">
    <para>Где можно найти информацию о <quote>бездисковой
      загрузке</quote>?</para>
  </question>

  <answer>

  <para><quote>Бездисковая загрузка</quote> означает, что машина с FreeBSD
    загружается по сети и читает необходимые файлы с сервера, а не со своего
    диска.  Подробное описание есть в <ulink
    url="&url.books.handbook;/network-diskless.html">
    соответствующей главе</ulink>
    Руководства.</para>
  </answer>
</qandaentry>


      <qandaentry>
        <question id="router">
          <para>Может ли машина с FreeBSD использоваться как
            маршрутизатор?</para>
        </question>

        <answer>
          <para>Да.  Пожалуйста, обратитесь к разделу Руководства, посвящённому
            <ulink url="&url.books.handbook;/advanced-networking.html">сложным
            вопросам работы в сети</ulink>, особенно в той части, что касается
            <ulink url="&url.books.handbook;/network-routing.html">
            маршрутизации и маршрутизаторов</ulink>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="win95-connection">
          <para>Можно ли подключить машину с &windows; к Internet с помощью
            FreeBSD?</para>
        </question>

        <answer>
          <para>Как правило, те, кто задают такие вопросы, имеют дома два
            компьютера, один с FreeBSD, а другой с какой-то версией &windows;.
            Идея состоит в использовании FreeBSD для подключения к Internet, а
            затем осуществлять выход в Internet из &windows; через FreeBSD.  На
            самом деле это просто частный случай предыдущего вопроса, который
            хорошо отработан.</para>

          <para>Если для подключения к Internet вы используете коммутируемое
            соединение, то &man.ppp.8; режима
            пользователя имеет параметр <option>-nat</option>.  Если вы
            запустите &man.ppp.8; с параметром <option>-nat</option>,
            установив в файле <filename>/etc/rc.conf</filename> переменную
            <literal>gateway_enable</literal> в значение
            <emphasis>YES</emphasis> и правильно настроите машину с &windows;,
            то всё должно прекрасно заработать.  Для получения дополнительной
            информации, пожалуйста, обратитесь к страницам справочной системы
            по команде &man.ppp.8; или <ulink
            url="&url.books.handbook;/userppp.html">
            разделу Руководства о PPP режима пользователя</ulink>.</para>

          <para>Если вы используете PPP режима ядра, или у вас
            Ethernet-подключение к Internet, то нужно использовать
            &man.natd.8;.  Пожалуйста, обратитесь к разделу о <ulink
            url="&url.books.handbook;/network-natd.html">natd</ulink>
            Руководства для получения вводной информации.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="slip-ppp-support">
          <para>Поддерживает ли FreeBSD протоколы SLIP и PPP?</para>
        </question>

        <answer>
          <para>Да.  Обратитесь к страницам справочника по командам
            &man.slattach.8;, &man.sliplogin.8;, &man.ppp.8;, и &man.pppd.8;.
            &man.ppp.8; и &man.pppd.8; могут обслуживать как входящие, так и
            исходящие соединения, когда как &man.sliplogin.8; имеет дело
            исключительно со входящими соединениям, а &man.slattach.8; только
            с исходящими.</para>

          <para>Более подробная информация об их использовании находится в
            <ulink url="&url.books.handbook;/ppp-and-slip.html">разделе
            Руководства о протоколах PPP и SLIP</ulink>.</para>

          <para>Если вы имеете доступ в Internet только через командную строку
            оболочки, вам может подойти пакадж <filename
            role="package">net/slirp</filename>.
            С его помощью можно получить (ограниченный) доступ к таким
            службам, как FTP и http прямо с вашей машины.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="natd">
          <para>Поддерживает ли FreeBSD технологию NAT или Masquerading?</para>
        </question>

        <answer>
          <para>Да.  Если вы собираетесь использовать NAT с пользовательским
            соединением PPP, пожалуйста, обратитесь к <ulink
            url="&url.books.handbook;/userppp.html">разделу Руководства о
            пользовательском PPP</ulink>.  Если же вы хотите использовать NAT
            вместе с другим типом сетевого подключения, пожалуйста, взгляните
            на раздел о <ulink url="&url.books.handbook;/network-natd.html">
            natd</ulink> Руководства.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="parallel-connect">
          <para>Как я могу соединить две FreeBSD системы с помощью
            параллельного соединения, используя PLIP?</para>
        </question>

        <answer>
          <para>Пожалуйста, обратитесь к разделу Руководства о <ulink
            url="&url.books.handbook;/network-plip.html">PLIP</ulink>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="create-dev-net">
          <para>Почему я не могу создать устройство
            <devicename>/dev/ed0</devicename>?</para>
        </question>

        <answer>
          <para>Дело в том, что такие устройства не нужны. В стандарте сетевого
            взаимодействия Беркли сетевые интерфейсы напрямую доступны только
            ядру.  За дополнительной информацией обратитесь к файлу
            <filename>/etc/rc.network</filename> и страницам справочника,
            описывающим различные сетевые программы, упоминаемые здесь.  Если
            всё это оставит вас в недоумении, почитайте книгу, описывающую
            администрирование сети в другой BSD-подобной операционной системе;
            с некоторыми незначительными исключениями, администрирование сети
            во FreeBSD в основном совпадает с &sunos; 4.0 и Ultrix.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="ethernet-aliases">
          <para>Как настроить алиас в сети Ethernet?</para>
        </question>

        <answer>
          <para>Если алиас находится в той же самой сети, что и уже
            настроенный на интерфейсе адрес, то добавьте в командной строке
            для &man.ifconfig.8; добавьте <literal>netmask 0xffffffff</literal>
            примерно следующим образом:</para>

          <screen>&prompt.root; <userinput>ifconfig ed0 alias 192.0.2.2 netmask 0xffffffff</userinput></screen>

          <para>В противном случае просто задайте сетевой адрес и маску обычным
            образом:</para>

          <screen>&prompt.root; <userinput>ifconfig ed0 alias 172.16.141.5 netmask 0xffffff00</userinput></screen>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="port-3c503">
    <para>Как заставить адаптер 3C503 использовать другой тип сетевого
      разъёма?</para>
  </question>

  <answer>
  <para>Если вы хотите задействовать другой разъём, то должны указать
    дополнительный параметр при вызове команды &man.ifconfig.8;.
    Разъёмом по умолчанию является <literal>link0</literal>.  Чтобы
    задействовать разъём AUI, а не BNC, используйте <literal>link2</literal>.
    Эти флаги должны быть указаны с помощью переменных ifconfig_*
    в файле <filename>/etc/rc.conf</filename> (посмотрите справку по
    &man.rc.conf.5;).</para>
  </answer>
</qandaentry>


      <qandaentry>
        <question id="nfs">
          <para>У меня проблемы при работе NFS во FreeBSD.</para>
        </question>

        <answer>
          <para>Некоторые сетевые адаптеры работают (мягко говоря) хуже, чем
            другие, что может иногда вызывать проблемы при работе приложений
            типа NFS, интенсивно использующих сеть.</para>

          <para>Подробности описаны в <ulink
            url="&url.books.handbook;/network-nfs.html">
            соответствующей главе</ulink> Руководства, посвящённой NFS.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="nfs-linux">
          <para>Почему я не могу смонтировать диск &linux; по NFS?</para>
        </question>

        <answer>
          <para>Некоторые версии NFS для &linux; поддерживают запросы на
            монтирование только с привилегированного порта; попробуйте</para>

          <screen>&prompt.root; <userinput>mount -o -P linuxbox:/blah /mnt</userinput></screen>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="nfs-sun">
          <para>Почему я не могу смонтировать диск Sun по NFS?</para>
        </question>

        <answer>
          <para>Рабочие станции &sun; под управлением &sunos; 4.X поддерживают
            запросы на монтирование только с привилегированного порта;
            попробуйте</para>

          <screen>&prompt.root; <userinput>mount -o -P sunbox:/blah /mnt</userinput></screen>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="exports-errors">
          <para>Почему <command>mountd</command> продолжает выдавать сообщения
            <errorname>can't change attributes</errorname> и <errorname>bad
            exports list</errorname> на моём сервере NFS, работающем под
            управлением FreeBSD?</para>
        </question>

        <answer>
          <para>В большинстве случаев проблема заключается в недостаточном
            понимании корректного формата файла
            <filename>/etc/exports</filename>.  Пожалуйста, просмотрите ещё раз
            справочную информацию по &man.exports.5; и раздел об <ulink
            url="&url.books.handbook;/network-nfs.html">NFS</ulink> в Руководстве,
            особенно в части <ulink
            url="&url.books.handbook;/network-nfs.html#CONFIGURING-NFS">настройки
            NFS</ulink>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="ppp-nextstep">
          <para>Проблемы при связи по PPP с машинами NeXTStep.</para>
        </question>

        <answer>
          <para>Попробуйте отменить все расширения TCP в файле
            <filename>/etc/rc.conf</filename> (посмотрите справку
            по &man.rc.conf.5;), изменив значение следующей переменной
            в NO:</para>

          <programlisting>tcp_extensions=NO</programlisting>

          <para>Маршрутизаторы Annex фирмы Xylogic не работают по этой же
            причине, поэтому при подключении к ним вам нужно проделать то же
            самое.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="ip-multicast">
          <para>Как включить поддержку multicast IP?</para>
        </question>

        <answer>
          <para>По умолчанию FreeBSD поддерживает работу с многоадресного
            сетевого вещания.  Если вы хотите использовать ваш компьютер как
            маршрутизатор многоадресного трафика, вам нужно перекомпилировать
            ядро с включенной опцией <literal>MROUTING</literal> и запустить
            &man.mrouted.8;.  Во FreeBSD во время загрузки будет запускаться
            &man.mrouted.8;, если переменная <literal>mrouted_enable</literal>
            в файле <filename>/etc/rc.conf</filename> установлена в
            значение <literal>YES</literal>.</para>

          <para>Приложения MBONE находятся в собственной категории портов,
            <ulink url="http://www.FreeBSD.org/ports/mbone.html">mbone</ulink>.
            Если вы ищете приложения для организации конференций
            <command>vic</command> и <command>vat</command>, посмотрите
            там!</para>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="dec-pci-chipset">
    <para>Какие сетевые адаптеры сделаны на наборе микросхем DEC PCI?</para>
  </question>

  <answer>

  <para>Вот список, составленный
    Гленом Фостером (Glen Foster) <email>gfoster@driver.nsta.org</email>,
    с некоторыми незначительными добавлениями:</para>

          <table>
            <title>Сетевые карты созданные на основе наборе микросхем
	      DEC PCI</title>

            <tgroup cols=2>
              <thead>
                <row>
                  <entry>Производитель</entry>
                  <entry>Модель</entry>
                </row>
              </thead>

              <tbody>
                <row>
                  <entry>ASUS</entry>
                  <entry>PCI-L101-TB</entry>
                </row>
                <row>
                  <entry>Accton</entry>
                  <entry>ENI1203</entry>
                </row>
                <row>
                  <entry>Cogent</entry>
                  <entry>EM960PCI</entry>
                </row>
                <row>
                  <entry>Compex</entry>
                  <entry>ENET32-PCI</entry>
                </row>
                <row>
                  <entry>D-Link</entry>
                  <entry>DE-530</entry>
                </row>
                <row>
                  <entry>Dayna</entry>
                  <entry>DP1203, DP2100</entry>
                </row>
                <row>
                  <entry>DEC</entry>
                  <entry>DE435, DE450</entry>
                </row>
                <row>
                  <entry>Danpex</entry>
                  <entry>EN-9400P3</entry>
                </row>
                <row>
                  <entry>JCIS</entry>
                  <entry>Condor JC1260</entry>
                </row>
                <row>
                  <entry>Linksys</entry>
                  <entry>EtherPCI</entry>
                </row>
                <row>
                  <entry>Mylex</entry>
                  <entry>LNP101</entry>
                </row>
                <row>
                  <entry>SMC</entry>
                  <entry>EtherPower 10/100 (Модель 9332)</entry>
                </row>
                <row>
                  <entry>SMC</entry>
                  <entry>EtherPower (Модель 8432)</entry>
                </row>
                <row>
                  <entry>TopWare</entry>
                  <entry>TE-3500P</entry>
                </row>
                <row>
                  <entry>Znyx (2.2.x)</entry>
                  <entry>ZX312, ZX314, ZX342, ZX345, ZX346, ZX348</entry>
                </row>
                <row>
                  <entry>Znyx (3.x)</entry>
                  <entry>ZX345Q, ZX346Q, ZX348Q, ZX412Q, ZX414, ZX442, ZX444,
                    ZX474, ZX478, ZX212, ZX214 (10mbps/hd)</entry>
                </row>
              </tbody>
            </tgroup>
          </table>
  </answer>
</qandaentry>

      <qandaentry>
        <question id="fqdn-hosts">
          <para>Почему я должен использовать FQDN для хостов не в моей
            сети?</para>
        </question>

        <answer>
          <para>Вы, наверное, обнаружили, что хост, к которому вы обратились,
            оказался на самом деле в другом домене; например, если вы
            находитесь в домене foo.example.org и хотите обратиться к хосту
            <hostid>mumble</hostid> в домене <hostid
            role="domainname">example.org</hostid>, то должны указать его
            полное доменное имя, <hostid
            role="domainname">mumble.example.org</hostid>, а не просто <hostid
            role="domainname">mumble</hostid>.</para>

          <para>Традиционно, это позволял делать резолвер BSD BIND.  Однако
            текущая версия <application>bind</application> (посмотрите справку
            по &man.named.8;), поставляемая с FreeBSD, больше не добавляет
            имена доменов, отличающихся от того, в котором вы находитесь, для
            не полностью указанных имён хостов.  Так что неполно указанный
            хост <hostid>mumble</hostid> будет найден либо как <hostid
            role="domainname">mumble.foo.example.org</hostid>, либо будет
            искаться в корневом домене.</para>

          <para>Это отличается от предыдущего поведения, при котором поиск
            продолжался в <hostid role="domainname">mumble.example.org</hostid>
            и <hostid role="domainname">mumble.edu</hostid>.  Посмотрите RFC
            1535 о причинах объявления такого поведения плохой практикой и
            даже ошибкой в безопасности.</para>

          <para>Как хорошее решение, вы можете поместить строку</para>

          <programlisting>search foo.example.org example.org</programlisting>

          <para>вместо ранее используемой</para>

          <programlisting>domain foo.example.org</programlisting>

          <para>в файл <filename>/etc/resolv.conf</filename> (посмотрите
            справку по &man.resolv.conf.5;).  Однако удостоверьтесь, что
            порядок поиска не нарушает <quote>границ полномочий между местным
            и внешним администрированием</quote>, как это названо в RFC
            1535.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="network-permission-denied">
          <para><errorname>Permission denied</errorname> для любых действий,
            связанных с работой сети.</para>
        </question>

        <answer>
          <para>Если вы компилировали ядро с опцией
            <literal>IPFIREWALL</literal>, имейте в виду, что политикой по
            умолчанию является запрет прохождения
            всех пакетов, которые явно не разрешены.</para>

          <para>Если вы случайно неверно отконфигурировали межсетевой экран,
            то для восстановления работоспособность сети дайте такую команду,
            войдя суперпользователем:</para>

          <screen>&prompt.root; <userinput>ipfw add 65534 allow all from any to any</userinput></screen>

          <para>Также вы можете задать
            <literal>firewall_type='open'</literal> в
            файле <filename>/etc/rc.conf</filename>.</para>

          <para>Более подробная информация о конфигурировании межсетевого
            экрана в FreeBSD находится в <ulink
            url="&url.books.handbook;/firewalls.html">соответствующей
	    главе</ulink> Руководства.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="ipfw-overhead">
          <para>Какую нагрузку вызывает использование IPFW?</para>
        </question>

        <answer>
          <para>Пожалуйста, обратитесь к разделу Руководства о <ulink
            url="&url.books.handbook;/firewalls.html">межсетевых
            экранах</ulink>, особенно в части, касающейся <ulink
            url="&url.books.handbook;/firewalls.html#IPFW-OVERHEAD">
            дополнительной нагрузки от IPFW и оптимизации</ulink>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="ipfw-fwd">
          <para>Почему моё правило <quote>fwd</quote> для
            <command>ipfw</command> по перенаправлению сервиса на другую
            машину не работает?</para>
        </question>

        <answer>
          <para>Возможно, потому что вы хотите выполнять трансляцию сетевых
            адресов (NAT), а не просто перенаправлять пакеты.  Правило
            <quote>fwd</quote> делает точно то, что означает; оно
            перенаправляет пакеты.  Данные внутри пакета оно не меняет.  Пусть,
            скажем, у нас имеется правило такого вида:</para>

          <screen>01000 fwd <replaceable>10.0.0.1</replaceable> from any to <replaceable>foo 21</replaceable></screen>

          <para>Когда пакет с адресом назначения <replaceable>foo</replaceable>
            достигает машины с этим правилом, то он перенаправляется на
            <replaceable>10.0.0.1</replaceable>, но в нём остаётся адрес
            назначения <replaceable>foo</replaceable>!  Адрес назначения
            пакета <emphasis>не</emphasis> меняется на
            <replaceable>10.0.0.1</replaceable>.  Большинство машин, скорее
            всего, отбросят полученный пакет, имеющий адрес назначения, им не
            соответствующий.  Таким образом, правило <quote>fwd</quote> не
            часто работает так, как ожидает пользователь.  Такое поведение
            является особенностью, а не ошибкой.</para>

          <para>Обратитесь к <link linkend="service-redirect">FAQ о
            перенаправлении сервисов</link>, руководству по &man.natd.8; или
            одной из нескольких утилит для перенаправления из <ulink
            url="&url.base;/ports/index.html">Коллекции Портов</ulink> для
            того, чтобы сделать это правильно.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="service-redirect">
          <para>Как можно перенаправить запросы с одной машины на другую?</para>
        </question>

        <answer>
          <para>Вы можете перенаправить запрос на FTP (или другой сервис) с
            помощью пакаджа <literal>socket</literal>, доступного в дереве
            портов в категории <quote>sysutils</quote>.  Просто замените
            командную строку запуска сервиса на вызов socket, типа:</para>

          <programlisting>ftp stream tcp nowait nobody /usr/local/bin/socket socket <replaceable>ftp.example.com</replaceable> <replaceable>ftp</replaceable></programlisting>

          <para>где <replaceable>ftp.example.com</replaceable> и
            <replaceable>ftp</replaceable> являются соответственно хостом и
            портом для перенаправления.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="bandwidth-mgr-tool">
          <para>Где можно найти средства управления сетевым трафиком?</para>
        </question>

        <answer>
          <para>Для FreeBSD имеются три средства управления трафиком.
            &man.dummynet.4; интегрирован в систему FreeBSD как составная
            часть &man.ipfw.4;.  <ulink
            url="http://www.csl.sony.co.jp/person/kjc/programs.html">
            ALTQ</ulink> для FreeBSD 4.X распространяется свободно и был
            включен во FreeBSD 5.X как составная часть &man.pf.4;.
            Bandwidth Manager компании <ulink
            url="http://www.etinc.com/">Emerging Technologies</ulink>
            является коммерческим продуктом.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="bpf-not-configured">
          <para>Почему появляются сообщения
            <errorname>/dev/bpf0: device not configured</errorname>?</para>
        </question>

        <answer>
          <para>Вы запускаете программу, которой требуется Berkeley Packet
            Filter (&man.bpf.4;), однако его нет в вашем ядре.
            Перекомпилируйте ядро, добавив в его конфигурационный файл
            следующую строку:</para>

          <programlisting>pseudo-device bpf	# Berkeley Packet Filter</programlisting>

          <para>Для FreeBSD 4.X и более ранних версий вы должны также создать
            файл устройства.  После перезагрузки системы перейдите в каталог
            <filename>/dev</filename> и выполните команду:</para>

          <screen>&prompt.root; <userinput>sh MAKEDEV bpf0</userinput></screen>

          <para>Обратитесь к разделу Руководства, посвящённому <ulink
            url="&url.books.handbook;/kernelconfig-nodes.html">созданию файлов
            устройств</ulink> за подробной информацией по управлению
            устройствами.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="mount-smb-share">
          <para>Как смонтировать диск &windows;-машины в моей локальной сети,
            как это делает smbmount в &linux;?</para>
        </question>

        <answer>
          <para>Используйте пакет <application>SMBFS</application>.  В него
            включён набор изменений в ядре и пользовательские программы.
            Программы и информация доступны в виде порта <filename
            role="package">net/smbfs</filename> из Коллекции Портов или как
            часть базовой системы в 4.5-RELEASE и более поздних версиях.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="icmp-response-bw-limit">
          <para>Что значат эти сообщения <quote>icmp-response bandwidth limit
            300/200 pps</quote> в моих журнальных файлах?</para>
        </question>

        <answer>
          <para>Это ядро сообщает вам, что имела место некоторая активность,
            приводящая к посылке большего количества ответных пакетов ICMP или
            сбросов TCP (RST), чем, как предполагается, это следует делать.
            Ответы ICMP часто генерируются в результате попыток подключения к
            незанятым портам UDP.  Сбросы TCP генерируются в результате попыток
            подключения к закрытым портам TCP.  Кроме всяких прочих, такие
            сообщения могут быть вызваны следующими действиями:</para>

          <itemizedlist>
            <listitem>
              <para>Лобовая атака типа отказ в обслуживании DoS (в отличие от
                атак в один пакет, которые используют конкретную брешь в
                защите).</para>
            </listitem>

            <listitem>
              <para>Сканирование портов в попытке осуществить подключение к
                большому количеству портов (в отличие от проб нескольких
                известных портов).</para>
            </listitem>
          </itemizedlist>

          <para>Первое число в сообщении указывает вам, какое количество пакетов
            ядро посылало бы при отсутствии ограничений, а второе число
            указывает лимит.  Вы можете управлять этим ограничением при помощи
            системной переменной <varname>net.inet.icmp.icmplim</varname>
            приводимым ниже способом, где <literal>300</literal> является
            ограничением на количество посылаемых пакетов в секунду:</para>

          <screen>&prompt.root; <userinput>sysctl -w net.inet.icmp.icmplim=300</userinput></screen>

          <para>Если вы не хотите видеть подобные сообщения в журнальных
            файлах, но хотите использовать это ограничение в ядре, то можете
            использовать системную переменную
            <varname>net.inet.icmp.icmplim_output</varname> для подавления
            вывода, как это показано здесь:</para>

          <screen>&prompt.root; <userinput>sysctl -w net.inet.icmp.icmplim_output=0</userinput></screen>

          <para>И наконец, если вы хотите выключить это ограничение, то можете
            установить значение системной переменной
            <varname>net.inet.icmp.icmplim</varname> (смотрите пример выше)
            равным <literal>0</literal>.  Выключение этого лимита не
            приветствуется по причинам, перечисленным выше.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="unknown-hw-addr-format">
          <para>Что это за сообщения <errorname>arp: unknown hardware
            address format</errorname>?</para>
        </question>

        <answer>
          <para>Это означает, что какое-то устройство в вашей локальной сети
            использует MAC-адрес в формате, не распознаваемом FreeBSD.  Скорее
            всего, это происходит из-за того, что кто-то в сети
            экспериментирует с сетевым адаптером.  Чаще всего это происходит
            в сетях с кабельными модемами.  Это безобидно и не должно влиять на
            производительность машины с FreeBSD.</para>
        </answer>
      </qandaentry>


      <qandaentry>
  	<question id="cvsup-missing-libs">
	  <para>Я только что установил CVSup, но при попытке его запустить
            получил сообщения об ошибках.  Что не так?</para>
	</question>

	<answer>
	  <para>Сначала посмотрите, есть ли среди получаемых вами сообщений
            то, что показано ниже.</para>

	  <programlisting>/usr/libexec/ld-elf.so.1: Shared object "libXaw.so.6" not found</programlisting>

	  <para>Ошибки, подобные этой, возникают при установке порта
 	    <filename role="package">net/cvsup</filename> на машину без
            пакета <application>&xfree86;</application>.  Если вы хотите
            использовать <acronym>GUI</acronym>, имеющийся в
            <application>CVSup</application>, то вам нужно теперь установить
	    <application>&xfree86;</application>.  Либо, если вы хотите
            использовать <application>CVSup</application> только из командной
            строки, то вы должны удалить ранее установленный пакадж.  Затем
            установите порт <filename
	    role="package">net/cvsup-without-gui</filename>.  Более подробно
            это описано в <ulink
            url="http://www.FreeBSD.org/doc/ru_RU.KOI8-R/books/handbook/cvsup.html">
            разделе о CVSup</ulink> Руководства.</para>
	</answer>
      </qandaentry>
    </qandaset>
  </chapter>


  <chapter id="security">
    <title>Безопасность</title>

    <qandaset>
      <qandaentry>
        <question id="sandbox">
          <para>Что означает термин sandbox (песочница)?</para>
        </question>

        <answer>
          <para><quote>Sandbox</quote> - это термин, используемый при
            обеспечении безопасности.  Он имеет два значения:</para>

          <itemizedlist>
            <listitem>
              <para>Процесс, помещённый внутрь некоторых виртуальных стен,
                которые предназначены для того, чтобы предотвратить взлом всей
                системы в результате взлома этого конкретного процесса.</para>

              <para>Говорится, что процесс может <quote>играть</quote> в
                границах этих стен.  Что бы этот процесс ни делал, он эти стены
                разрушить не может, поэтому вам не нужен его особый аудит,
                чтобы с уверенностью сказать, насколько его работа безопасна
                для системы.</para>

              <para>Стеной может служить, например, идентификатор пользователя.
                Вот определение, даваемое на страницах справочной системы
                &man.security.7; и &man.named.8;.</para>

              <para>Рассмотрим, например, службу <literal>ntalk</literal>
                (смотрите <filename>/etc/inetd.conf</filename>).  Раньше эта
                служба запускалась с идентификатором пользователя
                <username>root</username>, а сейчас - <username>tty</username>.
                Пользователь <username>tty</username> - это та песочница,
                которая осложняет взлом системы через <literal>ntalk</literal>
                посредством использования этого идентификатора
                пользователя.</para>
            </listitem>

            <listitem>
              <para>Процесс, помещённый внутрь симулируемой машины.  Это даёт
                больший уровень безопасности.  В общем это означает, что
                некто, взломавший процесс, может думать. что может сломать и
                систему в целом, однако фактически может сломать только
                симулятор этой машины и не может модифицировать никаких
                реальных данных.</para>

              <para>Самым распространённым способом достигнуть такого
                результата является построение имитирующего окружения в
                каталоге и затем запуск процессов в этом каталоге через
                chroot (т.е. задав этот каталог в качестве
                <filename>/</filename> для этого процесса,
                а не реальный <filename>/</filename> всей системы).</para>

              <para>Другим часто используемым методом является монтирование
                низлежащей файловой системы в режиме "только для чтения" и
                затем создание уровня файловой системы поверх неё, что даёт
                процессу видимость доступа по записи на ту файловую систему.
                Процесс будет полагать, что может записывать в те файлы, но
                это будет единственный процесс, который увидит результат
                - другие процессы не будут этого делать, ни в коем
                случае.</para>

              <para>Попытка сделать такой тип песочницы настолько прозрачна, что
                пользователь (или взломщик) даже не поймёт, что он в ней
                находится.</para>
            </listitem>
          </itemizedlist>

          <para>В &unix; реализованы два типа <quote>песочниц</quote>.  Один на
            уровне процесса, и один на уровне идентификаторов
            пользователей.</para>

          <para>Каждый процесс в &unix; полностью защищён от других процессов.
            Никакой процесс не может модифицировать адресное пространство
            другого процесса.  Это отличается от &windows;, где процесс может
            легко записать что-либо в адресное пространство другого процесса,
            что приводит к аварийным ситуациям.</para>

          <para>В &unix; каждым процессом владеет некоторый идентификатор
            пользователя.  Если этот пользователь не
            <username>root</username>, он ограждает процесс от других,
            владельцами которых являются другие пользователи.  Этот
            идентификатор используется также для защиты данных на диске.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="securelevel">
          <para>Что такое уровень защиты (securelevel)?</para>
        </question>

        <answer>
          <para>Уровень защиты является механизмом обеспечения безопасности,
            реализованным в ядре.  В общем, когда уровень защиты больше нуля,
            ядро ограничивает выполнение некоторых операций; даже
            администратору (то есть пользователю <username>root</username>)
            запрещается их выполнять.  На момент написания этого текста
            механизм уровня защиты может, кроме всего прочего, ограничивать
            возможности по</para>

          <itemizedlist>
            <listitem>
              <para>снятию некоторых флагов с файлов, таких, как
                <literal>schg</literal> (системный флаг неизменяемости),</para>
            </listitem>

            <listitem>
              <para>записи в память ядра через устройства
                <devicename>/dev/mem</devicename> и
                <devicename>/dev/kmem</devicename>,</para>
            </listitem>

            <listitem>
              <para>загрузке модулей ядра и</para>
            </listitem>

            <listitem>
              <para>изменению правил сетевого экрана.</para>
            </listitem>
          </itemizedlist>

          <para>Для выяснения состояния уровня защиты в работающей системе
            просто выполните следующую команду:</para>

          <screen>&prompt.root; <userinput>sysctl kern.securelevel</userinput></screen>

          <para>Результат будет содержать название &man.sysctl.8;-переменной (в
            нашем случае это <varname>kern.securelevel</varname>) и число.
            Последнее и является текущим значением уровня защиты.  Если оно
            положительно (то есть больше нуля), то по крайней мере некоторые
            из защит этого механизма включены.</para>

          <para>Вы не можете понизить уровень защиты работающей системы;
            возможность сделать это противоречит назначению этого механизма.
            Если вам нужно выполнить работу, которая требует не положительный
            уровень защиты (к примеру, выполнение
            <maketarget>installworld</maketarget> или смена даты),
            вам потребуется изменить настройки уровня защиты системы в файле
            <filename>/etc/rc.conf</filename> (вам нужно обратить внимание на
            переменные <varname>kern_securelevel</varname> и
            <varname>kern_securelevel_enable</varname>) и перезагрузить
            систему.</para>

          <para>Более подробная информация об уровнях защиты и о том, какие
            специфические действия выполняют все уровни, может быть найдена на
            справочных страницах о &man.init.8;.</para>

          <warning>
            <para>Уровень защиты не является панацеей; в нём есть много
              недостатков.  Зачастую он даёт обманчивое чувство
              безопасности.</para>

            <para>Одной из самых больших проблем является то, что для его
              эффективной работы все файлы, используемые в процессе загрузки,
              должны быть защищены.  Если атакующий сможет заставить систему
              выполнять свой код до установки уровня защиты (что происходит
              достаточно поздно во время процесса загрузки, так как некоторые
              вещи, выполняемые системой в это время, не могут быть сделаны при
              повышенном уровне защиты), то эта защита может быть отключена.
              Хотя такая задача по защите всех файлов, используемых в процессе
              загрузки, технически вполне осуществима, если это будет сделано,
              то поддержка системы станет кошмаром, так как для изменения
              конфигурационного файла придётся останавливать систему,
              переводя её по крайней мере в однопользовательский режим.</para>

            <para>Это обстоятельство, а также ряд других, часто обсуждаются в
              списках рассылки, в частности, во &a.security;.  Пожалуйста,
              поищите в <ulink url="&url.base;/search/index.html">
              архивах</ulink> более подробное обсуждение.  Некоторые надеются,
              что механизм уровней защиты вскоре отомрёт, а на его смену придёт
              более гибкий механизм, но пока всё это туманно.</para>

            <para>Считайте себя предупреждёнными.</para>
          </warning>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="extra-named-port">
          <para>BIND (<command>named</command>) работает на порту 53 и на
            одном из портов с большим номером.  Что происходит?</para>
        </question>

        <answer>
          <para>Для исходящих запросов BIND использует случайно
            выбираемый порт с большим номером.  Если для исходящих запросов вы
            хотите использовать порт с номером 53 для работы за межсетевым
            экраном либо просто для собственного спокойствия, то можете
            попробовать настроить файл
            <filename>/etc/namedb/named.conf</filename> следующим
            образом:</para>

          <programlisting>options {
        query-source address * port 53;
};</programlisting>

          <para>Можете заменить символ <literal>*</literal> некоторым
            IP-адресом, если хотите настроить все еще жестче.</para>

          <para>Кстати, поздравляем.  Прекрасно, что вы читаете вывод команды
            &man.sockstat.1; и обращаете внимание на аномалии!</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="sendmail-port-587">
          <para>Sendmail ждёт соединений как на стандартном порту 25, так и на
            порту 587!  Что происходит?</para>
        </question>

        <answer>
          <para>Последние версии Sendmail поддерживают
            механизм посылки почты, который работает по порту 587.  Эта
            возможность пока широко не используется, но ее популярность
            растет.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="toor-account">
          <para>Что это за пользователь <username>toor</username> с UID 0?  Я
            подвергся взлому?</para>
        </question>

        <answer>
          <para>Не волнуйтесь, <username>toor</username> является
            <quote>альтернативным</quote> административным пользователем
            (toor - это root, записанный задом наперед).  Раньше он создавался
            при установке командного интерпретатора &man.bash.1;, однако
            теперь он создается по умолчанию.  Его предполагается использовать
            с нестандартным командным интерпретатором, так чтобы вам не нужно
            было менять используемый по умолчанию командный процессор для
            пользователя <username>root</username>.  Это важно, так как
            оболочки, не являющиеся частью дистрибутива системы (например,
            командный процессор, устанавливаемый из портов или пакаджей),
            скорее всего, устанавливаются в каталог
            <filename>/usr/local/bin</filename>, который по умолчанию
            располагается в другой файловой системе.  Если командный процессор
            для пользователя <username>root</username>
            располагается в <filename>/usr/local/bin</filename>, и
            <filename>/usr</filename> (или другая файловая система, содержащая
            <filename>/usr/local/bin</filename>) по какой-либо причине не
            смонтирована, то <username>root</username> не сможет войти в
            систему для исправления этой проблемы (хотя если вы перезагрузите
            систему в однопользовательский режим, вы сможете указать командный
            процессор).</para>

          <para>Некоторые используют <username>toor</username> для выполнения
            повседневных административных работ с нестандартным командным
            процессором, оставляя <username>root</username> со стандартной
            оболочкой для работы в однопользовательском режиме или выполнения
            аварийных работ.  По умолчанию вы не сможете войти в систему как
            пользователь <username>toor</username>, потому что у него нет
            пароля, так что, если вы хотите его использовать,
            зарегистрируйтесь в системе как <username>root</username> и задайте
            пароль для пользователя <username>toor</username>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="suidperl">
          <para>Почему <command>suidperl</command> работает неправильно?</para>
        </question>

        <answer>
          <para>В целях обеспечения безопасности <command>suidperl</command> по
            умолчанию устанавливается без suid-бита.  Системный администратор
            может включить использование suid-бита следующей командой.</para>

          <screen>&prompt.root; <userinput>chmod u+s /usr/bin/suidperl</userinput></screen>

          <para>Если вы хотите, чтобы suid-бит для <command>suidperl</command>
            было установлен во время обновления из исходных текстов,
            отредактируйте <filename>/etc/make.conf</filename>, добавив
            <varname>ENABLE_SUIDPERL=true</varname> перед запуском
            <command>make buildworld</command>.</para>
        </answer>
      </qandaentry>
    </qandaset>
  </chapter>


  <chapter id="ppp">
    <title>PPP</title>

<qandaset>
<qandaentry>
  <question id="userppp">
    <para>Не могу заставить работать ppp. Что я делаю не так?</para>
  </question>

  <answer>
  <para>Первым делом прочтите страницы справочника, посвящённые &man.ppp.8;, а
    также соответствующий <ulink
    url="&url.books.handbook;/ppp-and-slip.html#USERPPP">раздел</ulink>
     Руководства.  Включите протоколирование командой</para>

  <programlisting>set log Phase Chat Connect Carrier lcp ipcp ccp command</programlisting>

  <para>Эта команда может быть набрана в командной строке
    &man.ppp.8; или она может находиться в конфигурационном
    файле <filename>/etc/ppp/ppp.conf</filename> (начало секции
    <literal>default</literal> - лучшее для неё место.  Удостоверьтесь, что
    файл <filename>/etc/syslog.conf</filename> (посмотрите справку по
    &man.syslog.conf.5;) содержит строки</para>

  <programlisting>
!ppp
*.*    /var/log/ppp.log
  </programlisting>

  <para>и файл <filename>/var/log/ppp.log</filename> существует. Теперь вы
    сможете найти полную информацию о происходящем в файле протокола. Не
    беспокойтесь, если не всё вам будет там понятно.  Если вы будете
    пользоваться чьей-то помощью, протокол вам пригодится.</para>
  </answer>
</qandaentry>


      <qandaentry>
        <question id="ppp-hangs">
          <para>Ppp просто зависает, когда я его запускаю</para>
        </question>

        <answer>
          <para>Обычно это происходит, когда не может быть определено имя
            вашего хоста.  Наилучший способ исправить это - удостовериться,
            что файл <filename>/etc/hosts</filename> используется вашим
            резолвером.  Отредактируйте файл
            <filename>/etc/host.conf</filename>, поместив
            на первое место строчку <literal>hosts</literal>.  Затем просто
            добавьте записи о вашей машине в файл
            <filename>/etc/hosts</filename>.  Если у вас нет локальной
            сети, измените строку <hostid>localhost</hostid>:</para>

          <programlisting>127.0.0.1        foo.example.com foo localhost</programlisting>

          <para>В противном случае просто добавьте ещё одну запись о вашем
            хосте.  Обратитесь к соответствующим страницам справочника за
            подробным описанием.</para>

          <para>Если вы выполнили эти указания, вы сможете успешно выполнить
            команду <command>ping -c1 `hostname`</command>.</para>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="ppp-nodial-auto">
    <para>Ppp не звонит в режиме -auto</para>
  </question>

  <answer>

  <para>Во-первых, проверьте, что у вас есть маршрут по умолчанию.  Выполнив
    команду <command>netstat -rn</command> (посмотрите справку по
    &man.netstat.1;), вы должны увидеть две строки такого вида:</para>

  <programlisting>
Destination        Gateway            Flags     Refs     Use     Netif Expire
default            10.0.0.2           UGSc        0        0      tun0
10.0.0.2           10.0.0.1           UH          0        0      tun0
  </programlisting>

  <para>Здесь предполагается, что вы использовали адреса,
    приведённые в Руководстве, Справочнике или файле
    ppp.conf.sample. Если у вас нет маршрута по умолчанию, это
    может быть из-за использования старой версии &man.ppp.8;, которая не
    понимает слова <literal>HISADDR</literal> в файле
    ppp.conf.</para>

  <para>Другая причина отсутствия маршрута по умолчанию может крыться в том,
    что вы ошибочно установили маршрут по умолчанию в вашем файле
    <filename>/etc/rc.conf</filename> (посмотрите справку по &man.rc.conf.5;),
    и пропустили строку</para>

  <programlisting>
delete ALL
  </programlisting>

  <para>в <filename>ppp.conf</filename>.  В таком случае обратитесь к
    соответствующему <ulink
    url="&url.books.handbook;/ppp-and-slip.html#USERPPP-FINAL">разделу</ulink>
    Руководства.</para>

  </answer>
</qandaentry>


<qandaentry>
  <question id="no-route-to-host">
    <para>Что означает сообщение <errorname>No route to host</errorname>?</para>
  </question>

  <answer>

  <para>Эта ошибка появляется из-за отсутствующего раздела</para>

  <programlisting>
MYADDR:
  delete ALL
  add 0 0 HISADDR
  </programlisting>

  <para>в файле <filename>/etc/ppp/ppp.linkup</filename>. Он необходим, если ваш
    IP адрес выделяется динамически или адрес маршрутизатора вам не
    известен.  Если вы используете интерактивный
    режим, вы можете набрать следующие команды после входа в
    <literal>пакетный режим</literal> (пакетный режим
    идентифицируется заглавными буквами <acronym>PPP</acronym> в
    приглашении):</para>

  <programlisting>
delete ALL
add 0 0 HISADDR
  </programlisting>

  <para>Обратитесь к разделу <ulink
    url="&url.books.handbook;/ppp-and-slip.html#USERPPP-DYNAMICIP">PPP и
    динамические IP адреса</ulink> Руководства за подробной информацией.</para>

  </answer>
</qandaentry>


<qandaentry>
  <question id="connection-threeminutedrop">
    <para>Соединение разрывается через 3 минуты</para>
  </question>

  <answer>

  <para>Таймаут для PPP по умолчанию равен 3 минутам.  Это может быть
    изменено строкой</para>

  <programlisting>
set timeout <replaceable>NNN</replaceable>
  </programlisting>

  <para>где <replaceable>NNN</replaceable> - время неактивности в секундах,
    после которого соединение закрывается.  Если <replaceable>NNN</replaceable>
    равно нулю, соединение никогда не разрывается по таймауту.  Эту команду
    можно поместить в файл <filename>ppp.conf</filename> или набрать ее в
    интерактивном режиме.  Изменение этого параметра также возможно при
    активном соединении, если подключиться к сокету
    <application>ppp</application> сервера с помощью программ
    &man.telnet.1; или &man.pppctl.8;.  Обратитесь к страницам Справочника,
    посвящённым &man.ppp.8;.</para>

  </answer>
</qandaentry>


<qandaentry>
  <question id="ppp-drop-heavy-load">
    <para>Соединение разрывается при большой нагрузке</para>
  </question>

  <answer>

  <para>Если у вас включен Link Quality Reporting (LQR), возможно,
    что слишком много пакетов LQR теряется в канале.  Ppp делает вывод,
    что канал плох, и разрывает соединение. В FreeBSD до версии 2.2.5
    LQR было включено по умолчанию.  Сейчас оно по умолчанию выключено.
    LQR можно выключить строкой</para>

  <programlisting>
disable lqr
  </programlisting>

  </answer>
</qandaentry>


<qandaentry>
  <question id="ppp-drop-random">
    <para>Соединение разрывается в случайные промежутки времени</para>
  </question>

  <answer>

  <para>Иногда, на шумной линии или даже на линии с включенным режимом
    ожидания звонка, ваш модем может вешать трубку, думая (совершенно
    напрасно), что потерял несущую.</para>

  <para>В большинстве модемов есть параметр, определяющий чувствительность
    к временной потере несущей.  Например, в модеме USR &sportster;,
    это определяется значением регистра S10 в десятых долях секунды.
    Чтобы сделать связь более устойчивой, добавьте следующую
    последовательность посылок-ожиданий в строку набора:</para>

  <programlisting>
set dial "...... ATS10=10 OK ......"
  </programlisting>

  <para>Обратитесь к руководству по вашему модему.</para>

  </answer>
</qandaentry>


      <qandaentry>
        <question id="ppp-hangs-random">
          <para>Соединение часто рвётся в случайные промежутки времени</para>
        </question>

        <answer>
          <para>Многие сообщают об обрывах соединений без видимой причины.
            Первым делом нужно выяснить, с какой стороны соединения рвётся
            связь.</para>

          <para>Если вы используете внешний модем, можете просто попробовать
            использовать утилиту &man.ping.8; и посмотреть, мигает ли
            индикатор <acronym>TD</acronym> при передаче данных.  Если он
            мигает (а индикатор <acronym>RD</acronym> нет), проблема с той
            стороны.  Если индикатор <acronym>TD</acronym> не загорается,
            проблема с вашей стороны.  При использовании внутреннего модема
            вам необходимо воспользоваться командой <literal>set
            server</literal>, указав её в файле <filename>ppp.conf</filename>.
            Когда произойдёт обрыв связи, подключитесь к &man.ppp.8; с
            помощью &man.pppctl.8;.  Если ваше сетевое подключение
            неожиданно восстановится (PPP оживает при проявлении активности на
            диагностическом сокете) или или если вы не сможете соединиться
            (здесь мы полагаем, что команда <literal>set socket</literal> в
            начальный момент была выполнена успешно), то проблема имеет
            локальный характер.  Если вы сможете подключиться, но связи всё
            равно нет, включите вывод отладочной информации командой
            <literal>set log local async</literal> и запустите
            <command>ping</command> из другого окна или терминала, чтобы
            проверить связь.  В отладочном выводе будут показаны данные,
            передаваемые и получаемые из канала связи.  Если данные посылаются,
            но не принимаются обратно, проблема с противоположной
            стороны.</para>

          <para>Выяснив, является эта проблема локальной или удалённой системы,
            вы имеете два варианта действий:</para>

	  <itemizedlist>
	    <listitem>
	      <para>Если проблема на удалённой машине, то прочтите <xref
	          linkend="ppp-remote-not-responding">.</para>
	    </listitem>

	    <listitem>
	      <para>Если проблема с вашей стороны, прочтите <xref
	          linkend="ppp-hung">.</para>
	    </listitem>
	  </itemizedlist>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="ppp-remote-not-responding">
    <para>Удалённая система не отвечает</para>
  </question>

  <answer>

  <para>Здесь вы мало что можете сделать.  Большинство провайдеров
    отказываются оказать помощь, если вы используете ОС не от Microsoft.
    Вы можете добавить команду <literal>enable lqr</literal> в ваш
    <filename>ppp.conf</filename>, что позволит &man.ppp.8; отследить ошибки в
    удалённой системе и закрывать соединение, однако такое обнаружение
    достаточно медленно и поэтому
    не так уж полезно.  Вы можете также просто не сообщать своему
    провайдеру, что запускаете user-PPP....</para>

  <para>Первым делом попробуйте отключить всю местную компрессию,
    указав в конфигурационном файле следующее:</para>

  <programlisting>
disable pred1 deflate deflate24 protocomp acfcomp shortseq vj
deny pred1 deflate deflate24 protocomp acfcomp shortseq vj
  </programlisting>

  <para>Теперь попробуйте установить соединение ещё раз и удостовериться,
    что ситуация не изменилась.  Если качество соединения улучшилось
    или проблема оказалась полностью решённой, выясните, настройка
    чего приводила к проблемам методом проб и ошибок.  Это даст вам
    дополнительную защиту, когда вы будете разговаривать с вашим
    провайдером (хотя при этом может обнаружиться, что вы работаете
    не с продуктом Microsoft). </para>

  <para>Перед тем, как звонить провайдеру, включите вывод отладочной
    информации, как вы это делали ранее и подождите, пока соединение
    снова не прервётся.  Правда, для этого требуется некоторое
    дисковое пространство.  Интерес могут представлять последние
    прочитанные из порта данные.  Обычно это данные в формате ascii
    и они могут даже содержать описание проблемы (<quote>Memory fault,
    core dumped</quote> ?).</para>

  <para>Если ваш провайдер согласен помочь вам, нужно будет включить
    режим отладки с их стороны, а потом, когда связь прервётся в
    следующий раз, они могут сказать вам, почему возникли проблемы
    с их стороны.  Будет хорошо, если вы пришлёте детальное описание
    на адрес &a.brian;, или даже попросите провайдера связаться
    со мной напрямую.</para>

  </answer>
</qandaentry>


      <qandaentry>
        <question id="ppp-hung">
          <para>Ppp зависает</para>
        </question>

        <answer>
          <para>Лучше всего в этом случае перекомпилировать &man.ppp.8;,
            добавив параметры <literal>CFLAGS+=-g</literal> и
            <literal>STRIP=</literal> в конец Makefile, а затем выполнить
            команду <command>make clean &amp;&amp; make &amp;&amp; make
            install</command>.  Когда &man.ppp.8; зависнет, найдите
            идентификатор процесса &man.ppp.8; с помощью команды <command>ps
            ajxww | fgrep ppp</command> и выполните команду <command>gdb
            ppp <replaceable>PID</replaceable></command>.  Затем в приглашении
            gdb вы можете использовать команду <command>bt</command> для
            получения стека вызовов.</para>

          <para>Пошлите результат на адрес &a.brian;.</para>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="ppp-loginok-thennothing">
    <para>Ничего не происходит после сообщения Login OK!</para>
  </question>

  <answer>

  <para>До версии FreeBSD 2.2.5, как только связь устанавливалась, &man.ppp.8;
    ожидал начала согласования Line Control Protocol
    (LCP) с противоположной стороны.  Многие провайдеры Internet не
    начинают согласования и предполагают, что это сделает клиент.
    Чтобы заставить &man.ppp.8; инициировать согласование
    параметров LCP, используйте следующую строку:</para>

  <programlisting>
set openmode active
  </programlisting>

    <note>
      <para>Ничего страшного не произойдёт, если согласование начнут обе
        стороны, поэтому режим инициирования сейчас по умолчанию активный.
        Однако, в следующем разделе описывается ситуация, когда это
        <emphasis>приводит</emphasis> к некоторым неприятностям.</para>
    </note>
  </answer>
</qandaentry>


<qandaentry>
  <question id="ppp-same-magic">
    <para>В протоколе есть сообщения о том, что <quote>magic being the
      same</quote>.</para>
  </question>

  <answer>

  <para>Иногда, сразу же после установления соединения, вы можете увидеть
    сообщения в протоколе, говорящие что <quote>magic is the same</quote>.
    Иногда эти сообщения проходят безболезненно, а иногда одна из сторон
    прекращает работу.  Большинство реализаций PPP не может справиться с
    такой ситуацией, и, даже когда связь выглядит установившейся, вы
    будете видеть только бесконечно повторяющиеся конфигурационные
    запросы и подтверждения в файле протокола до тех пор, пока &man.ppp.8;
    окончательно не закроет соединение.</para>

  <para>Обычно это происходит на серверах с медленными дисками, на
    которых порт обслуживает программа getty, а &man.ppp.8; выполняется из
    сценария регистрации или другой программы после регистрации
    пользователя.  Были сообщения, что такое случается постоянно при
    использовании slirp.  Причина заключается в том, что во время,
    проходящее между завершением работы &man.getty.8; и запуском &man.ppp.8;,
    &man.ppp.8; со стороны клиента начинает посылать пакеты Line Control
    Protocol (LCP).  Так как режим эха остаётся всё ещё включенным, &man.ppp.8;
    клиента получает <quote>отражения</quote> своих запросов.</para>

  <para>Частью процесса согласования параметров LCP является определение
    <quote>магического</quote> числа для каждой стороны соединения для
    обнаружения <quote>отражений</quote>.  Согласно спецификации, когда одна
    сторона пытается использовать совпадающее "магическое" число, должен быть
    послан ответ
    NAK и должно быть выбрано новое "магическое" число.  В тот момент,
    когда на порту сервера включен режим эха, клиент &man.ppp.8; посылает
    пакеты LCP, получает то же самое "магическое" число в отражённом пакете и
    отвечает на него NAK.  Он также видит отражённый NAK (который также
    означает, что &man.ppp.8; должен изменить своё "магическое" число).  В
    потенциале это может вызвать появление огромного количества процессов
    смен "магических" чисел, и все они накапливаются в буфере терминала.
    Как только запустится сервер &man.ppp.8;, он будет перегружен запросами на
    смену "магических", немедленно решит, что этого много для согласования
    LCP и прервёт соединение.  В то же самое время, клиент, который больше
    не видит отражений, останавливается для того, чтобы увидеть, что
    сервер закрыл соединение.</para>

  <para>Этого можно избежать, позволив начинать согласование
    противоположной стороне следующей строкой в файле ppp.conf:</para>

  <programlisting>
set openmode passive
  </programlisting>

  <para>Это заставит &man.ppp.8; ожидать начала согласования LCP.  Некоторые
    серверы, однако, могут никогда не начать согласование.  Если это тот
    самый случай, вы можете сделать следующее:</para>

  <programlisting>
set openmode active 3
  </programlisting>

  <para>Это заставит &man.ppp.8; пассивно ждать 3 секунды, и только затем
    посылать запросы LCP.  Если противоположная сторона начнёт посылать в этот
    момент запросы, &man.ppp.8; немедленно ответит, не ожидая истечения
    трёхсекундного интервала.</para>

  </answer>
</qandaentry>


<qandaentry>
  <question id="ppp-lcp-constant">
    <para>Согласование LCP продолжается, пока не закроется соединение</para>
  </question>

  <answer>
  <para>В настоящий момент одной из неприятных особенностей реализации
    &man.ppp.8; является то, что она не
    связывает сообщения LCP, CCP &amp; IPCP с запросами.  Как результат, если
    реализация PPP с одной стороны более чем на
    6 секунд медленнее, чем с другой, противоположная сторона будет посылать
    два дополнительных запроса на согласование параметров LCP.
    Это фатально.</para>

  <para>Предположим, что у нас работают две реализации, на машинах
    <hostid>A</hostid> и <hostid>B</hostid>.  <hostid>A</hostid> начинает
    посылать запросы LCP сразу же после соединения, а
    <hostid>B</hostid> требуется 7 секунд для запуска.  Когда
    <hostid>B</hostid> запускается, <hostid>A</hostid> послало 3 LCP-запроса.
    Полагаем, что режим эха выключен, в противном случае мы столкнулись бы с
    проблемами "магического" числа, описанными в предыдущем разделе.
    <hostid>B</hostid> посылает REQ, затем ACK на первый REQ от
    <hostid>A</hostid>.  Это приводит к тому, что <hostid>A</hostid> входит
    в состояние <acronym>OPENED</acronym> и посылает (первый) ACK обратно
    <hostid>B</hostid>.  В то же самое время <hostid>B</hostid> посылает
    обратно ещё два ACK в ответ на два дополнительных REQ, посланные
    <hostid>A</hostid> до старта <hostid>B</hostid>.  <hostid>B</hostid>
    затем получает первый ACK от <hostid>A</hostid> и возвращается в состояние
    <acronym>REQ-SENT</acronym>, послав ещё один (четвёртый) REQ согласно RFC.
    Затем он получает третий ACK и входит в состояние
    <acronym>OPENED</acronym>.  В это же время <hostid>B</hostid> принимает
    четвёртый REQ от <hostid>A</hostid>, что возвращает
    его в состояние <acronym>ACK-SENT</acronym> и посылает ещё один
    (второй) REQ и (четвёртый) ACK согласно RFC.  <hostid>A</hostid> получает
    REQ, переходит в состояние <acronym>REQ-SENT</acronym> и посылает ещё один
    REQ.  Он немедленно принимает последующий ACK и входит в состояние
    <acronym>OPENED</acronym>.</para>

  <para>Это будет продолжаться до тех пор, пока одна из сторон не
    обнаружит, что это ни к чему не приводит и не закроет соединение.</para>

  <para>Лучшим способом избежать этой ситуации является конфигурация
    одной из сторон как <literal>passive</literal>, чтобы она ждала
    другую для начала согласования.  Это можно сделать командой</para>

  <programlisting>
set openmode passive
  </programlisting>

  <para>С этой командой нужно быть осторожным.  Вы также должны будете
    использовать команду</para>

  <programlisting>
set stopped N
  </programlisting>

  <para>для ограничения периода ожидания, в течении которого
    &man.ppp.8; ждёт начала согласования с противоположной
    стороны.  Как вариант, может быть использована строка</para>

  <programlisting>
set openmode active N
  </programlisting>

  <para>(где <replaceable>N</replaceable> - период ожидания в секундах
    перед тем, как начать согласование).</para>
  </answer>
</qandaentry>


<qandaentry>
  <question id="ppp-shell-test-lockup">
    <para>Когда я выполняю команду shell для тестирования соединения,
      ppp блокируется</para>
  </question>

  <answer>

  <para>Когда вы выполняете команду <command>shell</command> или
    <command>!</command>, &man.ppp.8; запускает оболочку (если были
    заданы параметры, &man.ppp.8; их
    использует).  Ppp будет ждать окончания выполнения команды, прежде
    чем продолжить.  Если вы попытаетесь воспользоваться связью PPP
    после запуска команды, связь будет выглядеть заблокированной.  Это
    происходит из-за того, что &man.ppp.8; ждёт завершения
    выполнения запущенной команды.</para>

  <para>Если вам необходимо выполнять подобные команды, используйте
    команду <command>!bg</command>.  В этом случае нужная команда будет
    выполняться в фоновом режиме, а &man.ppp.8; сможет продолжить обслуживание
    канала связи.</para>

  </answer>
</qandaentry>


      <qandaentry>
        <question id="ppp-nullmodem">
          <para>Почему программа ppp, обслуживающая нуль-модем, никогда не
            закрывается?</para>
        </question>

        <answer>
          <para>&man.ppp.8; не может определить, что соединение
            было закрыто.  Это происходит из-за метода использования сигнальных
            линий нуль-модемного кабеля.  При использовании такого типа
            соединения всегда включайте LQR.</para>

          <programlisting>enable lqr</programlisting>

          <para>По умолчанию LQR включается, если это было затребовано с
            противоположной стороны на этапе согласования параметров
            соединения.</para>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="ppp-auto-noreasondial">
    <para>В режиме -auto ppp неожиданно начинает звонить</para>
  </question>

  <answer>
  <para>Если &man.ppp.8; начинает неожиданно звонить, вы
    должны определить причину и задать фильтры dfilters для предотвращения
    подобных звонков.</para>

  <para>Для выяснения причины такого поведения, используйте строку:</para>

  <programlisting>
set log +tcp/ip
  </programlisting>

  <para>Это включит протоколирование всего трафика через соединение.  В
    следующий раз, когда неожиданно будет установлено соединение,
    вы установите причину по временным отметкам в файле протокола.</para>

  <para>После этого вы можете запретить дозвонку при выясненных
    условиях.  Как правило, такие проблемы возникают из-за обращений
    к DNS.  Для предотвращения обращений к DNS и установления соединения
    (что <emphasis>не</emphasis> запретит &man.ppp.8;
    пропускать пакеты через уже
    установленное соединение), используйте такую комбинацию:</para>

  <programlisting>
set dfilter 1 deny udp src eq 53
set dfilter 2 deny udp dst eq 53
set dfilter 3 permit 0/0 0/0
  </programlisting>

  <para>Это может вам не подойти, так как закроет возможность дозвонки
    по запросу - большинству программ нужно обратиться к DNS до того,
    как начать работать.</para>

  <para>В случае DNS, вы должны попытаться определить, кто пытается
    определить имя хоста.  В большинстве случаев виновным оказывается
    &man.sendmail.8;.  Удостоверьтесь, что вы указали программе sendmail
    не осуществлять обращений к DNS в его конфигурационном файле.
    Обратитесь к разделу об <ulink url="&url.books.handbook;/smtp-dialup.html">
    использовании электронной почты при коммутируемом соединении</ulink> в
    Руководстве за подробным описанием создания конфигурационного файла и что
    туда нужно поместить.  Вам может понадобиться добавить в файл
    <filename>.mc</filename> строку:</para>

  <programlisting>define(`confDELIVERY_MODE', `d')dnl</programlisting>

  <para>Это заставит sendmail ставить все сообщения в очередь до тех пор, пока
    не будет запущена её обработка (как правило, sendmail запускается с
    параметрами <option>-bd -q30m</option>, указывающими, что
    обрабатывать очередь нужно каждые 30 минут) или до тех пор, пока
    не будет выполнена команда <command>sendmail -q</command> (может быть, из
    файла ppp.linkup).</para>

  </answer>
</qandaentry>


<qandaentry>
  <question id="ccp-errors">
    <para>Что означают ошибки CCP</para>
  </question>

  <answer>

  <para>В файле протокола появляются такие сообщения об ошибках:</para>

  <programlisting>
CCP: CcpSendConfigReq
CCP: Received Terminate Ack (1) state = Req-Sent (6)
  </programlisting>

  <para>Это происходит, если &man.ppp.8; пытается установить компрессию
    типа Predictor1, а противоположная сторона не хочет устанавливать
    никакой компрессии. Эти сообщения безобидны, но если вы хотите
    от них избавиться, вы можете запретить компрессию Predictor1 и
    у себя тоже:</para>

  <programlisting>
disable pred1
  </programlisting>

  </answer>
</qandaentry>


<qandaentry>
  <question id="ppp-connectionspeed">
    <para>Почему ppp не протоколирует скорость соединения?</para>
  </question>

  <answer>

  <para>Для вывода протокола взаимодействия с модемом вам нужно
    включить следующее:</para>

  <programlisting>
set log +connect
  </programlisting>

  <para>Это заставит &man.ppp.8; протоколировать всё, вплоть до последней
    прочтённой через <quote>expect</quote> строки.</para>

  <para>Если вы хотите видеть скорость соединения и используете
    PAP или CHAP (и поэтому вам не нужно определять никаких сценариев
    входа через <literal>set login</literal> после получения строки CONNECT
    сценарием дозвонки dial), вы должны указать &man.ppp.8;, что нужно ожидать
    полную строку CONNECT, вроде следующего:</para>

  <programlisting>
set dial "ABORT BUSY ABORT NO\\sCARRIER TIMEOUT 4 \
  \"\" ATZ OK-ATZ-OK ATDT\\T TIMEOUT 60 CONNECT \\c \\n"
  </programlisting>

  <para>Здесь мы получили строку CONNECT, ничего не посылаем, затем ожидаем
    символа перевода строки, заставляя &man.ppp.8; принять
    полный ответ модема.</para>
  </answer>
</qandaentry>


      <qandaentry>
        <question id="ppp-ignores-backslash">
          <para>Ppp игнорирует символ <literal>\</literal>
            в chat-скрипте</para>
        </question>

        <answer>
          <para>Ppp обрабатывает каждую строку в ваших конфигурационных файлах,
            так что он может проинтерпретировать строку вида
            <literal>set phone "123 456 789"</literal> правильно и
            обнаружить. что номер является на самом деле
            <emphasis>единственным</emphasis> аргументом.  Для того, чтобы
            указать символ <literal>&quot;</literal>, вы должны экранировать
            его символом обратного слэша (<literal>\</literal>).</para>

          <para>Когда интерпретатор chat обрабатывает каждую строку, он ещё раз
            просматривает аргумент для того, чтобы найти какую-либо специальную
            последовательность типа <literal>\P</literal> или
            <literal>\T</literal> (обратитесь к Справочнику).  В результате
            этой двойной интерпретации вы должны всегда использовать
            правильное число экранирующих символов.</para>

          <para>Если вам нужно передать символ <literal>\</literal>, например,
            вашему модему, вам необходимо указать что-то типа:</para>

          <programlisting>set dial "\"\" ATZ OK-ATZ-OK AT\\\\X OK"</programlisting>

          <para>что приведёт к такой последовательности:</para>

          <programlisting>ATZ
OK
AT\X
OK</programlisting>

          <para>или</para>

          <programlisting>set phone 1234567
set dial "\"\" ATZ OK ATDT\\T"</programlisting>

          <para>что даст такую последовательность:</para>

          <programlisting>ATZ
OK
ATDT1234567</programlisting>

        </answer>
      </qandaentry>

<qandaentry>
  <question id="ppp-segfault-nocore">
    <para>Ppp получает ошибку защиты, но я не вижу файла
      <filename>ppp.core</filename></para>
  </question>

  <answer>
  <para>Ppp (или любая другая программа такого рода) никогда не
    создаёт файлов дампа памяти.  Так так &man.ppp.8; запускается с
    эффективным uid, равным 0, то операционная система не будет
    записывать дамп памяти &man.ppp.8; на диск перед его завершением.  Если,
    однако &man.ppp.8; всё же прекратит работу из-за нарушения защиты,
    или по другому сигналу, который вызывает создание дампа памяти,
    <emphasis>и</emphasis> вы уверены, что используете самую
    последнюю версию (смотрите
    самое начало раздела), то вы должны сделать следующее:</para>

  <screen>
&prompt.user; <userinput>tar xfz ppp-*.src.tar.gz</userinput>
&prompt.user; <userinput>cd ppp*/ppp</userinput>
&prompt.user; <userinput>echo STRIP= &gt;&gt;Makefile</userinput>
&prompt.user; <userinput>echo CFLAGS+=-g &gt;&gt;Makefile</userinput>
&prompt.user; <userinput>make clean all</userinput>
&prompt.user; <userinput>su</userinput>
&prompt.root; <userinput>make install</userinput>
&prompt.root; <userinput>chmod 555 /usr/sbin/ppp</userinput>
  </screen>

  <para>Теперь у вас есть отладочная версия &man.ppp.8;. Вам нужно
    стать суперпользователем для запуска &man.ppp.8;, так как соответствующие
    биты прав были убраны. Когда запустите &man.ppp.8;, обратите особое
    внимание на то, какой каталог у вас был текущим на этот момент.</para>

  <para>Итак, если &man.ppp.8; получит ошибку нарушения защиты, он сбросит дамп
    памяти с именем <filename>ppp.core</filename>.
    Затем вам нужно сделать следующее:</para>

  <screen>
&prompt.user; <userinput>su</userinput>
&prompt.root; <userinput>gdb /usr/sbin/ppp ppp.core</userinput>
<prompt>(gdb)</prompt> <userinput>bt</userinput>
.....
<prompt>(gdb)</prompt> <userinput>f 0</userinput>
....
<prompt>(gdb)</prompt> <userinput>i args</userinput>
....
<prompt>(gdb)</prompt> <userinput>l</userinput>
.....
  </screen>

  <para>Вся эта информация должна быть предоставлена вместе с вашим
    вопросом, чтобы проблему можно было продиагностировать.</para>

  <para>Если вы умеете обращаться с gdb, вы можете попробовать найти
    причины образования дампа, а также адреса и значения относящихся
    к этому переменных.</para>

  </answer>
</qandaentry>


<qandaentry>
  <question id="ppp-autodialprocess-noconnect">
    <para>Процесс, вызвавший прозвонку в режиме auto, никогда не получает
      затребованного соединения</para>
  </question>

  <answer>

  <para>Эта проблема проявлялась, когда &man.ppp.8; в
    режиме auto был настроен на динамическое согласование локального IP-адреса
    с противоположной стороной.  Это исправлено в последней версии -
    поищите на странице справочника слово <literal>iface</literal>.</para>

  <para>Причиной было то, что когда эта программа использует системный
    вызов &man.connect.2;, для сокета назначается IP-адрес tun-интерфейса.
    Ядро создаёт первый исходящий пакет и записывает его в устройство
    tun.  Затем &man.ppp.8; читает пакет и устанавливает
    соединение.  Если в результате согласования &man.ppp.8;
    динамического IP-адреса
    адрес интерфейса изменится, сокет будет работать некорректно.  Любые
    IP-пакеты, передаваемые через сокет, будут отброшены.  Если даже
    этого не произойдёт, ответные данные не будут достигать отправителя,
    так как этот адрес больше ему не принадлежит.</para>

  <para>Теоретически есть несколько способов решить эту проблему.
    Лучше всего, если противоположная сторона назначит интерфейсу тот же
    самый IP-адрес <literal>:-)</literal>  Текущая версия
    &man.ppp.8; именно так и поступает, более ранние
    реализации этого не делали.</para>

  <para>Самым простым решением будет просто никогда не менять IP-адрес
    tun-интерфейса, а вместо этого изменять на лету все исходящие пакеты так,
    чтобы IP-адрес источника менялся с IP-адреса интерфейса на соответствующий
    с противоположной стороны.  Это, в сущности, то же самое, что делает опция
    <literal>iface-alias</literal> в самой последней версии
    &man.ppp.8; (с помощью библиотеки &man.libalias.3; и ключа
    <option>-nat</option> для &man.ppp.8;) - она отслеживает все назначенные
    ранее интерфейсу адреса и замещает их на последний из назначенных.</para>

  <para>Другой возможный (и, наверное, самый надёжный) способ - это
    создать системный вызов, меняющий IP-адреса всем уже связанным
    сокетам.  &man.ppp.8; использовал бы этот вызов для
    модификации сокетов
    всех работающих программ после согласования нового IP-адреса.  Этот
    же самый системный вызов могли бы использовать клиенты DHCP, когда
    они осуществляют повторную привязку к сокету.</para>

  <para>Ещё одной возможностью является разрешение интерфейсу становиться
    активным без IP-адреса.  Исходящим пакетам будет даваться IP адрес
    255.255.255.255 до тех пор, пока не будет дан ioctl-запрос SIOCAIFADDR.
    приводящий к полной привязке сокета.  &man.ppp.8; нужно будет изменять
    IP-адрес источника и контрольную сумму пакета, только если он
    установлен в 255.255.255.255. Это, однако, является некоторым
    хаком, так как ядро будет посылать некорректные пакеты на не полностью
    сконфигурированный интерфейс, в предположении, что существует
    механизм исправления этих пакетов.</para>

  </answer>
</qandaentry>


<qandaentry>
  <question id="ppp-nat-games">
    <para>Почему большинство игр не работает с опцией -nat?</para>
  </question>

  <answer>

  <para>Причиной, по которой игры и подобные программы не работают с
    библиотекой libalias заключается в том, что внешняя машина будет пытаться
    открыть соединение или посылать (нежданные) UDP пакеты на машину
    внутренней сети.  Программное обеспечение, обеспечивающее опцию -nat, не
    знает о том, что она должна пересылать эти пакеты машине внутренней
    сети.</para>

  <para>Чтобы это всё же заработало, удостоверьтесь, что единственной
    запущенной программой является программное обеспечение, с которым вы
    испытываете проблемы, затем напустите tcpdump на tun-интерфейс
    маршрутизатора либо включите протоколирование tcp/ip
    в &man.ppp.8; (<literal>set log +tcp/ip</literal>) на маршрутизаторе.</para>

  <para>Когда вы запустите некорректно работающее программное обеспечение,
    вы должны увидеть пакеты, проходящие через маршрутизатор.  Когда
    что-то начнёт приходить извне, оно будет отброшено (в этом-то и
    проблема).  Заметьте номер порта получателя этих пакетов, затем
    завершите работу вашего программного обеспечения.  Выполните эту
    процедуру несколько раз для того, чтобы убедиться, что номер порта
    постоянен.  Если это так, то следующая строчка в соответствующем
    разделе <filename>/etc/ppp/ppp.conf</filename> заставит программное
    обеспечение функционировать нормально:</para>

  <programlisting>
nat port <replaceable>proto</replaceable> <replaceable>internalmachine</replaceable>:<replaceable>port</replaceable> <replaceable>port</replaceable>
  </programlisting>

  <para>Здесь <replaceable>proto</replaceable> - это <literal>tcp</literal>
    либо <literal>udp</literal>, <replaceable>internalmachine</replaceable> -
    это машина, которой вы хотите перенаправлять пакеты,
    и <replaceable>port</replaceable> - это номер порта получателя
    пакетов.</para>

  <para>Несомненно, вы не сможете использовать программное обеспечение на
    других машинах, не изменяя указанную выше команду, а также запускать
    программное обеспечение на двух машинах внутри сети одновременно -
    в конце концов, внешний мир видит всю вашу сеть как единственную
    машину.</para>

  <para>Если номера портов непостоянны, есть ещё три варианта:</para>

  <orderedlist>
    <listitem>
      <para>Настройте поддержку этого в libalias.  Примеры
        <quote>особых случаев</quote> можно найти в
        <filename>/usr/src/lib/libalias/alias_*.c</filename>
        (<filename>alias_ftp.c</filename> - хорошее начало).  Это означает, что
        вам нужно будет использовать чтение некоторых распознаваемых
        исходящих пакетов, обнаруживать команды для установления внешней машиной
        обратной связи на внутреннюю машину на конкретный (случайный) порт и
        настраивать <quote>маршрут</quote> в таблице соответствий так, чтобы
        последующие пакеты проходили нормально.</para>

      <para>Это самое трудоёмкое решение, но оно наилучшее и позволит
        программному обеспечению работать на нескольких машинах.</para>
    </listitem>

    <listitem>
      <para>Используйте прокси-сервер.
        Приложение может поддерживать, например, socks5 или (как в случае
        <quote>cvsup</quote>) может иметь режим <quote>passive</quote>,
        обходящийся без запросов к противоположной стороне на открытие
        обратного соединения.</para>
    </listitem>

    <listitem>
      <para>Переназначьте всё на внутреннюю
        машину с помощью команды <literal>nat addr</literal>.  Это решение в
        лоб.</para>
    </listitem>
  </orderedlist>
  </answer>
</qandaentry>

      <qandaentry>
        <question id="useful-port-numbers">
          <para>Кто-нибудь ведёт список полезных номеров портов?</para>
        </question>

        <answer>
          <para>Пока нет, но ниже находится список, могущий таковым стать (если
            к этому будет проявлен какой-либо интерес).  В каждом примере
            <replaceable>internal</replaceable> нужно заменить на IP-адрес
            машины, участвующей в игре.</para>

          <itemizedlist>
            <listitem>
              <para><application>Asheron's Call</application></para>

              <para><literal>nat port udp
                <replaceable>internal</replaceable>:65000
                65000</literal></para>

              <para>Находясь в игре, вручную смените номер порта на 65000.  Если
                у вас есть несколько машин, на которых вы хотите играть,
                назначьте каждой машине уникальный номер порта (то есть 65001,
                65002 и так далее), и добавьте по строчке <literal>nat
                port</literal> для каждой машины.</para>
            </listitem>

            <listitem>
              <para><application>Half Life</application></para>

              <para><literal>nat port udp
                <replaceable>internal</replaceable>:27005
                27015</literal></para>
            </listitem>

            <listitem>
              <para><application>PCAnywhere 8.0</application></para>

              <para><literal>nat port udp
                <replaceable>internal</replaceable>:5632
                5632</literal></para>

              <para><literal>nat port tcp
                <replaceable>internal</replaceable>:5631
                5631</literal></para>
            </listitem>

            <listitem>
              <para><application>Quake</application></para>

              <para><literal>nat port udp
                <replaceable>internal</replaceable>:6112
                6112</literal></para>
            </listitem>

            <listitem>
              <para><application>Quake 2</application></para>

              <para><literal>nat port udp
                <replaceable>internal</replaceable>:27901
                27910</literal></para>

              <para><literal>nat port udp
                <replaceable>internal</replaceable>:60021
                60021</literal></para>

              <para><literal>nat port udp
                <replaceable>internal</replaceable>:60040
                60040</literal></para>
            </listitem>

            <listitem>
              <para><application>Red Alert</application></para>

              <para><literal>nat port udp
                <replaceable>internal</replaceable>:8675
                8675</literal></para>

              <para><literal>nat port udp
                <replaceable>internal</replaceable>:5009
                5009</literal></para>
            </listitem>
          </itemizedlist>
        </answer>
      </qandaentry>

<qandaentry>
  <question id="fcs-errors">
    <para>Что такое ошибки FCS?</para>
  </question>

  <answer>
  <para>FCS является сокращением от <literal>F</literal>rame
    <literal>C</literal>heck <literal>S</literal>equence
    (контроль последовательности кадров).  Каждый кадр PPP имеет
    контрольную сумму для проверки того, что принятые данные совпадают
    с переданными.  Если FCS принятого пакета некорректна, пакет
    отбрасывается и счётчик FCS для HDLC увеличивается.  Значения ошибок
    уровня HDLC можно вывести командой <literal>show hdlc</literal>.</para>

  <para>Если у вас плохая линия (или драйвер коммуникационного адаптера
    отбрасывает пакеты), ошибки FCS неизбежны.  Это обычно не является
    причиной для волнений, хотя это существенно замедляет протоколы
    компрессии.  Если у вас внешний модем, проверьте качество
    экранирования соединительного кабеля - это может избавить от
    проблемы.</para>

  <para>Если ваша связь замирает, как только вы соединились и
    наблюдается большое количество ошибок FCS, это может быть вызвано
    не полной прозрачностью канала для 8-битовых данных.  Проверьте, что
    модем не использует программного управления потоком (XON/XOFF).  Если же
    оборудование <emphasis>должно</emphasis> , использовать программное
    управление потоком, то воспользуйтесь командой <literal>set accmap
    0x000a0000</literal> для указания &man.ppp.8; экранировать
    символы <literal>^Q</literal> и <literal>^S</literal>.</para>

  <para>Другой причиной слишком большого количества ошибок FCS может
    быть прекращение противоположной стороной сеанса <acronym>PPP</acronym>.
    В этом случае Вам может понадобиться включить протоколирование
    <literal>async</literal> для проверки того, не являются ли поступаемые из
    линии данные на самом деле приглашениями login или shell.  Если вы
    получили приглашение shell с противоположной стороны, возможно
    завершение &man.ppp.8; без обрыва связи командой <literal>close
    lcp</literal> (последующая команда <emphasis remap=tt>term</emphasis>
    снова вернёт вас к приглашению
    shell на удалённой машине).</para>

  <para>Если ничего в файле протокола не говорит о том, что связь
    была прервана, вы должны спросить у администратора удалённой
    машины (вашего провайдера), почему сеанс был закрыт.</para>

  </answer>
</qandaentry>

      <qandaentry id=PPPoEwithNAT>
        <question id="macos-win98-pppoe-freeze">
          <para>Почему при работе в &macos; и &windows; 98 соединения замирают,
            когда на маршрутизаторе используется PPPoE?</para>
        </question>

        <answer>
          <para>Мы благодарим Майкла Возняка (Michael Wozniak)
            <email>mwozniak@netcom.ca</email>, который сообщил следующую
            информацию, и Дэна Флемминга (Dan Flemming)
            <email>danflemming@mac.com</email> за решение проблемы в случае
            Mac:</para>

          <para>Это происходит из-за эффекта, который можно назвать
            <quote>чёрной дырой</quote> на маршрутизаторе.  &macos; и &windows; 98
            (и, может быть, другие операционные системы от Microsoft), посылают
            пакеты TCP с запрашиваемым размером сегмента, который слишком велик
            для того, чтобы быть помещённым в кадр PPPoE (для сети Ethernet
            размер MTU по умолчанию равен 1500) <emphasis>и</emphasis> с
            установленным битом <quote>не фрагментировать</quote> (по умолчанию
            для TCP), а маршрутизаторы Telco не посылает пакет ICMP <quote>нужно
            фрагментировать</quote> обратно на сайт www, с которым вы
            работаете.  (Либо маршрутизатор посылает пакеты ICMP правильно, а
            межсетевой экран на стороне Web-сервера их сбрасывает.)  Когда
            Web-сервер посылает вам кадры, которые не помещаются в поток PPPoE,
            то маршрутизаторы Telco их отбрасывают и странички не загружаются
            (часть страниц/графики всё же видно, потому что они меньше, чем
            MSS).  Похоже, что такие настройки действуют по умолчанию на
            большинстве конфигураций PPPoE Telco (если они вообще знают, как
            программировать маршрутизатор...  да уж...).</para>

          <para>Одним из способов исправить это является использование утилиты
            regedit на машинах 96/98 для того, чтобы добавить в реестр
            следующий параметр...</para>

          <programlisting>HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\Class\NetTrans\0000\MaxMTU</programlisting>

          <para>Это должна быть строка со значением <quote>1436</quote>, так как
            имеются сведения, что некоторые маршрутизаторы ADSL не могут
            работать с пакетами размером, превышающим эту величину.  В &windows;
            2000 этот параметр реестра был перенесён в
            <literal>Tcpip\Parameters\Interfaces\<replaceable>ID
            адаптера</replaceable>\MTU</literal> и имеет тип DWORD.</para>

          <para>Обратитесь к документам из Microsoft Knowledge Base <ulink
            url="http://support.microsoft.com/support/kb/articles/Q158/4/74.asp">
            Q158474 - Windows TCPIP Registry Entries</ulink> и <ulink
            url="http://support.microsoft.com/support/kb/articles/Q120/6/42.asp">
            Q120642 - TCPIP & NBT Configuration Parameters for
            &windowsnt;</ulink> для получения более полной информации по
            изменению MTU в &windows; для работы с NAT-маршрутизатором.</para>

          <para>Другим вариантом с &windows; 2000 является установка в регистре
            DWORD-параметра
            <literal>Tcpip\Parameters\Interfaces\<replaceable>ID
            адаптера</replaceable>\EnablePMTUBHDetect</literal> в 1, как это
            отмечено в документе Microsoft 120642, указанном выше.</para>

          <para>К несчастью, в &macos; нет возможности изменить настройки TCP/IP.
            Однако имеется коммерческое программное обеспечение, такое, как
            OTAdvancedTuner (OT for OpenTransport, the &macos; TCP/IP stack)
            компании <ulink url="http://www.softworks.com/">Sustainable
            Softworks</ulink>, которое позволяет пользователям настраивать
            параметры TCP/IP.  Пользователи &macos; NAT должны выбрать
            <literal>ip_interface_MTU</literal> из выпадающего меню, ввести
            число <literal>1450</literal> вместо <literal>1500</literal> в окне,
            затем щёлкнуть на кнопке, следующей за <literal>Save as Auto
            Configure</literal>, и щёлкнуть на <literal>Make
            Active</literal>.</para>

          <para>В самой последней версии &man.ppp.8;
            (2.3 и выше) имеется команда <command>enable
            tcpmssfixup</command>, которая автоматически выравнивает значение
            MSS к нужному.  Эта возможность по умолчанию включена.  Если у вас
            возникли проблемы с более старой версией
            &man.ppp.8;, то вас может заинтересовать порт
            <application>tcpmssd</application>.</para>
        </answer>
      </qandaentry>


  <qandaentry>
    <question id="desperation">
      <para>Ничего не помогает - я уже отчаялся!</para>
    </question>

  <answer>
  <para>Если всё уже перепробовано, и ничего не получается, пошлите нам
    максимальное количество информации, ваш конфигурационный файл,
    способ запуска &man.ppp.8;, соответствующие части
    файла протокола, и вывод команды <command>netstat -rn</command> (до и после
    соединения) в &a.questions; или в телеконференцию <ulink
    url="news:comp.unix.bsd.freebsd.misc">comp.unix.bsd.freebsd.misc</ulink>,
    и может быть, кто-нибудь укажет вам верное направление.</para>
  </answer>
</qandaentry>


</qandaset>
</chapter>

  <chapter id="serial">
    <title>Коммуникационные адаптеры</title>

    <para>В этом разделе освещены вопросы о работе последовательных
      адаптеров во FreeBSD.  Протоколы PPP и SLIP рассматриваются в разделе
      <link linkend="networking">Работа в сети</link>.</para>

<qandaset>
<qandaentry>
  <question id="found-serial">
    <para>Как узнать, какие последовательные порты были обнаружены
      FreeBSD?</para>
  </question>

  <answer>

  <para>При загрузке ядра FreeBSD оно будет пытаться найти последовательные
    порты, с поддержкой которых было откомпилировано.  Вы можете
    повнимательней присмотреться к выдаваемым сообщениям либо выполнить
    команду</para>

  <screen>
&prompt.user; <userinput>dmesg | grep sio</userinput>
  </screen>

  <para>после загрузки и запуска системы.</para>

  <para>Вот пример вывода указанной команды:</para>

  <programlisting>
sio0 at 0x3f8-0x3ff irq 4 on isa
sio0: type 16550A
sio1 at 0x2f8-0x2ff irq 3 on isa
sio1: type 16550A
  </programlisting>

  <para>Здесь присутствуют два последовательных порта.  Первый использует irq
    4, порт ввода/вывода <literal>0x3f8</literal> и построен на микросхеме
    UART типа 16550A.  Второй использует тот же тип микросхемы, но использует
    irq 3 и адрес порта ввода/вывода <literal>0x2f8</literal>.  Внутренние
    модемы выглядят точно также, как последовательные порты, за исключением
    того, что к модем ним <quote>подключен</quote> всегда.</para>

  <para>В ядро <filename>GENERIC</filename> встроена поддержка двух
    последовательных портов, с irq и адресами портов ввода/вывода, как в
    примере выше.  Если эти настройки не соответствуют вашим, или если вы
    добавили внутренние модемы, или у вас больше последовательных портов, чем
    описано в ядре, просто переконфигурируйте ядро.  За дополнительной
    информацией обратитесь к разделу <link linkend="make-kernel">о построении
    ядра</link>.</para>

  </answer>
</qandaentry>


<qandaentry>
  <question id="found-modem">
    <para>Как узнать, какие внутренние модемы были обнаружены FreeBSD?</para>
  </question>

  <answer>

  <para>Посмотрите ответ на предыдущий вопрос.</para>

  </answer>
</qandaentry>


      <qandaentry>
        <question id="access-serial-ports">
          <para>Как осуществляется доступ к последовательным портам во
            FreeBSD?</para>
        </question>

        <answer>
          <para>Третий последовательный порт, <devicename>sio2</devicename>
            (посмотрите справку по &man.sio.4;), который в DOS называется
            <devicename>COM3</devicename>), обозначается как
            <devicename>/dev/cuaa2</devicename> для устройств, выполняющих
            исходящие звонки, и <devicename>/dev/ttyd2</devicename> для
            устройств, принимающих входящие звонки.  Какая разница между этими
            двумя классами устройств?</para>

          <para>Вы должны использовать
            <devicename>ttyd<replaceable>X</replaceable></devicename> для
            входящих соединений.  При открытии
            <devicename>/dev/ttyd<replaceable>X</replaceable></devicename> в
            блокирующем режиме, процесс будет ожидать неактивности
            соответствующего устройства
            <devicename>cuaa<replaceable>X</replaceable></devicename>, а затем
            появления сигнала о наличии несущей.  При открытии устройства
            <devicename>cuaa<replaceable>X</replaceable></devicename> он
            проверяет, что последовательный порт не используется уже
            устройством
            <devicename>ttyd<replaceable>X</replaceable></devicename>. Если
            порт доступен, он <quote>похищает</quote> его у устройства
            <filename>ttyd<replaceable>X</replaceable></filename>.  Также
            устройство
            <devicename>cua<replaceable>XX</replaceable></devicename> не следит
            за наличием несущей. С такой схемой работы и модемом, находящимся в
            режиме автоответа, вы можете позволить пользователям входить в
            систему и в то же время можете осуществлять исходящие звонки, а
            система позаботится о возможных конфликтах.</para>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="enable-multiport-serial">
    <para>Как включить поддержку многопортовых последовательных
      адаптеров?</para>
  </question>

  <answer>

  <para>Повторим ещё раз: информация о конфигурировании ядра содержится в
    разделе, посвящённом этому вопросу.  Для многопортовых последовательных
    адаптеров в файле конфигурации ядра поместите ключевое слово &man.sio.4;
    для каждого порта на адаптере.  Но irq и вектор должен быть указан
    только у одного порта.  Все порты на адаптере должны использовать одно
    и то же irq.  Используйте последний последовательный порт для указания
    irq. Также включите опцию <literal>COM_MULTIPORT</literal>.</para>

  <para>В следующем примере дано описание 4-портового адаптер AST на irq
    7:</para>

  <programlisting>
options "COM_MULTIPORT"
device sio4 at isa? port 0x2a0 tty flags 0x781
device sio5 at isa? port 0x2a8 tty flags 0x781
device sio6 at isa? port 0x2b0 tty flags 0x781
device sio7 at isa? port 0x2b8 tty flags 0x781 irq 7 vector siointr
  </programlisting>

  <para>Флаги указывают, что управляющий порт имеет младший номер
    устройства 7 (<literal>0x700</literal>), включена диагностика на время
    обнаружения
    (<literal>0x080</literal>), и все порты используют одно и то же irq
    (<literal>0x001</literal>).</para>

  </answer>
</qandaentry>


<qandaentry>
  <question id="multiport-serial-share-irq">
    <para>Может ли FreeBSD использовать несколько многопортовых адаптеров
      с одинаковым irq?</para>
  </question>

  <answer>

  <para>Пока нет.  Вы должны назначить уникальный irq для каждого
    адаптера.</para>

  </answer>
</qandaentry>


<qandaentry>
  <question id="default-serial-params">
    <para>Можно ли установить режим работы по умолчанию для порта?</para>
  </question>

  <answer>

  <para>Вашему приложению может понадобиться открыть устройства
    <devicename>ttyd<replaceable>X</replaceable></devicename> (или
    <devicename>cuaa<replaceable>X</replaceable></devicename>). Когда процесс
    открывает устройство, оно имеет набор параметров ввода/вывода. Вы можете
    посмотреть их значения командой</para>

  <screen>
&prompt.root; <userinput>stty -a -f /dev/ttyd1</userinput>
  </screen>

  <para>Когда вы меняете настройки этого устройства, они действуют
    вплоть до закрытия устройства.  При повторном открытии оно будут
    иметь режимы работы по умолчанию.  Чтобы изменить значения режимов
    работы по умолчанию, вы можете открыть и изменить настройки в устройстве
    <quote>начального состояния</quote>.  Например, чтобы сделать режимом
    по умолчанию режим <acronym>CLOCAL</acronym>, 8 бит, и управление потоком
    <acronym>XON/XOFF</acronym> для устройства <devicename>ttyd5</devicename>,
    сделайте следующее:</para>

  <screen>
&prompt.root; <userinput>stty -f /dev/ttyid5 clocal cs8 ixon ixoff</userinput>
  </screen>

  <para>Для выполнения таких действий предназначен скрипт
    <filename>/etc/rc.serial</filename>.  Теперь при открытии устройства
    <devicename>ttyd5</devicename> приложение будет иметь именно такой режим
    работы с портом.  Оно, однако. может изменить эти режимы по своему
    усмотрению.</para>

  <para>Вы можете запретить изменение приложением некоторых режимов работы,
    выполнив настройки устройства <quote>постоянного состояния</quote>.
    Например, чтобы сделать скорость работы <filename>ttyd5</filename>
    постоянной и равной 57600 bps, выполните</para>

  <screen>
&prompt.root; <userinput>stty -f /dev/ttyld5 57600</userinput>
  </screen>

  <para>Теперь, если приложение откроет <filename>ttyd5</filename> и попытается
    изменить скорость работы порта, она всё равно останется равной 57600
    bps.</para>

  <para>Естественно, вы должны сделать устройства начального и
    постоянного состояний доступными на запись только пользователю
    <username>root</username>.  Скрипт &man.MAKEDEV.8;
    при создании файлов устройств этого <emphasis>НЕ</emphasis> делает.</para>

  </answer>
</qandaentry>


      <qandaentry>
        <question id="enable-dialup">
          <para>Как сделать вход через модем?</para>
        </question>

        <answer>
          <para>Похоже, что вы хотите стать Internet-провайдером, да?  Сначала
            вам необходимо подключить к системе один или несколько модемов,
            которые могут работать в режиме автоответа.  Модем должен держать
            сигнал наличия несущей, только когда она присутствует.  Он должен
            вешать трубку и переинициализировать, когда сигнал готовности
            устройства DTE (<acronym>DTR</acronym>) меняет состояние из
            включенного на выключенный.  Должно использоваться аппаратное
            (<filename>RTS/CTS</filename>) управление потоком или вовсе
            отсутствовать.  Ещё он должен работать на постоянной скорости с
            портом компьютера, но (что удобно для звонящих) с согласованием
            скорости передачи с другим модемом.</para>

          <para>Для большинства модемов, поддерживающих набор команд Hayes,
            следующая последовательность команд выполнит эти настройки и
            сохранит их в энергонезависимой памяти:</para>

          <programlisting>AT &amp;C1 &amp;D3 &amp;K3 &amp;Q6 S0=1 &amp;W</programlisting>

          <para>Информация о том, как сделать эти настройки без обращения к
            терминальным программам &ms-dos;, содержится в разделе о <link
            linkend="direct-at">посылке AT-команд</link>.</para>

          <para>Затем опишите модем в файле <filename>/etc/ttys</filename>
            (посмотрите справку по &man.ttys.5;).  В нём перечислены все
            порты, с которых операционная система ожидает входа пользователей.
            Добавьте строку, которая выглядит как эта:</para>

          <programlisting>ttyd1 "/usr/libexec/getty std.57600" dialup on insecure</programlisting>

          <para>В этой строке указано, что ко второму последовательному порту
            (<devicename>/dev/ttyd1</devicename>) подключен модем на скорости
            57600 bps без контроля по чётности (<literal>std.57600</literal>,
            что берётся из файла <filename>/etc/gettytab</filename>
            (посмотрите справку по &man.gettytab.5;).  Тип терминала для этого
            порта определён как <literal>dialup</literal>.
            Порт включен (<literal>on</literal>) и небезопасен
            (<literal>insecure</literal>), что означает, что попытки войти
            в систему пользователем <username>root</username> с этого порта
            будут отвергнуты.  Для портов, обслуживающих входящие звонки, как
            этот, используйте устройства вида
            <devicename>ttyd<replaceable>X</replaceable></devicename>.</para>

          <para>Использование слова <literal>dialup</literal> в качестве имени
            терминала является обычной практикой.  Многие пользователи
            включают в свои файлы <filename>.profile</filename> или
            <filename>.login</filename> скрипты для задания реального типа
            терминала, если начальным является тип <literal>dialup</literal>.
            В примере порт описан небезопасным.  Чтобы войти пользователем
            <username>root</username> на этом порту, вам нужно сначала войти
            обычным пользователем, а затем командой &man.su.1; стать
            пользователем <username>root</username>.  Если порт имеет
            атрибут <literal>secure</literal>, то пользователь
            <username>root</username> может входить с этого порта
            непосредственно.</para>

          <para>После редактирования файла <filename>/etc/ttys</filename> вам
            нужно послать сигнал потери связи или <acronym>HUP</acronym>
            процессу &man.init.8;:</para>

          <screen>&prompt.root; <userinput>kill -HUP 1</userinput></screen>

          <para>Это заставит процесс &man.init.8; снова прочитать файл
            <filename>/etc/ttys</filename>.  Процесс init запустит процессы
            getty для всех портов с характеристикой <literal>on</literal>.
            Вы можете проверить, доступны ли входы с
            конкретного порта, выполнив команду</para>

          <screen>&prompt.user; <userinput>ps -ax | grep '[t]tyd1'</userinput></screen>

          <para>Вы должны увидеть нечто вроде следующего:</para>

          <programlisting>747 ??  I      0:00.04 /usr/libexec/getty std.57600 ttyd1</programlisting>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="dumb-terminal">
    <para>Как подключить терминал к FreeBSD?</para>
  </question>

  <answer>
  <para>Если вы собираетесь использовать другой компьютер в качестве
    терминала для FreeBSD, соедините их последовательные порты
    нуль-модемным кабелем.  Если у вас есть терминал, обратитесь к его
    документации.</para>

  <para>Затем модифицируйте файл <filename>/etc/ttys</filename> (посмотрите
    справку по &man.ttys.5;) описанным выше способом.  Например, если вы
    подключаете терминал WYSE-50 к пятому последовательному порту, используйте
    такую строчку:</para>

  <programlisting>
ttyd4 "/usr/libexec/getty std.38400" wyse50 on secure
  </programlisting>

  <para>В этом примере описан порт на <devicename>/dev/ttyd4</devicename>,
    имеющий терминал wyse50, подключенный на скорости 34800 bps без контроля по
    четности (<literal>std.38400</literal> из файла
    <filename>/etc/gettytab</filename>, информацию о котором можно получить
    из справки по &man.gettytab.5;) и разрешён непосредственный вход
    пользователя <username>root</username> (<literal>secure</literal>).</para>
  </answer>
</qandaentry>


<qandaentry>
  <question id="cannot-tip">
    <para>Почему не удаётся запустить <command>tip</command> или
      <command>cu</command>?</para>
  </question>

  <answer>

  <para>Скорее всего, в вашей системе запуск программ
    &man.tip.1; и &man.cu.1; разрешён только пользователю
    <username>uucp</username> и членам группы
    <groupname>dialer</groupname>.  Вы можете использовать группу
    <groupname>dialer</groupname> для управления доступом к вашему модему или
    удалённым системам.  Достаточно добавить пользователя в группу
    dialer.</para>

  <para>Вы можете разрешить всем пользователям вашей системы запускать
    &man.tip.1; и &man.cu.1;, выполнив команды:</para>

  <screen>
&prompt.root; <userinput>chmod 4511 /usr/bin/cu</userinput>
&prompt.root; <userinput>chmod 4511 /usr/bin/tip</userinput>
  </screen>

  </answer>
</qandaentry>


<qandaentry>
  <question id="hayes-unsupported">
    <para>Мой модем Hayes не поддерживается---что можно сделать?</para>
  </question>

  <answer>
  <para>На самом деле страница Справочника о программе &man.tip.1; устарела.
    Модемы Hayes поддерживаются системой.  Просто добавьте
    <literal>at=hayes</literal> в ваш файл <filename>/etc/remote</filename>
    (посмотрите справку по &man.remote.5;).</para>

  <para>Драйвер модемов Hayes не достаточно умён, чтобы поддерживать
    некоторые из новых возможностей современных модемов---сообщения
    типа <literal>BUSY</literal>, <literal>NO DIALTONE</literal> или
    <literal>CONNECT 115200</literal> будут приводить его в замешательство.  Вы
    должны выключить вывод таких сообщений при использовании программы
    &man.tip.1; (командой <literal>ATX0&amp;W</literal>).</para>

  <para>Кроме того, значение таймаута по умолчанию для программы
    &man.tip.1; равен 60 секундам.  Ваш модем должен использовать
    меньшее значение, иначе tip будет думать, что у вас проблемы со связью.
    Попробуйте <literal>ATS7=45&amp;W</literal>.</para>

  <para>На самом деле <application>tip</application> в том виде, каком
    поставляется, не поддерживает модемы Hayes полностью.  Решением является
    редактирование файла <filename>tipconf.h</filename> в каталоге
    <filename>/usr/src/usr.bin/tip/tip</filename>.  Чтобы это сделать, вам
    нужен дистрибутив исходных текстов системы.</para>

  <para>Замените строку <literal>#define HAYES 0</literal> на <literal>#define
    HAYES 1</literal>.  Затем выполните команды <command>make</command> и
    <command>make install</command>.  После этих действий всё работает
    замечательно.</para>

  </answer>
</qandaentry>


<qandaentry>
  <question id="direct-at">
    <para>Как я должен ввести эти AT-команды?</para>
  </question>

  <answer>
  <para>Создайте так называемое <quote>прямое</quote> описание в вашем файле
    <filename>/etc/remote</filename> (посмотрите справку по &man.remote.5;).
    Например, если ваш модем подключен к первому последовательному порту,
    <devicename>/dev/cuaa0</devicename>, сделайте такую строку:</para>

  <programlisting>
cuaa0:dv=/dev/cuaa0:br#19200:pa=none
  </programlisting>

  <para>Укажите максимальную скорость обмена с портом, поддерживаемую
    модемом в параметре br.  Затем выполните команду
    <command>tip <devicename>cuaa0</devicename></command> (обратитесь к
    справке по &man.tip.1;) и вы подключитесь к модему.</para>

  <para>Если в вашей системе нет устройства
  <devicename>/dev/cuaa0</devicename>, сделайте следующее:</para>

  <screen>
&prompt.root; <userinput>cd /dev</userinput>
&prompt.root; <userinput>sh MAKEDEV cuaa0</userinput>
  </screen>

  <para>Или используйте <command>cu</command>, войдя администратором,
    с такими параметрами:</para>

  <screen>
&prompt.root; <userinput>cu -l<replaceable>line</replaceable> -s<replaceable>speed</replaceable></userinput>
  </screen>

  <para>где <replaceable>line</replaceable> - это имя последовательного порта
    (например, <devicename>/dev/cuaa0</devicename>), а
    <replaceable>speed</replaceable> - скорость работы модема с портом
    (например, <literal>57600</literal>).  После ввода AT-команд, наберите
    <literal>~.</literal> для завершения работы.</para>

  </answer>
</qandaentry>


      <qandaentry>
        <question id="gt-failure">
          <para>Почему не срабатывает знак <literal>&lt;@&gt;</literal> для
            описания характеристики pn?</para>
        </question>

        <answer>
          <para>Знак <literal>&lt;@&gt;</literal> в характеристике, описывающей
            номер телефона, указывает программе tip обратиться к файлу
            <filename>/etc/phones</filename> для поиска телефонного номера.
            Однако знак <literal>&lt;@&gt;</literal> является также и
            специальным символом в файлах описания характеристик типа
            <filename>/etc/remote</filename>.  Экранируйте его символом
            обратного слэша:</para>

          <programlisting>pn=\@</programlisting>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="dial-command-line">
    <para>Как набрать телефонный номер из командной строки?</para>
  </question>

  <answer>
  <para>Поместите так называемое <quote>общее</quote> описание в ваш файл
    <filename>/etc/remote</filename> (посмотрите справку по &man.remote.5;).
    Например:</para>

  <programlisting>
tip115200|Dial any phone number at 115200 bps:\
       :dv=/dev/cuaa0:br#115200:at=hayes:pa=none:du:
tip57600|Dial any phone number at 57600 bps:\
       :dv=/dev/cuaa0:br#57600:at=hayes:pa=none:du:
  </programlisting>

  <para>Тогда вы сможете выполнять команды вроде <command>tip -115200
    5551234</command>.  Если предпочитаете программу &man.cu.1;, а не
    &man.tip.1;, используйте общее описание для cu:</para>

  <programlisting>
cu115200|Use cu to dial any number at 115200bps:\
        :dv=/dev/cuaa1:br#57600:at=hayes:pa=none:du:
  </programlisting>

  <para>и выполняйте команду <command>cu 5551234 -s 115200</command>.</para>
  </answer>
</qandaentry>


<qandaentry>
  <question id="set-bps">
    <para>Нужно ли при этом каждый раз задавать скорость работы с
      портом?</para>
  </question>

  <answer>

  <para>Создайте описание для <literal>tip1200</literal> или
    <literal>cu1200</literal>, но не останавливайтесь на этом и используйте
    подходящую скорость при задании характеристики br.  &man.tip.1; полагает,
    что хорошим значением по умолчанию является 1200 bps, поэтому он
    использует описание для <literal>tip1200</literal>.  Однако вас никто не
    заставляет использовать именно эту скорость.</para>

  </answer>
</qandaentry>


<qandaentry>
  <question id="terminal-server">
    <para>Мне нужно иметь доступ к нескольких хостам через терминальный
      сервер.</para>
  </question>

  <answer>
  <para>Вместо того, чтобы каждый раз ожидать подключения к терминальному
    серверу, а затем набирать команду <literal>CONNECT
    <replaceable>host</replaceable></literal>, используйте характеристику
    <literal>cm</literal> программы tip.  Например, вот такое описание в файле
    <filename>/etc/remote</filename> (обратитесь к справке по
    &man.remote.5;):</para>

  <programlisting>
pain|pain.deep13.com|Forrester's machine:\
       :cm=CONNECT pain\n:tc=deep13:
muffin|muffin.deep13.com|Frank's machine:\
       :cm=CONNECT muffin\n:tc=deep13:
deep13:Gizmonics Institute terminal server:\
       :dv=/dev/cuaa2:br#38400:at=hayes:du:pa=none:pn=5551234:
  </programlisting>

  <para>позволит вам просто набирать <command>tip pain</command> или
    <command>tip muffin</command> для подключения к хостам
    <hostid>pain</hostid> или <hostid>muffin</hostid> и
    <command>tip deep13</command> для доступа к терминальному серверу.</para>

  </answer>
</qandaentry>


<qandaentry>
  <question id="tip-multiline">
    <para>Может ли tip использовать несколько телефонов для одного
      сайта?</para>
  </question>

  <answer>
  <para>Эта проблема возникает, когда в университете есть пара
    модемных входов и несколько тысяч студентов, пытающихся ими
    воспользоваться...</para>

  <para>Создайте описание для вашего университета в файле
    <filename>/etc/remote</filename> (посмотрите справку по &man.remote.5;) и
    используйте <literal>&lt;\@&gt;</literal> при задании
    характеристики <literal>pn</literal>:</para>

  <programlisting>
big-university:\
       :pn=\@:tc=dialout
dialout:\
       :dv=/dev/cuaa3:br#9600:at=courier:du:pa=none:
  </programlisting>

  <para>После этого пропишите номера телефонов университета в файле
    <filename>/etc/phones</filename> (посмотрите справку по
    &man.phones.5;):</para>

  <programlisting>
big-university 5551111
big-university 5551112
big-university 5551113
big-university 5551114
  </programlisting>

  <para>&man.tip.1; будет пытаться воспользоваться всеми телефонными номерами в
    указанном порядке, прежде чем завершить работу.  Если вы хотите, чтобы
    попытки были продолжены, запустите &man.tip.1; в цикле
    while.</para>
  </answer>
</qandaentry>


      <qandaentry>
        <question id="multi-controlp">
          <para>Почему нужно нажимать <keycombo
            action="simul"><keycap>CTRL</keycap><keycap>P</keycap></keycombo>
            дважды для посылки одного этого символа <keycombo
            action="simul"><keycap>CTRL</keycap>
            <keycap>P</keycap></keycombo>?</para>
        </question>

        <answer>
          <para>По умолчанию <keycombo action="simul"><keycap>CTRL</keycap>
            <keycap>P</keycap></keycombo> является специальным символом
            <quote>принудительного ввода</quote>, используемым для указания
            программе &man.tip.1;, что следующий символ является байтом
            данных.  Вы можете назначить функцию символа принудительного ввода
            любому другому символу с помощью команды <literal>~s</literal>,
            которая предназначена для <quote>установки значений
            переменных</quote>.</para>

          <para>Наберите
            <literal>~sforce=<replaceable>single-char</replaceable></literal> с
            начала новой строки.  Здесь под
            <replaceable>single-char</replaceable> имеется в виду любой
            одиночный символ.  Если вы не зададите
            <replaceable>single-char</replaceable>, то символом
            принудительного ввода будет нулевой символ, который можно получить,
            нажав <keycombo action="simul"><keycap>CTRL</keycap>
            <keycap>2</keycap></keycombo> или <keycombo
            action="simul"><keycap>CTRL</keycap>
            <keycap>SPACE</keycap></keycombo>.  Подходящим значением для
            <replaceable>single-char</replaceable> является <keycombo
            action="simul"><keycap>SHIFT</keycap><keycap>CTRL</keycap>
            <keycap>6</keycap></keycombo>, что
            используется только некоторыми терминальными серверами.</para>

          <para>Вы можете задать любое значение для символа принудительного
            ввода, указав его в вашем
            файле <filename>$HOME/.tiprc</filename>:</para>

          <programlisting>force=<replaceable>single-char</replaceable></programlisting>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="uppercase">
          <para>Неожиданно всё стало набираться ЗАГЛАВНЫМИ БУКВАМИ?</para>
        </question>

        <answer>
          <para>Должно быть, вы нажали <keycombo action="simul">
            <keycap>CTRL</keycap><keycap>A</keycap></keycombo>, символ
            <quote>перехода в верхний регистр</quote> программы &man.tip.1;,
            специально предназначенный для тех, у кого не работает клавиша
            <keycap>Caps Lock</keycap>.  Используйте команду
            <literal>~s</literal>, как это было сделано выше, и установите
            значение переменной <quote>raisechar</quote> во что-нибудь
            подходящее.  В действительности вы можете установить его равным
            символу принудительного ввода, если не собираетесь пользоваться
            этими особенностями.</para>

          <para>Следующий пример файла .tiprc должен понравиться пользователям
            редактора Emacs, которым часто приходится нажимать <keycombo
            action="simul"><keycap>CTRL</keycap><keycap>2</keycap></keycombo> и
            <keycombo action="simul"><keycap>CTRL</keycap>
            <keycap>A</keycap></keycombo>:</para>

          <programlisting>force=^^
raisechar=^^</programlisting>

          <para>Здесь ^^ обозначает <keycombo
            action="simul"><keycap>SHIFT</keycap><keycap>CTRL</keycap>
            <keycap>6</keycap></keycombo>.</para>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="tip-filetransfer">
    <para>Как можно передавать файлы с помощью программы
      <command>tip</command>?</para>
  </question>

  <answer>

  <para>Если вы соединились с другой &unix;-системой, вы можете посылать и
    принимать файлы командами <literal>~p</literal> (передача) и
    <literal>~t</literal> (приём).  Эти
    команды запускают программы &man.cat.1; и &man.echo.1; на
    удалённой системе, чтобы принять и послать файлы.  Синтаксис вызова
    имеет такой вид:</para>

  <programlisting>
~p &lt;local-file&gt; [&lt;remote-file&gt;]
~t &lt;remote-file&gt; [&lt;local-file&gt;]
  </programlisting>

  <para>Контроль ошибок передачи при этом не осуществляется, так что вам
    может понадобиться другой протокол передачи, например, zmodem.</para>

  </answer>
</qandaentry>


      <qandaentry>
        <question id="zmodem-tip">
          <para>Как использовать zmodem вместе с
            <application>tip</application>?</para>
        </question>

        <answer>
          <para>Первым делом установите одну из программ, реализующих протокол
            zmodem из коллекции портов (там есть парочка в категории comms,
            <application>lrzsz</application>
            и <application>rzsz</application>).</para>

          <para>Для приёма файлов запустите программу передачи на
            противоположной стороне.  Затем нажмите enter и наберите
            <literal>~C rz</literal> (или <literal>~C lrz</literal>, если у
            вас установлен <application>lrzsz</application>) для начала приёма
            их на локальную машину.</para>

          <para>Для посылки файлов, запустите программу приёма на
            противоположной стороне.  Затем нажмите enter и наберите
            <literal>~C sz <replaceable>files</replaceable></literal> (или
            <literal>~C lsz <replaceable>files</replaceable></literal>) для
            посылки файлов на удалённую систему.</para>
        </answer>
      </qandaentry>
    </qandaset>
  </chapter>


  <chapter id="misc">
    <title>Разное</title>

<qandaset>
<qandaentry>
  <question id="more-swap">
    <para>Почему FreeBSD использует гораздо больше места в разделе подкачки,
      чем &linux;?</para>
  </question>

  <answer>

  <para>Это только кажется, что для FreeBSD требуется больше места на разделе
    подкачки, чем для &linux;.  На самом деле это не так.  Главное отличие
    FreeBSD от &linux; в этом плане заключается в том, что FreeBSD активно
    перемещает неиспользуемые страницы памяти, к которым не было обращений,
    в раздел подкачки, чтобы увеличить объём доступной физической памяти
    для активного использования.  &linux; же перемещает страницы памяти в
    раздел подкачки только в крайнем случае.  Получаемое во FreeBSD
    увеличение нагрузки на раздел подкачки компенсируется более эффективным
    использованием оперативной памяти.</para>

  <para>Заметьте, что, хотя FreeBSD предпочитает использовать раздел подкачки,
    она не может сбросить все неактивные страницы в своп при полностью
    неактивной системе.  Так что вряд ли может возникнуть ситуация, когда,
    проснувшись рано утром, вы обнаружите, что вся ваша система находится в
    разделе подкачки, хотя она простаивала всю ночь.</para>

  </answer>
</qandaentry>


<qandaentry>
  <question id="top-freemem">
    <para>Почему утилита &man.top.1; показывает очень маленький объём
      свободной памяти, даже когда запущено всего лишь несколько
      приложений?</para>
  </question>

  <answer>

  <para>Просто дело в том, что под свободной памятью подразумевается никак не
    используемая память.  Вся память, которая вашей программе явно не
    выделялась, используется ядром FreeBSD для дискового кэша.
    Значения, показываемые утилитой &man.top.1;, помеченные как
    <literal>Inact</literal>, <literal>Cache</literal> и <literal>Buf</literal>
    - это всё кэшированные данные разных степеней устаревания.  То, что данные
    находятся в кэше, означает, что система не будет обращаться к медленному
    диску снова за теми данными, обращение к которым было недавно, повышая таким
    образом общую производительность.  В общем случае маленькие значения в
    пункте <literal>Free</literal>, показываемые утилитой &man.top.1; для
    свободной памяти - это хорошо, если, конечно они не
    <emphasis>очень</emphasis> маленькие.</para>

  </answer>
</qandaentry>


      <qandaentry>
        <question id="chmod-symlinks">
          <para>Почему командой <command>chmod</command> невозможно изменить
            права на символические ссылки?</para>
        </question>

        <answer>
          <para>Символические ссылки не имеют атрибутов доступа, а по умолчанию
            утилита &man.chmod.1; не следует символической ссылке для изменения
            прав доступа к файлу, на который указывает ссылка.  Поэтому, если
            у вас есть файл, скажем, с именем <filename>foo</filename> и
            символическая ссылка <filename>bar</filename> на этот файл, то эта
            команда всегда будет выполняться успешно.</para>

          <screen>&prompt.user; <userinput>chmod g-w bar</userinput></screen>

          <para>Однако права на файл <filename>foo</filename> не
            изменятся.</para>

          <para>Чтобы это работало, используйте опции <option>-H</option> или
            <option>-L</option> вместе с опцией <option>-R</option>.
            Обратитесь к страницам Справочника по команде &man.chmod.1; и по
            &man.symlink.7;.</para>

          <warning>
            <para>Опция <option>-R</option> выполняет команду &man.chmod.1;
              <emphasis>РЕКУРСИВНО</emphasis>.  Будьте осторожны, задавая
              каталоги или символические ссылки на каталоги в параметрах
              &man.chmod.1;.  Если вы хотите изменить права на каталог, на
              который указывает символическая ссылка, используйте &man.chmod.1;
              без опций и следуйте символической ссылке с помощью лидирующего
              слэша (<filename>/</filename>).  Например, если
              <filename>foo</filename> является символической ссылкой на
              каталог <filename>bar</filename>, а вы хотите изменить права
              на <filename>foo</filename> (на самом деле
              <filename>bar</filename>), вы должны выполнить команду типа
              следующей:</para>

            <screen>&prompt.user; <userinput>chmod 555 foo/</userinput></screen>

            <para>Если задан лидирующий слэш, то &man.chmod.1; будет
              следовать символической ссылке, <filename>foo</filename>, меняя
              права на каталог <filename>bar</filename>.</para>
          </warning>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="dos-binaries">
          <para>Можно ли запускать программы для DOS во FreeBSD?</para>
        </question>

        <answer>
          <para>Да, вы можете использовать программу эмуляции DOS <filename
            role="package">emulators/doscmd</filename>, включённую в
            Коллекцию портов &os;.</para>

          <note>
            <para>Утилита <application>doscmd</application> входила в состав
              &os;, но была удалена перед выпуском &os; 5.3.</para>
          </note>

          <para>Если <application>doscmd</application> вас не удовлетворит,
            то дополнительная утилита <filename
            role="package">emulators/pcemu</filename> эмулирует 8088 и набор
            сервисов BIOS, достаточный для запуска многих приложений
            текстового режима DOS.  Ей требуется X Window System.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="translation">
          <para>Что мне нужно сделать, чтобы перевести документацию FreeBSD на
            родной язык?</para>
        </question>

        <answer>
          <para>Ознакомьтесь с <ulink
            url="&url.books.fdp-primer;/translations.html">
            FAQ по Переводам</ulink> из FreeBSD Documentation Project
            Primer.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="freebsd-mail-bounces">
	  <para>Почему возвращается моя электронная почта. отправленная на
            любой из адресов FreeBSD.org?</para>
        </question>

        <answer>
	  <para>В почтовой системе FreeBSD.org в Postfix применяются некоторые
            более строгие проверки входящей почты, и отвергаются сообщения,
            которые сформированы неправильно либо потенциально являются спамом.
            Ваша почта может не приниматься по одной из следующих
            причин:</para>

	  <itemizedlist>
	    <listitem>
              <para>Электронная почта была послана с домена или блока
                IP-адресов, которые известны нам как спамеры.</para>

              <para>Почтовые серверы FreeBSD отвергают электронную почту от
                известных источников спама.  Если вы пользуетесь услугами
                компании или домена, рассылающего или пересылающего спам,
                пожалуйста, переключитесь на другого поставщика услуг, который
                этого не делает.</para>
            </listitem>

            <listitem>
              <para>Тело сообщения электронной почты содержит только
                HTML.</para>

              <para>Почта должна посылать только как обычный текст.
                Пожалуйста, настройте ваш почтовый агент на отправку только
                текста.</para>
            </listitem>

            <listitem>
              <para>Почтовая программа FreeBSD.org не может преобразовать
                адрес IP подключающегося хоста в символическое имя.</para>

              <para>Работа обратного DNS является стандартным требованием для
                принятия почты от хоста.  Настройте обратный DNS для IP-адреса
                вашего почтового сервера.  Многие способы домашнего подключения
                (DSL, кабель, коммутируемое соединение и тому подобное) не
                предоставляют такой возможности.  В таком случае пересылайте
                свою электронную почту через почтовый сервер вашего поставщика
                услуг.</para>
            </listitem>

	    <listitem>
	      <para>Имя хоста, указанное на этапе EHLO/HELO процесса обмена
                сообщениями SMTP не может быть преобразовано в IP-адрес.</para>

	      <para>На этом этапе диалога SMTP, перед принятием почты,
                необходим полное и преобразуемое имя хоста.  Если у вас нет
                имени хоста, который зарегистрирован в DNS, то для пересылки
                своей почты вы должны использовать почтовый сервер вашего
                поставщика услуг.</para>
	    </listitem>

	    <listitem>
	      <para>Ваше сообщение имеет идентификатор, оканчивающийся
                строчкой <quote>localhost</quote>.</para>

	      <para>Некоторые почтовые программы генерируют неправильные
                идентификаторы сообщений, которые не могут быть приняты.  Вам
                нужно заставить почтовую программу пользователя генерировать
                правильный идентификатор сообщения либо настроить ваш агент
                передачи почты на замену этих идентификаторов.</para>
	    </listitem>
          </itemizedlist>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="free-account">
          <para>Где можно получить бесплатный доступ к FreeBSD?</para>
        </question>

        <answer>
          <para>Хотя FreeBSD не предоставляет бесплатный доступ ни к одному из
            своих серверов, другие компании предоставляют &unix;-системы с
            открытым доступом.  Стоимость этой услуги различна, также как и
            ограниченный набор услуг.</para>

          <para><ulink url="http://www.arbornet.org/">Arbornet, Inc</ulink>,
            также известный как M-Net, предоставляет свободный доступ к
            &unix;-системам с 1983 года.  Начиная на платформе Altos с
            работающей System III, сайт перешёл на BSD/OS в 1991.  В июне 2000
            сайт сменил систему снова, теперь на FreeBSD.  M-Net
            может быть доступна через протоколы telnet и SSH и предоставляет
            доступ к полному набору программного обеспечения FreeBSD.  Однако
            доступ к сети ограничен для членов и спонсоров, которые
            поддерживают систему, которая работает как неприбыльная
            организация.  M-Net предоставляет также услуги
            электронной доски объявлений (BBS) и интерактивного чата.</para>

          <para><ulink url="http://www.grex.org/">Grex</ulink> представляет
            собой сайт, очень похожий на M-Net, включая то же самое
            программное обеспечение для электронной доски объявлений (BBS) и
            интерактивного чата.  Однако платформой является &sun; 4M под
            управлением &sunos;.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="sup-define">
          <para>Что такое <command>sup</command> и как это можно
            использовать?</para>
        </question>

        <answer>
          <para>Сокращение <ulink
            url="http://www.FreeBSD.org/cgi/ports.cgi?^sup">SUP</ulink>
            означает Software Update Protocol, который был разработан в
            CMU для синхронизации исходных текстов.  Мы используем его для
            синхронизации исходных текстов на удалённых сайтах с основным
            сервером разработчиков.</para>

          <para>Протокол SUP использует пропускную способность канала
            неэффективно, и был отвергнут.  В настоящее время рекомендуемым
            методом для синхронизации исходных текстов является протокол <ulink
            url="&url.books.handbook;/synching.html#CVSUP">
            CVSup</ulink>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="daemon-name">
          <para>Как зовут этого маленького симпатичного красного парня?</para>
        </question>

        <answer>
          <para>У него нет определённого имени, он называется просто
            <quote>даемон BSD</quote>.  Если вам непременно нужно имя,
            называйте его <quote>beastie</quote>.  Заметьте, что
            <quote>beastie</quote> произносится как <quote>BSD</quote>.</para>

          <para>Больше о даемоне BSD вы можете узнать из его <ulink
            url="http://www.mckusick.com/beastie/index.html">домашней
            страницы</ulink>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="use-beastie">
          <para>Могу ли я использовать изображение даемона BSD?</para>
        </question>

        <answer>
          <para>Вполне.  Права на даемона BSD имеет Marshall
            Kirk McKusick.  Для выяснения подробностей относительно правил
            его использования вы можете обратиться к странице автора <ulink
            url="http://www.mckusick.com/beastie/mainpage/copyright.html">
            Statement on the Use of the BSD Daemon Figure</ulink>.</para>

          <para>В общем, вы можете свободно использовать изображение в
            высокохудожественном стиле и в личных целях, если даются
            соответствующие отсылки.  Если вы хотите использовать его в
            коммерческих целях, вы должны обратиться к Керку МакКузику.
            Дополнительная информация находится на <ulink
            url="http://www.mckusick.com/beastie/index.html">домашней странице
            Даемона BSD</ulink>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="daemon-images">
          <para>Не найдется ли у вас изображений даемона BSD, которые можно
            использовать?</para>
        </question>

        <answer>
          <para>В каталоге <filename>/usr/share/examples/BSD_daemon/</filename>
            есть рисунки в форматах eps и Xfig.</para>
        </answer>
      </qandaentry>


      <qandaentry>
	<question id="glossary">
	  <para>При просмотре списков рассылки, я встретил акроним или
	    другой термин, который мне не понятен.  Где я должен посмотреть,
	    что он значит?</para>
	</question>

        <answer>
	  <para>Пожалуйста, обращайтесь к <ulink
	    url="&url.books.handbook;/freebsd-glossary.html">
	    Глоссарию &os;</ulink>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="bikeshed-painting">
          <para>Почему я должен беспокоиться о цвете велосипедных навесов
            (bikeshed)?</para>
        </question>

        <answer>
  <para>На самом деле, очень краткий ответ на этот вопрос заключается в том,
    что вы этого делать не должны.  Если давать более подробный ответ, то ваше
    умение делать навесы не должно означать, что вы должны препятствовать
    другим делать их просто потому, что вам не нравится цвет, в который
    они собираются их окрашивать.  Эта метафора означает, что вам не нужно
    обсуждать каждую мелочь просто потому, что вы знаете о ней
    достаточно много.  Некоторые люди отмечают, что объём шума, генерируемый
    при появлении некоторого изменения, находится в обратной зависимости от
    сложности самого изменения.</para>

  <para>Более пространный и полный ответ заключается в том, что после очень
    долгого обсуждения того, должна ли утилита &man.sleep.1; обрабатывать
    дробное число, заданное в качестве второго аргумента, &a.phk;
    опубликовал большое сообщение, озаглавленное <quote><ulink
    url="http://www.FreeBSD.org/cgi/getmsg.cgi?fetch=506636+517178+/usr/local/www/db/text/1999/freebsd-hackers/19991003.freebsd-hackers">
    Велосипедный навес (подставьте здесь цвет) на зелёной траве...</ulink></quote>.
    Соответствующие части этого сообщения цитируются ниже.</para>

    <blockquote>
      <attribution>&a.phk; on freebsd-hackers,
        October 2, 1999</attribution>

      <para><quote>Что это за история с навесом для велосипеда?</quote> Кто-то
        из вас задавал такой вопрос.</para>

      <para>Это долгая история, или же это старая история, но на самом деле
        она коротка.  В начале 1960-х годов Паркинсон (C. Northcote Parkinson)
        написал книгу <quote>Закон Паркинсона</quote>, которая содержит много
        интересных взглядов на процесс управления.</para>

      <para>[немного выдержек из краткого содержания книги]</para>

      <para>В конкретном примере велосипедный навес сопоставляется с
        другим важным объектом - атомной электростанцией.
        Я полагаю, что это иллюстрирует древность книги.</para>

      <para>Паркинсон показывает, что вы можете прийти на совещание
        руководителей и получить добро на строительство многомиллионной
        или даже многомиллиардной атомной электростанции, но если вы
        хотите построить навес для велосипеда, то погрязнете в бесконечных
        обсуждениях.</para>

      <para>Паркинсон объясняет это тем, что атомная станция настолько большой,
        дорогой и сложный объект, что люди не могут его осознать и вместо того,
        чтобы попробовать это сделать, они полагаются на то, что кто-то уже
        проверил все мелочи до того, как всё зашло так далеко.  В своей книге
        Ричард П. Фейнманн (Richard P. Feynmann) даёт несколько интересных и
        очень поучительных примеров, связанных с Лос Аламос.</para>

      <para>Велосипедный навес - это противоположный случай.  Любой может
        построить навес за один уикэнд, и у него ещё останется время посмотреть
        футбол по телевизору.  Так что не важно, насколько хорошо вы готовились
        к обсуждению, насколько убедительны будут ваши аргументы, кто-нибудь
        воспользуется шансом показать, что он не зря ест свой хлеб, что он
        обращает внимание, что он <emphasis>здесь</emphasis>.</para>

      <para>В Дании это называется <quote>оставить отпечаток своего
        пальца</quote>.  Это касается личной гордости и престижа, это похоже
        на возможность указать куда-то и сказать: <quote> Вон там! Это сделал
        <emphasis>я</emphasis>.</quote>  Это сильно выражено в политиках, но
        присутствует во многих людях, которые получают возможность сделать
        это.  Просто вспомните об отпечатках ног во влажном цементе.</para>
    </blockquote>

        </answer>
      </qandaentry>
    </qandaset>
  </chapter>


  <chapter id="funnies">
    <title>Юмор от FreeBSD</title>

    <qandaset>
      <qandaentry>
        <question id="very-very-cool">
          <para>Насколько греется процессор при работе FreeBSD?</para>
        </question>

        <answer>
          <para>В. Кто-нибудь делал замеры температуры при работе FreeBSD?  Я
            знаю, что &linux; греется меньше, чем DOS, но никогда не видел
            упоминания FreeBSD.  Наверное, он сильно греется.</para>

          <para>О. Нет, но мы сделали различные вкусовые тесты у добровольцев с
            завязанными глазами, которые до этого приняли по 250 микрограмм
            LSD-25.  35% добровольцев заявило, что FreeBSD имеет вкус апельсина,
            тогда как вкус &linux; расценивался как фиолетовый туман.  Ни одна
            из групп не отметила значительной разницы в температуре.  Мы
            хотели опубликовать полные результаты этого опроса, когда
            обнаружили, что слишком много добровольцев покинули помещение во
            время тестов, что несколько смазало результаты.  Думаем, что
            большинство из них работают сейчас в Apple над их новым GUI
            <quote>чеши и нюхай</quote>.  Это старый добрый бизнес!</para>

          <para>Серьёзно, и FreeBSD, и &linux; используют инструкцию
            <acronym>HLT</acronym> (halt), когда система простаивает, что
            уменьшает потребление энергии и в свою очередь, выделение тепла.
            Вдобавок, если у вас настроен APM (комплексное управление
            энергопотреблением), то FreeBSD может переводить процессор в режим
            пониженного энергопотребления.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="letmeoutofhere">
          <para>Кто там скребётся в микросхемах памяти??</para>
        </question>

        <answer>
          <para>В. Делает ли FreeBSD что-нибудь <quote>эдакое</quote> при
            компиляции ядра, что вызывает поскрипывание микросхем памяти?  При
            компиляции (и в короткий промежуток времени после обнаружения
            дисковода при старте системы) от микросхем памяти исходит странный
            царапающий звук.</para>

          <para>О. Да!  Вы, наверное, видели частое упоминание
            <quote>даемонов</quote> в документации по BSD, но не многие знают,
            что это настоящие нематериальные существа, которые теперь
            завладели вашим компьютером.  Царапающий звук, издаваемый
            микросхемами памяти - это на самом деле высокочастотное
            перешёптывание между даемонами, когда они решают, как лучше
            справиться с различными задачами по администрированию
            системы.</para>

          <para>Если шум достиг ваших ушей, команда DOS <command>fdisk
            /mbr</command> их спугнёт, но не удивляйтесь, если они отреагируют
            соответствующим образом и попытаются вас остановить.  Фактически,
            если во время выполнения этой команды вы услышите сатанинский
            голос Билла Гейтса из встроенного динамика, бегите и даже не
            оглядывайтесь!  Избавленные от противостояния с даемонами BSD,
            близнецы-демоны DOS и &windows; часто могут захватить полный
            контроль не только над вашей машиной и навлечь вечное проклятие на
            вашу душу.  Теперь, когда вы это знаете, если бы у вас был выбор,
            думаем, что вы бы предпочли слышать царапающий звук, не так
            ли?</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="changing-lightbulbs">
          <para>Сколько требуется разработчиков FreeBSD, чтобы сменить
            электрическую лампочку?</para>
        </question>

        <answer>
          <para>Необходимо иметь ровно одну тысячу сто шестьдесят девять
            разработчиков:</para>

          <para>Двадцать три сообщат в -CURRENT о том, что не горит свет;</para>

          <para>Четыре начнут утверждать, что это проблема конфигурации и такие
            сообщения нужно посылать в -questions;</para>

          <para>Трое оформят PR по этому поводу, причём одно их них будет
            направлено в doc и будет содержать только строчку
            <quote>здесь темно</quote>;</para>

          <para>Один закоммитит неоттестированную лампочку, что сломает
            построение системы, а затем через пять минут вернёт всё
            назад;</para>

          <para>Восемь поругаются с авторами PR по поводу включения патчей в
            PR;</para>

          <para>Пять сообщат о том, что не проходит компиляция системы;</para>

          <para>Тридцать один человек ответит, что у них всё работает и
            наверное, те выполняли cvsup в неподходящее время;</para>

          <para>Один пошлёт патч для новой лампочки в -hackers;</para>

          <para>Один пожалуется, что у него имелись патчики ещё три года назад,
            но когда он послал их в -CURRENT, они были проигнорированы и он имел
            неудачный опыт работы с системой PR; кроме того предлагаемая
            лампочка не имеет отражателя.</para>

          <para>Тридцать семь начнут кричать, что лампочки не относятся к
            базовой системе, что коммиттеры не имеют права делать такие вещи
            без опроса общественности и ЧТО ВООБЩЕ -CORE ДЕЛАЕТ ПО ЭТОМУ
            ПОВОДУ?</para>

          <para>Две сотни напишут о цвете велосипедного навеса;</para>

          <para>Трое скажут, что этот патч не соответствует &man.style.9;</para>

          <para>Семнадцать возразят, что предлагаемая новая лампа подпадает под
            лицензию GPL;</para>

          <para>Пятьсот восемьдесят шесть раздуют флейм по поводу сравнения
            лицензий GPL, BSD, MIT, NPL и личных мнений о неизвестных
            основателей FSF;</para>

          <para>Семеро пошлют различные части этих обсуждений в -chat и
            -advocacy;</para>

          <para>Один закоммитит предлагаемую лампу, хотя она светит хуже, чем
            старая;</para>

          <para>Двое откатят эти изменения с ужасной руганью в журнале коммитта
            о том, что лучше FreeBSD будет сидеть в темноте, чем с тусклой
            лампой.</para>

          <para>Сорок шесть громко воспротивятся этому изменению и потребуют
            объяснений от -core;</para>

          <para>Одиннадцать попросят уменьшить размер лампочки, чтобы она
            подошла к их Тамагочи на случай, если мы когда-нибудь соберёмся
            переносить FreeBSD на эту платформу;</para>

          <para>Семьдесят три заявят о SNR в -hackers и -chat и в знак протеста
            отпишутся;</para>

          <para>Тринадцать пошлют письма <quote>unsubscribe</quote>, <quote>How
            do I unsubscribe?</quote> или <quote>Please remove me from the
            list</quote> с обычной подписью;</para>

          <para>Один закоммитит работающую лампочку в то время, как все будут
            слишком заняты руганью, чтобы это заметить;</para>

          <para>Тридцать один человек напишет, что новая лампочка будет светить
            на 0.364% ярче, если её откомпилировать с помощью TenDRA (хотя при
            этом она приобретёт форму куба) и что FreeBSD должна перейти на
            компилятор TenDRA, а не на GCC;</para>

          <para>Один заметит, что у лампочки отсутствует цоколь;</para>

          <para>Девять (включая авторов PR) спросят <quote>что такое
            MFC?</quote>;</para>

          <para>Спустя две недели после смены лампочки пятьдесят семь человек
            сообщат о том, что света всё равно нет.</para>

          <para><emphasis>&a.nik; добавил:</emphasis></para>

          <para><emphasis>Я сильно смеялся над всем этим.</emphasis></para>

          <para><emphasis>И тогда я подумал, <quote>Постойте-ка, найдётся ли
            кто-нибудь, чтобы задокументировать это?</quote></emphasis></para>

          <para><emphasis>И на меня снизошло озарение :-)</emphasis></para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="dev-null">
          <para>Куда направляются данные, записываемые в
            <filename>/dev/null</filename>?</para>
        </question>

        <answer>
          <para>Они отправляются в специальную сточную трубу для данных в CPU,
            где преобразуются в тепло, выдуваемое через охлаждающие вентиляторы.
            Вот почему охлаждение ЦП становится все более важным; так как люди
            используют все более быстрые процессоры, они все менее заботятся о
            данных, все большее их количество оканчивает свой путь в
            <filename>/dev/null</filename>, перегревая ЦП.  Если вы удалите
            <filename>/dev/null</filename> (что соответственно отключит
            трубу данных в ЦП), то ваш процессор может охладиться, но система
            начнет переполняться излишними данными и начнет работать с
            ошибками.  Если у вас быстрое сетевое подключение, вы можете
            охладить CPU, читая данные из <filename>/dev/random</filename> и
            посылая их куда-нибудь; однако вы рискуете перегреть ваше сетевое
            соединение и <filename>/</filename> или разозлить вашего
            провайдера, так как большинство данных преобразуется в тепло на его
            оборудовании, но, как правило, у него хорошее охлаждение, так что
            если вы не перестараетесь, все должно быть в порядке.</para>

	  <para><emphasis>Пол Робинсон (Paul Robinson)
            добавляет:</emphasis></para>

	  <para>Есть и другие методы.  Как знает каждый хороший системный
            администратор, частью хорошей практики является посылка данных на
            экран интересным образом, чтобы феи, которые образуют картинку,
            были счастливы.  Экранные феи (часто неправильно называемые
            <quote>пикселами</quote>) различаются по цвету головных уборов,
            которые они носят
            (красные, зеленые или синие), и прячутся или появляются (показывая,
            таким образом, цвет своих шляп), когда получают немного пищи.
            Видеоадаптеры преобразуют данные в еду для фей, а затем посылают
            ее феям - чем дороже адаптер, тем лучше еда, тем лучше ведут себя
            феи.  Они также нуждаются в постоянной стимуляции - вот зачем нужны
            хранители экранов.</para>

          <para>Продолжив наше предположение, вы можете просто выдавать
            случайные данные на консоль, таким образом позволяя феям их
            потреблять.  Это вовсе приводит к прекращению выделения тепла,
            феи постоянно счастливы, а данные быстро исчезают, даже если
            на вашем экране все выглядит несколько хаотично.</para>

          <para>Как бывший администратор крупного провайдера, который имел
            много проблем при попытке поддерживать постоянную температуру в
            серверной комнате, я выступаю против того, чтобы люди посылали
            ненужные им данные в сеть.  Волшебников, которые выполняют
            коммутацию пакетов и маршрутизацию, это также затрудняет.</para>
	</answer>
      </qandaentry>
    </qandaset>
  </chapter>


  <chapter id="advanced">
    <title>Сложные темы</title>

    <qandaset>
      <qandaentry>
        <question id="learn-advanced">
          <para>Как можно узнать больше о внутреннем устройстве FreeBSD?</para>
        </question>

        <answer>
          <para>В настоящее время существует только одна книга по внутреннему
            устройству ОС, посвящённая FreeBSD, а именно <quote>The Design and
            Implementation of the FreeBSD Operating System</quote> Маршалла
            Кёрка МакКузика (Marshall Kirk McKusick) и Джорджа В. Невилле-Нейла
            (George V. Neville-Neil), ISBN 0-201-70245-2.  В ней
            рассматривается FreeBSD версии 5.X.</para>

          <para>Кроме того, большинство общих знаний о &unix; непосредственно
            применимо к FreeBSD.</para>

          <para>Список относящихся к делу книг можно найти в разделе
            Руководства <ulink
            url="&url.books.handbook;/bibliography-osinternals.html">
            Библиография по внутреннему устройству операционной
            системы</ulink>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
	<question id="how-to-contribute">
	  <para>Как можно оказать помощь проекту FreeBSD?</para>
	</question>

	<answer>
	  <para>Пожалуйста, обратитесь к соответствующей <ulink
	    url="&url.articles.contributing;/article.html">статье</ulink>,
            в которой вы получите советы относительно того, как это сделать.
            Ваша помощь более чем приветствуется!</para>
	</answer>
      </qandaentry>


      <qandaentry>
        <question id="define-snap-release">
          <para>Что такое SNAP и RELEASE?</para>
        </question>

        <answer>
          <para>В <ulink url="http://www.FreeBSD.org/cgi/cvsweb.cgi">Хранилище
            CVS</ulink> сейчас находятся три активно/полуактивно развивающихся
            ветки FreeBSD. (Более ранние ветки изменяются очень редко, именно
            поэтому в разработке только три активных ветки):</para>

          <itemizedlist>
            <listitem>
              <para><literal>RELENG_5</literal>
                AKA <emphasis>5-STABLE</emphasis></para>
            </listitem>

            <listitem>
              <para><literal>RELENG_6</literal>
                AKA <emphasis>6-STABLE</emphasis></para>
            </listitem>

            <listitem>
              <para><literal>HEAD</literal> AKA <emphasis>-CURRENT</emphasis>
                AKA <emphasis>7.X-CURRENT</emphasis></para>
            </listitem>
          </itemizedlist>

          <para><literal>HEAD</literal> - это не реальный тэг ветки, как другие
            два; это просто символьная константа для обозначения
            <quote><emphasis>текущего, не ветвящегося, находящегося в
            разработке дерева</emphasis></quote>, то есть
            <quote>-CURRENT</quote>.</para>

          <para>На данный момент <quote>-CURRENT</quote> является находящимся в
            разработке деревом 7.X, ветка <literal>5-STABLE</literal>,
            <symbol>RELENG_5</symbol>, отделилась от <quote>-CURRENT</quote> в
            октябре 2004 года, а ветка <literal>6-STABLE</literal>,
            <symbol>RELENG_6</symbol>, отделилась от <quote>-CURRENT</quote> в
            ноябре 2005 года.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="custrel">
          <para>Как самому сделать релиз?</para>
        </question>

        <answer>
          <para>Пожалуйста, обратитесь к статье о <ulink
            url="&url.articles.releng;/article.html">процессе выпуска
            релизов</ulink>.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="makeworld-clobbers">
          <para>По команде <command>make world</command> были переустановлены
            все программы.</para>
        </question>

        <answer>
          <para>Да, так и должно быть; как говорит название этой команды,
            <command>make world</command> выполняет построение всех системных
            файлов с нуля, так что в итоге можете быть уверены, что получите
            чистую рабочую систему (вот почему это занимает столько
            времени).</para>

          <para>Если в момент запуска команд <command>make world</command> или
            <command>make install</command> определена переменная окружения
            <literal>DESTDIR</literal>, то вновь создаваемые файлы будут
            помещены в дерево каталогов.  идентичное существующему, с корнем,
            располагающимся в <literal>${DESTDIR}</literal>.  Однако некоторые
            случайные комбинации модификаций совместно используемых библиотек
            и версий компилируемых программ при исполнении команды
            <command>make world</command>, могут этому помешать.</para>
        </answer>
      </qandaentry>

      <qandaentry>
	<question id="cvsup-round-robin">
	  <para>Почему cvsup.FreeBSD.org не является одной DNS-записью
            для нескольких машин, чтобы распределить нагрузку между
            несколькими CVSup-серверами?</para>
	</question>

	<answer>
	  <para>Хотя зеркала CVSup обновляются с основного CVSup-сервера каждый
            час, это обновление может происходить в любой момент в течение
            часа.  Это значит, что некоторые серверы будут иметь более новый
            код, чем остальные, хотя разница между версиями кода не превышает
            часа.  Если бы для серверов <hostid
            role="fqdn">cvsup.FreeBSD.org</hostid> использовалась одна
            DNS-запись, то простое перенаправление пользователей на случайно
            выбранный сервер CVSup, при условии, что CVSup будет запускаться
            два раза подряд, может привести к сгрузке кода, более старого, чем
            тот, что присутствует в системе.</para>
	</answer>
      </qandaentry>


      <qandaentry>
        <question id="bus-speed-defaulted">
          <para>Почему при загрузке системы выдаётся сообщение <quote>(bus speed
            defaulted)?</quote>.</para>
        </question>

        <answer>
          <para>Адаптеры SCSI Adaptec 1542 позволяют программно изменять
            скорость доступа к шине.  Предыдущие версии драйвера 1542 пытались
            определить максимально возможную скорость работы и установить это
            значение.  Мы обнаружили, что у некоторых пользователей это
            приводило к нарушению работоспособности системы, поэтому эта
            возможность сейчас вынесена в параметр конфигурации ядра
            <symbol>TUNE_1542</symbol>.  Использование этой опции на тех
            системах, где она работает, может привести к ускорению доступа к
            дискам, а там, где это не работает, может привести к потере
            данных.</para>
        </answer>
      </qandaentry>


      <qandaentry>
        <question id="ctm">
          <para>Можно ли работать с -CURRENT при ограниченном доступе в
            Internet?</para>
        </question>

        <answer>
          <para>Да, это можно делать <emphasis>без</emphasis> скачивания
            полного дерева исходных текстов с помощью <ulink
            url="&url.books.handbook;/synching.html#CTM">системы
            CTM</ulink>.</para>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="split-240k">
    <para>Как вы разделяете дистрибутив на файлы по 240К?</para>
  </question>

  <answer>

  <para>Команда &man.split.1; в современных BSD-системах имеет опцию
    <option>-b</option>, позволяющую разрезать файлы на части с точностью до
    байта.</para>

  <para>Вот пример из файла <filename>/usr/src/Makefile</filename>.</para>

  <programlisting>
bin-tarball:
(cd ${DISTDIR}; \
tar cf - . \
gzip --no-name -9 -c | \
split -b 240640 - \
${RELEASEDIR}/tarballs/bindist/bin_tgz.)
  </programlisting>

  </answer>
</qandaentry>


      <qandaentry>
        <question id="submitting-kernel-extensions">
          <para>Я написал некоторое добавление к ядру, кому его послать?</para>
        </question>

        <answer>
          <para>Обратитесь к статье о том, как <ulink
            url="&url.articles.contributing;/article.html">помочь проекту
            FreeBSD</ulink>, чтобы выяснить, как это сделать.</para>

          <para>И спасибо Вам за Ваши усилия!</para>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="pnp-initialize">
    <para>Как распознаются и инициализируются адаптеры ISA Plug N Play?</para>
  </question>

  <answer>

  <para>От: Фрэнка Дурды IV (Frank Durda IV)
    <email>uhclem@nemesis.lonestar.org</email></para>

  <para>Если рассматривать на самом низком уровне, то существует несколько
    портов ввода/вывода, в которые должны выводить информацию все адаптеры
    PnP, когда компьютер пытается выполнить запрос о наличии установленных
    адаптеров.  Так что, когда запускается процедура определения адаптеров
    PnP, она выполняет запрос о наличии каких-либо адаптеров PnP, а все
    такие адаптеры выдают свой номер модели при чтении того же порта
    ввода/вывода, поэтому процедура определения получит ответ на свой
    запрос, состоящий из логически наложенных номеров моделей,
    интерпретируемый как <quote>да</quote>.  В этом ответе по крайней мере
    один бит будет установлен в единицу.  Затем код определения адаптеров может
    <quote>выключать</quote> адаптеры с ID (назначаемыми Microsoft/Intel),
    большими, чем X.  Потом следует попытка определить, остались ли ещё
    адаптеры, отвечающие на запрос.  Если ответ <literal>0</literal>, то
    адаптеров с ID, большими чем X, нет.  После этого делается попытка
    определить наличие адаптеров с номерами, меньшими чем <literal>X</literal>.
    Если они есть, то становится известно, что есть адаптеры с номерами,
    меньшими, чем X.  Тогда происходит запрос адаптерам, большим чем
    X-(limit-4), на выключение.  Запрос повторяется. Применив этот метод
    полудвоичного поиска границ расположения ID достаточное количество раз, код
    идентификации найдёт все адаптеры PnP, установленные в данной машине
    за число итераций, гораздо меньшее, чем может занять перебор 2^64
    возможных вариантов ID.</para>

  <para>ID представляет собой два 32-разрядные числа (всего их 2^64)
    + 8 бит контрольной суммы.  Первые 32 бита являются идентификатором
    производителя.  Они никогда не сообщаются, однако часто бывает, что
    различные типы адаптеров от одного и того же производителя имеют
    различные 32-битные значения идентификатора производителя.
    Необходимость в 32 разрядах только для задания производителя адаптера
    выглядит несколько излишним.</para>

  <para>Оставшиеся 32 бита являются серийным номером, Ethernet-адресом,
    чем-либо, делающим этот адаптер уникальным.  Производитель не должен
    выпускать других адаптеров, имеющих то же самое значение этих битов,
    если, конечно, у них не разные идентификаторы производителя.  Таким
    образом, вы можете иметь несколько адаптеров одинакового типа, но с
    различными 64-разрядными номерами.</para>

  <para>Группы по 32 бита не могут быть нулевыми.  Это позволяет при
    логическом объединении OR их номеров получать ненулевое значение во
    время начального поиска адаптеров.</para>

  <para>Как только система определила ID всех адаптеров, она активизирует
    каждый адаптер, по одному за раз (через те же порты ввода/вывода), и
    определяет, какие ресурсы требуются данному адаптеру, какие возможные
    прерывания доступны и т.д.  Сканирование и сбор информации происходит
    по всем адаптерам.</para>

  <para>Эта информация соотносится с содержащейся в файлах ECU на диске
    или в MLB BIOS.  Поддержка PnP из ECU и BIOS для аппаратуры на
    MLB обычно имеет синтетический характер, и периферия не выполняет
    полностью процедуру настоящего PnP.  Однако, используя BIOS и
    информацию из ECU, процедура инициализации может обнаружить устройства
    PnP, которые не могут быть найдены другим способом.</para>

  <para>Затем устройства PnP опрашиваются ещё раз для назначения им портов
    ввода/вывода, DMA, IRQ и адресов отображаемой памяти.  Теперь
    устройства должны иметь именно такие настройки и они должны оставаться
    такими до следующей перезагрузки, хотя нигде не сказано, что вы не
    можете их менять, когда захотите.</para>

  <para>Здесь сделано много упрощений, однако общую идею вы должны
    уловить.</para>

  <para>Microsoft использовала для PnP некоторые порты статуса первого
    принтера, по их логике, не существует адаптеров, использующих эти
    адреса для ввода/вывода.  Я обнаружил один такой адаптер принтера от
    IBM, который декодирует запись в порт статуса в момент начального
    опроса устройств PnP, на что MS ответил <quote>хулиган</quote>. Так что они
    выполняют запись в порт статуса принтера для установки адресов,
    вдобавок используют этот адрес + <literal>0x800</literal>, и ещё один порт
    ввода/вывода, который может располагаться где угодно в диапазоне между
    <literal>0x200</literal> и <literal>0x3ff</literal>, для чтения.</para>

  </answer>
</qandaentry>


      <qandaentry>
        <question id="major-numbers">
          <para>Мне нужно старшее число для написанного мною драйвера
            устройства.</para>
        </question>

        <answer>
	  <para>В &os.current; после февраля 2003 года появился механизм
            динамического и автоматического выделения старших номеров для
            драйверов устройств во время выполнения.  Этот механизм гораздо
            более предпочтителен, чем устаревшая процедура статического
            распределения старших номеров устройств.  Некоторые комментарии
            по этому поводу можно найти в файле
	    <filename>src/sys/conf/majors</filename>.</para>

	  <para>Если по каким-то причинам вам обязательно нужно использовать
            статические старшие номера, то процесс их получения зависит от
            того, планируете вы сделать этот драйвер
            общедоступным или нет.  Если это так, то, пожалуйста, пошлите нам
            копию исходных текстов драйвера вместе с соответствующими
            модификациями в файле <filename>files.i386</filename>, пример
            описания устройства в файле конфигурации ядра и соответствующий код
            &man.MAKEDEV.8; для создания специальных файлов устройств, которые
            использует ваше устройство.  Если это не так. или это невозможно
            из-за лицензионных ограничений, то для старшего числа символьного
            устройства и старшего числа блочного устройства для этих целей были
            зарезервированы значения 32 и 8 соответственно; используйте их.  В
            любом случае.  мы будем рады услышать о вашем драйвере
            в &a.hackers;.</para>
        </answer>
      </qandaentry>


<qandaentry>
  <question id="alternate-directory-layout">
    <para>Альтернативный метод размещения каталогов</para>
  </question>

  <answer>

  <para>В ответ на вопрос о других методах размещения каталогов могу
    сказать, что используемая в настоящее схема не претерпела изменений
    с 1983 года.  Эти соглашения были предназначены для оригинальной
    файловой системы FFS, я никогда их не пересматривал.  Эта схема
    прекрасно работает, позволяя избежать переполнения групп дорожек.
    Как некоторые из вас замечали, она работает плохо при поиске.
    Большинство файловых систем создаются из архивов, которые были
    созданы с глубиной первого поиска (aka ftw). Это приводит к тому, что
    их каталоги размещаются на нескольких группах дорожек, создавая
    наихудший случай для последующего поиска глубиной один.  Если бы
    было известно общее количество каталогов, которые должны быть созданы,
    выходом было бы создание (общее количество / количество групп дорожек)
    на дорожку группу перед переходом.  Обычно это число определяется чисто
    эвристически.  Даже при использовании маленького фиксированное числа,
    скажем 10, значительно улучшает ситуацию.  Чтобы различать операции
    восстановления от обычных операций (где текущий алгоритм подходит),
    вы можете использовать объединение в кластеры объёмом до 10, если они
    делаются в окне, равным 10 секундам.  Во всяком случае, я думаю, что
    это требует некоторых экспериментов.</para>

  <para>Кёрк МакКузик (Kirk McKusick), Сентябрь 1998</para>

  </answer>
</qandaentry>


<qandaentry>
  <question id="kernel-panic-troubleshooting">
    <para>Что делать при аварийном остановах системы</para>
  </question>

  <answer>

  <para><emphasis>[Этот раздел был вырезан из письма, написанного &a.wpaul; в
    <link linkend="mailing">список рассылки</link> freebsd-current
    &a.des;, который исправил несколько опечаток и добавил комментарии в
    квадратных скобках]</emphasis></para>

  <programlisting>
From: Bill Paul &lt;wpaul@skynet.ctr.columbia.edu&gt;
Subject: Re: the fs fun never stops
To: Ben Rosengart
Date: Sun, 20 Sep 1998 15:22:50 -0400 (EDT)
Cc: current@FreeBSD.org
  </programlisting>

  <para><emphasis>Бен Розенгарт отправил письмо, содержащее
    следующее аварийное сообщение системы]</emphasis></para>

  <programlisting>
&gt; Fatal trap 12: page fault while in kernel mode
&gt; fault virtual address   = 0x40
&gt; fault code              = supervisor read, page not present
&gt; instruction pointer     = 0x8:0xf014a7e5
                                ^^^^^^^^^^
&gt; stack pointer           = 0x10:0xf4ed6f24
&gt; frame pointer           = 0x10:0xf4ed6f28
&gt; code segment            = base 0x0, limit 0xfffff, type 0x1b
&gt;                         = DPL 0, pres 1, def32 1, gran 1
&gt; processor eflags        = interrupt enabled, resume, IOPL = 0
&gt; current process         = 80 (mount)
&gt; interrupt mask          =
&gt; trap number             = 12
&gt; panic: page fault
  </programlisting>

  <para>[Если] вы увидите такое сообщение, просто его воспроизвести и
    послать нам не достаточно.  Указатель инструкций, выделенный мною,
    важен, к сожалению, его значение зависит от конфигурации ядра.
    Другими словами, его значение меняется в зависимости от конкретного
    ядра, которое вы используете.  Если вы используете ядро GENERIC
    одного из снэпшотов, то кто-то ещё может отследить функцию, вызвавшую
    ошибку, но если вы работаете со специально отконфигурированным ядром,
    то только <emphasis>вы</emphasis> можете сказать нам, где случилась
    ошибка.</para>

  <para>Вот что вы должны сделать:</para>

  <procedure>
    <step>
      <para>Запишите значение указателя инструкций.  Заметьте, что
        часть <literal>0x8:</literal> в этом случае не важна: нам нужна часть
        <literal>0xf0xxxxxx</literal>.</para>
    </step>

    <step>
      <para>Когда система перезагрузится, сделайте следующее:

        <screen>
&prompt.user; <userinput>nm -n /kernel.that.caused.the.panic | grep f0xxxxxx</userinput>
        </screen>

        где <literal>f0xxxxxx</literal> - это значение указателя инструкций.
        Однако неприятность заключается в том, что вы не получите точного
        соответствия, так как в таблице имен ядра для точек входа в функции
        даны адреса на начало функций, а указатель инструкций будет указывать
        куда-то внутрь её тела.  Если вы не получили точного соответствия,
        опустите последнюю цифру в значении указателя инструкций и попробуйте
        снова, то есть:

        <screen>
&prompt.user; <userinput>nm -n /kernel.that.caused.the.panic | grep f0xxxxx</userinput>
        </screen>

        Если и это не привело ни к каким результатам, отрежьте следующую
        цифру.  Повторяйте, пока не получите хоть что-то.  Результатом будет
        список функций, которые, возможно, привели к аварийному останову.
        Этот механизм обнаружения ошибочного места довольно неточен, но это
        всё же лучше, чем ничего.</para>
    </step>
  </procedure>

  <para>Зачастую люди приводят подобные аварийные сообщения, на редко кто
    утруждается привести соответствие указателя инструкций с функцией в
    таблице символов ядра.</para>

  <para>Лучшим способом выяснить причину, вызвавшую аварийный останов, является
    получение аварийного дампа системы, а затем использование
    &man.gdb.1; для получения трассировки вызовов в этом
    дампе.</para>

  <para>Во всяком случае, обычно я использую такой способ:</para>

  <procedure>
    <step>
      <para>Отредактируйте конфигурационный файл ядра, добавив строку
        <literal>options DDB</literal>, если вам зачем-то понадобился
        встроенный отладчик.  (Я использую его в основном для указания точек
        останова, если подозреваю возникновение бесконечных циклов.)</para>
    </step>

    <step>
      <para>Выполните
        <command>config -g <replaceable>KERNELCONFIG</replaceable></command>
        для создания каталога построения ядра.</para>
    </step>

    <step>
      <para><command>cd /sys/compile/<replaceable>KERNELCONFIG</replaceable>; make</command></para>
    </step>

    <step>
      <para>Дождитесь окончания компиляции ядра.</para>
    </step>

    <step>
      <para><command>make install</command></para>
    </step>

    <step>
      <para>reboot</para>
    </step>
  </procedure>

  <para>В процессе выполнения команды &man.make.1; будут построены два ядра,
    <filename>kernel</filename> и <filename>kernel.debug</filename>.
    <filename>kernel</filename> будет установлен как
    <filename>/kernel</filename>, тогда как <filename>kernel.debug</filename>
    может быть использован в качестве источника отладочной информации для
    &man.gdb.1;.</para>

  <para>Чтобы включить сброс аварийного дампа, вам нужно отредактировать файл
    <filename>/etc/rc.conf</filename> так, чтобы устройство
    <literal>dumpdev</literal> указывало на раздел подкачки. В этом случае
    скрипты &man.rc.8; будут вызывать команду &man.dumpon.8; для включения
    создания аварийных дампов. Вы можете запустить команду &man.dumpon.8;
    вручную. После аварийной остановки аварийный дамп может быть получен с
    помощью программы &man.savecore.8; если значение переменной
    <literal>dumpdev</literal> было установлено в
    <filename>/etc/rc.conf</filename>, скрипты &man.rc.8; запустят
    &man.savecore.8; автоматически и поместят аварийный дамп в
    каталог <filename>/var/crash</filename>.</para>

    <note>
      <para>Аварийные дампы FreeBSD обычно имеют размер, равный физическому
        объёму оперативной памяти вашей машины.  Так что если у вас 64 Мбайт
        ОЗУ, вы получите дамп размером 64 Мбайт.  Поэтому вы должны
        удостовериться,
        что в каталоге <filename>/var/crash</filename> достаточно места для
        хранения дампа.  Либо вы можете вручную запустить
        &man.savecore.8; и создать аварийный дамп в другом
        каталоге, где достаточно места.  Размер аварийного дампа можно
        уменьшить, указав в конфигурации ядра
        <literal>options MAXMEM=(размер)</literal> подходящее значение для
        объёма памяти, которое будет использоваться ядром.  Например, если у вас
        128 Мбайт ОЗУ, вы можете ограничить использование памяти ядром 16
        мегабайтами, так что размер аварийного дампа будет равен 16 Мбайт, а не
        128.</para>
    </note>

  <para>Как только вы получили аварийный дамп, вы можете выполнить трассировку
    вызовов с помощью &man.gdb.1; таким образом:</para>

  <screen>&prompt.user; <userinput>gdb -k /sys/compile/KERNELCONFIG/kernel.debug /var/crash/vmcore.0</userinput>
<prompt>(gdb)</prompt> <userinput>where</userinput></screen>

  <para>Заметьте, что при этом может быть выведено несколько экранов
    информации; в идеале вы должны использовать &man.script.1; для их
    перехвата.  При использовании необработанного образа ядра со всей
    отладочной информацией может быть найдена конкретная строка исходного
    текста ядра, при достижении которой случилась аварийная остановка.
    Для выяснения последовательности событий, приведших к аварийному
    останову, обычно читается трассировка стека снизу вверх.  Вы можете
    также использовать &man.gdb.1; для вывода значений различных
    переменных или структур, чтобы выяснить состояние системы во время
    аварии.</para>

  <para>Теперь, если вы в самом деле душевнобольной и у вас есть второй
    компьютер, то можете настроить &man.gdb.1; для удалённой
    отладки, так, что сможете использовать &man.gdb.1; на одном
    компьютере, чтобы
    отладить ядро на другом, включая использование точек останова,
    пошагового прохода по коду ядра, всё как с обычной прикладной
    программой.  Я пока с этим не игрался, так как не часто имею
    возможность поставить две машины одну напротив другой для отладки.</para>

  <para><emphasis>[Билл (Bill) добавил: "Я забыл обратить ваше внимание
    на одну вещь: если у вас включена поддержка DDB и ядро переходит
    в режим отладки, вы можете намеренно вызвать аварийный останов
    (и создание аварийного дампа), набрав 'panic' в командной строке
    ddb.  Этот процесс может снова вызвать отладчик.  В этом случае
    наберите 'continue' и процесс будет завершён созданием аварийного
    дампа." -ed]</emphasis></para>

  </answer>
</qandaentry>


<qandaentry>
  <question id="dlsym-failure">
    <para>Перестала работать функция dlsym() для ELF!</para>
  </question>

  <answer>
  <para>По умолчанию при работе с форматом ELF символы, определённые в
    выполнимом файле, не доступны динамическому загрузчику.  Поэтому
    при вызове функции <function>dlsym()</function>, которая осуществляет
    поиск по дескриптору, полученному после вызова <function>dlopen(NULL,
    flags)</function>, желаемый результат достигнут не будет.</para>

  <para>Если вы хотите осуществить поиск в выполнимом файле процесса с помощью
    функции <function>dlsym()</function>, вам нужно компоновать выполнимый файл
    с опцией <option>-export-dynamic</option> компоновщика ELF
    (&man.ld.1;).</para>
  </answer>
</qandaentry>


<qandaentry>
  <question id="change-kernel-address-space">
    <para>Увеличение и уменьшение адресного пространства ядра</para>
  </question>

  <answer>

  <para>По умолчанию размер адресного пространства ядра равен 256 Мбайт во
    FreeBSD 3.X и 1 Гбайт во FreeBSD 4.X.  Если вы используете FreeBSD
    в качестве сервера с интенсивной сетевой нагрузкой (скажем,
    большой FTP или HTTP сервер), вы можете обнаружить, что 256 Мбайт
    недостаточно.</para>

  <para>Каким же образом можно увеличить адресное пространство? Здесь
    есть два момента.  Во-первых, вам нужно указать ядру выделить
    большее количество адресного пространства для самого ядра.  Во-вторых,
    так как ядро загружается в верхнюю часть адресного пространства, вам
    нужно уменьшить адрес загрузки так, чтобы он не вышел за верхнюю
    границу. </para>

  <para>Первая проблема решается увеличением значения константы
    <literal>NKPDE</literal> в
    файле <filename>src/sys/i386/include/pmap.h</filename>.  В случае 1 Гбайта
    адресного пространства он должен выглядеть примерно так:</para>

  <programlisting>
#ifndef NKPDE
#ifdef SMP
#define NKPDE                   254     /* addressable number of page tables/pde's */
#else
#define NKPDE                   255     /* addressable number of page tables/pde's */
#endif  /* SMP */
#endif
  </programlisting>

  <para>Для вычисления значения <literal>NKPDE</literal> разделите желаемый
    объём адресного пространства (в мегабайтах) на четыре и вычтите из
    получившегося числа единичку в случае однопроцессорной машины и
    двоечку в случае многопроцессорного ядра.</para>

  <para>Для достижения второй цели вам нужно правильный адрес для загрузки
    ядра: просто отнимите размер адресного пространства (в байтах) от
    0x100100000; результат будет равным 0xc0100000 для адресного пространства
    в 1 Гбайт.  Установите значение константы <symbol>LOAD_ADDRESS</symbol>
    в файле <filename>src/sys/i386/conf/Makefile.i386</filename> в это
    значение; затем установите значение счётчика в начале списка секций в
    файле <filename>src/sys/i386/conf/kernel.script</filename> в то же самое
    значение, как это сделано здесь:</para>

  <programlisting>
OUTPUT_FORMAT("elf32-i386", "elf32-i386", "elf32-i386")
OUTPUT_ARCH(i386)
ENTRY(btext)
SEARCH_DIR(/usr/lib); SEARCH_DIR(/usr/obj/elf/home/src/tmp/usr/i386-unknown-freebsdelf/lib);
SECTIONS
{
  /* Read-only sections, merged into text segment: */
  . = 0xc0100000 + SIZEOF_HEADERS;
  .interp     : { *(.interp)    }
  </programlisting>

  <para>После этого переконфигурируйте и перестройте ядро.  Вы можете
    столкнуться с проблемами при работе утилит &man.ps.1;,
    &man.top.1; и подобных им; решить их может
    <command>make world</command> (или ручная перекомпиляция
    <filename>libkvm</filename>, &man.ps.1; и
    &man.top.1; после копирования исправленного
    <filename>pmap.h</filename> в <filename>/usr/include/vm/</filename>).</para>

  <para>ЗАМЕЧАНИЕ: Размер адресного пространства ядра должен быть
    кратен четырём мегабайтам.</para>

  <para>[&a.dg; добавил: <emphasis> Я думаю, что размер адресного пространства
    ядра должен быть степенью двойки, но я в этом не уверен.  Для работы с
    верхними адресами памяти использовался код старого загрузчика, и я ожидаю
    по крайней мере точность в 256 Мбайт.]</emphasis></para>

  </answer>
</qandaentry>
</qandaset>
</chapter>


  <chapter id="acknowledgments">
    <title>Наши благодарности</title>

    <para>Этот небольшой скромный документ с ответами на часто задаваемые
      вопросы создавался, переписывался, редактировался, сокращался,
      растягивался, уродовался, потрошился, пристально разглядывался,
      полностью перетряхивался, обдумывался, отвергался, перестраивался,
      критиковался и снова укреплялся в течение последнего десятилетия силами
      сотен, если не тысяч, людей.  Постоянно.</para>

    <para>Мы хотим поблагодарить всех их и приглашаем вас <ulink
      url="&url.articles.contributing;/article.html">присоединиться</ulink>,
      чтобы сделать этот FAQ ещё лучше.</para>
  </chapter>

  &bibliography;
</book>
