<!-- $Id: install.sgml,v 1.6 1999-08-17 18:22:00 nik Exp $ -->
<!-- The FreeBSD Russian Documentation Project -->

  <sect>
    <heading>Установка<label id="install"></heading>

    <sect1>
      <heading>Какой файл нужно скачать для установки FreeBSD?</heading>

      <p>В общем случае вам нужен только один файл
      <em>floppies/boot.flp</em>, содержащий образ, который вам
      нужно будет перенести на дискету 1.44Мб и затем загрузиться с неё
      для того, чтобы скачать все остальное (в процессе установки вам нужно
      будет задавать параметры соединения TCP/IP, конфигурацию лент,
      приводов CDROM, дискет, разделов DOS и всего, что будет необходимо
      для успешной инсталляции).

      <p>Если вы хотите скачать дистрибутив самостоятельно (например, для
      установки с раздела DOS), вот список рекомендованных частей 
      дистрибутива:

      <itemize>
      <item> bin/<newline>
      <item> manpages/<newline>
      <item> compat*/<newline>
      <item> doc/ <newline>
      <item> src/ssys.* <newline>
      </itemize>

      <p>Полные инструкции по этой процедуре и об установке вообще можно
      найти в <url url="../../handbook/install.html" name="разделе">
      Руководства, посвящённом инсталляции FreeBSD.

    <sect1>
      <heading>
        Помогите! Загрузочный файл не помещается на дискету!
      </heading>

      <p>На дискету размером 3.5 дюйма (1.44Мб) может поместиться
      1474560 байт данных. Образ дискеты имеет размер ровно 1474560 байт.

      <p>Типичные ошибки при подготовке загрузочной дискеты:
      <itemize>
      <item>Образ дискеты был загружен по FTP не в режиме <tt>binary</tt>.

	<p>Некоторые клиентские программы FTP используют по умолчанию
        текстовый (<tt>ascii</tt>) режим передачи и пытаются поменять 
        все принятые последовательности символов "конец строки" на 
        соответствующие им в вашей системе. В таком случае образ
        загрузочного диска будет неизбежно испорчен. Проверьте размер
        полученного файла: если он не <em>точно</em> такой же,
        как на FTP-сервере, то ошибка произошла, скорее всего, в процессе
        передачи.

	<p>Во избежание этого введите команду <tt>binary</tt> в командной
        строке FTP после того, как вы подключитесь к серверу, но до того,
        как начали скачивать файл.

      <item>Для переноса образа на дискету была использована команда DOS
        <tt>copy</tt> (или её аналог с графическим интерфейсом).
	<p>Программы типа <tt>copy</tt> не работают с образами дискет,
        предназначенными для загрузки. Образ содержит полное содержимое
        дискеты, дорожка за дорожкой, и не предназначен для помещения на
        дискету в качестве обычного файла. Вам необходимо перенести его
        на дискету ``непосредственно'', используя низкоуровневые средства
        (такие как <tt>fdimage</tt> или <tt>rawrite</tt>), описанные в 
        <url url="../../handbook/install.html" name="руководстве">.

      </itemize>

    <sect1>
      <heading>Где инструкции по инсталляции FreeBSD?</heading>

      <p>Инструкции по установке могут быть найдены в
      <url url="../../handbook/install.html" name="главе">
      Руководства, посвящённом установке FreeBSD.

    <sect1>
      <heading>Что мне нужно иметь для запуска FreeBSD?</heading>

      <p>Вам нужен персональный компьютер не ниже 386, с 5 или более
      мегабайтами ОЗУ и по крайней мере 60Мб свободного пространства на
      винчестере. Система может работать с дешёвым графическим адаптером MDA,
      но для того, чтобы запустить X11R6, требуется ведеокарта стандарта VGA
      или лучше.

      <p>Посмотрите также раздел
      <ref id="hardware" name="Аппаратная совместимость">.

    <sect1>
      <heading>
        У меня только 4Мб ОЗУ. Смогу ли я установить FreeBSD?
      </heading>

      <p>FreeBSD 2.1.7 была последней версией, которую можно было
      проинсталлировать на системе с 4Мб ОЗУ. Более новые версии FreeBSD,
      типа 2.2, требуют по крайней мере 5Мб ОЗУ для установки.

      <p>Все версии FreeBSD, включая 3.0, будут РАБОТАТЬ на 4Мб ОЗУ,
      просто на 4Мб нельзя запустить инсталляционную программу. Вы
      можете добавить дополнительную память для инсталляции, если вам
      это нужно, а после того, как система будет установлена и запущена,
      вернуться к конфигурации с 4Мб. Или вы можете подключить ваш диск
      к компьютеру с ОЗУ, большим чем 4Мб, проинсталлировать систему и
      переставить диск обратно.

      <p>Есть ещё несколько причин, по которым FreeBSD 2.1.7 не будет
      устанавливаться с 4Мб. А именно: она не будет устанавливаться
      на системе с 640Кб основной и 3Мб дополнительной памяти. Если ваша
      материнская плата может перемещать некоторую ``потерянную''
      память из области 640Кб в область 1Мб, тогда может быть, вы
      сможете запустить FreeBSD 2.1.7.

      <p>Попробуйте войти в настройку вашего BIOS и посмотреть параметры
      ``перемещения'' (remap). Включите его. Может быть, еще понадобится 
      выключить теневое ПЗУ (ROM shadowing).

      <p>Может быть, самое простое решение - найти еще 4Мб на время
      инсталляции. Откомпилируйте ядро только с теми параметрами, которые
      нужны и затем уберите 4Мб.

      <p>Вы можете также проинсталлировать версию 2.0.5, а затем
      обновить вашу систему до 2.1.7 с помощью пункта ``upgrade''
      программы инсталляции 2.1.7.

      <p>После установки вы можете построить ядро, которое будет работать
      на 4Мб. Кто-то даже умудрялся загружаться с 2Мб (хотя система
      в основном была неработоспособна :-))

    <sect1>
      <heading>
        Как сделать оригинальную загрузочную дискету?
      </heading>

      <p>В настоящий момент нет *простого* способа сделать оригинальную
      загрузочную дискету. Файл
      <tt>/usr/src/release/floppies/Makefile</tt> предназначен именно для
      этого, однако на самом деле

      that's supposed to let you *just* make those floppies, but it's not
      really gelled yet.

      <p>Чтобы сделать оригинальный релиз, следуйте инструкциям
      <ref id="custrel" name="здесь">.

    <sect1>
      <heading>
        Могу ли я иметь более чем одну операционную систему на моём PC?
      </heading>

      <p>Взгляните на это <url url="../../tutorials/multios/multios.html"
      name="руководство">.

    <sect1>
      <heading>Может ли Windows 95 сосуществовать с FreeBSD?</heading>

      <p>Сначала проинсталлируйте Windows 95, затем FreeBSD.  Менеджер
      загрузки FreeBSD будет управлять процессом загрузки Win95 или 
      FreeBSD, Если вы после этого ещё раз проинсталлируете Windows 95,
      то в процессе установки менеджер загрузки будет грубо удалён.
      Если такое случится, обратитесь к следующему разделу.

    <sect1>
      <heading>
        Windows 95 уничтожила мой менеджер загрузки! Как мне его вернуть?
      </heading>

      <p>Вы можете переустановить менеджер загрузки FreeBSD двумя способами:

      <itemize>
        <item>Запустите DOS, перейдите в каталог tools/ вашего дистрибутива
        FreeBSD и найдите программу <bf>bootinst.exe</bf>.  Запустите её
        следующим образом:

        <p><bf>bootinst.exe boot.bin</bf>

        <p>и менеджер загрузки будет переустановлен.

        <item>Загрузитесь с установочной дискеты FreeBSD и перейдите в меню
        установки Custom install.  Выберите пункт Partition.  Выберите
        устройство, на котором будет располагаться для ваш менеджера загрузки
        (это будет самый первый диск) и когда вы перейдете к редактированию
        разделов, первым делом (то есть ещё не делая никаких изменений)
        выберите (W)rite.  Последует запрос на подтверждение, ответьте yes,
        и когда вы попадёте в меню выбора менеджера загрузки, выберите 
        пункт "Boot Manager".  Менеджер загрузки будет переписан на диск.
        Теперь нужно выйти из меню установки и загрузиться с винчестера
        как обычно.
      </itemize>

    <sect1>
      <heading>
        Можно ли использовать диск с повреждёнными блоками?
      </heading>

      <p>Программа обнаружения повреждённых блоков (<htmlurl 
      url="http://www.FreeBSD.org/cgi/man.cgi?bad144" name="bad144">)
      помогает не во всех 100&percnt случаев; (к нашему стыду)
      можно, к сожалению, сказать, что если у вас диск IDE или ESDI с
      большим количеством повреждённых блоков, то FreeBSD, похоже, не для
      вас. Однако она работает на тысячах систем с повреждёнными дисками,
      так что лучше всего сначала всё же попробовать самим.

      <p>Если повреждённые блоки находятся на SCSI диске, взгляните на
      <ref id="awre" name="такое решение">.

    <sect1>
      <heading>
        Странные вещи происходят при загрузке с инсталляционного диска!
      </heading>

      <p>Если вы видите, что как машина зависает или неожиданнно 
      перезагружается, когда вы пытаетесь загрузиться с установочной
      дискеты, вы должны задать себе три вопроса:-

      <enum>
        <item>Вы используете новую, только что отформатированную дискету
        (предпочтительно неиспользованную прямо из коробки, а не ту, что
        пришла с популярным журналом и последние три года провалялась под
        диваном)?

        <item>Вы скачали образ дискеты в двоичном режиме?
        (не смущайтесь, даже лучшие из нас время от времени скачивают
        двоичный файл в режиме ASCII!)

        <item>Если вы используете все эти свежеиспеченные операционные
        системы типа Windows95 или WindowsNT, удостоверьтесь, что вы их
        закрыли и перестартовали машину в добром старом DOS? Похоже,
        что эти операционные системы могут влиять на программы, работающие
        непосредственно с оборудованием, что и делает программа создания
        установочного диска; даже запуск из DOS в графической оболочке может
        вызвать проблемы.
      </enum>

      <p>Есть сведения, что Netscape вызывает проблемы при скачивании
      загрузочного диска, так что лучше всего использовать специальную
      программу FTP, если она у вас есть.

    <sect1>
      <heading>Помогите! Не могу установить систему с ленты!</heading>

      <p>Если вы инсталлируете 2.1.7R с ленты, вы должны создать
      ленту с размером блока tar, равным 10 (5120 байт). Размер
      блока tar по умолчанию равен 20 (10240 байт), поэтому ленты,
      созданные со стандартным размером блока, не могут быть использованы
      для установки 2.1.7R; вы получите сообщение об ошибке, говорящее,
      что размер записи слишком большой.

    <sect1>
      <heading>
        Соединение двух машин с FreeBSD через параллельные порты (PLIP)
      </heading>

      <p>Для этого нужен соединительный шнур типа laplink и на обеих машинах
      должна быть включена поддержка драйвера lpt.

      <verb>
      $ dmesg | grep lp
      lpt0 at 0x378-0x37f irq 7 on isa
      lpt0: Interrupt-driven port
      lp0: TCP/IP capable interface
      </verb>

      <p>Подключите кабель laplink к параллельным портам компьютеров.

      <p>Настройте параметры сетевого интерфейса lp0 на обеих машинах, войдя
      администратором.  Например, если вы хотите соединить хосты с именами
      max и moritz

      <verb>
                 max <-----> moritz
IP Address    10.0.0.1      10.0.0.2
      </verb>

     на машине max дайте команду
     <verb>
	# ifconfig lp0 10.0.0.1 10.0.0.2
     </verb>

     на машине moritz запустите

     <verb>
	# ifconfig lp0 10.0.0.2 10.0.0.1
     </verb>

     <P>Это всё!  Пожалуйста, прочтите ещё страницы Справочника 
     <htmlurl url="http://www.FreeBSD.org/cgi/man.cgi?lp" name="lp(4)"> и
     <htmlurl url="http://www.FreeBSD.org/cgi/man.cgi?lpt" name="lpt(4)">.

     <P>Вы также должны добавить эти хосты в файл /etc/hosts

     <verb>
     127.0.0.1               localhost.my.domain localhost 
     10.0.0.1                max.my.domain max
     10.0.0.2                moritz.my.domain moritz
     </verb>

     <P>Для проверки работоспособности связи выполните следующие действия:

     на машине max:

<verb>
$ ifconfig lp0
lp0: flags=8851<UP,POINTOPOINT,RUNNING,SIMPLEX,MULTICAST> mtu 1500
        inet 10.0.0.1 --> 10.0.0.2 netmask 0xff000000 
</verb>

<verb>
$ netstat -r
Routing tables

Internet:
Destination        Gateway            Flags     Refs     Use     Netif Expire
moritz              max              UH          4   127592       lp0
</verb>

<verb>
$ ping -c 4 moritz
PING moritz (10.0.0.2): 56 data bytes
64 bytes from 10.0.0.2: icmp_seq=0 ttl=255 time=2.774 ms
64 bytes from 10.0.0.2: icmp_seq=1 ttl=255 time=2.530 ms
64 bytes from 10.0.0.2: icmp_seq=2 ttl=255 time=2.556 ms
64 bytes from 10.0.0.2: icmp_seq=3 ttl=255 time=2.714 ms

--- moritz ping statistics ---
4 packets transmitted, 4 packets received, 0% packet loss
round-trip min/avg/max/stddev = 2.530/2.643/2.774/0.103 ms
</verb>

    <sect1>
      <heading>
         Можно ли я установить систему на лэптоп через PLIP (Parallel Line IP)?
      </heading>

      <p>Для этого нужно соединить два компьютера параллельным кабелем
      Laplink следующим образом:

      <verb>
            +----------------------------------------+
            |A-name A-End   B-End   Descr.  Port/Bit |
            +----------------------------------------+
            |DATA0  2       15      Data    0/0x01   |
            |-ERROR 15      2               1/0x08   |
            +----------------------------------------+
            |DATA1  3       13      Data    0/0x02   |
            |+SLCT  13      3               1/0x10   |
            +----------------------------------------+
            |DATA2  4       12      Data    0/0x04   |
            |+PE    12      4               1/0x20   |
            +----------------------------------------+
            |DATA3  5       10      Strobe  0/0x08   |
            |-ACK   10      5               1/0x40   |
            +----------------------------------------+
            |DATA4  6       11      Data    0/0x10   |
            |BUSY   11      6               1/0x80   |
            +----------------------------------------+
            |GND    18-25   18-25   GND -            |
            +----------------------------------------+
      </verb>

      <p>Посмотрите также <ref id="pao" name="это замечание"> на странице,
      посвящённой мобильным вычислениям.

    <sect1>
      <heading>
        Какие параметры диска я должен использовать?<label id="geometry">
      </heading>

      <p>(Под "параметрами" диска мы понимаем число дорожек, головок и
      секторов на дорожку на диске, что для простоты обозначается как
      C/H/S. Именно так работает BIOS персональных компьютеров при чтении
      или записи диска).

      <p>Похоже, что по каким-то причинам это вызывает много недоразумений.
      Прежде всего, <tt /физические/ параметры диска SCSI не имеют никакого
      значения, так как FreeBSD работает в терминах дисковых блоков.
      Фактически нет такого показателя, как "физические параметры",
      так как плотность размещения секторов различна по всему диску; то,
      что производители называют "реальными" физическими параметрами обычно
      размеры рабочие
      выызвабт по крайней мере потерянное простран\ство. Для дисков IDE, 
      FreeBSD работает в терминах C/H/S, но во всех современных дисках они
      преобразовываются во внутреннее представление.

      <p>Имеет значение только <tt /логические/ параметры - это то, что 
      получает BIOS, когда спрашивает "какие у тебя параметры?", а затем
      использует для обращения к диску.  Так как FreeBSD использует BIOS
      при загрузке, очень важно получить верные параметры.  В частности,
      если у вас на диске находятся несколько операционных систем, они обе
      должны иметь одинаковое представление о параметрах диска, иначе
      серьёзные проблемы при загрузке неизбежны!

      <p>В случае дисков SCSI, параметры используются в зависимости от того,
      включена ли поддержка расширенной трансляции на вашем контроллере
      (что часто обозначается как "support for DOS disks &gt;1GB" или
      что-то похожее).  Если эта возможность выключена, то используйте
      N дорожек, 64 головки и 32 сектора на дорожку, где N - это ёмкость
      диска в мегабайтах. Например, 2Гбайтный диск должен иметь 2048 
      дорожек, 64 головки и 32 сектора а дороку.

      <p>Если трансляция <tt /включена/ (что обычно используется для
      преодоления некоторых ограничений MSDOS) и ёмкость диска превышает
      1ГБ, используется M дорожек, 63 сектора на дорожку (*не* 64) и 255
      головок, где 'M' - это объём диска в мегабайтах, поделённый на
      7.844238 (!).  Таким образом, наш диск объёмом 2ГБ будет иметь 
      261 дорожку, 63 сектора на дорожку и 255 головок.

      <p>Если вы не уверены, или FreeBSD ошибается при определении
      параметров диска во время установки, самый простой способ решить эту 
      проблему - создать на диске маленький раздел DOS.  После этого
      параметры диска должны определиться правильно (и вы всегда можете
      удалить раздел DOS в редакторе разделов, если вы не хотите его
      сохранить, или оставить его для настройки сетевых адаптеров и подобных
      вещей).

      <p>Кроме того, существует свободно доступная утилита, распространяемая
      вместе с FreeBSD, которая называется ``<tt /pfdisk.exe/'' 
      (можно найти в каталоге <tt>tools</tt> компакт-диска с FreeBSD или
      на различных ftp-серверах), которую можно использовать для определения
      параметров, которые используются другими операционными системами,
      расположенными на вашем диске.  Затем вы можете использовать эти 
      параметры в редакторе разделов.

    <sect1>
      <heading>Есть ли ограничения на разбиение диска?</heading>

      <p>Да. Вы должны убедиться, что корневой раздел находится до
      1024 дорожки, так чтобы BIOS могла загрузить с него ядро. (Заметьте,
      что это ограничение BIOS компьютера, а не FreeBSD).

      <p>Для диска SCSI, это, как правило, будет означать, что
      корневой раздел располагается в первых 1024Мб (или в первых 4096Мб,
      если включен режим расширенной трансляции - посмотрите предыдущий
      вопрос).  Для дисков IDE соответствующее значение равно 504Мб.

    <sect1>
      <heading>
        Как насчет менеджеров диска? У меня большой диск!
      </heading>

      <p>FreeBSD распознаёт Ontrack Disk Manager и допускает его
      использование. Другие менеджеры дисков не поддерживаются.

      <p>Если вы хотите использовать диск с FreeBSD, вам не нужен
      менеджер диска. Отконфигурируйте диск на столько пространства,
      сколько сможет обработать BIOS (обычно 504 мегабайта). и
      FreeBSD разпознает, сколько места у вас есть на самом деле.
      Если вы используете старый диск с контроллером MFM, вам может
      потребоваться точно указать FreeBSD количество используемых
      дорожек.

      <p>Если вы хотите использовать FreeBSD совместно с другой
      операционной системой, это можно сделать и без менеджера диска:
      удостоверьтесь, что загрузочный раздел FreeBSD и раздел для другой
      операционной системы не выходят за пределы 1024 дорожки. Если вы
      будете осторожны, 20 мегабайтного раздела для загрузки будет
      достаточно.

    <sect1>
      <heading>
        При загрузке FreeBSD выдается сообщение ``Missing Operating System''
        <label id="missing_os">
      </heading>

      <p>Это классический  случай, когда FreeBSD и DOS или другая
      операционная система конфликтуют по поводу <ref id="geometry"
      name="параметров"> диска.  Вам нужно будет переустановить FreeBSD,
      но имейте в виду, что инструкции, данные выше, помогают всегда.

    <sect1>
      <heading>
        После приглашения менеджера загрузки `F?' ничего не происходит.
      </heading>

      <p>Это ещё один признак проблемы, описанной в предыдущем разделе.
      Параметры диска в BIOS и параметры, используемые FreeBSD, не 
      совпадают. Если ваш контроллер или BIOS поддерживают трансляцию
      дорожек (часто обозначаемую как ``&gt;1GB drive support''),
      попробуйте включить эту возможность и переустановить FreeBSD.

    <sect1>
      <heading>
        У меня &gt;16Мб ОЗУ. Это не вызовет никаких проблем?<label id="bigram">
      </heading>

      <p>Кроме разве что вопроса производительности, нет. Во FreeBSD 2.X 
      встроен контроль границ буферов (bounce buffers), что позволяет вашим
      контроллерам, работающим в режиме прямого доступа к шине, иметь доступ
      к памяти выше 16Мб. (Заметьте, что это будет требоваться только если
      вы используете устройства ISA, хотя этого также требуют некоторые 
      устройства EISA и VLB).

      <p>Обратитесь к разделу о <ref id="reallybigram"
      name="машинах с &gt;64Mб">, если у вас столько ОЗУ или вы используете
      машины Compaq или BIOS, который выдаёт неверные параметры ОЗУ.

    <sect1>
      <heading>
        Нужно ли устанавливать все исходные тексты системы?
      </heading>

      <p>В общем случае, нет. Однако мы настоятельно рекомендуем
      проинсталлировать, как минимум, исходные тексты набора
      ``<tt/base/'', включающий некоторые файлы, здесь упоминаемые,
      и ``<tt/sys/'', в который включены исходные тексты ядра.
      Для работы системы присутствия исходных текстов не требуется,
      разве что для программы конфигурирования ядра 
      <htmlurl url="http://www.FreeBSD.org/cgi/man.cgi?config"
      name="config">.  За исключением исходных текстов ядра, структура
      исходных текстов системы позволяет монтировать её в режиме
      "только для чтения" через NFS и компилировать программы. (Из-за
      ограничения на исходные тексты ядра мы рекомендуем монтировать их
      не прямо в <tt>/usr/src</tt>, а в какой-нибудь другой каталог с
      символическими ссылками для дублирования структуры каталогов.

      <p>Наличие исходных текстов системы значительно облегчает
      процесс обновления до новых версий FreeBSD.

      <p>Для выбора подмножества исходных текстов, которое вы
      хотите установить, используйте пункт меню Custom, когда
      находитесь в меню Distributions программы установки.  Скрипт
      <tt>src/install.sh</tt> также инсталлирует часть исходных
      текстов, в зависимости от указанного при запуске параметра.

    <sect1>
      <heading>Нужно ли перекомпилировать ядро?</heading>

      <p>Построение нового ядра всегда было необходимым шагом при
      установке FreeBSD, однако последние релизы предоставляют более
      дружественный инструмент конфигурации ядра. В командной строке
      на приглашение загрузчика FreeBSD (boot:) введите "-c" и вы 
      попадёте в экран визуальной настройки, которая позволяет 
      конфигурировать настройки ядра для большинства адаптеров ISA.

      <p>Однако рекомендуется, что потом вы всё же построите новое ядро,
      содержащее только те дравера, которые вам нужны, для того,
      чтобы сэкономить немного ОЗУ, хотя для большиства систем это 
      больше не является большой необходимостью.

    <sect1>
      <heading>
        Находясь за пределами США, могу ли я использовать систему
        шифрования DES?
      </heading>

      <p>Если нет абсолютной необходимости в использовании криптографической
      системы типа DES, то для <bf/большей/ безопасности вы можете
      использовать стандартную для FreeBSD системы криптографии без
      экспортных ограничений. Используемый по умолчанию скрамблер паролей
      FreeBSD 2.0 в настоящее время основан на <bf/MD5/, и более устойчив
      к подбору пароля, чем DES, к тому же позволяет иметь более длинные
      пароли.  Единственной
      причиной не использовать шифрование <bf/MD5/ может быть требование
      использовать один и тот же файл паролей между системами FreeBSD и
      не-FreeBSD.

      <p>Так как алгоритм шифрования DES не может быть законно
      экспортирован из США, пользователи за их пределами не должны
      сгружать это программное обеспечеиие (как часть <tt/secrdist/)
      с американских ftp-серверов.

      <p>Существует, однако, библиотека, заменяющая libcrypt, которая
      основана на коде, разработанном в Австралии Дэвидом Барреном
      (David Burren).  Этот код можно найти на некоторых неамериканских
      зеркалах FreeBSD.  Исходные тексты для libcrypt без экспортных
      ограничений, и сами программы, её использующие, можно получить
      со следующих ftp-серверов:

      <descrip>
        <tag/Южная Африка/
          <tt>ftp://ftp.internat.FreeBSD.org/pub/FreeBSD</tt><newline>
          <tt>ftp://storm.sea.uct.ac.za/pub/FreeBSD</tt>

        <tag/Бразилия/
          <tt>ftp://ftp.iqm.unicamp.br/pub/FreeBSD</tt>

        <tag/Финляндия/
          <tt>ftp://nic.funet.fi/pub/unix/FreeBSD/eurocrypt</tt>
      </descrip>

      <p>Неамериканский <tt/securedist/ может быть использован как 
      непосредственную замену американского <tt/securedist/.  Этот
      <tt/securedist/ устанавливается таким же образом, как и 
      американский вариант (обратитесь к замечаниям по установке).  Если
      вы собираетесь устанавливать шифрование DES, вы должны сделать это
      до того, как будете устанавливать другое программное обеспечение.

      <p>Пользователи за пределами США не должны сгружать
      любое криптографическое программное обеспечение из США.  Это может 
      вызвать проблемы юридического плана у тех, что занимается
      обслуживанием тех сайтов, с которых было сгружено программное
      обеспечение.

      <p>В разработке находится неамериканский дистрибутив системы
      Kerberos, и текущая версия может получена с анонимного FTP по
      адресу <tt>braae.ru.ac.za</tt>.

      <p>Существует <ref id="mailing" name="список рассылки">,
      посвящённый неамериканскому криптографическому программному
      обеспечению. Для запроса информации пошлите письмо, содержащее
      одну строчку ``<tt/help/'' в теле сообщения на адрес

          <tt>&lt;majordomo@braae.ru.ac.za&gt;</tt>.

   <sect1>
    <heading>
      Загрузка с установочной дискеты прерывается на сообщении
      ``Probing Devices...''.
    </heading>

    <p>Если у вас установлены устройства IDE Zip или Jaz, уберите их
    и попробуйте снова. Они могут мешать инсталляционной программе. После
    того, как система будет установлена, вы можете снова подключить
    устройства. Надеемся, что это будет исправлено в более поздних
    релизах.

   <sect1>
    <heading>
      Сообщение ``panic: cant mount root'' после перезагрузки
      только что установленной системы.
    </heading>

    <p>Эта ошибка проявляется, когда есть несогласование между
    представлениями загрузочного блока и ядра о дисковых устройствах. Эта
    ошибка обычно проявляется на системах с двумя дисками IDE, с винчестерами,
    установленными как ведущий или единственный на отдельных контроллерах IDE,
    с FreeBSD, инсталлированной на втором контроллере IDE. Загрузочные блоки
    думают, что система установлена на wd1 (второй диск BIOS), тогда как
    ядро даёт первому диску на втором контроллере название wd2. После
    обнаружения устройства ядро пытается смонтировать то, что загрузочные
    блоки выдают за загрузочный диск, wd1, тогда как он на самом деле wd2,
    и ошибается.

    <p>Для разрешения этой проблемы сделайте одно из следующих действий:

    <enum>
     <item>В приглашении Boot: наберите
     <tt>1:wd(2,a)kernel</tt> и нажмите клавишу Enter. Если система 
     запустилась, выполните команду
<verb>
echo "1:wd(2,a)kernel" > /boot.config
</verb>
     чтобы сделать это строкой загрузки по умолчанию.
     <item>Поместите диск с FreeBSD на первичный контроллер IDE, так чтобы
     именования диском пришли в соответствие.
     <item><url url="../../handbook/kernelconfig.html" name="Перестройте ядро">,
     изменив конфигурацию контроллера wd на следующее:

<verb>
controller      wdc0    at isa? port "IO_WD1" bio irq 14 vector wdintr
disk            wd0     at wdc0 drive 0
# disk            wd1     at wdc0 drive 1 # comment out this line

controller      wdc1    at isa? port "IO_WD2" bio irq 15 vector wdintr
disk            wd1     at wdc1 drive 0 # change from wd2 to wd1
disk            wd2     at wdc1 drive 1 # change from wd3 to wd2
</verb>

     Проинсталлируйте новое ядро.
     Если вы переместили ваши диски и хотите посстановить предыдущую
     настройку, замените диски в нужной конфигурации и перезагрузитесь.
     Ваша система должна нормально запуститься.

    </enum>

   <sect1>
     <heading>
       Какие существуют ограничения на оперативную память?
     </heading>
     
     <p>Теоретическое ограничение на память равно 4 гигабайтам.  
     Тестировался случай с одним гигабайтом; как правило, вы не сможете
     приобрести персональный компьютер, поддерживающий больший объём ОЗУ.

     <sect1>
     <heading>
       Какие существуют ограничения для файловой системы ffs?
     </heading>

     <p>Для файловой системы ffs максимальный теоретический размер равен 
     8 терабайтам (2Г блоков) или 16ТБ при стандартном размере блока 8К.
     На практике есть программное ограничение в 1 терабайт, но с
     некоторыми модификациями достижимы 4 гигабайта (и такие системы
     существуют).

     <p>Максимальный размер одного файла ffs равен примерно 1Г блоков
     (4ТБ) при размере блока 4К.

     <verb>
                     максимальный размер файла
                ----------------------------------
                   2.2.7    3.0
размер блока fs   -stable  -current  работает  должно работать
---------------   -------  --------  --------  ---------------
4K                 4T-1      4T-1     4T-1       4+T
8K                 32+G      8T-1     32+G       16T-1
16K                128+G     16T-1    128+G      32T-1
32K                512+G     32T-1    512+G      64T-1
64K                2048+G    64T-1    2048+G     128T-1
     </verb>

     <p>При размере блока файловой системы 4К, тройная адресация
     блоков работает и всё должно быть ограничено максимальным количеством 
     блоков, которое задаётся в виде тройной переадресации
     блока (примерно 1K^3 + 1K^2 + 1K), однако всё ограничивается 
     (ошибочным) лимитом 1Г-1 на количество блоков файловой системы.
     Это ограничение должно быть равным 2Г-1. При количестве блоков,
     приближающемся к 2Г-1, появляются некоторые ошибки, но этот предел 
     недостижим при размере блока 4К.

     <p>При размере блока 8К и больше, всё должно быть ограничено
     лимитом 2Г-1 на количество блоков файловой системы, но реально
     ограничено пределом в 1Г-1 на число блоков файловой системы, кроме
     случая -stable, недостижимый при тройной переадресации, так что предел
     равен максимальному числу блоков файловой системы, который может
     быть представлен через двойную переадресацию (примерно
     (размер блока/4)^2 + (размер блока/4)), и под -current превышеине
     этого ограничения может вызвать проблемы.  Использование верного
     ограничения в 2Г-1 блоков вызывает проблемы.

     <sect1>
     <heading>Как можно поместить файлы размером 1ТБ на дискету?</heading>

     <p>Я храню парочку таких на дискете :-)  Максимальный размер 
     файла не связан непосредственно с максимальным размером диска.
     Максимальный размер диска равен 1ТБ.  Особенностью является
     то, что размер файла может превышать размер диска.

     <p>В следующем примере создаётся файл размером 8Т-1 с помощью всего
     32К дискового пространства (3 блока адреса и 1 блок данных) на 
     маленьком корневом разделе.  Команда dd должна уметь работать с
     большими файлами.

<verb>
ttyv0:bde@alphplex:/tmp/q> cat foo
df .
dd if=/dev/zero of=z bs=1 seek=`echo 2^43 - 2 | bc` count=1
ls -l z
du z
df .
ttyv0:bde@alphplex:/tmp/q> sh foo
Filesystem  1024-blocks     Used    Avail Capacity  Mounted on
/dev/sd0a         64479    27702    31619    47%    /
1+0 records in
1+0 records out
1 bytes transferred in 0.000187 secs (5346 bytes/sec)
-rw-r--r--  1 bde  bin  8796093022207 Sep  7 16:04 z
32	z
Filesystem  1024-blocks     Used    Avail Capacity  Mounted on
/dev/sd0a         64479    27734    31587    47%    /
ttyv0:bde@alphplex:/tmp/q> exit
</verb>
 
<p>Bruce Evans, September 1998
 
    <sect1>
      <heading>
        Я скомпилировал новое ядро и при загрузке получил сообщение об ошибке
        "archsw.readin.failed".
      </heading>
 
      <p>Вы можете осуществить загрузку системы, явно указав ядро во время
      второго этапа загрузочного процесса, нажав любую клавишу после
      появления символа | до запуска загрузчика.  Более точно, вы обновили
      исходные тексты ядра, откомпилировали и установили новое ядро <em>без
      выполнения make world </em>.  Такое не поддерживается.  Выполните
      make world.

  </sect>
