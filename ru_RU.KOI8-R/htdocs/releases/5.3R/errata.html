<?xml version="1.0" encoding="koi8-r"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>Список проблем FreeBSD 5.3-RELEASE</title>
<meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.7" />
<link rel="STYLESHEET" type="text/css" href="docbook.css" />
<meta http-equiv="Content-Type" content='text/html; charset="koi8-r"' />
</head>
<body class="ARTICLE" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084"
alink="#0000FF">
<div class="ARTICLE">
<div class="TITLEPAGE">
<h1 class="TITLE"><a id="AEN2" name="AEN2">Список проблем FreeBSD 5.3-RELEASE</a></h1>

<h3 class="CORPAUTHOR">Проект FreeBSD</h3>

<p class="COPYRIGHT">Copyright &copy; 2000, 2001, 2002, 2003, 2004 Проект
документирования FreeBSD</p>

<p class="PUBDATE">$FreeBSD: src/release/doc/ru_RU.KOI8-R/errata/article.sgml,v 1.1.2.2
2004/11/10 11:10:06 den Exp $<br />
</p>

<div class="LEGALNOTICE"><a id="TRADEMARKS" name="TRADEMARKS"></a>
<p>FreeBSD это зарегистрированная торговая марка FreeBSD Foundation.</p>

<p>Intel, Celeron, EtherExpress, i386, i486, Itanium, Pentium, и Xeon это торговые марки
или зарегистрированные торговые марки Intel Corporation или ее дочерних компаний в
Соединенных Штатах и других странах.</p>

<p>Sparc, Sparc64, SPARCEngine, и UltraSPARC это торговые марки SPARC International, Inc
в Соединенных Штатах и других странах. Продукты с торговой маркой SPARC основаны на
архитектуре, разработанной Sun Microsystems, Inc.</p>

<p>Многие из обозначений, используемые производителями и продавцами для обозначения своих
продуктов, заявляются в качестве торговых марок. Когда такие обозначения появляются в
этом документе, и Проекту FreeBSD известно о торговой марке, к обозначению добавляется
знак ``&trade;'' или ``&reg;''.</p>
</div>

<hr />
</div>

<blockquote class="ABSTRACT">
<div class="ABSTRACT"><a id="AEN20" name="AEN20"></a>
<p>В этом документе находится список проблем FreeBSD 5.3-RELEASE, содержащий важную
информацию, полученную после релиза или на поздней стадии выпуска релиза и не попавшую в
документацию на релиз. Эта информация включает сообщения безопасности, а также новости,
относящиеся к программному обеспечению и документации, которые могут повлиять на
использование системы. Перед установкой этой версии FreeBSD необходимо сверяться с
обновленной версией этого документа.</p>

<p>Этот список проблем FreeBSD 5.3-RELEASE будет поддерживаться до FreeBSD
5.4-RELEASE.</p>
</div>
</blockquote>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="INTRO" name="INTRO">1. Введение</a></h2>

<p>Этот документ содержит последние новости об FreeBSD 5.3-RELEASE. Перед установкой этой
версии необходимо проконсультироваться с данным документом для получения информации о
обнаруженных после выпуска релиза проблемах, которые уже могли быть найдены и
исправлены.</p>

<p>Любая версия этого документа, распространяемая с релизом (например, на CDROM
дистрибутиве), уже устарела по определению, но другие копии обновляются в интернет и их
необходимо прочесть как ``текущие сообщения о проблемах'' этого релиза. Эти копии
находятся на <a href="http://www.FreeBSD.org/ru/releases/"
target="_top">http://www.FreeBSD.org/ru/releases/</a> и на любых сайтах, поддерживающих
обновляемые зеркала этой страницы.</p>

<p>Снэпшоты в исходных текстах и бинарные снэпшоты FreeBSD 5-STABLE также содержат
обновленные копии этого документа (на время создания снэпшота).</p>

<p>За списком всех сообщений безопасности FreeBSD CERT обращайтесь к <a
href="http://www.FreeBSD.org/ru/security/"
target="_top">http://www.FreeBSD.org/ru/security/</a> или <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/"
target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/</a>.</p>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="SECURITY" name="SECURITY">2. Сообщения безопасности</a></h2>

<p>(18 ноября 2004) Была исправлена ошибка в утилите <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fetch&sektion=1&manpath=FreeBSD+5.3-stable">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fetch</span>(1)</span></a>; она
позволяла злонамеренному HTTP серверу перезапись произвольных участков памяти клиента. За
дальнейшей информацией обращайтесь к сообщению безопасности <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-04:16.fetch.asc"
target="_top">FreeBSD-SA-04:16</a>.</p>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="OPEN-ISSUES" name="OPEN-ISSUES">3. Актуальные проблемы</a></h2>

<p>(31 октября 2004) Драйверы <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=re&sektion=4&manpath=FreeBSD+5.3-stable"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">re</span>(4)</span></a> и <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=em&sektion=4&manpath=FreeBSD+5.3-stable"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">em</span>(4)</span></a> могут плохо
работать под высокой нагрузкой. В частности, были сообщения, что <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=em&sektion=4&manpath=FreeBSD+5.3-stable"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">em</span>(4)</span></a> на IBM ThinkPad
T40 блокировался в таких условиях.</p>

<p>(31 октября 2004) Были сообщения, что драйвер <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sk&sektion=4&manpath=FreeBSD+5.3-stable"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">sk</span>(4)</span></a> блокировался
при высокой нагрузке, особенно при использовании встроенных контроллеров ASUStek. Для
восстановления работоспособности может потребоваться отключение и включение интерфейс
(down, up) и/или перезагрузка системы.</p>

<p>(31 октября 2004) В некоторых системах <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=burncd&sektion=8&manpath=FreeBSD+5.3-stable">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">burncd</span>(8)</span></a> может
терять управление. При этом <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=burncd&sektion=8&manpath=FreeBSD+5.3-stable">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">burncd</span>(8)</span></a> не
сообщает о завершении операции, хотя на самом деле операция завершена, и индикатор
выполнения не показывает правильного значения. Обходные пути решения проблемы:</p>

<ul>
<li>
<p>Извлеките носитель и вставьте его обратно после записи CD.</p>
</li>

<li>
<p>Нажмите Ctrl-C, если <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=burncd&sektion=8&manpath=FreeBSD+5.3-stable">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">burncd</span>(8)</span></a>
потерял управление, а индикатор погас.</p>
</li>
</ul>

<p>(31 октября 2004) При использовании пользовательских/групповых правил в <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pf&sektion=4&manpath=FreeBSD+5.3-stable"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">pf</span>(4)</span></a> и <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=4&manpath=FreeBSD+5.3-stable">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(4)</span></a>
переменная загрузчика <var class="VARNAME">debug.mpsafenet</var> должна быть установлена
в <var class="LITERAL">0</var> (она установлена в <var class="LITERAL">1</var> по
умолчанию). Например, это касается следующих правил:</p>

<p>для <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=4&manpath=FreeBSD+5.3-stable">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(4)</span></a>:</p>

<pre class="PROGRAMLISTING">
count ip from any to 192.168.2.1 uid root
</pre>

<p>для <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pf&sektion=4&manpath=FreeBSD+5.3-stable"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">pf</span>(4)</span></a>:</p>

<pre class="PROGRAMLISTING">
block log quick proto { tcp, udp } all user root
</pre>

<p>Для установки <var class="VARNAME">debug.mpsafenet</var> в <var
class="LITERAL">0</var> при каждой загрузке, добавьте в <tt
class="FILENAME">/boot/loader.conf</tt> следующую строку:</p>

<pre class="PROGRAMLISTING">
debug.mpsafenet=0
</pre>

<p>Говоря точнее, это относится к параметрам <var class="LITERAL">group</var> и <var
class="LITERAL">user</var> в <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pf&sektion=4&manpath=FreeBSD+5.3-stable"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">pf</span>(4)</span></a>, и к параметрам
<var class="LITERAL">gid</var>, <var class="LITERAL">jail</var>, и <var
class="LITERAL">uid</var> в <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=4&manpath=FreeBSD+5.3-stable">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(4)</span></a>. Если
переменная <var class="VARNAME">debug.mpsafenet</var> установлена в <var
class="LITERAL">1</var>, система может зависнуть вследствие блокировки в слое сокета.
Более подробная информация находится на страницах справочной системы <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=8&manpath=FreeBSD+5.3-stable">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(8)</span></a> и <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pf.conf&sektion=5&manpath=FreeBSD+5.3-stable">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pf.conf</span>(5)</span></a>.</p>

<p>(31 октября 2004, обновлено 12 ноября 2004) Подсистема <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&sektion=4&manpath=FreeBSD+5.3-stable">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">vinum</span>(4)</span></a>
работает на 5.3, но может вызвать панику системы во время загрузки. В качестве обходного
пути вы можете добавить <var class="LITERAL">vinum_load="YES"</var> в <tt
class="FILENAME">/boot/loader.conf</tt>.</p>

<p>В качестве альтернативы вы можете использовать новую, основанную на <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&sektion=4&manpath=FreeBSD+5.3-stable">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geom</span>(4)</span></a>
подсистему <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&sektion=4&manpath=FreeBSD+5.3-stable">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">vinum</span>(4)</span></a>. Для
активации основанной на <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&sektion=4&manpath=FreeBSD+5.3-stable">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geom</span>(4)</span></a>
подсистемы vinum во время загрузки, добавьте <var
class="LITERAL">geom_vinum_load="YES"</var> в <tt class="FILENAME">/boot/loader.conf</tt>
и удалите переменную <var class="LITERAL">start_vinum="YES"</var> из <tt
class="FILENAME">/etc/rc.conf</tt>, если она там есть.</p>

<p>Хотя некоторые редко встречающиеся конфигурации, такие как несколько приводов vinum на
диске, не поддерживаются, в основном это решение обратно совместимо. Имейте ввиду, что с
основанным на <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&sektion=4&manpath=FreeBSD+5.3-stable">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geom</span>(4)</span></a> vinum
должна использоваться программа пользователя <tt class="COMMAND">gvinum</tt>, и она пока
не поддерживает всех возможностей.</p>

<p>(31 октября 2004) Результат <tt class="COMMAND">netstat -m</tt> может быть
некорректным на SMP системах, когда переменная <var class="VARNAME">debug.mpsafenet</var>
установлена в <var class="LITERAL">1</var> (значение по умолчанию). Это вызвано ошибкой
``race condition'' в сборе статистики, а не утечкой памяти.</p>

<p>(31 октября 2004, обновление 5 ноября 2004) В FreeBSD/i386 и FreeBSD/amd64, при
установке FreeBSD 5.3 с использованием USB клавиатуры, клавиатура перестает работать
после загрузки ядра, поскольку считается, что подключена клавиатура PS/2. В качестве
обходного пути, выберите ``Escape to loader prompt'' в меню загрузчика и введите в
приглашение следующие строки:</p>

<pre class="SCREEN">
set hint.atkbd.0.flags="0x1"
boot
</pre>

<p>Обратите внимание, что при использовании загрузочных дискет эти параметры установлены
по умолчанию.</p>

<p>После установки добавьте в <tt class="FILENAME">/boot/loader.conf</tt> следующую
строку:</p>

<pre class="PROGRAMLISTING">
hint.atkbd.0.flags="0x1"
</pre>

<p>(1 ноября 2004) Планировщик ULE, описанный в заметках о релизе, был полностью
отключен, поскольку имеются проблемы со стабильностью.</p>

<p>(1 ноября 2004) Программы, подключающие <b class="APPLICATION">libpthread</b>, могут
не показывать статистику использования в <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=top&sektion=1&manpath=FreeBSD+5.3-stable"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">top</span>(1)</span></a>, а программы,
подключающие <b class="APPLICATION">libthr</b>, показывают правильную статистику.</p>

<p>(1 ноября 2004) Поддержка ATA RAID для CMD649 и SiI0680 ATA контроллеров не
функциональна в этом релизе. Когда такие контроллеры активируются под <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ata&sektion=4&manpath=FreeBSD+5.3-stable"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">ata</span>(4)</span></a> (ataraid) в
5.3, настройки RAID, сохраненные в 5.2 или предыдущих релизах, могут быть повреждены.</p>

<p>(3 ноября 2004) Для FreeBSD/i386 и FreeBSD/amd64, поддержка SMP в ядре <tt
class="FILENAME">GENERIC</tt> была отключена по умолчанию, поскольку SMP ядро может
понижать производительность упомянутых систем. Был добавлен файл конфигурации ядра <tt
class="FILENAME">SMP</tt>, который может быть использован для включения поддержки SMP.
Дополнительные подробности по сборке ядра находятся на странице <a
href="http://www.FreeBSD.org/doc/ru_RU.KOI8-R/books/handbook/kernelconfig.html"
target="_top">http://www.FreeBSD.org/doc/ru_RU.KOI8-R/books/handbook/kernelconfig.html</a>.</p>

<p>(4 ноября 2004) Утилита <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&sektion=1&manpath=FreeBSD+5.3-stable"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">tar</span>(1)</span></a> (известная
также как <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdtar&sektion=1&manpath=FreeBSD+5.3-stable">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bsdtar</span>(1)</span></a>) не
определяет конец носителя, например ленты или дискеты при указании его параметром <var
class="OPTION">-f</var>. В качестве альтернативы может быть использован <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gtar&sektion=1&manpath=FreeBSD+5.3-stable">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gtar</span>(1)</span></a> (<b
class="APPLICATION">GNU tar</b>).</p>

<p>(9 ноября 2004) Основанная на <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&sektion=4&manpath=FreeBSD+5.3-stable">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geom</span>(4)</span></a>
подсистема <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&sektion=4&manpath=FreeBSD+5.3-stable">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">vinum</span>(4)</span></a> не
работает для томов RAID5 на машинах с одним процессором. Отличные от RAID5 конфигурации
(такие как RAID1) должны работать правильно. Проблема была исправлена в ветви
RELENG_5.</p>

<p>(9 ноября 2004) В FreeBSD Руководстве по миграции 5.3-RELEASE должно упоминаться
удаление <tt class="FILENAME">/usr/sbin/nslookup</tt> и <tt
class="FILENAME">/usr/sbin/nsupdate</tt>, включенных в <b class="APPLICATION">BIND 8</b>
в процессе обновления из исходных текстов.</p>

<p>(9 ноября 2004) В заметках о релизе FreeBSD 5.3-RELEASE должно упоминаться, что <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/net/mpd/pkg-descr"><tt
class="FILENAME">net/mpd</tt></a>, скомпилированный на старых системах до 5.3-RELEASE
должен быть перекомпилирован.</p>

<p>(10 ноября 2004) В заметках о релизе FreeBSD 5.3-RELEASE должно явно упоминаться, что
порты/пакеты, собранные в старых системах до 5.3-RELEASE и подключающие старые потоковые
библиотеки POSIX (<b class="APPLICATION">libc_r</b> или <b
class="APPLICATION">libkse</b>) могут вызывать ошибку ``Spinlock called when not
threaded'' при запуске. Это происходит, когда программа подключает несколько различных
потоковых библиотек (обычно когда старые порты подключают <b
class="APPLICATION">libc_r</b>, а новые порты подключают <b
class="APPLICATION">libpthread</b>). Требуется либо перекомпиляция портов/пакетов либо
добавление необходимых строк в <tt class="FILENAME">/etc/libmap.conf</tt>. Более
детальная информация находится в <tt class="FILENAME">/usr/src/UPDATING</tt> (20040303 и
20040130).</p>

<p>(12 ноября 2004) Драйвер <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=em&sektion=4&manpath=FreeBSD+5.3-stable"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">em</span>(4)</span></a> работает
неправильно при одновременном включении поддержки VLAN и promiscuous режима. Исправление
тестируется и будет включено в ветвь исправлений 5.3.</p>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="LATE-NEWS" name="LATE-NEWS">4. Последние новости</a></h2>

<p>Нет новостей.</p>
</div>
</div>

<hr />
<p align="center"><small>Этот файл и другие документы, относящиеся к данной версии
FreeBSD, могут быть найдены по адресу <a
href="http://snapshots.jp.FreeBSD.org/">http://snapshots.jp.FreeBSD.org/</a>.</small></p>

<p align="center"><small>Если у вас возник вопрос, касающийся FreeBSD, прочтите <a
href="http://www.FreeBSD.org/ru/docs.html">документацию,</a> прежде чем написать письмо в
&#60;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&#62;.</small></p>

<p align="center"><small>Всем пользователям FreeBSD 5-STABLE рекомендуется подписаться на
список рассылки &#60;<a
href="mailto:stable@FreeBSD.org">stable@FreeBSD.org</a>&#62;.</small></p>

<p align="center"><small>Вопросы, касающиеся этого документа, вы можете направить по
адресу &#60;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&#62;.</small></p>
</body>
</html>

