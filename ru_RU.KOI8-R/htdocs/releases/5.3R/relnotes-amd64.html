<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>Информация о релизе FreeBSD/amd64 5.3-RELEASE</title>
<meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.7" />
<link rel="STYLESHEET" type="text/css" href="docbook.css" />
<meta http-equiv="Content-Type" content='text/html; charset="koi8-r"' />
</head>
<body class="ARTICLE" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084"
alink="#0000FF">
<div class="ARTICLE">
<div class="TITLEPAGE">
<h1 class="TITLE"><a id="AEN2" name="AEN2">Информация о релизе FreeBSD/amd64
5.3-RELEASE</a></h1>

<h3 class="CORPAUTHOR">Проект FreeBSD</h3>

<p class="COPYRIGHT">Copyright &copy; 2000, 2001, 2002, 2003, 2004 Проект
документирования FreeBSD</p>

<p class="PUBDATE">$FreeBSD: src/release/doc/ru_RU.KOI8-R/relnotes/common/new.sgml,v
1.6.2.5 2004/10/11 12:59:07 den Exp $<br />
</p>

<div>
<div class="ABSTRACT"><a id="AEN13" name="AEN13"></a>
<p>Заметки о релизе для FreeBSD 5.3-RELEASE содержат общую информацию по изменениям,
внесенным в систему FreeBSD с момента выпуска 5.2.1-RELEASE. Этот документ содержит
список сообщений безопасности, выпущенных после последнего релиза, а также список
значительных изменений, внесенных в ядро и пользовательские программы FreeBSD.
Представлены также краткие заметки по обновлению системы.</p>
</div>
</div>

<hr />
</div>

<div class="TOC">
<dl>
<dt><b>Содержание</b></dt>

<dt>1. <a href="#INTRO">Введение</a></dt>

<dt>2. <a href="#NEW">Что нового</a></dt>

<dd>
<dl>
<dt>2.1. <a href="#SECURITY">Сообщения безопасности</a></dt>

<dt>2.2. <a href="#KERNEL">Изменения в ядре</a></dt>

<dd>
<dl>
<dt>2.2.1. <a href="#BOOT">Изменения в загрузчике</a></dt>

<dt>2.2.2. <a href="#PROC">Поддержка оборудования</a></dt>

<dt>2.2.3. <a href="#NET-PROTO">Сетевые протоколы</a></dt>

<dt>2.2.4. <a href="#DISKS">Диски и хранение</a></dt>

<dt>2.2.5. <a href="#FS">Файловые системы</a></dt>

<dt>2.2.6. <a href="#AEN925">Стороннее программное обеспечение</a></dt>
</dl>
</dd>

<dt>2.3. <a href="#USERLAND">Изменения в программах пользователя</a></dt>

<dd>
<dl>
<dt>2.3.1. <a href="#RC-SCRIPTS">Скрипты <tt class="FILENAME">/etc/rc.d</tt></a></dt>
</dl>
</dd>

<dt>2.4. <a href="#CONTRIB">Стороннее программное обеспечение</a></dt>

<dt>2.5. <a href="#PORTS">Инфраструктура коллекции портов/пакетов</a></dt>

<dt>2.6. <a href="#RELENG">Подготовка релизов и интеграция</a></dt>

<dt>2.7. <a href="#DOC">Документация</a></dt>
</dl>
</dd>

<dt>3. <a href="#UPGRADE">Обновление с предыдущих релизов FreeBSD</a></dt>
</dl>
</div>

<div class="SECT1">
<h2 class="SECT1"><a id="INTRO" name="INTRO">1. Введение</a></h2>

<p>Этот документ содержит информацию о релизе FreeBSD 5.3-RELEASE для аппаратной
платформы AMD64. В нем описаны недавно добавленные, измененные, или удаленные возможности
FreeBSD. Он также представляет некоторые заметки по обновлению с предыдущей версии
FreeBSD.</p>

<p>Этот дистрибутив FreeBSD 5.3-RELEASE представляет собой release. Его можно найти на <a
href="ftp://ftp.FreeBSD.org/" target="_top">ftp://ftp.FreeBSD.org/</a> или на любом из
зеркал. Дополнительная информация по получению этого (или другого) release дистрибутива
FreeBSD может быть найдена в <a
href="http://www.FreeBSD.org/doc/ru_RU.KOI8-R/books/handbook/mirrors.html"
target="_top">приложении ``Получение FreeBSD''</a> <a
href="http://www.FreeBSD.org/doc/ru_RU.KOI8-R/books/handbook/" target="_top">Руководства
FreeBSD</a>.</p>

<p>Всем пользователям рекомендуется ознакомиться с сообщениями о проблемах перед
установкой FreeBSD. В этот документ вносятся самая последняя информация, полученная в
позже в процессе выпуска релиза или после релиза. Обычно в нем находятся информация о
известных ошибках, сообщениях безопасности и исправления документации. Актуальную копию
сообщений о проблемах для FreeBSD 5.3-RELEASE можно найти на веб сайте FreeBSD.</p>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="NEW" name="NEW">2. Что нового</a></h2>

<p>В этом разделе описаны основные видимые пользователю добавленные или измененные с
5.2.1-RELEASE возможности FreeBSD. Как правило, изменения, описанные здесь, уникальны для
5-STABLE, если только они не помечены как [MERGED].</p>

<p>Обычно в информации о релизе последовательно включены последние сообщения
безопасности, выпущенные после 5.3-RELEASE, информация о поддержки новых драйверов или
оборудования, новых команд или параметров, информация о основных исправлениях ошибок, или
обновлениях стороннего программного обеспечения. В нем могут также перечисляться
изменения важнейших портов/пакетов или практики выпуска релизов. Конечно, в информацию о
релизе не вносятся данные о каждом отдельном изменении, сделанном в FreeBSD между
релизами; этот документ фокусируется в основном на сообщениях безопасности, видимых
пользователю изменениях, и основных архитектурных улучшениях.</p>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="SECURITY" name="SECURITY">2.1. Сообщения безопасности</a></h3>

<p>Исправлена ошибка в <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mksnap_ffs&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mksnap_ffs</span>(8)</span></a>;
она приводила к сбрасыванию флагов файловой системы к их значению по умолчанию при
создании снимка (снэпшота) файловой системы. Возможные последствия зависят от способа
использования, но могут привести к отключению дополнительных списков контроля доступа,
или разрешению использования setuid бита на исполняемых файлах, расположенных на
недоверяемой файловой системе. Эта ошибка также относится к параметру <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">dump</span>(8)</span></a> <var
class="OPTION">-L</var>, где используется <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mksnap_ffs&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mksnap_ffs</span>(8)</span></a>.
Обратите внимание, что <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mksnap_ffs&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mksnap_ffs</span>(8)</span></a>
обычно доступен только суперпользователям и членам группы <tt
class="GROUPNAME">operator</tt>. За дальнейшей информацией обращайтесь к сообщению
безопасности <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-04:01.mksnap_ffs.asc"
target="_top">FreeBSD-SA-04:01</a>.</p>

<p>Исправлена ошибка в интерфейсе System V Shared Memory (а именно в системном вызове <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=shmat&sektion=2&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">shmat</span>(2)</span></a>). Эта
ошибка приводила к расположению сегмента совместно используемой памяти в невыделенном
участке памяти ядра. Это может привести к получению атакующим неавторизованного доступа к
частям памяти ядра, с возможным раскрытием важной информации, обходу механизмов контроля
доступа, или расширению привилегий. Более детальная информация может быть найдена в
сообщении безопасности <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-04:02.sh mat.asc"
target="_top">FreeBSD-SA-04:02</a>. [MERGED]</p>

<p>Была исправлена ошибка в коде системного вызова <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=jail_attach&sektion=2&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">jail_attach</span>(2)</span></a>.
Эта ошибка может позволить процессу с привилегиями суперпользователя внутри среды <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">jail</span>(8)</span></a> изменить
свой корневой каталог на корневой каталог другой среды jail, и таким образом получить
полный доступ на чтение и запись к файлам и каталогам внутри этого jail. Дополнительная
информация может быть найдена в сообщении безопасности <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-04:03.jail.asc"
target="_top">FreeBSD-SA-04:03</a>.</p>

<p>Потенциальная DoS атака с низким трафиком на TCP стек FreeBSD была предотвращена путем
ограничения количества TCP сегментов вне последовательности, которые могут одновременно
обслуживаться. Более детальная информация может быть найдена в сообщении безопасности <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-04:04.tcp.asc"
target="_top">FreeBSD-SA-04:04</a>. [MERGED]</p>

<p>Была исправлена ошибка в SSL/TLS ChangeCipherSpec сообщении <b
class="APPLICATION">OpenSSL</b>, которая могла привести к удалению нулевого указателя.
Она позволяла удаленной атакующей стороне вызвать крах приложений, использующих <b
class="APPLICATION">OpenSSL</b>, и привести к отказу в обслуживании (DoS). Более
детальная информация может быть найдена в сообщении безопасности <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-04:05.openssl.asc"
target="_top">FreeBSD-SA-04:05</a>. [MERGED]</p>

<p>Была исправлена ошибка в коде обработки некоторых параметров сокета IPv6 в системном
вызове <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=setsockopt&sektion=2&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">setsockopt</span>(2)</span></a>.
Она позволяла атакующему локально вызвать системную панику, а также могла позволять
неавторизованный доступ к частям памяти ядра, что могло привести к раскрытию важной
информации, обходу механизмов контроля доступа, или расширению привилегий. Более
детальная информация может быть найдена в сообщении безопасности <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-04:06.ipv6.asc"
target="_top">FreeBSD-SA-04:06</a>.</p>

<p>Были исправлены две ошибки в коде <b class="APPLICATION">CVS</b>. Они позволяли
серверу перезаписывать произвольные файлы клиента, а клиенту читать произвольные файлы на
сервере при удаленном доступе к CVS репозиториям. Более детальная информация может быть
найдена в сообщении безопасности <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-04:07.cvs.asc"
target="_top">FreeBSD-SA-04:07</a>. [MERGED]</p>

<p>Внесено исправление в <b class="APPLICATION">Heimdal</b>, исправляющее проблему,
вследствие которой не производилась адекватная проверка аутентификации между автономными
realm. Более подробная информация находится в сообщении безопасности <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-04:08.heimdal.asc"
target="_top">FreeBSD-SA-04:08</a>. [MERGED]</p>

<p>Была исправлена программная ошибка в <b class="APPLICATION">CVS</b>, позволявшая
злонамеренному клиенту перезаписывать произвольные участки памяти сервера. За дальнейшей
информацией обращайтесь к сообщению безопасности <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-04:10.cvs.asc"
target="_top">FreeBSD-SA-04:10</a>. [MERGED]</p>

<p>Была исправлена потенциальная проблема с целостностью кэша в реализации системного
вызова <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=msync&sektion=2&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">msync</span>(2)</span></a>,
использующей операцию <var class="LITERAL">MS_INVALIDATE</var>. Однако, в качестве
побочного эффекта исправления проблемы безопасности, флаг <var
class="LITERAL">MS_INVALIDATE</var> более не гарантирует выгрузку из памяти всех страниц.
Пользователи, которым требуется старая семантика <var
class="LITERAL">MS_INVALIDATE</var>, могут установить переменную sysctl <var
class="VARNAME">vm.old_msync</var>, если их не беспокоит данная проблема безопасности. За
дальнейшей информацией обращайтесь к сообщению безопасности <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-04:11.msync.asc"
target="_top">FreeBSD-SA-04:11</a>. [MERGED]</p>

<p>Была исправлена программная ошибка в системном вызове <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&sektion=2&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">jail</span>(2)</span></a>, которая
приводила к ошибке проверки попытки манипулирования таблицами маршрутизации из jail. За
дальнейшей информацией обращайтесь к сообщению безопасности <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-04:12.jail.asc"
target="_top">FreeBSD-SA-04:12</a>. [MERGED]</p>

<p>Была исправлена программная ошибка обработки некоторых системных вызовов Linux,
вследствие которой мог стать возможным доступ к областям памяти без соответствующей
проверки. За дальнейшей информацией обращайтесь к сообщению безопасности <a
href="ftp://ftp.freebsd.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-04:13.linux.asc"
target="_top">FreeBSD-SA-04:13</a>. [MERGED]</p>

<p>Множество программных ошибок в <b class="APPLICATION">CVS</b>, могущих привести к
раскрытию информации, DoS, или выполнению произвольного кода, были исправлены путем
обновления до <b class="APPLICATION">CVS</b> 1.11.17. За дальнейшей информацией
обращайтесь к сообщению безопасности <a
href="ftp://ftp.freebsd.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-04:14.cvs.asc"
target="_top">FreeBSD-SA-04:14</a>. [MERGED]</p>

<p>Ошибка в <var class="LITERAL">CONS_SCRSHOT</var> <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ioctl&sektion=2&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ioctl</span>(2)</span></a> была
исправлена; она может привести к получению неавторизованного доступа к областям памяти
ядра с возможным раскрытием критической информации, пропуску механизмов контроля доступа,
или к получению повышенных привилегий. За дальнейшей информацией обращайтесь к сообщению
безопасности <a
href="ftp://ftp.freebsd.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-04:15.syscons.asc"
target="_top">FreeBSD-SA-04:15</a>. [MERGED]</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="KERNEL" name="KERNEL">2.2. Изменения в ядре</a></h3>

<p><var class="LITERAL">ADAPTIVE_MUTEXES</var> были добавлены и включены по умолчанию.
Это меняет поведение блокирующих мьютексов, которые переключаются, если поток, которому
принадлежит мьютекс, выполняется другим процессором. Это поведение может быть изменено
путем установки параметра ядра <var class="VARNAME">NO_ADAPTIVE_MUTEXES</var>.</p>

<p>Был добавлен параметр ядра <var class="VARNAME">ADAPTIVE_GIANT</var>, который включает
адаптивность Giant блокировки при включении адаптивности мьютексов. Это повышает
производительность SMP систем и включено по умолчанию на i386.</p>

<p>Интерфейс <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bus_dma&sektion=9&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bus_dma</span>(9)</span></a>
теперь прозрачно поддерживает выравнивание и установление границ в теге DMA при загрузке
буферов, и <code class="FUNCTION">bus_dmamap_load()</code> будет автоматически
использовать сброс буферов когда это необходимо. Кроме того, был добавлен набор
переменных sysctl <var class="VARNAME">hw.busdma.*</var> для статистики <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bus_dma&sektion=9&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bus_dma</span>(9)</span></a>.</p>

<p>Функция <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=contigmalloc&sektion=9&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">contigmalloc</span>(9)</span></a>
была переписана с новым алгоритмом, который серьезно повышает надежность при высокой
нагрузке. Старый алгоритм может быть использован путем установки sysctl <var
class="VARNAME">vm.old_contigmalloc</var>. Дополнительная информация может быть получена
со страницы справочника <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=contigmalloc&sektion=9&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">contigmalloc</span>(9)</span></a>.</p>

<p>Правила path <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&sektion=5&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">devfs</span>(5)</span></a> теперь
корректно работают с каталогами.</p>

<p>API <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getvfsent&sektion=3&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">getvfsent</span>(3)</span></a> был
удален.</p>

<p>Переменная загрузчика <var class="VARNAME">hw.pci.allow_unsupported_io_range</var>
была удалена.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&sektion=2&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">jail</span>(2)</span></a> теперь
поддерживает использование raw сокетов изнутри jail. Эта возможность отключена по
умолчанию и контролируется переменной sysctl <var
class="VARNAME">security.jail.allow_raw_sockets</var>.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=kqueue&sektion=2&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">kqueue</span>(2)</span></a> теперь
поддерживает новый фильтр <var class="LITERAL">EVFILT_FS</var>, который используется для
отправки сигналов файловой системы в пространство пользователя. На данный момент
сигнализируются события mount, unmount и up/down статус NFS.</p>

<p>Была добавлена новая инфраструктура отладки, KDB. Она состоит из новой подсистемы GDB,
которая была переписана для поддержки потоков, run-length encoding compression, и так
далее, и внешний интерфейс, в инфраструктуре которого могут быть настроены несколько
различных подсистем отладки, и предоставлены основные сервисы для этих подсистем. Были
изменены следующие параметры:</p>

<ul>
<li>
<p>KDB включен по умолчанию через параметры ядра <var class="LITERAL">options KDB</var>,
<var class="LITERAL">options GDB</var>, и <var class="LITERAL">options DDB</var>. <var
class="LITERAL">DDB</var> и <var class="LITERAL">GDB</var> указывают, какие подсистемы
KDB включать.</p>
</li>

<li>
<p><var class="LITERAL">WITNESS_DDB</var> был переименован в <var
class="LITERAL">WITNESS_KDB</var>.</p>
</li>

<li>
<p><var class="LITERAL">DDB_TRACE</var> был переименован в <var
class="LITERAL">KDB_TRACE</var>.</p>
</li>

<li>
<p><var class="LITERAL">DDB_UNATTENDED</var> был переименован в <var
class="LITERAL">KDB_UNATTENDED</var>.</p>
</li>

<li>
<p><var class="LITERAL">SC_HISTORY_DDBKEY</var> был переименован в <var
class="LITERAL">SC_HISTORY_KDBKEY</var>.</p>
</li>

<li>
<p><var class="LITERAL">DDB_NOKLDSYM</var> был удален. Новая подсистема DDB поддерживает
pre-linker symbol lookups, так же как и KLD symbol lookups одновременно.</p>
</li>

<li>
<p><var class="LITERAL">GDB_REMOTE_CHAT</var> был удален. Это изменение GDB протокола
специфично для FreeBSD. Вместе с тем в протоколе GDB есть пакеты для вывода на
консоль.</p>
</li>
</ul>

<p>KDB дает также единственный способ взаимодействия для любого и всего кода, которому
необходимо использование функций отладки, таких как вход в отладчик или обработка
альтернативной последовательности прерывания. Для этих целей внешний интерфейс был сделан
не опциональным. Все отладочные запросы перенаправляются или обрабатываются текущей
подсистемой. Выбор текущей подсистемы выполняется переменной sysctl <var
class="VARNAME">debug.kdb.current</var>. Список установленных переменных находится в <var
class="VARNAME">debug.kdb.available</var>. В отладчик можно перейти, записав в sysctl
<var class="VARNAME">debug.kdb.enter</var>.</p>

<p>Была добавлена новая переменная sysctl <var class="VARNAME">debug.kdb.stop_cpus</var>.
Она контролирует, будут или нет IPI (Inter Processor Interrupts) для других CPU переданы
при входе в отладчик, чтобы остановить их в отладчике.</p>

<p>Загружаемые модули ядра теперь работают и включаются при загрузке amd64.</p>

<p>Была добавлена предварительная поддержка запуска 32-битных бинарных файлов Linux на
amd64. Эта возможность включена параметром ядра <var
class="LITERAL">COMPAT_LINUX32</var>.</p>

<p>Был добавлен новый параметр ядра, <var class="LITERAL">MAC_STATIC</var>, который
отключает внутреннюю синхронизацию MAC Framework, защищая от динамической загрузки и
выгрузки политик MAC.</p>

<p>Политика <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_bsdextended&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">mac_bsdextended</span>(4)</span></a> теперь поддерживает
определение и применение только первого правила из всех соответствующих правил. Эта
возможность может быть включена установкой новой переменной sysctl <var
class="VARNAME">mac_bsdextended_firstmatch_enabled</var>.</p>

<p>Политика <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_bsdextended&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">mac_bsdextended</span>(4)</span></a> теперь может протоколировать
неудачные попытки записи в syslog <var class="LITERAL">AUTHPRIV</var>. Эта возможность
может быть включена установкой новой переменной sysctl <var
class="VARNAME">mac_bsdextended_logging</var>.</p>

<p>mballoc был замещен на mbuma, Mbuf и Cluster аллокаторы основаны на множестве
расширений инфраструктуры UMA. В связи с этим изменением, параметр ядра <var
class="LITERAL">NMBCLUSTERS</var> более не используется. Максимальное количество
кластеров по прежнему устанавливается в соответствии с <var
class="LITERAL">maxusers</var>, но может быть сделано неограниченным путем установки
переменной загрузчика <var class="VARNAME">kern.ipc.nmbclusters</var> в нуль.</p>

<p><tt class="FILENAME">/dev/kmem</tt>, <tt class="FILENAME">/dev/mem</tt>, и <tt
class="FILENAME">/dev/io</tt> теперь также поставляются в виде загружаемых модулей
ядра.</p>

<p>Ошибка в <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mmap&sektion=2&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mmap</span>(2)</span></a>,
вследствие которой страницы, помеченные как <var class="LITERAL">PROT_NONE</var>, могли
стать читаемыми при определенных условиях, была исправлена. [MERGED]</p>

<p>Новая переменная загрузчика <var class="VARNAME">debug.mpsafenet</var> была добавлена
и включена по умолчанию. Она отключает блокировку Giant при работе сетевого стека
FreeBSD, что приводит к повышению производительности за счет улучшения параллельности и
уменьшения задержек при сетевых вычислениях. Обратите внимание, что включение узла
Netgraph <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_tty&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ng_tty</span>(4)</span></a>, KAME
IPsec, и подсистемы IPX/SPX приводит к включению сетевых операций с Giant, или к
появлению предупреждения при динамической загрузке этих компонентов, поскольку для
корректной работы им требуется блокировка Giant.</p>

<p>Был добавлен новый параметр ядра, <var class="VARNAME">NET_WITH_GIANT</var>. Он
восстанавливает значение debug.mpsafenet по умолчанию (<var class="LITERAL">0</var>), и
предназначен для использования на системах, собранных с небезопасными компонентами, или
там, где желательна более консервативная конфигурация.</p>

<p>Переменная загрузчика <var class="VARNAME">debug.mpsafevm</var> была включена по
умолчанию.</p>

<p>Был добавлен новый параметр ядра <var class="LITERAL">PREEMPTION</var>. Он позволяет
вытеснять потоки в ядре потоками с более высокими приоритетами. Этот параметр позволяет
повысить интерактивность и ускоряет работу потоков.</p>

<p>В дерево dev sysctl был добавлен уровень devclass для поддержки переменных по классам
устройств, в дополнение к переменным по устройствам. Это означает, что <var
class="VARNAME">dev.foo0.bar</var> теперь называются <var
class="VARNAME">dev.foo.0.bar</var>, и возможно также наличие <var
class="VARNAME">dev.foo.bar</var>.</p>

<p>Была добавлена новая переменная sysctl, <var
class="VARNAME">kern.always_console_output</var>. Она направляет вывод ядра на консоль
независимо от <var class="VARNAME">TIOCCONS</var>.</p>

<p>Была добавлена переменная sysctl <var class="VARNAME">kern.sched.name</var>, в которой
находится имя используемого планировщика, и переменная <var
class="VARNAME">kern.quantum</var> была перемещена в <var
class="VARNAME">kern.sched.quantum</var>.</p>

<p>Обновлено управление ресурсами и энергопотреблением шины <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pci&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pci</span>(4)</span></a>.</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Замечание:</b> Хотя управление состоянием энергопотребления в шине <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pci&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pci</span>(4)</span></a> было
включено по умолчанию, это может привести к проблемам на некоторых системах. Оно может
быть отключено путем установки переменной <var class="VARNAME">hw.pci.do_powerstate</var>
в <var class="LITERAL">0</var>.</p>
</blockquote>
</div>

<br />
<br />
<p>Планировщик ULE был добавлен в качестве дополнительного планировщика. Обратите
внимание, что в качестве планировщика по умолчанию в ядре <tt
class="FILENAME">GENERIC</tt> все еще используется традиционный 4BSD. Для большинства
пользователей интерактивность возросла во многих случаях. Это означает меньшее количество
``пропусков'' и ``рывков'' в интерактивных приложениях, когда компьютер сильно загружен.
Это не предотвращает проблем с перегруженными дисковыми подсистемам, но может помочь при
перегруженных CPU. На компьютерах с SMP, ULE реализует очереди для каждого CPU, позволяя
использовать CPU affinity, CPU binding, и расширенную поддержку HyperThreading, а также
предоставляет основу для дальнейших оптимизаций в будущем. При продолжении разработки
fine-grained kernel locking, планировщик сможет более эффективно использовать доступные
параллельные ресурсы.</p>

<p>Линейный алгоритм поиска, использовавшийся в <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=vm_map_findspace&sektion=9&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">vm_map_findspace</span>(9)</span></a>, был замещен на алгоритм
O(log n), строящий карту в виде дерева. Он значительно снижает нагрузку в <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=vm_map_findspace&sektion=9&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">vm_map_findspace</span>(9)</span></a> для приложений, которые
используют <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mmap&sektion=2&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mmap</span>(2)</span></a> во
многих сотнях или тысячах вхождений.</p>

<p>Переменные загрузчика <var class="VARNAME">debug.witness_*</var> были переименованы в
<var class="VARNAME">debug.witness.*</var>.</p>

<p>Динамический и статический линковщик FreeBSD теперь поддерживает Thread Local Storage
(TLS), возможность <b class="APPLICATION">GCC</b> определять модификатор <var
class="LITERAL">__thread</var> к определению глобальных и статических переменных. Этот
дополнительный модификатор означает, что значение переменной локально по отношению к
потоку; один поток, изменяющий это значение, не повлияет на значение переменной в любом
другом потоке.</p>

<p>Был обновлен код ядра, выделяющий файловые дескрипторы, и теперь он заимствован из
кода OpenBSD.</p>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="BOOT" name="BOOT">2.2.1. Изменения в загрузчике</a></h4>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="PROC" name="PROC">2.2.2. Поддержка оборудования</a></h4>

<p>Добавлен драйвер <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi_video&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">acpi_video</span>(4)</span></a>
для обеспечения управления переключением экранов и фоновой яркостью с использованием
видео расширений ACPI.</p>

<p>Драйвер <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=agp&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">agp</span>(4)</span></a> теперь
поддерживает AMD64 graphics aperture relocation table (GART).</p>

<p>Драйвер <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=nmdm&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">nmdm</span>(4)</span></a> был
переписан для увеличения надежности.</p>

<p>Драйвер <tt class="DEVICENAME">raid(4)</tt> (диск RAIDframe из NetBSD) был удален. В
настоящее время он не функционален, и потребует дополнительного объема работы, чтобы
стать работоспособным под существующим <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geom</span>(4)</span></a> API в
5-CURRENT.</p>

<p>Запись для драйвера <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pcic&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pcic</span>(4)</span></a> была
исключена из файла конфигурации ядра <tt class="FILENAME">GENERIC</tt>, поскольку драйвер
более не поддерживается. Эта запись была закомментирована в течение длительного
времени.</p>

<p>Добавлены переменные ядра для <var class="VARNAME">hw.uart.console</var> и <var
class="VARNAME">hw.uart.dbgport</var> для устройства <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=uart&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">uart</span>(4)</span></a>. Они
могут быть использованы соответственно для выбора последовательной консоли и отладочного
порта, как и атрибуты.</p>

<p>Был добавлен драйвер устройства <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ubser&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ubser</span>(4)</span></a> для
поддержки управляемых с консоли последовательных адаптеров BWCT.</p>

<p>Был добавлен драйвер <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ucycom&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ucycom</span>(4)</span></a> для
поддержки семейства мостов USB к RS232 Cypress CY7C637xx и CY7C640/1xx, один из которых
используется в DeLorme Earthmate USB GPS приемнике (который и является единственным
поддерживаемым этим драйвером устройством на данный момент). Этот драйвер не полон,
поскольку в нем еще нет поддержки вывода и контроля потока.</p>

<p>Инфраструктура драйверов устройств (как и многие драйверы) была обновлена. Среди
прочих изменений: еще больше драйверов теперь используют автоматически выделяемые главные
(major) номера (вместо старых статических главных номеров). Расширены функции по
поддержке клонирования псевдо-устройств. Несколько изменений в API драйверов, включая
новое поле <var class="VARNAME">d_version</var> в <var class="VARNAME">struct
cdevsw</var>. Обратите внимание, что сторонние драйвера устройств потребуют
перекомпиляции после этого изменения.</p>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="MM" name="MM">2.2.2.1. Поддержка мультимедиа</a></h5>

<p>Драйвер <tt class="DEVICENAME">meteor</tt> (видеозахват) был удален вследствие
неработоспособности и отсутствия поддержки.</p>

<p>Код Direct Rendering Manager (DRM) был обновлен из дерева CVS DRI Project от 26 мая
2004 года. Это обновление включает новые PCI ID и новый пакет для Radeon.</p>

<p>Драйверы для различных звуковых карт были реорганизованы; <var class="LITERAL">device
sound</var> это общий звуковой драйвер, а <var class="LITERAL">device snd_*</var> это
звуковые драйвера устройств. Драйвер <tt class="DEVICENAME">midi</tt>, поддерживающий
последовательный порт и несколько звуковых карт, был удален. Дополнительные подробности
находятся на соответствующих страницах справочной системы: <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sound&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sound</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_ad1816&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_ad1816</span>(4)</span></a>,
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_als4000&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_als4000</span>(4)</span></a>,
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_cmi&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_cmi</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_cs4281&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_cs4281</span>(4)</span></a>,
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_csa&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_csa</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_ds1&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_ds1</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_emu10k1&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_emu10k1</span>(4)</span></a>,
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_es137x&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_es137x</span>(4)</span></a>,
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_gusc&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_gusc</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_maestro3&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_maestro3</span>(4)</span></a>,
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_sbc&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_sbc</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_solo&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_solo</span>(4)</span></a>, и
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_uaudio&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">snd_uaudio</span>(4)</span></a>.</p>

<p>Драйвер <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sound&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sound</span>(4)</span></a> (бывший
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pcm&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pcm</span>(4)</span></a>) был
модифицирован для чтения <tt class="FILENAME">/boot/device.hints</tt> при запуске, чтобы
восстанавливать значения каналов mixer по умолчанию. Обратите внимание, что в <tt
class="FILENAME">/boot/device.hints</tt> все еще используется имя драйвера <var
class="LITERAL">pcm</var>. Дополнительную информацию и примеры можно найти на странице
справочной системы <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sound&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sound</span>(4)</span></a>.</p>
</div>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="NET-IF" name="NET-IF">2.2.2.2. Поддержка сетевых
интерфейсов</a></h5>

<p>Было исправлено кратковременно отключение в драйвере <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=em&sektion=4&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">em</span>(4)</span></a> во время
перенастройки параметров. [MERGED]</p>

<p>Был добавлен драйвер <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fwip&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fwip</span>(4)</span></a>,
поддерживающий IP через FireWire. Обратите внимание, что на данный момент номер
широковещательного канала жестко установлен и MCAP для широковещательного выделения
каналов не поддерживается. Этот драйвер предназначен для соответствия стандартам RFC 2734
и RFC 3146 IP через FireWire и со временем заменит драйвер <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fwe&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fwe</span>(4)</span></a>.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fxp&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fxp</span>(4)</span></a> теперь
использует дерево устройств sysctl, например <var class="VARNAME">dev.fxp0</var>, и эти
переменные sysctl могут быть установлены для каждого устройства.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fxp&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fxp</span>(4)</span></a> теперь
предоставляет реальный контроль над возможностью получения расширенных фреймов Ethernet,
отображаемый как <var class="LITERAL">VLAN_MTU</var>. Она может переключаться из
пространства пользователя параметрами <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ifconfig</span>(8)</span></a> <var
class="OPTION">vlanmtu</var> и <var class="OPTION">-vlanmtu</var>.</p>

<p>Драйвер <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=hme&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">hme</span>(4)</span></a> теперь
поддерживает длинные фреймы, и может использоваться для <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=vlan&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">vlan</span>(4)</span></a> с полным
размером Ethernet MTU.</p>

<p>Драйвер <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=hme&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">hme</span>(4)</span></a> теперь
поддерживает TCP/UDP Transmit/Receive разгрузку контрольной суммы (checksum offload) на
прием/передачу. Поскольку <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=hme&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">hme</span>(4)</span></a> не
компенсирует контрольную сумму для UDP дейтаграммы, которая может принимать значение <var
class="LITERAL">0x0</var>, UDP разгрузка контрольной суммы на передачу выключена по
умолчанию. Она может быть включена путем установки параметра соединения <var
class="OPTION">link0</var> через <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ifconfig</span>(8)</span></a>.</p>

<p>Был добавлен драйвер <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ixgb&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ixgb</span>(4)</span></a>,
поддерживающий карты Intel PRO/10GBE 10 Gigabit Ethernet. [MERGED]</p>

<p>Была исправлена ошибка в драйвере <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=nge&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">nge</span>(4)</span></a>, которая
делала невозможной работу VLAN. [MERGED]</p>

<p>Были исправлены несколько ошибок, относящиеся к поддержке <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=polling&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">polling</span>(4)</span></a> в
драйвере <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rl&sektion=4&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">rl</span>(4)</span></a>. [MERGED]</p>

<p>Были исправлены несколько ошибок, относящихся к обработке multicast и promiscuous
режимов в драйвере <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sk&sektion=4&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">sk</span>(4)</span></a>.</p>

<p>Драйвер <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ste&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ste</span>(4)</span></a> теперь
поддерживает <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=polling&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">polling</span>(4)</span></a>.
[MERGED]</p>

<p>Был добавлен драйвер <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=udav&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">udav</span>(4)</span></a>. Он
предоставляет поддержку USB Ethernet адаптеров, основанных на Davicom DM9601 чипсете.</p>

<p>Был добавлен драйвер <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=vge&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">vge</span>(4)</span></a>,
поддерживающий чип VIA Networking Technologies VT6122 Gigabit Ethernet и интегрированный
10/100/1000 copper PHY.</p>

<p>Драйвер <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=vr&sektion=4&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">vr</span>(4)</span></a> теперь
поддерживает <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=polling&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">polling</span>(4)</span></a>.
[MERGED]</p>

<p>Поддержка аппаратной TX контрольной суммы в драйвере <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=xl&sektion=4&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">xl</span>(4)</span></a> была отключена,
поскольку она не работала корректно и уменьшала скорость передачи данных. [MERGED]</p>

<p>Поддержка интерфейсами <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=polling&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">polling</span>(4)</span></a>
теперь может быть включена поинтерфейсно. Следующие сетевые драйверы поддерживают <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=polling&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">polling</span>(4)</span></a>: <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dc&sektion=4&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">dc</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fxp&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fxp</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=em&sektion=4&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">em</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ixgb&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ixgb</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=nge&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">nge</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=re&sektion=4&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">re</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rl&sektion=4&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">rl</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sis&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sis</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ste&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ste</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=vge&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">vge</span>(4)</span></a>, и <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=vr&sektion=4&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">vr</span>(4)</span></a>. Эта
возможность может управляться через <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ifconfig</span>(8)</span></a> (за
исключением <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ixgb&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ixgb</span>(4)</span></a>).
[MERGED]</p>
</div>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="NET-PROTO" name="NET-PROTO">2.2.3. Сетевые протоколы</a></h4>

<p>Драйвер туннеля <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gre&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gre</span>(4)</span></a> теперь
поддерживает WCCP версии 2.</p>

<p>Правила <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(4)</span></a> теперь
поддерживают параметр <var class="LITERAL">versrcreach</var>, для проверки наличия в
таблице маршрутизатора действующего маршрута к адресу источника пакета. Этот параметр
очень полезен для маршрутизаторов с полной информацией об основных маршрутах интернет в
таблице маршрутизации (BGP) для отбрасывания пакетов с подделанными или
немарштутизируемыми адресами источников. Например,</p>

<pre class="PROGRAMLISTING">
deny ip from any to any not versrcreach
</pre>

это эквивалент следующей команды в синтаксисе Cisco IOS: 

<pre class="PROGRAMLISTING">
ip verify unicast source reachable-via any
</pre>

<br />
<br />
<p>Правила <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(4)</span></a> теперь
поддерживают параметр <var class="LITERAL">antispoof</var>, для проверки адреса источника
входящих пакетов на принадлежность к непосредственно подключенной сети. Если сеть
подключена непосредственно, входящий пакет проверяется на соответствие интерфейсу, с
которого он пришел. Когда входящий интерфейс и подключенный непосредственно интерфейс не
совпадают, пакет не соответствует правилу. Например:</p>

<pre class="PROGRAMLISTING">
deny ip from any to any not antispoof in
</pre>

<br />
<br />
<p>Правила <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(4)</span></a> теперь
поддерживают параметр <var class="LITERAL">jail</var>, для ассоциации со специфическим
ID. Например:</p>

<pre class="PROGRAMLISTING">
count ip from any to any jail 2
</pre>

Имейте ввиду, что это правило на данный момент применяется только к TCP и UDP пакетам.
<br />
<br />
<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(4)</span></a> теперь
поддерживает таблицы адресов (lookup tables), полезные при обработке больших наборов
разных адресов. [MERGED]</p>

<p>Правило <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(4)</span></a> <var
class="LITERAL">forward</var> было встроено в ядро параметром <var
class="LITERAL">IPFIREWALL_FORWARD</var>.</p>

<p>Новая переменная sysctl <var class="VARNAME">net.inet.ip.process_options</var> для
контроля обработки параметров IP. При установке этой переменной в <var
class="LITERAL">0</var> параметры IP игнорируются и передаются не измененными, при
установке в <var class="LITERAL">1</var> все параметры IP обрабатываются (поведение по
умолчанию), а при установке в <var class="LITERAL">2</var> все пакеты с параметрами IP
отбрасываются с сообщением ICMP filter prohibited.</p>

<p>Были исправлены некоторые ошибки в реализации IPsec от KAME Project. Эти ошибки были
связаны с освобождением объектов памяти перед тем, как все ссылки на эти объекты были
удалены, они могли стать причиной странного поведения или паники ядра после очистки
Security Policy Database (SPD).</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">natd</span>(8)</span></a> теперь
поддерживает несколько экземпляров через новый параметр <var
class="OPTION">globalports</var>. Он позволяет <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">natd</span>(8)</span></a> привязку
к различным сетевым интерфейсам и распределение нагрузки.</p>

<p>Был добавлен тип узла Netgraph <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_atmllc&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ng_atmllc</span>(4)</span></a>,
который работает с RFC 1483 ATM LLC инкапсуляцией.</p>

<p>Был добавлен тип узла Netgraph <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_hub&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ng_hub</span>(4)</span></a>,
который поддерживает простую рассылку пакетов и работает как концентратор Ethernet.
[MERGED]</p>

<p>Тип узла Netgraph <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_rfc1490&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ng_rfc1490</span>(4)</span></a>
теперь поддерживает инкапсуляцию в стиле Cisco, которая часто используется вместе с RFC
1490 в соединениях frame relay.</p>

<p>Был добавлен тип узла Netgraph <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_sppp&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ng_sppp</span>(4)</span></a>,
являющийся интерфейсом <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=netgraph&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">netgraph</span>(4)</span></a> к
оригинальному сетевому модулю <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sppp&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sppp</span>(4)</span></a> для
синхронных линий.</p>

<p>Был добавлен новый метод Netgraph, позволяющий восстановление поведения, потерянного
при изменении стиля узлов Netgraph <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_tee&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ng_tee</span>(4)</span></a> с
4.<var class="REPLACEABLE">X</var>.</p>

<p>Был добавлен тип узла Netgraph <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_vlan&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ng_vlan</span>(4)</span></a>,
который поддерживает IEEE 802.1Q VLAN tagging. [MERGED]</p>

<p>Поддержка <var class="LITERAL">PFIL_HOOKS</var> теперь постоянно встроена в ядро, и
соответствующие параметры ядра были удалены. Все подсистемы фильтрации пакетов,
поддерживаемые FreeBSD, теперь используют инфраструктуру <var
class="LITERAL">PFIL_HOOKS</var>.</p>

<p>В сокет маршрутизации была добавлена поддержка уведомления об изменении состояния
носителя Ethernet.</p>

<p>Поддержка Link Quality Monitoring (LQM) в <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> была
переписана заново. LQM, описанный в RFC 1989, позволяет PPP сохранять информацию о
качестве работающего соединения. [MERGED]</p>

<p>Клонирование псевдо-интерфейсов было обновлено, чтобы сделать возможным создание
интерфейсов <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=stf&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">stf</span>(4)</span></a> с именами
<tt class="DEVICENAME">stf0</tt>, <tt class="DEVICENAME">stf</tt>, или <tt
class="DEVICENAME">6to4</tt>. Обратите внимание, что это нарушает обратную совместимость;
например, теперь <tt class="COMMAND">ifconfig stf</tt> создаст интерфейс <tt
class="DEVICENAME">stf</tt>, а не <tt class="DEVICENAME">stf0</tt>, и не выведет <tt
class="DEVICENAME">stf0</tt> на стандартный вывод.</p>

<p>Следующие возможности TCP теперь включены по умолчанию: RFC 3042 (Limited Retransmit),
RFC 3390 (increased initial congestion window sizes), TCP bandwidth-delay product
limiting. Для этих возможностей доступен набор переменных sysctl <var
class="VARNAME">net.inet.tcp.rfc3042</var>, <var
class="VARNAME">net.inet.tcp.rfc3390</var>, и <var
class="VARNAME">net.inet.tcp.inflight.enable</var>. Дополнительная информация может быть
найдена в <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tcp&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">tcp</span>(4)</span></a>.</p>

<p>FreeBSD реализация TCP теперь включает поддержку минимального MSS (устанавливается
через переменную sysctl <var class="VARNAME">net.inet.tcp.minmss</var>) и ограничение
потока данных через соединения, передающие множество мелких TCP сегментов в короткий
период времени (через переменную sysctl <var
class="VARNAME">net.inet.tcp.minmssoverload</var>). Соединения, превысившие этот предел,
могут быть сброшены. Эта возможность предоставляет защиту от целого класса исчерпывающих
ресурсы атак.</p>

<p>Реализация TCP теперь включает частичную поддержку RFC 2385 (TCP-MD5) digest (только
на вывод). Эта возможность, включаемая параметрами ядра <var
class="LITERAL">TCP_SIGNATURE</var> и <var class="LITERAL">FAST_IPSEC</var>, является
расширением TCP для аутентификации TCP сессий. <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=setkey&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">setkey</span>(8)</span></a> теперь
включает поддержку TCP-MD5 класса ассоциаций безопасности. [MERGED]</p>

<p>Обработка reset в TCP соединении была улучшена, чтобы усложнить reset атаки настолько,
насколько это возможно, при сохранении совместимости с широчайшим диапазоном TCP
стеков.</p>

<p>Реализация RFC 1948 была улучшена. Компонент временного смещения в Initial Sequence
Number (ISN) теперь включает случайное положительное число, так что ISN всегда
увеличивается, независимо от скорости повторного использования порта.</p>

<p>Было реализовано произвольное ``эфемерное'' выделение порта (random ephemeral port
allocation), пришедшее из OpenBSD. Оно включено по умолчанию и может быть отключено через
переменную sysctl <var class="VARNAME">net.inet.ip.portrange.randomized</var>.
[MERGED]</p>

<p>Был добавлен TCP Selective Acknowledgements (SACK), как описано в RFC 2018. Это
увеличивает производительность TCP через соединения с большими потерями пакетов. SACK
может быть включен переменной sysctl <var
class="VARNAME">net.inet.tcp.sack.enable</var>.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="DISKS" name="DISKS">2.2.4. Диски и хранение</a></h4>

<p>Драйвер <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ata&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ata</span>(4)</span></a> теперь
поддерживает контроллеры <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cardbus&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">cardbus</span>(4)</span></a>
ATA/SATA.</p>

<p>Было исправлено множество ошибок в драйвере <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ata&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ata</span>(4)</span></a>. Наиболее
заметные из них относятся к улучшению детектирования master/slave устройств и к проблемам
с задержками.</p>

<p>Драйвер <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ata&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ata</span>(4)</span></a> теперь
поддерживает Promise command sequencer, имеющийся на всех современных контроллерах
Promise (PDC203** PDC206**).</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Замечание:</b> Добавлена также предварительная поддержка для Promise SX4/SX4000 в
качестве ``обычного'' Promise ATA контроллера; ATA RAID поддерживается, но только с
уровнями RAID0, RAID1 и RAID0+1.</p>
</blockquote>
</div>

<br />
<br />
<p>Параметр ядра <var class="LITERAL">DA_OLD_QUIRKS</var>, предназначенный для драйвера
диска CAM SCSI (<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cam&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">cam</span>(4)</span></a>) был
удален. [MERGED]</p>

<p>Была исправлена ошибка в <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geom</span>(4)</span></a>, которая
могла приводить к прерыванию ввода/вывода в некоторых редких случаях.</p>

<p>Был добавлен новый класс <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geom</span>(4)</span></a> <var
class="LITERAL">GEOM_CONCAT</var> для соединения нескольких дисков в один.</p>

<p>Был добавлен новый класс <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geom</span>(4)</span></a> <var
class="LITERAL">GEOM_NOP</var> для различного тестирования.</p>

<p>Были добавлены новый класс <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geom</span>(4)</span></a> <var
class="LITERAL">GEOM_RAID3</var> для преобразования RAID3 и утилита пользователя <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=graid3&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">graid3</span>(8)</span></a>.</p>

<p>Был добавлен новый класс <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geom</span>(4)</span></a> <var
class="LITERAL">GEOM_STRIPE</var>, который реализует преобразование RAID0. В этом классе
есть два режима: ``fast'' и ``economic''. В режиме fast, когда используются очень
небольшой размер страйпа, только один запрос ввода вывода отправляется к каждому диску в
страйпе; это приблизительно в 10 раз быстрее для страйпов малого размера, чем режим
economic и другие реализации RAID0. Хотя режим fast используется по умолчанию, он
потребляет несколько больше памяти. Путем установки переменной загрузчика <var
class="VARNAME">kern.geom.stripe.fast</var> в 0 может быть включен режим economic, в
котором запросы отправляются каждый раз. Возможно также указание максимального количества
памяти, потребляемого в режиме fast, через переменную загрузчика <var
class="VARNAME">kern.geom.stripe.maxmem</var>.</p>

<p>Был добавлен GEOM Gate, который состоит из нового класса <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geom</span>(4)</span></a> <var
class="LITERAL">GEOM_GATE</var> и нескольких утилит пользователя GEOM Gate (<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ggatel&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ggatel</span>(8)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ggatec&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ggatec</span>(8)</span></a>, and
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ggated&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ggated</span>(8)</span></a>). Он
поддерживает экспорт устройств, включающих не приспособленные к <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geom</span>(4)</span></a> через
сеть.</p>

<p>Был добавлен новый класс <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geom</span>(4)</span></a> <var
class="LITERAL">GEOM_LABEL</var> для обнаружения меток томов на различных файловых
системах, таких как UFS, MSDOSFS (FAT12, FAT16, FAT32), и ISO9660.</p>

<p>Новый класс <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geom</span>(4)</span></a> <var
class="LITERAL">GEOM_GPT</var>, поддерживающий разделы GUID Partition Table (GPT) и
возможность создания большого количества разделов на одном диске, был добавлен в <tt
class="FILENAME">GENERIC</tt> по умолчанию.</p>

<p>Был добавлен новый класс <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geom</span>(4)</span></a> <var
class="LITERAL">GEOM_MIRROR</var>, поддерживающий функциональность RAID1. Для контроля
этого класса может использоваться утилита <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gmirror&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gmirror</span>(8)</span></a>.</p>

<p>Был добавлен новый класс <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geom</span>(4)</span></a> <var
class="LITERAL">GEOM_UZIP</var>, реализующий сжатые диски только для чтения. На данный
момент он поддерживает формат сжатия дисков cloop V2.0.</p>

<p>Был добавлен новый класс <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geom</span>(4)</span></a> <var
class="LITERAL">GEOM_VINUM</var> для поддержки взаимодействия между <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">vinum</span>(4)</span></a> и <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geom</span>(4)</span></a>.</p>

<p>Драйвер <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ips&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ips</span>(4)</span></a> теперь
поддерживает современные контроллеры Adaptec ServeRAID series SCSI.</p>

<p>Драйвер <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=umass&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">umass</span>(4)</span></a> теперь
поддерживает отсутствовавшие команды ATAPI MMC и правильно обрабатывает задержки.
[MERGED]</p>

<p>Менеджер томов <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">vinum</span>(4)</span></a> был
обновлен для использования <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geom</span>(4)</span></a>,
инфраструктуры трансформирования дисковых запросов ввода-вывода 5.x. Была добавлена
утилита пользователя <tt class="COMMAND">gvinum</tt>.</p>

<p>Была добавлена поддержка LSI-type программного RAID.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="FS" name="FS">2.2.5. Файловые системы</a></h4>

<p>Код файловой системы EXT2FS теперь включает частичную поддержку больших файлов (&gt;
4GB). Частичность поддержки заключается в том, невозможно создать большие файлы на
файловых системах, которые не были обновлены до <var class="LITERAL">EXT2_DYN_REV</var>
или на тех, где в суперблоке не установлен флаг <var
class="LITERAL">EXT2_FEATURE_RO_COMPAT_LARGE_FILE</var>.</p>

<p>Была исправлена паника в NFSv4 клиенте; она случалась при попытке работы с
поддерживающим только NFSv3/NFSv2 сервером.</p>

<p>Был добавлен параметр ядра <var class="LITERAL">MSDOSFS_LARGE</var> для поддержки
файловых систем больших, чем 128GB. Этот параметр выключен по умолчанию. Имейте ввиду,
что он использует как минимум 32 байта памяти ядра для каждого файла на диске; его
использование безопасно только в четко контролируемых ситуациях, таких как монтирование
файловой системы с менее чем 1 миллионом файлов только для чтения, и так далее. Экспорт
этих больших файловых систем по NFS не поддерживается.</p>

<p>Клиент SMBFS теперь поддерживает подпись SMB запроса, которая предотвращает атаки
``man in the middle'' и необходима для подключения к серверам Windows 2003 в настройке по
умолчанию. Поскольку подпись каждого сообщения понижает производительность, эта
возможность включается только если сервер ее требует; со временем она может стать
параметром <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_smbfs&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">mount_smbfs</span>(8)</span></a>.</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN925" name="AEN925">2.2.6. Стороннее программное
обеспечение</a></h4>

<p><b class="APPLICATION">ALTQ framework</b> была импортирована из снэпшота KAME от 7
июня 2004 года. Этот импорт нарушает совместимость ABI в <var class="VARNAME">struct
ifnet</var> и требует перекомпиляции всех сетевых драйверов. Кроме того, некоторые
сетевые драйверы были изменены для поддержки инфраструктуры ALTQ. Обновлены драйверы <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bfe&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bfe</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=em&sektion=4&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">em</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fxp&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fxp</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=em&sektion=4&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">em</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=lnc&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">lnc</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tun&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">tun</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=de&sektion=4&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">de</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rl&sektion=4&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">rl</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sis&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sis</span>(4)</span></a>, и <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=xl&sektion=4&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">xl</span>(4)</span></a>.</p>

<p><b class="APPLICATION">IPFilter</b> был обновлен с версии 3.4.31 до версии 3.4.35
[MERGED].</p>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="USERLAND" name="USERLAND">2.3. Изменения в программах
пользователя</a></h3>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=acpidump&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">acpidump</span>(8)</span></a>
теперь поддерживает таблицы SSDT. Дамп или дизассемблирование DSDT теперь также включает
содержимое этих таблиц, если они присутствуют.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bsdlabel</span>(8)</span></a>
теперь поддерживает параметр <var class="OPTION">-f</var> для работы с файлами вместо
разделов диска.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdtar&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bsdtar</span>(1)</span></a> теперь
используется в качестве утилиты <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">tar</span>(1)</span></a> в базовой
системе FreeBSD по умолчанию. <tt class="FILENAME">/usr/bin/tar</tt> был сделан
символической ссылкой, указывающей по умолчанию на <tt
class="FILENAME">/usr/bin/bsdtar</tt>. Для возврата к <tt
class="FILENAME">/usr/bin/gtar</tt> по умолчанию, может быть использована переменная
сборки <var class="VARNAME">WITH_GTAR</var>.</p>

<p>Были добавлены команды <tt class="COMMAND">bthidcontrol</tt> и <tt
class="COMMAND">bthidd</tt>, поддерживающие Bluetooth HID (Human Interface Device).</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=col&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">col</span>(1)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=colcrt&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">colcrt</span>(1)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=colrm&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">colrm</span>(1)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=column&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">column</span>(1)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fmt&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fmt</span>(1)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=join&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">join</span>(1)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rev&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rev</span>(1)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tr&sektion=1&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">tr</span>(1)</span></a>, и <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ul&sektion=1&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">ul</span>(1)</span></a> теперь
поддерживают многобайтовые символы.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=conscontrol&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">conscontrol</span>(8)</span></a>
теперь поддерживает команды <var class="LITERAL">set</var> и <var
class="LITERAL">unset</var>, которые устанавливают/удаляют виртуальную консоль. <var
class="LITERAL">unset</var> направляет вывод из системы, например <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=printf&sektion=9&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">printf</span>(9)</span></a> из
ядра, на реальную основную консоль. Это интерфейс к tty ioctl <var
class="LITERAL">TIOCCONS</var>.</p>

<p>Даемон <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">cron</span>(8)</span></a> теперь
принимает два параметра, <var class="OPTION">-j</var> и <var class="OPTION">-J</var>,
включающие рассинхронизацию заданий, запускаемых непривилегированными пользователями и
суперпользователем соответственно. Рассинхронизация означает, что перед выполнением
задания <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">cron</span>(8)</span></a>
останавливается на небольшой произвольный период времени в заданном пределе. Эта
возможность предназначена для уменьшения пиков нагрузки, появляющихся при выполнении
большого количества задач, запланированных на определенный момент времени. [MERGED]</p>

<p>Параметры <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cut&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">cut</span>(1)</span></a> <var
class="OPTION">-c</var>, <var class="OPTION">-d</var>, и <var class="OPTION">-f</var>
теперь корректно работают в локалях с многобайтными символами.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cvs&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">cvs</span>(1)</span></a> теперь
поддерживает ключевое слово <var class="OPTION">iso8601</var> для отображения дат в
формате ISO 8601.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=daemon&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">daemon</span>(8)</span></a> теперь
поддерживает параметр <var class="OPTION">-p</var> для создания PID файла.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&sektion=1&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">dd</span>(1)</span></a> теперь
поддерживает параметр <var class="OPTION">fillchar</var> для указания альтернативного
символа заполнения в режиме конверсии, или при использовании <var
class="OPTION">noerror</var> с <var class="OPTION">sync</var> при возникновении ошибки
ввода.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=df&sektion=1&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">df</span>(1)</span></a> теперь
поддерживает параметр <var class="OPTION">-c</var> для отображения полной статистики
файловых систем.</p>

<p>Была исправлена ошибка в <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=df&sektion=1&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">df</span>(1)</span></a>, которая могла
приводить к выводу некорректной информации при указании параметра <var
class="OPTION">-t</var> и недоступности точки монтирования для вызывающего
пользователя.</p>

<p>Утилита <tt class="COMMAND">doscmd</tt> была удалена из базовой системы FreeBSD и
доступна через порт <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/emulators/doscmd/pkg-descr"><tt
class="FILENAME">emulators/doscmd</tt></a> из коллекции портов FreeBSD.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">dump</span>(8)</span></a> и <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=restore&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">restore</span>(8)</span></a>
теперь поддерживают параметр <var class="OPTION">-P</var> для указания других методов
резервного копирования (не в файлы или на ленты). Аргумент передается <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sh&sektion=1&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">sh</span>(1)</span></a> с определенной
переменной окружения <var class="VARNAME">$DUMP_VOLUME</var> или <var
class="VARNAME">$RESTORE_VOLUME</var> соответственно. Дополнительная информация находится
на страницах справочника <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">dump</span>(8)</span></a> и <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=restore&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">restore</span>(8)</span></a>.</p>

<p>Была добавлена утилита <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=eeprom&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">eeprom</span>(8)</span></a> для
отображения и изменения настроек системы, сохраненных в EEPROM или NVRAM. Существующая
реализация поддерживает системы, поставляемые с Open Firmware.</p>

<p>Была добавлена функция <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fgetwln&sektion=3&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fgetwln</span>(3)</span></a>,
версия <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fgetln&sektion=3&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fgetln</span>(3)</span></a> для
расширенных символов.</p>

<p>Утилита <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=find&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">find</span>(1)</span></a> теперь
поддерживает параметр <var class="OPTION">-acl</var> в основном для поиска файлов с <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=acl&sektion=3&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">acl</span>(3)</span></a>.</p>

<p>Утилита <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=find&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">find</span>(1)</span></a> теперь
поддерживает новый основной параметр <var class="OPTION">-depth <var
class="REPLACEABLE">n</var></var>, который проверяет, соответствует ли глубина вложения
данного файла относительно начальной точки поиска <var class="REPLACEABLE">n</var>.
[MERGED]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ftpd&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ftpd</span>(8)</span></a> теперь
при открытии сокета для передачи данных в активном режиме использует эффективный UID
текущего пользователя, а не <tt class="USERNAME">root</tt>. Это полезно для сопоставления
анонимного FTP трафика правилу <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(8)</span></a> с
параметром <var class="LITERAL">uid</var>.</p>

<p>Были реализованы функции <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ftw&sektion=3&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ftw</span>(3)</span></a> и <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=nftw&sektion=3&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">nftw</span>(3)</span></a>. Они
используются для прохода по иерархии каталогов.</p>

<p>Была добавлена утилита <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geom</span>(8)</span></a> для
оперирования классами <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geom</span>(4)</span></a> из
пространства пользователя.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gpt&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gpt</span>(8)</span></a>, утилита
для работы с GUID таблицей разделов, теперь поддерживает команду <var
class="OPTION">remove</var>. Ее команда <var class="OPTION">add</var> теперь поддерживает
параметр <var class="OPTION">-i</var>, который позволяет пользователю определять номер
для нового раздела.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=id&sektion=1&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">id</span>(1)</span></a> теперь
поддерживает параметр <var class="OPTION">-M</var> для вывода метки MAC текущего
процесса.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ifconfig</span>(8)</span></a>
теперь поддерживает переименование сетевых интерфейсов на лету, используя параметр <var
class="OPTION">name</var>.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ifconfig</span>(8)</span></a>
теперь выводит <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=polling&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">polling</span>(4)</span></a>
статус интерфейса. [MERGED]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ifconfig</span>(8)</span></a>
теперь предоставляет параметры <var class="OPTION">vlanmtu</var> и <var
class="OPTION">-vlanmtu</var>, контролирующие возможность получения расширенных фреймов
некоторыми Ethernet интерфейсами (т.е. фреймов, содержащих более чем 1500 байт
данных).</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ifconfig</span>(8)</span></a>
теперь предоставляет параметры <var class="OPTION">vlanhwtag</var> и <var
class="OPTION">-vlanhwtag</var>, контролирующие возможность обработки тегов VLAN
некоторыми Ethernet интерфейсами на аппаратном уровне.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=indent&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">indent</span>(1)</span></a> теперь
поддерживает параметр <var class="OPTION">-ldi</var> для управления выравниванием
локальных переменных. В этой утилите было сделано несколько других изменений.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=indent&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">indent</span>(1)</span></a> now
supports <var class="OPTION">-fbs</var> and <var class="OPTION">-ut</var> for function
declarations with the opening brace on the same line as the declaration of arguments all
spaces and no tabs in order to fix problem when non-8 space tabs are used.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ip6fw&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ip6fw</span>(8)</span></a> теперь
поддерживает флаг <var class="OPTION">-n</var> для запрета внесения любых изменений в
правила ядра</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipcs&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipcs</span>(1)</span></a> теперь
поддерживает параметр <var class="OPTION">-u</var> для отображения информации о IPC
механизмах, принадлежащих определенному пользователю.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(8)</span></a> теперь
поддерживает параметр <var class="OPTION">-b</var> для вывода только действия и
комментария каждого правила, исключая тело правила.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">jail</span>(8)</span></a> теперь
поддерживает параметр <var class="OPTION">-U</var> для запуска команды под пользователем,
который существует только внутри среды <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&sektion=2&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">jail</span>(2)</span></a>.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">jail</span>(8)</span></a> теперь
поддерживает параметр <var class="OPTION">-l</var> для очистки окружения. Все переменные
окружения очищаются, за исключением <var class="VARNAME">HOME</var>, <var
class="VARNAME">SHELL</var>, <var class="VARNAME">PATH</var>, <var
class="VARNAME">TERM</var>, и <var class="VARNAME">USER</var> перед запуском программы в
jail под определенным пользователем. Это поведение подобно поведению <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=su&sektion=1&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">su</span>(1)</span></a> с параметром
<var class="OPTION">-l</var>.</p>

<p>Была добавлена утилита отладки ядра <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=kgdb&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">kgdb</span>(1)</span></a>, которая
использует <b class="APPLICATION">libgdb</b> и работает с потоками ядра, модулями ядра и
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=kvm&sektion=3&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">kvm</span>(3)</span></a>.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=killall&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">killall</span>(1)</span></a>
теперь поддерживает флаг <var class="OPTION">-e</var>, с которым <var
class="OPTION">-u</var> указывает на эффективный, а не реальный ID пользователя.
[MERGED]</p>

<p>В <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=libalias&sektion=3&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">libalias</span>(3)</span></a>
теперь есть поддержка (и новый API) для нескольких синонимов в одном процессе.
Существующий API был переписан в терминах нового для сохранения совместимости.</p>

<p>Была добавлена библиотека <b class="APPLICATION">libarchive</b> для работы со сжатыми
и несжатыми архивными файлами. Дополнительная информация может быть найдена в <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=libarchive&sektion=3&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">libarchive</span>(3)</span></a>.</p>

<p><b class="APPLICATION">libdisk</b> теперь использует <var
class="VARNAME">d_addr_t</var> для адресов дисков. Это позволяет <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>
правильно работать с дисками и файловыми системами размером более 1 TB.</p>

<p>Библиотека, первоначально известная как <b class="APPLICATION">libkse</b>, была
переименована в <b class="APPLICATION">libpthread</b> и теперь это библиотека потоков по
умолчанию для платформ i386, amd64 и ia64. Параметр <b class="APPLICATION">GCC</b> <var
class="OPTION">-pthread</var> был изменен для использования <b
class="APPLICATION">libpthread</b> вместо <b class="APPLICATION">libc_r</b>.</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Замечание:</b> Пользователи со старыми бинарными файлами (например, из портов,
скомпилированных до внесения этого изменения) должны использовать <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=libmap.conf&sektion=5&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">libmap.conf</span>(5)</span></a>
для создания ссылок <b class="APPLICATION">libc_r</b> и/или <b
class="APPLICATION">libkse</b> на <b class="APPLICATION">libpthread</b>.</p>
</blockquote>
</div>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Замечание:</b> Пользователям поставляемых NVIDIA драйверов и библиотек может
потребоваться использование <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=libmap.conf&sektion=5&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">libmap.conf</span>(5)</span></a>,
в котором есть ссылка <b class="APPLICATION">libpthread</b> на старую библиотеку <b
class="APPLICATION">libc_r</b>, поскольку эти драйвера не работают с <b
class="APPLICATION">libpthread</b>.</p>
</blockquote>
</div>

<br />
<br />
<p><b class="APPLICATION">libpthread</b> теперь поддерживает переменную окружения <var
class="VARNAME">LIBPTHREAD_SYSTEM_SCOPE</var> для включения режима 1:1 (используя набор
системных потоков). Обратите внимание, что сборка <b class="APPLICATION">libpthread</b> с
флагом <var class="OPTION">-DSYSTEM_SCOPE_ONLY</var> также включает режим 1:1, и что этот
параметр установлен по умолчанию для архитектур, которые еще не поддерживают режим M:N.
Кроме того, переменная окружения <var class="VARNAME">LIBPTHREAD_PROCESS_SCOPE</var>
может использоваться для принудительного включения режима M:N (используя набор потоков
процесса). Например:</p>

<pre class="SCREEN">
<samp class="PROMPT">%</samp> <kbd class="USERINPUT">LIBPTHREAD_SYSTEM_SCOPE=yes <var
class="REPLACEABLE">threaded_app</var></kbd>
</pre>

<p>заставляет приложение <var class="REPLACEABLE">threaded_app</var> использовать
системный набор потоков, а</p>

<pre class="SCREEN">
<samp class="PROMPT">%</samp> <kbd class="USERINPUT">LIBPTHREAD_PROCESS_SCOPE=yes <var
class="REPLACEABLE">threaded_app</var></kbd>
</pre>

<p>соответственно заставляет его использовать набор потоков процесса.</p>

<p>Ошибка в параметре <var class="OPTION">-d</var> <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=look&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">look</span>(1)</span></a> была
исправлена. Кроме того, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=look&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">look</span>(1)</span></a> теперь
корректно работает с многобайтными локалями.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ls&sektion=1&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">ls</span>(1)</span></a> теперь
обрабатывает имена файлов как мультибайтовые последовательности символов, в соответствии
с текущей переменной <var class="VARNAME">LC_CTYPE</var>, когда определяется какие
символы печатаемые.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=make&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">make</span>(1)</span></a> теперь
поддерживает новую директиву <var class="LITERAL">.warning</var>.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=make&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">make</span>(1)</span></a> теперь
поддерживает POSIX-совместимый флаг <var class="LITERAL">+</var> в командных строках <tt
class="FILENAME">Makefile</tt>, которая приводит к выполнению строки даже при указании
параметра <var class="OPTION">-n</var>. Это полезно например при вызове вложенных
make.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=make&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">make</span>(1)</span></a> теперь
помещает переменные из командной строки в переменную <var
class="VARNAME">MAKEFLAGS</var>, как этого требует POSIX. Это приводит к передаче
переменных через все вложенные make, вызываемые через <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=make&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">make</span>(1)</span></a> (кроме
переменной <var class="VARNAME">MAKEFLAGS</var>, которая эксклюзивно изменяется в
окружении вложенного make). Помимо прочего, это делает переменные не переписываемыми во
вложенных make, кроме как из командной строки.</p>

<p>Были реализованы функции C99 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=nearbyint&sektion=3&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">nearbyint</span>(3)</span></a> и
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=nearbyintf&sektion=3&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">nearbyintf</span>(3)</span></a>.</p>

<p>Был реализован заголовок C99 <tt class="FILENAME">tgmath.h</tt>. Он предоставляет
макрос для функций <tt class="FILENAME">math.h</tt> и <tt
class="FILENAME">complex.h</tt>, которые реализованы для float, double и long double.</p>

<p>Были реализованы расширения GNU для <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mbsnrtowcs&sektion=3&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mbsnrtowcs</span>(3)</span></a> и
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=wcsnrtombs&sektion=3&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">wcsnrtombs</span>(3)</span></a>.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=newsyslog&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">newsyslog</span>(8)</span></a>
теперь позволяет пользователям устанавливать параметр отладки через файл <tt
class="FILENAME">newsyslog.conf</tt>.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=newsyslog&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">newsyslog</span>(8)</span></a>
теперь использует новый порядок при обработке ротации файлов. Сначала ротируются все
файлы, которые необходимо ротировать, затем посылается одиночный сигнал каждому процессу,
которому необходимо послать сигнал, и наконец все файлы, которые были ротированы,
сжимаются.</p>

<p>Была добавлена функция <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=nextwctype&sektion=3&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">nextwctype</span>(3)</span></a>
для перебора всех символов из определенного класса.</p>

<p>Была добавлена первичная поддержка для UTF-8 версий всех поддерживаемых в настоящее
время системных локалей. Это сделано в основном для порта <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/misc/utf8locale/pkg-descr"><tt
class="FILENAME">misc/utf8locale</tt></a>.</p>

<p>Добавлена локаль Israel Hebrew <var class="LITERAL">he_IL.UTF-8</var>.</p>

<p>Была добавлена утилита <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=logins&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">logins</span>(1)</span></a> для
отображения информации о пользовательских и системных учетных записях.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mountd&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mountd</span>(8)</span></a> теперь
поддерживает параметр <var class="OPTION">-p</var>, позволяющий пользователям указывать
известный порт для указания его в правилах брандмауэра.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=netstat&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">netstat</span>(1)</span></a>
теперь отображает членство в широковещательных группах, имеющихся в системе.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">newfs</span>(8)</span></a> и <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mdmfs</span>(8)</span></a> теперь
поддерживают флаг <var class="OPTION">-l</var> для установки MAC multilabel флага на
новых системах без использования <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tunefs&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">tunefs</span>(8)</span></a>.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=nologin&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">nologin</span>(8)</span></a>
теперь сообщает о попытках входа через <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">syslogd</span>(8)</span></a>.</p>

<p>Программа <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=nologin&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">nologin</span>(8)</span></a> была
перемещена из <tt class="FILENAME">/sbin/nologin</tt> в <tt
class="FILENAME">/usr/sbin/nologin</tt>. <tt class="FILENAME">/sbin/nologin</tt> стал
символической ссылкой для обратной совместимости.</p>

<p>В поддержку NSS было внесено исправление, которое решает проблемы с использованием
сторонних NSS модулей (таких как <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/net/nss_ldap/pkg-descr"><tt
class="FILENAME">net/nss_ldap</tt></a>) и групп с длинным списком членов.</p>

<p>В <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=od&sektion=1&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">od</span>(1)</span></a> теперь есть
поддержка многобайтных символов в стиле POSIX.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=patch&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">patch</span>(1)</span></a> была
замещена BSD-лицензированной версией из OpenBSD. Она включает параметр <var
class="OPTION">--posix</var> для строгого соответствия POSIX.</p>

<p>Были добавлены команды <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pgrep&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pgrep</span>(1)</span></a> и <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkill&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pkill</span>(1)</span></a>,
пришедшие их NetBSD. Они также поддерживают параметр <var class="OPTION">-M</var> для
извлечения значений, связанных со списком имен из указанного дампа (core) вместо <tt
class="FILENAME">/dev/kmem</tt> по умолчанию, и параметр <var class="OPTION">-N</var> для
извлечения списка имен из указанной системы вместо ядра (kernel) по умолчанию.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> теперь
поддерживает команду ``set rad_alive <var class="REPLACEABLE">N</var>'' для
периодического отправления учетной информации RADIUS на сервер RADIUS. [MERGED]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a> теперь
поддерживает команду ``set pppoe [standard|3Com]'' для настройки режима взаимодействия с
низлежащим узлом Netgraph <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_pppoe&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ng_pppoe</span>(4)</span></a>.</p>

<p>Была улучшена совместимость <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&sektion=1&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">ps</span>(1)</span></a> с POSIX/SUSv3.
Эти изменения включают параметры <var class="OPTION">-p</var> для списка ID процессов,
<var class="OPTION">-t</var> для списка имен терминалов, <var class="OPTION">-A</var>,
которая эквивалентна <var class="OPTION">-ax</var>, <var class="OPTION">-G</var> для
списка ID групп, <var class="OPTION">-X</var>, которая противоположна <var
class="OPTION">-x</var>, и некоторые мелкие улучшения. За дальнейшей информацией
обращайтесь к <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&sektion=1&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">ps</span>(1)</span></a>. [MERGED]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&sektion=1&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">ps</span>(1)</span></a> теперь
поддерживает параметр форматирования <var class="OPTION">-O emul</var>, при котором
печатается имя эмулируемых системных переменных окружения, в которых находится
процесс.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&sektion=8&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">pw</span>(8)</span></a> теперь
поддерживает параметр <var class="OPTION">-H</var>, который принимает указатель на файл с
зашифрованным паролем. [MERGED]</p>

<p>Была исправлена ошибка в <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rarpd&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rarpd</span>(8)</span></a>,
которая не позволяла ему правильно работать на интерфейсах более чем с одним IP адресом.
[MERGED]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=regex&sektion=3&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">regex</span>(3)</span></a> теперь
поддерживает регулярные выражения, учитывая многобайтные символы.</p>

<p>Файлы настройки, используемые <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=resolver&sektion=3&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">resolver</span>(3)</span></a>,
теперь поддерживают ключевые слова <var class="LITERAL">timeout:</var> и <var
class="LITERAL">attempts:</var>.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=resolver&sektion=3&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">resolver</span>(3)</span></a> и
ассоциированные интерфейсы теперь гораздо лучше подходят для повторного использования и
работы с потоками. Множественные запросы к DNS теперь могут происходить одновременно, что
приводит к значительному улучшению производительности некоторых многопоточных приложений.
Некоторые многопоточные приложения необходимо перекомпилировать; примеры из коллекции
портов: <a href="http://www.FreeBSD.org/cgi/url.cgi?ports/www/mozilla/pkg-descr"><tt
class="FILENAME">www/mozilla</tt></a> и варианты, <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/mail/evolution/pkg-descr"><tt
class="FILENAME">mail/evolution</tt></a>, <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/devel/gnomevfs/pkg-descr"><tt
class="FILENAME">devel/gnomevfs</tt></a>, и <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/devel/gnomevfs2/pkg-descr"><tt
class="FILENAME">devel/gnomevfs2</tt></a>.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rmdir&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rmdir</span>(1)</span></a> теперь
поддерживает флаг <var class="OPTION">-v</var>, для вывода информации об удаляемых
файлах.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=savecore&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">savecore</span>(8)</span></a>
теперь правильно работает для дамп файлов больше 2GB.</p>

<p>Ошибка в <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=script&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">script</span>(1)</span></a> была
исправлена, и теперь он работает корректно если его стандартный ввод закрыт. Это
исправление предотвращает потенциально опасное взаимодействие с пакетом <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/sysutils/portupgrade/pkg-descr"><tt
class="FILENAME">sysutils/portupgrade</tt></a>; если он запускался не интерактивно, то
мог удалить все устаревшие порты без их переустановки.</p>

<p>Был добавлен даемон <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sdpd&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sdpd</span>(8)</span></a>
Bluetooth Service Discovery Protocol.</p>

<p>Команда <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sed&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sed</span>(1)</span></a> <var
class="LITERAL">y</var> (транслирование) теперь поддерживает многобайтные символы.</p>

<p>Были добавлены утилиты <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sha1&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sha1</span>(1)</span></a> и <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rmd160&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rmd160</span>(1)</span></a>.
Подобно <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=md5&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">md5</span>(1)</span></a>, они
вычисляют хэш вводимых данных. [MERGED]</p>

<p>Была добавлена небольшая утилита <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=smbmsg&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">smbmsg</span>(8)</span></a>, для
отправки/получения SMBus сообщений.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=talk&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">talk</span>(1)</span></a> теперь
использует <tt class="HOSTID">localhost</tt> в качестве компьютера по умолчанию в пакетах
запроса <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=talkd&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">talkd</span>(8)</span></a>, если
назначение и источник локальны. Это делает <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=talk&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">talk</span>(1)</span></a>
зависимым от правильно установленной записи для <tt class="HOSTID">localhost</tt> в <tt
class="FILENAME">/etc/hosts</tt> или в DNS.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tftpd&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">tftpd</span>(8)</span></a> теперь
поддерживает два новых параметра: параметр <var class="OPTION">-w</var>, позволяющий
создание новых файлов, и параметр <var class="OPTION">-U</var>, позволяющий установку
umask.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=top&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">top</span>(1)</span></a> теперь
поддерживает отображение текущего количества I/O. Эта возможность может быть включена
нажатием ``m'' или передачей параметра командной строки <var class="OPTION">-m
io</var>.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=truss&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">truss</span>(1)</span></a> теперь
включает раннюю поддержку FreeBSD/amd64.</p>

<p>Многие утилиты пользователя в базовой системе (в основном предоставленные GNU утилиты)
теперь используют системную версию <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getopt_long&sektion=3&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">getopt_long</span>(3)</span></a>,
вместо GNU версии.</p>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="RC-SCRIPTS" name="RC-SCRIPTS">2.3.1. Скрипты <tt
class="FILENAME">/etc/rc.d</tt></a></h4>

<p>Скрипт <tt class="FILENAME">diskless</tt> был разделен на <tt
class="FILENAME">hostname</tt>, <tt class="FILENAME">resolve</tt>, <tt
class="FILENAME">tmp</tt> и <tt class="FILENAME">var</tt>.</p>

<p>Был добавлен скрипт <tt class="FILENAME">gbde_swap</tt>, поддерживающий gbde
устройства подкачки. При указании переменной <var class="VARNAME">gbde_swap_enable</var>
в <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&sektion=5&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rc.conf</span>(5)</span></a>,
устройство подкачки <tt class="FILENAME">/dev/<var class="REPLACEABLE">foo.bde</var></tt>
из <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&sektion=5&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fstab</span>(5)</span></a>
автоматически подключается во время загрузки с устройством <tt class="FILENAME">/dev/<var
class="REPLACEABLE">foo</var></tt> и случайным ключом, полученным как контрольная сумма
MD5 от 512 байт, прочитанных из <tt class="FILENAME">/dev/random</tt>. Обратите внимание,
что это делает невозможным восстановление дампов ядра.</p>

<p>Были добавлены <var class="VARNAME">ip6addrctl_enable</var> и <var
class="VARNAME">ip6addrctl_verbose</var>. Когда <var
class="VARNAME">ip6addrctl_enable</var> установлена в <var class="LITERAL">YES</var>,
политика выбора адреса загружается в ядро. Если существует <tt
class="FILENAME">/etc/ip6addrctl.conf</tt>, он будет использован, иначе будет
задействована политика по умолчанию. Применяется политика по умолчанию, описанная в RFC
3484, если <var class="VARNAME">ipv6_enable</var> установлена в <var
class="LITERAL">YES</var>. Иначе в качестве политики по умолчанию будет использована
политика приоритетов для адресов IPv4.</p>

<p>Был добавлен скрипт <tt class="FILENAME">mixer</tt>. При завершении работы сохраняет
текущие настройки всех аудио микшеров, присутствующих в системе, и восстанавливает их при
загрузке.</p>

<p>Скрипт <tt class="FILENAME">named</tt> был обновлен для поддержки <b
class="APPLICATION">BIND 9</b> в базовой системе. Изменения включают:</p>

<ul>
<li>
<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=named&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">named</span>(8)</span></a> по
умолчанию запускается в каталоге <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&sektion=2&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">chroot</span>(2)</span></a> <tt
class="FILENAME">/var/named</tt>. Это поведение может быть отменено переменной <var
class="VARNAME">named_chrootdir</var> в файле <var class="VARNAME">named_chrootdir</var>,
а каталог <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&sektion=2&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">chroot</span>(2)</span></a> может
быть изменен переменной <var class="VARNAME">named_chrootdir</var> в том же файле.</p>
</li>

<li>
<p>Когда переменная <var class="VARNAME">named_chroot_autoupdate</var> установлена в <var
class="LITERAL">YES</var> (это значение по умолчанию), каталог chroot автоматически
настраивается во время загрузки. Символическая ссылка, которая указывает на <tt
class="FILENAME">/var/named/etc/namedb</tt>, создается как <tt
class="FILENAME">/etc/namedb</tt>, а символическая ссылка, которая указывает в <tt
class="FILENAME">/var/named/var/run/named/pid</tt>, создается как <tt
class="FILENAME">/var/run/named/pid</tt>. Последнее может быть отменено переменной <var
class="VARNAME">named_symlink_enable</var> в файле <tt class="FILENAME">rc.conf</tt>.</p>
</li>

<li>
<p>Файл <tt class="FILENAME">rndc.key</tt> создается автоматически, если еще не
существует.</p>
</li>
</ul>

<p>Были добавлены скрипты <tt class="FILENAME">pf</tt> и <tt class="FILENAME">pflog</tt>
для <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pf&sektion=4&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">pf</span>(4)</span></a>.</p>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="CONTRIB" name="CONTRIB">2.4. Стороннее программное
обеспечение</a></h3>

<p>Код <b class="APPLICATION">ACPI-CA</b> был обновлен с с снэпшота 20030619 до снэпшота
20040527.</p>

<p><b class="APPLICATION">AMD (am-utils)</b> был обновлен с версии 6.0.9 до версии
6.0.10p1.</p>

<p><b class="APPLICATION">awk</b> от Bell Labs был обновлен с релиза от 29 июня 2003 года
до релиза 7 февраля 2004 года.</p>

<p><b class="APPLICATION">BIND</b> был обновлен с версии 8.3.1-REL до версии 9.3.0.
[MERGED]</p>

<p><b class="APPLICATION">Binutils</b> были обновлены до снэпшота от 23 мая 2004 из ветви
FSF 2.15.</p>

<p><b class="APPLICATION">CVS</b> был обновлен с версии 1.11.15 до версии 1.11.17.
[MERGED]</p>

<p><b class="APPLICATION">FILE</b> был обновлен с версии 3.41 до версии 4.10.</p>

<p><b class="APPLICATION">gdtoa</b> (библиотека, выполняющая преобразования чисел между
бинарным и десятичным форматами) была обновлена с версии 20030324 до версии 20040118.</p>

<p><b class="APPLICATION">GDB</b> был обновлен до версии 6.1.1.</p>

<p><b class="APPLICATION">GNU GCC</b> был обновлен с версии 3.3.3-prerelease от 6 ноября,
2003 до 3.4.2-prerelease от 28 июля, 2004.</p>

<p><b class="APPLICATION">GNU grep</b> был обновлен с версии 2.4d до версии 2.5.1.</p>

<p><b class="APPLICATION">less</b> был обновлен с версии 371 до версии 381.</p>

<p><b class="APPLICATION">GNU readline</b> 4.3 была обновлена официальными патчами с 001
до 005.</p>

<p>Библиотека <b class="APPLICATION">GNU regex</b> была обновлена до версии, включенной в
<b class="APPLICATION">GNU grep</b> 2.5.1.</p>

<p><b class="APPLICATION">GNU sort</b> был обновлен с textutils 2.1 до снэпшота coreutils
5.2.1 от 12 августа 2004 года.</p>

<p>Реализация <b class="APPLICATION">GNU tar</b> в основной системе теперь называется <tt
class="FILENAME">gtar</tt>.</p>

<p><b class="APPLICATION">Heimdal Kerberos</b> был обновлен с версии 0.6 до версии
0.6.1.</p>

<p>Клиент <b class="APPLICATION">ISC DHCP</b> был обновлен c версии 3.0.1 RC10 до версии
3.0.1.</p>

<p><b class="APPLICATION">libpcap</b> была обновлена с версии 0.7.1 до версии 0.8.3.</p>

<p><b class="APPLICATION">lukemftpd</b> был обновлен с снэпшота от 3 ноября 2003 года до
снэпшота от 9 августа 2004 года.</p>

<p><b class="APPLICATION">NTP</b> был обновлен с версии 4.1.1a до версии 4.2.0.</p>

<p><b class="APPLICATION">OpenPAM</b> был обновлен с релиза Dogwood до релиза
Eelgrass.</p>

<p><b class="APPLICATION">OpenSSH</b> был обновлен с версии 3.6.1p1 до версии
3.8.1p1.</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Замечание:</b> Настройка по умолчанию для <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sshd</span>(8)</span></a> была
изменена. SSH протокол версии 1 теперь не включен по умолчанию. Кроме того,
аутентификация по паролю через SSH выключена по умолчанию если включен PAM.</p>
</blockquote>
</div>

<br />
<br />
<p><b class="APPLICATION">OpenSSL</b> был обновлен с версии 0.9.7c до версии 0.9.7d.
[MERGED]</p>

<p>Поддержка <b class="APPLICATION">OpenSSL</b> VIA C3 Nehemiah PadLock ACE (Advanced
Cryptography Engine) криптографии, которая предоставляет шифрование Advanced Encryption
Standard (AES), была импортирована из пререлиза <b class="APPLICATION">OpenSSL</b>.</p>

<p><b class="APPLICATION">pf</b>, пакетный фильтр OpenBSD из OpenBSD&nbsp;3.5-stable, был
импортирован в дерево исходных текстов FreeBSD, и теперь установлен по умолчанию.
Добавлены также два новых пользователя (<tt class="USERNAME">proxy</tt> и <tt
class="USERNAME">_pflogd</tt>) и три новых группы (<tt class="USERNAME">authpf</tt>, <tt
class="USERNAME">proxy</tt> и <tt class="USERNAME">_pflogd</tt>), которые необходимы <b
class="APPLICATION">pf</b>.</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Замечание:</b> При обновлении из исходных текстов, должны быть добавлены эти
учетные записи. Для добавления этих записей в <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=passwd&sektion=5&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">passwd</span>(5)</span></a> и <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=group&sektion=5&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">group</span>(5)</span></a> может
быть использован <var class="LITERAL">mergemaster -p</var>. Для выключения сборки <b
class="APPLICATION">pf</b> может быть использована переменная <var
class="VARNAME">NO_PF</var> в <tt class="FILENAME">make.conf</tt>.</p>
</blockquote>
</div>

<p>Были импортированы несколько утилит пользователя из OpenBSD <b
class="APPLICATION">pf</b>. <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ftp-proxy&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ftp-proxy</span>(8)</span></a> это
ftp прокси для <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pf&sektion=4&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">pf</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pfctl&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pfctl</span>(8)</span></a> это
эквивалент <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipf&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipf</span>(8)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pflogd&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pflogd</span>(8)</span></a> это
даемон для протоколирования пакетов через <var class="LITERAL">if_pflog</var> в формате
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pcap&sektion=3&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pcap</span>(3)</span></a>, и <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=authpf&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">authpf</span>(8)</span></a>
оболочка для изменения наборов правил <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pf&sektion=4&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">pf</span>(4)</span></a>.</p>

<p><b class="APPLICATION">routed</b> был обновлен с релиза 2.22 до релиза 2.27 с
rhyolite.com. Обратите внимание, что для тех, кто использовал возможность RIP MD5
аутентификацию, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=routed&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">routed</span>(8)</span></a> теперь
несовместим с предыдущими версиями FreeBSD; однако, теперь он совместим с реализациями от
Sun, Cisco и других поставщиков.</p>

<p><b class="APPLICATION">sendmail</b> был обновлен с версии 8.12.10 до версии 8.13.1.
[MERGED]</p>

<p><b class="APPLICATION">tcpdump</b> был обновлен с версии 3.7.1 до версии 3.8.3.</p>

<p><b class="APPLICATION">tcsh</b> был обновлен с версии 6.11 до 6.13.00.</p>

<p>База данных временных зон была обновлена с <tt class="FILENAME">tzdata2003a</tt> до
<tt class="FILENAME">tzdata2004a</tt>.</p>

<p><b class="APPLICATION">zlib</b> был обновлен с версии 1.1.4 до версии 1.2.1.</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="PORTS" name="PORTS">2.5. Инфраструктура коллекции
портов/пакетов</a></h3>

<p>Большинство скриптов запуска/останова, устанавливаемые различными портами, теперь
используют новую инфраструктуру <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&sektion=8&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">rc</span>(8)</span></a>, представленную
в FreeBSD 5.<var class="REPLACEABLE">X</var>, хотя некоторые порты все еще используют
скрипты в старом стиле. При запуске сначала выполняются скрипты в новом стиле, а затем в
старом. При останове все происходит в точности наоборот.</p>

<p>Был добавлен и включен по умолчанию атрибут <var class="LITERAL">SIZE</var> для
distfiles, который может быть использован для проверки размеров файлов перед загрузкой.
<var class="VARNAME">DISABLE_SIZE</var> может быть использована для запрещения проверки
размера. Это особенно полезно на старых версиях FreeBSD, где нет соответствующей
поддержки в <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fetch&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fetch</span>(1)</span></a>, и для
некоторых FTP прокси, которые всегда выдают неверные размеры.</p>

<p>Для отслеживания наиболее важных изменений в дерево портов были добавлены два файла:
<tt class="FILENAME">ports/CHANGES</tt> содержит список основных изменений в коллекции
портов и ее инфраструктуре. <tt class="FILENAME">ports/UPDATING</tt> описывает некоторые
потенциально проблемные случаи, которые могут встретиться при обновлении определенных
портов, по аналогии с <tt class="FILENAME">src/UPDATING</tt> в базовой системе.</p>

<p>Код обработки версий в системных утилитах <tt class="FILENAME">pkg_*</tt> был
переписан для восстановления совместимости с 4.x и <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/sysutils/portupgrade/pkg-descr"><tt
class="FILENAME">sysutils/portupgrade</tt></a>.</p>

<p>Инструментарий пакетов теперь может искать совпадения с помощью операторов отношения и
выборов в стиле csh <var class="LITERAL">{...}</var>, например:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">pkg_info -I 'docbook&#62;=3.0'</kbd>
</pre>

<p>отобразит (все) docbook DTD с версией как минимум 3.0. Дополнительные параметры
командной строки также были добавлены для поддержки шаблонов.</p>

<p>Была улучшена обработка сбойных баз данных пакетов.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_create&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pkg_create</span>(1)</span></a>
теперь поддерживает параметр <var class="OPTION">-S</var> для добавления префикса ко всем
<var class="LITERAL">@cwd</var> во время создания пакета.</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_info&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pkg_info</span>(1)</span></a>
теперь поддерживает параметр <var class="OPTION">-j</var> для отображения скрипта
зависимостей каждого пакета.</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="RELENG" name="RELENG">2.6. Подготовка релизов и
интеграция</a></h3>

<p>Поддержка криптографии в FreeBSD более не опциональный компонент релизов, и
дистрибутивный компонент <var class="LITERAL">crypto</var> теперь часть <var
class="LITERAL">base</var>. Обратите внимание, что параметр сборки <var
class="OPTION">-DNOCRYPT</var> все еще существует для всех, кто хочет собрать бинарные
файлы без поддержки криптографии.</p>

<p>Поддерживаемый релиз <b class="APPLICATION">GNOME</b> был обновлен с версии 2.4 до
версии 2.6.</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Замечание:</b> Если вы используете старый <b class="APPLICATION">GNOME</b> десктоп
отдельно (<a href="http://www.FreeBSD.org/cgi/url.cgi?ports/x11/gnome2/pkg-descr"><tt
class="FILENAME">x11/gnome2</tt></a>), простое обновление его из коллекции портов FreeBSD
с помощью <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=portupgrade&sektion=1&manpath=FreeBSD+Ports">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">portupgrade</span>(1)</span></a>
(<a href="http://www.FreeBSD.org/cgi/url.cgi?ports/sysutils/portupgrade/pkg-descr"><tt
class="FILENAME">sysutils/portupgrade</tt></a>) вызовет серьезные проблемы. Если вы
используете <b class="APPLICATION">GNOME</b> в качестве десктопа, внимательно прочтите
инструкции <a href="http://www.FreeBSD.org/gnome/docs/faq26.html"
target="_top">http://www.FreeBSD.org/gnome/docs/faq26.html</a>, и используйте скрипт <tt
class="FILENAME">gnome_upgrade.sh</tt> для правильного обновления до <b
class="APPLICATION">GNOME</b> 2.6.</p>

<p>Обратите внимание, что если вы используете только библиотеки <b
class="APPLICATION">GNOME</b>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=portupgrade&sektion=1&manpath=FreeBSD+Ports">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">portupgrade</span>(1)</span></a>
будет достаточно для обновления портов.</p>
</blockquote>
</div>

<br />
<br />
<p>Поддерживаемый релиз <b class="APPLICATION">KDE</b> был обновлен с версии 3.1.4 до
версии 3.2.3.</p>

<p>Утилита <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/security/portaudit/pkg-descr"><tt
class="FILENAME">security/portaudit</tt></a> теперь находится в коллекции портов FreeBSD.
Эта утилита читает базу данных, содержащую известные уязвимости портов, и сообщает о них
администратору.</p>

<p>FreeBSD теперь использует <b class="APPLICATION">Xorg</b> вместо <b
class="APPLICATION">XFree86</b> в качестве X Window System по умолчанию. Поддерживаемый
релиз <b class="APPLICATION">Xorg</b> - X11R6.7.0. Обратите внимание, что <b
class="APPLICATION">XFree86</b> также доступен из коллекции портов FreeBSD (<a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/x11/XFree86-4/pkg-descr"><tt
class="FILENAME">x11/XFree86-4</tt></a>).</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="DOC" name="DOC">2.7. Документация</a></h3>
</div>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="UPGRADE" name="UPGRADE">3. Обновление с предыдущих релизов
FreeBSD</a></h2>

<p>Пользователям с уже установленными системами FreeBSD <span class="emphasis"><i
class="EMPHASIS">настоятельно</i></span> рекомендуется прочесть ``Руководство для новых
пользователей FreeBSD 5.3-RELEASE''. На дистрибутивном носителе или в любом другом месте,
где можно найти информацию о релизе, имя файла этого документа обычно <tt
class="FILENAME">EARLY.TXT</tt>. Он предоставляет отдельные заметки по обновлению, но,
что более важно, сравнительно рассматривает работу с 4.<var class="REPLACEABLE">X</var> и
обновление до 5.<var class="REPLACEABLE">X</var>.</p>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>Важно:</b> Обновление FreeBSD конечно же должно производиться только после
резервного копирования <span class="emphasis"><i class="EMPHASIS">всех</i></span> данных
и файлов настройки.</p>
</blockquote>
</div>
</div>
</div>

<hr />
<p align="center"><small>Этот файл и другие документы, относящиеся к данной версии
FreeBSD, могут быть найдены по адресу <a
href="ftp://ftp.FreeBSD.org/">ftp://ftp.FreeBSD.org/</a>.</small></p>

<p align="center"><small>Если у вас возник вопрос, касающийся FreeBSD, прочтите <a
href="http://www.FreeBSD.org/ru/docs.html">документацию,</a> прежде чем написать письмо в
&#60;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&#62;.</small></p>

<p align="center"><small>Всем пользователям FreeBSD 5-STABLE рекомендуется подписаться на
список рассылки &#60;<a
href="mailto:stable@FreeBSD.org">stable@FreeBSD.org</a>&#62;.</small></p>

<p align="center"><small>Вопросы, касающиеся этого документа, вы можете направить по
адресу &#60;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&#62;.</small></p>
</body>
</html>

