.\" Man page for man
.\"
.\" Copyright (c) 1990, 1991, John W. Eaton.
.\"
.\" You may distribute under the terms of the GNU General Public
.\" License as specified in the README file that comes with the man 1.0
.\" distribution.
.\"
.\" John W. Eaton
.\" jwe@che.utexas.edu
.\" Department of Chemical Engineering
.\" The University of Texas at Austin
.\" Austin, Texas  78712
.\"
.\" %FreeBSD: src/gnu/usr.bin/man/man/man.man,v 1.27 2006/12/25 15:09:06 ru Exp %
.\" $FreeBSDru: frdp/doc/ru_RU.KOI8-R/man/man1/man.1,v 1.9 2007/11/20 13:50:08 ru Exp $
.\" $FreeBSD$
.\"
.Dd 3 декабря 2005
.Dt MAN 1
.Os
.Sh НАЗВАНИЕ
.Nm man
.Nd отформатировать и отобразить страницы справочника
.Sh СИНТАКСИС
.Nm
.Op Fl adfhkotw
.Op Fl m Ar архитектура Ns Op : Ns Ar машина
.Op Fl p Ar строка
.Op Fl M Ar путь
.Op Fl P Ar pager
.Op Fl S Ar список
.Op Ar раздел
.Ar название ...
.Sh ОПИСАНИЕ
Утилита
.Nm
форматирует и отображает страницы справочника.
Эта версия использует
переменные окружения
.Ev MANPATH
и
.Ev PAGER ,
так что вы можете использовать собственный набор справочных страниц
и выбрать любую понравившуюся вам программу
для просмотра отформатированных страниц.
Если указан
.Ar раздел ,
то
.Nm
будет искать только в этом разделе справочника.
Через опции командной строки и переменные окружения
вы также можете задать порядок поиска по разделам и
используемые для форматирования исходных файлов препроцессоры.
Системный администратор также может включить режим, когда
для экономии дискового пространства отформатированные страницы
справочника будут сжиматься командой
.Dq Li "/usr/bin/gzip -c" .
.Pp
Имеются следующие опции:
.Bl -tag -width ".Fl S Ar список"
.It Fl M Ar путь
Задаёт альтернативный маршрут поиска страниц справочника.
По умолчанию для определения маршрута поиска
.Nm
использует
.Xr manpath 1
(который встроен в исполняемый файл
.Nm ) .
Эта опция имеет приоритет выше, чем переменная окружения
.Ev MANPATH .
.It Fl P Ar pager
Задаёт программу для постраничного просмотра.
По умолчанию
.Nm
использует
.Dq Li "more -s" .
Эта опция имеет приоритет выше, чем переменная окружения
.Ev PAGER .
.It Fl S Ar список
Здесь список \[en] это разделённый двоеточиями список разделов справочника,
в которых будет производиться поиск.
Эта опция имеет приоритет выше,
чем переменная окружения
.Ev MANSECT .
.It Fl a
По умолчанию программа
.Nm
прекратит свою работу после вывода первой найденной страницы.
Использование этой опции заставляет
.Nm
выводить все справочные страницы, которые соответствуют значению аргумента
.Ar название ,
а не только первую найденную страницу.
.It Fl d
Не показывать на самом деле справочные страницы, но вывести массу
отладочной информации.
.It Fl f
Эквивалентно запуску
.Nm whatis .
.It Fl h
Вывести подсказку и завершить работу.
.It Fl k
Эквивалентно запуску
.Nm apropos .
.It Fl m Ar архитектура Ns Op : Ns Ar машина
Поскольку некоторые страницы справочника предназначены только для определённых
архитектур и типов машин,
внутри каждого каталога, где
.Nm
осуществляет поиск страниц, он также будет искать внутри подкаталогов,
имена которых совпадают с именем текущего типа машины и её
архитектуры.
Вначале проверяются области, относящиеся к типу машины,
затем к архитектуре, затем машинно-независимые области.
Например, для
.Dq Li i386:pc98
и 8-го раздела справочника,
поиск будет осуществляться в следующих каталогах и в таком порядке:
.Pa man8/pc98, man8/i386 ,
затем
.Pa man8 .
.Pp
Используемый тип машины может быть переопределён либо с помощью этой
опции, либо указанием желаемого типа машины в переменной окружения
.Ev MACHINE .
Используемая архитектура может быть переопределена либо с помощью этой
опции, либо указанием желаемой архитектуры в переменной окружения
.Ev MACHINE_ARCH .
Эта опция имеет приоритет выше, чем переменные окружения
.Ev MACHINE
и
.Ev MACHINE_ARCH .
Компонент
.Ar машина ,
если не указан, принимает значение по умолчанию, равное
.Ar архитектура .
.It Fl o
Искать только оригинальные, нелокализованные страницы справочника.
.Pp
По умолчанию
.Nm
ищет локализованные страницы справочника в соответствующих
подкаталогах каждого компонента, заданного через
.Xr manpath 1 .
.Pp
Имя локализации берётся из первой из трёх переменных окружения с непустым значением,
в таком порядке:
.Ev LC_ALL , LC_CTYPE
или
.Ev LANG .
.Pp
Если значение не может быть определено, или оно не является корректным значением
имени локализации, то будут искаться только нелокализованные страницы
справочника.
.Pp
В противном случае
.Nm
будет осуществлять поиск в следующих подкаталогах, в порядке их перечисления:
.Pp
.Bl -item -offset indent -compact
.Sm off
.It
.Pa <язык> _ <страна> . <кодировка>
.It
.Pa <язык> . <кодировка>
.It
.Pa en . <кодировка>
.Sm on
.El
.Pp
Например, в случае локализации
.Dq Li ru_RU.KOI8-R
.Nm
будет искать в следующих подкаталогах компонента
.Pa /usr/share/man
пути поиска справочника:
.Pp
.Bl -item -offset indent -compact
.It
.Pa /usr/share/man/ru_RU.KOI8-R
.It
.Pa /usr/share/man/ru.KOI8-R
.It
.Pa /usr/share/man/en.KOI8-R
.El
.Pp
Наконец, если поиск локализованной справочной страницы окончился неудачей,
будет осуществляться поиск в стандартном каталоге
.Pa /usr/share/man .
.It Fl p Ar строка
Задаёт последовательность препроцессоров для запуска перед
.Xr nroff 1
или
.Xr troff 1 .
Полный набор препроцессоров не всегда бывает доступным.
Вот некоторые из препроцессоров и соответствующие им сокращения:
.Nm eqn Pq e ,
.Nm grap Pq g ,
.Nm pic Pq p ,
.Nm tbl Pq t ,
.Nm vgrind Pq v ,
.Nm refer Pq r .
Эта опция имеет приоритет выше, чем переменная окружения
.Ev MANROFFSEQ .
.It Fl t
Использовать
.Dq Li "/usr/bin/groff -S -man"
для форматирования страниц справки, передавая результат на стандартный вывод.
Форматом вывода по умолчанию для команды
.Xr groff 1
является Postscript.
В странице справочника
.Xr groff 1
указаны способы, позволяющие выбрать альтернативный формат.
.Pp
В зависимости от выбранного формата и доступности устройств печати,
перед выводом может понадобиться пропустить результат работы
через какой-либо фильтр или
подвергнуть его дополнительной обработке.
.It Fl w
Не выводить справочные страницы, но выдать местоположение файлов, которые
должны форматироваться или выводиться.
.El
.Sh ОКРУЖЕНИЕ
.Bl -tag -width ".Ev MACHINE_ARCH"
.It Ev LC_ALL , LC_CTYPE , LANG
Эти переменные задают предпочтительный язык справочных страниц.
(См.\& опцию
.Fl o
выше.)
.It Ev MACHINE
Если
.Ev MACHINE
установлена, её значение переопределяет текущий тип машины,
использующийся для поиска машинно-зависимых подкаталогов
справочника.
.It Ev MACHINE_ARCH
Если
.Ev MACHINE_ARCH
установлена, её значение переопределяет текущую архитектуру,
использующуюся для поиска архитектурно-зависимых подкаталогов
справочника.
.It Ev MANPATH
Если установлена переменная
.Ev MANPATH ,
то её значение используется в качестве пути поиска страниц справочника.
.It Ev MANROFFSEQ
Если установлена переменная
.Ev MANROFFSEQ ,
то её значение используется для определения набора препроцессоров, запускаемых
перед
.Xr nroff 1
или
.Xr troff 1 .
По умолчанию перед запуском
.Xr nroff 1
страницы справки пропускаются через табличный препроцессор
.Pq Xr tbl 1 .
.It Ev MANSECT
Если установлена переменная
.Ev MANSECT ,
то её значение используется для определения разделов справочника, в
которых будет осуществляться поиск.
.It Ev PAGER
Если установлена переменная
.Ev PAGER ,
то её значение используется в качестве имени программы, используемой для
постраничного просмотра страницы справочника.
По умолчанию используется
.Dq Li "more -s" .
.El
.Sh ПРИМЕРЫ
.Pp
Как правило, для просмотра справочной информации, относящейся к
.Dq Li getopt ,
вы бы использовали такую команду:
.Pp
.Dl "man getopt"
.Pp
Однако при обращении к конкретному разделу справочника, такому, как
.Xr getopt 3 ,
вы должны использовать такую команду:
.Pp
.Dl "man 3 getopt"
.Sh СМОТРИ ТАКЖЕ
.Xr apropos 1 ,
.Xr groff 1 ,
.Xr manpath 1 ,
.Xr more 1 ,
.Xr whatis 1 ,
.Xr man 7 ,
.Xr mdoc 7
.Sh ПРОБЛЕМЫ
Опция
.Fl t
работает лишь в том случае, если в системе установлена
.Xr troff 1 Ns -подобная
программа.
