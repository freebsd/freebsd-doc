.\"
.\" Copyright (c) 2000 Sheldon Hearn <sheldonh@FreeBSD.org>.
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\" %FreeBSD: src/usr.bin/truncate/truncate.1,v 1.15 2006/12/19 11:20:34 ru Exp %
.\" $FreeBSDru: frdp/doc/ru_RU.KOI8-R/man/man1/truncate.1,v 1.1 2006/12/19 11:35:03 ru Exp $
.\" $FreeBSD$
.\"
.Dd 19 декабря 2006
.Dt TRUNCATE 1
.Os
.Sh НАЗВАНИЕ
.Nm truncate
.Nd укоротить или удлинить файлы
.Sh СИНТАКСИС
.Nm
.Op Fl c
.Bk -words
.Fl s Xo
.Sm off
.Op Cm + | -
.Ar размер
.Op Cm K | k | M | m | G | g | T | t
.Sm on
.Xc
.Ek
.Ar
.Nm
.Op Fl c
.Bk -words
.Fl r Ar rfile
.Ek
.Ar
.Sh ОПИСАНИЕ
Утилита
.Nm
корректирует длину каждого обычного файла, указанного в командной строке.
.Pp
Имеются следующие опции:
.Bl -tag -width indent
.It Fl c
Не создавать файлы, если они не существуют.
Утилита
.Nm
не считает это ошибкой.
Не выводится никаких сообщений об ошибке,
и возвращаемое значение не меняется.
.It Fl r Ar rfile
Укоротить или удлинить файлы до длины файла
.Ar rfile .
.It Fl s Xo
.Sm off
.Op Cm + | -
.Ar размер
.Op Cm K | k | M | m | G | g | T | t
.Sm on
.Xc
Если аргументу
.Ar размер
предшествует знак плюса
.Pq Cm + ,
файлы будут удлинены на это число байт.
Если аргументу
.Ar размер
предшествует минус
.Pq Cm - ,
длины файлов будут уменьшены, но не более, чем на это число байт,
вплоть до минимальной длины в 0 байт.
В противном случае, аргумент
.Ar размер
указывает абсолютную длину, до которой все файлы
должны быть соответственно увеличены или уменьшены.
.Pp
После аргумента
.Ar размер
может следовать
.Cm K ,
.Cm M ,
.Cm G
или
.Cm T
(в верхнем или нижнем регистре) чтобы задать
значение в килобайтах, мегабайтах, гигабайтах
или терабайтах соответственно.
.El
.Pp
Должна быть указана лишь одна из опций
.Fl r
и
.Fl s .
.Pp
Если файл становится меньше, лишние данные теряются.
Если файл увеличивается,
он будет удлинён, как если бы он был дополнен байтами с нулевым значением.
Если файл не существует,
он будет создан, если только не указана опция
.Fl c .
.Pp
Следует заметить,
что, в то время как укорачивание файла освобождает пространство на диске,
удлинение файла не влечёт за собой выделение дискового пространства.
Для того, чтобы удлинить файл и в действительности выделить пространство,
необходимо явно записать в файл данные,
воспользовавшись, к примеру, синтаксисом перенаправления
.Ql >>
командной оболочки или утилитой
.Xr dd 1 .
.Sh СТАТУС ЗАВЕРШЕНИЯ
.Ex -std
Если операция с одним из аргументов завершится неудачей,
.Nm
выдаст диагностическое сообщение
и продолжит обработку оставшихся аргументов.
.Sh СМОТРИ ТАКЖЕ
.Xr dd 1 ,
.Xr touch 1 ,
.Xr truncate 2
.Sh СТАНДАРТЫ
Утилита
.Nm
не соответствует ни одному из известных стандартов.
.Sh ИСТОРИЯ
Утилита
.Nm
впервые появилась во
.Fx 4.2 .
.Sh АВТОРЫ
Утилиту
.Nm
написал
.An Sheldon Hearn
.Aq sheldonh@starjuice.net .
