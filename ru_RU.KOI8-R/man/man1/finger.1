.\" Copyright (c) 1989, 1990, 1993, 1994
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	@(#)finger.1	8.3 (Berkeley) 5/5/94
.\" %FreeBSD: src/usr.bin/finger/finger.1,v 1.35 2007/04/12 08:22:49 ru Exp %
.\" $FreeBSDru: frdp/doc/ru_RU.KOI8-R/man/man1/finger.1,v 1.1 2007/10/31 11:25:03 ru Exp $
.\" $FreeBSD$
.\"
.Dd 11 апреля 2007
.Dt FINGER 1
.Os
.Sh НАЗВАНИЕ
.Nm finger
.Nd утилита поиска информации о пользователях
.Sh СИНТАКСИС
.Nm
.Op Fl 46gklmpsho
.Op Ar пользователь ...\&
.Op Ar пользователь@система ...\&
.Sh ОПИСАНИЕ
Утилита
.Nm
отображает информацию о пользователях системы.
.Pp
Имеются следующие опции:
.Bl -tag -width indent
.It Fl 4
Заставляет
.Nm
использовать только адреса IPv4.
.It Fl 6
Заставляет
.Nm
использовать только адреса IPv6.
.It Fl s
Вывести системное имя пользователя, реальное имя, имя терминала и статус
записи (как символ ``*'' перед именем терминала, если доступ на запись закрыт),
время простоя, время регистрации в системе и либо рабочий адрес и телефон,
либо имя удалённой системы.
Если задана опция
.Fl o ,
то выводится рабочий адрес и телефон (это же происходит по умолчанию).
Если же задана опция
.Fl h ,
то выводится имя удалённой системы.
.Pp
Время простоя следует интерпретировать в минутах, если оно выведено как
одно целое число; в часах и минутах, если присутствует символ ``:'', и в днях,
если присутствует ``d''.
Если оно указано как
.Dq * ,
то время регистрации в системе показывает время последнего входа в систему.
Время регистрации отображается в виде названия дня недели,
если с момента регистрации прошло меньше 6 дней, иначе в виде месяца и дня;
часов и минут, если прошло меньше 6 месяцев,
в противном случае вместо часов и минут выводится год.
.Pp
Неизвестные устройства, так же как и несуществующие значения времени
простоя и регистрации, отображаются в виде одиночной звёздочки.
.It Fl h
Если используется совместно с опцией
.Fl s ,
то вместо рабочего адреса и телефона выводится имя удалённой системы.
.It Fl o
Если используется совместно с опцией
.Fl s ,
то вместо имени удалённой системы
отображается информация о рабочем адресе и телефоне.
.It Fl g
Эта опция ограничивает вывод информации из поля gecos
до реального имени пользователя.
Она также имеет побочный эффект,
подавляя показ имени удалённой системы при использовании совместно
с опцией
.Fl h .
.It Fl k
Полностью отключает использование
.Xr utmp 5 .
.It Fl l
Производит многострочный вывод, отображающий всю информацию,
описанную для опции
.Fl s ,
а также о домашнем каталоге пользователя, домашнем номере телефона,
командной оболочке, наличии почты, и содержании файлов
.Pa .forward ,
.Pa .plan ,
.Pa .project
и
.Pa .pubkey
из домашнего каталога пользователя.
.Pp
Если время простоя составляет по крайней мере минуту, но меньше суток, оно
выводится в форме ``чч:мм''.
Время простоя больше суток выводится как ``д day[s]чч:мм''.
.Pp
Номера телефонов, указанные как одиннадцать цифр, печатаются в форме
``+N-NNN-NNN-NNNN''.
Номера, указанные как десять или семь цифр, печатаются как соответствующие
подмножества этой строки.
Номера, указанные как пять цифр, печатаются как ``xN-NNNN''.
Номера, указанные как четыре цифры, печатаются как ``xNNNN''.
.Pp
Если для пользователя отсутствует разрешение на запись в устройство,
то к строке, содержащей имя устройства, добавляется фраза ``(messages off)''.
С опцией
.Fl l
выводится по одной записи для каждого пользователя; если пользователь
зарегистрирован в системе несколько раз, информация о терминале повторяется
для каждой сессии.
.Pp
Информация о наличии почты выводится в виде сообщения ``No Mail.'', если
почта отсутствует вовсе, ``Mail last read ДДД MMM ## чч:мм гггг (TZ)'', если
пользователь проверял содержимое почтового ящика с момента появления новой
почты, или в виде сообщений ``New mail received ...'', ``Unread since ...'',
если у пользователя есть новые письма.
.It Fl p
При использовании опции
.Fl l
предотвращает помещение в вывод
.Nm
содержимого файлов
.Pa .forward ,
.Pa .plan ,
.Pa .project
и
.Pa .pubkey.
.It Fl m
Предотвращает для
.Ar пользователь
поиск по имени.
Обычно
.Ar пользователь
является именем пользователя в системе, однако поиск
также будет произведён и по реальному имени пользователя, если
не указана опция
.Fl m .
Поиск по имени, производимый утилитой
.Nm ,
является регистронезависимым.
.El
.Pp
Если не указано никаких опций,
.Nm
использует стиль вывода опции
.Fl l
в случае наличия операндов, и стиль опции
.Fl s
в противном случае.
Обратите внимание, что некоторые поля могут отсутствовать
вне зависимости от формата вывода,
если информация, необходимая для них, недоступна.
.Pp
Если не указано никаких аргументов,
.Nm
выведет информацию по каждому пользователю,
зарегистрированному в системе на текущий момент.
.Pp
Утилита
.Nm
может использоваться для поиска пользователей на удалённой машине.
Аргумент
.Ar пользователь
в этом случае указывается в виде
.Dq Li пользователь@система ,
или
.Dq Li @система ,
при этом формат вывода по умолчанию в первом случае будет в стиле опции
.Fl l ,
а во втором случае \[en] в стиле
.Fl s .
Опция
.Fl l
является единственной, которая может быть передана удалённой машине.
.Pp
Если в домашнем каталоге пользователя присутствует файл
.Pa .nofinger
и команда не была запущена с привилегиями суперпользователя,
.Nm
ведёт себя так, как если бы такой пользователь не существовал.
.Pp
В необязательном файле конфигурации
.Xr finger.conf 5
могут быть указаны псевдонимы.
Поскольку
.Nm
вызывается из
.Xr fingerd 8 ,
псевдонимы будут работать как для локальных запросов, так и для сетевых.
.Sh ОКРУЖЕНИЕ
Утилита
.Nm
использует следующую переменную окружения, если она определена:
.Bl -tag -width Fl
.It Ev FINGER
Эта переменная может быть использована для задания избранных опций для
.Nm .
.El
.Sh ФАЙЛЫ
.Bl -tag -width /var/log/lastlog -compact
.It Pa /etc/finger.conf
база данных для определения псевдонимов
.It Pa /var/log/lastlog
база с данными о последних регистрациях в системе
.El
.Sh СМОТРИ ТАКЖЕ
.Xr chpass 1 ,
.Xr w 1 ,
.Xr who 1 ,
.Xr finger.conf 5 ,
.Xr fingerd 8
.Rs
.%A D. Zimmerman
.%T The Finger User Information Protocol
.%R RFC 1288
.%D декабрь 1991
.Re
.Sh ИСТОРИЯ
Команда
.Nm
появилась в
.Bx 3.0 .
.Sh ПРОБЛЕМЫ
Утилита
.Nm
не распознаёт многобайтные символы.
