.\"-
.\" Copyright (c) 1980, 1990, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" This code is derived from software contributed to Berkeley by
.\" the Institute of Electrical and Electronics Engineers, Inc.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 4. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	@(#)ln.1	8.2 (Berkeley) 12/30/93
.\" %FreeBSD: src/bin/ln/ln.1,v 1.31 2006/02/14 11:08:05 glebius Exp %
.\" $FreeBSDru: frdp/doc/ru_RU.KOI8-R/man/man1/ln.1,v 1.1 2007/11/17 20:56:58 ru Exp $
.\" $FreeBSD$
.\"
.Dd 14 февраля 2006
.Dt LN 1
.Os
.Sh НАЗВАНИЕ
.Nm ln ,
.Nm link
.Nd создать ссылки
.Sh СИНТАКСИС
.Nm
.Op Fl Ffhinsv
.Ar исходный_файл
.Op Ar целевой_файл
.Nm
.Op Fl Ffhinsv
.Ar исходный_файл ...
.Ar целевой_каталог
.Nm link
.Ar исходный_файл Ar целевой_файл
.Sh ОПИСАНИЕ
Утилита
.Nm
создаёт в каталоге новую запись (ссылку на файл), все характеристики
которой совпадают с исходным файлом.
Это позволяет иметь одновременно несколько копий файла в разных местах,
не тратя при этом место на диске для копий;
вместо этого ссылка
.Dq указывает
на оригинал.
Существует два типа ссылок: жёсткие и символические.
Каким образом ссылка
.Dq указывает
на файл, зависит от типа ссылки.
.Pp
Имеются следующие опции:
.Bl -tag -width flag
.It Fl f
Если целевой файл уже существует,
удалить его, чтобы можно было создать ссылку.
(Опция
.Fl f
отменяет действие ранее заданной опции
.Fl i . )
.It Fl F
Если целевой файл уже существует и является каталогом, удалить его,
чтобы можно было создать ссылку.
Опцию
.Fl F
следует использовать с опциями
.Fl f
или
.Fl i ,
и если ни одна из них не указана, то подразумевается опция
.Fl f .
Опция
.Fl F
ничего не делает,
если не указана опция
.Fl s .
.It Fl h
Если
.Ar целевой_файл
или
.Ar целевой_каталог
является символической ссылкой, не следовать ей.
Эта опция особенно полезна в сочетании с опцией
.Fl f
для замены символической ссылки, которая может указывать на каталог.
.It Fl i
Заставляет
.Nm
выдавать запрос через стандартный файл ошибок в случае,
если целевой файл существует.
Если ответ, полученный со стандартного ввода, начинается символом
.Sq Li y
или
.Sq Li Y ,
удалить целевой файл, чтобы можно было создать ссылку.
В противном случае, не пытаться создавать ссылку.
(Опция
.Fl i
отменяет действие ранее заданной опции
.Fl f . )
.It Fl n
То же, что и
.Fl h ,
для совместимости с другими реализациями
.Nm .
.It Fl s
Создать символическую ссылку.
.It Fl v
Выводить больше информации, показывая обрабатываемые утилитой файлы.
.El
.Pp
По умолчанию
.Nm
создаёт
.Em жёсткие
ссылки.
Жёсткая ссылка на файл ничем не отличается от исходного файла;
при этом любые изменения в файле совершенно не зависят от имени, по которому
к нему обратились.
Жёсткие ссылки не могут ссылаться на каталоги, и не могут находиться
на другой файловой системе.
.Pp
Символическая ссылка содержит имя файла,
на который она ссылается.
При выполнении операции
.Xr open 2
над символической ссылкой используется оригинальный файл.
Вызов
.Xr stat 2 ,
выполненный над символической ссылкой, также вернёт исходный файл.
Для получения информации о ссылке следует использовать
.Xr lstat 2 .
Для чтения содержимого символической ссылки можно воспользоваться вызовом
.Xr readlink 2 .
Символические ссылки могут находиться на другой файловой системе
и могут указывать на каталоги.
.Pp
С одним или двумя аргументами,
.Nm
создаёт ссылку на существующий
.Ar исходный_файл .
Если указан
.Ar целевой_файл ,
ссылка получает это имя.
Аргумент
.Ar целевой_файл
также может указывать на каталог, в который следует поместить ссылку;
в противном случае ссылка создаётся в текущем каталоге.
Если указан только каталог, будет создана ссылка
на последний компонент аргумента
.Ar исходный_файл .
.Pp
С более чем двумя аргументами,
.Nm
создаёт ссылки в каталоге
.Ar целевой_каталог
на все указанные исходные файлы.
Ссылки при этом получают имена исходных файлов.
.Pp
Если утилита вызывается как
.Nm link ,
должно быть задано ровно два аргумента,
и ни один из них не может являться каталогом.
В этом простом режиме работы утилита не принимает никаких
опций, и просто выполняет вызов
.Xr link 2 ,
используя два переданных аргумента.
.Sh СОВМЕСТИМОСТЬ
Опции
.Fl h ,
.Fl i ,
.Fl n
и
.Fl v
являются нестандартными и их использование в сценариях не рекомендуется.
Эти опции существуют исключительно для совместимости с другими
реализациями
.Nm .
.Pp
Опция
.Fl F
является расширением
.Fx
и не должна использоваться в переносимых сценариях.
.Sh СМОТРИ ТАКЖЕ
.Xr link 2 ,
.Xr lstat 2 ,
.Xr readlink 2 ,
.Xr stat 2 ,
.Xr symlink 2 ,
.Xr symlink 7
.Sh СТАНДАРТЫ
Утилита
.Nm
соответствует стандарту
.St -p1003.2-92 .
.Pp
Упрощённая команда
.Nm link
соответствует спецификации
.St -susv2 .
.Sh ИСТОРИЯ
Команда
.Nm
появилась в
.At v1 .
