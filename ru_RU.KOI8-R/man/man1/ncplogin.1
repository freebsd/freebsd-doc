.\" %FreeBSD: src/usr.bin/ncplogin/ncplogin.1,v 1.13 2007/01/15 15:25:15 ru Exp %
.\" $FreeBSDru: frdp/doc/ru_RU.KOI8-R/man/man1/ncplogin.1,v 1.2 2007/01/16 16:22:09 ru Exp $
.\" $FreeBSD$
.Dd 15 сентября 1999
.Dt NCPLOGIN 1
.Os
.Sh НАЗВАНИЕ
.Nm ncplogin
.Nd создать постоянное подключение к серверу NetWare
.Sh СИНТАКСИС
.Nm
.Op Fl BCDN
.Op Fl S Ar сервер
.Op Fl U Ar пользователь
.Op Fl A Ar хост
.Op Fl I Ar уровень
.Op Fl M Ar режим
.Oo
.Fl O Xo
.Op Ar владелец Ns
.Op : Ns Ar группа
.Xc
.Oc
.Op Fl R Ar число_попыток
.Op Fl T Ar дерево
.Op Fl W Ar таймаут
.Nm
.Op Fl BCDN
.Op Fl A Ar хост
.Op Fl I Ar уровень
.Op Fl M Ar режим
.Oo
.Fl O Xo
.Op Ar владелец Ns
.Op : Ns Ar группа
.Xc
.Oc
.Op Fl R Ar число_попыток
.Op Fl T Ar дерево
.Op Fl W Ar таймаут
.No / Ns Ar сервер Ns : Ns Ar пользователь
.Sh ОПИСАНИЕ
Подключения к серверу
.Tn NetWare
могут создаваться и использоваться независимо от команды
.Xr mount_nwfs 8 .
Подключения могут создаваться любым пользователем.
У каждого пользователя может быть несколько подключений,
но каждая пара
.Ar СерверNetWare Ns : Ns Ar ПользовательNetWare
должна быть уникальной.
.Pp
Команда
.Nm
используется для создания постоянного подключения к серверу
.Tn NetWare .
Постоянные подключения остаются открытыми, даже если никакие
приложения их не используют.
Это даёт возможность запускать различные
.Pa ncp*
программы
без необходимости указания файлового сервера и пользователя.
Установленные подключения могут быть разорваны командой
.Xr ncplogout 1 .
.Pp
Опции, состоящие из заглавных букв, описанные в этой странице
справочника, также доступны в других программах
.Pa ncp*
и называются
.Dq опциями подключения .
Опции
.Fl U
и
.Fl S
не могут использоваться совместно со спецификацией
.No / Ns Ar сервер Ns : Ns Ar пользователь .
.Pp
Имеются следующие опции:
.Bl -tag -width indent
.It Fl S Ar сервер
Задаёт имя сервера
.Tn NetWare
для подключения.
Эта опция применима только к серверам
.Tn IPX .
Для серверов, поддерживающих
.Tn IP ,
см.\& опцию
.Fl A .
.It Fl U Ar пользователь
Задаёт имя пользователя, используемое для регистрации.
.It Fl A Ar хост
Использовать протокол
.Tn UDP
для подключения к серверу
.Tn NetWare
5.x, заданному аргументом
.Ar хост .
.It Fl C
Не переводить пароль в верхний регистр.
.It Fl D
Пометить подключение как основное.
Эта опция может изменять уже установленные подключения.
Эта опция доступна только в программе
.Nm .
.It Fl I Ar уровень_подписи
Пытаться использовать
.Ar уровень_подписи .
Допустимые значения:
.Pp
.Bl -tag -width ".Em Значение" -offset indent -compact
.It Em Значение
.Em Описание
.It 0
запретить подписи
.It 1
разрешить (использовать, если требуется сервером)
.It 2
запрашивать, но не требовать подписи
.It 3
требовать подписи
.El
.Pp
Учтите, что реализовано лишь подписывание заголовков пакетов.
.It Fl M Ar режим
Предоставить общий доступ к этому подключению.
Биты в аргументе
.Ar режим
аналогичны стандартным битам прав доступа файлов.
.Pp
.Bl -tag -width ".Em Маска" -offset indent -compact
.It Em Маска
.Em Описание
.It 4
.Pq READ
подключение будет доступно.
.It 2
.Pq WRITE
подключение может быть закрыто/изменено.
.It 1
.Pq EXECUTE
пользователю разрешено выполнять запросы.
.El
.Pp
По умолчанию, подключение создаётся с режимом 0700,
и только владелец может им пользоваться.
Указание в качестве аргумента опции
.Fl M
значения 0750 дополнительно разрешает доступ только на чтение группе.
Это позволит пользователям группы выполнять
.Tn NCP
запросы, но не разрывать подключение.
Когда сервер не задан явным образом,
.Pa ncp*
программы пытаются найти подходящее подключение,
в таком порядке:
.Bl -enum -offset indent
.It
Попытаться найти подключение, для которого пользователь является владельцем.
Если таких подключений более одного, попытаться найти основное.
(Пометить подключение как основное можно при помощи опции
.Fl D . )
.It
Если невозможно определить основное подключение,
используется первое подключение с общим доступом.
.El
.It Fl N
Не запрашивать пароль.
Во время работы
.Nm
прочтёт файл
.Pa ~/.nwfsrc
для получения дополнительных параметров конфигурации и пароля.
Если пароль для указанной пары
.Ar сервер Ns : Ns Ar пользователь
не найден,
.Nm
его запросит.
.It Fl O
Задать атрибуты подключения
.Ar владелец
и
.Ar группа .
По умолчанию, для вновь создаваемых подключений атрибут владельца
устанавливается по имени пользователя, создающего подключение,
а атрибут группы \[en] по основной группе этого пользователя.
С помощью этой опции атрибуты можно задать явно.
Только суперпользователь может установить атрибут владельца подключения
явно.
.It Fl P
Пометить подключение как постоянное.
Программа
.Nm
всегда создаёт постоянные подключения.
Эта опция может быть полезной в других
.Pa ncp*
программах.
.It Fl R Ar число_попыток
Указать число повторных попыток перед обрывом подключения.
По умолчанию 10.
.Pp
Замечание: после того, как подключение помечено как
.Dq BAD
(плохое), каждый запрос будет пытаться его восстановить.
Однако этот процесс восстанавливает лишь
.Tn NCP
подключение; он не открывает заново те файлы, которые были
открыты в момент, когда подключение было помечено как
.Dq BAD .
.It Fl W Ar таймаут
Задаёт таймаут запроса к серверу, в секундах.
По умолчанию 5 секунд.
.It / Ns Ar сервер Ns : Ns Ar пользователь
Этот синтаксис предоставляется для простоты и несовместим с опциями
.Fl S
и
.Fl U .
.El
.Sh ОСОБЕННОСТИ РЕАЛИЗАЦИИ
Низкоуровневое управление подключениями реализовано в модуле ядра
.Pa ncp.ko .
Для поддержки
.Tn IPX
также необходима программа
.Xr IPXrouted 8 .
.Sh ФАЙЛЫ
.Bl -tag -width ".Pa ~/.nwfsrc"
.It Pa ~/.nwfsrc
хранит постоянные параметры подключений, а также другую
информацию; подробнее см.\&
.Pa /usr/share/examples/nwclient/dot.nwfsrc .
.El
.Sh ИСТОРИЯ
Команда
.Nm
впервые появилась во
.Fx 4.0 .
.Sh АВТОРЫ
.An Борис Попов Aq bp@butya.kz ,
.Aq rbp@chat.ru
.Sh ПРОБЛЕМЫ
Пожалуйста, сообщайте обо всех ошибках автору.
