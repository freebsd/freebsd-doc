.\"	$NetBSD: pkill.1,v 1.8 2003/02/14 15:59:18 grant Exp $
.\"
.\" %FreeBSD: src/usr.bin/pkill/pkill.1,v 1.22 2006/12/20 11:57:22 ru Exp %
.\" $FreeBSDru: frdp/doc/ru_RU.KOI8-R/man/man1/pkill.1,v 1.5 2007/11/20 13:50:08 ru Exp $
.\" $FreeBSD$
.\"
.\" Copyright (c) 2002 The NetBSD Foundation, Inc.
.\" All rights reserved.
.\"
.\" This code is derived from software contributed to The NetBSD Foundation
.\" by Andrew Doran.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"        This product includes software developed by the NetBSD
.\"        Foundation, Inc. and its contributors.
.\" 4. Neither the name of The NetBSD Foundation nor the names of its
.\"    contributors may be used to endorse or promote products derived
.\"    from this software without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE NETBSD FOUNDATION, INC. AND CONTRIBUTORS
.\" ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
.\" TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
.\" PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE FOUNDATION OR CONTRIBUTORS
.\" BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
.\" CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
.\" SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
.\" INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
.\" CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
.\" ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
.\" POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd 23 ноября 2006
.Dt PKILL 1
.Os
.Sh НАЗВАНИЕ
.Nm pgrep , pkill
.Nd найти процессы по имени с возможной отправкой им сигнала
.Sh СИНТАКСИС
.Nm pgrep
.Op Fl LSfilnovx
.Op Fl F Ar pidfile
.Op Fl G Ar gid
.Op Fl M Ar дамп
.Op Fl N Ar система
.Op Fl P Ar ppid
.Op Fl U Ar uid
.Op Fl d Ar разделитель
.Op Fl g Ar pgrp
.Op Fl j Ar jid
.Op Fl s Ar sid
.Op Fl t Ar tty
.Op Fl u Ar euid
.Ar шаблон ...
.Nm pkill
.Op Fl Ar сигнал
.Op Fl ILfinovx
.Op Fl F Ar pidfile
.Op Fl G Ar gid
.Op Fl M Ar дамп
.Op Fl N Ar система
.Op Fl P Ar ppid
.Op Fl U Ar uid
.Op Fl g Ar pgrp
.Op Fl j Ar jid
.Op Fl s Ar sid
.Op Fl t Ar tty
.Op Fl u Ar euid
.Ar шаблон ...
.Sh ОПИСАНИЕ
Команда
.Nm pgrep
производит поиск в таблице процессов работающей системы и выводит
идентификаторы
процессов, удовлетворяющих заданному в командной строке критерию.
.Pp
Команда
.Nm pkill
производит поиск в таблице процессов работающей системы и посылает сигнал
всем процессам, удовлетворяющим заданному в командной строке критерию.
.Pp
Имеются следующие опции:
.Bl -tag -width ".Fl d Ar разделитель"
.It Fl F Ar pidfile
Ограничить совпадения процессом, чей идентификатор процесса (PID)
хранится в файле
.Ar pidfile .
.It Fl G Ar gid
Ограничить совпадения процессами с идентификатором действительной группы
(real group ID) из разделённого запятыми списка
.Ar gid .
.It Fl I
Запросить подтверждение на отправку сигнала каждому процессу.
.It Fl L
Файл
.Ar pidfile ,
передаваемый в качестве параметра опции
.Fl F ,
должен быть заблокирован с использованием системного вызова
.Xr flock 2
или создан с помощью
.Xr pidfile 3 .
.It Fl M Ar дамп
Извлечь значения, связанные со списком имён (namelist), из указанного
дампа памяти ядра
.Ar дамп ,
вместо памяти работающей в текущий момент системы.
.It Fl N Ar система
Извлечь список имён из указанной системы, вместо используемого по умолчанию
образа ядра, с которого произведена загрузка.
.It Fl P Ar ppid
Ограничить совпадения процессами, идентификаторы родительских процессов (PPID)
которых перечислены в разделённом запятыми списке
.Ar ppid .
.It Fl S
Искать также среди системных процессов (нитей ядра).
.It Fl U Ar uid
Ограничить совпадения процессами с идентификаторами действительного пользователя
(real user ID), находящимися в разделённом запятыми списке
.Ar uid .
.It Fl d Ar разделитель
Использовать заданный разделить для выводимых идентификаторов процессов.
По умолчанию используется символ новой строки.
Эта опция может быть использована только с командой
.Nm pgrep .
.It Fl f
Производить поиск совпадений по полному списку аргументов.
По умолчанию проверяются только имена процессов.
.It Fl g Ar pgrp
Ограничить совпадения списком процессов с идентификаторами группы процессов
(process group ID) из разделённого запятыми списка
.Ar pgrp .
Ноль означает идентификатор группы процессов работающей команды
.Nm pgrep
или
.Nm pkill .
.It Fl i
Игнорировать различия в регистре символов в таблице процессов
и указанном шаблоне.
.It Fl j Ar jid
Ограничить совпадения процессами внутри тюрьмы (jail) с идентификатором из
разделённого запятыми списка
.Ar jid .
Значение
.Dq Li any
означает любой процесс в любой тюрьме.
Значение
.Dq Li none
означает любой процесс не в тюрьме.
.It Fl l
Подробный вывод.
В дополнение к идентификатору процесса также выводить его имя.
При использовании совместно с
.Fl f ,
для каждого подходящего процесса
выводить его идентификатор и полный список аргументов.
Эта опция может быть использована только с командой
.Nm pgrep .
.It Fl n
Из всех подходящих процессов выбрать только самый новый (по времени запуска).
.It Fl o
Из всех подходящих процессов выбрать только самый старый (по времени запуска).
.It Fl s Ar sid
Ограничить совпадения процессами с идентификатором сессии (session ID)
из разделённого запятыми списка
.Ar sid .
Ноль означает идентификатор сессии работающей команды
.Nm pgrep
или
.Nm pkill .
.Ar sid .
.It Fl t Ar tty
Ограничить совпадения процессами, связанными с одним из терминалов из
разделённого запятыми списка
.Ar tty .
Имена терминалов задаются в форме
.Pa tty Ns Ar xx
или в более короткой
.Ar xx .
Одиночный дефис
.Pq Ql -
задаёт процессы, не связанные с терминалом.
.It Fl u Ar euid
Ограничить совпадения процессами с идентификатором эффективного пользователя
(effective user ID)
из разделённого запятыми списка
.Ar euid .
.It Fl v
Инвертировать совпадение, т.е., вывести процессы,
не удовлетворяющие заданному условию.
.It Fl x
Требовать точного совпадения с именем процесса, или, если задана опция
.Fl f ,
списком аргументов.
По умолчанию производится поиск подстроки.
.It Fl Ns Ar сигнал
Неотрицательное десятичное значение или символьное имя сигнала.
Указывает сигнал, отправляемый вместо используемого по умолчанию
.Dv TERM .
Эта опция допустима только в качестве первого аргумента
.Nm pkill .
.El
.Pp
При указании одного или более операнда
.Ar шаблон ,
они используются как регулярные выражения для поиска совпадения с
именем команды или полным списком аргументов каждого процесса.
Если опция
.Fl f
не указана,
.Ar шаблон
сравнивается только с именем команды.
Однако в настоящее время
.Fx
отслеживает лишь первые 19 символов имени команды для каждого процесса.
Попытка найти что-либо в имени команды после первых 19 символов
всегда даёт отрицательный результат.
.Pp
Следует отметить, что работающий процесс
.Nm pgrep
или
.Nm pkill
никогда не выберет ни себя, ни системные процессы (нити ядра)
как удовлетворяющие критериям поиска.
.Sh СТАТУС ЗАВЕРШЕНИЯ
Утилиты
.Nm pgrep
и
.Nm pkill
на выходе возвращают одно из следующих значений:
.Bl -tag -width indent
.It 0
Был найден один или более подходящих процессов.
.It 1
Подходящие процессы не были найдены.
.It 2
В командной строке указаны недопустимые опции.
.It 3
Произошла внутренняя ошибка.
.El
.Sh СОВМЕСТИМОСТЬ
Исторически, опция
.Dq Fl j Li 0
означала "любая тюрьма", хотя в других утилитах, таких как
.Xr ps 1 ,
идентификатор тюрьмы (jail ID)
.Li 0
имеет обратное значение, "не в тюрьме".
Поэтому
.Dq Fl j Li 0
считается устаревшей, а вместо неё возможно использовать
.Dq Fl j Li any .
.Sh СМОТРИ ТАКЖЕ
.Xr kill 1 ,
.Xr killall 1 ,
.Xr ps 1 ,
.Xr flock 2 ,
.Xr kill 2 ,
.Xr sigaction 2 ,
.Xr pidfile 3 ,
.Xr re_format 7
.\" Xr signal 7
.Sh ИСТОРИЯ
Утилиты
.Nm pkill
и
.Nm pgrep
впервые появились в
.Nx 1.6 .
Они смоделированы на основе одноимённых утилит, появившихся в
Sun Solaris 7.
Впервые они появились во
.Fx 5.3 .
.Sh АВТОРЫ
.An Andrew Doran
.Aq ad@NetBSD.org
