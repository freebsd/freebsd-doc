<!-- $Id: troubleshoot.sgml,v 1.3 1998-11-26 22:33:33 nik Exp $ -->
<!-- The FreeBSD Documentation Spanish Project -->
  <sect>
    <heading>Problemas<label id="troubleshoot"></heading>

    <sect1>
      <heading>Tengo bloques erroneos en mi disco duro!<label id="awre"></heading>

      <p>Los discos SCSI deberian ser capaces de marcar estos bloques
      erroneos automaticamente para que no presenten problemas. Algunos
      discos, por alguna razo desconocida, se venden con esta
      caracteristica desactivada.

      <p>Para activar esta opcion, tendras que editar una de las opciones
      del dispositivo, lo que puede ser hecho con FreeBSD tecleando el
      siguiente comando (como root):

      <verb>
        scsi -f /dev/rsd0c -m 1 -e -P 3
      </verb>

      <p>y cambiando los valores de AWRE y ARRE de 0 a 1:-

      <verb>
        AWRE (Auto Write Reallocation Enbld):  1
        ARRE (Auto Read Reallocation Enbld):  1
      </verb>

      <p>Para otros tipos de discos, dependes de las caracteristicas de
      los sistemas operativos. Desafortunadamente, el comando "bad144"
      que se incluye en FreeBSD, necesita ser desarrollado mas en
      profundidad. 

      <p>Se <em/supone/ que los discos IDE incluyen de serie la posibilidad
      de "remapear" los bloques da¤ados; si tienes documentacion de tu
      disco, podras ver si esta opcion esta activada o desactivada.


    <sect1>
      <heading>FreeBSD no reconoce mi Bustek 742a EISA SCSI!</heading>

      <p>Esta informacion es especifica para la tarjeta 742a, pero puede
      ser aplicable a otras tarjetas Buslogic. (Bustek = Buslogic)

      <p>Existen dos versiones de la tarjeta 742a. Son revisiones de
      hardware A-G y H. La letra de revision esta situada despues del
      numero de ensamblaje. La 742a tiene 2 ROMs, una es la BIOS y
      la otra es el Firmware. FreeBSD no se fija en la version de BIOS
      de la tarjeta, pero si en la de Firmware. Buslogic te enviara una
      actualizacion de de las ROMs si te pones en contacto con su
      departamento tecnico. La BIOS y el Firmware son distribuidas de
      manera inseparable. Deberias tener la version de Firmware mas
      actualizada para la revision de hardware de tu tarjeta.

      <p>Las tarjetas con revision A-G solo pueden aceptar BIOS/Firmware
      2.41/2.21. La revision H y superiores pueden aceptar las versiones
      mas actuales 4.70/3.37. La diferencia entre las versiones de
      Firmware es que la 3.38 soporta "round robin".

      <p>Las tarjetas Buslogic tienen un numero de serie serigrafiado
      en ellas. Si tienes una revision de hardware antigua, puedes llamar
      al departamento de RMA de Buslogic y darles el numero de serie de
      la tarjeta para intentar cambiarla por una revision superior del
      hardware.

      <p>FreeBSD 2.1 solo soporta revisiones de Firmware 2.21 o superiores.
      Si tienes una version inferior, tu tarjeta no sera reconocida como
      Buslogic. Quizas sea reconocida como una Adaptec 1540. Las primeras
      versiones de Firmware de Buslogic contienen una modo de emulacion
      de la AHA1540.

      <p>Si tienes una revision de hardware antigua y consigues una mas
      actual (2.21), necesitaras chequear la posicion del jumper W1 y
      asegurarte que esta en la posicion B-C (por defecto esta en B-C).


    <sect1>
      <heading>
        Mi controladora SCSI HP Netserver's no es detectada!
      </heading>

      <p>Este es un problema ya conocido. Las controladoras SCSI EISA
      integradas en la placa base en las maquinas HP Netserver, ocupan
      el slot numero 11. El espacio de direcciones de para los slots
      EISA >=10 colisionan con los espacios de direcciones asignados
      para los dispositivos PCI, y la autoconfiguracion de FreeBSD no
      maneja esta situacion demasiado bien.

      <p>Lo mejor que puedes hacer es pretender que no existan clases
      de rangos de direcciones :), cambiando el valor de la opcion del
      kernel <tt/EISA_SLOTS/ a un valor de 12.
      Configura y compila un nuevo kernel como se describe en la
      <url url="../../handbook/kernelconfig.html"
      name="entrada correspondiente del manual">.
                                              
      <p>Por supuesto, esto presenta un pequenyo problema. Para poder
      solucionarlo, es necesario un truco en la utilidad de
      configuracion. No uses el interface "visual", simplemente teclea
      lo siguiente en la linea de comando de la utilidad

      <verb>
        eisa 12
        quit
      </verb>

      <p>Esperamos que en las proximas versiones tengamos solucionados
      estos temas.

    <sect1>
      <heading>Que ocurre con la controladora IDE CMD640?</heading>

      <p>No funciona. No puede manejar comandos en los dos canales
      simultaneamente.

      <p>Hay una solucion posible y se activa automaticamente si tu
      sistema usa este chip. Para mas detalles, referirse al man del
      driver de discos (man 4 wd).

      <p>Si todavia estas usando FreeBSD 2.2.1 o 2.2.2 con una controladora
      IDE CMD640 y quieres usar el segundo canal, crea un nuevo kernel
      con <tt/options "CMD640"/ activada. Esta es la opcion por defecto
      en la version 2.2.5 y superiores.

    <sect1>
      <heading>Tengo mensajes como ``<tt/ed1: timeout/''.</heading>

      <p>Esto, normalmente es causado por conflictos de interrupciones (por
      ejemplo, dos tarjetas usando la misma IRQ). Las versiones
      anteriores a la 2.0.5R eran tolerantes con los problemas de
      conflictos de IRQ. A partir de esa version, los conflictos de IRQ ya
      no son tolerados. Arranca con la opcion -c y cambia la entrada
      correspondiente a tu tarjeta.

      <p>Si estas usando conectores BCN en tu tarjeta de red, el mensaje de
      error puede ser debido a una mala terminacion de la red. Para chequear
      esto, conecta un terminador directamente a la salida BNC de la
      tarjeta (sin cable) y mira si el mensaje desaparece.

    <sect1>
      <heading>Cuando monto el CDROM, obtengo ``Incorrect super block''.</heading>

      <p>Tienes que indicar 
      el tipo de dispositivo que quieres montar. Por defecto 
      <htmlurl url="http://www.freebsd.org/cgi/man.cgi?mount" name="mount">
      asumira que el dispositivo que quieres montar es ``<tt/ufs/''. 
      Si quieres montar un CDROM, tienes que especificar <tt/-t cd9660/.
      Esto hace que el sistema asuma que tiene que montar un sistema de
      ficheros con formato ISO 9660 que es lo que los CDROM deben tener.

      <p>Como ejemplo, si quieres montar una unidad CDROM,
      <tt>/dev/cd0c</tt>, bajo <tt>/mnt</tt>, tienes que ejecutar

      <verb>
        mount -t cd9660 /dev/cd0c /mnt
      </verb>

      <p>Ten en cuenta que el nombre de tu dispositivo
      (<tt>/dev/cd0c</tt> en este ejemplo) puede ser diferente dependiendo
      del interface que estes usando. El comando anterior puede ser
      acortado tecleando:

      <verb>
        mount_cd9660 /dev/cd0c /mnt
      </verb>

    <sect1>
      <heading>Cuando monto un CDROM, obtengo ``Device not configured''.</heading>

      <p>Esto, generalmente, significa que no hay ningun disco en el lector
      de CDROM. Tambien puede significar que el lector no es visible para
      el bus. Chequea que esta bien configurado en lo referente a
      master/slave si es IDE (ATAPI).

      <p>Algunas veces un CDROM SCSI puede "desaparecer" porque no ha tenido
      tiempo suficiente para responder a un reset del bus. Si tienes un
      CDROM SCSI, anyade la siguiente linea en el fichero de configuracion
      del kernel y recompilalo.

      <verb>
        options "SCSI_DELAY=15"
      </verb>

    <sect1>
      <heading>Mi impresora es ridiculamente lenta. Que puedo hacer ?</heading>

      <p>Si es paralelo, y el unico problema es la lentitud, intenta
      configurar el puero de impresora en modo "polled":

      <verb>
        lptcontrol -p
      </verb>

      <p>Algunas impresoras nuevas de HP son conocidas por no trabajar
      correctamente en modo de interrupcion, aparentemente debido (y
      todavia no exactamente entendido), a un problema de "timing".

    <sect1>
      <heading>Mis programas ocasionalmente mueren con errores ``Signal 11''.</heading>

      <p>Esto puede ser por hardware erroeno (memoria, placa base, etc).
      Intenta ejecutar algun programa de test de memoria. Ten en cuenta
      que es posible que tu memoria pase el test del programa que uses,
      pero que falle en algunas condiciones de uso, como en compilacion
      de kernel.

      <p>La FAQ SIG11 (listada mas abajo) apunta a problemas de lentitud de
      memoria. Incrementa el numero de "wait states" en tu BIOS o
      instala una memoria mas rapida.

      <p>Tambien puedes intentar desactivar el cache de placa base en la
      BIOS y comprueba si se resuelve el problema.

      <p>Hay una extensa FAQ en
      <url url="http://www.bitwizard.nl/sig11/" name="the SIG11 problem FAQ">

    <sect1>
      <heading>Cuando arranco, la pantalla queda negra!</heading>

      <p>Este es un problema conocido con las tarjetas de video ATI Mach 64.
      El problema es que esta tarjeta usa la direccion <tt/2e8/, tambien
      usada por el puerto serie 4. Debido a un bug (feature?) en el driver
      <htmlurl url="http://www.freebsd.org/cgi/man.cgi?sio" name="sio.c">
      , este "tocara" este puerto aunque no este instalado o este
      seactivado.

      <p>Hasta que el problema sea fijado, puede hacer esto:

      <enum>
        <item>Teclea <tt/-c/ en el prompt de arranque. Esto te llevara a
        la seccion de configuracion del kernel.

        <item>Desactiva <tt/sio0/, <tt/sio1/, <tt/sio2/ y <tt/sio3/
        (todos ellos).  De esta manera, el driver sio no se activa.

        <item>Teclea exit para seguir arrancando.
      </enum>

      <p>Si quieres ser capaz de usar tus puertos serie, tendras que
      compilar un nuevo kernel con la siguiente modificacion:
      <tt>/usr/src/sys/i386/isa/sio.c</tt>. Busca la cadena <tt/0x2e8/
      y borra esta cadena y la coma anterior (manten la coma siguiente).
      Ahora, compila un nuevo kernel de la manera habitual.

      <p>Despues de realizar estos cambios, puedes encontrarte aun que
      las X Window no funcionan correctamente. Algunas tarjetas de
      video modernas ATI Mach 64 (especialmente la ATI Mach Xpression)
      no funcionan con la version actual de <tt/XFree86/; la pantalla
      se queda negra cuando arrancas las X o ocurren cosas extranyas en
      su funcionamiento. Puedes instalar una version beta del nuevo
      servidor X que trabaja mejor, situada en
      <url url="http://www.xfree86.org" name="the XFree86 site">
      y seguir los links hasta el download. Coge los siguientes ficheros:


      <p><tt>AccelCards, BetaReport, Cards, Devices, FILES, README.ati,
      README.FreeBSD, README.Mach64, RELNOTES, VGADriver.Doc,
      X312BMa64.tgz</tt>

      <p>Reemplaza los viejos ficheros por las nuevas versiones y asegurate
      de ejecutar de nuevo<htmlurl
      url="http://www.freebsd.org/cgi/man.cgi?manpath=xfree86&amp;query=xf86config"
      name="xf86config">.

    <sect1>
      <heading>
        Tengo 128MB de RAM pero el sistema solo usa 64MB.
        <label id="reallybigram">
      </heading>

      <p>Debido a la forma que tiene FreeBSD de "ver" el tamanyo de
      memoria en la BIOS, solo puede detectar 16 bits
      (65535 Kbytes = 64MB) (o menos... algunas BIOS fijan el tamanyo de
      la memoria a 16MB).

      <p>Para solucionar este problema, tienes que usar la opcion del
      kernel indicada mas adelante. Hay una manera de ver la informacion
      completa sobre memoria en la BIOS, pero no tenemos espacion en los
      bloques de arranque (bootblocks) para hacerlo. Por ahora, tenemos
      que trabajar con la opcion del kernel.

      <tt>
        options "MAXMEM=&lt;n>"
      </tt>

      <p>Donde <tt/n/ es tu memoria en Kilobytes. Para 128MB,
      tendrias que usar <tt/131072/.

    <sect1>
      <heading>FreeBSD 2.0 aborta con ``kmem_map too small!''</heading>

      <p><tt /Nota/ El mensaje deberia ser ``mb_map too small!''

      <p>La parada indica que el sistema no tiene memoria virtual
      suficiente para los buffers de red (especificamente, clusters mbuf).
      Puedes incrementar la cantidad de memoria virtual disponible para
      los clusters mbuf anyadiendo:

      <p><tt>options "NMBCLUSTERS=&lt;n>"</tt>

      <p>al fichero de configuracion del kernel, donde &lt;n&gt; es un
      numero en el rango 512-4096, dependiendo del numero de conexiones
      tcp simultaneas que necesites soportar. Te recomendamos intentar con
      2048. Puedes monitorizar el numero de clusters mbuf en uso con la
      orden
      <htmlurl url="http://www.freebsd.org/cgi/man.cgi?netstat"
      name="netstat -m">.


    <sect1>
      <heading>``CMAP busy panic'' al arrancar con un nuevo kernel.</heading>

      <p>El programa que intenta detectar ficheros <tt>/var/db/kvm_*.db</tt>
      puede fallar y provocar el "panic" en el arranque.

      <p>Si esto ocurre, arranca en mono-usuario y haz:

      <verb>
        rm /var/db/kvm_*.db
      </verb>

    <sect1>
      <heading>ahc0: brkadrint,  Illegal Host Access at seqaddr 0x0</heading>

      <p>Esto significa un conflicto con una controladora Ultrastor SCSI. 

      <p>Durante el proceso de arranque, entra en el menu de configuracion
      del kernel y desactiva el dispositivo
      <htmlurl url="http://www.freebsd.org/cgi/man.cgi?uha(4)" name="uha0">.

    <sect1>
      <heading>Sendmail dice ``mail loops back to myself''</heading>

      <p>Esto esta contestado en la FAQ de sendmail de la siguiente
      manera:

      <verb>
        * Tengo el error "Local configuration error" :

        553 relay.domain.net config error: mail loops back to myself
        554 <user@domain.net>... Local configuration error

        Como puedo solventar el problema?

        Has intentado enviar un mail al dominio domain.net y que sea
        reenviado a un host especifico (en este caso relay.domain.net)
        usando un registro MX, pero la maquina que tiene que aceptar
        ese mail, no reconoce el domimio como propio. Anyade
        domain.net al fichero /etc/sendmail.cw (si estas usando
        FEATURE(use_cw_file) o anyade "Cw domain.net" al fichero
        sendmail.cf
      </verb>

      <p>La version actual de la  <url
      url="ftp://rtfm.mit.edu/pub/usenet/news.answers/mail/sendmail-faq"
      name="FAQ de sendmail"> puede ser encontrada en
      <url url="news:comp.mail.sendmail" name="comp.mail.sendmail">,
      <url url="news:comp.mail.misc" name="comp.mail.misc">,
      <url url="news:comp.mail.smail" name="comp.mail.smail">,
      <url url="news:comp.answers" name="comp.answers">, y
      <url url="news:news.answers" name="news.answers">.
      Tambien puedes recibir una copia enviando un mail a
      <url url="mailto:mail-server@rtfm.mit.edu"
      name="mail-server@rtfm.mit.edu"> con el comando "send
      usenet/news.answers/mail/sendmail-faq" en el cuerpo del mensaje.
      

    <sect1>
      <heading>No funcionan correctamente las aplicaciones a pantalla completa
      en maquinas remotas</heading>
      <p>Quizas la maquina remota tiene el tipo de terminal diferente de 
      <tt>cons25</tt> que es el usado por la consola de FreeBSD.
      <p>Hay diferentes maneras de solucionar este problema:
      <itemize>
      <item>Despues de hacer el login en la maquina remota, configura la
      variable SHELL como <tt>ANSI</tt> o <tt>sco</tt>.
      <item>Usa el emulador VT100 como <htmlurl
      url="http://www.freebsd.org/cgi/ports.cgi?screen-" name="screen">
      local. <tt>screen</tt> te permite la posibilidad de ejecutar multiples
      y concurrentes sesiones desde un terminal.
      <item>Instala la base de datos del terminal <tt>cons25</tt> en la 
      maquina remota.
      <item>Lanza las X y haz el login en la maquina remota desde <tt>xterm</tt>.
      </itemize>
  </sect>

