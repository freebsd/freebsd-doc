<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN" [
<!ENTITY date "$Date: 1997-06-10 04:04:14 $">
<!ENTITY title "Mirroring the FreeBSD Web Pages">
<!ENTITY % includes SYSTEM "includes.sgml"> %includes;
]>
<html>
&header;

<p>You can (and are encouraged to) mirror the FreeBSD web pages on
<tt>www.freebsd.org</tt>. To do this, you need to obtain and install
a program called <em>rsync</em> on your web server. Rsync is a revolutionary
tree synchronising program written by Andrew Tridgell and Paul Mackerras
at the Australian National University. It was modified to work in an
unprivileged client-server mode by Warren Toomey.</p>

<H2>Installing Rsync</H2>

<p>The source code to <em>rsync</em> can be obtained via anonymous ftp
at <a href="ftp://minnie.cs.adfa.oz.au/rsync/rsync_client.tar.gz">ftp://minnie.cs.adfa.oz.au/rsync/rsync_client.tar.gz</a>.</p>

<p>To build and install it, do the following:</p>

<pre>
 % tar vxzf rsync_client.tar.gz
 % cd rsync-1.6.2
 % ./configure
 % make; make install
 % rehash	(for csh users)
</pre>

<H2>Running Rsync</H2>

<p>If you keep your mirrored FreeBSD web pages in the directory
<tt>/usr/FreeBSD-mirror/data</tt> and are owned by the user `fred', then
run the following command as user `fred':</p>

<pre>
 % rsync --client -avz www.freebsd.org:www /usr/FreeBSD-mirror/data
</pre>

<p>This will mirror the FreeBSD web pages into <tt>/usr/FreeBSD-mirror/data</tt>.
You can install this into fred's crontab, so that it runs once a
day.  The pages on www.freebsd.org are updated daily at about 4:30am
California time.</p>

<p>If you do not wish to use rsync for some reason, you can also use
one of the popular FTP mirror utilities to simply mirror
<a href="ftp://ftp.freebsd.org/pub/FreeBSD/FreeBSD-current/www">the
central FTP site's copy</a>.

<H2>Optimizing Rsync's Performance</H2>

<p>There are several gzipped tar files kept in the web hierarchy at
<tt>www.freebsd.org</tt>. Rsync does not deal with these very well; it
must transmit each tar file if it is changed. Because these files can
easily be created locally, you can get <em>rsync</em> to exclude
them. To do this, run the following command as user `fred':</p>

<pre>
 % rsync --client -avz --exclude '*.tar.gz' www.freebsd.org:www /usr/FreeBSD-mirror/data
</pre>

<p>You should see a dramatic improvement in <em>rsync</em>'s
performance.  (A better mechanism for dealing with the tar files needs
to be established.)</p>

<H2>More Information on Rsync</H2>

<p>Now that you can use <em>rsync</em>, I would suggest you read the
following files:</p>

<ul>
<li>README
<li>The rsync man page, rsync.1
<li>tech_report.ps
<li>Readme.daemon
</ul>

<p>If you have any questions about <em>rsync</em>, please pass them on to the
authors, or join the rsync mailing list (both described in the
README).</p>

&footer;
