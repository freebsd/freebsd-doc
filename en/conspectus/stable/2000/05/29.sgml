<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" [
<!ENTITY title "FreeBSD-stable Conspectus, week ending 29th May 2000">
<!ENTITY date "$FreeBSD$">
<!ENTITY base "../../../..">
<!ENTITY % includes SYSTEM "../../../../includes.sgml"> %includes;]>

<html>
   &header;

    <table cellpadding="0" cellspacing="0">
      <tbody>
	<tr>
	  <th align="left">Dates</th>

	  <th align="center"># Posts</th>

	  <th align="left">Subject</th>
	</tr>
	
	<tr>
	  <td valign="top">May 23 - May 27</td>
	  
	  <td valign="top" align="center">20</td>
	  
	  <td valign="top"><a href="#1">Re: ad0 drivers revisited</a>
          </td>
 	</tr>
	
	<tr>
	  <td valign="top">May 25  - 29 May </td>
	  
	  <td valign="top" align="center">19</td>
	  
	  <td valign="top"><a href="#2">Problems compiling
	      FreeBSD stable</a></td>
  	</tr>
	
	<tr>
	  <td valign="top">May 24 - May 26</td>
	  
	  <td valign="top" align="center">10</td>
	  
	  <td valign="top"><a href="#3">4-stable won't boot</a></td>
	</tr>
	
	<tr>
	  <td valign="top">May 23 - May 23 </td>
	  
	  <td valign="top" align="center">1</td>
	  
	  <td valign="top"><a href="#4">solved Re: spontaneous
              reboots</a></td>
 	</tr>

	<tr>
	  <td valign="top">May 26 - May 27 </td>
	  
	  <td valign="top" align="center">5</td>
	  
	  <td valign="top"><a href="#5">making 4.0 DOS resistant</a>
          </td>
 	</tr>
	
	<tr>
	  <td valign="top">May 23 - May 23</td>
	  
	  <td valign="top" align="center">2</td>
	  
	  <td valign="top"><a href="#6">Problems with NFS on
	      FreeBSD 4.0</a></td>
 	</tr>
	
	<tr>
	  <td valign="top">May 27 - May 29</td>
	  
	  <td valign="top" align="center">3</td>
	  
	  <td valign="top"><a href="#7">Strange message</a></td>
 	</tr> 	

	<tr>
	  <td valign="top">May 24 - May 27</td>
	  
	  <td valign="top" align="center">5</td>
	  
	  <td valign="top"><a href="#8">Transparent proxies and fetch
          </a></td>
  	</tr>
	
	<tr>
	  <td valign="top">May 23 - May 23</td>
	  
	  <td valign="top" align="center">6</td>
	  
	  <td valign="top"><a href="#9">tun0: Warning: CHAP 0x81 not
	      supported</a></td>
	</tr>

	<tr>
	  <td valign="top">May 23 - May 23</td>
	  
	  <td valign="top" align="center">4</td>
	  
	  <td valign="top"><a href="#10">Re: -CURRENT Mylex on stable?
	  </a></td>
	</tr>
    
	<tr>
	  <td valign="top">May 24 - May 25</td>
	  
	  <td valign="top" align="center">7</td>
	  
	  <td valign="top"><a href="#11">ntpdate could not sync time
	      from any server</a></td>
 	</tr>

	<tr>
	  <td valign="top">May 25 - May 26</td>
	  
	  <td valign="top" align="center">4</td>
	  
	  <td valign="top"><a href="#12">3DNow! binutils & Mesa
	      for -STABLE</a></td>
  	</tr>
      </tbody>
    </table>


    <!-- 1 -->         

    <hr noshade>

    <h3><a name="1"></a>May 23 - May 27 (20 posts): <a href="http://docs.freebsd.org/cgi/getmsg.cgi?fetch=186801+0+archive/2000/freebsd-stable/20000528.freebsd-stable">Re: ad0 drivers revisited</a></h3>
    <p><a href="http://docs.freebsd.org/cgi/getmsg.cgi?fetch=581706+0+archive/2000/freebsd-stable/20000521.freebsd-stable">Last week's thought-provoking debate</a>
       continued this week; the discussion focused on a a few possible
       workarounds for circumventing the well-known ad driver bug 
       early in the booting process. It seems that an effective
       solution has not still been implemented. However, a number of
       interesting suggestions were offered.</p> 

    <p>The point is that, in order to prevent any HD damage, PIO mode
       should be set by default very early at boot time. Albeit the
       bug only manifests itself in the worst form in a very limited
       number of cases -- ie rather special combinations of hardware
       components -- when it does, it does ...</p>      

    <!-- 2 -->
    
    <hr noshade>

    <h3><a name="2"></a>May 25 - May 29 (19 posts): <a href="http://docs.freebsd.org/cgi/getmsg.cgi?fetch=388467+0+archive/2000freebsd-stable/20000528.freebsd-stable">Problems compiling FreeBSD stable</a></h3>

    <p>On May 25, 2000, <a href="mailto:grm@cequrux.com">[Graham Wheeler]</a>
       met a number of errors in the make world process while compiling
       gcc. After some experimentation, he got rid of them by using the
       "i" option for make. He seems to be the only person in the forum
       to have found these errors; probably, they were caused by an 
       incorrect updating procedure.</p>

    <p>Although the problems were soon easily solved, several fine 
      points were hinted at in this thread: in particular, such a
      secondary specific procedure as "make includes", which is
      (usually) relevant to -CURRENT.</p>           
         
    <!-- 3 -->

    <hr noshade>

    <h3><a name="3"></a>May 24 - May 26 (10 posts):  <a href="http://docs.freebsd.org/cgi/getmsg.cgi?fetch=364465+0+archive/2000/freebsd-stable/20000528.freebsd-stable">4-stable won't boot</a></h3>

    <p>The boot problem in question turned out to be trivial: the ata
       device was commented out (!) in the kernel configuration file.
    </p>      

    <p>The correspondents, subsequently, went on to describe their
       experience with such dangerous options as AUTO_EOI_1 and
       AUTO_EOI_2.       

    <!-- 4 -->


    <hr noshade>

    <h3><a name="4"></a>May 23 - May 23 (1 posts): <a href="http://docs.freebsd.org/cgi/getmsg.cgi?fetch=211433+0+archive/2000/freebsd-stable/20000528.freebsd-stable">solved Re: spontaneous reboots</a></h3>

    <p>On May 23, 2000,
      <a href="mailto:fritz.heinrichmeyer@FernUni-Hagen.de">[Fritz
       Heinrichmeyer]</a> announced that he had solved his spontaneous
       reboot problem by upgrading to -STABLE -- the SMP cleanups
       seemed to require a recompilation.</p>        

    <p>Incidentally, I have read about spontaneous reboots a good number
       of times in the FreeBSD mailing lists. The most common cause is 
       bad hardware; sometimes, as in the present situation, the cause
       is of software nature. Upgrading to -STABLE, as is very often the
       case, is the solution to that vexed question.</p>

    <p>On May, 29, however, Fritz wrote again. Other spontaneous
       reboots, in fact, occurred a few days later. Also,
       <a href="mailto:mi@privatelabs.com">[MI]</a> reported on the
       same matter -- MI, too, has been running SMP boards.         
       This anomalous behavio(ur) seems to be specifically related to
       the SMP code, and is currently under investigation.  

      <!-- 5 -->

   <hr noshade>

    <h3><a name="5"></a>May 26 - May 27 (5 posts): <a href="http://docs.freebsd.org/cgi/getmsg.cgi?fetch=589593+0+archive/2000/freebsd-stable/20000528.freebsd-stable">making 4.0 DOS resistant</a></h3>
    <p><a href="mailto:manek@ecst.csuchico.edu">[Sameer R.Manek]</a>
       was seeking information about FreeBSD strategies for handling 
       DOS attacks.</p>  

    <p><a href="mailto:billf#chc-chimes.com">[Bill Fumerola]</a>
       pointed out that such options as ICMP_BANDLIM,
       TCP_DROP_SYNFIN, and TCP_RESTRICT_RST, albeit useful in fighting
       DOS attacks (e.g. attacks on IRC servers), cannot cope with 
       spoofed ip syn floods. In particular, Bill is going to publish 
       some (on-line) material about DOS attacks at large:
    </p>          

    <blockquote>
      <p><i>stay tuned...  though I'll probably post my 
          findings/suggestions on -security when I finally write 
          them up.</i></p>
    </blockquote>

    <!-- 6 -->
 
    <hr noshade>

    <h3><a name="6"></a>May 23 - May 23 (2 posts): <a href="http://docs.freebsd.org/cgi/getmsg.cgi?fetch=201701+0+archive/2000/freebsd-stable/20000528.freebsd-stable">Problems with NFS on FreeBSD 4.0</a></h3>
    <p><a href="mailto:pahowes@fair-ware.com">[Paul A. Howes]</a> ,
      answering a letter of <a href="mailto:tolyar@mx.ru">[Zherdev
      Anatoly]</a>'s, suggested a procedure for installing ports over
      a network:</p>

    <blockquote>
      <p><i>What I usually do is perform the first-time build and
          install on the server. Then, when I need one of the 
          applications in /usr/ports on a different system, I 
          NFS-mount /usr/ports and perform a "make reinstall" to get
          the application installed, but not built from scratch, on
          the client.</i></p>
    </blockquote> 

    <blockquote>
      <p><i>I do it this way, because I had been alerted to 
          permission problems in the building of various components. 
          It's just simpler to do all of the builds on a server, and 
          only do the installs on the client.  Besides, my server is
          a faster machine than the clients I have, so builds go
          MUCH faster on it.</i></p>
    </blockquote> 

    <!-- 7 -->


    <hr noshade>

    <h3><a name="7"></a>May 27 - May 29 (3 posts): <a href="http://docs.freebsd.org/cgi/getmsg.cgi?fetch=609334+0+archive/2000/freebsd-stable/20000528.freebsd-stable">Strange message</a></h3>
    <p><a href="mailto:dlt@mebtel.net">[Derek Tattersall]</a> wrote: 
    </p>

    <blockquote>
      <p><i>I am getting a message shortly after boot-up finishes which puzzles me.
          The message follows:</i></p>
      <pre>   lorne /kernel: arplookup 0.0.0.0 failed: host is not on local network.</pre>
    </blockquote>
   

    <p><a href="mailto:a9404849@unet.univie.ac.at">[Lucas Ertl]</a> 
       replied:
    </p>     

    <blockquote>
      <p><i>I had almost the same message here, but it was host 
          13.10.15.10 instead of 0.0.0.0. The problem was a program
          called "LanGuard", installed on the Win2k box of one of my
          co-workers, that continously sent out arp requests but spoofed
          the MAC address of the machines NIC.</i></p>

      <p><i>You could try:</i></p>

    <pre>   tcpdump -n -e -p arp</pre>

    <p><i>and then hunt down the MAC address.</i></p>
    </blockquote>

    <!-- 8 -->
    
    <hr noshade>

    <h3><a name="8"></a>May 24 - May 27 (5 posts): <a href="http://docs.freebsd.org/cgi/getmsg.cgi?fetch=357928+0+archive/2000/freebsd-stable/20000528.freebsd-stable">Transparent proxies and fetch</a></h3>
    <p><a href="mailto:shevlandj@kpi.com.au">[Joe Shevland]</a> found
       this error:</p> 
    
    <pre>      Attempting to fetch from http://people.FreeBSD.org/~andreas/download/.
      fetch: empty reply from people.FreeBSD.org</pre>
    
    <p>Both the stable forum and the c.u.b.f.m. newsgroup provided him
       with the long sought-after answer:</p> 

    <blockquote>
      <p><i>Try</i></p>
    </blockquote>
      <pre>      "make FETCH_BEFORE_ARGS=-tb"</pre>
    <blockquote>
      <p><i>or add</i></p>
    </blockquote> 
      <pre>      "FETCH_BEFORE_ARGS=-tb"</pre>
    <blockquote>
      <p><i>to</i></p>
    </blockquote>  
      <pre>      /etc/make.conf.</pre>

    <!-- 9 -->

    <hr noshade>

    <h3><a name="9"></a>May 23 - May 23 (6 posts):  <a href="http://docs.freebsd.org/cgi/getmsg.cgi?fetch=220423+0+archive/2000/freebsd-stable/20000528.freebsd-stable">tun0: Warning: CHAP 0x81 not supported</a></h3>

    <p>After setting up a pptp vpn (using pptp client from ports), 
       <a href="mailto:mwlucas@blackhelicopters.org">[Michael Lucas]</a>
       read these messages while trying to connect:</p>
    
    <pre>      May 23 10:02:24 proxybox (unknown)[2067]: log[pptp_dispatch_ctrl_packet:pptp_ctrl.c:531]: 
      Client connection established.
      May 23 10:02:25 proxybox (unknown)[2067]: log[pptp_dispatch_ctrl_packet:pptp_ctrl.c:637]:
      Outgoing call established.
      May 23 10:02:28 proxybox ppp[2065]: tun0: Warning: CHAP 0x81 not supported</pre>

    <p><a href="mailto:brian@Aufulhak.org">[Brian Somers]</a> responded:
    </p>

    <blockquote>
      <p><i>This (CHAP 0x81) is M$CHAPv2.  An implementation will be 
          committed to -current RSN. The work has been done by 
          <a href="mailto:binkertn@umich.edu">[Nathan Binkert]</a></i>
      </p>
   </blockquote>

    <!-- 10 -->

    <hr noshade>

    <h3><a name="10"></a>May 22 - May 23 (4 posts): <a href="http://docs.freebsd.org/cgi/getmsg.cgi?fetch=161774+0+archive/2000/freebsd-stable/20000528.freebsd-stable">Re: -CURRENT Mylex on stable?</a></h3>
    <p><a href="mailto:">[Shawn Barnhart]</a> asked for the diffs
    making Mylex work under -STABLE.</p>
    <p><a href="mailto:@">[Mike Smith]</a> rejoined:</p>

    <blockquote>
      <p><i>1) Get the diffs.</i></p>
      <p><i>You will need a CVS repository, or use the cvsweb interface
          at http://www.freebsd.org/cgi/cvsweb.cgi to extract the diffs.
          Note that mlx.c, mlx_disk.c, mlx_pci.c and mlxvar.h all
          changed in this fix.</i></p>
      <p><i>2) Apply the diffs.</i></p>
    </blockquote>
   
    <p>Shawn Barnhart:</p>
    <blockquote>
      <p><i>I'm missing where the end result of diff/patch differs from
          the files themselves.  It's a nice exercise, but kind of a 
          PITA when you're not a CVS user.</i></p>
    </blockquote>

   <p>Mike Smith:</p>
    <blockquote>
      <p><i>The goal is to extract the changes I made to portions of the
          driver that are largely common between the two versions.</i>
      </p>
    </blockquote>

    <!-- 11 -->

    <hr noshade>

    <h3><a name="11"></a>May 24 - May 25 (7 posts): <a href="http://docs.freebsd.org/cgi/getmsg.cgi?fetch=313183+0+archive/2000/freebsd-stable/20000528.freebsd-stable">ntpdate could not sync time from any server</a></h3>

    <p><a href="mailto:lev@imc.macro.ru">[Lev Serebryakov]</a> could not
       syncronize time on his homebox via ntpdate over a V.90
       connection.

    <p>On the same wavelenght, complaining about ntpdate not
       syncing over a DSL line, 
       <a href="mailto:ggross@symark.com">[Glen Gross]</a> added:</p>

    <blockquote>
       <p><i>I have had the same experience, with a DSL line.  I don't
           know if ntpdate requires the time to be within a certain 
           threshold before it will sync or not.<br> 
           Does anyone know the answer to this?</i></p> 
    </blockquote>

    <p><a href="mailto:smithi@nimnet.asm.au">[Ian Smith]</a>
       replied:</p>
    
    <blockquote>
      <p><i>Yes, it does; -t sets the time ntpdate will wait for a valid
          response. Still get one of these logged once every few days 
          when upstream PPP link is extra heavily used, but used to get
          it much more often before using:</i></p>
    </blockquote>
      <pre>      ntpdate -t 2.4 -s ntp.ml.csiro.au ntp.cs.mu.oz.au judge.lis.net.au</pre>
    <blockquote>
      <p><i>That's 2.4 seconds.  man ntpdate isn't exactly clear re the
         unit format, but it does say that the default of 1 second is
         suitable for a LAN.</i></p>
    </blockquote> 

    <!-- 12 -->
  
    <hr noshade>

    <h3><a name="12"></a>May 25 - May 26 (4 posts): <a href="http://docs.freebsd.org/cgi/getmsg.cgi?fetch=501697+0+archive/2000/freebsd-stable/20000528.freebsd-stable">3DNow! binutils & Mesa for -STABLE</a></h3>

    <p><a href="mailto:aa8vb@nc.rr.com">[Randall Hopper]</a>
        posted the following message:</p>

    <blockquote>
       <p><i>Thanks to David O'Brien for upgrading -current's binutils.
           This new version supports AMD 3DNow! for the K6-2, K6-III, 
           and Athelon folks.</i></p>
       <p><i>Wanting 3DNow support in gas, I pulled a copy from CVS and
           built it for 3.4-RELEASE (w/ gdb commented out). Now Mesa 
           and friends detect and build in 3DNow support for Mesa on 
           -stable.</i></p>
       <p><i>For other -stable folks that want to give it a shot, just
           fetch copies of src/contrib/binutils and src/gnu/usr.bin/binutils
           modules from the latest CVS</i></p>
    </blockquote>
       <pre>   ("cvs checkout &lt;module&gt;").</pre>
    <blockquote>
       <p><i>Also, I'll be happy to send binutils exec binaries to 
           anyone running 3.4.</i></p>
    </blockquote>

    <p><a href="mailto:wkb@chello.nl">[Wilko Bulte]</a> asked:</p>

    <blockquote>
      <p><i>Do thinks like fxtv use 3dnow to their advantage (I guess
          not)? But I assume the various mpeg* things might?</i></p>
    </blockquote>

   <p><a href="mailto:aa8vb@nc.rr.com">[Randall Hopper]</a> remarked:
   </p>

    <blockquote>
      <p><i>No fxtv doesn't, and I think you're right.  As I recall MMX
          adds SIMD integer ops which is where the boost would be for 
          things like pixel repacking. 3DNow's primary add was parallel
          floating/fixed point I believe.</i></p>
      <p><i>Rather than reinvent the wheel, I'll likely stack fxtv on
          the hermes port one of these days if there isn't a big 
          turn-out for an alternative video API.</i></p>
    </blockquote>

    <hr noshade>


    <ul> 
      <li>
	<p>The present Conspectus expresses my strictly personal 
	  understanding of what occurred on the FreeBSD-stable mailing
	  list during the specified week.</p>
	
      <li>                     
	<p>I may have made errors and/or mistakes as well as typos. 
	  If you feel that this is indeed the case, and/or that I have
	  omitted some significant thread or part of a thread, feel free
	  to contact me via email. Constructive criticism is more than
	  welcome.</p>
    </ul>
    
    <p align="right"><a href="mailto:bartequi@neomedia.it">Salvo
	Bartolotta</a></p>
    
     &footer;
  </body> 
</html>

<!-- 
     Local Variables:
     mode: sgml
     sgml-indent-data: t
     sgml-omittag: nil
     sgml-always-quote-attributes: t
     End:
-->
