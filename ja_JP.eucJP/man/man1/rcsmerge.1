.\" $FreeBSD$
.de Id
.ds Rv \\$3
.ds Dt \\$4
..
.Id %FreeBSD: src/gnu/usr.bin/rcs/rcsmerge/rcsmerge.1,v 1.5 1999/08/27 23:36:58 peter Exp %
.ds r \&\s-1RCS\s0
.if n .ds - \%--
.if t .ds - \(em
.TH RCSMERGE 1 \*(Dt GNU
.SH 名称
rcsmerge \- RCS ファイルのリビジョンを併合する
.SH 書式
.B rcsmerge
.RI [ options ] " file"
.SH 解説
.B rcsmerge
は \*r の 2 つのリビジョン間の変更点を対応するワークファイルに適用します。
.PP
\*r 拡張子にマッチするパス名は \*r ファイルであるとみなし、
その他はワークファイルであるとみなします。
名前の対応については
.BR ci (1)
を参照してください。
.PP
後述するオプション(通常は
.B -r
)によって、少なくとも1つのリビジョンを指定する必要があります。
最大で 2 つのリビジョンを指定することができます。
1 つのリビジョンのみが指定された場合、もう1つのリビジョンとして、
デフォルト枝(通常は幹で最大の番号を持つ枝) の最新リビジョンが用いられます。
リビジョンは、数字またはシンボルで指定できます。
.PP
もし重複が発生すると、
.B rcsmerge
は警告メッセージを表示し、重複した領域
を
.BR merge (1)
で説明されているような形式で出力します。
本コマンドはチェックアウトしたリビジョンに一連の変更を加えるのに便利です。
.SH オプション
.TP
.B \-A
もしサポートされていれば、
.BR diff3 (1)
の
.B \-A
スタイルで矛盾点を出力します。
.I file2
から
.I file3
への変更点全てを
.IR file1
に適用し、大変詳細な情報を出力します。
.TP
\f3\-E\fP, \f3\-e\fP
これらは、
.BR \-A
よりも情報量が少ない形式で矛盾点を出力するスタイルを指定するものです。
詳細は
.BR diff3 (1)
を参照して下さい。
デフォルトは
.BR \-E
です。
.BR \-e
を指定すると、
.B rcsmerge
は矛盾点の警告を行ないません。
.TP
.BI \-k subst
キーワード置換において、
.I subst
で指定された形式を用います。詳細は
.BR co (1)
を参照してください。例えば、
.B "\-kk\ \-r1.1\ \-r1.2"
は
.B 1.1
から
.B 1.2
への変更を併合する際に、キーワードの違いを無視します。
バイナリファイルをテキストであるかのようにリビジョン併合することは、普通、
意味を持ちません。
ですから
.B rcsmerge
は
.B \-kb
が指定されているとファイルのリビジョン併合を行ないません。
.TP
.BR \-p [\f2rev\fP]
結果をワークファイルに上書きせずに、標準出力に書き出します。
.TP
.BR \-q [\f2rev\fP]
静かに動作します。診断メッセージは表示されません。
.TP
.BR \-r [\f2rev\fP]
リビジョン
.I rev
に関して併合を行います。
.I rev
を指定しない場合は、デフォルト枝の最新リビジョン(通常は先頭)を使用します。
.TP
.B \-T
このオプションは意味を持ちません。
他の \*r コマンドとの互換性のために存在します。
.TP
.BI \-V
\*r のバージョン番号を表示します。
.TP
.BI \-V n
\*r システムのバージョン
.I n
のエミュレーションを行います。詳細は
.BR co (1)
を参照してください。
.TP
.BI \-x "suffixes"
\*r ファイル拡張子を
.I suffixes
とします。詳しくは
.BR ci (1)
を参照してください。
.TP
.BI \-z zone
キーワード置換時のタイムゾーンを
.I zone
とします。詳しくは
.BR co (1)
を参照してください。
.SH 使用例
すでにリリースしたリビジョン 2.8 の
.B f.c
というファイルがあるとします。
ここで、まだリリースしていないリビジョン 3.4 が完成したときに、
他人から 2.8 を改良したものを受けとったとします。
この改良と、あなたが 2.8 から 3.4 の間に行った変更を併合するには
次のようにします。
.LP
.B "    rcsmerge  \-p  \-r2.8  \-r3.4  f.c  >f.merged.c"
.PP
ここで、併合された
.B f.merged.c
を検査します。
もし、2.8 に対する更新部分を \*r ファイル中に保存しておきたいと考えるなら、
それを 2.8.1.1 というリビジョンでチェックインし、その後で
.BR "co \-j"
を実行します。
.LP
.B "    ci  \-r2.8.1.1  f.c"
.br
.B "    co  \-r3.4  \-j2.8:2.8.1.1  f.c"
.PP
別の例として、以下のコマンドはリビジョン 2.4 から 2.8 への変更をすでに
チェックアウトいるワークファイル
.B f.c
から取り消します。
.LP
.B "    rcsmerge  \-r2.8  \-r2.4  f.c"
.PP
指定するリビジョン番号の順番に注意してください。また、
.B f.c
が上書きされ
ることにも注意してください。
.SH 環境変数
.TP
.B \s-1RCSINIT\s0
コマンドライン引数に先立って指定すべきオプションを空白で区切って指定します。
詳しくは
.BR ci (1)
を参照してください。
.SH 診断
併合によって重複が生じなければ終了ステータス 0 を、重複があれば 1 を、
問題が発生した場合は 2 を返します。
.SH 作者
Author: Walter F. Tichy.
.br
Manual Page Revision: \*(Rv; Release Date: \*(Dt.
.br
Copyright \(co 1982, 1988, 1989 Walter F. Tichy.
.br
Copyright \(co 1990, 1991, 1992, 1993, 1994, 1995 Paul Eggert.
.SH 関連項目
ci(1), co(1), ident(1), merge(1), rcs(1), rcsdiff(1), rcsintro(1), rlog(1),
rcsfile(5)
.br
Walter F. Tichy,
\*r\*-A System for Version Control,
.I "Software\*-Practice & Experience"
.BR 15 ,
7 (July 1985), 637-654.
.br
