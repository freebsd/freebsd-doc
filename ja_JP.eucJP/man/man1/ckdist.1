.\" Copyright (c) 1997 Robert Nordier
.\" All rights reserved.
.\"
.\" %FreeBSD: src/usr.sbin/ckdist/ckdist.1,v 1.2.2.2 1999/08/29 15:40:22 peter Exp %
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR(S) ``AS IS'' AND ANY EXPRESS
.\" OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
.\" WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
.\" DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR(S) BE LIABLE FOR ANY DIRECT,
.\" INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
.\" (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
.\" SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
.\" STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
.\" IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
.\" POSSIBILITY OF SUCH DAMAGE.
.\"
.\" jpman %Id: ckdist.1,v 1.3 1998/10/14 21:15:47 horikawa Stab %
.Dd January 20, 1997
.Dt CKDIST 1
.Os
.Sh 名称
.Nm ckdist
.Nd ソフトウェアディストリビューションの検査
.Sh 書式
.Nm ckdist
.Bq Fl airsx
.Bq Fl d Ar dir
.Bq Fl n Ar name
.Bq Fl t Ar type
.Ar
.Sh 解説
.Nm
ユーティリティは「チェックサム」ファイルを読みます
(このファイルはソフトウェアディストリビューションの構成要素を
正確に特定していると仮定しています)。次に、このコマンドは、それぞれ
の構成ファイルのチェックサムを検証することでディストリビューション
が完全なことを証明します。MD5 (128 ビットの「メッセージの要約」) および
(32 ビット CRC) チェックサムフォーマットである .inf の両方を利用することが
出来ます。
.Pp
演算項である
.Ar file
は通常ファイルかディレクトリを参照することが許されます。
ファイル名が "md5" か、拡張子が ".md5" や ".inf" である通常ファイルは、
それぞれの名称が示すタイプのファイルであると想定されます。
これら以外の場合には、フォーマットはその内容により決められます。
ディレクトリが指定された場合には、そのディレクトリを検索して、適切な
名前のファイルだけを探します。
.Pp
オプションは次のようになります:
.Bl -tag -width 8n -offset indent
.It Fl a
何のエラーが検出されたか、だけでなく、ディストリビューションの
すべての構成要素について報告を行います。
.It Fl i
ディストリビューションの構成要素で存在しないものは、無視します。
.It Fl r
指定されたディレクトリを再帰的に探索します。
.It Fl s
アクセス出来ないチェックサムファイルやディレクトリに
ついてのメッセージを抑止します。
.It Fl x
ディストリビューションの構成要素が存在していることを
検証します。(そして又、.inf ファイルの場合にはファイルの
大きさを検査します)。しかし、実際にチェックサムを計算
して比較する、時間のかかる段階は、省略します。
.It Fl d Ar dir
ディストリビューションの構成要素をこの
.Ar dir
ディレクトリの中で
探します。
.It Fl n Ar name
.Ar name
というファイル名を用いてディストリビューションの
構成要素を探します。.inf 拡張子のファイル構成要素にアクセス
するときはファイル名に適切な拡張子を付け加えます。
.It Fl t Ar type
すべての指定されたチェックサムファイルは、フォーマットが
.Ar type
であると仮定します。このフォーマットのファイルだけを探して、
ディレクトリを検索します。(このフォーマットの
.Ar type
は "md5" か "inf" のいずれかです)。
.El
.Sh 関連項目
.Xr cksum 1 ,
.Xr md5 1
.Sh 診断
エラーが 1 つも検出されなければ、終了ステータスは 0 になります。
ディストリビューションにエラーが発見された場合には、終了ステータスは 1 に
なります。使用上の誤りや、アクセスできない入力ファイル、または、
システムに関わる他のエラーに遭遇した時は、終了ステータスは 2 になります。
.Sh 注
.Nm
の BSD 及び DOS バージョンが、利用できます。
