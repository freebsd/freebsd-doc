.\" $FreeBSD$
.\" WORD: truncate	(小数で)切り捨てる[POSIX],切り詰める
.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.14
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "AR 1"
.TH AR 1 "2004-04-09" "binutils-2.14.91" "GNU Development Tools"
.SH 名称
ar \- アーカイブの作成、更新、および、アーカイブからの抽出
.SH 書式
.IX Header "SYNOPSIS"
ar [\fB\-X32_64\fR] [\fB\-\fR]\fIp\fR[\fImod\fR [\fIrelpos\fR] [\fIcount\fR]] \fIarchive\fR [\fImember\fR...]
.SH 解説
.IX Header "DESCRIPTION"
\s-1GNU\s0
\fBar\fR
プログラムは、アーカイブの作成、更新、および、アーカイブからの抽出を
行ないます。
\fIアーカイブ\fR
とは、オリジナルのファイル (アーカイブの
\fIメンバ\fR
と呼びます) を復元できるような構造で、他のファイル群の集合を保持する
ような一つのファイルです。
.PP
元のファイルの内容、モード (パーミッション)、タイムスタンプ、所有者、
グループの情報はアーカイブ内でも保存され、ファイル抽出時には復元
されます。
.PP
\s-1GNU\s0
\fBar\fR
では、メンバファイルのファイル名の長さには制限はありませんが、システム
の設定によっては (他のツールで管理されるアーカイブファイルの形式との
互換性のために) メンバファイルのファイル名の長さに制限がある場合があります。
制限がある場合は、多くの場合 15 文字 (a.out 関連のファイル形式が代表的) か、
16 文字 (coff 関連のファイル形式が代表的) に制限されます。
.PP
この種類のアーカイブは、共有のサブルーチンを保持する
\fIライブラリ\fR
として
利用されることが多いため、
\fBar\fR
はバイナリユーティリティと考えられます。
.PP
\fBs\fR
修飾子を指定した場合、
\fBar\fR
はアーカイブ内のリロケータブルオブジェクトで定義されたシンボル
のインデックスを作成します。
一度作成されたインデックスは、
\fBar\fR
がアーカイブの内容を変更するときには必ず更新されます (ただし
\fBq\fR
オプション指定時は更新されません)。
このようなインデックスを持つ
アーカイブを用いることによって、ライブラリのリンクが高速化されたり、
ライブラリ内のルーチンがアーカイブ内の配置にかかわらず、互いを呼び出す
ことができるようになります。
.PP
\fBnm \-s\fR
または
\fBnm \-\-print\-armap\fR
によって、このインデックステーブルを表示することができます。
もし、アーカイブにインデックステーブルが含まれていない場合は、
\fBranlib\fR
と呼ばれる、もう一つの形式の
\fBar\fR
を用いてテーブルだけを追加することができます。
.PP
\s-1GNU\s0 \fBar\fR
は、別の 2 種類の機構と互換であるようにデザインされています。
Unix システムの
\fBar\fR
のようにコマンド行オプションで動作を制御できますし、
単一のコマンド行オプション
\fB\-M\fR
を指定することで、
\s-1MRI\s0 ``librarian'' プログラムのような
標準入力から提供されるスクリプトでも制御できます。
.SH オプション
.IX Header "OPTIONS"
\&\s-1GNU\s0 \fBar\fR は最初のコマンド行オプションとして、
オペレーションコード \fIp\fR と、修飾子 \fImod\fR
を任意の順序で組み合わせたものを受け付けます。
.PP
最初のオプションの先頭にダッシュ(ハイフン)をつけることもできます。
.PP
キー文字 \fIp\fR は、どのオペレーションを実行するかを指定します。
キー文字としては以下のいずれか一つだけを指定することができます。
.IP "\fBd\fR" 4
.IX Item "d"
アーカイブからモジュールを
\fI削除\fR
します。
削除するモジュール名を 
\fImember\fR...
として指定して下さい。
ファイル名を指定しなければアーカイブは変更されません。
.Sp
\fBv\fR
修飾子を指定した時には、
\fBar\fR
は削除する際にそのモジュール名を表示します。
.IP "\fBm\fR" 4
.IX Item "m"
メンバをアーカイブ内で\fI移動\fRします。
.Sp
あるシンボルが複数のメンバで定義されている場合は、アーカイブ内でのメンバの
順序によって、プログラムがライブラリをリンクした結果が異なることが
あります。
.Sp
\f(CW\*(C`m\*(C'\fR
に修飾子が指定されなかった場合は 
\fImember\fR
引数で指定したメンバはアーカイブの
\fI最後\fR
に移動されます。
\fBa\fR,
\fBb\fR,
\fBi\fR
修飾子を指定することによって、修飾子に応じた場所に移動します。
.IP "\fBp\fR" 4
.IX Item "p"
アーカイブ内の指定されたメンバを標準出力に
\fI出力\fR
します。
\fBv\fR
修飾子が指定されたときは、メンバの内容を出力する前にメンバ名を出力
します。
.Sp
\fImember\fR 引数
を指定しなければ、アーカイブ内のすべてのファイルが出力されます。
.IP "\fBq\fR" 4
.IX Item "q"
\fIクイックアペンド\fR。
歴史的には、\fImember\fR で指定されたファイルを、重複をチェックせずに
\&\fIアーカイブ\fR の末尾に追加します。
.Sp
\&\fBa\fR, \fBb\fR, \fBi\fR 修飾子はこのオペレーションには
\&\fI影響しません\fR。
新たなメンバは常にアーカイブの末尾に置かれます。
.Sp
\fBv\fR
修飾子を指定すると、
\fBar\fR
は追加の際にそのファイル名を出力します。
.Sp
このオペレーションの特徴は動作速度ですので、たとえ
シンボルテーブルのインデックスが存在したとしても、それを更新しません。
シンボルテーブルのインデックスを更新するには、明示的に
\fBar s\fR
か
\fBranlib\fR
を使って下さい。
.Sp
しかしながら、多くの異なるシステムにおいてクイックアペンドが
インデックスを再構築することが仮定されていますので、
\s-1GNU\s0
ar
は
\fBq\fR
は
\fBr\fR
と同じ動作をするように実装しています。
.IP "\fBr\fR" 4
.IX Item "r"
ファイル
\fImember\fR...
をアーカイブに挿入 (重複の際は
\fI置換\fR) します。
このオペレーションは
\fBq\fR
とは異なり、追加するファイルと同名のメンバがすでに存在する
場合は削除されます。
.Sp
もし 
\fImember\fR...
で指定したファイルの中に存在しないものが一つでも含まれている場合は
\fBar\fR
はエラーメッセージを出力し、そのファイル名と同名のメンバは変更
されずに保存されます。
.Sp
デフォルトでは新しいメンバはファイルの末尾に追加されますが、
\fBa\fR,
\fBb\fR,
\fBi\fR
修飾子を指定することにより、既存のメンバに対する相対的な位置関係を
指定することができます。
.Sp
このオペレーションに
\fBv\fR
修飾子を指定すると、挿入された各ファイルに対して、ファイルが追加
された (削除された古いメンバがない) か、置換されたかを示す
\fBa\fR
または
\fBr\fR
のどちらかを含んだ一行が出力されます。
.IP "\fBt\fR" 4
.IX Item "t"
\fIアーカイブ\fR
の内容、または 
\fImember\fR...
に列挙されたファイルのうち、アーカイブ内に存在するものの
\fI一覧\fR
を出力します。
通常はメンバ名だけを表示しますが、
\fBv\fR
修飾子を指定することにより、モード (パーミッション)、タイムスタンプ、
所有者、グループ、サイズも表示します。
.Sp
\fImember\fR
の指定がない場合はアーカイブ内のすべてのファイルの一覧を表示します。
.Sp
あるアーカイブ (
\fBb.a\fR
とします) の中に同じ名前 (
\fBfie\fR
とします) の複数のファイルが存在する場合は、
\fBar t b.a fie\fR
は最初のファイルだけを表示します。
同名のファイルをすべて見たい場合
はすべてのファイルの一覧を表示して下さい。
この例では 
\fBar t b.a\fR
です。
.IP "\fBx\fR" 4
.IX Item "x"
アーカイブから 
\fIfiles\fR
で指定されたメンバを
\fI抽出\fR
します。
\fBv\fR
修飾子を指定すると、
\fBar\fR
は抽出の際にそのファイル名を出力します。
.Sp
\fImember\fR
の指定がない場合はアーカイブ内のすべてのファイルを抽出します。
.PP
いくつかの修飾子 (
\fImod\fR) をキー文字 
\fIp\fR
の直後に付けることによって、オペレーションの動作を変更する
ことができます。
.IP "\fBa\fR" 4
.IX Item "a"
新しいファイルを既存のメンバの
\fI後\fR
に追加します。
\fBa\fR
修飾子を用いるときは、
\fIarchive\fR
引数の前に
\fIrelpos\fR
引数として既存のメンバ名を指定する必要があります。
.IP "\fBb\fR" 4
.IX Item "b"
新しいファイルを既存のメンバの
\fI前\fR
に追加します。
\fBb\fR
修飾子を用いるときは、
\fIarchive\fR
引数の前に
\fIrelpos\fR
引数として既存のメンバの名前を指定する必要があります (
\fBi\fR と同じ)。
.IP "\fBc\fR" 4
.IX Item "c"
アーカイブを
\fI作成\fR
します。
存在しない
\fIアーカイブ\fR
を更新するように指定した場合、そのアーカイブは必ず作成されますが、
その際、この修飾子を指定することによって、アーカイブを作成することを
明示していなければ、警告を出力します。
.IP "\fBf\fR" 4
.IX Item "f"
アーカイブ内の名前を切り詰めます。
通常
\s-1GNU\s0 \fBar\fR
は任意の長さのファイル名を受け付けます。
このため、いくつかのシステム
で使われている従来の
\fBar\fR
と互換性のないアーカイブが作成されることになります。
これが問題になる
場合は、
\fBf\fR
修飾子を指定して、ファイルをアーカイブに追加する際にそのファイル名を
切り詰めることができます。
.IP "\fBi\fR" 4
.IX Item "i"
新しいファイルを既存のメンバの
\fI前\fR
に挿入します。
\fBi\fR
修飾子を用いる時は、
\fIarchive\fR
引数の前に
\fIrelpos\fR
引数として既存のメンバ名を指定する必要があります (
\fBb\fR
と同じ)。
.IP "\fBl\fR" 4
.IX Item "l"
この修飾子は指定可能ですが、使用されません。
.IP "\fBN\fR" 4
.IX Item "N"
\fIcount\fR
パラメータを使用します。
アーカイブに同一名のエントリが複数ある場合、これが使用されます。
指定した名前のインスタンス
\fIcount\fR
を、アーカイブから抽出または削除します。
.IP "\fBo\fR" 4
.IX Item "o"
メンバを抽出する際に
\fIオリジナル\fR
の時刻を保存します。
この修飾子を指定しないと、アーカイブから抽出
されたファイルのタイムスタンプは抽出時の時刻になります。
.IP "\fBP\fR" 4
.IX Item "P"
アーカイブ中の名前とマッチングを取るときに、フルパス名を使用します。
\s-1GNU\s0 \fBar\fR
はフルパス名のアーカイブ (このようなアーカイブは
\s-1POSIX\s-0
準拠ではありません)
を作成できませんが、他のアーカイブ作成器は可能です。
このオプションを使用すると、
\s-1GNU\s0 \fBar\fR
は完全なパス名を使用してファイル名のマッチングを行います。
他のツールで作成したアーカイブから 1 個のファイルを取り出す場合に有用でしょう。
.IP "\fBs\fR" 4
.IX Item "s"
アーカイブに他の変更がない場合でも、アーカイブにオブジェクトファイルの
インデックスを書き込んだり、既存のインデックスを更新します。
この修飾子は
ほかのオペレーションと併用することも、単独で使用することも可能です。
あるアーカイブに対して
\fBar s\fR
を実行することは、そのアーカイブに対して 
\fBranlib\fR
を実行することと等価です。
.IP "\fBS\fR" 4
.IX Item "S"
アーカイブのシンボルテーブルを作成しません。
これを用いると大きな
ライブラリを何回かに分けて作成する際に時間を短縮することができます。
この結果得られるアーカイブはリンカで使用することはできません。
シンボルテーブルを作成するためには最後に
\fBar\fR
を実行する時に 
\fBS\fR
修飾子を外すか、そのアーカイブに対して 
\fBranlib\fR
を実行する必要があります。
.IP "\fBu\fR" 4
.IX Item "u"
通常
\fBar r\fR...
は列挙されたファイルをすべてアーカイブに挿入します。
この修飾子を指定すると、指定したファイルが既存の同名のメンバより
新しい場合
\fIのみ\fR
ファイルを挿入します。
\fBu\fR
修飾子は 
\fBr\fR
(置換) オペレーションだけに付けることができます。
特に、タイムスタンプの確認は 
\fBq\fR
オペレーションの利点である速度を低下させるので、
\fBqu\fR
の組み合わせは認められません。
.IP "\fBv\fR" 4
.IX Item "v"
オペレーションに対して
\fI冗長\fR
な表示を要求します。
多くのオペレーションにおいて 
\fBv\fR
修飾子が指定されると、
処理されたファイル名などの付加的な情報が表示されます。
.IP "\fBV\fR" 4
.IX Item "V"
この修飾子は
\fBar\fR
のバージョン番号を表示します。
.PP
\&\fBar\fR は、最初のオプションが \fB\-X32_64\fR の場合これを無視します。
\s-1AIX\s0 との互換性のためです。
本オプション指定時の動作が \s-1GNU\s0 \fBar\fR デフォルトです。
\fBar\fR は他のいかなる \&\fB\-X\fR もサポートしません。
特に \s-1AIX\s0 \fBar\fR のデフォルトである \fB\-X32\fR はサポートしません。
.SH 関連項目
.IX Header "SEE ALSO"
\&\fInm\fR\|(1),
\fIranlib\fR\|(1),
Info の \fIbinutils\fR の項。
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
Copyright (c) 1991, 92, 93, 94, 95, 96, 97, 98, 99, 2000,
2001, 2002, 2003 Free Software Foundation, Inc.
.PP
Permission is granted to copy, distribute and/or modify this document
under the terms of the \s-1GNU\s0 Free Documentation License, Version 1.1
or any later version published by the Free Software Foundation;
with no Invariant Sections, with no Front-Cover Texts, and with no
Back-Cover Texts.  A copy of the license is included in the
section entitled ``\s-1GNU\s0 Free Documentation License''.
.\" .SH 履歴
.\" 奥村務 <oku@nml.t.u-tokyo.ac.jp>: 1998/09/13 FreeBSD 用に翻訳。
.\" 堀川和雄 <horikawa@jp.FreeBSD.org>: 2001/08/04 binutils 2.11.2 用に修正。
.\" 堀川和雄 <horikawa@jp.FreeBSD.org>: 2002/12/29 binutils 2.12.91 用に修正。
