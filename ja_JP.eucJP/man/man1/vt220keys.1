.\" %FreeBSD: src/usr.sbin/pcvt/userkeys/vt220keys.1,v 1.7.2.1 2001/01/17 09:19:21 ru Exp %
.\"
.\" jpman %Id: vt220keys.1,v 1.3 1997/07/22 18:00:12 horikawa Stab %
.Dd January 16, 2001
.Dt VT220KEYS 1
.Os
.Sh 名称
.Nm vt220keys
.Nd VT220 端末上のシフトファンクションキーを定義
.Sh 書式
.Nm
.Op Fl cil
.Op Ar keyname keystring ...
.Sh 解説
.Nm
は、ユーザにシフトファンクションキーを定義させるために、
vt200 モード中の
.Dq vt220 端末
を設定します。
コマンドラインで指定される各
.Ar keyname
は、特定の
.Ar keystring
がロードされます。
.Ar keyname
は、以下の語句のうちのどれかです:
.Cm F6 F7 F8 F9 F10 F11 ESC
.Cm F12 BS F13 LF F14 HELP
.Cm DO F17 F18 F19 F20
。
.Ar keystrings
は、空白やタブ、シェルのメタキャラクタを含む時には、クオートしなければ
なりません。
.Pp
.Nm
は、いくつかのオプションフラグの組み合わせや引数のペアを受け取ることを
期待しています。そうでない場合には、利用方法メッセージが表示されます。
.Pp
オプションは以下の通りです。
.Bl -tag -width indent
.It Fl c
ユーザによる定義を行う前に、全てのシフトファンクションキーの定義を
消去します。
.It Fl i
シフトファンクションキー定義のための初期化ファイル
.Pa $HOME/.vt220rc
を読み込みます。
これは、コマンドラインのどんな引数ペアを処理するよりも前に行われます。
このファイルの各行は、(空白かタブで
分けられた) 二つのフィールドから構成されていなければなりません。
最初のフィールドは
.Ar keyname
で、二番目のフィールドは 
.Ar keystring
です。
二番目のフィールドは行末まで続きます。したがって、
.Ar keystring
には空白やタブを含むかもしれません。
改行 (リターン) は、C 言語での改行表現 (\\n) を使うことで、文字列中に
含めることができます。
.It Fl l 
ファンクションキーを以降の定義からロックします。
ロックは、("i" オプションが指定されている時は、)初期化ファイルを
処理し、全ての引数ペアを処理した後で起こります。
ロックを解除するための唯一の方法は、電源を切ることです。
.El
.Sh 使用例
.Bd -literal
vt220keys -ci
vt220keys F6 'nroff -ms '
vt220keys -i F20 'cc -O -c '
vt220keys -l HELP man
.Ed
.Sh "その他の特徴"
シフトキーを使わずにファンクションキーを押すと、文字列を生成します。
.Xr csh 1
では、この文字列をいくつかのコマンドに別名づけ (エイリアス)
することができます。例えば以下のようにしてください。
.Pp
.Dl alias ^[[17~ "ls -CR | more"
.Pp
ここで、
.Ql "^[[17~"
は、 F6 キーを押したことによって生成された文字列です。
したがって、 F6 は、シフトキーを押すか、押さないかに依存して、
二つのコマンドを生成することができます。
.Pp
.Nm
は、
.Pa .login
や
.Pa .profile
から呼び出すことができます。
典型的には、ユーザ
は初期化ファイルを生成して、以下のようなコマンドで行を読み込みます。
.Pp
.Dl "vt220keys -ci"
.Pp
または、
.Pp
.Dl "vt220keys -cil"
.Pp
この方法では、シフトファンクションキーはログインした時にあなたの
好きなように設定されるでしょう。
.Sh 警告
シフトファンクションキーがロックされていない時には、
シフトファンクションキーの再定義は、以前の定義を上書きします。
.Pp
シフトファンクションキーには 256 バイトが利用可能です。
この領域は、最初に来たものに最初に与える方式で利用されます。
256 バイトが使われた後では、領域を解放しなければ他のキーを
定義することはできません。これは、より少ないバイトの文字列でキーを
再定義することで可能です。
.Pp
全てのキー定義は、 揮発性の RAM に記憶されます。したがって、端末の
電源を切った時にはその定義は失われます。
.Pp
(シフトを押さない) ESC キーはもはや正しいエスケープ文字を生成しません。
これは、たくさんのエディタが ESC キーの使用を要求するため、
特に重要です。ここでは、いくつかの利用可能な別の方法を紹介します。
.Bl -bullet
.It
エスケープ文字は、
.Ql ^[
(control\-[)
を入力することで生成できます。
.It
.Nm
を以下のように利用してください
(
.Ql ^[
は、control\-[ です):
.Dl "vt220keys ESC '^['"
.Pp
この方法では、エスケープ文字を生成するために、SHIFT キーと ESC キーを
押さなければなりません。
.It
いくつかのエディタでは、他の文字をエスケープ文字と置き換えることが
できます。例えば、
.Xr emacs 1
では以下の行をあなたの
.Pa .emacs_pro
に挿入してください。
.Pp
.Dl (bind-to-key "ESC-prefix" "\\033[23~")
.Pp
ESC キーが押された時、
.Nm emacs
は生成された文字列
.Pq Li ^[[23~
によって
エスケープ文字が押された時と同じ機能を提供します。
.El
.Sh 関連ファイル
.Bl -tag -width $HOME/.vt220rc
.It Pa $HOME/.vt220rc
初期化ファイル
.El
.Sh 関連項目
.Rs
.%B "VT220 Programmer Reference Manual"
.Re
.Rs
.%B "VT220 Programmer Pocket Guide"
.Re

