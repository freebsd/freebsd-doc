.\" Copyright (c) 1985, 1987, 1990, 1991, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	From: @(#)vacation.1	8.1 (Berkeley) 6/16/93
.\" %FreeBSD: src/usr.bin/vacation/vacation.1,v 1.10 2000/03/01 12:20:14 sheldonh Exp %
.\"
.\" jpman %Id: vacation.1,v 1.3 1997/08/19 03:07:07 h-nokubi Stab %
.\"
.Dd June 16, 1993
.Dt VACATION 1
.Os BSD 4.3
.Sh 名称
.Nm vacation
.Nd 不在の通知を返送する
.Sh 書式
.Nm vacation
.Op Fl d
.Fl i
.Op Fl r Ar interval
.Nm vacation
.Op Fl d
.Fl l
.Nm vacation
.Op Fl d
.Op Fl a Ar alias
.Ar login
.Sh 解説
.Nm vacation
は、メールの送信者に対して、あなたが現在メールを
読んでいない旨を通知するメッセージを返送します。通常、
.Pa .forward
ファイルの中で使われます。
例えば、あなたの
.Pa .forward
ファイルの中で次のように記述します。
.Bd -literal -offset indent
\eeric, "|/usr/bin/vacation -a allman eric"

.Ed
これで、あなた自身 (ここではログイン名が eric であるとします)
にメッセージを送るとともに、
.Dq eric
もしくは
.Dq allman
に宛てられたメッセージに自動応答します。
.Pp
以下のオプションを指定することができます。
.Bl -tag -width Ds
.It Fl a Ar alias
.Ar alias
宛てのメッセージをユーザのログイン名に送られたメールと同様に処理します。
.It Fl d
デバックモードを有効にします。下記を参照してください。
.It Fl i
Vacation データベースを初期化します。
これは、
.Pa .forward
ファイルを変更する前に行なっておく必要があります。
.It Fl r
自動応答の間隔を
.Ar interval
日に設定します。デフォルトは 1 週間です。間隔を
.Dq 0
に設定すると、全てのメッセージに対して自動応答を行ないます。
.Dq Li infinite
(実際には数字以外の文字ならなんでも) を設定すると、
同じ送信者には一度しか自動応答を行ないません。間隔を
.Dq Li \&0
に設定すると
.Dq I am on vacation
メールがループすることがあり、非常に危険です。
.It Fl l
Vacationデータベースファイルの内容を表示します。
それぞれのエントリについて自動応答が送られたアドレスとその時間が
標準出力に表示されます。
.El
.Pp

.Ar login
(もしくは
.Fl a
オプションによって指定された
.Ar alias
) がメールの
.Dq To:
もしくは
.Dq Cc:
ヘッダになければ、自動応答は送られません。また、
.Dq ???-REQUEST ,
.Dq Postmaster ,
.Dq Tn UUCP ,
.Dq MAILER ,
.Dq MAILER-DAEMON
から (大文字、小文字は区別されません) のメールや、
.Dq Precedence: bulk
や
.Dq Precedence: junk
の行がヘッダに含まれているメールに対しても自動応答は送られません。
あなたへのメールの送信者のアドレスは
ホームディレクトリの
.Pa .vacation.db
ファイル中で
.Xr hash 3
を使用して管理されます。
.Pp
.Nm Vacation
ではホームディレクトリに
.Pa .vacation.msg
ファイルを置くことによって、
あなたへのメールの送信者へのメッセージを指定します。
このファイルは (ヘッダを含む) 完全なメッセージでなければなりません。
以下に例を示します。
.Pp
.Bd -unfilled -offset indent -compact
From: eric@CS.Berkeley.EDU (Eric Allman)
Subject: I am on vacation
Delivered-By-The-Graces-Of: The Vacation program
Precedence: bulk

わたしは 7 月 22 日まで休暇をとっています。緊急の場合は
Keith Bostic <bostic@CS.Berkeley.EDU> に連絡願います。
--eric
.Ed

(訳註)返答メッセージに日本語を使う場合には、
漢字コードは JIS (ISO-2022-JP) でなければいけません。
.\" 上記(訳註)は日本語対応のために追加しました。
.\" 2.2.1-RELEASE 対象
.\" by mihara@prd.fc.nec.co.jp (Apr. 4, 1997)
.Pp
.Nm Vacation
はメールの送信者を決定するために標準入力の 1 行目の
.Ux
.Dq From
行を読みます。この
.Dq From
行は
.Xr sendmail 8
が自答的に付加するものです。
.Pp
.Nm vacation
が不正な引数で呼ばれたり、
.Ar login
名が存在しないような致命的なエラーはシステムのログファイルに
.Xr syslog 3
を使って記録されます。
ただし、
.Fl d
オプションでデバッグモードが指定されている場合はこの限りではありません。
この場合、標準エラー出力に書き出されます。
.Pp
前述の使用例に追加し、
本プログラムの動作をテストする間に次のものをあなたの
.Pa .forward
ファイルに書くことで、エラー出力をファイルにリダイレクト可能です:
.Pp
.Bd -literal -offset indent
\eeric, "|/bin/sh -c '/usr/bin/vacation -d -a allman eric' 2>/home/eric/.vacation.log"
.Ed
.Sh 診断
.Nm
ユーティリティは、成功時には 0 で、
エラー発生時には 0 より大きな値で終了します。
.Sh 関連ファイル
.Bl -tag -width "vacation.dirxxx" -compact
.It Pa ~/.vacation.db
データベースファイル
.It Pa ~/.vacation.msg
送信するメッセージ
.El
.Sh 関連項目
.Xr syslog 3 ,
.Xr sendmail 8 ,
.Xr syslogd 8
.Sh 歴史
.Nm vacation
コマンドは
.Bx 4.3
から登場しました。
