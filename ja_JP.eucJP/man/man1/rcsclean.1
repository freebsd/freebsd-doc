.de Id
.\" jpman %Id: rcsclean.1,v 1.2 1997/05/30 07:41:49 yugawa Stab %
.ds Rv \\$3
.ds Dt \\$4
..
.Id %FreeBSD: src/gnu/usr.bin/rcs/rcsclean/rcsclean.1,v 1.4.2.1 1999/08/29 14:35:07 peter Exp %
.ds r \&\s-1RCS\s0
.if n .ds - \%--
.if t .ds - \(em
.TH RCSCLEAN 1 \*(Dt GNU
.SH 名称
rcsclean \- ワークファイルの後片付け
.SH 書式
.B rcsclean
.RI [ options "] [ " file " .\|.\|. ]"
.SH 解説
.B rcsclean
は、RCS ファイルからチェックアウトされた後に変更を受けていない
ワークファイルを削除します。
.B "rcsclean \-u"
は、対象となるワークファイルのロックを解除し、削除します。
.PP
各
.I file
について
.B rcsclean
は、ワークファイルとそれに対応する \*r ファイルに格納されている
リビジョンとを比較します。
違いが見つかった場合には何もしません。
違いが無い場合、
.B \-u
オプションが指定されていたら、まずそのリビジョンのロックを
解除します。
そして、
ワークファイルが書き込み可能でなくそのリビジョンがロックされて
いないなら、ワークファイルを消去します。
.B rcsclean
は、実行した処理の内容を
.B "rcs \-u"
や
.B "rm \-f"
コマンドを使って表現し、標準出力に表示します。
.PP
.I file
を指定しなかった場合、カレントディレクトリにあるすべての
ワークファイルを処理対象にします。
\*r の拡張子を持つパス名は、\*r ファイルを表しています。
その他のファイルはワークファイルを意味します。
ファイル名については、
.BR ci (1)
で詳しく説明されています。
.PP
ワークファイルと比較するリビジョン番号は、
.BR \-n ,
.BR \-q ,
.BR \-r ,
.BR \-u 
オプションのいずれかで指定することができます。
リビジョン番号を指定せず、
.B \-u
オプションが指定されていて、呼び出したユーザがロックしたリビジョンが
一つだけ存在すれば、
.B rcsclean
はそのリビジョンを使用します。
それ以外の場合には、
.B rcsclean
はデフォルト枝 (普通は幹) の最新リビジョンを使用します。
.PP
.B rcsclean
を Makefile の中の
.B clean
ターゲットで用いると便利です。
.BR rcsdiff (1)
(差分の表示)
や、
.BR ci (1)
(ワークファイルに変更が無い時、チェックインするかどうか確認する)
のマニュアルも参照して下さい。
.SH オプション
.TP
.BI \-k subst
比較のためにリビジョンを取り出すときに、
.I subst
で指定した方式でキーワード置換を行います。詳しくは
.BR co (1)
を参照して下さい。
.TP
.BR \-n [\f2rev\fP]
ファイルの消去やリビジョンのロック解除を行ないません。
このオプションによって、
.B rcsclean
が何を実行しようとするかを、実際の動作を行なわずに知ることができます。
.TP
.BR \-q [\f2rev\fP]
処理の内容を標準出力に表示しません。
.TP
.BR \-r [\f2rev\fP]
比較対象のリビジョンの指定のみを行い、他には何の効果も与えません。
.TP
.B \-T
\*r ファイルがロックの解除により変更された場合でも、
\*r ファイルの変更時刻を保存します。
このオプションを使うことにより、\*r ファイルの中のワークファイルの
コピーによって生ずる
.BR make (1)
の依存関係に伴う必要以上の再コンパイルを防ぐことができます。
このオプションを使用する際には注意が必要です。本当に再コンパイルが必要な
場合にも再コンパイルされない場合が生じます。つまり、ロックの解除により
他のワークファイル中のキーワードの変更を意味する場合があるからです。
.TP
.BR \-u [\f2rev\fP]
違いが見つからなかったファイルがロックされているなら、
ロックを解除します。
.TP
.BI \-V
\*r システムのバージョン番号を表示します。
.TP
.BI \-V n
\*r システムのバージョン
.IR n 
のエミュレーションを行います。
詳細は
.BR co (1)
を参照してください。
.TP
.BI \-x "suffixes"
.I suffixes
を \*r ファイル拡張子として指定します。
詳細は
.BR ci (1)
を参照してください。
.TP
.BI \-z zone
キーワードの置換の際、タイムゾーンとして
.I zone
を使用します。
詳細は
.BR co (1)
を参照して下さい。
.SH 使用例
.LP
.RS
.ft 3
rcsclean  *.c  *.h
.ft
.RE
.LP
チェックアウトされてから変更されていない
.B .c
や
.B .h
で終る名前のワークファイルをすべて削除します。
.LP
.RS
.ft 3
rcsclean
.ft
.RE
.LP
チェックアウトされてから変更されていない、
カレントディレクトリにあるすべてのワークファイルを削除します。
.SH 関連ファイル
.B rcsclean
は、
.BR ci (1)
と同じファイルにアクセスします。
.SH 環境変数
.TP
.B \s-1RCSINIT\s0
引数リストに前置されるオプションを空白で区切って指定します。
オプションの中に含まれる空白は、バックスラッシュでエスケープします。
.B \s-1RCSINIT\s0
オプションは、大部分の \*r コマンドの引数リストに前置されます。
.BR \-q ,
.BR \-V ,
.BR \-x ,
.B \-z
などを指定するのに有用です。
.SH 診断
すべての動作が成功した時にのみ、終了ステータス 0 を返します。
ワークファイルや \*r ファイルがなくても無視します。
.SH 作者
Author: Walter F. Tichy.
.br
Manual Page Revision: \*(Rv; Release Date: \*(Dt.
.br
Copyright \(co 1982, 1988, 1989 by Walter F. Tichy.
.br
Copyright \(co 1990, 1991, 1992, 1993 Paul Eggert.
.SH 関連項目
ci(1), co(1), ident(1), rcs(1), rcsdiff(1), rcsintro(1), rcsmerge(1), rlog(1),
rcsfile(5)
.br
Walter F. Tichy,
\*r\*-A System for Version Control,
.I "Software\*-Practice & Experience"
.BR 15 ,
7 (July 1985), 637-654.
.SH バグ
ディレクトリ参照操作を持たない古いバージョンの UNIX では、
少なくとも一つの
.I file
を指定しなければなりません。
.br
