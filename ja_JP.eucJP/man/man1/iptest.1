.\" $FreeBSD$
.TH IPTEST 1
.SH 名称
iptest \- IP 機能を検証するためのパケットを自動生成する
.SH 書式
.B iptest
[
.B \-1234567
] [
.B \-d
<device>
] [
.B \-g
<gateway>
] [
.B \-m
<\fIMTU\fP>
] [
.B \-p
<\fIpointtest\fP>
] [
.B \-s
<\fIsource\fP>
] <destination>
.SH 解説
.PP
\fBiptest\fP ...
.SH オプション
.TP
.B \-1
IP テストグループ #1 を実行します。
このテストグループが生成するパケットは、
パケットの他の特性から得られる値としては不正な値が
IP ヘッダフィールドに設定されます。
ポイントとなるテストは次の通りです:
1 (ip_hl < ip_len)、
2 (ip_hl > ip_len)、
3 (ip_v < 4)、
4 (ip_v > 4)、
6 (ip_len > パケットサイズ、短いパケット)、
7 (長さ 0 のフラグメント)、
8 (再アセンブル後のパケット長が 64k 以上)、
9 (MSB がセットされた IP オフセット)、
10 (ttl のバリエーション)。
.TP
.B \-2
IP テストグループ #2 を実行します。
このテストグループが生成するパケットは、
パケットの他の特性から得られる値としては不正な値を
用いて作成された IP オプションを含みます。
ポイントとなるテストは次の通りです:
1 (オプション長 > パケット長)、
2 (オプション長 = 0)。
.TP
.B \-3
IP テストグループ #3 を実行します。
このテストグループが生成するパケットは、
ICMP ヘッダフィールドが非標準値になっています。
ポイントとなるテストは次の通りです:
1 (ICMP タイプ 0-31 と 255)、
2 (タイプ 3 でコード 0 - 31)、
3 (タイプ 4 でコード 0, 127, 128, 255)、
4 (タイプ 5 でコード 0, 127, 128, 255)、
5 (タイプ 8-10, 13-18 でコード 0, 127, 128, 255)、
6 (タイプ 12 でコード 0, 127, 128, 129, 255)、
7 (タイプ 3 でコード 9-10, 13-14, 17-18 - 短縮されたパケット)。
.TP
.B \-4
IP テストグループ #4 を実行します。
このテストグループが生成するパケットは、
UDP ヘッダフィールドが非標準値になっています。
ポイントとなるテストは次の通りです:
1 (UDP 長 > パケットサイズ)、
2 (UDP 長 < パケットサイズ)、
3 (sport = 0, 1, 32767, 32768, 65535)、
4 (dport = 0, 1, 32767, 32768, 65535)、
5 (sizeof(struct ip) <= MTU <= sizeof(struct udphdr) + sizeof(struct ip))。
.TP
.B \-5
IP テストグループ #5 を実行します。
このテストグループが生成するパケットは、
TCP ヘッダフィールドが非標準値になっています。
ポイントとなるテストは次の通りです:
1 (TCP フラグのバリエーション、すべての組み合わせ)、
2 (seq = 0, 0x7fffffff, 0x8000000, 0xa0000000, 0xffffffff)、
3 (ack = 0, 0x7fffffff, 0x8000000, 0xa0000000, 0xffffffff)、
4 (ウィンドウ 0, 32768, 65535 の SYN パケット)、
5 (緊急ポインタを 1, 0x7fff, 0x8000, 0xffff に設定)、
6 (データオフセット)、
7 (sport = 0, 1, 32767, 32768, 65535)、
8 (dport = 0, 1, 32767, 32768, 65535)。
.TP
.B \-6
IP テストグループ #6 を実行します。
このテストでは、大量のフラグメントを生成して、
後に再アセンブルするためにパケットを保持するための
ネットワークバッファを溢れさせようとします。
警告: 対象ホストをクラッシュさせたり、
パフォーマンスを著しく低下させるかもしれません。
.TP
.B \-7
IP テストグループ #7 を実行します。
このテストでは、1024 個のランダムな IP パケットを生成します。
このパケットは、
IP バージョン、チェックサム、長さ、IP オフセットのフィールドのみからなります。
.TP
.BR \-d \0<interface>
インタフェース名を指定されたものに設定します。
.TP
.BR \-g \0<gateway>
パケットの経路となるゲートウェイのホスト名を指定します。
宛先ホストが、
パケットを送出するホストと同一のネットワークに直接接続されていない場合には、
かならず必要となります。
.TP
.BR \-m \0<MTU>
パケットを送出する際に使用する MTU を指定します。このオプションを
使うことで、実際と異なる MTU を設定することができます。これにより、
実際にネットワークインタフェースの MTU を小さく設定しなくても、
小さな MTU を持つインタフェースをシミュレートすることができます。
.TP
.B \-p <test>
指定したものを実行...
.DT
.SH 関連項目
ipsend(1), ipresend(1), bpf(4), ipsend(5), dlpi(7p)
.SH 診断
\fIiptest\fP 実行時には、数値テストオプションは 1 つのみ指定可能です。
.PP
root として実行する必要があります。
.SH バグ
.PP
バグをみつけたら、darrenr@cyber.com.au に電子メールを送ってください。
