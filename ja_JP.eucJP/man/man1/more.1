.\" Copyright (c) 1988, 1990 The Regents of the University of California.
.\" Copyright (c) 1988 Mark Nudleman
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	from: @(#)more.1	5.15 (Berkeley) 7/29/91
.\" %FreeBSD: src/usr.bin/more/more.1,v 1.18 2000/03/01 12:19:56 sheldonh Exp %
.\"
.\" jpman %Id: more.1,v 1.4 1997/08/11 14:30:57 horikawa Stab %
.\"
.Dd April 18, 1994
.Dt MORE 1
.Os
.Sh 名称
.Nm more
.Nd CRT 上でファイルをページ単位に閲覧する
.Sh 書式
.Nm
.Op Fl ceinsu
.Op Fl t Ar tag
.Op Fl x Ar tabs
.Op Fl / Ar pattern
.Op Ar
.Sh 解説
.Nm
は、画面上に 1 度に表示できる量の行数を 1 ページの行数とみなし、
.Ar file
が指定されていれば
そのファイルを、指定されていないか ``-'' の場合は、標準入力 (標準入力が
端末の場合は、何もせずに終了します) を読み込んで、1 ページ分表示する毎に
キー入力を待つようにします。
.Pp
さまざまな端末に対応するため、
.Xr termcap 3
を使用します。また、制限はありますが、ハードコピー形式の端末も
サポートしています。ハードコピー端末では、画面の上端に対応する位置に
``^'' が印刷されます。
.Sh オプション
オプションとしては以下のものがあります。なお、これらのオプションは、
あらかじめ環境変数
.Ev MORE
で指定しておくことができます (``-'' をつけること)。
コマンドラインオプションでオーバーライドします。
.Bl -tag -width flag
.It Fl c
通常、
.Nm
は次のページを表示する時、現在表示されている画面を 1 行づつ
スクロールしていって新しいページを表示していきますが、
このオプションを指定した場合、画面の上端から書き替えます。
.It Fl e
通常
.Nm
は、ファイルの最後に達し次に表示すべきファイルがない
場合には終了しますが、このオプションを指定した場合にはファイルの最後に
達した時点でキー入力待ちになります。このオプションは、最後まで見た後、
前のページに遡って見たい場合に便利です。
.\"ただし、元々ファイルが小さく、最初の 1 ページに納まっている場合は、
.\"すぐ終了します。
.\"(訳中)原文で内容が削られていますが、とりあえずコメントで残します。
.\" 2.2.1R 対象(1997/05/06) Takeshi MUTOH <mutoh@info.nara-k.ac.jp>
.It Fl i
サーチするとき、大文字と小文字を区別しないようにします。
.It Fl n
行番号の処理をしないようにします。デフォルトで、
.Xr more
は、
.Cm =
コマンドを使用した行情報の表示や、
.Cm v
コマンドでエディタを起動して現在見ている行にジャンプさせるために、
行番号を内部で管理しています。しかし、この処理のために動作が
遅くなっており、これは、大きなファイルを扱う場合、特に顕著です。
このオプションを指定して行番号を使用しないことを
明示すれば、速度の低下を回避することができます。
.It Fl s
複数の空行が連続している場合、空行を 1 行にします。
.It Fl t Ar tag
タグ情報を含むファイル ``tags'' から、tag で指定されたエントリを検索し、
対応するファイルの指定位置から表示を開始します。
タグファイル ``tags'' については、
.Xr ctags 1
を参照してください。
.It Fl u
デフォルトでは、
.Nm
は
.Dv BS
や
.Dv CR-LF
などのシーケンスを特別に処理します。
.Dv BS
とアンダースコア文字があった場合は、文字にアンダーラインをつけて
表示しますし、2 つの同じ文字の間にBSがあったら、強調表示にします。
.Dv CR-LF
は、1 つの改行にします。
このオプションは、これらの処理をやめ、
.Dv BS
は ``^H'' に、
.Dv CR-LF
は ``^M'' と改行にします。
.It Fl x
タブ幅を
.Ar N
文字にします。デフォルトでは 8 です。
.It Fl /
.Ar pattern
で指定した検索を実行し、見つかった位置から表示します。
.El
.Pp
.Sh コマンド
.Nm
は、1 ページ表示する毎に、キーボードから各種のコマンドを受け付けます。
コマンドは、
.Xr vi 1
のコマンド体系をベースにしたものです。
以下の説明で、``^''は``Control''キーを押しながら入力するキーの意味です。
また、コマンドのキーを押す前に数字を入力することで、そのコマンドに
対する引数を与えることができます。これは、説明のなかで``N''として
記述しています。
.Bl -tag -width Ic
.It Ic h
コマンドのヘルプを表示します。もし他の全てのコマンドを忘れても、
このコマンドは覚えておいてください。
.It Xo
.Ic q
.No or
.Ic \&:q
.No or
.Ic ZZ
.Xc
.Nm
を終了します。
.It Xo
.Ic SPACE
.No or
.Ic f
.No or
.Ic \&^F
.Xc
N 行分スクロールします。デフォルトは 1 画面分です。
N が画面サイズよりも大きい場合、1 画面分のみ表示されます。
.It Ic b No or Ic \&^B
N 行け戻るようにスクロールします。
デフォルトは 1 仮面分です (-z オプション参照)。
N が画面サイズよりも大きい場合、1 画面分のみ表示されます。
.It Xo
.Ic j
.No or
.Ic RETURN
.No or
.Ic DOWN-ARROW
.Xc
N 行分スクロールします。デフォルトは 1 行です。
N が画面サイズよりも大きくても、N 行すべてが表示されます。
.It Ic k No or Ic UP-ARROW
N 行だけ前に戻るようにスクロールします。デフォルトは 1 行です。
N が画面サイズよりも大きくても、N 行すべてが表示されます。
.It Ic LEFT-ARROW
N 桁だけ左スクロールします。デフォルトは 1 桁です。
画面を左スクロールできない場合、行折り返しをオンにします。
.It Ic RIGHT-ARROW
行折り返しをオフにします。
既に桁折り返しがオフの場合、N 桁だけ右スクロールします。
デフォルトは 1 桁です。
.It Ic HOME
水平スクロールと行折り返しのオンオフを切り替えます。
.It Ic d No or Ic \&^D
N 行スクロールします。デフォルトは画面サイズの半分です。
N の指定後は、以降の d と u のコマンドでのデフォルト値がこの値になります。
N が画面サイズより大きい場合でも、N 行すべてが表示されます。
.It Ic u No or Ic \&^U
N 行戻るようにスクロールします。デフォルトは画面サイズの半分です。
N の指定後は、以降の d と u のコマンドでのデフォルト値がこの値になります。
N が画面サイズより大きい場合でも、N 行すべてが表示されます。
.It Ic g
ファイルの N 行目から表示します。引数を指定しなかった場合は、
ファイル先頭から表示します。
.It Ic G
ファイルの N 行目から表示します。引数を指定しなかった場合は、
ファイルの最後から表示します。
.It Ic p No or Ic \&%
ファイルの N パーセント目から表示します。 N は 0 から 100 までです。
file で指定したファイルの場合では、標準入力を読み込んで
表示するようにしている場合は、ファイルエンドに達してからでないと、
このコマンドは使用できません。
これは速いのですが、いつも有効とは限りません。
.It Ic r No or Ic \&^L
画面を表示し直します。
.It Ic R
バッファに入っている入力を捨て、再読み込みして同じ行番号に当たる所から
画面を表示し直します。これは、表示を見ている間にファイルが
変更されたような場合に有効です。
.It Ic m
行マークをするコマンドです。``m'' を押すと、画
面下に ``mark: '' と表示されるので、a から z までの英小文字を使ってマークの
指定をすることができます。これで、現在の表示行がその文字にマーク
されます。次の `` ' '' コマンドによって、ここでマークした行に
ジャンプさせることができます。
.It Ic \&'
m コマンドでマークした行にジャンプするコマンドで
す。画面下に ``goto mark: '' と表示されますので、m コマンドで
マークした a から z までの英小文字を入力すれば、
その行にジャンプできます。
なお、a から z のかわりに再度 `` ' '' を
入力すると、その前に大きく移動した位置に戻ります。この場合の大きな移動とは、
`` ' ''コマンドによる移動や、``g'' コマンドでのファイル先頭に移動することを
指します。
このあと、`` '' ''と入力すると、移動前の位置に戻ることができます。
全てのマークは、新しいファイルを読み込んだ時に失われます。
.It Ic \&/ Ns Ar pattern
現在行 (画面の 1 番上に表示されている行) の次の
行からファイルの末端に向かって、pattern で指定した検索を実行し、
一致した行から表示します。引数が指定された場合は、検索を繰り返し
実行し、N 回目に一致した行からの表示になります。pattern には、
.Xr re_format 7
で解説されているPOSIX.2
.Dq extended format
正規表現が使用できます。
.It Ic \&? Ns Ar pattern
現在行 (画面の 1 番上に表示されている行) の直前から
ファイルの先頭に向かって、
.Ar pattern
で指定した検索を実行します。
.It Ic \&/\&! Ns Ar pattern
.Ar pattern
に一致しない行を検索する以外は ``/'' と同じです。
.It Ic \&?\&! Ns Ar pattern
.Ar pattern
に一致しない行を検索する以外は ``?'' と同じです。
.It Ic n No and Ic N
直前に実行した検索コマンドを再実行し、パターンを含む N 番目の行を表示します。
それぞれ、同方向および逆方向を意味します。
.It Ic E Ns Op Ar filename
コマンドラインのファイルリストの中から現在表示しているファイル
(N, Pコマンド参照) にかわって、
filename で指定したファイルを表示対象にします。
ファイルが見つからない場合は、現在のファイルを再度表示します。
ファイル名が "#" なら、1 つ前に読み込んだファイルを再度表示します。
.It Ic \&:n
コマンドラインから file として複数のファイルを指
定して起動した場合に、現在表示しているファイルの次のファイルに表示を
切り替えます。引数を指定した場合は、N 個先のファイルになります。
.It Ic \&:p
コマンドラインから file として複数のファイルを指
定して起動した場合に、現在表示しているファイルの 1 つ前のファイルに
表示を切り替えます。引数を指定した場合は、N 個前のファイルになります。
.It Ic \&:t
タグエントリの入力をします。
``:t'' を押すと、画面下に ``Tag: '' と表示されるので、新しいタグエントリの
入力をします。
対応するタグエントリが見つからなかった場合は、その旨を表示して、
前のファイルを表示します。
.It Ic t
タグキューにおいて進みます [gtags のみ]。
.It Ic T
タグキューにおいて戻ります [gtags のみ]。
.It Ic v
現在表示しているファイルを編集対象にして、エディタを起動します。
エディタはデフォルトでは
.Xr vi 1
が起動されるようになっていますが、
環境変数
.Ev EDITOR
が指定されていた場合には、そこで指定したエディタが起動されます。
.It Ic \&= No or Ic \&^G
現在表示しているファイルについて、画面の最下行がファイル全体の
何行目にあたるか、また、ファイルの総バイト数に対する現在行の
バイト数とそのパーセンテージを表示します。
.Nm
が標準入力から読み込んでいるか、ファイルが一画面より短い場合は、
いくつかの情報は有効ではありません。これらの情報は、画面の最下行の最初の
1 バイトによって得られる事を覚えておいてください。
.El
.Sh 環境変数
.Bl -tag -width Fl
.It Ev MORE
コマンドラインで指定するかわりに、あらかじめよく使うオプションを
設定しておくことができます。
.It Ev EDITOR
起動するエディタを指定します。
.It Ev SHELL
起動するシェルを指定します。通常、この変数はログイン時
にシェルが自分でセットします。
.It Ev TERM
端末のタイプを指定します。
.El
.Sh 関連項目
.Xr ctags 1 ,
.Xr global 1 ,
.Xr gtags 1 ,
.Xr vi 1
.Sh バグ
長い行を含むファイルの読み込みは、遅いです。
.Pp
CRLF で終端された 80 文字の行は、余計な改行を生じさせます。
.Pp
ボールドテキストからアンダラインテキストへすぐ変わると、
アンダラインが消えてしまいます。
.Pp
マッチする行を検索するとき、
パターンを含まない行を探してしまうことがあります。
.Pp
HOME と ARROW のキーは、
正しい vt100 エスケープシーケンスを使用した場合のみ動作します。
.Sh 作者
このソフトウェアは
.An Mark Nudleman
によって Berkeley に寄贈されました。
.Sh 歴史
.Nm
コマンドは
.Bx 3.0
から登場しました。
