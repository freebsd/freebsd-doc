.\" $FreeBSD$
.ig \"-*- nroff -*-
Copyright (C) 1989-2000 Free Software Foundation, Inc.

Permission is granted to make and distribute verbatim copies of
this manual provided the copyright notice and this permission notice
are preserved on all copies.

Permission is granted to copy and distribute modified versions of this
manual under the conditions for verbatim copying, provided that the
entire resulting derived work is distributed under the terms of a
permission notice identical to this one.

Permission is granted to copy and distribute translations of this
manual into another language, under the above conditions for modified
versions, except that this permission notice may be included in
translations approved by the Free Software Foundation instead of in
the original English.
..
.de TQ
.br
.ns
.TP \\$1
..
.\" Like TP, but if specified indent is more than half
.\" the current line-length - indent, use the default indent.
.de Tp
.ie \\n(.$=0:((0\\$1)*2u>(\\n(.lu-\\n(.iu)) .TP
.el .TP "\\$1"
..
.\" The BSD man macros can't handle " in arguments to font change macros,
.\" so use \(ts instead of ".
.tr \(ts"
.TH REFER 1 "26 April 2001" "Groff Version 1.17"
.SH 名称
refer \- groff のための参考文献目録プリプロセッサ
.SH 書式
.nr a \n(.j
.ad l
.nr i \n(.i
.in +\w'\fBrefer 'u
.ti \niu
.B refer
.de OP
.ie \\n(.$-1 .RI "[\ \fB\\$1\fP" "\\$2" "\ ]"
.el .RB "[\ " "\\$1" "\ ]"
..
.OP \-benvCPRS
.OP \-a n
.OP \-c fields
.OP \-f n
.OP \-i fields
.OP \-k field
.OP \-l m,n
.OP \-p filename
.OP \-s fields
.OP \-t n
.OP \-B field.macro
.RI [\  filename \|.\|.\|.\ ]
.br
.ad \na
.PP
コマンドラインオプションとパラメータの間に、空白を置くことが可能です。
.SH 解説
本ファイルでは groff ドキュメントフォーマッティングシステムの一部である
GNU バージョンの
.B refer
について記述します。
.B refer
は
.B .[
と
.B .]
で囲まれた引用として解釈される行と、
.B .R1
と
.B .R2
で囲まれた引用の処理方法を記述したコマンドとして解釈される行を除き、
.IR filename \|.\|.\|.
の内容を標準出力にコピーします。
.LP
各々の引用では参考文献を指定します。
引用では、ある参考文献にのみ含まれるキーワードの集合を与えることによって、
その参考文献を図書目録データベースから指定できます。
また、引用の中でデータベースレコードを指定することによっても参考文献を
指定できます。
これらの方法を組み合わせることも可能です。
.LP
各々の引用において
.B refer
はテキストの中にマークを作成できます。
このマークは色々な方法でテキストや他のラベルから区別されるいくつかのラ
ベルから構成されます。
各引用における参考文献をマクロパッケージを使ってフォーマットして出力す
るための
.B groff
コマンドを出力することもできます。
そのためには
.B refer
の出力は適切なマクロパッケージを使って処理されなければなりません。
.B \-ms
と
.B \-me
はいずれも適切なマクロです。
引用の参考文献をフォーマットするコマンドを引用の直後に出力することも、
参考文献を蓄積して後でコマンドを出力することもできます。
参考文献を蓄積した時、同じ参考文献が複数から引用されている場合には、
参考文献は 1 つにまとめてフォーマットされます。
.LP
GNU refer の新しい機能として
.B .R1
と
.B .R2
の間の行はコマンドとして解釈されます。
この機能を使用して作成されたドキュメントは、ドキュメントの先頭に
.RS
.LP
.nf
.ft B
\&.de R1
\&.ig R2
\&..
.ft
.fi
.RE
の行を追加することにより UNIX refer でも処理できます。
この指定によって
.B troff
は
.B .R1
と
.B .R2
の間をすべて無視します。
このオプションによっていくつかのコマンドと同等の効果を得ることができ
ます。
これらのオプションは主に Unix refer との互換性のためにサポートされてい
るものです。
通常はコマンドを使った方が便利です。
.LP
.B refer
は
.B refer
の出力を読むコマンドによって生成されるメッセージの中のファイル名と行番
号が正しくなるように
.B .lf
行を生成します。
入力が
.B soelim (1)
のようなコマンドによって前処理されている場合でも、メッセージ中のファイ
ル名と行番号と生成される
.B .lf
行が正確になるように
.B .lf
で始まる行も解釈します。
.SH オプション
.LP
ほとんどのオプションには同等なコマンドがあります
(これらのコマンドについては
.B コマンド
セクションの説明を参照して下さい)。
.TP
.B \-b
.B
no-label-in-text; no-label-in-reference
.TP
.B \-e
.B accumulate
.TP
.B \-n
.B no-default-database
.TP
.B \-C
.B compatible
.TP
.B \-P
.B move-punctuation
.TP
.B \-S
.B
label "(A.n|Q) ', ' (D.y|D)"; bracket-label " (" ) "; "
.TP
.BI \-a n
.B reverse
.BI A n
.TP
.BI \-c fields
.B capitalize
.I fields
.TP
.BI \-f n
.B label
.BI % n
.TP
.BI \-i fields
.B search-ignore
.I fields
.TP
.B \-k
.B label
.B L\(ti%a
.TP
.BI \-k field
.B label
.IB field \(ti%a
.TP
.B \-l
.B label
.BI A.nD.y%a
.TP
.BI \-l m
.B label
.BI A.n+ m D.y%a
.TP
.BI \-l, n
.B label
.BI A.nD.y\- n %a
.TP
.BI \-l m , n
.B label
.BI A.n+ m D.y\- n %a
.TP
.BI \-p filename
.B database
.I filename
.TP
.BI \-s spec
.B sort
.I spec
.TP
.BI \-t n
.B search-truncate
.I n
.LP
これらのオプションは以下のコマンドと同等です。ただし、通常の方法のか
わりにコマンド行で指定されるファイル名が
.B bibliography
コマンドへの引数であるように処理されます。
.TP
.B \-B
.B
annotate X AP; no-label-in-reference
.TP
.BI \-B field . macro
.B annotate
.I field
.IB macro ;
.B no-label-in-reference
.LP
以下のオプションには同等なコマンドはありません。
.TP
.B \-v
バージョン番号を表示します。
.TP
.B \-R
.B .R1 / .R2
で始まる行を認識しません。
.SH 使用法
.SS 図書目録データベース
図書目録データベースは 1 行以上の空白行で区切られたレコードからなるテ
キストファイルです。
各レコードではフィールドは
.B %
で始まる行で開始します。
各フィールドには
.B %
に続く 1 文字の名称があります。
フィールドの名称には大文字か小文字のみを使うのが最良の方法です。
フィールドの名称の後には正確に 1 つのスペースが続かなければなりませ
ん。
空のフィールドは無視されます。
各フィールドの慣例的な意味は次の通りです。
.TP
.B A
作者の名前。
名前の末尾に
.B Jr.
のような肩書が含まれる場合はコンマでラストネームと区切られていなければ
なりません。
.B A
フィールドは複数回現れても構いません。
出現する順番は意味を持ちます。
.B A
フィールドか
.B Q
フィールドは常に指定するのが良いでしょう。
.TP
.B B
ある本の一部である記事において、その本のタイトルです。
.TP
.B C
出版社の所在地 (都市) です。
.TP
.B D
出版された日付です。
出版年に略称を使用してはいけません。
もし出版月を指定する場合は数字による月ではなく、月名を使わなければなり
ませんが、最初の 3 文字を指定すれば十分です。
.B D
フィールドは常に指定するのが良いでしょう。
ただし、出版の日付が分からなければ
.B in press
や
.B unknown
のような値を使うこともできます。
.TP
.B E
ある本の一部である記事において、その本の編集者の名前です。
出版作業が著者のない編集だけのものであった場合、編集者の名前を
.B A
フィールドで指定し、
.B ,\ (ed)
または
.B ,\ (eds)
を最後の著者の後に指定しなければなりません。
.TP
.B G
米国政府注文番号です。
.TP
.B I
出版者 (発行人) です。
.TP
.B J
定期刊行物の記事における、その刊行物の名称です。
.TP
.B K
検索に使われるキーワードです。
.TP
.B L
ラベルです。
.TP
.B N
定期刊行物の発行番号です。
.TP
.B O
その他の情報です。
これは通常参考文献の末尾に印刷されます。
.TP
.B P
ページ番号です。
ページ番号の範囲は
.I m \- n\fR
で指定できます。
.TP
.B Q
著者が個人でない場合の著者の名称です。
これは
.B A
フィールドがない場合にのみ使用されます。
.B Q
フィールドは 1 つのみ使うことができます。
.TP
.B R
技術報告書番号です。
.TP
.B S
シリーズの名称です。
.TP
.B T
タイトルです。
本や定期刊行物中の記事ではこれは記事のタイトルとなります。
.TP
.B V
定期刊行物もしくは本のボリューム番号です。
.TP
.B X
注釈です。
.LP
.B A
と
.B E
を除くすべてのフィールドで、あるレコードに複数の特定のフィールドがある
場合、最後のフィールドのみが使用されます。
.LP
アクセント文字列はアクセントをつける文字に引き続いて指定されなければな
りません。これは
.B AM
マクロは
.B \-ms
マクロとともに使用しなければならないことを意味します。
アクセント文字列は引用符で囲んではいけません。
また、
.B \e
は 2 つでなく 1 つのみ使って下さい。
.SS 引用
引用のフォーマットは
.RS
.BI .[ opening-text
.br
.I
flags keywords
.br
.I fields
.br
.BI .] closing-text
.RE
となります。
.LP
.I opening-text
と
.I closing-text
と
.I flags
のコンポーネントは省略可能です。
.I keywords
か
.I fields
のいずれか 1 つのコンポーネントを指定する必要があります。
.LP
.I keywords
コンポーネントは
.I keywords
に含まれる全ての単語を含む参考文献を文献データベースから検索するために
指定します。
もし複数の参考文献が見つかった場合はエラーとなります。
.LP
.I fields
コンポーネントは参考文献の中で指定されるものを置き換えるか付け加えるた
めの追加フィールドを指定します。
参考文献が蓄積される設定で、
.I keywords
コンポーネントが空でなければ、追加フィールドはある特定の参考文献が引用
されている最初の部分においてのみ指定されなければならず、その参考文献を
引用している全ての部分に適用されます。
.LP
.I opening-text
と
.I closing-text
コンポーネントは
.B bracket-label
コマンドにおいて指定される文字列の代わりにラベルを囲むために使われる文
字列を指定します。
これらのいずれもが空でなければ、
.B bracket-label
コマンドで指定されている文字列は使われません。
この処理は
.B [
と
.B ]
フラグを使って置き換えることができます。
これらのコンポーネントの前と後につくスペースは意味を持つことに注意し
て下さい。
.LP
.I flags
コンポーネントはここでの引用の扱いを変更するためのアルファベット以外の
文字のリストです。
Unix refer はこれらのフラグをキーワードの一部として処理しますが、それ
らはアルファベットでないため無視します。
以下のフラグが現在認識されるものです。
.TP
.B #
これは
.B short-label
コマンドによって指定されるラベルを
.B label
コマンドで指定されるものの代わりに使用することを指示します。
もしショートラベルが指定されなければ、通常のラベルが使用されます。 
普通はショートラベルは auther-date ラベルに使用され、日付とおそらくは
曖昧さが取り除かれた文字から構成されます。ここで、
.B #
はラベルの数字によるタイプを示唆するものと考えられます。
.TP
.B [
.B bracket-label
コマンドの中で指定される最初の文字列が
.I opening-text
の前に置かれます。
.TP
.B ]
.B bracket-label
コマンドの中で指定される 2 番目の文字列が
.I closing-text
の後に置かれます。
.LP
.I opening-text
と
.I closing-text
の中に括弧を含めるのではなく、
.B [
と
.B ]
フラグを使うことの 1 つの利点は
.B bracket-label
コマンドで変更するだけでドキュメントの中で使っている括弧のスタイルを変
更できることです。
もう 1 つの利点として、これらのフラグを使うことによって引用のソートとマー
ジを禁止する必要がないことがあげられます。
.LP
もしラベルがテキスト中に挿入されるべきものであれば、それは
.B .[
行の前の行に挿入されます。
そのような行がない場合には
.B .[
の前に余分の行が挿入されて警告が表示されます。
.LP
複数の参考文献に対する引用を作成する特別の表記法はありません。
ただ引用を 1 つの参考文献につき 1 つずつ連続して使用します。
引用の間には何も入れないで下さい。
全ての引用に対するラベルは最初の引用の前の行に付加されます。
ラベルはまたソートしたり、マージしたりすることもできます。
ラベルの表記法
.B <>
とコマンド
.B sort-adjacent-labels
と
.B abbreviate-label-ranges
の説明を参照して下さい。
ラベルは引用に空でない
.I opening-text
か
.I closing-text
がある時にはマージされません。
しかし、
.I opening-text
が伴わず
.B [
フラグを使った引用がその直後に続く、
.I closing-text
を伴わない
.B ]
フラグを使った引用のラベルは最初の引用の
.I opening-text
か次の引用の
.I closing-text
が空でない場合においても、ソートとマージを行なうことができます。
(もしこれを行ないたくない場合は、最初の引用で
.I closing-text
を
.B \e&
としてください。)
.SS コマンド
コマンドは
.B .R1
で始まる行と
.B .R2
の間に指定されます。
これらの行は
.B \-R
オプションを使うことによって認識されないようにできます。
.B .R1
行が認識された時、すべての蓄積されている参考文献は消去されます。
.B .R1
行と
.B .R2
行およびこれらの間に指定されたものはすべて出力されません。
.LP
コマンドは改行か
.B ;
によって区切られます。
.B #
からその行の最後まではコメントとなります
(しかし、改行自身は改行としてあつかわれます）。
各コマンドはワードに分割されます。
ワードはスペースかタブによって区切られます。
.B \(ts
で始まるワードは次の
.B \(ts
(ただしもう 1 つの
.B \(ts
が直後にないもの) までがワードとして扱われます。
もし、次の
.B \(ts
がない場合にはその行の最後までがワードとなります。
.B \(ts
で始まるワード中の
.B \(ts
のペアはひとつの
.B \(ts
として扱われます。
.B \(ts
の中では
.B #
と
.B ;
は認識されません。
行は末尾に
.B \e
をつけることによって継続できます。
ただし
.B #
の後の場合は継続されません。
.LP
.ds n \fR*
\*n でマークされた各コマンド
.I name
には
.I name
の効果を打ち消す否定コマンド
.BI no- name
があります。
例えば、
.B no-sort
コマンドは参考文献をソートしないことを指定します。
否定コマンドは引数を取りません。
.LP
以下の説明で各引数はひとつのワードとなります。
.I field
はフィールドの名前となる 1 文字の小文字または大文字です。
.I fields
はそのような文字のシーケンスです。
.I m
と
.I n
は非負の数字です。
.I string
は任意の文字列です。
.I filename
はファイル名です。
.Tp \w'\fBabbreviate-label-ranges'u+2n
.BI abbreviate\*n\  fields\ string1\ string2\ string3\ string4
.I fields
のファーストネームを短縮形にします。
頭文字ともう 1 つの頭文字の間には
.I string1
が挿入されます。
ラストネームとの間には
.I string2
が挿入され、その他のもの
(
.B von
や
.B de
のようなもの) との間には
.I string3
が挿入されます。これらのストリングのデフォルトはピリオドにスペースが続 
いたものとなります。
ハイフンで区切られたファーストネームの中で、名前の最初の部分の頭文字は
.I string4
(デフォルトはピリオド) によってハイフンと分離されます。
省略形に起因する曖昧さについては特に考慮していません。
名前はソートする前およびラベルが構築される前に省略形にされます。
.TP
.BI abbreviate-label-ranges\*n\  string
連続した参考文献を参照する 3 つ以上の隣接するラベルは、最初のラベル
.I string
最後のラベルの順からなる 1 つのラベルに省略されます。
これは主に数字ラベルにおいて便利です。
.I string
が省略された場合のデフォルトは
.B \-
です。
.TP
.B accumulate\*n
各参考文献を出現するたびに書き出すのではなく、参考文献を蓄積していきます。
蓄積された参考文献はすべての入力ファイルが処理され
.B .R1
行が認識された後に、
.RS
.IP
.B .[
.br
.B $LIST$
.br
.B .]
.LP
の形式の参照が指定された時に書き出されます。
.RE
.TP
.BI annotate\*n\  field\ string
.I field
は注釈です。注釈は参考文献の最後に
.RS
.IP
.BI . string
.LP
の行の後にパラグラフとして印刷されます。
.I macro
が省略されるとデフォルトの
.B AP
となります。もし、
.I field
も省略されるとデフォルトの
.B X
となります。
注釈になれるフィールドは 1 つのみです。
.RE
.TP
.BI articles\  string \fR\|.\|.\|. 
.IR string \|.\|.\|.
は定冠詞もしくは不定冠詞であり、ソートされる時にはフィールド
.B T
の最初では無視されなければなりません。
初期状態では
.B the
と
.B a
と
.B an
が冠詞として認識されます。
.TP
.BI bibliography\  filename \fR\|.\|.\|.
図書目録データベース
.IR filename \|.\|.\|.
に含まれる全ての参考文献を書き出します。
.TP
.BI bracket-label\  string1\ string2\ string3
テキスト中で、各ラベルを
.I string1
と
.I string2
で囲みます。
.I string2
の直後に
.I string1
が現れた場合は
.I string3
に置き換えられます。
デフォルトでは
.RS
.IP
.B
bracket-label \e*([. \e*(.] ", "
.LP
となります。
.RE
.TP
.BI capitalize\  fields
.I fields
を大文字とそれに続く小文字に変換します。
.TP
.B compatible\*n
スペースや改行以外の文字が次に続く場合でも
.B .R1
と
.B .R2
を認識します。
.TP
.BI database\  filename \fR\|.\|.\|.
図書目録データベース
.IR filename \|.\|.\|.
を検索します。
各々の
.I filename
について、もし
.BR indxbib (1)
によって生成されたインデックス
.IB filename .i
が存在すれば、それが代わりに検索されます。各インデックスは複数のデータ
ベースをカバーできます。
.TP
.BI date-as-label\*n\  string
.I string
はラベルを構成した後にフィールド
.B D
を置き換える文字列を指定するラベル式です。
ラベル式の説明については
.B "ラベル式"
の項を参照して下さい。
このコマンドは参考文献リストの中で明示的なラベルは使いたくないが、何ら
かの方法で日付を修飾することによって曖昧さを取り除きたい場合に便利です。 
通常、テキスト中で使用されているラベルは作者と日付の組み合わせになります。
ほとんどの場合、
.B no-label-in-reference
コマンドも使う必要があります。
例えば、
.RS
.IP
.B
date-as-label D.+yD.y%a*D.-y
.LP
は参考文献中のフィールド
.B D
の年の部分に曖昧さを取り除く文字を追加します。
.RE
.TP
.B default-database\*n
デフォルトのデータベースを検索します。
これはデフォルトの動作であり、このコマンドの否定バージョンが有用です。
.B refer
は検索を行なう必要が最初に出てきた場合、デフォルトのデータベースを
検索するべきかどうかを決定します。
そのため
.B no-default-database
コマンドを有効とするためには、それ以前に指定しておく必要があります。
.TP
.BI discard\*n\  fields
参考文献が読み込まれた時、
.I fields
を無効とします。
.I fields
の文字列の定義は出力されません。
初期状態では
.I fields
は
.B XYZ
となっています。
.TP
.BI et-al\*n\  string\ m\ n
ラベル式における式
.B @
の評価での
.B
et al
の使い方を制御します。
著者のシーケンスを明確にするために必要な著者の数を
.I u
、著者の合計が
.I t
とすると、最後の
.IR t \|\-\| u
の著者が
.I string
によって置換され、
.IR t \|\-\| u
が
.I m
より小さくなく、
.I t
が
.I n
より小さくないようになります。
デフォルトでは
.RS
.IP
.B
et-al " et al" 2 3
.LP
となります。
.RE
.TP
.BI include\  filename
.I filename
をインクルードし、その内容をコマンドとして解釈します。
.TP
.BI join-authors\  string1\ string2\ string3
これはどのように作者を連結するかを指定します。
ちょうど 2 人の作者がある場合、
.I string1
によって連結されます。
2 人より多い作者がある場合、最後の 2 人を除いた作者は
.I string2
で連結され、最後の 2 人の作者は
.I string3
で連結されます。
もし
.I string3
が省略されると、デフォルトは
.I string1
となります。
もし
.I string2
も省略されると、デフォルトは
.I string1
となります。
例えば、
.RS
.IP
.B
join-authors " and " ", " ", and "
.LP
は作者の連結をデフォルトの方法に戻します。
.RE
.TP
.B label-in-reference\*n
参考文献を出力する時に、文字列
.B [F
を参考文献のラベルに定義します。
これはデフォルトの動作です。このコマンドの否定バージョンが有用です。
.TP
.B label-in-text\*n
各参考文献においてテキスト中のラベルを出力します。
ラベルは
.B bracket-label
コマンドに記述されているようにそれを囲むテキストと分離されます。
これはデフォルトの動作です。このコマンドの否定バージョンが有用です。
.TP
.BI label\  string
.I string
はどのように各参考文献にラベルをつけるかを記述するラベル式となります。
.TP
.BI separate-label-second-parts\  string
2つの部分からなるラベルをマージする時、2 番目のラベルの 2 番目の部分を
.I string
で最初のラベルと分離します。
ラベル式については
.B <>
のラベル式の説明を参照して下さい。
.TP
.B move-punctuation\*n
テキストにおいてラベルの後の行末の句読点を移動します。
ラベルに肩文字の数字を使っていなければ、このコマンドを使うといいでしょ
う。
.TP
.BI reverse\*n\  string
名前が
.I string
中にあるフィールドを逆にします。
各フィールド名の後にはいくつのフィールドが逆にされるかを示す数が指定さ
れます。
フィールドにこの数が指定されなければ、そのフィールドは全て逆になります。
.TP
.BI search-ignore\*n\  fields
インデックスが存在しないデータベースでキーを検索している際に、
.I fields
の内容を無視します。
初期状態ではフィールド
.B XYZ
が無視されます。
.TP
.BI search-truncate\*n\  n
キーの最初の
.I n
文字が与えられることのみを要求します。
実際にデータベース中で与えられたキーを検索する時には
.I n
とキーの長さの大きい方の長さに切られます。
初期状態では
.I n
は 6 です。
.TP
.BI short-label\*n\  string
.I string
はラベルのもう 1 つの (通常は短縮形の) スタイルを指定するラベル式です。
これは
.B #
フラグが引用で与えられている時に使われます。
author-date スタイルのラベルを使う時、作者は文脈から明らかに識別できる
ことがあり、ラベルでは作者を省略したいことがあります。
通常、
.B short-label
コマンドは日付と (多分) 明確な文字のみを含むラベルを指定するために使用
されます。
.TP
.BI sort\*n\  string
.B string
に従って参考文献をソートします。
参考文献は自動的に累積されます。
.I string
はフィールド名のリストであり、各フィールド名にはソートに使われる名前に
いくつのフィールドがあるかを示す数字が続きます。
.B +
を名前のついた全てのフィールドを使うことを示すために使うことができます。
また、
.B .
を参考文献が (一時的な) ラベルを使ってソートされることを示すために使う
こともできます。
(
.B
ラベル式
のセクションで一時的なラベルの概念について説明しています。)
.TP
.B sort-adjacent-labels\*n
参考文献リスト中での位置に従って、テキスト中の隣接しているラベルをソー
トします。
このコマンドは通常は
.B abbreviate-label-ranges
コマンドが与えられている時か、ラベル式に
.B <>
式が含まれている時に使用するべきです。
これは参考文献が累積されていないと影響がありません。
.SS ラベル式
.LP
ラベル式は通常もしくは一時的に評価できます。
通常評価の結果は出力に使われます。
一時的評価の結果は
.I
一時的ラベル
と呼ばれ、通常評価でラベルを明確にする必要がある情報を集めるために使わ
れます。
.B date-as-label
と
.B short-label
コマンドで指定されるラベル式は一時的には評価されません。
通常評価と一時的評価は
.B @
と
.B *
と
.B %
の式を除いた全てのタイプの式で同じです。
以下の説明は特に指定された場合を除き通常評価に適用されます。
.TP
.I field
.TQ
.I field\ n
.I field
の
.I n
番めの部分です。
.I n
が省略された場合はデフォルトは 1 となります。
.TP
.BI ' string '
.I string
中の文字は文字通り解釈されます。
.TP
.B @
全ての作者を
.B join-authors
コマンドで指定された通りに連結します。
各々の作者名の全体が使用されます。
しかし参考文献が作者でソートされると
(すなわち
.B A+
で始まるソート仕様)、
作者のラストネームが代わりに使用され (これは曖昧さを持ち込みません)、
また作者の頭文字のシーケンスが全ての作者の代わりに使用されます (これも
曖昧さを持ち込みません)。
いくつかの参考文献の
.IR i 番目
の作者にラストネームだけを使うのは他に参考文献がある時には曖昧であると
考えられます。すなわち参考文献の最初の
.IR i \|-\|1
人の作者が同じで、
.IR i 番目
の作者は同じでないが、
.IR i 番目
の作者のラストネームが同じであるような場合です。
いくつかの参考文献の作者のシーケンスの適切な頭文字のサブシーケンスは、
適切な頭文字のサブシーケンスとしてのサブシーケンスをもつ作者の別のシー
ケンスをとる参考文献がある場合には、曖昧であると考えられます。
作者の頭文字のサブシーケンスが使われる場合、残りの作者は
.B et-al
コマンドで指定された文字列で置き換えられます。
このコマンドは頭文字のシーケンスを使うことができる以前に満たされる追加
の要求も指定できます。
.B @
は一時的に作者の正式の表現に評価され、ソートのために同等かどうかを比較
する作者は同じ表現となります。
.TP
.BI % n
.TQ
.B %a
.TQ
.B %A
.TQ
.B %i
.TQ
.B %I
参考文献のシリアル番号は
.B %
が続く文字に従ってフォーマットされます。
参考文献のシリアル番号はこの参考文献として同じ一時的ラベルをもつ先に現
れた参考文献の番号に 1 を加えたものとなります。
これらの式は一時的に空の文字列に評価されます。
.TP
.IB expr *
この参考文献としての同じ一時的ラベルを持つもう 1 つの参考文献がある場合、
空の文字列でなければ
.I expr
となります。
これは一時的に評価され、空の文字列になります。
.TP
.IB expr + n
.TQ
.IB expr \- n
.I expr
の最初
.RB ( + )
または末尾
.RB ( \- )
の
.I n
文字の大文字か小文字か数字です。
troff の (
.B \e('a
のような)
特別文字は 1 文字としてカウントされます。
アクセント文字列は保持されますが、合計にはカウントされません。
.TP
.IB expr .l
.I expr
を小文字に変換したものです。
.TP
.IB expr .u
.I expr
を大文字に変換したものです。
.TP
.IB expr .c
.I expr
を大文字とそれに続く小文字に変換したものです。
.TP
.IB expr .r
.I expr
をラストネームが最初に来るように逆にしたものです。
.TP
.IB expr .a
ファーストネームが略称になった
.I expr
です。
.B abbreviate
コマンドによって指定されたフィールドはラベルが評価される前に略称にされ
ます。
このため、
.B .a
は参考文献の中ではなくラベルの中でのみフィールドを略称にしたい時のみ有
用です。
.TP
.IB expr .y
.I expr
の年の部分です。
.TP
.IB expr .+y
.I expr
の年の前の部分、もしくはそれが年を含んでいなければ
.I expr
の全体となります。
.TP
.IB expr .\-y
.I expr
の年の後の部分、もしくは
.I expr
が年を含んでいなければ空の文字列となります。
.TP
.IB expr .n
.I expr
のラストネームの部分となります。
.TP
.IB expr1 \(ti expr2
.I expr1
となります。ただし、
.I expr1
の最後の文字が
.B \-
である場合は
.I expr2
に置き換えられます。
.TP
.I expr1\ expr2
.I expr1
と
.I expr2
の結合です。
.TP
.IB expr1 | expr2
.I expr1
が空でなければ
.I expr1
となり、それ以外では
.I expr2
となります。
.TP
.IB expr1 & expr2
.I expr1
が空でなければ
.I expr2
となり、それ以外では空の文字列となります。
.TP
.IB expr1 ? expr2 : expr3
.I expr1
が空でなければ
.I expr2
となりそれ以外では
.I expr3
となります。
.TP
.BI < expr >
このラベルには 2 つの部分があり、
.I expr
によって分離されています。
2 つの部分からなり、最初の部分が同じである 2 つの連続したラベルは最初
のラベルに次のラベルの 2 番目の部分を追加し、
.B separate-label-second-parts
コマンド (初期値ではスペースが続くコンマ) によって指定された文字列によっ
て分離することによってマージされます。その結果のラベルもまた 2 つの部
分からなるラベルとなり、最初の部分がマージ前の最初の部分となります。さ
らに追加されるラベルはこれにマージされます。
最初の部分が空であっても差し支えありません。これは
.B short-label
コマンドで使う式で使うことができます。
.TP
.BI ( expr )
.I expr
と同様です。
グルーピングを行なうために使われます。
.LP
上述の式は順位 (高いものが最初) の順にリストされます。
.B &
と
.B |
は同じ優先順位となります。
.SS マクロインタフェース
各参考文献はマクロ
.B ]-
の呼び出しで始まります。
文字列
.B [F
は
.B no-label-in-reference
コマンドが与えられていないと、
この参考文献のラベルになるように定義されます。
その後一連の文字列の定義が続きます。
定義は各フィールドに 1 つずつで、
文字列
.BI [ X
はフィールド
.I X
に対応します。
数値レジスタ
.B [P
はフィールド
.B P
がページの範囲を含んでいれば 1 にセットされます。
.B [T
と
.B [A
と
.B [O
の数値レジスタは、
.B .?!
の文字のいずれかで終るフィールド
.B T
と
.B A
と
.B O
に対応して 1 にセットされます。
数値レジスタ
.B [E
は文字列
.B [E
が複数の名前を含んでいれば 1 にセットされます。
参考文献にはマクロ
.B ][
への呼び出しが続きます。
このマクロの最初の引数には参考文献のタイプを表す数を与えます。
もし参考文献がフィールド
.B J
を含んでいると、タイプ 1 として分類されます。
またフィールド
.B B
を含んでいるとタイプ 3、フィールド
.B G
か
.B R
を含んでいるとタイプ 4、フィールド
.B I
を含んでいるとタイプ 2となり、これら以外ではタイプ 0 となります。
2 番目の引数はタイプ
.BR other ,
.BR journal-article ,
.BR book ,
.B article-in-book
もしくは
.B tech-report
のシンボル名です。
.B bibliography
コマンドによって累積もしくは生成される参考文献のグループは
.B ]<
マクロの呼び出しに先行し、
.B ]>
マクロの呼び出しが続きます。
.SH 関連ファイル
.Tp \w'\fB/usr/share/dict/papers/Ind'u+2n
.B /usr/share/dict/papers/Ind
デフォルトのデータベースです。
.TP
.IB file .i
インデックスファイルです。
.SH "関連項目"
.BR indxbib (1),
.BR lookbib (1),
.BR lkbib (1)
.br
.SH バグ
ラベル表記法において
.B <>
表記は
.BI . char
表記の中では無視されます。
