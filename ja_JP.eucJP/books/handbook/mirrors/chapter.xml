<?xml version="1.0" encoding="euc-jp"?>
<!--
     The FreeBSD Documentation Project
     The FreeBSD Japanese Documentation Project

     Original revision: r47312
     $FreeBSD$
-->
<appendix xmlns="http://docbook.org/ns/docbook"
  xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0"
  xml:id="mirrors">
  <title>&os; の入手方法</title>

  <sect1 xml:id="mirrors-cdrom">
    <title><acronym>CD</acronym> および
      <acronym>DVD</acronym> セット</title>

    <para>&os; の <acronym>CD</acronym> および <acronym>DVD</acronym>
      のセットは以下のオンライン業者から入手できます。</para>

    <itemizedlist>
      <listitem>
	<address>&os; Mall, Inc.
	  <street>2420 Sand Creek Rd C-1 #347</street>
	  <city>Brentwood</city>, <state>CA</state>
	  <postcode>94513</postcode>
	  <country>USA</country>
	  電話: <phone>+1 925 240-6652</phone>
	  Fax: <fax>+1 925 674-0821</fax>
	  Email: <email>info@freebsdmall.com</email>
	  WWW: <otheraddr
	    xlink:href="http://www.freebsdmall.com/">http://www.freebsdmall.com/</otheraddr>
	</address>
      </listitem>

      <listitem>
	<address>Getlinux
	  <street>78 Rue de la Croix Rochopt</street>
	  <city>&Eacute;pinay-sous-S&eacute;nart</city>
	  <postcode>91860</postcode>
	  <country>France</country>
	  Email: <email>contact@getlinux.fr</email>
	  WWW: <otheraddr
	    xlink:href="http://www.getlinux.fr">http://www.getlinux.fr/</otheraddr>
	</address>
      </listitem>

      <listitem>
	<address>Dr. Hinner EDV
	  <street>Kochelseestr. 11</street>
	  <postcode>D-81371</postcode> <city>M&uuml;nchen</city>
	  <country>Germany</country>
	  電話: <phone>(0177) 428 419 0</phone>
	  Email: <email>infow@hinner.de</email>
	  WWW: <otheraddr
	    xlink:href="http://www.hinner.de/linux/freebsd.html">http://www.hinner.de/linux/freebsd.html</otheraddr>
	</address>
      </listitem>

<!--
This site is just showing the Apache test page.
	<listitem>
	  <address>
	    Linux Distro UK
	    <street>42 Wharfedale Road</street>
	    <city>Margate</city>
	    <postcode>CT9 2TB</postcode>
	    <country>United Kingdom</country>
	    WWW: <otheraddr
	      xlink:href="https://linux-distro.co.uk/">https://linux-distro.co.uk/</otheraddr>
	  </address>
	</listitem>

This site doesn't have any products newer than 8.1 which is now EOL'd
<listitem>
	  <address>The Linux Emporium
	    <street>The Techno Centre, Puma Way</street>
	    <city>Parkside</city>
	    <postcode>CV1 2TT</postcode>
	    <country>United Kingdom</country>
	    電話: <phone>+44 (0)247 615 8121</phone>
	    Fax: <fax>+44 1491 837016</fax>
	    WWW: <otheraddr
	      xlink:href="http://www.linuxemporium.co.uk/products/bsd/">http://www.linuxemporium.co.uk/products/bsd/</otheraddr>
	  </address>
	</listitem>
-->

      <listitem>
	<address>Linux Center
	  <street>Galernaya Street, 55</street>
	  <city>Saint-Petersburg</city>
	  <postcode>190000</postcode>
	  <country>Russia</country>
	  電話: <phone>+7-812-309-06-86</phone>
	  Email: <email>info@linuxcenter.ru</email>
	  WWW: <otheraddr
	    xlink:href="http://linuxcenter.ru/shop/freebsd">http://linuxcenter.ru/shop/freebsd</otheraddr>
	</address>
      </listitem>
    </itemizedlist>
  </sect1>

  <sect1 xml:id="mirrors-ftp">
    <title><acronym>FTP</acronym> サイト</title>

    <para>&os; の公式な情報は anonymous <acronym>FTP</acronym>
      によって世界中のミラーサイトより入手できます。<uri
	xlink:href="ftp://ftp.FreeBSD.org/pub/FreeBSD/">ftp://ftp.FreeBSD.org/pub/FreeBSD/</uri>
      サイトは、<acronym>HTTP</acronym> および <acronym>FTP</acronym>
      経由で利用できます。
      これは、プロジェクトクラスタの管理者により運用されている数多くのコンピュータから構成されています。
      また、GeoDNS により、近くの利用可能なミラーをユーザに提供します。</para>

    <para>さらに、&os; は以下のミラーサイトから anonymous <acronym>FTP</acronym>
      によって入手できます。もし &os; を anonymous <acronym>FTP</acronym>
      によって手にいれる場合は、
      近くのサイトを利用するようにしてください。
      <quote>一次ミラーサイト</quote> としてあげられているサイトには、
      &os; の各アーキテクチャで利用可能なすべてのバージョンのアーカイブ一式が用意されています。
      あなたが住んでいる国や地域には、
      より高速にダウンロードできるサイトがおそらくあるでしょう。
      各国のミラーサイトには、
      人気のあるアーキテクチャの最新のバージョンが置いてありますが、
      &os; のアーカイブ全体はもしかするとないかもしれません。
      すべてのサイトは anonymous <acronym>FTP</acronym>
      別の方法によるアクセスを提供しているサイトもあります。
      各サイトで提供しているアクセス方法は、
      ホスト名に続く括弧の中に記載されています。</para>

    &chap.mirrors.ftp.index.inc;

    &chap.mirrors.lastmod.inc;

    &chap.mirrors.ftp.inc;
  </sect1>

  <sect1 xml:id="ctm">
    <title>CTM を使う</title>

    <indexterm>
      <primary>CTM</primary>
    </indexterm>

    <para><emphasis>訳: &a.hanai;、1997 年 9 月 13 日</emphasis></para>

    <para><application>CTM</application> は、
      リモートのディレクトリツリーを中央のツリーに同期させるための手段です。
      &os; システムに組み込まれており、&os;
      のソースリポジトリとの同期に使うことができます。
      リポジトリ全体の同期や特定のブランチセットの同期に用いることができます。</para>

    <para><application>CTM</application> は、
      特にお粗末な TCP/IP 接続しか持っていなかったり、
      TCP/IP 接続が行なえない環境での利用を想定して設計されています。
      変更点を自動的にメールで送られてくるように設定することができます。
      アクティブなブランチでは 1
      日に最大三つまでのデルタを受け取る必要があります。
      デルタのサイズは常にできるだけ小さく保たれています。
      大抵の場合 5KB よりも小さく、
      たまに (10 回に 1 回程度) 10-50KB になり、
      ときおり 100KB 以上のサイズになります。</para>

    <para><application>CTM</application> を使って &os;
      の開発を追いかける時には、
      あらかじめパッケージ化されたリリースとは異なり、
      開発ソースの作業ディレクトリに関連した注意点に気をつけてください。
      これに関しては、
      <link linkend="current-stable">開発ブランチを追いかける</link>
      の章を参照してください。</para>

    <para>デルタを作り出す過程や <application>CTM</application>
      を他の目的に使うためのドキュメントは現在ほとんどありません。
      <application>CTM</application> に関連した質問については、
      &a.ctm-users.name; メーリングリストに相談してください。</para>

    <sect2 xml:id="mirrors-ctm">
      <title>デルタを入手する</title>

      <para><application>CTM</application> が用いる <quote>デルタ</quote>
	は、anonymous <acronym>FTP</acronym>
	もしくはメールで入手できます。</para>

      <para><acronym>FTP</acronym>
	のデルタは以下のミラーサイトから入手できます。
	もし anonymous <acronym>FTP</acronym> を使って
	<application>CTM</application> のデルタを手にいれる場合は、
	地理的に近くにあるミラーサイトを利用するようにしてください。
	何か問題がある場合は、&a.ctm-users.name;
	メーリングリストに相談してください。</para>

      <variablelist>
	<varlistentry>
	  <term>カリフォルニア、サンフランシスコ近辺、公式なソース</term>
	  <listitem>
	    <itemizedlist>
	      <listitem>
		<para><uri
		  xlink:href="ftp://ftp.FreeBSD.org/pub/FreeBSD/development/CTM/">ftp://ftp.FreeBSD.org/pub/FreeBSD/development/CTM/</uri></para>
	      </listitem>
	      <listitem>
		<para><uri
		  xlink:href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CTM/">ftp://ftp.FreeBSD.org/pub/FreeBSD/CTM/</uri></para>
	      </listitem>
	    </itemizedlist>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>南アフリカ、古い差分ファイルのバックアップサーバ</term>
	  <listitem>
	    <itemizedlist>
	      <listitem>
		<para><uri
		  xlink:href="ftp://ftp.za.FreeBSD.org/pub/FreeBSD/CTM/">ftp://ftp.za.FreeBSD.org/pub/FreeBSD/CTM/</uri></para>
	      </listitem>
	    </itemizedlist>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>台湾/中華民国</term>

	  <listitem>
	    <itemizedlist>
	      <listitem>
		<para><uri
		  xlink:href="ftp://ctm.tw.FreeBSD.org/pub/FreeBSD/development/CTM/">ftp://ctm.tw.FreeBSD.org/pub/FreeBSD/development/CTM/</uri></para>
	      </listitem>

	      <listitem>
		<para><uri
		  xlink:href="ftp://ctm2.tw.FreeBSD.org/pub/FreeBSD/development/CTM/">ftp://ctm2.tw.FreeBSD.org/pub/FreeBSD/development/CTM/</uri></para>
	      </listitem>

	      <listitem>
		<para><uri
		  xlink:href="ftp://ctm3.tw.FreeBSD.org/pub/FreeBSD/development/CTM/">ftp://ctm3.tw.FreeBSD.org/pub/FreeBSD/development/CTM/</uri></para>
	      </listitem>
	    </itemizedlist>
	  </listitem>
	</varlistentry>
      </variablelist>

      <para>メールでデルタを得たいという場合は、<uri
	  xlink:href="http://lists.freebsd.org/mailman/listinfo">http://lists.freebsd.org/mailman/listinfo</uri>
	から、<literal>ctm-src</literal>
	配布メーリングリストのいずれかに参加してください。
	たとえば &a.ctm-src-cur.name;
	は head 開発ブランチに対応しています。&a.ctm-src-9.name;
	は 9.X リリースのブランチに対応したものです</para>

      <para>メールで <application>CTM</application>
	の更新ファイルを受け取り始めたら、
	中身を取り出して使用するために
	<command>ctm_rmail</command> を使ってください。
	このプロセスを自動で行ないたいのであれば、
	このコマンドを <filename>/etc/aliases</filename>
	から直接実行することもできます。
	さらに詳しいことは &man.ctm.rmail.1; をご覧ください。</para>

      <note>
	<para>どの方法を使ってデルタを入手していたとしても、
	  <application>CTM</application> のユーザは
	  &a.ctm-announce.name;
	  メーリングリストを購読するようにしてください。
	  このメーリングリストは、
	  <application>CTM</application>
	  に関するアナウンスが投稿される唯一の場所です。</para>
      </note>
    </sect2>

    <sect2>
      <title><application>CTM</application> の使い方</title>

      <para>初めて <application>CTM</application>
	デルタを使う前に、出発点を作成しておく必要があります。</para>

      <para>その方法の一つは、空のディレクトリに対して、
	<quote>スタータ</quote> デルタを使う方法です。
	スタータデルタは
	<filename>src-cur.3210XEmpty.gz</filename>
	のように、<literal>XEmpty</literal>
	というファイル名になります。
	<literal>X</literal>
	の後ろは最初の開始ポイントに対応し、
	<filename>Empty</filename> は空のディレクトリを表します。
	ルールとして <literal>Empty</literal> からの移行デルタは
	100 デルタごとに作られます。
	スタータデルタである
	<filename>XEmpty</filename> のデルタは、70 から 80MB の
	<command>gzip</command>
	で圧縮された大きなデータということに注意してください。</para>

      <para>もう一つの方法は、RELEASE
	のメディアからソースをコピーしたり展開する方法です。
	この方法では、
	インターネット上で大きなデータの転送を行う必要がありません。</para>

      <para>一度ベースとなるデルタを作成したら、
	それに続く大きな数字を持つ多数のすべてのデルタを適用してください。
	デルタを適用するためには、以下のように実行してください。</para>

      <screen>&prompt.root; <userinput>cd /directory/to/store/the/stuff</userinput>
&prompt.root; <userinput>ctm -v -v /directory/which/stores/the/deltas/src-xxx.*</userinput></screen>

      <para>一度に適用されるデルタは一つで、
	一度適用されたデルタは無視されるので、
	複数のデルタを一つのコマンドで適用することができます。
	<application>CTM</application>
	は <command>gzip</command> で圧縮されているデルタを理解するので、
	ディスクの節約にもなります。</para>

      <para>デルタを適用せずに確認だけを行うには、
	コマンドラインに <option>-c</option> フラグを加えてください。
	<application>CTM</application>
	はローカルのツリーに対して実際には何も行ないません。
	デルタの完全性を確認し、
	現在のツリーに問題なく使用できるかを確認します。
	オプションに関するより多くの情報や、
	デルタを適用する時に <application>CTM</application>
	が用いるプロセスの全体については、&man.ctm.1; をご覧ください。</para>

      <para>ローカルのソースツリーを最新に保つには、
	新しいデルタが入手可能になるたびに、
	<application>CTM</application> に適用してください。</para>

      <para>デルタを適用後、
	もしデルタを再ダウンロードするのが骨の折れる作業であれば、
	デルタを消さないでおいてください。
	このようにすると、将来のディザスタリカバリで必要になった場合に、
	ローカルにあるコピーを利用できます。</para>
    </sect2>

    <sect2>
      <title>ローカルの変更を保存する</title>

      <para>開発者はソースツリー中のファイルを使って、
	実験したり変更したくなるものです。
	<application>CTM</application>
	はローカルの変更を制限つきでサポートします。
	ファイルの存在をチェックする前に、同じ名前で
	<filename>.ctm</filename>
	という拡張子のついたファイルを参照しにいきます。
	このファイルが存在する場合、<application>CTM</application>
        はオリジナルファイルの代りにこのファイルを処理します。</para>

      <para>この動作はローカルの変更を保持する簡単な手段を提供します。
	ファイルを変更する前に、<filename>.ctm</filename>
	という拡張子のファイル名にコピーしてください。
	あとは自由にオリジナルの名前を持つファイルを変更してください。
	<application>CTM</application> は、<filename>.ctm</filename>
	の拡張子を持つファイルにのみに適用されます。</para>
    </sect2>

    <sect2>
      <title><application>CTM</application>
	のその他のオプション</title>

      <variablelist>
	<varlistentry>
	  <term>更新で変更されるファイルを正確に知る</term>

	  <listitem>
	    <para><application>CTM</application>
	      がローカルのソースリポジトリに対して、
	      どのような変更を行うかを知るには、
	      <option>-l</option>
	      オプションを使ってください。
	      このオプションは、変更のログを作成したり、
	      変更されたファイルに対して、
	      なんらかの方法で 前・後処理したい場合には、
	      役に立つでしょう。</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>更新前にバックアップを取る</term>

	  <listitem>
	    <para><application>CTM</application>
	      の更新によって変更されるファイルすべてのバックアップをとるには、
	      <option>-B
		<replaceable>backup-file</replaceable></option>
	      オプションを指定してください。
	      このオプションを使うと、
	      <application>CTM</application> は、
	      デルタで変更されるファイルすべてを
	      <filename>backup-file</filename>
	      としてバックアップするようになります。</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>更新で変更されるファイルを制限する</term>

	  <listitem>
	    <para><application>CTM</application>
	      の更新の範囲を制限したり一連のデルタのから
	      ほんの数ファイルを抽出するには、
	      使用するファイルを指定する
	      <option>-e</option> と
	      どのファイルを無視するかを指定する
	      <option>-x</option>
	      オプションを使って、正規表現で指定できます。</para>

	    <para>例えば、<filename>lib/libc/Makefile</filename>
	      の最新のコピーを保存してある <application>CTM</application>
	      デルタのコレクションから抽出するには、
	      以下のコマンドを実行してください。</para>

	    <screen>&prompt.root; <userinput>cd /directory/to/extract/to/</userinput>
&prompt.root; <userinput>ctm -e '^lib/libc/Makefile' /directory/which/stores/the/deltas/src-xxx.*</userinput></screen>

	    <para><application>CTM</application>
	      デルタで指定されたファイルごとに、<option>-e</option>
	      そして <option>-x</option>
	      オプションがコマンドラインで指定された順序で適用されます。
	      すべての<option>-e</option> そして <option>-x</option>
	      オプションが適用された後に更新対象と選択された場合に限り、
	      <application>CTM</application>
	      はそのファイルを処理します。</para>
	  </listitem>
	</varlistentry>
      </variablelist>
    </sect2>
<!--
Comment out for now until these can be verified.
    <sect2>
      <title><application>CTM</application>の将来計画</title>

      <para>重要なもの</para>

      <itemizedlist>
	<listitem>
	  <para>なんらかの <application>CTM</application> システムへの認証機構を用い、不正な
	    <application>CTM</application> の更新の検出を可能とする。</para>
	</listitem>

	<listitem>
	  <para><application>CTM</application>
	    へのオプションを整理する。さもないと混乱し、
	    直観に反したものになります。</para>
	</listitem>
      </itemizedlist>

      <para><literal>ports</literal> コレクションに対するデルタもあるのですが、
        これに興味を持っている人はまだ少ないようです。</para>
    </sect2>
    -->
  </sect1>

  <sect1 xml:id="svn">
    <title><application>Subversion</application> を使う</title>

    <indexterm>
      <primary>Subversion</primary>
    </indexterm>

    <sect2 xml:id="svn-intro">
      <title>はじめに</title>

      <para>2012 年 7 月から、&os;
	はすべてのソースコード、ドキュメント、Ports Collection
	を管理するバージョン管理システムに
	<application>Subversion</application> を使っています。</para>

      <note>
	<para>一般的には <application>Subversion</application>
	  は開発者向けのツールです。
	  ユーザは、&os; のベースシステムのアップデートに
	  <command>freebsd-update</command> (<xref
	    linkend="updating-upgrading-freebsdupdate"/>)、
	  Ports Collection のアップデートには <command>portsnap</command> (<xref
	    linkend="ports-using"/>)
	  を使うことを好むでしょう。</para>
      </note>

      <para>この章では、&os; システムへの
	<application>Subversion</application> のインストール方法および、
	&os; リポジトリをローカルに準備する方法について説明します。
	<application>Subversion</application>
	を利用するための情報についても紹介します。</para>
    </sect2>

    <sect2 xml:id="svn-svnlite">
      <title>Svnlite</title>

      <para>&os; には、機能は同じですが
	<application>Subversion</application> より軽い
	<command>svnlite</command> がインストールされています。
	<command>svnlite</command> があなたの要求を満たしているのであれば、
	他にインストールする必要はありません。</para>

      <para><command>svnlite</command> で
	<acronym>HTTPS</acronym> サーバにアクセスしたいのであれば、
	ルート証明書バンドルをインストール必要があります。</para>

      <screen>&prompt.root; <userinput>pkg install ca_root_nss</userinput></screen>

      <para>証明書バンドルをインストールすることで、
	<command>svnlite</command>
	は改ざんなくリポジトリサーバと安全に通信できます。</para>

      <para><command>svnlite</command> を使用する場合には、
	以下で示される例において、コマンド名を置き換えてください。</para>
    </sect2>

    <sect2 xml:id="svn-install">
      <title>インストール</title>

      <para><command>svnlite</command> を利用できない場合や、
	<application>Subversion</application> を使いたいのであれば、
	事前に <application>Subversion</application>
	をインストールしておく必要があります。</para>

      <para>もし、すでに ports ツリーが用意してあれば、
	以下のようにして <application>Subversion</application>
	をインストールできます。</para>

      <screen>&prompt.root; <userinput>cd /usr/ports/devel/subversion</userinput>
&prompt.root; <userinput>make install clean</userinput>
&prompt.root; <userinput>cd /usr/ports/security/ca_root_nss</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>

      <para>package を使うと、簡単に
	<application>Subversion</application> をインストールできます。</para>

      <screen>&prompt.root; <userinput>pkg install subversion</userinput>
&prompt.root; <userinput>pkg install ca_root_nss</userinput></screen>
    </sect2>

    <sect2 xml:id="svn-usage">
      <title><application>Subversion</application> の実行</title>

      <para>ローカルディレクトリにソースコードをダウンロードするには、
        <command>svn</command> コマンドを使ってください。
        このディレクトリにあるファイルを、
        <emphasis>ローカル作業コピー</emphasis> と呼びます。</para>

      <warning>
	<para><emphasis><command>checkout</command> を使う前に、
	  ローカルディレクトリを移動するか削除してください。</emphasis></para>

	<para><command>svn</command>
	  以外の方法で用意されたディレクトリでチェックアウトすると、
	  すでに存在するファイルと、
	  リポジトリから持ってきたファイルとの間で衝突が起きてしまいます。</para>
      </warning>

      <para><application>Subversion</application> では、リポジトリの指定に
	<replaceable>protocol://hostname/path</replaceable> 形式の
	<acronym>URL</acronym> を用います。
	以下に記載されているように、
	ミラーサイトは異なる複数のプロトコルに対応しています。
	アクセスする &os; リポジトリは、パス (path) の最初で指定します。
	リポジトリは 3 つあります。
	<literal>base</literal> は &os; ベースシステムのソースコード、
	<literal>ports</literal> は Ports Collection、
	そして <literal>doc</literal> はドキュメントのリポジトリです。
	たとえば、
	<literal>https://svn.FreeBSD.org/ports/head/</literal>
	という URL は、<literal>https</literal> プロトコルによる
	ports リポジトリのメインブランチを示しています。</para>

      <para>以下のように入力して、リポジトリからチェックアウトしてください。</para>

      <screen>&prompt.root; <userinput>svn checkout <replaceable>svn-mirror</replaceable>/<replaceable>repository</replaceable>/<replaceable>branch</replaceable> <replaceable>lwcdir</replaceable></userinput></screen>

      <para>ここで、<replaceable>repository</replaceable>,
	<replaceable>branch</replaceable> および <replaceable>root</replaceable>
	は以下のとおりです。</para>

      <itemizedlist>
	<listitem>
	  <para><replaceable>svn-mirror</replaceable> は、
	    <link linkend="svn-mirrors">Subversion
	    ミラーサイト</link> のひとつの URL です。</para>
	</listitem>

	<listitem>
	  <para><replaceable>repository</replaceable> には、
	    プロジェクトのリポジトリ、すなわち <literal>base</literal>,
	    <literal>ports</literal>, または <literal>doc</literal>
	    のどれかひとつを指定します。</para>
	</listitem>

	<listitem>
	  <para><replaceable>branch</replaceable> は、使うリポジトリによります。
	    <literal>ports</literal> および <literal>doc</literal>
	    では、ほとんどの変更が
	    <literal>head</literal> ブランチで行われます。
	    <literal>base</literal> リポジトリでは、<literal>head</literal>
	    ブランチで -CURRENT の最新バージョンを管理しています。
	    -STABLE ブランチの最新バージョンは、
	    8.<replaceable>x</replaceable> は <literal>stable/8</literal>,
	    9.<replaceable>x</replaceable> は <literal>stable/9</literal>,
	    そして
	    10.<replaceable>x</replaceable> は <literal>stable/10</literal>
	    で管理しています。</para>
	</listitem>

	<listitem>
	  <para><replaceable>lwcdir</replaceable> は、
	    指定したブランチの中身が置かれるターゲットのディレクトリです。
	    通常 <literal>ports</literal> は <filename>/usr/ports</filename>、
	    <literal>base</literal> は <filename>/usr/src</filename>、
	    そして <literal>doc</literal> では
	    <filename>/usr/doc</filename> と指定します。</para>
	</listitem>
      </itemizedlist>

      <para>以下の例では、Ports Collection を
	<acronym>HTTPS</acronym> プロトコルを使って、
	&os; リポジトリからチェックアウトします。
	そしてそれらは、
	<filename>/usr/ports</filename>
	のローカル作業コピーに置かれます。
	もし <filename>/usr/ports</filename> がすでに存在して、
	それが <command>svn</command> によって生成されたものでなければ、
	チェックアウトする前に、名前を変更するか削除してください。</para>

      <screen>&prompt.root; <userinput>svn checkout <replaceable>https://svn.FreeBSD.org</replaceable>/ports/head /usr/ports</userinput></screen>

      <para>初めてチェックアウトする際には、
	リモートリポジトリのすべてのブランチをダウンロードするので時間がかかります。
	どうぞ我慢してください。</para>

      <para>初めてのチェックアウト後は、
	以下を実行することでローカル作業コピーをアップデートできます。</para>

      <screen>&prompt.root; <userinput>svn update <replaceable>lwcdir</replaceable></userinput></screen>

      <para>この例で作成された
	<filename>/usr/ports</filename> をアップデートするには、
	以下のようにしてください。</para>

      <screen>&prompt.root; <userinput>svn update /usr/ports</userinput></screen>

      <para>アップデートはチェックアウトにくらべ、
	変更点のあるファイルのみが転送されるので高速です。</para>

      <para>チェックアウト後、ローカル作業コピーをアップデートするもうひとつの方法は、
	<filename>/usr/ports</filename>,
	<filename>/usr/src</filename> または
	<filename>/usr/doc</filename> ディレクトリの
	<filename>Makefile</filename> で提供されています。
	<varname>SVN_UPDATE</varname> を設定して
	<buildtarget>update</buildtarget> ターゲットを使ってください。
	たとえば、<filename>/usr/src</filename>
        をアップデートするには、以下のようにしてください。</para>

      <screen>&prompt.root; <userinput>cd /usr/src</userinput>
&prompt.root; <userinput>make update SVN_UPDATE=yes</userinput></screen>
    </sect2>

    <sect2 xml:id="svn-mirrors">
      <title><application>Subversion</application> ミラーサイト</title>

      <indexterm>
	<primary>Subversion Repository</primary>
	<secondary>ミラーサイト</secondary>
      </indexterm>

      <para>&os; <application>Subversion</application> リポジトリである
	<systemitem class="fqdomainname">svn.FreeBSD.org</systemitem> は、
	公にアクセス可能なミラーネットワークで、
	GeoDNS を用いて適切なバックエンドサーバを選択しています。
	ブラウザを用いて &os; の <application>Subversion</application>
	リポジトリを参照するには、<link
	  xlink:href="http://svnweb.FreeBSD.org/">http://svnweb.FreeBSD.org/</link>
	を利用してください。</para>

      <note>
	<para>&os; の <application>Subversion</application>
	  ミラーは、以前はこの節に記載されている自己署名 SSL
	  証明書を用いていました。
	  2005 年 7 月 14 日から、すべてのミラーは、<filename
	    role="package">security/ca_root_nss</filename> port
	  がインストールされている場合には、
	  <application>Subversion</application> が認識する公式の
	  SSL 証明書を使うようになりました。
	  昔の自己署名の証明書およびサーバ名はまだ利用可能ですが、
	  推奨されませんし、サポートもされません。</para>
      </note>

      <para><filename
	  role="package">security/ca_root_nss</filename> port
	がインストールされていない場合に、
	SHA1 および SHA256 フィンガープリントは以下のようになります。</para>

      <informaltable>
	<tgroup cols="2">
	  <colspec colwidth="1*"/>
	  <colspec colwidth="1*"/>
	  <thead>
	    <row>
	      <entry>ハッシュ</entry>
	      <entry>フィンガープリント</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry>SHA1</entry>
	      <entry><literal>E9:37:73:80:B5:32:1B:93:92:94:98:17:59:F0:FA:A2:5F:1E:DE:B9</literal></entry>
	    </row>

	    <row>
	      <entry>SHA256</entry>
	      <entry><literal>D5:27:1C:B6:55:E6:A8:7D:48:D5:0C:F0:DA:9D:51:60:D7:42:6A:F2:05:F1:8A:47:BE:78:A1:3A:72:06:92:60</literal></entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

      <para><acronym>HTTPS</acronym> は推奨されているプロトコルです。
	他のコンピュータが &os; ミラーを装う (一般的には
	<quote>マン・イン・ザ・ミドル</quote> 攻撃として知られています)
	ことや、もしくは、
	エンドユーザに対し好ましくない内容を送りつけようということに対し保護を行います。</para>

      <para>ファイアウォールまたは他の問題のため、<literal>https</literal>
	を使えなければ、転送速度がより少し早い <literal>svn</literal>
	を使ってください。
	両方を使えない場合には、
	<literal>http</literal> を使ってください。</para>

      <para>廃止予定のサーバ名がいまだ利用されている環境では、
	SHA1 および SHA256
	フィンガープリントは以下のどれかになるでしょう。</para>

      <informaltable>
	<tgroup cols="2">
	  <colspec colwidth="1*"/>
	  <colspec colwidth="1*"/>
	  <thead>
	    <row>
	      <entry>ハッシュ</entry>
	      <entry>フィンガープリント</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry>Legacy-SHA1</entry>
	      <entry><literal>1C:BD:85:95:11:9F:EB:75:A5:4B:C8:A3:FE:08:E4:02:73:06:1E:61</literal></entry>
	    </row>

	    <row>
	      <entry>Legacy-SHA1</entry>
	      <entry><literal>F6:44:AA:B9:03:89:0E:3E:8C:4D:4D:14:F0:27:E6:C7:C1:8B:17:C5</literal></entry>
	    </row>

	    <row>
	      <entry>Legacy-SHA256</entry>
	      <entry><literal>47:35:A9:09:A3:AB:FA:20:33:36:43:C5:1A:D6:E6:FB:EB:C0:C0:83:37:D4:46:9C:A0:AB:89:7F:C2:9C:4C:A3</literal></entry>
	    </row>

	    <row>
	      <entry>Legacy-SHA256</entry>
	      <entry><literal>48:3C:84:DB:7C:27:1B:FA:D5:0B:A0:D7:E0:4C:79:AA:A3:8E:A3:FA:84:E6:32:34:7D:EB:30:E6:11:01:CF:BE</literal></entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

      <para>これらの古い証明書のフィンガープリントが使われているのを見かけたら、
	廃止予定のサーバ名が使われている可能性があります。</para>
    </sect2>

    <sect2>
      <title>より詳しい情報</title>

      <para><application>Subversion</application> の利用に関する他の情報は、
	<link xlink:href="http://svnbook.red-bean.com/">Version
	  Control with Subversion</link> や <link
	  xlink:href="http://subversion.apache.org/docs/">Subversion
	Documentation</link> といった
	<quote>Subversion Book</quote> をご覧ください。</para>
    </sect2>
  </sect1>

  <sect1 xml:id="mirrors-rsync">
    <title><application>rsync</application> を使用する</title>

    <para>次のサイトは、&os; を rsync プロトコルで提供しています。
      <application>rsync</application> ユーティリティは
      &man.rcp.1; コマンドとほぼ同じ機能を実現するもので、
      こちらの方が豊富なオプションを備え、送り側と受け側の差分だけを
      転送するという rsync リモート更新プロトコルを使用するという点が異なります。
      rsync を使うと、ネットワーク経由での同期を非常に高速に行なうことが可能です。
      特に、&os; <acronym>FTP</acronym> サーバや CVS
      リポジトリのミラーサイトを作成する時に便利でしょう。
      <application>rsync</application> は、多くのオペレーティングシステムで
      利用することができます。&os; 版は、<package>net/rsync</package> の
      port か、package を使ってください。</para>

    <variablelist>
      <varlistentry>
	<term>チェコ共和国</term>

	<listitem>
	  <para>rsync://ftp.cz.FreeBSD.org/</para>

	  <para>提供しているコレクション:</para>

	  <itemizedlist>
	    <listitem>
	      <para>ftp: &os; <acronym>FTP</acronym>
		サーバの部分ミラー</para>
	    </listitem>
	    <listitem>
	      <para>&os;: &os; <acronym>FTP</acronym>
		サーバの全体ミラー</para>
	    </listitem>
	  </itemizedlist>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>オランダ</term>

	<listitem>
	  <para>rsync://ftp.nl.FreeBSD.org/</para>

	  <para>提供しているコレクション:</para>

	  <itemizedlist>
	    <listitem>
	      <para>&os;: &os; <acronym>FTP</acronym>
		サーバの全体ミラー</para>
	    </listitem>
	  </itemizedlist>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>ロシア</term>

	<listitem>
	  <para>rsync://ftp.mtu.ru/</para>

	  <para>提供しているコレクション:</para>
	  <itemizedlist>
	    <listitem>
	      <para>&os;: &os; <acronym>FTP</acronym>
		サーバの全体ミラー</para>
	    </listitem>

	    <listitem>
	      <para>&os;-Archive: &os; アーカイブ <acronym>FTP</acronym>
		サーバのミラー</para>
	    </listitem>
 	  </itemizedlist>
 	</listitem>
       </varlistentry>

      <varlistentry>
	<term>スウェーデン</term>

	<listitem>
	  <para>rsync://ftp4.se.freebsd.org/</para>

	  <para>提供しているコレクション:</para>
	  <itemizedlist>
	    <listitem>
	      <para>&os;: &os; <acronym>FTP</acronym>
		サーバの全体ミラー</para>
	    </listitem>
 	  </itemizedlist>
 	</listitem>
      </varlistentry>

      <varlistentry>
	<term>台湾</term>

	<listitem>
	  <para>rsync://ftp.tw.FreeBSD.org/</para>
	  <para>rsync://ftp2.tw.FreeBSD.org/</para>
	  <para>rsync://ftp6.tw.FreeBSD.org/</para>

	  <para>提供しているコレクション:</para>
	  <itemizedlist>
	    <listitem>
	      <para>&os;: &os; <acronym>FTP</acronym>
		サーバの全体ミラー</para>
	    </listitem>
	  </itemizedlist>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>イギリス</term>

	<listitem>
	  <para>rsync://rsync.mirrorservice.org/</para>

	  <para>提供しているコレクション:</para>

	  <itemizedlist>
	    <listitem>
	      <para>ftp.freebsd.org: &os; <acronym>FTP</acronym>
		サーバの全体ミラー</para>
	    </listitem>
	  </itemizedlist>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>アメリカ合衆国</term>

	<listitem>
	  <para>rsync://ftp-master.FreeBSD.org/</para>

	  <para>このサーバは、&os; の一次ミラーサイトとしてのみ使われています。</para>

	  <para>提供しているコレクション:</para>

	  <itemizedlist>
	    <listitem>
	      <para>&os;: &os; <acronym>FTP</acronym>
		サーバのマスタアーカイブ</para>
	    </listitem>

	    <listitem>
	      <para>acl: The &os; マスタ ACL リスト</para>
	    </listitem>
	  </itemizedlist>

	  <para>rsync://ftp13.FreeBSD.org/</para>

	  <para>提供しているコレクション:</para>

	  <itemizedlist>
	    <listitem>
	      <para>&os;: &os; <acronym>FTP</acronym>
		サーバの全体ミラー</para>
	    </listitem>
	  </itemizedlist>
	</listitem>
      </varlistentry>
    </variablelist>
  </sect1>
</appendix>
