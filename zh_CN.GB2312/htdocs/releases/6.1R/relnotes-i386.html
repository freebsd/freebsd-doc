<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>FreeBSD/i386 6.1-RELEASE 发行说明</title>
<meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.79" />
<link rel="STYLESHEET" type="text/css" href="docbook.css" />
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
</head>
<body class="ARTICLE" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084"
alink="#0000FF">
<div class="ARTICLE">
<div class="TITLEPAGE">
<h1 class="TITLE"><a id="AEN2" name="AEN2">FreeBSD/i386 6.1-RELEASE 发行说明</a></h1>

<h3 class="CORPAUTHOR">The FreeBSD Project</h3>

<p class="COPYRIGHT">版权 &copy; 2000, 2001, 2002, 2003, 2004, 2005, 2006 The FreeBSD
Documentation Project</p>

<p class="PUBDATE">$FreeBSD: src/release/doc/zh_CN.GB2312/relnotes/common/new.sgml,v
1.5.2.6.2.3 2006/05/06 16:53:40 delphij Exp $<br />
</p>

<div class="LEGALNOTICE"><a id="TRADEMARKS" name="TRADEMARKS"></a>
<p>FreeBSD 是 FreeBSD基金会的注册商标</p>

<p>IBM, AIX, EtherJet, Netfinity, OS/2, PowerPC, PS/2, S/390, 和 ThinkPad 是
国际商用机器公司在美国和其他国家的注册商标或商标。</p>

<p>IEEE, POSIX, 和 802 是 Institute of Electrical and Electronics Engineers, Inc.
在美国的注册商标。</p>

<p>Intel, Celeron, EtherExpress, i386, i486, Itanium, Pentium, 和 Xeon 是 Intel
Corporation 及其分支机构在美国和其他国家的商标或注册商标。</p>

<p>Sparc, Sparc64, SPARCEngine, 以及 UltraSPARC 是 SPARC International, Inc
在美国和其他国家的商标。 包含 SPARC 商标的产品基于 Sun Microsystems, Inc.
开发的架构。</p>

<p>许多制造商和经销商使用一些称为商标的图案或文字设计来彰显自己的产品。 本文档中出现的，
为 FreeBSD Project 所知晓的商标，后面将以 '&trade;' 或 '&reg;' 符号来标注。</p>
</div>

<div>
<div class="ABSTRACT"><a id="AEN22" name="AEN22"></a>
<p>　　这份 FreeBSD 6.1-RELEASE 的发行说明， 概括了 FreeBSD 基本系统在 6.1-STABLE
开发线上所做的改动。 本文档列举了自前一发行版本以来所有适用的安全公告， 以及对于 FreeBSD
内核以及系统附带的应用程序所做的重要修改。 对在升级时需要注意的一些问题，
也进行了简略的介绍。</p>
</div>
</div>

<hr />
</div>

<div class="TOC">
<dl>
<dt><b>目录</b></dt>

<dt>1 <a href="#INTRO">简介</a></dt>

<dt>2 <a href="#NEW">最新变动</a></dt>

<dd>
<dl>
<dt>2.1 <a href="#SECURITY">安全公告</a></dt>

<dt>2.2 <a href="#KERNEL">对内核的改动</a></dt>

<dd>
<dl>
<dt>2.2.1 <a href="#BOOT">引导区和 loader 的变化</a></dt>

<dt>2.2.2 <a href="#PROC">硬件支持</a></dt>

<dt>2.2.3 <a href="#NET-PROTO">网络协议</a></dt>

<dt>2.2.4 <a href="#DISKS">磁盘及存储</a></dt>

<dt>2.2.5 <a href="#FS">文件系统</a></dt>

<dt>2.2.6 <a href="#AEN390">基本系统附带的第三方软件</a></dt>
</dl>
</dd>

<dt>2.3 <a href="#USERLAND">用户环境的变动</a></dt>

<dd>
<dl>
<dt>2.3.1 <a href="#RC-SCRIPTS"><tt class="FILENAME">/etc/rc.d</tt> 脚本</a></dt>
</dl>
</dd>

<dt>2.4 <a href="#AEN578">基本系统包含的第三方软件</a></dt>

<dt>2.5 <a href="#PORTS">Ports/Packages 套件基础结构</a></dt>

<dt>2.6 <a href="#RELENG">发行版建造工程和功能集成</a></dt>

<dt>2.7 <a href="#DOC">文档</a></dt>
</dl>
</dd>

<dt>3 <a href="#UPGRADE">从先前版本的 FreeBSD 升级</a></dt>
</dl>
</div>

<div class="SECT1">
<h2 class="SECT1"><a id="INTRO" name="INTRO">1 简介</a></h2>

<p>　　这篇文档包括了在 i386 硬件平台上 FreeBSD 6.1-RELEASE 的发行说明。
它描述了最近刚刚加入、修改或删除了的 FreeBSD 特性的说明。 同时，它也将给出如何从先前的
FreeBSD 版本完成升级的说明。</p>

<p>　　这是一份 FreeBSD 6.1-RELEASE 的 snapshot 发布包。 您可以从 <a
href="http://www.FreeBSD.org/snapshots/"
target="_top">http://www.FreeBSD.org/snapshots/</a> 或其他镜像那里得到它的副本。 关于这个
(或其他) snapshot 发布包的更多信息，可以在 <a
href="../../../../doc/en_US.ISO8859-1/books/handbook/" target="_top">FreeBSD 手册</a>
中的 <a href="../../../../doc/en_US.ISO8859-1/books/handbook/mirrors.html"
target="_top">“如何获得 FreeBSD”附录</a> 中找到。</p>

<p>　　我们鼓励所有的用户在开始安装 FreeBSD 之前首先参考这一版本所对应的勘误信息。
勘误文档将随时更新，以便为用户提供在发布工程后期或该版本发布之后 “新发现的”
问题和相关信息。 通常，这包括已知的 bug，安全公告，以及对于文档的修订内容。 最新的
FreeBSD 6.1-RELEASE 勘误信息可以从 FreeBSD 网站获得。</p>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="NEW" name="NEW">2 最新变动</a></h2>

<p>　　这一节描述了 FreeBSD 自 6.0-RELEASE 以来最明显的新功能和变化。</p>

<p>　　发行说明中的绝大多数条目是在说明自从 6.0-RELEASE
以来的安全公告、新的驱动程序或硬件支持、新的命令或是选项、
重要的错误修补，以及基本系统中来自第三方的软件升级。 重要的 ports 和 packages
变动，或关于交付工程的变动也会在这份文档中体现。 显而易见地，发行说明不可能涵盖 FreeBSD
版本之间的每一个微小变动； 这篇文档主要关注的，仍然是安全公告，用户可以察觉的修改，
以及重要的架构改良。</p>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="SECURITY" name="SECURITY">2.1 安全公告</a></h3>

<p>　　在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=texindex&sektion=1&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">texindex</span>(1)</span></a>
中发现并修正了一处临时文件漏洞， 这一漏洞可能导致本地的攻击者以运行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=texindex&sektion=1&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">texindex</span>(1)</span></a>
工具的用户身份覆盖文件。 要了解进一步详情， 请参阅安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:01.texindex.asc"
target="_top">FreeBSD-SA-06:01.texindex</a>。</p>

<p>　　在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ee&sektion=1&manpath=FreeBSD+6.1-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">ee</span>(1)</span></a>
中发现并修正了一处临时文件漏洞， 这一漏洞可能导致本地的攻击者以运行 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ee&sektion=1&manpath=FreeBSD+6.1-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">ee</span>(1)</span></a>
的用户身份覆盖文件。 要了解进一步详情， 请参阅安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:02.ee.asc"
target="_top">FreeBSD-SA-06:02.ee</a>。</p>

<p>　　发现并修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&sektion=1&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">cpio</span>(1)</span></a>
工具中的一系列漏洞。 要了解进一步详情， 请参阅安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:03.cpio.asc"
target="_top">FreeBSD-SA-06:03.cpio</a>。</p>

<p>　　发现并修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(4)</span></a> IP
分片处理部分的一处可能导致崩溃的问题。 要了解进一步详情， 请参阅安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:04.ipfw.asc"
target="_top">FreeBSD-SA-06:04.ipfw</a>。</p>

<p>　　发现并修正了 IEEE 802.11 扫描代码中的一处潜在的缓冲区溢出问题。 要了解进一步详情，
请参阅安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:05.80211.asc"
target="_top">FreeBSD-SA-06:05.80211</a>。</p>

<p>　　发现并修正了两个可能导致一部分内核内存被泄露给用户的问题。 要了解进一步详情，
请参阅安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:06.kmem.asc"
target="_top">FreeBSD-SA-06:06.kmem</a>。</p>

<p>　　发现并修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pf&sektion=4&manpath=FreeBSD+6.1-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">pf</span>(4)</span></a> 中 IP
分片处理过程中一个可能导致在特定情况下崩溃的问题。 要了解进一步详情， 请参阅安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:07.pf.asc"
target="_top">FreeBSD-SA-06:07.pf</a>。</p>

<p>　　发现并修正了 NFS 服务器代码中一处可能导致在服务器收到长度为零的消息时崩溃的问题。
要了解进一步详情， 请参阅安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:10.nfs.asc"
target="_top">FreeBSD-SA-06:10.nfs</a>。</p>

<p>　　发现并修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fast_ipsec&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fast_ipsec</span>(4)</span></a>
实现中的一处可能导致安全关联序号无法更新， 进而导致数据包无条件地通过序号验证检查的问题。
要了解进一步详情， 请参阅安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:11.ipsec.asc"
target="_top">FreeBSD-SA-06:11.ipsec</a>。</p>

<p>　　发现并修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=opiepasswd&sektion=1&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">opiepasswd</span>(1)</span></a>
中的一处可能导致非特权用户， 能够在某些情况下为 root 用户配置 OPIE 身份验证的问题。
要了解进一步详情， 请参阅安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:12.opie.asc"
target="_top">FreeBSD-SA-06:12.opie</a>。</p>

<p>　　发现并修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sendmail</span>(8)</span></a>
中的一项可能导致远程攻击者以执行 sendmail 的用户， 通常是 <tt class="USERNAME">root</tt>
身份执行任意代码的问题。 要了解进一步详情， 请参阅安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:13.sendmail.asc"
target="_top">FreeBSD-SA-06:13.sendmail</a>。</p>

<p>　　发现并修正了在 AMD 第7和第8代处理器上运行的 FreeBSD 内核的一处信息泄露问题。
要了解进一步详情， 请参阅安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:14.fpu.asc"
target="_top">FreeBSD-SA-06:14.fpu</a>。</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="KERNEL" name="KERNEL">2.2 对内核的改动</a></h3>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ddb&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ddb</span>(4)</span></a>
调试器新增了 <tt class="LITERAL">show lock</tt> 命令。 参数为有效的锁类时，
这一命令会显示关于锁的多种信息， 并调用在 lock_class 中新增的函数指针 (lc_ddb_show)
来显示关于锁的其他信息 (例如 mutex 的持有者， 或 xlock 的 sx 锁)。</p>

<p>　　加入了针对不同平台的 <tt class="FILENAME">DEFAULTS</tt> 内核配置文件。</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=firmware&sektion=9&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">firmware</span>(9)</span></a>
子系统。 它能够使用特制的模块， 将二进制数据加载到内核中。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=random&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">random</span>(4)</span></a>
熵设备驱动程序是 MPSAFE 的了。</p>

<p>　　新增了 sysctl 变量 <code
class="VARNAME">security.mac.biba.interfaces_equal</code>， 用于配置是否以标签 <tt
class="LITERAL">biba/equal(equal-equal)</tt> 创建所有网络接口。 这对于类似 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">dhclient</span>(8)</span></a> 和
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a>
这样需要初始化网络接口， 但又不提供标签支持的程序非常有用。 默认情况下， 此变量的值为 <tt
class="LITERAL">0</tt>(禁用)。</p>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="BOOT" name="BOOT">2.2.1 引导区和 loader 的变化</a></h4>

<p>　　新增了 loader 变量 <code class="VARNAME">comconsole_speed</code>
用以调整串口速率。 如果前一阶段中引导加载器要求使用串口控制台，
则默认的速率会根据当前的串口速率确定， 否则将设为 9600 或编译时配置的内核选项 <tt
class="LITERAL">BOOT_COMCONSOLE_SPEED</tt> 所指定的值。</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="PROC" name="PROC">2.2.2 硬件支持</a></h4>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi_thermal&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">acpi_thermal</span>(4)</span></a>
驱动现在支持被动降温了。</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ce&sektion=4&manpath=FreeBSD+6.1-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">ce</span>(4)</span></a> 驱动，
这一驱动用于支持 Cronyx Tau-PCI/32 适配器。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=kbdmux&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">kbdmux</span>(4)</span></a>
驱动已经集成到了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=syscons&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">syscons</span>(4)</span></a> 和
<tt class="DEVICENAME">kbd</tt> 设备驱动程序中。 默认情况下 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=syscons&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">syscons</span>(4)</span></a>
会首先查找 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=kbdmux&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">kbdmux</span>(4)</span></a> 键盘，
如果找不到则搜索其他键盘。 切换到 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=kbdmux&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">kbdmux</span>(4)</span></a>
可以在启动时通过使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">loader</span>(8)</span></a> 来加载
<tt class="LITERAL">kbdmux</tt> 内核模块， 或在运行状态通过 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">kldload</span>(8)</span></a>
加载模块并移去当前键盘来完成。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=kbdmux&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">kbdmux</span>(4)</span></a>
驱动已被加入默认的 <tt class="FILENAME">GENERIC</tt> 内核。 此外， 由于这一变动修正了 USB
键盘探测问题， 因此引导加载器菜单中的 “Boot FreeBSD with USB keyboard”
选项也随之删去。</p>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="MM" name="MM">2.2.2.1 多媒体支持</a></h5>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=agp&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">agp</span>(4)</span></a>
驱动现在支持 ATI IGP 芯片组了。</p>

<p>　　对 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sound&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sound</span>(4)</span></a>
驱动进行了全方位的更新， 包括修正了在先前版本的系统中存在的一系列与锁有关，
可能导致系统崩溃的缺陷， 并带来了一些性能上的改善。 此外，
这一驱动现在也支持更为广泛的采样速率、 多种可选的采样精度， 以及 24/32-位 PCM
格式的转换了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_atiixp&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_atiixp</span>(4)</span></a>
驱动支持挂起和恢复功能了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_als4000&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_als4000</span>(4)</span></a>
驱动是 MPSAFE 的了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_es137x&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_es137x</span>(4)</span></a>
驱动是 MPSAFE 的了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_ich&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_ich</span>(4)</span></a>
驱动是 MPSAFE 的了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_solo&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_solo</span>(4)</span></a>
驱动是 MPSAFE 的了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_via8233&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_via8233</span>(4)</span></a>
驱动是 MPSAFE 的了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_via82c686&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_via82c686</span>(4)</span></a>
驱动是 MPSAFE 的了。</p>
</div>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="NET-IF" name="NET-IF">2.2.2.2 网络接口设备支持</a></h5>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ath&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ath</span>(4)</span></a>
驱动更新到了 0.9.16.16 版。</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bce&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bce</span>(4)</span></a> 驱动，
用以支持 Broadcom NetXtreme II (BCM5706/BCM5708) PCI/PCIe 千兆以太网控制器。
进一步详情请参考 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bce&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bce</span>(4)</span></a>。</p>

<p>　　修正了导致 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bfe&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bfe</span>(4)</span></a>
驱动无法在配有 1GB 以上 RAM 的系统上正常工作的问题。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bge&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bge</span>(4)</span></a>
驱动提供了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=polling&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">polling</span>(4)</span></a>
模式的支持。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=em&sektion=4&manpath=FreeBSD+6.1-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">em</span>(4)</span></a> 驱动支持类似
sparc64 这样的 big-endian 架构了。</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=le&sektion=4&manpath=FreeBSD+6.1-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">le</span>(4)</span></a> 驱动，
这一驱动支持 AMD Am7900 LANCE 和 Am79C9xx PCnet 网络接口控制器， 它基于 NetBSD 的实现。
尽管 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=lnc&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">lnc</span>(4)</span></a>
驱动也支持这些网络接口控制器， 这一驱动提供了许多额外的特性， 例如 MPSAFE、 ALTQ、
VLAN_MTU、 ifmedia， 以及 PCI 变体的 32-位 DMA。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=lge&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">lge</span>(4)</span></a> 驱动是
MPSAFE 的了。</p>
</div>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="NET-PROTO" name="NET-PROTO">2.2.3 网络协议</a></h4>

<p>　　对 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=arp&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">arp</span>(8)</span></a>
重传算法进行了重写， 使得在需要某一 ARP 项时， 不再抑制重传 ARP 请求。 sysctl 变量 <code
class="VARNAME">net.link.ether.inet.host_down_time</code> 也因此消失了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=arp&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">arp</span>(8)</span></a> 新增了
sysctl 变量， <code class="VARNAME">net.link.ether.inet.log_arp_permanent_modify</code>
以抑制对永久 ARP 项的修改尝试的日志记录。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=if_bridge&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">if_bridge</span>(4)</span></a>
网桥驱动新增了创建镜像口， 即， 将网桥接收到的每个帧都发送到那个端口的支持。
这一功能可以通过 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ifconfig</span>(8)</span></a>
启用。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=if_bridge&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">if_bridge</span>(4)</span></a>
网桥驱动新增了对 RFC 3378 EtherIP 的支持。 这一变动使得向网桥增加 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gif&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gif</span>(4)</span></a> 接口，
并收发 IP 协议 97 的数据包成为可能。 这些包实际上是附带了 EtherIP 包头的以太网帧。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(4)</span></a> 的 IP
包过滤器现在支持 IPv6 了。 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ip6fw&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ip6fw</span>(8)</span></a>
包过滤器已经过时， 并将在以后的发行版中删除。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(4)</span></a>
新增了对于由查表得到的值所对应的动作进行替换的功能， 这一功能可以用来优化规则集。 目前，
该功能只能用于 <tt class="LITERAL">pipe</tt>、 <tt class="LITERAL">queue</tt>、 <tt
class="LITERAL">divert</tt>、 <tt class="LITERAL">tee</tt>、 <tt
class="LITERAL">netgraph</tt> 以及 <tt class="LITERAL">ngtee</tt> 规则。 例如，
下列规则会把不同的包发给不同的 pipe：</p>

<pre class="PROGRAMLISTING">
pipe 1000 config bw 1000Kbyte/s
pipe 4000 config bw 4000Kbyte/s
table 1 add x.x.x.x 1000
table 1 add x.x.x.y 4000
pipe tablearg ip from table(1) to any
</pre>

<p>　　修正了通过 TCP 进行的 NFS 连接无法在服务器发出 FIN 之后重连的问题。
这一问题会影响使用 Solaris 的 NFS 服务器提供的服务。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_iface&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ng_iface</span>(4)</span></a>
Netgraph 节点支持 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=altq&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">altq</span>(4)</span></a> 了。</p>

<p>　　默认禁用了在 FreeBSD 中的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ip6&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ip6</span>(4)</span></a>
协议栈中的广播包路径 MTU 发现功能， 这使由于通过多播种的许多路由器来通知路径 MTU
可能构成对于一台服务器的分布式拒绝服务攻击行为。 这一功能可以通过新的 sysctl 变量 <code
class="VARNAME">net.inet6.ip6.mcast_pmtu</code> 来重新启用。</p>

<p>　　当 RTT 低于某一特定阈值时， TCP 带宽-延迟积限制功能会自动禁用。 在 LAN
上这一优化是没有意义的， 因为时钟的粒度过粗， 使得在计算最大带宽时会出问题。 新增的
sysctl 变量 <code class="VARNAME">net.inet.tcp.inflight.rttthresh</code>
可以用来指定希望此功能起作用的以毫秒为单位的阈值， 其默认值为 10ms。</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="DISKS" name="DISKS">2.2.4 磁盘及存储</a></h4>

<p>　　对 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=amr&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">amr</span>(4)</span></a>
驱动的性能进行了改进， 并增加了完全的 64-位 DMA 支持。 尽管这一特性默认是启用的，
但也还可以使用加载器变量 <code class="VARNAME">hw.amr.force_sg32</code> 来禁用，
以方便调试。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=amr&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">amr</span>(4)</span></a>
驱动新增了 Linux LSI MegaRaid 工具所需的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ioctl&sektion=2&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ioctl</span>(2)</span></a>
请求支持， 以便在 FreeBSD 的 Linux 模拟环境中使用它们。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ata&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ata</span>(4)</span></a>
驱动提供了针对某些在 48-位 模式下 DMA 无法正常工作的控制器的缓解方法。
对于那些可疑的控制器， 驱动程序会在访问超过 137GB 的区域时使用 PIO 模式。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ata&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ata</span>(4)</span></a>
驱动提供了对 ITE IT8211F IDE 控制器， 以及 Promise PDC40718 和 PDC40719 芯片的支持，
后两种芯片见于 Promise Fasttrak TX4300。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ata&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ata</span>(4)</span></a>
驱动支持以 DMA 方式将内核崩溃转存数据存入 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ataraid&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ataraid</span>(4)</span></a>
设备了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ataraid&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ataraid</span>(4)</span></a>
驱动支持 JMicron ATA RAID 元数据了。</p>

<p>　　<tt class="LITERAL">GEOM_LABEL</tt> class 支持 Ext2FS、 NTFS 和 ReiserFS 了。</p>

<p>　　<tt class="LITERAL">GEOM_MIRROR</tt> class 支持将内核崩溃转存数据， 保存到其 GEOM
providers 上了。</p>

<p>　　<tt class="LITERAL">GEOM_MIRROR</tt> 和 <tt class="LITERAL">GEOM_RAID3</tt> 这两个
class 新增了对 sysctl 变量 <code
class="VARNAME">kern.geom.mirror.disconnect_on_failure</code> 和 <code
class="VARNAME">kern.geom.graid3.disconnect_on_failure</code> 的支持，
用以控制发生故障的盘是否断开。 目前其默认值是 <tt class="LITERAL">1</tt>
以保持之前的行为， 而如果将它设置为 <tt class="LITERAL">0</tt>， 则这样的盘不会被断开，
而内核将继续尝试使用它们 (只有第一次错误被记入日志)。 如果有多个盘都存在故障，
但位置不同， 则这一功能将有助于恢复数据。 出现故障的盘在 <tt class="COMMAND">gmirror
list</tt> 和 <tt class="COMMAND">graid3 list</tt> 的输出中仍可见， 但会标记上 <tt
class="LITERAL">BROKEN</tt>。</p>

<p>　　<tt class="LITERAL">GEOM_MIRROR</tt> 和 <tt class="LITERAL">GEOM_RAID3</tt> 这两个
class 采用了并发 I/O 请求来获得更好的同步性能。 新增的 sysctl 变量 <code
class="VARNAME">kern.geom.mirror.sync_requests</code> 和 <code
class="VARNAME">kern.geom.raid3.sync_requests</code> 用于定义允许多少个并发的 I/O 请求。
此外， sysctl 变量 <code class="VARNAME">kern.geom.mirror.reqs_per_sync</code>、 <code
class="VARNAME">kern.geom.mirror.syncs_per_sec</code>、 <code
class="VARNAME">kern.geom.raid3.reqs_per_sync</code>， 以及 <code
class="VARNAME">kern.geom.raid3.syncs_per_sec</code> 则已经过时并删去。</p>

<p>　　新增了 GEOM class <tt class="LITERAL">GEOM_ZERO</tt>。 它提供了一个非常大 (41PB)
<tt class="FILENAME">/dev/gzero</tt> 的 provider， 主要可以用来进行性能测试。 在收到 <tt
class="LITERAL">BIO_READ</tt> 请求时它会对 <code class="VARNAME">bio_data</code> 填零，
而 <tt class="LITERAL">BIO_WRITE</tt> 则什么都不做。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=twa&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">twa</span>(4)</span></a> 已更新至
3ware 网站发布的 9.3.0.1 版本。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geli&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geli</span>(8)</span></a>
支持在挂接根文件系统之前加载密钥文件了。 例如， 可以将下列配置加入 <tt
class="FILENAME">/boot/loader.conf</tt> 来启用它：</p>

<pre class="PROGRAMLISTING">
geli_da0_keyfile0_load="YES"
geli_da0_keyfile0_type="da0:geli_keyfile0"
geli_da0_keyfile0_name="/boot/keys/da0.key0"
geli_da0_keyfile1_load="YES"
geli_da0_keyfile1_type="da0:geli_keyfile1"
geli_da0_keyfile1_name="/boot/keys/da0.key1"
geli_da0_keyfile2_load="YES"
geli_da0_keyfile2_type="da0:geli_keyfile2"
geli_da0_keyfile2_name="/boot/keys/da0.key2"

geli_da1s3a_keyfile0_load="YES"
geli_da1s3a_keyfile0_type="da1s3a:geli_keyfile0"
geli_da1s3a_keyfile0_name="/boot/keys/da1s3a.key"
</pre>

<p>　　新增了用以支持 LSI MegaRAID SAS 系列控制器的驱动程序 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mfi&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mfi</span>(4)</span></a>。</p>

<p>　　新增了用以支持 HighPoint 的 RocketRAID 232x 系列 RAID 控制器的驱动程序 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rr232x&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rr232x</span>(4)</span></a>。</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="FS" name="FS">2.2.5 文件系统</a></h4>

<p>　　</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN390" name="AEN390">2.2.6 基本系统附带的第三方软件</a></h4>

<p>　　<b class="APPLICATION">DRM</b> 已更新至 DRI CVS 在 20051202 的快照版本。</p>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="USERLAND" name="USERLAND">2.3 用户环境的变动</a></h3>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bsnmpd&sektion=1&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bsnmpd</span>(1)</span></a>
工具支持 RFC 2790 所描述的主机资源 MIB 了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=config&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">config</span>(8)</span></a>
工具新增了对 <tt class="LITERAL">nocpu</tt> 语句的支持， 其作用是取消先前的 <tt
class="LITERAL">cpu</tt> 语句。</p>

<p>　　如果指定内核配置文件所在的目录中存在名为 <tt class="FILENAME">DEFAULTS</tt>
内核配置文件， 则 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=config&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">config</span>(8)</span></a>
工具会在读取内核配置文件之前， 首先处理这个文件的内容。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=csh&sektion=1&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">csh</span>(1)</span></a> 工具支持
NLS 编录了。 注意需要安装 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/shells/tcsh_nls/pkg-descr"><tt
class="FILENAME">shells/tcsh_nls</tt></a> port 才能正常使用。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=devd&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">devd</span>(8)</span></a>
工具新增了用于指定配置文件的 <code class="OPTION">-f</code> 选项。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ftpd&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ftpd</span>(8)</span></a>
即使在没有使用 <code class="OPTION">-p</code> 参数的情况下， 也会创建 PID 文件 <tt
class="FILENAME">/var/run/ftpd.pid</tt> 了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getfacl&sektion=1&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">getfacl</span>(1)</span></a>
工具新增了 <code class="OPTION">-q</code> 参数， 以避免显示每个文件头的中列出文件名、
属主与所属用户组的注释信息。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gvinum&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gvinum</span>(8)</span></a>
工具新增了用以完成对象改名， 并将子盘从一个驱动器转入另一驱动器的命令。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">jail</span>(8)</span></a>
工具新增了 <code class="OPTION">-J <tt class="REPLACEABLE"><i>jid_file</i></tt></code>
选项的支持， 用以指定 JidFile， 后者类似于 PidFile， 包含 jailid、 路径、 主机名、 ip
以及用以启动 jail 的命令。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=kdump&sektion=1&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">kdump</span>(1)</span></a>
工具新增了 <code class="OPTION">-H</code> 参数， 表示让 kdump 显示包含 threadid
的附加字段。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=kdump&sektion=1&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">kdump</span>(1)</span></a>
工具新增了 <code class="OPTION">-s</code> 参数， 用于在显示中略去 I/O 数据。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ln&sektion=1&manpath=FreeBSD+6.1-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">ln</span>(1)</span></a> 工具新增了
<code class="OPTION">-F</code> 参数， 表示在创建符号连接时删除空目录。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=locate&sektion=1&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">locate</span>(1)</span></a>
工具新增了 <code class="OPTION">-0</code> 参数， 使其能够与 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=xargs&sektion=1&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">xargs</span>(1)</span></a> 的
<code class="OPTION">-0</code> 参数联用。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ls&sektion=1&manpath=FreeBSD+6.1-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">ls</span>(1)</span></a> 工具新增了
<code class="OPTION">-I</code> 参数， 用以禁用超级用户自动加上的 <code
class="OPTION">-A</code> 参数。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mergemaster</span>(8)</span></a>
工具新增了 <code class="OPTION">-A</code> 参数， 用于显式地指定传递给下层 Makefile
的架构名称。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=moused&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">moused</span>(8)</span></a>
服务新增了 <code class="OPTION">-H</code> 参数， 用以启用虚拟的水平方向滚轮，
这一功能与通过 <code class="OPTION">-V</code> 参数启用虚拟的垂直方向滚轮类似。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=netstat&sektion=1&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">netstat</span>(1)</span></a>
新增了在内核采用 <tt class="LITERAL">FAST_IPSEC</tt> 而非 KAME IPSEC 协议栈时显示 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipsec&sektion=4&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipsec</span>(4)</span></a>
协议统计信息的能力。 请注意 <tt class="COMMAND">netstat -s -p ipsec</tt>
的输出会随编译到内核中的协议栈不同而有所差异， 因为这两个协议栈的统计信息并不相同。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">periodic</span>(8)</span></a> 的
daily (每日执行) 脚本， 新增了显示 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gmirror&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gmirror</span>(8)</span></a>、 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=graid3&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">graid3</span>(8)</span></a>、 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gstripe&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gstripe</span>(8)</span></a>，
以及 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gconcat&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gconcat</span>(8)</span></a>
设备的支持。 请注意这些功能默认都处于禁用的状态。</p>

<p>　　新增了一组 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pidfile&sektion=3&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pidfile</span>(3)</span></a>
函数， 用以提供可靠的 PID 文件处理方法。 这些函数放到了 <tt class="FILENAME">libutil</tt>
中。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_sppd&sektion=1&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rfcomm_sppd</span>(1)</span></a>
能够支持在指定服务名的同时指定 <code class="OPTION">-c</code> 选项和通道号了。
支持的名字包括： DUN (拨号网络)、 FAX (传真)、 LAN (使用 PPP 访问 LAN)， 以及 SP
(串口)。</p>

<p>　　新增了用于查看 UFS 文件系统中快照位置的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snapinfo&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snapinfo</span>(8)</span></a>
工具。</p>

<p>　　加入了基于 OpenBSD 实现的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=strtonum&sektion=3&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">strtonum</span>(3)</span></a>
库函数。 这是 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=strtoll&sektion=3&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">strtoll</span>(3)</span></a>
的改进版本。</p>

<p>　　修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ypwhich&sektion=1&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ypwhich</span>(1)</span></a>
工具中的一个导致 <code class="OPTION">-m</code> 选项产生不正确的可用命名映射的 bug。</p>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="RC-SCRIPTS" name="RC-SCRIPTS">2.3.1 <tt
class="FILENAME">/etc/rc.d</tt> 脚本</a></h4>

<p>　　新增了 <tt class="FILENAME">bluetooth</tt> 脚本。 这个脚本会在设备连上/段开时， 由
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=devd&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">devd</span>(8)</span></a>
调用并启动/停止对应的设备， 而无须管理员手工干预。 这个脚本的默认配置参数在 <tt
class="FILENAME">/etc/defaults/bluetooth.device.conf</tt>， 这些默认值可以用 <tt
class="FILENAME">/etc/bluetooth/<tt class="REPLACEABLE"><i>$device</i></tt>.conf</tt>
来覆盖 (这里的 <tt class="REPLACEABLE"><i>$device</i></tt> 是 <tt
class="DEVICENAME">ubt0</tt>、 <tt class="DEVICENAME">btcc0</tt>， 等等。)
要了解进一步详情， 请参阅 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bluetooth.conf&sektion=5&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">bluetooth.conf</span>(5)</span></a>。</p>

<p>　　新增了 <tt class="FILENAME">hcsecd</tt> 和 <tt class="FILENAME">sdpd</tt> 脚本，
分别用于 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=hcsecd&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">hcsecd</span>(8)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sdpd&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sdpd</span>(8)</span></a> 服务。
在没有蓝牙设备接到系统上时， 也可以启动这些服务， 但这两个服务都需要蓝牙 socket 层，
因此默认禁用了这两个服务。 蓝牙 socket 曾必须通过模块加载， 或静态联编进内核，
这两个服务才能运行。</p>

<p>　　新增了用于 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=hostapd&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">hostapd</span>(8)</span></a> 的
<tt class="FILENAME">hostapd</tt> 脚本。</p>

<p>　　<tt class="FILENAME">jail</tt> 脚本新增了 <code
class="VARNAME">jail_interface</code> 选项和 <code class="VARNAME">jail_<tt
class="REPLACEABLE"><i>jid</i></tt>_interface</code> 选项， 用以在给定的网络接口上创建 IP
别名。</p>

<p>　　<tt class="FILENAME">netif</tt> 脚本新增了对 <code class="VARNAME">ipv4_addrs_<tt
class="REPLACEABLE"><i>ifn</i></tt></code> 的支持， 它表示增加 CIDR 记法的 IPv4 地址。
例如：</p>

<pre class="PROGRAMLISTING">
ipv4_addrs_ed0="192.168.0.1/24 192.168.1.1-5/28"
</pre>

<p>　　<tt class="FILENAME">ppp-user</tt> 脚本改名为 <tt class="FILENAME">ppp</tt>。</p>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN578" name="AEN578">2.4 基本系统包含的第三方软件</a></h3>

<p>　　<b class="APPLICATION">BIND</b> 从 9.3.1 更新到了 9.3.2。</p>

<p>　　<b class="APPLICATION">hostapd</b> 由 0.3.9 版更新到了 0.4.8 版。</p>

<p>　　<b class="APPLICATION">GNU Troff</b> 从 1.19 更新到了 1.19.2。</p>

<p>　　<b class="APPLICATION">sendmail</b> 由 8.13.4 更新到了 8.13.6。</p>

<p>　　时区数据库从 <b class="APPLICATION">tzdata2005l</b> 版升级到了 <b
class="APPLICATION">tzdata2005r</b> 版。</p>

<p>　　<b class="APPLICATION">WPA Supplicant</b> 由 0.3.9 版更新到了 0.4.8 版。</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="PORTS" name="PORTS">2.5 Ports/Packages 套件基础结构</a></h3>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&sektion=1&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pkg_add</span>(1)</span></a>
命令新增了 <code class="OPTION">-P</code> 参数， 它与 <code class="OPTION">-p</code>
参数类似， 区别在于给定的前缀也会用于依赖的其他包。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&sektion=1&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pkg_add</span>(1)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_create&sektion=1&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pkg_create</span>(1)</span></a>
这两个工具新增了 <code class="OPTION">-K</code> 参数， 表示将 package 默认保存至当前目录
(如果有定义 <code class="VARNAME">PKGDIR</code> 则保存在那个目录)。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_create&sektion=1&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pkg_create</span>(1)</span></a>
程序新增了 <code class="OPTION">-x</code> 参数， 用以使用基本正则表达式来表示 package
的名字， <code class="OPTION">-E</code> 标志表示使用扩展正则表达式， 而 <code
class="OPTION">-G</code> 则表示精确匹配。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_version&sektion=1&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pkg_version</span>(1)</span></a>
工具新增了 <code class="OPTION">-o</code> 参数， 用于显示在 package 生成时所记录的来源
(origin) 目录而不是其本身的名字， 以及 <code class="OPTION">-O</code>
参数表示只列出所有注册来源为指定来源的 package。</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=portsnap&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">portsnap</span>(8)</span></a> 工具
(<tt class="FILENAME">sysutils/portsnap</tt>) 到 FreeBSD 基本系统中。 这是一个安全、
便于使用、 快速、 轻量级的工具， 能够很好地帮助用户保持他们的 ports tree
与官方版本同步。</p>

<p>　　修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=portsnap&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">portsnap</span>(8)</span></a>
工具在处理 <code class="VARNAME">HTTP_PROXY_AUTH</code> 时的 bug。</p>

<p>　　从 <code class="VARNAME">local_startup</code> 目录启动脚本改为使用与基本系统同样的
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rcorder&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rcorder</span>(8)</span></a>
排序了。</p>

<p>　　删去了从 Ports 套件安装的启动脚本的后缀。 这意味着 <tt
class="FILENAME">foo.sh</tt> 都将改名为 <tt class="FILENAME">foo</tt>， 并且名为 <tt
class="FILENAME">foo.ORG</tt> 的脚本也会被执行。 您应重新安装所有安装了启动脚本的
package， 并清理 <code class="VARNAME">local_startup</code> 目录中多余的文件。</p>

<p>　　新增了两个 <tt class="FILENAME">rc.conf</tt> 变量， <code
class="VARNAME">ldconfig_local_dirs</code> 和 <code
class="VARNAME">ldconfig_local32_dirs</code>。 这两个变量用于指定本地的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ldconfig&sektion=8&manpath=FreeBSD+6.1-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ldconfig</span>(8)</span></a>
目录列表。</p>

<p>　　<tt class="FILENAME">pkg-plist</tt> 中的 <tt class="COMMAND">@cwd</tt>
命令支持不指定目录参数了。 如果没有指定目录参数， 则它将把当前工作目录设置为 <tt
class="COMMAND">@cwd</tt> 命令给出的第一个前缀。</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="RELENG" name="RELENG">2.6 发行版建造工程和功能集成</a></h3>

<p>　　新增了 <tt class="FILENAME">/var/audit</tt> 目录以及 <tt
class="LITERAL">audit</tt> 用户组。 它们主要用于 TrustedBSD <b
class="APPLICATION">OpenBSM</b> 软件包， 这一软件包将在今后的版本中加入。</p>

<p>　　支持的 <b class="APPLICATION">GNOME</b> 桌面环境 (<a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/x11/gnome2/pkg-descr"><tt
class="FILENAME">x11/gnome2</tt></a>) 的版本， 从 2.10.2 升级到了 2.12.3。</p>

<p>　　支持的 <b class="APPLICATION">KDE</b> 桌面环境 (<a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/x11/kde2/pkg-descr"><tt
class="FILENAME">x11/kde2</tt></a>) 的版本， 从 3.4.2 升级到了 3.5.1。</p>

<p>　　支持的 <b class="APPLICATION">Perl</b> 解释器 (<a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/lang/perl5.8/pkg-descr"><tt
class="FILENAME">lang/perl5.8</tt></a>) 的版本， 从 5.8.7 升级到了 5.8.8。</p>

<p>　　支持的 <b class="APPLICATION">Xorg</b> 视窗系统 (<a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/x11/xorg/pkg-descr"><tt
class="FILENAME">x11/xorg</tt></a>) 的版本， 从 6.8.2 升级到了 6.9.0。</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="DOC" name="DOC">2.7 文档</a></h3>

<p>　　</p>
</div>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="UPGRADE" name="UPGRADE">3 从先前版本的 FreeBSD 升级</a></h2>

<p>　　通过源代码升级到 FreeBSD 6.1-RELEASE， 则应使用 FreeBSD 5.3-RELEASE 或更高版本。
使用旧版的系统的用户， 如果想要升级到 6.1-RELEASE， 则需要首先升级到 FreeBSD 5.3
或更新的版本， 然后再升级到 FreeBSD 6.1-RELEASE。</p>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>重要:</b> 很显然，升级 FreeBSD 时，应该首先备份 <span class="emphasis"><b
class="EMPHASIS">所有</b></span> 数据和配置文件。</p>
</blockquote>
</div>
</div>
</div>

<hr />
<p align="center"><small>这份文档，以及其他与FreeBSD发行版本有关的文档，都可以在 <a
href="http://www.FreeBSD.org/snapshots/">http://www.FreeBSD.org/snapshots/</a>下载。</small></p>

<p align="center"><small>在遇到关于FreeBSD的技术问题时，请首先阅读 <a
href="http://www.FreeBSD.org/docs.html">文档</a> 之后再考虑联系 &#60;<a
href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&#62;。</small></p>

<p align="center"><small>所有 FreeBSD 6.1-STABLE 的用户都应该订阅 &#60;<a
href="mailto:stable@FreeBSD.org">stable@FreeBSD.org</a>&#62; 邮件列表。</small></p>

<p align="center"><small>关于这份文档的任何问题，请致信 &#60;<a
href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&#62;。</small></p>
</body>
</html>

