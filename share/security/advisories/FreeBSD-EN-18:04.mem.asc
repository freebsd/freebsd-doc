-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

=============================================================================
FreeBSD-EN-18:04.mem                                            Errata Notice
                                                          The FreeBSD Project

Topic:          Multiple small kernel memory disclosures

Category:       core
Module:         kernel
Announced:      2018-04-04
Credits:        Ilja van Sprundel
Affects:        All supported versions of FreeBSD.
Corrected:      2018-03-28 13:41:43 UTC (stable/11, 11.1-STABLE)
                2018-04-04 05:43:03 UTC (releng/11.1, 11.1-RELEASE-p9)
                2018-03-29 22:31:14 UTC (stable/10, 10.4-STABLE)
                2018-04-04 05:43:03 UTC (releng/10.4, 10.4-RELEASE-p8)
                2018-04-04 05:43:03 UTC (releng/10.3, 10.3-RELEASE-p29)
CVE Name:       CVE-2018-6919

For general information regarding FreeBSD Errata Notices and Security
Advisories, including descriptions of the fields above, security
branches, and the following sections, please visit
<URL:https://security.FreeBSD.org/>.

I.   Background

FreeBSD includes drivers for HighPoint disk controllers via the hpt27xx(4),
hptnr(4) and hptrr(4) drivers, for some graphics cards via drm drivers.  In
addition, FreeBSD includes optional support for executing svr4 and ibcs2
binaries.

II.  Problem Description

Due to insufficient initialization of memory copied to userland small amounts
of kernel memory may be disclosed to userland processes.

III. Impact

A user who can access these drivers or execute svr4 or ibcs2 binaries
may be able to read the contents of kernel memory.

Such memory might contain sensitive information, such as portions of the file
cache or terminal buffers.  This information might be directly useful, or it
might be leveraged to obtain elevated privileges in some way; for example,
a terminal buffer might include a user-entered password.

IV.  Workaround

No workaround is available, but systems that do not use these devices and
do not enable support for ibcs2 and svr4 binaries are not vulnerable.
In addition, note that the drm driver affected by this issue supports only
relatively old hardware.  Systems built within the last decade likely
contain graphics hardware supported by the drm2 driver in the FreeBSD base
system or the drm-next-kmod driver in FreeBSD ports.

V.   Solution

Perform one of the following:

1) Upgrade your system to a supported FreeBSD stable or release / security
branch (releng) dated after the correction date.

Afterward, reboot the system.

2) To update your system via a binary patch:

Systems running a RELEASE version of FreeBSD on the i386 or amd64
platforms can be updated via the freebsd-update(8) utility:

# freebsd-update fetch
# freebsd-update install

Afterward, reboot the system.

3) To update your system via a source code patch:

The following patches have been verified to apply to the applicable
FreeBSD release branches.

a) Download the relevant patch from the location below, and verify the
detached PGP signature using your PGP utility.

[FreeBSD 11.x]
# fetch https://security.FreeBSD.org/patches/EN-18:04/mem.11.patch
# fetch https://security.FreeBSD.org/patches/EN-18:04/mem.11.patch.asc
# gpg --verify mem.11.patch.asc

[FreeBSD 10.x]
# fetch https://security.FreeBSD.org/patches/EN-18:04/mem.10.patch
# fetch https://security.FreeBSD.org/patches/EN-18:04/mem.10.patch.asc
# gpg --verify mem.10.patch.asc

b) Apply the patch.  Execute the following commands as root:

# cd /usr/src
# patch < /path/to/patch

c) Recompile your kernel as described in
<URL:https://www.FreeBSD.org/handbook/kernelconfig.html> and reboot the
system.

VI.  Correction details

The following list contains the correction revision numbers for each
affected branch.

Branch/path                                                      Revision
- -------------------------------------------------------------------------
stable/10/                                                        r331749
releng/10.3/                                                      r331987
releng/10.4/                                                      r331987
stable/11/                                                        r331670
releng/11.1/                                                      r331987
- -------------------------------------------------------------------------

To see which files were modified by a particular revision, run the
following command, replacing NNNNNN with the revision number, on a
machine with Subversion installed:

# svn diff -cNNNNNN --summarize svn://svn.freebsd.org/base

Or visit the following URL, replacing NNNNNN with the revision number:

<URL:https://svnweb.freebsd.org/base?view=revision&revision=NNNNNN>

VII. References

<URL:https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-6919>

The latest revision of this advisory is available at
<URL:https://security.FreeBSD.org/advisories/FreeBSD-EN-18:04.mem.asc>
-----BEGIN PGP SIGNATURE-----

iQKTBAEBCgB9FiEE/A6HiuWv54gCjWNV05eS9J6n5cIFAlrEZvNfFIAAAAAALgAo
aXNzdWVyLWZwckBub3RhdGlvbnMub3BlbnBncC5maWZ0aGhvcnNlbWFuLm5ldEZD
MEU4NzhBRTVBRkU3ODgwMjhENjM1NUQzOTc5MkY0OUVBN0U1QzIACgkQ05eS9J6n
5cJa/A//Z53qYxwSpKH5hrkHsMVzH62xagHUn7zqewyfmBIaz8xLPArNYEy3onPv
5mXLLL5RIoaiUXq++Nld90QPDbbHtuyfwKySm/X8vNXUu/a2mFpzSixI1tQEIcsx
PH+eqCQTgFHyzo0uADRcLyxuo4qmM/b/8LQZWr0CLpxmdPVuoGG2tlcVpL47f5sa
nFghwxiOj5gKCR0Wx0buZ8u1T0NV0EyGcI7SRXJItq1GM8lvb26bfSnDls5h0hPW
dn8qa7+exYL133qZ4vgEyNk+cGjEGNIG1eoAe3WeoUaaFsmpXTNK17P8Gxr/KZk4
QmMiRbbIooX4AsNnY+OnkGRN1LzxFF2TLc+zYGV7j/uyhGE5cfZ3Av3hDMFlyTRO
Udp1/ghmm/GPrHO/FAmJGYPmfxRYdU/jZU6gJld+QXd2y8/HLsXNOdRK92KIwCyp
I9tUVwMg4mze6L6/s1chmQL5jdy5Sz5SSfjDAcP3ieJ5cmg0DDITYjWEVk4Fdaxl
rWU2X2nYmJeROqU6tlAEfMPJZEw2cPxE14vRe3iN9mPUSPvGKT4oWLMtwRnjsQyz
v8da9m4lncTQd5/qz9BpWzFANP6+g8gmgm8G4j1HeVyf2WFPMsU+YqAoaQewB3h5
Hnfq/GhTTNtvjTnW2trPT21lXPEFbuVVZ724U+SJwYzVJv2tyug=
=r842
-----END PGP SIGNATURE-----
