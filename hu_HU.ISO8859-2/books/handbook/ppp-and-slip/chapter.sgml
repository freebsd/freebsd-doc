<!--
     The FreeBSD Documentation Project

     $FreeBSD$
-->

<!-- The FreeBSD Hungarian Documentation Project
     Translated by: PALI, Gabor <pgj@FreeBSD.org>
     %SOURCE%	en_US.ISO8859-1/books/handbook/ppp-and-slip/chapter.sgml
     %SRCID%	1.189
-->

<chapter id="ppp-and-slip">
  <chapterinfo>
    <authorgroup>
      <author>
	<firstname>Jim</firstname>
	<surname>Mock</surname>
	<contrib>&Aacute;tdolgozta, &aacute;trendezte &eacute;s
	  aktualiz&aacute;lta: </contrib>
      </author>
    </authorgroup>
  </chapterinfo>

  <title>A PPP &eacute;s a SLIP</title>

  <sect1 id="ppp-and-slip-synopsis">
    <title>&Aacute;ttekint&eacute;s</title>

    <indexterm id="ppp-ppp"><primary>PPP</primary></indexterm>
    <indexterm id="ppp-slip"><primary>SLIP</primary></indexterm>

    <para>A &os; sz&aacute;mos m&oacute;don k&eacute;pes
      &ouml;sszek&ouml;tni k&eacute;t
      sz&aacute;m&iacute;t&oacute;g&eacute;pet.  Ha
      bet&aacute;rcs&aacute;z&oacute;s modemmel akarunk
      h&aacute;l&oacute;zati vagy internetes kapcsolatot
      fel&eacute;p&iacute;teni, esetleg azt szeretn&eacute;nk, hogy
      m&aacute;sok k&eacute;pesek legyenek minket ilyen m&oacute;don
      el&eacute;rni, akkor ahhoz PPP-t, illetve SLIP-et kell
      haszn&aacute;lnunk.  Ebben a fejezetben a modemes
      kommunik&aacute;ci&oacute; be&aacute;ll&iacute;t&aacute;sait
      mutatjuk be r&eacute;szletesebben.</para>

    <para>A fejezet elolvas&aacute;sa sor&aacute;n
      megismerj&uuml;k:</para>

    <itemizedlist>
      <listitem>
	<para>hogyan &aacute;ll&iacute;tsunk be
	  felhaszn&aacute;l&oacute;i PPP-t;</para>
      </listitem>
      <listitem>
	<para>hogyan &aacute;ll&iacute;tsunk be rendszerszint&#251;
	  PPP-t;</para>
      </listitem>
      <listitem>
	<para>hogyan &aacute;ll&iacute;tsunk be egy
	  <acronym>PPPoE</acronym> (PPP over Ethernet, vagyis <quote>PPP
	  Ethernet felett</quote>) kapcsolatot;</para>
      </listitem>
      <listitem>
	<para>hogyan &aacute;ll&iacute;tsunk be egy
	  <acronym>PPPoA</acronym> (PPP over ATM, vagyis <quote>PPP ATM
	  felett</quote>) kapcsolatot;</para>
      </listitem>
      <listitem>
	<para>hogyan &aacute;ll&iacute;tsunk be SLIP klienst &eacute;s
	  szervert.</para>
      </listitem>
    </itemizedlist>

    <indexterm id="ppp-ppp-user">
      <primary>PPP</primary>
      <secondary>felhaszn&aacute;l&oacute;i PPP</secondary>
    </indexterm>
    <indexterm id="ppp-ppp-kernel">
      <primary>PPP</primary>
      <secondary>rendszer PPP</secondary>
    </indexterm>
    <indexterm id="ppp-ppp-ethernet">
      <primary>PPP</primary>
      <secondary>Ethernet felett</secondary>
    </indexterm>

    <para>A fejezet elolvas&aacute;s&aacute;hoz aj&aacute;nlott:</para>

    <itemizedlist>
      <listitem>
	<para>az alapvet&#245; h&aacute;l&oacute;zati
	  technol&oacute;gi&aacute;k ismerete;</para>
      </listitem>
      <listitem>
	<para>a bet&aacute;rcs&aacute;z&oacute;s kapcsolatok, a PPP
	  &eacute;s/vagy SLIP alapjainak &eacute;s c&eacute;ljainak
	  meg&eacute;rt&eacute;se.</para>
      </listitem>
    </itemizedlist>

    <para>Tal&aacute;n &eacute;rdekli a kedves olvas&oacute;t, hogy mi
      az alapvet&#245; k&uuml;l&ouml;nbs&eacute;g a
      felhaszn&aacute;l&oacute;i &eacute;s a rendszerszint&#251; PPP
      k&ouml;z&ouml;tt.  A v&aacute;lasz egyszer&#251;: a
      felhaszn&aacute;l&oacute;i PPP a be&eacute;rkez&#245; &eacute;s
      kimen&#245; adatokat nem a rendszermagban, hanem a
      felhaszn&aacute;l&oacute;i szinten dolgozza fel.  Ez
      k&ouml;lts&eacute;ges abb&oacute;l a szempontb&oacute;l, hogy
      emiatt adatokat kell m&aacute;solgatni a rendszer &eacute;s a
      felhaszn&aacute;l&oacute;i szint k&ouml;z&ouml;tt, azonban egy
      sokkal t&ouml;bbet tud&oacute; PPP implement&aacute;ci&oacute;nak
      ad ezzel utat.  A felhaszn&aacute;l&oacute;i PPP a
      <devicename>tun</devicename> eszk&ouml;z&ouml;n kereszt&uuml;l
      kommunik&aacute;l a k&uuml;lvil&aacute;ggal, mik&ouml;zben a
      rendszermagban tal&aacute;lhat&oacute; PPP mindezt a
      <devicename>ppp</devicename> eszk&ouml;zzel
      val&oacute;s&iacute;tja meg.</para>

    <note>
      <para>A fejezetben a felhaszn&aacute;l&oacute;i PPP-t
	egyszer&#251;en csak <application>ppp</application> n&eacute;ven
	fogjuk hivatkozni, hacsak nem lesz sz&uuml;ks&eacute;ges
	k&uuml;l&ouml;nbs&eacute;get tenn&uuml;nk k&ouml;zte &eacute;s
	m&aacute;s PPP szoftverek, mint p&eacute;ld&aacute;ul a
	<application>pppd</application> k&ouml;z&ouml;tt.  Ha
	m&aacute;st nem mondunk, akkor a fejezetben ismertetett
	&ouml;sszes parancsot <username>root</username>
	felhaszn&aacute;l&oacute;k&eacute;nt kell kiadni.</para>
    </note>

  </sect1>

  <sect1 id="userppp">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Tom</firstname>
	  <surname>Rhodes</surname>
	  <contrib>Friss&iacute;tette &eacute;s jav&iacute;totta:
	    </contrib>
	</author>
      </authorgroup>
      <authorgroup>
	<author>
	  <firstname>Brian</firstname>
	  <surname>Somers</surname>
	  <contrib>Eredetileg k&eacute;sz&iacute;tette: </contrib>
	</author>
      </authorgroup>
      <authorgroup>
	<author>
	  <firstname>Nik</firstname>
	  <surname>Clayton</surname>
	  <contrib>Seg&iacute;tett m&eacute;g: </contrib>
	</author>
	<author>
	  <firstname>Dirk</firstname>
	  <surname>Fr&ouml;mberg</surname>
	</author>
	<author>
	  <firstname>Peter</firstname>
	  <surname>Childs</surname>
	</author>
      </authorgroup>
    </sect1info>

    <title>A felhaszn&aacute;l&oacute;i PPP alkalmaz&aacute;sa</title>

    <sect2>
      <title>A felhaszn&aacute;l&oacute;i PPP</title>

      <sect3>
	<title>El&#245;felt&eacute;telek</title>

	<para>A le&iacute;r&aacute;s felt&eacute;telezi, hogy
	  rendelkez&uuml;nk a k&ouml;vetkez&#245;kkel:</para>

	<itemizedlist>
	  <indexterm
	    id="ppp-isp"><primary>internet-szolg&aacute;ltat&oacute;</primary></indexterm>
	  <indexterm id="ppp-ppp2"><primary>PPP
	    kapcsolat</primary></indexterm>

	  <listitem>
	    <para>Olyan internet-el&#245;fizet&eacute;s, ahol PPP-n
	      kereszt&uuml;l csatlakozunk</para>
	  </listitem>

	  <listitem>
	    <para>Egy modem vagy m&aacute;s olyan
	      rendszer&uuml;nkh&ouml;z csatlakoz&oacute; eszk&ouml;z,
	      amelyen kereszt&uuml;l el tudjuk &eacute;rni az
	      internet-szolg&aacute;ltat&oacute;nkat</para>
	  </listitem>

	  <listitem>
	    <para>Az internet-el&#245;fizet&eacute;s
	      bet&aacute;rcs&aacute;z&aacute;s&aacute;hoz
	      sz&uuml;ks&eacute;ges telefonsz&aacute;mok</para>
	  </listitem>

	  <indexterm id="ppp-pap"><primary>PAP</primary></indexterm>
	  <indexterm id="ppp-chap"><primary>CHAP</primary></indexterm>
	  <indexterm id="ppp-unix"><primary>UNIX</primary></indexterm>
	  <indexterm id="ppp-login"><primary>bejelentkez&eacute;si
	    n&eacute;v</primary></indexterm>
	  <indexterm
	    id="ppp-password"><primary>jelsz&oacute;</primary></indexterm>

	  <listitem>
	    <para>A bejelentkez&eacute;si nev&uuml;nk &eacute;s
	      jelszavunk.  (Vagy a megszokott &unix;-os
	      felhaszn&aacute;l&oacute;i n&eacute;v &eacute;s
	      jelsz&oacute; p&aacute;ros, vagy egy PAP esetleg CHAP
	      bejelentkez&eacute;si n&eacute;v &eacute;s
	      jelsz&oacute;.)</para>
	  </listitem>

	  <indexterm
	    id="ppp-nameserver"><primary>n&eacute;vszerver</primary></indexterm>

	  <listitem>
	    <para>Egy vagy t&ouml;bb n&eacute;vszerver IP-c&iacute;me.
	      Ehhez az internet-szolg&aacute;ltat&oacute;k
	      &aacute;ltal&aacute;ban k&eacute;t IP-c&iacute;met adnak
	      meg.  Ha egyet sem kaptunk, akkor a
	      <filename>ppp.conf</filename> &aacute;llom&aacute;nyban
	      erre a c&eacute;lra haszn&aacute;lhatjuk az
	      <command>enable dns</command> parancsot, &eacute;s ekkor a
	      <application>ppp</application> majd automatikusan be fogja
	      &aacute;ll&iacute;tani nek&uuml;nk a
	      n&eacute;vszervereket.  Ezt a lehet&#245;s&eacute;get az
	      befoly&aacute;solja, hogy az
	      internet-szolg&aacute;ltat&oacute; oldal&aacute;n
	      m&#251;k&ouml;d&#245; PPP implement&aacute;ci&oacute;
	      t&aacute;mogatja-e a n&eacute;vfelold&aacute;s
	      egyeztet&eacute;s&eacute;t (DNS negotiation).</para>
	  </listitem>
	</itemizedlist>

	<para>A k&ouml;vetkez&#245; inform&aacute;ci&oacute;kat is
	  megkaphatjuk az
	  internet-el&#245;fizet&eacute;s&uuml;nkh&ouml;z, de nem
	  felt&eacute;tlen&uuml;l sz&uuml;ks&eacute;gesek:</para>

	<itemizedlist>
	  <listitem>
	    <para>Az internet-szolg&aacute;ltat&oacute;
	      &aacute;tj&aacute;r&oacute;j&aacute;nak IP-c&iacute;me.
	      Az &aacute;tj&aacute;r&oacute; az a g&eacute;p, amelyen
	      kereszt&uuml;l a g&eacute;p&uuml;nk csatlakozik &eacute;s
	      sz&aacute;m&aacute;ra ez lesz az
	      <emphasis>alap&eacute;rtelmezett
	      &aacute;tj&aacute;r&oacute;</emphasis>.  Ha nem
	      rendelkez&uuml;nk ezzel az inform&aacute;ci&oacute;val,
	      akkor csak &aacute;ll&iacute;tsunk be valamit, &eacute;s
	      majd a csatlakoz&aacute;skor a szolg&aacute;ltat&oacute;
	      PPP szervere fel&uuml;l&iacute;rja a megfelel&#245;
	      be&aacute;ll&iacute;t&aacute;sokkal.</para>

	    <para>Erre a c&iacute;mre a <application>ppp</application>
	      <literal>HISADDR</literal> n&eacute;ven hivatkozik.</para>
	  </listitem>

	  <listitem>
	    <para>A haszn&aacute;land&oacute; h&aacute;l&oacute;zati
	      maszk.  Amennyiben a szolg&aacute;ltat&oacute; ezt nem
	      adta meg, nyugodtan haszn&aacute;ljuk erre a <hostid
	      role="netmask">255.255.255.255</hostid>
	      &eacute;rt&eacute;ket.</para>
	  </listitem>

	  <indexterm id="ppp-static-ip"><primary>statikus
	    IP-c&iacute;m</primary></indexterm>

	  <listitem>
	    <para>Ha a szolg&aacute;ltat&oacute;nk statikus
	      IP-c&iacute;met &eacute;s r&ouml;gz&iacute;tett
	      h&aacute;l&oacute;zati nevet is biztos&iacute;t
	      nek&uuml;nk, ezt is megadhatjuk.  Minden m&aacute;s
	      esetben egyszer&#251;en csak hagyjuk, hogy a rendszer
	      automatikusan v&aacute;lasszon nek&uuml;nk egyet.</para>
	  </listitem>
	</itemizedlist>

	<para>Ha a sz&uuml;ks&eacute;ges inform&aacute;ci&oacute;knak
	  nem vagyunk birtok&aacute;ban, akkor vegy&uuml;k fel a
	  kapcsolatot az internet-szolg&aacute;ltat&oacute;kkal.</para>

	<note>
	  <para>Ebben a szakaszban a p&eacute;ld&aacute;kban
	    szerepl&#245; konfigur&aacute;ci&oacute;s
	    &aacute;llom&aacute;nyok sorait sz&aacute;mozva
	    l&aacute;thatjuk.  Ezek a sorsz&aacute;mok a
	    bemutat&aacute;s &eacute;s a t&aacute;rgyal&aacute;s
	    megk&ouml;nny&iacute;t&eacute;se &eacute;rdek&eacute;ben
	    szerepelnek, &eacute;s nem az eredeti
	    &aacute;llom&aacute;nyok r&eacute;szei.  Mindezek mellett a
	    tabul&aacute;torok &eacute;s sz&oacute;k&ouml;z&ouml;k
	    megfelel&#245; haszn&aacute;lata is fontos.</para>
	</note>

      </sect3>

      <sect3>
	<title>A <application>PPP</application> automatikus
	  be&aacute;ll&iacute;t&aacute;sa</title>

	<indexterm>
	  <primary>PPP</primary>
	  <secondary>be&aacute;ll&iacute;t&aacute;sa</secondary>
	</indexterm>

	<para>A <command>ppp</command> &eacute;s a
	  <command>pppd</command> (a PPP rendszerszint&#251;
	  megval&oacute;s&iacute;t&aacute;sa) egyar&aacute;nt az
	  <filename>/etc/ppp</filename> k&ouml;nyvt&aacute;rban
	  tal&aacute;lhat&oacute; konfigur&aacute;ci&oacute;s
	  &aacute;llom&aacute;nyokat haszn&aacute;lja.  A
	  felhaszn&aacute;l&oacute;i PPP-hez ezenk&iacute;v&uuml;l
	  m&eacute;g a <filename>/usr/share/examples/ppp/</filename>
	  k&ouml;nyvt&aacute;rban vannak p&eacute;ld&aacute;k.</para>

	<para>A <command>ppp</command> parancs
	  be&aacute;ll&iacute;t&aacute;sa az ig&eacute;nyeinkt&#245;l
	  f&uuml;gg&#245;en sz&aacute;mos &aacute;llom&aacute;ny
	  m&oacute;dos&iacute;t&aacute;s&aacute;t ig&eacute;nyelheti.  A
	  tartalmukat nagyban befoly&aacute;solja, hogy a
	  szolg&aacute;ltat&oacute;nk r&eacute;sz&eacute;r&#245;l a
	  c&iacute;meket kioszt&aacute;sa statikus (vagyis egy adott
	  c&iacute;met kapunk &eacute;s folyamatosan azt
	  haszn&aacute;ljuk) esetleg dinamikus (vagyis az
	  IP-c&iacute;m&uuml;nk minden egyes
	  kapcsol&oacute;d&aacute;skor m&aacute;s &eacute;s
	  m&aacute;s).</para>

	<sect4 id="userppp-staticIP">
	  <title>PPP statikus IP-c&iacute;mmel</title>

	  <indexterm>
	    <primary>PPP</primary>
	    <secondary>statikus IP-c&iacute;mmel</secondary>
	  </indexterm>

	  <para>Ebben az esetben az
	    <filename>/etc/ppp/ppp.conf</filename>
	    konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nyt kell
	    &aacute;tszerkeszten&uuml;nk.  Tartalma az al&aacute;bbi
	    p&eacute;ld&aacute;hoz hasonl&iacute;that&oacute;.</para>

	  <note>
	    <para>A <literal>:</literal> karakterrel
	      v&eacute;gz&#245;d&#245; sorok mindig az els&#245;
	      oszlopban kezd&#245;dnek (teh&aacute;t a sor
	      elej&eacute;n), m&iacute;g az &ouml;sszes t&ouml;bbi sort
	      tabul&aacute;torok vagy sz&oacute;k&ouml;z&ouml;k
	      haszn&aacute;lat&aacute;val bentebb kell raknunk.</para>
	  </note>

	  <programlisting>1     default:
2       set log Phase Chat LCP IPCP CCP tun command
3       ident user-ppp VERSION (built COMPILATIONDATE)
4       set device /dev/cuad0
5       set speed 115200
6       set dial "ABORT BUSY ABORT NO\\sCARRIER TIMEOUT 5 \
7                 \"\" AT OK-AT-OK ATE1Q0 OK \\dATDT\\T TIMEOUT 40 CONNECT"
8       set timeout 180
9       enable dns
10
11    szolgaltato:
12      set phone "(123) 456 7890"
13      set authname ize
14      set authkey mize
15      set login "TIMEOUT 10 \"\" \"\" gin:--gin: \\U word: \\P col: ppp"
16      set timeout 300
17      set ifaddr <replaceable>x.x.x.x</replaceable> <replaceable>y.y.y.y</replaceable> 255.255.255.255 0.0.0.0
18      add default HISADDR</programlisting>

	  <variablelist>
	    <varlistentry>
	      <term>1. sor:</term>

	      <listitem>
		<para>Ez azonos&iacute;tja be az alap&eacute;rtelmezett
		  bejegyz&eacute;st.  Az itt szerepl&#245; parancsok a
		  <command>ppp</command> minden egyes fut&aacute;sakor
		  magukb&oacute;l v&eacute;grehajt&oacute;dnak.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>2. sor:</term>

	      <listitem>
		<para>Be&aacute;ll&iacute;tja a napl&oacute;z&aacute;s
		  param&eacute;tereit.  Amikor a
		  be&aacute;ll&iacute;t&aacute;saink m&aacute;r
		  kifog&aacute;stalanul m&#251;k&ouml;dnek, akkor ezt a
		  sort &eacute;rdemes &aacute;t&iacute;rni a
		  k&ouml;vetkez&#245;re:</para>

		<programlisting>set log phase tun</programlisting>

		<para>Ezzel jelent&#245;s m&eacute;rt&eacute;kben vissza
		  tudjuk fogni a napl&oacute;z&aacute;s
		  m&eacute;rt&eacute;k&eacute;t.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>3. sor:</term>

	      <listitem>
		<para>Ezzel mondjuk meg a PPP-nek, hogy a t&ouml;bbiek
		  fel&eacute; mik&eacute;nt azonos&iacute;tsa
		  mag&aacute;t.  A PPP akkor azonos&iacute;tja
		  mag&aacute;t a t&aacute;rsak fel&eacute;, ha
		  valamilyen gondja akad az egyeztet&eacute;sekkel
		  &eacute;s a kapcsolat
		  be&aacute;ll&iacute;t&aacute;s&aacute;val.  Az
		  &iacute;gy tov&aacute;bb&iacute;tott
		  inform&aacute;ci&oacute;k a m&aacute;sik oldal
		  rendszergazd&aacute;i sz&aacute;m&aacute;ra
		  ny&uacute;jthatnak seg&iacute;ts&eacute;get az ilyen
		  jelleg&#251; probl&eacute;m&aacute;k
		  felder&iacute;t&eacute;s&eacute;ben.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>4. sor:</term>

	      <listitem>
		<para>Itt adjuk meg az eszk&ouml;zt, amelyre a modem
		  csatlakozik.  A <devicename>COM1</devicename> neve
		  <filename>/dev/cuad0</filename>, a
		  <devicename>COM2</devicename> neve pedig
		  <filename>/dev/cuad1</filename>.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>5. sor:</term>

	      <listitem>
		<para>A csatlakoz&aacute;s sebess&eacute;g&eacute;t
		  adjuk meg.  Ha a 115&nbsp;200-as &eacute;rt&eacute;k
		  itt nem m&#251;k&ouml;dne (ez egy&eacute;bk&eacute;nt
		  minden &uacute;jabb gy&aacute;rtm&aacute;ny&uacute;
		  modem eset&eacute;ben elfogadhat&oacute;), akkor
		  helyette haszn&aacute;ljuk a 38400-as
		  be&aacute;ll&iacute;t&aacute;st.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>6. &eacute;s 7. sorok:</term>

	      <indexterm>
		<primary>PPP</primary>
		<secondary>felhaszn&aacute;l&oacute;i PPP</secondary>
	      </indexterm>

	      <listitem>
		<para>A h&iacute;v&aacute;shoz haszn&aacute;lt
		  karakterl&aacute;nc.  A felhaszn&aacute;l&oacute;i PPP
		  a &man.chat.8; programhoz hasonl&oacute;
		  <quote>k&uuml;ld&ouml;k-v&aacute;rok</quote>
		  t&iacute;pus&uacute; szerkeszt&eacute;st alkalmaz.  A
		  kihaszn&aacute;lhat&oacute;
		  lehet&#245;s&eacute;gekr&#245;l a man oldal&aacute;n
		  olvashatunk r&eacute;szletesebben.</para>

		<para>Az olvashat&oacute;s&aacute;g
		  kedv&eacute;&eacute;rt a parancs a k&ouml;vetkez&#245;
		  sorban folytat&oacute;dik.  A
		  <filename>ppp.conf</filename>
		  &aacute;llom&aacute;nyban b&aacute;rmelyik parancs,
		  ahol a <literal>\</literal> karakterrel z&aacute;rjuk
		  a sort, az ugyan&iacute;gy folytathat&oacute; a
		  k&ouml;vetkez&#245;ben.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>8. sor:</term>

	      <listitem>
		<para>A kapcsolathoz tartoz&oacute;
		  &uuml;resj&aacute;rati id&#245;t &aacute;ll&iacute;tja
		  be.  Ennek &eacute;rt&eacute;ke alapb&oacute;l
		  180&nbsp;m&aacute;sodperc, &iacute;gy ez a sor
		  puszt&aacute;n csak az &eacute;rthet&#245;s&eacute;get
		  szolg&aacute;lja.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>9. sor:</term>

	      <listitem>
		<para>Arra utas&iacute;tja a PPP-t, hogy a
		  t&ouml;bbiekt&#245;l k&eacute;rdezze le a helyi
		  n&eacute;vfelold&oacute;
		  be&aacute;ll&iacute;t&aacute;sait.  Ha saj&aacute;t
		  n&eacute;vszervert futtatunk, akkor ezt a sort
		  tegy&uuml;k ink&aacute;bb megjegyz&eacute;sbe vagy
		  t&ouml;r&ouml;lj&uuml;k ki.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>10. sor:</term>

	      <listitem>
		<para>Ez az &uuml;res sor az
		  &aacute;tl&aacute;that&oacute;s&aacute;g
		  kedv&eacute;&eacute;rt ker&uuml;lt bele.  A PPP az
		  &ouml;sszes &uuml;res sort figyelmen k&iacute;v&uuml;l
		  hagyja.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>11. sor:</term>

	      <listitem>
		<para>Itt kezd&#245;dik a <quote>szolgaltato</quote>
		  nev&#251; szolg&aacute;ltat&oacute;hoz tartoz&oacute;
		  bejegyz&eacute;s.  Ezt k&eacute;s&#245;bb ak&aacute;r
		  ki is cser&eacute;lhetj&uuml;k az
		  internet-szolg&aacute;ltat&oacute;nk nev&eacute;re,
		  &iacute;gy a <option>load
		  <replaceable>szolg&aacute;ltat&oacute;</replaceable></option>
		  be&aacute;ll&iacute;t&aacute;ssal tudjuk majd
		  beind&iacute;tani a kapcsolatot.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>12. sor:</term>

	      <listitem>
		<para>Be&aacute;ll&iacute;tjuk a
		  szolg&aacute;ltat&oacute;hoz tartoz&oacute;
		  telefonsz&aacute;mot.  A kett&#245;spont
		  (<literal>:</literal>) vagy a cs&#245;vezet&eacute;k
		  (<literal>|</literal>) karakterekkel
		  elv&aacute;lasztva t&ouml;bb telefonsz&aacute;mot is
		  meg tudunk adni.  A &man.ppp.8; oldalon olvashatunk a
		  k&eacute;t elv&aacute;laszt&oacute; k&ouml;zti
		  k&uuml;l&ouml;nbs&eacute;gekr&#245;l.  R&ouml;viden
		  ezeket &uacute;gy foglalhatn&aacute;nk &ouml;ssze,
		  hogy ha v&aacute;ltogatni akarunk a sz&aacute;mok
		  k&ouml;z&ouml;tt, akkor haszn&aacute;ljuk a
		  kett&#245;spontot.  Ha mindig az els&#245;k&eacute;nt
		  megadott sz&aacute;mot akarjuk h&iacute;vni &eacute;s
		  a t&ouml;bbit csak akkor, ha ez nem m&#251;k&ouml;dik,
		  akkor a cs&#245;vezet&eacute;k karakterre lesz
		  sz&uuml;ks&eacute;g&uuml;nk.  Ahogy a p&eacute;lda is
		  mutatja, az &ouml;sszes telefonsz&aacute;mot
		  tegy&uuml;k mindig id&eacute;z&#245;jelek
		  k&ouml;z&eacute;.</para>

		<para>Ha a telefonsz&aacute;mban egy&eacute;bk&eacute;nt
		  is szerepelnek sz&oacute;k&ouml;z&ouml;k, akkor is
		  id&eacute;z&#245;jelek (<literal>"</literal>)
		  k&ouml;z&eacute; kell tenn&uuml;nk.  Ennek
		  elhagy&aacute;s&aacute;val egy egyszer&#251;,
		  &aacute;mde k&eacute;nyes hib&aacute;t
		  ejt&uuml;nk.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>13. &eacute;s 14. sor:</term>

	      <listitem>
		<para>A felhaszn&aacute;l&oacute;i nevet &eacute;s
		  jelsz&oacute;t tartalmazza.  Amikor egy &unix;
		  fajt&aacute;j&uacute; bejelentkez&eacute;st kapunk,
		  akkor ezekre az &eacute;rt&eacute;kekre a <command>set
		  login</command> parancsban \U &eacute;s \P
		  v&aacute;ltoz&oacute;kkal tudunk hivatkozni.  Ha PAP
		  vagy CHAP haszn&aacute;lat&aacute;val
		  jelentkez&uuml;nk be, akkor ezek az
		  &eacute;rt&eacute;kek a hiteles&iacute;t&eacute;skor
		  ker&uuml;lnek felhaszn&aacute;l&aacute;sra.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>15. sor:</term>

	      <listitem>
		<indexterm><primary>PAP</primary></indexterm>
		<indexterm><primary>CHAP</primary></indexterm>

		<para>Ha a PAP vagy CHAP protokollok valamelyik&eacute;t
		  haszn&aacute;ljuk, akkor nem lesz
		  sz&uuml;ks&eacute;g&uuml;nk a login
		  v&aacute;ltoz&oacute;ra, ez&eacute;rt ezt
		  megjegyz&eacute;sbe is tehetj&uuml;k, vagy ak&aacute;r
		  ki is t&ouml;r&ouml;lhetj&uuml;k.  A <link
		  linkend="userppp-PAPnCHAP">PAP &eacute;s CHAP
		  hiteles&iacute;t&eacute;sr&#245;l</link>
		  sz&oacute;l&oacute; r&eacute;szben olvashatjuk ennek
		  tov&aacute;bbi r&eacute;szleteit.</para>

		<para>A bejelentkez&eacute;shez haszn&aacute;lt
		  karakterl&aacute;nc hasonl&iacute;t a
		  beh&iacute;v&aacute;shoz haszn&aacute;lt,
		  chat-szer&#251; fel&eacute;p&iacute;t&eacute;ssel
		  rendelkez&#245; karakterl&aacute;nchoz.  A
		  p&eacute;ld&aacute;ban l&aacute;that&oacute;
		  karakterl&aacute;nc egy olyan
		  szolg&aacute;ltat&aacute;shoz illeszkedik, ahol a
		  bejelentkez&eacute;s valahogy &iacute;gy n&eacute;z
		  ki:</para>

		<screen>A Vil&aacute;g Legjobb Szolg&aacute;ltat&oacute;ja
login: <replaceable>iz&eacute;</replaceable>
password: <replaceable>miz&eacute;</replaceable>
protocol: ppp</screen>

		<para>Ezt a szkriptet alak&iacute;tsuk a saj&aacute;t
		  ig&eacute;nyeinkhez.  Ha el&#245;sz&ouml;r
		  pr&oacute;b&aacute;lkozunk ilyen szkript
		  &iacute;r&aacute;s&aacute;val, akkor lehet&#245;leg
		  kapcsoljuk be a rendszerek k&ouml;z&ouml;tt
		  lezajl&oacute;
		  <quote>besz&eacute;lget&eacute;s</quote>
		  napl&oacute;z&aacute;s&aacute;t, hogy ellen&#245;rizni
		  tudjuk minden a megfelel&#245;en m&oacute;don
		  t&ouml;rt&eacute;nik-e.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>16. sor:</term>

	      <indexterm><primary>id&#245;korl&aacute;t</primary></indexterm>

	      <listitem>
		<para>Be&aacute;ll&iacute;tjuk a kapcsolathoz
		  tartoz&oacute; alap&eacute;rtelmezett
		  id&#245;korl&aacute;tot (m&aacute;sodpercben).  Itt a
		  kapcsolat automatikusan lez&aacute;rul
		  300&nbsp;m&aacute;sodperc t&eacute;tlens&eacute;get
		  k&ouml;vet&#245;en.  Ha nem akarunk ilyen
		  korl&aacute;tot szabni, akkor ezt az
		  &eacute;rt&eacute;ket &aacute;ll&iacute;tsuk
		  null&aacute;ra vagy haszn&aacute;ljuk a
		  <option>-ddial</option> paranccsori
		  kapcsol&oacute;t.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>17. sor:</term>

	      <indexterm><primary>internet-szolg&aacute;ltat&oacute;</primary></indexterm>

	      <listitem>
		<para>A fel&uuml;lethez tartoz&oacute; c&iacute;meket
		  &aacute;ll&iacute;tja be.  A
		  <replaceable>x.x.x.x</replaceable> hely&eacute;re a
		  szolg&aacute;ltat&oacute; &aacute;ltal kiosztott
		  IP-c&iacute;met kell be&iacute;rnunk.  A
		  <replaceable>y.y.y.y</replaceable> helyett pedig a
		  szolg&aacute;ltat&oacute;
		  &aacute;tj&aacute;r&oacute;ja ker&uuml;l be
		  (l&eacute;nyeg&eacute;ben az a g&eacute;p, amelyhez
		  csatlakozunk).  Amennyiben az
		  internet-szolg&aacute;ltat&oacute;nk nem adott meg
		  semmilyen &aacute;tj&aacute;r&oacute;t, erre a
		  c&eacute;lra a <hostid
		  role="netmask">10.0.0.2/0</hostid> c&iacute;met is
		  haszn&aacute;lhatjuk.  Amikor <quote>nek&uuml;nk kell
		  kital&aacute;lnunk</quote> ezeket a c&iacute;meket,
		  akkor ne felejts&uuml;nk el l&eacute;trehozni
		  hozz&aacute;juk egy bejegyz&eacute;st az
		  <filename>/etc/ppp/ppp.linkup</filename>
		  &aacute;llom&aacute;nyban a <link
		  linkend="userppp-dynamicIP">PPP dinamikus
		  IP-c&iacute;mmel </link> szakaszban szerepl&#245;ek
		  szerint.  Ha nem adjuk meg ezt a sort, akkor a
		  <command>ppp</command> parancs nem k&eacute;pes
		  <option>-auto</option> m&oacute;dban
		  m&#251;k&ouml;dni.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>18. sor:</term>

	      <listitem>
		<para>A szolg&aacute;ltat&oacute;
		  &aacute;tj&aacute;r&oacute;j&aacute;hoz felvesz egy
		  alap&eacute;rtelmezett &uacute;tvonalat.  A
		  <literal>HISADDR</literal> kulcssz&oacute;t a 17.
		  sorban megadott &aacute;tj&aacute;r&oacute;
		  c&iacute;m&eacute;vel helyettes&iacute;tj&uuml;k.
		  Ez&eacute;rt fontos, hogy ez a 17.  sor ut&aacute;n
		  szerepeljen, k&uuml;l&ouml;nben a
		  <literal>HISADDR</literal> nem lesz k&eacute;pes
		  inicializ&aacute;l&oacute;dni.</para>

		<para>Ha a <command>ppp</command> parancsot nem akarjuk
		  <option>-auto</option> m&oacute;dban futtatni, akkor ezt
		  a sort a <filename>ppp.linkup</filename>
		  &aacute;llom&aacute;nyba is &aacute;trakhatjuk.</para>
	      </listitem>
	    </varlistentry>
	  </variablelist>

	  <para>Ha statikus IP-c&iacute;mmel rendelkez&uuml;nk &eacute;s
	    a <command>ppp</command> <option>-auto</option>
	    m&oacute;dban fut, akkor a <filename>ppp.linkup</filename>
	    &aacute;llom&aacute;nyba eg&eacute;szen addig nem kell
	    semmit sem &iacute;rnunk, am&iacute;g a csatlakoz&aacute;s
	    el&#245;tt az &uacute;tv&aacute;laszt&aacute;si
	    t&aacute;bl&aacute;zatokban a megfelel&#245; adatok
	    tal&aacute;lhat&oacute;ak.  Olyankor is j&oacute;l
	    j&ouml;het, amikor a csatlakoz&aacute;st k&ouml;vet&#245;en
	    meg akarunk h&iacute;vni bizonyos programokat.  Ezt majd a
	    <application>sendmail</application>es p&eacute;ld&aacute;ban
	    fogjuk b&#245;vebben kifejteni.</para>

	  <para>Erre p&eacute;ld&aacute;kat a
	    <filename>/usr/share/examples/ppp/</filename>
	    k&ouml;nyvt&aacute;rban tal&aacute;lhatunk.</para>

	</sect4>

	<sect4 id="userppp-dynamicIP">
	  <title>PPP dinamikus IP-c&iacute;mmel</title>

	  <indexterm>
	    <primary>PPP</primary>
	    <secondary>dinamikus IP-c&iacute;mmel</secondary>
	  </indexterm>

	  <indexterm><primary>IPCP</primary></indexterm>

	  <para>Ha az internet-szolg&aacute;ltat&oacute;nkt&oacute;l nem
	    kaptunk statikus IP-c&iacute;met, akkor a
	    <command>ppp</command> paranccsal is be tudjuk
	    &aacute;ll&iacute;tani a helyi &eacute;s t&aacute;voli
	    c&iacute;meket.  Ez az IP-c&iacute;mek
	    <quote>kital&aacute;l&aacute;s&aacute;val</quote>
	    t&ouml;rt&eacute;nik, valamint &uacute;gy, hogy a
	    <command>ppp</command> sz&aacute;m&aacute;ra a
	    csatlakoz&aacute;s ut&aacute;n lehet&#245;v&eacute;
	    tessz&uuml;k az IP konfigur&aacute;ci&oacute;s protocol (IP
	    Configuration Protocol, IPCP) haszn&aacute;lat&aacute;t.  A
	    <filename>ppp.conf</filename> tartalma szinte teljesen
	    megegyezik a <link linkend="userppp-staticIP">PPP statikus
	    IP-c&iacute;mmel</link> r&eacute;szben szerepl&#245;vel,
	    egyetlen apr&oacute; k&uuml;l&ouml;nbs&eacute;ggel:</para>

	  <programlisting>17      set ifaddr 10.0.0.1/0 10.0.0.2/0 255.255.255.255</programlisting>

	  <para>Ism&eacute;t szeretn&eacute;nk elmondani, hogy a
	    sorsz&aacute;mot ne &iacute;rjuk bele, hiszen az csak
	    hivatkoz&aacute;si c&eacute;llal szerepel.  Legal&aacute;bb
	    egy sz&oacute;k&ouml;zzel kezdj&uuml;nk bentebb.</para>

	  <variablelist>
	    <varlistentry>
	      <term>17. sor:</term>

	      <listitem>
		<para>A <literal>/</literal> ut&aacute;n megjelen&#245;
		  sz&aacute;m azoknak a biteknek a sz&aacute;m&aacute;t
		  adja meg, amire a ppp t&aacute;maszkodik.  A
		  k&ouml;rnyezet&uuml;nknek jobban megfelel&#245;
		  IP-c&iacute;meket is megadhatunk, de a fenti
		  p&eacute;lda minden esetben m&#251;k&ouml;dni
		  fog.</para>

		<para>Az utols&oacute; param&eacute;terrel
		  (<literal>0.0.0.0</literal>) azt mondjuk a PPP-nek,
		  hogy az egyeztet&eacute;st ne a <hostid
		  role="ipaddr">10.0.0.1</hostid>, hanem a <hostid
		  role="ipaddr">0.0.0.0</hostid> c&iacute;mmel kezdje
		  meg, amire egyes szolg&aacute;ltat&oacute;k
		  eset&eacute;n sz&uuml;ks&eacute;g&uuml;nk is lesz.  A
		  <command>set ifaddr</command> els&#245;
		  param&eacute;terek&eacute;nt azonban soha ne adjuk meg
		  a <literal>0.0.0.0</literal> c&iacute;met, mivel ezzel
		  a PPP <option>-auto</option> m&oacute;dban nem tudja
		  be&aacute;ll&iacute;tani a kezdeti
		  &uacute;tvonalat.</para>
	      </listitem>
	    </varlistentry>
	  </variablelist>

	  <para>Ha nem <option>-auto</option> m&oacute;dban
	    ind&iacute;tjuk, akkor az
	    <filename>/etc/ppp/ppp.linkup</filename>
	    &aacute;llom&aacute;nyban meg kell adnunk m&eacute;g egy
	    bejegyz&eacute;st is.  A <filename>ppp.linkup</filename>
	    &aacute;llom&aacute;nyt a kapcsolat l&eacute;trej&ouml;tte
	    ut&aacute;n dolgozzuk fel.  Itt m&aacute;r a
	    <command>ppp</command> megkapta a fel&uuml;lethez
	    tartoz&oacute; c&iacute;meket, &iacute;gy az
	    &uacute;tv&aacute;laszt&aacute;si t&aacute;bl&aacute;zatba
	    fel tudjuk venni hozz&aacute;juk a megfelel&#245;
	    bejegyz&eacute;seket:</para>

	  <programlisting>1     szolgaltato:
2      add default HISADDR</programlisting>

	  <variablelist>
	    <varlistentry>
	      <term>1. sor:</term>

	      <listitem>
		<para>A kapcsolat fel&eacute;p&iacute;t&eacute;se
		  sor&aacute;n a <command>ppp</command> a
		  <filename>ppp.linkup</filename>
		  &aacute;llom&aacute;nyban a k&ouml;vetkez&#245;
		  szab&aacute;lyok szerint fogja keresni a
		  bejegyz&eacute;seket: el&#245;sz&ouml;r a
		  <filename>ppp.conf</filename>
		  &aacute;llom&aacute;nyban megadott
		  c&iacute;mk&eacute;t pr&oacute;b&aacute;lja
		  megtal&aacute;lni.  Ha ez nem siker&uuml;l, akkor az
		  &aacute;tj&aacute;r&oacute;nknak megfelel&#245;
		  bejegyz&eacute;st kezdi el keresni.  Ez egy
		  n&eacute;gy byte-b&oacute;l &aacute;ll&oacute;,
		  fel&iacute;r&aacute;s&aacute;ban az IP-c&iacute;mekhez
		  hasonl&iacute;t&oacute; c&iacute;mke.  Ha m&eacute;g
		  ez a c&iacute;mke sem tal&aacute;lhat&oacute;, akkor a
		  <literal>MYADDR</literal> bejegyz&eacute;st
		  keresi.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>2. sor:</term>

	      <listitem>
		<para>Ez a sor mondja meg a <command>ppp</command>
		  programnak, hogy vegyen fel egy
		  <literal>HISADDR</literal> c&iacute;mre
		  vonatkoz&oacute; alap&eacute;rtelmezett
		  &uacute;tvonalat.  A <literal>HISADDR</literal>
		  c&iacute;met az IPCP &aacute;ltal egyeztetett
		  &aacute;tj&aacute;r&oacute; IP-c&iacute;m&eacute;re
		  cser&eacute;lj&uuml;k ki.</para>
	      </listitem>
	    </varlistentry>
	  </variablelist>

	  <para>Ha erre a r&eacute;szletesebb p&eacute;ld&aacute;t
	    akarunk l&aacute;tni, akkor a
	    <filename>/usr/share/examples/ppp/ppp.conf.sample</filename>
	    &eacute;s
	    <filename>/usr/share/examples/ppp/ppp.linkup.sample</filename>
	    &aacute;llom&aacute;nyokban a <literal>pmdemand</literal>
	    bejegyz&eacute;st n&eacute;zz&uuml;k meg.</para>

	</sect4>

	<sect4>
	  <title>A bej&ouml;v&#245; h&iacute;v&aacute;sok
	    fogad&aacute;sa</title>

	  <indexterm>
	    <primary>PPP</primary>
	    <secondary>bej&ouml;v&#245; h&iacute;v&aacute;sok
	      fogad&aacute;sa</secondary>
	  </indexterm>

	  <para>Amikor egy helyi h&aacute;l&oacute;zathoz
	    csatlakoz&oacute; g&eacute;pen akarjuk a
	    <application>ppp</application> programot
	    be&aacute;ll&iacute;tani a bej&ouml;v&#245;
	    h&iacute;v&aacute;sok fogad&aacute;s&aacute;ra, akkor azt is
	    el kell d&ouml;nten&uuml;nk, hogy
	    enged&eacute;lyezz&uuml;k-e a csomagok
	    tov&aacute;bbk&uuml;ld&eacute;s&eacute;t a bels&#245;
	    h&aacute;l&oacute;zat fel&eacute;.  Amennyiben igen, akkor a
	    becsatlakoz&oacute; g&eacute;penek a bels&#245;
	    h&aacute;l&oacute;zatunkon ki kell osztani egy
	    k&uuml;l&ouml;n c&iacute;met &eacute;s az
	    <filename>/etc/ppp/ppp.conf</filename>
	    &aacute;llom&aacute;nyban, &eacute;s meg kell adnunk az
	    <command>enable proxy</command> parancsot.  Emellett
	    m&eacute;g az <filename>/etc/rc.conf</filename>
	    &aacute;llom&aacute;nyban se feleljts&uuml;k el megadni a
	    k&ouml;vetkez&#245; sort:</para>

	  <programlisting>gateway_enable="YES"</programlisting>

	</sect4>

	<sect4>
	  <title>Melyik getty?</title>

	  <para><link linkend="dialup">A &os;
	    be&aacute;ll&iacute;t&aacute;sa
	    bet&aacute;rcs&aacute;z&oacute;s kapcsolatokhoz</link>
	    nagyon j&oacute;l bemutatja a
	    bet&aacute;rcs&aacute;z&oacute;s
	    szolg&aacute;ltat&aacute;sok
	    be&aacute;ll&iacute;t&aacute;s&aacute;t a &man.getty.8;
	    seg&iacute;ts&eacute;g&eacute;vel.</para>

	  <para>A <command>getty</command> helyett
	    egy&eacute;bk&eacute;nt az <ulink
	    url="http://www.leo.org/~doering/mgetty/index.html">
	    mgetty</ulink>, a <command>getty</command> egy &uuml;gyesebb
	    v&aacute;ltozata is haszn&aacute;lhat&oacute;, ami
	    kifejezetten a bet&aacute;rcs&aacute;z&oacute;s vonalakhoz
	    k&eacute;sz&uuml;lt.</para>

	  <para>A <command>mgetty</command> haszn&aacute;lat&aacute;nak
	    t&ouml;bbek k&ouml;zt az egyik el&#245;nye, hogy
	    <emphasis>akt&iacute;van tartja a kapcsolatot</emphasis> a
	    modemekkel, teh&aacute;t hogy ha az
	    <filename>/etc/ttys</filename> &aacute;llom&aacute;nyban
	    letiltjuk a modemet, akkor nem is fog v&aacute;laszolni a
	    h&iacute;v&aacute;sokra.</para>

	  <para>Emellett az <command>mgetty</command>
	    k&eacute;s&#245;bbi v&aacute;ltozatai (a 0.99 beta
	    v&aacute;ltozat&aacute;t&oacute;l kezdve) m&eacute;g a PPP
	    folyamok automatikus &eacute;szlel&eacute;s&eacute;t is
	    t&aacute;mogatj&aacute;k, ez&aacute;ltal a kliensek
	    szkriptek n&eacute;lk&uuml;l is k&eacute;pesek el&eacute;rni
	    a szerver&uuml;nket.</para>

	  <para>Ha err&#245;l t&ouml;bbet akarunk megtudni, akkor az
	    <command>mgetty</command> paranccsal kapcsolatban olvassuk
	    el <link linkend="userppp-mgetty">Az mgetty &eacute;s az
	    AutoPPP</link> c&iacute;m&#251; szakaszt.</para>

	</sect4>

	<sect4>
	  <title>A <application>PPP</application>
	    enged&eacute;lyei</title>

	  <para>A <command>ppp</command> parancsot
	    &aacute;ltal&aacute;ban <username>root</username>
	    felhaszn&aacute;l&oacute;k&eacute;nt kell futtatni.  Ha
	    viszont a <command>ppp</command> parancsot tetsz&#245;leges
	    felhaszn&aacute;l&oacute;val akarjuk szerver m&oacute;dban
	    futtatni az im&eacute;ntiek szerint, akkor ahhoz fel kell
	    venn&uuml;nk az <filename>/etc/group</filename>
	    &aacute;llom&aacute;nyban szerepl&#245;
	    <groupname>network</groupname> csoportba.</para>

	  <para>Ezeken k&iacute;v&uuml;l m&eacute;g az
	    <command>allow</command> paranccsal is
	    enged&eacute;lyezn&uuml;nk kell konfigur&aacute;ci&oacute;s
	    &aacute;llom&aacute;ny egy vagy t&ouml;bb
	    r&eacute;sz&eacute;nek el&eacute;r&eacute;s&eacute;t
	    is:</para>

	  <programlisting>allow users fred mary</programlisting>

	  <para>Ha ezt a parancsot a <literal>default</literal>
	    bejegyz&eacute;sn&eacute;l adjuk meg, akkor az &iacute;gy
	    megadott felhaszn&aacute;l&oacute;k mindenhez hozz&aacute;
	    tudnak f&eacute;rni.</para>

	</sect4>

	<sect4>
	  <title>PPP shellek a dinamikus IP-c&iacute;mek
	    haszn&aacute;l&oacute;inak</title>

	  <indexterm><primary>PPP shellek</primary></indexterm>

	  <para>Hozzunk l&eacute;tre egy
	    <filename>/etc/ppp/ppp-shell</filename> nev&#251;
	    &aacute;llom&aacute;nyt, amelyben a k&ouml;vetkez&#245;k
	    szerepelnek:</para>

	  <programlisting>#!/bin/sh
IDENT=`echo $0 | sed -e 's/^.*-\(.*\)$/\1/'`
CALLEDAS="$IDENT"
TTY=`tty`

if [ x$IDENT = xdialup ]; then
        IDENT=`basename $TTY`
fi

echo "PPP for $CALLEDAS on $TTY"
echo "Starting PPP for $IDENT"

exec /usr/sbin/ppp -direct $IDENT</programlisting>

	  <para>Ez a szkript legyen v&eacute;grehajthat&oacute;.
	    Ezut&aacute;n az al&aacute;bbi paranccsal
	    <filename>ppp-dialup</filename> n&eacute;ven
	    k&eacute;sz&iacute;ts&uuml;nk egy szimbolikus linket erre a
	    szkriptre:</para>

	  <screen>&prompt.root; <userinput>ln -s ppp-shell /etc/ppp/ppp-dialup</userinput></screen>

	  <para>Ez a szkript lesz az &ouml;sszes
	    bet&aacute;rcs&aacute;z&oacute; felhaszn&aacute;l&oacute;nk
	    <emphasis>shellje</emphasis>.  A most k&ouml;vetkez&#245;
	    p&eacute;lda az <filename>/etc/passwd</filename>
	    &aacute;llom&aacute;nyban szerepl&#245;,
	    <username>pchilds</username> nev&#251; PPP
	    felhaszn&aacute;l&oacute; bejegyz&eacute;s&eacute;t mutatja
	    be (ne felejts&uuml;k el, hogy soha ne k&ouml;zvetlen&uuml;l
	    szerkessz&uuml;k a jelszavakat t&aacute;rol&oacute;
	    &aacute;llom&aacute;nyt, hanem a &man.vipw.8;
	    seg&iacute;ts&eacute;g&eacute;vel).</para>

	  <programlisting>pchilds:*:1011:300:Peter Childs PPP:/home/ppp:/etc/ppp/ppp-dialup</programlisting>

	  <para>Hozzunk l&eacute;tre egy <filename>/home/ppp</filename>
	    nev&#251; k&ouml;nyvt&aacute;rat a k&ouml;vetkez&#245;
	    b&aacute;rki &aacute;ltal olvashat&oacute; 0 byte-os
	    &aacute;llom&aacute;nyokkal:</para>

	  <screen>-r--r--r--   1 root     wheel           0 May 27 02:23 .hushlogin
-r--r--r--   1 root     wheel           0 May 27 02:22 .rhosts</screen>

	  <para>Ezek hat&aacute;s&aacute;ra az
	    <filename>/etc/motd</filename> &aacute;llom&aacute;ny
	    tartalma nem jelenik meg.</para>

	</sect4>

	<sect4>
	  <title>PPP shellek a statikus IP-c&iacute;mek
	    haszn&aacute;l&oacute;inak</title>

	  <indexterm><primary>PPP shellek</primary></indexterm>

	  <para>Az im&eacute;ntiekhez hasonl&oacute; m&oacute;don
	    k&eacute;sz&iacute;ts&uuml;k el a
	    <filename>ppp-shell</filename> &aacute;llom&aacute;nyt,
	    &eacute;s mindegyik statikus IP-vel rendelkez&#245;
	    hozz&aacute;f&eacute;r&eacute;shez csin&aacute;ljunk egy
	    szimbolikus linket a <filename>ppp-shell</filename>
	    szkriptre.</para>

	  <para>P&eacute;ld&aacute;ul, ha h&aacute;rom
	    bet&aacute;rcs&aacute;z&oacute;s &uuml;gyfel&uuml;nk van,
	    <username>fred</username>, <username>sam</username>
	    &eacute;s <username>mary</username>, fel&eacute;j&uuml;k
	    24&nbsp;bites CIDR h&aacute;l&oacute;zatokat
	    k&ouml;zvet&iacute;t&uuml;nk, akkor a k&ouml;vetkez&#245;ket
	    kell beg&eacute;peln&uuml;nk:</para>

	  <screen>&prompt.root; <userinput>ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-fred</userinput>
&prompt.root; <userinput>ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-sam</userinput>
&prompt.root; <userinput>ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-mary</userinput></screen>

	  <para>A fentebb szerepl&#245; bet&aacute;rcs&aacute;z&oacute;s
	    felhaszn&aacute;l&oacute;k el&eacute;r&eacute;seihez
	    tartoz&oacute; shelleket &aacute;ll&iacute;tsuk be az itt
	    l&eacute;trehozott szimbolikus linkekre (&iacute;gy
	    teh&aacute;t <username>mary</username> shellje az
	    <filename>/etc/ppp/ppp-mary</filename> lesz).</para>

	</sect4>

	<sect4>
	  <title>A <filename>ppp.conf</filename>
	    be&aacute;ll&iacute;t&aacute;sa a dinamikus IP-c&iacute;mek
	    haszn&aacute;l&oacute;inak</title>

	  <para>Az <filename>/etc/ppp/ppp.conf</filename>
	    &aacute;llom&aacute;nyban a k&ouml;vetkez&#245; sorok
	    valamelyik&eacute;nek kellene szerepelnie:</para>

	  <programlisting>default:
  set debug phase lcp chat
  set timeout 0

ttyd0:
  set ifaddr 203.14.100.1 203.14.100.20 255.255.255.255
  enable proxy

ttyd1:
  set ifaddr 203.14.100.1 203.14.100.21 255.255.255.255
  enable proxy</programlisting>

	  <note>
	    <para>A bentebb kezdett sorokat mi is kezdj&uuml;nk
	      bentebb.</para>
	  </note>

	  <para>A <literal>default:</literal> szakasz minden kapcsolat
	    eset&eacute;n bet&ouml;lt&#245;dik.  Az
	    <filename>/etc/ttys</filename> &aacute;llom&aacute;nyban
	    enged&eacute;lyezett mindegyik
	    bet&aacute;rcs&aacute;z&oacute;s vonal l&eacute;trehoz a
	    fenti <literal>ttyd0:</literal> szakaszhoz hasonl&oacute;
	    bejegyz&eacute;st.  Minden vonal kap egy egyedi
	    IP-c&iacute;met a dinamikus felhaszn&aacute;l&oacute;k
	    sz&aacute;m&aacute;ra sz&aacute;nt
	    c&iacute;mtartom&aacute;nyb&oacute;l.</para>

	</sect4>

	<sect4>
	  <title>A <filename>ppp.conf</filename>
	    be&aacute;ll&iacute;t&aacute;sa a statikus IP-vel
	    rendelkez&#245;k sz&aacute;m&aacute;ra</title>

	  <para>A <filename>/usr/share/examples/ppp/ppp.conf</filename>
	    &aacute;llom&aacute;nyban szerepl&#245; tartalom mellett az
	    &ouml;sszes statikus kioszt&aacute;s&uacute;
	    IP-c&iacute;mmel rendelkez&#245;
	    bet&aacute;rcs&aacute;z&oacute; felhaszn&aacute;l&oacute;hoz
	    m&eacute;g hozz&aacute; kell tenn&uuml;nk egy szakaszt.  A
	    p&eacute;ld&aacute;nkban ezek tov&aacute;bbra is
	    <username>fred</username>, <username>sam</username>
	    &eacute;s <username>mary</username>.</para>

	  <programlisting>fred:
  set ifaddr 203.14.100.1 203.14.101.1 255.255.255.255

sam:
  set ifaddr 203.14.100.1 203.14.102.1 255.255.255.255

mary:
  set ifaddr 203.14.100.1 203.14.103.1 255.255.255.255</programlisting>

	  <para>Amennyiben sz&uuml;ks&eacute;ges, az
	    <filename>/etc/ppp/ppp.linkup</filename> tartalmazhat
	    tov&aacute;bbi &uacute;tv&aacute;laszt&aacute;si
	    inform&aacute;ci&oacute;kat is az egyes statikus
	    IP-c&iacute;mmel rendelkez&#245;
	    felhaszn&aacute;l&oacute;khoz.  A lentebb bemutatott sor a
	    kliens ppp &ouml;sszek&ouml;tett&eacute;s&eacute;n
	    kereszt&uuml;l vesz fel egy &uacute;tvonalat a <hostid
	    role="ipaddr">203.14.101.0/24</hostid> h&aacute;l&oacute;zat
	    fel&eacute;.</para>

	  <programlisting>fred:
  add 203.14.101.0 netmask 255.255.255.0 HISADDR

sam:
  add 203.14.102.0 netmask 255.255.255.0 HISADDR

mary:
  add 203.14.103.0 netmask 255.255.255.0 HISADDR</programlisting>

	</sect4>

	<sect4 id="userppp-mgetty">
	  <title>Az <command>mgetty</command> &eacute;s az
	    AutoPPP</title>

	  <indexterm><primary><command>mgetty</command></primary></indexterm>
	  <indexterm><primary>AutoPPP</primary></indexterm>
	  <indexterm><primary>LCP</primary></indexterm>

	  <para>Ha az <command>mgetty</command> programot az
	    <literal>AUTO_PPP</literal>
	    be&aacute;ll&iacute;t&aacute;ssal ford&iacute;tjuk le, akkor
	    azzal az <command>mgetty</command> k&eacute;pess&eacute;
	    v&aacute;lik a PPP kapcsolatok LCP f&aacute;zis&aacute;t
	    &eacute;szlelni &eacute;s mag&aacute;t&oacute;l
	    l&eacute;trehozni hozz&aacute; egy ppp shellt.  Mivel az
	    alap&eacute;rtelmezett n&eacute;v/jelsz&oacute; p&aacute;ros
	    azonban ilyenkor nem jelenik meg, a
	    felhaszn&aacute;l&oacute;kat a PAP vagy a CHAP protokollon
	    kereszt&uuml;l lehet hiteles&iacute;teni.</para>

	  <para>Ez a szakasz most felt&eacute;telezi, hogy a sikeresen
	    be&aacute;ll&iacute;tottuk, leford&iacute;tottuk &eacute;s
	    telep&iacute;tett&uuml;k az <command>mgetty</command>
	    valamelyik (0.99 b&eacute;ta vagy k&eacute;s&#245;bbi)
	    v&aacute;ltozat&aacute;t az <literal>AUTO_PPP</literal>
	    opci&oacute; enged&eacute;lyez&eacute;s&eacute;vel.</para>

	  <para>Az
	  <filename>/usr/local/etc/mgetty+sendfax/login.config</filename>
	    &aacute;llom&aacute;nyban ne felejts&uuml;k
	    ellen&#245;rizni, hogy szerepel a
	    k&ouml;vetkez&#245;:</para>

	  <programlisting>/AutoPPP/ -     -		      /etc/ppp/ppp-pap-dialup</programlisting>

	  <para>Ezzel utas&iacute;tjuk az <command>mgetty</command>
	    programot arra, hogy az &eacute;szlelt PPP kapcsolatokhoz
	    futtassa le a <filename>ppp-pap-dialup</filename>
	    szkriptet.</para>

	  <para>Hozzunk l&eacute;tre az
	    <filename>/etc/ppp/ppp-pap-dialup</filename> nev&#251;
	    &aacute;llom&aacute;nyt, amelyben majd a
	    k&ouml;vetkez&#245;k fognak szerepelni (az
	    &aacute;llom&aacute;ny legyen
	    v&eacute;grehajthat&oacute;):</para>

	  <programlisting>#!/bin/sh
exec /usr/sbin/ppp -direct pap$IDENT</programlisting>

	  <para>Az <filename>/etc/ttys</filename>
	    &aacute;llom&aacute;nyban enged&eacute;lyezett &ouml;sszes
	    bet&aacute;rcs&aacute;z&oacute;s vonalhoz
	    k&eacute;sz&iacute;ts&uuml;k el a megfelel&#245;
	    bejegyz&eacute;st az <filename>/etc/ppp/ppp.conf</filename>
	    &aacute;llom&aacute;nyban.  Ezek remek&uuml;l meg fognak
	    f&eacute;rni az im&eacute;nt k&eacute;sz&iacute;tett
	    defin&iacute;ci&oacute;kkal.</para>

	  <programlisting>pap:
  enable pap
  set ifaddr 203.14.100.1 203.14.100.20-203.14.100.40
  enable proxy</programlisting>

	  <para>Minden olyan felhaszn&aacute;l&oacute;nak, aki ezzel a
	    m&oacute;dszerrel jelentkezik be, sz&uuml;ks&eacute;ge lesz
	    egy n&eacute;v/jelsz&oacute; kombin&aacute;ci&oacute;ra az
	    <filename>/etc/ppp/ppp.secret</filename>
	    &aacute;llom&aacute;nyban, vagy az al&aacute;bbi
	    be&aacute;ll&iacute;t&aacute;s megad&aacute;s&aacute;val
	    v&aacute;laszthatjuk azt is, hogy a
	    felhaszn&aacute;l&oacute;kat az
	    <filename>/etc/passwd</filename> &aacute;llom&aacute;nyon
	    kereszt&uuml;l a PAP protokoll
	    seg&iacute;ts&eacute;g&eacute;vel azonos&iacute;tjuk.</para>

	  <programlisting>enable passwdauth</programlisting>

	  <para>Ha statikus IP-c&iacute;met akarunk kiosztani
	    n&eacute;mely felhaszn&aacute;l&oacute;knak, akkor az
	    <filename>/etc/ppp/ppp.secret</filename>
	    &aacute;llom&aacute;nyban ezt megadhatjuk a harmadik
	    param&eacute;ternek.  Err&#245;l b&#245;vebben a
	    <filename>/usr/share/examples/ppp/ppp.secret.sample</filename>
	    &aacute;llom&aacute;nyban l&aacute;thatunk
	    p&eacute;ld&aacute;t.</para>

	</sect4>

	<sect4>
	  <title>A Microsoft kiterjeszt&eacute;sei</title>

	  <indexterm><primary>DNS</primary></indexterm>    
	  <indexterm><primary>NetBIOS</primary></indexterm>
	  <indexterm>
	    <primary>PPP</primary>
	    <secondary>Microsoft kiterjeszt&eacute;sek</secondary>
	  </indexterm>

	  <para>A PPP &uacute;gy is be&aacute;ll&iacute;that&oacute;,
	    hogy k&eacute;r&eacute;sre DNS &eacute;s NetBIOS
	    t&iacute;pus&uacute; n&eacute;vfelold&aacute;shoz is
	    szolg&aacute;ltasson inform&aacute;ci&oacute;kat.</para>

	  <para>A PPP 1.x v&aacute;ltozat&aacute;val &uacute;gy lehet
	    enged&eacute;lyezni ezeket a kiterjeszt&eacute;seket, ha az
	    <filename>/etc/ppp/ppp.conf</filename>
	    &aacute;llom&aacute;ny megfelel&#245; r&eacute;szeibe
	    felvessz&uuml;k a k&ouml;vetkez&#245; sorokat:</para>

	  <programlisting>enable msext
set ns 203.14.100.1 203.14.100.2
set nbns 203.14.100.5</programlisting>

	  <para>A PPP m&aacute;sodik &eacute;s k&eacute;s&#245;bbi
	    v&aacute;ltozataiban pedig:</para>

	  <programlisting>accept dns
set dns 203.14.100.1 203.14.100.2
set nbns 203.14.100.5</programlisting>

	  <para>Ezzel a kliens megkapja az els&#245;dleges &eacute;s
	    m&aacute;sodlagos n&eacute;vszerverek c&iacute;meit,
	    valamint a NetBIOS n&eacute;vszervert.</para>

	  <para>Ha a m&aacute;sodik &eacute;s az azt k&ouml;vet&#245;
	    verzi&oacute;kban a <literal>set dns</literal> sort
	    elhagyjuk, akkor a PPP az
	    <filename>/etc/resolv.conf</filename>
	    &aacute;llom&aacute;nyban tal&aacute;lhat&oacute;
	    &eacute;rt&eacute;keket fogja haszn&aacute;lni.</para>

	</sect4>

	<sect4 id="userppp-PAPnCHAP">
	  <title>A PAP &eacute;s CHAP hiteles&iacute;t&eacute;s</title>

	  <indexterm><primary>PAP</primary></indexterm>
	  <indexterm><primary>CHAP</primary></indexterm>

	  <para>Egyes internet-szolg&aacute;ltat&oacute;k &uacute;gy
	    &aacute;ll&iacute;tj&aacute;k be a rendszer&uuml;ket, hogy a
	    kapcsolat fel&eacute;p&iacute;t&eacute;se sor&aacute;n a
	    hiteles&iacute;t&eacute;s a PAP vagy CHAP mechanizmusok
	    valamelyik&eacute;vel t&ouml;rt&eacute;nik.  Ilyenkor a
	    szolg&aacute;ltat&oacute; nem egy <prompt>login:</prompt>
	    sorral fogja bek&eacute;rni a sz&uuml;ks&eacute;ges
	    adatokat, hanem k&ouml;zvetlen&uuml;l a PPP kapcsolatot
	    kezdi el haszn&aacute;lni.</para>

	  <para>A PAP nem olyan biztons&aacute;gos, mint a CHAP, de itt
	    a biztons&aacute;g nem is annyira fontos, mivel a jelszavak,
	    amelyeket ugyan a PAP titkos&iacute;tatlan form&aacute;ban
	    k&uuml;ld tov&aacute;bb, csak egy soros vonalon haladnak
	    &aacute;t.  A rossz indulat&uacute; t&aacute;mad&oacute;k
	    itt nem sok mindent tudnak
	    <quote>lehallgatni</quote>.</para>

	  <para>A <link linkend="userppp-staticIP">PPP statikus
	    IP-c&iacute;mmel</link> &eacute;s a <link
	    linkend="userppp-dynamicIP">PPP dinamikus IP
	    c&iacute;mmel</link> c&iacute;m&#251; szakaszokhoz
	    k&eacute;pest a k&ouml;vetkez&#245;
	    m&oacute;dos&iacute;t&aacute;sokat kell
	    elv&eacute;gezn&uuml;nk:</para>

	  <programlisting>13      set authname <replaceable>AFelhaszn&aacute;l&oacute;iNevem</replaceable>
14      set authkey <replaceable>AJelszavam</replaceable>
15      set login</programlisting>

	  <variablelist>
	    <varlistentry>
	      <term>13. sor:</term>

	      <listitem>
		<para>Ebben a sorban adjuk meg a PAP/CHAP
		  felhaszn&aacute;l&oacute;i nev&uuml;nket, amelyet
		  <replaceable>AFelhaszn&aacute;l&oacute;iNevem</replaceable>
		  helyett kell be&iacute;rni.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>14. sor:</term>

	      <indexterm><primary>jelsz&oacute;</primary></indexterm>

	      <listitem>
		<para>Ebben a sorban adjuk meg a PAP/CHAP jelszavunkat,
		  <replaceable>AJelszavam</replaceable> helyett.
		  Sz&aacute;nd&eacute;nkunk
		  egy&eacute;rtelm&#251;s&iacute;t&eacute;se
		  &eacute;rdek&eacute;ben ezek mellett m&eacute;g egy
		  tov&aacute;bbi sort is &eacute;rdemes felvenn&uuml;nk,
		  teh&aacute;t:</para>

		<programlisting>16      accept PAP</programlisting>

		<para>vagy</para>

		<programlisting>16      accept CHAP</programlisting>

		<para>Alap&eacute;rtelmez&eacute;s szerint a PAP
		  &eacute;s CHAP is egyar&aacute;nt elfogadott.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term>15. sor:</term>

	      <listitem>
		<para>A PAP &eacute;s CHAP alkalmaz&aacute;sakor
		  &aacute;ltal&aacute;ban nem is kell
		  bejelentkezn&uuml;nk a szolg&aacute;ltat&oacute;
		  szerver&eacute;re.  Ez&eacute;rt a <quote>set
		  login</quote> parancsn&aacute;l haszn&aacute;lt
		  karakterl&aacute;ncot le is kell tiltanunk.</para>
	      </listitem>
	    </varlistentry>
	  </variablelist>

	</sect4>

	<sect4>
	  <title>A <command>ppp</command>
	    be&aacute;ll&iacute;t&aacute;sainak
	    megv&aacute;ltoztat&aacute;sa menet k&ouml;zben</title>

	  <para>A h&aacute;tt&eacute;rben fut&oacute;
	    <command>ppp</command> programhoz menet k&ouml;zben is
	    tudunk besz&eacute;lni, de csak olyankor, amikor az ehhez
	    sz&uuml;ks&eacute;ges portot megadtuk.  Ezt &uacute;gy
	    tudjuk megtenni, ha be&aacute;ll&iacute;t&aacute;sok
	    k&ouml;z&eacute; felvessz&uuml;k az al&aacute;bbit:</para>

	  <programlisting>set server /var/run/ppp-tun<replaceable>%d</replaceable> DiagnosticPassword 0177</programlisting>

	  <para>&Iacute;gy a PPP az el&#245;re megadott &unix;
	    tartom&aacute;nybeli socketen kereszt&uuml;l fogja
	    v&aacute;rni a kapcsol&oacute;d&aacute;sunkat, &eacute;s a
	    konkr&eacute;t hozz&aacute;f&eacute;r&eacute;shez
	    jelsz&oacute;t k&eacute;r.  A n&eacute;vben szerepl&#245;
	    <literal>%d</literal> a haszn&aacute;latban lev&#245;
	    <devicename>tun</devicename> eszk&ouml;z
	    sorsz&aacute;m&aacute;t jel&ouml;li.</para>

	  <para>Miut&aacute;n a csatlakoz&aacute;s
	    be&aacute;ll&iacute;t&oacute;dott, a szkriptekben a
	    &man.pppctl.8; program haszn&aacute;lhat&oacute; a
	    fut&oacute; program
	    vez&eacute;rl&eacute;s&eacute;hez.</para>

	</sect4>
      </sect3>

      <sect3 id="userppp-nat">
	<title>A PPP h&aacute;l&oacute;zati
	  c&iacute;mford&iacute;t&aacute;si
	  k&eacute;pess&eacute;g&eacute;nek
	  kihaszn&aacute;l&aacute;sa</title>

	<indexterm><primary>PPP</primary><secondary>NAT</secondary></indexterm>

	<para>A PPP k&eacute;pes a rendszermag
	  r&aacute;seg&iacute;t&eacute;se n&eacute;lk&uuml;l
	  k&eacute;pes h&aacute;l&oacute;zati
	  c&iacute;mford&iacute;t&aacute;st v&eacute;gezni.  Ezt a
	  lehet&#245;s&eacute;get a k&ouml;vetkez&#245; sor
	  hozz&aacute;ad&aacute;s&aacute;val tudjuk aktiv&aacute;lni az
	  <filename>/etc/ppp/ppp.conf</filename>
	  &aacute;llom&aacute;nyban:</para>

	<programlisting>nat enable yes</programlisting>

	<para>A PPP-be &eacute;p&iacute;tett h&aacute;l&oacute;zati
	  c&iacute;mford&iacute;t&aacute;s a <literal>-nat</literal>
	  parancssori param&eacute;terrel is bekapcsolhat&oacute;.  Az
	  <filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyban is
	  tal&aacute;lhat&oacute; hozz&aacute; egy
	  <literal>ppp_nat</literal> v&aacute;ltoz&oacute;, amely
	  alap&eacute;rtelmez&eacute;s szerint
	  enged&eacute;lyezett.</para>

	<para>Amikor haszn&aacute;ljuk ezt a lehet&#245;s&eacute;get, az
	  <filename>/etc/ppp/ppp.conf</filename>
	  &aacute;llom&aacute;nyban a k&ouml;vetkez&#245;
	  opci&oacute;kkal enged&eacute;lyezhetj&uuml;k a
	  bej&ouml;v&#245; kapcsolatok
	  tov&aacute;bb&iacute;t&aacute;s&aacute;t:</para>

	<programlisting>nat port tcp 10.0.0.2:ftp ftp
nat port tcp 10.0.0.2:http http</programlisting>

	<para>vagy egy&aacute;ltal&aacute;n ne b&iacute;zzunk meg a
	  k&uuml;lvil&aacute;gban:</para>

	<programlisting>nat deny_incoming yes</programlisting>

      </sect3>

      <sect3 id="userppp-final">
	<title>A rendszer v&eacute;gs&#245;
	  be&aacute;ll&iacute;t&aacute;sa</title>

	<indexterm>
	  <primary>PPP</primary>
	  <secondary>be&aacute;ll&iacute;t&aacute;sa</secondary>
	</indexterm>

	<para>Mostanra ugyan m&aacute;r be&aacute;ll&iacute;tottuk a
	  <command>ppp</command> programot, azonban m&eacute;g
	  n&eacute;h&aacute;ny dolgot be kell &aacute;ll&iacute;tanunk,
	  miel&#245;tt t&eacute;nylegesen nekil&aacute;tn&aacute;nk
	  haszn&aacute;lni.  Ezek mindegyike az
	  <filename>/etc/rc.conf</filename> &aacute;llom&aacute;ny
	  m&oacute;dos&iacute;t&aacute;s&aacute;t ig&eacute;nyli.</para>

	<para>Az &aacute;llom&aacute;nyt fentr&#245;l lefel&eacute;
	  fogjuk feldolgozni, de el&#245;tte ne felejts&uuml;nk el
	  &eacute;rt&eacute;ket adni a <literal>hostname=</literal>
	  v&aacute;ltoz&oacute;nak, p&eacute;ld&aacute;ul:</para>

	<programlisting>hostname="ize.minta.com"</programlisting>

	<para>Amennyiben a szolg&aacute;ltat&oacute;nk statikus
	  IP-c&iacute;met &eacute;s nevet biztos&iacute;t
	  sz&aacute;munkra, az lesz a legjobb, ha itt a t&#245;le kapott
	  nevet adjuk meg.</para>

	<para>Keress&uuml;k meg a <literal>network_interfaces</literal>
	  v&aacute;ltoz&oacute;t.  Ha a rendszer&uuml;nkben
	  k&eacute;r&eacute;sre akarjuk t&aacute;rcs&aacute;zni a
	  szolg&aacute;ltat&oacute;nkat, akkor a
	  <devicename>tun0</devicename> eszk&ouml;zt mindenk&eacute;ppen
	  vegy&uuml;k fel az &eacute;rt&eacute;k&eacute;be, minden
	  m&aacute;s esetben pedig t&aacute;vol&iacute;tsuk el.</para>

	<programlisting>network_interfaces="lo0 tun0"
ifconfig_tun0=</programlisting>

	<note>
	  <para>Az <literal>ifconfig_tun0</literal>
	    v&aacute;ltoz&oacute;nak &uuml;res &eacute;rt&eacute;ket
	    kell megadnunk, &eacute;s l&eacute;tre kell hoznunk egy
	    <filename>/etc/start_if.tun0</filename> nev&#251;
	    &aacute;llom&aacute;nyt.  Ebben a k&ouml;vetkez&#245; sornak
	    kell szerepelnie:</para>

	  <programlisting>ppp -auto <replaceable>arendszerem</replaceable></programlisting>

	  <para>Ez a szkript a h&aacute;l&oacute;zat
	    be&aacute;ll&iacute;t&aacute;sakor fut le, &eacute;s a ppp
	    d&eacute;mont automatikus m&oacute;dban ind&iacute;tja el.
	    Ha az adott g&eacute;p egy helyi h&aacute;l&oacute;zat
	    &aacute;tj&aacute;r&oacute;ja is egyben, akkor az
	    <option>-alias</option> kapcsol&oacute;t is &eacute;rdemes
	    megadnunk mellette.  A pontosabb r&eacute;szletek
	    tekintet&eacute;ben olvassuk el a megfelel&#245; man
	    oldalt.</para>
	</note>

	<para>Az <filename>/etc/rc.conf</filename>
	  &aacute;llom&aacute;nyban a <literal>NO</literal>
	  &eacute;rt&eacute;k megad&aacute;s&aacute;val tiltsuk le az
	  &uacute;tv&aacute;laszt&aacute;st v&eacute;gz&#245; program
	  haszn&aacute;lat&aacute;t:</para>

	<programlisting>router_enable="NO"</programlisting>

	<indexterm><primary><application>routed</application></primary></indexterm>

	<para>Fontos, hogy a <command>routed</command> d&eacute;mon ne
	  induljon el, mivel <command>routed</command> hajlamos
	  t&ouml;r&ouml;lni a <command>ppp</command> &aacute;ltal
	  l&eacute;trehozott alap&eacute;rtelmezett
	  &uacute;tv&aacute;laszt&aacute;si bejegyz&eacute;seket.</para>

	<para>Ezenk&iacute;v&uuml;l m&eacute;g a
	  <literal>sendmail_flags</literal>
	  v&aacute;ltoz&oacute;r&oacute;l sz&oacute;l&oacute;
	  sorb&oacute;l is &eacute;rdemes kivenni a <option>-q</option>
	  opci&oacute;t, m&aacute;sk&uuml;l&ouml;nben a
	  <command>sendmail</command> minden m&#251;velet
	  megkezd&eacute;se el&#245;tt neki&aacute;ll felder&iacute;teni
	  a h&aacute;l&oacute;zatot, &eacute;s ezzel megind&iacute;tja a
	  t&aacute;rcs&aacute;z&aacute;st.  Pr&oacute;b&aacute;ljuk meg
	  &iacute;gy &aacute;t&iacute;rni az
	  &eacute;rt&eacute;k&eacute;t:</para>

	<programlisting>sendmail_flags="-bd"</programlisting>

	<indexterm><primary><application>sendmail</application></primary></indexterm>

	<para>Ez&eacute;rt cser&eacute;be viszont a
	  <command>sendmail</command> programot a ppp kapcsolat
	  l&eacute;trej&ouml;ttekor mindig utas&iacute;tanunk kell, hogy
	  &uacute;jb&oacute;l ellen&#245;rizze a levelez&eacute;si sort.
	  Ezt a k&ouml;vetkez&#245;k beg&eacute;pel&eacute;s&eacute;vel
	  &eacute;rhetj&uuml;k el:</para>

	<screen>&prompt.root; <userinput>/usr/sbin/sendmail -q</userinput></screen>

	<para>Ugyanezt automatikusan is meg tudjuk tenni a
	  <command>!bg</command> paranccsal a
	  <filename>ppp.linkup</filename>
	  &aacute;llom&aacute;nyban:</para>

	<programlisting>1     szolgaltato:
2       delete ALL
3       add 0 0 HISADDR
4       !bg sendmail -bd -q30m</programlisting>

	<indexterm><primary>SMTP</primary></indexterm>

	<para>Ha nem felelne meg ez a megold&aacute;s, akkor egy
	  <quote>dfilter</quote> is be&aacute;ll&iacute;that&oacute; az
	  SMTP forgalom sz&#251;r&eacute;s&eacute;re.  A
	  p&eacute;ld&aacute;k k&ouml;z&ouml;tt megtal&aacute;ljuk ennek
	  pontos mink&eacute;ntj&eacute;t.</para>

	<para>Ezut&aacute;n m&aacute;r csak a g&eacute;p&uuml;nk
	  &uacute;jraind&iacute;t&aacute;sa maradt h&aacute;tra.  Az
	  &uacute;jraind&iacute;t&aacute;s ut&aacute;n m&aacute;r be is
	  g&eacute;pelhetj&uuml;k:</para>

	<screen>&prompt.root; <userinput>ppp</userinput></screen>

	<para>ahol a <command>dial szolgaltato</command> parancs
	  kiad&aacute;s&aacute;val meg tudjuk kezdeni a PPP kapcsolat
	  fel&eacute;p&iacute;t&eacute;s&eacute;t, vagy a
	  <command>ppp</command> programot megk&eacute;rhetj&uuml;k
	  arra, hogy automatikusan kezdje el, amint van kimen&#245;
	  forgalom (&eacute;s nem k&eacute;sz&iacute;tett&uuml;k el a
	  <filename>start_if.tun0</filename> szkriptet).  Ekkor
	  g&eacute;pelj&uuml;k be ezt:</para>

	<screen>&prompt.root; <userinput>ppp -auto szolgaltato</userinput></screen>

      </sect3>

      <sect3>
	<title>&Ouml;sszefoglal&aacute;s</title>

	<para>Gyorsan foglaljuk &ouml;ssze, hogy az ppp
	  be&aacute;ll&iacute;t&aacute;s&aacute;hoz milyen
	  l&eacute;p&eacute;sek megt&eacute;tele sz&uuml;ks&eacute;ges
	  az els&#245; alkalommal:</para>

	<para>A kliens oldal&aacute;n:</para>

	<procedure>
	  <step>
	    <para>Gy&#245;z&#245;dj&uuml;nk meg r&oacute;la, hogy a
	      <devicename>tun</devicename> eszk&ouml;z benne van a
	      rendszermagban.</para>
	  </step>

	  <step>
	    <para>Ellen&#245;rizz&uuml;k, hogy a
	      <filename>tun<replaceable>N</replaceable></filename>
	      eszk&ouml;zh&ouml;z tartoz&oacute; &aacute;llom&aacute;ny
	      rendelkez&eacute;sre &aacute;ll a
	      <filename>/dev</filename> k&ouml;nyvt&aacute;rban.</para>
	  </step>

	  <step>
	    <para>Hozzunk l&eacute;tre egy bejegyz&eacute;st az
	      <filename>/etc/ppp/ppp.conf</filename>
	      &aacute;llom&aacute;nyban.  A
	      <filename>pmdemand</filename>
	      p&eacute;ld&aacute;b&oacute;l a legt&ouml;bb
	      szolg&aacute;ltat&oacute; eset&eacute;ben ki tudunk
	      indulni.</para>
	  </step>

	  <step>
	    <para>Ha dinamikus IP-c&iacute;met kapunk, akkor az
	      <filename>/etc/ppp/ppp.linkup</filename>
	      &aacute;llom&aacute;nyba is vegy&uuml;nk fel egy
	      bejegyz&eacute;st.</para>
	  </step>

	  <step>
	    <para>Friss&iacute;ts&uuml;k az
	      <filename>/etc/rc.conf</filename>
	      &aacute;llom&aacute;nyunkat.</para>
	  </step>

	  <step>
	    <para>Ha ig&eacute;ny szerint akarunk
	      t&aacute;rcs&aacute;zni, akkor hozzunk l&eacute;tre
	      <filename>start_if.tun0</filename> n&eacute;ven egy
	      szkriptet.</para>
	  </step>
	</procedure>

	<para>A szerver oldal&aacute;n:</para>

	<procedure>
	  <step>
	    <para>Gondoskodjunk r&oacute;la, hogy a
	      <devicename>tun</devicename> eszk&ouml;z
	      t&aacute;mogat&aacute;sa szerepel rendszermagban.</para>
	  </step>

	  <step>
	    <para>Gy&#245;z&#245;dj&uuml;nk meg r&oacute;la, hogy a
	      <filename>tun<replaceable>N</replaceable></filename>
	      eszk&ouml;z megtal&aacute;lhat&oacute; a
	      <filename>/dev</filename> k&ouml;nyvt&aacute;rban.</para>
	  </step>

	  <step>
	    <para>Az <filename>/etc/passwd</filename>
	      &aacute;llom&aacute;nyban (a &man.vipw.8; program
	      haszn&aacute;lat&aacute;val) hozzunk l&eacute;tre
	      bejegyz&eacute;seket.</para>
	  </step>

	  <step>
	    <para>A felhaszn&aacute;l&oacute;k k&ouml;nyvt&aacute;raiban
	      hozzunk l&eacute;tre egy olyan profilt, amely <command>ppp
	      -direct direct-server</command> vagy egy ehhez
	      hasonl&oacute; parancsot futtat le.</para>
	  </step>

	  <step>
	    <para>Az <filename>/etc/ppp/ppp.conf</filename>
	      &aacute;llom&aacute;nyban adjuk meg egy bejegyz&eacute;st.
	      A <filename>direct-server</filename> p&eacute;lda ehhez
	      egy remek alapot biztos&iacute;t.</para>
	  </step>

	  <step>
	    <para>Az <filename>/etc/ppp/ppp.linkup</filename>
	      &aacute;llom&aacute;nyban hozzunk l&eacute;tre egy
	      bejegyz&eacute;st.</para>
	  </step>

	  <step>
	    <para>Friss&iacute;ts&uuml;k az
	      <filename>/etc/rc.conf</filename>
	      &aacute;llom&aacute;nyunkat.</para>
	  </step>
	</procedure>

      </sect3>
    </sect2>
  </sect1>

  <sect1 id="ppp">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Gennady B.</firstname>
	  <surname>Sorokopud</surname>
	  <contrib>Egyes r&eacute;szeit k&eacute;sz&iacute;tette:
	    </contrib>
	</author>
	<author>
	  <firstname>Robert</firstname>
	  <surname>Huff</surname>
	</author>
      </authorgroup>
    </sect1info>

    <title>A rendszerszint&#251; PPP alkalmaz&aacute;sa</title>

    <sect2>
      <title>A rendszerszint&#251; PPP
	be&aacute;ll&iacute;t&aacute;sa</title>

      <indexterm>
	<primary>PPP</primary>
	<secondary>rendszer PPP</secondary>
      </indexterm>

      <para>Miel&#245;tt a g&eacute;p&uuml;nk&ouml;n nekikezd&uuml;nk a
	PPP be&aacute;ll&iacute;t&aacute;s&aacute;nak,
	ellen&#245;rizz&uuml;k, hogy a <command>pppd</command>
	megtal&aacute;lhat&oacute; a <filename>/usr/sbin</filename>
	k&ouml;nyvt&aacute;rban &eacute;s az
	<filename>/etc/ppp</filename> k&ouml;nyvt&aacute;r
	l&eacute;tezik.</para>

      <para>A <command>pppd</command> k&eacute;t m&oacute;dban
	k&eacute;pes m&#251;k&ouml;dni:</para>

      <orderedlist>
	<listitem>
	  <para><quote>kliensk&eacute;nt</quote> &mdash; a
	    g&eacute;p&uuml;nket soros vonali vagy modemes PPP
	    kapcsolaton kereszt&uuml;l csatlakoztatjuk a
	    k&uuml;lvil&aacute;ghoz</para>
	</listitem>

	<indexterm>
	  <primary>PPP</primary>
	  <secondary>szerver</secondary>
	</indexterm>

	<listitem>
	  <para><quote>szerverk&eacute;nt</quote> &mdash; a
	    sz&aacute;m&iacute;t&oacute;g&eacute;p&uuml;nk egy
	    h&aacute;l&oacute;zat r&eacute;sze, ahol a t&ouml;bbieket a
	    PPP haszn&aacute;lat&aacute;val kapcsoljuk &ouml;ssze</para>
	</listitem>
      </orderedlist>

      <para>Mind a k&eacute;t esetben egy konfigur&aacute;ci&oacute;s
	&aacute;llom&aacute;ny tartalm&aacute;t kell
	&ouml;ssze&aacute;ll&iacute;tanunk (ez az
	<filename>/etc/ppp/options</filename> vagy a
	<filename>~/.ppprc</filename>, ha a g&eacute;p&uuml;nk&ouml;n
	t&ouml;bb felhaszn&aacute;l&oacute; is PPP-t akar
	haszn&aacute;lni).</para>

      <para>Egy modemes vagy soros vonali szoftverre is
	sz&uuml;ks&eacute;g&uuml;nk lesz (ez t&ouml;bbnyire a <filename
	role="package">comms/kermit</filename>), amellyel t&aacute;voli
	g&eacute;peket tudunk felh&iacute;vni &eacute;s
	fel&eacute;j&uuml;k kapcsolatot fel&eacute;p&iacute;teni.</para>

    </sect2>

    <sect2>
      <sect2info>
	<authorgroup>
	  <author>
	    <firstname>Trev</firstname>
	    <surname>Roydhouse</surname>
	    <contrib>Az alapj&aacute;ul szolg&aacute;l&oacute;
	      inform&aacute;ci&oacute;kat adta: </contrib>
	  </author>
	</authorgroup>
      </sect2info>

      <title>A <command>pppd</command> mint kliens</title>

      <indexterm>
	<primary>PPP</primary>
	<secondary>kliens</secondary>
      </indexterm>

      <indexterm><primary>Cisco</primary></indexterm>

      <para>A most k&ouml;vetkez&#245;
	<filename>/etc/ppp/options</filename> &aacute;llom&aacute;nnyal
	egy Cisco termin&aacute;l szerverhez tudunk kapcsol&oacute;dni
	egy PPP vonalon kereszt&uuml;l.</para>

      <programlisting>crtscts         # a hardveres forgalomir&aacute;ny&iacute;t&aacute;s enged&eacute;lyez&eacute;se
modem           # modem vez&eacute;rl&#245;vonal
noipdefault     # a t&aacute;voli PPP szervernek kell IP-c&iacute;met adnia
                # ha az IPCP alap&uacute; egyeztet&eacute;s sor&aacute;n a t&aacute;voli g&eacute;p nem k&uuml;ld
                # nek&uuml;nk IP-c&iacute;met, akkor vegy&uuml;k ki ezt a be&aacute;ll&iacute;t&aacute;st
passive         # LCP csomagokat v&aacute;runk
domain ppp.ize.com      # ide &iacute;rjuk be a h&aacute;l&oacute;zati nev&uuml;nket

:<replaceable>t&aacute;voli_ip</replaceable>    # ide kell &iacute;rni a t&aacute;voli PPP szerver IP-c&iacute;m&eacute;t
                # a PPP kapcsolaton kereszt&uuml;l erre fogjuk tov&aacute;bbk&uuml;ldeni a csomagokat
                # ha nem adtuk meg "noipdefault" be&aacute;ll&iacute;t&aacute;st, akkor ezt a sort
                # &iacute;rjuk &aacute;t <replaceable>helyi_ip</replaceable>:<replaceable>t&aacute;voli_ip</replaceable> alak&uacute;ra

defaultroute    # adjuk meg ezt a sort is, ha a PPP szerver&uuml;nket egyben az
                # alap&eacute;rtelmezett &aacute;tj&aacute;r&oacute;nak is be akarjuk &aacute;ll&iacute;tani</programlisting>

      <para>&Iacute;gy kapcsol&oacute;dunk:</para>

      <indexterm><primary>Kermit</primary></indexterm>
      <indexterm><primary>modem</primary></indexterm>

      <procedure>
	<step>
	  <para>T&aacute;rcs&aacute;zzuk a t&aacute;voli g&eacute;pet a
	    <application>Kermit</application> (vagy b&aacute;rmilyen
	    m&aacute;s modemes program)
	    elind&iacute;t&aacute;s&aacute;val, majd adjuk meg a
	    felhaszn&aacute;l&oacute;i nev&uuml;nket &eacute;s
	    jelszavunkat (vagy b&aacute;rmi m&aacute;st, amivel a
	    t&aacute;voli g&eacute;pen enged&eacute;lyezni tudjuk a PPP
	    haszn&aacute;lat&aacute;t).</para>
	</step>

	<step>
	  <para>L&eacute;pj&uuml;nk ki a
	    <application>Kermit</application> programb&oacute;l
	    (an&eacute;lk&uuml;l, hogy bontan&aacute;nk a
	    vonalat).</para>
	</step>

	<step>
	  <para>&Iacute;rjuk be a k&ouml;vetkez&#245;ket:</para>

	  <screen>&prompt.root; <userinput>/usr/src/usr.sbin/pppd.new/pppd <replaceable>/dev/tty01</replaceable> <replaceable>19200</replaceable></userinput></screen>

	  <para>Ne felejts&uuml;k el megadni a megfelel&#245;
	    sebess&eacute;get &eacute;s eszk&ouml;zt.</para>
	</step>
      </procedure>

      <para>A sz&aacute;m&iacute;t&oacute;g&eacute;p&uuml;nk most
	m&aacute;r PPP-n kereszt&uuml;l csatlakozik.  Ha valamilyen
	okb&oacute;l nem siker&uuml;lne fel&eacute;p&iacute;teni a
	kapcsolatot, akkor vegy&uuml;k fel a <option>debug</option>
	be&aacute;ll&iacute;t&aacute;st is az
	<filename>/etc/ppp/options</filename> &aacute;llom&aacute;nyba,
	majd a konzolra &eacute;rkez&#245; &uuml;zenetek
	seg&iacute;ts&eacute;g&eacute;vel pr&oacute;b&aacute;ljuk meg
	felder&iacute;teni a probl&eacute;ma ok&aacute;t.</para>

      <para>Az al&aacute;bbi <filename>/etc/ppp/pppup</filename> szkript
	mind a h&aacute;rom f&aacute;zist automatikuss&aacute;
	teszi:</para>

      <programlisting>#!/bin/sh
pgrep -l pppd
pid=`pgrep pppd`
if [ "X${pid}" != "X" ] ; then
        echo 'killing pppd, PID=' ${pid}
        kill ${pid}
fi
pgrep -l kermit
pid=`pgrep kermit`
if [ "X${pid}" != "X" ] ; then
        echo 'killing kermit, PID=' ${pid}
        kill -9 ${pid}
fi

ifconfig ppp0 down
ifconfig ppp0 delete

kermit -y /etc/ppp/kermit.dial
pppd /dev/tty01 19200</programlisting>

      <indexterm><primary>Kermit</primary></indexterm>

      <para>Az <filename>/etc/ppp/kermit.dial</filename> egy olyan
	<application>Kermit</application> szkript, amivel
	t&aacute;rcs&aacute;zni tudunk &eacute;s a t&aacute;voli
	g&eacute;pen elv&eacute;gezni az &ouml;sszes
	sz&uuml;ks&eacute;ges hiteles&iacute;t&eacute;st (a
	le&iacute;r&aacute;s v&eacute;g&eacute;n tal&aacute;lhatunk is
	egy ilyen szkriptet p&eacute;ldak&eacute;nt).</para>

      <para>Az al&aacute;bbi <filename>/etc/ppp/pppdown</filename>
	szkripttel tudjuk bontani a PPP vonalat:</para>

      <programlisting>#!/bin/sh
pid=`pgrep pppd`
if [ X${pid} != "X" ] ; then
        echo 'killing pppd, PID=' ${pid}
        kill -TERM ${pid}
fi

pgrep -l kermit
pid=`pgrep kermit`
if [ "X${pid}" != "X" ] ; then
        echo 'killing kermit, PID=' ${pid}
        kill -9 ${pid}
fi

/sbin/ifconfig ppp0 down
/sbin/ifconfig ppp0 delete
kermit -y /etc/ppp/kermit.hup
/etc/ppp/ppptest</programlisting>

      <para>A <filename>/usr/etc/ppp/ppptest</filename>
	elind&iacute;t&aacute;s&aacute;val ellen&#245;rizni tudjuk, hogy
	a <command>pppd</command> m&eacute;g mindig fut.  Ez valahogy
	&iacute;gy n&eacute;z ki:</para>

      <programlisting>#!/bin/sh
pid=`pgrep pppd`
if [ X${pid} != "X" ] ; then
        echo 'pppd running: PID=' ${pid-NONE}
else
        echo 'No pppd running.'
fi
set -x
netstat -n -I ppp0
ifconfig ppp0</programlisting>

      <para>A vonal bont&aacute;s&aacute;hoz az
	<filename>/etc/ppp/kermit.hup</filename> szkriptet kell
	elind&iacute;tanunk, amiben a k&ouml;vetkez&#245;
	szerepelnek:</para>

      <programlisting>set line /dev/tty01	; ide &iacute;rjuk be a saj&aacute;t modem&uuml;nket
set speed 19200
set file type binary
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none

pau 1
out +++
inp 5 OK
out ATH0\13
echo \13
exit</programlisting>

      <para>A <command>kermit</command> helyett a
	<command>chat</command> programot is
	haszn&aacute;lhatjuk:</para>

      <para>A k&ouml;vetkez&#245; k&eacute;t &aacute;llom&aacute;ny
	m&aacute;r el&eacute;g egy kapcsolat
	l&eacute;trehoz&aacute;s&aacute;hoz <command>pppd</command>
	haszn&aacute;lat&aacute;val:</para>

      <para><filename>/etc/ppp/options</filename>:</para>

      <programlisting>/dev/cuad1 115200

crtscts		# a hardveres forgalomir&aacute;ny&iacute;t&aacute;s enged&eacute;lyez&eacute;se
modem		# modemes vez&eacute;rl&#245;vonal
connect "/usr/bin/chat -f /etc/ppp/login.chat.script"
noipdefault	# a t&aacute;voli PPP kiszolg&aacute;l&oacute;nak adnia kell egy IP-c&iacute;met
	        # ha a t&aacute;voli g&eacute;p nem k&uuml;ldi az IP-c&iacute;m&uuml;nk az IPCP alap&uacute; egyeztet&eacute;s sor&aacute;n
                # akkor t&aacute;vol&iacute;tsuk el ezt a be&aacute;ll&iacute;t&aacute;st
passive         # LCP csomagokat v&aacute;runk
domain <replaceable>sajat.tartomany</replaceable>	# ide &iacute;rjuk be a saj&aacute;t tartom&aacute;nynev&uuml;nket

:		# a t&aacute;voli PPP kiszolg&aacute;l&oacute; IP-c&iacute;m&eacute;t tegy&uuml;k ide
	        # ezen kereszt&uuml;l fogjuk tov&aacute;bbk&uuml;ldeni a PPP kapcsolaton &aacute;thalad&oacute; csomagokat
                # nem adtuk meg a "noipdefault" be&aacute;ll&iacute;t&aacute;st, akkor ezt
                # sort &iacute;rjuk &aacute;t <replaceable>helyi_ip</replaceable>:<replaceable>t&aacute;voli_ip</replaceable> alak&uacute;ra

defaultroute	# ez a sor akkor kell, ha a PPP szerver lesz az
	        # alap&eacute;rtelmezett &aacute;tj&aacute;r&oacute;nk is</programlisting>

      <para><filename>/etc/ppp/login.chat.script</filename>:</para>

      <note>
	<para>A most k&ouml;vetkez&#245;t egyetlen sorba kell
	  &iacute;rnunk.</para>
      </note>

      <programlisting>ABORT BUSY ABORT 'NO CARRIER' "" AT OK ATDT<replaceable>telefon.sz&aacute;m</replaceable>
  CONNECT "" TIMEOUT 10 ogin:-\\r-ogin: <replaceable>bejelentkez&eacute;si-azonos&iacute;t&oacute;</replaceable>
  TIMEOUT 5 sword: <replaceable>jelsz&oacute;</replaceable></programlisting>

      <para>Miut&aacute;n ezeket telep&iacute;tett&uuml;k &eacute;s a
	megfelel&#245;k&eacute;ppen m&oacute;dos&iacute;tottuk,
	m&aacute;r csak a <command>pppd</command> parancsot kell
	kiadnunk, valahogy &iacute;gy:</para>

      <screen>&prompt.root; <userinput>pppd</userinput></screen>

    </sect2>

    <sect2>
      <title>A <command>pppd</command> mint szerver</title>

      <para>Az <filename>/etc/ppp/options</filename>
	&aacute;llom&aacute;nyban nagyj&aacute;b&oacute;l a
	k&ouml;vetkez&#245;knek kell szerepelnie:</para>

      <programlisting>crtscts                         # hardveres forgalomir&aacute;ny&iacute;t&aacute;s
netmask 255.255.255.0           # h&aacute;l&oacute;zati maszk (nem k&ouml;telez&#245;)
192.114.208.20:192.114.208.165  # a helyi &eacute;s t&aacute;voli g&eacute;pek IP-c&iacute;mei
                                # a helyi IP-nek el kell t&eacute;rnie az Ethernet
                                # (vagy m&aacute;s egy&eacute;b) fel&uuml;lethez tartoz&oacute; c&iacute;mt&#245;l.
                                # a t&aacute;voli IP a t&aacute;voli g&eacute;phez rendelt IP-c&iacute;m
domain ppp.ize.com              # a saj&aacute;t tartom&aacute;nyunk
passive                         # az LCP csomagok v&aacute;r&aacute;sa
modem                           # modemes vonal</programlisting>

      <para>Az al&aacute;bbi <filename>/etc/ppp/pppserv</filename>
	szkript a <application>pppd</application> d&eacute;mont
	szervernek &aacute;ll&iacute;tja be:</para>

      <programlisting>#!/bin/sh 
pgrep -l pppd
pid=`pgrep pppd`
if [ "X${pid}" != "X" ] ; then
        echo 'killing pppd, PID=' ${pid}
        kill ${pid}
fi
pgrep -l kermit
pid=`pgrep kermit`
if [ "X${pid}" != "X" ] ; then
        echo 'killing kermit, PID=' ${pid}
        kill -9 ${pid}
fi

# reset ppp interface
ifconfig ppp0 down
ifconfig ppp0 delete

# enable autoanswer mode
kermit -y /etc/ppp/kermit.ans

# run ppp
pppd /dev/tty01 19200</programlisting>

      <para>A szerver le&aacute;ll&iacute;t&aacute;s&aacute;ra a
	k&ouml;vetkez&#245; <filename>/etc/ppp/pppservdown</filename>
	szkriptet kell haszn&aacute;lnunk:</para>

      <programlisting>#!/bin/sh 
pgrep -l pppd
pid=`pgrep pppd`
if [ "X${pid}" != "X" ] ; then
        echo 'killing pppd, PID=' ${pid}
        kill ${pid}
fi
pgrep -l kermit
pid=`pgrep kermit`
if [ "X${pid}" != "X" ] ; then
        echo 'killing kermit, PID=' ${pid}
        kill -9 ${pid}
fi
ifconfig ppp0 down
ifconfig ppp0 delete

kermit -y /etc/ppp/kermit.noans</programlisting>

      <para>A k&ouml;vetkez&#245; <application>Kermit</application>
	szkript (<filename>/etc/ppp/kermit.ans</filename>)
	enged&eacute;lyezi vagy tiltja le a modem automatikus
	v&aacute;laszad&aacute;s&aacute;t.  K&ouml;r&uuml;lbel&uuml;l
	&iacute;gy &eacute;p&uuml;l fel:</para>

      <programlisting>set line /dev/tty01
set speed 19200
set file type binary
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none

pau 1
out +++
inp 5 OK
out ATH0\13
inp 5 OK
echo \13
out ATS0=1\13   ; "ATS0=0\13"-ra &iacute;rjuk &aacute;t, ha le akarjuk tiltani az
                ; automatikus v&aacute;laszad&aacute;st
inp 5 OK
echo \13
exit</programlisting>

      <para>Az <filename>/etc/ppp/kermit.dial</filename>
	elnevez&eacute;s&#251; szkriptet haszn&aacute;lhatjuk arra, hogy
	t&aacute;rcs&aacute;zzunk t&aacute;voli g&eacute;peket &eacute;s
	hiteles&iacute;ts&uuml;k magunkat rajtuk.  &Iacute;rjuk
	&aacute;t az ig&eacute;nyeinknek megfelel&#245;en, tegy&uuml;k
	bele a bejelentkez&eacute;shez sz&uuml;ks&eacute;ges
	azonos&iacute;t&oacute;t &eacute;s jelsz&oacute;t, illetve a
	modem&uuml;nk &eacute;s a t&aacute;voli g&eacute;p
	v&aacute;laszai szerint m&oacute;dos&iacute;tsuk az
	<literal>input</literal> utas&iacute;t&aacute;sokat.</para>

      <programlisting>;
; &iacute;rjuk ide azt a com vonalat, amire a modem&uuml;nk csatlakozik:
;
set line /dev/tty01
;
; ide ker&uuml;l a modem sebess&eacute;ge:
;
set speed 19200
set file type binary            ; teljes 8 bites &aacute;llom&aacute;ny-&aacute;tvitel
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none
set modem hayes
set dial hangup off
set carrier auto                ; adjuk meg a SET CARRIER utas&iacute;t&aacute;st is, ha kell
set dial display on             ; adjuk meg a SET DIAL utas&iacute;t&aacute;st is, ha kell
set input echo on
set input timeout proceed
set input case ignore
def \%x 0                       ; a bejelentkez&eacute;s sz&aacute;ml&aacute;l&oacute;ja
goto slhup

:slcmd                          ; tegy&uuml;k a modemet parancs m&oacute;dba
echo Tegyuk a modemet parancs modba.
clear                           ; t&ouml;r&ouml;lj&uuml;k a be nem olvasott karaktereket a bemeneti pufferb&#245;l
pause 1
output +++                      ; a Hayes-f&eacute;le helyettes&iacute;t&eacute;si szekvenci&aacute;k haszn&aacute;lata
input 1 OK\13\10                ; v&aacute;rjuk meg az OK jelz&eacute;st
if success goto slhup
output \13
pause 1
output at\13
input 1 OK\13\10
if fail goto slcmd              ; ha a modem nem v&aacute;laszol OK-val, akkor pr&oacute;b&aacute;lkozzunk &uacute;jra

:slhup                          ; bontsuk a vonalat
clear                           ; t&ouml;r&ouml;lj&uuml;k ki a be nem olvasott karaktereket a bemeneti pufferb&#245;l
pause 1
echo A vonal bontasa.
output ath0\13                  ; a kapcsolat l&eacute;trej&ouml;tt&eacute;t jelz&#245; Hayes-parancs
input 2 OK\13\10
if fail goto slcmd              ; ha nincs OK v&aacute;lasz, akkor tegy&uuml;k a modemet parancs m&oacute;dba

:sldial                         ; t&aacute;rcs&aacute;zzuk a sz&aacute;mot
pause 1
echo Dialing.
output atdt9,550311\13\10       ; ide &iacute;rjuk a telefonsz&aacute;mot
assign \%x 0                    ; null&aacute;zzuk le az id&#245;z&iacute;t&#245;t

:look
clear                           ; t&ouml;r&ouml;lj&uuml;k az olvasatlan karaktereket a bemeneti pufferb&#245;l
increment \%x                   ; sz&aacute;moljuk a m&aacute;sodperceket
input 1 {CONNECT }
if success goto sllogin
reinput 1 {NO CARRIER\13\10}
if success goto sldial
reinput 1 {NO DIALTONE\13\10}
if success goto slnodial
reinput 1 {\255}
if success goto slhup
reinput 1 {\127}
if success goto slhup
if &lt; \%x 60 goto look
else goto slhup

:sllogin                        ; bejelentkez&eacute;s
assign \%x 0                    ; null&aacute;zzuk le az id&#245;z&iacute;t&#245;t
pause 1
echo A bejelentkezes keresese.

:slloop
increment \%x                   ; sz&aacute;moljuk a m&aacute;sodperceket
clear                           ; t&ouml;r&ouml;lj&uuml;k az olvasatlan karaktereket a bemeneti pufferb&#245;l
output \13
;
; ide &iacute;rjuk be a v&aacute;rhat&oacute; bejelentkez&eacute;si sablont:
;
input 1 {Felhasznaloi nev: }
if success goto sluid
reinput 1 {\255}
if success goto slhup
reinput 1 {\127}
if success goto slhup
if &lt; \%x 10 goto slloop      ; t&iacute;zszer pr&oacute;b&aacute;lkozzunk a bejelentkez&eacute;ssel
else goto slhup                 ; 10 sikertelen pr&oacute;b&aacute;lkoz&aacute;s ut&aacute;n bontsuk a vonalat &eacute;s kezdj&uuml;k &uacute;jra

:sluid
;
; ide &iacute;rjuk be a felhaszn&aacute;l&oacute;i azonos&iacute;t&oacute;nkat:
;
output ppp-login\13
input 1 {Jelszo: }
;
; ide tegy&uuml;k a hozz&aacute;tartoz&oacute; jelsz&oacute;t:
;
output ppp-password\13
input 1 {Atvaltas SLIP modba.}
echo
quit

:slnodial
echo \7Nincs vonal.  Ellenorizzuk a telefonvonalat!\7
exit 1

; local variables:
; mode: csh
; comment-start: "; "
; comment-start-skip: "; "
; end:</programlisting>

    </sect2>
  </sect1>

  <sect1 id="ppp-troubleshoot">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Tom</firstname>
	  <surname>Rhodes</surname>
	  <contrib>K&eacute;sz&iacute;tette: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title><acronym>PPP</acronym> kapcsolatok
      hibaelh&aacute;r&iacute;t&aacute;sa</title>

    <indexterm>
      <primary>PPP</primary>
      <secondary>hibaelh&aacute;r&iacute;t&aacute;s</secondary>
    </indexterm>

      <para>Ebben a szakaszban &ouml;sszefoglalunk n&eacute;h&aacute;ny
	olyan probl&eacute;m&aacute;t, ami a PPP modemen kereszt&uuml;li
	haszn&aacute;lata sor&aacute;n keletkezhet.
	P&eacute;ld&aacute;ul pontosan tiszt&aacute;ban kell
	lenn&uuml;nk azzal, hogy a t&aacute;rcs&aacute;zott rendszer
	milyen adatokat &eacute;s hogyan fog t&#245;l&uuml;nk
	bek&eacute;rni.  Egyes szolg&aacute;ltat&oacute;k egy
	<literal>ssword</literal> promptot, m&iacute;g m&aacute;sok egy
	<literal>password</literal> promptot adnak.  Ha a
	<command>ppp</command> szkript nem illeszkedik ezekhez az
	elv&aacute;r&aacute;sokhoz, akkor nem tudunk bejelentkezni.  A
	<command>ppp</command> csatlakoz&aacute;sok
	nyomonk&ouml;vet&eacute;s&eacute;nek egyik leggyakoribb
	m&oacute;dja a manu&aacute;lis kapcsol&oacute;d&aacute;s.  A
	k&ouml;vetkez&#245;kben ez&eacute;rt a manu&aacute;lis
	csatlakoz&aacute;sokra vonatkoz&oacute;
	legsz&uuml;ks&eacute;gesebb ismereteket mutatjuk be
	l&eacute;p&eacute;sr&#245;l l&eacute;p&eacute;sre.</para>

    <sect2>
      <title>Az eszk&ouml;zle&iacute;r&oacute;k
	ellen&#245;rz&eacute;se</title>

	<para>Ha &uacute;jrakonfigur&aacute;ltuk a rendszermagunkat,
	  akkor minden bizonnyal m&eacute;g eml&eacute;ksz&uuml;nk a
	  <devicename>sio</devicename> eszk&ouml;zre.  Ha nem
	  k&eacute;sz&iacute;tett&uuml;nk volna &uacute;j rendszermagot,
	  ne agg&oacute;djunk.  Egyszer&#251;en csak a
	  <command>dmesg</command> parancs kimenet&eacute;ben
	  keress&uuml;k meg a modemes eszk&ouml;zh&ouml;z tartoz&oacute;
	  adatokat:</para>

	<screen>&prompt.root; <userinput>dmesg | grep sio</userinput></screen>

	<para>Ennek eredm&eacute;nyek&eacute;ppen kapunk egy r&ouml;vid
	  &ouml;sszefoglal&aacute;st a <devicename>sio</devicename>
	  t&iacute;pus&uacute; eszk&ouml;z&ouml;kr&#245;l.  Ezek lesznek
	  a sz&aacute;munkra fontos COM portok.  Amennyiben a
	  modem&uuml;nk egy szabv&aacute;nyos soros portk&eacute;nt
	  m&#251;k&ouml;dik, akkor a <devicename>sio1</devicename> vagy
	  <devicename>COM2</devicename> n&eacute;ven kell
	  keresn&uuml;nk.  Ha megtal&aacute;ltuk, akkor nem kell
	  &uacute;j rendszermagot ford&iacute;tanunk.  Amikor a soros
	  vonali modem&uuml;nk a <devicename>sio1</devicename> vagy
	  <devicename>COM2</devicename> porton csatlakozik DOS-ban,
	  akkor itt a neki megfelel&#245; eszk&ouml;z a
	  <filename>/dev/cuad1</filename> lesz.</para>

    </sect2>

    <sect2>
      <title>Kapcsol&oacute;d&aacute;s manu&aacute;lisan</title>

      <para>A <command>ppp</command> k&eacute;zi
	ir&aacute;ny&iacute;t&aacute;s&aacute;val gyorsan,
	egyszer&#251;en &eacute;s minden f&aacute;jdalomt&oacute;l
	mentesen tudunk csatlakozni az internethez, de olyankor is
	hasznos, ha ki akarjuk der&iacute;teni, hogy az
	internet-szolg&aacute;ltat&oacute;nk milyen m&oacute;don kezeli
	a kliensek <command>ppp</command> csatlakoz&aacute;sait.  Nos,
	akkor ehhez ind&iacute;tsuk is el a
	<application>PPP</application> alkalmaz&aacute;st a
	paranccsorb&oacute;l.  Az al&aacute;bbi p&eacute;ld&aacute;kban
	rendre a <emphasis>pelda</emphasis> n&eacute;vvel hivatkozunk a
	<application>PPP</application>-t m&#251;k&ouml;dtet&#245;
	g&eacute;pre.  A <command>ppp</command> teh&aacute;t a
	<command>ppp</command> parancs
	beg&eacute;pel&eacute;s&eacute;vel
	ind&iacute;that&oacute;:</para>

      <screen>&prompt.root; <userinput>ppp</userinput></screen>

      <para>Ezzel elind&iacute;tottuk a <command>ppp</command>
	programot.</para>

      <screen>ppp ON pelda&gt; <userinput>set device <filename>/dev/cuad1</filename></userinput></screen>

      <para>Be&aacute;ll&iacute;tjuk a modem&uuml;nket, ami ebben az
	esetben a <devicename>cuad1</devicename>.</para>

      <screen>ppp ON pelda&gt; <userinput>set speed 115200</userinput></screen>

      <para>Be&aacute;ll&iacute;tjuk a csatlakoz&aacute;s
	sebess&eacute;g&eacute;t, ami ebben az esetben 115&nbsp;200
	kbit/mp.</para>

      <screen>ppp ON pelda&gt; <userinput>enable dns</userinput></screen>

      <para>Azt mondjuk a <command>ppp</command> programnak, hogy
	&aacute;ll&iacute;tsa be a n&eacute;vfelold&oacute;t &eacute;s
	az <filename>/etc/resolv.conf</filename> &aacute;llom&aacute;nyt
	eg&eacute;sz&iacute;tse ki a megfelel&#245;
	n&eacute;vszerverekkel.  Ha a <command>ppp</command> nem
	k&eacute;pes meg&aacute;llap&iacute;tani a g&eacute;p&uuml;nk
	nev&eacute;t, akkor k&eacute;s&#245;bb ezt m&eacute;g
	k&eacute;zzel is be tudjuk &aacute;ll&iacute;tani.</para>

      <screen>ppp ON pelda&gt; <userinput>term</userinput></screen>

      <para>V&aacute;ltsunk <quote>termin&aacute;l</quote> m&oacute;dba,
	&iacute;gy mi ir&aacute;ny&iacute;tjuk a modemet.</para>

      <programlisting>deflink: Entering terminal mode on <filename>/dev/cuad1</filename>
type '~h' for help</programlisting>

      <screen><userinput>at</userinput>
OK
<userinput>atdt<replaceable>123456789</replaceable></userinput></screen>

      <para>Az <command>at</command> paranccsal hozzuk alaphelyzetbe a
	modemet, majd a <command>atdt</command> paranccsal &eacute;s egy
	telefonsz&aacute;m megad&aacute;s&aacute;val megkezdj&uuml;k a
	szolg&aacute;ltat&oacute;
	t&aacute;rcs&aacute;z&aacute;s&aacute;t.</para>

      <screen>CONNECT</screen>

      <para>Ezzel jelez vissza a kapcsol&oacute;d&aacute;s
	megkezd&eacute;s&eacute;r&#245;l.  Ha itt b&aacute;rmilyen
	hardvert&#245;l f&uuml;ggetlen csatlakoz&aacute;si
	probl&eacute;ma mer&uuml;lne fel, akkor ezen a ponton tudunk
	ellene tenni valamit.</para>

      <screen>ISP Login:<userinput>felhasznalonev</userinput></screen>

      <para>Itt kell megadnunk a felhaszn&aacute;l&oacute;i
	nev&uuml;nket, ami megegyezik a szolg&aacute;ltat&oacute;
	&aacute;ltal adott azonos&iacute;t&oacute;nkkal.</para>

      <screen>ISP Pass:<userinput>jelszo</userinput></screen>

      <para>Ez&uacute;ttal a jelszavunkat kell megadni, amit
	szint&eacute;n a szolg&aacute;ltat&oacute; bocs&aacute;tott
	rendelkez&eacute;s&uuml;nkre az azonos&iacute;t&oacute; mellett.
	Ak&aacute;rcsak amikor bejelentkez&uuml;nk a &os;-be, itt sem
	fog l&aacute;tsz&oacute;dni a jelszavunk.</para>

      <screen>Shell or PPP:<userinput>ppp</userinput></screen>

      <para>Szolg&aacute;ltat&oacute;t&oacute;l f&uuml;gg&#245;en
	el&#245;fordulhat, hogy ez a sor soha nem is jelenik meg.  Itt
	k&eacute;rdezik meg, hogy a szolg&aacute;ltat&oacute;n&aacute;l
	egy shellt akarunk haszn&aacute;lni, vagy csak elind&iacute;tani
	egy <command>ppp</command> kapcsolatot.  Ebben a
	p&eacute;ld&aacute;ban term&eacute;szetesen a
	<command>ppp</command> opci&oacute;t v&aacute;lasztjuk, mivel
	egy internet-el&#245;fizet&eacute;s birtokosai vagyunk.</para>

      <screen>Ppp ON pelda&gt;</screen>

      <para>Figyelj&uuml;k meg, hogy az els&#245; <option>p</option>
	nagybet&#251;ss&eacute; v&aacute;lt.  Ezzel jelzi a program,
	hogy sikeresen csatlakoztunk a
	szolg&aacute;ltat&oacute;nkhoz.</para>

      <screen>PPp ON pelda&gt;</screen>

      <para>Sikeresen azonos&iacute;tottuk magunkat a
	szolg&aacute;ltat&oacute; fel&eacute; &eacute;s v&aacute;rjuk az
	IP-c&iacute;m&uuml;nket.</para>

      <screen>PPP ON pelda&gt;</screen>

      <para>Megkaptuk az IP-c&iacute;m&uuml;nket &eacute;s ezzel
	sikeresen fel&eacute;p&uuml;lt a kapcsolat.</para>

      <screen>PPP ON pelda&gt;<userinput>add default HISADDR</userinput></screen>

      <para>Itt adjuk hozz&aacute; az alap&eacute;rtelmezett
	&uacute;tvonalat, amire mindenk&eacute;ppen
	sz&uuml;ks&eacute;g&uuml;nk van ahhoz, hogy a
	k&uuml;lvil&aacute;ggal is kapcsolatban tudjunk l&eacute;pni,
	mivel jelenleg csak a vonal m&aacute;sik v&eacute;g&eacute;n
	l&eacute;v&#245; g&eacute;pet &eacute;rj&uuml;k el.  Ha ezt
	bizonyos, m&aacute;r meglev&#245; &uacute;tvonalak miatt nem
	siker&uuml;l felvenni, akkor az <option>add</option> el&eacute;
	tegy&uuml;nk egy <literal>!</literal> jelet.  Ezt viszont a
	kapcsolat fel&eacute;p&iacute;t&eacute;se el&#245;tt is
	megtehetj&uuml;k, &iacute;gy menet k&ouml;zben az &uacute;j
	&uacute;tvonalat felveszi a t&ouml;bbi k&ouml;z&eacute;.</para>

      <para>Ha eddig minden remek&uuml;l ment, akkor ezen ponton
	m&aacute;r egy &eacute;l&#245; internet-kapcsolattal
	rendelkez&uuml;nk, &eacute;s a programot a <keycombo
	action="simul"><keycap>CTRL</keycap><keycap>z</keycap></keycombo>
	lenyom&aacute;s&aacute;val a h&aacute;tt&eacute;rbe is
	tehetj&uuml;k.  Ha a <command>PPP</command> felirat ism&eacute;t
	a <command>ppp</command> feliratra v&aacute;ltana, akkor az arra
	utal, hogy elvesztett&uuml;k a kapcsolatot.  Erre nem &aacute;rt
	figyelni, mivel ezzel jelzi az aktu&aacute;lis kapcsolat
	&aacute;llapot&aacute;t.  A nagybet&#251;s P-k jel&ouml;lik,
	hogy az adott szinten megvan a kapcsolat a
	szolg&aacute;ltat&oacute; fel&eacute;, a kisbet&#251;s p-k pedig
	arra utalnak, hogy azon a szinten a kapcsolat valami&eacute;rt
	megsz&#251;nt.  A <command>ppp</command> csak ezt a k&eacute;t
	&aacute;llapotot ismeri.</para>

      <sect3>
	<title>Nyomk&ouml;vet&eacute;s</title>

	<para>Ha k&ouml;zvetlen vonalunk van &eacute;s m&eacute;gsem
	  siker&uuml;l kapcsolatot l&eacute;tes&iacute;teni, akkor
	  tiltsuk le a hardveres <acronym>CTS/RTS</acronym>
	  forgalomir&aacute;ny&iacute;t&aacute;st a <option>set ctsrts
	  off</option> paranccsal.  Ez legink&aacute;bb akkor fordul
	  el&#245;, ha csatlakoztunk egy olyan
	  termin&aacute;lszerverhez, amely valamennyire k&eacute;pes
	  kezelni a <application>PPP</application> kapcsolatokat, de a
	  <application>PPP</application> meg&aacute;ll, mikor adatot
	  pr&oacute;b&aacute;l &iacute;rni a kommunik&aacute;ci&oacute;s
	  csatorn&aacute;ra, mivel arra a <acronym>CTS</acronym> (Clear
	  To Send &mdash; <quote>lehet k&uuml;ldeni</quote>)
	  jelz&eacute;sre v&aacute;r, amely soha nem fog
	  meg&eacute;rkezni.  Ha m&eacute;gis ezt a
	  be&aacute;ll&iacute;t&aacute;st akarjuk haszn&aacute;lni,
	  akkor a <option>set accmap</option>
	  be&aacute;ll&iacute;t&aacute;sra is
	  sz&uuml;ks&eacute;g&uuml;nk lesz, mivel ez kell bizonyos
	  karakterek hardverf&uuml;gg&#245;
	  &aacute;tk&uuml;ld&eacute;s&eacute;nek
	  fel&uuml;lb&iacute;r&aacute;l&aacute;s&aacute;hoz,
	  legt&ouml;bb esetben a XON/XOFF miatt.  A &man.ppp.8; man
	  oldalon tal&aacute;lhatunk err&#245;l &eacute;s ennek
	  haszn&aacute;lat&aacute;r&oacute;l r&eacute;szletesebb
	  le&iacute;r&aacute;st.</para>

	<para>Ha egy r&eacute;gebbi gy&aacute;rtm&aacute;ny&uacute;
	  modem&uuml;nk van, akkor a <option>set parity even</option>
	  be&aacute;ll&iacute;t&aacute;s alkalmaz&aacute;sa is javasolt.
	  Alap&eacute;rtelmez&eacute;s szerint ugyanis nincs
	  parit&aacute;s, de a r&eacute;gebbi modemek &eacute;s (a
	  forgalom n&ouml;veked&eacute;s&eacute;vel) egyes
	  szolg&aacute;ltat&oacute;k m&eacute;g haszn&aacute;lj&aacute;k
	  hibaellen&#245;rz&eacute;sre.  Ha Compuserve
	  el&#245;fizet&eacute;s&uuml;nk van, mindenk&eacute;ppen
	  kapcsoljuk be.</para>

	<para>Amikor a <application>PPP</application> nem t&eacute;r
	  vissza parancs m&oacute;dba, akkor gyan&iacute;that&oacute;an
	  az egyeztet&eacute;sben lesz valahol probl&eacute;ma, mivel a
	  szolg&aacute;ltat&oacute; a kliens&uuml;kt&#245;l v&aacute;rja
	  a kezdem&eacute;nyez&eacute;s&eacute;t.  Ezen a ponton a
	  <command>~p</command> paranccsal utas&iacute;thatjuk a ppp
	  programot a konfigur&aacute;ci&oacute;s
	  inform&aacute;ci&oacute;k
	  &aacute;tk&uuml;ld&eacute;s&eacute;nek
	  megkezd&eacute;s&eacute;re.</para>

	<para>Ha egy&aacute;ltal&aacute;n nem kapunk promptot a
	  bejelentkez&eacute;shez, akkor nagy a
	  al&oacute;sz&iacute;n&#251;s&eacute;ge, hogy az im&eacute;nti
	  &unix; st&iacute;lus&uacute; hiteles&iacute;t&eacute;s helyett
	  <acronym>PAP</acronym> vagy <acronym>CHAP</acronym> protokollt
	  kell haszn&aacute;lnunk.  A <acronym>PAP</acronym> vagy
	  <acronym>CHAP</acronym> haszn&aacute;lat&aacute;hoz
	  mind&ouml;ssze a k&ouml;vetkez&#245;
	  be&aacute;ll&iacute;t&aacute;sokat kell megadnunk
	  <application>PPP</application> programnak a termin&aacute;l
	  m&oacute;d aktiv&aacute;l&aacute;sa el&#245;tt:</para>

	<screen>ppp ON pelda&gt; <userinput>set authname <replaceable>felhasznalonev</replaceable></userinput></screen>

	<para>ahol a <replaceable>felhasznalonev</replaceable> helyett a
	  szolg&aacute;ltat&oacute;t&oacute;l kapott
	  azonos&iacute;t&oacute;t kell be&iacute;rnunk.</para>

	<screen>ppp ON pelda&gt; <userinput>set authkey <replaceable>jelszo</replaceable></userinput></screen>

	<para>ahol a <replaceable>jelszo</replaceable> helyett a
	  szolg&aacute;ltat&oacute;t&oacute;l kapott jelsz&oacute;t kell
	  megadnunk.</para>

	<para>Ha sikeresen csatlakoztunk, de m&eacute;g nem
	  tal&aacute;lunk semmilyen tartom&aacute;nynevet, akkor a
	  &man.ping.8; &eacute;s IP-c&iacute;m
	  seg&iacute;ts&eacute;g&eacute;vel tudjuk megvizsg&aacute;lni,
	  hogy m&#251;k&ouml;d&#245;k&eacute;pes-e a kapcsolat.  Ha
	  100&nbsp;sz&aacute;zal&eacute;kos (100%) csomagveszt&eacute;st
	  (packet loss) tapasztalunk, akkor szinte biztos, hogy nincs
	  meg az alap&eacute;rtelmezett &uacute;tvonal.
	  N&eacute;zz&uuml;k meg &uacute;jra, hogy az <option>add
	  default HISADDR</option> be&aacute;ll&iacute;t&aacute;st
	  megadtuk-e a kapcsolat fel&eacute;p&iacute;t&eacute;sekor.  Ha
	  viszont m&aacute;r el tudunk &eacute;rni egy t&aacute;voli
	  IP-c&iacute;met, akkor nagyon val&oacute;sz&iacute;n&#251;,
	  hogy az <filename>/etc/resolv.conf</filename>
	  &aacute;llom&aacute;nyba nem ker&uuml;lt bele a megfelel&#245;
	  n&eacute;vfelold&oacute; c&iacute;me.  Az eml&iacute;tett
	  &aacute;llom&aacute;nynak valahogy &iacute;gy kellene
	  kin&eacute;znie:</para>

	<programlisting>domain <replaceable>minta.com</replaceable>
nameserver <replaceable>x.x.x.x</replaceable>
nameserver <replaceable>y.y.y.y</replaceable></programlisting>

	<para>Ahol az <replaceable>x.x.x.x</replaceable> &eacute;s
	  <replaceable>y.y.y.y</replaceable> c&iacute;meket a
	  szolg&aacute;ltat&oacute;nk n&eacute;vszervereinek
	  c&iacute;m&eacute;vel kell behelyettes&iacute;teni.  Ez nem
	  minden esetben tal&aacute;lhat&oacute; meg az
	  el&#245;fizet&#245;i szerz&#245;d&eacute;sben, de ha
	  felh&iacute;vjuk a szolg&aacute;ltat&oacute;nkat, akkor minden
	  bizonnyal el&aacute;rulj&aacute;k ezeket a
	  c&iacute;meket.</para>

	<para>A &man.syslog.3; is alkalmas a
	  <application>PPP</application> kapcsolatok
	  napl&oacute;z&aacute;s&aacute;ra.  Ehhez csup&aacute;n ennyit
	  kell megadnunk az <filename>/etc/syslog.conf</filename>
	  &aacute;llom&aacute;nyban:</para>

	<programlisting>!ppp
*.*     /var/log/ppp.log</programlisting>

	<para>A legt&ouml;bb esetben ez a lehet&#245;s&eacute;g
	  m&aacute;r eleve adott.</para>

      </sect3>
    </sect2>
  </sect1>

  <sect1 id="pppoe">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Jim</firstname>
	  <surname>Mock</surname>
	  <contrib>K&eacute;sz&iacute;tette (a
	    http://node.to/freebsd/how-tos/how-to-freebsd-pppoe.html
	    alapj&aacute;n): </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>A PPP haszn&aacute;lata Ethernet felett (PPPoE)</title>

    <indexterm>
      <primary>PPP</primary>
      <secondary>over Ethernet</secondary>
    </indexterm>

    <indexterm>
      <primary>PPPoE</primary>
      <see>PPP, over Ethernet</see>
    </indexterm>

    <para>Ebben a szakaszban azt ismertetj&uuml;k, hogyan
      &aacute;ll&iacute;tsuk be a PPP-t Ethernet felett (PPP over
      Ethernet, <acronym>PPPoE</acronym>).</para>

    <sect2>
      <title>A rendszermag be&aacute;ll&iacute;t&aacute;sa</title>

      <para>A PPPoE m&#251;k&ouml;d&eacute;s&eacute;hez most m&aacute;r
	semmilyen m&oacute;dos&iacute;t&aacute;sra nincs
	sz&uuml;ks&eacute;g a rendszermag
	be&aacute;ll&iacute;t&aacute;saiban.  Amennyiben a hozz&aacute;
	sz&uuml;ks&eacute;ges Netgraph t&aacute;mogat&aacute;s nem
	tal&aacute;lhat&oacute; a rendszermagban, akkor azt a
	<application>ppp</application> &ouml;nm&#251;k&ouml;d&#245;en
	bet&ouml;lti.</para>

    </sect2>

    <sect2>
      <title>A <filename>ppp.conf</filename>
	be&aacute;ll&iacute;t&aacute;sa</title>

      <para>&Iacute;me egy m&#251;k&ouml;d&#245;
	<filename>ppp.conf</filename> &aacute;llom&aacute;ny:</para>

      <programlisting>default:
  set log Phase tun command # itt ak&aacute;r egy r&eacute;szletesebb napl&oacute;z&aacute;st is be tudunk &aacute;ll&iacute;tani
  set ifaddr 10.0.0.1/0 10.0.0.2/0

a_szolgaltato_neve:
  set device PPPoE:<replaceable>xl1</replaceable> # az xl1 hely&eacute;re &iacute;rjuk be a saj&aacute;t Ethernet eszk&ouml;z&uuml;nket
  set authname FELHASZNALONEV
  set authkey JELSZO
  set dial
  set login
  add default HISADDR</programlisting>

    </sect2>

    <sect2>
      <title>A <application>ppp</application> futtat&aacute;sa</title>

      <para><username>root</username>
	felhaszn&aacute;l&oacute;k&eacute;nt adjuk ki az al&aacute;bbi
	parancsot:</para>

      <screen>&prompt.root; <userinput>ppp -ddial a_szolgaltato_neve</userinput></screen>

    </sect2>

    <sect2>
      <title>A <application>ppp</application> ind&iacute;t&aacute;sa a
	rendszerind&iacute;t&aacute;s sor&aacute;n</title>

      <para>Az <filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyba vegy&uuml;k fel a
	k&ouml;vetkez&#245;ket:</para>

      <programlisting>ppp_enable="YES"
ppp_mode="ddial"
ppp_nat="YES"	# csak akkor, ha c&iacute;mford&iacute;t&aacute;s kell a helyi h&aacute;l&oacute;zaton, m&aacute;sk&uuml;l&ouml;nben "NO"
ppp_profile="a_szolgaltato_neve"</programlisting>

    </sect2>

    <sect2>
      <title>A szolg&aacute;ltat&aacute;si c&iacute;mk&eacute;k
	haszn&aacute;lata</title>

      <para>Bizonyos esetekben szolg&aacute;ltat&aacute;si
	c&iacute;mk&eacute;t (service tag) is haszn&aacute;lnunk kell a
	kapcsolat l&eacute;trehoz&aacute;s&aacute;hoz.  A
	szolg&aacute;ltat&aacute;si c&iacute;mk&eacute;k
	seg&iacute;ts&eacute;g&eacute;vel tudjuk
	megk&uuml;l&ouml;nb&ouml;ztetni az adott h&aacute;l&oacute;zaton
	el&eacute;rhet&#245; k&uuml;l&ouml;nb&ouml;z&#245; PPPoE
	szervereket.</para>

      <para>A szolg&aacute;ltat&oacute;t&oacute;l kapott
	dokument&aacute;ci&oacute;ban szerepelnie kell minden ehhez
	kapcsol&oacute;d&oacute; inform&aacute;ci&oacute;nak.
	Amennyiben nem tal&aacute;ljuk, &eacute;rdekl&#245;dj&uuml;nk a
	szolg&aacute;ltat&oacute;n&aacute;l.</para>

      <para>Utols&oacute; rem&eacute;nyk&eacute;nt
	megpr&oacute;b&aacute;lhatjuk a <link
	linkend="ports">Portgy&#251;jtem&eacute;nyben</link>
	tal&aacute;lhat&oacute; <ulink
	url="http://www.roaringpenguin.com/pppoe/">Roaring Penguin
	PPPoE</ulink> nev&#251; program &aacute;ltal javasolt
	m&oacute;dszert.  Enn&eacute;l vegy&uuml;k azonban
	sz&aacute;m&iacute;t&aacute;sba, hogy f&eacute;lre tudja
	programozni a modem&uuml;nket, amit&#245;l ak&aacute;r
	haszn&aacute;lhatatlann&aacute; is v&aacute;lhat, ez&eacute;rt
	k&eacute;tszer is gondoljuk meg, miel&#245;tt haszn&aacute;lni
	kezdj&uuml;k.  Egyszer&#251;en csak tegy&uuml;k fel a
	szolg&aacute;ltat&oacute;t&oacute;l a modem&uuml;nk mell&eacute;
	kapott szoftvert.  Ezut&aacute;n l&eacute;pj&uuml;nk be a
	program <guimenu>System</guimenu> men&uuml;j&eacute;be.  Itt
	kell lennie a megfelel&#245; profilnak, ami
	&aacute;ltal&aacute;ban az <emphasis>ISP</emphasis>.</para>

      <para>A profil neve (a szolg&aacute;ltat&aacute;s
	c&iacute;mk&eacute;je) a <filename>ppp.conf</filename>
	&aacute;llom&aacute;nyban a PPPoE bejegyz&eacute;s
	r&eacute;szek&eacute;nt jelenik meg a <command>set
	device</command> parancsban (ennek pontos r&eacute;szleteit
	l&aacute;sd a &man.ppp.8; man oldalon).  Teh&aacute;t
	nagyj&aacute;b&oacute;l &iacute;gy n&eacute;z ki:</para>

      <programlisting>set device PPPoE:<replaceable>xl1</replaceable>:<replaceable>ISP</replaceable></programlisting>

      <para>Az <replaceable>xl1</replaceable> eszk&ouml;z nev&eacute;t
	ne felejts&uuml;k el a megfelel&#245; Ethernet
	k&aacute;rty&aacute;hoz tartoz&oacute; eszk&ouml;z nev&eacute;re
	kicser&eacute;lni.</para>

      <para>Az <replaceable>ISP</replaceable> helyett pedig &iacute;rjuk
	be az im&eacute;nt kider&iacute;tett profil nev&eacute;t.</para>

      <para>A t&eacute;m&aacute;val kapcsolatban az al&aacute;bbi
	helyeken tal&aacute;lhatunk tov&aacute;bbi
	inform&aacute;ci&oacute;kat:</para>

      <itemizedlist>
	<listitem>
	  <para><ulink
	    url="http://renaud.waldura.com/doc/freebsd/pppoe/">Cheaper
	    Broadband with FreeBSD on DSL</ulink>, &iacute;rta: Renaud
	    Waldura (angolul).</para>
	</listitem>

	<listitem>
	  <para><ulink
	  url="http://www.ruhr.de/home/nathan/FreeBSD/tdsl-freebsd.html">
	    Nutzung von T-DSL und T-Online mit FreeBSD</ulink>,
	    &iacute;rta: Udo Erdelhoff (n&eacute;met&uuml;l).</para>
	</listitem>
      </itemizedlist>

    </sect2>

    <sect2 id="ppp-3com">
      <title>PPPoE &eacute;s a &tm.3com; <trademark
	class="registered">HomeConnect</trademark> ADSL Modem Dual
	Link</title>

      <para>Ez a modem nem felel meg az <ulink
	url="http://www.faqs.org/rfcs/rfc2516.html">RFC&nbsp;2516</ulink>
	el&#245;&iacute;r&aacute;sainak (<emphasis>A Method for
	transmitting PPP over Ethernet (PPPoE)</emphasis>, &iacute;rta:
	L.  Mamakos, K.  Lidl, J.  Evarts, D.  Carrel, D.  Simone
	&eacute;s R.  Wheeler).  Helyette az Ethernet keretekben
	elt&eacute;r&#245; csomagt&iacute;pus k&oacute;dokat
	haszn&aacute;l.  A <ulink
	url="http://www.3com.com/">3Com-n&aacute;l</ulink>
	panaszkodjunk, ha szerint&uuml;nk is be kellene tartaniuk a
	PPPoE specifik&aacute;ci&oacute;j&aacute;t.</para>

      <para>A &os; is csak akkor lesz k&eacute;pes
	egy&uuml;ttm&#251;k&ouml;dni ezzel az eszk&ouml;zzel, ha
	be&aacute;ll&iacute;tjuk a megfelel&#245; sysctl
	v&aacute;ltoz&oacute;t.  Ezt a rendszerind&iacute;t&aacute;s
	sor&aacute;n automatikusan meg tudjuk tenni az
	<filename>/etc/sysctl.conf</filename>
	m&oacute;dos&iacute;t&aacute;s&aacute;val:</para>

      <programlisting>net.graph.nonstandard_pppoe=1</programlisting>

      <para>vagy k&ouml;zvetlen&uuml;l az al&aacute;bbi
	paranccsal:</para>

      <screen>&prompt.root; <userinput>sysctl net.graph.nonstandard_pppoe=1</userinput></screen>

      <para>Sajnos, mivel ez egy rendszerszint&#251;
	be&aacute;ll&iacute;t&aacute;s, ez&eacute;rt a &tm.3com;
	<trademark class="registered">HomeConnect</trademark> ADSL Modem
	&eacute;s m&aacute;s norm&aacute;lis PPPoE kliens vagy szerver
	egyszerre nem haszn&aacute;lhat&oacute;.</para>

    </sect2>
  </sect1>

  <sect1 id="pppoa">
    <title><application>PPP</application> ATM felett (PPPoA)</title>

    <indexterm>
      <primary>PPP</primary>
      <secondary>over ATM</secondary>
    </indexterm>

    <indexterm>
      <primary>PPPoA</primary>
      <see>PPP, over ATM</see>
    </indexterm>

    <para>Most a PPP ATM feletti (PPP over ATM, PPPoA)
      be&aacute;ll&iacute;t&aacute;s&aacute;t fogjuk bemutatni.  A PPPoA
      az eur&oacute;pai DSL szolg&aacute;ltat&oacute;k
      k&ouml;r&eacute;ben igen nagy n&eacute;pszer&#251;s&eacute;gnek
      &ouml;rvend.</para>

    <sect2>
      <title>PPPoA haszn&aacute;lata az Alcatel &speedtouch;
	USB-vel</title>

      <para>Az ilyen eszk&ouml;z&ouml;kh&ouml;z tartoz&oacute; PPPoA
	t&aacute;mogat&aacute;s a &os;-ben portk&eacute;nt &aacute;ll
	rendelkez&eacute;sre, mivel az ehhez sz&uuml;ks&eacute;ges
	firmware csak az <ulink
	url="http://www.speedtouchdsl.com/disclaimer_lx.htm">Alcatel
	licencel&eacute;si felt&eacute;telei szerint</ulink>
	terjeszthet&#245;, ez&eacute;rt nem lehet r&eacute;sze az alap
	&os; rendszernek.</para>

      <para>A szoftver telep&iacute;t&eacute;s&eacute;hez ez&eacute;rt a
	<link linkend="ports">Portgy&#251;jtem&eacute;nyt</link> kell
	haszn&aacute;lnunk.  Telep&iacute;ts&uuml;k a <filename
	role="package">net/pppoa</filename> portot &eacute;s
	k&ouml;vess&uuml;k a mell&eacute;kelt
	utas&iacute;t&aacute;sokat.</para>

      <para>Sok m&aacute;s USB-s eszk&ouml;zh&ouml;z hasonl&oacute;an az
	Alcatel &speedtouch; USB-nek a g&eacute;p&uuml;nkr&#245;l kell
	let&ouml;ltenie a m&#251;k&ouml;d&eacute;s&eacute;hez
	sz&uuml;ks&eacute;ges firmware-t.  Ez a folyamat &os; alatt
	automatiz&aacute;lhat&oacute;, teh&aacute;t ez a
	m&aacute;sol&aacute;s minden esetben megt&ouml;rt&eacute;nik,
	amikor az eszk&ouml;zt az USB portra csatlakoztatjuk.  Ehhez az
	<filename>/etc/usbd.conf</filename> &aacute;llom&aacute;nyba a
	k&ouml;vetkez&#245; adatokat kell beletenn&uuml;nk.  Az
	&aacute;llom&aacute;nyt <username>root</username>
	felhaszn&aacute;l&oacute;k&eacute;nt tudjuk csak
	szerkeszteni.</para>

      <programlisting>device "Alcatel SpeedTouch USB"
    devname "ugen[0-9]+"
    vendor 0x06b9
    product 0x4061
    attach "/usr/local/sbin/modem_run -f /usr/local/libdata/mgmt.o"</programlisting>

      <para>Az <application>usbd</application>, vagyis az USB
	d&eacute;mon enged&eacute;lyez&eacute;s&eacute;hez az
	<filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyba
	tegy&uuml;k bele az al&aacute;bbit:</para>

      <programlisting>usbd_enable="YES"</programlisting>

      <para>Emellett m&eacute;g a <application>ppp</application>
	kapcsolatot is be tudjuk &aacute;ll&iacute;tani az
	ind&iacute;t&aacute;s sor&aacute;n.  Ehhez mind&ouml;ssze a
	k&ouml;vetkez&#245; sort kell megadnunk az
	<filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyban.
	Ism&eacute;t megeml&iacute;tj&uuml;k, hogy ezt a m&#251;veletet
	csak a <username>root</username> felhaszn&aacute;l&oacute;val
	tudjuk v&eacute;grehajtani.</para>

      <programlisting>ppp_enable="YES"
ppp_mode="ddial"
ppp_profile="adsl"</programlisting>

      <para>Ezut&aacute;n &uacute;gy tudjuk sz&oacute;ra b&iacute;rni a
	kapcsolatot, ha a <filename role="package">net/pppoa</filename>
	porthoz mell&eacute;kelt <filename>ppp.conf</filename>
	&aacute;llom&aacute;nyt haszn&aacute;ljuk fel
	kiindul&aacute;sk&eacute;nt.</para>

    </sect2>

    <sect2>
      <title>Az mpd haszn&aacute;lata</title>

      <para>Az <application>mpd</application>
	seg&iacute;ts&eacute;g&eacute;vel t&ouml;bbf&eacute;le
	szolg&aacute;ltat&aacute;shoz, k&ouml;zt&uuml;k a PPTP-hez
	hozz&aacute; tudunk f&eacute;rni.  Az
	<application>mpd</application> a Portgy&#251;jtem&eacute;nyben
	<filename role="package">net/mpd</filename> n&eacute;ven
	tal&aacute;lhat&oacute; meg.  Sok ADSL modemnek
	sz&uuml;ks&eacute;ge van egy PPTP tunnelre k&ouml;zte &eacute;s
	g&eacute;p k&ouml;z&ouml;tt.  Ilyen modem p&eacute;ld&aacute;ul
	az Alcatel &speedtouch; Home is.</para>

      <para>El&#245;sz&ouml;r mag&aacute;t a portot kell
	telep&iacute;ten&uuml;nk, majd ezut&aacute;n m&aacute;r be
	tudjuk &aacute;ll&iacute;tani az
	<application>mpd</application>-t a saj&aacute;t &eacute;s a
	szolg&aacute;ltat&oacute;nk ig&eacute;nyei szerint.  A port a
	rengeteg le&iacute;r&aacute;ssal megt&#251;zdelt minta
	konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nyait a
	<filename><replaceable>PREFIX</replaceable>/etc/mpd/</filename>
	k&ouml;nyvt&aacute;rba teszi.  Itt a
	<replaceable>PREFIX</replaceable> azt a k&ouml;nyvt&aacute;rat
	jel&ouml;li, ahova a portok ker&uuml;lnek.  Ez alapb&oacute;l a
	<filename>/usr/local/</filename>.  Az
	<application>mpd</application>
	be&aacute;ll&iacute;t&aacute;s&aacute;r&oacute;l
	sz&oacute;l&oacute; teljes dokument&aacute;ci&oacute; a
	telep&iacute;t&eacute;s ut&aacute;n el&eacute;rhet&#245; HTML
	form&aacute;tumban a
	<filename><replaceable>PREFIX</replaceable>/share/doc/mpd/</filename>
	k&ouml;nyvt&aacute;rban.  &Iacute;me egy p&eacute;lda az
	<application>mpd</application>
	be&aacute;ll&iacute;t&aacute;s&aacute;ra ADSL kapcsolatok
	eset&eacute;ben.  Az ezzel kapcsolatos
	be&aacute;ll&iacute;t&aacute;saink k&eacute;t
	&aacute;llom&aacute;nyra bomlanak, melyek k&ouml;z&uuml;l az
	els&#245; az <filename>mpd.conf</filename>:</para>

      <programlisting>default:
    load adsl

adsl:
    new -i ng0 adsl adsl
    set bundle authname <replaceable>felhaszn&aacute;l&oacute;n&eacute;v</replaceable> <co
    id="co-mpd-ex-user">
    set bundle password <replaceable>jelsz&oacute;</replaceable> <co
    id="co-mpd-ex-pass">
    set bundle disable multilink

    set link no pap acfcomp protocomp
    set link disable chap
    set link accept chap
    set link keep-alive 30 10

    set ipcp no vjcomp
    set ipcp ranges 0.0.0.0/0 0.0.0.0/0

    set iface route default
    set iface disable on-demand
    set iface enable proxy-arp
    set iface idle 0

    open</programlisting>

    <calloutlist>
      <callout arearefs="co-mpd-ex-user">
	<para>A felhaszn&aacute;l&oacute;i azonos&iacute;t&oacute;,
	  amellyel a szolg&aacute;ltat&oacute; fel&eacute;
	  hiteles&iacute;tj&uuml;k magunkat.</para>
      </callout>
      <callout arearefs="co-mpd-ex-pass">
	<para>Az azonos&iacute;t&oacute;hoz tartoz&oacute;
	  jelsz&oacute;, amelyet szint&eacute;n a
	  szolg&aacute;ltat&oacute;l kaptunk.</para>
      </callout>
    </calloutlist>

    <para>Az <filename>mpd.links</filename> &aacute;llom&aacute;ny
      tartalmazza a fel&eacute;p&iacute;tend&#245; kapcsolatra vagy
      kapcsolatokra vonatkoz&oacute; inform&aacute;ci&oacute;kat.
      P&eacute;ld&aacute;ul az el&#245;bbiekhez tartoz&oacute;
      <filename>mpd.links</filename> tartalma ez:</para>

    <programlisting>adsl:
    set link type pptp
    set pptp mode active
    set pptp enable originate outcall
    set pptp self <replaceable>10.0.0.1</replaceable> <co
    id="co-mpd-ex-self">
    set pptp peer <replaceable>10.0.0.138</replaceable> <co
    id="co-mpd-ex-peer"></programlisting>

    <calloutlist>
      <callout arearefs="co-mpd-ex-self">
	<para>A &os;-s sz&aacute;m&iacute;t&oacute;g&eacute;p&uuml;nk
	  c&iacute;me, ahonnan az <application>mpd</application>
	  indul.</para>
      </callout>
      <callout arearefs="co-mpd-ex-peer">
	<para>Az ADSL modem&uuml;nk IP-c&iacute;me.  Az Alcatel
	  &speedtouch; Home eset&eacute;n ez a c&iacute;m
	  alap&eacute;rtelmez&eacute;s szerint a <hostid
	  role="ipaddr">10.0.0.138</hostid>.</para>
      </callout>
    </calloutlist>

    <para>A kapcsolat ezek ut&aacute;n pillanatok alatt
      fel&eacute;p&iacute;thet&#245;, ha a <username>root</username>
      felhaszn&aacute;l&oacute;val kiadjuk a k&ouml;vetkez&#245;
      parancsot:</para>

    <screen>&prompt.root; <userinput>mpd -b <replaceable>adsl</replaceable></userinput></screen>

    <para>A kapcsolat &aacute;llapot&aacute;t a k&ouml;vetkez&#245;
      paranccsal tudjuk ezut&aacute;n ellen&#245;rizni:</para>

    <screen>&prompt.user; <userinput>ifconfig <replaceable>ng0</replaceable></userinput>
ng0: flags=88d1&lt;UP,POINTOPOINT,RUNNING,NOARP,SIMPLEX,MULTICAST&gt; mtu 1500
     inet 216.136.204.117 --> 204.152.186.171 netmask 0xffffffff</screen>

    <para>&os; alatt az <application>mpd</application> haszn&aacute;lata
      aj&aacute;nlott az ADSL szolg&aacute;ltat&aacute;sok
      el&eacute;r&eacute;s&eacute;hez.</para>

    </sect2>

    <sect2>
      <title>A pptpclient haszn&aacute;lata</title>

      <para>&os; alatt a <filename
	role="package">net/pptpclient</filename>
	seg&iacute;ts&eacute;g&eacute;vel is tudunk PPPoA
	t&iacute;pus&uacute; szolg&aacute;ltat&aacute;sokhoz
	kapcsol&oacute;dni.</para>

      <para>A <filename role="package">net/pptpclient</filename>
	felhaszn&aacute;l&aacute;s&aacute;val &uacute;gy tudunk DSL
	szolg&aacute;ltat&aacute;sokat el&eacute;rni, ha
	feltelep&iacute;tj&uuml;k a hozz&aacute;tartoz&oacute; portot
	vagy csomagot, majd m&oacute;dos&iacute;tjuk az
	<filename>/etc/ppp/ppp.conf</filename> &aacute;llom&aacute;nyt.
	Mind a k&eacute;t m&#251;veletet csak <username>root</username>
	felhaszn&aacute;l&oacute;k&eacute;nt tudjuk
	lebonyol&iacute;tani.  Ehhez egy <filename>ppp.conf</filename>
	&aacute;llom&aacute;nyt lentebb adtunk meg.  A
	<filename>ppp.conf</filename> &aacute;llom&aacute;nyban
	tal&aacute;lhat&oacute; tov&aacute;bbi
	be&aacute;ll&iacute;t&aacute;si lehet&#245;s&eacute;gekr&#245;l
	a &man.ppp.8; man oldalon olvashatunk.</para>

      <programlisting>adsl:
 set log phase chat lcp ipcp ccp tun command
 set timeout 0
 enable dns
 set authname <replaceable>felhaszn&aacute;l&oacute;n&eacute;v</replaceable> <co id="co-pptp-ex-user">
 set authkey <replaceable>jelsz&oacute;</replaceable> <co id="co-pptp-ex-pass">
 set ifaddr 0 0
 add default HISADDR</programlisting>

      <calloutlist>
	<callout arearefs="co-pptp-ex-user">
	  <para>A DSL szolg&aacute;ltat&oacute;nkt&oacute;l kapott
	    felhaszn&aacute;l&oacute;i n&eacute;v.</para>
	</callout>
	<callout arearefs="co-pptp-ex-pass">
	  <para>Az el&#245;fizet&eacute;shez tartoz&oacute;
	    jelsz&oacute;.</para>
	</callout>
      </calloutlist>

      <warning>
	<para>Mivel az el&#245;fizet&eacute;shez tartoz&oacute;
	  jelsz&oacute;t a <filename>ppp.conf</filename>
	  &aacute;llom&aacute;nyba titkos&iacute;tatlan form&aacute;ban
	  kell szerepeltetn&uuml;nk, ez&eacute;rt gondoskodjunk
	  r&oacute;la, hogy senki sem k&eacute;pes olvasni a
	  tartalm&aacute;t.  A most k&ouml;vetkez&#245; parancsokkal
	  be&aacute;ll&iacute;tjuk, hogy ez az &aacute;llom&aacute;ny
	  csak a <username>root</username> felhaszn&aacute;l&oacute;
	  sz&aacute;m&aacute;ra legyen olvashat&oacute;.  A
	  r&eacute;szletek&eacute;rt l&aacute;sd a &man.chmod.1;
	  &eacute;s &man.chown.8; man oldalakat.</para>

	<screen>&prompt.root; <userinput>chown root:wheel /etc/ppp/ppp.conf</userinput>
&prompt.root; <userinput>chmod 600 /etc/ppp/ppp.conf</userinput></screen>
      </warning>

      <para>Ezzel a paranccsal a DSL &uacute;tv&aacute;laszt&oacute;nk
	fel&eacute; nyitunk egy tunnelt a PPP kapcsolathoz.  Az
	Ethernetes DSL modemek &aacute;ltal&aacute;ban egy el&#245;re
	be&aacute;ll&iacute;tott helyi h&aacute;l&oacute;zati
	IP-c&iacute;mmel rendelkeznek, amelyhez tudunk csatlakozni.  Az
	Alcatel &speedtouch; Home eset&eacute;ben ez a c&iacute;m a
	<hostid role="ipaddr">10.0.0.138</hostid>.  Az
	&uacute;tv&aacute;laszt&oacute;hoz adott
	dokument&aacute;ci&oacute;ban keress&uuml;k meg, hogy az
	eszk&ouml;z&uuml;nkh&ouml;z konkr&eacute;tan milyen c&iacute;m
	tartozik.  A tunnel megnyit&aacute;s&aacute;hoz &eacute;s a PPP
	kapcsolat megind&iacute;t&aacute;s&aacute;hoz a
	k&ouml;vetkez&#245; parancsot kell kiadnunk:</para>

      <screen>&prompt.root; <userinput>pptp <replaceable>c&iacute;m</replaceable> <replaceable>adsl</replaceable></userinput></screen>

      <tip>
	<para>Az im&eacute;nti parancs v&eacute;g&eacute;re m&eacute;g
	  &eacute;rdemes odatenni az <quote>et</quote> jelet
	  (<quote>&amp;</quote>) is, mivel &iacute;gy a
	  <application>pptp</application>
	  m&#251;k&ouml;d&eacute;s&eacute;t a h&aacute;tt&eacute;rben
	  folytatja.</para>
      </tip>

      <para>A parancs hat&aacute;s&aacute;ra a virtu&aacute;lis tunnelt
	megtestes&iacute;t&#245; <devicename>tun</devicename>
	eszk&ouml;z j&ouml;n l&eacute;tre a
	<application>pptp</application> &eacute;s
	<application>ppp</application> programok k&ouml;z&ouml;tt.
	Miut&aacute;n visszakaptuk a parancssort, vagy a
	<application>pptp</application> program
	meger&#245;s&iacute;tette a kapcsol&oacute;d&aacute;s
	sikeress&eacute;g&eacute;t, a keletkezett j&aacute;ratot
	&iacute;gy tudjuk ellen&#245;rizni:</para>

      <screen>&prompt.user; <userinput>ifconfig <replaceable>tun0</replaceable></userinput>
tun0: flags=8051&lt;UP,POINTOPOINT,RUNNING,MULTICAST&gt; mtu 1500
        inet 216.136.204.21 --> 204.152.186.171 netmask 0xffffff00 
        Opened by PID 918</screen>

      <para>Ha nem tudn&aacute;nk valami&eacute;rt csatlakozni, akkor
	el&#245;sz&ouml;r n&eacute;zz&uuml;k meg az
	&uacute;tv&aacute;laszt&oacute;nk
	be&aacute;ll&iacute;t&aacute;sait, ami &aacute;ltal&aacute;ban a
	<application>telnet</application> vagy egy
	b&ouml;ng&eacute;sz&#245; seg&iacute;ts&eacute;g&eacute;vel
	el&eacute;rhet&#245;.  Ha m&eacute;g mindig nem vagyunk
	k&eacute;pesek csatlakozni, akkor a <command>pptp</command>
	parancs kimenet&eacute;ben &eacute;s
	<application>ppp</application>
	<filename>/var/log/ppp.log</filename> n&eacute;ven
	el&eacute;rhet&#245; napl&oacute;j&aacute;ban kereshet&uuml;nk
	&aacute;rulkod&oacute; nyomokat.</para>

    </sect2>
  </sect1>

  <sect1 id="slip">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Satoshi</firstname>
	  <surname>Asami</surname>
	  <contrib>Eredetileg k&eacute;sz&iacute;tette: </contrib>
	</author>
      </authorgroup>
      <authorgroup>
	<author>
	  <firstname>Guy</firstname>
	  <surname>Helmer</surname>
	  <contrib>A hozz&aacute;val&oacute;kat biztos&iacute;totta:
	    </contrib>
	</author>
	<author>
	  <firstname>Piero</firstname>
	  <surname>Serini</surname>
	</author>
      </authorgroup>
    </sect1info>

    <title>A SLIP haszn&aacute;lata</title>

    <indexterm><primary>SLIP</primary></indexterm>

    <sect2 id="slipc">
      <title>A SLIP kliensek be&aacute;ll&iacute;t&aacute;sa</title>

      <indexterm>
	<primary>SLIP</primary>
	<secondary>kliens</secondary>
      </indexterm>

      <para>A k&ouml;vetkez&#245;kben azt mutatjuk be, hogy egy &os;-s
	g&eacute;pet mik&eacute;nt tudunk egy h&aacute;l&oacute;zaton
	statikus n&eacute;vvel be&aacute;ll&iacute;tani a SLIP
	haszn&aacute;lat&aacute;val.  A dinamikus h&aacute;l&oacute;zati
	nevek haszn&aacute;latakor (vagyis amikor a c&iacute;m&uuml;nk
	minden egyes t&aacute;rcs&aacute;z&aacute;skor
	megv&aacute;ltozhat) egy valamivel bonyolultabb
	be&aacute;ll&iacute;t&aacute;sra van
	sz&uuml;ks&eacute;g&uuml;nk.</para>

      <para>El&#245;sz&ouml;r is &aacute;llap&iacute;tsuk meg, hogy a
	modem&uuml;nk melyik soros portra csatlakozik.  Sokan
	<filename>/dev/modem</filename> n&eacute;ven egy szimbolikus
	linket hoznak l&eacute;tre a val&oacute;di eszk&ouml;zre,
	p&eacute;ld&aacute;ul a <filename>/dev/cuadN</filename>
	le&iacute;r&oacute;ra.  Ennek k&ouml;sz&ouml;nhet&#245;en az
	eszk&ouml;z t&eacute;nyleges n&eacute;vet&#245;l el tudunk
	vonatkoztatni &eacute;s soha nem kell m&oacute;dos&iacute;tanunk
	semmit, ha a modemet p&eacute;ld&aacute;ul egy m&aacute;sik
	portra kell &aacute;traknunk.  Ugyanis k&ouml;nnyed&eacute;n
	kacif&aacute;ntoss&aacute; tud v&aacute;lni a helyzet, amikor
	egyszerre kell megv&aacute;ltoztatnunk egy rakat dolgot az
	<filename>/etc</filename> k&ouml;nyvt&aacute;rban &eacute;s
	m&oacute;dos&iacute;tanunk az &ouml;sszes
	<filename>.kermrc</filename> &aacute;llom&aacute;nyt!</para>

      <note>
	<para>A <filename>/dev/cuad0</filename> a
	  <devicename>COM1</devicename> port, a
	  <filename>cuad1</filename> a <devicename>COM2</devicename>
	  &eacute;s &iacute;gy tov&aacute;bb.</para>
      </note>

      <para>A rendszermag be&aacute;ll&iacute;t&aacute;sait
	tartalmaz&oacute; &aacute;llom&aacute;nyban a
	k&ouml;vetkez&#245;nek mindenk&eacute;ppen szerepelnie
	kell:</para>

      <programlisting>device   sl</programlisting>

      <para>Mivel ez &aacute;ltal&aacute;ban a
	<filename>GENERIC</filename> rendszermagban
	megtal&aacute;lhat&oacute;, &iacute;gy ez nem okoz semmilyen
	gondot, kiv&eacute;ve, hogy ha kor&aacute;bban m&aacute;r
	kit&ouml;r&ouml;lt&uuml;k.</para>

      <sect3>
	<title>Dolgok, amiket csak egyszer kell megtenni</title>

	<procedure>
	  <step>
	    <para>Vegy&uuml;k fel az otthoni g&eacute;p&uuml;nket, az
	      &aacute;tj&aacute;r&oacute;nkat &eacute;s a
	      n&eacute;vszervereket az <filename>/etc/hosts</filename>
	      &aacute;llom&aacute;nyba.  Erre &aacute;lljon itt egy
	      konkr&eacute;t p&eacute;lda:</para>

	    <programlisting>127.0.0.1               localhost loghost
136.152.64.181          water.CS.Example.EDU water.CS water
136.152.64.1            inr-3.CS.Example.EDU inr-3 slip-gateway
128.32.136.9            ns1.Example.EDU ns1
128.32.136.12           ns2.Example.EDU ns2</programlisting>
	  </step>

	  <step>
	    <para>Figyelj&uuml;nk oda, hogy az
	      <filename>/etc/nsswitch.conf</filename>
	      &aacute;llom&aacute;nyban szerepl&#245;
	      <option>hosts</option> szakaszban a <literal>dns</literal>
	      sz&oacute; el&#245;tt a <literal>files</literal>
	      sz&oacute;nak kell megjelennie.  Ezek n&eacute;lk&uuml;l
	      m&oacute;k&aacute;s dolgok tudnak t&ouml;rt&eacute;nni
	      rendszer&uuml;nkben.</para>
	  </step>

	  <step>
	    <para>Szerkessz&uuml;k &aacute;t az
	      <filename>/etc/rc.conf</filename>
	      &aacute;llom&aacute;nyt.</para>

	    <orderedlist>
	      <listitem>
		<para>A h&aacute;l&oacute;zati nev&uuml;nket a
		  k&ouml;vetkez&#245; sorban tudjuk megadni:</para>

		<programlisting>hostname="az.en.nevem"</programlisting>

		<para>Ide a g&eacute;p&uuml;nk teljes internetes
		  h&aacute;l&oacute;zati nev&eacute;t kell
		  be&iacute;rnunk.</para>
	      </listitem>

	      <indexterm><primary>default route</primary></indexterm>

	      <listitem>
		<para>Az alap&eacute;rtelmezett
		  &aacute;tj&aacute;r&oacute;t az al&aacute;bbi sor
		  m&oacute;dos&iacute;t&aacute;s&aacute;val tudjuk
		  be&aacute;ll&iacute;tani &uacute;gy, hogy a</para>

		<programlisting>defaultrouter="NO"</programlisting>

		<para>v&aacute;ltoz&oacute; &eacute;rt&eacute;k&eacute;t
		  &aacute;t&iacute;rjuk:</para>

		<programlisting>defaultrouter="slip-gateway"</programlisting>
	      </listitem>
	    </orderedlist>
	  </step>

	  <step>
	    <para>K&eacute;sz&iacute;ts&uuml;k el az
	      <filename>/etc/resolv.conf</filename>
	      &aacute;llom&aacute;nyt, amelyben majd a
	      k&ouml;vetkez&#245;k legyenek:</para>

	    <programlisting>domain CS.Example.EDU
nameserver 128.32.136.9
nameserver 128.32.136.12</programlisting>

	    <indexterm><primary>n&eacute;vszerver</primary></indexterm>
	    <indexterm><primary>tartom&aacute;nyn&eacute;v</primary></indexterm>

	    <para>L&aacute;that&oacute;, hogy ezek a
	      n&eacute;vfelold&aacute;s&eacute;rt felel&#245;s szerverek
	      c&iacute;mei.  Term&eacute;szetesen a t&eacute;nylegesen
	      be&iacute;rand&oacute; tartom&aacute;ny (domain) neve
	      &eacute;s a n&eacute;vszerverek c&iacute;mei mindig az
	      adott k&ouml;rnyezet&uuml;nkt&#245;l f&uuml;ggenek.</para>
	  </step>

	  <step>
	    <para>&Aacute;ll&iacute;tsuk be egy jelsz&oacute;t a
	      <username>root</username> &eacute;s
	      <username>toor</username> felhaszn&aacute;l&oacute;knak
	      (&eacute;s mindenki m&aacute;snak, akinek m&eacute;g nem
	      lenne).</para>
	  </step>

	  <step>
	    <para>Ind&iacute;tsuk &uacute;jra a
	      sz&aacute;m&iacute;t&oacute;g&eacute;p&uuml;nket &eacute;s
	      ut&aacute;na gy&#245;z&#245;dj&uuml;nk meg r&oacute;la,
	      hogy a megfelel&#245; h&aacute;l&oacute;zati n&eacute;vvel
	      rendelkezik.</para>
	  </step>
	</procedure>
      </sect3>

      <sect3>
	<title>A SLIP kapcsolatok
	  fel&eacute;p&iacute;t&eacute;se</title>

	<indexterm>
	  <primary>SLIP</primary>
	  <secondary>kapcsol&oacute;d&aacute;s</secondary>
	</indexterm>

	<procedure>
	  <step>
	    <para>T&aacute;rcs&aacute;zzunk &eacute;s
	      g&eacute;pelj&uuml;k be a <command>slip</command>
	      parancsot, majd ezt k&ouml;vet&#245;en a
	      g&eacute;p&uuml;nk nev&eacute;t &eacute;s a
	      jelsz&oacute;t.  Ez legink&aacute;bb a konkr&eacute;t
	      k&ouml;rnyezett&#245;l f&uuml;gg.  Ha a
	      <application>Kermit</application> nev&#251; programot
	      haszn&aacute;ljuk, akkor egy ilyen szkripttel is
	      pr&oacute;b&aacute;lkozhatunk:</para>

	    <programlisting># a kermit be&aacute;ll&iacute;t&aacute;sa
set modem hayes
set line /dev/modem
set speed 115200
set parity none
set flow rts/cts
set terminal bytesize 8
set file type binary
# a k&ouml;vetkez&#245; makr&oacute; felel&#245;s a t&aacute;rcs&aacute;z&aacute;s&eacute;rt &eacute;s a bejelentkez&eacute;s&eacute;rt
define slip dial 643-9600, input 10 =&gt;, if failure stop, -
output slip\x0d, input 10 Azonosito:, if failure stop, -
output silvia\x0d, input 10 Jelszo:, if failure stop, -
output ***\x0d, echo \x0aCONNECTED\x0a</programlisting>

	    <para>Term&eacute;szetesen a felhaszn&aacute;l&oacute;i
	      nevet &eacute;s a jelsz&oacute;t a saj&aacute;tunkra kell
	      benne kicser&eacute;ln&uuml;nk.  Miut&aacute;n ezzel is
	      megvagyunk, a <application>Kermit</application>
	      paranccsor&aacute;ban a csatlakoz&aacute;shoz
	      egyszer&#251;en csak &iacute;rjuk be, hogy
	      <command>slip</command>.</para>

	    <note>
	<para><emphasis>Nem</emphasis> javasoljuk, hogy az
	  &aacute;llom&aacute;nyrendszeren a jelszavakat
	  titkos&iacute;tatlan form&aacute;ban t&aacute;roljuk.  Mindeki
	  csak a saj&aacute;t felel&#245;ss&eacute;g&eacute;re tegyen
	  ilyet.</para>
	    </note>
	  </step>

	  <step>
	    <para>Hagyjuk el a <application>Kermit</application>
	      programot (a <keycombo> <keycap>Ctrl</keycap>
	      <keycap>z</keycap> </keycombo>
	      billenty&#251;kombin&aacute;ci&oacute;val b&aacute;rmikor
	      fel tudjuk f&uuml;ggeszteni a fut&aacute;s&aacute;t)
	      &eacute;s <username>root</username>
	      felhaszn&aacute;l&oacute;k&eacute;nt &iacute;rjuk be a
	      k&ouml;vetkez&#245;t:</para>

	    <screen>&prompt.root; <userinput>slattach -h -c -s 115200 /dev/modem</userinput></screen>

	    <para>Ha ezut&aacute;n m&aacute;r k&eacute;pesek vagyunk a
	      <command>ping</command> paranccsal el&eacute;rni az
	      &uacute;tv&aacute;laszt&oacute; m&aacute;sik
	      oldal&aacute;n tal&aacute;lhat&oacute; g&eacute;pet, akkor
	      az azt jelenti, hogy siker&uuml;lt csatlakoznunk!  Ha
	      viszont itt m&eacute;g nem j&aacute;rn&aacute;nk sikerrel,
	      akkor az <command>slattach</command> parancsnak ne a
	      <option>-c</option> param&eacute;tert adjuk meg, hanem a
	      <option>-a</option> param&eacute;tert.</para>
	  </step>
	</procedure>

      </sect3>

      <sect3>
	<title>Hogyan bontsunk egy kapcsolatot</title>

	<para>Tegy&uuml;k a k&ouml;vetkez&#245;ket:</para>

	<screen>&prompt.root; <userinput>kill -INT `cat /var/run/slattach.modem.pid`</userinput></screen>

	<para>Ez le&aacute;ll&iacute;tja az <command>slattach</command>
	  programot.  Ne felejts&uuml;k el azonban, hogy ezt csak a
	  <username>root</username> felhaszn&aacute;l&oacute;val tudjuk
	  v&eacute;grehajtani.  Ezut&aacute;n t&eacute;rj&uuml;nk vissza
	  a <command>kermit</command> programhoz (ha
	  felf&uuml;ggesztett&uuml;k volna, akkor ehhez a
	  <command>fg</command> parancsra lesz
	  sz&uuml;ks&eacute;g&uuml;nk), &eacute;s l&eacute;pj&uuml;nk ki
	  bel&#245;le (<keycap>q</keycap>).</para>

	<para>Az &man.slattach.8; man oldala ehhez a <command>ifconfig
	  sl0 down</command> parancsot javasolja, amellyel
	  l&eacute;nyeg&eacute;ben le&aacute;ll&iacute;tjuk a
	  hozz&aacute;tartoz&oacute; fel&uuml;letet.
	  Igaz&aacute;b&oacute;l a kett&#245; k&ouml;z&ouml;tt nincs
	  semmilyen komolyabb elt&eacute;r&eacute;s (mivel az
	  (<command>ifconfig sl0</command> is ugyanezt
	  eredm&eacute;nyezi.)</para>

	<para>N&eacute;ha el&#245;fordulhat, hogy a modem
	  egyszer&#251;en nem hajland&oacute; eldobni a vonalat.  Ilyen
	  esetekben ind&iacute;tsuk el a <command>kermit</command>
	  programot &eacute;s l&eacute;pj&uuml;nk ki megint.
	  M&aacute;sodj&aacute;ra &aacute;ltal&aacute;ban m&aacute;r
	  siker&uuml;l.</para>

      </sect3>

      <sect3>
	<title>Hibaelh&aacute;r&iacute;t&aacute;s</title>

	<para>Ha valami&eacute;rt ez m&eacute;gsem v&aacute;lna be,
	  akkor csak nyugodtan k&eacute;rdez&#245;sk&ouml;dj&uuml;nk a
	  &a.net.name; levelez&eacute;si list&aacute;n.  A tapasztalatok
	  szerint az embereknek eddig a k&ouml;vetkez&#245;kkel voltak
	  probl&eacute;m&aacute;ik:</para>

	<itemizedlist>
	  <listitem>
	    <para>Az <command>slattach</command>
	      megh&iacute;v&aacute;sakor sem a <option>-c</option>, sem
	      pedig a <option>-a</option> param&eacute;tert nem
	      adt&aacute;k meg.  (Ez ugyan nem v&eacute;gzetes hiba, de
	      egyes felhaszn&aacute;l&oacute;k szerint ez
	      seg&iacute;tett megoldani a gondokat.)</para>
	  </listitem>

	  <listitem>
	    <para>Az <option>sl0</option> helyett
	      <option>s10</option>-et &iacute;rtak be (egyes
	      bet&#251;t&iacute;pusokn&aacute;l k&ouml;nnyen &ouml;ssze
	      lehet t&eacute;veszteni ezeket).</para>
	  </listitem>

	  <listitem>
	    <para>Az <command>ifconfig sl0</command>
	      seg&iacute;ts&eacute;g&eacute;vel ellen&#245;rizhet&#245;
	      a fel&uuml;let &aacute;llapota.  P&eacute;ld&aacute;ul
	      ilyet l&aacute;thatunk:</para>

	    <screen>&prompt.root; <userinput>ifconfig sl0</userinput>
sl0: flags=10&lt;POINTOPOINT&gt;
        inet 136.152.64.181 --&gt; 136.152.64.1 netmask ffffff00</screen>
	  </listitem>

	  <listitem>
	    <para>Ha a &man.ping.8; <errorname>no route to
	      host</errorname> hiba&uuml;zenetet ad, akkor az
	      &uacute;tv&aacute;laszt&aacute;si
	      t&aacute;bl&aacute;zattal van a gond.  A <command>netstat
	      -r</command> paranccsal gyorsan ki tudjuk list&aacute;zni
	      a rendszer&uuml;nkben jelenleg nyilv&aacute;ntartott
	      utakat:</para>

	    <screen>&prompt.root; <userinput>netstat -r</userinput>
Routing tables
Destination      Gateway            Flags     Refs     Use  IfaceMTU    Rtt    Netmasks:

(root node)
(root node)

Route Tree for Protocol Family inet:
(root node) =&gt;
default          inr-3.Example.EDU  UG          8   224515  sl0 -      -
localhost.Exampl localhost.Example. UH          5    42127  lo0 -       0.438
inr-3.Example.ED water.CS.Example.E UH          1        0  sl0 -      -
water.CS.Example localhost.Example. UGH        34 47641234  lo0 -       0.438
(root node)</screen>

	    <para>Az el&#245;z&#245; p&eacute;ld&aacute;kat egy
	      viszonylag forgalmas rendszerb&#245;l ragadtuk ki.  A
	      rendszer&uuml;nk&ouml;n megjelen&#245; sz&aacute;mok a
	      h&aacute;l&oacute;zati aktivit&aacute;s
	      m&eacute;rt&eacute;k&eacute;nek
	      f&uuml;ggv&eacute;nyei.</para>
	  </listitem>
	</itemizedlist>

      </sect3>
    </sect2>

    <sect2 id="slips">
      <title>A SLIP szerverek be&aacute;ll&iacute;t&aacute;sa</title>

      <indexterm>
	<primary>SLIP</primary>
	<secondary>szerver</secondary>
      </indexterm>

      <para>Ebben a le&iacute;r&aacute;sban igyeksz&uuml;nk bemutatni
	hogyan kell egy &os; t&iacute;pus&uacute; rendszer alatt SLIP
	szervert be&aacute;ll&iacute;tani, ami &aacute;ltal&aacute;ban
	annyit jelent, hogy a rendszer&uuml;nben a t&aacute;voli SLIP
	kliensek csatlakoz&aacute;sakor automatikusan elind&iacute;tjuk
	a kapcsolatokat.</para>

      <sect3 id="slips-prereqs">
	<title>El&#245;felt&eacute;telek</title>

	<indexterm><primary>TCP/IP h&aacute;l&oacute;zatok</primary></indexterm>

	<para>Ez a szakasz igen szakmai jelleg&#251;, ez&eacute;rt az
	  olvas&oacute; r&eacute;sz&eacute;r&#245;l
	  felt&eacute;telez&uuml;nk a t&eacute;m&aacute;ban n&eacute;mi
	  alapismeretet.  Ez alatt alapvet&#245;en a TPC/IP
	  h&aacute;l&oacute;zati protokollt &eacute;rtj&uuml;k,
	  k&uuml;l&ouml;n&ouml;s hangs&uacute;llyal a
	  h&aacute;l&oacute;zatok &eacute;s h&aacute;l&oacute;zati
	  csom&oacute;pontok c&iacute;mz&eacute;s&eacute;en, a
	  h&aacute;l&oacute;zati maszkokon, alh&aacute;l&oacute;zatokon,
	  &uacute;tv&aacute;laszt&aacute;son, az olyan
	  &uacute;tv&aacute;laszt&aacute;si protokollokon, mint
	  p&eacute;ld&aacute;ul a RIP.  A SLIP
	  be&aacute;ll&iacute;t&aacute;sa egy
	  bet&aacute;rcs&aacute;z&oacute;s szerveren mindezen fogalmak
	  ismeret&eacute;t ig&eacute;nyli, &eacute;s ha ezekkel
	  m&eacute;g nem lenn&eacute;nk tiszt&aacute;ban, akkor olvassuk
	  el p&eacute;ld&aacute;ul Craig Hunt <emphasis>TCP/IP Network
	  Administration</emphasis> c&iacute;m&#251; k&ouml;nyv&eacute;t
	  (O'Reilly &amp; Associates, Inc.; ISBN: 0-937175-82-X) vagy
	  Douglas Comer TCP/IP protokollr&oacute;l sz&oacute;l&oacute;
	  k&ouml;nyveit.</para>

	<indexterm><primary>modem</primary></indexterm>

	<para>Mindezek mellett m&eacute;g felt&eacute;telezz&uuml;k,
	  hogy m&aacute;r be&aacute;ll&iacute;tottuk a modem(ek)et
	  &eacute;s a rajtuk kereszt&uuml;li bejelentkez&eacute;shez
	  sz&uuml;ks&eacute;ges &aacute;llom&aacute;nyokat.  Ha
	  m&eacute;g nem k&eacute;sz&iacute;tett&uuml;k volna fel erre a
	  rendszer&uuml;nket, akkor a <xref linkend="dialup"> ad
	  r&eacute;szletes t&aacute;j&eacute;koztat&aacute;st a
	  bet&aacute;rcs&aacute;z&oacute;s szolg&aacute;ltat&aacute;sok
	  be&aacute;ll&iacute;t&aacute;s&aacute;r&oacute;l.  A soros
	  vonali eszk&ouml;zmeghajt&oacute;val kapcsolatban
	  tov&aacute;bb&aacute; &eacute;rdemes &aacute;tolvasni a
	  &man.sio.4; oldalt, valamint a &man.ttys.5;, &man.gettytab.5;,
	  &man.getty.8; &eacute;s &man.init.8; oldalakat a
	  bejelentkez&eacute;sek modemen kereszt&uuml;li
	  fogad&aacute;s&aacute;r&oacute;l, illetve tal&aacute;n az
	  &man.stty.1; oldalt a soros port param&eacute;tereinek
	  megfelel&#245;
	  be&aacute;ll&iacute;t&aacute;s&aacute;r&oacute;l (mint
	  p&eacute;ld&aacute;ul a <literal>clocal</literal> a
	  k&ouml;zvetlen&uuml;l csatlakoz&oacute; soros fel&uuml;letek
	  eset&eacute;ben).</para>

      </sect3>

      <sect3>
	<title>Gyors &aacute;ttekint&eacute;s</title>

	<para>A &os; SLIP szerverk&eacute;nt &aacute;ltal&aacute;ban a
	  k&ouml;vetkez&#245; m&oacute;don &uuml;zemel: a SLIP
	  felhaszn&aacute;l&oacute; t&aacute;rcs&aacute;zza a &os;-s
	  SLIP szerver&uuml;nket, majd bejelentkezik egy spec&aacute;lis
	  SLIP bejelentkez&eacute;si azonos&iacute;t&oacute;
	  haszn&aacute;lat&aacute;val, amely a
	  <filename>/usr/sbin/sliplogin</filename> shellt
	  haszn&aacute;lja.  A <command>sliplogin</command> program az
	  <filename>/etc/sliphome/slip.hosts</filename>
	  &aacute;llom&aacute;nyban megkeresi a speci&aacute;lis
	  felhaszn&aacute;l&oacute;hoz tartoz&oacute; sort, &eacute;s ha
	  tal&aacute;l egy ilyet, akkor csatlakoztatja a soros vonalat
	  egy rendelkez&eacute;sre &aacute;ll&oacute; SLIP
	  fel&uuml;letre, amelyen azt&aacute;n a SLIP fel&uuml;ltet
	  be&aacute;ll&iacute;t&aacute;s&aacute;hoz lefuttatja az
	  <filename>/etc/sliphome/slip.login</filename> shell
	  szkriptet.</para>

	<sect4>
	  <title>P&eacute;lda SLIP szerveren kereszt&uuml;li
	    bejelentkez&eacute;sre</title>

	  <para>P&eacute;ld&aacute;ul, ha a SLIP
	    felhaszn&aacute;l&oacute; azonos&iacute;t&oacute;ja
	    <username>Shelmerg</username>, akkor az
	    <filename>/etc/master.passwd</filename>
	    &aacute;llom&aacute;nyban a hozz&aacute;tartoz&oacute;
	    bejegyz&eacute;st nagyj&aacute;b&oacute;l ilyen:</para>

	  <programlisting>Shelmerg:password:1964:89::0:0:Guy Helmer - SLIP:/usr/users/Shelmerg:/usr/sbin/sliplogin</programlisting>

	  <para>Amikor <username>Shelmerg</username> bejelentkezik, a
	    <command>sliplogin</command> az
	    <filename>/etc/sliphome/slip.hosts</filename>
	    &aacute;llom&aacute;nyban keresni fog egy
	    felhaszn&aacute;l&oacute;
	    azonos&iacute;t&oacute;j&aacute;hoz illeszked&#245; sort.
	    P&eacute;ld&aacute;ul tegy&uuml;k fel, hogy az
	    <filename>/etc/sliphome/slip.hosts</filename>
	    &aacute;llom&aacute;nyban szerepel egy ilyen sor:</para>

	  <programlisting>Shelmerg        dc-slip sl-helmer       0xfffffc00		  autocomp</programlisting>

	  <para>A <command>sliplogin</command> ezt a sor fogja
	    megtal&aacute;lni, majd a soros vonalat a
	    k&ouml;vetkez&#245; el&eacute;rhet&#245; SLIP
	    fel&uuml;lethez kapcsolja, amelyen ezut&aacute;n
	    v&eacute;grehajtja az
	    <filename>/etc/sliphome/slip.login</filename> szkriptet a
	    k&ouml;vetkez&#245; m&oacute;don:</para>

	  <programlisting>/etc/sliphome/slip.login 0 19200 Shelmerg dc-slip sl-helmer 0xfffffc00 autocomp</programlisting>

	  <para>Ha minden j&oacute;l megy, akkor az
	    <filename>/etc/sliphome/slip.login</filename> kiad egy
	    <command>ifconfig</command> parancsot azon a SLIP
	    fel&uuml;leten, amelyre a <command>sliplogin</command>
	    mag&aacute;t csatlakoztatta (amely a fenti
	    p&eacute;ld&aacute;ban a 0.  SLIP fel&uuml;let volt,
	    &eacute;s amelyet meg is adtunk
	    <filename>slip.login</filename> els&#245;
	    param&eacute;terek&eacute;nt), &eacute;s &iacute;gy
	    be&aacute;ll&iacute;tja a helyi IP-c&iacute;met
	    (<hostid>dc-slip</hostid>), a t&aacute;voli IP-c&iacute;met
	    (<hostid>sl-helmer</hostid>), a SLIP fel&uuml;lethez
	    tartoz&oacute; h&aacute;l&oacute;zati maszkot (<hostid
	    role="netmask">0xfffffc00</hostid>) valamint a
	    tov&aacute;bbi opci&oacute;kat
	    (<literal>autocomp</literal>).  Ha valami rosszul s&uuml;lne
	    el, akkor a <command>sliplogin</command> ezekr&#245;l
	    &aacute;ltal&aacute;ban nagyon j&oacute;
	    min&#245;s&eacute;g&#251;,
	    inform&aacute;ci&oacute;d&uacute;s &uuml;zeneteket
	    k&eacute;sz&iacute;t, amelyeket a
	    <application>syslogd</application> d&eacute;mon pedig a
	    <filename>/var/log/messages</filename>
	    &aacute;llom&aacute;nyba r&ouml;gz&iacute;t.  (A
	    &man.syslogd.8; &eacute;s &man.syslog.conf.5; man oldalak
	    &eacute;s tal&aacute;n maga az
	    <filename>/etc/syslog.conf</filename> seg&iacute;thet
	    kider&iacute;teni, hogy a <application>syslogd</application>
	    jelenleg napl&oacute;z-e, &eacute;s ha igen, akkor
	    hova.)</para>

	</sect4>
      </sect3>

      <sect3>
	<title>A rendszermag be&aacute;ll&iacute;t&aacute;sa</title>

	<indexterm>
	  <primary>rendszermag</primary>
	  <secondary>be&aacute;ll&iacute;t&aacute;sa</secondary>
	</indexterm>

	<indexterm><primary>SLIP</primary></indexterm>

	<para>A &os; alap (vagyis a <filename>GENERIC</filename>)
	  rendszermagja t&aacute;mogatja a SLIP (&man.sl.4;)
	  haszn&aacute;lat&aacute;t.  Ha viszont saj&aacute;t
	  rendszermagunk van, akkor el&#245;fordulhat, hogy
	  be&aacute;ll&iacute;t&aacute;sok k&ouml;z&eacute; fel kell
	  venn&uuml;nk a k&ouml;vetkez&#245; sort is:</para>

	<programlisting>device   sl</programlisting>

	<para>Alap&eacute;rtelmez&eacute;s szerint a &os; nem
	  tov&aacute;bb&iacute;t semmilyen csomagot.  Amennyiben a &os;
	  SLIP szerver&uuml;nket
	  &uacute;tv&aacute;laszt&oacute;k&eacute;nt is
	  m&#251;k&ouml;dtetni akarjuk, &uacute;gy az
	  <filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyban a
	  <literal>gateway_enable</literal> v&aacute;ltoz&oacute;t
	  &aacute;t kell &aacute;ll&iacute;tanunk a <option>YES</option>
	  &eacute;rt&eacute;kre.  Ennek hat&aacute;s&aacute;ra az
	  &uacute;jraind&iacute;t&aacute;s ut&aacute;n is megmarad a
	  csomagok tov&aacute;bb&iacute;t&aacute;sa.</para>

	<para>A v&aacute;ltoztat&aacute;sok azonnali
	  &eacute;letbel&eacute;ptet&eacute;s&eacute;hez adjuk ki
	  <username>root</username> felhaszn&aacute;l&oacute;k&eacute;nt
	  a k&ouml;vetkez&#245; parancsot:</para>

	<screen>&prompt.root; /etc/rc.d/routing start</screen>

	<para>Ha a &os; rendszermag be&aacute;ll&iacute;t&aacute;sa
	  sor&aacute;n seg&iacute;ts&eacute;gre szoruln&aacute;nk, akkor
	  olvassuk el <xref linkend="kernelconfig">et.</para>
      </sect3>

      <sect3>
	<title>A sliplogin be&aacute;ll&iacute;t&aacute;sa</title>

	<para>Ahogy arra m&aacute;r kor&aacute;bban is utaltunk, az
	  <filename>/etc/sliphome</filename> k&ouml;nyvt&aacute;rban
	  h&aacute;rom &aacute;llom&aacute;ny felel&#245;s a
	  <filename>/usr/sbin/sliplogin</filename>
	  be&aacute;ll&iacute;t&aacute;s&aacute;&eacute;rt (l&aacute;sd
	  &man.sliplogin.8;): a <filename>slip.hosts</filename>,
	  amelyekben a SLIP felhaszn&aacute;l&oacute;kat &eacute;s a
	  hozz&aacute;juk tartoz&oacute; IP-c&iacute;meket adjuk meg; a
	  <filename>slip.login</filename>, amely &aacute;ltal&aacute;ban
	  csak a SLIP fel&uuml;letet &aacute;ll&iacute;tja be; (az
	  elhagyhat&oacute;) <filename>slip.logout</filename>, amely a
	  soros vonal bont&aacute;sakor a
	  <filename>slip.login</filename> hat&aacute;s&aacute;t
	  igyekszik visszaford&iacute;tani.</para>

	<sect4>
	  <title>A <filename>slip.hosts</filename>
	    be&aacute;ll&iacute;t&aacute;sa</title>

	  <para>Az <filename>/etc/sliphome/slip.hosts</filename>
	    soraiban whitespace karakterekkel tagoltan legal&aacute;bb
	    n&eacute;gy elem szerepel:</para>

	  <itemizedlist>
	    <listitem>
	      <para>a SLIP felhaszn&aacute;l&oacute;
		bejelentkez&eacute;si azonos&iacute;t&oacute;ja</para>
	    </listitem>

	    <listitem>
	      <para>a SLIP kapcsolat helyi c&iacute;me (a SLIP
		szerver&eacute;hez k&eacute;pest)</para>
	    </listitem>

	    <listitem>
	      <para>a SLIP kapcsolat t&aacute;voli c&iacute;me</para>
	    </listitem>

	    <listitem>
	      <para>h&aacute;l&oacute;zati maszk</para>
	    </listitem>
	  </itemizedlist>

	  <para>A helyi &eacute;s t&aacute;voli c&iacute;mek lehetnek
	    h&aacute;l&oacute;zati nevek is (amelyeket vagy az
	    <filename>/etc/hosts</filename>, vagy pedig az
	    <filename>/etc/nsswitch.conf</filename>
	    &aacute;llom&aacute;nyban szerepl&#245;
	    be&aacute;ll&iacute;t&aacute;sok alapj&aacute;n tudunk
	    feloldani IP-c&iacute;mre), illetve a h&aacute;l&oacute;zati
	    maszk is lehet egy olyan n&eacute;v, amelyet az
	    <filename>/etc/networks</filename> fel tud oldani.  A
	    p&eacute;ldak&eacute;nt bemutatott rendszer&uuml;nkben az
	    <filename>/etc/sliphome/slip.hosts</filename>
	    &aacute;llom&aacute;ny nagyj&aacute;b&oacute;l &iacute;gy
	    &eacute;p&uuml;l fel:</para>

	  <programlisting>#
# login helyi-c&iacute;m       t&aacute;voli-c&iacute;m      maszk            opc1    opc2 
#                                               (normal,compress,noicmp)
#
Shelmerg  dc-slip       sl-helmerg      0xfffffc00      autocomp</programlisting>

	  <para>A sorok v&eacute;g&eacute;n az al&aacute;bbi
	    opci&oacute;k k&ouml;z&uuml;l egy vagy t&ouml;bb
	    szerepelhet:</para>

	  <itemizedlist>
	    <listitem>
	      <para><option>normal</option> &mdash; a fejl&eacute;ceket
		nem t&ouml;m&ouml;r&iacute;tj&uuml;k</para>
	    </listitem>

	    <listitem>
	      <para><option>compress</option> &mdash; a fejl&eacute;cek
		t&ouml;m&ouml;r&iacute;t&eacute;se</para>
	    </listitem>

	    <listitem>
	      <para><option>autocomp</option> &mdash; ha a t&aacute;voli
		v&eacute;gpont engedi, akkor
		t&ouml;m&ouml;r&iacute;ts&uuml;k a
		fejl&eacute;ceket</para>
	    </listitem>

	    <listitem>
	      <para><option>noicmp</option> &mdash; az ICMP csomagok
		tilt&aacute;sa (&iacute;gy p&eacute;ld&aacute;ul a
		<quote>ping</quote> &aacute;ltal gener&aacute;lt
		csomagok is eldob&oacute;dnak a
		s&aacute;vsz&eacute;less&eacute;g felem&eacute;sztese
		helyett)</para>
	    </listitem>
	  </itemizedlist>

	  <indexterm><primary>SLIP</primary></indexterm>
	  <indexterm><primary>TCP/IP h&aacute;l&oacute;zatok</primary></indexterm>

	  <para>A SLIP kapcsolathoz tartoz&oacute; helyi &eacute;s
	    t&aacute;voli c&iacute;mek megv&aacute;laszt&aacute;sa
	    f&uuml;gg att&oacute;l, hogy egy k&uuml;l&ouml;n TCP/IP
	    alh&aacute;l&oacute;zatot szentel&uuml;nk-e neki, vagy a
	    SLIP szerver&uuml;nk&ouml;n egy <quote>ARP proxy</quote>-t
	    haszn&aacute;lunk (amely tulajdonk&eacute;ppen nem egy
	    <quote>val&oacute;di</quote> ARP proxy, de ebben a
	    szakaszban &iacute;gy fogunk r&aacute; hivatkozni).  Ha nem
	    vagyunk biztosak benne, hogy melyik m&oacute;dszert
	    v&aacute;lasszuk vagy hogy mik&eacute;nt osszuk ki az
	    IP-c&iacute;meket, akkor n&eacute;zz&uuml;nk ut&aacute;na
	    ezekenek a SLIP haszn&aacute;lat&aacute;val kapcsolatos
	    el&#245;felt&eacute;telek k&ouml;z&ouml;tt
	    megeml&iacute;tett k&ouml;nyvekben (<xref
	    linkend="slips-prereqs">) &eacute;s/vagy
	    konzult&aacute;ljunk a h&aacute;l&oacute;zatunk
	    karbantart&oacute;j&aacute;val.</para>

	  <para>Ha a SLIP klienseknek k&uuml;l&ouml;n
	    alh&aacute;l&oacute;zatokat osztunk ki, akkor a saj&aacute;t
	    IP-c&iacute;m&uuml;nkb&#245;l kell l&eacute;trehoznunk
	    &eacute;s kiadnunk ezeket.  Ezut&aacute;n
	    val&oacute;sz&iacute;n&#251;leg a SLIP
	    szerver&uuml;nk&ouml;n kereszt&uuml;l m&eacute;g meg kell
	    adnunk egy statikus &uacute;tvonalat legk&ouml;zelebbi IP
	    &uacute;tv&aacute;laszt&oacute; fel&eacute;.</para>

	  <indexterm><primary>Ethernet</primary></indexterm>

	  <para>Minden m&aacute;s esetben az <quote>ARP proxy</quote>
	    m&oacute;dszert kell alkalmaznunk, ahol a SLIP kliensek
	    IP-c&iacute;meit a SLIP szerver Ethernet
	    alh&aacute;l&oacute;zat&aacute;b&oacute;l osztjuk ki,
	    &eacute;s ennek megfelel&#245;en az
	    <filename>/etc/sliphome/slip.login</filename> &eacute;s
	    <filename>/etc/sliphome/slip.logout</filename> szkripteket
	    m&oacute;dos&iacute;tanunk kell &uacute;gy, hogy az
	    &man.arp.8; seg&iacute;ts&eacute;g&eacute;vel k&eacute;pesek
	    legyenek a SLIP szerver ARP
	    t&aacute;bl&aacute;zat&aacute;ban kezelni a <quote>proxy
	    ARP</quote> bejegyz&eacute;seket.</para>
	</sect4>

	<sect4>
	  <title>A <filename>slip.login</filename>
	    be&aacute;ll&iacute;t&aacute;sa</title>

	  <para>Egy &aacute;tlagos
	    <filename>/etc/sliphome/slip.login</filename>
	    &aacute;llom&aacute;ny k&ouml;r&uuml;lbel&uuml;l
	    ilyen:</para>

	  <programlisting>#!/bin/sh -
#
#       @(#)slip.login  5.1 (Berkeley) 7/1/90

#
# Egy &aacute;ltal&aacute;nos slip vonali bejelentkez&eacute;si &aacute;llom&aacute;ny. A sliplogin ezt az al&aacute;bbi
# param&eacute;terekkel h&iacute;vja meg:
#      1        2         3        4          5         6     7-n
#   slipegys. ttyseb.  azonos&iacute;t&oacute; helyi-c&iacute;m t&aacute;voli-c&iacute;m maszk egy&eacute;b-pmek.
#
/sbin/ifconfig sl$1 inet $4 $5 netmask $6</programlisting>

	  <para>Ez a <filename>slip.login</filename>
	    &aacute;llom&aacute;ny az <command>ifconfig</command>
	    seg&iacute;ts&eacute;g&eacute;vel puszt&aacute;n
	    be&aacute;ll&iacute;tja a megfelel&#245; SLIP
	    fel&uuml;lethez tartoz&oacute; helyi, valamint t&aacute;voli
	    c&iacute;met &eacute;s a h&aacute;l&oacute;zati
	    maszkot.</para>

	  <para>Ha ehelyett azonban az <quote>ARP proxy</quote>
	    m&oacute;dszer&eacute;t v&aacute;lasztottuk volna
	    (teh&aacute;t a SLIP kliensekenek nem akarunk eg&eacute;sz
	    alh&aacute;l&oacute;zatokat kiutalni), akkor az
	    <filename>/etc/sliphome/slip.login</filename>
	    &aacute;llom&aacute;ny ek&eacute;ppen alakul:</para>

	  <programlisting>#!/bin/sh -
#
#       @(#)slip.login  5.1 (Berkeley) 7/1/90

#
# Egy &aacute;ltal&aacute;nos slip vonali bejelentkez&eacute;si &aacute;llom&aacute;ny. A sliplogin ezt az al&aacute;bbi
# param&eacute;terekkel h&iacute;vja meg:
#      1        2         3        4          5         6     7-n
#   slipegys. ttyseb.  azonos&iacute;t&oacute; helyi-c&iacute;m t&aacute;voli-c&iacute;m maszk egy&eacute;b-pmek.
#
/sbin/ifconfig sl$1 inet $4 $5 netmask $6 
# A SLIP kliensre vonatkoz&oacute; ARP k&eacute;r&eacute;seket a mi Ethernet c&iacute;m&uuml;nkkel
# v&aacute;laszoljuk meg:
/usr/sbin/arp -s $5 00:11:22:33:44:55 pub</programlisting>

	  <para>L&aacute;thatjuk, hogy az el&#245;bbi
	    <filename>slip.login</filename> &aacute;llom&aacute;ny egy
	    <command>arp -s &#36;5 00:11:22:33:44:55 pub</command>
	    paranccsal eg&eacute;sz&uuml;lt ki, ami a SLIP szerver ARP
	    t&aacute;bl&aacute;zat&aacute;ban hoz l&eacute;tre egy ARP
	    bejegyz&eacute;st.  Ez az ARP bejegyz&eacute;s gondoskodik
	    r&oacute;la, hogy a SLIP szerver v&aacute;laszoljon a
	    saj&aacute;t Ethernetes MAC-c&iacute;m&eacute;vel, amikor
	    egy m&aacute;sik IP csom&oacute;pont a SLIP kliens
	    IP-c&iacute;me fel&#245;l &eacute;rdekl&#245;dik.</para>

	  <indexterm>
	    <primary>Ethernet</primary>
	    <secondary>MAC-c&iacute;m</secondary>
	  </indexterm>

	  <para>Amikor a fenti p&eacute;ld&aacute;b&oacute;l indulunk
	    ki, a benne megadott MAC-c&iacute;met (<hostid
	    role="mac">00:11:22:33:44:55</hostid>)
	    felt&eacute;tlen&uuml;l cser&eacute;lj&uuml;k a
	    rendszer&uuml;nk Ethernet k&aacute;rty&aacute;j&aacute;nak
	    MAC-c&iacute;m&eacute;vel, mert k&uuml;l&ouml;nben az
	    <quote>ARP proxy</quote> egy&aacute;ltal&aacute;n nem fog
	    m&#251;k&ouml;dni!  A SLIP szerver&uuml;nk
	    MAC-c&iacute;m&eacute;t a <command>netstat -i</command>
	    paranccsal der&iacute;thetj&uuml;k ki, amelynek a
	    kimenet&eacute;ben a m&aacute;sodik sor valahogy &iacute;gy
	    n&eacute;z ki:</para>

	  <screen>ed0   1500  &lt;Link&gt;0.2.c1.28.5f.4a         191923	0   129457     0   116</screen>

	  <para>Ebb&#245;l der&uuml;l ki, hogy az adott rendszer
	    val&oacute;di MAC-c&iacute;me a <hostid
	    role="mac">00:02:c1:28:5f:4a</hostid> &mdash; az &man.arp.8;
	    sz&aacute;m&aacute;ra azonban a <command>netstat
	    -i</command> kimenet&eacute;ben szerepl&#245; pontokat
	    kett&#245;spontokra kell cser&eacute;lni, &eacute;s a
	    tagokat ki kell eg&eacute;sz&iacute;teni
	    k&eacute;tkarakteres hexadecim&aacute;lis
	    sz&aacute;mokk&aacute;.  Az &man.arp.8; man oldal&aacute;n
	    tudhatunk meg ennek r&eacute;szleteir&#245;l
	    t&ouml;bbet.</para>

	  <note>
	    <para>Amikor l&eacute;trehozzuk az
	      <filename>/etc/sliphome/slip.login</filename> &eacute;s
	      <filename>/etc/sliphome/slip.logout</filename>
	      &aacute;llom&aacute;nyokat, akkor ne felejts&uuml;k el
	      hozz&aacute;juk be&aacute;ll&iacute;tani a
	      <quote>v&eacute;grehajt&aacute;st</quote>
	      enged&eacute;lyez&#245; bitet sem (teh&aacute;t ilyenkor
	      mindig adjuk ki a <command>chmod 755
	      /etc/sliphome/slip.login
	      /etc/sliphome/slip.logout</command> parancsokat is),
	      k&uuml;l&ouml;nben a <command>sliplogin</command> ezeket
	      nem tudja majd elind&iacute;tani.</para>
	  </note>

	</sect4>

	<sect4>
	  <title>A <filename>slip.logout</filename>
	    be&aacute;ll&iacute;t&aacute;sa</title>

	  <para>Az <filename>/etc/sliphome/slip.logout</filename>
	    &aacute;llom&aacute;nyra nincs felt&eacute;tlen&uuml;l
	    sz&uuml;ks&eacute;g&uuml;nk (hacsak nem egy <quote>ARP
	    proxy</quote>-t akarunk csin&aacute;lni), de ha
	    valami&eacute;rt m&eacute;gis el akarjuk
	    k&eacute;sz&iacute;teni, akkor ehhez a k&ouml;vetkez&#245;
	    alapvet&#245; <filename>slip.logout</filename> szkript
	    haszn&aacute;lhat&oacute;:</para>

	  <programlisting>#!/bin/sh -
#
#       slip.logout

#
# Egy logout &aacute;llom&aacute;ny a slip vonalhoz. A sliplogin ezt a szkriptet a
# k&ouml;vetkez&#245; param&eacute;terekkel h&iacute;vja:
#      1        2         3        4          5         6     7-n
#   slipegys. ttyseb.   login helyi-c&iacute;m  t&aacute;voli-c&iacute;m   maszk opc-pmek.
#
/sbin/ifconfig sl$1 down</programlisting>

	  <para>Ha az <quote>ARP proxy</quote> m&oacute;dszert
	    haszn&aacute;ljuk, &eacute;s az
	    <filename>/etc/sliphome/slip.logout</filename>
	    felhaszn&aacute;l&aacute;s&aacute;val akarjuk a SLIP
	    klienshez tartoz&oacute; ARP bejegyz&eacute;st
	    t&ouml;r&ouml;lni, akkor ebb&#245;l induljunk ki:</para>

	  <programlisting>#!/bin/sh -
#
#       @(#)slip.logout

#
# Egy logout &aacute;llom&aacute;ny a slip vonalhoz. A sliplogin ezt a szkriptet a
# k&ouml;vetkez&#245; param&eacute;terekkel h&iacute;vja:
#      1        2         3        4          5         6     7-n
#   slipegys. ttyseb.   login helyi-c&iacute;m  t&aacute;voli-c&iacute;m   maszk opc-pmek.
#
sbin/ifconfig sl$1 down
# Ne v&aacute;laszoljunk t&ouml;bbet a SLIP kliensre vonatkoz&oacute; ARP k&eacute;r&eacute;sekre
/usr/sbin/arp -d $5</programlisting>

	  <para>Az <command>arp -d &#36;5</command> parancs
	    elt&aacute;vol&iacute;tja az <quote>ARP proxy</quote>
	    m&#251;k&ouml;d&eacute;s&eacute;hez bejegyz&eacute;st,
	    amelyet m&eacute;g a <filename>slip.login</filename>
	    szkripttel vett&uuml;nk fel a SLIP kliens
	    bejelentkez&eacute;sekor.</para>

	  <para>Tal&aacute;n felesleges ism&eacute;telget&eacute;snek
	    t&#251;nhet: az
	    <filename>/etc/sliphome/slip.logout</filename>
	    &aacute;llom&aacute;nynak l&eacute;trehoz&aacute;sa
	    ut&aacute;n &aacute;ll&iacute;tsuk be a
	    v&eacute;grehajt&aacute;sra sz&oacute;l&oacute; bitet
	    (vagyis adjuk ki a <command>chmod 755
	    /etc/sliphome/slip.logout</command> parancsot).</para>

	</sect4>
      </sect3>

      <sect3>
	<title>Az &uacute;tv&aacute;laszt&aacute;ssal kapcsolatos
	  megfontol&aacute;sok</title>

	<indexterm>
	  <primary>SLIP</primary>
	  <secondary>&uacute;tv&aacute;laszt&aacute;s</secondary>
	</indexterm>

	<para>Ha a h&aacute;l&oacute;zatunk t&ouml;bbi r&eacute;sze
	  (l&eacute;nyeg&eacute;ben az internet) &eacute;s a SLIP
	  klienseink k&ouml;z&ouml;tt nem az <quote>ARP proxy</quote>
	  m&oacute;dszerrel k&ouml;zvet&iacute;tj&uuml;k a csomagokat,
	  akkor a legk&ouml;zelebbi alap&eacute;rtelmezett
	  &aacute;tj&aacute;r&oacute;khoz minden bizonnyal fel kell
	  venn&uuml;nk statikus &uacute;tvonalakat, &iacute;gy a SLIP
	  kliensek alh&aacute;l&oacute;zatai a SLIP
	  szerver&uuml;nk&ouml;n kereszt&uuml;l ki tudnak jutni.</para>

	<sect4>
	  <title>Statikus &uacute;tvonalak</title>

	  <indexterm><primary>statikus &uacute;tvonalak</primary></indexterm>

	  <para>A legk&ouml;zelebbi alap&eacute;rtelmezett
	    &aacute;tj&aacute;r&oacute;k fel&eacute; nem minden esetben
	    k&ouml;nny&#251; felvenni statikus &uacute;tvonalakat (vagy
	    egyes esetekben pedig egyenesen lehetetlen, mivel nincsenek
	    meg hozz&aacute; a jogaink).  Ha az
	    int&eacute;zm&eacute;ny&uuml;nk&ouml;n bel&uuml;l t&ouml;bb
	    &aacute;tj&aacute;r&oacute; is megtal&aacute;lhat&oacute;,
	    akkor bizonyos &uacute;tv&aacute;laszt&oacute;k,
	    p&eacute;ld&aacute;ul a Cisco &eacute;s Proteon
	    gy&aacute;rtm&aacute;ny&uacute;ak eset&eacute;ben nem csak a
	    SLIP alh&aacute;l&oacute;zatok fel&eacute; kell
	    be&aacute;ll&iacute;tanunk statikus &uacute;tvonalakat,
	    hanem azt is meg kell mondanunk, hogy ezekr&#245;l milyen
	    m&aacute;s &uacute;tv&aacute;laszt&oacute;k is tudjanak.
	    Pontosan emiatt a statikus &uacute;tv&aacute;laszt&aacute;s
	    be&uuml;zemel&eacute;s&eacute;hez
	    sz&uuml;ks&eacute;g&uuml;nk lesz egy kis
	    ut&aacute;naj&aacute;r&aacute;sra &eacute;s
	    pr&oacute;b&aacute;lgat&aacute;sra.</para>
	</sect4>
      </sect3>
    </sect2>
  </sect1>
</chapter>

<!-- 
     Local Variables:
     mode: sgml
     sgml-declaration: "../chapter.decl"
     sgml-indent-data: t
     sgml-omittag: nil
     sgml-always-quote-attributes: t
     sgml-parent-document: ("../book.sgml" "part" "chapter")
     End:
-->
