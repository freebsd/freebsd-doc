<!--
     The FreeBSD Documentation Project
     $FreeBSD$
-->

<!-- The FreeBSD Hungarian Documentation Project
     Translated by: PALI, Gabor <pgj@FreeBSD.org>
     %SOURCE%	en_US.ISO8859-1/books/handbook/mac/chapter.sgml
     %SRCID%	1.75
-->

<chapter id="mac" lang="hu">
  <chapterinfo>
    <authorgroup>
      <author>
	<firstname>Tom</firstname>
	<surname>Rhodes</surname>
	<contrib>&Iacute;rta: </contrib>
      </author>
    </authorgroup>
  </chapterinfo>

  <title>K&ouml;telez&#245;
    hozz&aacute;f&eacute;r&eacute;s-vez&eacute;rl&eacute;s</title>

  <sect1 id="mac-synopsis">
    <title>&Aacute;ttekint&eacute;s</title>

    <indexterm><primary>MAC</primary></indexterm>
    <indexterm>
      <primary>k&ouml;telez&#245;
	hozz&aacute;f&eacute;r&eacute;s-vez&eacute;rl&eacute;s</primary>
      <see>MAC</see>
    </indexterm>

    <para>A &os;&nbsp;5.X v&aacute;ltozata &uacute;j biztons&aacute;gi
      b&#245;v&iacute;t&eacute;seket vett &aacute;t a TrustedBSD
      projektb&#245;l a &posix;.1e nyom&aacute;n.  A k&eacute;t
      legjelent&#245;sebb &uacute;j biztons&aacute;gi mechanizmus az
      &aacute;llom&aacute;nyrendszerekben megtal&aacute;lhat&oacute;
      hozz&aacute;f&eacute;r&eacute;s-vez&eacute;rl&eacute;si
      list&aacute;k (Access Control List, <acronym>ACL</acronym>)
      &eacute;s a k&ouml;telez&#245;
      hozz&aacute;f&eacute;r&eacute;s-vez&eacute;rl&eacute;s (Mandatory
      Access Control, <acronym>MAC</acronym>).  A k&ouml;telez&#245;
      hozz&aacute;f&eacute;r&eacute;s-vez&eacute;rl&eacute;s
      seg&iacute;ts&eacute;g&eacute;vel olyan &uacute;j
      hozz&aacute;f&eacute;r&eacute;s-vez&eacute;rl&eacute;si modulok
      t&ouml;lthet&#245;ek be, amelyek &uacute;j biztons&aacute;gi
      h&aacute;zirendeket implement&aacute;lnak.  N&eacute;melyek
      k&ouml;z&uuml;l&uuml;k v&eacute;delmet ny&uacute;jtanak a rendszer
      egy sz&#251;k r&eacute;sz&eacute;nek, amivel &iacute;gy egy adott
      szolg&aacute;ltat&aacute;st b&aacute;sty&aacute;znak al&aacute;.
      M&aacute;sok minden r&eacute;szletre kiterjed&#245;
      c&iacute;mk&eacute;zett biztons&aacute;got szolg&aacute;ltatnak
      alanyokon &eacute;s objektumokon kereszt&uuml;l.  A
      meghat&aacute;roz&aacute;s <quote>k&ouml;telez&#245;</quote>
      r&eacute;sze onnan fakad, hogy a szab&aacute;lyok
      betartat&aacute;s&aacute;t a rendszergazd&aacute;k &eacute;s a
      rendszer v&eacute;gzik, &eacute;s nem b&iacute;zz&aacute;k a
      felhaszn&aacute;l&oacute;kra, ahogy azt a System V
      t&iacute;pus&uacute; rendszerekben a szabv&aacute;nyos
      &aacute;llom&aacute;nyokra &eacute;s <acronym>IPC</acronym>-re
      &eacute;rv&eacute;nyes enged&eacute;lyeken kereszt&uuml;l a
      tetsz&eacute;s szerinti
      hozz&aacute;f&eacute;r&eacute;s-vez&eacute;rl&eacute;s
      (Discretionary Access Control, <acronym>DAC</acronym>)
      teszi.</para>

    <para>Ebben a fejezetben a k&ouml;telez&#245;
      hozz&aacute;f&eacute;r&eacute;s-vez&eacute;rl&eacute;st
      &ouml;vez&#245; keretrendszerre (<acronym>MAC</acronym> Framework)
      &eacute;s a k&uuml;l&ouml;nb&ouml;z&#245; biztons&aacute;gi
      h&aacute;zirendeket megval&oacute;s&iacute;t&oacute;,
      beilleszthet&#245; modulokra fogunk
      &ouml;sszpontos&iacute;tani.</para>

    <para>A fejezet elolvas&aacute;sa sor&aacute;n
      megismerj&uuml;k:</para>

    <itemizedlist>
      <listitem>
	<para>hogy a &os; jelen pillanatban milyen modulokat tartalmaz a
	  <acronym>MAC</acronym> rendszeren bel&uuml;l &eacute;s milyen
	  mechanizmusok tartoznak hozz&aacute;juk;</para>
      </listitem>

      <listitem>
	<para>hogy a <acronym>MAC</acronym> biztons&aacute;gi
	  h&aacute;zirendjeit k&eacute;pez&#245; modulok miket
	  val&oacute;s&iacute;tanak meg, valamint mi a
	  k&uuml;l&ouml;nbs&eacute;g a c&iacute;mk&eacute;zett &eacute;s
	  c&iacute;mk&eacute;zetlen h&aacute;zirendek
	  k&ouml;z&ouml;tt;</para>
      </listitem>

      <listitem>
	<para>hogyan kell hat&eacute;konyan be&aacute;ll&iacute;tani
	  &eacute;s haszn&aacute;lni rendszer&uuml;nkben a
	  <acronym>MAC</acronym> rendszert;</para>
      </listitem>

      <listitem>
	<para>hogyan &aacute;ll&iacute;tsuk be a <acronym>MAC</acronym>
	  rendszerben tal&aacute;lhat&oacute; k&uuml;l&ouml;nf&eacute;le
	  biztons&aacute;gi h&aacute;zirendeket k&eacute;pez&#245;
	  modulokat;</para>
      </listitem>

      <listitem>
	<para>hogyan hozzunk l&eacute;tre a <acronym>MAC</acronym>
	  rendszer seg&iacute;ts&eacute;g&eacute;vel egy
	  biztons&aacute;gosabb k&ouml;rnyezetet, amire
	  p&eacute;ld&aacute;kat is mutatunk;</para>
      </listitem>

      <listitem>
	<para>hogyan tesztelj&uuml;k le a <acronym>MAC</acronym>
	  rendszer be&aacute;ll&iacute;t&aacute;sait &eacute;s
	  bizonyosodjunk meg m&#251;k&ouml;d&eacute;s&eacute;nek
	  helyess&eacute;g&eacute;r&#245;l.</para>
      </listitem>
    </itemizedlist>

    <para>A fejezet elolvas&aacute;s&aacute;hoz aj&aacute;nlott:</para>

    <itemizedlist>
      <listitem>
	<para>a &unix; &eacute;s a &os; alapjainak ismerete (<xref
	  linkend="basics">)</para>
      </listitem>

      <listitem>
	<para>a rendszermag be&aacute;ll&iacute;t&aacute;s&aacute;nak
	  &eacute;s leford&iacute;t&aacute;s&aacute;nak ismerete (<xref
	  linkend="kernelconfig">)</para>
      </listitem>

      <listitem>
	<para>tiszt&aacute;ban lenni az alapvet&#245; biztons&aacute;gi
	  k&eacute;rd&eacute;sekkel &eacute;s azok
	  hat&aacute;s&aacute;val a &os;-n bel&uuml;l (<xref
	  linkend="security">)</para>
      </listitem>
    </itemizedlist>

    <warning>
      <para>Az itt ismertet&eacute;sre ker&uuml;l&#245;
	inform&aacute;ci&oacute;k helytelen alkalmaz&aacute;sa a
	rendszer hozz&aacute;f&eacute;rhet&#245;s&eacute;g&eacute;nek
	teljes elveszt&eacute;s&eacute;t, a felhaszn&aacute;l&oacute;k
	bosszant&aacute;s&aacute;t vagy az X11 &aacute;ltal
	felk&iacute;n&aacute;lt lehet&#245;s&eacute;gek
	kirekeszt&eacute;s&eacute;t eredm&eacute;nyezheti.  Ami viszont
	enn&eacute;l is fontosabb, hogy a <acronym>MAC</acronym>
	rendszerre nem &uacute;gy kell tekinteni, mint amit&#245;l a
	rendszer&uuml;nk t&ouml;k&eacute;letesen
	biztons&aacute;goss&aacute; v&aacute;lik.  A
	<acronym>MAC</acronym> seg&iacute;ts&eacute;g&eacute;vel
	csup&aacute;n a meglev&#245; biztons&aacute;gi
	h&aacute;zirendeket gyarap&iacute;tjuk.  A szil&aacute;rd
	biztons&aacute;gi rutin &eacute;s a rendszeres
	ellen&#245;rz&eacute;sek elv&eacute;gz&eacute;se
	n&eacute;lk&uuml;l a rendszer&uuml;nk val&oacute;j&aacute;ban
	sosem lesz teljesen biztons&aacute;gos.</para>

      <para>Hozz&aacute; kell tenn&uuml;nk, hogy a fejezetben bemutatott
	p&eacute;ld&aacute;k t&eacute;nyleg csak p&eacute;ld&aacute;k.
	Senkinek sem tan&aacute;csoljuk, hogy az itt eml&iacute;tett
	be&aacute;ll&iacute;t&aacute;sokat egy &eacute;les rendszerre is
	kiterjessze.  A k&uuml;l&ouml;nb&ouml;z&#245; biztons&aacute;gi
	modulok fel&eacute;p&iacute;t&eacute;se rengeteg
	gondolkod&aacute;st &eacute;s pr&oacute;b&aacute;lgat&aacute;st
	ig&eacute;nyel.  Aki nem &eacute;rti meg az eg&eacute;sz
	m&#251;k&ouml;d&eacute;s&eacute;t, k&ouml;nnyen azon kaphatja
	mag&aacute;t, hogy &uacute;jra v&eacute;gig kell mennie a
	rendszeren &eacute;s egyenk&eacute;nt be kell
	&aacute;ll&iacute;tania minden k&ouml;nyvt&aacute;rat &eacute;s
	&aacute;llom&aacute;nyt.</para>
    </warning>

    <sect2>
      <title>Amivel itt nem foglalkozunk</title>

      <para>Ebben a fejezetben a <acronym>MAC</acronym> rendszerrel
	kapcsolatban rengeteg biztons&aacute;gi k&eacute;rd&eacute;ssel
	foglalkozni fogunk.  Az &uacute;j <acronym>MAC</acronym>
	biztons&aacute;gi modulok kifejleszt&eacute;s&eacute;t azonban
	m&aacute;r nem &eacute;rintj&uuml;k.  Sz&aacute;mos olyan
	biztons&aacute;gi modul tal&aacute;lhat&oacute; a
	<acronym>MAC</acronym> rendszerben, amelyek rendelkeznek az
	&uacute;j modulok kialak&iacute;t&aacute;s&aacute;hoz &eacute;s
	tesztel&eacute;s&eacute;hez sz&uuml;ks&eacute;ges
	jellemz&#245;kkel.  Ilyenek t&ouml;bbek k&ouml;zt a
	&man.mac.test.4;, &man.mac.stub.4; &eacute;s a &man.mac.none.4;.
	Ezekr&#245;l a biztons&aacute;gi modulokr&oacute;l &eacute;s az
	&aacute;ltaluk szolg&aacute;ltatott mechnanizmusokr&oacute;l a
	man oldalaik tudnak b&#245;vebb
	t&aacute;j&eacute;koztat&aacute;st adni.</para>

    </sect2>
  </sect1>

  <sect1 id="mac-inline-glossary">
    <title>A fejezet fontosabb fogalmai</title>

    <para>A fejezet tartalm&aacute;nak kifejt&eacute;s&eacute;hez
      sz&uuml;ks&eacute;g&uuml;nk lesz n&eacute;h&aacute;ny fontosabb
      alapfogalom tiszt&aacute;z&aacute;s&aacute;ra.
      Seg&iacute;ts&eacute;g&uuml;kkel v&eacute;lhet&#245;en
      siker&uuml;l eloszlatni a t&eacute;ma feldolgoz&aacute;sa
      sor&aacute;n felmer&uuml;l&#245;
      f&eacute;lre&eacute;rt&eacute;seket, illetve elker&uuml;lni az
      &uacute;j fogalmak &eacute;s inform&aacute;ci&oacute;k
      v&aacute;ratlan felbukkan&aacute;s&aacute;t.</para>

    <itemizedlist>
       <listitem>
	<para><emphasis>alany</emphasis>: Alanynak tekint&uuml;nk a
	  rendszerben minden olyan akt&iacute;v egyedet, amely
	  inform&aacute;ci&oacute;t &aacute;ramoltat az
	  <emphasis>objektumok</emphasis>, teh&aacute;t a
	  felhaszn&aacute;l&oacute;k, a processzorok, a rendszerben
	  fut&oacute; programok stb.  k&ouml;z&ouml;tt.  A &os;-ben
	  majdnem minden esetben a felhaszn&aacute;l&oacute;k egy
	  sz&aacute;lon kereszt&uuml;l vez&eacute;rlik a fut&oacute;
	  programokat.</para>
      </listitem>

       <listitem>
	<para><emphasis>c&iacute;mke</emphasis>: A c&iacute;mke egy
	  olyan biztons&aacute;gi tulajdons&aacute;g, ami vonatkozhat
	  &aacute;llom&aacute;nyokra, k&ouml;nyvt&aacute;rakra vagy a
	  rendszer m&aacute;s elemeire.  Egy c&iacute;mke
	  tekinthet&#245; a bizalmass&aacute;got jelz&#245;
	  pecs&eacute;tnek is: ha egy &aacute;llom&aacute;nyra
	  c&iacute;mk&eacute;t tesz&uuml;nk, akkor benne megadjuk a
	  r&aacute; vonatkoz&oacute; biztons&aacute;gi jellemz&#245;ket,
	  &eacute;s csak a hozz&aacute; hasonl&oacute; biztons&aacute;gi
	  be&aacute;ll&iacute;t&aacute;sokkal rendelkez&#245;
	  &aacute;llom&aacute;nyok, felhaszn&aacute;l&oacute;k,
	  er&#245;forr&aacute;sok stb.  &eacute;rhetik el.  A
	  c&iacute;mk&eacute;k jelent&eacute;s&eacute;t &eacute;s
	  &eacute;rtelmez&eacute;s&eacute;t a h&aacute;zirendek
	  be&aacute;ll&iacute;t&aacute;sa hat&aacute;rozza meg:
	  m&iacute;g egyes h&aacute;zirendek a c&iacute;mk&eacute;ket
	  egy objektum s&eacute;rtetlens&eacute;g&eacute;nek vagy
	  titkoss&aacute;g&aacute;nak tekintik, addig m&aacute;sok a
	  hozz&aacute;f&eacute;r&eacute;ssel kapcsolatos
	  szab&aacute;lyokat r&ouml;gz&iacute;tik benn&uuml;k.</para>
      </listitem>

      <listitem>
	<para><emphasis>egyc&iacute;mk&eacute;s</emphasis>:
	  Egyc&iacute;mk&eacute;s esetr&#245;l akkor
	  besz&eacute;l&uuml;nk, amikor az adat
	  &aacute;raml&aacute;s&aacute;nak
	  szab&aacute;lyoz&aacute;s&aacute;ra az eg&eacute;sz
	  &aacute;llom&aacute;nyrendszer egyetlen c&iacute;mk&eacute;t
	  alkalmaz.  Ha ezt be&aacute;ll&iacute;tjuk egy
	  &aacute;llom&aacute;nyrendszern&eacute;l, de nem adjuk meg
	  vele egy&uuml;tt a <option>multilabel</option> opci&oacute;t,
	  akkor az &ouml;sszes &aacute;llom&aacute;nyra ugyanaz a
	  c&iacute;mke &eacute;rv&eacute;nyes.</para>
      </listitem>

     <listitem>
	<para><emphasis>er&#245;s v&iacute;zjel</emphasis>: Az er&#245;s
	  v&iacute;zjel h&aacute;zirendje szerint a biztons&aacute;gi
	  szint akkor n&ouml;velhet&#245;, ha magasabb szint&#251;
	  inform&aacute;ci&oacute;khoz akarunk hozz&aacute;jutni.  A
	  legt&ouml;bb esetben a folyamatok befejez&#245;d&eacute;se
	  ut&aacute;n vissza&aacute;ll&iacute;t&oacute;dik az eredeti
	  szint.  A &os; <acronym>MAC</acronym> rendszere pillanatnyilag
	  ehhez nem tartalmaz h&aacute;zirendet, de a teljess&eacute;g
	  kedv&eacute;&eacute;rt megadtuk ennek a
	  defin&iacute;ci&oacute;j&aacute;t is.</para>
      </listitem>

     <listitem>
	<para><emphasis>gyenge v&iacute;zjel</emphasis>: A gyenge
	  v&iacute;zjel h&aacute;zirendje szerint a biztons&aacute;gi
	  szint cs&ouml;kkenthet&#245; az alacsonyabb szint&#251;
	  inform&aacute;ci&oacute;k el&eacute;r&eacute;se
	  &eacute;rdek&eacute;ben.  A legt&ouml;bb esetben a folyamatok
	  befejez&#245;d&eacute;se ut&aacute;n
	  vissza&aacute;ll&iacute;t&oacute;dik az eredeti szint.  A
	  &os;-ben ezt a h&aacute;zirendet egyed&uuml;l a
	  &man.mac.lomac.4; alkalmazza.</para>
      </listitem>

      <listitem>
	<para><emphasis>h&aacute;zirend</emphasis>: Szab&aacute;lyok
	  olyan gy&#251;jtem&eacute;nye, amely megadja, hogy
	  mik&eacute;nt kell a c&eacute;lokat teljes&iacute;teni.  Egy
	  <emphasis>h&aacute;zirend</emphasis> &aacute;ltal&aacute;ban
	  az egyes elemek kezel&eacute;s&eacute;t r&ouml;gz&iacute;ti.
	  Ebben a fejezetben a <emphasis>h&aacute;zirend</emphasis>
	  kifejez&eacute;s alatt a <emphasis>biztons&aacute;gi
	  h&aacute;zirendet</emphasis> &eacute;rtj&uuml;k, teh&aacute;t
	  olyan szab&aacute;lyok gy&#251;jtem&eacute;ny&eacute;t,
	  amelyek az adatok &eacute;s az inform&aacute;ci&oacute;
	  &aacute;raml&aacute;s&aacute;t hat&aacute;rozz&aacute;k meg,
	  tov&aacute;bb&aacute; megadj&aacute;k, hogy
	  k&ouml;z&uuml;l&uuml;k ki mihez f&eacute;rhet
	  hozz&aacute;.</para>
      </listitem>

      <listitem>
	<para><emphasis>k&eacute;nyess&eacute;g</emphasis>:
	  &Aacute;ltal&aacute;ban az <acronym>MLS</acronym>
	  t&aacute;rgyal&aacute;sakor ker&uuml;l el&#245;.  Az
	  k&eacute;nyess&eacute;g szintj&eacute;vel az adatok
	  fontoss&aacute;g&aacute;t vagy titkoss&aacute;g&aacute;t
	  szokt&aacute;k jel&ouml;lni.  A k&eacute;nyess&eacute;gi szint
	  n&ouml;veked&eacute;s&eacute;vel n&ouml;vekszik az adat
	  titkoss&aacute;g&aacute;nak vagy bizalmass&aacute;g&aacute;nak
	  szintje.</para>
      </listitem>

    <listitem>
	<para><emphasis>objektum</emphasis>: Objektum vagy
	  rendszerobjektum minden olyan egyed, amelyen
	  inform&aacute;ci&oacute; folyik kereszt&uuml;l az
	  <emphasis>alanyok</emphasis>
	  ir&aacute;ny&iacute;t&aacute;s&aacute;val.  Ezek lehetnek
	  t&ouml;bbek k&ouml;zt k&ouml;nyvt&aacute;rak,
	  &aacute;llom&aacute;nyok, mez&#245;k, k&eacute;perny&#245;k,
	  billenty&#251;zetek, a mem&oacute;ria, m&aacute;gneses
	  t&aacute;rol&oacute;eszk&ouml;z&ouml;k, nyomtat&oacute;k vagy
	  b&aacute;rmilyen m&aacute;s
	  adatt&aacute;rol&oacute;/hordoz&oacute; eszk&ouml;z.  Az
	  objektumok alapvet&#245;en adatt&aacute;rol&oacute;k vagy a
	  rendszer er&#245;forr&aacute;sai.  Egy
	  <emphasis>objektum</emphasis> el&eacute;r&eacute;s&eacute;n
	  gyakorlatilag az adatok el&eacute;r&eacute;s&eacute;t
	  &eacute;rtj&uuml;k.</para>
      </listitem>

      <listitem>
	<para><emphasis>rekesz</emphasis>: Egy rekeszbe soroljuk az
	  elrekeszteni vagy elk&uuml;l&ouml;n&iacute;teni
	  k&iacute;v&aacute;nt programok &eacute;s adatok
	  &ouml;sszes&eacute;g&eacute;t, ahol a
	  felhaszn&aacute;l&oacute;k explicit m&oacute;don
	  k&eacute;pesek hozz&aacute;f&eacute;rni a rendszer bizonyos
	  komponenseihez.  Emellett a rekesz utalhat egy
	  tetsz&#245;leges csoportos&iacute;t&aacute;sra is,
	  p&eacute;ld&aacute;ul munkacsoportra, oszt&aacute;lyra,
	  projektre vagy t&eacute;m&aacute;ra.  A rekeszek
	  haszn&aacute;lata elengedhetetlen a biztons&aacute;gi
	  h&aacute;zirendek kialak&iacute;t&aacute;s&aacute;hoz.</para>
      </listitem>

      <listitem>
	<para><emphasis>s&eacute;rtetlens&eacute;g</emphasis>: A
	  s&eacute;rtetlens&eacute;g, mint kulcsfogalom, az adatok
	  megb&iacute;zhat&oacute;s&aacute;g&aacute;nak szintje.
	  Min&eacute;l s&eacute;rtetlenebb az adat, ann&aacute;l
	  ink&aacute;bb tekinthetj&uuml;k
	  megb&iacute;zhat&oacute;nak.</para>
      </listitem>

      <listitem>
	<para><emphasis>szint</emphasis>: Egy biztons&aacute;gi
	  tulajdons&aacute;g megn&ouml;velt vagy lecs&ouml;kkentett
	  be&aacute;ll&iacute;t&aacute;sa.  A szint
	  n&ouml;veked&eacute;s&eacute;vel egy&uuml;tt a
	  biztons&aacute;g m&eacute;rt&eacute;ke is
	  n&ouml;vekszik.</para>
      </listitem>

      <listitem>
	<para><emphasis>t&ouml;bbc&iacute;mk&eacute;s</emphasis>: A
	  <option>multilabel</option> vagyis
	  t&ouml;bbc&iacute;mk&eacute;s jellemz&#245; az
	  &aacute;llom&aacute;nyrendszerek eset&eacute;n fordulhat
	  el&#245;, &eacute;s a &man.tunefs.8; seg&eacute;dprogrammal
	  &aacute;ll&iacute;that&oacute; be
	  egyfelhaszn&aacute;l&oacute;s m&oacute;dban vagy a rendszer
	  ind&iacute;t&aacute;sa sor&aacute;n az &man.fstab.5;
	  &aacute;llom&aacute;nyon kereszt&uuml;l, esetleg egy &uacute;j
	  &aacute;llom&aacute;nyrendszer l&eacute;trehoz&aacute;sakor.
	  Ezzel a be&aacute;ll&iacute;t&aacute;ssal a rendszergazda
	  k&uuml;l&ouml;nf&eacute;le <acronym>MAC</acronym>
	  c&iacute;mk&eacute;ket rendelhet k&uuml;l&ouml;nb&ouml;z&#245;
	  objektumokhoz.  Ez a be&aacute;ll&iacute;t&aacute;s
	  term&eacute;szetesen csak olyan biztons&aacute;gi modulok
	  eset&eacute;n &eacute;l, amelyek tudnak
	  c&iacute;mk&eacute;zni.</para>
      </listitem>

   </itemizedlist>
  </sect1>

  <sect1 id="mac-initial">
    <title>A MAC ismertet&eacute;se</title>

    <para>Az im&eacute;nt defini&aacute;lt &uacute;j fogalmak
      t&uuml;kr&eacute;ben most n&eacute;zz&uuml;k meg, hogy a
      <acronym>MAC</acronym> rendszer alkalmaz&aacute;s&aacute;val
      mik&eacute;nt jav&iacute;thatunk rendszer&uuml;nk
      biztons&aacute;g&aacute;n.  A <acronym>MAC</acronym> rendszerhez
      k&eacute;sz&iacute;tett k&uuml;l&ouml;nb&ouml;z&#245;
      biztons&aacute;gi modulok alkalmasak a h&aacute;l&oacute;zat
      &eacute;s az &aacute;llom&aacute;nyrendszerek
      v&eacute;delm&eacute;re, valamint seg&iacute;ts&eacute;g&uuml;kkel
      megakad&aacute;lyozhatjuk, hogy a felhaszn&aacute;l&oacute;k
      el&eacute;rhessenek bizonyos portokat &eacute;s socketeket stb.  A
      h&aacute;zirendeket form&aacute;z&oacute; modulokat tal&aacute;n
      egy&uuml;ttesen tudjuk a leghat&eacute;konyabban alkalmazni,
      &eacute;s ha egyszerre t&ouml;bb modul
      bet&ouml;lt&eacute;s&eacute;vel egy t&ouml;bbr&eacute;teg&#251;
      v&eacute;delmi rendszert alak&iacute;tunk ki.  Ez nem ugyanaz,
      mint a rendszer meger&#245;s&iacute;t&eacute;se, ahol a rendszer
      &ouml;sszetev&#245;it jellemz&#245; m&oacute;don csak bizonyos
      c&eacute;lok tekintet&eacute;ben edzz&uuml;k meg.  A
      m&oacute;dszer egyed&uuml;li h&aacute;tul&uuml;t&#245;i a
      t&ouml;bbsz&ouml;r&ouml;s &aacute;llom&aacute;nyrendszeri
      c&iacute;mk&eacute;kkel, a felhaszn&aacute;l&oacute;nk&eacute;nt
      be&aacute;ll&iacute;tand&oacute; h&aacute;l&oacute;zati
      el&eacute;r&eacute;ssel stb.  j&aacute;r&oacute;
      adminisztr&aacute;ci&oacute;s k&ouml;lts&eacute;gek.</para>

    <para>Ezek a h&aacute;tr&aacute;nyok azonban elt&ouml;rp&uuml;lnek a
      l&eacute;trehozott rendszer tart&oacute;ss&aacute;g&aacute;val
      szemben.  P&eacute;ld&aacute;ul, ha k&eacute;pesek vagyunk
      megmondani, hogy az adott konfigur&aacute;ci&oacute;ban milyen
      h&aacute;zirendek alkalmaz&aacute;s&aacute;ra van
      sz&uuml;ks&eacute;g, akkor ezzel az adminisztr&aacute;ci&oacute;s
      k&ouml;lts&eacute;gek visszaszor&iacute;that&oacute;ak.  A
      sz&uuml;ks&eacute;gtelen h&aacute;zirendek
      elt&aacute;vol&iacute;t&aacute;s&aacute;val m&eacute;g
      n&ouml;velhetj&uuml;k is a rendszer
      &ouml;sszteljes&iacute;tm&eacute;ny&eacute;t, valamint az
      &iacute;gy felk&iacute;n&aacute;lt rugalmass&aacute;got.  Egy
      j&oacute; kialak&iacute;t&aacute;sban figyelembe kell venni az
      &ouml;sszes biztons&aacute;gi el&#245;&iacute;r&aacute;st,
      &eacute;s hat&eacute;konyan megval&oacute;s&iacute;tani ezeket a
      rendszer &aacute;ltal felaj&aacute;nlott
      k&uuml;l&ouml;nf&eacute;le biztons&aacute;gi modulokkal.</para>

    <para>Ez&eacute;rt teh&aacute;t a <acronym>MAC</acronym>
      lehet&#245;s&eacute;geit kihaszn&aacute;l&oacute; rendszerekben
      legal&aacute;bb annyit meg kell tudni oldani, hogy a
      felhaszn&aacute;l&oacute;k ne v&aacute;ltoztathass&aacute;k
      kedv&uuml;kre a biztons&aacute;gi tulajdons&aacute;gokat.  Az
      &ouml;sszes felhaszn&aacute;l&oacute;i seg&eacute;dprogramnak,
      programnak &eacute;s szkriptnek a kiv&aacute;lasztott
      biztons&aacute;gi modulokban szerepl&#245;
      hozz&aacute;f&eacute;r&eacute;si szab&aacute;lyokkal
      kifesz&iacute;tett kereten bel&uuml;l kell mozognia.  A
      <acronym>MAC</acronym> tot&aacute;lis
      ir&aacute;ny&iacute;t&aacute;sa pedig a rendszergazda
      kez&eacute;ben van.</para>

    <para>A rendszergazda &iacute;gy egyed&uuml;l csak a megfelel&#245;
      biztons&aacute;gi modulok gondos
      &ouml;sszev&aacute;logat&aacute;s&aacute;&eacute;rt felel&#245;s.
      Bizonyos k&ouml;rnyezetekben sz&uuml;ks&eacute;ges lehet a
      h&aacute;l&oacute;zaton kereszt&uuml;li
      hozz&aacute;f&eacute;r&eacute;sek korl&aacute;toz&aacute;sa is.
      Ilyen esetekben a &man.mac.portacl.4;, &man.mac.ifoff.4; vagy a
      &man.mac.biba.4; modulokt&oacute;l &eacute;rdemes elindulnunk.
      M&aacute;s esetekben az &aacute;llom&aacute;nyrendszerek
      objektumainak bizalmass&aacute;g&aacute;t kell csup&aacute;n
      meg&#245;rizn&uuml;nk.  Erre a c&eacute;lra a
      &man.mac.bsdextended.4; &eacute;s &man.mac.mls.4; modulok a
      legalkalmasabbak.</para>

    <para>A h&aacute;zirendekhez kapcsol&oacute;d&oacute;
      d&ouml;nt&eacute;sek a h&aacute;l&oacute;zati
      be&aacute;ll&iacute;t&aacute;sok alapj&aacute;n is
      meghozhat&oacute;ak.  Elk&eacute;pzelhet&#245;, hogy csak bizonyos
      felhaszn&aacute;l&oacute;k f&eacute;rhetnek hozz&aacute; az
      &man.ssh.1; szolg&aacute;ltat&aacute;sain kereszt&uuml;l a
      h&aacute;l&oacute;zathoz vagy az internethez.  A
      &man.mac.portacl.4; pontosan ilyen helyzetekben tud a
      seg&iacute;ts&eacute;g&uuml;nkre sietni.  Mit tegy&uuml;nk viszont
      az &aacute;llom&aacute;nyrendszerek eset&eacute;n?  V&aacute;gjunk
      el adott felhaszn&aacute;l&oacute;kat vagy csoportokat bizonyos
      k&ouml;nyvt&aacute;rakt&oacute;l?  Vagy korl&aacute;tozzuk a
      felhaszn&aacute;l&oacute;k vagy seg&eacute;dprogramok
      hozz&aacute;f&eacute;r&eacute;s&eacute;t adott
      &aacute;llom&aacute;nyokhoz bizonyos objektumok bizalmass&aacute;
      t&eacute;tel&eacute;vel?</para>

    <para>Az &aacute;llom&aacute;nyrendszerek eset&eacute;ben az
      objektumokat n&eacute;h&aacute;ny felhaszn&aacute;l&oacute;
      el&eacute;rheti, m&aacute;sok pedig nem.  P&eacute;ld&aacute;ul
      egy nagyobb fejleszt&#245;csapat kisebb csoportokra
      bonthat&oacute;.  Az A projektben r&eacute;sztvev&#245;
      fejleszt&#245;k nem f&eacute;rhetnek hozz&aacute; a B projektben
      dolgoz&oacute; fejleszt&#245;k munk&aacute;j&aacute;hoz.  Ellenben
      sz&uuml;ks&eacute;g&uuml;k lehet a C projekten
      munk&aacute;lkod&oacute; fejleszt&#245;k &aacute;ltal
      l&eacute;trehozott objektumokra.  Ez egy igen &eacute;rdekes
      helyzet.  A <acronym>MAC</acronym> rendszer &aacute;ltal
      felk&iacute;n&aacute;lt k&uuml;l&ouml;nb&ouml;z&#245;
      biztons&aacute;gi modulokra &eacute;p&iacute;tkezve azonban
      k&ouml;nnyed&eacute;n csoportokba tudjuk szervezni a
      felhaszn&aacute;l&oacute;kat, &eacute;s a megfelel&#245;
      ter&uuml;letekhez az inform&aacute;ci&oacute;
      kisziv&aacute;rg&aacute;sa n&eacute;lk&uuml;l hozz&aacute; tudjuk
      &#245;ket engedni.</para>

    <para>Ennek k&ouml;vetkezt&eacute;ben minden egyes biztons&aacute;gi
      modul a maga m&oacute;dj&aacute;n gondoskodik az eg&eacute;sz
      rendszer biztons&aacute;g&aacute;r&oacute;l.  A c&eacute;ljainknak
      megfelel&#245; modulokat egy j&oacute;l &aacute;tgondolt
      biztons&aacute;gi h&aacute;zirend alapj&aacute;n v&aacute;lasszuk
      ki.  Sok esetben az eg&eacute;sz h&aacute;zirendet &aacute;t kell
      tekinteni &eacute;s &uacute;jra kell alkalmazni a rendszerben.  A
      <acronym>MAC</acronym> &aacute;ltal felaj&aacute;nlott
      k&uuml;l&ouml;nb&ouml;z&#245; biztons&aacute;gi modulok
      meg&eacute;rt&eacute;se seg&iacute;t a rendszergazd&aacute;knak
      megv&aacute;lasztani az adott helyzetben legjobban
      alkalmazhat&oacute; h&aacute;zirendeket.</para>

    <para>A &os; rendszermagja alapb&oacute;l nem tartalmazza a
      <acronym>MAC</acronym> rendszert.  Ez&eacute;rt a fejezetben
      szerepl&#245; p&eacute;ld&aacute;k vagy az itt le&iacute;rtak
      kipr&oacute;b&aacute;l&aacute;s&aacute;hoz az al&aacute;bbi
      be&aacute;ll&iacute;t&aacute;st kell hozz&aacute;tenn&uuml;nk a
      rendszermag be&aacute;ll&iacute;t&aacute;sait tartalmaz&oacute;
      &aacute;llom&aacute;nyhoz:</para>

    <programlisting>options	MAC</programlisting>

    <para>Majd ford&iacute;tsuk &eacute;s telep&iacute;ts&uuml;k
      &uacute;jra a rendszermagot.</para>

    <caution>
      <para>Mik&ouml;zben a <acronym>MAC</acronym> rendszerhez
	k&eacute;sz&uuml;lt k&uuml;l&ouml;nb&ouml;z&#245; modulok a
	saj&aacute;t man oldalaik szerint ig&eacute;nylik a
	be&eacute;p&iacute;t&eacute;s&uuml;ket, vigy&aacute;zzunk
	vel&uuml;k, mert ezzel a rendszer&uuml;ket pillanatok alatt ki
	tudjuk z&aacute;rni a h&aacute;l&oacute;zatb&oacute;l &eacute;s
	&iacute;gy tov&aacute;bb.  A <acronym>MAC</acronym> alap&uacute;
	v&eacute;delem fel&eacute;p&iacute;t&eacute;se legink&aacute;bb
	egy t&#251;zfal
	&ouml;ssze&aacute;ll&iacute;t&aacute;s&aacute;hoz
	hasonl&iacute;that&oacute;, ahol ugyan&iacute;gy sz&aacute;molni
	kell azzal, hogy egy &oacute;vatlan paranccsal
	kiz&aacute;rhatjuk magunkat a rendszerb&#245;l.  Valamilyen
	m&oacute;don mindig pr&oacute;b&aacute;ljunk gondoskodni a
	rendszer el&#245;z&#245; &aacute;llapot&aacute;nak
	vissza&aacute;ll&iacute;that&oacute;s&aacute;g&aacute;r&oacute;l,
	&eacute;s a <acronym>MAC</acronym> t&aacute;voli
	adminisztr&aacute;ci&oacute;j&aacute;t mindig nagyfok&uacute;
	k&ouml;r&uuml;ltekint&eacute;ssel v&eacute;gezz&uuml;k.</para>
    </caution>

  </sect1>

  <sect1 id="mac-understandlabel">
    <title>B&#245;vebben a MAC c&iacute;mk&eacute;ir&#245;l</title>

    <para>A <acronym>MAC</acronym>-c&iacute;mke egy olyan
      biztons&aacute;gi tulajdons&aacute;g, amelyet a rendszerben
      tal&aacute;lhat&oacute; alanyokhoz &eacute;s objektumokhoz
      rendelhet&uuml;nk.</para>

    <para>Egy c&iacute;mke be&aacute;ll&iacute;t&aacute;s&aacute;hoz a
      felhaszn&aacute;l&oacute;nak pontosan ismernie kell, hogy ilyenkor
      mi t&ouml;rt&eacute;nik.  Az objektumokhoz tartoz&oacute;
      tulajdons&aacute;gok a bet&ouml;lt&ouml;tt modulokt&oacute;l
      f&uuml;ggenek, &eacute;s az egyes modulok elt&eacute;r&#245;
      m&oacute;don &eacute;rtelmezik ezeket a tulajdons&aacute;gokat.
      Ha a prec&iacute;z meg&eacute;rt&eacute;s&uuml;k
      hi&aacute;ny&aacute;ban helytelen&uuml;l &aacute;ll&iacute;tjuk be
      ezeket, vagy nem vagyunk k&eacute;pesek tiszt&aacute;zni a
      vel&uuml;k j&aacute;r&oacute; k&ouml;vetkezm&eacute;nyeket, akkor
      az a rendszer&uuml;nk kisz&aacute;m&iacute;thatatlan &eacute;s
      val&oacute;sz&iacute;n&#251;leg kedvez&#245;tlen
      viselked&eacute;s&eacute;t eredm&eacute;nyezi.</para>

    <para>A h&aacute;zirendek az objektumhoz rendelt biztons&aacute;gi
      c&iacute;mk&eacute;ket a hozz&aacute;f&eacute;r&eacute;ssel
      kapcsolatos d&ouml;nt&eacute;sek meghoz&aacute;s&aacute;ban
      haszn&aacute;lj&aacute;k fel.  Bizonyos h&aacute;zirendek
      eset&eacute;ben m&aacute;r maga a c&iacute;mke elegend&#245;
      inform&aacute;ci&oacute;t tartalmaz a d&ouml;nt&eacute;s
      megform&aacute;l&aacute;s&aacute;hoz.  M&aacute;shol viszont a
      c&iacute;mk&eacute;k egy nagyobb szab&aacute;lyrendszer
      r&eacute;szek&eacute;nt dolgoz&oacute;dnak fel stb.</para>

    <para>P&eacute;ld&aacute;ul, ha egy &aacute;llom&aacute;nyra
      be&aacute;ll&iacute;tjuk a <literal>biba/low</literal>
      c&iacute;mk&eacute;t, akkor az arra fog utalni, hogy a
      c&iacute;mk&eacute;t a Biba nev&#251; biztons&aacute;gi modul
      kezeli &eacute;s &eacute;rt&eacute;ke <quote>low</quote>.</para>

    <para>Az a n&eacute;h&aacute;ny modul, amely a &os;-ben
      t&aacute;mogatja a c&iacute;mk&eacute;z&eacute;s
      lehet&#245;s&eacute;g&eacute;t, h&aacute;rom speci&aacute;lis
      c&iacute;mk&eacute;t defini&aacute;l el&#245;re.  Ezek rendre a
      <quote>low</quote> (alacsony), <quote>high</quote> (magas)
      &eacute;s <quote>equal</quote> (egyez&#245;) c&iacute;mk&eacute;k.
      Hab&aacute;r az egyes modulok eset&eacute;n elt&eacute;r&#245;
      m&oacute;don k&eacute;pesek vez&eacute;relni a
      hozz&aacute;f&eacute;r&eacute;st, azt mindig biztosra
      vehetj&uuml;k, hogy a <quote>low</quote> a legalacsonyabb
      &eacute;rt&eacute;k, az <quote>equal</quote> c&iacute;mke
      hat&aacute;s&aacute;ra az adott alanyt vagy objektumot
      &eacute;rintetlen&uuml;l hagyj&aacute;k, &eacute;s a
      <quote>high</quote> &eacute;rt&eacute;k&#251; c&iacute;mke a Biba
      &eacute;s <acronym>MLS</acronym> modulok eset&eacute;ben a
      legmagasabb be&aacute;ll&iacute;t&aacute;st jelenti.</para>

    <para>Az egyc&iacute;mk&eacute;s &aacute;llom&aacute;nyrendszerek
      haszn&aacute;lata sor&aacute;n az egyes objektumonkhoz csak
      egyetlen c&iacute;mk&eacute;t rendelhet&uuml;nk hozz&aacute;.
      Ezzel az eg&eacute;sz rendszerben csak egyfajta enged&eacute;lyt
      alkalmazunk, ami sok esetben pontosan elegend&#245;.
      L&eacute;tezik n&eacute;h&aacute;ny k&uuml;l&ouml;nleges eset,
      amikor az &aacute;llom&aacute;nyrendszerben lev&#245; alanyokhoz
      vagy objektumokhoz egyszerre t&ouml;bb c&iacute;mk&eacute;t is
      hozz&aacute; kell rendeln&uuml;nk.  Ilyenkor a
      <option>multilabel</option> opci&oacute;t kell &aacute;tadnunk a
      &man.tunefs.8; seg&eacute;dprogramnak.</para>

    <para>A Biba &eacute;s az <acronym>MLS</acronym> eset&eacute;ben
      el&#245;fordulhat, hogy egy numerikus c&iacute;mk&eacute;vel
      fogjuk jel&ouml;lni a hierarchikus ir&aacute;ny&iacute;t&aacute;s
      pontos szintj&eacute;t.  A numerikus szintek
      haszn&aacute;lat&aacute;val tudjuk az inform&aacute;ci&oacute;t
      k&uuml;l&ouml;nb&ouml;z&#245; csoportokba sz&eacute;tosztani vagy
      elrendezni, p&eacute;ld&aacute;ul &uacute;gy, hogy csak az adott
      szint&#251; vagy a felette &aacute;ll&oacute; csoportok
      sz&aacute;m&aacute;ra enged&eacute;lyezz&uuml;k a
      hozz&aacute;f&eacute;r&eacute;st.</para>

    <para>Az esetek t&ouml;bbs&eacute;g&eacute;ben a
      rendszergazd&aacute;nak csak egyetlen c&iacute;mk&eacute;t kell
      be&aacute;ll&iacute;tania az eg&eacute;sz
      &aacute;llom&aacute;nyrendszerre.</para>

    <para><emphasis>H&eacute;, &aacute;lljunk csak meg!  Akkor ez
      viszont pont olyan, mint a <acronym>DAC</acronym>!  &Eacute;n azt
      hittem, hogy a <acronym>MAC</acronym> szigor&uacute;an a
      rendszergazda kez&eacute;be adja az
      ir&aacute;ny&iacute;t&aacute;st.</emphasis> Ez az
      &aacute;ll&iacute;t&aacute;s tov&aacute;bbra is fenn&aacute;ll,
      mivel bizonyos &eacute;rtelemben a <username>root</username> lesz
      az, aki be&aacute;ll&iacute;tja a h&aacute;zirendeket,
      teh&aacute;t &#245; mondja meg, hogy a felhaszn&aacute;l&oacute;k
      milyen kateg&oacute;ri&aacute;kba vagy
      hozz&aacute;f&eacute;r&eacute;si szintekbe sorol&oacute;dnak.
      Sajnos, sok biztons&aacute;gi modul m&eacute;g mag&aacute;t a
      <username>root</username> felhaszn&aacute;l&oacute;t is
      korl&aacute;tozza.  Az objektumok feletti
      ir&aacute;ny&iacute;t&aacute;s ilyenkor a csoportra sz&aacute;ll,
      de a <username>root</username> b&aacute;rmikor visszavonhatja vagy
      m&oacute;dos&iacute;thatja a be&aacute;ll&iacute;t&aacute;sokat.
      Ezzel a hierarchikus/enged&eacute;ly alap&uacute; modellel a Biba
      &eacute;s az <acronym>MLS</acronym> nev&#251; h&aacute;zirendek
      foglalkoznak.</para>

    <sect2>
      <title>A c&iacute;mk&eacute;k
	be&aacute;ll&iacute;t&aacute;sa</title>

      <para>A c&iacute;mk&eacute;z&eacute;shez kapcsol&oacute;d&oacute;
	&ouml;sszes be&aacute;ll&iacute;t&aacute;st gyakorlatilag az
	alapvet&#245; rendszerprogramokkal v&eacute;gezhetj&uuml;k el.
	Ezek a parancsok az objektumok &eacute;s az alanyok
	szab&aacute;lyoz&aacute;s&aacute;hoz, valamint a
	konfigur&aacute;ci&oacute;
	m&oacute;dos&iacute;t&aacute;s&aacute;hoz &eacute;s
	ellen&#245;rz&eacute;s&eacute;hez adnak egy egyszer&#251;
	kezel&#245;fel&uuml;letet.</para>

      <para>Az &ouml;sszes konfigur&aacute;ci&oacute;s
	be&aacute;ll&iacute;t&aacute;st a &man.setfmac.8; &eacute;s
	&man.setpmac.8; seg&eacute;dprogramokkal v&eacute;gezhetj&uuml;k
	el.  A <command>setfmac</command>
	seg&iacute;ts&eacute;g&eacute;vel a rendszerszint&#251;
	objektumokhoz tudunk hozz&aacute;rendelni a
	<acronym>MAC</acronym>-c&iacute;mk&eacute;ket, m&iacute;g a
	<command>setpmac</command> paranccsal a rendszerben lev&#245;
	alanyokhoz tudunk c&iacute;mk&eacute;ket rendelni.  Vegy&uuml;k
	p&eacute;ld&aacute;ul ezt:</para>

      <screen>&prompt.root; <userinput>setfmac biba/high <replaceable>pr&oacute;ba</replaceable></userinput></screen>

      <para>Amennyiben az im&eacute;nti parancs hib&aacute;tlanul
	lefutott, visszakapjuk a paranccsort.  Ezek a parancsok csak
	olyankor maradnak nyugodtan, amikor semmilyen hiba nem
	t&ouml;rt&eacute;nt.  M&#251;k&ouml;d&eacute;s&uuml;k
	hasonl&oacute; a &man.chmod.1; &eacute;s &man.chown.8;
	parancsok&eacute;hoz.  Bizonyos esetekben <errorname>Permission
	denied</errorname> (<errorname>A hozz&aacute;f&eacute;r&eacute;s
	nem enged&eacute;lyezett</errorname>) hib&aacute;t kapunk, ami
	&aacute;ltal&aacute;ban akkor bukkan fel, ha egy
	korl&aacute;tozott objektummal kapcsolatban
	pr&oacute;b&aacute;lunk meg c&iacute;mk&eacute;t
	be&aacute;ll&iacute;tani vagy m&oacute;dos&iacute;tani
	<footnote>
	  <para>M&aacute;s felt&eacute;telek mellett m&aacute;smilyen
	    hib&aacute;k keletkezhetnek.  P&eacute;ld&aacute;ul, ha egy
	    olyan objektumot pr&oacute;b&aacute;lunk
	    &uacute;jrac&iacute;mk&eacute;zni, amely nincs a
	    felhaszn&aacute;l&oacute; birtok&aacute;ban, esetleg nem is
	    l&eacute;tezik vagy &iacute;r&aacute;sv&eacute;dett.
	    Ad&oacute;dhat, hogy a k&ouml;telez&#245; h&aacute;zirend az
	    &aacute;llom&aacute;ny, a program, vagy az &uacute;j
	    c&iacute;mke&eacute;rt&eacute;k tulajdons&aacute;gai miatt
	    nem fogja lehet&#245;v&eacute; tenni egy fut&oacute; program
	    sz&aacute;m&aacute;ra egy &aacute;llom&aacute;ny
	    &uacute;jrac&iacute;mk&eacute;z&eacute;s&eacute;t.
	    N&eacute;zz&uuml;k erre egy p&eacute;ld&aacute;t: egy
	    kev&eacute;sb&eacute; s&eacute;rtetlen
	    felhaszn&aacute;l&oacute; megpr&oacute;b&aacute;lja
	    megv&aacute;ltoztatni egy sokkal s&eacute;rtetlenebb
	    &aacute;llom&aacute;ny c&iacute;mk&eacute;j&eacute;t.  Vagy
	    egy kev&eacute;sb&eacute; s&eacute;rtetlen
	    felhaszn&aacute;l&oacute; sokkal s&eacute;rtetlenebbre
	    akarja &aacute;ll&iacute;tani egy kev&eacute;sb&eacute;
	    s&eacute;rtetlen &aacute;llom&aacute;ny
	    c&iacute;mk&eacute;j&eacute;t.</para>
	</footnote>.  A rendszergazda a k&ouml;vetkez&#245; paranccsal
	tudja feloldani az ilyen helyzeteket:</para>

      <screen>&prompt.root; <userinput>setfmac biba/high <replaceable>pr&oacute;ba</replaceable></userinput>
<errorname>Permission denied</errorname>
&prompt.root; <userinput>setpmac biba/low setfmac biba/high <replaceable>pr&oacute;ba</replaceable></userinput>
&prompt.root; <userinput>getfmac <replaceable>pr&oacute;ba</replaceable></userinput>
<replaceable>pr&oacute;ba</replaceable>: biba/high</screen>

      <para>Ahogy az itt tetten is &eacute;rhet&#245;, a
	<command>setpmac</command> haszn&aacute;lhat&oacute; a modul
	be&aacute;ll&iacute;t&aacute;sainak
	fel&uuml;lb&iacute;r&aacute;l&aacute;s&aacute;ra &uacute;gy,
	hogy a megh&iacute;vott programban egy m&aacute;sik
	c&iacute;mk&eacute;t &aacute;ll&iacute;t be.  A
	<command>getpmac</command> seg&eacute;dprogram
	&aacute;ltal&aacute;ban a <application>sendmail</application>hez
	hasonl&oacute; h&aacute;tt&eacute;rben fut&oacute; programok
	eset&eacute;ben alkalmazhat&oacute;: ilyenkor a konkr&eacute;t
	parancs helyett a fut&oacute; program
	azonos&iacute;t&oacute;j&aacute;t kell megadnunk, de
	m&#251;k&ouml;d&eacute;se ugyanaz.  Ha a
	felhaszn&aacute;l&oacute;k a hat&oacute;k&ouml;r&uuml;k&ouml;n
	t&uacute;l lev&#245; &aacute;llom&aacute;nyokat
	pr&oacute;b&aacute;lnak meg m&oacute;dos&iacute;tani, akkor a
	bet&ouml;lt&ouml;tt modulok szab&aacute;lyainak megfelel&#245;en
	a <function>mac_set_link</function> f&uuml;ggv&eacute;ny
	<errorname>Operation not permitted</errorname> (<errorname>A
	m&#251;velet nem enged&eacute;lyezett</errorname>) hib&aacute;t
	fog adni.</para>

      <sect3>
	<title>Gyakori c&iacute;mket&iacute;pusok</title>

	<para>A &man.mac.biba.4;, &man.mac.mls.4; &eacute;s
	  &man.mac.lomac.4; modulokn&aacute;l haszn&aacute;lhatunk
	  c&iacute;mk&eacute;ket.  &Eacute;rt&eacute;k&uuml;k lehet
	  <quote>high</quote>, <quote>equal</quote> vagy
	  <quote>low</quote>, melyek r&ouml;vid magyar&aacute;zata a
	  k&ouml;vetkez&#245;:</para>

	<itemizedlist>
	  <listitem>
	    <para>A <literal>low</literal> c&iacute;mke az objektumra
	      vagy alanyra &eacute;rv&eacute;nyes leggyeng&eacute;bb
	      be&aacute;ll&iacute;t&aacute;st jelenti.  Az ilyen
	      c&iacute;mk&eacute;j&#251; objektumok vagy alanyok nem
	      &eacute;rhetik el a <quote>high</quote>
	      c&iacute;mk&eacute;j&#251;eket.</para>
	  </listitem>

	  <listitem>
	    <para>Az <literal>equal</literal> c&iacute;mke
	      haszn&aacute;lhat&oacute; minden olyan objektum vagy alany
	      eset&eacute;ben, amelyeket ki akarunk vonni az adott
	      h&aacute;zirend hat&aacute;lya al&oacute;l.</para>
	  </listitem>

	  <listitem>
	    <para>A <literal>high</literal> c&iacute;mke adja az
	      objektumhoz vagy alanyhoz tartoz&oacute; leger&#245;sebb
	      be&aacute;ll&iacute;t&aacute;st.</para>
	  </listitem>
	</itemizedlist>

	<para>Az egyes modulokt&oacute;l f&uuml;gg&#245;en ezek az
	  &eacute;rt&eacute;kek az inform&aacute;ci&oacute;
	  &aacute;ramoltat&aacute;s&aacute;nak
	  k&uuml;l&ouml;nb&ouml;z&#245; ir&aacute;nyait
	  &iacute;rhatj&aacute;k le.  A megfelel&#245; man oldalak
	  elolvas&aacute;s&aacute;val m&eacute;g jobban
	  megismerhetj&uuml;k az egyes c&iacute;mket&iacute;pusok
	  be&aacute;ll&iacute;t&aacute;s&aacute;nak
	  jellegzetess&eacute;geit.</para>

	<sect4>
	  <title>A c&iacute;mk&eacute;k
	    be&aacute;ll&iacute;t&aacute;s&aacute;r&oacute;l
	    r&eacute;szletesebben</title>

	  <para>A numerikus oszt&aacute;lyoz&oacute;
	    c&iacute;mk&eacute;k
	    <literal><replaceable>&ouml;sszehasonl&iacute;t&aacute;s</replaceable>:<replaceable>rekesz</replaceable>+<replaceable>rekesz</replaceable></literal>
	    alakban haszn&aacute;latosak, teh&aacute;t a</para>

	  <programlisting>biba/10:2+3+6(5:2+3-20:2+3+4+5+6)</programlisting>

	  <para>kifejez&eacute;s &iacute;gy
	    &eacute;rtelmezhet&#245;:</para>

	  <para><quote>A Biba h&aacute;zirend
	    c&iacute;mk&eacute;je</quote>/<quote>10
	    oszt&aacute;ly</quote> :<quote>2, 3 &eacute;s 6
	    rekeszek</quote>: (<quote>5
	    oszt&aacute;ly...</quote>)</para>

	  <para>Ebben a p&eacute;ld&aacute;ban az els&#245;
	    oszt&aacute;ly tekinthet&#245; <quote>val&oacute;di
	    oszt&aacute;lynak</quote>, amely a <quote>val&oacute;di
	    rekeszeket</quote> jelenti, a m&aacute;sodik oszt&aacute;ly
	    egy alacsonyabb besorol&aacute;s, m&iacute;g az
	    utols&oacute; egy magasabb szint&#251;.  A legt&ouml;bb
	    konfigur&aacute;ci&oacute;ban nem lesz
	    sz&uuml;ks&eacute;g&uuml;nk ennyire &ouml;sszetett
	    be&aacute;ll&iacute;t&aacute;sokra, noha k&eacute;pesek
	    vagyunk fel&iacute;rni ezeket.</para>

	  <para>Ha ezt kivet&iacute;tj&uuml;k a rendszer objektumaira,
	    akkor a rendszerben lev&#245; alanyokat illet&#245;en
	    csup&aacute;n az aktu&aacute;lis oszt&aacute;ly/rekeszek
	    sz&aacute;m&iacute;tanak, mivel a rendszerben &eacute;s
	    h&aacute;l&oacute;zati csatol&oacute;fel&uuml;leteken
	    el&eacute;rhet&#245;
	    hozz&aacute;f&eacute;r&eacute;s-vez&eacute;rl&eacute;si
	    jogokat t&uuml;kr&ouml;zi.</para>

	  <para>Az alany-objektum p&aacute;rokban megadott
	    oszt&aacute;lyzatok &eacute;s rekeszek
	    haszn&aacute;lhat&oacute;ak fel egy olyan kapcsolat
	    ki&eacute;p&iacute;t&eacute;s&eacute;re, amit
	    <quote>dominanci&aacute;nak</quote> nevez&uuml;nk.  Ilyenkor
	    egy alany ural egy objektumot, vagy egy objektum ural egy
	    alanyt, vagy egyik&uuml;k sem uralja a m&aacute;sikat,
	    esetleg mind a kett&#245; uralja egym&aacute;st.  A
	    <quote>kett&#245;s dominancia</quote> esete akkor forog
	    fenn, amikor a k&eacute;t c&iacute;mke megegyezik.  A Biba
	    inform&aacute;ci&oacute;&aacute;ramoltat&aacute;si
	    saj&aacute;toss&aacute;gaib&oacute;l ad&oacute;d&oacute;an
	    jogunk van rekeszeket l&eacute;trehozni, <quote>tudunk
	    kell</quote>, hogy ezek projekteknek feleltethet&#245;ek
	    meg, de az objektumok is rendelkezhetnek rekeszekkel.  A
	    felhaszn&aacute;l&oacute;k ilyenkor csak &uacute;gy tudnak
	    el&eacute;rni egyes objektumokat, ha az
	    <command>su</command> vagy a <command>setpmac</command>
	    haszn&aacute;lat&aacute;val lesz&#251;k&iacute;tik a
	    jogaikat egy olyan rekeszre, ahol m&aacute;r nem
	    &eacute;rv&eacute;nyes&uuml;lnek r&aacute;juk
	    korl&aacute;toz&aacute;sok.</para>

	</sect4>
      </sect3>

      <sect3>
	<title>A felhaszn&aacute;l&oacute;k &eacute;s
	  c&iacute;mk&eacute;k kapcsolata</title>

	<para>Maguknak a felhaszn&aacute;l&oacute;knak is
	  sz&uuml;ks&eacute;g&uuml;k van c&iacute;mk&eacute;kre, mivel
	  csak ezek seg&iacute;ts&eacute;g&eacute;vel tudnak az
	  &aacute;llom&aacute;nyaik &eacute;s programjaik megfelel&#245;
	  m&oacute;don egy&uuml;ttm&#251;k&ouml;dni a rendszerben
	  &eacute;rv&eacute;nyes biztons&aacute;gi h&aacute;zirenddel.
	  Ezt a <filename>login.conf</filename>
	  &aacute;llom&aacute;nyban megadhat&oacute;
	  bejelentkez&eacute;si oszt&aacute;lyokkal
	  &aacute;ll&iacute;thatjuk be.  Minden c&iacute;mk&eacute;ket
	  haszn&aacute;l&oacute; modulban a
	  felhaszn&aacute;l&oacute;knak is van
	  c&iacute;mk&eacute;j&uuml;k.</para>

	<para>Lentebb l&aacute;that&oacute; egy ilyen minta
	  bejegyz&eacute;s, amely minden modulhoz tartalmaz
	  be&aacute;ll&iacute;t&aacute;st:</para>

	<programlisting>default:\
	:copyright=/etc/COPYRIGHT:\
	:welcome=/etc/motd:\
	:setenv=MAIL=/var/mail/$,BLOCKSIZE=K:\
	:path=~/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin:\
	:manpath=/usr/share/man /usr/local/man:\
	:nologin=/usr/sbin/nologin:\
	:cputime=1h30m:\
	:datasize=8M:\
	:vmemoryuse=100M:\
	:stacksize=2M:\
	:memorylocked=4M:\
	:memoryuse=8M:\
	:filesize=8M:\
	:coredumpsize=8M:\
	:openfiles=24:\
	:maxproc=32:\
	:priority=0:\
	:requirehome:\
	:passwordtime=91d:\
	:umask=022:\
	:ignoretime@:\
	:label=partition/13,mls/5,biba/10(5-15),lomac/10[2]:</programlisting>

	<para>Itt a <literal>label</literal> opci&oacute;t
	  haszn&aacute;ltuk a felhaszn&aacute;l&oacute;i
	  oszt&aacute;lyhoz tartoz&oacute; alap&eacute;rtelmezett
	  c&iacute;mk&eacute;k
	  be&aacute;ll&iacute;t&aacute;s&aacute;hoz, amit majd a
	  <acronym>MAC</acronym> betartat.  A felhaszn&aacute;l&oacute;k
	  nem m&oacute;dos&iacute;thatj&aacute;k ezt az
	  &eacute;rt&eacute;ket, ez&eacute;rt ez a
	  felhaszn&aacute;l&oacute;k sz&aacute;m&aacute;ra nem
	  tekinthet&#245; tetsz&#245;legesen elhagyhat&oacute;
	  be&aacute;ll&iacute;t&aacute;snak.  Egy val&oacute;s
	  konfigur&aacute;ci&oacute;ban azonban a rendszergazda
	  val&oacute;sz&iacute;n&#251;leg nem akarja majd egyszerre az
	  &ouml;sszes modult haszn&aacute;lni.  Javasoljuk, hogy
	  miel&#245;tt egy ilyen jelleg&#251;
	  konfigur&aacute;ci&oacute;t adn&aacute;nk meg, olvassuk el az
	  eg&eacute;sz fejezetet.</para>

	<note>
	  <para>A felhaszn&aacute;l&oacute;k ezt a c&iacute;mk&eacute;t
	    meg tudj&aacute;k v&aacute;ltoztatni az els&#245;
	    bejelentkez&eacute;s ut&aacute;n, de csak a h&aacute;zirend
	    keretein bel&uuml;l.  A fenti p&eacute;ld&aacute;ban
	    &uacute;gy &aacute;ll&iacute;tjuk be a Biba
	    h&aacute;zirendet, hogy a fut&oacute; programok
	    s&eacute;rtetlens&eacute;gi foka legal&aacute;bb 5,
	    legfeljebb 15 lehet, de az alap&eacute;rt&eacute;ke 10.
	    Teh&aacute;t a programok eg&eacute;szen addig 10-es szinten
	    futnak, am&iacute;g a programok a Biba
	    bejelentkez&eacute;skor megadott tartom&aacute;ny&aacute;ban
	    meg nem v&aacute;ltoztatj&aacute;k ezt a
	    c&iacute;mk&eacute;t, feltehet&#245;en a
	    <command>setpmac</command> parancs
	    hat&aacute;s&aacute;ra.</para>
	</note>

	<para>Mindig, amikor megv&aacute;ltozatjuk a
	  <filename>login.conf</filename>
	  be&aacute;ll&iacute;t&aacute;sait, a
	  <command>cap_mkdb</command> paranccsal &uacute;jra kell
	  gener&aacute;lni a bejelentkez&eacute;si oszt&aacute;lyokhoz
	  tartoz&oacute; adatb&aacute;zist, amire a k&eacute;s&#245;bbi
	  p&eacute;ld&aacute;kban vagy r&eacute;szekben igyeksz&uuml;nk
	  is mindig felh&iacute;vni a figyelmet.</para>

	<para>Nem &aacute;rt hozz&aacute;tenn&uuml;nk, hogy sok
	  rendszerben kifejezetten sok felhaszn&aacute;l&oacute;t kell
	  kezeln&uuml;nk, amihez t&ouml;bb k&uuml;l&ouml;nb&ouml;z&#245;
	  bejelentkez&eacute;si oszt&aacute;lyra is
	  sz&uuml;ks&eacute;g&uuml;nk lehet.  Mivel k&eacute;s&#245;bb
	  m&aacute;r csak egyre jobban bonyol&oacute;dni fog a
	  felhaszn&aacute;l&oacute;k kezel&eacute;se, ez&eacute;rt soha
	  ne felejts&uuml;nk el komolyan el&#245;re tervezni.</para>

	<para>A &os; k&ouml;vetkez&#245; v&aacute;ltozataiban meg fognak
	  jelenni m&aacute;s m&oacute;dszerek is a
	  felhaszn&aacute;l&oacute;k &eacute;s c&iacute;mk&eacute;k
	  k&ouml;zti kapcsolatok kezel&eacute;s&eacute;re.  A
	  &os;&nbsp;5.3 el&#245;tt azonban ez m&eacute;g
	  semmik&eacute;ppen sem v&aacute;rhat&oacute;.</para>

      </sect3>

      <sect3>
	<title>A h&aacute;l&oacute;zati csatol&oacute;fel&uuml;letek
	  &eacute;s a c&iacute;mk&eacute;k kapcsolata</title>

	<para>A h&aacute;l&oacute;zati csatlakoz&aacute;sok
	  eset&eacute;ben is &aacute;ll&iacute;thatunk be
	  c&iacute;mk&eacute;ket, melyek a h&aacute;l&oacute;zaton
	  kereszt&uuml;l foly&oacute; adatok
	  &aacute;raml&aacute;s&aacute;t hat&aacute;rozz&aacute;k meg.
	  Minden esetben ugyan&uacute;gy m&#251;k&ouml;dnek, mint ahogy
	  a h&aacute;zirendek az objektumokra.  P&eacute;ld&aacute;ul a
	  <literal>biba</literal> eset&eacute;ben a magas
	  be&aacute;ll&iacute;t&aacute;sokkal rendelkez&#245;
	  felhaszn&aacute;l&oacute;k nem f&eacute;rhetnek hozz&aacute;
	  az alacsonyabb c&iacute;mk&eacute;j&#251;
	  h&aacute;l&oacute;zati csatol&oacute;fel&uuml;letekhez.</para>

	<para>Ha <acronym>MAC</acronym>-c&iacute;mk&eacute;ket akarunk
	  rendelni egy h&aacute;l&oacute;zati fel&uuml;lethez, akkor az
	  <command>ifconfig</command> parancsnak adjuk meg a
	  <option>maclabel</option> param&eacute;tert.
	  P&eacute;ld&aacute;ul a</para>

	<screen>&prompt.root; <userinput>ifconfig bge0 maclabel biba/equal</userinput></screen>

	<para>parancs be&aacute;ll&iacute;tja a
	  <literal>biba/equal</literal>
	  <acronym>MAC</acronym>-c&iacute;mk&eacute;t a &man.bge.4;
	  fel&uuml;letre.  A <literal>biba/high(low-high)</literal>
	  alak&uacute; c&iacute;mk&eacute;ket &aacute;tad&aacute;sukhoz
	  id&eacute;z&#245;jelek k&ouml;z&eacute; kell tenni,
	  k&uuml;l&ouml;nben hib&aacute;t kapunk.</para>

	<para>Minden c&iacute;mk&eacute;z&eacute;st
	  t&aacute;mogat&oacute; modulhoz tartoznak fut&aacute;si
	  id&#245;ben &aacute;ll&iacute;that&oacute; param&eacute;terek,
	  amelyekkel ak&aacute;r le is tudjuk tiltani a
	  <acronym>MAC</acronym>-c&iacute;mk&eacute;ket a
	  h&aacute;l&oacute;zati csatol&oacute;fel&uuml;leteken.
	  Ugyanezt jelenti egy&eacute;bk&eacute;nt, ha
	  <option>equal</option> &eacute;rt&eacute;ket adunk meg a
	  c&iacute;mk&eacute;nek.  Ezt behat&oacute;bban &uacute;gy
	  ismerhetj&uuml;k meg, ha kielemezz&uuml;k a
	  <command>sysctl</command> parancs kimenet&eacute;t, a
	  megfelel&#245; modul man oldal&aacute;t vagy a fejezetben
	  tov&aacute;bbi r&eacute;sz&eacute;ben tal&aacute;lhat&oacute;,
	  erre vonatkoz&oacute; inform&aacute;ci&oacute;kat.</para>

      </sect3>
    </sect2>

    <sect2>
      <title>Egy c&iacute;mke vagy t&ouml;bb c&iacute;mke?</title>

      <para>Alap&eacute;rtelmez&eacute;s szerint a rendszer a
	<option>singlelabel</option> be&aacute;ll&iacute;t&aacute;st
	haszn&aacute;lja.  Ez vajon mit tartogat a rendszergazda
	sz&aacute;m&aacute;ra?  Sz&aacute;mos olyan
	elt&eacute;r&eacute;st, aminek megvannak a saj&aacute;t
	el&#245;nyei &eacute;s h&aacute;tr&aacute;nyai a rendszer
	v&eacute;delmi modellj&eacute;nek rugalmass&aacute;ga
	szempontj&aacute;b&oacute;l.</para>

      <para>A <option>singlelabel</option>
	be&aacute;ll&iacute;t&aacute;s minden alany vagy objektum
	eset&eacute;ben csup&aacute;n egyetlen c&iacute;mke,
	p&eacute;ld&aacute;ul a <literal>biba/high</literal>
	haszn&aacute;lat&aacute;t engedi.  Kevesebb
	adminisztr&aacute;ci&oacute;s k&ouml;lts&eacute;ggel j&aacute;r,
	azonban cs&ouml;kkenteni a c&iacute;mk&eacute;z&eacute;st
	t&aacute;mogat&oacute; modulok
	testreszabhat&oacute;s&aacute;g&aacute;t.  Ez&eacute;rt sok
	rendszergazda ink&aacute;bb a <option>multilabel</option>
	be&aacute;ll&iacute;t&aacute;st v&aacute;lasztja a
	biztons&aacute;gi h&aacute;zirend kialak&iacute;t&aacute;sa
	sor&aacute;n.</para>

      <para>A <option>multilabel</option> be&aacute;ll&iacute;t&aacute;s
	lehet&#245;v&eacute; teszi, hogy mindegyik alanyhoz &eacute;s
	objektumhoz a szabv&aacute;nyos <option>singlelabel</option>
	be&aacute;ll&iacute;t&aacute;s lehet&#245;s&eacute;geivel
	szemben egym&aacute;st&oacute;l f&uuml;ggetlen&uuml;l
	k&uuml;l&ouml;n-k&uuml;l&ouml;n rendelhess&uuml;nk
	c&iacute;mk&eacute;ket a part&iacute;ci&oacute;kon.  Az egy-
	&eacute;s t&ouml;bbc&iacute;mk&eacute;s opci&oacute;nak csak
	olyan modulok eset&eacute;ben van &eacute;rtelme, amelyek
	t&aacute;mogatj&aacute;k a c&iacute;mk&eacute;z&eacute;st, mint
	p&eacute;ld&aacute;ul a Biba, Lomac, <acronym>MLS</acronym>
	&eacute;s a <acronym>SEBSD</acronym> h&aacute;zirendek.</para>

      <para>Sokszor egy&aacute;ltal&aacute;n nincs is
	sz&uuml;ks&eacute;g&uuml;nk a <option>multilabel</option>
	haszn&aacute;lat&aacute;ra.  Tekints&uuml;k
	p&eacute;ld&aacute;ul a k&ouml;vetkez&#245; helyzetet &eacute;s
	biztons&aacute;gi modellt:</para>

      <itemizedlist>
	<listitem>
	  <para>Adott egy &os; webszerver, ahol a <acronym>MAC</acronym>
	    rendszert t&ouml;bb biztons&aacute;gi h&aacute;zirenddel
	    alkalmazzuk.</para>
	</listitem>

	<listitem>
	  <para>A g&eacute;pen egyed&uuml;l csak a
	    <literal>biba/high</literal> c&iacute;mk&eacute;re van
	    sz&uuml;ks&eacute;g&uuml;nk mindenhez a rendszerben.  Itt
	    egyszer&#251;en csak nem adjuk meg az
	    &aacute;llom&aacute;nyrendszernek a
	    <option>multilabel</option> be&aacute;ll&iacute;t&aacute;st,
	    mivel az egyc&iacute;mk&eacute;s rendszer mindig
	    rendelkez&eacute;s&uuml;nkre &aacute;ll.</para>
	</listitem>

	<listitem>
	  <para>Mivel azonban erre a g&eacute;pre telep&iacute;teni
	    akarunk egy webszervert is, ilyenkor a
	    <literal>biba/low</literal> c&iacute;mke
	    haszn&aacute;lat&aacute;val igyeksz&uuml;nk
	    korl&aacute;tozni a szerver feldolgoz&aacute;si
	    k&eacute;pess&eacute;geit.  A Biba h&aacute;zirendr&#245;l
	    &eacute;s annak m&#251;k&ouml;d&eacute;s&eacute;r&#245;l
	    csak a k&eacute;s&#245;bbiekben fogunk &iacute;rni,
	    ez&eacute;rt ha az el&#245;bbi megjegyz&eacute;st m&eacute;g
	    nem teljesen &eacute;rtj&uuml;k, akkor egyszer&#251;en csak
	    olvassunk tov&aacute;bb &eacute;s t&eacute;rj&uuml;nk vissza
	    ide.  A szerver fut&aacute;sa alatt, vagy legal&aacute;bb is
	    idej&eacute;nek nagy r&eacute;sz&eacute;ben egy
	    k&uuml;l&ouml;n part&iacute;ci&oacute;t haszn&aacute;lhatna,
	    amire a <literal>biba/low</literal> c&iacute;mk&eacute;t
	    &aacute;ll&iacute;tan&aacute;nk be.  Term&eacute;szetesen ez
	    a p&eacute;lda kor&aacute;ntsem teljes, hiszen
	    hi&aacute;nyoznak bel&#245;le az adatokra
	    &eacute;rv&eacute;nyes korl&aacute;toz&aacute;sok, a
	    konfigur&aacute;ci&oacute;s &eacute;s
	    felhaszn&aacute;l&oacute;i be&aacute;ll&iacute;t&aacute;sok.
	    Ez csup&aacute;n az im&eacute;nti gondolatmenet gyors
	    illusztr&aacute;ci&oacute;ja.</para>
	</listitem>
      </itemizedlist>

      <para>Amennyiben c&iacute;mk&eacute;z&eacute;st nem
	t&aacute;mogat&oacute; modulokat alkalmazunk, a
	<option>multilabel</option> be&aacute;ll&iacute;t&aacute;sra
	szinte sosem lesz sz&uuml;ks&eacute;g&uuml;nk.  Ilyenek
	p&eacute;ld&aacute;ul a <literal>seeotheruids</literal>,
	<literal>portacl</literal> &eacute;s
	<literal>partition</literal> h&aacute;zirendek.</para>

      <para>A <option>multilabel</option> opci&oacute; haszn&aacute;lata
	&eacute;s &iacute;gy speci&aacute;lis,
	t&ouml;bbc&iacute;mk&eacute;s v&eacute;delmi modell
	l&eacute;trehoz&aacute;sa k&eacute;pes elbonyol&iacute;tani a
	rendszer karbantart&aacute;s&aacute;t, mert ilyenkor az
	&aacute;llom&aacute;nyrendszerben mindennek lennie kell
	c&iacute;mk&eacute;j&eacute;nek: k&ouml;nyvt&aacute;raknak,
	&aacute;llom&aacute;nyok &eacute;s m&eacute;g az
	eszk&ouml;zle&iacute;r&oacute;knak is.</para>

      <para>A most k&ouml;vetkez&#245; paranccsal
	be&aacute;ll&iacute;tjuk az &aacute;llom&aacute;nyrendszerre a
	<option>multilabel</option> opci&oacute;t.  Ez csak
	egyfelhaszn&aacute;l&oacute;s m&oacute;dban tehet&#245;
	meg:</para>

      <screen>&prompt.root; <userinput>tunefs -l enable /</userinput></screen>

      <para>A lapoz&oacute;part&iacute;ci&oacute; eset&eacute;ben erre
	nincs sz&uuml;ks&eacute;g.</para>

      <note>
	<para>El&#245;fordulhat, hogy n&eacute;h&aacute;ny
	  felhaszn&aacute;l&oacute;nak nem siker&uuml;l a
	  <option>multilabel</option> opci&oacute;t
	  be&aacute;ll&iacute;tania a rendszerind&iacute;t&oacute;
	  part&iacute;ci&oacute;ra.  Ha ez t&ouml;rt&eacute;nne, akkor
	  olvassuk el a fejezet <xref
	  linkend="mac-troubleshoot">&aacute;t.</para>
      </note>

    </sect2>
  </sect1>

  <sect1 id="mac-planning">
    <title>A v&eacute;delem megtervez&eacute;se</title>

    <para>Mindig hasznos id&#245;t sz&aacute;nni a tervez&eacute;sre,
      amikor nekil&aacute;tunk egy &uacute;j technol&oacute;gia
      alkalmaz&aacute;s&aacute;hoz.  A tervez&eacute;s k&ouml;zben a
      rendszergazd&aacute;nak <quote>egyben kell l&aacute;tnia a
      k&eacute;pet</quote>, lehet&#245;leg az al&aacute;bbiak
      figyelembev&eacute;tel&eacute;vel:</para>

    <itemizedlist>
      <listitem>
	<para>Elv&aacute;r&aacute;sok a modell fel&eacute;</para>
      </listitem>

      <listitem>
	<para>A modell c&eacute;lkit&#251;z&eacute;sei</para>
      </listitem>
    </itemizedlist>

    <para>Tov&aacute;bb&aacute; a <acronym>MAC</acronym>
      haszn&aacute;lata eset&eacute;n:</para>

    <itemizedlist>
      <listitem>
	<para>Mik&eacute;nt oszt&aacute;lyozzuk a c&eacute;lrendszeren
	  rendelkez&eacute;sre &aacute;ll&oacute;
	  inform&aacute;ci&oacute;t &eacute;s
	  er&#245;forr&aacute;sokat</para>
      </listitem>

      <listitem>
	<para>Milyen inform&aacute;ci&oacute;t vagy
	  er&#245;forr&aacute;st kell korl&aacute;toznunk &eacute;s
	  milyen t&iacute;pus&uacute; korl&aacute;toz&aacute;st
	  alkalmazzunk r&aacute;juk</para>
      </listitem>

      <listitem>
	<para>A <acronym>MAC</acronym> melyik moduljain kereszt&uuml;l
	  tudjuk el&eacute;rni c&eacute;ljainkat</para>
      </listitem>
    </itemizedlist>

    <para>Hab&aacute;r mindig m&oacute;dunkban &aacute;ll
      megv&aacute;ltoztatni &eacute;s &uacute;jra konfigur&aacute;lni a
      rendszerben tal&aacute;lhat&oacute; er&#245;forr&aacute;sokat
      &eacute;s biztons&aacute;gi be&aacute;ll&iacute;t&aacute;sokat,
      sokszor az&eacute;rt igen k&eacute;nyelmetlen
      ut&aacute;nan&eacute;zni a rendszerben &eacute;s
      &aacute;ll&iacute;tgatni az &aacute;llom&aacute;nyok, illetve
      felhaszn&aacute;l&oacute;i hozz&aacute;f&eacute;r&eacute;sek
      param&eacute;tereit.  A be&aacute;ll&iacute;t&aacute;sainkat
      valamint azok konfigur&aacute;ci&oacute;j&aacute;t
      <emphasis>el&#245;sz&ouml;r</emphasis> k&uuml;l&ouml;n
      pr&oacute;b&aacute;ljuk ki, miel&#245;tt a <acronym>MAC</acronym>
      alap&uacute; megval&oacute;s&iacute;t&aacute;sunkat egy
      &eacute;les rendszeren kezdj&uuml;k el haszn&aacute;lni.  Ennek
      elhagy&aacute;sa szinte biztosan kudarcra &iacute;t&eacute;l
      minket.</para>

    <para>A k&uuml;l&ouml;nb&ouml;z&#245; k&ouml;rnyezetek
      ig&eacute;nyei &eacute;s elv&aacute;r&aacute;sai elt&eacute;rnek.
      Egy alaposan &eacute;s minden r&eacute;szlet&eacute;ben
      &aacute;tgondolt v&eacute;delmi profil megalapoz&aacute;sa
      cs&ouml;kkenti a rendszer &uuml;zembehelyez&eacute;se ut&aacute;n
      elv&eacute;gzend&#245; m&oacute;dos&iacute;t&aacute;sok
      sz&aacute;m&aacute;t.  Mint olyanokra, a k&ouml;vetkez&#245;
      szakaszokban kit&eacute;r&uuml;nk a rendszergazd&aacute;k
      sz&aacute;m&aacute;ra el&eacute;rhet&#245; modulokra, bemutatjuk a
      haszn&aacute;latukat &eacute;s be&aacute;ll&iacute;t&aacute;sukat
      &eacute;s egyes esetekben betekint&eacute;st is adunk olyan
      helyzetekbe, ahol a legjobban kiakn&aacute;zhat&oacute;ak a
      k&eacute;pess&eacute;geik.  P&eacute;ld&aacute;ul egy webszerver
      eset&eacute;n hasznos lehet a &man.mac.biba.4; &eacute;s
      &man.mac.bsdextended.4; h&aacute;zirendek alkalmaz&aacute;sa.
      M&aacute;s esetekben, p&eacute;ld&aacute;ul egy kev&eacute;s
      felhaszn&aacute;l&oacute;val m&#251;k&ouml;d&#245;
      sz&aacute;m&iacute;t&oacute;g&eacute;pen, a &man.mac.partition.4;
      modul lehet j&oacute; v&aacute;laszt&aacute;s.</para>

  </sect1>

  <sect1 id="mac-modules">
    <title>A modulok be&aacute;ll&iacute;t&aacute;sa</title>

    <para>A <acronym>MAC</acronym> rendszerben
      megtal&aacute;lhat&oacute; &ouml;sszes modul a kor&aacute;bban
      le&iacute;rtak szerint be&eacute;p&iacute;thet&#245; a
      rendszermagba vagy menet k&ouml;zben is bet&ouml;lthet&#245;
      modulk&eacute;nt.  A haszn&aacute;lni k&iacute;v&aacute;nt
      modulokat a <filename>/boot/loader.conf</filename>
      &aacute;llom&aacute;nyba javasolt felvenni, &iacute;gy azok be
      tudnak t&ouml;lt&#245;dni a rendszer ind&iacute;t&aacute;sa
      folyam&aacute;n.</para>

    <para>A soron k&ouml;vetkez&#245; szakaszokban a
      k&uuml;l&ouml;nb&ouml;z&#245; <acronym>MAC</acronym>-modulokat
      dolgozzuk fel &eacute;s foglaljuk &ouml;ssze a
      lehet&#245;s&eacute;geiket.  Tov&aacute;bb&aacute; a fejezet
      szeretne sz&oacute;lni ezek alkalmaz&aacute;s&aacute;r&oacute;l
      speci&aacute;lis helyzetekben is.  Egyes modulokkal
      c&iacute;mk&eacute;zni is tudunk, aminek r&eacute;v&eacute;n a
      hozz&aacute;f&eacute;r&eacute;seket c&iacute;mk&eacute;kkel
      szab&aacute;lyozzuk, p&eacute;ld&aacute;ul &uacute;gy, hogy
      megmondjuk <quote>mit szabad &eacute;s mit nem</quote>.  A
      c&iacute;mk&eacute;k be&aacute;ll&iacute;t&aacute;sait
      tartalmaz&oacute; &aacute;llom&aacute;ny vez&eacute;rli az
      &aacute;llom&aacute;nyok el&eacute;r&eacute;s&eacute;t, a
      h&aacute;l&oacute;zati kommunik&aacute;ci&oacute;t &eacute;s
      m&eacute;g sok minden m&aacute;st.  Az el&#245;z&#245; szakaszban
      m&aacute;r megismerhett&uuml;k, hogy a <option>multilabel</option>
      opci&oacute; seg&iacute;ts&eacute;g&eacute;vel hogyan
      &aacute;ll&iacute;thatjuk be az
      &aacute;llom&aacute;nyonk&eacute;nti vagy
      part&iacute;ci&oacute;nk&eacute;nti
      hozz&aacute;f&eacute;r&eacute;s-vez&eacute;rl&eacute;st.</para>

    <para>Az egyc&iacute;mk&eacute;s konfigur&aacute;ci&oacute;ban az
      eg&eacute;sz rendszerben csup&aacute;n egyetlen c&iacute;mke
      haszn&aacute;lat&aacute;ra ny&iacute;lik m&oacute;d, ez&eacute;rt
      is h&iacute;vj&aacute;k a <command>tunefs</command>
      be&aacute;ll&iacute;t&aacute;s&aacute;t
      <option>multilabel</option>nek.</para>
  </sect1>

  <sect1 id="mac-seeotheruids">
    <title>A seeotheruids MAC-modul</title>

    <indexterm><primary><quote>L&aacute;ssak
      m&aacute;sokat</quote>MAC-h&aacute;zirend</primary></indexterm>

    <para>A modul neve: <filename>mac_seeotheruids.ko</filename></para>

    <para>A rendszermag konfigur&aacute;ci&oacute;s
      be&aacute;ll&iacute;t&aacute;sa: <literal>options
      MAC_SEEOTHERUIDS</literal></para>

    <para>Rendszerind&iacute;t&aacute;si be&aacute;ll&iacute;t&aacute;s:
      <literal>mac_seeotheruids_load="YES"</literal></para>

    <para>A &man.mac.seeotheruids.4; modul a
      <literal>security.bsd.see_other_uids</literal> &eacute;s
      <literal>security.bsd.see_other_gids</literal>
      <command>sysctl</command>-v&aacute;ltoz&oacute;kat ut&aacute;nozza
      &eacute;s terjeszti ki.  A haszn&aacute;lat&aacute;hoz semmilyen
      c&iacute;mk&eacute;t nem kell be&aacute;ll&iacute;tani &eacute;s
      transzparens m&oacute;don k&eacute;pes
      egy&uuml;ttm&#251;k&ouml;dni a t&ouml;bbi modullal.</para>

    <para>A modult bet&ouml;lt&eacute;se ut&aacute;n az al&aacute;bbi
      <command>sysctl</command>-v&aacute;ltoz&oacute;kkal tudjuk
      vez&eacute;relni:</para>

    <itemizedlist>
      <listitem>
	<para>A <literal>security.mac.seeotheruids.enabled</literal>
	  enged&eacute;lyezi a modult &eacute;s az
	  alap&eacute;rtelmezett be&aacute;ll&iacute;t&aacute;sokat
	  haszn&aacute;lja.  Alap&eacute;rtelmez&eacute;s szerint egyik
	  felhaszn&aacute;l&oacute; sem l&aacute;thatja a t&ouml;bbiek
	  fut&oacute; programjait &eacute;s
	  csatlakoz&aacute;sait.</para>
      </listitem>

      <listitem>
	<para>A
	  <literal>security.mac.seeotheruids.specificgid_enabled</literal>
	  egy adott csoportot mentes&iacute;t a h&aacute;zirend
	  szab&aacute;lyoz&aacute;sai al&oacute;l.  Teh&aacute;t ki
	  akarunk vonni egy csoportot a h&aacute;zirend
	  alkalmaz&aacute;s&aacute;b&oacute;l, akkor
	  &aacute;ll&iacute;tsuk be a
	  <literal>security.mac.seeotheruids.specificgid=<replaceable>XXX</replaceable></literal>
	  <command>sysctl</command>-v&aacute;ltoz&oacute;t, ahol az
	  <replaceable>XXX</replaceable> a mentes&iacute;teni
	  k&iacute;v&aacute;nt csoport numerikus
	  azonos&iacute;t&oacute;ja.</para>
      </listitem>

      <listitem>
	<para>A
	<literal>security.mac.seeotheruids.primarygroup_enabled</literal>
	  seg&iacute;ts&eacute;g&eacute;vel adott els&#245;dleges
	  csoportokat vonhatunk ki a h&aacute;zirend hat&aacute;lya
	  al&oacute;l.  Ezt a v&aacute;ltoz&oacute;t nem
	  haszn&aacute;lhatjuk a
	  <literal>security.mac.seeotheruids.specificgid_enabled</literal>
	  v&aacute;ltoz&oacute;val egy&uuml;tt.</para>
      </listitem>
    </itemizedlist>
  </sect1>

  <sect1 id="mac-bsdextended">
    <title>A bsdextended MAC-modul</title>

    <indexterm>
      <primary>MAC</primary>
      <secondary>&Aacute;llom&aacute;nyrendszeri t&#251;zfal
	MAC-h&aacute;zirend</secondary>
    </indexterm>

    <para>A modul neve: <filename>mac_bsdextended.ko</filename></para>

    <para>A rendszermag konfigur&aacute;ci&oacute;s
      be&aacute;ll&iacute;t&aacute;sa: <literal>options
      MAC_BSDEXTENDED</literal></para>

    <para>Rendszerind&iacute;t&aacute;si be&aacute;ll&iacute;t&aacute;s:
      <literal>mac_bsdextended_load="YES"</literal></para>

    <para>A &man.mac.bsdextended.4; modul
      seg&iacute;ts&eacute;g&eacute;vel egy
      &aacute;llom&aacute;nyrendszer szintj&eacute;n
      m&#251;k&ouml;d&#245; t&#251;zfalat tudunk kialak&iacute;tani.  Ez
      a modul a szabv&aacute;nyos &aacute;llom&aacute;nyrendszeri
      enged&eacute;ly alap&uacute; modellj&eacute;t b&#245;v&iacute;ti
      ki, lehet&#245;v&eacute; t&eacute;ve, hogy a rendszergazda
      t&#251;zfalszer&#251; szab&aacute;lyokkal ny&uacute;jtson
      v&eacute;delmet a k&ouml;nyvt&aacute;rszerkezetben
      tal&aacute;lhat&oacute; &aacute;llom&aacute;nyoknak,
      seg&eacute;dprogramoknak &eacute;s k&ouml;nyvt&aacute;raknak.
      Amikor egy &aacute;llom&aacute;nyrendszerbeli objektumhoz
      pr&oacute;b&aacute;lunk meg hozz&aacute;f&eacute;rni, a modul
      illeszti ezt egy szab&aacute;lyrendszerre, amiben vagy
      tal&aacute;l egy hozz&aacute;tartoz&oacute; szab&aacute;lyt vagy
      kifut bel&#245;le.  Ez a viselked&eacute;s a
      <literal>security.mac.bsdextended.firstmatch_enabled</literal>
      &man.sysctl.8; param&eacute;ter seg&iacute;ts&eacute;g&eacute;vel
      v&aacute;ltoztathat&oacute; meg.  Hasonl&oacute;an a &os;-ben
      tal&aacute;lhat&oacute; t&ouml;bbi t&#251;zfalmodulhoz, az
      &aacute;llom&aacute;nyok el&eacute;r&eacute;s&eacute;t
      defini&aacute;l&oacute; szab&aacute;lyok a
      rendszerind&iacute;t&aacute;s sor&aacute;n egy &man.rc.conf.5;
      v&aacute;ltoz&oacute;b&oacute;l olvas&oacute;dnak be.</para>

    <para>A szab&aacute;lyokat a &man.ugidfw.8; seg&eacute;dprogrammal
      adhatjuk meg, amelynek a formai szab&aacute;lyai hasonl&oacute;ak
      az &man.ipfw.8; program&eacute;hoz.  A &man.libugidfw.3;
      f&uuml;ggv&eacute;nyk&ouml;nyvt&aacute;r
      felhaszn&aacute;l&aacute;s&aacute;val azonban tov&aacute;bbi
      seg&eacute;dprogramok is &iacute;rhat&oacute;ak
      hozz&aacute;.</para>

    <para>A modul haszn&aacute;lata sor&aacute;n igyekezz&uuml;nk
      min&eacute;l jobban odafigyelni, mert helytelen
      alkalmaz&aacute;s&aacute;val el tudjuk v&aacute;gni magunkat az
      &aacute;llom&aacute;nyrendszer bizonyos
      r&eacute;szeit&#245;l.</para>

    <sect2>
      <title>P&eacute;ld&aacute;k</title>

      <para>Miut&aacute;n siker&uuml;lt bet&ouml;lteni a
	&man.mac.bsdextended.4; modult, a k&ouml;vetkez&#245; paranccsal
	tudjuk lek&eacute;rdezni a jelenleg &eacute;rv&eacute;nyes
	szab&aacute;lyokat:</para>

      <screen>&prompt.root; <userinput>ugidfw list</userinput>
0 slots, 0 rules</screen>

      <para>Ahogy az v&aacute;rhat&oacute; is volt, pillanatnyilag
	m&eacute;g egyetlen szab&aacute;lyt sem adtunk meg.  Ennek
	&eacute;rtelm&eacute;ben teh&aacute;t mindent el tudunk
	&eacute;rni.  A k&ouml;vetkez&#245; paranccsal tudunk olyan
	szab&aacute;lyt l&eacute;trehozni, ahol a
	<username>root</username> kiv&eacute;tel&eacute;vel
	elutas&iacute;tjuk az &ouml;sszes felhaszn&aacute;l&oacute;
	hozz&aacute;f&eacute;r&eacute;s&eacute;t:</para>

      <screen>&prompt.root; <userinput>ugidfw add subject not uid root new object not uid root mode n</userinput></screen>

      <para>Ez egy&eacute;bk&eacute;nt egy nagyon buta &ouml;tlet, mivel
	&iacute;gy a felhaszn&aacute;l&oacute;k m&eacute;g a
	legegyszer&#251;bb parancsokat, mint p&eacute;ld&aacute;ul az
	<command>ls</command>-t, sem tudj&aacute;k r&aacute;juk kiadni.
	Enn&eacute;l sokkal hum&aacute;nusabb lesz, ha:</para>

      <screen>&prompt.root; <userinput>ugidfw set 2 subject uid <replaceable>felhaszn&aacute;l&oacute;1</replaceable> object uid <replaceable>felhaszn&aacute;l&oacute;2</replaceable> mode n</userinput>
&prompt.root; <userinput>ugidfw set 3 subject uid <replaceable>felhaszn&aacute;l&oacute;1</replaceable> object gid <replaceable>felhaszn&aacute;l&oacute;2</replaceable> mode n</userinput></screen>

      <para>Ilyenkor a <username>felhaszn&aacute;l&oacute;1</username>
	nev&#251; felhaszn&aacute;l&oacute;t&oacute;l megvonjuk a
	<username><replaceable>felhaszn&aacute;l&oacute;2</replaceable></username>
	felhaszn&aacute;l&oacute;i k&ouml;nyvt&aacute;r&aacute;nak
	&ouml;sszes hozz&aacute;f&eacute;r&eacute;s&eacute;t,
	bele&eacute;rtve a list&aacute;zhat&oacute;s&aacute;got
	is.</para>

      <para>A <username>felhaszn&aacute;l&oacute;1</username> helyett
	megadhatjuk a <option>not uid
	<replaceable>felhaszn&aacute;l&oacute;2</replaceable></option>
	opci&oacute;t is.  Ebben az esetben egy
	felhaszn&aacute;l&oacute; helyett az &ouml;sszes
	felhaszn&aacute;l&oacute;ra ugyanaz a korl&aacute;toz&aacute;s
	fog &eacute;rv&eacute;nyes&uuml;lni.</para>

      <note>
	<para>A <username>root</username> felhaszn&aacute;l&oacute;ra
	  ezek a be&aacute;ll&iacute;t&aacute;sok nem
	  vonatkoznak.</para>
      </note>

      <para>Ezzel felv&aacute;zoltuk, mik&eacute;nt lehet a
	&man.mac.bsdextended.4; modult felhaszn&aacute;lni az
	&aacute;llom&aacute;nyrendszerek
	meger&#245;s&iacute;t&eacute;s&eacute;re.  R&eacute;szletesebb
	inform&aacute;ci&oacute;k&eacute;rt j&aacute;ruljunk a
	&man.mac.bsdextended.4; &eacute;s &man.ugidfw.8; man
	oldalakhoz.</para>

    </sect2>
  </sect1>

  <sect1 id="mac-ifoff">
    <title>Az ifoff MAC-modul</title>

    <indexterm><primary><quote>a csatol&oacute;fel&uuml;letek
	elfojt&aacute;sa</quote>
	MAC-h&aacute;zirend</primary></indexterm>

    <para>A modul neve: <filename>mac_ifoff.ko</filename></para>

    <para>A rendszermag konfigur&aacute;ci&oacute;s
      be&aacute;ll&iacute;t&aacute;sa: <literal>options
      MAC_IFOFF</literal></para>

    <para>Rendszerind&iacute;t&aacute;si be&aacute;ll&iacute;t&aacute;s:
      <literal>mac_ifoff_load="YES"</literal></para>

    <para>A &man.mac.ifoff.4; modul kiz&aacute;r&oacute;lag abb&oacute;l
      a c&eacute;lb&oacute;l k&eacute;sz&uuml;lt, hogy
      seg&iacute;ts&eacute;g&eacute;vel menet k&ouml;zben le tudjuk
      tiltani bizonyos h&aacute;l&oacute;zati
      csatol&oacute;fel&uuml;letek
      be&aacute;ll&iacute;t&aacute;s&aacute;t a
      rendszerind&iacute;t&aacute;s k&ouml;zben.  Sem
      c&iacute;mk&eacute;kre, sem pedig a t&ouml;bbi MAC-modulra nincs
      sz&uuml;ks&eacute;g&uuml;nk a haszn&aacute;lat&aacute;hoz.</para>

    <para>A vez&eacute;rl&eacute;st nagyr&eacute;szt az al&aacute;bbi
      <command>sysctl</command>-v&aacute;ltoz&oacute;kkal tudjuk
      megoldani.</para>

    <itemizedlist>
      <listitem>
	<para>A <literal>security.mac.ifoff.lo_enabled</literal>
	  enged&eacute;lyezi vagy letiltja a (&man.lo.4;) helyi loopback
	  fel&uuml;leten az &ouml;sszes forgalmat.</para>
      </listitem>

      <listitem>
	<para>A <literal>security.mac.ifoff.bpfrecv_enabled</literal>
	  enged&eacute;lyezi vagy letiltja a Berkeley
	  csomagsz&#251;r&#245; (BPF, Berkeley Packet Filter)
	  fel&uuml;let&eacute;n az &ouml;sszes forgalmat.</para>
      </listitem>

      <listitem>
	<para>A <literal>security.mac.ifoff.other_enabled</literal>
	  enged&eacute;lyezi vagy letiltja az &ouml;sszes t&ouml;bbi
	  csatol&oacute;fel&uuml;leten az &ouml;sszes forgalmat.</para>
      </listitem>
    </itemizedlist>

    <para>A &man.mac.ifoff.4; modult &aacute;ltal&aacute;ban olyan
      k&ouml;rnyezetek monitoroz&aacute;sakor szokt&aacute;k
      haszn&aacute;lni, ahol a rendszer ind&iacute;t&aacute;sa
      sor&aacute;n m&eacute;g nem szabad h&aacute;l&oacute;zati
      forgalomnak keletkeznie.  Vagy p&eacute;ld&aacute;ul a <filename
      role="package">security/aide</filename> porttal egy&uuml;tt
      haszn&aacute;lva automatikusan el tudjuk z&aacute;rni a
      rendszer&uuml;nket, ha a v&eacute;dett k&ouml;nyvt&aacute;rakban
      &uacute;j &aacute;llom&aacute;nyok keletkeznek vagy
      megv&aacute;ltoznak a r&eacute;giek.</para>

  </sect1>

  <sect1 id="mac-portacl">
    <title>A portacl MAC-modul</title>

    <indexterm><primary>Port
	hozz&aacute;f&eacute;r&eacute;s-vez&eacute;rl&eacute;si lista
	MAC-h&aacute;zirend</primary></indexterm>

    <para>A modul neve: <filename>mac_portacl.ko</filename></para>

    <para>A rendszermag konfigur&aacute;ci&oacute;s
      be&aacute;ll&iacute;t&aacute;sa:
      <literal>MAC_PORTACL</literal></para>

    <para>Rendszerind&iacute;t&aacute;si be&aacute;ll&iacute;t&aacute;s:
      <literal>mac_portacl_load="YES"</literal></para>

    <para>A &man.mac.portacl.4; modul a helyi <acronym>TCP</acronym>
      &eacute;s <acronym>UDP</acronym> portok kioszt&aacute;s&aacute;nak
      korl&aacute;toz&aacute;s&aacute;t teszi lehet&#245;v&eacute;
      k&uuml;l&ouml;nf&eacute;le
      <command>sysctl</command>-v&aacute;ltoz&oacute;kon kereszt&uuml;l.
      A &man.mac.portacl.4; seg&iacute;ts&eacute;g&eacute;vel
      l&eacute;nyeg&eacute;ben a nem-<username>root</username>
      felhaszn&aacute;l&oacute;k is haszn&aacute;lhatnak
      privilegiz&aacute;lt, teh&aacute;t 1024 alatti portokat.</para>

    <para>Miut&aacute;n bet&ouml;lt&ouml;tt&uuml;k, a modul az
      &ouml;sszes csatlakoz&aacute;sra alkalmazza a
      <acronym>MAC</acronym>-h&aacute;zirendet.  Ezut&aacute;n az
      al&aacute;bbi v&aacute;ltoz&oacute;kkal hangolhatjuk a
      viselked&eacute;s&eacute;t:</para>

    <itemizedlist>
      <listitem>
	<para>A <literal>security.mac.portacl.enabled</literal>
	  tot&aacute;lisan enged&eacute;lyezi vagy letiltja a
	  h&aacute;zirend haszn&aacute;lat&aacute;t.</para>
      </listitem>

      <listitem>
	<para>A <literal>security.mac.portacl.port_high</literal>
	  megadja azt a legmagasabb portot, amelyre m&eacute;g kiterjed
	  a &man.mac.portacl.4; v&eacute;delme.</para>
      </listitem>

      <listitem>
	<para>Ha a <literal>security.mac.portacl.suser_exempt</literal>
	  v&aacute;ltoz&oacute;nak nem nulla &eacute;rt&eacute;ket adunk
	  meg, akkor azzal a <username>root</username>
	  felhaszn&aacute;l&oacute;t kivonjuk a
	  szab&aacute;lyoz&aacute;sok al&oacute;l.</para>
      </listitem>

      <listitem>
	<para>A <literal>security.mac.portacl.rules</literal> az
	  &eacute;rv&eacute;nyes mac_portacl h&aacute;zirendet adja meg,
	  l&aacute;sd lentebb.</para>
      </listitem>
    </itemizedlist>

    <para>A <literal>security.mac.portacl.rules</literal>
      v&aacute;ltoz&oacute; &aacute;ltal megadott aktu&aacute;lis
      <literal>mac_portacl</literal> h&aacute;zirend form&aacute;tuma a
      k&ouml;vetkez&#245;:
      <literal>szab&aacute;ly[,szab&aacute;ly,...]</literal>, ahol ezen
      a m&oacute;don tetsz&#245;leges sz&aacute;m&uacute;
      szab&aacute;lyt adhatunk meg.  Az egyes szab&aacute;lyok pedig
      &iacute;gy &iacute;rhat&oacute;ak fel: <literal>
      <replaceable>azonos&iacute;t&oacute;t&iacute;pus</replaceable>:
      <replaceable>azonos&iacute;t&oacute;</replaceable>:
      <replaceable>protokoll</replaceable>:
      <replaceable>port</replaceable></literal>.  Az
      <parameter>azonos&iacute;t&oacute;t&iacute;pus</parameter>
      &eacute;rt&eacute;ke <literal>uid</literal> vagy
      <literal>gid</literal> lehet, amivel megadjuk, hogy az
      <parameter>azonos&iacute;t&oacute;</parameter> param&eacute;ter
      felhaszn&aacute;l&oacute;ra vagy csoportra hivatkozik.  A
      <parameter>protokoll</parameter> param&eacute;ter adja meg, hogy a
      szab&aacute;lyt <acronym>TCP</acronym> vagy <acronym>UDP</acronym>
      t&iacute;pus&uacute; kapcsolatra &eacute;rtj&uuml;k, &eacute;s
      ennek megfelel&#245;en az &eacute;rt&eacute;ke is
      <literal>tcp</literal> vagy <literal>udp</literal> lehet.  A sort
      v&eacute;g&uuml;l a <parameter>port</parameter> param&eacute;ter
      z&aacute;rja, ahol annak a portnak sz&aacute;m&aacute;t adjuk meg,
      amelyhez az adott felhaszn&aacute;l&oacute;t vagy csoportot
      akarjuk k&ouml;tni.</para>

    <note>
      <para>Mivel a szab&aacute;lyokat k&ouml;zvetlen&uuml;l maga a
	rendszermag dolgozza fel, ez&eacute;rt a
	felhaszn&aacute;l&oacute;k illetve csoportok
	azonos&iacute;t&oacute;ja, valamint a port &eacute;rt&eacute;ke
	kiz&aacute;r&oacute;lag numerikus &eacute;rt&eacute;k lehet.
	Teh&aacute;t a szab&aacute;lyokban n&eacute;v szerint nem
	hivatkozhatunk felhaszn&aacute;l&oacute;kra, csoportokra vagy
	szolg&aacute;ltat&aacute;sokra.</para>
    </note>

    <para>A &unix;-szer&#251; rendszereken alap&eacute;rtelmez&eacute;s
      szerint az 1024 alatti portokat csak privilegiz&aacute;lt
      programok kaphatj&aacute;k meg &eacute;s
      haszn&aacute;lhatj&aacute;k, teh&aacute;t a
      <username>root</username> felhaszn&aacute;l&oacute; neve alatt
      kell futniuk.  A &man.mac.portacl.4; azonban a nem
      privilegiz&aacute;lt programok sz&aacute;m&aacute;ra is
      lehet&#245;v&eacute; teszi, hogy elfoglalhassanak 1024 alatti
      portokat, amihez viszont el&#245;sz&ouml;r le kell tiltani ezt a
      szabv&aacute;ny &unix;-os korl&aacute;toz&aacute;st.  Ezt
      &uacute;gy &eacute;rhetj&uuml;k el, ha a
      <literal>net.inet.ip.portrange.reservedlow</literal> &eacute;s
      <literal>net.inet.ip.portrange.reservedhigh</literal>
      v&aacute;ltoz&oacute;kat egyar&aacute;nt null&aacute;ra
      &aacute;ll&iacute;tjuk.</para>

    <para>A &man.mac.portacl.4; m&#251;k&ouml;d&eacute;s&eacute;nek
      r&eacute;szleteir&#245;l a p&eacute;ld&aacute;kon kereszt&uuml;l
      vagy a megfelel&#245; man oldalakb&oacute;l tudhatunk meg
      t&ouml;bbet.</para>

    <sect2>
      <title>P&eacute;ld&aacute;k</title>

      <para>A k&ouml;vetkez&#245; p&eacute;ld&aacute;k az
	im&eacute;ntieket igyekeznek jobban
	megvil&aacute;g&iacute;tani:</para>

      <screen>&prompt.root; <userinput>sysctl security.mac.portacl.port_high=1023</userinput>
&prompt.root; <userinput>sysctl net.inet.ip.portrange.reservedlow=0 net.inet.ip.portrange.reservedhigh=0</userinput></screen>

      <para>Els&#245;k&eacute;nt be&aacute;ll&iacute;tjuk, hogy a
	&man.mac.portacl.4; vegye &aacute;t a szabv&aacute;nyos
	privilegiz&aacute;lt portok vez&eacute;rl&eacute;s&eacute;t
	&eacute;s letiltjuk a norm&aacute;l &unix;-os
	korl&aacute;toz&aacute;sokat.</para>

      <screen>&prompt.root; <userinput>sysctl security.mac.portacl.suser_exempt=1</userinput></screen>

      <para>A <username>root</username> felhaszn&aacute;l&oacute;t
	azonban nem akarjuk kitenni a h&aacute;zirendnek, ez&eacute;rt a
	<literal>security.mac.portacl.suser_exempt</literal>
	v&aacute;ltoz&oacute;nak egy nem nulla &eacute;rt&eacute;ket
	adunk meg.  A &man.mac.portacl.4; modul most pontosan
	ugyan&uacute;gy m&#251;k&ouml;dik, mint a &unix;-szer&#251;
	rendszerek alap&eacute;rtelmez&eacute;s szerint.</para>

      <screen>&prompt.root; <userinput>sysctl security.mac.portacl.rules=uid:80:tcp:80</userinput></screen>

      <para>A 80-as azonos&iacute;t&oacute;val rendelkez&#245;
	felhaszn&aacute;l&oacute; (aki &aacute;ltal&aacute;ban a
	<username>www</username>) sz&aacute;m&aacute;ra
	enged&eacute;lyezz&uuml;k a 80-as port
	haszn&aacute;lat&aacute;t.  &Iacute;gy a
	<username>www</username> felhaszn&aacute;l&oacute;
	an&eacute;lk&uuml;l k&eacute;pes webszervert futtatni, hogy
	sz&uuml;ks&eacute;ge lenne a <username>root</username>
	jogosults&aacute;gaira.</para>

      <screen>&prompt.root; <userinput>sysctl security.mac.portacl.rules=uid:1001:tcp:110,uid:1001:tcp:995</userinput></screen>

      <para>Az 1001-es azonos&iacute;t&oacute;val rendelkez&#245;
	felhaszn&aacute;l&oacute;nak megengedj&uuml;k, hogy
	elfoglalhassa a 110-es (<quote>pop3</quote>) &eacute;s
	995-&ouml;s (<quote>pop3s</quote>) portokat.  Ennek
	k&ouml;sz&ouml;nhet&#245;en az adott felhaszn&aacute;l&oacute;
	el tud ind&iacute;tani egy szervert, amihez a 110-es &eacute;s
	995-&ouml;s portokon lehet kapcsol&oacute;dni.</para>

    </sect2>
  </sect1>

  <sect1 id="mac-partition">
    <title>A partition MAC-modul</title>

    <indexterm><primary>a fut&oacute; programok
	feloszt&aacute;s&aacute;t megval&oacute;s&iacute;t&oacute;
	MAC-h&aacute;zirend</primary></indexterm>

    <para>A modul neve: <filename>mac_partition.ko</filename></para>

    <para>A rendszermag konfigur&aacute;ci&oacute;s
      be&aacute;ll&iacute;t&aacute;sa: <literal>options
      MAC_PARTITION</literal></para>

    <para>Rendszerind&iacute;t&aacute;si be&aacute;ll&iacute;t&aacute;s:
      <literal>mac_partition_load="YES"</literal></para>

    <para>A &man.mac.partition.4; h&aacute;zirend a fut&oacute;
      programokat c&iacute;mk&eacute;j&uuml;k szerint adott
      <quote>part&iacute;ci&oacute;kra</quote> osztja sz&eacute;t.  Ezt
      legink&aacute;bb egy speci&aacute;lis &man.jail.8;
      megold&aacute;sk&eacute;nt tudjuk elk&eacute;pzelni, noha teljesen
      felesleges &ouml;sszehasonl&iacute;tani a kett&#245;t.</para>

    <para>Ez egy olyan modul, amelyet a &man.loader.conf.5;
      &aacute;llom&aacute;nyba kell felvenni, hogy a
      rendszerind&iacute;t&aacute;sa k&ouml;zben be tudjon
      t&ouml;lt&#245;dni.</para>

    <para>Ezt a h&aacute;zirendet t&ouml;bbs&eacute;g&eacute;ben a
      &man.setpmac.8; seg&eacute;dprogrammal tudjuk
      &aacute;ll&iacute;tgatni, ahogy az majd lentebb
      l&aacute;that&oacute; lesz.  A k&ouml;vetkez&#245;
      <command>sysctl</command>-v&aacute;ltoz&oacute; tartozik
      m&eacute;g a modulhoz:</para>

    <itemizedlist>
      <listitem>
	<para>A <literal>security.mac.partition.enabled</literal>
	  enged&eacute;lyezi a fut&oacute; programok
	  <acronym>MAC</acronym> rendszeren kereszt&uuml;li
	  feloszt&aacute;s&aacute;t.</para>
      </listitem>
    </itemizedlist>

    <para>A h&aacute;zirend enged&eacute;lyez&eacute;s&eacute;vel a
      felhaszn&aacute;l&oacute;k csak a saj&aacute;t programjaikat
      l&aacute;thatj&aacute;k, illetve mindazokat, amelyek az
      &ouml;v&eacute;k&eacute;vel egy part&iacute;ci&oacute;ba
      tartoznak, de a rajta k&iacute;v&uuml;l lev&#245; programokkal
      m&aacute;r nem dolgozhatnak.  P&eacute;ld&aacute;ul, ha egy
      felhaszn&aacute;l&oacute; az <literal>insecure</literal>
      (<quote>nem biztons&aacute;gos</quote>) oszt&aacute;ly tagja,
      akkor ne engedj&uuml;k, hogy hozz&aacute;f&eacute;rhessen a
      <command>top</command> vagy b&aacute;rmilyen m&aacute;s olyan
      parancshoz, amely tov&aacute;bbi fut&oacute; programokat hoz
      l&eacute;tre.</para>

    <para>A <command>setpmac</command> haszn&aacute;lat&aacute;val
      tudunk c&iacute;mk&eacute;ket k&eacute;sz&iacute;teni a
      part&iacute;ci&oacute;khoz &eacute;s programokat rendelni
      hozz&aacute;juk:</para>

    <screen>&prompt.root; <userinput>setpmac partition/13 top</userinput></screen>

    <para>&Iacute;gy a <command>top</command> parancsot
      hozz&aacute;adjuk az <literal>insecure</literal> oszt&aacute;lyban
      lev&#245; felhaszn&aacute;l&oacute;khoz rendelt
      c&iacute;mk&eacute;hez.  Vegy&uuml;k &eacute;szre, hogy az
      <literal>insecure</literal> oszt&aacute;lyba tartoz&oacute;
      felhaszn&aacute;l&oacute;k &aacute;ltal elind&iacute;tott
      &ouml;sszes program a <literal>partition/13</literal>
      c&iacute;mk&eacute;t fogja haszn&aacute;lni.</para>

    <sect2>
      <title>P&eacute;ld&aacute;k</title>

      <para>A k&ouml;vetkez&#245; parancs megmutatja a
part&iacute;ci&oacute;k c&iacute;mk&eacute;it &eacute;s a fut&oacute;
programok list&aacute;j&aacute;t:</para>

      <screen>&prompt.root; <userinput>ps Zax</userinput></screen>

      <para>Ezzel paranccsal pedig megn&eacute;zhetj&uuml;k egy
	m&aacute;sik felhaszn&aacute;l&oacute; programjainak
	c&iacute;mk&eacute;it &eacute;s a felhaszn&aacute;l&oacute;
	&aacute;ltal futtatott programokat:</para>

      <screen>&prompt.root; <userinput>ps -ZU trhodes</userinput></screen>

      <note>
	<para>A felhaszn&aacute;l&oacute;k l&aacute;tj&aacute;k a
	  <username>root</username> c&iacute;mk&eacute;j&eacute;vel
	  fut&oacute; programokat is, hacsak be nem t&ouml;ltj&uuml;k a
	  &man.mac.seeotheruids.4; h&aacute;zirendet.</para>
      </note>

      <para>Ezt a megold&aacute;st &uacute;gy tudn&aacute;nk
	igaz&aacute;n ravaszul felhaszn&aacute;lni, ha
	p&eacute;ld&aacute;ul az <filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyban letiltan&aacute;nk az &ouml;sszes
	szolg&aacute;ltat&aacute;st &eacute;s egy olyan szkripttel
	ind&iacute;tan&aacute;nk el ezeket, amely futtat&aacute;suk
	el&#245;tt be&aacute;ll&iacute;tja hozz&aacute;juk a
	megfelel&#245; c&iacute;mk&eacute;t.</para>

      <note>
	<para>A most k&ouml;vetkez&#245; h&aacute;zirendek a
	  h&aacute;rom alap&eacute;rtelmezett
	  c&iacute;mke&eacute;rt&eacute;k helyett eg&eacute;sz
	  sz&aacute;mokat haszn&aacute;lnak.  Ezekr&#245;l, valamint a
	  r&aacute;juk vonatkoz&oacute;
	  korl&aacute;toz&aacute;sokr&oacute;l a megfelel&#245; modulok
	  man oldalain ismerhet&uuml;nk meg t&ouml;bbet.</para>
      </note>

    </sect2>
  </sect1>

  <sect1 id="mac-mls">
    <title>A t&ouml;bbszint&#251; biztons&aacute;gi MAC-modul</title>

    <indexterm><primary>a t&ouml;bbszint&#251; biztons&aacute;gi
	MAC-h&aacute;zirend</primary></indexterm>

    <para>A modul neve: <filename>mac_mls.ko</filename></para>

    <para>A rendszermag konfigur&aacute;ci&oacute;s
      be&aacute;ll&iacute;t&aacute;sa: <literal>options
      MAC_MLS</literal></para>

    <para>Rendszerind&iacute;t&aacute;si be&aacute;ll&iacute;t&aacute;s:
      <literal>mac_mls_load="YES"</literal></para>

    <para>A &man.mac.mls.4; (MLS, Multi-Level Security) h&aacute;zirend
      az inform&aacute;ci&oacute; szigor&uacute;
      &aacute;ramoltat&aacute;s&aacute;val vez&eacute;rli a rendszerben
      tal&aacute;lhat&oacute; alanyok &eacute;s objektumok k&ouml;zti
      el&eacute;r&eacute;st.</para>

    <para>A <acronym>MLS</acronym> megold&aacute;s&aacute;t
      alkalmaz&oacute; k&ouml;rnyezetekben a rekeszek mellett minden
      alanyra &eacute;s objektumra be kell m&eacute;g
      &aacute;ll&iacute;tanunk egy adott szint&#251;
      <quote>enged&eacute;lyt</quote> is.  Mivel az enged&eacute;lyek
      avagy az &eacute;rz&eacute;kenys&eacute;g szintje ak&aacute;r a
      hatezret is meghaladhatja, egy rendszergazda sz&aacute;m&aacute;ra
      val&oacute;di r&eacute;m&aacute;lomm&aacute; v&aacute;lthat az
      egyes alanyok &eacute;s objektumok prec&iacute;z
      be&aacute;ll&iacute;t&aacute;sa.  Szerencs&eacute;re a
      h&aacute;zirend erre a c&eacute;lra tartalmaz h&aacute;rom
      el&#245;re defini&aacute;lt <quote>instant</quote>
      c&iacute;mk&eacute;t.</para>

    <para>Ezek az <literal>mls/low</literal>,
      <literal>mls/equal</literal> &eacute;s
      <literal>mls/high</literal>.  Mivel a man oldal el&eacute;g
      r&eacute;szletesen kifejti ezeket, ez&eacute;rt itt csak
      &eacute;rint&#245;legesen foglalkozunk vel&uuml;k:</para>

    <itemizedlist>
      <listitem>
	<para>Az <literal>mls/low</literal> c&iacute;mke egy olyan
	  alacsony szint&#251; be&aacute;ll&iacute;t&aacute;st
	  k&eacute;pvisel, amely lehet&#245;v&eacute; teszi, hogy az
	  &ouml;sszes t&ouml;bbi objektum uralja.  Teh&aacute;t
	  b&aacute;rminek is adjuk az <literal>mls/low</literal>
	  c&iacute;mk&eacute;t, alacsony szint&#251; enged&eacute;llyel
	  fog rendelkezni &eacute;s nem lesz k&eacute;pes el&eacute;rni
	  a magasabb szinten lev&#245; inform&aacute;ci&oacute;t.
	  R&aacute;ad&aacute;sul a c&iacute;mke a magasabb szint&#251;
	  objektumok sz&aacute;m&aacute;ra se fogja engedni, hogy
	  inform&aacute;ci&oacute;t k&ouml;z&ouml;lj&ouml;n vagy adjon
	  &aacute;t az alacsonyabb szintek fel&eacute;.</para>
      </listitem>

      <listitem>
	<para>Az <literal>mls/equal</literal> c&iacute;mke olyan
	  objektumok eset&eacute;ben aj&aacute;nlott, amelyeket ki
	  akarunk hagyni a h&aacute;zirend
	  szab&aacute;lyoz&aacute;saib&oacute;l.</para>
      </listitem>

      <listitem>
	<para>Az <literal>mls/high</literal> c&iacute;mke az
	  el&eacute;rhet&#245; legmagasabb szint&#251; enged&eacute;lyt
	  &aacute;br&aacute;zolja.  Az ilyen c&iacute;mk&eacute;vel
	  ell&aacute;tott objektumok a rendszer &ouml;sszes t&ouml;bbi
	  objektuma felett uralommal rendelkeznek, hab&aacute;r az
	  alacsonyabb szint&#251; objektumok fel&eacute; nem
	  k&eacute;pesek inform&aacute;ci&oacute;t
	  k&ouml;zvet&iacute;teni.</para>
      </listitem>
    </itemizedlist>

    <para>Az <acronym>MLS</acronym>:</para>

    <itemizedlist>
      <listitem>
	<para>Egy hierarchikus v&eacute;delmi szinteket
	  &eacute;p&iacute;t fel nem hierarchikus
	  kateg&oacute;ri&aacute;kkal.</para>
      </listitem>

      <listitem>
	<para>Szab&aacute;lyai r&ouml;gz&iacute;tettek: a fels&#245;bb
	  szintek olvas&aacute;sa &eacute;s az als&oacute;bb szintek
	  &iacute;r&aacute;sa egyar&aacute;nt tiltott (az alanyok csak a
	  saj&aacute;t vagy az alatta lev&#245; szinteken lev&#245;
	  objektumokat k&eacute;pesek olvasni, de a felette
	  &aacute;ll&oacute;kat m&aacute;r nem.  Ehhez hasonl&oacute;an
	  az alanyok a vel&uuml;k egyez&#245; vagy a fels&#245;bb
	  szinteket tudj&aacute;k &iacute;rni, de az alattuk
	  lev&#245;ket m&aacute;r nem).</para>
      </listitem>

      <listitem>
	<para>Meg&#245;rzi a titkokat (megakad&aacute;lyozza az adatok
	  alkalmatlan k&ouml;zz&eacute;t&eacute;tel&eacute;t).</para>
      </listitem>

      <listitem>
	<para>Megadja mindazt az alapot, ami sz&uuml;ks&eacute;ges
	  ahhoz, hogy az adatokat t&ouml;bb k&eacute;nyess&eacute;gi
	  szinten, p&aacute;rhuzamosan is kezelni tudjuk
	  (an&eacute;lk&uuml;l, hogy titkos &eacute;s bizalmas
	  inform&aacute;ci&oacute;kat sziv&aacute;rogtatn&aacute;nk
	  ki).</para>
     </listitem>
    </itemizedlist>

    <para>A speci&aacute;lis szolg&aacute;ltat&aacute;sok &eacute;s
      fel&uuml;letek be&aacute;ll&iacute;t&aacute;s&aacute;hoz az
      al&aacute;bbi <command>sysctl</command>-v&aacute;ltoz&oacute;k
      haszn&aacute;lhat&oacute;ak:</para>

    <itemizedlist>
      <listitem>
	<para>A <literal>security.mac.mls.enabled</literal>
	  enged&eacute;lyezi vagy tiltja le az <acronym>MLS</acronym>
	  h&aacute;zirend alkalmaz&aacute;s&aacute;t.</para>
      </listitem>

      <listitem>
	<para>A <literal>security.mac.mls.ptys_equal</literal>
	  hat&aacute;s&aacute;ra l&aacute;tja el
	  <literal>mls/equal</literal> c&iacute;mk&eacute;vel az
	  &ouml;sszes &man.pty.4; eszk&ouml;zt
	  l&eacute;trehoz&aacute;suk sor&aacute;n.</para>
      </listitem>

      <listitem>
	<para>A <literal>security.mac.mls.revocation_enabled</literal>
	  haszn&aacute;lhat&oacute; az alacsonyabb szintre
	  min&#245;s&iacute;tett objektumok
	  hozz&aacute;f&eacute;r&eacute;s&eacute;nek
	  megvon&aacute;s&aacute;ra.</para>
      </listitem>

      <listitem>
	<para>A <literal>security.mac.mls.max_compartments</literal>
	  seg&iacute;ts&eacute;g&eacute;vel adhat&oacute; meg az
	  objektumok &aacute;ltal haszn&aacute;lt rekeszek
	  szintj&eacute;nek maxim&aacute;lis sz&aacute;ma.
	  L&eacute;nyeg&eacute;ben a rekeszek rendszerben
	  enged&eacute;lyezett maximuma.</para>
      </listitem>
    </itemizedlist>

    <para>Az <acronym>MLS</acronym> c&iacute;mk&eacute;it a
      &man.setfmac.8; paranccsal tudjuk m&oacute;dos&iacute;tani.  Egy
      ehhez hasonl&oacute; paranccsal tudunk egy objektumhoz
      c&iacute;mk&eacute;t rendelni:</para>

    <screen>&prompt.root; <userinput>setfmac mls/5 <replaceable>pr&oacute;ba</replaceable></userinput></screen>

    <para>A <filename><replaceable>pr&oacute;ba</replaceable></filename>
      &aacute;llom&aacute;ny
      <acronym>MLS</acronym>-c&iacute;mk&eacute;j&eacute;t az
      al&aacute;bbi paranccsal k&eacute;rhetj&uuml;k le:</para>

    <screen>&prompt.root; <userinput>getfmac <replaceable>pr&oacute;ba</replaceable></userinput></screen>

    <para>Ezzel &ouml;ssze is foglaltuk az <acronym>MLS</acronym>
      h&aacute;zirend lehet&#245;s&eacute;geit.  Az eddigiket &uacute;gy
      is megoldhatjuk, hogy l&eacute;trehozunk egy k&ouml;zponti
      h&aacute;zirendet az <filename class="directory">/etc</filename>
      k&ouml;nyvt&aacute;rban, amelyben megadjuk az
      <acronym>MLS</acronym> h&aacute;zirendhez tartoz&oacute;
      inform&aacute;ci&oacute;kat, majd &aacute;tadjuk a
      <command>setfmac</command> parancsnak.  Erre a m&oacute;dszerre
      majd a h&aacute;zirendek bemutat&aacute;sa ut&aacute;n ker&uuml;l
      sor.</para>

    <sect2>
      <title>A k&eacute;nyess&eacute;g
	meg&aacute;llap&iacute;t&aacute;sa</title>

      <para>A t&ouml;bbszint&#251; biztons&aacute;gi h&aacute;zirend
	haszn&aacute;lat&aacute;val a rendszergazda a k&eacute;nyes
	inform&aacute;ci&oacute;k &aacute;raml&aacute;s&aacute;nak
	ir&aacute;ny&aacute;t tudja befoly&aacute;solni.  A
	megold&aacute;s <quote>felfele nem lehet olvasni, lefele nem
	lehet &iacute;rni</quote> jellege folyt&aacute;n alapb&oacute;l
	mindent a legalacsonyabb szintre helyez.  &Iacute;gy
	teh&aacute;t kezdetben minden el&eacute;rhet&#245;, &eacute;s a
	rendszergazd&aacute;nak lassank&eacute;nt ebb&#245;l az
	&aacute;llapotb&oacute;l elindulva kell behangolnia az erre
	alapoz&oacute; v&eacute;delmi rendszert az
	inform&aacute;ci&oacute; bizalmass&aacute;g&aacute;nak
	megfelel&#245;en.</para>

      <para>A fentebb eml&iacute;tett h&aacute;rom alapvet&#245;
	c&iacute;mke mellett a rendszergazd&aacute;nak
	val&oacute;sz&iacute;n&#251;leg sz&uuml;ks&eacute;ge lesz a
	felhaszn&aacute;l&oacute;k csoportos&iacute;t&aacute;s&aacute;ra
	&eacute;s a csoportok k&ouml;zti
	inform&aacute;ci&oacute;&aacute;raml&aacute;s
	szab&aacute;lyoz&aacute;s&aacute;ra.  A inform&aacute;ci&oacute;
	bizalmass&aacute;g&aacute;nak szintjeit minden bizonnyal
	k&ouml;nnyebb szavakkal beazonos&iacute;tani,
	p&eacute;ld&aacute;ul <literal>Confidential</literal>
	(bizalmas), <literal>Secret</literal> (titkos) vagy <literal>Top
	Secret</literal> (szigor&uacute;an bizalmas).  Bizonyos
	helyzetekben el&eacute;g csak a fut&oacute; projekteknek
	megfelel&#245;en kialak&iacute;tani csoportokat.  Az
	oszt&aacute;lyoz&aacute;s konkr&eacute;t
	m&oacute;dszer&eacute;t&#245;l f&uuml;ggetlen&uuml;l azonban
	mindig elmondhat&oacute;, hogy el&#245;zetes tervez&eacute;s
	n&eacute;lk&uuml;l sose &aacute;ll&iacute;tsunk &ouml;ssze ilyen
	fajs&uacute;ly&uacute; h&aacute;zirendet.</para>

      <para>Ezt a biztons&aacute;gi modult p&eacute;ld&aacute;ul webes
	&uuml;zletek eset&eacute;n &eacute;rdemes haszn&aacute;lnunk, ahol
	egy &aacute;llom&aacute;nyszerver t&aacute;rolja a c&eacute;g
	fontos adatait &eacute;s p&eacute;nz&uuml;gyi
	inform&aacute;ci&oacute;it.  Viszont egy k&eacute;t vagy
	h&aacute;rom felhaszn&aacute;l&oacute;val &uuml;zemel&#245;
	munka&aacute;llom&aacute;s eset&eacute;ben szinte teljesen
	felesleges gondolkodni rajta.</para>
    </sect2>
  </sect1>

  <sect1 id="mac-biba">
    <title>A Biba MAC-modul</title>

    <indexterm><primary>a Biba s&eacute;rtetlens&eacute;gi
	MAC-h&aacute;zirend</primary></indexterm>

    <para>A modul neve: <filename>mac_biba.ko</filename></para>

    <para>A rendszermag konfigur&aacute;ci&oacute;s
      be&aacute;ll&iacute;t&aacute;sa: <literal>options
      MAC_BIBA</literal></para>

    <para>Rendszerind&iacute;t&aacute;si be&aacute;ll&iacute;t&aacute;s:
      <literal>mac_biba_load="YES"</literal></para>

    <para>A &man.mac.biba.4; modul a <acronym>MAC</acronym> Biba
      elnevez&eacute;s&#251; h&aacute;zirendj&eacute;t t&ouml;lti be.
      Ez legink&aacute;bb az <acronym>MLS</acronym> h&aacute;zirendhez
      hasonl&iacute;t, azzal a kiv&eacute;tellel, hogy az
      inform&aacute;ci&oacute; &aacute;ramoltat&aacute;s&aacute;ra
      vonatkoz&oacute; szab&aacute;lyok n&eacute;mileg visszafel&eacute;
      m&#251;k&ouml;dnek.  Teh&aacute;t m&iacute;g az
      <acronym>MLS</acronym> h&aacute;zirend a k&eacute;nyes
      inform&aacute;ci&oacute; &aacute;raml&aacute;s&aacute;t
      felfel&eacute; nem engedi, addig ez a lefel&eacute;
      ir&aacute;nyul&oacute; &aacute;raml&aacute;st
      &aacute;ll&iacute;tja meg.  Emiatt ez a szakasz
      tulajdonk&eacute;ppen mind a k&eacute;t h&aacute;zirendre
      &eacute;rv&eacute;nyes&uuml;l.</para>

    <para>A Biba alkalmaz&aacute;sa sor&aacute;n minden alany &eacute;s
      objektum egy <quote>s&eacute;rtetlens&eacute;get</quote>
      jelk&eacute;pez&#245; c&iacute;mk&eacute;t visel.  Ezek a
      c&iacute;mk&eacute;k hierarchikus oszt&aacute;lyokb&oacute;l, nem
      peidg hiearchikus &ouml;sszetev&#245;kb&#245;l sz&aacute;rmaznak.
      Egy objektum vagy alany s&eacute;rtetlens&eacute;ge a
      besorol&aacute;s&aacute;val n&ouml;vekszik.</para>

    <para>A modul a <literal>biba/low</literal>,
      <literal>biba/equal</literal> &eacute;s
      <literal>biba/high</literal> c&iacute;mk&eacute;ket ismeri, vagyis
      b&#245;vebben:</para>

    <itemizedlist>
      <listitem>
	<para>A <literal>biba/low</literal> c&iacute;mke tekinthet&#245;
	  az alanyok &eacute;s objektumok legkisebb
	  s&eacute;rtetlens&eacute;g&eacute;nek.  Ha
	  be&aacute;ll&iacute;tjuk egy objektumra vagy alanyra, akkor
	  ezzel megakad&aacute;lyozzuk, hogy nagyobb
	  s&eacute;rtetlens&eacute;g&#251; objektumokat vagy alanyokat
	  tudjanak &iacute;rni.  Ett&#245;l f&uuml;ggetlen&uuml;l
	  azonban m&eacute;g k&eacute;pesek olvasni ezeket.</para>
      </listitem>

      <listitem>
	<para>A <literal>biba/equal</literal> c&iacute;mke
	  haszn&aacute;lata kiz&aacute;r&oacute;lag olyan objektumok
	  eset&eacute;ben javasolt, amelyeket ki akarunk vonni a
	  h&aacute;zirend al&oacute;l.</para>
      </listitem>

      <listitem>
	<para>A <literal>biba/high</literal> c&iacute;mke megengedi az
	  alacsonyabb szinteken lev&#245; objektumokat
	  &iacute;r&aacute;s&aacute;t, de az olvas&aacute;s&aacute;t
	  viszont m&aacute;r nem.  Ezt a c&iacute;mk&eacute;t olyan
	  objektumra &eacute;rdemes ragasztani, amelyek hat&aacute;ssal
	  vannak az eg&eacute;sz rendszer
	  s&eacute;rtetlens&eacute;g&eacute;re.</para>
      </listitem>
   </itemizedlist>

    <para>A Biba:</para>

    <itemizedlist>
      <listitem>
	<para>Hierarchikus s&eacute;rtetlens&eacute;gi szinteket
	  &eacute;p&iacute;t fel nem hiearchikus
	  s&eacute;rtetlens&eacute;gi kateg&oacute;ri&aacute;kkal
	  kieg&eacute;sz&iacute;tve.</para>
      </listitem>

      <listitem>
	<para>Szab&aacute;lyai r&ouml;gz&iacute;tettek: az fels&#245;bb
	  szintek &iacute;r&aacute;sa &eacute;s az als&oacute;bb szintek
	  olvas&aacute;sa egyar&aacute;nt tilos (pontosan az
	  <acronym>MLS</acronym> ellent&eacute;te).  Egy alany csak a
	  saj&aacute;t vagy az alatta &aacute;ll&oacute; szinteken
	  szerepl&#245; objektumokat tudja &iacute;rni.  Ehhez
	  hasonl&oacute; m&oacute;don egy alany csak a saj&aacute;t vagy
	  az afeletti szinten tal&aacute;lhat&oacute; objektumokat
	  k&eacute;pes olvasni.</para>
      </listitem>

      <listitem>
	<para>Az adatok s&eacute;rtetlens&eacute;g&eacute;t
	  biztos&iacute;tja (megakad&aacute;lyozza az alkalmatlan
	  m&oacute;dos&iacute;t&aacute;sukat)</para>
      </listitem>

      <listitem>
	<para>S&eacute;rtetlens&eacute;gi szinteket hat&aacute;roz meg
	  (szemben az MLS k&eacute;nyess&eacute;gi szintjeivel).</para>
      </listitem>
    </itemizedlist>

    <para>Az al&aacute;bbi
      <command>sysctl</command>-v&aacute;ltoz&oacute;kkal
      vez&eacute;rlhetj&uuml;k a Biba h&aacute;zirend
      m&#251;k&ouml;d&eacute;s&eacute;t:</para>

    <itemizedlist>
      <listitem>
	<para>A <literal>security.mac.biba.enabled</literal>
	  haszn&aacute;lhat&oacute; a c&eacute;lrendszeren a Biba
	  h&aacute;zirend enged&eacute;lyez&eacute;re vagy
	  letilt&aacute;s&aacute;ra.</para>
      </listitem>

      <listitem>
	<para>A <literal>security.mac.biba.ptys_equal</literal>
	  seg&iacute;ts&eacute;g&eacute;vel kapcsolhatjuk ki a Biba
	  h&aacute;zirend alkalmaz&aacute;s&aacute;t a &man.pty.4;
	  eszk&ouml;z&ouml;k&ouml;n.</para>
      </listitem>

      <listitem>
	<para>A <literal>security.mac.biba.revocation_enabled</literal>
	  hat&aacute;s&aacute;ra visszavon&oacute;dik az objektumok
	  hozz&aacute;f&eacute;r&eacute;se, ha az r&aacute;juk
	  vonatkoz&oacute; c&iacute;mke megv&aacute;ltozik.</para>
      </listitem>
    </itemizedlist>

    <para>A rendszer objektumain a Biba h&aacute;zirendet a
      <command>setfmac</command> &eacute;s <command>getfmac</command>
      paranccsal &aacute;ll&iacute;thatjuk be:</para>

    <screen>&prompt.root; <userinput>setfmac biba/low <replaceable>pr&oacute;ba</replaceable></userinput>
&prompt.root; <userinput>getfmac <replaceable>pr&oacute;ba</replaceable></userinput>
<replaceable>pr&oacute;ba</replaceable>: biba/low</screen>

    <sect2>
      <title>A s&eacute;rtetlens&eacute;g
	meg&aacute;llap&iacute;t&aacute;sa</title>

      <para>A s&eacute;rtetlens&eacute;g a
	k&eacute;nyess&eacute;gt&#245;l elt&eacute;r&#245;en azt igyekszik
	szavatolni, hogy az inform&aacute;ci&oacute;t
	illet&eacute;ktelenek nem m&oacute;dos&iacute;tj&aacute;k.  Ez
	egyar&aacute;nt vonatkozik az alanyok, objektumok &eacute;s a
	kett&#245; k&ouml;z&ouml;tt &aacute;tadott adatokra.
	Gondoskodik r&oacute;la, hogy a felhaszn&aacute;l&oacute;k csak
	olyan inform&aacute;ci&oacute;kat v&aacute;ltoztathathassanak
	meg, s&#245;t csak olyat &eacute;rhessenek el, amire
	t&eacute;nylegesen sz&uuml;ks&eacute;g&uuml;k van.</para>

      <para>A &man.mac.biba.4; biztons&aacute;gi modul megengedi a
	rendszergazda sz&aacute;m&aacute;ra, hogy megmondja milyen
	&aacute;llom&aacute;nyokat &eacute;s programokat l&aacute;that
	vagy h&iacute;vhat meg a felhaszn&aacute;l&oacute; vagy
	felhaszn&aacute;l&oacute;k egy csoportja, mik&ouml;zben
	biztos&iacute;tja, hogy az &aacute;llom&aacute;nyok &eacute;s a
	programok nincsenek kit&eacute;ve semmilyen
	fenyeget&eacute;snek, &eacute;s a rendszer az adott
	felhaszn&aacute;l&oacute;ban vagy felhaszn&aacute;l&oacute;i
	csoportban megb&iacute;zik.</para>

      <para>A kezdeti tervez&eacute;si f&aacute;zis sor&aacute;n a
	rendszergazd&aacute;nak fel kell k&eacute;sz&uuml;lnie arra,
	hogy a felhaszn&aacute;l&oacute;kat oszt&aacute;lyokra,
	szintekre &eacute;s ter&uuml;letekre kell osztania.  A
	felhaszn&aacute;l&oacute;k nem csak adatokhoz, hanem
	programokhoz &eacute;s seg&eacute;dprogramokhoz sem lesznek
	k&eacute;pesek hozz&aacute;f&eacute;rni, mind az
	ind&iacute;t&aacute;suk el&#245;tt &eacute;s ut&aacute;n.  A
	modul aktiv&aacute;l&aacute;s ut&aacute;n a rendszer
	alapb&oacute;l r&ouml;gt&ouml;n a legmagasabb
	c&iacute;mk&eacute;t kapja meg, &eacute;s teljesen a
	rendszergazd&aacute;ra h&aacute;rul, hogy a
	felhaszn&aacute;l&oacute;khoz be&aacute;ll&iacute;tsa a
	k&uuml;l&ouml;nf&eacute;le oszt&aacute;lyokat &eacute;s
	szinteket.  A fentebb le&iacute;rt enged&eacute;lyszintek
	helyett ak&aacute;r t&eacute;m&aacute;k alapj&aacute;n is
	tervezhet&uuml;nk.  P&eacute;ld&aacute;ul
	kiz&aacute;r&oacute;lag csak a fejleszt&#245;k
	sz&aacute;m&aacute;ra engedj&uuml;k meg a
	forr&aacute;sk&oacute;d m&oacute;dos&iacute;t&aacute;s&aacute;t,
	a forr&aacute;sk&oacute;d leford&iacute;t&aacute;s&aacute;t
	&eacute;s a t&ouml;bbi fejleszt&#245;eszk&ouml;z
	haszn&aacute;lat&aacute;t.  Ek&ouml;zben a t&ouml;bbi
	felhaszn&aacute;l&oacute;t felosztjuk tov&aacute;bbi
	csoportokba, p&eacute;ld&aacute;ul tesztel&#245;kre &eacute;s
	tervez&#245;kre, vagy meghagyjuk ezeket &aacute;tlagos
	felhaszn&aacute;l&oacute;knak, akik csak olvas&aacute;si joggal
	rendelkeznek.</para>

      <para>A megval&oacute;s&iacute;tott biztons&aacute;gi modell
	term&eacute;szet&eacute;b&#245;l fakad&oacute;an egy
	kev&eacute;sb&eacute; s&eacute;rtetlenebb alany nem
	&iacute;rhatja a sokkal s&eacute;rtetlenebb alanyokat, a sokkal
	s&eacute;rtetlenebb alanyok pedig nem &eacute;rhetik el vagy
	olvashatj&aacute;k a kev&eacute;sb&eacute; s&eacute;rtetlen
	objektumokat.  A lehet&#245; legkisebb oszt&aacute;ly&uacute;
	c&iacute;mke be&aacute;ll&iacute;t&aacute;s&aacute;val
	gyakorlatilag el&eacute;rhetetlenn&eacute; tesz&uuml;k az
	alanyok sz&aacute;m&aacute;ra.  A modult
	val&oacute;sz&iacute;n&#251;leg egy korl&aacute;tozott
	webszerver, fejleszt&#245;i- &eacute;s tesztg&eacute;pek vagy
	forr&aacute;sk&oacute;d t&aacute;rol&aacute;s&aacute;ra
	sz&aacute;nt k&ouml;rnyezetben &eacute;rdemes bevetni.
	Ann&aacute;l es&eacute;lytelenebb a haszn&aacute;lata viszont
	egy munka&aacute;llom&aacute;s, &uacute;tv&aacute;laszt&oacute;
	vagy h&aacute;l&oacute;zati t&#251;zfal eset&eacute;ben.</para>

    </sect2>
  </sect1>

  <sect1 id="mac-lomac">
    <title>A LOMAC MAC-modul</title>

    <indexterm><primary>a LOMAC
      MAC-h&aacute;zirend</primary></indexterm>

    <para>A modul neve: <filename>mac_lomac.ko</filename></para>

    <para>A rendszermag konfigur&aacute;ci&oacute;s
      be&aacute;ll&iacute;t&aacute;sa: <literal>options
      MAC_LOMAC</literal></para>

    <para>Rendszerind&iacute;t&aacute;s be&aacute;ll&iacute;t&aacute;s:
      <literal>mac_lomac_load="YES"</literal></para>

    <para>Elt&eacute;r&#245;en a <acronym>MAC</acronym> Biba
      h&aacute;zirendj&eacute;t&#245;l, a &man.mac.lomac.4; egyed&uuml;l
      csak azut&aacute;n engedi el&eacute;rni az kev&eacute;sb&eacute;
      s&eacute;rtetlenebb objektumokat, miut&aacute;n
      cs&ouml;kkentj&uuml;k a s&eacute;rtetlens&eacute;g szintj&eacute;t
      &eacute;s ezzel betartjuk a s&eacute;rtetlens&eacute;gre
      vonatkoz&oacute; szab&aacute;lyokat.</para>

    <para>A gyenge v&iacute;zjeles s&eacute;rtetlens&eacute;gi
      h&aacute;zirend <acronym>MAC</acronym> alap&uacute;
      v&aacute;ltozat&aacute;t nem szabad &ouml;sszet&eacute;veszteni a
      kor&aacute;bbi &man.lomac.4; implement&aacute;ci&oacute;val, amely
      majdnem ugyan&uacute;gy m&#251;k&ouml;dik, mint a Biba, azzal az a
      kiv&eacute;tellel, hogy a lebeg&#245; c&iacute;mk&eacute;kkel
      t&aacute;mogatjuk az alanyok lefokoz&aacute;s&aacute;t egy
      kiseg&iacute;t&#245; oszt&aacute;ly rekesz&eacute;n
      kereszt&uuml;l.  Ez a m&aacute;sodlagos rekesz
      <literal>[<replaceable>kiseg&iacute;t&#245;_oszt&aacute;ly</replaceable>]</literal>
      alak&uacute;.  Teh&aacute;t amikor egy kiseg&iacute;t&#245;
      oszt&aacute;llyal adjuk meg a lomac h&aacute;zirendet, valahogy
      &iacute;gy n&eacute;z ki: <literal>lomac/10[2]</literal>, ahol a
      kettes (2) sz&aacute;m ez a kiseg&iacute;t&eacute;sre
      haszn&aacute;lt oszt&aacute;ly.</para>

    <para>A <acronym>MAC</acronym> LOMAC h&aacute;zirendje az
      &ouml;sszes rendszerszint&#251; objektum eset&eacute;ben
      jelenlev&#245; s&eacute;rtetlens&eacute;gi
      c&iacute;mk&eacute;z&eacute;sen alapszik, megengedve az alanyok
      sz&aacute;m&aacute;ra, hogy az kev&eacute;sb&eacute;
      s&eacute;rtetlen objektumokat olvasni tudj&aacute;k, majd a
      c&iacute;mke lemin&#245;s&iacute;t&eacute;s&eacute;vel az alany
      meg tudja akad&aacute;lyozni a sokkal s&eacute;rtetlenebbnek
      &iacute;t&eacute;lt objektumok j&ouml;v&#245;beni
      &iacute;r&aacute;s&aacute;t.  Ez az a fentebb t&aacute;rgyalt
      <literal>[<replaceable>kiseg&iacute;t&#245;_oszt&aacute;ly</replaceable>]</literal>
      opci&oacute;, ez&eacute;rt ez a modul a
      Bib&aacute;&eacute;n&aacute;l t&ouml;bb kompatibilit&aacute;st
      &eacute;s kevesebb kezdeti be&aacute;ll&iacute;t&aacute;st
      ig&eacute;nyel.</para>

    <sect2>
      <title>P&eacute;ld&aacute;k</title>

      <para>Hasonl&oacute;an a Biba &eacute;s <acronym>MLS</acronym>
	h&aacute;zirendekn&eacute;l megszokottakhoz, a
	<command>setfmac</command> &eacute;s <command>setpmac</command>
	seg&eacute;dprogramok haszn&aacute;lhat&oacute;ak a
	c&iacute;mk&eacute;k
	hozz&aacute;rendel&eacute;s&eacute;hez:</para>

      <screen>&prompt.root; <userinput>setfmac /usr/home/trhodes lomac/high[low]</userinput>
&prompt.root; <userinput>getfmac /usr/home/trhodes</userinput> lomac/high[low]</screen>

      <para>Itt a kiseg&iacute;t&#245; oszt&aacute;ly a
	<literal>low</literal>.  Ezt csak a LOMAC
	<acronym>MAC</acronym>-h&aacute;zirendn&eacute;l adhatjuk
	meg.</para>

    </sect2>
  </sect1>

  <sect1 id="mac-implementing">
    <title>A Nagios elz&aacute;r&aacute;sa a MAC rendszerrel</title>

    <indexterm><primary>a Nagios elz&aacute;r&aacute;sa a MAC
      rendszerrel</primary></indexterm>

    <para>A most k&ouml;vetkez&#245; bemutat&oacute;ban a
      <acronym>MAC</acronym> moduljainak &eacute;s a megfelel&#245;en
      be&aacute;ll&iacute;tott h&aacute;zirendek
      haszn&aacute;lat&aacute;val fogunk kialak&iacute;tani egy
      biztons&aacute;gos k&ouml;rnyezetet.  Ne feledj&uuml;k azonban,
      hogy ez csup&aacute;n egy &aacute;rtatlan pr&oacute;ba &eacute;s
      nem pedig a mindenki biztons&aacute;gi agg&aacute;lyait
      kiel&eacute;g&iacute;t&#245; legv&eacute;gs&#245; megold&aacute;s.
      Ha egy h&aacute;zirendet vakon &eacute;p&iacute;t&uuml;nk fel
      &eacute;s nem &eacute;rtj&uuml;k meg a
      m&#251;k&ouml;d&eacute;s&eacute;t, az soha nem v&aacute;lik
      hasznunkra, &eacute;s egy &eacute;les helyzetben
      katasztrof&aacute;lis hat&aacute;ssal j&aacute;rhat.</para>

    <para>A folyamat megkezd&eacute;se el&#245;tt be kell
      &aacute;ll&iacute;tanunk a <literal>multilabel</literal>
      opci&oacute;t mindegyik &aacute;llom&aacute;nyrendszerre, a
      fejezet elej&eacute;n le&iacute;rtaknak megfelel&#245;en.  Ha ezt
      a l&eacute;p&eacute;st kihagyjuk, akkor hib&aacute;kat kapunk.
      Tov&aacute;bb&aacute; m&eacute;g az el&#245;k&eacute;sz&uuml;let
      r&eacute;szek&eacute;nt ne felejts&uuml;nk el gondoskodni a
      <filename role="package">net-mngt/nagios-plugins</filename>,
      <filename role="package">net-mngt/nagios</filename> &eacute;s
      <filename role="package">www/apache13</filename> portok
      telep&iacute;t&eacute;s&eacute;r&#245;l,
      be&aacute;ll&iacute;t&aacute;s&aacute;r&oacute;l &eacute;s
      megfelel&#245; m&#251;k&ouml;d&eacute;s&eacute;r&#245;l
      sem.</para>

    <sect2>
      <title>A nem megb&iacute;zhat&oacute; felhaszn&aacute;l&oacute;k
	oszt&aacute;ly&aacute;nak l&eacute;trehoz&aacute;sa</title>

      <para>Az elj&aacute;r&aacute;st kezdj&uuml;k az al&aacute;bbi
	(insecure) felhaszn&aacute;l&oacute;i oszt&aacute;ly
	hozz&aacute;ad&aacute;s&aacute;val az
	<filename>/etc/login.conf</filename>
	&aacute;llom&aacute;nyban:</para>

      <programlisting>insecure:\
:copyright=/etc/COPYRIGHT:\
:welcome=/etc/motd:\
:setenv=MAIL=/var/mail/$,BLOCKSIZE=K:\
:path=~/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin
:manpath=/usr/share/man /usr/local/man:\
:nologin=/usr/sbin/nologin:\
:cputime=1h30m:\
:datasize=8M:\
:vmemoryuse=100M:\
:stacksize=2M:\
:memorylocked=4M:\
:memoryuse=8M:\
:filesize=8M:\
:coredumpsize=8M:\
:openfiles=24:\
:maxproc=32:\
:priority=0:\
:requirehome:\
:passwordtime=91d:\
:umask=022:\
:ignoretime@:\
:label=biba/10(10-10):</programlisting>

      <para>Valamint eg&eacute;sz&iacute;ts&uuml;k ki az
	alap&eacute;rtelmezett (default) felhaszn&aacute;l&oacute;i
	oszt&aacute;lyt a k&ouml;vetkez&#245; sorral:</para>

      <programlisting>:label=biba/high:</programlisting>

      <para>Ahogy ezzel elk&eacute;sz&uuml;lt&uuml;nk, az
	hozz&aacute;tartoz&oacute; adatb&aacute;zis &uacute;jb&oacute;li
	legy&aacute;rt&aacute;s&aacute;hoz a k&ouml;vetkez&#245;
	parancsot kell kiadnunk:</para>

      <screen>&prompt.root; <userinput>cap_mkdb /etc/login.conf</userinput></screen>

    </sect2>

    <sect2>
      <title>A rendszerind&iacute;t&aacute;ssal kapcsolatos
	be&aacute;ll&iacute;t&aacute;sok</title>

      <para>M&eacute;g ne ind&iacute;tsuk &uacute;jra a
	sz&aacute;m&iacute;t&oacute;g&eacute;pet, csup&aacute;n a
	sz&uuml;ks&eacute;ges modulok bet&ouml;lt&eacute;s&eacute;hez
	b&#245;v&iacute;ts&uuml;k ki a
	<filename>/boot/loader.conf</filename> &aacute;llom&aacute;nyt
	az al&aacute;bbi sorokkal:</para>

      <programlisting>mac_biba_load="YES"
mac_seeotheruids_load="YES"</programlisting>

    </sect2>

    <sect2>
      <title>A felhaszn&aacute;l&oacute;k
	be&aacute;ll&iacute;t&aacute;sa</title>

      <para>Soroljuk be a <username>root</username>
	felhaszn&aacute;l&oacute;t a <literal>default</literal>
	oszt&aacute;lyba:</para>

      <screen>&prompt.root; <userinput>pw usermod root -L default</userinput></screen>

      <para>Az &ouml;sszes <username>root</username>
	felhaszn&aacute;l&oacute;n k&iacute;v&uuml;li
	hozz&aacute;f&eacute;r&eacute;snek vagy
	rendszerfelhaszn&aacute;l&oacute;nak most kelleni fog egy
	bejelentkez&eacute;si oszt&aacute;ly.  A bejelentkez&eacute;si
	oszt&aacute;lyra egy&eacute;bk&eacute;nt is sz&uuml;ks&eacute;g
	lesz, mert ennek hi&aacute;ny&aacute;ban a
	felhaszn&aacute;l&oacute;k m&eacute;g az olyan egyszer&#251;
	parancsokat sem tudj&aacute;k kiadni, mint p&eacute;ld&aacute;ul
	a &man.vi.1;.  A k&ouml;vetkez&#245; <command>sh</command>
	szkript nek&uuml;nk erre pontosan megfelel:</para>

      <screen>&prompt.root; <userinput>for x in `awk -F: '($3 &gt;= 1001) &amp;&amp; ($3 != 65534) { print $1 }' \</userinput>
	<userinput>/etc/passwd`; do pw usermod $x -L default; done;</userinput></screen>

      <para>Helyezz&uuml;k &aacute;t a <username>nagios</username>
	&eacute;s <username>www</username> felhaszn&aacute;l&oacute;kat az
	insecure oszt&aacute;lyba:</para>

      <screen>&prompt.root; <userinput>pw usermod nagios -L insecure</userinput></screen>
      <screen>&prompt.root; <userinput>pw usermod www -L insecure</userinput></screen>      

    </sect2>

    <sect2>
      <title>A <filename>contexts</filename> &aacute;llom&aacute;ny
	l&eacute;trehoz&aacute;sa</title>

      <para>Most csin&aacute;lnunk kell egy
	<filename>contexts</filename> &aacute;llom&aacute;nyt.  Ebben
	p&eacute;ld&aacute;ban az
	<filename>/etc/policy.contexts</filename>
	&aacute;llom&aacute;nyt haszn&aacute;ljuk.</para>

      <programlisting># Ez a rendszer alap&eacute;rtelmezett BIBA h&aacute;zirendje.

# Rendszer:
/var/run                        biba/equal
/var/run/*                      biba/equal

/dev                            biba/equal
/dev/*                          biba/equal

/var				biba/equal
/var/spool                      biba/equal
/var/spool/*                    biba/equal

/var/log                        biba/equal
/var/log/*                      biba/equal

/tmp				biba/equal
/tmp/*				biba/equal
/var/tmp			biba/equal
/var/tmp/*			biba/equal

/var/spool/mqueue		biba/equal
/var/spool/clientmqueue		biba/equal

# Nagios:
/usr/local/etc/nagios
/usr/local/etc/nagios/*         biba/10

/var/spool/nagios               biba/10
/var/spool/nagios/*             biba/10

# Apache:
/usr/local/etc/apache           biba/10
/usr/local/etc/apache/*         biba/10</programlisting>

      <para>Ezzel a h&aacute;zirenddel az inform&aacute;ci&oacute;
	&aacute;raml&aacute;s&aacute;t szab&aacute;lyozzuk.  Ebben a
	konkr&eacute;t konfigur&aacute;ci&oacute;ban a
	felhaszn&aacute;l&oacute;k, a <username>root</username>
	&eacute;s t&aacute;rsai, nem f&eacute;rhetnek hozz&aacute; a
	<application>Nagios</application>hoz.  A
	<application>Nagios</application>
	be&aacute;ll&iacute;t&aacute;sait t&aacute;rol&oacute;
	&aacute;llom&aacute;nyok &eacute;s a neve alatt fut&oacute;
	programok &iacute;gy teljesen k&uuml;l&ouml;nv&aacute;lnak
	vagyis elz&aacute;r&oacute;dnak a rendszer t&ouml;bbi
	r&eacute;sz&eacute;t&#245;l.</para>

      <para>Ez az im&eacute;nti &aacute;llom&aacute;ny a
	k&ouml;vetkez&#245; parancs hat&aacute;s&aacute;ra ker&uuml;l be
	a rendszer&uuml;nkbe:</para>

      <screen>&prompt.root; <userinput>setfsmac -ef /etc/policy.contexts /</userinput>
&prompt.root; <userinput>setfsmac -ef /etc/policy.contexts /</userinput></screen>

      <note>
	<para>A fenti &aacute;llom&aacute;nyrendszer
	  fel&eacute;p&iacute;t&eacute;se a k&ouml;rnyezett&#245;l
	  f&uuml;gg&#245;en elt&eacute;rhet, hab&aacute;r ezt minden
	  egyes &aacute;llom&aacute;nyrendszeren le kell
	  futtatni.</para>
      </note>

      <para>Az <filename>/etc/mac.conf</filename>
	&aacute;llom&aacute;nyt t&ouml;rzs&eacute;t a
	k&ouml;vetkez&#245;k&eacute;ppen kell m&eacute;g
	&aacute;t&iacute;rnunk:</para>

      <programlisting>default_labels file ?biba
default_labels ifnet ?biba
default_labels process ?biba
default_labels socket ?biba</programlisting>

    </sect2>

    <sect2>
      <title>A h&aacute;l&oacute;zat enged&eacute;lyez&eacute;se</title>

      <para>Tegy&uuml;k hozz&aacute; a k&ouml;vetkez&#245; sort az
	<filename>/boot/loader.conf</filename>
	&aacute;llom&aacute;nyhoz:</para>

      <programlisting>security.mac.biba.trust_all_interfaces=1</programlisting>

      <para>Ezt az al&aacute;bbi be&aacute;ll&iacute;t&aacute;st pedig
	sz&uacute;rjuk be az <filename>rc.conf</filename>
	&aacute;llom&aacute;nyba a h&aacute;l&oacute;zati k&aacute;rtya
	konfigur&aacute;ci&oacute;j&aacute;hoz.  Amennyiben az
	internetet <acronym>DHCP</acronym>
	seg&iacute;ts&eacute;g&eacute;vel &eacute;rj&uuml;k el, ezt a
	be&aacute;ll&iacute;t&aacute;st manu&aacute;lisan kell megtenni
	minden rendszerind&iacute;t&aacute;s alkalm&aacute;val:</para>

      <programlisting>maclabel biba/equal</programlisting>

    </sect2>

    <sect2>
      <title>A konfigur&aacute;ci&oacute;
	kipr&oacute;b&aacute;l&aacute;sa</title>

      <indexterm><primary>a MAC be&aacute;ll&iacute;t&aacute;sainak
	kipr&oacute;b&aacute;l&aacute;sa</primary></indexterm>

      <para>Gondoskodjunk r&oacute;la, hogy a webszerver &eacute;s a
	<application>Nagios</application> nem fog elindulni a rendszer
	ind&iacute;t&aacute;sakor, majd ind&iacute;tsuk &uacute;jra a
	g&eacute;pet.  Ezenk&iacute;v&uuml;l m&eacute;g
	ellen&#245;rizz&uuml;k, hogy a <username>root</username> ne
	tudjon hozz&aacute;f&eacute;rni a
	<application>Nagios</application>
	be&aacute;ll&iacute;t&aacute;sait tartalmaz&oacute;
	k&ouml;nyvt&aacute;rhoz.  Ha a <username>root</username>
	k&eacute;pes kiadni egy &man.ls.1; parancsot a
	<filename>/var/spool/nagios</filename> k&ouml;nyvt&aacute;rra,
	akkor valamit elronthattunk.  Norm&aacute;lis esetben egy
	<errorname>permission denied</errorname> &uuml;zenetet kell
	kapnunk.</para>

      <para>Ha minden j&oacute;nak t&#251;nik, akkor a
	<application>Nagios</application>,
	<application>Apache</application> &eacute;s
	<application>Sendmail</application> most m&aacute;r
	elind&iacute;that&oacute; a biztons&aacute;gi h&aacute;zirend
	szab&aacute;lyoz&aacute;sai szerint.  Ezt a k&ouml;vetkez&#245;
	parancsokkal tehetj&uuml;k meg:</para>

      <screen>&prompt.root; <userinput>cd /etc/mail &amp;&amp; make stop &amp;&amp; \
setpmac biba/equal make start &amp;&amp; setpmac biba/10\(10-10\) apachectl start &amp;&amp; \
setpmac biba/10\(10-10\) /usr/local/etc/rc.d/nagios.sh forcestart</userinput></screen>

      <para>K&eacute;tszer is ellen&#245;rizz&uuml;k, hogy minden a
	megfelel&#245; m&oacute;don viselkedik-e.  Ha valamilyen
	furcsas&aacute;got tapasztalunk, akkor n&eacute;zz&uuml;k
	&aacute;t a napl&oacute;kat vagy a hiba&uuml;zeneteket.  A
	&man.sysctl.8; haszn&aacute;lat&aacute;val tiltsuk le a
	&man.mac.biba.4; biztons&aacute;gi modult &eacute;s
	pr&oacute;b&aacute;ljunk meg mindent a szokott m&oacute;don
	&uacute;jraind&iacute;tani.</para>

      <note>
	<para>A <username>root</username> felhaszn&aacute;l&oacute;
	  k&uuml;l&ouml;n&ouml;sebb aggodalom n&eacute;lk&uuml;l
	  k&eacute;pes megv&aacute;ltoztatni a biztons&aacute;gi rend
	  betartat&aacute;s&aacute;t &eacute;s &aacute;t&iacute;rni a
	  konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nyokat.  Egy
	  frissen ind&iacute;tott parancs&eacute;rtelmez&#245;
	  sz&aacute;m&aacute;ra ezzel a paranccsal tudjuk
	  cs&ouml;kkenteni a biztons&aacute;gi besorol&aacute;st:</para>

	<screen>&prompt.root; <userinput>setpmac biba/10 csh</userinput></screen>

	<para>Ennek kiv&eacute;d&eacute;s&eacute;re a
	  felhaszn&aacute;l&oacute;kat a &man.login.conf.5;
	  be&aacute;ll&iacute;t&aacute;saival le kell korl&aacute;tozni.
	  Ha a &man.setpmac.8; megpr&oacute;b&aacute;l a rekesz
	  hat&aacute;rain t&uacute;l futtatni egy parancsot, akkor
	  hib&aacute;t ad vissza &eacute;s a parancs nem fut le.  Ebben
	  az esetben a <username>root</username>
	  felhaszn&aacute;l&oacute;t tegy&uuml;k a
	  <literal>biba/high(high-high)</literal> &eacute;rt&eacute;kek
	  k&ouml;z&eacute;.</para>
      </note>

    </sect2>
  </sect1>

  <sect1 id="mac-userlocked">
    <title>A felhaszn&aacute;l&oacute;k
      korl&aacute;toz&aacute;sa</title>

    <para>Ebben a p&eacute;ld&aacute;ban egy viszonylag kicsi,
      nagyj&aacute;b&oacute;l mind&ouml;ssze &ouml;tven
      felhaszn&aacute;l&oacute;s, adatt&aacute;rol&aacute;sra
      haszn&aacute;latos rendszert vesz&uuml;nk alapul.  A
      felhaszn&aacute;l&oacute;k rendelkezhetnek bizonyos
      bejelentkez&eacute;si tulajdons&aacute;gokkal, &eacute;s nem csak
      adatokat tudnak t&aacute;rolni, hanem az
      er&#245;forr&aacute;sokhoz is hozz&aacute; tudnak
      f&eacute;rni.</para>

    <para>Itt most a &man.mac.bsdextended.4; &eacute;s a
      &man.mac.seeotheruids.4; modulokat vetj&uuml;k be egy&uuml;ttesen,
      &eacute;s nem csak a rendszer objektumainak
      el&eacute;r&eacute;s&eacute;t tudjuk megakad&aacute;lyozni, hanem
      az egyes felhaszn&aacute;l&oacute;k fut&oacute; programjait is
      elrejtj&uuml;k.</para>

    <para>A m&#251;veletet kezdj&uuml;k azzal, hogy a
      <filename>/boot/loader.conf</filename> &aacute;llom&aacute;nyt
      kib&#245;v&iacute;tj&uuml;k a k&ouml;vetkez&#245;
      m&oacute;don:</para>

    <programlisting>mac_seeotheruids_load="YES"</programlisting>

    <para>A &man.mac.bsdextended.4; biztons&aacute;gi modul az
      al&aacute;bbi
      <filename>rc.conf</filename>-v&aacute;ltoz&oacute;val
      hozhat&oacute; m&#251;k&ouml;d&eacute;sbe:</para>

    <programlisting>ugidfw_enable="YES"</programlisting>

    <para>A hozz&aacute;tartoz&oacute; alap&eacute;rtelmezett
      szab&aacute;lyk&eacute;szlet az
      <filename>/etc/rc.bsdextended</filename> &aacute;llom&aacute;nyban
      t&aacute;rol&oacute;dik, amely pedig a rendszer
      ind&iacute;t&aacute;sa sor&aacute;n t&ouml;lt&#245;dik be.  Ezeket
      n&eacute;mileg m&oacute;dos&iacute;tanunk kell majd.  Mivel a
      p&eacute;ld&aacute;ban szerepl&#245;
      sz&aacute;m&iacute;t&oacute;g&eacute;p csak a
      felhaszn&aacute;l&oacute;k kiszolg&aacute;l&aacute;s&aacute;t
      hivatott ell&aacute;tni, az utols&oacute; kett&#245;
      kiv&eacute;tel&eacute;vel mindent hagyhatunk megjegyz&eacute;sben.
      &Iacute;gy kik&eacute;nyszer&iacute;tj&uuml;k
      felhaszn&aacute;l&oacute;k &aacute;ltal birtokolt
      rendszerobjektumok alap&eacute;rtelmez&eacute;s szerinti
      bet&ouml;lt&eacute;s&eacute;t.</para>

    <para>Vegy&uuml;k fel a sz&uuml;ks&eacute;ges
      felhaszn&aacute;l&oacute;kat a
      sz&aacute;m&iacute;t&oacute;g&eacute;pre &eacute;s ind&iacute;tsuk
      &uacute;jra.  Tesztel&eacute;si c&eacute;lb&oacute;l
      pr&oacute;b&aacute;ljunk meg k&uuml;l&ouml;nb&ouml;z&#245;
      felhaszn&aacute;l&oacute;kk&eacute;nt bejelentkezni k&eacute;t
      konzolon.  Futassuk le a <command>ps aux</command> parancsot,
      &eacute;s &iacute;gy meg tudjuk figyelni, hogy mennyire
      l&aacute;tjuk a t&ouml;bbi felhaszn&aacute;l&oacute;t.  Amikor
      megpr&oacute;b&aacute;ljuk kiadni a &man.ls.1; parancsot a
      t&ouml;bbiek felhaszn&aacute;l&oacute;i k&ouml;nyvt&aacute;raira,
      akkor hib&aacute;t kell kapnunk.</para>

    <para>Ne pr&oacute;b&aacute;lgassunk a <username>root</username>
      felhaszn&aacute;l&oacute;val, hacsak a megfelel&#245;
      <command>sysctl</command> v&aacute;ltoz&oacute;kban be nem
      &aacute;ll&iacute;tottuk az &#245;
      hozz&aacute;f&eacute;r&eacute;s&eacute;nek
      blokkol&aacute;s&aacute;t is.</para>

    <note>
      <para>Amikor felvesz&uuml;k egy felhaszn&aacute;l&oacute;t a
	rendszerbe, a hozz&aacute;tartoz&oacute; &man.mac.bsdextended.4;
	szab&aacute;ly nem fog szerepelni a szab&aacute;lyrendszerben.
	A szab&aacute;lyrendszer gyors friss&iacute;t&eacute;s&eacute;t
	&uacute;gy tudjuk megoldani, ha a &man.kldunload.8;
	haszn&aacute;lat&aacute;val egyszer&#251;en
	elt&aacute;vol&iacute;tjuk a biztons&aacute;gi modult a
	mem&oacute;ri&aacute;b&oacute;l &eacute;s
	&uacute;jrat&ouml;ltj&uuml;k a &man.kldload.8;
	paranccsal.</para>
    </note>

  </sect1>

  <sect1 id="mac-troubleshoot">
    <title>A hib&aacute;k elh&aacute;r&iacute;t&aacute;sa a MAC
      rendszerben</title>

    <indexterm><primary>MAC
      hibaelh&aacute;r&iacute;t&aacute;s</primary></indexterm>

    <para>A fejleszt&eacute;s f&aacute;zis&aacute;ban bizonyos
      norm&aacute;l konfigur&aacute;ci&oacute;val rendelkez&#245;
      felhaszn&aacute;l&oacute;k gondokat jeleztek.  Ezeket foglaljuk
      most itt &ouml;ssze:</para>

    <sect2>
      <title>A <option>multilabel</option>
	be&aacute;ll&iacute;t&aacute;s nem adhat&oacute; meg a
	<filename>/</filename> &aacute;llom&aacute;nyrendszerre</title>

      <para>A <option>multilabel</option> be&aacute;ll&iacute;t&aacute;s
	nem marad meg a rendszerind&iacute;t&oacute;
	(<filename>/</filename>) part&iacute;ci&oacute;mon!</para>

      <para>A tapasztalatok szerint k&ouml;r&uuml;lbel&uuml;l minden
	&ouml;tvenedik felhaszn&aacute;l&oacute; szembes&uuml;l ezzel a
	probl&eacute;m&aacute;val, &eacute;s mi is tal&aacute;lkozunk
	vele a kezdeti konfigur&aacute;ci&oacute;k
	kialak&iacute;t&aacute;sa sor&aacute;n.  Ennek az
	&uacute;gynevezett <quote>hib&aacute;nak</quote> a
	behat&oacute;bb tanulm&aacute;nyoz&aacute;sa sor&aacute;n arra
	jutottunk, hogy ez t&ouml;bbnyire vagy a hib&aacute;s
	dokument&aacute;l&aacute;sb&oacute;l vagy a
	dokument&aacute;ci&oacute;
	f&eacute;lre&eacute;rtelmez&eacute;s&eacute;b&#245;l ered.
	F&uuml;ggetlen att&oacute;l, hogy ez mit&#245;l is
	k&ouml;vetkezett be, a k&ouml;vetkez&#245; l&eacute;p&eacute;sek
	megt&eacute;tel&eacute;vel orvosolhatjuk:</para>

      <procedure>
	<step>
	  <para>Nyissuk meg az <filename>/etc/fstab</filename>
	    &aacute;llom&aacute;nyt &eacute;s adjuk meg a
	    rendszerind&iacute;t&oacute; part&iacute;ci&oacute;nak az
	    <option>ro</option>, vagyis az
	    &iacute;r&aacute;sv&eacute;dett (read-only)
	    be&aacute;ll&iacute;t&aacute;st.</para>
	</step>

	<step>
	  <para>Ind&iacute;tsuk &uacute;jra a g&eacute;pet
	    egyfelhaszn&aacute;l&oacute;s m&oacute;dban.</para>
	</step>

	<step>
	  <para>A <command>tunefs</command> <option>-l enable</option>
	    parancsot futtassuk le a <filename>/</filename>
	    &aacute;llom&aacute;nyrendszeren.</para>
	</step>

	<step>
	  <para>Ind&iacute;tsuk &uacute;jra a rendszert norm&aacute;l
	    m&oacute;dban.</para>
	</step>

	<step>
	  <para>Adjuk ki a <command>mount</command>
	    <option>-urw</option> <filename>/</filename> parancsot, majd
	    az <filename>/etc/fstab</filename> &aacute;llom&aacute;nyban
	    &iacute;rjuk &aacute;t a <option>ro</option>
	    be&aacute;ll&iacute;t&aacute;st az <option>rw</option>
	    &eacute;rt&eacute;kre &eacute;s megint ind&iacute;tsuk
	    &uacute;jra a rendszert.</para>
	</step>

	<step>
	  <para>Alaposan n&eacute;zz&uuml;k &aacute;t a
	    <command>mount</command> parancs kimenet&eacute;t &eacute;s
	    gy&#245;z&ouml;dj&uuml;nk meg r&oacute;la, hogy a
	    <option>multilabel</option> opci&oacute; val&oacute;ban
	    be&aacute;ll&iacute;t&oacute;dott a
	    rendszerind&iacute;t&oacute;
	    &aacute;llom&aacute;nyrendszerre.</para>
	</step>
     </procedure>

    </sect2>

    <sect2>
      <title>A <acronym>MAC</acronym> ut&aacute;n nem lehet
	ind&iacute;tani az X11 szervert</title>

      <para>Nem indul az X, miut&aacute;n <acronym>MAC</acronym>-kel
	kialak&iacute;tottunk egy biztons&aacute;gos
	k&ouml;rnyezetet!</para>

      <para>Ezt vagy a <acronym>MAC</acronym>
	<literal>partition</literal> h&aacute;zirendje okozza, vagy az
	egyik c&iacute;mk&eacute;keket haszn&aacute;l&oacute;
	h&aacute;zirend helytelen be&aacute;ll&iacute;t&aacute;sa.  A
	k&ouml;vetkez&#245; m&oacute;don der&iacute;thetj&uuml;k ki az
	ok&aacute;t:</para>

      <procedure>
	<step>
	  <para>Figyelmesen olvassuk el a hiba&uuml;zenetet: ha a
	    felhaszn&aacute;l&oacute; az <literal>insecure</literal>
	    oszt&aacute;ly tagja, akkor a <literal>partition</literal>
	    h&aacute;zirend lesz a b&#251;n&ouml;s.
	    Pr&oacute;b&aacute;ljuk meg a felhaszn&aacute;l&oacute;t
	    visszatenni a <literal>default</literal> oszt&aacute;lyba
	    &eacute;s a <command>cap_mkdb</command> paranccsal
	    &uacute;jragener&aacute;lni az adatb&aacute;zist.  Ha ez nem
	    seg&iacute;t a probl&eacute;m&aacute;n, akkor haladjunk
	    tov&aacute;bb.</para>
	</step>

	<step>
	  <para>Alaposan ellen&#245;rizz&uuml;k a
	    c&iacute;mk&eacute;khez tartoz&oacute; h&aacute;zirendeket.
	    Vizsg&aacute;ljuk meg, hogy a k&eacute;rdeses
	    felhaszn&aacute;l&oacute; eset&eacute;ben a
	    h&aacute;zirendet &eacute;s az X11 alkalmaz&aacute;st,
	    valamint a <filename class="directory">/dev</filename>
	    eszk&ouml;z&ouml;ket t&eacute;nyleg j&oacute;l
	    &aacute;ll&iacute;tottuk be.</para>
	</step>

	<step>
	  <para>Ha az im&eacute;ntiek egyik sem oldja meg gondunkat,
	    k&uuml;ldj&uuml;k el a hiba&uuml;zenetet &eacute;s a
	    k&ouml;rnyezet&uuml;nk r&ouml;vid
	    le&iacute;r&aacute;s&aacute;t a a <ulink
	    url="http://www.TrustedBSD.org">TrustedBSD</ulink>
	    honlapj&aacute;r&oacute;l el&eacute;rhet&#245; TrustedBSD
	    levelez&eacute;si lista vagy a &a.questions;
	    c&iacute;m&eacute;re.</para>
	</step>
      </procedure>

    </sect2>

    <sect2>
      <title>Hiba: &man..secure.path.3; cannot stat
	<filename>.login_conf</filename></title>

      <para>Amikor a rendszerben megpr&oacute;b&aacute;lok a
	<username>root</username> felhaszn&aacute;l&oacute;r&oacute;l
	&aacute;tv&aacute;ltani egy m&aacute;sik
	felhaszn&aacute;l&oacute;ra, a <errorname>_secure_path: unable
	to state .login_conf</errorname> hiba&uuml;zenet jelenik
	meg.</para>

      <para>Ez az &uuml;zenet &aacute;ltal&aacute;ban akkor
	l&aacute;that&oacute;, amikor a felhaszn&aacute;l&oacute;
	nagyobb &eacute;rt&eacute;k&#251; c&iacute;mk&eacute;vel
	rendelkezik ann&aacute;l, mint akiv&eacute; v&aacute;lni akar.
	P&eacute;ld&aacute;ul vegy&uuml;k a <username>joska</username>
	nev&#251; felhaszn&aacute;l&oacute;t a rendszerben, aki az alap
	<literal>biba/low</literal> c&iacute;mk&eacute;vel rendelkezik.
	A <username>root</username> felhaszn&aacute;l&oacute;, akinek
	<literal>biba/high</literal> c&iacute;mk&eacute;je van, nem
	l&aacute;thatja <username>joska</username>
	felhaszn&aacute;l&oacute;i k&ouml;nyvt&aacute;r&aacute;t.  Ez
	att&oacute;l f&uuml;ggetlen&uuml;l megt&ouml;rt&eacute;nik, hogy
	a <username>root</username> a <command>su</command> paranccsal
	v&aacute;ltott &aacute;t a <username>joska</username> nev&#251;
	felhaszn&aacute;l&oacute;ra vagy sem.  Egy ilyen helyzetben a
	Biba s&eacute;rtetlens&eacute;gi modellje nem fogja engedni a
	<username>root</username> felhaszn&aacute;l&oacute;ra
	sz&aacute;m&aacute;ra, hogy l&aacute;thassa a
	kev&eacute;sb&eacute; s&eacute;rtetlen objektumokat.</para>

    </sect2>

    <sect2>
      <title>A <username>root</username> felhaszn&aacute;l&oacute; nem
	megy!</title>

      <para>A rendszer norm&aacute;l vagy egyfelhaszn&aacute;l&oacute;s
	m&oacute;dban sem ismeri fel a <username>root</username>
	felhaszn&aacute;l&oacute;t.  A <command>whoami</command> parancs
	0 (null&aacute;t) ad vissza &eacute;s a <command>su</command>
	parancs pedig annyit mond: <errorname>who are you?</errorname>
	(<errorname>ki vagy?</errorname>).  Mi
	t&ouml;rt&eacute;nhetett?</para>

      <para>Ez csak olyankor t&ouml;rt&eacute;nhet, ha a
	c&iacute;mk&eacute;z&eacute;si h&aacute;zirendet nem
	enged&eacute;lyezz&uuml;k, vagy a &man.sysctl.8;
	haszn&aacute;lat&aacute;val, vagy pedig a modul
	elt&aacute;vol&iacute;t&aacute;s&aacute;val.  Ha a
	h&aacute;zirendet letiltjuk vagy ideiglenesen letilt&oacute;dik,
	akkor a bejelentkez&eacute;si tulajdons&aacute;gokat
	t&aacute;rol&oacute; adatb&aacute;zist a <option>label</option>
	be&aacute;ll&iacute;t&aacute;s
	elt&aacute;vol&iacute;t&aacute;s&aacute;val kell
	&uacute;jrakonfigur&aacute;lni.  A
	<filename>login.conf</filename> &aacute;llom&aacute;nyb&oacute;l
	ne felejts&uuml;k el kivenni az &ouml;sszes
	<option>label</option> be&aacute;ll&iacute;t&aacute;st &eacute;s
	a <command>cap_mkdb</command> paranccsal
	&uacute;jragener&aacute;lni az adatb&aacute;zist.</para>

      <para>Ilyen akkor is el&#245;fordulhat, amikor a h&aacute;zirend
	valamilyen m&oacute;don korl&aacute;tozza a
	<filename>master.passwd</filename> &aacute;llom&aacute;ny vagy
	adatb&aacute;zis el&eacute;rhet&#245;s&eacute;g&eacute;t.  Ezt
	&aacute;ltal&aacute;ban az okozza, hogy a rendszergazda az
	&aacute;llom&aacute;nyt olyan c&iacute;mke alatt
	m&oacute;dos&iacute;tja, amely &uuml;tk&ouml;zik a rendszerben
	alkalmazott &aacute;ltal&aacute;nos h&aacute;zirenddel.  Ebben
	az esetekben a rendszer pr&oacute;b&aacute;lja meg beolvasni a
	felhaszn&aacute;l&oacute;k adatait, azonban mivel k&ouml;zben az
	&aacute;llom&aacute;ny &uacute;j c&iacute;mk&eacute;t
	&ouml;r&ouml;k&ouml;lt, nem f&eacute;r hozz&aacute;.  Ha a
	&man.sysctl.8; paranccsal letiltjuk a h&aacute;zirendet, minden
	vissza fog t&eacute;rni a rendes
	ker&eacute;kv&aacute;g&aacute;sba.</para>

    </sect2>
  </sect1>
</chapter>

<!--
     Local Variables:
     mode: sgml
     sgml-declaration: "../chapter.decl"
     sgml-indent-data: t
     sgml-omittag: nil
     sgml-always-quote-attributes: t
     sgml-parent-document: ("../book.sgml" "part" "chapter")
     End:
-->
