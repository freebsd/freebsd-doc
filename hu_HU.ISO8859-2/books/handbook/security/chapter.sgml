<!--
     The FreeBSD Documentation Project

     $FreeBSD$
-->

<!-- The FreeBSD Hungarian Documentation Project
     Translated by: PALI, Gabor <pgj@FreeBSD.org>
     %SOURCE%	en_US.ISO8859-1/books/handbook/security/chapter.sgml
     %SRCID%	1.334
-->

<chapter id="security" lang="hu">
  <chapterinfo>
    <authorgroup>
      <author>
	<firstname>Matthew</firstname>
	<surname>Dillon</surname>
	<contrib>A fejezet legnagyobb r&eacute;sz&eacute;t a security(7)
	  man oldal alapj&aacute;n &iacute;rta: </contrib>
      </author>
    </authorgroup>
  </chapterinfo>

  <title>Biztons&aacute;g</title>

  <indexterm><primary>biztons&aacute;g</primary></indexterm>

  <sect1 id="security-synopsis">
    <title>&Aacute;ttekint&eacute;s</title>

    <para>Ez a fejezet egy alapvet&#245; bevezet&eacute;s a rendszerek
      biztons&aacute;gi fogalmaiba, ad n&eacute;h&aacute;ny
      &aacute;ltal&aacute;nos j&oacute;tan&aacute;csot &eacute;s a
      &os;-vel kapcsolatban feldolgoz n&eacute;h&aacute;ny komolyabb
      t&eacute;m&aacute;t.  Az itt megfogalmazott t&eacute;m&aacute;k
      nagy r&eacute;sze egyar&aacute;nt r&aacute;h&uacute;zhat&oacute;
      rendszer&uuml;nk &eacute;s &aacute;ltal&aacute;noss&aacute;gban
      v&eacute;ve az internet biztons&aacute;g&aacute;ra is.  A internet
      m&aacute;r nem az <quote>b&eacute;k&eacute;s</quote> hely, ahol
      mindenki a kedves szomsz&eacute;d szerep&eacute;t j&aacute;tssza.
      A rendszer&uuml;nk bebiztos&iacute;t&aacute;sa
      elker&uuml;lhetetlen az adataink, szellemi tulajdonunk, id&#245;nk
      &eacute;s m&eacute;g sok minden m&aacute;s
      megv&eacute;d&eacute;s&eacute;re az internetes bandit&aacute;k
      &eacute;s hasonl&oacute;k ellen.</para>

    <para>A &os; seg&eacute;dprogramok &eacute;s mechanizmusok
      sor&aacute;t k&iacute;n&aacute;lja fel a rendszer&uuml;nk
      &eacute;s h&aacute;l&oacute;zatunk
      s&eacute;rtetlens&eacute;g&eacute;nek &eacute;s
      biztons&aacute;g&aacute;nak fenntart&aacute;s&aacute;ra.</para>

    <para>A fejezet elolvas&aacute;sa sor&aacute;n
      megismerj&uuml;k:</para>

    <itemizedlist>
      <listitem>
	<para>az alapvet&#245; rendszerbiztons&aacute;gi fogalmakat,
	  k&uuml;l&ouml;n&ouml;s tekintettel a &os;-re;</para>
      </listitem>

      <listitem>
	<para>milyen olyan k&uuml;l&ouml;nb&ouml;z&#245;
	  titkos&iacute;t&aacute;si mechanizmusok &eacute;rthet&#245;ek
	  el a &os;-ben, mint p&eacute;ld&aacute;ul a
	  <acronym>DES</acronym> &eacute;s az
	  <acronym>MD5</acronym>;</para>
      </listitem>

      <listitem>
	<para>hogyan &aacute;ll&iacute;tsunk be egyszeri jelszavas
	  azonos&iacute;t&aacute;st;</para>
      </listitem>

      <listitem>
	<para>hogyan burkoljunk az <application>inetd</application>
	  seg&iacute;ts&eacute;g&eacute;vel <acronym>TCP</acronym>
	  kapcsolatokat;</para>
      </listitem>

      <listitem>
	<para>hogyan &aacute;ll&iacute;tsuk be a
	  <application>KerberosIV</application>-t a
	  &os;&nbsp;5.0-n&aacute;l kor&aacute;bbi
	  v&aacute;ltozatain;</para>
      </listitem>

      <listitem>
	<para>hogyan &aacute;ll&iacute;tsuk be a
	  <application>Kerberos5</application>-t a &os;-n;</para>
      </listitem>

      <listitem>
	<para>hogyan &aacute;ll&iacute;tsuk be az IPsec-et &eacute;s
	  hozzunk l&eacute;tre <acronym>VPN</acronym>-t &os;/&windows;
	  g&eacute;pek k&ouml;z&ouml;tt;</para>
      </listitem>

      <listitem>
	<para>hogyan &aacute;ll&iacute;tsuk be &eacute;s
	  haszn&aacute;ljuk az <application>OpenSSH</application>-t, a
	  &os; <acronym>SSH</acronym>
	  implement&aacute;ci&oacute;j&aacute;t;</para>
      </listitem>

      <listitem>
	<para>mik azok az <acronym>ACL</acronym>-ek az
	  &aacute;llom&aacute;nyrendszerben &eacute;s mik&eacute;nt kell
	  ezeket haszn&aacute;lni;</para>
      </listitem>

      <listitem>
	<para>hogyan kell haszn&aacute;lni a
	  <application>Portaudit</application> seg&eacute;dprogramot a
	  Portgy&#251;jtem&eacute;nyb&#245;l telep&iacute;tett
	  k&uuml;ls&#245; szoftvercsomagok
	  biztons&aacute;goss&aacute;g&aacute;nak
	  ellen&#245;rz&eacute;s&eacute;re;</para>
      </listitem>

      <listitem>
	<para>hogyan hasznos&iacute;tsuk a &os; biztons&aacute;gi
	  tan&aacute;csait tartalmaz&oacute;
	  le&iacute;r&aacute;sokat</para>
      </listitem>

      <listitem>
	<para>mit jelent a fut&oacute; programok
	  nyilv&aacute;ntart&aacute;sa &eacute;s hogyan
	  enged&eacute;lyezz&uuml;k azt &os;-n.</para>
      </listitem>
    </itemizedlist>

    <para>A fejezet elolvas&aacute;s&aacute;hoz aj&aacute;nlott:</para>

    <itemizedlist>
      <listitem>
	<para>az alapvet&#245; &os; &eacute;s internetes fogalmak
	  ismerete.</para>
      </listitem>
    </itemizedlist>

    <para>A k&ouml;nyvben tov&aacute;bbi biztons&aacute;gi
      t&eacute;m&aacute;kr&oacute;l is sz&oacute; esik,
      p&eacute;ld&aacute;ul a <xref linkend="mac">ben a
      K&ouml;telez&#245;
      hozz&aacute;f&eacute;r&eacute;s-vez&eacute;rl&eacute;sr&#245;l
      (MAC) &eacute;s a <xref linkend="firewalls">ben pedig az
      internetes t&#251;zfalakr&oacute;l.</para>

  </sect1>

  <sect1 id="security-intro">
    <title>Bevezet&eacute;s</title>

    <para>A biztons&aacute;g egy olyan funkci&oacute;, ami a
      rendszergazd&aacute;t&oacute;l indul &eacute;s n&aacute;la is
      v&eacute;gz&#245;dik.  M&iacute;g az &ouml;sszes
      t&ouml;bbfelhaszn&aacute;l&oacute;s BSD &unix; rendszer
      &ouml;nmag&aacute;ban is valamennyire biztons&aacute;gos, a
      felhaszn&aacute;l&oacute;k
      <quote>fegyelmez&eacute;s&eacute;hez</quote> sz&uuml;ks&eacute;g
      tov&aacute;bbi biztons&aacute;gi mechanizmusok
      ki&eacute;p&iacute;t&eacute;s&eacute;re &eacute;s
      karbantart&aacute;s&aacute;ra, ami minden bizonnyal egy
      rendszergazda egyik legfontosabb k&ouml;teless&eacute;ge.  A
      sz&aacute;m&iacute;t&oacute;g&eacute;pek csak annyira
      biztons&aacute;gosak, mint amennyire be&aacute;ll&iacute;tjuk,
      &eacute;s a biztons&aacute;gi megfontol&aacute;sok
      &aacute;lland&oacute; versenyben vannak az emberi
      k&eacute;nyelemmel.  A &unix; rendszerek
      &aacute;ltal&aacute;noss&aacute;gban v&eacute;ve
      &oacute;r&aacute;si mennyis&eacute;g&#251; program
      p&aacute;rhuzamos futtat&aacute;s&aacute;ra k&eacute;pesek, melyek
      t&ouml;bbs&eacute;ge kiszolg&aacute;l&oacute;k&eacute;nt fut
      &mdash; ez azt jelenti, hogy hozz&aacute;juk
      k&iacute;v&uuml;lr&#245;l &eacute;rkez&#245; egyedek
      csatlakozhatnak &eacute;s t&aacute;rsaloghatnak vel&uuml;k.  Ahogy
      a tegnap kicsi &eacute;s nagy
      sz&aacute;m&iacute;t&oacute;g&eacute;pei napjaink asztali
      g&eacute;peiv&eacute; v&aacute;ltak &eacute;s ahogy a
      sz&aacute;m&iacute;t&oacute;g&eacute;pek egyre t&ouml;bben
      csatlakoznak h&aacute;l&oacute;zatra &eacute;s az internetre, a
      biztons&aacute;g fontoss&aacute;ga is egyre jobban
      n&ouml;vekszik.</para>

    <para>A rendszerek biztons&aacute;ga a t&aacute;mad&aacute;sok
      k&uuml;l&ouml;nb&ouml;z&#245; form&aacute;ival is foglalkozik,
      t&ouml;bbek k&ouml;zt olyan t&aacute;mad&aacute;sokkal, amelyek a
      rendszer &ouml;sszeoml&aacute;s&aacute;t vagy
      haszn&aacute;lhatatlans&aacute;g&aacute;t c&eacute;lozz&aacute;k
      meg, de nem pr&oacute;b&aacute;lj&aacute;k meg vesz&eacute;lybe
      sodorni a <username>root</username> felhaszn&aacute;l&oacute;
      hozz&aacute;f&eacute;r&eacute;s&eacute;t (<quote>felt&ouml;rni a
      g&eacute;pet</quote>).  A biztons&aacute;ggal kapcsolatos
      probl&eacute;m&aacute;k t&ouml;bb kateg&oacute;ri&aacute;ra
      oszthat&oacute;ak:</para>

    <orderedlist>
      <listitem>
	<para>A szolg&aacute;ltat&aacute;sok
	  m&#251;k&ouml;d&eacute;sk&eacute;ptelenn&eacute;
	  t&eacute;tel&eacute;re ir&aacute;nyul&oacute; (DoS, Denial of
	  Service) t&aacute;mad&aacute;sok.</para>
      </listitem>

      <listitem>
	<para>A felhaszn&aacute;l&oacute;i fi&oacute;kok
	  vesz&eacute;lyeztet&eacute;se.</para>
      </listitem>

      <listitem>
	<para>Rendszergazdai jogok megszerz&eacute;se a k&ouml;zeli
	  szervereken kereszt&uuml;l.</para>
      </listitem>

      <listitem>
	<para>Rendszergazdai jogok megszerz&eacute;se a
	  felhaszn&aacute;l&oacute;i fi&oacute;kokon
	  kereszt&uuml;l.</para>
      </listitem>

      <listitem>
	<para>Kiskapuk l&eacute;trehoz&aacute;sa a rendszerben.</para>
      </listitem>
    </orderedlist>

    <indexterm>
      <primary>DoS t&aacute;mad&aacute;s</primary>
      <see>Denial of Service (DoS)</see>
    </indexterm>
    <indexterm>
      <primary>biztons&aacute;g</primary>
      <secondary>DoS t&aacute;mad&aacute;s</secondary>
      <see>Denial of Service (DoS)</see>
    </indexterm>
    <indexterm><primary>Denial of Service (DoS)</primary></indexterm>

    <para>A szolg&aacute;ltat&aacute;sok
      m&#251;k&ouml;d&eacute;sk&eacute;ptelenn&eacute;
      t&eacute;tel&eacute;re ir&aacute;nyul&oacute;
      t&aacute;mad&aacute;sok olyan tev&eacute;kenys&eacute;gre utalnak,
      amelyek k&eacute;pesek megfosztani egy
      sz&aacute;m&iacute;t&oacute;g&eacute;pet az
      er&#245;forr&aacute;sait&oacute;l.  A DoS t&aacute;mad&aacute;sok
      t&ouml;bbnyire nyers er&#245;vel kivitelezett technik&aacute;k,
      melyek vagy a rendszer &ouml;sszeomlaszt&aacute;s&aacute;t vagy
      pedig a haszn&aacute;lhatatlann&aacute; t&eacute;tel&eacute;t
      veszik c&eacute;lba &uacute;gy, hogy t&uacute;lterhelik az
      &aacute;ltala felk&iacute;n&aacute;lt
      szolg&aacute;ltat&aacute;sokat vagy a h&aacute;l&oacute;zati
      alrendszert.  Egyes DoS t&aacute;mad&aacute;sok a
      h&aacute;l&oacute;zati alrendszerben rejt&#245;z&#245;
      hib&aacute;kat igyekeznek kihaszn&aacute;lni, amivel ak&aacute;r
      egyetlen csomaggal is k&eacute;pesek romba d&ouml;nteni egy
      sz&aacute;m&iacute;t&oacute;g&eacute;pet.  Ez ut&oacute;bbit csak
      &uacute;gy lehet orvosolni, ha a hib&aacute;t kijav&iacute;tjuk a
      rendszermagban.  A szerverekre m&eacute;rt csap&aacute;sokat
      gyakran ki lehet v&eacute;deni a param&eacute;tereik &uuml;gyes
      be&aacute;ll&iacute;t&aacute;s&aacute;val, melyek
      seg&iacute;ts&eacute;g&eacute;vel korl&aacute;tozni tudjuk az
      ezeket &eacute;rt terhel&eacute;st egy kellemetlenebb helyezetben.
      A nyers er&#245;t alkalmaz&oacute; h&aacute;l&oacute;zati
      t&aacute;mad&aacute;sokkal a legnehezebb szemben&eacute;zni.
      P&eacute;ld&aacute;ul az &aacute;lc&aacute;zott
      t&aacute;madad&aacute;sok, melyeket szinte lehetetlen
      meg&aacute;ll&iacute;tani, remek eszk&ouml;z&ouml;k arra, hogy
      elv&aacute;gj&aacute;k g&eacute;p&uuml;nket az internett&#245;l.
      Ezzel viszont nem csak azt iktatj&aacute;k ki, hanem az
      internet-csatlakoz&aacute;sunkat is
      eldug&iacute;tj&aacute;k.</para>

    <indexterm>
      <primary>biztons&aacute;g</primary>
      <secondary>a hozz&aacute;f&eacute;r&eacute;sek
	megszerz&eacute;se</secondary>
    </indexterm>

    <para>A DoS t&aacute;mad&aacute;sokn&aacute;l m&eacute;g gyakrabban
      el&#245;fordul, hogy felt&ouml;rik a felhaszn&aacute;l&oacute;k
      fi&oacute;kjait.  A rendszergazd&aacute;k t&ouml;bbs&eacute;ge
      m&eacute;g mindig futtat <application>telnetd</application>,
      <application>rlogin</application>, <application>rshd</application>
      &eacute;s <application>ftpd</application> szervereket a
      g&eacute;pen.  Ezek a szerverek alap&eacute;rtelmez&eacute;s
      szerint nem titkos&iacute;tott kapcsolaton kereszt&uuml;l
      m&#251;k&ouml;dnek.  Ebb&#245;l k&ouml;vetkezik, hogy ha nincs
      annyira sok felhaszn&aacute;l&oacute;nk &eacute;s
      k&ouml;z&uuml;l&uuml;k n&eacute;h&aacute;nyan t&aacute;voli
      helyekr&#245;l jelentkeznek be (ami az egyik leggyakoribb
      &eacute;s legk&eacute;nyelmesebb m&oacute;dja ennek), akkor
      el&#245;fordulhat, hogy valami megneszeli a jelszavaikat.  A
      k&ouml;r&uuml;ltekint&#245; rendszergazd&aacute;k mindig
      ellen&#245;rzik a bejelentkez&eacute;seket tartalmaz&oacute;
      napl&oacute;kat &eacute;s igyekeznek kisz&#251;rni a gyan&uacute;s
      c&iacute;meket m&eacute;g abban az esetben is, amikor a
      bejelentkez&eacute;s sikeres volt.</para>

    <para>Mindig arra kell gondolni, hogy ha a t&aacute;mad&oacute;nak
      siker&uuml;lt megszerezni az egyik felhaszn&aacute;l&oacute;
      hozz&aacute;f&eacute;r&eacute;s&eacute;t, akkor ak&aacute;r
      k&eacute;pes lehet a <username>root</username>
      felhaszn&aacute;l&oacute; fi&oacute;kj&aacute;nak
      felt&ouml;r&eacute;s&eacute;re is.  Azonban a
      val&oacute;s&aacute;gban egy j&oacute;l &#245;rz&ouml;tt &eacute;s
      karbantarott rendszer eset&eacute;n a felhaszn&aacute;l&oacute;i
      hozz&aacute;f&eacute;r&eacute;sek megszerz&eacute;se nem
      felt&eacute;tlen&uuml;l adja a t&aacute;mad&oacute; kez&eacute;re
      a <username>root</username>
      hozz&aacute;f&eacute;r&eacute;s&eacute;t.  Ebben fontos
      k&uuml;l&ouml;nbs&eacute;get tenni, hiszen a
      <username>root</username> felhaszn&aacute;l&oacute; jogai
      n&eacute;lk&uuml;l a t&aacute;mad&oacute; nem k&eacute;pes
      elrejteni a nyomait &eacute;s legjobb esetben sem tud t&ouml;bbet
      tenni, mint t&ouml;nkretenni az adott felhaszn&aacute;l&oacute;
      &aacute;llom&aacute;nyait vagy &ouml;sszeomlasztani a rendszert.
      A felhaszn&aacute;l&oacute;i fi&oacute;kok felt&ouml;r&eacute;se
      nagyon gyakran megt&ouml;rt&eacute;nik, mivel a
      felhaszn&aacute;l&oacute;k messze nem annyira
      el&#245;vigy&aacute;zatosak, mint egy rendszergazda.</para>

    <indexterm>
      <primary>biztons&aacute;g</primary>
      <secondary>kiskapuk</secondary>
    </indexterm>

    <para>A rendszergazd&aacute;knak mindig &eacute;szben kell tartani,
      hogy egy sz&aacute;m&iacute;t&oacute;g&eacute;pen t&ouml;bb
      m&oacute;don is meg lehet szerezni a <username>root</username>
      felhaszn&aacute;l&oacute;
      hozz&aacute;f&eacute;r&eacute;s&eacute;t.  A t&aacute;mad&oacute;
      megtudhatja a <username>root</username> jelszav&aacute;t,
      hib&aacute;t fedezhet fel az egyik rendszergazdai
      jogosults&aacute;ggal fut&oacute; szerverben &eacute;s
      k&eacute;pes felt&ouml;rni a <username>root</username>
      hozz&aacute;f&eacute;r&eacute;st egy h&aacute;l&oacute;zati
      kapcsolaton kereszt&uuml;l, vagy a t&aacute;mad&oacute; olyan
      programban tal&aacute;l hib&aacute;t, aminek
      seg&iacute;ts&eacute;g&eacute;vel el tudja &eacute;rni a
      <username>root</username> fi&oacute;kj&aacute;t egy
      felhaszn&aacute;l&oacute;i hozz&aacute;f&eacute;r&eacute;sen
      kereszt&uuml;l.  Miut&aacute;n a t&aacute;mad&oacute;
      megtal&aacute;lta a rendszergazdai jogok
      megszerz&eacute;s&eacute;nek m&oacute;dj&aacute;t, nem
      felt&eacute;tlen&uuml;l kell kiskapukat elhelyeznie a rendszerben.
      Az eddig tal&aacute;lt &eacute;s jav&iacute;tott, rendszergazdai
      jogok megszerz&eacute;s&eacute;t lehet&#245;v&eacute; tev&#245;
      biztons&aacute;gi r&eacute;sek egy r&eacute;sze eset&eacute;ben
      viszont a t&aacute;mad&oacute;nak akkora mennyis&eacute;g&#251;
      munk&aacute;t jelentene elt&#251;ntetni maga ut&aacute;n a
      nyomokat, hogy meg&eacute;ri neki egy kiskaput telep&iacute;teni.
      Ennek seg&iacute;ts&eacute;g&eacute;vel a t&aacute;mad&oacute;
      ism&eacute;t k&ouml;nnyed&eacute;n hozz&aacute;juthat a
      <username>root</username> felhaszn&aacute;l&oacute;
      hozz&aacute;f&eacute;r&eacute;s&eacute;hez a rendszerben, de ezen
      kereszt&uuml;l egy okos rendszergazda k&eacute;pes is a
      behatol&oacute;t leleplezni.  A kiskapuk lerak&aacute;s&aacute;nak
      megakad&aacute;lyoz&aacute;sa val&oacute;j&aacute;ban k&aacute;ros
      a biztons&aacute;g szempontj&aacute;b&oacute;l n&eacute;zve, mert
      ezzel nem sz&uuml;ntetj&uuml;k meg azokat a lyukakat, amin
      kereszt&uuml;l a t&aacute;mad&oacute; el&#245;sz&ouml;r
      bejutott.</para>

    <para>A t&aacute;mad&aacute;sok elleni v&eacute;delmet mindig
      t&ouml;bb vonalban kell megval&oacute;s&iacute;tani, melyeket
      &iacute;gy oszthatunk fel:</para>

    <orderedlist>
      <listitem>
	<para>A rendszergazda &eacute;s a szem&eacute;lyzet
	  hozz&aacute;f&eacute;r&eacute;s&eacute;nek
	  v&eacute;delme.</para>
      </listitem>

      <listitem>
	<para>A rendszergazdai jogokkal fut&oacute; szerverek &eacute;s
	  a suid/sgid enged&eacute;lyekkel rendelkez&#245; programok
	  v&eacute;delme.</para>
      </listitem>

      <listitem>
	<para>A felhaszn&aacute;l&oacute;i
	  hozz&aacute;f&eacute;r&eacute;sek v&eacute;delme.</para>
      </listitem>

      <listitem>
	<para>A jelszavakat t&aacute;rol&oacute; &aacute;llom&aacute;ny
	  v&eacute;delme.</para>
      </listitem>

      <listitem>
	<para>A rendszermag belsej&eacute;nek, a nyers
	  eszk&ouml;z&ouml;k &eacute;s az
	  &aacute;llom&aacute;nyrendszerek v&eacute;delme.</para>
      </listitem>

      <listitem>
	<para>A rendszert &eacute;rt szab&aacute;lytalan
	  m&oacute;dos&iacute;t&aacute;sok gyors
	  &eacute;szlel&eacute;se.</para>
      </listitem>

      <listitem>
	<para>&Aacute;lland&oacute; paranoia.</para>
      </listitem>
    </orderedlist>

    <para>A fejezet most k&ouml;vetkez&#245; szakasz&aacute;ban az
      im&eacute;nt felsorolt elemeket fejtj&uuml;k ki
      r&eacute;szletesebben.</para>

  </sect1>

  <sect1 id="securing-freebsd">
    <title>A &os; v&eacute;delme</title>

    <indexterm>
      <primary>biztons&aacute;g</primary>
      <secondary>a &os; v&eacute;delme</secondary>
    </indexterm>

    <note>
      <title>Parancs kontra protokoll</title>

      <para>A dokumentumban a
	<application>f&eacute;lk&ouml;v&eacute;ren</application> fogjuk
	szedni az alkalmaz&aacute;sokat, &eacute;s
	<command>egyensz&eacute;less&eacute;g&#251;</command>
	bet&#251;kkel pedig az adott parancsokra hivatkozunk.  A
	protokollokat nem k&uuml;l&ouml;nb&ouml;ztetj&uuml;k meg.  Ez a
	tipogr&aacute;fiai elk&uuml;l&ouml;n&iacute;t&eacute;s hasznos
	p&eacute;ld&aacute;ul az ssh egyes vonatkoz&aacute;sainak
	eset&eacute;n, mivel ez egyben egy protokoll &eacute;s egy
	parancs is.</para>
    </note>

    <para>A most k&ouml;vetkez&#245; szakaszok a &os;
      v&eacute;delm&eacute;nek azon m&oacute;dszereit ismertetik,
      amelyekr&#245;l a fejezet <link
      linkend="security-intro">el&#245;z&#245; szakasz&aacute;ban</link>
      m&aacute;r &iacute;rtunk.</para>

    <sect2 id="securing-root-and-staff">
      <title>A rendszergazda &eacute;s a szem&eacute;lyzet
	hozz&aacute;f&eacute;r&eacute;s&eacute;nek
	v&eacute;delme</title>

      <indexterm><primary><command>su</command></primary></indexterm>

      <para>El&#245;sz&ouml;r is: ne t&ouml;rj&uuml;k magunkat a
	szem&eacute;lyzeti fi&oacute;kok biztons&aacute;goss&aacute;
	t&eacute;tel&eacute;vel, ha m&eacute;g a rendszergazda
	hozz&aacute;f&eacute;r&eacute;s&eacute;t sem tett&uuml;k
	el&eacute;gg&eacute; biztons&aacute;goss&aacute;.  A
	legt&ouml;bb rendszerben a <username>root</username>
	hozz&aacute;f&eacute;r&eacute;shez tartozik egy jelsz&oacute;.
	Els&#245;k&eacute;nt fel kell tenn&uuml;nk, hogy ez a
	jelsz&oacute; <emphasis>mindig</emphasis> megszerezhet&#245;.
	Ez term&eacute;szetesen nem arra utal, hogy el kellene
	t&aacute;vol&iacute;tanunk.  A jelsz&oacute; szinte mindig
	sz&uuml;ks&eacute;ges a sz&aacute;m&iacute;t&oacute;g&eacute;p
	konzolon kereszt&uuml;li el&eacute;r&eacute;s&eacute;hez.
	Val&oacute;j&aacute;ban arra szeretn&eacute;nk
	r&aacute;vil&aacute;g&iacute;tani, hogy a konzolon
	k&iacute;v&uuml;l sehol m&aacute;shol ne lehessen
	haszn&aacute;lni ezt a jelsz&oacute;t, m&eacute;g a &man.su.1;
	paranccsal sem.  P&eacute;ld&aacute;ul gondoskodjunk
	r&oacute;la, hogy az <filename>/etc/ttys</filename>
	&aacute;llom&aacute;nyban megadott pszeud&oacute;
	termin&aacute;lokat <quote>insecure</quote> (nem
	biztons&aacute;gos) t&iacute;pus&uacute;nak
	&aacute;ll&iacute;tottuk be, &eacute;s &iacute;gy a
	<command>telnet</command> vagy az <command>rlogin</command>
	parancsokon kereszt&uuml;l nem lehet rendszergazdak&eacute;nt
	bejelentkezni.  Ha m&aacute;s szolg&aacute;ltat&aacute;son
	kereszt&uuml;l jelentkez&uuml;nk be, p&eacute;ld&aacute;ul az
	<application>sshd</application>
	seg&iacute;ts&eacute;g&eacute;vel, akkor ebben az esetben is
	gondoskodjunk r&oacute;la, hogy letiltottuk a k&ouml;zvetlen
	rendszergazdai bejelentkez&eacute;s
	lehet&#245;s&eacute;g&eacute;t.  Ezt &uacute;gy tudjuk megtenni,
	ha megnyitjuk az <filename>/etc/ssh/sshd_config</filename>
	&aacute;llom&aacute;nyt &eacute;s a
	<literal>PermitRootLogin</literal> param&eacute;tert
	&aacute;t&aacute;ll&iacute;tjuk a <literal>NO</literal>
	&eacute;rt&eacute;kre.  Vegy&uuml;nk sz&aacute;mba minden
	lehets&eacute;ges hozz&aacute;f&eacute;r&eacute;si m&oacute;dot
	&mdash; az FTP &eacute;s a hozz&aacute; hasonl&oacute;
	m&oacute;dok gyakran &aacute;tsziv&aacute;rognak a
	reped&eacute;seken.  A rendszergazd&aacute;nak csak a
	rendszerkonzolon kereszt&uuml;l szabad tudnia
	bejelentkeznie.</para>

      <indexterm><primary><groupname>wheel</groupname></primary></indexterm>

      <para>Term&eacute;szetesen egy rendszergazd&aacute;nak valahogy el
	kell &eacute;rnie a <username>root</username>
	hozz&aacute;f&eacute;r&eacute;st, ez&eacute;rt ezzel felnyitunk
	n&eacute;h&aacute;ny biztons&aacute;gi r&eacute;st.  De
	gondoskodjunk r&oacute;la, hogy ezek a r&eacute;sek
	tov&aacute;bbi jelszavakat ig&eacute;nyelnek a
	m&#251;k&ouml;d&eacute;s&uuml;kh&ouml;z.  A
	<username>root</username> hozz&aacute;f&eacute;r&eacute;s
	el&eacute;r&eacute;s&eacute;hez &eacute;rdemes felvenni
	tetsz&#245;leges szem&eacute;lyzeti (staff)
	hozz&aacute;f&eacute;r&eacute;seket a
	<groupname>wheel</groupname> csoportba (az
	<filename>/etc/group</filename> &aacute;llom&aacute;nyban).  Ha
	a szem&eacute;lyzet tagjait a <groupname>wheel</groupname>
	csoportba rakjuk, akkor innen a <command>su</command> paranccsal
	fel tudjuk venni a <username>root</username>
	felhaszn&aacute;l&oacute; jogait.  A szem&eacute;lyzet tagjait
	l&eacute;trehoz&aacute;sukkor k&ouml;zvetlen&uuml;l sose
	vegy&uuml;k fel a <groupname>wheel</groupname> csoportba!  A
	szem&eacute;lyzet tagjai el&#245;sz&ouml;r ker&uuml;ljenek egy
	<groupname>staff</groupname> csoportba, &eacute;s majd csak
	ezut&aacute;n az <filename>/etc/group</filename>
	&aacute;llom&aacute;nyon kereszt&uuml;l a
	<groupname>wheel</groupname> csoportba.  A szem&eacute;lyzetnek
	csak azon tagjait tegy&uuml;k t&eacute;nylegesen a
	<groupname>wheel</groupname> csoportba, akiknek val&oacute;ban
	sz&uuml;ks&eacute;g&uuml;k van a <username>root</username>
	felhaszn&aacute;l&oacute;
	hozz&aacute;f&eacute;r&eacute;s&eacute;re.  Ha
	p&eacute;ld&aacute;ul a Kerberost haszn&aacute;ljuk
	hiteles&iacute;t&eacute;sre, akkor megcsin&aacute;lhatjuk azt
	is, hogy a Kerberos <filename>.k5login</filename>
	&aacute;llom&aacute;ny&aacute;ban enged&eacute;lyezz&uuml;k a
	&man.ksu.1; parancson kereszt&uuml;l a <username>root</username>
	hozz&aacute;f&eacute;r&eacute;s el&eacute;r&eacute;s&eacute;t a
	<groupname>wheel</groupname> csoport alkalmaz&aacute;sa
	n&eacute;lk&uuml;l.  Ez a megold&aacute;s tal&aacute;n
	m&eacute;g jobb is, mivel a <groupname>wheel</groupname>
	haszn&aacute;lata eset&eacute;n a behatol&oacute;nak m&eacute;g
	mindig lehet&#245;s&eacute;ge van hozz&aacute;jutni a
	<username>root</username>
	hozz&aacute;f&eacute;r&eacute;s&eacute;hez olyankor, amikor a
	kez&eacute;ben van a jelszavakat t&aacute;rol&oacute;
	&aacute;llom&aacute;ny &eacute;s meg tudja szerezni a
	szem&eacute;lyzet valamelyik tagj&aacute;nak
	hozz&aacute;f&eacute;r&eacute;s&eacute;t.  A
	<groupname>wheel</groupname> csoport &aacute;ltal
	felk&iacute;n&aacute;lt megold&aacute;s ugyan jobb, mint a
	semmi, de k&eacute;ts&eacute;gtelen&uuml;l nem a
	legbiztons&aacute;gosabb.</para>

      <para>A hozz&aacute;f&eacute;r&eacute;sek teljes k&ouml;r&#251;
	letilt&aacute;s&aacute;hoz a &man.pw.8; parancsot &eacute;rdemes
	haszn&aacute;lni:</para>

      <screen>&prompt.root; <userinput>pw lock <replaceable>szem&eacute;lyzet</replaceable></userinput></screen>

      <para>Ezzel meg tudjuk akad&aacute;lyozni, hogy a
	felhaszn&aacute;l&oacute; ak&aacute;rmilyen m&oacute;don,
	bele&eacute;rtve az &man.ssh.1; haszn&aacute;lat&aacute;t is,
	hozz&aacute; tudjon f&eacute;rni a
	rendszer&uuml;nkh&ouml;z.</para>

      <para>A hozz&aacute;f&eacute;r&eacute;sek
	blokkol&aacute;s&aacute;nak m&aacute;sik ilyen m&oacute;dszere a
	titkos&iacute;tott jelsz&oacute; &aacute;t&iacute;r&aacute;sa
	egyetlen <quote><literal>*</literal></quote> karakterre.  Mivel
	ez a karakter egyetlen titkos&iacute;tott jelsz&oacute;ra sem
	illeszkedik, ez&eacute;rt a felhaszn&aacute;l&oacute; nem lesz
	k&eacute;pes bejelentkezni.  Ahogy p&eacute;ld&aacute;ul a
	szem&eacute;lyzet al&aacute;bbi tagja sem:</para>

      <programlisting>izemize:R9DT/Fa1/LV9U:1000:1000::0:0:Ize-Mize:/home/izemize:/usr/local/bin/tcsh</programlisting>

      <para>Erre cser&eacute;lj&uuml;k ki:</para>

      <programlisting>izemize:*:1000:1000::0:0:Ize-Mize:/home/izemize:/usr/local/bin/tcsh</programlisting>

      <para>Ezzel megakad&aacute;lyozzuk, hogy az
	<username>izemize</username> nev&#251; felhaszn&aacute;l&oacute;
	a hagyom&aacute;nyos m&oacute;dszerekkel be tudjon jelentkezni.
	Ez a megold&aacute;s azonban a
	<application>Kerberos</application>t alkalmaz&oacute; rendszerek
	eset&eacute;n nem m&#251;k&ouml;dik, illetve olyan helyezetekben
	sem, amikor a felhaszn&aacute;l&oacute; az &man.ssh.1;
	paranccsal m&aacute;r l&eacute;trehozott mag&aacute;nak
	kulcsokat.</para>

      <para>Az ilyen v&eacute;delmi mechanizmusok eset&eacute;ben mindig
	egy szigor&uacute;bb biztons&aacute;gi szint&#251;
	g&eacute;pr&#245;l jelentkez&uuml;nk be egy
	kev&eacute;sb&eacute; biztons&aacute;gosabb g&eacute;pre.
	P&eacute;ld&aacute;ul, ha a szerver&uuml;nk mindenf&eacute;le
	szolg&aacute;ltat&aacute;sokat futtat, akkor a
	munka&aacute;llom&aacute;sunknak egyetlen egyet sem lenne
	szabad.  A munka&aacute;llom&aacute;sunk
	biztons&aacute;goss&aacute; t&eacute;tel&eacute;hez a
	lehet&#245; legkevesebb szolg&aacute;ltat&aacute;st szabad csak
	futtatnunk, de ha lehet, egyet sem, &eacute;s mindig
	jelsz&oacute;val v&eacute;dett
	k&eacute;perny&#245;v&eacute;d&#245;t haszn&aacute;ljuk.
	Term&eacute;szetesen ha a t&aacute;mad&oacute; k&eacute;pes
	fizikailag hozz&aacute;f&eacute;rni a
	munka&aacute;llom&aacute;sunkhoz, akkor szinte b&aacute;rmilyen
	m&eacute;lys&eacute;g&#251; v&eacute;delmet k&eacute;pes
	&aacute;tt&ouml;rni.  Ezt mindenk&eacute;ppen
	sz&aacute;m&iacute;t&aacute;sba kell venn&uuml;nk, azonban ne
	felejts&uuml;k el, hogy a legt&ouml;bb bet&ouml;r&eacute;si
	k&iacute;s&eacute;rlet t&aacute;volr&oacute;l,
	h&aacute;l&oacute;zaton kereszt&uuml;lr&#245;l &eacute;rkezik
	olyan emberekt&#245;l, akik fizikailag nem f&eacute;rnek
	hozz&aacute; a munka&aacute;llom&aacute;sunkhoz vagy a
	szervereinkhez.</para>

      <indexterm><primary>KerberosIV</primary></indexterm>

      <para>A Kerberos &eacute;s a hozz&aacute; hasonl&oacute;
	rendszerek haszn&aacute;lat&aacute;val egyszerre tudjuk a
	szem&eacute;lyzet tagjainak jelszav&aacute;t letiltani vagy
	megv&aacute;ltoztatni, ami egyb&#245;l
	&eacute;rv&eacute;nyess&eacute; v&aacute;lik minden olyan
	g&eacute;pen, ahov&aacute; az adott felhaszn&aacute;l&oacute;nak
	b&aacute;rmilyen hozz&aacute;f&eacute;r&eacute;se is volt.  Nem
	szabad lebecs&uuml;ln&uuml;nk ezt a gyors
	jelsz&oacute;v&aacute;lt&aacute;si lehet&#245;s&eacute;get abban
	az esetben, ha a szem&eacute;lyzet valamelyik tagj&aacute;nak
	hozz&aacute;f&eacute;r&eacute;s&eacute;t megszerezt&eacute;k.
	Hagyom&aacute;nyos jelszavak haszn&aacute;lat&aacute;val a
	jelszavak megv&aacute;ltoztat&aacute;sa N g&eacute;pen igazi
	k&aacute;osz.  A Kerberosban jelsz&oacute;v&aacute;lt&aacute;si
	megszor&iacute;t&aacute;sokat is fel&aacute;ll&iacute;thatunk:
	nem csak a Kerberos &aacute;ltal adott jegyek j&aacute;rnak le
	id&#245;vel, hanem a Kerberos rendszer meg is k&ouml;vetelheti a
	felhaszn&aacute;l&oacute;kt&oacute;l, hogy egy adott id&#245;
	(p&eacute;ld&aacute;ul egy h&oacute;nap) ut&aacute;n
	v&aacute;ltoztasson jelsz&oacute;t.</para>

    </sect2>

    <sect2>
      <title>A rendszergazdai jogokkal fut&oacute; szerverek &eacute;s
	SUID/SGID enged&eacute;lyekkel rendelkez&#245; programok
	v&eacute;delme</title>

      <indexterm><primary><command>ntalk</command></primary></indexterm>
      <indexterm><primary><command>comsat</command></primary></indexterm>
      <indexterm><primary><command>finger</command></primary></indexterm>
      <indexterm><primary>j&aacute;r&oacute;k&aacute;k</primary></indexterm>
      <indexterm><primary><application>sshd</application></primary></indexterm>
      <indexterm><primary><application>telnetd</application></primary></indexterm>
      <indexterm><primary><application>rshd</application></primary></indexterm>
      <indexterm><primary><application>rlogind</application></primary></indexterm>

      <para>A b&ouml;lcs rendszergazda mindig csak akkor futtat
	szervereket, amikor sz&uuml;ks&eacute;ge van r&aacute;, se
	t&ouml;bbet, se kevesebbet.  Az egy&eacute;b
	fejleszt&#245;kt&#245;l sz&aacute;rmaz&oacute; szerverekkel
	b&aacute;njunk k&uuml;l&ouml;n&ouml;sen &oacute;vatosan, mivel
	gyakran hajlamosak hib&aacute;kat tartalmazni.
	P&eacute;ld&aacute;ul az <application>imapd</application> vagy a
	<application>popper</application> haszn&aacute;lata olyan,
	mintha az eg&eacute;sz vil&aacute;gnak ingyenjegyet
	osztogatn&aacute;nk a rendszer&uuml;nk <username>root</username>
	hozz&aacute;f&eacute;r&eacute;s&eacute;hez.  Soha ne futtassunk
	olyan szervert, amelyet nem vizsg&aacute;ltunk &aacute;t
	kell&#245; alaposs&aacute;ggal.  Sok szervert nem is
	felt&eacute;tlen&uuml;l kell <username>root</username>
	felhaszn&aacute;l&oacute;k&eacute;nt futtatni.
	P&eacute;ld&aacute;ul az <application>ntalk</application>,
	<application>comsat</application> &eacute;s
	<application>finger</application> d&eacute;monok egy
	speci&aacute;lis
	<firstterm>j&aacute;r&oacute;k&aacute;ban</firstterm> (sandbox)
	futnak.  Ezek a j&aacute;r&oacute;k&aacute;k sem teljesen
	t&ouml;k&eacute;letesek, hacsak erre k&uuml;l&ouml;n figyelmet
	nem ford&iacute;tunk.  Ilyenkor a t&ouml;bbvonalas
	v&eacute;delem eszm&eacute;nye m&eacute;g mindig &eacute;l: ha
	valakinek siker&uuml;lt bet&ouml;rnie a
	j&aacute;r&oacute;k&aacute;ba, akkor onnan ki is tud t&ouml;rni.
	Min&eacute;l t&ouml;bb v&eacute;delmi vonalat h&uacute;zunk a
	t&aacute;mad&oacute; el&eacute;, ann&aacute;l jobban
	cs&ouml;kken a siker&eacute;nek
	val&oacute;sz&iacute;n&#251;s&eacute;ge.  A
	t&ouml;rt&eacute;nelem sor&aacute;n l&eacute;nyeg&eacute;ben
	minden <username>root</username> jogokkal fut&oacute;
	szerverben, bele&eacute;rtve az alapvet&#245;
	rendszerszint&#251; szervereket is, tal&aacute;ltak m&aacute;r
	biztons&aacute;gi jelleg&#251; hib&aacute;t.  Ha a
	g&eacute;p&uuml;nkre csak az <application>sshd</application>
	szolg&aacute;ltat&aacute;son kereszt&uuml;l tudnak
	bel&eacute;pni, &eacute;s soha nem haszn&aacute;lja senki a
	<application>telnetd</application>,
	<application>rshd</application> vagy
	<application>rlogind</application>
	szolg&aacute;ltat&aacute;sokat, akkor kapcsoljuk is ki
	ezeket!</para>

      <para>A &os; most m&aacute;r alap&eacute;rtelmez&eacute;s szerint
	j&aacute;r&oacute;k&aacute;ban futtatja az
	<application>ntalkd</application>,
	<application>comsat</application> &eacute;s
	<application>finger</application>
	szolg&aacute;ltat&aacute;sokat.  M&aacute;sik ilyen program,
	amely szint&eacute;n es&eacute;lyes lehet erre, az a
	&man.named.8;.  Az <filename>/etc/defaults/rc.conf</filename>
	megjegyz&eacute;sben tartalmazza a
	<application>named</application> j&aacute;r&oacute;k&aacute;ban
	futtat&aacute;s&aacute;hoz sz&uuml;ks&eacute;ges
	param&eacute;tereket.  Att&oacute;l f&uuml;gg&#245;en, hogy egy
	&uacute;j rendszert telep&iacute;t&uuml;nk vagy
	friss&iacute;tj&uuml;k a m&aacute;r megl&eacute;v&#245;
	rendszer&uuml;nket, a j&aacute;r&oacute;k&aacute;khoz
	tartoz&oacute; speci&aacute;lis felhaszn&aacute;l&oacute;i
	hozz&aacute;f&eacute;r&eacute;sek nem felt&eacute;tlen&uuml;l
	j&ouml;nnek l&eacute;tre.  Amikor csak lehets&eacute;ges, az
	el&#245;rel&aacute;t&oacute; rendszergazda
	kik&iacute;s&eacute;rletez &eacute;s l&eacute;trehoz ilyen
	j&aacute;r&oacute;k&aacute;kat.</para>

      <indexterm><primary><application>sendmail</application></primary></indexterm>

      <para>Vannak m&aacute;s olyan szerverek, amelyek tipikusan nem
	j&aacute;r&oacute;k&aacute;kban futnak.  Ilyen t&ouml;bbek
	k&ouml;zt a <application>sendmail</application>,
	<application>popper</application>,
	<application>imapd</application>,
	<application>ftpd</application> &eacute;s m&eacute;g sokan
	m&aacute;sok.  L&eacute;teznek r&aacute;juk
	alternat&iacute;v&aacute;k, de a telep&iacute;t&eacute;s&uuml;k
	val&oacute;sz&iacute;n&#251;leg t&ouml;bb munk&aacute;t
	ig&eacute;nyel, mint amennyit meg&eacute;rn&eacute;
	sz&aacute;munkra vesz&#245;dni vel&uuml;k (&eacute;s itt megint
	les&uacute;jt a k&eacute;nyelmi t&eacute;nyez&#245;).  Ezeket a
	szervereket t&ouml;bbnyire <username>root</username>
	felhaszn&aacute;l&oacute;k&eacute;nt kell futtatnunk &eacute;s a
	rajtuk kereszt&uuml;l &eacute;rkez&#245; bet&ouml;r&eacute;si
	k&iacute;s&eacute;rleteket m&aacute;s m&oacute;dokra
	t&aacute;maszkodva kell &eacute;szleln&uuml;nk.</para>

      <para>A <username>root</username> felhaszn&aacute;l&oacute;
	keltette biztons&aacute;gi r&eacute;sek m&aacute;sik nagy
	csoportja azok a v&eacute;grehajthat&oacute;
	&aacute;llom&aacute;nyok a rendszerben, amelyek a suid &eacute;s
	sgid enged&eacute;lyekkel rendelkeznek, futtat&aacute;suk
	rendszergazdai jogokkal t&ouml;rt&eacute;nik.  Az ilyen
	bin&aacute;risok t&ouml;bbs&eacute;ge, mint
	p&eacute;ld&aacute;ul az <application>rlogin</application>, a
	<filename>/bin</filename> &eacute;s <filename>/sbin</filename>,
	<filename>/usr/bin</filename> vagy
	<filename>/usr/sbin</filename> k&ouml;nyvt&aacute;rakban
	tal&aacute;lhat&oacute; meg.  Hab&aacute;r semmi sem
	biztons&aacute;gos 100%-ig, a rendszerben
	alap&eacute;rtelmezetten suid &eacute;s sgid enged&eacute;llyel
	rendelkez&#245; bin&aacute;risok ebb&#245;l a szempontb&oacute;l
	meglehet&#245;sen megb&iacute;zhat&oacute;nak tekinhet&#245;ek.
	Alkalmank&eacute;nt azonban tal&aacute;lnak a
	<username>root</username> felhaszn&aacute;l&oacute;t
	vesz&eacute;lyeztet&#245; lyukakat az ilyen bin&aacute;risokban
	is.  P&eacute;ld&aacute;ul 1998-ban az
	<literal>Xlib</literal>-ben volt egy olyan rendszergazdai
	szint&#251; hiba, amellyel az <application>xterm</application>
	(ez &aacute;ltal&aacute;ban suid enged&eacute;llyel rendelkezik)
	sebezhet&#245;v&eacute; v&aacute;lt.  Mivel jobb f&eacute;lni,
	mint megijedni, ez&eacute;rt az el&#245;retekint&#245;
	rendszergazda mindig igyekszik &uacute;gy cs&ouml;kkenteni az
	ilyen enged&eacute;lyekkel rendelkez&#245; bin&aacute;risok
	k&ouml;r&eacute;t, hogy csak a szem&eacute;lyzet tagjai legyenek
	k&eacute;pesek ezeket futtatni.  Ezt egy olyan speci&aacute;lis
	csoport l&eacute;trehoz&aacute;s&aacute;val oldhatjuk meg,
	amelyhez csak a szem&eacute;lyzet tagjai f&eacute;rhetnek
	hozz&aacute;.  Az olyan suid bin&aacute;risokt&oacute;l pedig,
	amelyeket senki sem haszn&aacute;l, igyekszik teljesen
	megszabadulni (<command>chmod 000</command>).  A monitorral nem
	rendelkez&#245; szervereknek &aacute;ltal&aacute;ban nincs
	sz&uuml;ks&eacute;g&uuml;k az <application>xterm</application>
	m&#251;k&ouml;dtet&eacute;s&eacute;re.  Az sgid
	enged&eacute;llyel rendelkez&#245; bin&aacute;risok is
	legal&aacute;bb ugyanennyire vesz&eacute;lyesek.  Ha a
	behatol&oacute; k&eacute;pes felt&ouml;rni egy
	<groupname>kmem</groupname> csoporthoz tartoz&oacute; sgid
	bin&aacute;rist, akkor k&eacute;pes lesz olvasni a
	<filename>/dev/kmem</filename> &aacute;llom&aacute;ny
	tartalm&aacute;t, ez&aacute;ltal hozz&aacute;jut a
	titkos&iacute;tott jelszavakhoz &eacute;s &iacute;gy
	megszerezheti mag&aacute;nak ak&aacute;rmelyik
	hozz&aacute;f&eacute;r&eacute;st.  S&#245;t, a
	<groupname>kmem</groupname> csoportot megszerz&#245;
	behatol&oacute;k figyelni tudj&aacute;k a pszeud&oacute;
	termin&aacute;lokon kereszt&uuml;l &eacute;rkez&#245;
	billenty&#251;le&uuml;t&eacute;seket, m&eacute;g abban az
	esetben is, amikor a felhaszn&aacute;l&oacute;k
	egy&eacute;bk&eacute;nt biztons&aacute;gos m&oacute;dszereket
	haszn&aacute;lnak.  A <groupname>tty</groupname> csoportot
	bezsebel&#245; t&aacute;mad&oacute;k szinte b&aacute;rmelyik
	felhaszn&aacute;l&oacute; termin&aacute;lj&aacute;ra
	k&eacute;pesek &iacute;rni.  Ha a felhaszn&aacute;l&oacute;
	valamilyen termin&aacute;l programot vagy termin&aacute;l
	emul&aacute;tort haszn&aacute;l a billenty&#251;zet
	szimul&aacute;ci&oacute;j&aacute;val, akkor a behatol&oacute;
	tud olyan adatokat gener&aacute;lni, amivel a
	felhaszn&aacute;l&oacute; nev&eacute;ben adhat ki
	parancsokat.</para>

    </sect2>

    <sect2 id="secure-users">
      <title>A felhaszn&aacute;l&oacute;i
	hozz&aacute;f&eacute;r&eacute;sek v&eacute;delme</title>

      <para>A felhaszn&aacute;l&oacute;k
	hozz&aacute;f&eacute;r&eacute;seit szinte a legnehezebb
	megv&eacute;deni.  M&iacute;g a szem&eacute;lyzet tagjaival
	szemben lehet&uuml;nk k&iacute;m&eacute;letlen&uuml;l
	szigor&uacute;ak &eacute;s <quote>ki is csillagozhatjuk</quote>
	a jelszavukat, addig a felhaszn&aacute;l&oacute;k
	hozz&aacute;f&eacute;r&eacute;seivel
	&aacute;ltal&aacute;noss&aacute;gban v&eacute;ve ezt nem
	tehetj&uuml;k meg.  Ha a kez&uuml;nkben van a megfelel&#245;
	m&eacute;rt&eacute;k&#251; ir&aacute;ny&iacute;t&aacute;s, akkor
	m&eacute;g gy&#245;zhet&uuml;nk &eacute;s k&eacute;nyelmesen
	biztons&aacute;gba helyezethetj&uuml;k a
	felhaszn&aacute;l&oacute;k
	hozz&aacute;f&eacute;r&eacute;s&eacute;t.  Ha nincs, akkor nem
	tehet&uuml;nk m&aacute;st, mint &aacute;lland&oacute;an
	&#245;rk&ouml;d&uuml;nk a hozz&aacute;f&eacute;r&eacute;sek
	felett.  Az ssh &eacute;s Kerberos haszn&aacute;lata a
	felhaszn&aacute;l&oacute;k eset&eacute;n sokkalta
	problematikusabb, mivel ilyenkor j&oacute;val t&ouml;bb
	adminisztr&aacute;ci&oacute;ra &eacute;s m&#251;szaki
	seg&iacute;ts&eacute;gny&uacute;jt&aacute;sra van
	sz&uuml;ks&eacute;g, de m&eacute;g mindig jobb megold&aacute;s a
	titkos&iacute;tott jelszavakhoz k&eacute;pest.</para>

    </sect2>

    <sect2>
      <title>A jelszavakat t&aacute;rol&oacute; &aacute;llom&aacute;ny
	v&eacute;delme</title>

      <para>Az a legbiztosabb, ha min&eacute;l t&ouml;bb jelsz&oacute;t
	kicsillagozunk &eacute;s a hozz&aacute;f&eacute;r&eacute;sek
	hiteles&iacute;t&eacute;s&eacute;re ssh-t vagy Kerberost
	haszn&aacute;lunk.  Igaz, a titkos&iacute;tott jelszavakat
	t&aacute;rol&oacute; &aacute;llom&aacute;nyt
	(<filename>/etc/spwd.db</filename>) csak a
	<username>root</username> k&eacute;pes olvasni, de a
	t&aacute;mad&oacute; meg tudja szerezni ezt a jogot m&eacute;g
	olyankor is, ha <username>root</username>
	felhaszn&aacute;l&oacute;k&eacute;nt nem felt&eacute;tlen&uuml;l
	tud &iacute;rni.</para>

      <para>A rendszer&uuml;nkben fut&oacute; biztons&aacute;gi
	szkripteknek a jelszavakat t&aacute;rol&oacute;
	&aacute;llom&aacute;ny v&aacute;ltoz&aacute;s&aacute;t
	folyamatosan tudnia kell figyelnie &eacute;s jelentie
	(l&aacute;sd lentebb a <link linkend="security-integrity">Az
	&aacute;llom&aacute;nyok s&eacute;rtetlens&eacute;g&eacute;nek
	ellen&#245;rz&eacute;se</link> c&iacute;m&#251;
	fejezetet).</para>

    </sect2>

    <sect2>
      <title>A rendszermag belsej&eacute;nek, a nyers eszk&ouml;z&ouml;k
	&eacute;s az &aacute;llom&aacute;nyrendszerek
	v&eacute;delme</title>

      <para>Ha a t&aacute;mad&oacute; megszerzi a
	<username>root</username>
	hozz&aacute;f&eacute;r&eacute;s&eacute;t, akkor szinte
	b&aacute;rmit k&eacute;pes megtenni, de vannak bizonyos
	el&#245;nyei.  P&eacute;ld&aacute;ul a mostans&aacute;g
	fejlesztett legt&ouml;bb rendszermag tartalmaz valamilyen
	be&eacute;p&iacute;tett csomaglehallgat&oacute;t, amit &os;
	alatt a <devicename>bpf</devicename> eszk&ouml;z
	val&oacute;s&iacute;t meg.  A t&aacute;mad&oacute;k szinte
	mindig megpr&oacute;b&aacute;lnak valamilyen
	csomaglehallgat&oacute;t haszn&aacute;lni a felt&ouml;rt
	g&eacute;pen.  A legt&ouml;bb rendszeren azonban nem kell
	felt&eacute;tlen&uuml;l megadnunk ezt az &ouml;r&ouml;met,
	ez&eacute;rt nem is kell be&eacute;p&iacute;ten&uuml;nk a
	rendszermagba a <devicename>bpf</devicename>
	eszk&ouml;zt.</para>

      <indexterm><primary><command>sysctl</command></primary></indexterm>

      <para>De ha m&eacute;g ki is iktatjuk a
	<devicename>bpf</devicename> eszk&ouml;zt, m&eacute;g
	agg&oacute;dhatunk a <filename>/dev/mem</filename> &eacute;s
	<filename>/dev/kmem</filename> miatt.  Egy&eacute;bk&eacute;nt
	ami azt illeti, a behatol&oacute; m&eacute;g &iacute;gy is
	k&eacute;pes &iacute;rni a nyers eszk&ouml;z&ouml;kre.
	S&#245;t, a rendszermagba k&eacute;pesek vagyunk modulokat is
	bet&ouml;lteni a &man.kldload.8; haszn&aacute;lat&aacute;val.  A
	v&aacute;llalkoz&oacute; kedv&#251; t&aacute;mad&oacute; a
	rendszermag moduljak&eacute;nt k&eacute;pes telep&iacute;teni
	&eacute;s haszn&aacute;lni a saj&aacute;t
	<devicename>bpf</devicename> eszk&ouml;z&eacute;t vagy
	b&aacute;rmilyen m&aacute;s, a csomagok
	lehallgat&aacute;s&aacute;ra alkalmas eszk&ouml;zt.  Az ilyen
	probl&eacute;m&aacute;k elker&uuml;l&eacute;se
	&eacute;rdek&eacute;ben a rendszermagot a legmagasabb
	v&eacute;delmi szinten kell &uuml;zemeltetni, teh&aacute;t
	legal&aacute;bb egyes szinten.</para>

      <para>A rendszermag v&eacute;delmi szintj&eacute;t t&ouml;bb
	k&uuml;l&ouml;nb&ouml;z&#245; m&oacute;don lehet
	&aacute;ll&iacute;tani.  A v&eacute;delmi szintet &uacute;gy
	lehet a legegyszer&#251;bben n&ouml;velni, ha a
	<command>sysctl</command> paranccsal be&aacute;ll&iacute;tjuk a
	<varname>kern.securelevel</varname> nev&#251;,
	rendszerszint&#251; v&aacute;ltoz&oacute;
	&eacute;rt&eacute;k&eacute;t:</para>

      <screen>&prompt.root; <userinput>sysctl kern.securelevel=<replaceable>1</replaceable></userinput></screen>

      <para>A &os; rendszermag alap&eacute;rtelmez&eacute;s szerint a
	<literal>-1</literal> v&eacute;delmi szinten indul.  Ez
	eg&eacute;szen addig <literal>-1</literal> marad, am&iacute;g a
	rendszergazda vagy valamelyik &man.init.8; sor&aacute;n
	h&iacute;vott rendszerind&iacute;t&oacute; szkript ezt meg nem
	v&aacute;ltoztatja.  A rendszer ind&iacute;t&aacute;sa
	sor&aacute;n &uacute;gy tudjuk be&aacute;ll&iacute;tani a
	megfelel&#245; v&eacute;delmi szintet, ha az
	<filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyban
	megadjuk a <varname>kern_securelevel_enable</varname>
	v&aacute;ltoz&oacute;t a <literal>YES</literal>
	&eacute;rt&eacute;kkel, illetve
	<varname>kern_securelevel</varname>
	&eacute;rt&eacute;kek&eacute;nt a k&iacute;v&aacute;nt
	v&eacute;delmi szintet.</para>

      <para>A &os; alap&eacute;rtelmezett v&eacute;delmi szintje
	k&ouml;zvetlen&uuml;l a rendszerind&iacute;t&oacute; szkriptek
	lefut&aacute;sa ut&aacute;n <literal>-1</literal>.  Ezt
	<quote>nem biztons&aacute;gos m&oacute;dnak</quote> nevezik,
	mivel az &aacute;llom&aacute;nyok
	&iacute;r&aacute;s&aacute;&eacute;rt felel&#245;s
	&aacute;llom&aacute;nyjelz&#245;k nem felt&eacute;tlen&uuml;l
	m&#251;k&ouml;dnek, mindegyik eszk&ouml;z &iacute;rhat&oacute;,
	olvashat&oacute; &eacute;s a t&ouml;bbi.</para>

      <para>Miut&aacute;n a v&eacute;delmi szintet <literal>1</literal>
	vagy ann&aacute;l magasabb &eacute;rt&eacute;kre
	&aacute;ll&iacute;tottuk, akkor a rendszer figyelembe veszi a
	csak hozz&aacute;f&#251;z&eacute;st (append-only) &eacute;s
	m&oacute;dos&iacute;thatatlans&aacute;got (immutable)
	megszor&iacute;t&oacute; &aacute;llom&aacute;nyjelz&#245;ket,
	nem enged&eacute;lyezi a tilt&aacute;sukat &eacute;s az
	eszk&ouml;z&ouml;k k&ouml;zvetlen&uuml;l nem
	&eacute;rhet&#245;ek el.  A k&uuml;l&ouml;nb&ouml;z&#245;
	v&eacute;delmi szintek r&eacute;szletesebb
	bemutat&aacute;s&aacute;t a &man.security.7; man oldalon
	olvashatjuk (vagy a &os; 7.0 el&#245;tti v&aacute;ltozataiban a
	&man.init.8; man oldalon).</para>

      <note>
	<para>Az <literal>1</literal> &eacute;s az afeletti
	  v&eacute;delmi szinteken t&ouml;bbek k&ouml;zt az X11 nem
	  felt&eacute;tlen&uuml;l lesz futtathat&oacute; (mivel a
	  <filename>/dev/io</filename> eszk&ouml;z el&eacute;r&eacute;se
	  blokkolt), illetve a rendszer friss&iacute;t&eacute;se is
	  akad&aacute;lyokba fog &uuml;tk&ouml;zni (a
	  <maketarget>installworld</maketarget> futtat&aacute;sa
	  sor&aacute;n ideiglenesen ki kell kapcsolni az append-only
	  &eacute;s immutable &aacute;llom&aacute;nyjelz&#245;ket).  Az
	  X11 eset&eacute;ben ezt valahogy m&eacute;g ki lehet
	  ker&uuml;lni &uacute;gy, hogy ha az &man.xdm.1; d&eacute;mont
	  m&eacute;g a rendszerind&iacute;t&aacute;s elej&eacute;n
	  aktiv&aacute;ljuk (amikor a v&eacute;delmi szint m&eacute;g
	  kell&#245;en alacsony).  Az &ouml;sszes v&eacute;delmi szint
	  &eacute;s megszor&iacute;t&aacute;s eset&eacute;n azonban nem
	  mindig adhat&oacute; ilyen jelleg&#251; javaslat, ez&eacute;rt
	  ilyenkor mindig &eacute;rdemes el&#245;re tervezni egy
	  keveset.  Emellett fontos alaposan megismerni a
	  k&uuml;l&ouml;nb&ouml;z&#245; v&eacute;delmi
	  megszor&iacute;t&aacute;sokat, mivel jelent&#245;s
	  m&eacute;rt&eacute;kben visszafoghatj&aacute;k a rendszer
	  haszn&aacute;lhat&oacute;s&aacute;g&aacute;t.  Ez seg&iacute;t
	  az adott helyzetben az egyszer&#251;bb megold&aacute;st
	  v&aacute;lasztani &eacute;s ez&aacute;ltal elker&uuml;lni a
	  kellemetlen meglepet&eacute;seket.</para>
      </note>

      <para>Ha a rendszermag v&eacute;delmi szintj&eacute;t az
	<literal>1</literal> &eacute;rt&eacute;k vagy afel&eacute;
	emelj&uuml;k, akkor hasznos lehet a fontosabb
	(l&eacute;nyeg&eacute;ben minden olyan programnak, amely a
	v&eacute;delmi szint helyes
	be&aacute;ll&iacute;t&oacute;d&aacute;sa el&#245;tt lefut)
	programoknak, k&ouml;nyvt&aacute;raknak &eacute;s szkripteknek
	be&aacute;ll&iacute;tani az <literal>schg</literal>
	&aacute;llom&aacute;nyjelz&#245;t.  Ilyenkor azonban vegy&uuml;k
	figyelembe, hogy a rendszer friss&iacute;t&eacute;se is
	nehezebb&eacute; v&aacute;lik a magasabb v&eacute;delmi
	szinteken.  Egy m&#251;k&ouml;d&#245;k&eacute;pesebb
	megold&aacute;s lehet, ha rendszer&uuml;nket egy magasabb
	v&eacute;delmi szinten haszn&aacute;ljuk, de nem
	&aacute;ll&iacute;tjuk be mindegyik rendszerszint&#251;
	&aacute;llom&aacute;nyra az <literal>schg</literal>
	&aacute;llom&aacute;nyjelz&#245;t.  M&aacute;sik
	lehet&#245;s&eacute;g m&eacute;g a <filename>/</filename>
	&eacute;s <filename>/usr</filename> part&iacute;ci&oacute;k
	&iacute;r&aacute;sv&eacute;dett csatlakoztat&aacute;sa.  Ne
	felejts&uuml;k el azonban, hogy ha t&uacute;ls&aacute;gosan
	szigor&uacute;ak vagyunk magunkhoz, akkor azzal egy&uacute;ttal
	a behatol&aacute;s &eacute;szlel&eacute;s&eacute;t is meg tudjuk
	nehez&iacute;teni!</para>
    </sect2>

    <sect2 id="security-integrity">
      <title>Az &aacute;llom&aacute;nyok
	s&eacute;rtetlens&eacute;g&eacute;nek ellen&#245;rz&eacute;se:
	bin&aacute;risok, konfigur&aacute;ci&oacute;s
	&aacute;llom&aacute;nyok stb.</title>

      <para>Ha arr&oacute;l van sz&oacute;, csak a legfontosabb
	rendszerszint&#251; konfigur&aacute;ci&oacute;s- &eacute;s
	vez&eacute;rl&#245;&aacute;llom&aacute;nyokat tudjuk
	megv&eacute;deni, m&eacute;g miel&#245;tt a kor&aacute;bban
	emlegetett k&eacute;nyelmi t&eacute;nyez&#245; kimutatn&aacute;
	a foga feh&eacute;rj&eacute;t.  P&eacute;ld&aacute;ul, ha a
	<command>chflags</command> paranccsal be&aacute;ll&iacute;tjuk
	az <literal>schg</literal> &aacute;llom&aacute;nyjelz&#245;t a
	<filename>/</filename> &eacute;s <filename>/usr</filename>
	&aacute;llom&aacute;nyrendszereken tal&aacute;lhat&oacute;
	legt&ouml;bb &aacute;llom&aacute;nyra, akkor az minden bizonnyal
	cs&ouml;kkenti a hat&eacute;konys&aacute;gunkat, hiszen az
	&aacute;llom&aacute;nyok v&eacute;delm&eacute;nek
	n&ouml;veked&eacute;s&eacute;vel cs&ouml;kken az
	&eacute;szlel&eacute;s lehet&#245;s&eacute;ge.  A v&eacute;delmi
	vonalaink k&ouml;z&uuml;l ugyanis az utols&oacute; tal&aacute;n
	az egyik legfontosabb &mdash; a detekt&aacute;l&aacute;s.  A
	fel&eacute;p&iacute;tett biztons&aacute;gi rendszer&uuml;nk
	legnagyobb r&eacute;sze szinte teljesen hasztalan (vagy ami
	m&eacute;g rosszabb, a biztons&aacute;g hamis
	&eacute;rzet&eacute;t kelti), ha nem vagyunk k&eacute;pesek
	&eacute;szrevenni a bet&ouml;r&eacute;si
	k&iacute;s&eacute;rleteket.  A v&eacute;delmi rendszer egyik
	r&eacute;sz&eacute;re nem a t&aacute;mad&oacute;
	meg&aacute;ll&iacute;t&aacute;s&aacute;hoz, hanem a
	lelass&iacute;t&aacute;s&aacute;hoz van sz&uuml;ks&eacute;g,
	hogy &iacute;gy majd munka k&ouml;zben &eacute;rhess&uuml;k
	tetten.</para>

      <para>A bet&ouml;r&eacute;s t&eacute;ny&eacute;t legjobban a
	megv&aacute;ltozott, hi&aacute;nyz&oacute; vagy &eacute;ppen
	v&aacute;ratlanul felbukkan&oacute; &aacute;llom&aacute;nyok
	ut&aacute;ni kutat&aacute;ssal tudjuk felismerni.  A
	m&oacute;dos&iacute;tott &aacute;llom&aacute;nyokat
	&aacute;ltal&aacute;ban egy m&aacute;sik (gyakran
	k&ouml;zpontos&iacute;tott) korl&aacute;tozott
	hozz&aacute;f&eacute;r&eacute;s&#251; rendszerb&#245;l
	ellen&#245;rizhetj&uuml;k a legjobban.  Fontos, hogy ha egy
	korl&aacute;tozott hozz&aacute;f&eacute;r&eacute;s&#251;,
	kiemelten v&eacute;dett rendszeren &iacute;rjuk a
	v&eacute;delem&eacute;rt felel&#245;s szkripteket, akkor azok
	szinte teljesen l&aacute;thatlanok lesznek a
	t&aacute;mad&oacute; sz&aacute;m&aacute;ra.  A legjobb
	kihaszn&aacute;l&aacute;s &eacute;rdek&eacute;ben a
	korl&aacute;tozott hozz&aacute;f&eacute;r&eacute;s&#251;
	g&eacute;pnek jelent&#245;s m&eacute;rt&eacute;k&#251;
	r&aacute;l&aacute;t&aacute;ssal kell rendelkeznie az &ouml;sszes
	t&ouml;bbi g&eacute;pre, amit &iacute;r&aacute;sv&eacute;dett
	NFS exportok vagy ssh kulcsp&aacute;rok
	felhaszn&aacute;l&aacute;s&aacute;val &eacute;rhet&uuml;nk el.
	A h&aacute;l&oacute;zati forgalmat lesz&aacute;m&iacute;tva az
	NFS l&aacute;tszik a legkev&eacute;sb&eacute; &mdash;
	seg&iacute;ts&eacute;g&eacute;vel l&eacute;nyeg&eacute;ben
	&eacute;szrev&eacute;tlen&uuml;l tudjuk figyelni az egyes
	g&eacute;pek &aacute;llom&aacute;nyrendszereit.  Ha a
	megfigyel&eacute;sre haszn&aacute;lt szerver a kliensekhez
	switchen kereszt&uuml;l csatlakozik, akkor az NFS gyakran jobb
	v&aacute;laszt&aacute;snak bizonyul.  Ha a szerver hubon vagy
	t&ouml;bb h&aacute;l&oacute;zati elemen kereszt&uuml;l
	&eacute;ri el a megfigyelni k&iacute;v&aacute;nt klienseket,
	akkor az NFS nem el&eacute;gg&eacute; biztons&aacute;gos
	(&eacute;s hat&eacute;kony), ez&eacute;rt ilyen esetekben az ssh
	v&aacute;laszt&aacute;sa lehet a kedvez&#245; m&eacute;g az ssh
	&aacute;ltal hagyott nyomokkal egy&uuml;tt is.</para>

      <para>Miut&aacute;n a korl&aacute;tozott
	hozz&aacute;f&eacute;r&eacute;s&#251; g&eacute;p&uuml;nk
	legal&aacute;bb l&aacute;tja a hozz&aacute;tartoz&oacute;
	kliensek rendszereit, el kell k&eacute;sz&iacute;ten&uuml;nk a
	t&eacute;nyleges monitoroz&aacute;st v&eacute;gz&#245;
	szkripteket.  Ha NFS csatlakoz&aacute;st t&eacute;telez&uuml;nk
	fel, akkor az olyan egyszer&#251; rendszereszk&ouml;z&ouml;kkel,
	mint p&eacute;ld&aacute;ul a &man.find.1; &eacute;s &man.md5.1;
	k&eacute;pesek vagyunk &ouml;sszerakni ezeket.  A szemmel
	tartott kliensek &aacute;llom&aacute;nyait naponta
	legal&aacute;bb egyszer &eacute;rdemes ellen&#245;rizni md5-tel,
	valamint m&eacute;g enn&eacute;l gyakrabban is tesztelni az
	<filename>/etc</filename> &eacute;s
	<filename>/usr/local/etc</filename> k&ouml;nyvt&aacute;rakban
	tal&aacute;lhat&oacute; konfigur&aacute;ci&oacute;s &eacute;s
	vez&eacute;rl&#245;&aacute;llom&aacute;nyokat.  Ha valamilyen
	elt&eacute;r&eacute;st tapasztal az ellen&#245;rz&eacute;st
	v&eacute;gz&#245; szerver&uuml;nk &eacute;s a rajta lev&#245;
	md5 inform&aacute;ci&oacute;k is helyesek, akkor
	&eacute;rtes&iacute;tenie kell a rendszergazd&aacute;t.  Egy
	j&oacute; v&eacute;delmi szkript k&eacute;pes megkeresni az oda
	nem ill&#245; suid bin&aacute;risokat, valamint az &uacute;j
	vagy t&ouml;r&ouml;lt &aacute;llom&aacute;nyokat a
	<filename>/</filename> &eacute;s a <filename>/usr</filename>
	part&iacute;ci&oacute;kon.</para>

      <para>A v&eacute;delmi szkriptek meg&iacute;r&aacute;sa valamivel
	nehezebb feladat, ha ssh-t haszn&aacute;lunk az NFS helyett.  A
	futtat&aacute;sukhoz a szkripteket &eacute;s az &aacute;ltaluk
	haszn&aacute;lt eszk&ouml;z&ouml;ket (p&eacute;ld&aacute;ul
	find) az <command>scp</command> paranccsal
	l&eacute;nyeg&eacute;ben &aacute;t kell m&aacute;solni a
	kliensekre, amivel &iacute;gy l&aacute;that&oacute;v&aacute;
	v&aacute;lnak.  Ne feledj&uuml;k tov&aacute;bb&aacute;, hogy az
	<application>ssh</application> kliens m&aacute;r eleve
	felt&ouml;rt lehet.  Sz&oacute;, ami sz&oacute;, ha nem
	megb&iacute;zhat&oacute;
	&ouml;sszek&ouml;ttet&eacute;sekr&#245;l besz&eacute;l&uuml;nk,
	akkor az ssh haszn&aacute;lata elker&uuml;lhetetlen, de nem
	felt&eacute;tlen&uuml;l egyszer&#251;.</para>

      <para>Egy j&oacute; v&eacute;delmi szkript &eacute;szreveszi a
	felhaszn&aacute;l&oacute;k &eacute;s a szem&eacute;lyzet
	tagjainak hozz&aacute;f&eacute;r&eacute;s&eacute;t
	vez&eacute;rl&#245; &aacute;llom&aacute;nyokban, mint
	p&eacute;ld&aacute;ul az <filename>.rhosts</filename>,
	<filename>.shosts</filename>,
	<filename>.ssh/authorized_keys</filename> &eacute;s
	t&aacute;rsaiban keletkezett v&aacute;ltoz&aacute;sokat is,
	amelyek esetleg elker&uuml;lhetik egy <literal>MD5</literal>
	alap&uacute; ellen&#245;rz&eacute;s figyelm&eacute;t.</para>

      <para>Ha netal&aacute;n &oacute;r&aacute;si mennyis&eacute;g&#251;
	t&aacute;rter&uuml;letettel rendelkezn&eacute;nk, akkor
	eltarthat egy ideig, am&iacute;g v&eacute;gigs&ouml;pr&uuml;nk
	az &ouml;sszes part&iacute;ci&oacute; &ouml;sszes
	&aacute;llom&aacute;ny&aacute;n.  Ebben az esetben
	&eacute;rdemes olyan be&aacute;ll&iacute;t&aacute;sokat megadni
	az &aacute;llom&aacute;nyrendszerek
	csatlakoztat&aacute;s&aacute;n&aacute;l, amivel le tudjuk
	tiltani a suid enged&eacute;llyel rendelkez&#245;
	bin&aacute;risok futtat&aacute;s&aacute;t.  Ezzel kapcsolatban a
	&man.mount.8; parancs <literal>nosuid</literal>
	opci&oacute;j&aacute;t n&eacute;zz&uuml;k meg.  Hetente
	legal&aacute;bb egyszer az&eacute;rt m&eacute;gis &eacute;rdemes
	&aacute;tn&eacute;zni az ilyen part&iacute;ci&oacute;kat is,
	mivel ez a r&eacute;teg a bet&ouml;r&eacute;si
	k&iacute;s&eacute;rletek felder&iacute;t&eacute;s&eacute;vel
	foglalkozik, f&uuml;ggetlen&uuml;l a
	sikeress&eacute;g&uuml;kt&#245;l.</para>

      <para>A fut&oacute; programok nyilv&aacute;ntart&aacute;sa
	(l&aacute;sd &man.accton.8;) egy olyan viszonylag kev&eacute;s
	k&ouml;lts&eacute;ggel j&aacute;r&oacute; lehet&#245;s&eacute;g
	az oper&aacute;ci&oacute;s rendszerben, ami
	seg&iacute;ts&eacute;g&uuml;nkre lehet a bet&ouml;r&eacute;s
	ut&aacute;ni esem&eacute;nyek
	ki&eacute;rt&eacute;kel&eacute;s&eacute;ben.
	K&uuml;l&ouml;n&ouml;sen hasznos olyankor, amikor
	megpr&oacute;b&aacute;ljuk modellezni, mik&eacute;pp is
	siker&uuml;lt a t&aacute;mad&oacute;nak bejutnia a
	rendszer&uuml;nkbe, term&eacute;szetesen felt&eacute;telezve,
	hogy az ehhez felhaszn&aacute;lt feljegyz&eacute;sek a
	bet&ouml;r&eacute;s ut&aacute;n is &eacute;rintetlenek
	maradtak.</para>

      <para>V&eacute;g&uuml;l a v&eacute;delmet ell&aacute;t&oacute;
	szkripteknek javasolt feldolgozni a
	napl&oacute;&aacute;llom&aacute;nyokat is, valamint a
	napl&oacute;kat magukat is a lehet&#245;
	legbiztons&aacute;gosabb form&aacute;ban gener&aacute;lni
	&mdash; ilyenkor nagyon hasznos lehet, ha egy t&aacute;voli
	g&eacute;pre napl&oacute;zunk.  A behatol&oacute;
	megpr&oacute;b&aacute;lja majd elt&uuml;ntetni a nyomait, a
	napl&oacute;&aacute;llom&aacute;nyok viszont nagyon fontosak a
	rendszergazda sz&aacute;m&aacute;ra a bet&ouml;r&eacute;si
	k&iacute;s&eacute;rletek idej&eacute;nek &eacute;s
	m&oacute;dj&aacute;nak
	meg&aacute;llap&iacute;t&aacute;s&aacute;ban.  A napl&oacute;kat
	&uacute;gy tudjuk tart&oacute;san r&ouml;gz&iacute;teni, ha a
	rendszerkonzol &uuml;zeneteit soros porton kereszt&uuml;l
	gy&#251;jtj&uuml;k &ouml;ssze a konzolok
	fel&uuml;gyelet&eacute;&eacute;rt felel&#245;s
	biztons&aacute;gos g&eacute;pen.</para>

    </sect2>

    <sect2>
      <title>&Aacute;lland&oacute; paranoia</title>

      <para>Egy kis paranoia sosem &aacute;rt.  Elmondhat&oacute;, hogy
	a rendszergazda tetsz&#245;leges sz&aacute;m&uacute;
	biztons&aacute;gi int&eacute;zked&eacute;ssel &eacute;lhet
	eg&eacute;szen addig, am&iacute;g az nincs hat&aacute;ssal a
	k&eacute;nyelm&eacute;re, &eacute;s a k&eacute;nyelmet
	<emphasis>befoly&aacute;sol&oacute;</emphasis> biztons&aacute;gi
	int&eacute;zked&eacute;seket pedig megfelel&#245;
	m&eacute;rlegel&eacute;s mellett tegye meg.  Ami m&eacute;g
	enn&eacute;l is fontosabb, hogy mindig v&aacute;ltoztassunk
	valamit a biztons&aacute;gi h&aacute;l&oacute;nkon &mdash; mivel
	ha egy az egyben k&ouml;vetj&uuml;k a dokumentumban
	le&iacute;rtakat, akkor ezzel egy&uuml;tt kiadjuk a
	bejut&aacute;s receptj&eacute;t annak a leend&#245;
	t&aacute;mad&oacute;nknak, aki szint&eacute;n elolvasta
	ugyanezt.</para>

    </sect2>

    <sect2>
      <title>A szolg&aacute;ltat&aacute;sok
	m&#251;k&ouml;d&eacute;sk&eacute;ptelenn&eacute;
	t&eacute;tel&eacute;t c&eacute;lz&oacute;
	t&aacute;mad&aacute;sok</title>

      <indexterm><primary>Denial of Service (DoS)</primary></indexterm>

      <para>Ez a szakasz a szolg&aacute;ltat&aacute;sok
	m&#251;k&ouml;d&eacute;sk&eacute;ptelens&eacute;g&eacute;t
	el&eacute;rni k&iacute;v&aacute;n&oacute;, m&aacute;s
	n&eacute;ven <quote>Denial of Service</quote>
	t&iacute;pus&uacute; t&aacute;mad&aacute;sokkal foglalkozik.
	Noha nem tudunk t&uacute;ls&aacute;gosan sokat tenni a
	manaps&aacute;g felbukkan&oacute; &aacute;lc&aacute;zott, a
	h&aacute;l&oacute;zatunk tot&aacute;lis
	leterhel&eacute;s&eacute;t c&eacute;lbavev&#245;
	t&aacute;mad&aacute;sok ellen, akadnak olyan
	&aacute;ltal&aacute;nos &eacute;rv&eacute;ny&#251;
	eszk&ouml;z&ouml;k, amelyekkel elej&eacute;t vehetj&uuml;k a
	szervereink sz&eacute;tbomz&aacute;s&aacute;nak:</para>

      <orderedlist>
	<listitem>
	  <para>A l&eacute;tj&ouml;v&#245;
	    szerverp&eacute;ld&aacute;nyok
	    korl&aacute;toz&aacute;sa.</para>
	</listitem>

	<listitem>
	  <para>Az ugr&oacute;deszkaszer&#251; t&aacute;mad&aacute;sok
	    (t&aacute;mad&aacute;s ICMP-v&aacute;lasszal,
	    pingsz&oacute;r&aacute;s stb.)
	    korl&aacute;toz&aacute;sa.</para>
	</listitem>

	<listitem>
	  <para>A rendszermag &uacute;tv&aacute;laszt&aacute;si
	    gyors&iacute;t&oacute;t&aacute;r&aacute;nak
	    t&uacute;lterhel&eacute;se.</para>
	</listitem>
      </orderedlist>

      <para>A DoS t&aacute;mad&aacute;sok egyik jellemz&#245;
	s&eacute;m&aacute;ja szerint egy sokszoroz&oacute;dni
	k&eacute;pes szervert t&aacute;madnak meg, amelynek igyekeznek
	min&eacute;l t&ouml;bb p&eacute;ld&aacute;ny&aacute;t
	legy&aacute;rtatni, m&iacute;g v&eacute;g&uuml;l az ezt
	futtat&oacute; rendszer ki nem fogy a
	mem&oacute;ri&aacute;b&oacute;l,
	&aacute;llom&aacute;nyle&iacute;r&oacute;b&oacute;l
	sat&ouml;bbib&#245;l &eacute;s meg&aacute;ll&aacute;sra nem
	k&eacute;nyszer&uuml;l.  Az <application>inetd</application>
	(l&aacute;sd &man.inetd.8;) sz&aacute;mos
	lehet&#245;s&eacute;get k&iacute;n&aacute;l fel ennek
	megakad&aacute;lyoz&aacute;s&aacute;ra.  Ezzel kapcsolatban
	szeretn&eacute;nk megjegyezni, hogy b&aacute;r ezzel el tudjuk
	ker&uuml;lni a g&eacute;p&uuml;nk
	le&aacute;ll&aacute;s&aacute;t, semmilyen garanci&aacute;t nem
	ad arra, hogy a szolg&aacute;ltat&aacute;s a
	t&aacute;mad&aacute;s sor&aacute;n is zavartalanul &uuml;zemel
	tov&aacute;bb.  Alaposan olvassuk el az
	<application>inetd</application> man oldal&aacute;t &eacute;s
	legy&uuml;nk k&uuml;l&ouml;n&ouml;s tekintettel a
	<option>-c</option>, <option>-C</option> &eacute;s
	<option>-R</option> kapcsol&oacute;ira.  Vigy&aacute;zzunk, hogy
	az <application>inetd</application> <option>-C</option>
	kapcsol&oacute;j&aacute;t k&eacute;pesek kij&aacute;tszani az
	&aacute;lc&aacute;zott IP-vel &eacute;rkez&#245;
	t&aacute;mad&aacute;sok, ez&eacute;rt ink&aacute;bb az
	el&#245;bbi kapcsol&oacute;k valamilyen
	kombin&aacute;ci&oacute;ja az aj&aacute;nlott.  Egyes
	szerverprogramokn&aacute;l be lehet &aacute;ll&iacute;tani a
	p&eacute;ld&aacute;nyainak maxim&aacute;lis
	sz&aacute;m&aacute;t.</para>

      <para>A <application>Sendmail</application> rendelkezik egy
	<option>-OMaxDaemonChildren</option>
	be&aacute;ll&iacute;t&aacute;ssal, ami a terhel&eacute;sben
	lev&#245; k&eacute;sleltet&eacute;se miatt n&eacute;ha mintha
	jobban bev&aacute;lna, mint a
	<application>Sendmail</application>
	terhel&eacute;skorl&aacute;toz&oacute; param&eacute;terei.  A
	<application>Sendmail</application> ind&iacute;t&aacute;sakor
	teh&aacute;t a <literal>MaxDaemonChildren</literal>
	param&eacute;tert javasolt megadni egy olyan
	&eacute;rt&eacute;kkel, amely elegend&#245; a
	<application>Sendmail</application> sz&aacute;m&aacute;ra
	betervezett terhel&eacute;s kiszolg&aacute;l&aacute;s&aacute;ra,
	de m&eacute;g kev&eacute;s ahhoz, hogy a
	<application>Sendmail</application> f&#251;be harapjon
	t&#245;le.  Tov&aacute;bb&aacute; b&ouml;lcs dolog a
	<application>Sendmail</application>t v&aacute;rakoz&aacute;si
	sorral (<option>-ODeliveryMode=queued</option>) &eacute;s
	d&eacute;monk&eacute;nt (<command>sendmail -bd</command>),
	k&uuml;l&ouml;n feldolgoz&aacute;si menetekkel
	(<command>sendmail -q15m</command>) futtatni.  Ha
	tov&aacute;bbra is val&oacute;s idej&#251;
	k&eacute;zbes&iacute;t&eacute;st akarunk, akkor a
	feldolgoz&aacute;st kisebb id&#245;k&ouml;z&ouml;kkel is
	lefuttathatjuk (p&eacute;ld&aacute;ul <option>-q1m</option>), de
	arra <emphasis>mindig &uuml;gyelj&uuml;nk</emphasis>, hogy a
	<literal>MaxDaemonChildren</literal>
	be&aacute;ll&iacute;t&aacute;sa ne okozzon
	kaszk&aacute;dos&iacute;t&aacute;si hib&aacute;kat a
	<application>Sendmail</application>
	m&#251;k&ouml;d&eacute;s&eacute;ben.</para>

      <para>A <application>Syslogd</application> k&ouml;zvetlen&uuml;l
	is t&aacute;madhat&oacute;, ez&eacute;rt hat&aacute;rozottan
	javasoljuk a <option>-s</option> haszn&aacute;lat&aacute;t,
	amikor csak lehet, minden m&aacute;s esetben pedig a
	<option>-a</option> be&aacute;ll&iacute;t&aacute;st.</para>

      <para>Ford&iacute;tsunk kell&#245; figyelmet a TCP kapcsolatok
	burkol&aacute;s&aacute;t v&eacute;gz&#245; <application>TCP
	Wrapper</application> <quote>reverse-ident</quote>
	lehet&#245;s&eacute;g&eacute;re, ami szint&eacute;n
	k&ouml;zvetlen&uuml;l t&aacute;madhat&oacute;.  Ebb&#245;l az
	okb&oacute;l kifoly&oacute;lag val&oacute;sz&iacute;n&#251;leg
	nem is akarjuk a <application>TCP Wrapper</application>
	&aacute;ltal felk&iacute;n&aacute;lt reverse-ident-et
	haszn&aacute;lni.</para>

      <para>J&oacute;l j&aacute;runk el abban az esetben, ha a
	bels&#245; szolg&aacute;ltat&aacute;sainkat az
	&uacute;tv&aacute;laszt&oacute;ink ment&eacute;n t&#251;zfal
	seg&iacute;ts&eacute;g&eacute;vel v&eacute;dj&uuml;k meg a
	k&uuml;ls&#245; hozz&aacute;f&eacute;r&eacute;st&#245;l.  Ezzel
	l&eacute;nyeg&eacute;ben a helyi h&aacute;l&oacute;zatunkat
	k&iacute;v&uuml;lr&#245;l fenyeget&#245; t&aacute;mad&aacute;sok
	ellen v&eacute;dekez&uuml;nk, de ez nem ny&uacute;jt
	elegend&#245; v&eacute;delmet a bels&#245;
	szolg&aacute;ltat&aacute;saink eset&eacute;n a
	<username>root</username> hozz&aacute;f&eacute;r&eacute;s
	megszerz&eacute;s&eacute;re ir&aacute;nyul&oacute;
	k&iacute;s&eacute;rletek ellen.  Mindig egy exkluz&iacute;v,
	teh&aacute;t z&aacute;rt t&#251;zfalat &aacute;ll&iacute;tsunk
	be, vagyis <quote>t&#251;zfalazzunk mindent
	<emphasis>kiv&eacute;ve</emphasis> az A, B, C, D &eacute;s M-Z
	portokat</quote>.  Ezen a m&oacute;don ki tudjuk sz&#251;rni az
	&ouml;sszes alacsonyabb portot, kiv&eacute;ve bizonyos eseteket,
	mint p&eacute;ld&aacute;ul a <application>named</application>
	(ha az adott z&oacute;n&aacute;ban ez az els&#245;dleges
	g&eacute;p), <application>ntalkd</application>,
	<application>sendmail</application> vagy m&aacute;s interneten
	kereszt&uuml;l el&eacute;rhet&#245;
	szolg&aacute;ltat&aacute;sokat.  Ha m&aacute;sk&eacute;ppen
	&aacute;ll&iacute;tjuk a t&#251;zfalat &mdash; inkluz&iacute;v,
	ny&iacute;lt avagy megenged&#245; m&oacute;don, akkor j&oacute;
	es&eacute;llyel elfelejt&uuml;nk <quote>lez&aacute;rni</quote>
	egy csom&oacute; szolg&aacute;ltat&aacute;st, vagy &uacute;gy
	adunk hozz&aacute; egy &uacute;j bels&#245;
	szolg&aacute;ltat&aacute;st, hogy k&ouml;zben elfelejtj&uuml;k
	friss&iacute;teni a t&#251;zfalat.  Enn&eacute;l m&eacute;g azon
	is jobb, ha a t&#251;zfalon nyitunk egy magasabb
	portsz&aacute;m&uacute; tartom&aacute;nyt, &eacute;s ott
	val&oacute;s&iacute;tjuk meg ezt a megenged&#245; jelleg&#251;
	m&#251;k&ouml;d&eacute;st, az alacsonyabb portok
	vesz&eacute;lybe sodr&aacute;sa n&eacute;lk&uuml;l.  Vegy&uuml;k
	azt is sz&aacute;m&iacute;t&aacute;sba, hogy a &os;-ben a
	kiosztott portokat dinamikusan &aacute;ll&iacute;thatjuk a
	<varname>net.inet.ip.portrange</varname> sysctl
	v&aacute;ltoz&oacute;kon kereszt&uuml;l (<command>sysctl -a |
	fgrep portrange</command>), ami nagys&aacute;grendekkel
	megk&ouml;nny&iacute;ti a t&#251;zfal
	be&aacute;ll&iacute;t&aacute;s&aacute;t.  Ennek megfelel&#245;en
	p&eacute;ld&aacute;ul meg tudjuk adni, hogy a 4000-t&#245;l
	5000-ig terjed&#245; porttartom&aacute;ny a 49152-t&#245;l
	65535-ig h&uacute;z&oacute;d&oacute; tartom&aacute;nyba
	ker&uuml;lj&ouml;n &aacute;t, majd a 4000 alatti &ouml;sszes
	portot blokkoljuk (term&eacute;szetesen az internetr&#245;l
	sz&aacute;nd&eacute;kosan hozz&aacute;f&eacute;rhet&#245; portok
	kiv&eacute;tel&eacute;vel).</para>

      <para>A DoS t&aacute;mad&aacute;sok m&aacute;sik elterjedt
	fajt&aacute;ja az &uacute;n.  <quote>ugr&oacute;deszka
	t&aacute;mad&aacute;s</quote> &mdash; ilyenkor a szervert
	&uacute;gy pr&oacute;b&aacute;lj&aacute;k t&uacute;lterhelni,
	hogy folyamatosan v&aacute;laszokat k&eacute;rnek t&#245;le a
	helyi h&aacute;l&oacute;zatr&oacute;l vagy egy m&aacute;sik
	sz&aacute;m&iacute;t&oacute;g&eacute;pr&#245;l.  Az ilyen
	term&eacute;szet&#251; t&aacute;mad&aacute;sok k&ouml;z&uuml;l
	is a legn&eacute;pszer&#251;bb az <emphasis>ICMP
	pingsz&oacute;r&aacute;sos t&aacute;mad&aacute;s</emphasis>.  A
	t&aacute;mad&oacute; olyan ping csomagokat k&uuml;ld sz&eacute;t
	a helyi h&aacute;l&oacute;zaton, amelyek
	forr&aacute;s&aacute;nak azt a g&eacute;pet jel&ouml;li meg,
	amelyiket meg akarja t&aacute;madni.  Ha a
	h&aacute;l&oacute;zatokat elv&aacute;laszt&oacute;
	&uacute;tv&aacute;laszt&oacute;k nem fogj&aacute;k meg a
	pingsz&oacute;r&aacute;st, akkor a helyi
	h&aacute;l&oacute;zatr&oacute;l &ouml;sszes g&eacute;pe
	nekil&aacute;t v&aacute;laszolgatni a meghamis&iacute;tott
	forr&aacute;s c&iacute;m&eacute;re, amivel &iacute;gy teljesen
	leterhelik az &aacute;ldozatot.  Ez k&uuml;l&ouml;n&ouml;sen
	akkor hat&aacute;sos, amikor a t&aacute;mad&oacute; ugyanezt a
	tr&uuml;kk&ouml;t elj&aacute;tssza egyszerre t&ouml;bb tucat
	k&uuml;l&ouml;nb&ouml;z&#245; h&aacute;l&oacute;zatban is.  Az
	&uuml;zenetsz&oacute;r&aacute;ssal j&aacute;r&oacute;
	t&aacute;mad&aacute;sok ak&aacute;r sz&aacute;zh&uacute;sz
	megabitnyi forgalmat is k&eacute;pesek gener&aacute;lni
	m&aacute;sodpercenk&eacute;nt.  A m&aacute;sodik legelterjedtebb
	ugr&oacute;deszk&aacute;s t&aacute;mad&aacute;s az ICMP
	hiba-visszajelz&eacute;si rendszere ellen ir&aacute;nyul.
	Ilyenkor a t&aacute;mad&oacute; ICMP hiba&uuml;zeneteket
	kiv&aacute;lt&oacute; csomagok
	k&eacute;sz&iacute;t&eacute;s&eacute;vel k&eacute;pes
	elt&ouml;m&iacute;teni egy szerver bej&ouml;v&#245;
	h&aacute;l&oacute;zati kapcsolat&aacute;t &eacute;s az ICMP
	v&aacute;laszokkal pedig a szerver maga dug&iacute;tja el a
	kimen&#245; h&aacute;l&oacute;zati kapcsolat&aacute;t.  Ez a
	fajt&aacute;j&uacute; t&aacute;mad&aacute;s k&eacute;pes
	kinyomni az &ouml;sszes mem&oacute;ri&aacute;t a szerverb&#245;l
	&eacute;s ezzel &ouml;sszeomlasztani, k&uuml;l&ouml;n&ouml;sen
	olyankor, amikor a szerver nem tudja el&eacute;g gyorsan
	elnyelni az &aacute;ltala gener&aacute;lt ICMP
	v&aacute;laszokat.  A <varname>net.inet.icmp.icmplim</varname>
	sysctl v&aacute;ltoz&oacute;val tudunk g&aacute;tat szabni a
	t&aacute;mad&aacute;sok ezen fajt&aacute;j&aacute;nak.  Az
	ugr&oacute;deszk&aacute;s t&aacute;mad&aacute;sok utols&oacute;
	nagyobb oszt&aacute;lya az <application>inetd</application>
	olyan szolg&aacute;ltat&aacute;sait szemeli ki, mint
	p&eacute;ld&aacute;ul az udp echo.  A t&aacute;mad&oacute;
	ilyenkor egyszer&#251;en k&uuml;ld a helyi
	h&aacute;l&oacute;zatunkon tal&aacute;lhat&oacute; A &eacute;s B
	szerver&uuml;nknek egy olyan UDP csomagot, ahol
	forr&aacute;sk&eacute;nt az A szerver echo portj&aacute;t adja
	meg, c&eacute;lnak pedig a B szerver echo portj&aacute;t.
	Ezut&aacute;n a k&eacute;t szerver elkezdi egym&aacute;s
	k&ouml;z&ouml;tt passzolgatni ezt az egyetlen csomagot.  A
	t&aacute;mad&oacute; m&eacute;g t&ouml;bb ilyen csomag
	befecskendez&eacute;s&eacute;vel pillanatok alatt k&eacute;pes
	leterhelni a k&eacute;t szervert &eacute;s helyi
	h&aacute;l&oacute;zatot.  Hasonl&oacute; probl&eacute;m&aacute;k
	vannak a bels&#245; <application>chargen</application>
	portj&aacute;val is.  Egy hozz&aacute;&eacute;rt&#245;
	rendszergazda ez&eacute;rt kikapcsolja az &ouml;sszes ilyen
	inetd-alap&uacute; bels&#245; tesztel&#245;
	szolg&aacute;ltat&aacute;st.</para>

      <para>Az &aacute;lc&aacute;zott csomagok
	felhaszn&aacute;lhat&oacute;ak a rendszermag
	&uacute;tv&aacute;laszt&oacute;
	gyors&iacute;t&oacute;t&aacute;r&aacute;nak
	t&uacute;lterhel&eacute;s&eacute;re is.  Ezzel kapcsolatban
	n&eacute;zz&uuml;k meg a
	<varname>net.inet.ip.rtexpire</varname>,
	<varname>rtminexpire</varname> &eacute;s
	<varname>rtmaxcache</varname> sysctl v&aacute;ltoz&oacute;kat.
	A v&eacute;letlenszer&#251; IP-c&iacute;mekkel megc&iacute;mzett
	&aacute;lc&aacute;zott csomagok hat&aacute;s&aacute;ra a
	rendszermag l&eacute;trehoz mindegyik&#245;j&uuml;kh&ouml;z egy
	ideiglenesen pufferelt utat az &uacute;tv&aacute;laszt&oacute;
	t&aacute;bl&aacute;zat&aacute;ban, amelyet a <command>netstat
	-rna | fgrep W3</command> paranccsal tudunk lek&eacute;rdezni.
	Az ilyen &uacute;tvonalak nagyj&aacute;b&oacute;l 1600
	m&aacute;sodperc m&uacute;lva el&eacute;v&uuml;lnek.  Ha a
	rendszermag &eacute;szleli, hogy a
	gyors&iacute;t&oacute;t&aacute;razott
	&uacute;tv&aacute;laszt&aacute;si t&aacute;bl&aacute;zat
	m&eacute;rete t&uacute;ls&aacute;gosan megn&ouml;vekedett, akkor
	automatikusan cs&ouml;kkenti az <varname>rtexpire</varname>
	&eacute;rt&eacute;k&eacute;t, de soha nem megy a
	<varname>rtminexpire</varname> al&aacute;.  Ebb&#245;l
	k&eacute;t probl&eacute;ma ad&oacute;dik:</para>

      <orderedlist>
	<listitem>
	  <para>A rendszermag nem reag&aacute;l el&eacute;g gyorsan
	    amikor egy alig terhelt szervert hirtelen
	    megt&aacute;madnak.</para>
	</listitem>

	<listitem>
	  <para>Az <varname>rtminexpire</varname> nem el&eacute;g kicsi
	    ahhoz, hogy a rendszermag t&uacute;l&eacute;ljen egy
	    tart&oacute;sabb rohamot.</para>
	</listitem>
      </orderedlist>

      <para>Ha a szervereink az internethez T3 (kb.  45 Mbit/s) vagy
	gyorsabb &ouml;sszek&ouml;ttet&eacute;sen kereszt&uuml;l
	csatlakoznak, akkor hat&aacute;rozottan javasolt k&eacute;zileg
	behangolni a &man.sysctl.8; seg&iacute;ts&eacute;g&eacute;vel az
	<varname>rtexpire</varname> &eacute;s az
	<varname>rtminexpire</varname> &eacute;rt&eacute;keket.  Soha ne
	&aacute;ll&iacute;tsuk egyiket sem null&aacute;ra (hacsak nem
	akarjuk &ouml;sszeomlasztani a g&eacute;p&uuml;nket).  Ha
	p&eacute;ld&aacute;ul mind a kett&#245;t 2 m&aacute;sodpercre
	&aacute;ll&iacute;tjuk, akkor az t&ouml;bbnyire elegend&#245; az
	&uacute;tv&aacute;laszt&aacute;si t&aacute;bl&aacute;zat
	megv&eacute;d&eacute;s&eacute;hez.</para>

    </sect2>

    <sect2>
      <title>Hozz&aacute;f&eacute;r&eacute;s Kerberosszal &eacute;s
	SSH-val</title>

      <indexterm><primary><command>ssh</command></primary></indexterm>
      <indexterm><primary>KerberosIV</primary></indexterm>

      <para>Van n&eacute;h&aacute;ny dolog, amit a Kerberos &eacute;s az
	ssh eset&eacute;n aj&aacute;nlatos tiszt&aacute;zni,
	miel&#245;tt haszn&aacute;ljuk ezeket.  A Kerberos&nbsp;5 egy
	kifog&aacute;stalan hiteles&iacute;t&eacute;si protokoll.  A
	<application>telnet</application> &eacute;s
	<application>rlogin</application> Kerberos &aacute;ltal
	m&oacute;dos&iacute;tott v&aacute;ltozat&aacute;ban vannak olyan
	hib&aacute;k, amelyek alkalmatlann&aacute; teszik ezeket a
	bin&aacute;ris adatfolyamok helyes kezel&eacute;s&eacute;re.
	S&#245;t, alap&eacute;rtelmez&eacute;s szerint a Kerberos nem
	titkos&iacute;tja a kapcsolatot, csak ha megadjuk neki a
	<option>-x</option> kapcsol&oacute;t.  Az
	<application>ssh</application> alap&eacute;rtelmez&eacute;s
	szerint mindent titkos&iacute;t.</para>

      <para>Az ssh minden szempontb&oacute;l nagyon j&oacute;l
	teljes&iacute;t kiv&eacute;ve, hogy alap&eacute;rtelmez&eacute;s
	szerint &aacute;tk&uuml;ldi a kulcsokat is.  Ez azt jelenti,
	hogy ha van egy olyan biztons&aacute;gos
	munka&aacute;llom&aacute;sunk, ahol a rendszer t&ouml;bbi
	r&eacute;sz&eacute;hez tartoz&oacute; kulcsainkat tartjuk
	&eacute;s egy nem biztons&aacute;gos g&eacute;pre akarunk vele
	ssh-n kereszt&uuml;l bel&eacute;pni, akkor a kulcsaink
	haszn&aacute;lat&oacute;v&aacute; v&aacute;lnak.  A
	t&eacute;nyleges kulcsokat ugyan nem l&aacute;tja senki, de a
	bejelentkez&eacute;s sor&aacute;n az ssh megnyit egy
	k&ouml;zvet&iacute;t&eacute;shez haszn&aacute;lt portot, amit a
	nem biztons&aacute;gos g&eacute;pen a t&aacute;mad&oacute; egy
	felt&ouml;rt <username>root</username>
	hozz&aacute;f&eacute;r&eacute;s birtok&aacute;ban ki tud
	haszn&aacute;lni &uacute;gy, hogy a kulcsaink
	seg&iacute;ts&eacute;g&eacute;vel hozz&aacute; tudjon
	f&eacute;rni egy m&aacute;sik olyan g&eacute;phez, amelyet a
	kulcsok nyitnak.</para>

      <para>Ha lehets&eacute;ges, akkor a szem&eacute;lyzet
	bejelentkeztet&eacute;s&eacute;hez az ssh-t &eacute;s Kerberost
	egy&uuml;ttesen haszn&aacute;ljuk.  Az
	<application>ssh</application> leford&iacute;hat&oacute;
	Kerberos t&aacute;mogat&aacute;ssal.  Ezzel
	cs&ouml;kkentj&uuml;k a potenci&aacute;lisan
	kisziv&aacute;rg&oacute; ssh kulcsok es&eacute;ly&eacute;t,
	mik&ouml;zben jelszavainkat a Kerberosszal v&eacute;dj&uuml;k.
	Az ssh kulcsokat csak biztons&aacute;gos g&eacute;pekr&#245;l
	&eacute;s csak automatiz&aacute;lt feladatok eset&eacute;n
	haszn&aacute;ljuk (amire a Kerberos l&eacute;nyeg&eacute;ben nem
	alkalmas).  Emellett javasoljuk azt is, hogy az ssh
	be&aacute;ll&iacute;t&aacute;sai k&ouml;z&ouml;tt tiltsuk le a
	kulcsok &aacute;tk&uuml;ld&eacute;s&eacute;t (key forwarding)
	vagy haszn&aacute;ljuk az <literal>from=IP/DOMAIN</literal>
	opci&oacute;t, amivel az ssh csak a megadott
	g&eacute;pekr&#245;l engedi az
	<filename>authorized_keys</filename> &aacute;llom&aacute;ny
	&eacute;s a &iacute;gy benne lev&#245; kulcsok
	haszn&aacute;lat&aacute;t.</para>

    </sect2>
  </sect1>

  <sect1 id="crypt">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Bill</firstname>
	  <surname>Swingle</surname>
	  <contrib>Egyes r&eacute;szeit &uacute;jra&iacute;rta &eacute;s
	    aktualiz&aacute;lta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>DES, Blowfish, MD5 &eacute;s a Crypt</title>

    <indexterm>
      <primary>biztons&aacute;g</primary>
      <secondary>crypt</secondary>
    </indexterm>

    <indexterm><primary>crypt</primary></indexterm>
    <indexterm><primary>Blowfish</primary></indexterm>
    <indexterm><primary>DES</primary></indexterm>
    <indexterm><primary>MD5</primary></indexterm>

    <para>Minden &unix; rendszer haszn&aacute;l&oacute;j&aacute;hoz
      tartozik egy jelsz&oacute; is a
      hozz&aacute;f&eacute;r&eacute;s&eacute;hez.  Teljesen
      nyilv&aacute;nval&oacute;nak t&#251;nik, hogy ezt a jelsz&oacute;t
      csak az adott felhaszn&aacute;l&oacute; &eacute;s az adott
      oper&aacute;ci&oacute;s rendszer ismeri.  A jelszavakat a titokban
      tart&aacute;sukhoz &uacute;n.  <quote>csap&oacute;ajt&oacute;
      f&uuml;ggv&eacute;nyekkel</quote> titkos&iacute;tj&aacute;k,
      amelyeket k&ouml;nny&#251; titkos&iacute;tani, &aacute;m
      neh&eacute;z visszafejteni.  Teh&aacute;t amit egy perccel
      ezel&#245;tt m&eacute;g nyilval&oacute;nak titul&aacute;ltunk, az
      mostanra m&aacute;r nem is teljesen igaz:
      <emphasis>val&oacute;j&aacute;ban</emphasis> az
      oper&aacute;ci&oacute;s rendszer sem ismeri a jelsz&oacute;t.  Az
      oper&aacute;ci&oacute;s rendszer csak a jelsz&oacute;
      <emphasis>titkos&iacute;tott</emphasis> v&aacute;ltozat&aacute;t
      ismeri.  A jelsz&oacute; <quote>titkos&iacute;tatlan</quote>
      form&aacute;j&aacute;t csak nyers er&#245;
      ig&eacute;nyebev&eacute;tel&eacute;vel tudjuk megkeresni az
      &ouml;sszes lehets&eacute;ges jelsz&oacute;
      sz&eacute;nakazl&aacute;ban.</para>

    <para>Sajnos, annak idej&eacute;n, amikor a jelszavak
      titkos&iacute;t&aacute;sa beker&uuml;lt a &unix;-ba, egyed&uuml;l
      a DES, vagy m&aacute;s n&eacute;ven a Data Encryption Standard
      (Adattitkos&iacute;t&aacute;si szabv&aacute;ny) j&ouml;tt
      sz&oacute;ba.  Ez alapvet&#245;en nem jelentett
      probl&eacute;m&aacute;t az Egyes&uuml;lt &Aacute;llamok
      &aacute;llampolg&aacute;rai sz&aacute;m&aacute;ra, de mivel a DES
      forr&aacute;sk&oacute;dj&aacute;t nem lehetett kivinni az
      Egyes&uuml;lt &Aacute;llamokb&oacute;l, a &os;-nek tal&aacute;lnia
      kellett valami olyasmit, ami mind megfelel az Egyes&uuml;lt
      &Aacute;llamok t&ouml;rv&eacute;nyeinek, mind pedig kompatibilis
      marad az &ouml;sszes t&ouml;bbi DES-t haszn&aacute;l&oacute;
      &unix; vari&aacute;nssal.</para>

    <para>Ezt &uacute;gy oldott&aacute;k meg, hogy felosztott&aacute;k a
      titkos&iacute;t&aacute;ssal foglalkoz&oacute;
      f&uuml;ggv&eacute;nyk&ouml;nyvt&aacute;rakat, &iacute;gy az
      Egyes&uuml;lt &Aacute;llamokban &eacute;l&#245;
      felhaszn&aacute;l&oacute;k tudtak DES k&ouml;nyvt&aacute;rakat
      telep&iacute;teni &eacute;s haszn&aacute;lni, mik&ouml;zben a
      t&ouml;bbi nemzet felhaszn&aacute;l&oacute;i olyan m&aacute;s
      titkos&iacute;t&aacute;si m&oacute;dszert tudtak
      v&aacute;lasztani, amit kinn is lehetett alkalmazni.  Ennek
      tulajdon&iacute;that&oacute;, hogy a &os;
      alap&eacute;rtelmez&eacute;s szerint az MD5
      seg&iacute;ts&eacute;g&eacute;vel titkos&iacute;t.  Az MD5-&ouml;t
      a DES-n&eacute;l sokkalta biztons&aacute;gosabbnak tartj&aacute;k,
      ez&eacute;rt a DES telep&iacute;t&eacute;s&eacute;nek
      lehet&#245;s&eacute;g&eacute;t legink&aacute;bb csak
      kompatibilit&aacute;si okokb&oacute;l aj&aacute;nlott&aacute;k
      fel.</para>

    <sect2>
      <title>A titkos&iacute;t&aacute;si mechanizmus
	azonos&iacute;t&aacute;sa</title>

      <para>Jelenleg a k&ouml;nyvt&aacute;r ismeri a DES, MD5 &eacute;s
	Blowfish f&uuml;ggv&eacute;nyeit.  A &os; a jelszavak
	titkos&iacute;t&aacute;s&aacute;hoz alapb&oacute;l az
	MD5-&ouml;t haszn&aacute;lja.</para>

      <para>Nagyon k&ouml;nnyen meg tudjuk mondani, hogy a &os;
	&eacute;ppen melyik titkos&iacute;t&aacute;si m&oacute;dszert
	alkalmazza.  Ennek egyik lehet&#245;s&eacute;ge, ha az
	<filename>/etc/master.passwd</filename> &aacute;llom&aacute;nyt
	vizsg&aacute;ljuk meg.  Az MD5 f&uuml;ggv&eacute;ny&eacute;vel
	titkos&iacute;tott jelszavak hosszabbak, mint a DES
	f&uuml;ggv&eacute;ny&eacute;vel titkos&iacute;tottak &eacute;s a
	<literal>&dollar;1&dollar;</literal> karakterekkel
	kezd&#245;dnek.  A <literal>&dollar;2a&dollar;</literal>
	karakterekkel kezd&#245;d&#245; jelszavakat Blowfish-sel
	titkos&iacute;tott&aacute;k.  A DES
	k&oacute;dol&aacute;s&uacute; jelszavaknak nincs semmilyen
	k&uuml;l&ouml;nleges ismertet&#245;jel&uuml;k, de
	&aacute;ltal&aacute;noss&aacute;gban elmondhat&oacute;
	r&oacute;luk, hogy r&ouml;videbbek az MD5 jelszavakn&aacute;l
	&eacute;s olyan 64 karakteres &aacute;b&eacute;c&eacute;vel
	k&oacute;dolj&aacute;k ezeket, amelyek nem tartalmazz&aacute;k a
	<literal>&dollar;</literal> karaktert, &iacute;gy teh&aacute;t a
	viszonylag r&ouml;vid, nem doll&aacute;rjellel kezd&#245;d&#245;
	karakterl&aacute;ncok minden bizonnyal DES
	k&oacute;dol&aacute;s&uacute; jelszavak.</para>

      <para>Az &uacute;j jelszavak k&oacute;dol&aacute;s&aacute;hoz
	haszn&aacute;lt form&aacute;tumot az
	<filename>/etc/login.conf</filename> &aacute;llom&aacute;nyban
	t&aacute;rolt <literal>passwd_format</literal>
	bejelentkez&eacute;si tulajdons&aacute;g adja meg, amelynek
	&eacute;rt&eacute;kei <literal>des</literal>,
	<literal>md5</literal> vagy <literal>blf</literal> lehetnek.  A
	&man.login.conf.5; man oldalon
	t&aacute;j&eacute;koz&oacute;dhatunk b&#245;vebben a
	bejelentkez&eacute;si tulajdons&aacute;gokr&oacute;l.</para>

    </sect2>
  </sect1>

  <sect1 id="one-time-passwords">
    <title>Egyszeri jelszavak</title>

    <indexterm><primary>egyszeri jelszavak</primary></indexterm>
    <indexterm>
      <primary>biztons&aacute;g</primary>
      <secondary>egyszeri jelszavak</secondary>
    </indexterm>

    <para>A &os; alap&eacute;rtelmez&eacute;s szerint t&aacute;mogatja
      az OPIE-t (One-time Passwords In Everything, azaz <quote>Egyszeri
      jelszavak mindenben</quote>), ami alapb&oacute;l az MD5
      f&uuml;ggv&eacute;ny&eacute;t haszn&aacute;lja.</para>

    <para>A jelszavak h&aacute;rom fajt&aacute;j&aacute;t fogjuk a
      tov&aacute;bbiakban t&aacute;rgyalni.  Az els&#245; a megszokott
      &unix; st&iacute;lus&uacute; avagy Kerberos jelsz&oacute;.  Ezt a
      tov&aacute;bbiakban <quote>&unix; jelsz&oacute;nak</quote>
      nevezz&uuml;k.  A m&aacute;sodik fajt&aacute;ban az OPIE
      &man.opiekey.1; nev&#251; seg&eacute;dprogramja &aacute;ltal
      gener&aacute;lt &eacute;s a bejelentkez&eacute;sn&eacute;l a
      &man.opiepasswd.1; &aacute;ltal elfogadott jelszavak tartoznak.
      Ezeket <quote>egyszeri jelszavaknak</quote> fogjuk nevezni.  A
      jelszavak utols&oacute; t&iacute;pusa az a titkos jelsz&oacute;,
      amit az <command>opiekey</command> programnak (&eacute;s
      n&eacute;ha a <command>opiepasswd</command> programnak) adunk meg,
      ami ebb&#245;l egyszer haszn&aacute;latos jelszavakat
      &aacute;ll&iacute;t el&#245;.  Ezt innent&#245;l <quote>titkos
      jelsz&oacute;nak</quote> vagy csak egyszer&#251;en
      <quote>jelsz&oacute;nak</quote> h&iacute;vjuk.</para>

    <para>A titkos jelsz&oacute;nak semmi k&ouml;ze sincs a &unix;
      jelszavunkhoz.  Term&eacute;szetesen megegyezhetnek, de ezt nem
      aj&aacute;nljuk.  Az OPIE &aacute;ltal haszn&aacute;lt titkos
      jelszavaknak nem kell a r&eacute;gi &unix; jelszavakhoz
      hasonl&oacute;an legfeljebb 8 karakteresnek lenni&uuml;k
      <footnote>
	<para>&os; alatt a bejelentkez&eacute;shez haszn&aacute;lt
	  szabv&aacute;nyos jelszavak ak&aacute;r 128 karakteresek is
	  lehetnek.</para>
      </footnote>, b&aacute;rmekkor&aacute;t haszn&aacute;lhatunk.  A
      hat vagy h&eacute;t sz&oacute;b&oacute;l &aacute;ll&oacute;
      jelszavak ilyenkor igen gyakoriak.  Az OPIE jobb&aacute;ra a
      &unix; jelsz&oacute;rendszer&eacute;t&#245;l teljesen
      f&uuml;ggetlen&uuml;l m&#251;k&ouml;dik.</para>

    <para>A jelszavak mellett k&eacute;t m&aacute;sik fajta adat fontos
      az OPIE sz&aacute;m&aacute;ra.  K&ouml;z&uuml;l&uuml;k az egyiket
      <quote>magnak</quote> vagy <quote>kulcsnak</quote> nevezik, ami
      k&eacute;t bet&#251;b&#245;l &eacute;s &ouml;t
      sz&aacute;mjegyb&#245;l &aacute;ll.  A m&aacute;sik az
      <quote>iter&aacute;ci&oacute;k sz&aacute;ma</quote>, ami egy 1
      &eacute;s 100 k&ouml;z&ouml;tti sz&aacute;mot takar.  Az OPIE
      &uacute;gy hozza l&eacute;tre az egyszeri jelszavakat, hogy
      egym&aacute;s ut&aacute;n f&#251;zi a magot &eacute;s a titkos
      jelsz&oacute;t, majd az iter&aacute;ci&oacute;k megadott
      sz&aacute;m&aacute;nak megfelel&#245; mennyis&eacute;gben
      kisz&aacute;molja r&aacute; az MD5 f&uuml;ggv&eacute;ny
      &eacute;rt&eacute;k&eacute;t &eacute;s az eredm&eacute;nyt hat
      r&ouml;vid angol sz&oacute;ba &ouml;nti.  Ez a hat angol
      sz&oacute; lesz a mi egyszeri jelszavunk.  A
      hiteles&iacute;t&eacute;ssel foglalkoz&oacute; rendszer
      (els&#245;sorban a PAM) figyelemmel k&iacute;s&eacute;ri a
      legutolj&aacute;ra haszn&aacute;lt egyszeri jelszavunkat,
      &eacute;s csak akkor engedi a felhaszn&aacute;l&oacute;t
      hiteles&iacute;teni, ha az &aacute;ltala megadott jelsz&oacute;
      k&oacute;dolt v&aacute;ltozata megegyezik az el&#245;z&#245;leg
      megadott jelszav&aacute;&eacute;val.  A csap&oacute;ajt&oacute;
      f&uuml;ggv&eacute;nyek haszn&aacute;lata miatt lehetetlen
      legener&aacute;lni a k&ouml;vetkez&#245; egyszeri jelsz&oacute;t,
      ha a siker&uuml;lt megszerezn&uuml;nk az egyiket.  Az
      iter&aacute;ci&oacute;k sz&aacute;ma minden egyes sikeres
      bejelentkez&eacute;s ut&aacute;n cs&ouml;kken eggyel, amivel a
      felhaszn&aacute;l&oacute;t &eacute;s a bejelentkeztet&#245;
      programot szinkronban tartja.  Amikor &iacute;gy az
      iter&aacute;ci&oacute;k sz&aacute;ma el&eacute;ri az egyet, az
      OPIE-t &uacute;jra kell inicializ&aacute;lni.</para>

    <para>Az eml&iacute;t&eacute;sre ker&uuml;l&#245; rendszerek
      mindegyik&eacute;hez tartozik n&eacute;h&aacute;ny program.  Az
      <command>opiekey</command> bek&eacute;ri az
      iter&aacute;ci&oacute;k sz&aacute;m&aacute;t, a magot &eacute;s a
      titkos jelsz&oacute;t, majd el&#245;&aacute;ll&iacute;t egy
      egyszer haszn&aacute;latos jelsz&oacute;t vagy azok folytonos
      list&aacute;j&aacute;t.  Az <command>opiepasswd</command> az OPIE
      inicializ&aacute;l&aacute;s&eacute;rt, a jelszavak, az
      iter&aacute;ci&oacute;k sz&aacute;m&aacute;nak &eacute;s a mag
      megv&aacute;ltoztat&aacute;s&aacute;&eacute;rt felel&#245;s.
      Egyar&aacute;nt elfogad titkos jelmondatot,
      iter&aacute;ci&oacute;s sz&aacute;mot vagy magot &eacute;s egy
      egyszeri jelsz&oacute;t.  Az <command>opieinfo</command>
      megvizsg&aacute;lja a felhaszn&aacute;l&oacute;kra
      vonatkoz&oacute; adatb&aacute;zist
      (<filename>/etc/opiekeys</filename>) &eacute;s ki&iacute;rja az
      adott felhaszn&aacute;l&oacute; &aacute;ltal haszn&aacute;lt
      iter&aacute;ci&oacute;s sz&aacute;mot &eacute;s magot.</para>

    <para>N&eacute;gyf&eacute;le k&uuml;l&ouml;nb&ouml;z&#245;
      m&#251;veletr&#245;l fogunk most itt besz&eacute;lni.  Az
      els&#245;ben egy biztons&aacute;gos kapcsolaton kereszt&uuml;l
      els&#245;k&eacute;nt inicializ&aacute;ljuk az egyszeri
      jelszavakat, vagy megv&aacute;ltoztatjuk a jelsz&oacute;t vagy a
      magot az <command>opiepasswd</command>
      seg&iacute;ts&eacute;g&eacute;vel.  A m&aacute;sodik
      m&#251;veletben ugyanarra adjuk ki az
      <command>opiepasswd</command> parancsot egy nem biztons&aacute;gos
      kapcsolaton kereszt&uuml;l az <command>opiekey</command>
      paranccsal egy&uuml;tt egy biztons&aacute;gos kapcsolaton
      kereszt&uuml;l.  A harmadikban az <command>opiekey</command>
      haszn&aacute;lat&aacute;val nem biztons&aacute;gos kapcsolaton
      kereszt&uuml;l jelentkez&uuml;nk be.  A negyedikben az
      <command>opiekey</command> paranccsal l&eacute;trehozunk egy adott
      mennyis&eacute;g&#251; kulcsot, amelyeket azt&aacute;n
      le&iacute;rhatunk vagy kinyomtathatunk, hogy magunkkal tudjuk
      vinni olyan helyre, ahonnan nem tudnk biztons&aacute;gos
      m&oacute;don csatlakozni.</para>

    <sect2>
      <title>Inicializ&aacute;l&aacute;s biztons&aacute;gos
	kapcsolattal</title>

      <para>Az OPIE els&#245; inicializ&aacute;l&aacute;s&aacute;hoz
	adjuk ki az <command>opiepasswd</command> parancsot:</para>

      <screen>&prompt.user; <userinput>opiepasswd -c</userinput>
[grimreaper] ~ $ opiepasswd -f -c
Adding unfurl:
Only use this method from the console; NEVER from remote. If you are using
telnet, xterm, or a dial-in, type ^C now or exit with no password.
Then run opiepasswd without the -c parameter.
Using MD5 to compute responses.
Enter new secret pass phrase:
Again new secret pass phrase:
ID unfurl OTP key is 499 to4268
MOS MALL GOAT ARM AVID COED
</screen>

      <para>A figyelmeztet&eacute;s ford&iacute;t&aacute;sa:</para>

      <screen>Ezt a m&oacute;dszert csak konzolr&oacute;l alkalmazzuk, SOHA ne t&aacute;voli kapcsolaton
kereszt&uuml;l!  Ha telnetet, xtermet vagy bet&aacute;rcs&aacute;z&oacute;s kapcsolatot haszn&aacute;lunk, akkor
azonnal nyomjunk ^C-t vagy ne adjunk meg jelsz&oacute;t.</screen>

      <para>Az <prompt>Enter new secret pass phrase:</prompt> vagy
	<prompt>Enter secret password:</prompt> k&eacute;rd&eacute;sek
	ut&aacute;n adjunk meg egy jelmondatot, illetve jelsz&oacute;t.
	Ne felejts&uuml;k el, hogy ez nem bejelentkez&eacute;shez
	haszn&aacute;lt jelsz&oacute; lesz, hanem ebb&#245;l j&ouml;nnek
	majd l&eacute;tre az egyszeri kulcsaink.  Az <quote>ID</quote>
	sor adja meg az aktu&aacute;lis p&eacute;ld&aacute;nyunk
	param&eacute;tereit: a bejelentkez&eacute;shez haszn&aacute;lt
	nev&uuml;nket, az iter&aacute;ci&oacute;k sz&aacute;m&aacute;t
	&eacute;s a magot.  Amikor a bejelentkez&eacute;sek sor&aacute;n
	a rendszer eml&eacute;kszik a param&eacute;terekre &eacute;s
	megjelen&iacute;ti ezeket, nem kell megjegyezn&uuml;nk.  Az
	utols&oacute; sor adja meg a param&eacute;tereinknek &eacute;s a
	titkos jelszavunknak megfelel&#245; egyszeri jelsz&oacute;t.  Ha
	most azonnal akarn&aacute;nk bejelentkezni, akkor ezt az
	egyszeri jelsz&oacute;t kellene hozz&aacute;
	haszn&aacute;lnunk.</para>

    </sect2>

    <sect2>
      <title>Inicializ&aacute;l&aacute;s nem biztons&aacute;gos
	kapcsolattal</title>

      <para>Ha egy nem biztons&aacute;gos kapcsolaton kereszt&uuml;l
	akarjuk inicializ&aacute;lni vagy megv&aacute;ltoztatni a
	jelszavunkat, akkor sz&uuml;ks&eacute;g&uuml;nk lesz valahol egy
	megb&iacute;zhat&oacute; kapcsolatra, ahol le tudjuk futtatni az
	<command>opiekey</command> parancsot.  Ez lehet egy
	sz&aacute;munkra biztons&aacute;gi szempontb&oacute;l
	elfogadhat&oacute; g&eacute;p parancssora.  Emellett ki kell
	tal&aacute;lnunk egy iter&aacute;ci&oacute;s sz&aacute;mot (erre
	a 100 egy j&oacute; v&aacute;laszt&aacute;s) &eacute;s adnunk
	egy magot vagy haszn&aacute;lni egy v&eacute;letlenszer&#251;en
	gener&aacute;ltat.  Az inicializ&aacute;l&aacute;s
	sz&iacute;ntere fel&eacute; vezet&#245; nem biztons&aacute;gos
	kapcsolaton kereszt&uuml;l adjuk ki az
	<command>opiepasswd</command> parancsot:</para>

      <screen>&prompt.user; <userinput>opiepasswd</userinput>

Updating unfurl:
You need the response from an OTP generator.
Old secret pass phrase:
        otp-md5 498 to4268 ext
        Response: GAME GAG WELT OUT DOWN CHAT
New secret pass phrase:
        otp-md5 499 to4269
        Response: LINE PAP MILK NELL BUOY TROY

ID mark OTP key is 499 gr4269
LINE PAP MILK NELL BUOY TROY
</screen>

      <para>Az alap&eacute;rtelmezett mag elfogad&aacute;s&aacute;hoz
	nyomjuk le a <keycap>Return</keycap> billenty&#251;t.
	Miel&#245;tt megadn&aacute;nk a hozz&aacute;f&eacute;r&eacute;s
	jelszav&aacute;t, menj&uuml;nk &aacute;t a biztons&aacute;gos
	kapcsolatra &eacute;s adjuk meg neki ugyanezeket a
	param&eacute;tereket:</para>

      <screen>&prompt.user; <userinput>opiekey 498 to4268</userinput>
Using the MD5 algorithm to compute response.
Reminder: Don't use opiekey from telnet or dial-in sessions.
Enter secret pass phrase:
GAME GAG WELT OUT DOWN CHAT
</screen>

      <para>Most v&aacute;ltsunk vissza a nem biztons&aacute;gos
	kapcsolatra &eacute;s m&aacute;soljuk be az &iacute;gy
	gener&aacute;lt egyszeri jelsz&oacute;t a megfelel&#245;
	programba.</para>

    </sect2>

    <sect2>
      <title>Egyetlen egyszeri jelsz&oacute;
	l&eacute;trehoz&aacute;sa</title>

      <para>Miut&aacute;n sikeresen inicializ&aacute;ltuk az OPIE-t
	&eacute;s bejelentkez&uuml;nk, a k&ouml;vetkez&#245;ket
	l&aacute;thatjuk:</para>

<screen>&prompt.user; <userinput>telnet example.com</userinput>
Trying 10.0.0.1...
Connected to example.com
Escape character is '^]'.

FreeBSD/i386 (example.com) (ttypa)

login: <userinput><replaceable>felhaszn&aacute;l&oacute;i_n&eacute;v</replaceable></userinput>
otp-md5 498 gr4269 ext
Password: </screen>

      <para>Mell&eacute;kesen megjegyezz&uuml;k, hogy az OPIE
	paranccsor&aacute;nak van egy (itt nem l&aacute;that&oacute;)
	hasznos k&eacute;pess&eacute;ge: ha <keycap>Return</keycap>
	billenty&#251;t nyomunk a jelsz&oacute;
	bek&eacute;r&eacute;sekor, akkor a program megmutatja a
	beg&eacute;pelt bet&#251;ket, &iacute;gy l&aacute;thatjuk
	pontosan mit is &iacute;runk be.  Ez nagyon k&eacute;nyelmes
	lehet olyankor, amikor valahonnan, p&eacute;ld&aacute;ul egy
	lapr&oacute;l olvassuk a jelsz&oacute;t.</para>

      <indexterm><primary>MS-DOS</primary></indexterm>
      <indexterm><primary>Windows</primary></indexterm>
      <indexterm><primary>MacOS</primary></indexterm>

      <para>A bejelentkez&eacute;shez ekkor le kell valahogy
	gener&aacute;lnunk az egyszeri jelszavunkat.  Ezt egy
	megb&iacute;zhat&oacute; rendszeresen tudjuk megtenni az
	<command>opiekey</command> lefuttat&aacute;s&aacute;val.  (Ennek
	vannak DOS-os, &windows;-os &eacute;s &macos;-es
	v&aacute;ltozatai is.) Param&eacute;terk&eacute;nt az
	iter&aacute;ci&oacute;s sz&aacute;mot &eacute;s a magot kell
	megadnunk.  Ezt ak&aacute;r k&ouml;zvetlen&uuml;l &aacute;t is
	m&aacute;solhatjuk annak a g&eacute;pnek a bejelentkez&eacute;si
	k&eacute;perny&#245;j&eacute;r&#245;l, ahova be akarunk
	jelentkezni.</para>

      <para>A megb&iacute;zhat&oacute; rendszeren teh&aacute;t:</para>

      <screen>&prompt.user; <userinput>opiekey 498 to4268</userinput>
Using the MD5 algorithm to compute response.
Reminder: Don't use opiekey from telnet or dial-in sessions.
Enter secret pass phrase:
GAME GAG WELT OUT DOWN CHAT</screen>

      <para>Most m&aacute;r megvan a bejelentkez&eacute;shez
	sz&uuml;ks&eacute;ges egyszeri jelszavunk.</para>

    </sect2>

    <sect2>
      <title>T&ouml;bb egyszeri jelsz&oacute;
	l&eacute;trehoz&aacute;sa</title>

      <para>N&eacute;ha olyan helyekre kell menn&uuml;nk, ahol se egy
	megb&iacute;zhat&oacute; g&eacute;p, sem pedig
	biztons&aacute;gos kapcsolat nem tal&aacute;lhat&oacute;.  Ilyen
	esetekben megadhatjuk az <command>opiekey</command> parancsnak,
	hogy el&#245;re gy&aacute;rtson le t&ouml;bb egyszer
	haszn&aacute;latos jelsz&oacute;t, amit k&eacute;s&#245;bb
	azt&aacute;n ki tudunk nyomtatni.  P&eacute;ld&aacute;ul:</para>

      <screen>&prompt.user; <userinput>opiekey -n 5 30 zz99999</userinput>
Using the MD5 algorithm to compute response.
Reminder: Don't use opiekey from telnet or dial-in sessions.
Enter secret pass phrase: <userinput>&lt;secret password&gt;</userinput>
26: JOAN BORE FOSS DES NAY QUIT
27: LATE BIAS SLAY FOLK MUCH TRIG
28: SALT TIN ANTI LOON NEAL USE
29: RIO ODIN GO BYE FURY TIC
30: GREW JIVE SAN GIRD BOIL PHI</screen>

      <para>Az <option>-n 5</option> &ouml;t kulcsot k&eacute;r
	egym&aacute;s ut&aacute;n, a <option>30</option> pedig megadja
	az utols&oacute; iter&aacute;ci&oacute;s sz&aacute;mot.
	Vegy&uuml;k &eacute;szre, hogy a kulcsokat a
	felhaszn&aacute;l&aacute;s sorrendj&eacute;vel
	<emphasis>ellent&eacute;tes</emphasis> sorrendben &iacute;rja ki
	a program.  Ha igaz&aacute;n paranoi&aacute;sok vagyunk, akkor
	&iacute;rjuk le k&eacute;zzel a jelszavakat.  Ha viszont annyira
	nem, akkor egyszer&#251;en k&uuml;ldj&uuml;k &aacute;t ezeket az
	<command>lpr</command> parancsnak.  Megfigyelhetj&uuml;k, hogy
	minden sorban l&aacute;that&oacute; az iter&aacute;ci&oacute;s
	sz&aacute;m &eacute;s a hozz&aacute;tartoz&oacute; egyszeri
	jelsz&oacute;.  Hasznos lehet a felhaszn&aacute;l&aacute;s
	szerinti fel&iacute;rni a jelszavakat.</para>

    </sect2>

    <sect2>
      <title>A &unix; jelszavak haszn&aacute;lat&aacute;nak
	lesz&#251;k&iacute;t&eacute;se</title>

      <para>Az OPIE k&eacute;pes a bejelentkez&eacute;shez
	haszn&aacute;lt IP-c&iacute;mek alapj&aacute;n
	lesz&#251;k&iacute;teni a &unix; jelszavak
	haszn&aacute;lat&aacute;t.  Ehhez az
	<filename>/etc/opieaccess</filename> haszn&aacute;lhat&oacute;,
	amely alapb&oacute;l megtal&aacute;lhat&oacute; a
	rendszer&uuml;nk&ouml;n.  Az &man.opieaccess.5; man
	oldal&aacute;n tal&aacute;lhatjuk meg a r&aacute;
	vonatkoz&oacute; inform&aacute;ci&oacute;kat &eacute;s az
	&ouml;sszes vele kapcsolatos biztons&aacute;gi
	megfontol&aacute;st.</para>

      <para>&Iacute;me egy p&eacute;lda az
	<filename>opieaccess</filename> &aacute;llom&aacute;nyra:</para>

      <programlisting>permit 192.168.0.0 255.255.0.0</programlisting>

      <para>Ezzel a sorral megengedj&uuml;k a &unix; jelszavak
	haszn&aacute;lat&aacute;t minden olyan felhaszn&aacute;l&oacute;
	sz&aacute;m&aacute;ra, akinek az IP-je illeszkedik a megadott
	c&iacute;mre &eacute;s maszkra (ez viszont
	&aacute;lc&aacute;z&aacute;ssal
	kij&aacute;tszhat&oacute;).</para>

      <para>Ha az <filename>opieaccess</filename>
	&aacute;llom&aacute;nyb&oacute;l egyetlen szab&aacute;ly sem
	illeszkedik, akkor alap&eacute;rtelmez&eacute;s szerint nem
	enged&eacute;lyezettek a nem OPIE t&iacute;pus&uacute;
	jelszavak.</para>

    </sect2>
  </sect1>

  <sect1 id="tcpwrappers">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Tom</firstname>
	  <surname>Rhodes</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <indexterm><primary>TCP burkol&oacute;k</primary></indexterm>

    <title>A TCP kapcsolatok burkol&aacute;sa</title>

    <para>Aki ismeri az &man.inetd.8; programot, az m&aacute;r biztosan
      hallott a <acronym>TCP</acronym> kapcsolatok
      burkol&aacute;s&aacute;r&oacute;l, eredeti nev&eacute;n a a
      <acronym>TCP</acronym> wrapperekr&#245;l.  Azonban csak kevesek
      k&eacute;pesek felfogni ezek val&oacute;di haszn&aacute;t.
      &Uacute;gy n&eacute;z ki, mindenki csak t&#251;zfalakon
      kereszt&uuml;l akarja megoldani a h&aacute;l&oacute;zati
      kapcsolatot kezel&eacute;s&eacute;t.  Hab&aacute;r a
      t&#251;zfalakat sok mindenre fel lehet ugyan haszn&aacute;lni,
      egyetlen t&#251;zfal nem k&eacute;pes p&eacute;ld&aacute;ul
      sz&ouml;vegesen v&aacute;laszolni a kapcsolatok
      kezdem&eacute;nyez&#245;inek.  Ellenben b&aacute;rmelyik
      <acronym>TCP</acronym>-wrapper szoftver k&eacute;pes erre,
      s&#245;t m&eacute;g t&ouml;bbre is.  A k&ouml;vetkez&#245;
      n&eacute;h&aacute;ny szakaszban szem&uuml;gyre vessz&uuml;k a
      <acronym>TCP</acronym> wrapperek sz&aacute;mos
      lehet&#245;s&eacute;g&eacute;t, &eacute;s ahol lehets&eacute;ges,
      ott konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nyokkal is
      illusztr&aacute;ljuk ezek haszn&aacute;lat&aacute;t.</para>

    <para>A <acronym>TCP</acronym> burkol&oacute; szoftverek
      kiterjesztik az <application>inetd</application>
      k&eacute;pess&eacute;geit minden alatta dolgoz&oacute;
      szerverd&eacute;mon t&aacute;mogat&aacute;s&aacute;ra.  Ezzel a
      m&oacute;dszerrel meg lehet oldani a napl&oacute;z&aacute;st,
      &uuml;zenetek k&uuml;ld&eacute;s&eacute;t a kapcsolatokhoz, a
      d&eacute;monok el&eacute;rhet&#245;s&eacute;g&eacute;nek
      korl&aacute;toz&aacute;s&aacute;t stb.  Noha ezen
      lehet&#245;s&eacute;gek k&ouml;z&uuml;l n&eacute;h&aacute;ny
      t&#251;zfallal is megval&oacute;s&iacute;that&oacute;, ezzel nem
      csup&aacute;n egy tov&aacute;bbi v&eacute;delmi r&eacute;teget
      h&uacute;zunk fel a rendszer&uuml;nk k&ouml;r&eacute;, hanem
      t&uacute;ll&eacute;pj&uuml;k mindazt, amit egy t&#251;zfallal
      ir&aacute;ny&iacute;tani lehet.</para>

    <para>A <acronym>TCP</acronym> burkol&oacute;k
      haszn&aacute;lat&aacute;val hozz&aacute;adott
      funkcionalit&aacute;s azonban nem helyettes&iacute;t egy j&oacute;
      t&#251;zfalat.  A <acronym>TCP</acronym> kapcsolatok
      burkol&aacute;s&aacute;t t&#251;zfallal vagy m&aacute;s
      egy&eacute;b biztons&aacute;gi megold&aacute;ssal egy&uuml;tt
      tudjuk csak eredm&eacute;nyesen haszn&aacute;lni, viszont a
      rendszer&uuml;nk biztons&aacute;g&aacute;ban egy &uacute;jabb
      remek v&eacute;delmi vonalat k&eacute;pvisel.</para>

    <para>Mivel l&eacute;nyeg&eacute;ben ez az
      <application>inetd</application>
      be&aacute;ll&iacute;t&aacute;s&aacute;nak
      kib&#245;v&iacute;t&eacute;se, ez&eacute;rt a szakasz
      elolvas&aacute;s&aacute;hoz felt&eacute;telezz&uuml;k az <link
	linkend="network-inetd">inetd be&aacute;ll&iacute;t&aacute;s&aacute;val</link>
      kapcsolatos tudnival&oacute;k ismeret&eacute;t.</para>

    <note>
      <para>B&aacute;r az &man.inetd.8; &aacute;ltal ind&iacute;tott
	programok nem eg&eacute;szen tekinthet&#245;en
	<quote>d&eacute;monoknak</quote>, hagyom&aacute;nyosan
	d&eacute;monnak h&iacute;vj&aacute;k ezeket.  Ez&eacute;rt
	r&aacute;juk ebben a szakaszban is ezt a kifejez&eacute;st
	haszn&aacute;ljuk.</para>
    </note>

    <sect2>
      <title>Kezdeti be&aacute;ll&iacute;t&aacute;sok</title>

      <para>&os; alatt a <acronym>TCP</acronym> burkol&oacute;k
	haszn&aacute;lat&aacute;nak egyetlen felt&eacute;tele
	csup&aacute;n annyi, hogy az <application>inetd</application>
	parancsot a <option>-Ww</option> param&eacute;terrel
	ind&iacute;tsuk az <filename>rc.conf</filename>
	&aacute;llom&aacute;nyb&oacute;l.  Az egy&eacute;bk&eacute;nt az
	alapbe&aacute;ll&iacute;t&aacute;s.  Term&eacute;szetesen nem
	&aacute;rt, ha helyesen &aacute;ll&iacute;tjuk be az
	<filename>/etc/hosts.allow</filename> &aacute;llom&aacute;nyt
	is, ellenkez&#245; esetben a &man.syslogd.8;
	egy&eacute;bk&eacute;nt dob&aacute;lni fogja err&#245;l az
	&uuml;zeneteket.</para>

      <note>
	<para>Elt&eacute;r&#245;en a <acronym>TCP</acronym>
	  burkol&oacute;k egy&eacute;b
	  implement&aacute;ci&oacute;it&oacute;l, a
	  <filename>hosts.deny</filename> &aacute;llom&aacute;nyt itt
	  m&aacute;r nem haszn&aacute;ljuk.  Minden
	  be&aacute;ll&iacute;t&aacute;st az
	  <filename>/etc/host.allow</filename> &aacute;llom&aacute;nyba
	  kell raknunk.</para>
      </note>

      <para>A legegyszer&#251;bb konfigur&aacute;ci&oacute;
	eset&eacute;n a d&eacute;monok
	kapcsol&oacute;d&aacute;s&aacute;t egyszer&#251;en
	enged&eacute;lyezhetj&uuml;k vagy letilthatjuk az
	<filename>/etc/hosts.allow</filename> &aacute;llom&aacute;nyban
	szerepl&#245; be&aacute;ll&iacute;t&aacute;sokkal.  A &os;
	alap&eacute;rtelmezett be&aacute;ll&iacute;t&aacute;sai szerint
	minden <application>inetd</application> &aacute;ltal
	ind&iacute;tott d&eacute;monhoz lehet kapcsol&oacute;dni.  Ennek
	megv&aacute;ltoztat&aacute;s&aacute;val az
	alapkonfigur&aacute;ci&oacute; &aacute;ttekint&eacute;se
	ut&aacute;n foglalkozunk.</para>

      <para>Az alapkonfigur&aacute;ci&oacute; &aacute;ltal&aacute;ban
	<literal>d&eacute;mon : c&iacute;m : cselekv&eacute;s</literal>
	alak&uacute;.  Itt a <literal>d&eacute;mon</literal> egy olyan
	d&eacute;monra utal, amelyet az <command>inetd</command>
	ind&iacute;tott el.  A <literal>c&iacute;m</literal> egy
	&eacute;rv&eacute;nyes h&aacute;l&oacute;zati n&eacute;v,
	IP-c&iacute;m vagy sz&ouml;gletes z&aacute;r&oacute;jelek
	([&nbsp;]) k&ouml;z&ouml;tt megadott IPv6
	form&aacute;tum&uacute; c&iacute;m.  A cselekv&eacute;st
	tartalmaz&oacute; mez&#245; (<literal>action</literal>) lehet
	<literal>allow</literal> vagy <literal>deny</literal> annak
	megfelel&#245;en, hogy enged&eacute;lyezz&uuml;k vagy tiltjuk a
	megadott c&iacute;mr&#245;l a csatlakoz&aacute;st.  Nem szabad
	elfelejten&uuml;nk, hogy az &iacute;gy megadott
	be&aacute;ll&iacute;t&aacute;sok k&ouml;z&uuml;l mindig az
	els&#245;k&eacute;nt illeszked&#245;
	&eacute;rv&eacute;nyes&uuml;l, ami arra utal, hogy a
	konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nyban
	szerepl&#245; szab&aacute;lyok egym&aacute;s ut&aacute;n
	n&ouml;vekv&#245; sorrendben &eacute;rt&eacute;kel&#245;dnek ki.
	Ha valamelyik&uuml;k illeszkedik, akkor a keres&eacute;s
	meg&aacute;ll.</para>

      <para>Rengeteg egy&eacute;b opci&oacute; is megadhat&oacute;
	m&eacute;g, de ezekr&#245;l csak a k&eacute;s&#245;bbi
	szakaszokban fogunk sz&oacute;lni.  Egy egyszer&#251;
	konfigur&aacute;ci&oacute;s &aacute;llom&aacute;ny m&aacute;r
	ennyi inform&aacute;ci&oacute;b&oacute;l is
	k&ouml;nnyed&eacute;n &ouml;ssze&aacute;ll&iacute;that&oacute;.
	P&eacute;ld&aacute;ul, ha enged&eacute;lyezni szeretn&eacute;nk
	a <acronym>POP</acronym>3 kapcsolatokat a <filename
	role="package">mail/qpopper</filename> d&eacute;monon
	kereszt&uuml;l, akkor a k&ouml;vetkez&#245; sorral kell
	kieg&eacute;sz&iacute;ten&uuml;nk a
	<filename>hosts.allow</filename> &aacute;llom&aacute;nyt:</para>

      <programlisting># Ez a sor kell a POP3 kapcsolatokhoz:
qpopper : ALL : allow</programlisting>

      <para>Miut&aacute;n hozz&aacute;adtuk ezt a sort, az
	<application>inetd</application> szervert &uacute;jra kell
	ind&iacute;tanunk.  Ezt vagy a &man.kill.1; paranccsal, vagy
	pedig az <filename>/etc/rc.d/inetd</filename> szkript
	<parameter>restart</parameter> param&eacute;ter&eacute;vel
	tehetj&uuml;k meg.</para>

    </sect2>

    <sect2>
      <title>Komolyabb be&aacute;ll&iacute;t&aacute;sok</title>

      <para>A <acronym>TCP</acronym> kapcsolatok
	burkol&aacute;s&aacute;n&aacute;l is meg lehet adni
	tov&aacute;bbi opci&oacute;kat.
	Seg&iacute;ts&eacute;g&uuml;kkel m&eacute;g jobban
	ir&aacute;ny&iacute;tani tudjuk a kapcsolatok
	kezel&eacute;s&eacute;nek m&oacute;dj&aacute;t.
	N&eacute;h&aacute;ny esetben az is hasznos lehet, ha
	k&uuml;ld&uuml;nk valamilyen v&aacute;laszt az egyes
	g&eacute;peknek vagy d&eacute;monoknak.  M&aacute;skor
	sz&uuml;ks&eacute;g&uuml;nk lehet a csatlakoz&aacute;sok
	napl&oacute;z&aacute;s&aacute;ra vagy e-mailen kereszt&uuml;li
	jelz&eacute;s&eacute;re a rendszergazda fel&eacute;.  Teljesen
	m&aacute;s helyezetekben csak a helyi
	h&aacute;l&oacute;zatunkr&oacute;l engedj&uuml;k meg a
	csatlakoz&aacute;st.  Ez mind lehets&eacute;ges a
	<literal>helyettes&iacute;t&#245; jelekk&eacute;nt</literal>
	ismert be&aacute;ll&iacute;t&aacute;si opci&oacute;k,
	kiterjeszt&#245; karakterek &eacute;s k&uuml;ls&#245; parancsok
	v&eacute;grehajt&aacute;s&aacute;nak
	haszn&aacute;lat&aacute;val.  A k&ouml;vetkez&#245; k&eacute;t
	szakasz az ilyen &eacute;s ehhez hasonl&oacute;
	szitu&aacute;ci&oacute;k megold&aacute;s&aacute;ra
	&iacute;r&oacute;dott.</para>

      <sect3>
	<title>K&uuml;ls&#245; parancsok</title>

	<para>Tegy&uuml;k fel, hogy olyan helyezetben vagyunk, amikor a
	  kapcsolatot tiltani akarjuk, de k&ouml;zben az&eacute;rt
	  szeretn&eacute;nk err&#245;l &eacute;rtes&iacute;teni a
	  kapcsolatot kezdem&eacute;nyez&#245; felet is.  Hogyan tudjuk
	  ezt megcsin&aacute;lni?  Ezt a <option>twist</option>
	  nev&#251; opci&oacute;val tehetj&uuml;k meg.  Amikor
	  megpr&oacute;b&aacute;l valaki csatlakozni, akkor a
	  <option>twist</option> h&iacute;v&oacute;dik meg &eacute;s
	  v&eacute;grehajt egy megadott parancsot vagy szkriptet.  Erre
	  tal&aacute;lunk is egy p&eacute;ld&aacute;t a
	  <filename>hosts.allow</filename>
	  &aacute;llom&aacute;nyban:</para>

	<programlisting># The rest of the daemons are protected.
ALL : ALL \
        : severity auth.info \
        : twist /bin/echo "You are not welcome to use %d from %h."</programlisting>

	<para>Ez a p&eacute;lda a k&ouml;vetkez&#245; &uuml;zenetet
	  jelen&iacute;ti meg: <quote>You are not allowd to use
	  <literal>a d&eacute;mon neve</literal> from
	  <literal>h&aacute;l&oacute;zati n&eacute;v</literal>.</quote>
	  (Jelent&eacute;se: <quote>A <literal>d&eacute;mon
	  neve</literal> d&eacute;mont nem &eacute;rheti el a
	  <literal>h&aacute;l&oacute;zati n&eacute;v</literal>
	  helyr&#245;l!</quote>) Ez minden olyan d&eacute;mon
	  eset&eacute;n megjelenik, amir&#245;l nem nyilatkoztunk
	  kor&aacute;bban az &aacute;llom&aacute;nyban.  Ezzel nagyon
	  k&ouml;nnyen vissza tudunk k&uuml;ldeni egy v&aacute;laszt a
	  kapcsolat kezdm&eacute;nyez&#245;je fel&eacute;, miut&aacute;n
	  a kapcsolatot eldobtuk.  Vegy&uuml;k &eacute;szre, hogy a
	  visszak&uuml;ldend&#245; &uuml;zenetet <literal>"</literal>
	  karakterek k&ouml;z&eacute; <emphasis>kell</emphasis>
	  tenn&uuml;nk, ez al&oacute;l semmi sem kiv&eacute;tel.</para>

	<warning>
	  <para>DoS t&aacute;mad&aacute;st lehet el&#245;id&eacute;zni
	    azzal, ha egy t&aacute;mad&oacute; vagy
	    t&aacute;mad&oacute;k egy csoportja csatlakoz&aacute;si
	    k&eacute;relmekkel kezdi el bomb&aacute;zni a
	    d&eacute;monainkat.</para>
	</warning>

	<para>Ilyen esetekben haszn&aacute;lhatjuk a
	  <option>spawn</option> opci&oacute;t is.  A
	  <option>spawn</option> a <option>twist</option>
	  opci&oacute;hoz hasonl&oacute;an implicit m&oacute;don tiltja
	  a kapcsol&oacute;d&aacute;st &eacute;s arra
	  haszn&aacute;lhat&oacute;, hogy lefuttassunk vele egy
	  parancsot vagy szkriptet.  A <option>spawn</option> azonban a
	  <option>twist</option> opci&oacute;t&oacute;l
	  elt&eacute;r&#245;en nem k&uuml;ld vissza semmilyen
	  v&aacute;laszt a kapcsolatot l&eacute;trehozni
	  k&iacute;v&aacute;n&oacute; egy&eacute;nnek.  Ehhez
	  p&eacute;ldak&eacute;nt vegy&uuml;k a k&ouml;vetkez&#245; sort
	  a konfigur&aacute;ci&oacute;s
	  &aacute;llom&aacute;nyban:</para>

	<programlisting># We do not allow connections from example.com:
ALL : .example.com \
	: spawn (/bin/echo %a from %h attempted to access %d &gt;&gt; \
	  /var/log/connections.log) \
	: deny</programlisting>

	<para>Ezzel a <hostid role="fqdn">*.example.com</hostid>
	  c&iacute;mtartom&aacute;nyb&oacute;l &eacute;rkez&#245;
	  &ouml;sszes kapcsol&oacute;d&aacute;si k&iacute;s&eacute;rlet
	  sikertelen lesz, mik&ouml;zben ezzel egyid&#245;ben a
	  <filename>/var/log/connections.log</filename>
	  &aacute;llom&aacute;nyba r&ouml;gz&iacute;tj&uuml;k a
	  csatlakozni akar&oacute; egy&eacute;n h&aacute;l&oacute;zati
	  nev&eacute;t, <acronym>IP</acronym>-c&iacute;m&eacute;t
	  &eacute;s a d&eacute;mont.</para>

	<para>A kor&aacute;bban m&aacute;r kifejtett
	  helyettes&iacute;t&#245; karakterek t&uacute;l, mint
	  p&eacute;ld&aacute;ul az <literal>%a</literal>, m&eacute;g
	  l&eacute;teznek tov&aacute;bbiak is.  R&oacute;luk a
	  &man.hosts.access.5; man oldalon tal&aacute;lhatjuk meg a
	  teljes list&aacute;t.</para>

      </sect3>

      <sect3>
	<title>Helyettes&iacute;t&#245; jelek</title>

	<para>Az eddigi p&eacute;ld&aacute;kban folyamatosan csak az
	  <literal>ALL</literal> opci&oacute;t adtuk meg.  Azonban rajta
	  k&iacute;v&#251;l l&eacute;teznek m&aacute;sok is, amivel a
	  megold&aacute;s funkcionalit&aacute;s&aacute;t m&eacute;g egy
	  kicsivel tov&aacute;bb n&ouml;velhetj&uuml;k.
	  P&eacute;ld&aacute;ul az <literal>ALL</literal>
	  haszn&aacute;lhat&oacute; egy d&eacute;mon, egy
	  tartom&aacute;ny vagy egy <acronym>IP</acronym>-c&iacute;m
	  illeszt&eacute;s&eacute;re.  A m&aacute;sik ilyen
	  helyettes&iacute;t&#245; jel a <literal>PARANOID</literal>,
	  amelyet olyan g&eacute;pek
	  <acronym>IP</acronym>-c&iacute;m&eacute;nek
	  illeszt&eacute;sekor alkalmazhatunk, ami
	  felt&eacute;telezhet&#245;en hamis.  M&aacute;s sz&oacute;val
	  a <literal>PARANOID</literal> olyan cselekv&eacute;sek
	  megad&aacute;s&aacute;t teszi lehet&#245;v&eacute;, amelyek
	  akkor hajt&oacute;dnak v&eacute;gre, amikor a kapcsolatot
	  l&eacute;trehoz&oacute; g&eacute;p
	  <acronym>IP</acronym>-c&iacute;me elt&eacute;r a
	  h&aacute;l&oacute;zati nev&eacute;t&#245;l.  A most
	  k&ouml;vetkez&#245; p&eacute;lda
	  val&oacute;sz&iacute;n&#251;leg seg&iacute;t f&eacute;nyt
	  der&iacute;teni ennek l&eacute;nyeg&eacute;re:</para>

	<programlisting># Block possibly spoofed requests to sendmail:
sendmail : PARANOID : deny</programlisting>

	<para>A p&eacute;ld&aacute;ban minden olyan
	  kapcsolatk&eacute;r&eacute;st elutas&iacute;tunk, ami a
	  <command>sendmail</command> fel&eacute; a
	  h&aacute;l&oacute;zati n&eacute;vt&#245;l elt&eacute;r&#245;
	  <acronym>IP</acronym>-c&iacute;mr&#245;l
	  ir&aacute;nyul.</para>

	<caution>
	  <para>Ha rossz <acronym>DNS</acronym>
	    be&aacute;ll&iacute;t&aacute;sokat haszn&aacute;lunk, a
	    <literal>PARANOID</literal> megad&aacute;s&aacute;val
	    s&uacute;lyosan mozg&aacute;sk&eacute;ptelenn&eacute;
	    tehetj&uuml;k a kliens&uuml;nket vagy szerver&uuml;nket.
	    Ez&eacute;rt legy&uuml;nk &oacute;vatosak vele!</para>
	</caution>

	<para>A helyettes&iacute;t&#245; jelekr&#245;l &eacute;s
	  hozz&aacute;juk tartoz&oacute; tov&aacute;bbi
	  lehet&#245;s&eacute;gekr&#245;l a &man.hosts.access.5; man
	  oldalon t&aacute;j&eacute;koz&oacute;dhatunk.</para>

	<para>A <filename>hosts.allow</filename>
	  &aacute;llom&aacute;nyb&oacute;l ki kell venni az els&#245;
	  sort ahhoz, hogy b&aacute;rmilyen egy&eacute;b
	  konfigur&aacute;ci&oacute;s be&aacute;ll&iacute;t&aacute;s
	  m&#251;k&ouml;d&#245;k&eacute;pes legyen.  Ezt
	  eml&iacute;tett&uuml;k a szakasz elej&eacute;n is.</para>

      </sect3>
    </sect2>
  </sect1>

  <sect1 id="kerberosIV">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Mark</firstname>
	  <surname>Murray</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
      <authorgroup>
	<author>
	  <firstname>Mark</firstname>
	  <surname>Dapoz</surname>
	  <contrib>Eredetileg &iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title><application>KerberosIV</application></title>

    <para>A Kerberos egy olyan j&aacute;rul&eacute;kos
      rendszer/protokoll, amellyel a felhaszn&aacute;l&oacute;k egy
      biztons&aacute;gos szerver szolg&aacute;ltat&aacute;sain
      kereszt&uuml;l tudj&aacute;k hiteles&iacute;teni magukat.  Ilyen
      szolg&aacute;ltat&aacute;s t&ouml;bbek k&ouml;zt a t&aacute;voli
      bejelentkez&eacute;s, t&aacute;voli m&aacute;sol&aacute;s, a
      rendszeren bel&uuml;li biztons&aacute;gos m&aacute;sol&aacute;s
      &eacute;s minden olyan egy&eacute;b vesz&eacute;lyes feladat, amit
      sz&aacute;mottev&#245;en megb&iacute;zhat&oacute;bb&aacute;
      &eacute;s ir&aacute;ny&iacute;that&oacute;bb&aacute;
      tettek.</para>

    <para>A k&ouml;vetkez&#245; utas&iacute;t&aacute;sok a &os;-hez
      mell&eacute;kelt Kerberos
      be&aacute;ll&iacute;t&aacute;s&aacute;hoz adnak
      &uacute;tmutat&aacute;st.  A teljes le&iacute;r&aacute;shoz
      azonban &eacute;rdemes fellapoznunk a menet k&ouml;zben
      hivatkozott man oldalakat is.</para>

    <sect2>
      <title>A <application>KerberosIV</application>
	telep&iacute;t&eacute;se</title>

      <indexterm><primary>MIT</primary></indexterm>
      <indexterm>
	<primary>KerberosIV</primary>
	<secondary>telep&iacute;t&eacute;s</secondary>
      </indexterm>

      <para>A Kerberos a &os; egyik v&aacute;laszthat&oacute;
	komponense.  Legk&ouml;nnyebben &uacute;gy tudjuk
	feltelep&iacute;teni, ha a &os; telep&iacute;t&eacute;se
	sor&aacute;n a <application>sysinstall</application> programban
	kiv&aacute;lasztjuk a <literal>krb4</literal> vagy
	<literal>krb5</literal> terjeszt&eacute;sek valamelyik&eacute;t.
	Ezzel felrakhatjuk a Kerberos <quote>eBones</quote> (KerberosIV)
	vagy <quote>Heimdal</quote> (Kerberos5) elnevez&eacute;s&#251;
	v&aacute;ltozatait.  A &os; az&eacute;rt tartalmazza ezeket az
	implement&aacute;ci&oacute;kat, mert nem az Amerikai
	Egyes&uuml;lt &Aacute;llamokban vagy Kanad&aacute;ban
	fejlesztett&eacute;k, &iacute;gy az Egyes&uuml;lt &Aacute;llamok
	titkos&iacute;t&aacute;sokkal kapcsolatos kiviteli
	korl&aacute;toz&aacute;sok kor&aacute;ban minden olyan rendszer
	adminisztr&aacute;tora el tudta &eacute;rni, aki nem ezekben az
	orsz&aacute;gokban lakott.</para>

      <para>A Kerberos MIT &aacute;ltal fejlesztett
	implement&aacute;ci&oacute;j&aacute;t egy&eacute;bk&eacute;nt a
	Portgy&#251;jtem&eacute;nyb&#245;l a <filename
	role="package">security/krb5</filename> porton kereszt&uuml;l
	&eacute;rhetj&uuml;k el.</para>

    </sect2>

    <sect2>
      <title>A kezdeti adatb&aacute;zis
	l&eacute;trehoz&aacute;sa</title>

      <para>Ezt a l&eacute;p&eacute;st csak a Kerberos szerveren kell
	elv&eacute;gezni.  El&#245;sz&ouml;r is
	gy&#245;z&#245;dj&uuml;nk meg r&oacute;la, hogy semmilyen
	kor&aacute;bbi Kerberos adatb&aacute;zis nem
	tal&aacute;lhat&oacute; a g&eacute;pen.  V&aacute;ltsunk az
	<filename>/etc/kerberosIV</filename> k&ouml;nyvt&aacute;rra
	&eacute;s ellen&#245;rizz&uuml;k a k&ouml;vetkez&#245;
	&aacute;llom&aacute;nyok megl&eacute;t&eacute;t:</para>

      <screen>&prompt.root; <userinput>cd /etc/kerberosIV</userinput>
&prompt.root; <userinput>ls</userinput>
README		krb.conf        krb.realms</screen>

      <para>Ha rajtuk k&iacute;v&uuml;l tov&aacute;bbi
	&aacute;llom&aacute;nyok is felt&#251;nn&eacute;nek (mint
	p&eacute;ld&aacute;ul a <filename>principal.*</filename> vagy
	<filename>master_key</filename>), akkor a
	<command>kdb_destroy</command> paranccsal puszt&iacute;tsuk el a
	r&eacute;gi Kerberos adatb&aacute;zist, vagy ha nem fut
	m&aacute;r a Kerberos, akkor egyszer&#251;en csak
	t&ouml;r&uuml;lj&uuml;k le ezeket.</para>

      <para>Ezut&aacute;n l&aacute;ssunk neki a
	<filename>krb.conf</filename> &eacute;s
	<filename>krb.realms</filename> &aacute;llom&aacute;nyok
	&aacute;t&iacute;r&aacute;s&aacute;n kereszt&uuml;l a Kerberos
	egyes &ouml;vezeteinek (realm)
	l&eacute;trehoz&aacute;s&aacute;hoz.  Itt most az
	<literal>EXAMPLE.COM</literal> lesz a l&eacute;trehozand&oacute;
	&ouml;vezet, a hozz&aacute;tartoz&oacute; szerver pedig a
	<hostid role="fqdn">grunt.example.com</hostid>.  &Iacute;gy
	szerkessz&uuml;k &aacute;t vagy k&eacute;sz&iacute;ts&uuml;nk el
	a neki megfelel&#245; <filename>krb.conf</filename>
	&aacute;llom&aacute;nyt:</para>

      <screen>&prompt.root; <userinput>cat krb.conf</userinput>
EXAMPLE.COM
EXAMPLE.COM grunt.example.com admin server
CS.BERKELEY.EDU okeeffe.berkeley.edu
ATHENA.MIT.EDU kerberos.mit.edu
ATHENA.MIT.EDU kerberos-1.mit.edu
ATHENA.MIT.EDU kerberos-2.mit.edu
ATHENA.MIT.EDU kerberos-3.mit.edu
LCS.MIT.EDU kerberos.lcs.mit.edu
TELECOM.MIT.EDU bitsy.mit.edu
ARC.NASA.GOV trident.arc.nasa.gov</screen>

      <para>A t&ouml;bbi &ouml;vezetnek val&oacute;j&aacute;ban nem
	felt&eacute;tlen&uuml;l kell itt lennie.  Ezek csup&aacute;n
	az&eacute;rt szerepelnek itt, hogy bemutass&aacute;k
	mik&eacute;nt lehet egyetlen g&eacute;phez hozz&aacute;rendelni
	egyszerre t&ouml;bb &ouml;vezetet is.  Az
	egyszer&#251;s&eacute;g kedv&eacute;&eacute;rt nyugodtan
	elhagyhat&oacute;ak.</para>

      <para>Az els&#245; sor nevezi meg a rendszer &aacute;ltal
	m&#251;k&ouml;dtetett &ouml;vezeteket.  Az ut&aacute;na
	k&ouml;vetkez&#245; sorokban &ouml;vezeteket &eacute;s
	h&aacute;l&oacute;zati neveket l&aacute;thatunk.  Itt az
	els&#245; elem egy &ouml;vezetet nevez meg, a m&aacute;sodik
	elem pedig az &ouml;vezet <quote>kulcseloszt&oacute;
	k&ouml;zpontj&aacute;t</quote> (key distribution center).  A
	h&aacute;l&oacute;zati nevet k&ouml;vet&#245; <literal>admin
	server</literal> kulcsszavak arra utalnak, hogy az adott
	g&eacute;p adminisztrat&iacute;v szerepet ell&aacute;t&oacute;
	adatb&aacute;zist is tartalmaz.  Ezeket a fogalmakat
	r&eacute;szleteiben a Kerberos man oldalain ismerhetj&uuml;k
	meg.</para>

      <para>Ezut&aacute;n hozz&aacute; kell adnunk a <hostid
	role="fqdn">grunt.example.com</hostid> nev&#251; g&eacute;pet az
	<literal>EXAMPLE.COM</literal> &ouml;vezethez, valamint az
	<hostid role="domainname">.example.com</hostid>
	tartom&aacute;nyban lev&#245; &ouml;sszes g&eacute;phez
	l&eacute;tre kell hoznunk egy bejegyz&eacute;st az
	<literal>EXAMPLE.COM</literal> &ouml;vezetben.  A
	<filename>krb.realms</filename> &aacute;llom&aacute;nyt ehhez a
	k&ouml;vetkez&#245;k&eacute;ppen kellene
	m&oacute;dos&iacute;tanunk:</para>

      <screen>&prompt.root; <userinput>cat krb.realms</userinput>
grunt.example.com EXAMPLE.COM
.example.com EXAMPLE.COM
.berkeley.edu CS.BERKELEY.EDU
.MIT.EDU ATHENA.MIT.EDU
.mit.edu ATHENA.MIT.EDU</screen>

      <para>Ism&eacute;t hozz&aacute;tessz&uuml;k, hogy a t&ouml;bbi
	&ouml;vezetnek nem k&ouml;telez&#245; itt szerepelnie.  Ezek
	csup&aacute;n azt demonstr&aacute;lj&aacute;k, hogy
	mik&eacute;nt kell egy g&eacute;pet egyszerre t&ouml;bb
	&ouml;vezethez is be&aacute;ll&iacute;tani.  Az
	&aacute;tl&aacute;that&oacute;s&aacute;g kedv&eacute;&eacute;rt
	minden tov&aacute;bbi n&eacute;lk&uuml;l
	elt&aacute;vol&iacute;thatjuk ezeket.</para>

      <para>Itt az els&#245; sor az <emphasis>adott</emphasis> rendszert
	elhelyezi egy neves&iacute;tett &ouml;vezetbe.  A t&ouml;bbi sor
	azt mutatja meg, hogyan kell alap&eacute;rtelmezett m&oacute;don
	a meghat&aacute;rozott altartom&aacute;nyokba tartoz&oacute;
	g&eacute;peket egy neves&iacute;tett &ouml;vezethez
	hozz&aacute;rendelni.</para>

      <para>Most m&aacute;r k&eacute;szen &aacute;llunk az
	adatb&aacute;zis l&eacute;trehoz&aacute;s&aacute;ra.  Ehhez
	egyed&uuml;l a Kerberos szerver&eacute;t (avagy
	Kulcseloszt&oacute; k&ouml;zpontj&aacute;t) kell
	elind&iacute;tanunk.  Adjuk ki a <command>kdb_init</command>
	parancsot:</para>

      <screen>&prompt.root; <userinput>kdb_init</userinput>
<prompt>Realm name [default  ATHENA.MIT.EDU ]:</prompt> <userinput>EXAMPLE.COM</userinput>
You will be prompted for the database Master Password.
It is important that you NOT FORGET this password.

<prompt>Enter Kerberos master key:</prompt> </screen>

      <para>Az &uuml;zenet ford&iacute;t&aacute;sa:</para>

      <screen>Most az adatb&aacute;zis mesterkulcs&aacute;t kell megadni.  Fontos, hogy
NE FELEJTS&Uuml;K EL ezt a jelsz&oacute;t.</screen>

      <para>Most el kell menten&uuml;nk a kulcsot, &iacute;gy a helyi
	g&eacute;pen fut&oacute; szerverek fel tudj&aacute;k szedni.
	Ehhez a <command>kstash</command> parancsra van
	sz&uuml;ks&eacute;g&uuml;nk:</para>

      <screen>&prompt.root; <userinput>kstash</userinput>

<prompt>Enter Kerberos master key:</prompt>

Current Kerberos master key version is 1.

Master key entered. BEWARE!</screen>

      <para>Az &uuml;zenet ford&iacute;t&aacute;sa:</para>

      <screen>A Kerberos mesterkulcs&aacute;nak jelenlegi v&aacute;ltozata: 1.

VIGY&Aacute;ZAT, megadt&aacute;k a mesterkulcsot!</screen>

      <para>Ez elmenti a titkos&iacute;tott mesterkulcsot az
	<filename>/etc/kerberosIV/master_key</filename>
	&aacute;llom&aacute;nyba.</para>

    </sect2>

    <sect2>
      <title>Az eg&eacute;sz be&uuml;zemel&eacute;se</title>

      <indexterm>
	<primary>KerberosIV</primary>
	<secondary>kezdeti ind&iacute;t&aacute;sa</secondary>
      </indexterm>

      <para><emphasis>Mindegyik</emphasis> Kerberosszal &#245;rz&ouml;tt
	rendszerrel kapcsolatban k&eacute;t &uacute;n.  szerepl&#245;t
	(principal) kell m&eacute;g hozz&aacute;tenn&uuml;nk az
	adatb&aacute;zishoz.  A nev&uuml;k <literal>kpasswd</literal>
	&eacute;s <literal>rcmd</literal>.  Minden rendszerhez
	l&eacute;tre kell hoznunk ezeket a szerepl&#245;ket,
	p&eacute;ld&aacute;nyonk&eacute;nt (instance) az egyes
	rendszerek neveivel.</para>

      <para>A <application>kpasswd</application> &eacute;s
	<application>rcmd</application> d&eacute;monok teszik
	lehet&#245;v&eacute; a t&ouml;bbi rendszer
	sz&aacute;m&aacute;ra, hogy megv&aacute;ltoztathass&aacute;k a
	Kerberos jelszavukat, valamint hogy futtathass&aacute;k az
	&man.rcp.1;, &man.rlogin.1; &eacute;s &man.rsh.1;
	parancsokat.</para>

      <para>Vegy&uuml;k fel ezeket a bejegyz&eacute;seket is:</para>

      <screen>&prompt.root; <userinput>kdb_edit</userinput>
Opening database...

<prompt>Enter Kerberos master key:</prompt>

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Previous or default values are in [brackets] ,
enter return to leave the same, or new value.

<prompt>Principal name:</prompt> <userinput>passwd</userinput>
<prompt>Instance:</prompt> <userinput>grunt</userinput>

&lt;Not found&gt;, <prompt>Create [y] ?</prompt> <userinput>y</userinput>

Principal: passwd, Instance: grunt, kdc_key_ver: 1
<prompt>New Password:</prompt>                    &lt;---- &iacute;rjuk be, hogy <quote>RANDOM</quote>
Verifying password

<prompt>New Password:</prompt> &lt;---- &iacute;rjuk be, hogy <quote>RANDOM</quote>

<prompt>Random password [y] ?</prompt> <userinput>y</userinput>

Principal's new key version = 1
<prompt>Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?</prompt>
<prompt>Max ticket lifetime (*5 minutes) [ 255 ] ?</prompt>
<prompt>Attributes [ 0 ] ?</prompt>
Edit O.K.
<prompt>Principal name:</prompt> <userinput>rcmd</userinput>
<prompt>Instance:</prompt> <userinput>grunt</userinput>

&lt;Not found&gt;, <prompt>Create [y] ?</prompt>

Principal: rcmd, Instance: grunt, kdc_key_ver: 1
<prompt>New Password:</prompt>		&lt;---- &iacute;rjuk be, hogy <quote>RANDOM</quote>
Verifying password

<prompt>New Password:</prompt>           &lt;---- &iacute;rjuk be, hogy <quote>RANDOM</quote>

<prompt>Random password [y] ?</prompt>

Principal's new key version = 1
<prompt>Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?</prompt>
<prompt>Max ticket lifetime (*5 minutes) [ 255 ] ?</prompt>
<prompt>Attributes [ 0 ] ?</prompt>
Edit O.K.
<prompt>Principal name:</prompt>         &lt;---- ha nem adunk meg semmit, akkor kil&eacute;p</screen>
    </sect2>

    <sect2>
      <title>A szerver &aacute;llom&aacute;ny
	l&eacute;trehoz&aacute;sa</title>

      <para>Most pedig kivonatolni kell azokat a
	p&eacute;ld&aacute;nyokat, amelyek szolg&aacute;ltat&aacute;st
	defini&aacute;lnak a g&eacute;pen.  Erre az
	<command>ext_srvtab</command> parancsot haszn&aacute;ljuk.
	Ennek eredm&eacute;nyek&eacute;ppen keletkezik egy
	&aacute;llom&aacute;nyt, amelyet <emphasis>biztons&aacute;gos
	eszk&ouml;z&ouml;kkel</emphasis> &aacute;t kell m&aacute;solni
	vagy &aacute;t kell mozgatni az egyes Kerberos kliensek
	<filename>/etc</filename> k&ouml;nyvt&aacute;r&aacute;ba.  Ennek
	az &aacute;llom&aacute;nynak egyar&aacute;nt jelent kell lennie
	a szerveren &eacute;s a kliensen is, n&eacute;lk&uuml;le a
	Kerberos m&#251;k&ouml;d&eacute;sk&eacute;ptelen.</para>

      <screen>&prompt.root; <userinput>ext_srvtab grunt</userinput>
<prompt>Enter Kerberos master key:</prompt>

Current Kerberos master key version is 1.

Master key entered. BEWARE!
Generating 'grunt-new-srvtab'....</screen>

      <para>Ez a parancs most l&eacute;trehozott egy ideiglenes
	&aacute;llom&aacute;nyt, amit &aacute;t kell nevezni az
	<filename>srvtab</filename> n&eacute;vre, hogy
	megtal&aacute;lhass&aacute;k a szerverek.  Az eredeti rendszeren
	a &man.mv.1; paranccsal tudjuk a hely&eacute;re rakni:</para>

      <screen>&prompt.root; <userinput>mv grunt-new-srvtab srvtab</userinput></screen>

      <para>Ha egy kliensnek sz&aacute;njuk az &aacute;llom&aacute;nyt
	&eacute;s a h&aacute;lozatunkat nem tekinthetj&uuml;k
	biztons&aacute;gosnak, akkor a
	<filename><replaceable>kliens</replaceable>-new-srvtab</filename>
	&aacute;llom&aacute;nyt m&aacute;soljuk egy mozgathat&oacute;
	adathordoz&oacute;ra &eacute;s megb&iacute;zhat&oacute;
	m&oacute;don jutassuk el.  Ne felejts&uuml;k el az
	&aacute;llom&aacute;nyt <filename>srvtab</filename> n&eacute;ven
	&aacute;trakni a kliens <filename>/etc</filename>
	k&ouml;nyvt&aacute;r&aacute;ba &eacute;s az enged&eacute;lyeit
	600-ra &aacute;ll&iacute;tani:</para>

      <screen>&prompt.root; <userinput>mv grumble-new-srvtab srvtab</userinput>
&prompt.root; <userinput>chmod 600 srvtab</userinput></screen>

    </sect2>

    <sect2>
      <title>Az adatb&aacute;zis felt&ouml;lt&eacute;se</title>

      <para>Ezt k&ouml;vet&#245;en r&ouml;gz&iacute;ten&uuml;nk kell
	n&eacute;h&aacute;ny felhaszn&aacute;l&oacute;t is
	adatb&aacute;zisban.  El&#245;sz&ouml;r is hozzunk l&eacute;tre
	egy bejegyz&eacute;st a <username>janos</username> nev&#251;
	felhaszn&aacute;l&oacute;nak.  Ezt a <command>kdb_edit</command>
	parancs kiad&aacute;s&aacute;val tessz&uuml;k meg:</para>

      <screen>&prompt.root; <userinput>kdb_edit</userinput>
Opening database...

<prompt>Enter Kerberos master key:</prompt>

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Previous or default values are in [brackets] ,
enter return to leave the same, or new value.

<prompt>Principal name:</prompt> <userinput>janos</userinput>
<prompt>Instance:</prompt>

&lt;Not found&gt;, <prompt>Create [y] ?</prompt> <userinput>y</userinput>

Principal: janos, Instance: , kdc_key_ver: 1
<prompt>New Password:</prompt>                &lt;---- adjunk meg egy biztons&aacute;gos jelsz&oacute;t
Verifying password

<prompt>New Password:</prompt>                &lt;---- itt ism&eacute;t adjuk meg a jelsz&oacute;t
Principal's new key version = 1
<prompt>Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?</prompt>
<prompt>Max ticket lifetime (*5 minutes) [ 255 ] ?</prompt>
<prompt>Attributes [ 0 ] ?</prompt>
Edit O.K.
<prompt>Principal name:</prompt>		   &lt;---- ha nem &iacute;runk be semmit, akkor kil&eacute;p</screen>

    </sect2>

    <sect2>
      <title>Pr&oacute;b&aacute;ljuk ki</title>

      <para>Els&#245;k&eacute;nt a Kerberos d&eacute;monait kell
	beind&iacute;tanunk.  Ezzel kapcsolatban megjegyezn&eacute;nk,
	hogy ha ehhez megfelel&#245;en &aacute;t&iacute;rtuk az
	<filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyunkat,
	akkor ez az &uacute;jraind&iacute;t&aacute;ssal egy&uuml;tt
	mag&aacute;t&oacute;l lezajlik.  Ezt csak a Kerberos szerveren
	kell megcsin&aacute;lni.  A Kerberos kliensei magukt&oacute;l
	&ouml;sszeszedik a m&#251;k&ouml;d&eacute;s&uuml;kh&ouml;z
	sz&uuml;ks&eacute;ges adatokat az
	<filename>/etc/kerberosIV</filename>
	k&ouml;nyvt&aacute;rb&oacute;l.</para>

      <screen>&prompt.root; <userinput>kerberos &amp;</userinput>
Kerberos server starting
Sleep forever on error
Log file is /var/log/kerberos.log
Current Kerberos master key version is 1.

Master key entered. BEWARE!

Current Kerberos master key version is 1
Local realm: EXAMPLE.COM
&prompt.root; <userinput>kadmind -n &amp;</userinput>
KADM Server KADM0.0A initializing
Please do not use 'kill -9' to kill this job, use a
regular kill instead

Current Kerberos master key version is 1.

Master key entered.  BEWARE!</screen>

      <para>A fenti figyelmeztet&eacute;s
	ford&iacute;t&aacute;sa:</para>

      <screen>A program le&aacute;ll&iacute;t&aacute;s&aacute;ra ne a 'kill -9' parancsot, hanem a
norm&aacute;lis kill parancsot haszn&aacute;ljuk</screen>

      <para>Ezut&aacute;n a <command>kinit</command> parancs
	haszn&aacute;lat&aacute;val pr&oacute;b&aacute;ljunk meg az
	el&#245;bb l&eacute;trehozott <username>janos</username>
	azonos&iacute;t&oacute;nak k&eacute;rni egy jegyet:</para>

      <screen>&prompt.user; <userinput>kinit janos</userinput>
MIT Project Athena (grunt.example.com)
Kerberos Initialization for "janos"
<prompt>Password:</prompt> </screen>

      <para>A <command>klist</command> paranccsal most
	pr&oacute;b&aacute;ljuk meg kilist&aacute;zni a tokeneket
	&eacute;s &iacute;gy ellen&#245;rizni, hogy val&oacute;ban
	rendelkez&uuml;nk vel&uuml;k:</para>

      <screen>&prompt.user; <userinput>klist</userinput>
Ticket file:    /tmp/tkt245
Principal:      janos@EXAMPLE.COM

  Issued           Expires          Principal
Apr 30 11:23:22  Apr 30 19:23:22  krbtgt.EXAMPLE.COM@EXAMPLE.COM</screen>

      <para>Ezut&aacute;n a &man.passwd.1; haszn&aacute;lat&aacute;val
	pr&oacute;b&aacute;ljuk meg megv&aacute;ltoztatni a
	jelszavunkat.  Ezzel tudjuk ellen&#245;rizni, hogy a
	<application>kpasswd</application> d&eacute;mon
	hozz&aacute;f&eacute;r a Kerberos
	adatb&aacute;zis&aacute;hoz:</para>

      <screen>&prompt.user; <userinput>passwd</userinput>
realm EXAMPLE.COM
<prompt>Old password for janos:</prompt>
<prompt>New Password for janos:</prompt>
Verifying password
<prompt>New Password for janos:</prompt>
Password changed.</screen>

    </sect2>

    <sect2>
      <title>Adminisztr&aacute;tori jogosults&aacute;gok
	felv&eacute;tele</title>

      <para>A Kerberos lehet&#245;v&eacute; teszi, hogy
	<emphasis>mindegyik</emphasis> olyan
	felhaszn&aacute;l&oacute;nak, akinek rendszergazdai jogokra
	lenne sz&uuml;ks&eacute;ge, a &man.su.1;
	el&eacute;r&eacute;s&eacute;hez
	<emphasis>k&uuml;l&ouml;n</emphasis> meg tudjunk adni egy
	jelsz&oacute;t.  Most m&aacute;r tudunk mondani egy olyan
	azonos&iacute;t&oacute;t is, amely jogosult a &man.su.1;
	haszn&aacute;lat&aacute;val <username>root</username> jogokat
	szerezni.  Ezt &uacute;gy tudjuk megoldani, ha az adott
	szerepl&#245;h&ouml;z t&aacute;rs&iacute;tunk egy
	<username>root</username> p&eacute;ld&aacute;nyt.  A
	<command>kdb_edit</command> haszn&aacute;lat&aacute;val
	k&eacute;sz&iacute;teni tudunk egy <literal>janos.root</literal>
	bejegyz&eacute;st a Kerberos adatb&aacute;zis&aacute;ban:</para>

      <screen>&prompt.root; <userinput>kdb_edit</userinput>
Opening database...

<prompt>Enter Kerberos master key:</prompt>

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Previous or default values are in [brackets] ,
enter return to leave the same, or new value.

<prompt>Principal name:</prompt> <userinput>janos</userinput>
<prompt>Instance:</prompt> <userinput>root</userinput>

&lt;Not found&gt;, Create [y] ? y

Principal: janos, Instance: root, kdc_key_ver: 1
<prompt>New Password:</prompt>                    &lt;---- ide csak egy BIZTONS&Aacute;GOS jelsz&oacute;t adjuk meg!
Verifying password

<prompt>New Password:</prompt>    	 	 &lt;---- adjuk meg ism&eacute;t a jelsz&oacute;t

Principal's new key version = 1
<prompt>Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?</prompt>
<prompt>Max ticket lifetime (*5 minutes) [ 255 ] ?</prompt> <userinput>12</userinput> &lt;--- ne &aacute;ll&iacute;tsuk nagyon hossz&uacute;ra!
<prompt>Attributes [ 0 ] ?</prompt>
Edit O.K.
<prompt>Principal name:</prompt>		         &lt;---- ha nem adunk meg semmit, akkor kil&eacute;p</screen>

      <para>Ezt k&ouml;vet&#245;en &uacute;gy tudunk megbizonyosodni a
	m&#251;k&ouml;d&eacute;s&eacute;r&#245;l, hogy
	megpr&oacute;b&aacute;lunk neki tokeneket szerezni:</para>

      <screen>&prompt.root; <userinput>kinit janos.root</userinput>
MIT Project Athena (grunt.example.com)
Kerberos Initialization for "janos.root"
<prompt>Password:</prompt></screen>

      <para>Most rakjuk bele a felhaszn&aacute;l&oacute;t a
	<username>root</username> <filename>.klogin</filename>
	&aacute;llom&aacute;ny&aacute;ba:</para>

      <screen>&prompt.root; <userinput>cat /root/.klogin</userinput>
janos.root@EXAMPLE.COM</screen>

      <para>Ezut&aacute;n pr&oacute;b&aacute;ljunk meg kiadni a
	&man.su.1; parancs&aacute;t:</para>

      <screen>&prompt.user; <userinput>su</userinput>
<prompt>Password:</prompt></screen>

      <para>N&eacute;zz&uuml;k meg milyen tokenjeink is vannak:</para>

      <screen>&prompt.root; <userinput>klist</userinput>
Ticket file:	/tmp/tkt_root_245
Principal:      janos.root@EXAMPLE.COM

  Issued           Expires          Principal
May  2 20:43:12  May  3 04:43:12  krbtgt.EXAMPLE.COM@EXAMPLE.COM</screen>

    </sect2>

    <sect2>
      <title>M&aacute;s parancsok haszn&aacute;lata</title>

      <para>Az im&eacute;nti p&eacute;ld&aacute;ban l&eacute;trehoztunk
	egy <literal>janos</literal> nev&#251; szerepl&#245;t, amihez a
	<literal>root</literal> egy p&eacute;ld&aacute;ny&aacute;t
	rendelt&uuml;k.  Ez egy olyan felhaszn&aacute;l&oacute;n
	alapj&aacute;n t&ouml;rt&eacute;nt, akinek a neve megegyezik a
	hozz&aacute;tartoz&oacute; szerepl&#245;vel, ami a Kerberosban
	alap&eacute;rtelmez&eacute;s.  Amennyiben a
	sz&uuml;ks&eacute;ges megjegyz&eacute;sek
	megtal&aacute;lhat&oacute;ak a <username>root</username>
	k&ouml;nyvt&aacute;r&aacute;ban lev&#245;
	<filename>.klogin</filename> &aacute;llom&aacute;nyban, akkor a
	<literal><replaceable>felhaszn&aacute;l&oacute;</replaceable>.<username>root</username></literal>
	form&aacute;tum&uacute;
	<literal><replaceable>szerepl&#245;</replaceable>.<replaceable>p&eacute;ld&aacute;ny</replaceable></literal>
	azonos&iacute;t&oacute; megengedi a
	<literal><replaceable>felhaszn&aacute;l&oacute;</replaceable></literal>
	sz&aacute;m&aacute;ra, hogy v&eacute;grehajtsa a &man.su.1;
	parancsot.</para>

      <screen>&prompt.root; <userinput>cat /root/.klogin</userinput>
janos.root@EXAMPLE.COM</screen>

      <para>Ehhez hasonl&oacute;an, ha a felhaszn&aacute;l&oacute;
	saj&aacute;t k&ouml;nyvt&aacute;r&aacute;ban
	megtal&aacute;lhat&oacute; egy ilyen
	&aacute;llom&aacute;ny:</para>

      <screen>&prompt.user; <userinput>cat ~/.klogin</userinput>
janos@EXAMPLE.COM
jozsef@EXAMPLE.COM</screen>

      <para>Ezzel a konfigur&aacute;ci&oacute;val b&aacute;rki, aki
	<username>janos</username> felhaszn&aacute;l&oacute;k&eacute;nt
	vagy <username>jozsef</username>
	felhaszn&aacute;l&oacute;k&eacute;nt (a <command>kinit</command>
	parancson kereszt&uuml;l) hiteles&iacute;tette mag&aacute;t
	<literal>EXAMPLE.COM</literal> &ouml;vezetb&#245;l, ezen a
	rendszeren (<hostid>grunt</hostid>) bejelentkezhet a
	<username>janos</username> nev&#251;
	felhaszn&aacute;l&oacute;k&eacute;nt vagy
	hozz&aacute;f&eacute;rhet az &aacute;llom&aacute;nyaihoz az
	&man.rlogin.1;, &man.rsh.1; vagy &man.rcp.1;
	haszn&aacute;lat&aacute;val.</para>

      <para>P&eacute;ld&aacute;ul <username>janos</username> most egy
	m&aacute;sik Kerberost haszn&aacute;l&oacute; rendszerre
	jelentkezik be:</para>

      <screen>&prompt.user; <userinput>kinit</userinput>
MIT Project Athena (grunt.example.com)
<prompt>Password:</prompt>
&prompt.user; <userinput>rlogin grunt</userinput>
Last login: Mon May  1 21:14:47 from grumble
Copyright (c) 1980, 1983, 1986, 1988, 1990, 1991, 1993, 1994
        The Regents of the University of California.   All rights reserved.

FreeBSD BUILT-19950429 (GR386) #0: Sat Apr 29 17:50:09 SAT 1995</screen>

      <para>Vagy <username>jozsef</username> jelentkezik be ugyanazon a
	g&eacute;pen <username>janos</username>
	hozz&aacute;f&eacute;r&eacute;s&eacute;vel (a
	<username>janos</username> nev&#251;
	felhaszn&aacute;l&oacute;nak a fentebb bemutatt
	<filename>.klogin</filename> &aacute;llom&aacute;ny
	tal&aacute;lhat&oacute; a k&ouml;nyvt&aacute;r&aacute;ban
	&eacute;s a Kerberos &uuml;zemeltet&eacute;s&eacute;&eacute;rt
	felel&#245;s szem&eacute;ly l&eacute;trehozott egy
	<emphasis>jozsef</emphasis> nev&#251; szerepl&#245;t egy null
	p&eacute;ld&aacute;nnyal):</para>

      <screen>&prompt.user; <userinput>kinit</userinput>
&prompt.user; <userinput>rlogin grunt -l janos</userinput>
MIT Project Athena (grunt.example.com)
<prompt>Password:</prompt>
Last login: Mon May  1 21:16:55 from grumble
Copyright (c) 1980, 1983, 1986, 1988, 1990, 1991, 1993, 1994
        The Regents of the University of California.   All rights reserved.
FreeBSD BUILT-19950429 (GR386) #0: Sat Apr 29 17:50:09 SAT 1995</screen>

    </sect2>
  </sect1>

  <sect1 id="kerberos5">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Tillman</firstname>
	  <surname>Hodgson</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
      <authorgroup>
	<author>
	  <firstname>Mark</firstname>
	  <surname>Murray</surname>
	  <contrib>Eredetileg &iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title><application>Kerberos5</application></title>

    <para>A &os;&nbsp;5.1 ut&aacute;n k&ouml;vetkez&#245; mindegyik &os;
      kiad&aacute;s m&aacute;r csak a
      <application>Kerberos5</application> t&aacute;mogat&aacute;st
      tartalmaz.  Ez&eacute;rt benn&uuml;k csak a
      <application>Kerberos5</application> tal&aacute;lhat&oacute; meg,
      &eacute;s a be&aacute;ll&iacute;t&aacute;sa sok szempontb&oacute;l
      hasonl&iacute;t a <application>KerberosIV</application>
      be&aacute;ll&iacute;t&aacute;s&aacute;hoz.  A most
      k&ouml;vetkez&#245; inform&aacute;ci&oacute;k csak &eacute;s
      kiz&aacute;r&oacute;lag a &os;&nbsp;5.0 kiad&aacute;s ut&aacute;n
      k&ouml;vetkez&#245;kben tal&aacute;lhat&oacute;
      <application>Kerberos5</application> v&aacute;ltozatra
      vonatkoznak.  A <application>KerberosIV</application>
      szolg&aacute;ltat&aacute;sait a felhaszn&aacute;l&oacute;k
      csomagk&eacute;nt, a <filename
      role="package">security/krb4</filename> porton kereszt&uuml;l
      &eacute;rhetik el.</para>

    <para>A <application>Kerberos</application> egy
      h&aacute;l&oacute;zati kieg&eacute;sz&iacute;t&#245;
      rendszer/protokoll, amivel a felhaszn&aacute;l&oacute;k egy
      biztons&aacute;gos szerveren kereszt&uuml;l k&eacute;pesek magukat
      azonos&iacute;tani.  A t&aacute;voli bejelentkez&eacute;sek,
      t&aacute;voli m&aacute;sol&aacute;sok, a rendszer bel&uuml;li
      v&eacute;dett m&aacute;sol&aacute;sok valamint egy&eacute;b nagyon
      kock&aacute;zatos feladatok, szolg&aacute;ltat&aacute;sok
      biztons&aacute;ga &eacute;s fel&uuml;gyelete &iacute;gy
      jelent&#245;s m&eacute;rt&eacute;kben
      jav&iacute;that&oacute;.</para>

    <para>A <application>Kerberos</application> &uacute;gy
      &iacute;rhat&oacute; le, mint az szem&eacute;lyazonoss&aacute;gok
      ellen&#245;rz&eacute;s&eacute;re feljogos&iacute;tott rendszer.
      Vagy tekinthetj&uuml;k egy megb&iacute;zhat&oacute;
      k&uuml;ls&#245; megfigyel&#245; &aacute;ltal v&eacute;gzett
      hiteles&iacute;t&eacute;si rendszernek is.  A
      <application>Kerberos</application> csak egyetlen funkci&oacute;t
      k&iacute;n&aacute;l fel &mdash; ez a felhaszn&aacute;l&oacute;k
      biztons&aacute;gos hiteles&iacute;t&eacute;se a
      h&aacute;l&oacute;zaton.  Viszont nem ny&uacute;jt semmilyen
      felhatalmaz&aacute;si (mit csin&aacute;lhatnak a
      felhaszn&aacute;l&oacute;k) vagy vizsg&aacute;lati (mit
      csin&aacute;ltak v&eacute;g&uuml;l a felhaszn&aacute;l&oacute;k)
      lehet&#245;s&eacute;get.  Miut&aacute;n egy kliens &eacute;s a
      szerver a <application>Kerberos</application>
      haszn&aacute;lat&aacute;val azonos&iacute;tott&aacute;k
      egym&aacute;st, az egym&aacute;s k&ouml;zt foly&oacute;
      kommunik&aacute;ci&oacute;juk titkos&iacute;t&aacute;s&aacute;val
      k&eacute;pesek meg&#245;rzi az &aacute;t&aacute;raml&oacute;
      adatok s&eacute;rtetlens&eacute;g&eacute;t &eacute;s
      lehallgathatatlans&aacute;g&aacute;t.</para>

    <para>Ennek t&uuml;kr&eacute;ben a
      <application>Kerberos</application> haszn&aacute;lata csak
      m&aacute;s olyan biztons&aacute;gi m&oacute;dszerekkel
      egy&uuml;ttesen javasolt, amelyek felhatalmaz&aacute;st &eacute;s
      vizsg&aacute;lati szolg&aacute;ltat&aacute;sokkal is
      rendelkeznek.</para>

    <para>A most k&ouml;vetkez&#245; utas&iacute;t&aacute;sok arra
      igyekeznek &uacute;tmutat&aacute;st adni, hogy mik&eacute;nt
      haszn&aacute;ljuk a &os;-vel egy&uuml;tt terjesztett
      <application>Kerberos</application> verzi&oacute;t.  Azonban a
      teljes le&iacute;r&aacute;st csak a t&eacute;m&aacute;hoz
      tartoz&oacute; man oldalak &aacute;tolvas&aacute;s&aacute;val
      egy&uuml;tt kapjuk meg.</para>

    <para>A <application>Kerberos</application>
      telep&iacute;t&eacute;s&eacute;nek bemutat&aacute;s&aacute;hoz az
      al&aacute;bbi n&eacute;vtereket fogjuk haszn&aacute;lni:</para>

    <itemizedlist>
      <listitem>
	<para>A <acronym>DNS</acronym> tartom&aacute;ny
	  (<quote>z&oacute;na</quote>) az <hostid
	  role="fqdn">example.org</hostid> lesz.</para>
      </listitem>

      <listitem>
	<para>A <application>Kerberos</application> &ouml;vezet az
	  EXAMPLE.ORG lesz.</para>
      </listitem>
    </itemizedlist>

    <note>
      <para>K&eacute;rj&uuml;k, hogy m&eacute;g abban az esetben is
	val&oacute;di tartom&aacute;nyneveket adjuk meg, amikor a
	<application>Kerberos</application> haszn&aacute;lat&aacute;t
	csak a bels&#245; h&aacute;l&oacute;zaton tervezz&uuml;k.  Ezzel
	elker&uuml;lhetj&uuml;k az egyes
	<application>Kerberos</application> &ouml;vezetek
	egy&uuml;ttm&#251;k&ouml;d&eacute;se sor&aacute;n
	felmer&uuml;l&#245; <acronym>DNS</acronym>
	probl&eacute;m&aacute;kat.</para>
    </note>

    <sect2>
      <title>A <application>Kerberos</application>
	t&ouml;rt&eacute;nete</title>

      <indexterm>
	<primary>Kerberos5</primary>
	<secondary>t&ouml;rt&eacute;nete</secondary>
      </indexterm>

      <para>A <application>Kerberos</application>t az
	<acronym>MIT</acronym> hozta l&eacute;tre a
	h&aacute;l&oacute;zati biztons&aacute;ggal kapcsolatos
	probl&eacute;m&aacute;k egyik megold&aacute;sak&eacute;nt.  A
	<application>Kerberos</application> er&#245;s
	titkos&iacute;t&aacute;st haszn&aacute;l, ez&eacute;rt a
	kliensek k&eacute;pesek egy nem biztons&aacute;gos
	h&aacute;l&oacute;zaton is azonos&iacute;tani magukat a szerver
	fel&eacute; (&eacute;s ford&iacute;tva).</para>

      <para>A <application>Kerberos</application> egyar&aacute;nt utal
	egy h&aacute;l&oacute;zati protokoll nev&eacute;re &eacute;s
	azokra programokra, amelyek implement&aacute;lj&aacute;k
	(p&eacute;ld&aacute;ul <application>Kerberos</application>
	telnet).  Az 5 a protokoll jelenlegi verzi&oacute;ja, amit az
	<acronym>RFC</acronym>&nbsp;1510 &iacute;r le.</para>

      <para>A protokollnak sz&aacute;mos szabad v&aacute;ltozata
	l&eacute;tezik, rengeteg t&iacute;pus&uacute;
	oper&aacute;ci&oacute;s rendszerre.  A Massachusettsi
	M&#251;szaki Int&eacute;zet (Massachusetts Institute of
	Technology, <acronym>MIT</acronym>), ahol a
	<application>Kerberos</application>t eredetileg
	kifejlesztett&eacute;k, napjainkban is folytatja a saj&aacute;t
	<application>Kerberos</application> csomagj&aacute;nak
	fejleszt&eacute;s&eacute;t.  T&ouml;bbnyire az Egyes&uuml;lt
	&Aacute;llamokban haszn&aacute;lj&aacute;k
	titkos&iacute;t&aacute;sra, mivel r&eacute;gebben az amerikai
	kiviteli korl&aacute;toz&aacute;sok voltak r&aacute;
	&eacute;rv&eacute;nyesek.  Az <acronym>MIT</acronym>
	<application>Kerberos</application> v&aacute;ltozata
	portk&eacute;nt &eacute;rhet&#245; el (<filename
	role="package">security/krb5</filename>).  A Heimdal
	<application>Kerberos</application> egy m&aacute;sik 5
	verzi&oacute;j&uacute; implement&aacute;ci&oacute;, amit a
	kiviteli korl&aacute;toz&aacute;sok elker&uuml;l&eacute;se
	&eacute;rdek&eacute;ben hat&aacute;rozottan az Egyes&uuml;lt
	&Aacute;llamokon k&iacute;v&uuml;l fejlesztettek ki
	(ez&eacute;rt gyakran megtal&aacute;lhatjuk a
	k&uuml;l&ouml;nb&ouml;z&#245; nem kereskedelmi &unix;
	vari&aacute;nsokban).  A Heimdal
	<application>Kerberos</application> terjeszt&eacute;s
	portk&eacute;nt el&eacute;rhet&#245; (<filename
	role="package">security/heimdal</filename>) &eacute;s kisebb
	m&eacute;retben a &os; alaptelep&iacute;t&eacute;s&eacute;nek is
	r&eacute;sze.</para>

      <para>Mivel ezzel az &iacute;r&aacute;ssal a legt&ouml;bb
	felhaszn&aacute;l&oacute;t k&iacute;v&aacute;njuk
	seg&iacute;teni, ez&eacute;rt a k&ouml;vetkez&#245;
	utas&iacute;t&aacute;sok a &os;
	telep&iacute;t&eacute;s&eacute;ben mell&eacute;kelt Heimdal
	terjeszt&eacute;s haszn&aacute;lat&aacute;t
	felt&eacute;telezik.</para>

    </sect2>

    <sect2>
      <title>A Heimdal kulcseloszt&oacute;j&aacute;nak
	telep&iacute;t&eacute;se</title>

      <indexterm>
	<primary>Kerberos5</primary>
	<secondary>kulcseloszt&oacute; k&ouml;zpont</secondary>
      </indexterm>

      <para>A kulcseloszt&oacute; k&ouml;zpont (Key Distribution Center,
	avagy <acronym>KDC</acronym>) az a centraliz&aacute;lt
	hiteles&iacute;t&eacute;si szolg&aacute;ltat&aacute;s, amit a
	<application>Kerberos</application> ny&uacute;jt &mdash;
	l&eacute;nyeg&eacute;ben az a
	sz&aacute;m&iacute;t&oacute;g&eacute;p, amely
	<application>Kerberos</application>-jegyeket bocs&aacute;jt ki.
	A <acronym>KDC</acronym>
	<quote>megb&iacute;zhat&oacute;nak</quote> tekinthet&#245; a
	<application>Kerberos</application> &aacute;ltal
	kialak&iacute;tott &ouml;vezetben lev&#245; t&ouml;bbi
	sz&aacute;m&iacute;t&oacute;g&eacute;p sz&aacute;m&aacute;ra,
	ez&eacute;rt v&eacute;delme kiemelten fontos.</para>

      <para>Itt jegyezn&eacute;nk meg, hogy hab&aacute;r a
	<application>Kerberos</application> szerver futtat&aacute;sa
	nagyon kev&eacute;s sz&aacute;m&iacute;t&oacute;g&eacute;pes
	er&#245;forr&aacute;st ig&eacute;nyel, ennek ellen&eacute;re
	biztons&aacute;gi szempontb&oacute;l egy k&uuml;l&ouml;n
	sz&aacute;m&iacute;t&oacute;g&eacute;pet javasoljunk a
	kulcseloszt&oacute; szerep&eacute;nek
	bet&ouml;lt&eacute;s&eacute;hez.</para>

      <para>Miel&#245;tt nekifogn&aacute;nk a <acronym>KDC</acronym>
	konfigur&aacute;l&aacute;s&aacute;nak, ellen&#245;rizz&uuml;k,
	hogy az <filename>/etc/rc.conf</filename> tartalmazza a
	<acronym>KDC</acronym> m&#251;k&ouml;d&eacute;s&eacute;hez
	sz&uuml;ks&eacute;ges be&aacute;ll&iacute;t&aacute;sokat (az
	el&eacute;r&eacute;si utakat term&eacute;szetesen a saj&aacute;t
	rendszer&uuml;nk szerint &aacute;ll&iacute;tsuk be):</para>

      <programlisting>kerberos5_server_enable="YES"
kadmind5_server_enable="YES"</programlisting>

      <para>A k&ouml;vetkez&#245; l&eacute;p&eacute;sben vegy&uuml;k
	szem&uuml;gyre a <application>Kerberos</application>
	be&aacute;ll&iacute;t&aacute;sait tartalmaz&oacute;
	<filename>/etc/krb5.conf</filename>
	&aacute;llom&aacute;nyt:</para>

      <programlisting>[libdefaults]
    default_realm = EXAMPLE.ORG
[realms]
    EXAMPLE.ORG = {
        kdc = kerberos.example.org
        admin_server = kerberos.example.org
    }
[domain_realm]
    .example.org = EXAMPLE.ORG</programlisting>

      <para>Vegy&uuml;k &eacute;szre, hogy az itt szerepl&#245;
	<filename>/etc/krb5.conf</filename> &aacute;llom&aacute;ny
	szerint a kulcseloszt&oacute;nk teljes h&aacute;l&oacute;zati
	neve <hostid role="fqdn">kerberos.example.org</hostid>.  Ha a
	kulcseloszt&oacute;nknak nem ez a neve, akkor a
	z&oacute;n&aacute;kat le&iacute;r&oacute;
	&aacute;llom&aacute;nyba vegy&uuml;nk m&eacute;g fel egy ilyen
	CNAME (&aacute;ln&eacute;v) bejegyz&eacute;st.</para>

      <note>
	<para>Ha egy nagyobb h&aacute;l&oacute;zatban vagyunk, ahol a
	  <acronym>DNS</acronym> szervert is megfelel&#245;en
	  be&aacute;ll&iacute;tott&aacute;k, akkor az im&eacute;nti
	  p&eacute;lda ennyire lesz&#251;k&iacute;thet&#245;:</para>

	<programlisting>[libdefaults]
      default_realm = EXAMPLE.ORG</programlisting>

	<para>Itt m&aacute;r a k&ouml;vetkez&#245; sorokat
	  hozz&aacute;adt&aacute;k <hostid
	  role="fqdn">example.org</hostid> z&oacute;n&aacute;t
	  le&iacute;r&oacute; &aacute;llom&aacute;nyhoz:</para>

	<programlisting>_kerberos._udp      IN  SRV     01 00 88 kerberos.example.org.
_kerberos._tcp      IN  SRV     01 00 88 kerberos.example.org.
_kpasswd._udp       IN  SRV     01 00 464 kerberos.example.org.
_kerberos-adm._tcp  IN  SRV     01 00 749 kerberos.example.org.
_kerberos           IN  TXT     EXAMPLE.ORG</programlisting></note>

      <note>
	<para>A kliensek csak akkor lesznek k&eacute;pesek el&eacute;rni
	  a <application>Kerberos</application>
	  szolg&aacute;ltat&aacute;sait, ha vagy
	  <emphasis>k&ouml;telez&#245; jelleggel</emphasis> megadunk egy
	  teljesen be&aacute;ll&iacute;tott
	  <filename>/etc/krb5.conf</filename> &aacute;llom&aacute;nyt,
	  vagy egy minim&aacute;lis <filename>/etc/krb5.conf</filename>
	  &aacute;llom&aacute;nyt <emphasis>&eacute;s</emphasis> egy
	  helyesen be&aacute;ll&iacute;tott DNS szervert
	  haszn&aacute;lunk.</para>
      </note>

      <para>Ezut&aacute;n l&eacute;trehozzuk a
	<application>Kerberos</application> adatb&aacute;zis&aacute;t.
	Ez az adatb&aacute;zis tartalmazza az &ouml;sszes szerepl&#245;
	kulcs&aacute;t a mesterkulcssal titkos&iacute;tva.  Erre a
	jelsz&oacute;ra nem kell felt&eacute;tlen&uuml;l
	eml&eacute;kezn&uuml;nk, mivel ez egy &aacute;llom&aacute;nyban
	t&aacute;rol&oacute;dik
	(<filename>/var/heimdal/m-key</filename>).  A mesterkulcsot a
	<command>kstash</command> parancs kiad&aacute;s&aacute;val
	&eacute;s egy jelsz&oacute; megad&aacute;s&aacute;val tudjuk
	l&eacute;trehozni.</para>

      <para>Ahogy a mesterkulcs elk&eacute;sz&uuml;lt, a
	<command>kadmin</command> parancs <literal>-l</literal> (mint
	<quote>lok&aacute;lis</quote>, azaz helyi)
	opci&oacute;j&aacute;val inicializ&aacute;lni tudjuk az
	adatb&aacute;zist.  Ez az opci&oacute; arra utas&iacute;tja a
	<command>kadmin</command> programot, hogy ne a
	<command>kadmind</command> h&aacute;l&oacute;zati
	szolg&aacute;ltat&aacute;st haszn&aacute;lja, hanem
	k&ouml;zvetlen&uuml;l az adatb&aacute;zis
	&aacute;llom&aacute;nyait m&oacute;dos&iacute;tsa.  Ezzel
	oldhat&oacute; meg az adatb&aacute;zis kezdeti
	l&eacute;trehoz&aacute;s&aacute;nak probl&eacute;m&aacute;ja.
	Miut&aacute;n megkaptuk a <command>kadmin</command>
	parancssor&aacute;t, az &ouml;vezet&uuml;nkh&ouml;z
	tartoz&oacute; adatb&aacute;zis
	inicializ&aacute;l&aacute;s&aacute;hoz adjuk ki az
	<command>init</command> parancsot.</para>

      <para>V&eacute;g&uuml;l, m&eacute;g mindig a
	<command>kadmin</command> parancssor&aacute;t haszn&aacute;lva,
	az <command>add</command> paranccsal hozzuk l&eacute;tre az
	els&#245; szerepl&#245;nket.  Egyel&#245;re &eacute;rj&uuml;k be
	az alap&eacute;rtelmezett &eacute;rt&eacute;kekkel, a
	<command>modify</command> paranccsal k&eacute;s&#245;bb
	&uacute;gyis meg tudjuk v&aacute;ltoztatni ezeket.
	Hozz&aacute;tessz&uuml;k, hogy itt a <command>?</command>
	parancs seg&iacute;ts&eacute;g&eacute;vel b&aacute;rmikor
	lek&eacute;rhetj&uuml;k az opci&oacute;k
	ismertet&eacute;s&eacute;t.</para>

      <para>P&eacute;lda egy adatb&aacute;zis
	l&eacute;trehoz&aacute;s&aacute;ra:</para>

      <screen>&prompt.root; <userinput>kstash</userinput>
Master key: <userinput>xxxxxxxx</userinput>
Verifying password - Master key: <userinput>xxxxxxxx</userinput>

&prompt.root; <userinput>kadmin -l</userinput>
kadmin> <userinput>init EXAMPLE.ORG</userinput>
Realm max ticket life [unlimited]:
kadmin> <userinput>add tillman</userinput>
Max ticket life [unlimited]:
Max renewable life [unlimited]:
Attributes []:
Password: <userinput>xxxxxxxx</userinput>
Verifying password - Password: <userinput>xxxxxxxx</userinput></screen>

      <para>Most m&aacute;r ideje elind&iacute;tani a
	<acronym>KDC</acronym> szolg&aacute;ltat&aacute;sait.  Ezeket az
	<command>/etc/rc.d/kerberos start</command> &eacute;s
	<command>/etc/rc.d/kadmind start</command> parancsok
	kiad&aacute;s&aacute;val tudjuk felhozni.  Megjegyezz&uuml;k,
	hogy most m&eacute;g semmilyen kerberiz&aacute;lt d&eacute;mont
	nem kell elind&iacute;tanunk.  Ellenben igyekezz&uuml;nk
	ellen&#245;rizni a <acronym>KDC</acronym>
	m&#251;k&ouml;d&#245;k&eacute;pess&eacute;g&eacute;t azzal, hogy
	<acronym>KDC</acronym> parancssor&aacute;b&oacute;l
	k&eacute;r&uuml;nk egy jegyet a frissen hozz&aacute;adott
	szerepl&#245;nknek (felhaszn&aacute;l&oacute;nknak) &eacute;s
	kilist&aacute;zzuk:</para>

      <screen>&prompt.user; <userinput>kinit <replaceable>tillman</replaceable></userinput>
tillman@EXAMPLE.ORG's Password:

&prompt.user; <userinput>klist</userinput>
Credentials cache: FILE:<filename>/tmp/krb5cc_500</filename>
	Principal: tillman@EXAMPLE.ORG

  Issued           Expires          Principal
Aug 27 15:37:58  Aug 28 01:37:58  krbtgt/EXAMPLE.ORG@EXAMPLE.ORG</screen>

      <para>Miut&aacute;n v&eacute;gezt&uuml;nk, nyugodtan
	t&ouml;r&ouml;lhetj&uuml;k a jegyet:</para>

      <screen>&prompt.user; <userinput>kdestroy</userinput></screen>

    </sect2>

    <sect2>
      <title>Szerverek kerberiz&aacute;l&aacute;sa a Heimdal
	haszn&aacute;lat&aacute;val</title>

      <indexterm>
	<primary>Kerberos5</primary>
	<secondary>szolg&aacute;ltat&aacute;sok
	  kerberiz&aacute;l&aacute;sa</secondary>
      </indexterm>

      <para>Ehhez el&#245;sz&ouml;r is sz&uuml;ks&eacute;g&uuml;nk lesz
	a <application>Kerberos</application>
	konfigur&aacute;ci&oacute;s &aacute;llom&aacute;ny&aacute;nak,
	az <filename>/etc/krb5.conf</filename> m&aacute;solat&aacute;ra.
	Ezt &uacute;gy tudjuk megtenni, ha egyszer&#251;en
	&aacute;tm&aacute;soljuk a kulcseloszt&oacute;r&oacute;l az
	egyik kliensre valamilyen megb&iacute;zhat&oacute; m&oacute;don
	(vagy az &man.scp.1; programhoz hasonl&oacute;
	h&aacute;l&oacute;zati seg&eacute;dprogramok, vagy
	p&eacute;ld&aacute;ul fizikailag egy floppy lemez
	haszn&aacute;lat&aacute;val).</para>

      <para>Ezut&aacute;n sz&uuml;ks&eacute;g&uuml;nk lesz egy
	<filename>/etc/krb5.keytab</filename> nev&#251;
	&aacute;llom&aacute;nyra.  Ez az alapvet&#245;
	k&uuml;l&ouml;nbs&eacute;g a kerberiz&aacute;lt d&eacute;monokat
	felk&iacute;n&aacute;l&oacute; szerver &eacute;s egy
	munka&aacute;llom&aacute;s k&ouml;zt &mdash; a szervernek
	rendelkeznie kell egy <filename>keytab</filename>
	&aacute;llom&aacute;nnyal.  Ez az &aacute;llom&aacute;ny
	tartalmazza a szerver kulcs&aacute;t, amivel &iacute;gy a
	kulcseloszt&oacute;val k&ouml;lcs&ouml;n&ouml;sen
	azonos&iacute;tani tudj&aacute;k egym&aacute;st.  Ezt a
	szerverre biztons&aacute;gosan kell eljuttatnunk, mivel ennek
	napvil&aacute;gra ker&uuml;l&eacute;s&eacute;vel a szerver
	v&eacute;delme komoly vesz&eacute;lybe ker&uuml;l.
	Teh&aacute;t, ha egy titkos&iacute;t&aacute;s
	n&eacute;lk&uuml;li csatorn&aacute;n, p&eacute;ld&aacute;ul
	<acronym>FTP</acronym>-n kereszt&uuml;l vissz&uuml;k &aacute;t,
	akkor kifejezetten rossz &ouml;tlet.</para>

      <para>A szerverre &aacute;ltal&aacute;ban a
	<command>kadmin</command> program haszn&aacute;lat&aacute;val
	&eacute;rdemes &aacute;tvinni a <filename>keytab</filename>
	&aacute;llom&aacute;nyt.  Ez az&eacute;rt is hasznos, mert ehhez
	a <command>kadmin</command> seg&iacute;ts&eacute;g&eacute;vel
	l&eacute;tre kell hoznunk a befogad&oacute; szerepl&#245;t is (a
	kulcseloszt&oacute; a <filename>krb5.keytab</filename>
	&aacute;llom&aacute;ny v&eacute;g&eacute;n).</para>

      <para>Vegy&uuml;k &eacute;szre, hogy m&aacute;r kaptunk egy jegyet
	&eacute;s ezzel a jeggyel jogosultaknak kell lenn&uuml;nk a
	<filename>kadmind.acl</filename> &aacute;llom&aacute;ny
	<command>kadmin</command> fel&uuml;let
	haszn&aacute;lat&aacute;ra.  A hozz&aacute;f&eacute;r&eacute;st
	vez&eacute;rl&#245; list&aacute;k (ACL-ek)
	tervez&eacute;s&eacute;vel kapcsolatban olvassuk el Heimdal info
	oldal&aacute;n tal&aacute;lhat&oacute; <quote>Remote
	administration</quote> c&iacute;m&#251; szakaszt (<command>info
	heimdal</command>).  Amennyiben nem k&iacute;v&aacute;njuk
	enged&eacute;lyezni a <command>kadmin</command> t&aacute;voli
	el&eacute;r&eacute;s&eacute;t, egyszer&#251;en csak
	csatlakozzunk valamilyen biztons&aacute;gos m&oacute;don (helyi
	konzolon, &man.ssh.1; vagy egy kerberiz&aacute;lt &man.telnet.1;
	haszn&aacute;lat&aacute;val) a kulcseloszt&oacute;hoz, &eacute;s
	a <command>kadmin -l</command> paranccsal v&eacute;gezz&uuml;k
	el helyben az adminisztr&aacute;ci&oacute;t.</para>

      <para>Miut&aacute;n telep&iacute;tett&uuml;k az
	<filename>/etc/krb5.conf</filename> &aacute;llom&aacute;nyt, a
	<application>Kerberos</application> szerverr&#245;l el tudjuk
	&eacute;rni a <command>kadmin</command> fel&uuml;let&eacute;t.
	Az <command>add --random-key</command> paranccsal most
	m&aacute;r hozz&aacute;adhatjuk a szerver befogad&oacute;
	szerepl&#245;j&eacute;t &eacute;s az <command>ext</command>
	paranccsal ki tudjuk vonni a szerver befogad&oacute;
	szerepl&#245;j&eacute;t a saj&aacute;t keytab
	&aacute;llom&aacute;ny&aacute;b&oacute;l.
	P&eacute;ld&aacute;ul:</para>

      <screen>&prompt.root; <userinput>kadmin</userinput>
kadmin><userinput> add --random-key host/myserver.example.org</userinput>
Max ticket life [unlimited]:
Max renewable life [unlimited]:
Attributes []:
kadmin><userinput> ext host/myserver.example.org</userinput>
kadmin><userinput> exit</userinput></screen>

      <para>Itt jegyezn&eacute;nk meg, hogy az <command>ext</command>
	parancs (az <quote>extract</quote> r&ouml;vd&iacute;t&eacute;se)
	a kivont kulcsot alap&eacute;rtelmez&eacute;s szerint az
	<filename>/etc/krb5.keytab</filename> &aacute;llom&aacute;nyba
	menti ki.</para>

      <para>Ha a kulcseloszt&oacute;n nem fut a
	<command>kadmind</command> szolg&aacute;ltat&aacute;s
	(val&oacute;sz&iacute;n&#251;leg biztons&aacute;gi
	okokb&oacute;l) &eacute;s ez&eacute;rt t&aacute;volr&oacute;l
	nem tudjuk el&eacute;rni a <command>kadmin</command>
	fel&uuml;let&eacute;t, akkor &iacute;gy tudjuk
	k&ouml;zvetlen&uuml;l hozz&aacute;adni a befogad&oacute;
	szerepl&#245;t (<username>host/myserver.EXAMPLE.ORG</username>),
	majd kivonatolni azt egy ideiglenes &aacute;llom&aacute;nyba
	(elker&uuml;lve az <filename>/etc/krb5.keytab</filename>
	fel&uuml;l&iacute;r&aacute;s&aacute;t):</para>

      <screen>&prompt.root; <userinput>kadmin</userinput>
kadmin><userinput> ext --keytab=/tmp/example.keytab host/myserver.example.org</userinput>
kadmin><userinput> exit</userinput></screen>

      <para>Ezut&aacute;n valamilyen biztons&aacute;gos eszk&ouml;zzel
	(p&eacute;ld&aacute;ul <command>scp</command> vagy floppy
	haszn&aacute;lat&aacute;val) &aacute;t tudjuk m&aacute;solni
	keytab &aacute;llom&aacute;nyt a szerverre.  A
	kulcseloszt&oacute;n lev&#245; keytab
	fel&uuml;l&iacute;r&aacute;s&aacute;t elker&uuml;lend&#245;, ne
	feledkezz&uuml;nk el egy megfelel&#245; n&eacute;v
	megad&aacute;s&aacute;r&oacute;l sem.</para>

      <para>Ezen a ponton m&aacute;r a szerver k&eacute;pes felvenni a
	kapcsolatot a kulcseloszt&oacute;val (a
	<filename>krb5.conf</filename> &aacute;llom&aacute;ny miatt)
	&eacute;s bizony&iacute;tani a
	szem&eacute;lyazonoss&aacute;g&aacute;t (a
	<filename>krb5.keytab</filename> &aacute;llom&aacute;ny miatt).
	&Iacute;gy teh&aacute;t k&eacute;szen &aacute;llunk a
	szolg&aacute;ltat&aacute;sok
	kerberiz&aacute;l&aacute;s&aacute;ra.  Ebben a
	p&eacute;ld&aacute;ban most a <command>telnet</command>
	szolg&aacute;ltat&aacute;st vessz&uuml;k c&eacute;lba
	&uacute;gy, hogy el&#245;sz&ouml;r az
	<filename>/etc/inetd.conf</filename> &aacute;llom&aacute;nyba
	berakjuk az al&aacute;bbi sort, majd &uacute;jraind&iacute;tjuk
	az &man.inetd.8; szolg&aacute;ltat&aacute;st az
	<command>/etc/rc.d/inetd restart</command> paranccsal:</para>

      <programlisting>telnet    stream  tcp     nowait  root    /usr/libexec/telnetd  telnetd -a user</programlisting>

      <para>Itt az a legfontosabb, hogy az <command>-a</command> (mint
	authentication, azaz hiteles&iacute;t&eacute;s)
	param&eacute;tert a <quote>user</quote>
	be&aacute;ll&iacute;t&aacute;ssal adjuk meg.  A &man.telnetd.8;
	man oldal&aacute;n olvashatunk ennek pontos
	r&eacute;szleteir&#245;l.</para>

    </sect2>

    <sect2>
      <title>Kliensek kerberiz&aacute;l&aacute;sa a Heimdal
	haszn&aacute;lat&aacute;val</title>

      <indexterm>
	<primary>Kerberos5</primary>
	<secondary>kliensek be&aacute;ll&iacute;t&aacute;sa</secondary>
      </indexterm>

      <para>A kliensek be&aacute;ll&iacute;t&aacute;sa szinte majdnem
	gyerekj&aacute;t&eacute;k.  A
	<application>Kerberos</application>
	be&aacute;ll&iacute;t&aacute;s&aacute;hoz egyed&uuml;l az
	<filename>/etc/krb5.conf</filename> &aacute;llom&aacute;nyra
	lesz sz&uuml;ks&eacute;g&uuml;nk.  Valamilyen biztons&aacute;gos
	eszk&ouml;zzel m&aacute;soljuk &aacute;t a
	kulcseloszt&oacute;r&oacute;l a kliensre.</para>

      <para>&Uacute;gy tudjuk letesztelni klienst, ha
	megpr&oacute;b&aacute;ljuk r&oacute;la kiadni a
	<command>kinit</command>, <command>klist</command> &eacute;s
	<command>kdestroy</command> parancsokat a fentebb
	l&eacute;trehozott szerepl&#245; jegy&eacute;nek
	megszerz&eacute;s&eacute;hez,
	lek&eacute;rdez&eacute;s&eacute;hez &eacute;s
	megsemmis&iacute;t&eacute;s&eacute;hez.  A
	<application>Kerberos</application> haszn&aacute;lat&aacute;val
	megpr&oacute;b&aacute;lkozhatunk csatlakozni valamelyik
	kerberiz&aacute;lt szerverre is, ha viszont ez nem
	m&#251;k&ouml;dik m&eacute;g egy jegy megszerz&eacute;se
	ut&aacute;n sem, akkor a gond t&ouml;bbnyire a szerverrel van,
	nem pedig a klienssel vagy a kulcseloszt&oacute;val.</para>

      <para>Amikor egy <command>telnet</command> vagy egy hozz&aacute;
	hasonl&oacute; alkalmaz&aacute;st tesztel&uuml;nk, egy
	csomaglehallgat&oacute; (mint amilyen p&eacute;ld&aacute;ul a
	&man.tcpdump.1;) elind&iacute;t&aacute;s&aacute;val
	gy&#245;z&ouml;dj&uuml;nk meg r&oacute;la, hogy a jelszavak
	ilyenkor titkos&iacute;tva mennek &aacute;t.
	Pr&oacute;b&aacute;ljuk meg titkos&iacute;tani a teljes
	kommunik&aacute;ci&oacute;t a <command>telnet</command>
	<option>-x</option> param&eacute;ter&eacute;vel
	(hasonl&oacute;an az <command>ssh</command> parancshoz).</para>

      <para>Alapb&oacute;l m&eacute;g sz&aacute;mos m&aacute;s
	kieg&eacute;sz&iacute;t&#245;
	<application>Kerberos</application> kliensalkalmaz&aacute;s is
	telep&iacute;t&#245;dik.  Ezeken &eacute;rezhet&#245; meg
	val&oacute;j&aacute;ban az alaprendszerhez tartoz&oacute;
	Heimdal v&aacute;ltozat <quote>minimalit&aacute;sa</quote>:
	ebben a <command>telnet</command> az egyed&uuml;li
	kerberiz&aacute;lt szolg&aacute;ltat&aacute;s.</para>

      <para>A Heimdal port igyekszik p&oacute;tolni a
	hi&aacute;nyz&oacute; klienseket a kerberiz&aacute;lt
	<command>ftp</command>, <command>rsh</command>,
	<command>rcp</command>, <command>rlogin</command> &eacute;s
	n&eacute;h&aacute;ny kev&eacute;s&eacute;b ismert program
	telep&iacute;t&eacute;s&eacute;vel.  Az <acronym>MIT</acronym>
	v&aacute;ltozat portja szint&eacute;n tartalmazza a
	<application>Kerberos</application> kliensek teljes
	kell&eacute;kt&aacute;r&aacute;t.</para>

    </sect2>

    <sect2>
      <title>A felhaszn&aacute;l&oacute;k konfigur&aacute;ci&oacute;s
	&aacute;llom&aacute;nyai: a <filename>.k5login</filename>
	&eacute;s a <filename>.k5users</filename></title>

      <indexterm><primary><filename>.k5login</filename></primary></indexterm>
      <indexterm><primary><filename>.k5users</filename></primary></indexterm>

      <para>&Aacute;ltal&aacute;ban az &ouml;vezetben
	tal&aacute;lhat&oacute; felhaszn&aacute;l&oacute;k
	mindegyik&eacute;hez tartozik egy
	<application>Kerberos</application>-szerepl&#245; (mint
	p&eacute;ld&aacute;ul a
	<username>tillman@EXAMPLE.ORG</username>), ami a
	felhaszn&aacute;l&oacute; helyi
	hozz&aacute;f&eacute;r&eacute;s&eacute;re mutat (mint
	p&eacute;ld&aacute;ul a <username>tillman</username> nev&#251;
	helyi hozz&aacute;f&eacute;r&eacute;s).  A
	<command>telnet</command> &eacute;s a hozz&aacute;
	hasonl&oacute; kliensalkalmaz&aacute;sok &aacute;ltal&aacute;ban
	nem ig&eacute;nyelnek felhaszn&aacute;l&oacute;t vagy
	szerepl&#245;t.</para>

      <para>El&#245;fordulhat azonban, hogy valaki olyan szeretn&eacute;
	el&eacute;rni egy helyi felhaszn&aacute;l&oacute;
	hozz&aacute;f&eacute;r&eacute;s&eacute;t, aki nem rendelkezik a
	hozz&aacute;tartoz&oacute;
	<application>Kerberos</application>-szerepl&#245;vel.
	P&eacute;ld&aacute;ul a <username>tillman@EXAMPLE.ORG</username>
	nev&#251; felhaszn&aacute;l&oacute; el szeretn&eacute;
	&eacute;rni a helyi sz&aacute;m&iacute;t&oacute;g&eacute;pen
	lev&#245; <username>webdevelopers</username>
	hozz&aacute;f&eacute;r&eacute;st.  M&aacute;s szerepl&#245;k is
	el&eacute;rhetik a helyi
	hozz&aacute;f&eacute;r&eacute;seket.</para>

      <para>A probl&eacute;ma megold&aacute;s&aacute;hoz a
	felhaszn&aacute;l&oacute;k k&ouml;nyvt&aacute;r&aacute;ban
	tal&aacute;lhat&oacute; <filename>.k5login</filename> &eacute;s
	a <filename>.k5users</filename> &aacute;llom&aacute;nyok
	haszn&aacute;lhat&oacute;ak a <filename>.host</filename>
	&eacute;s <filename>.rhosts</filename> &aacute;llom&aacute;nyok
	kombin&aacute;ci&oacute;j&aacute;hoz hasonl&oacute;an.
	P&eacute;ld&aacute;ul a <filename>.k5login</filename> &iacute;gy
	n&eacute;z ki:</para>

      <screen>tillman@example.org
jdoe@example.org</screen>

      <para>Ezt a <username>webdevelopers</username> nev&#251; helyi
	felhaszn&aacute;l&oacute; k&ouml;nyvt&aacute;r&aacute;ban kell
	elhelyezn&uuml;nk, &iacute;gy a felsorolt szerepl&#245;t
	megosztott jelsz&oacute; haszn&aacute;lata n&eacute;lk&uuml;l
	k&eacute;pesek el&eacute;rni a
	hozz&aacute;f&eacute;r&eacute;st.</para>

      <para>Az eml&iacute;tett parancsok man oldal&aacute;nak
	elolvas&aacute;sa aj&aacute;nlott.  Megjegyezz&uuml;k, hogy a
	<command>ksu</command> man oldal foglalkozik a
	<filename>.k5users</filename> &aacute;llom&aacute;nnyal.</para>

    </sect2>

    <sect2>
      <title>Tippek, tr&uuml;kk&ouml;k a
	<application>Kerberos</application>
	haszn&aacute;lat&aacute;r&oacute;l &eacute;s
	hibaelh&aacute;r&iacute;t&aacute;s</title>

      <indexterm>
	<primary>Kerberos5</primary>
	<secondary>hibaelh&aacute;r&iacute;t&aacute;s</secondary>
      </indexterm>

      <itemizedlist>
	<listitem>
	  <para>Ak&aacute;r a <application>Kerberos</application>
	    Heimdal vagy az <acronym>MIT</acronym>
	    v&aacute;ltozat&aacute;t haszn&aacute;ljuk, ne
	    felejts&uuml;k &uacute;gy be&aacute;ll&iacute;tani a
	    <envar>PATH</envar> k&ouml;rnyezeti v&aacute;ltoz&oacute;ban
	    felsorolt el&eacute;r&eacute;si utakat, hogy a
	    kliensalkalmaz&aacute;sok kerberiz&aacute;lt
	    v&aacute;ltozatai a rendszerben haszn&aacute;latos
	    verzi&oacute;k el&eacute; ker&uuml;ljenek.</para>
	</listitem>

	<listitem>
	  <para>Az &ouml;vezetben minden
	    sz&aacute;m&iacute;t&oacute;g&eacute;p &oacute;r&aacute;ja
	    ugyan&uacute;gy j&aacute;r?  Ha nem, akkor a
	    hiteles&iacute;t&eacute;s cs&#245;d&ouml;t mondhat.  A <xref
	    linkend="network-ntp">b&oacute;l tudhatjuk meg hogyan
	    szinkroniz&aacute;ljunk &oacute;r&aacute;kat az
	    <acronym>NTP</acronym>
	    seg&iacute;ts&eacute;g&eacute;vel.</para>
	</listitem>

	<listitem>
	  <para>Az <acronym>MIT</acronym> &eacute;s a Heimdal
	    verzi&oacute;k a <command>kadmin</command>
	    kiv&eacute;tel&eacute;vel remek&uuml;l megvannak
	    egym&aacute;ssal, mivel az &aacute;ltala haszn&aacute;lt
	    protokollt m&eacute;g nem
	    szabv&aacute;nyos&iacute;tott&aacute;k.</para>
	</listitem>

	<listitem>
	  <para>Ha megv&aacute;ltoztatjuk a g&eacute;p&uuml;nk
	    h&aacute;l&oacute;zati nev&eacute;t, akkor a ugyan&iacute;gy
	    a <username>host/</username> szerepl&#245;nket is meg kell
	    v&aacute;ltoztatni &eacute;s friss&iacute;teni a keytab
	    &aacute;llom&aacute;nyunkat.  Ez olyan speci&aacute;lis
	    keytab bejegyz&eacute;sekre is vonatkozik, mint
	    p&eacute;ld&aacute;ul az Apache <filename
	    role="package">www/mod_auth_kerb</filename>
	    modulj&aacute;hoz tartoz&oacute; <username>www/</username>
	    szerepl&#245;.</para>
	</listitem>

	<listitem>
	  <para>Az &ouml;vezet&uuml;nkben lev&#245; &ouml;sszes
	    sz&aacute;m&iacute;t&oacute;g&eacute;pnek (mind a k&eacute;t
	    ir&aacute;nyba) feloldhat&oacute; <acronym>DNS</acronym>
	    n&eacute;vvel kell rendelkeznie (vagy legal&aacute;bb egy
	    <filename>/etc/hosts</filename> &aacute;llom&aacute;nnyal).
	    Erre a CNAME rekord megfelel&#245;, de az A &eacute;s PTR
	    rekordoknak mindenk&eacute;ppen rendben kell lenni&uuml;k.
	    Az ilyenkor keletkez&#245; hiba&uuml;zenet nem &eacute;ppen
	    fogja meg a l&eacute;nyeget: <errorname>Kerberos5 refuses
	    authentication because Read req failed: Key table entry not
	    found</errorname>.</para>
	</listitem>

	<listitem>
	  <para>A kulcseloszt&oacute; sz&aacute;m&aacute;ra
	    kliensk&eacute;nt viselked&#245; bizonyos
	    oper&aacute;ci&oacute;s rendszerek nem
	    &aacute;ll&iacute;tj&aacute;k be megfelel&#245;en a
	    <command>ksu</command> enged&eacute;lyeit, ez&eacute;rt nem
	    lehet <username>root</username> jogokkal futtatni.
	    Ez&eacute;rt a <command>ksu</command> parancs nem fog
	    m&#251;k&ouml;dni, ami alapvet&#245;en nem egy rossz
	    &ouml;tlet, de ideges&iacute;t&#245;.  Ez nem a
	    kulcseloszt&oacute; hib&aacute;ja.</para>
	</listitem>

	<listitem>
	  <para>Ha a <application>Kerberos</application>
	    <acronym>MIT</acronym> v&aacute;ltozat&aacute;t
	    haszn&aacute;ljuk &eacute;s a meg akarjuk
	    hosszabb&iacute;tani a szerepl&#245;knek kiadott jegyek
	    &eacute;lettartam&aacute;t az alap&eacute;rtelmezett
	    t&iacute;z &oacute;r&aacute;r&oacute;l, akkor a
	    <command>kadmin</command> fel&uuml;let&eacute;n a
	    <command>modify_principal</command> paranccsal tudjuk
	    megv&aacute;ltoztatni mind a k&eacute;rd&eacute;ses
	    szerepl&#245;, mind pedig a <username>krbtgt</username>
	    jegyeinek &eacute;lettartam&aacute;nak maximum&aacute;t.
	    Ezt k&ouml;vet&#245;en a szerepl&#245; a
	    <command>kinit</command> <option>-l</option>
	    opci&oacute;j&aacute;val tud egy nagyobb
	    &eacute;lettartammal rendelkez&#245; jegyet
	    k&eacute;rni.</para>
	</listitem>

	<listitem>
	  <note>
	    <para>Amikor egy kulcseloszt&oacute;val kapcsolatos
	      hib&aacute;t pr&oacute;b&aacute;lunk felder&iacute;teni a
	      csomagok lehallgat&aacute;s&aacute;val, &eacute;s a
	      munka&aacute;llom&aacute;sunkr&oacute;l kiadjuk a
	      <command>kinit</command> parancsot, akkor arra
	      lehet&uuml;nk figyelmesek, hogy a <acronym>TGT</acronym>
	      m&aacute;r egyb&#245;l a <command>kinit</command>
	      ind&iacute;t&aacute;sakor &aacute;tk&uuml;ld&eacute;sre
	      ker&uuml;l &mdash; m&eacute;g miel&#245;tt
	      egy&aacute;ltal&aacute;n megadtuk volna a jelszavunkat!
	      Ezt azzal lehet magyar&aacute;zni, hogy a
	      <application>Kerberos</application> szerver
	      b&aacute;rmilyen hiteles&iacute;tetlen
	      k&eacute;r&eacute;sre elk&uuml;ld egy
	      <acronym>TGT</acronym>-t (Jegyad&oacute; jegy, azaz Ticket
	      Granting Ticket).  Azonban mindegyik ilyen
	      <acronym>TGT</acronym> a felhaszn&aacute;l&oacute;
	      jelszav&aacute;b&oacute;l sz&aacute;rmaztatott kulccsal
	      titkos&iacute;t&oacute;dik.  Ez&eacute;rt amit a
	      felhaszn&aacute;l&oacute; jelsz&oacute;k&eacute;nt megad,
	      nem megy el a kulcseloszt&oacute;nak, hanem vele a
	      <command>kinit</command> a m&aacute;r megkapott
	      <acronym>TGT</acronym>-t k&oacute;dolja ki.  Amennyiben a
	      visszak&oacute;dol&aacute;s egy &eacute;rv&eacute;nyes
	      id&#245;b&eacute;lyeggel rendelkez&#245;,
	      haszn&aacute;lhat&oacute; jegyet eredm&eacute;nyez, akkor
	      a felhaszn&aacute;l&oacute; &eacute;rv&eacute;nyes
	      <application>Kerberos</application>
	      hiteles&iacute;t&eacute;st szerez.  Ez a
	      hiteles&iacute;t&eacute;s mag&aacute;ban foglal egy
	      kulcsot, amellyel a k&eacute;s&#245;bbiekben a
	      <application>Kerberos</application> szerverekkel tudjuk
	      felvenni biztons&aacute;gos m&oacute;don a kapcsolatot,
	      &eacute;s rajta k&iacute;v&uuml;l egy &uacute;jabb
	      jegyad&oacute; jegyet, amelyet a
	      <application>Kerberos</application> szerver a saj&aacute;t
	      kulcs&aacute;val titkos&iacute;tott.  A
	      titkos&iacute;t&aacute;s m&aacute;sodik vonala a
	      felhaszn&aacute;l&oacute; sz&aacute;m&aacute;ra
	      ismeretlen, de seg&iacute;ts&eacute;g&eacute;vel a
	      <application>Kerberos</application> szerer k&eacute;pes
	      ellen&#245;rizni az egyes jegyad&oacute; jegyek
	      hiteless&eacute;g&eacute;t.</para>
	  </note>
	</listitem>

	<listitem>
	  <para>Ha a jegyeket hosszabb (p&eacute;ld&aacute;ul egyhetes)
	    &eacute;lettartammal akarjuk haszn&aacute;lni &eacute;s a
	    jegyeket t&aacute;rol&oacute; g&eacute;phez
	    <application>OpenSSH</application>
	    seg&iacute;ts&eacute;g&eacute;vel csatlakozunk, akkor
	    mindenk&eacute;ppen ellen&#245;rizz&uuml;k, hogy az
	    <filename>sshd_config</filename> &aacute;llom&aacute;nyban a
	    <application>Kerberos</application>
	    <option>TicketCleanup</option>
	    be&aacute;ll&iacute;t&aacute;s&aacute;nak
	    &eacute;rt&eacute;ke <literal>no</literal>,
	    m&aacute;sk&uuml;l&ouml;nben a kijelentkez&eacute;s
	    ut&aacute;n automatikusan t&ouml;rl&#245;dnek a
	    jegyeink.</para>
	</listitem>

	<listitem>
	  <para>Ne hagyjuk figyelmen k&iacute;v&uuml;l azt sem, hogy a
	    befogad&oacute; szerepl&#245;k is rendelkezhetnek nagyobb
	    &eacute;lettartam&uacute; jegyekkel.  Ha a
	    felhaszn&aacute;l&oacute;nkhoz tartoz&oacute; szerepl&#245;
	    jegye p&eacute;ld&aacute;ul egy h&eacute;t alatt
	    &eacute;v&uuml;l el, de a
	    sz&aacute;m&iacute;t&oacute;g&eacute;p, amire
	    bejelentkez&uuml;k, csup&aacute;n kilenc &oacute;r&aacute;ig
	    tartja &eacute;letben ezeket, akkor a jegyeket
	    t&aacute;rol&oacute; gyors&iacute;t&oacute;t&aacute;runkban
	    hamarabb el&eacute;v&uuml;l a hozz&aacute;tartoz&oacute;
	    jegy, ami miatt pedig hib&aacute;k keletkeznek.</para>
	</listitem>

	<listitem>
	  <para>Ha a rossz jelszavak haszn&aacute;lata ellen
	    be&aacute;ll&iacute;tjuk a <filename>krb5.dic</filename>
	    &aacute;llom&aacute;nyt (err&#245;l a
	    <command>kadmind</command> man oldal&aacute;n
	    tal&aacute;lunk egy r&ouml;vid le&iacute;r&aacute;st), akkor
	    nem szabad elfelejteni, hogy ez csak olyan szerepl&#245;kre
	    vonatkozik, akiknek a jelszav&aacute;ra is
	    &aacute;ll&iacute;tottunk be szab&aacute;lyoz&aacute;sokat.
	    A <filename>krb5.dict</filename> &aacute;llom&aacute;nyok
	    fel&eacute;p&iacute;t&eacute;si nem bonyolult: minden sorban
	    egyetlen karakterl&aacute;nc szerepel.  &Eacute;rdemes lehet
	    p&eacute;ld&aacute;ul l&eacute;trehozni ezen a n&eacute;ven
	    egy szimbolikus linket a
	    <filename>/usr/share/dict/words</filename>
	    &aacute;llom&aacute;nyra.</para>
	</listitem>
      </itemizedlist>

    </sect2>

    <sect2>
      <title>Elt&eacute;r&eacute;sek az <acronym>MIT</acronym>
	portt&oacute;l</title>

      <para>A Heimdal &eacute;s az <acronym>MIT</acronym>
	v&aacute;ltozatok k&ouml;zti egyik legnagyobb
	elt&eacute;r&eacute;s a <command>kadmin</command> programmal
	kapcsolatban van, ami elt&eacute;r&#245; (de
	egy&eacute;bk&eacute;nt ekivalens) parancsk&eacute;szlettel
	rendelkezik &eacute;s m&aacute;s protokollt haszn&aacute;l.
	Ennek komoly k&ouml;vetkezm&eacute;nye, hogy ha az
	<acronym>MIT</acronym>-f&eacute;le kulcseloszt&oacute;t
	haszn&aacute;ljuk, akkor azt a Heimdal <command>kadmin</command>
	fel&uuml;let&eacute;vel nem tudjuk t&aacute;volr&oacute;l
	adminisztr&aacute;lni (&eacute;s vica versa).</para>

      <para>A kliensalkalmaz&aacute;sok param&eacute;terez&eacute;se is
	elt&eacute;rhet ugyanazon feladatokn&aacute;l.  Ez&eacute;rt
	vel&uuml;k kapcsolatban az <acronym>MIT</acronym>
	<application>Kerberos</application> honlapja (<ulink
	url="http://web.mit.edu/Kerberos/www/"></ulink>) a
	m&eacute;rvad&oacute;.  Vigy&aacute;zzunk az
	el&eacute;r&eacute;si utakkal: az <acronym>MIT</acronym> port
	mag&aacute;t alap&eacute;rtelmez&eacute;s szerint a
	<filename>/usr/local</filename> k&ouml;nyvt&aacute;rba
	telep&iacute;ti, ez&eacute;rt az &aacute;ltaluk kiv&aacute;ltani
	k&iacute;v&aacute;nt <quote>norm&aacute;lis</quote>
	rendszerprogramokat esetleg hamarabb tal&aacute;lja meg a
	rendszer, ha nem j&oacute;l &aacute;ll&iacute;tottuk be a
	<envar>PATH</envar> k&ouml;rnyezeti
	v&aacute;ltoz&oacute;nkat.</para>

      <note>
	<para>Ha nem &eacute;rtj&uuml;k, hogy mi&eacute;rt
	  m&#251;k&ouml;dnek olyan furcs&aacute;n a
	  <command>telnetd</command> &eacute;s a
	  <command>klogind</command> &aacute;ltal kezelt
	  bejelentkez&eacute;sek, akkor olvassuk el a &os; <filename
	  role="package">security/krb5</filename> portj&aacute;val
	  telep&uuml;l&#245; <acronym>MIT</acronym> v&aacute;ltozat
	  <filename>/usr/local/share/doc/krb5/README.FreeBSD</filename>
	  &aacute;llom&aacute;nyt (angolul).  Az a legfontosabb, hogy a
	  <errorname>incorrect permissions on cache file</errorname>
	  hiba elt&uuml;ntet&eacute;s&eacute;hez a
	  <command>login.krb5</command> bin&aacute;rist kell
	  haszn&aacute;lnunk, &iacute;gy a tov&aacute;bb&iacute;tott
	  jogosults&aacute;goknak megfelel&#245;en &aacute;t tudja
	  &aacute;ll&iacute;tani a tulajdonost.</para>
      </note>

      <para>Az <filename>rc.conf</filename> &aacute;llom&aacute;nyt is
	m&oacute;dos&iacute;tani kell a k&ouml;vetkez&#245;
	be&aacute;ll&iacute;t&aacute;s
	kialak&iacute;t&aacute;s&aacute;hoz:</para>

      <programlisting>kerberos5_server="/usr/local/sbin/krb5kdc"
kadmind5_server="/usr/local/sbin/kadmind"
kerberos5_server_enable="YES"
kadmind5_server_enable="YES"</programlisting>

      <para>Erre az&eacute;rt van sz&uuml;ks&eacute;g, mert a
	<application>Kerberos</application> <acronym>MIT</acronym>
	v&aacute;ltozata a <filename
	  class="directory">/usr/local</filename> k&ouml;nyvt&aacute;ron
	bel&uuml;lre telep&iacute;ti fel a hozz&aacute;tartoz&oacute;
	alkalmaz&aacute;sokat.</para>

    </sect2>

    <sect2>
      <title>A <application>Kerberos</application>ban tal&aacute;lt
	korl&aacute;toz&aacute;sok enyh&iacute;t&eacute;se</title>

      <indexterm>
	<primary>Kerberos5</primary>
	<secondary>hi&aacute;nyoss&aacute;gok &eacute;s
	  korl&aacute;toz&aacute;sok</secondary>
      </indexterm>

      <sect3>
	<title>A <application>Kerberos</application> a <quote>mindent
	  vagy semmit</quote> megk&ouml;zel&iacute;t&eacute;st
	  k&ouml;veti</title>

	<para>A h&aacute;l&oacute;zaton minden
	  szolg&aacute;ltat&aacute;st m&oacute;dos&iacute;tanunk kell
	  ahhoz, hogy egy&uuml;tt tudjanak m&#251;k&ouml;dni a
	  <application>Kerberos</application>szal (vagy valamilyen
	  m&aacute;s m&oacute;don v&eacute;den&uuml;nk kell ezeket a
	  t&aacute;mad&aacute;sok ellen), k&uuml;l&ouml;nben a
	  felhaszn&aacute;l&oacute;k jogait el lehet lopni vagy
	  &uacute;jra fel lehet haszn&aacute;lni.  Erre j&oacute;
	  p&eacute;lda lehet az &ouml;sszes t&aacute;voli parancssoros
	  el&eacute;r&eacute;s (p&eacute;ld&aacute;ul az
	  <command>rsh</command> valamint a <command>telnet</command>)
	  kerberiz&aacute;l&aacute;sa, de a jelszavakat
	  titkos&iacute;tatlanul k&uuml;ld&#245; <acronym>POP3</acronym>
	  levelez&#245; szerver kihagy&aacute;sa.</para>

      </sect3>

      <sect3>
	<title>A <application>Kerberos</application> az
	  egyfelhaszn&aacute;l&oacute;s munka&aacute;llom&aacute;sok
	  sz&aacute;m&aacute;ra k&eacute;sz&uuml;lt</title>

	<para>T&ouml;bbfelhaszn&aacute;l&oacute;s k&ouml;rnyezetben a
	  <application>Kerberos</application> m&aacute;r nem annyira
	  biztons&aacute;gos.  Ez az&eacute;rt mondhat&oacute; el, mert
	  a jegyeket a mindenki &aacute;ltal olvashat&oacute;
	  <filename>/tmp</filename> k&ouml;nyvt&aacute;rban
	  t&aacute;rolja.  Ha az adott felhaszn&aacute;l&oacute;
	  sz&aacute;m&iacute;t&oacute;g&eacute;p&eacute;t egyszerre
	  t&ouml;bb emberrel is megosztja (teh&aacute;t
	  t&ouml;bbfelhaszn&aacute;l&oacute;s), akkor a
	  felhaszn&aacute;l&oacute; jegyeit egy m&aacute;sik
	  felhaszn&aacute;l&oacute; b&aacute;rmikor lem&aacute;solhatja
	  (ellophatja).</para>

	<para>Ezt a <option>-c</option> opci&oacute; ut&aacute;n
	  megadott &aacute;llom&aacute;nyn&eacute;vvel vagy
	  (ink&aacute;bb) a <envar>KRB5CCNAME</envar> k&ouml;rnyezeti
	  v&aacute;ltoz&oacute; megfelel&#245;
	  be&aacute;ll&iacute;t&aacute;s&aacute;val tudjuk
	  &aacute;thidalni, hab&aacute;r ezt ritk&aacute;n teszik is
	  meg.  Ha a felhaszn&aacute;l&oacute;k
	  k&ouml;nyvt&aacute;r&aacute;ban &eacute;s a megfelel&#245;
	  enged&eacute;lyekkel t&aacute;roljuk ezeket a jegyeket, akkor
	  n&eacute;mileg visszaszor&iacute;thatjuk a probl&eacute;ma
	  kock&aacute;zat&aacute;t.</para>

      </sect3>

      <sect3>
	<title>A kulcseloszt&oacute; a rendszer legsebezhet&#245;bb
	  pontja</title>

	<para>A rendszer kialak&iacute;t&aacute;s&aacute;b&oacute;l
	  fakad&oacute;an a kulcseloszt&oacute;nak legal&aacute;bb
	  annyira megb&iacute;zhat&oacute;nak kell lennie, mint a rajta
	  lev&#245; k&ouml;zponti jelsz&oacute;adatb&aacute;zisnak.  A
	  kulcseloszt&oacute;n semmilyen m&aacute;s
	  szolg&aacute;ltat&aacute;s nem futhat &eacute;s fizikailag is
	  biztons&aacute;gba kell helyezni.  A kock&aacute;zat nagy,
	  mivel a <application>Kerberos</application> az &ouml;sszes
	  jelsz&oacute;t ugyanazzal a kulcssal (a
	  <quote>mesterkulcssal</quote>) titkos&iacute;tja, amelyet a
	  kulcseloszt&oacute; egy &aacute;llom&aacute;nyban
	  t&aacute;rol.</para>

	<para>Sz&eacute;ljegyzet gyan&aacute;nt
	  hozz&aacute;tessz&uuml;k, hogy a mesterkulcs elveszt&eacute;se
	  nem annyira rossz, mint azt els&#245; gondoln&aacute;nk.  A
	  mesterkulcsot csup&aacute;n a
	  v&eacute;letlensz&aacute;m-gener&aacute;tor
	  inicializ&aacute;l&aacute;s&aacute;hoz
	  haszn&aacute;lj&aacute;k a <application>Kerberos</application>
	  adatb&aacute;zis&aacute;nak titkos&iacute;t&aacute;sakor.
	  Am&iacute;g a kulcseloszt&oacute;hoz nem tudnak
	  illet&eacute;ktelenek hozz&aacute;f&eacute;rni, addig nem
	  tudnak sokat kezdeni a mesterkulccsal.</para>

	<para>Mellesleg ha a kulcseloszt&oacute; nem
	  el&eacute;rhet&#245; (tal&aacute;n pontosan egy DoS
	  t&aacute;mad&aacute;s vagy &eacute;ppen h&aacute;l&oacute;zati
	  probl&eacute;m&aacute;k miatt), akkor a
	  hiteles&iacute;t&eacute;s nem v&eacute;gezhet&#245; el, mivel
	  &iacute;gy a hozz&aacute; sz&uuml;ks&eacute;ges
	  h&aacute;l&oacute;zati szolg&aacute;ltat&aacute;sok sem
	  haszn&aacute;lhat&oacute;ak.  Ez remek eszk&ouml;z egy DoS
	  t&aacute;mad&aacute;shoz.  Ezen t&ouml;bb (egy k&ouml;zponti
	  &eacute;s egy vagy t&ouml;bb al&aacute;rendelt)
	  kulcseloszt&oacute; telep&iacute;t&eacute;s&eacute;vel,
	  valamint a m&aacute;sodlagos vagy tartal&eacute;kk&eacute;nt
	  haszn&aacute;lt hiteles&iacute;t&eacute;si eszk&ouml;z&ouml;k
	  (a <acronym>PAM</acronym> erre t&ouml;k&eacute;letes)
	  k&ouml;r&uuml;ltekint&#245;
	  megval&oacute;s&iacute;t&aacute;s&aacute;val
	  enyh&iacute;thet&uuml;nk.</para>

      </sect3>

      <sect3>
	<title>A <application>Kerberos</application>
	  hi&aacute;nyoss&aacute;gai</title>

	<para>A <application>Kerberos</application> r&eacute;v&eacute;n
	  a felhaszn&aacute;l&oacute;k,
	  sz&aacute;m&iacute;t&oacute;g&eacute;pek &eacute;s
	  szolg&aacute;ltat&aacute;sok tudj&aacute;k egym&aacute;st
	  hiteles&iacute;teni.  Ellenben semmilyen eszk&ouml;zt nem
	  k&iacute;n&aacute;l fel a kulcseloszt&oacute;
	  hiteless&eacute;g&eacute;nek ellen&#245;rz&eacute;s&eacute;re.
	  &Iacute;gy teh&aacute;t (p&eacute;ld&aacute;ul) egy
	  elt&eacute;r&iacute;tett <command>kinit</command> k&eacute;pes
	  ellopni az &ouml;sszes felhaszn&aacute;l&oacute;i nevet
	  &eacute;s jelsz&oacute;t.  Az ilyen incidensek
	  elker&uuml;l&eacute;s&eacute;re a <filename
	  role="package">security/tripwire</filename> &eacute;s a
	  hozz&aacute; hasonl&oacute; seg&eacute;dprogramok
	  seg&iacute;ts&eacute;g&eacute;vel lehet meg&#245;rizni a
	  rendszer s&eacute;rtelens&eacute;g&eacute;t.</para>

      </sect3>
    </sect2>

    <sect2>
      <title>Er&#245;forr&aacute;sok &eacute;s tov&aacute;bbi
	 inform&aacute;ci&oacute;k</title>

      <indexterm>
	<primary>Kerberos5</primary>
	<secondary>k&uuml;ls&#245; forr&aacute;sok</secondary>
      </indexterm>

      <itemizedlist>
	<listitem>
	  <para><ulink
	  url="http://www.faqs.org/faqs/Kerberos-faq/general/preamble.html">
	    A <application>Kerberos</application> GYIK
	    (angolul)</ulink></para>
	</listitem>

	<listitem>
	  <para><ulink
	    url="http://web.mit.edu/Kerberos/www/dialogue.html">Egy
	    hiteles&iacute;t&eacute;si rendszer kidolgoz&aacute;sa:
	    p&aacute;rbesz&eacute;d n&eacute;gy sz&iacute;nben
	    (angolul)</ulink></para>
	</listitem>

	<listitem>
	  <para><ulink
	    url="http://www.ietf.org/rfc/rfc1510.txt?number=1510">RFC
	    1510: A <application>Kerberos</application>
	    h&aacute;l&oacute;zati hiteles&iacute;t&eacute;si
	    szolg&aacute;ltat&aacute;s (V5) (angolul)</ulink></para>
	</listitem>

	<listitem>
	  <para><ulink url="http://web.mit.edu/Kerberos/www/">Az
	    <acronym>MIT</acronym> <application>Kerberos</application>
	    holnapja (angolul)</ulink></para>
	</listitem>

	<listitem>
	  <para><ulink url="http://www.pdc.kth.se/heimdal/">A Heimdal
	    <application>Kerberos</application> honlapja
	    (angolul)</ulink></para>
	</listitem>
      </itemizedlist>

    </sect2>
  </sect1>

  <sect1 id="openssl">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Tom</firstname>
	  <surname>Rhodes</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>OpenSSL</title>

    <indexterm>
      <primary>biztons&aacute;g</primary>
      <secondary>OpenSSL</secondary>
    </indexterm>

    <para>A &os;-hez adott <application>OpenSSL</application> az egyik
      olyan t&eacute;nyez&#245;, amit a legt&ouml;bb
      felhaszn&aacute;l&oacute; figyelmen k&iacute;v&uuml;l hagy.  Az
      <application>OpenSSL</application> egy titkos&iacute;t&aacute;si
      r&eacute;teget ny&uacute;jt a hagyom&aacute;nyos
      kommunik&aacute;ci&oacute;s csatorna felett, &iacute;gy rengeteg
      h&aacute;l&oacute;zati alkalmaz&aacute;sba &eacute;s
      szolg&aacute;ltat&aacute;sba bele lehet sz&#245;ni.</para>

    <para>Az <application>OpenSSL</application>
      felhaszn&aacute;lhat&oacute; t&ouml;bbek k&ouml;zt a levelez&#245;
      kliensek titkos&iacute;tott hiteles&iacute;t&eacute;s&eacute;re,
      hitelk&aacute;rty&aacute;s fizet&eacute;sek weben kereszt&uuml;li
      lebonyol&iacute;t&aacute;s&aacute;ra alkalmas, &eacute;s
      m&eacute;g sok minden m&aacute;sra.  Sok port, k&ouml;zt&uuml;k a
      <filename role="package">www/apache13-ssl</filename> &eacute;s a
      <filename role="package">mail/sylpheed-claws</filename> is
      felaj&aacute;nlja az <application>OpenSSL</application>
      felhaszn&aacute;l&aacute;s&aacute;t.</para>

    <note>
      <para>A legt&ouml;bb esetben a Portgy&#251;jtem&eacute;ny
	megpr&oacute;b&aacute;lja leford&iacute;tani a <filename
	role="package">security/openssl</filename> portot, hacsak a
	<makevar>WITH_OPENSSL_BASE</makevar> v&aacute;ltoz&oacute;t
	hat&aacute;rozottan a <quote>yes</quote> &eacute;rt&eacute;kre
	nem &aacute;ll&iacute;tjuk.</para>
    </note>

    <para>A &os;-hez mell&eacute;kelt <application>OpenSSL</application>
      ismeri a Secure Sockets Layer v2/v3 (SSLv2/SSLv3) &eacute;s
      Transport Layer Security v1 (TLSv1)
      h&aacute;l&oacute;zatbiztons&aacute;gi protokollokat, &eacute;s
      &aacute;ltal&aacute;nos c&eacute;l&uacute;
      titkos&iacute;t&aacute;si k&ouml;nyvt&aacute;rk&eacute;nt is
      alkalmazhat&oacute;.</para>

    <note>
      <para>Noha az <application>OpenSSL</application> ismeri az
	<acronym>IDEA</acronym> algoritmus&aacute;t is, az Egyes&uuml;lt
	&Aacute;llamokban &eacute;rv&eacute;nyben lev&#245; szabadalmak
	miatt alap&eacute;rtelmez&eacute;s szerint nem
	enged&eacute;lyezett.  A haszn&aacute;lat&aacute;hoz el kell
	olvasni a hozz&aacute;tartoz&oacute; licencet, &eacute;s ha
	elfogadjuk a benne foglaltakat, akkor &aacute;ll&iacute;tsuk be
	a <makevar>MAKE_IDEA</makevar> v&aacute;ltoz&oacute;t a
	<filename>make.conf</filename> &aacute;llom&aacute;nyban.</para>
    </note>

    <para>Az <application>OpenSSL</application>-t legink&aacute;bb a
      szoftverek tan&uacute;s&iacute;tv&aacute;nyainak
      elk&eacute;sz&iacute;t&eacute;s&eacute;hez
      haszn&aacute;lj&aacute;k.  Ilyen
      tan&uacute;s&iacute;tv&aacute;nnyokkal lehet szavatolni, hogy az
      &eacute;rte felel&#245;s c&eacute;g vagy egy&eacute;n
      val&oacute;ban megb&iacute;zhat&oacute; &eacute;s nem
      sz&eacute;lh&aacute;mos.  Amennyiben a k&eacute;rd&eacute;ses
      tan&uacute;s&iacute;tv&aacute;nyt nem vizsg&aacute;lta be
      valamelyik <quote>tan&uacute;s&iacute;tv&aacute;nyok
      hiteles&iacute;t&eacute;s&eacute;vel foglalkoz&oacute;
      hat&oacute;s&aacute;g</quote> (Certificate Authority, vagy CA),
      akkor err&#245;l &aacute;ltal&aacute;ban kap egy
      figyelmeztet&eacute;st a felhaszn&aacute;l&oacute;.  A
      tan&uacute;s&iacute;tv&aacute;nyokat hiteles&iacute;t&#245;
      c&eacute;gek, mint p&eacute;ld&aacute;ul a <ulink
      url="http://www.verisign.com">VeriSign</ulink>,
      &iacute;rj&aacute;k al&aacute; ezeket a
      tan&uacute;s&iacute;tv&aacute;nyokat &eacute;s ezzel
      &eacute;rv&eacute;nyes&iacute;tik az egyes c&eacute;gek vagy
      egy&eacute;nek megb&iacute;zhat&oacute;s&aacute;g&aacute;t.  Ez
      ugyan p&eacute;nzbe ker&uuml;l, de haszn&aacute;latuk
      egy&aacute;ltal&aacute;n nem is k&ouml;telez&#245;.  Azonban az
      &aacute;tlagosn&aacute;l paranoidabb felhaszn&aacute;l&oacute;k
      sz&aacute;m&aacute;ra megnyugv&aacute;st jelenthet.</para>

    <sect2>
      <title>Tan&uacute;s&iacute;tv&aacute;nyok
	el&#245;&aacute;ll&iacute;t&aacute;sa</title>

      <indexterm>
	<primary>OpenSSL</primary>
	<secondary>tan&uacute;s&iacute;tv&aacute;nyok
	  el&#245;&aacute;ll&iacute;t&aacute;sa</secondary>
      </indexterm>

      <para>A tan&uacute;s&iacute;tv&aacute;nyok
	l&eacute;trehoz&aacute;s&aacute;ra a k&ouml;vetkez&#245; parancs
	&aacute;ll rendelkez&eacute;sre:</para>

      <screen>&prompt.root; <userinput>openssl req -new -nodes -out req.pem -keyout cert.pem</userinput>
Generating a 1024 bit RSA private key
................++++++
.......................................++++++
writing new private key to 'cert.pem'
-----
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter enter '.', the field will be left blank.
-----
Country Name (2 letter code) [AU]:<userinput><replaceable>orsz&aacute;gn&eacute;v (k&eacute;tbet&#251;s k&oacute;ddal)</replaceable></userinput>
State or Province Name (full name) [Some-State]:<userinput><replaceable>&aacute;llam vagy tartom&aacute;ny teljes neve</replaceable></userinput>
Locality Name (eg, city) []:<userinput><replaceable>telep&uuml;l&eacute;s neve</replaceable></userinput>
Organization Name (eg, company) [Internet Widgits Pty Ltd]:<userinput><replaceable>szervezet neve</replaceable></userinput>
Organizational Unit Name (eg, section) []:<userinput><replaceable>szervezeti egys&eacute;g neve</replaceable></userinput>
Common Name (eg, YOUR name) []:<userinput><replaceable>&aacute;ltal&aacute;nos n&eacute;v (h&aacute;l&oacute;zati n&eacute;v!)</replaceable></userinput>
Email Address []:<userinput><replaceable>e-mail c&iacute;m</replaceable></userinput>

Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:<userinput><replaceable>VALAMILYEN JELSZ&Oacute;</replaceable></userinput>
An optional company name []:<userinput><replaceable>egy m&aacute;sik szervezet neve</replaceable></userinput></screen>

      <para>Az adatok bek&eacute;r&eacute;s&eacute;re el&#245;tt
	megjelen&#245; figyelmeztet&#245; &uuml;zenet
	ford&iacute;t&aacute;sa:</para>

      <screen>
Itt a tan&uacute;s&iacute;tv&aacute;ny ig&eacute;nyl&eacute;s&eacute;vel kapcsolatos inform&aacute;ci&oacute;kat kell
megadnunk. Itt egy &uacute;n. <quote>ismertet&#245;nevet</quote> (Distinguished
Name, DN) kell megadnunk. Ezen k&iacute;v&uuml;l van m&eacute;g n&eacute;h&aacute;ny m&aacute;s mez&#245; is, de
ezeket ak&aacute;r &uuml;resen is hagyhatjuk. N&eacute;h&aacute;ny mez&#245;nek van alap&eacute;rtelmezett
&eacute;rt&eacute;ke, de ha oda egy pontot &iacute;runk, akkor kit&ouml;r&ouml;lj&uuml;k.
</screen>

      <para>A <quote>Common Name</quote> mez&#245;n&eacute;l
	ellen&#245;rz&eacute;si okokb&oacute;l egy
	h&aacute;l&oacute;zati nevet, teh&aacute;t a szerver&uuml;nk
	nev&eacute;t kell megadnunk.  Ha nem &iacute;gy j&aacute;runk
	el, akkor l&eacute;nyeg&eacute;ben egy haszn&aacute;lhatatlan
	tan&uacute;s&iacute;tv&aacute;nyt kapunk.  Tov&aacute;bbi
	opci&oacute;k is el&eacute;rhet&#245;ek, mint
	p&eacute;ld&aacute;ul a lej&aacute;rati id&#245; (expire time)
	megad&aacute;sa, a titkos&iacute;t&aacute;si algoritmus
	megv&aacute;ltoztat&aacute;sa stb.  Ezek teljes list&aacute;ja
	megtal&aacute;lhat&oacute; az &man.openssl.1; man
	oldalon.</para>

      <para>Az el&#245;bbi parancs kiad&aacute;sa ut&aacute;n k&eacute;t
	&aacute;llom&aacute;nynak kell l&eacute;trej&ouml;nnie az
	aktu&aacute;lis k&ouml;nyvt&aacute;rban.  A
	tan&uacute;s&iacute;tv&aacute;nyk&eacute;r&eacute;st, vagyis az
	<filename>req.pem</filename> &aacute;llom&aacute;nyt kell
	eljuttatnunk a tan&uacute;s&iacute;tv&aacute;nyok
	hiteles&iacute;t&eacute;s&eacute;vel foglakoz&oacute; szervhez,
	aki majd &eacute;rv&eacute;nyes&iacute;ti az im&eacute;nt
	megadott adatainkat.  A m&aacute;sodik,
	<filename>cert.pem</filename> nev&#251; &aacute;llom&aacute;ny a
	tan&uacute;s&iacute;tv&aacute;nyhoz tartoz&oacute; priv&aacute;t
	kulcs, amit semmilyen k&ouml;r&uuml;lm&eacute;nyek
	k&ouml;z&ouml;tt sem szabad kiadnunk.  Ha ez m&aacute;sok
	kez&eacute;be ker&uuml;l, akkor el tudnak j&aacute;tszani
	benn&uuml;nket (vagy a szerver&uuml;nket).</para>

      <para>Amikor a hiteles&iacute;t&#245; szerv
	al&aacute;&iacute;r&aacute;sa nem felt&eacute;tlen&uuml;l
	sz&uuml;ks&eacute;ges, akkor k&eacute;sz&iacute;thet&uuml;nk egy
	saj&aacute;t magunk &aacute;ltal al&aacute;&iacute;rt
	tan&uacute;s&iacute;tv&aacute;nyt is.  Ehhez el&#245;sz&ouml;r
	is gener&aacute;lnunk kell egy
	<acronym>RSA</acronym>-kulcsot:</para>

      <screen>&prompt.root; <userinput>openssl dsaparam -rand -genkey -out <filename><replaceable>saj&aacute;t_RSA.kulcs</replaceable></filename> 1024</userinput></screen>

      <para>Most pedig k&eacute;sz&iacute;ts&uuml;nk el a
	hiteles&iacute;t&#245; szerv kulcs&aacute;t is:</para>

      <screen>&prompt.root; <userinput>openssl gendsa -des3 -out <filename><replaceable>hiteles&iacute;t&#245;.kulcs</replaceable></filename> <filename><replaceable>saj&aacute;t_RSA.kulcs</replaceable></filename></userinput></screen>

      <para>Ezzel a kulccsal most gy&aacute;rtsunk le egy
	tan&uacute;s&iacute;tv&aacute;nyt:</para>

      <screen>&prompt.root; <userinput>openssl req -new -x509 -days 365 -key <filename><replaceable>hiteles&iacute;t&#245;.kulcs</replaceable></filename> -out <filename><replaceable>&uacute;j.tan&uacute;s&iacute;tv&aacute;ny</replaceable></filename></userinput></screen>

      <para>Ekkor k&eacute;t &uacute;j &aacute;llom&aacute;ny keletkezik
	a k&ouml;nyvt&aacute;runkban: a hiteles&iacute;t&#245; szerv
	al&aacute;&iacute;r&aacute;sa, a
	<filename><replaceable>hiteles&iacute;t&#245;.kulcs</replaceable></filename>
	&eacute;s maga a tan&uacute;s&iacute;tv&aacute;ny, az
	<filename><replaceable>&uacute;j.tan&uacute;s&iacute;tv&aacute;ny</replaceable></filename>
	&aacute;llom&aacute;ny.  Ezeket tegy&uuml;k az <filename
	class="directory">/etc</filename> k&ouml;nyvt&aacute;ron
	bel&uuml;l egy olyan k&ouml;nyvt&aacute;rba, amelyet csak a
	<username>root</username> tud olvasni.  A
	<command>chmod</command> paranccsal &aacute;ll&iacute;tsunk be
	r&aacute; 0700-as k&oacute;d&uacute; enged&eacute;lyeket.</para>

    </sect2>

    <sect2>
      <title>P&eacute;lda a tan&uacute;s&iacute;tv&aacute;nyok
	haszn&aacute;lat&aacute;ra</title>

      <para>Mire is j&oacute;k ezek az &aacute;llom&aacute;nyok?
	P&eacute;ld&aacute;ul kit&#251;n&#245;en alkalmazhat&oacute;ak a
	<application>Sendmail</application> levelez&#245; szerverhez
	be&eacute;rkez&#245; kapcsolatot
	titkos&iacute;t&aacute;s&aacute;ra.  &Iacute;gy
	l&eacute;nyeg&eacute;ben felsz&aacute;moljuk minden olyan
	felhaszn&aacute;l&oacute; titkos&iacute;tatlan m&oacute;don
	zajl&oacute; hiteles&iacute;t&eacute;s&eacute;t, aki a helyi
	levelez&#245; szerveren kereszt&uuml;l k&uuml;ldi a
	leveleit.</para>

      <note>
	<para>Ez &aacute;ltal&aacute;ban nem a legjobb megold&aacute;s,
	  mivel egyes levelez&#245; kliensek hib&aacute;t jeleneznek a
	  felhaszn&aacute;l&oacute;nak, ha nem rendelkezik a
	  tan&uacute;s&iacute;tv&aacute;nnyal.  A
	  tan&uacute;s&iacute;tv&aacute;nyok
	  telep&iacute;t&eacute;s&eacute;vel kapcsolatban olvassuk el a
	  szoftverhez adott le&iacute;r&aacute;st.</para>
      </note>

      <para>A helyi <filename>.mc</filename> &aacute;llom&aacute;nyba
	ezeket a sorokat kell beletenni:</para>

      <programlisting>dnl SSL Options
define(`confCACERT_PATH',`/etc/certs')dnl
define(`confCACERT',`/etc/certs/<replaceable>&uacute;j.tan&uacute;s&iacute;tv&aacute;ny</replaceable>')dnl
define(`confSERVER_CERT',`/etc/certs/<replaceable>&uacute;j.tan&uacute;s&iacute;tv&aacute;ny</replaceable>')dnl
define(`confSERVER_KEY',`/etc/certs/<replaceable>hiteles&iacute;t&#245;.kulcs</replaceable>')dnl
define(`confTLS_SRV_OPTIONS', `V')dnl</programlisting>

      <para>Itt a <filename class="directory">/etc/certs/</filename> az
	a k&ouml;nyvt&aacute;r, amit tan&uacute;s&iacute;tv&aacute;nyok
	&eacute;s kulcsok helyi t&aacute;rol&aacute;s&aacute;ra
	haszn&aacute;lunk.  V&eacute;gezet&uuml;l m&eacute;g &uacute;jra
	kell gener&aacute;lnunk a helyi <filename>.cf</filename>
	&aacute;llom&aacute;nyokat.  Ezt a <filename
	class="directory">/etc/mail</filename> k&ouml;nyvt&aacute;rban a
	<command>make <maketarget>install</maketarget></command> parancs
	kiad&aacute;s&aacute;val k&ouml;nnyen elv&eacute;gezhetj&uuml;k.
	Miut&aacute;n ez megt&ouml;rt&eacute;nt, akkor
	<application>Sendmail</application>hoz tartoz&oacute;
	d&eacute;mont a <command>make
	<maketarget>restart</maketarget></command>
	param&eacute;ter&eacute;vel ind&iacute;thatjuk
	&uacute;jra.</para>

      <para>Ha minden j&oacute;l ment, akkor a
	<filename>/var/log/maillog</filename> &aacute;llom&aacute;nyban
	nem tal&aacute;lunk egyetlen hiba&uuml;zenetet sem, &eacute;s a
	<application>Sendmail</application> is megjelenik a fut&oacute;
	programok k&ouml;z&ouml;tt.</para>

      <para>A &man.telnet.1; seg&eacute;dprogrammal &iacute;gy
	prob&aacute;lhatjuk ki a levelez&#245; szervert:</para>

      <screen>&prompt.root; <userinput>telnet <replaceable>example.com</replaceable> 25</userinput>
Trying 192.0.34.166...
Connected to <hostid role="fqdn">example.com</hostid>.
Escape character is '^]'.
220 <hostid role="fqdn">example.com</hostid> ESMTP Sendmail 8.12.10/8.12.10; Tue, 31 Aug 2004 03:41:22 -0400 (EDT)
<userinput>ehlo <replaceable>example.com</replaceable></userinput>
250-example.com Hello example.com [192.0.34.166], pleased to meet you
250-ENHANCEDSTATUSCODES
250-PIPELINING
250-8BITMIME
250-SIZE
250-DSN
250-ETRN
250-AUTH LOGIN PLAIN
250-STARTTLS
250-DELIVERBY
250 HELP
<userinput>quit</userinput>
221 2.0.0 <hostid role="fqdn">example.com</hostid> closing connection
Connection closed by foreign host.</screen>

      <para>Ha itt megjelenik a <quote>STARTTLS</quote> sor, akkor
	mindent siker&uuml;lt be&aacute;ll&iacute;tanunk.</para>

    </sect2>
  </sect1>

  <sect1 id="ipsec">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Nik</firstname>
	  <surname>Clayton</surname>
	  <affiliation>
	    <address><email>nik@FreeBSD.org</email></address>
	  </affiliation>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <indexterm><primary>IPsec</primary></indexterm>

    <title>VPN IPsec felett</title>

    <para>VPN l&eacute;trehoz&aacute;sa &os;
      &aacute;tj&aacute;r&oacute;k haszn&aacute;lat&aacute;val
      k&eacute;t olyan h&aacute;l&oacute;zat k&ouml;z&ouml;tt, amelyeket
      egym&aacute;st&oacute;l az internet v&aacute;laszt el.</para>

    <sect2>
      <sect2info>
	<authorgroup>
	  <author>
	    <firstname>Hiten M.</firstname>
	    <surname>Pandya</surname>
	    <affiliation>
	      <address><email>hmp@FreeBSD.org</email></address>
	    </affiliation>
	    <contrib>&Iacute;rta: </contrib>
	  </author>
	</authorgroup>
      </sect2info>

      <title>Az IPsec bemutat&aacute;sa</title>

      <para>Ebben a szakaszban az IPsec
	be&aacute;ll&iacute;t&aacute;s&aacute;nak folyamat&aacute;t
	v&aacute;zoljuk fel.  Az IPsec
	be&aacute;ll&iacute;t&aacute;s&aacute;hoz elengedhetetlen, hogy
	tiszt&aacute;ban legy&uuml;nk egy saj&aacute;t rendszermag
	ford&iacute;t&aacute;s&aacute;nak alapjaival (l&aacute;sd <xref
	linkend="kernelconfig">).</para>

      <para>Az <emphasis>IPsec</emphasis> egy olyan protokoll, amely az
	Internet Protocol (IP) r&eacute;teg&eacute;re &eacute;p&uuml;l.
	Seg&iacute;ts&eacute;g&eacute;vel k&eacute;t vagy t&ouml;bb
	sz&aacute;m&iacute;t&oacute;g&eacute;p k&eacute;pes
	biztons&aacute;gos m&oacute;don tartani egym&aacute;ssal a
	kapcsolatot (innen ered a neve).  A &os; IPsec
	<quote>h&aacute;l&oacute;zati protokollk&eacute;szlete</quote> a
	<ulink url="http://www.kame.net">KAME</ulink>
	implement&aacute;ci&oacute;j&aacute;ra &eacute;p&uuml;l, mely
	egyar&aacute;nt t&aacute;mogatja az IPv4 &eacute;s IPv6
	protokollcsal&aacute;dokat.</para>

      <indexterm>
	<primary>IPsec</primary>
	<secondary>ESP</secondary>
      </indexterm>

      <indexterm>
	<primary>IPsec</primary>
	<secondary>AH</secondary>
      </indexterm>

      <para>Az IPsec k&eacute;t alprotokollb&oacute;l tev&#245;dik
	&ouml;ssze:</para>

      <itemizedlist>
	<listitem>
	  <para><emphasis>A hasznos adat biztons&aacute;gos
	    becsomagol&aacute;sa (Encapsulated Security Payload,
	    ESP)</emphasis> sor&aacute;n egy szimmetrikus
	    kriptogr&aacute;fiai algoritmussal (mint
	    p&eacute;ld&aacute;ul Blowfish, 3DES) titkos&iacute;tjuk az
	    IP-csomagok tartalm&aacute;t, ez&aacute;ltal
	    megv&eacute;dj&uuml;k ezeket az
	    illet&eacute;ktelenekt&#245;l.</para>
	</listitem>
	<listitem>
	  <para>A <emphasis>Hiteles&iacute;t&eacute;si fejl&eacute;c
	    (Authentication Header, AH)</emphasis>
	    haszn&aacute;lat&aacute;val megakad&aacute;lyozzuk, hogy az
	    illet&eacute;ktelenek meghamis&iacute;ts&aacute;k az IP
	    csomagok fejl&eacute;c&eacute;t.  Ezt &uacute;gy
	    &eacute;rj&uuml;k el, hogy kisz&aacute;molunk egy
	    kriptogr&aacute;fiai ellen&#245;rz&#245; &ouml;sszeget
	    &eacute;s az IP-csomagok fejl&eacute;c&eacute;nek
	    mez&#245;ire egy biztons&aacute;gos f&uuml;ggv&eacute;nnyel
	    gener&aacute;lunk valamilyen ujjlenyomatot.  Az ez
	    ut&aacute;n k&ouml;vetkez&#245;
	    kieg&eacute;sz&iacute;t&#245; fejl&eacute;c tartalmazza ezt
	    az ujjlenyomatot, amellyel a csomag
	    hiteles&iacute;thet&#245;.</para>
	</listitem>
      </itemizedlist>

      <para>Az <acronym>ESP</acronym> &eacute;s az <acronym>AH</acronym>
	az alkalmaz&aacute;st&oacute;l f&uuml;gg&#245;en
	haszn&aacute;lhat&oacute; egy&uuml;tt vagy
	k&uuml;l&ouml;n-k&uuml;l&ouml;n.</para>

      <indexterm><primary>VPN</primary></indexterm>

      <indexterm>
	<primary>virtu&aacute;lis
	  mag&aacute;nh&aacute;l&oacute;zat</primary>
	<see>VPN</see>
      </indexterm>

      <para>Az IPsec ak&aacute;r k&ouml;zvetlen&uuml;l is
	haszn&aacute;lhat&oacute; k&eacute;t
	sz&aacute;m&iacute;t&oacute;g&eacute;p forgalm&aacute;nak
	titkos&iacute;t&aacute;s&aacute;ra (ezt
	<emphasis>Sz&aacute;ll&iacute;t&aacute;si m&oacute;dnak
	(Transport Mode)</emphasis> nevezik), vagy k&eacute;t
	alh&aacute;l&oacute;zat k&ouml;z&ouml;tt
	&eacute;p&iacute;thet&uuml;nk ki vele <quote>virtu&aacute;lis
	tunneleket</quote>, ami remek&uuml;l alkalmas k&eacute;t
	v&aacute;llalati h&aacute;l&oacute;zat
	kommunik&aacute;ci&oacute;j&aacute;nak
	bebiztos&iacute;t&aacute;s&aacute;ra (ez a <emphasis>Tunnel
	m&oacute;d (Tunnel Mode)</emphasis>).  Ez ut&oacute;bbit
	egyszer&#251;en csak <emphasis>Virtu&aacute;lis
	mag&aacute;nh&aacute;l&oacute;zatk&eacute;nt (Virtual Private
	Network, VPN)</emphasis> emlegetik.  A &os; IPsec
	alrendszer&eacute;r&#245;l az &man.ipsec.4; man oldalon
	tal&aacute;lhatunk tov&aacute;bbi
	inform&aacute;ci&oacute;kat.</para>

      <para>A rendszermag IPsec t&aacute;mogat&aacute;s&aacute;nak
	aktiv&aacute;l&aacute;s&aacute;hoz a k&ouml;vetkez&#245;
	param&eacute;tereket kell beletenn&uuml;nk a
	konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nyba:</para>

      <indexterm>
	<primary>a rendszermag
	  be&aacute;ll&iacute;t&aacute;sai</primary>
	<secondary>IPSEC</secondary>
      </indexterm>

      <screen>
options   IPSEC        # IP biztons&aacute;g
device    crypto
      </screen>

      <indexterm>
	<primary>a rendszermag
	  be&aacute;ll&iacute;t&aacute;sai</primary>
	<secondary>IPSEC_DEBUG</secondary>
      </indexterm>

      <para>Ha sz&uuml;ks&eacute;g&uuml;nk van a IPsec
	nyomk&ouml;vet&eacute;s&eacute;re, a k&ouml;vetkez&#245;
	be&aacute;ll&iacute;t&aacute;st is
	hozz&aacute;tehetj&uuml;k:</para>

      <screen>
options   IPSEC_DEBUG  # az IP biztons&aacute;g nyomk&ouml;vet&eacute;se
      </screen>

    </sect2>

    <sect2>
      <title>A probl&eacute;ma</title>

      <para>Semmilyen szabv&aacute;ny nem fogalmazza meg mi is
	sz&aacute;m&iacute;t VPN-nek.  A virtu&aacute;lis
	mag&aacute;nh&aacute;l&oacute;zatok tucatnyi
	k&uuml;l&ouml;nb&ouml;z&#245; technol&oacute;gi&aacute;val
	val&oacute;s&iacute;that&oacute;ak meg, de mindegyiknek megvan a
	maga er&#245;ss&eacute;ge &eacute;s gyenges&eacute;ge.  Ebben a
	szakaszban k&ouml;rvonalazunk egy ilyen helyzetet, valamint a
	benne fel&eacute;p&iacute;tett VPN
	megval&oacute;s&iacute;t&aacute;s&aacute;hoz alkalmazott
	strat&eacute;gi&aacute;kat.</para>

    </sect2>

    <sect2>
      <title>A forgat&oacute;k&ouml;nyv: adott egy otthoni &eacute;s egy
	v&aacute;llalati h&aacute;l&oacute;zat, amelyek
	k&uuml;l&ouml;n-k&uuml;l&ouml;n csatlakoznak az internetre,
	&eacute;s <acronym>VPN</acronym> haszn&aacute;lat&aacute;val
	ezeket egyetlen h&aacute;l&oacute;zatk&eacute;nt
	szeretn&eacute;nk haszn&aacute;lni</title>

      <indexterm>
	<primary>VPN</primary>
	<secondary>l&eacute;trehoz&aacute;sa</secondary>
      </indexterm>

      <para>El&#245;felt&eacute;telez&eacute;seink a
	k&ouml;vetkez&#245;ek:</para>

      <itemizedlist>
	<listitem>
	  <para>legal&aacute;bb k&eacute;t h&aacute;l&oacute;zatunk
	    van;</para>
	</listitem>
	<listitem>
	  <para>mag&aacute;n bel&uuml;l mind a k&eacute;t
	    h&aacute;l&oacute;zat IP-t haszn&aacute;l;</para>
	</listitem>
	<listitem>
	  <para>mind a k&eacute;t h&aacute;l&oacute;zat egy &os;
	    &aacute;tj&aacute;r&oacute;n kereszt&uuml;l csatlakozik az
	    internethez;</para>
	</listitem>
	<listitem>
	  <para>a h&aacute;l&oacute;zatok &aacute;tj&aacute;r&oacute;i
	    legal&aacute;bb egy publikus IP-c&iacute;mmel
	    rendelkeznek;</para>
	</listitem>
	<listitem>
	  <para>a h&aacute;l&oacute;zatok bels&#245; c&iacute;mei
	    lehetnek publikus vagy priv&aacute;t IP-c&iacute;mek, nem
	    sz&aacute;m&iacute;t.  Fontos viszont, hogy ezek ne
	    &uuml;tk&ouml;zzenek, vagyis ne haszn&aacute;lja egyszerre
	    mind a kett&#245; a <hostid
	      role="ipaddr">192.168.1.x</hostid>
	    c&iacute;mtartom&aacute;nyt.</para>
	</listitem>
      </itemizedlist>
    </sect2>

    <sect2>
      <sect2info>
	<authorgroup>
	  <author>
	    <firstname>Tom</firstname>
	    <surname>Rhodes</surname>
	    <affiliation>
	      <address><email>trhodes@FreeBSD.org</email></address>
	    </affiliation>
	    <contrib>&Iacute;rta: </contrib>
	  </author>
	</authorgroup>
      </sect2info>

      <title>Az IPsec be&aacute;ll&iacute;t&aacute;sa &os; alatt</title>

      <para>Kezd&eacute;sk&eacute;ppen a
	Portgy&#251;jtem&eacute;nyb&#245;l telep&iacute;ten&uuml;nk kell a
	<filename role="package">security/ipsec-tools</filename> portot.
	Ez a programcsomag rengeteg olyan alkalmaz&aacute;st tartalmaz,
	amely seg&iacute;ts&eacute;g&uuml;nkre lehet a
	be&aacute;ll&iacute;t&aacute;sok elv&eacute;gz&eacute;se
	sor&aacute;n.</para>

      <para>A k&ouml;vetkez&#245; l&eacute;p&eacute;sben l&eacute;tre
	kell hoznunk k&eacute;t &man.gif.4; t&iacute;pus&uacute;
	pszeudoeszk&ouml;zt, melyeken kereszt&uuml;l a k&eacute;t
	h&aacute;l&oacute;zat k&ouml;z&ouml;tt egy tunnel
	seg&iacute;ts&eacute;g&eacute;vel ki tudjuk
	&eacute;p&iacute;teni a sz&uuml;ks&eacute;ges kapcsolatot.
	Ehhez <username>root</username>
	felhaszn&aacute;l&oacute;k&eacute;nt futtassuk a
	k&ouml;vetkez&#245; parancsokat (a
	<replaceable>bels&#245;</replaceable> &eacute;s
	<replaceable>k&uuml;ls&#245;</replaceable>
	megnevez&eacute;s&#251; param&eacute;tereket
	cser&eacute;lj&uuml;k ki a val&oacute;s bels&#245; &eacute;s
	k&uuml;ls&#245; &aacute;tj&aacute;r&oacute;k
	c&iacute;meire):</para>

      <screen>&prompt.root; <userinput>ifconfig gif0 create</userinput></screen>
      <screen>&prompt.root; <userinput>ifconfig gif0 <replaceable>bels&#245;1 bels&#245;2</replaceable></userinput></screen>
      <screen>&prompt.root; <userinput>ifconfig gif0 tunnel <replaceable>k&uuml;ls&#245;1 k&uuml;ls&#245;2</replaceable></userinput></screen>

      <para>Tekints&uuml;k p&eacute;ld&aacute;ul, hogy a
	v&aacute;llalati <acronym>LAN</acronym> publikus
	<acronym>IP</acronym>-c&iacute;me <hostid
	  role="ipaddr">172.16.5.4</hostid>, valamint a priv&aacute;t
	<acronym>IP</acronym>-c&iacute;me <hostid
	  role="ipaddr">10.246.38.1</hostid>.  Az otthoni
	<acronym>LAN</acronym> publikus
	<acronym>IP</acronym>-c&iacute;me legyen most <hostid
	  role="ipaddr">192.168.1.12</hostid>, valamint a bels&#245;
	priv&aacute;t <acronym>IP</acronym>-c&iacute;me pedig <hostid
	  role="ipaddr">10.0.0.5</hostid>.</para>

      <para>Els&#245;re ez tal&aacute;n m&eacute;g nem teljesen
	&eacute;rthet&#245;, ez&eacute;rt az &man.ifconfig.8; parancs
	haszn&aacute;lat&aacute;val is n&eacute;zz&uuml;k meg a
	p&eacute;ld&aacute;ban szerepl&#245; h&aacute;l&oacute;zatok
	konfigur&aacute;ci&oacute;j&aacute;t:</para>

      <programlisting>Az els&#245; &aacute;tj&aacute;r&oacute;:

gif0: flags=8051 mtu 1280
tunnel inet 172.16.5.4 --&gt; 192.168.1.12
inet6 fe80::2e0::81ff:fe02:5881%gif0 prefixlen 64 scopeid 0x6
inet 10.246.38.1 --&gt; 10.0.0.5 netmask 0xffffff00

A m&aacute;sodik &aacute;tj&aacute;r&oacute;:

gif0: flags=8051 mtu 1280
tunnel inet 192.168.1.12 --&gt; 172.16.5.4
inet 10.0.0.5 --&gt; 10.246.38.1 netmask 0xffffff00
inet6 fe80::250:bfff:fe3a:c1f%gif0 prefixlen 64 scopeid 0x4</programlisting>

      <para>Miut&aacute;n elv&eacute;gezt&uuml;k az im&eacute;nti
	be&aacute;ll&iacute;t&aacute;sokat, a &man.ping.8; paranccsal
	m&aacute;r mind a k&eacute;t priv&aacute;t
	<acronym>IP</acronym>-tartom&aacute;nynak
	el&eacute;rhet&#245;nek kell lennie, ahogy azt az al&aacute;bbi
	p&eacute;lda is &eacute;rz&eacute;keltetni
	k&iacute;v&aacute;nja:</para>

      <programlisting>otthoni-halo# ping 10.0.0.5
PING 10.0.0.5 (10.0.0.5): 56 data bytes
64 bytes from 10.0.0.5: icmp_seq=0 ttl=64 time=42.786 ms
64 bytes from 10.0.0.5: icmp_seq=1 ttl=64 time=19.255 ms
64 bytes from 10.0.0.5: icmp_seq=2 ttl=64 time=20.440 ms
64 bytes from 10.0.0.5: icmp_seq=3 ttl=64 time=21.036 ms
--- 10.0.0.5 ping statistics ---
4 packets transmitted, 4 packets received, 0% packet loss
round-trip min/avg/max/stddev = 19.255/25.879/42.786/9.782 ms

vallalati-halo# ping 10.246.38.1
PING 10.246.38.1 (10.246.38.1): 56 data bytes
64 bytes from 10.246.38.1: icmp_seq=0 ttl=64 time=28.106 ms
64 bytes from 10.246.38.1: icmp_seq=1 ttl=64 time=42.917 ms
64 bytes from 10.246.38.1: icmp_seq=2 ttl=64 time=127.525 ms
64 bytes from 10.246.38.1: icmp_seq=3 ttl=64 time=119.896 ms
64 bytes from 10.246.38.1: icmp_seq=4 ttl=64 time=154.524 ms
--- 10.246.38.1 ping statistics ---
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev = 28.106/94.594/154.524/49.814 ms</programlisting>

      <para>Az elv&aacute;r&aacute;sainknak megfelel&#245;en
	teh&aacute;t a priv&aacute;t c&iacute;meken mind a k&eacute;t
	oldalnak k&eacute;pesnek kell lennie <acronym>ICMP</acronym>
	csomagokat k&uuml;ldenie &eacute;s fogadnia.  A
	k&ouml;vetkez&#245; l&eacute;p&eacute;sben meg kell mondanunk az
	&aacute;tj&aacute;r&oacute;knak hogyan
	ir&aacute;ny&iacute;ts&aacute;k a csomagokat a k&eacute;t
	h&aacute;l&oacute;zat k&ouml;zti forgalom megfelel&#245;
	&aacute;raml&aacute;s&aacute;hoz.  Ezt az al&aacute;bbi
	paranccsal el&eacute;rhetj&uuml;k el:</para>

	    <screen>&prompt.root; <userinput>vallalati-halo# route add <replaceable>10.0.0.0 10.0.0.5 255.255.255.0</replaceable></userinput></screen>
	    <screen>&prompt.root; <userinput>vallalati-halo# route add net <replaceable>10.0.0.0: gateway 10.0.0.5</replaceable></userinput></screen>

	    <screen>&prompt.root; <userinput>otthoni-halo# route add <replaceable>10.246.38.0 10.246.38.1 255.255.255.0</replaceable></userinput></screen>
	    <screen>&prompt.root; <userinput>otthoni-halo# route add host <replaceable>10.246.38.0: gateway 10.246.38.1</replaceable></userinput></screen>

	    <para>Itt m&aacute;r a bels&#245; g&eacute;peket az
	      &aacute;tj&aacute;r&oacute;kr&oacute;l &eacute;s az
	      &aacute;tj&aacute;r&oacute;k m&ouml;g&uuml;l egyar&aacute;nt
	      el tudjuk &eacute;rni.  A k&ouml;vetkez&#245; p&eacute;lda
	      alapj&aacute;n err&#245;l k&ouml;nnyed&eacute;n meg is
	      tudunk gy&#245;z&#245;dni:</para>

      <programlisting>vallalati-halo# ping 10.0.0.8
PING 10.0.0.8 (10.0.0.8): 56 data bytes
64 bytes from 10.0.0.8: icmp_seq=0 ttl=63 time=92.391 ms
64 bytes from 10.0.0.8: icmp_seq=1 ttl=63 time=21.870 ms
64 bytes from 10.0.0.8: icmp_seq=2 ttl=63 time=198.022 ms
64 bytes from 10.0.0.8: icmp_seq=3 ttl=63 time=22.241 ms
64 bytes from 10.0.0.8: icmp_seq=4 ttl=63 time=174.705 ms
--- 10.0.0.8 ping statistics ---
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev = 21.870/101.846/198.022/74.001 ms

otthoni-halo# ping 10.246.38.107
PING 10.246.38.1 (10.246.38.107): 56 data bytes
64 bytes from 10.246.38.107: icmp_seq=0 ttl=64 time=53.491 ms
64 bytes from 10.246.38.107: icmp_seq=1 ttl=64 time=23.395 ms
64 bytes from 10.246.38.107: icmp_seq=2 ttl=64 time=23.865 ms
64 bytes from 10.246.38.107: icmp_seq=3 ttl=64 time=21.145 ms
64 bytes from 10.246.38.107: icmp_seq=4 ttl=64 time=36.708 ms
--- 10.246.38.107 ping statistics ---
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev = 21.145/31.721/53.491/12.179 ms</programlisting>

      <para>A tunnelek be&aacute;ll&iacute;t&aacute;sa volt
	igaz&aacute;b&oacute;l a k&ouml;nnyebb r&eacute;sz, egy
	biztons&aacute;gos &ouml;sszek&ouml;ttet&eacute;s
	kialak&iacute;t&aacute;sa azonban m&aacute;r valamivel komolyabb
	folyamatot rejt mag&aacute;ban.  A most k&ouml;vetkez&#245;
	konfigur&aacute;ci&oacute;ban erre <quote>el&#245;re
	ismert</quote> (vagyis pre-shared, <acronym>PSK</acronym>)
	<acronym>RSA</acronym>-kulcsokat fogunk haszn&aacute;lni.  A
	konkr&eacute;t <acronym>IP</acronym>-c&iacute;mekt&#245;l
	eltekintve az &aacute;tj&aacute;r&oacute;kon a
	<filename>/usr/local/etc/racoon/racoon.conf</filename>
	&aacute;llom&aacute;nyok hasonl&oacute;an fognak kin&eacute;zni,
	nagyj&aacute;b&oacute;l valahogy &iacute;gy:</para>

      <programlisting>path    pre_shared_key "/usr/local/etc/racoon/psk.txt"; # az ismert kulcsot tartalmaz&oacute; &aacute;llom&aacute;ny helye
log     debug;	# a napl&oacute;z&aacute;s r&eacute;szletess&eacute;g&eacute;nek be&aacute;ll&iacute;t&aacute;sa: ha v&eacute;gezt&uuml;nk a tesztel&eacute;ssel &eacute;s a hibakeres&eacute;ssel, akkor &aacute;ll&iacute;tsuk &aacute;t a 'notify' &eacute;rt&eacute;kre

padding  # ezeket ne nagyon v&aacute;ltoztassuk meg
{
        maximum_length  20;
        randomize       off;
        strict_check    off;
        exclusive_tail  off;
}

timer	# id&#245;z&iacute;t&eacute;si be&aacute;ll&iacute;t&aacute;sok, &aacute;ll&iacute;tsuk be ig&eacute;ny szerint
{
        counter         5;
        interval        20 sec;
        persend         1;
#       natt_keepalive  15 sec;
        phase1          30 sec;
        phase2          15 sec;
}

listen	# c&iacute;m [port], ahol a racoon majd v&aacute;laszolni fog
{
        isakmp          172.16.5.4 [500];
        isakmp_natt     172.16.5.4 [4500];
}

remote  192.168.1.12 [500]
{
        exchange_mode   main,aggressive;
        doi             ipsec_doi;
        situation       identity_only;
        my_identifier   address 172.16.5.4;
        peers_identifier        address 192.168.1.12;
        lifetime        time 8 hour;
        passive         off;
        proposal_check  obey;
#       nat_traversal   off;
        generate_policy off;

                        proposal {
                                encryption_algorithm    blowfish;
                                hash_algorithm          md5;
                                authentication_method   pre_shared_key;
                                lifetime time           30 sec;
                                dh_group                1;
                        }
}

sainfo  (address 10.246.38.0/24 any address 10.0.0.0/24 any) # address $h&aacute;l&oacute;zat/$h&aacute;l&oacute;zati_maszk $t&iacute;pus address $h&aacute;l&oacute;zat/$h&aacute;l&oacute;zati_maszk $t&iacute;pus
 		  # (a $t&iacute;pus lehet "any" vagy "esp")
{		  # a $h&aacute;l&oacute;zat a k&eacute;t &ouml;sszekapcsolni k&iacute;v&aacute;nt bels&#245; h&aacute;l&oacute;zat legyen
        pfs_group       1;
        lifetime        time    36000 sec;
        encryption_algorithm    blowfish,3des,des;
        authentication_algorithm        hmac_md5,hmac_sha1;
        compression_algorithm   deflate;
}</programlisting>

      <para>A p&eacute;ld&aacute;ban szerepl&#245; &ouml;sszes
	opci&oacute; r&eacute;szletes kifejt&eacute;se j&oacute;val
	meghaladn&aacute; ezen le&iacute;r&aacute;s kereteit,
	ez&eacute;rt a b&#245;vebb inform&aacute;ci&oacute;kkal
	kapcsolatban ink&aacute;bb a <application>racoon</application>
	be&aacute;ll&iacute;t&aacute;saihoz tartoz&oacute; man oldal
	elolvas&aacute;s&aacute;t javasoljuk.</para>

      <para>A g&eacute;pek k&ouml;zti h&aacute;l&oacute;zati forgalom
	titkos&iacute;t&aacute;s&aacute;hoz be kell m&eacute;g
	&aacute;ll&iacute;tanunk egy <acronym>SPD</acronym>
	h&aacute;zirendet is, &iacute;gy a &os; &eacute;s a
	<application>racoon</application> k&eacute;pes k&oacute;dolni
	&eacute;s dek&oacute;dolni a csomagokat.</para>

      <para>Ezt a most k&ouml;vetkez&#245;, a v&aacute;llalati
	&aacute;tj&aacute;r&oacute;n tal&aacute;lhat&oacute;hoz
	hasonl&oacute; egyszer&#251; shell szkripttel tudjuk
	elv&eacute;gezni.  Ezt az &aacute;llom&aacute;nyt a rendszer
	ind&iacute;t&aacute;sakor fogjuk felhaszn&aacute;lni, melyet
	<filename>/usr/local/etc/racoon/setkey.conf</filename>
	n&eacute;ven ments&uuml;nk el:</para>

      <programlisting>flush;
spdflush;
# Az otthoni h&aacute;l&oacute;zati fel&eacute;
spdadd 10.246.38.0/24 10.0.0.0/24 any -P out ipsec esp/tunnel/172.16.5.4-192.168.1.12/use;
spdadd 10.0.0.0/24 10.246.38.0/24 any -P in ipsec esp/tunnel/192.168.1.12-172.16.5.4/use;</programlisting>

      <para>Ahogy ezzel megvagyunk, a <application>racoon</application>
	az egyes &aacute;tj&aacute;r&oacute;kon a k&ouml;vetkez&#245;
	paranccsal ind&iacute;that&oacute; el:</para>

      <screen>&prompt.root; <userinput>/usr/local/sbin/racoon -F -f /usr/local/etc/racoon/racoon.conf -l /var/log/racoon.log</userinput></screen>

      <para>A parancs eredm&eacute;nye ennek megfelel&#245;en
	nagyj&aacute;b&oacute;l a k&ouml;vetkez&#245; lesz:</para>

      <programlisting>vallalati-halo# /usr/local/sbin/racoon -F -f /usr/local/etc/racoon/racoon.conf
Foreground mode.
2006-01-30 01:35:47: INFO: begin Identity Protection mode.
2006-01-30 01:35:48: INFO: received Vendor ID: KAME/racoon
2006-01-30 01:35:55: INFO: received Vendor ID: KAME/racoon
2006-01-30 01:36:04: INFO: ISAKMP-SA established 72.16.5.4[500]-192.168.1.12[500] spi:623b9b3bd2492452:7deab82d54ff704a
2006-01-30 01:36:05: INFO: initiate new phase 2 negotiation: 72.16.5.4[0]192.168.1.12[0]
2006-01-30 01:36:09: INFO: IPsec-SA established: ESP/Tunnel 92.168.1.12[0]-&gt;172.16.5.4[0] spi=28496098(0x1b2d0e2)
2006-01-30 01:36:09: INFO: IPsec-SA established: ESP/Tunnel 172.16.5.4[0]-&gt;192.168.1.12[0] spi=47784998(0x2d92426)
2006-01-30 01:36:13: INFO: respond new phase 2 negotiation: 172.16.5.4[0]192.168.1.12[0]
2006-01-30 01:36:18: INFO: IPsec-SA established: ESP/Tunnel 192.168.1.12[0]-&gt;172.16.5.4[0] spi=124397467(0x76a279b)
2006-01-30 01:36:18: INFO: IPsec-SA established: ESP/Tunnel 172.16.5.4[0]-&gt;192.168.1.12[0] spi=175852902(0xa7b4d66)</programlisting>

      <para>A tunnel megfelel&#245; m&#251;k&ouml;d&eacute;s&eacute;t
	&uacute;gy tudjuk ellen&#245;rizni, ha &aacute;tv&aacute;ltunk egy
	m&aacute;sik konzolra &eacute;s a &man.tcpdump.1; program
	seg&iacute;ts&eacute;g&eacute;vel figyelj&uuml;k a
	h&aacute;l&oacute;zati forgalmat.  A p&eacute;ld&aacute;ban
	szerepl&#245; <literal>em0</literal> interf&eacute;szt
	term&eacute;szetesen ne felejts&uuml;k el kicser&eacute;lni a
	megfelel&#245; eszk&ouml;z nev&eacute;re.</para>

      <screen>&prompt.root; <userinput>tcpdump -i em0 host <replaceable>172.16.5.4 and dst 192.168.1.12</replaceable></userinput></screen>

      <para>Ennek hat&aacute;s&aacute;ra az al&aacute;bbiakhoz
	hasonl&oacute; adatoknak kellene megjelennie a konzolon.
	Amennyiben nem ez t&ouml;rt&eacute;nik, valamilyen hiba
	t&ouml;rt&eacute;nt, ez&eacute;rt meg kell keresn&uuml;nk azt a
	visszakapott adatok alapj&aacute;n.</para>

      <programlisting>01:47:32.021683 IP vallalatihalozat.com &gt; 192.168.1.12.otthonihalozat.com: ESP(spi=0x02acbf9f,seq=0xa)
01:47:33.022442 IP vallalatihalozat.com &gt; 192.168.1.12.otthonihalozat.com: ESP(spi=0x02acbf9f,seq=0xb)
01:47:34.024218 IP vallalatihalozat.com &gt; 192.168.1.12.otthonihalozat.com: ESP(spi=0x02acbf9f,seq=0xc)</programlisting>

      <para>Itt m&aacute;r mind a k&eacute;t h&aacute;l&oacute;zatnak
	el&eacute;rhet&#245;nek kell lennie &eacute;s egyk&eacute;nt kell
	l&aacute;tsz&oacute;dnia.  A h&aacute;l&oacute;zatokat ezen
	fel&uuml;l m&eacute;g &eacute;rdemes k&uuml;l&ouml;n
	v&eacute;deni egy t&#251;zfallal is.  Ilyenkor a csomagok
	k&eacute;t h&aacute;l&oacute;zati k&ouml;zti zavartalan
	oda-vissza v&aacute;ndorl&aacute;s&aacute;hoz tov&aacute;bbi
	szab&aacute;lyokat kell m&eacute;g felvenn&uuml;nk a t&#251;zfal
	szab&aacute;lyrendszer&eacute;be.  A &man.ipfw.8; t&#251;zfal
	eset&eacute;n ez a k&ouml;vetkez&#245; sorok
	hozz&aacute;ad&aacute;s&aacute;t jelenti a t&#251;zfal
	konfigur&aacute;ci&oacute;s
	&aacute;llom&aacute;ny&aacute;hoz:</para>

      <programlisting>ipfw add 00201 allow log esp from any to any
ipfw add 00202 allow log ah from any to any
ipfw add 00203 allow log ipencap from any to any
ipfw add 00204 allow log udp from any 500 to any</programlisting>

      <note>
	<para>A szab&aacute;lyok sz&aacute;moz&aacute;s&aacute;t mindig
	  az adott g&eacute;p aktu&aacute;lis
	  be&aacute;ll&iacute;t&aacute;sainak megfelel&#245;en kell
	  m&oacute;dos&iacute;tani.</para>
      </note>

      <para>A &man.pf.4; &eacute;s &man.ipf.8;
	felhaszn&aacute;l&oacute;k sz&aacute;m&aacute;ra ehhez a
	k&ouml;vetkez&#245; parancsot javasoljuk:</para>

      <programlisting>pass in quick proto esp from any to any
pass in quick proto ah from any to any
pass in quick proto ipencap from any to any
pass in quick proto udp from any port = 500 to any port = 500
pass in quick on gif0 from any to any
pass out quick proto esp from any to any
pass out quick proto ah from any to any
pass out quick proto ipencap from any to any
pass out quick proto udp from any port = 500 to any port = 500
pass out quick on gif0 from any to any</programlisting>

      <para>V&eacute;gezet&uuml;l a k&ouml;vetkez&#245; sor
	hozz&aacute;ad&aacute;s&aacute;val enged&eacute;lyezz&uuml;k az
	<filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyban a
	<acronym>VPN</acronym> ind&iacute;t&aacute;s&aacute;t a rendszer
	ind&iacute;t&aacute;sa sor&aacute;n:</para>

      <programlisting>ipsec_enable="YES"
ipsec_program="/usr/local/sbin/setkey"
ipsec_file="/usr/local/etc/racoon/setkey.conf" # enged&eacute;lyezz&uuml;k az spd h&aacute;zirend be&aacute;ll&iacute;t&aacute;s&aacute;t a rendszer ind&iacute;t&aacute;sakor
racoon_enable="yes"</programlisting>
    </sect2>
  </sect1>

  <sect1 id="openssh">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Chern</firstname>
	  <surname>Lee</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>OpenSSH</title>

    <indexterm><primary>OpenSSH</primary></indexterm>
    <indexterm>
      <primary>biztons&aacute;g</primary>
      <secondary>OpenSSH</secondary>
    </indexterm>

    <para>Az <application>OpenSSH</application> olyan
      h&aacute;l&oacute;zati kapcsol&oacute;d&aacute;si
      eszk&ouml;z&ouml;k &ouml;sszess&eacute;ge, amivel
      biztons&aacute;gos m&oacute;don &eacute;rhet&uuml;nk el
      t&aacute;voli sz&aacute;m&iacute;t&oacute;g&eacute;peket.  Az
      <command>rlogin</command>, <command>rsh</command>,
      <command>rcp</command> &eacute;s a <command>telnet</command>
      direkt kiv&aacute;lt&aacute;s&aacute;ra haszn&aacute;lhat&oacute;.
      Emellett SSH-n kereszt&uuml;l TCP/IP kapcsolatok is
      biztons&aacute;gosan b&uacute;jtathat&oacute;ak vagy
      k&uuml;ldhet&#245;ek tov&aacute;bb.</para>

    <para>Az <application>OpenSSH</application>-t az OpenBSD projekt
      tartja karban, &eacute;s az SSH 1.2.12 verzi&oacute;j&aacute;ra
      &eacute;p&uuml;l hibajav&iacute;t&aacute;sokkal &eacute;s
      friss&iacute;t&eacute;sekkel egyetemben.  Az SSH 1 &eacute;s 2
      protokollokkal egyar&aacute;nt kompatibilis.</para>

    <sect2>
      <title>Az <application>OpenSSH</application>
	haszn&aacute;lat&aacute;nak el&#245;nyei</title>

      <para>A h&eacute;tk&ouml;znapi esetben, vagyis amikor a
	&man.telnet.1; vagy &man.rlogin.1; alkalmaz&aacute;sokat
	haszn&aacute;ljuk, az adatok titkos&iacute;tatlan
	form&aacute;ban k&ouml;zlekednek a h&aacute;l&oacute;zaton.  A
	szerver &eacute;s a kliens k&ouml;z&eacute; b&aacute;rhova
	becsatlakoz&oacute; h&aacute;l&oacute;zati
	k&iacute;v&aacute;ncsiskod&oacute;k &iacute;gy
	k&ouml;nnyed&eacute;n el tudj&aacute;k lopni a
	felhaszn&aacute;l&oacute;i nev&uuml;nket &eacute;s jelszavunkat,
	vagy l&eacute;nyeg&eacute;ben b&aacute;rmilyen adatot, ami az
	adott munkamenetben megfordul.  Az
	<application>OpenSSH</application> ennek
	kiv&eacute;d&eacute;s&eacute;re k&iacute;n&aacute;l fel
	k&uuml;l&ouml;nf&eacute;le hiteles&iacute;t&eacute;si &eacute;s
	titkos&iacute;t&aacute;si eszk&ouml;z&ouml;ket.</para>

    </sect2>

    <sect2>
      <title>Az sshd enged&eacute;lyez&eacute;se</title>

      <indexterm>
	<primary>OpenSSH</primary>
	<secondary>enged&eacute;lyez&eacute;s</secondary>
      </indexterm>

      <para>Az <application>sshd</application> a &os;
	telep&iacute;t&eacute;sekor jelentkez&#245;
	<literal>Standard</literal> lehet&#245;s&eacute;gek egyike.  Az
	<application>sshd</application>
	enged&eacute;lyez&eacute;s&eacute;t &uacute;gy tudjuk
	kider&iacute;teni, ha az <filename>rc.conf</filename>
	&aacute;llom&aacute;nyban megkeress&uuml;k a k&ouml;vetkez&#245;
	sort:</para>

      <screen>sshd_enable="YES"</screen>

      <para>Ez t&ouml;lti be a rendszer ind&iacute;t&aacute;sakor az
	&man.sshd.8;-t, az <application>OpenSSH</application>
	d&eacute;mon&aacute;t.  Vagy az
	<filename>/etc/rc.d/sshd</filename> &man.rc.8; szkript
	seg&iacute;ts&eacute;g&eacute;vel is elind&iacute;thatjuk az
	<application>OpenSSH</application>-t:</para>

      <programlisting>/etc/rc.d/sshd start</programlisting>

   </sect2>

    <sect2>
      <title>Az SSH kliens</title>

      <indexterm>
        <primary>OpenSSH</primary>
        <secondary>kliens</secondary>
      </indexterm>

      <para>Az &man.ssh.1; seg&eacute;dprogram az &man.rlogin.1;
	programhoz hasonl&oacute;an m&#251;k&ouml;dik.</para>

      <screen>&prompt.root; <userinput>ssh <replaceable>felhaszn&aacute;l&oacute;@g&eacute;p.hu</replaceable></userinput>
Host key not found from the list of known hosts.  Are you sure you
want to continue connecting (yes/no)?  <userinput>yes</userinput> Host
'g&eacute;p.hu' added to the list of known hosts.
felhaszn&aacute;l&oacute;@g&eacute;p.hu's password:
<userinput>*******</userinput></screen>

      <para>Az &uuml;zenetek ford&iacute;t&aacute;sa:</para>

      <screen>Nem tal&aacute;ltam meg a g&eacute;pet az ismert g&eacute;pek k&ouml;z&ouml;tt.  Biztosan csatlakozni
akarunk hozz&aacute; (igen/nem)?  <userinput>igen</userinput> A 'g&eacute;p.hu'
felker&uuml;lt az ismert g&eacute;pek k&ouml;z&eacute;.
Adja meg a felhaszn&aacute;l&oacute;@g&eacute;p.hu jelszav&aacute;t:</screen>

      <para>Bejelentkez&eacute;s ut&aacute;n minden ugyanolyan, mintha
	az <command>rlogin</command> vagy a <command>telnet</command>
	programokat haszn&aacute;ltuk volna.  Az SSH egy kulcs
	seg&iacute;ts&eacute;g&eacute;vel pr&oacute;b&aacute;lja
	azonos&iacute;tani a sz&aacute;m&iacute;t&oacute;g&eacute;peket,
	ezzel ellen&#245;rzi a szerver hiteless&eacute;g&eacute;t a
	kliensek csatlakoz&aacute;sakor.  A felhaszn&aacute;l&oacute;nak
	ilyenkor el&#245;sz&ouml;r mindig <literal>yes</literal>
	v&aacute;laszt kell adnia.  A k&eacute;s&#245;bbi
	bejelentkez&eacute;si k&iacute;s&eacute;rletek pedig majd mindig
	az &iacute;gy kapott kulccsal t&ouml;rt&eacute;nnek.  Ha
	elt&eacute;rne a kulcs, akkor az SSH kliens erre figyelmeztetni
	fog minket.  A kulcsok a <filename>~/.ssh/known_hosts</filename>
	vagy az SSH v2 protokoll eset&eacute;n a
	<filename>~/.ssh/known_hosts2</filename>
	&aacute;llom&aacute;nyba ker&uuml;lnek elment&eacute;sre.</para>

      <para>Alap&eacute;rtelmez&eacute;s szerint az
	<application>OpenSSH</application> szerverek csak SSH v2
	kapcsolatokat fogadnak el.  Lehet&#245;s&eacute;g szerint a
	kliens is ezt a v&aacute;ltozatot fogja haszn&aacute;lni, de ha
	nem siker&uuml;l, akkor megpr&oacute;b&aacute;lkozik a v1-el.  A
	kliensnek a <option>-1</option> vagy <option>-2</option>
	opci&oacute;k seg&iacute;ts&eacute;g&eacute;vel el&#245; is
	lehet &iacute;rni, hogy az els&#245; vagy a m&aacute;sodik
	v&aacute;ltozatot haszn&aacute;lja.  A kliensben az els&#245;
	v&aacute;ltozat t&aacute;mogat&aacute;s&aacute;t csup&aacute;n a
	r&eacute;gebbi verzi&oacute;k kompatibilit&aacute;sa miatt
	tartj&aacute;k karban.</para>

    </sect2>

    <sect2>
      <title>Biztons&aacute;gos m&aacute;sol&aacute;s</title>

      <indexterm>
	<primary>OpenSSH</primary>
	<secondary>biztons&aacute;gos m&aacute;sol&aacute;s</secondary>
      </indexterm>
      <indexterm><primary><command>scp</command></primary></indexterm>

      <para>Az &man.scp.1; parancs az &man.rcp.1; parancshoz
	hasonl&oacute;an m&#251;k&ouml;dik: egyik g&eacute;pr&#245;l
	m&aacute;sol a m&aacute;sikra, biztons&aacute;gosan.</para>

      <screen>&prompt.root; <userinput> scp <replaceable>felhaszn&aacute;l&oacute;@g&eacute;p.hu:/COPYRIGHT COPYRIGHT</replaceable></userinput>
<replaceable>felhaszn&aacute;l&oacute;@g&eacute;p.hu</replaceable>'s password: <userinput>*******</userinput>
COPYRIGHT            100% |*****************************|  4735
00:00
&prompt.root;</screen>

      <para>Mivel a kulcsot m&aacute;r ismerj&uuml;k ehhez a
	t&aacute;voli g&eacute;phez (az el&#245;bbi
	p&eacute;ld&aacute;b&oacute;l), ez&eacute;rt az &man.scp.1;
	haszn&aacute;latakor m&aacute;r ezzel
	hiteles&iacute;t&uuml;nk.</para>

      <para>Az &man.scp.1; param&eacute;terei hasonl&oacute;ak a
	&man.cp.1; parancs&eacute;hoz: els&#245; helyen az
	&aacute;llom&aacute;ny vagy &aacute;llom&aacute;nyok neveit
	adjuk meg, a m&aacute;sodikon pedig a c&eacute;lt.  Mivel az
	&aacute;llom&aacute;nyokat a h&aacute;l&oacute;zaton SSH-n
	kereszt&uuml;l k&uuml;ldik &aacute;t, ez&eacute;rt az
	&aacute;llom&aacute;nyok neveit
	<option><replaceable>felhaszn&aacute;l&oacute;@g&eacute;p</replaceable>:<replaceable>el&eacute;r&eacute;si_&uacute;t</replaceable></option>
	form&aacute;ban kell megadni.</para>

    </sect2>

    <sect2>
      <title>Be&aacute;ll&iacute;t&aacute;sok</title>

      <indexterm>
	<primary>OpenSSH</primary>
	<secondary>be&aacute;ll&iacute;t&aacute;sok</secondary>
      </indexterm>

      <para>Az <application>OpenSSH</application> d&eacute;mon &eacute;s
	kliens rendszerszint&#251; konfigur&aacute;ci&oacute;s
	&aacute;llom&aacute;nyai az <filename>/etc/ssh</filename>
	k&ouml;nyvt&aacute;rban tal&aacute;lhat&oacute;ak.</para>

      <para>Az <filename>ssh_config</filename> tartalmazza a kliens
	be&aacute;ll&iacute;t&aacute;sait, mik&ouml;zben az
	<filename>sshd_config</filename> tartalmazza a
	d&eacute;mon&eacute;t.</para>

      <para>Emellett az <filename>rc.conf</filename>
	&aacute;llom&aacute;nyban megadhat&oacute;
	<option>sshd_program</option> (ez alapb&oacute;l a
	<filename>/usr/sbin/sshd</filename>) &eacute;s
	<option>sshd_flags</option> opci&oacute;kkal tov&aacute;bbi
	be&aacute;ll&iacute;t&aacute;si szinteket
	ny&uacute;jtanak.</para>

    </sect2>

    <sect2 id="security-ssh-keygen">
      <title>ssh-keygen</title>

      <para>Jelszavak helyett az &man.ssh-keygen.1; programmal a
	felhaszn&aacute;l&oacute;k azonos&iacute;t&aacute;s&aacute;ra
	DSA- vagy RSA-kulcsokat tudunk k&eacute;sz&iacute;teni:</para>

      <screen>&prompt.user; <userinput>ssh-keygen -t <replaceable>dsa</replaceable></userinput>
Generating public/private dsa key pair.
Enter file in which to save the key (/home/<replaceable>felhaszn&aacute;l&oacute;</replaceable>/.ssh/id_dsa):
Created directory '/home/<replaceable>felhaszn&aacute;l&oacute;</replaceable>/.ssh'.
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/<replaceable>felhaszn&aacute;l&oacute;</replaceable>/.ssh/id_dsa.
Your public key has been saved in /home/<replaceable>felhaszn&aacute;l&oacute;</replaceable>/.ssh/id_dsa.pub.
The key fingerprint is:
bb:48:db:f2:93:57:80:b6:aa:bc:f5:d5:ba:8f:79:17 <replaceable>felhaszn&aacute;l&oacute;@g&eacute;p.hu</replaceable>
</screen>

      <para>Az &man.ssh-keygen.1; ekkor a hiteles&iacute;t&eacute;sre
	l&eacute;trehoz egy publikus &eacute;s egy priv&aacute;t
	kulcsb&oacute;l &aacute;ll&oacute; p&aacute;rt.  A priv&aacute;t
	kulcs a <filename>~/.ssh/id_dsa</filename> vagy
	<filename>~/.ssh/id_rsa</filename> &aacute;llom&aacute;nyba
	ker&uuml;l, mik&ouml;zben a publikus kulcs a
	<filename>~/.ssh/id_dsa.pub</filename> vagy
	<filename>~/.ssh/id_rsa.pub</filename> lesz att&oacute;l
	f&uuml;gg&#245;en, hogy <acronym>DSA</acronym> vagy
	<acronym>RSA</acronym> a kulcs t&iacute;pusa.  A m&oacute;dszer
	m&#251;k&ouml;d&eacute;s&eacute;hez a publikus
	<acronym>DSA</acronym>- vagy <acronym>RSA</acronym>-kulcsot a
	t&aacute;voli sz&aacute;m&iacute;t&oacute;g&eacute;p
	<filename>~/.ssh/authorized_keys</filename>
	&aacute;llom&aacute;ny&aacute;ba kell bem&aacute;solni.</para>

      <para>&Iacute;gy teh&aacute;t a t&aacute;voli
	sz&aacute;m&iacute;t&oacute;g&eacute;pre jelszavak
	alkalmaz&aacute;sa helyett SSH-kulccsal tudunk
	bel&eacute;pni.</para>

      <para>Ha az &man.ssh-keygen.1; parancsnak megadunk egy jelmondatot
	is, akkor a felhaszn&aacute;l&oacute; a priv&aacute;t
	kulcs&aacute;t csak ennek megad&aacute;s&aacute;val tudja
	haszn&aacute;lni.  A hossz&uacute; jelmondatok
	&aacute;lland&oacute; beirogat&aacute;s&aacute;t&oacute;l a
	<xref linkend="security-ssh-agent"> szakaszban hamarosan
	bemutat&aacute;sra ker&uuml;lt &man.ssh-agent.1; igyekszik
	megk&iacute;m&eacute;lni minket.</para>

      <warning>
	<para>A k&uuml;l&ouml;nb&ouml;z&#245; opci&oacute;k &eacute;s
	  &aacute;llom&aacute;nyok elt&eacute;rhetnek a
	  sz&aacute;m&iacute;t&oacute;g&eacute;p&uuml;nkre
	  telep&iacute;tett <application>OpenSSH</application>
	  verzi&oacute;j&aacute;t&oacute;l f&uuml;gg&#245;en.  Ilyen
	  esetben javasolt felkeresni az &man.ssh-keygen.1; man
	  oldal&aacute;t.</para>
      </warning>

    </sect2>

    <sect2 id="security-ssh-agent">
      <title>Az ssh-agent &eacute;s az ssh-add</title>

      <para>Az &man.ssh-agent.1; &eacute;s &man.ssh-add.1;
	seg&eacute;dprogramokkal be tudjuk t&ouml;lteni az
	<application>SSH</application>-kulcsokat a
	mem&oacute;ri&aacute;ba, amivel elker&uuml;lhetj&uuml;k a
	jelmondat &aacute;lland&oacute;
	beg&eacute;pel&eacute;s&eacute;t.</para>

      <para>A hiteles&iacute;t&eacute;st az &man.ssh-agent.1; program
	kezeli a bet&ouml;lt&ouml;tt priv&aacute;t kulcsok
	alapj&aacute;n.  Az &man.ssh-agent.1;
	haszn&aacute;lat&aacute;val egy m&aacute;sik programot is
	elindhatunk, egy parancs&eacute;rtelmez&#245;t&#245;l kezdve egy
	ablakkezel&#245;ig szinte b&aacute;rmit.</para>

      <para>Az &man.ssh-agent.1; programot &uacute;gy tudjuk egy
	parancs&eacute;rtelmez&#245;ben haszn&aacute;lni, hogy
	el&#245;sz&ouml;r is elind&iacute;tjuk vele az adott
	parancs&eacute;rtelmez&#245;t.  Ezut&aacute;n az &man.ssh-add.1;
	lefuttat&aacute;s&aacute;val hozz&aacute; kell adnunk egy
	identit&aacute;st, annak jelmondat&aacute;nak
	megad&aacute;s&aacute;val.  Miut&aacute;n ezeket megtett&uuml;k,
	a felhaszn&aacute;l&oacute; b&aacute;rmelyik olyan t&aacute;voli
	g&eacute;pre be tud jelentkezni, ahol a publikus kulcs&aacute;t
	ismerik.  P&eacute;ld&aacute;ul:</para>

      <screen>&prompt.user; ssh-agent <replaceable>csh</replaceable>
&prompt.user; ssh-add
Enter passphrase for /home/<replaceable>felhaszn&aacute;l&oacute;</replaceable>/.ssh/id_dsa:
Identity added: /home/<replaceable>felhaszn&aacute;l&oacute;</replaceable>/.ssh/id_dsa (/home/<replaceable>felhaszn&aacute;l&oacute;</replaceable>/.ssh/id_dsa)
&prompt.user;</screen>

      <para>Az &man.ssh-agent.1; programot X11-el &uacute;gy tudjuk
	haszn&aacute;lni, ha az <filename>~/.xinitrc</filename>
	&aacute;llom&aacute;nyba tessz&uuml;k bele.  Ezzel az
	&man.ssh-agent.1; az &ouml;sszes X11-ben ind&iacute;tott program
	sz&aacute;m&aacute;ra rendelkez&eacute;sre &aacute;ll.
	P&eacute;ld&aacute;nak vegy&uuml;k ezt az
	<filename>~/.xinitrc</filename> &aacute;llom&aacute;nyt:</para>

      <programlisting>exec ssh-agent <replaceable>startxfce4</replaceable></programlisting>

      <para>&Iacute;gy az X11 indul&aacute;sakor mindig elindul az
	&man.ssh-agent.1;, amely pedig elind&iacute;tja az
	<application>XFCE</application> alkalmaz&aacute;st.
	Miut&aacute;n &aacute;t&iacute;rtuk a saj&aacute;t
	&aacute;llom&aacute;nyunkat, a rendszer
	&eacute;letbel&eacute;ptet&eacute;s&eacute;hez ind&iacute;tsuk
	&uacute;jra az X11-et, az &man.ssh-add.1;
	futtat&aacute;s&aacute;val pedig t&ouml;lts&uuml;k be az
	&ouml;sszes SSH-kulcsunkat.</para>

    </sect2>

    <sect2 id="security-ssh-tunneling">
      <title>Tunnelez&eacute;s SSH-val</title>

      <indexterm>
	<primary>OpenSSH</primary>
	<secondary>tunnelez&eacute;s</secondary>
      </indexterm>

      <para>Az <application>OpenSSH</application>-val l&eacute;tre
	tudunk hozni egy tunnelt, amellyel egy m&aacute;sik protokoll
	adatait tudjuk titkos&iacute;tott m&oacute;don
	becsomagolni.</para>

      <para>Az al&aacute;bbi parancs arra utas&iacute;tja az &man.ssh.1;
	programot, hogy hozzon l&eacute;tre egy tunnelt a
	<application>telnet</application>
	haszn&aacute;lat&aacute;hoz:</para>

       <screen>&prompt.user; <userinput>ssh -2 -N -f -L <replaceable>5023:localhost:23 felhaszn&aacute;l&oacute;@iz&eacute;.miz&eacute;.hu</replaceable></userinput>
&prompt.user;</screen>

      <para>Az <command>ssh</command> parancsnak a k&ouml;vetkez&#245;
	kapcsol&oacute;kat adtuk meg:</para>

      <variablelist>
	<varlistentry>
	  <term><option>-2</option></term>

	  <listitem>
	    <para>Az <command>ssh</command> parancs a protokoll
	      m&aacute;sodik v&aacute;ltozat&aacute;t haszn&aacute;lja.
	      (Ne adjuk meg, ha r&eacute;gi SSH szerverekkel
	      dolgozunk.)</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><option>-N</option></term>

	  <listitem>
	    <para>Tunnel l&eacute;trehoz&aacute;sa.  Ha nem adjuk meg,
	      akkor az <command>ssh</command> egy hagyom&aacute;nyos
	      munkamenet fel&eacute;p&iacute;t&eacute;s&eacute;t kezdi
	      meg.</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><option>-f</option></term>

	  <listitem>
	    <para>Az <command>ssh</command> a h&aacute;tt&eacute;rben
	      fusson.</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><option>-L</option></term>

	  <listitem>
	    <para>Egy helyi tunnel a
	    <replaceable>helyiport:t&aacute;volig&eacute;p:t&aacute;voliport</replaceable>
	      fel&iacute;r&aacute;sban.</para>
	  </listitem>
	  </varlistentry>

	<varlistentry>
	  <term><option>felhaszn&aacute;l&oacute;@iz&eacute;.miz&eacute;.hu</option></term>

	  <listitem>
	    <para>A t&aacute;voli SSH szerver.</para>
	  </listitem>
	</varlistentry>
      </variablelist>

      <para>Az SSH &aacute;ltal l&eacute;trehozott j&aacute;ratok
	&uacute;gy m&#251;k&ouml;dnek, hogy l&eacute;trehozunk egy
	csatlakoz&aacute;st a <hostid>localhost</hostid> (a helyi
	g&eacute;p) megadott portj&aacute;n.  Ezut&aacute;n minden olyan
	kapcsolatot, ami a helyi g&eacute;p adott portj&aacute;ra
	&eacute;rkezik, SSH-n kereszt&uuml;l
	&aacute;tir&aacute;ny&iacute;tunk a t&aacute;voli g&eacute;p
	portj&aacute;ra.</para>

      <para>Ebben a p&eacute;ld&aacute;ban a helyi g&eacute;p
	<replaceable>5023</replaceable> portj&aacute;t
	&aacute;tir&aacute;ny&iacute;tjuk a helyi g&eacute;p
	<replaceable>23</replaceable> portj&aacute;ra.  Mivel a
	<replaceable>23</replaceable> a
	<application>telnet</application> portja, ez&eacute;rt az
	&iacute;gy defini&aacute;lt SSH j&aacute;rattal egy
	biztons&aacute;gos <application>telnet</application>
	munkamenetet hozunk l&eacute;tre.</para>

      <para>Ezen a m&oacute;don tetsz&#245;leges nem biztons&aacute;gos
	TCP protokollt, p&eacute;ld&aacute;ul SMTP-t, POP3-at, FTP-t
	stb.  be tudunk csomagolni.</para>

      <example>
	<title>Biztons&aacute;gos tunnel l&eacute;trehoz&aacute;sa
	  SSH-val SMTP-hez</title>

	<screen>&prompt.user; <userinput>ssh -2 -N -f -L <replaceable>5025:localhost:25 felhaszn&aacute;l&oacute;@levelez&#245;.szerver.hu</replaceable></userinput>
<replaceable>felhaszn&aacute;l&oacute;@levelez&#245;.szerver.hu</replaceable>'s password: <userinput>*****</userinput>
&prompt.user; <userinput>telnet <replaceable>localhost 5025</replaceable></userinput>
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
220 <replaceable>levelez&#245;.szerver.hu</replaceable> ESMTP</screen>

	<para>Az &man.ssh-keygen.1; &eacute;s tov&aacute;bbi
	  felhaszn&aacute;l&oacute;i hozz&aacute;f&eacute;r&eacute;sek
	  alkalmaz&aacute;s&aacute;val ezen a m&oacute;don ki tudunk
	  alak&iacute;tani egy minden tov&aacute;bbi
	  probl&eacute;m&aacute;t&oacute;l &eacute;s z&#251;rt&#245;l
	  mentes SSH tunnelez&eacute;si k&ouml;rnyezetet.  A jelszavak
	  helyett kulcsokat haszn&aacute;lunk &eacute;s minden tunnel
	  k&uuml;l&ouml;n felhaszn&aacute;l&oacute;k&eacute;nt is
	  futtathat&oacute;.</para>
      </example>

      <sect3>
	<title>Gyakorlati p&eacute;ld&aacute;k a tunnelek
	  haszn&aacute;lat&aacute;ra</title>

	<sect4>
	  <title>Egy POP3 szerver biztons&aacute;gos
	    el&eacute;r&eacute;se</title>

	  <para>Tegy&uuml;k fel, hogy a munkahely&uuml;nk&ouml;n van egy
	    SSH szerver, amire k&iacute;v&uuml;lr&#245;l lehet
	    csatlakozni, illetve vele egy h&aacute;l&oacute;zatban van
	    egy POP3 levelez&#245; szerver is.  A munkahely&uuml;nk
	    &eacute;s az otthonunk k&ouml;z&ouml;tt lev&#245;
	    h&aacute;l&oacute;zati &uacute;tvonalat r&eacute;szben vagy
	    teljesen nem tartjuk megb&iacute;zhat&oacute;nak.
	    Ez&eacute;rt az e-mailjeinket valamilyen biztons&aacute;gos
	    m&oacute;don szeretn&eacute;nk el&eacute;rni.  Ezt
	    &uacute;gy tudjuk megval&oacute;s&iacute;tani, ha
	    otthonr&oacute;l csatlakozunk a munkahelyen lev&#245; SSH
	    szerverre &eacute;s ezen kereszt&uuml;l &eacute;rj&uuml;k a
	    levelez&#245; szervert.</para>

	  <screen>&prompt.user; <userinput>ssh -2 -N -f -L <replaceable>2110:lev&eacute;l.g&eacute;p.hu:110 felhaszn&aacute;l&oacute;@ssh-szerver.g&eacute;p.hu</replaceable></userinput>
<replaceable>felhaszn&aacute;l&oacute;@ssh-szerver.g&eacute;p.hu</replaceable>'s password: <userinput>******</userinput></screen>

	  <para>Miut&aacute;n a tunnel l&eacute;trej&ouml;tt &eacute;s
	    m&#251;k&ouml;d&#245;k&eacute;pes, &aacute;ll&iacute;tsuk be
	    a levelez&#245; kliens&uuml;nkben, hogy a POP3
	    k&eacute;r&eacute;seket a <hostid>localhost</hostid> 2110
	    portj&aacute;ra k&uuml;ldje.  Innen pedig biztons&aacute;gos
	    m&oacute;don megy tov&aacute;bb a
	    <hostid>lev&eacute;l.g&eacute;p.hu</hostid>
	    c&iacute;mre.</para>

	</sect4>

	<sect4>
	  <title>Egy szigor&uacute; t&#251;zfal
	    megker&uuml;l&eacute;se</title>

	  <para>Egyes h&aacute;l&oacute;zati adminisztr&aacute;torok
	    t&uacute;ls&aacute;gosan szigor&uacute; szab&aacute;lyokat
	    adnak meg a t&#251;zfalban, &eacute;s nem csak a
	    bej&ouml;v&#245; kapcsolatokat sz&#251;rik, hanem a
	    kimen&#245;ket is.  A t&aacute;voli g&eacute;pekhez csak a
	    22 (SSH) &eacute;s 80 (b&ouml;ng&eacute;sz&eacute;s)
	    portjaikon tudunk csatlakozni.</para>

	  <para>Mi viszont szeretn&eacute;nk m&aacute;s (nem
	    eg&eacute;szen a munk&aacute;nkkal kapcsolatos)
	    szolg&aacute;ltat&aacute;sokat is el&eacute;rni,
	    p&eacute;ld&aacute;ul egy Ogg Vorbis szerverr&#245;l
	    zen&eacute;t hallgatni.  Ehhez a szerverhez viszont csak
	    akkor tudn&aacute;nk csatlakozni, ha a 22 vagy 80 portokon
	    &uuml;zemelne.</para>

	  <para>Ezt a probl&eacute;m&aacute;t &uacute;gy oldhatjuk meg,
	    ha fel&eacute;p&iacute;t&uuml;nk egy SSH kapcsolatot a
	    h&aacute;l&oacute;zatunk t&#251;zfal&aacute;n
	    k&iacute;v&uuml;l lev&#245;
	    sz&aacute;m&iacute;t&oacute;g&eacute;ppel &eacute;s
	    seg&iacute;ts&eacute;g&eacute;vel &aacute;tb&uacute;junk az
	    Ogg Vorbis szerverhez.</para>

	  <screen>&prompt.user; <userinput>ssh -2 -N -f -L <replaceable>8888:zene.g&eacute;p.hu:8000 felhaszn&aacute;l&oacute;@t&#251;zfalazatlan-rendszer.g&eacute;p.org</replaceable></userinput>
<replaceable>felhaszn&aacute;l&oacute;@t&#251;zfalazatlan-rendszer.g&eacute;p.org</replaceable>'s password: <userinput>*******</userinput></screen>

	  <para>A zenelej&aacute;tsz&oacute; kliens&uuml;knek adjuk meg
	    a <hostid>localhost</hostid> 8888 portj&aacute;t, amely
	    pedig a t&#251;zfal sikeres
	    kij&aacute;tsz&aacute;s&aacute;val
	    tov&aacute;bb&iacute;t&oacute;dik a
	    <hostid>zene.g&eacute;p.hu</hostid> 8000-res
	    portj&aacute;ra.</para>

	</sect4>
      </sect3>
    </sect2>

    <sect2>
      <title>Az <varname>AllowUsers</varname> felhaszn&aacute;l&oacute;i
	be&aacute;ll&iacute;t&aacute;s</title>

      <para>Gyakran nem &aacute;rt korl&aacute;tozni a
	felhaszn&aacute;l&oacute;k bejelentkez&eacute;s&eacute;t.  Az
	<literal>AllowUsers</literal> erre t&ouml;k&eacute;letesen
	megfelel.  P&eacute;ld&aacute;ul, ha csak <hostid
	role="ipaddr">192.168.1.32</hostid> c&iacute;mr&#245;l
	engedj&uuml;k bejelentkezni a <username>root</username>
	felhaszn&aacute;l&oacute;t, akkor ehhez valami ilyesmit kell
	be&iacute;rnunk az <filename>/etc/ssh/sshd_config</filename>
	&aacute;llom&aacute;nyba:</para>

      <programlisting>AllowUsers root@192.168.1.32</programlisting>

      <para>Ezzel pedig csup&aacute;n nev&eacute;nek
	megad&aacute;s&aacute;val enged&eacute;lyezz&uuml;k az
	<username>admin</username> felhaszn&aacute;l&oacute;
	bejelentkez&eacute;s&eacute;t (b&aacute;rhonnan):</para>

      <programlisting>AllowUsers admin</programlisting>

      <para>Egy sorban t&ouml;bb felhaszn&aacute;l&oacute; is
	megadhat&oacute;, mint p&eacute;ld&aacute;ul:</para>

      <programlisting>AllowUsers root@192.168.1.32 admin</programlisting>

      <note>
	<para>Ilyenkor ne felejts&uuml;k el megadni az &ouml;sszes
	  bejelentkez&eacute;sre (valamilyen form&aacute;ban) jogosult
	  felhaszn&aacute;l&oacute;t megadni,
	  m&aacute;sk&uuml;l&ouml;nben kiz&aacute;rjuk ezeket.</para>
      </note>

      <para>Miut&aacute;n elv&eacute;gezt&uuml;k a sz&uuml;ks&eacute;ges
	v&aacute;ltoztat&aacute;sokat az
	<filename>/etc/ssh/sshd_config</filename>
	&aacute;llom&aacute;nyban, utas&iacute;tsuk az &man.sshd.8;
	d&eacute;mont a konfigur&aacute;ci&oacute;s
	&aacute;llom&aacute;nyok
	&uacute;jraolvas&aacute;s&aacute;ra:</para>

      <screen>&prompt.root; <userinput>/etc/rc.d/sshd reload</userinput></screen>

    </sect2>

    <sect2>
      <title>Aj&aacute;nlott olvasnival&oacute;k (angolul)</title>

      <para><ulink url="http://www.openssh.com/">OpenSSH</ulink></para>

      <para>&man.ssh.1; &man.scp.1; &man.ssh-keygen.1; &man.ssh-agent.1;
	&man.ssh-add.1; &man.ssh.config.5;</para>

      <para>&man.sshd.8; &man.sftp-server.8; &man.sshd.config.5;</para>

    </sect2>
  </sect1>

  <sect1 id="fs-acl">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Tom</firstname>
	  <surname>Rhodes</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <indexterm><primary>ACL</primary></indexterm>

    <title>Az &aacute;llom&aacute;nyrendszerek
      hozz&aacute;f&eacute;r&eacute;seit vez&eacute;rl&#245;
      list&aacute;k</title>

    <para>A &os;&nbsp;5.0 &eacute;s k&eacute;s&#245;bbi
      v&aacute;ltozatai k&uuml;l&ouml;nb&ouml;z&#245;
      fejleszt&eacute;seket hoztak az
      &aacute;llom&aacute;nyrendszerekben, p&eacute;ld&aacute;ul a
      pillanatk&eacute;pek k&eacute;sz&iacute;t&eacute;se vagy a
      hozz&aacute;f&eacute;r&eacute;s-vez&eacute;rl&eacute;si
      list&aacute;k (Access Control List, <acronym>ACL</acronym>-ek)
      t&aacute;mogat&aacute;sa.</para>

    <para>A hozz&aacute;f&eacute;r&eacute;s-vez&eacute;rl&eacute;si
      list&aacute;k a szabv&aacute;nyos &unix;-os enged&eacute;ly
      modellt b&#245;v&iacute;tik ki egy igen kompatibilis (&posix;.1e)
      m&oacute;don.  Haszn&aacute;lat&aacute;val a rendszergazd&aacute;k
      egy sokkal kifinomultabb biztons&aacute;gi modellt tudhatnak a
      kez&uuml;k &uuml;gy&eacute;ben.</para>

    <para>Az <acronym>UFS</acronym> &aacute;llom&aacute;nyrendszerek
      <acronym>ACL</acronym> t&aacute;mogat&aacute;s&aacute;t &uacute;gy
      tudjuk enged&eacute;lyezni, ha a rendszermagot az</para>

    <programlisting>options UFS_ACL</programlisting>

    <para>param&eacute;terrel ford&iacute;tjuk le.  Amennyiben ezt nem
      ford&iacute;tottuk bele, akkor az <acronym>ACL</acronym>
      t&aacute;mogat&aacute;ssal rendelkez&#245;
      &aacute;llom&aacute;nyrendszerek csatlakoztat&aacute;sa
      sor&aacute;n egy figyelmeztet&eacute;st kapunk.  Ez az
      opci&oacute; a <filename>GENERIC</filename> rendszermag
      r&eacute;sze.  Az <acronym>ACL</acronym> az
      &aacute;llom&aacute;nyrendszeren enged&eacute;lyezett
      kiterjesztett tulajdons&aacute;gokra t&aacute;maszkodik.  Ezeket a
      kiterjesztett tulajdons&aacute;gokat a k&ouml;vetkez&#245;
      gener&aacute;ci&oacute;s &unix; &aacute;llom&aacute;nyrendszer, az
      <acronym>UFS2</acronym> m&aacute;r alapb&oacute;l ismeri.</para>

    <note>
      <para><acronym>UFS1</acronym> t&iacute;pus&uacute;
	&aacute;llom&aacute;nyrendszereken sokkal nagyobb a
	kiterjesztett tulajdons&aacute;gok kezel&eacute;s&eacute;nek
	k&ouml;lts&eacute;ge, mint az <acronym>UFS2</acronym>
	eset&eacute;ben.  Az <acronym>UFS2</acronym> j&oacute;val
	nagyobb teljes&iacute;tm&eacute;nnyel k&eacute;pes dolgozni a
	kiterjesztett tulajdons&aacute;gokkal.  Emiatt a
	hozz&aacute;f&eacute;r&eacute;s-vez&eacute;rl&eacute;si
	list&aacute;k haszn&aacute;lat&aacute;hoz az
	<acronym>UFS2</acronym> sokkal ink&aacute;bb aj&aacute;nlott,
	mint az <acronym>UFS1</acronym>.</para>
    </note>

    <para>Az <acronym>ACL</acronym> haszn&aacute;lat&aacute;t a
      csatlakoztat&aacute;skor megadott <option>acls</option>
      be&aacute;ll&iacute;t&aacute;ssal enged&eacute;lyezhetj&uuml;k,
      amelyet &eacute;rdemes felvenn&uuml;nk az
      <filename>/etc/fstab</filename> &aacute;llom&aacute;nyba.  Ha a
      &man.tunefs.8; seg&eacute;dprogrammal az
      &aacute;llom&aacute;nyrendszer fejl&eacute;c&eacute;ben lev&#245;
      szuperblokk <acronym>ACL</acronym> kapcsol&oacute;j&aacute;t
      &aacute;t&iacute;rjuk, akkor ez a be&aacute;ll&iacute;t&aacute;s
      automatikuss&aacute; tehet&#245;.  A szuperblokk haszn&aacute;lata
      t&ouml;bb okb&oacute;l is aj&aacute;nlatos:</para>

    <itemizedlist>
      <listitem>
	<para>A csatlakoztat&aacute;skor megadott <acronym>ACL</acronym>
	  be&aacute;ll&iacute;t&aacute;s nem v&aacute;ltoztathat&oacute;
	  egy egyszer&#251; &uacute;jracsatlakoztat&aacute;ssal
	  (&man.mount.8; <option>-u</option>), csak egy teljes
	  lev&aacute;laszt&aacute;ssal (&man.umount.8;) &eacute;s egy
	  friss csatlakoztat&aacute;ssal (&man.mount.8;).  Ennek
	  &eacute;rtelm&eacute;ben az <acronym>ACL</acronym>-ek a
	  rendszerind&iacute;t&oacute; &aacute;llom&aacute;nyrendszeren
	  a rendszer indul&aacute;sa ut&aacute;n nem
	  enged&eacute;lyezhet&#245;ek.  &Aacute;m ez azt is jelenti,
	  hogy egy m&aacute;r haszn&aacute;latban lev&#245;
	  &aacute;llom&aacute;nyrendszer
	  be&aacute;ll&iacute;t&aacute;sai sem
	  v&aacute;ltoztathat&oacute;ak meg.</para>
      </listitem>

      <listitem>
	<para>Ha a kapcsol&oacute;t a szuperblokkban
	  &aacute;ll&iacute;tjuk be, akkor az
	  &aacute;llom&aacute;nyrendszert m&eacute;g akkor is
	  <acronym>ACL</acronym> t&aacute;mogat&aacute;ssal
	  csatlakoztatja a rendszer, ha azt nem adtuk meg az
	  <filename>fstab</filename> &aacute;llom&aacute;nyban vagy az
	  eszk&ouml;zeink &aacute;trendez&#245;dtek.  &Iacute;gy az
	  &aacute;llom&aacute;nyrendszereket m&eacute;g
	  v&eacute;letlen&uuml;l sem tudjuk <acronym>ACL</acronym>
	  haszn&aacute;lata n&eacute;lk&uuml;l csatlakoztatni, ami
	  egy&eacute;bk&eacute;nt &iacute;gy komoly biztons&aacute;gi
	  probl&eacute;m&aacute;kat okozhatna.</para>
      </listitem>
    </itemizedlist>

    <note>
      <para>Be&aacute;ll&iacute;thatjuk &uacute;gy is
	<acronym>ACL</acronym> kezel&eacute;s&eacute;t, hogy egy friss
	csatlakoztat&aacute;s n&eacute;lk&uuml;l is bekapcsolhat&oacute;
	legyen, azonban az ilyen &aacute;llom&aacute;nyrendszerek
	<acronym>ACL</acronym> n&eacute;lk&uuml;li
	csatlakoztat&aacute;s&aacute;t nem aj&aacute;nljuk senkinek,
	mivel ha egyszer m&aacute;r enged&eacute;lyezt&uuml;k a
	haszn&aacute;latukat, majd kikapcsoljuk ezeket &eacute;s
	v&eacute;g&uuml;l a kiterjesztett tulajdons&aacute;gok
	t&ouml;rl&eacute;se n&eacute;lk&uuml;l &uacute;jra
	enged&eacute;lyezz&uuml;k, akkor nagyon k&ouml;nnyen
	p&oacute;rul j&aacute;rhatunk.  Ha elkezdt&uuml;k
	haszn&aacute;lni az <acronym>ACL</acronym>-eket egy
	&aacute;llom&aacute;nyrendszeren, akkor ne tiltsuk le ezeket,
	mert az &iacute;gy keletkez&#245;
	&aacute;llom&aacute;nyv&eacute;delem nem felt&eacute;tlen&uuml;l
	lesz kompatibilis a felhaszn&aacute;l&oacute;k &aacute;ltal
	be&aacute;ll&iacute;tottakkal, &eacute;s az
	<acronym>ACL</acronym> &uacute;jraenged&eacute;lyez&eacute;se a
	v&aacute;ltoz&aacute;saik el&#245;tti kor&aacute;bbi
	<acronym>ACL</acronym> enged&eacute;lyeket fogja
	vissza&aacute;ll&iacute;tani az &aacute;llom&aacute;nyokra,
	aminek hat&aacute;sa kisz&aacute;m&iacute;thatatlan.</para>
    </note>

    <para>A hozz&aacute;f&eacute;r&eacute;s-vez&eacute;rl&eacute;si
      list&aacute;kat haszn&aacute;l&oacute;
      &aacute;llom&aacute;nyrendszerek eset&eacute;n egy
      <literal>+</literal> (plusz) jellel
      &aacute;br&aacute;zolj&aacute;k a kiterjesztett
      enged&eacute;lyeket.  P&eacute;ld&aacute;ul:</para>

    <programlisting>drwx------  2 robert  robert  512 Dec 27 11:54 private
drwxrwx---+ 2 robert  robert  512 Dec 23 10:57 k&ouml;nyvt&aacute;r1
drwxrwx---+ 2 robert  robert  512 Dec 22 10:20 k&ouml;nyvt&aacute;r2
drwxrwx---+ 2 robert  robert  512 Dec 27 11:57 k&ouml;nyvt&aacute;r3
drwxr-xr-x  2 robert  robert  512 Nov 10 11:54 public_html</programlisting>

    <para>L&aacute;thatjuk, hogy a
      <filename>k&ouml;nyvt&aacute;r1</filename>,
      <filename>k&ouml;nyvt&aacute;r2</filename> &eacute;s
      <filename>k&ouml;nyvt&aacute;r3</filename>
      k&ouml;nyvt&aacute;rakhoz tartoznak <acronym>ACL</acronym>
      t&iacute;pus&uacute; enged&eacute;lyek, m&iacute;g a
      <filename>public_html</filename> k&ouml;nyvt&aacute;rhoz
      nem.</para>

    <sect2>
      <title>Az <acronym>ACL</acronym>-ek haszn&aacute;lata</title>

      <para>Az &aacute;llom&aacute;nyrendszerben tal&aacute;lhat&oacute;
	<acronym>ACL</acronym> enged&eacute;lyeket a &man.getfacl.1;
	seg&eacute;dprogrammal n&eacute;zhetj&uuml;k meg.
	P&eacute;ld&aacute;ul a
	<filename><replaceable>pr&oacute;ba</replaceable></filename>
	&aacute;llom&aacute;ny <acronym>ACL</acronym> enged&eacute;lyeit
	a k&ouml;vetkez&#245; paranccsal tudjuk megn&eacute;zni:</para>

      <screen>&prompt.user; <userinput>getfacl <filename><replaceable>pr&oacute;ba</replaceable></filename></userinput>
	#file:<replaceable>pr&oacute;ba</replaceable>
	#owner:1001
	#group:1001
	user::rw-
	group::r--
	other::r--</screen>

      <para>Egy &aacute;llom&aacute;ny <acronym>ACL</acronym>
	enged&eacute;lyeit a &man.setfacl.1; seg&eacute;dprogrammal
	tudjuk megv&aacute;ltoztatni.  Figyelj&uuml;k meg:</para>

      <screen>&prompt.user; <userinput>setfacl -k <filename><replaceable>pr&oacute;ba</replaceable></filename></userinput></screen>

      <para>A <option>-k</option> opci&oacute; t&ouml;rli az &ouml;sszes
	<acronym>ACL</acronym> alap&uacute; enged&eacute;lyt egy
	&aacute;llom&aacute;nyr&oacute;l vagy
	&aacute;llom&aacute;nyrendszerr&#245;l.  Enn&eacute;l viszont
	sokkal hasznosabb a <option>-b</option> opci&oacute;
	haszn&aacute;lata, mivel az meghagyja az <acronym>ACL</acronym>
	m&#251;k&ouml;d&eacute;s&eacute;hez sz&uuml;ks&eacute;ges
	alapvet&#245; mez&#245;ket.</para>

      <screen>&prompt.user; <userinput>setfacl -m u:trhodes:rwx,group:web:r--,o::--- <filename><replaceable>pr&oacute;ba</replaceable></filename></userinput></screen>

      <para>Ebben a fenti parancsban a <option>-m</option> opci&oacute;t
	pedig arra haszn&aacute;ltuk, hogy m&oacute;dos&iacute;tsuk az
	alap&eacute;rtelmezett <acronym>ACL</acronym>
	bejegyz&eacute;seket.  Mivel az ezt megel&#245;z&#245;
	parancsban teljesen t&ouml;r&ouml;lt&uuml;k m&eacute;g az
	el&#245;redefini&aacute;lt bejegyz&eacute;seket is, ez a parancs
	a megadott param&eacute;terekkel kieg&eacute;sz&iacute;tve
	ezeket vissza fogja &aacute;ll&iacute;tani.  &Uuml;gyelj&uuml;nk
	arra, hogy ha olyan felhaszn&aacute;l&oacute;t vagy csoportot
	adunk meg, ami nem l&eacute;tezik a rendszerben, akkor a
	szabv&aacute;ny kimenetre egy <errorname>Invalid
	argument</errorname> hiba&uuml;zenetet kapunk.</para>

    </sect2>
  </sect1>

  <sect1 id="security-portaudit">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Tom</firstname>
	  <surname>Rhodes</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <indexterm><primary>Portaudit</primary></indexterm>

    <title>A k&uuml;ls&#245; programok biztons&aacute;gi
      probl&eacute;m&aacute;inak figyel&eacute;se</title>

    <para>Az ut&oacute;bbi &eacute;vekben a biztons&aacute;gi
      k&eacute;rd&eacute;sekkel foglalkoz&oacute; vil&aacute;gban
      sz&aacute;mos fejleszt&eacute;sre ker&uuml;lt sor a
      sebezhet&#245;s&eacute;gi figyelmeztet&eacute;sek
      feldolgoz&aacute;s&aacute;ban.  Manaps&aacute;g
      tulajdonk&eacute;ppen b&aacute;rmilyen oper&aacute;ci&oacute;s
      rendszer fokozott vesz&eacute;lynek teszik ki mag&aacute;t a
      k&uuml;ls&#245; programok telep&iacute;t&eacute;s&eacute;vel
      &eacute;s haszn&aacute;lat&aacute;val.</para>

    <para>A sebezhet&#245;s&eacute;gekr&#245;l besz&aacute;mol&oacute;
      &eacute;rtes&iacute;t&eacute;sek a biztons&aacute;g egyik
      alapk&ouml;ve, azonban a &os; projekt nem tud ilyen
      jelent&eacute;seket kiadni a &os; alaprendszer&eacute;n
      k&iacute;v&uuml;l minden egyes k&uuml;ls&#245;
      alkalmaz&aacute;shoz.  Azonban lehet&#245;s&eacute;g&uuml;nk van
      enyh&iacute;teni a k&uuml;ls&#245; csomagok
      sebezhet&#245;s&eacute;g&eacute;n &eacute;s figyelmeztetni a
      rendszergazd&aacute;kat az ismert biztons&aacute;gi
      probl&eacute;m&aacute;kra.  A &os;-nek van egy
      <application>Portaudit</application> nev&#251;
      seg&eacute;dprogramja, amit kiz&aacute;r&oacute;lag erre a
      c&eacute;lra hoztak l&eacute;tre.</para>

    <para>A <filename role="package">ports-mgmt/portaudit</filename> port
      egy adatb&aacute;zist haszn&aacute;l, ahol a &os;
      biztons&aacute;gi csapata &eacute;s a portok fejleszt&#245;i
      tartj&aacute;k karban az ismert biztons&aacute;gi
      probl&eacute;m&aacute;kat.</para>

    <para>A <application>Portaudit</application>
      haszn&aacute;lat&aacute;nak megkezd&eacute;s&eacute;hez
      telep&iacute;ts&uuml;k a
      Portgy&#251;jtem&eacute;nyb&#245;l:</para>

    <screen>&prompt.root; <userinput>cd /usr/ports/ports-mgmt/portaudit &amp;&amp; make install clean</userinput></screen>

    <para>A telep&iacute;t&eacute;si folyamat sor&aacute;n a
      &man.periodic.8; konfigur&aacute;ci&oacute;s
      &aacute;llom&aacute;nyai is friss&iacute;t&#245;dnek, &iacute;gy a
      <application>Portaudit</application> is lefut a napi
      biztons&aacute;gi ellen&#245;rz&eacute;sek folyam&aacute;n.
      Gondoskodjunk r&oacute;la, hogy a <username>root</username>
      felhaszn&aacute;l&oacute;nak lev&eacute;lben elk&uuml;ld&ouml;tt a
      napi biztons&aacute;gi &eacute;rtes&iacute;t&eacute;seket rendesen
      elolvassuk.  Nincs sz&uuml;ks&eacute;g&uuml;nk tov&aacute;bbi
      be&aacute;ll&iacute;t&aacute;sokra.</para>

    <para>A telep&iacute;t&eacute;s ut&aacute;n a rendszergazda a
      k&ouml;vetkez&#245; paranccsal tudja friss&iacute;teni a
      saj&aacute;t adatb&aacute;zisp&eacute;ld&aacute;ny&aacute;t
      &eacute;s megn&eacute;zni a pillanatnyilag telep&iacute;tett
      csomagok ismert sebezhet&#245;s&eacute;geit:</para>

    <screen>&prompt.root; <userinput>portaudit -Fda</userinput></screen>

    <note>
      <para>Ez az adatb&aacute;zis a &man.periodic.8; minden egy
	fut&aacute;sakor mag&aacute;t&oacute;l friss&uuml;l,
	ez&eacute;rt ez a parancs l&eacute;nyeg&eacute;ben
	elhagyhat&oacute;.  Egyed&uuml;l a soronk&ouml;vetkez&#245;
	p&eacute;ld&aacute;khoz kell kiadni.</para>
    </note>

    <para>A Portgy&#251;jtem&eacute;nyb&#245;l telep&iacute;tett
      k&uuml;ls&#245; alkalmaz&aacute;sok
      megb&iacute;zhat&oacute;s&aacute;g&aacute;nak
      ellen&#245;rz&eacute;s&eacute;t az al&aacute;bbi parancs
      kiad&aacute;s&aacute;val b&aacute;rmikor
      elv&eacute;gezhetj&uuml;k:</para>

    <screen>&prompt.root; <userinput>portaudit -a</userinput></screen>

    <para>A <application>Portaudit</application> ennek
      hat&aacute;s&aacute;ra valahogy &iacute;gy fogja
      megjelen&iacute;teni a sebezhet&#245; csomagokat:</para>

    <programlisting>Affected package: cups-base-1.1.22.0_1
Type of problem: cups-base -- HPGL buffer overflow vulnerability.
Reference: &lt;http://www.FreeBSD.org/ports/portaudit/40a3bca2-6809-11d9-a9e7-0001020eed82.html&gt;

1 problem(s) in your installed packages found.

You are advised to update or deinstall the affected package(s) immediately.</programlisting>

    <para>Ford&iacute;t&aacute;sa:</para>

    <programlisting>&Eacute;rintett csomag: cups-base-1.1.22.0_1
A probl&eacute;ma jellege: cups-base -- HPGL puffer t&uacute;lcsordul&aacute;si sebezhet&#245;s&eacute;g.
Link: &lt;http://www.FreeBSD.org/ports/portaudit/40a3bca2-6809-11d9-a9e7-0001020eed82.html&gt;

A telep&iacute;tett csomagokkal kapcsolatban 1 problem&aacute;t tal&aacute;ltam.

Javasoljuk, hogy az &eacute;rintett csomagokat azonnal friss&iacute;tse vagy t&aacute;vol&iacute;tsa el.</programlisting>

    <para>Ha a b&ouml;ng&eacute;sz&#245;nket az itt megadott
      c&iacute;mre ir&aacute;ny&iacute;tjuk, akkor megismerhetj&uuml;k a
      k&eacute;rd&eacute;ses sebezhet&#245;s&eacute;g pontosabb
      r&eacute;szleteit.  Ezen az oldalon megtal&aacute;lhatjuk a hiba
      &aacute;ltal &eacute;rintett verzi&oacute;kat a &os; portok
      verzi&oacute;ja szerint, illetve m&aacute;s olyan honlapokat, ahol
      biztons&aacute;gi figyelmeztet&eacute;seket
      tal&aacute;lhatunk.</para>

    <para>R&ouml;viden &ouml;sszefoglalva, a
      <application>Portaudit</application> egy komoly
      seg&eacute;deszk&ouml;z &eacute;s hitetlen&uuml;l hasznos
      kieg&eacute;sz&iacute;t&#245;je a
      <application>Portupgrade</application> portnak.</para>

  </sect1>

  <sect1 id="security-advisories">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Tom</firstname>
	  <surname>Rhodes</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <indexterm><primary>a FreeBSD biztons&aacute;gi
      figyelmeztet&eacute;sei</primary></indexterm>

    <title>A &os; biztons&aacute;gi figyelmeztet&eacute;sei</title>

    <para>A &os; t&ouml;bb m&aacute;s kereskedelmi
      min&#245;s&eacute;g&#251; oper&aacute;ci&oacute;s rendszerhez
      hasonl&oacute;an <quote>Biztons&aacute;gi
      figyelmezt&eacute;seket</quote> (Security Advisory) ad ki.  Ezek a
      figyelmeztet&eacute;sek &aacute;ltal&aacute;ban megjelennek a
      biztons&aacute;ggal foglalkoz&oacute; levelez&eacute;si
      list&aacute;kon &eacute;s a hivatkozott hib&aacute;k
      kijav&iacute;t&aacute;sa ut&aacute;n a megfelel&#245;
      kiad&aacute;sok hibajegyz&eacute;k&eacute;ben is.  Ebben a
      szakaszban megismerj&uuml;k &eacute;s &eacute;rtelmezz&uuml;k
      ezeket a figyelmeztet&eacute;seket, valamint megtudhatjuk, milyen
      l&eacute;p&eacute;seket kell megtenn&uuml;nk a rendszer&uuml;nk
      kijav&iacute;t&aacute;s&aacute;hoz.</para>

    <sect2>
      <title>Hogyan &eacute;p&uuml;l fel egy
	figyelmeztet&eacute;s?</title>

      <para>A &os; biztons&aacute;gi figyelmeztet&eacute;sei az
	al&aacute;bb l&aacute;that&oacute; form&aacute;ban jelennek meg,
	amit mi most a &a.security-notifications.name; levelez&eacute;si
	list&aacute;r&oacute;l k&ouml;lcs&ouml;n&ouml;zt&uuml;nk.</para>

      <programlisting>=============================================================================
&os;-SA-XX:XX.UTIL                                     Security Advisory
                                                          The &os; Project

Topic:          denial of service due to some problem<co id="co-topic">

Category:       core<co id="co-category">
Module:         sys<co id="co-module">
Announced:      2003-09-23<co id="co-announce">
Credits:        Person@EMAIL-ADDRESS<co id="co-credit">
Affects:        All releases of &os;<co id="co-affects">
                &os; 4-STABLE prior to the correction date
Corrected:      2003-09-23 16:42:59 UTC (RELENG_4, 4.9-PRERELEASE)
                2003-09-23 20:08:42 UTC (RELENG_5_1, 5.1-RELEASE-p6)
                2003-09-23 20:07:06 UTC (RELENG_5_0, 5.0-RELEASE-p15)
                2003-09-23 16:44:58 UTC (RELENG_4_8, 4.8-RELEASE-p8)
                2003-09-23 16:47:34 UTC (RELENG_4_7, 4.7-RELEASE-p18)
                2003-09-23 16:49:46 UTC (RELENG_4_6, 4.6-RELEASE-p21)
                2003-09-23 16:51:24 UTC (RELENG_4_5, 4.5-RELEASE-p33)
                2003-09-23 16:52:45 UTC (RELENG_4_4, 4.4-RELEASE-p43)
                2003-09-23 16:54:39 UTC (RELENG_4_3, 4.3-RELEASE-p39)<co id="co-corrected">
<acronym>CVE</acronym> Name:	CVE-XXXX-XXXX<co id="co-cve">

For general information regarding FreeBSD Security Advisories,
including descriptions of the fields above, security branches, and the
following sections, please visit
http://www.FreeBSD.org/security/.

I.   Background<co id="co-backround">


II.  Problem Description<co id="co-descript">


III. Impact<co id="co-impact">


IV.  Workaround<co id="co-workaround">


V.   Solution<co id="co-solution">


VI.  Correction details<co id="co-details">


VII. References<co id="co-ref"></programlisting>


      <calloutlist>
	<callout arearefs="co-topic">
	  <para>A <literal>Topic</literal> mez&#245;ben olvashatjuk
	    pontosan mi is maga a probl&eacute;ma.  Alapvet&#245;en
	    bemutatja az &eacute;rintett biztons&aacute;gi
	    figyelmeztet&eacute;st &eacute;s megeml&iacute;ti a
	    sebezhet&#245; seg&eacute;dprogramot.</para>
	</callout>

	<callout arearefs="co-category">
	  <para>A <literal>Category</literal> mez&#245; hivatkozik a
	    rendszer azon r&eacute;sz&eacute;re, amelyre a hiba
	    kihat&aacute;ssal lehet.  &Eacute;rt&eacute;ke lehet
	    <literal>core</literal>, <literal>contrib</literal> vagy
	    <literal>ports</literal>.  A <literal>core</literal>
	    kateg&oacute;ria azt jelzi, hogy a sebezhet&#245;s&eacute;g
	    a &os; legfontosabb komponenseit &eacute;rinti.  A
	    <literal>contrib</literal> kateg&oacute;ria a &os; projekt
	    sz&aacute;m&aacute;ra felaj&aacute;nlott szoftverek, mint
	    p&eacute;ld&aacute;ul a <application>sendmail</application>
	    sebezhet&#245;s&eacute;g&eacute;re utal.
	    V&eacute;gezet&uuml;l a <literal>ports</literal>
	    kateg&oacute;ria jelzi, hogy a sebezhet&#245;s&eacute;g
	    valamelyik, a Portgy&#251;jtem&eacute;nyben szerepl&#245;
	    szoftverre &eacute;rv&eacute;nyes.</para>
	</callout>

	<callout arearefs="co-module">
	  <para>A <literal>Module</literal> mez&#245; a sebezhet&#245;
	    komponens hely&eacute;t nevezi meg, p&eacute;ld&aacute;ul
	    <literal>sys</literal>.  Ebben a p&eacute;ld&aacute;ban azt
	    l&aacute;thatjuk, hogy a <literal>sys</literal> modul a
	    hib&aacute;s.  Ez&eacute;rt a sebezhet&#245;s&eacute;g egy
	    rendszermagban haszn&aacute;lt komponenst
	    &eacute;rint.</para>
	</callout>

	<callout arearefs="co-announce">
	  <para>Az <literal>Announced</literal> mez&#245; a
	    biztons&aacute;gi figyelmeztet&eacute;s
	    kiad&aacute;s&aacute;nak vagy sz&eacute;lesk&ouml;r&#251;
	    kihirdet&eacute;s&eacute;nek d&aacute;tum&aacute;t
	    r&ouml;gz&iacute;ti.  Ez azt jelenti, hogy a
	    biztons&aacute;gi csapat meggy&#245;z&#245;d&ouml;tt a
	    probl&eacute;ma l&eacute;tez&eacute;s&eacute;r&#245;l
	    &eacute;s a hib&aacute;t orvosol&oacute;
	    jav&iacute;t&aacute;s m&aacute;r felker&uuml;lt a &os;
	    forr&aacute;sk&oacute;dj&aacute;ba.</para>
	</callout>

	<callout arearefs="co-credit">
	  <para>A <literal>Credits</literal> mez&#245; azokat az
	    egy&eacute;neket vagy szervezeteket eml&iacute;ti meg, akik
	    &eacute;szlelt&eacute;k a sebezhet&#245;s&eacute;get
	    &eacute;s jelentett&eacute;k.</para>
	</callout>

	<callout arearefs="co-affects">
	  <para>Az <literal>Affects</literal> mez&#245;ben
	    megadj&aacute;k, hogy a &os; melyik kiad&aacute;saira van
	    hat&aacute;ssal a sebezhet&#245;s&eacute;g.  Ha a
	    rendszermag eset&eacute;n lefuttatjuk az
	    <command>ident</command> parancsot az &eacute;rintett
	    &aacute;llom&aacute;nyokra, akkor megtudhatjuk a pontos
	    rev&iacute;zi&oacute;jukat.  A portokn&aacute;l a
	    verzi&oacute;sz&aacute;m a port neve ut&aacute;n szerepel a
	    <filename>/var/db/pkg</filename> k&ouml;nyvt&aacute;rban.
	    Ha a rendszer&uuml;nket nem friss&iacute;tett&uuml;k
	    <acronym>CVS</acronym>-r&#245;l &eacute;s ford&iacute;tottuk
	    &uacute;jra, akkor nagy a
	    val&oacute;sz&iacute;n&#251;s&eacute;ge, hogy a
	    sebezhet&#245;s&eacute;g minket is &eacute;rint.</para>
	</callout>

	<callout arearefs="co-corrected">
	  <para>A <literal>Corrected</literal> mez&#245; tartalmazza a a
	    kijav&iacute;t&aacute;s d&aacute;tum&aacute;t,
	    idej&eacute;t, id&#245;z&oacute;n&aacute;j&aacute;t
	    &eacute;s az ezt tartalmaz&oacute; kiad&aacute;st.</para>
	</callout>

	<callout arearefs="co-cve">
	  <para>Az ismert sebezhet&#245;s&eacute;gek
	    adatb&aacute;zis&aacute;ban (Common Vulnerabilities
	    Database, CVD) haszn&aacute;lt azonos&iacute;t&aacute;si
	    inform&aacute;ci&oacute;k alapj&aacute;n v&eacute;gzett
	    keres&eacute;sek sz&aacute;m&aacute;ra fenntartott.</para>
	</callout>

	<callout arearefs="co-backround">
	  <para>A <literal>Background</literal> mez&#245; adja meg
	    r&eacute;szleteiben a sebezhet&#245; programmal kapcsolatos
	    tudnival&oacute;kat.  Az esetek
	    t&ouml;bbs&eacute;g&eacute;ben itt &iacute;rj&aacute;k le,
	    hogy mi&eacute;rt j&ouml;tt l&eacute;tre az adott
	    eszk&ouml;z a &os;-ben, mire haszn&aacute;lj&aacute;k
	    &eacute;s hogyan keletkezett.</para>
	</callout>

	<callout arearefs="co-descript">
	  <para>A <literal>Problem Description</literal> mez&#245; a
	    biztons&aacute;gi r&eacute;st r&eacute;szletezi.  Ebben a
	    r&eacute;szben szerepelhet a hib&aacute;s
	    k&oacute;dr&eacute;szlet vagy ak&aacute;r m&eacute;g az is,
	    hogy mik&eacute;nt kell vele el&#245;id&eacute;zni a
	    hib&aacute;t.</para>
	</callout>

	<callout arearefs="co-impact">
	  <para>Az <literal>Impact</literal> mez&#245; a probl&eacute;ma
	    lehets&eacute;ges hat&aacute;sait &iacute;rja
	    k&ouml;r&uuml;l a rendszerben.  Ez p&eacute;ld&aacute;ul
	    lehet egy DoS t&aacute;mad&aacute;s, speci&aacute;lis
	    enged&eacute;lyek ellop&aacute;sa vagy ak&aacute;r a
	    rendszeradminisztr&aacute;tori jogok
	    megszerz&eacute;se.</para>
	</callout>

	<callout arearefs="co-workaround">
	  <para>A <literal>Workaround</literal> mez&#245; igyekszik
	    elfogadhat&oacute; megold&aacute;st ny&uacute;jtani a
	    rendszer&uuml;k friss&iacute;t&eacute;s&eacute;re
	    k&eacute;ptelen rendszergazd&aacute;k sz&aacute;m&aacute;ra.
	    Ennek oka lehet az id&#245; r&ouml;vids&eacute;ge, a
	    h&aacute;l&oacute;zati el&eacute;rhet&#245;s&eacute;g vagy
	    m&aacute;s okokb&oacute;l fakad&oacute;
	    elcs&uacute;sz&aacute;s.  Ennek ellen&eacute;re a
	    biztons&aacute;gi k&eacute;rd&eacute;seket sosem szabad
	    f&eacute;lv&aacute;llr&oacute;l venni, ez&eacute;rt a
	    sebezhet&#245; rendszereket vagy ki kell jav&iacute;tani
	    vagy valamilyen m&oacute;don meg kell ker&uuml;lni a
	    biztons&aacute;gi r&eacute;s
	    kialakul&aacute;s&aacute;t.</para>
	</callout>

	<callout arearefs="co-solution">
	  <para>A <literal>Solution</literal> mez&#245;
	    utas&iacute;t&aacute;sokkal seg&iacute;t a rendszer
	    kijav&iacute;t&aacute;s&aacute;t.  Ez egy
	    l&eacute;p&eacute;sr&#245;l l&eacute;p&eacute;sre tesztelt
	    &eacute;s ellen&#245;rz&ouml;tt m&oacute;dszer, amellyel a
	    rendszer&uuml;nket megfelel&#245;en ki tudjuk
	    jav&iacute;tani &eacute;s biztons&aacute;goss&aacute;
	    tenni.</para>
	</callout>

	<callout arearefs="co-details">
	  <para>A <literal>Correction Details</literal> mez&#245;
	    mutatja a <acronym>CVS</acronym>-&aacute;g vagy
	    kiad&aacute;s nev&eacute;t, amelyben a pontokat
	    al&aacute;h&uacute;z&aacute;sra cser&eacute;lt&eacute;k.
	    Ezenk&iacute;v&uuml;l m&eacute;g az egyes &aacute;gakban az
	    &eacute;rintett &aacute;llom&aacute;nyok
	    rev&iacute;zi&oacute;j&aacute;t is mutatja.</para>
	</callout>

	<callout arearefs="co-ref">
	  <para>A <literal>References</literal> mez&#245;
	    &aacute;ltal&aacute;ban a t&eacute;m&aacute;val kapcsolatos
	    tov&aacute;bbi forr&aacute;sokat k&iacute;n&aacute;lja fel
	    <acronym>URL</acronym>, k&ouml;nyv, levelez&eacute;si lista
	    vagy h&iacute;rcsoport form&aacute;j&aacute;ban.</para>
	</callout>
      </calloutlist>

    </sect2>
  </sect1>

  <sect1 id="security-accounting">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Tom</firstname>
	  <surname>Rhodes</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <indexterm>
      <primary>a fut&oacute; programok
	nyilv&aacute;ntart&aacute;sa</primary>
    </indexterm>

    <title>A fut&oacute; programok nyilv&aacute;ntart&aacute;sa</title>

    <para>A fut&oacute; programok nyilv&aacute;ntart&aacute;sa olyan
      biztons&aacute;gi m&oacute;dszer, ahol a rendszergazda figyelemmel
      k&iacute;s&eacute;ri a rendszer haszn&aacute;latban lev&#245;
      er&#245;forr&aacute;sait, a felhaszn&aacute;l&oacute;k k&ouml;zti
      megoszl&aacute;s&aacute;t, gondoskodik a rendszer
      fel&uuml;gyelet&eacute;r&#245;l &eacute;s valamennyire nyomon
      k&ouml;veti a felhaszn&aacute;l&oacute;k parancsait.</para>

    <para>Ennek a m&oacute;dszernek egyar&aacute;nt megvannak a maga
      el&#245;nyei &eacute;s h&aacute;tr&aacute;nyai.  Az egyik
      el&#245;nye, hogy a haszn&aacute;lat&aacute;val a behatol&aacute;s
      eg&eacute;szen a bet&ouml;r&eacute;s pontj&aacute;ig
      visszak&ouml;vethet&#245;.  H&aacute;tranya viszont, hogy a
      fut&oacute; programok nyilv&aacute;ntart&aacute;sa rengeteg
      mennyis&eacute;g&#251; napl&oacute;t gener&aacute;l &eacute;s
      ehhez sok lemezter&uuml;letre lesz sz&uuml;ks&eacute;g&uuml;nk.
      Ebben a szakaszban v&eacute;gigj&aacute;rjuk a programok
      nyilv&aacute;ntart&aacute;s&aacute;nak alapjait.</para>

    <sect2>
      <title>A fut&oacute; programok
	nyilv&aacute;ntart&aacute;s&aacute;nak
	enged&eacute;lyez&eacute;se &eacute;s haszn&aacute;lata</title>

      <para>A fut&oacute; programok nyilv&aacute;ntart&aacute;s&aacute;t
	el&#245;sz&ouml;r enged&eacute;lyezn&uuml;nk kell.  Ehhez a
	k&ouml;vetkez&#245; parancsokat kell kiadnunk:</para>

      <screen>&prompt.root; <userinput>touch <filename>/var/account/acct</filename></userinput>

&prompt.root; <userinput>accton <filename>/var/account/acct</filename></userinput>

&prompt.root; <userinput>echo 'accounting_enable="YES"' &gt;&gt; <filename>/etc/rc.conf</filename></userinput></screen>

      <para>Miut&aacute;n aktiv&aacute;ltuk, a
	nyilv&aacute;ntart&aacute;st elkezdi sz&aacute;mbavenni a
	processzor kihaszn&aacute;lts&aacute;g&aacute;t, a parancsokat
	stb.  A nyilv&aacute;ntart&aacute;s emberek
	sz&aacute;m&aacute;ra nem olvashat&oacute; form&aacute;tumban
	k&eacute;sz&uuml;l, ez&eacute;rt csak az &man.sa.8;
	seg&eacute;dprogrammal tudjuk megn&eacute;zni.  Ha nem adunk meg
	neki semmilyen opci&oacute;t, akkor az <command>sa</command>
	kilist&aacute;zza a felhaszn&aacute;l&oacute;nk&eacute;nti
	h&iacute;v&aacute;sokat, az &ouml;sszes eltelt id&#245;t
	percben, a teljes processzor- &eacute;s
	felhaszn&aacute;l&oacute;i id&#245;t percben, az I/O
	m&#251;veletek &aacute;tlagos sz&aacute;m&aacute;t stb.</para>

      <para>A kiadott parancsokr&oacute;l a &man.lastcomm.1; programmal
	tudunk t&aacute;j&eacute;koz&oacute;dni.  A
	<command>lastcomm</command> seg&iacute;ts&eacute;g&eacute;vel ki
	tudjuk &iacute;ratni a felhaszn&aacute;l&oacute;k adott
	termin&aacute;lon kiadott parancsait is, mint
	p&eacute;ld&aacute;ul:</para>

      <screen>&prompt.root; <userinput>lastcomm ls
	<username>trhodes</username> ttyp1</userinput></screen>

      <para>Ezzel megjelenik a <username>trhodes</username> nev&#251;
	felhaszn&aacute;l&oacute; <literal>ttyp1</literal>
	termin&aacute;lon kiadott &ouml;sszes ismert
	<command>ls</command> parancsa.</para>

      <para>Sz&aacute;mos hasznos be&aacute;ll&iacute;t&aacute;st
	&eacute;s hozz&aacute;juk tartoz&oacute; le&iacute;r&aacute;st
	tal&aacute;lhatunk m&eacute;g a &man.lastcomm.1;, &man.acct.5;
	&eacute;s &man.sa.8; man oldalakon.</para>

    </sect2>
  </sect1>  
</chapter>

<!--
     Local Variables:
     mode: sgml
     sgml-declaration: "../chapter.decl"
     sgml-indent-data: t
     sgml-omittag: nil
     sgml-always-quote-attributes: t
     sgml-parent-document: ("../book.sgml" "part" "chapter")
     End:
-->
