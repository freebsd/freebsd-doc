<!--
     The FreeBSD Documentation Project

     $FreeBSD$
-->

<!-- The FreeBSD Hungarian Documentation Project
     Translated by: PALI, Gabor <pgj@FreeBSD.org>
     %SOURCE%	en_US.ISO8859-1/books/handbook/disks/chapter.sgml
     %SRCID%	1.298
-->

<chapter id="disks" lang="hu">
  <title>H&aacute;tt&eacute;rt&aacute;rak</title>

  <sect1 id="disks-synopsis">
    <title>&Aacute;ttekint&eacute;s</title>

    <para>Ez a fejezet arr&oacute;l sz&oacute;l, hogy mik&eacute;nt
      haszn&aacute;ljuk a lemezeinket a &os;-vel.  Itt t&ouml;bbek
      k&ouml;zt sz&oacute; esik a mem&oacute;ria (alap&uacute;)
      lemezekr&#245;l, a h&aacute;l&oacute;zaton kereszt&uuml;l
      csatlakoztatott meghajt&oacute;kr&oacute;l, a szabv&aacute;nyos
      SCSI/IDE t&aacute;rol&oacute;eszk&ouml;z&ouml;kr&#245;l &eacute;s
      az USB fel&uuml;letet haszn&aacute;l&oacute;
      eszk&ouml;z&ouml;kr&#245;l.</para>

    <para>A fejezet elolvas&aacute;sa sor&aacute;n
      megismerj&uuml;k:</para>

    <itemizedlist>
      <listitem>
	<para>a &os; &aacute;ltal alkalmazott
	  terminol&oacute;gi&aacute;t, amivel a fizikai lemezeken
	  elhelyezked&#245; adatokat &iacute;rja le
	  (part&iacute;ci&oacute;k &eacute;s slice-ok);</para>
      </listitem>
      <listitem>
	<para>hogyan b&#245;v&iacute;ts&uuml;k rendszer&uuml;nket
	  tov&aacute;bbi merevlemezekkel;</para>
      </listitem>
      <listitem>
	<para>hogyan &aacute;ll&iacute;tsuk be a &os;-t USB
	  t&aacute;rol&oacute;eszk&ouml;z&ouml;k
	  haszn&aacute;lat&aacute;ra;</para>
      </listitem>
      <listitem>
	<para>hogyan &aacute;ll&iacute;tsunk be virtu&aacute;lis
	  &aacute;llom&aacute;nyrendszereket, p&eacute;ld&aacute;ul
	  mem&oacute;rialemezeket;</para>
      </listitem>
      <listitem>
	<para>hogyan haszn&aacute;ljuk a kv&oacute;t&aacute;kat a
	  lemezter&uuml;let haszn&aacute;lat&aacute;nak
	  korl&aacute;toz&aacute;s&aacute;ra;</para>
      </listitem>
      <listitem>
	<para>hogyan v&eacute;dj&uuml;ket meg lemezeinket
	  titkos&iacute;t&aacute;ssal az
	  illet&eacute;ktelenekt&#245;l;</para>
      </listitem>
      <listitem>
	<para>&os; alatt hogyan k&eacute;sz&iacute;ts&uuml;nk &eacute;s
	  &iacute;rjuk CD-ket, DVD-ket;</para>
      </listitem>
      <listitem>
	<para>a biztons&aacute;gi ment&eacute;sek
	  k&eacute;sz&iacute;t&eacute;s&eacute;nek
	  k&uuml;l&ouml;nb&ouml;z&#245; lehet&#245;s&eacute;geit;</para>
      </listitem>
      <listitem>
	<para>hogyan haszn&aacute;ljuk a &os; alatt
	  rendelkez&eacute;s&uuml;nkre &aacute;ll&oacute;,
	  biztons&aacute;gi ment&eacute;st k&eacute;sz&iacute;t&#245;
	  programokat;</para>
      </listitem>
      <listitem>
	<para>hogyan ments&uuml;nk floppy lemezekre;</para>
      </listitem>
      <listitem>
	<para>mik az &aacute;llom&aacute;nyrendszerek
	  pillanatk&eacute;pei &eacute;s hogyan kell ezeket
	  hat&eacute;konyan haszn&aacute;lni.</para>
      </listitem>
    </itemizedlist>

    <para>A fejezet elolvas&aacute;s&aacute;hoz aj&aacute;nlott:</para>

    <itemizedlist>
      <listitem>
	<para>a &os; rendszermag
	  be&aacute;ll&iacute;t&aacute;s&aacute;nak &eacute;s
	  telep&iacute;t&eacute;s&eacute;nek ismerete (<xref
	  linkend="kernelconfig">)</para>
      </listitem>
    </itemizedlist>

  </sect1>

  <sect1 id="disks-naming">
    <title>Az eszk&ouml;z&ouml;k elnevez&eacute;sei</title>

    <para>A most k&ouml;vetkez&#245; list&aacute;ban felsoroljuk a &os;
      &aacute;ltal ismert fizikai
      t&aacute;rol&oacute;eszk&ouml;z&ouml;ket &eacute;s a
      hozz&aacute;juk tartoz&oacute; elnevez&eacute;seket.</para>

    <table id="disk-naming-physical-table" frame="none">
      <title>A fizikai lemezek elnevez&eacute;s&eacute;nek
	szab&aacute;lyai</title>

      <tgroup cols="2">
	<thead>
	  <row>
	    <entry>A meghajt&oacute; t&iacute;pusa</entry>
	    <entry>A meghajt&oacute;eszk&ouml;z neve</entry>
	  </row>
	</thead>
	<tbody>
	  <row>
	    <entry>IDE merevlemezek</entry>
	    <entry><literal>ad</literal></entry>
	  </row>
	  <row>
	    <entry>IDE CD-meghajt&oacute;k</entry>
	    <entry><literal>acd</literal></entry>
	  </row>
	  <row>
	    <entry>SCSI merevlemezek &eacute;s USB
	      t&aacute;rol&oacute;eszk&ouml;z&ouml;k</entry>
	    <entry><literal>da</literal></entry>
	  </row>
	  <row>
	    <entry>SCSI CD-meghajt&oacute;k</entry>
	    <entry><literal>cd</literal></entry>
	  </row>
	  <row>
	    <entry>K&uuml;l&ouml;nb&ouml;z&#245; nem szabv&aacute;nyos
	      CD-meghajt&oacute;k</entry>
	    <entry><literal>mcd</literal> (Mitsumi CD-ROM) &eacute;s
	      <literal>scd</literal> (Sony CD-ROM)
	    </entry>
	  </row>
	  <row>
	    <entry>Floppy meghajt&oacute;k</entry>
	    <entry><literal>fd</literal></entry>
	  </row>
	  <row>
	    <entry>SCSI szalagos meghajt&oacute;k</entry>
	    <entry><literal>sa</literal></entry>
	  </row>
	  <row>
	    <entry>IDE szalagos meghajt&oacute;k</entry>
	    <entry><literal>ast</literal></entry>
	  </row>
	  <row>
	    <entry>Flash meghajt&oacute;</entry>
	    <entry><literal>fla</literal> (&diskonchip; Flash
	      eszk&ouml;z)</entry>
	  </row>
	  <row>
	    <entry>RAID meghajt&oacute;k</entry>
	    <entry><literal>aacd</literal> (&adaptec; AdvancedRAID),
	      <literal>mlxd</literal> &eacute;s <literal>mlyd</literal>
	      (&mylex;), <literal>amrd</literal> (AMI &megaraid;),
	      <literal>idad</literal> (Compaq Smart RAID),
	      <literal>twed</literal> (&tm.3ware; RAID).</entry>
	  </row>
	</tbody>
      </tgroup>
    </table>

  </sect1>

  <sect1 id="disks-adding">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>David</firstname>
	  <surname>O'Brien</surname>
	  <contrib>Eredetileg &iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>Lemezek hozz&aacute;ad&aacute;sa</title>

    <indexterm>
      <primary>lemezek</primary>
      <secondary>hozz&aacute;ad&aacute;s</secondary>
    </indexterm>

    <para>Ebben a szakaszban arr&oacute;l lesz sz&oacute;, hogy a
      jelenleg egyetlen meghajt&oacute;t tartalmaz&oacute;
      rendszer&uuml;nket hogyan tudjuk b&#245;v&iacute;teni egy
      &uacute;j SCSI-lemez hozz&aacute;ad&aacute;s&aacute;val.  Ehhez
      els&#245;k&eacute;nt kapcsoljuk ki a
      sz&aacute;m&iacute;t&oacute;g&eacute;p&uuml;nket &eacute;s
      szerelj&uuml;k be a hely&eacute;re az &uacute;j meghajt&oacute;t a
      sz&aacute;m&iacute;t&oacute;g&eacute;p, a lemezvez&eacute;rl&#245;
      &eacute;s a meghajt&oacute; gy&aacute;rt&oacute;j&aacute;nak
      utas&iacute;t&aacute;sai alapj&aacute;n.  Mivel ezt a
      m&#251;veletet rengeteg m&oacute;don lehet elv&eacute;gezni,
      ez&eacute;rt ennek pontos r&eacute;szleteivel ez a
      le&iacute;r&aacute;s most nem foglalkozik.</para>

    <para>Jelentkezz&uuml;nk be <username>root</username>
      felhaszn&aacute;l&oacute;k&eacute;nt.  Miut&aacute;n
      beszerelt&uuml;k a meghajt&oacute;t, a
      <filename>/var/run/dmesg.boot</filename> &aacute;llom&aacute;ny
      v&eacute;gign&eacute;z&eacute;s&eacute;vel bizonyosodjuk meg
      r&oacute;la, hogy a rendszer val&oacute;ban megtal&aacute;lta a
      lemezt.  A p&eacute;ld&aacute;nk szerint ez a meghajt&oacute;
      teh&aacute;t a <devicename>da1</devicename> nevet fogja viselni,
      amelyet a <filename>/1</filename> k&ouml;nyvt&aacute;rba akarunk
      csatlakoztatni (ha IDE-meghajt&oacute;t telep&iacute;t&uuml;nk,
      akkor a hozz&aacute; tartoz&oacute; eszk&ouml;z neve
      <devicename>ad1</devicename> lesz).</para>

    <indexterm><primary>part&iacute;ci&oacute;k</primary></indexterm>
    <indexterm><primary>slice-ok</primary></indexterm>
    <indexterm><primary><command>fdisk</command></primary></indexterm>

    <para>Mivel a &os; IBM PC kompatibilis
      sz&aacute;m&iacute;t&oacute;g&eacute;peken fut, ez&eacute;rt nem
      szabad figyelmen k&iacute;v&uuml;l hagynunk a PC BIOS
      part&iacute;ci&oacute;it is.  Ezek elt&eacute;rnek a
      hagyom&aacute;nyos BSD part&iacute;ci&oacute;kt&oacute;l.  Egy
      PC-s lemeznek n&eacute;gy BIOS-os
      part&iacute;ci&oacute;bejegyz&eacute;se lehet.  Ha egy lemezt
      t&eacute;nyleg csak a &os;-nek sz&aacute;nunk, akkor
      haszn&aacute;lhatjuk az &uacute;n.
      <emphasis>dedik&aacute;lt</emphasis> m&oacute;dot.  Minden
      m&aacute;s esetben a &os;-nek egy PC BIOS
      part&iacute;ci&oacute;ban kell elhelyezkednie.  A &os; a PC BIOS
      part&iacute;ci&oacute;it <emphasis>slice</emphasis>-nak nevezi,
      ezzel k&uuml;l&ouml;nb&ouml;zteti ezeket a hagyom&aacute;nyos BSD
      part&iacute;ci&oacute;kt&oacute;l.  Dedik&aacute;lt esetekben is
      haszn&aacute;lhatjuk, de els&#245;sorban akkor kap fontosabb
      szerepet, amikor a &os;-nek m&aacute;s oper&aacute;ci&oacute;s
      rendszerekkel kell megosztani a helyet.  Ezzel el tudjuk
      ker&uuml;lni, hogy a m&aacute;s oper&aacute;ci&oacute;s
      rendszerekben megtal&aacute;lhat&oacute;, nem &os; alap&uacute;
      <command>fdisk</command> parancs megzavarodjon.</para>

    <para>A slice-ok haszn&aacute;latakor a meghajt&oacute;
      <filename>/dev/da1s1e</filename> n&eacute;ven ker&uuml;l
      hozz&aacute;ad&aacute;sra.  &Iacute;gy kell olvasni: egyes SCSI
      lemezes egys&eacute;g (m&aacute;sodik SCSI lemez), els&#245; slice
      (els&#245; PC BIOS part&iacute;ci&oacute;) &eacute;s
      <filename>e</filename> BSD part&iacute;ci&oacute;.  A
      dedik&aacute;lt esetben a meghajt&oacute; neve viszont
      egyszer&#251;en csak <filename>/dev/da1e</filename>.</para>

    <para>Mivel a &man.bsdlabel.8; 32 bites eg&eacute;sz sz&aacute;mokat
      haszn&aacute;l a szektorok sz&aacute;m&aacute;nak
      t&aacute;rol&aacute;s&aacute;ra, ez&eacute;rt lemezenk&eacute;nt
      csak 2^32-1 szektort tud &aacute;br&aacute;zolni, ami az esetek
      t&ouml;bbs&eacute;g&eacute;ben 2&nbsp;TB m&eacute;ret&#251;
      c&iacute;mezhet&#245; ter&uuml;letet jelent.  Az &man.fdisk.8;
      form&aacute;tuma szerint sem a kezd&#245;szektor, sem a hossz nem
      lehet 2^32-1-n&eacute;l t&ouml;bb, amivel &iacute;gy a
      part&iacute;ci&oacute;kat 2&nbsp;TB, a lemezeket pedig 4&nbsp;TB
      m&eacute;ret&#251;re korl&aacute;tozza.  A &man.sunlabel.8;
      form&aacute;tuma part&iacute;ci&oacute;nk&eacute;nt 2^32-1
      szektort enged meg &eacute;s &ouml;sszesen 8
      part&iacute;ci&oacute;t, amely ez&aacute;ltal 16&nbsp;TB
      ter&uuml;let lefed&eacute;s&eacute;t teszi lehet&#245;v&eacute;.
      Nagyobb lemezekhez &man.gpt.8; part&iacute;ci&oacute;k
      haszn&aacute;latosak.</para>

    <sect2>
      <title>A &man.sysinstall.8; haszn&aacute;lat&aacute;val</title>

      <indexterm>
	<primary><application>sysinstall</application></primary>
	<secondary>lemezek hozz&aacute;ad&aacute;sa</secondary>
      </indexterm>
      <indexterm><primary>su</primary></indexterm>

      <procedure>
	<step>
	  <title>K&ouml;zleked&eacute;s a
	    <application>sysinstall</application> programban</title>

	  <para>A <command>sysinstall</command> k&ouml;nnyen
	    haszn&aacute;lhat&oacute; men&uuml;inek
	    seg&iacute;ts&eacute;g&eacute;vel az &uacute;j lemezen
	    pillanatok alatt l&eacute;tre tudunk hozni
	    part&iacute;ci&oacute;kat &eacute;s
	    megc&iacute;mk&eacute;zni ezeket.  Ehhez vagy
	    <username>root</username>
	    felhaszn&aacute;l&oacute;k&eacute;nt jelentkezz&uuml;nk be a
	    rendszerbe, vagy adjuk ki a <command>su</command> parancsot.
	    A <command>sysinstall</command> parancs kiad&aacute;sa
	    ut&aacute;n l&eacute;pj&uuml;nk be a
	    <literal>Configure</literal>
	    (Be&aacute;ll&iacute;t&aacute;sok) men&uuml;be.  A
	    <literal>&os; Configuration Menu</literal> men&uuml;ben
	    ezut&aacute;n keress&uuml;k meg &eacute;s v&aacute;lasszuk
	    ki az <literal>Fdisk</literal> men&uuml;pontot.</para>
	</step>

	<step>
	  <title>Az <application>fdisk</application>
	    part&iacute;ci&oacute;szerkeszt&#245;</title>

	  <para>Miut&aacute;n eljutottunk az
	    <application>fdisk</application> alkalmaz&aacute;shoz, az
	    <keycap>A</keycap> lenyom&aacute;s&aacute;val
	    felaj&aacute;nlhatjuk az eg&eacute;sz lemezt a &os;
	    sz&aacute;m&aacute;ra.  Amikor el&#245;ker&uuml;l a
	    k&eacute;rd&eacute;s, hogy <quote>remain cooperative with
	    any future possible operating systems</quote>
	    (<quote>m&#251;k&ouml;d&#245;k&eacute;pes maradjon-e a
	    k&eacute;s&#245;bbiekben telep&iacute;tend&#245;
	    oper&aacute;ci&oacute;s rendszerekkel</quote>), akkor
	    v&aacute;laszoljuk r&aacute; <literal>YES</literal>-szel
	    (teh&aacute;t igen).  A <keycap>W</keycap> gomb
	    lenyom&aacute;s&aacute;val &iacute;rjuk a lemezre a most
	    elv&eacute;gzett v&aacute;ltoztat&aacute;sokat.
	    Ezut&aacute;n m&aacute;r a <keycap>Q</keycap>
	    haszn&aacute;lat&aacute;val ki is l&eacute;phet&uuml;nk az
	    FDISK szerkeszt&#245;b&#245;l.  A k&ouml;vetkez&#245;
	    l&eacute;p&eacute;sben a <quote>Master Boot
	    Record</quote>-r&oacute;l fognak minket megk&eacute;rdezni.
	    Mivel most egy m&aacute;r m&#251;k&ouml;d&#245; rendszert
	    b&#245;v&iacute;t&uuml;nk, ez&eacute;rt a v&aacute;laszunk
	    erre <literal>None</literal> lesz.</para>
	</step>

	<step>
	  <title>A lemezc&iacute;mk&eacute;k szerkeszt&eacute;se</title>

	  <indexterm><primary>BSD
	    part&iacute;ci&oacute;k</primary></indexterm>

	  <para>Most l&eacute;pj&uuml;nk ki a
	    <application>sysinstall</application>
	    alkalmaz&aacute;sb&oacute;l &eacute;s ind&iacute;tsuk el
	    &uacute;jra.  K&ouml;vess&uuml;k az im&eacute;nti
	    &uacute;tmutat&aacute;sokat, de ez&uacute;ttal a
	    <literal>Label</literal> men&uuml;pontot v&aacute;lasszuk
	    ki.  Ezzel a <literal>Disk Label Editor</literal>-ba vagyis
	    a lemezc&iacute;mk&eacute;k szerkeszt&#245;j&eacute;hez
	    jutunk.  Itt fogjuk l&eacute;trehozni a hagyom&aacute;nyos
	    BSD part&iacute;ci&oacute;kat.  Egy lemezen nyolc ilyen
	    part&iacute;ci&oacute; lehet,
	    <literal>a</literal>-t&oacute;l <literal>h</literal>-ig.
	    K&ouml;z&uuml;l&uuml;k n&eacute;h&aacute;ny
	    part&iacute;ci&oacute; c&iacute;mk&eacute;j&eacute;t
	    megk&uuml;l&ouml;nb&ouml;ztetj&uuml;k.  Az
	    <literal>a</literal> part&iacute;ci&oacute; jel&ouml;li a
	    rendszer ind&iacute;t&aacute;s&aacute;hoz haszn&aacute;lt
	    part&iacute;ci&oacute;t, a
	    gy&ouml;k&eacute;rpart&iacute;ci&oacute;t
	    (<filename>/</filename>).  Teh&aacute;t <literal>a</literal>
	    part&iacute;ci&oacute; csak a rendszerlemez&uuml;nk&ouml;n
	    szerepelhet (teh&aacute;t ahonnan indul a rendszer).  A
	    <literal>b</literal> part&iacute;ci&oacute; a
	    lapoz&aacute;shoz haszn&aacute;lt part&iacute;ci&oacute;kat
	    jel&ouml;li &eacute;s t&ouml;bb lemezen is szerepelhet.  A
	    <literal>c</literal> part&iacute;ci&oacute;n kereszt&uuml;l
	    lehet el&eacute;rni az eg&eacute;szt lemezt dedik&aacute;lt
	    m&oacute;dban vagy az eg&eacute;sz &os; slice-ot slice
	    m&oacute;dban.  A t&ouml;bbi part&iacute;ci&oacute;
	    tetsz&#245;legesen felhaszn&aacute;lhat&oacute;.</para>

	  <para>A <application>sysinstall</application>
	    c&iacute;mkeszerkeszt&#245;je az <literal>e</literal>
	    bet&#251;vel szereti megjel&ouml;lni a sem nem
	    rendszerind&iacute;t&oacute;, sem nem lapoz&oacute;
	    part&iacute;ci&oacute;kat.  A c&iacute;mkeszerkeszt&#245;ben
	    egyetlen &aacute;llom&aacute;nyrendszert a
	    <keycap>C</keycap> lenyom&aacute;s&aacute;val lehet
	    k&eacute;sz&iacute;teni.  Amikor erre v&aacute;laszul
	    megk&eacute;rdezi a t&iacute;pus&aacute;t (FS
	    (&aacute;llom&aacute;nyrendszer) vagy swap
	    (lapoz&oacute;ter&uuml;let) legyen), akkor v&aacute;lasszuk
	    az <literal>FS</literal> be&aacute;ll&iacute;t&aacute;st
	    &eacute;s adjuk meg a csatlakoz&aacute;si pontj&aacute;t
	    (p&eacute;ld&aacute;ul <filename>/mnt</filename>).  Amikor a
	    lemezt telep&iacute;t&eacute;s ut&aacute;n (post-install)
	    adjuk hozz&aacute;, akkor a
	    <application>sysinstall</application>
	    val&oacute;j&aacute;ban nem hoz l&eacute;tre hozz&aacute;
	    bejegyz&eacute;seket az <filename>/etc/fstab</filename>
	    &aacute;llom&aacute;nyban, ez&eacute;rt a
	    csatlakoz&aacute;si pont megad&aacute;sa nem is
	    felt&eacute;tlen&uuml;l fontos.</para>

	  <para>Most m&aacute;r k&eacute;szen &aacute;llunk arra, hogy
	    r&ouml;gz&iacute;ts&uuml;k az &uacute;j c&iacute;mk&eacute;t
	    a lemezre &eacute;s l&eacute;trehozzunk vele egy
	    &aacute;llom&aacute;nyrendszert.  Ehhez nyomjuk le a
	    <keycap>W</keycap> gombot.  Ne foglalkozzunk vele, ha a
	    <application>sysinstall</application> nem k&eacute;pes
	    csatlakoztatni az &uacute;j part&iacute;ci&oacute;t.  Ha
	    ezzel megvagyunk, akkor l&eacute;pj&uuml;nk ki a
	    c&iacute;mkeszerkeszt&#245;b&#245;l &eacute;s a
	    <application>sysinstall</application>b&oacute;l is.</para>
	</step>

	<step>
	  <title>Befejez&eacute;s</title>

	  <para>Most m&aacute;r csak annyi teend&#245;nk maradt, hogy
	    felvegy&uuml;k az <filename>/etc/fstab</filename>
	    &aacute;llom&aacute;nyba az &uacute;j lemezhez
	    tartoz&oacute; bejegyz&eacute;st.</para>
	</step>
      </procedure>
    </sect2>

    <sect2>
      <title>Parancssoros eszk&ouml;z&ouml;k
	haszn&aacute;lat&aacute;val</title>

      <sect3>
	<title>Slice m&oacute;dban</title>

	<para>Ezzel a be&aacute;ll&iacute;t&aacute;ssal a
	  lemez&uuml;nkre k&eacute;s&#245;bb m&aacute;s
	  oper&aacute;ci&oacute;s rendszereket is
	  telep&iacute;thet&uuml;nk, &eacute;s nem okoz gondot a
	  saj&aacute;t <command>fdisk</command> seg&eacute;dprogramjaik
	  m&#251;k&ouml;d&eacute;s&eacute;ben.  Az &uacute;j lemezek
	  telep&iacute;t&eacute;s&eacute;n&eacute;l ezt a m&oacute;dszer
	  aj&aacute;nlatos k&ouml;vetni.  A dedik&aacute;lt m&oacute;dot
	  viszont csak abban az esetben haszn&aacute;ljuk, ha erre
	  nyom&oacute;s okunk van!</para>

	<screen>&prompt.root; <userinput>dd if=/dev/zero of=/dev/da1 bs=1k count=1</userinput>
&prompt.root; <userinput>fdisk -BI da1</userinput> # inicializ&aacute;ljuk az &uacute;j lemezt
&prompt.root; <userinput>bsdlabel -B -w da1s1 auto</userinput> # c&iacute;mk&eacute;zz&uuml;k meg
&prompt.root; <userinput>bsdlabel -e da1s1</userinput> # szerkeszz&uuml;k &aacute;t a frissen l&eacute;trehozott c&iacute;mk&eacute;t &eacute;s vegy&uuml;nk fel egy &uacute;j part&iacute;ci&oacute;t
&prompt.root; <userinput>mkdir -p /1</userinput>
&prompt.root; <userinput>newfs /dev/da1s1e</userinput> # ism&eacute;telj&uuml;k meg minden l&eacute;trehozott part&iacute;ci&oacute;hoz
&prompt.root; <userinput>mount /dev/da1s1e /1</userinput> # csatlakoztassuk a part&iacute;ci&oacute;(ka)t
&prompt.root; <userinput>vi /etc/fstab</userinput> # vegy&uuml;k fel a megfelel&#245; bejegyz&eacute;s(eke)t az <filename>/etc/fstab</filename> &aacute;llom&aacute;nyba</screen>

	<para>IDE-lemezek eset&eacute;n az<devicename>ad</devicename>
	  eszk&ouml;zt a <devicename>da</devicename> eszk&ouml;zzel
	  helyettes&iacute;ts&uuml;k.</para>

      </sect3>

      <sect3>
	<title>Dedik&aacute;lt m&oacute;dban</title>

	<indexterm><primary>OS/2</primary></indexterm>

	<para>Amennyiben az &uacute;j meghajt&oacute;t nem akarjuk
	  megosztani egyetlen m&aacute;s oper&aacute;ci&oacute;s
	  rendszerrel sem, haszn&aacute;lhatjuk a
	  <literal>dedicated</literal> (dedik&aacute;lt) m&oacute;dot.
	  Ne felejts&uuml;k el azonban, hogy ez k&eacute;pes
	  &ouml;sszezavarni a Microsoft oper&aacute;ci&oacute;s
	  rendszereit, hab&aacute;r ebb&#245;l semmilyen k&aacute;runk
	  nem fog sz&aacute;rmazni.  Az IBM &os2;
	  oper&aacute;ci&oacute;s rendszere azonban
	  <quote>kisaj&aacute;t&iacute;t</quote> minden olyan
	  part&iacute;ci&oacute;t, amelyet nem tud olvasni.</para>

	<screen>&prompt.root; <userinput>dd if=/dev/zero of=/dev/da1 bs=1k count=1</userinput>
&prompt.root; <userinput>bsdlabel -Bw da1 auto</userinput>
&prompt.root; <userinput>bsdlabel -e da1</userinput>				# l&eacute;trehozzuk az `e' part&iacute;ci&oacute;t
&prompt.root; <userinput>newfs /dev/da1e</userinput>
&prompt.root; <userinput>mkdir -p /1</userinput>
&prompt.root; <userinput>vi /etc/fstab</userinput>				# felvessz&uuml;k a /dev/da1e part&iacute;ci&oacute;t
&prompt.root; <userinput>mount /1</userinput></screen>

	<para>Egy m&aacute;sik megold&aacute;s:</para>

	<screen>&prompt.root; <userinput>dd if=/dev/zero of=/dev/da1 count=2</userinput>
&prompt.root; <userinput>bsdlabel /dev/da1 | bsdlabel -BR da1 /dev/stdin</userinput>
&prompt.root; <userinput>newfs /dev/da1e</userinput>
&prompt.root; <userinput>mkdir -p /1</userinput>
&prompt.root; <userinput>vi /etc/fstab</userinput>					# felvessz&uuml;k a /dev/da1e part&iacute;ci&oacute;t
&prompt.root; <userinput>mount /1</userinput></screen>

      </sect3>
    </sect2>
  </sect1>

  <sect1 id="raid">
    <title>RAID</title>

    <sect2 id="raid-soft">
      <title>Szoftveres RAID</title>

      <sect3 id="ccd">
	<sect3info>
	  <authorgroup>
	    <author>
	      <firstname>Christopher</firstname>
	      <surname>Shumway</surname>
	      <contrib>Eredetileg k&eacute;sz&iacute;tette: </contrib>
	    </author>
	  </authorgroup>
	  <authorgroup>
	    <author>
	      <firstname>Jim</firstname>
	      <surname>Brown</surname>
	      <contrib>Ellen&#245;rizte: </contrib>
	    </author>
	  </authorgroup>
	</sect3info>

	<indexterm><primary>RAID</primary><secondary>szoftveres</secondary></indexterm>
	<indexterm><primary>RAID</primary><secondary>CCD</secondary></indexterm>

	<title>&Ouml;sszef&#251;z&ouml;tt lemezek
	  be&aacute;ll&iacute;t&aacute;sa</title>

	<para>A nagyobb m&eacute;ret&#251;
	  h&aacute;tt&eacute;rt&aacute;rol&oacute;k
	  kiv&aacute;laszt&aacute;s&aacute;n&aacute;l a legfontosabb
	  t&eacute;nyez&#245;k a sebess&eacute;g,
	  megb&iacute;zhat&oacute;s&aacute;g &eacute;s a
	  k&ouml;lts&eacute;g.  Nagyon ritk&aacute;n lehet csak ezt a
	  h&aacute;rmat egyens&uacute;lyba hozni:
	  &aacute;ltal&aacute;ban a gyors &eacute;s
	  megb&iacute;zhat&oacute;
	  t&aacute;rol&oacute;eszk&ouml;z&ouml;k sok p&eacute;nzbe
	  ker&uuml;lnek, valamint a k&ouml;lts&eacute;gek
	  megtakar&iacute;t&aacute;s&aacute;hoz vagy a sebess&eacute;get
	  vagy pedig a megb&iacute;zhat&oacute;s&aacute;got kell
	  fel&aacute;ldoznunk.</para>

	<para>A tov&aacute;bbiakban egy olyan rendszert mutatunk be,
	  ahol a els&#245;sorban a k&ouml;lts&eacute;gek, majd csak
	  ezut&aacute;n a sebess&eacute;g &eacute;s
	  megb&iacute;zhat&oacute;s&aacute;g ker&uuml;ltek
	  el&#245;t&eacute;rben.  A rendszer adat&aacute;tviteli
	  sebess&eacute;g&eacute;t a h&aacute;l&oacute;zat
	  korl&aacute;tozza.  Hab&aacute;r emellett a
	  megb&iacute;zhat&oacute;s&aacute;g is nagyon fontos, a
	  t&aacute;rgyalt &ouml;sszef&#251;z&ouml;tt meghajt&oacute;
	  (Concenated Disk, CCD) csak adatokat szolg&aacute;ltat
	  &eacute;s a teljes tartalma b&aacute;rmikor
	  vissza&aacute;ll&iacute;that&oacute;, mivel
	  rendelkez&eacute;sre &aacute;ll CD-n.</para>

	<para>A feladat elv&eacute;gz&eacute;s&eacute;re alkalmas
	  h&aacute;tt&eacute;rt&aacute;rol&oacute;
	  kiv&aacute;laszt&aacute;s&aacute;ban els&#245;k&eacute;nt a
	  saj&aacute;t elv&aacute;r&aacute;sainkat kell tudnunk
	  megfogalmazni.  Ha nek&uuml;nk jobban sz&aacute;m&iacute;t az
	  &aacute;rn&aacute;l a sebess&eacute;g vagy a
	  megb&iacute;zhat&oacute;s&aacute;g, akkor a
	  mostaniakt&oacute;l n&eacute;mileg elt&eacute;r&#245;
	  konfigur&aacute;ci&oacute;t kell majd
	  &eacute;p&iacute;ten&uuml;nk.</para>

	<sect4 id="ccd-installhw">
	  <title>A hardver telep&iacute;t&eacute;se</title>

	  <para>A rendszert tartalmaz&oacute; IDE-lemez mellett
	    h&aacute;rom darab, egyenk&eacute;nt 30&nbsp;GB-os 5400-as
	    percenk&eacute;nti fordulatsz&aacute;m&uacute; Western
	    Digital gy&aacute;rtm&aacute;ny&uacute; merevlemez alkotja
	    majd a l&eacute;trehozni k&iacute;v&aacute;nt, kb.
	    90&nbsp;GB &ouml;sszm&eacute;ret&#251;
	    &ouml;sszef&#251;z&ouml;tt lemezt.  Ide&aacute;lis esetben
	    minden IDE-lemez saj&aacute;t k&uuml;l&ouml;n
	    vez&eacute;rl&#245;n &eacute;s k&aacute;belen van, de a
	    k&ouml;lts&eacute;gek cs&ouml;kkent&eacute;se miatt nem
	    haszn&aacute;ltunk tov&aacute;bbi
	    IDE-vez&eacute;rl&#245;ket.  Ehelyett ink&aacute;bb
	    jumperekkel &uacute;gy &aacute;ll&iacute;tottuk be a
	    lemezeket, hogy minden vez&eacute;rl&#245;re egy mester
	    (master) &eacute;s egy szolga (slave) m&oacute;d&uacute;
	    merevlemez kapcsol&oacute;djon.</para>

	  <para>A beszerel&eacute;s ut&aacute;n
	    be&aacute;ll&iacute;tottuk a rendszer BIOS-&aacute;t, hogy
	    automatikusan felismerje a csatlakoztatott lemezeket.  De
	    ami m&eacute;g fontosabb, hogy a &os; is &eacute;szlelte
	    ezeket az ind&iacute;t&aacute;s sor&aacute;n:</para>

	  <programlisting>ad0: 19574MB &lt;WDC WD205BA&gt; [39770/16/63] at ata0-master UDMA33
ad1: 29333MB &lt;WDC WD307AA&gt; [59598/16/63] at ata0-slave UDMA33
ad2: 29333MB &lt;WDC WD307AA&gt; [59598/16/63] at ata1-master UDMA33
ad3: 29333MB &lt;WDC WD307AA&gt; [59598/16/63] at ata1-slave UDMA33</programlisting>

	  <note>
	    <para>Ha a &os; nem l&aacute;tn&aacute; az &ouml;sszes
	      lemezt, akkor ellen&#245;rizz&uuml;k a jumperek helyes
	      be&aacute;ll&iacute;t&aacute;s&aacute;t.  Napjainkban a
	      legt&ouml;bb IDE-meghajt&oacute;n tal&aacute;lunk egy
	      <quote>Cable Select</quote> jumpert is.  Ezzel
	      <emphasis>nem</emphasis> a mester/szolga m&oacute;dot
	      &aacute;ll&iacute;tjuk be!  A megfelel&#245; jumper
	      beazonos&iacute;t&aacute;s&aacute;hoz olvassuk el a
	      meghajt&oacute;hoz tartoz&oacute;
	      dokument&aacute;ci&oacute;t.</para>
	  </note>

	  <para>A k&ouml;vetkez&#245; l&eacute;p&eacute;sben azt
	    vessz&uuml;k nagy&iacute;t&oacute; al&aacute;, hogyan lehet
	    ezeket az &aacute;llom&aacute;nyrendszer
	    r&eacute;sz&eacute;v&eacute; tenni.  Ezzel kapcsolatban a
	    &man.vinum.8; (<xref linkend="vinum-vinum">) &eacute;s a
	    &man.ccd.4; elolvas&aacute;sa aj&aacute;nlatos.  Erre a
	    c&eacute;lra itt most a &man.ccd.4;
	    haszn&aacute;lat&aacute;t v&aacute;lasztottuk.</para>

	</sect4>

	<sect4 id="ccd-setup">
	  <title>A CCD be&aacute;ll&iacute;t&aacute;sa</title>

	  <para>A &man.ccd.4; meghajt&oacute;
	    seg&iacute;ts&eacute;g&eacute;vel t&ouml;bb ugyanolyan
	    lemezt tudunk &ouml;sszef&#251;zni egyetlen logikai
	    &aacute;llom&aacute;nyrendszerr&eacute;.  A &man.ccd.4;
	    haszn&aacute;lat&aacute;hoz arra is
	    sz&uuml;ks&eacute;g&uuml;nk van, hogy a &man.ccd.4;
	    t&aacute;mogat&aacute;sa jelen legyen a rendszermagban.  A
	    k&ouml;vetkez&#245; sor tegy&uuml;k bele a rendszermag
	    konfigur&aacute;ci&oacute;s
	    &aacute;llom&aacute;ny&aacute;ba, ford&iacute;tsuk
	    &uacute;jra &eacute;s telep&iacute;ts&uuml;k a
	    rendszermagot:</para>

	  <programlisting>device   ccd</programlisting>

	  <para>A &man.ccd.4; t&aacute;mogat&aacute;sa modulk&eacute;nt
	    is bet&ouml;lthet&#245;.</para>

	  <para>A &man.ccd.4; be&aacute;ll&iacute;t&aacute;s&aacute;hoz
	    el&#245;sz&ouml;r a &man.bsdlabel.8; programmal meg fel kell
	    c&iacute;mk&eacute;zn&uuml;nk a lemezeket:</para>

	  <programlisting>bsdlabel -w ad1 auto
bsdlabel -w ad2 auto
bsdlabel -w ad3 auto</programlisting>

	  <para>&Iacute;gy l&eacute;trej&ouml;n egy-egy BSD
	    t&iacute;pus&uacute; c&iacute;mke a
	    <devicename>ad1c</devicename>, <devicename>ad2c</devicename>
	    &eacute;s <devicename>ad3c</devicename>
	    eszk&ouml;z&ouml;kre, amely &iacute;gy lefedi a lemez
	    eg&eacute;sz ter&uuml;let&eacute;t.</para>

	  <para>Most pedig v&aacute;ltoztassuk meg a lemezc&iacute;mke
	    t&iacute;pus&aacute;t.  Ehhez haszn&aacute;ljuk ism&eacute;t
	    a &man.bsdlabel.8; programot:</para>

	  <programlisting>bsdlabel -e ad1
bsdlabel -e ad2
bsdlabel -e ad3</programlisting>

	  <para>Az <envar>EDITOR</envar> k&ouml;rnyezeti
	    v&aacute;ltoz&oacute;ban megadott
	    sz&ouml;vegszerkeszt&#245;vel (ez &aacute;ltal&aacute;ban a
	    &man.vi.1;) megny&iacute;lik minden egyes lemezhez a
	    jelenlegi lemezc&iacute;mke.</para>

	  <para>Egy m&oacute;dos&iacute;tatlan lemezc&iacute;mke
	    valahogy &iacute;gy n&eacute;z ki:</para>

	  <programlisting>8 partitions:
#        size   offset    fstype   [fsize bsize bps/cpg]
  c: 60074784        0    unused        0     0     0   # (Cyl.    0 - 59597)</programlisting>

	  <para>A &man.ccd.4; sz&aacute;m&aacute;ra hozzunk l&eacute;tre
	    egy &uacute;j <literal>e</literal> part&iacute;ci&oacute;t.
	    Ezt l&eacute;nyeg&eacute;ben a <literal>c</literal>
	    part&iacute;ci&oacute; lem&aacute;sol&aacute;s&aacute;val
	    keletkezik, de n&aacute;la az <option>fstype</option> (az
	    &aacute;llom&aacute;nyrendszer t&iacute;pusa) oszlopban
	    mindenk&eacute;ppen <userinput>4.2BSD</userinput>
	    szerepeljen!  A lemezc&iacute;mke most m&aacute;r valahogy
	    &iacute;gy fog kin&eacute;zni:</para>

	  <programlisting>8 partitions:
#        size   offset    fstype   [fsize bsize bps/cpg]
  c: 60074784        0    unused        0     0     0   # (Cyl.    0 - 59597)
  e: 60074784        0    4.2BSD        0     0     0   # (Cyl.    0 - 59597)</programlisting>

	</sect4>

	<sect4 id="ccd-buildingfs">
	  <title>Az &aacute;llom&aacute;nyrendszer
	    ki&eacute;p&iacute;t&eacute;se</title>

	  <para>Most, miut&aacute;n felc&iacute;mk&eacute;zt&uuml;k az
	    &ouml;sszes lemez&uuml;nket, l&aacute;ssunk neki a
	    &man.ccd.4; ki&eacute;p&iacute;t&eacute;s&eacute;nek.  Ezt a
	    &man.ccdconfig.8; megh&iacute;v&aacute;s&aacute;val
	    &eacute;s az al&aacute;bbihoz hasonl&oacute;
	    param&eacute;terek &aacute;tad&aacute;s&aacute;val
	    tehetj&uuml;k meg:</para>

	  <programlisting>ccdconfig ccd0<co id="co-ccd-dev"> 32<co id="co-ccd-interleave"> 0<co id="co-ccd-flags"> /dev/ad1e<co id="co-ccd-devs"> /dev/ad2e /dev/ad3e</programlisting>

	  <para>A param&eacute;terek r&ouml;vid le&iacute;r&aacute;sa
	    &eacute;s haszn&aacute;lata:</para>

	  <calloutlist>
	    <callout arearefs="co-ccd-dev">
	      <para>Az els&#245; param&eacute;ter a
		l&eacute;trehozand&oacute; eszk&ouml;z, ami jelen
		eset&uuml;nkben a <filename>/dev/ccd0c</filename>.  A
		<filename>/dev/</filename> r&eacute;szt nem
		k&ouml;telez&#245; megadni.</para>
	    </callout>

	    <callout arearefs="co-ccd-interleave">
	      <para>A kihagy&aacute;s nagys&aacute;ga az
	&aacute;llom&aacute;nyrendszerben.  A kihagy&aacute;s
	hat&aacute;rozza meg a lemezblokkban alkalmazott
	cs&iacute;koz&aacute;s (striping) vastags&aacute;g&aacute;t, ami
	&aacute;ltal&aacute;ban 512 byte.  Ennek megfelel&#245;en a
	32-es kihagy&aacute;s 16&nbsp;384 byte-os cs&iacute;kokat ad
	meg.</para>
	    </callout>

	    <callout arearefs="co-ccd-flags">
	      <para>A &man.ccdconfig.8;
	be&aacute;ll&iacute;t&aacute;sai.  Ha enged&eacute;lyezni
	akarjuk a lemezek t&uuml;kr&ouml;z&eacute;s&eacute;t, akkor itt
	megadhatjuk.  Mivel ez a konfigur&aacute;ci&oacute; most nem
	ny&uacute;jt t&uuml;kr&ouml;z&eacute;st a &man.ccd.4;
	sz&aacute;m&aacute;ra, ez&eacute;rt &aacute;ll&iacute;tsuk
	null&aacute;ra (0).</para>
	    </callout>

	    <callout arearefs="co-ccd-devs">
	      <para>A &man.ccdconfig.8; parancsnak
	utols&oacute;k&eacute;nt azokat az eszk&ouml;z&ouml;ket
	kell felsorolni, amelyeket t&ouml;mbbe akarunk f&#251;zni.
	Minden eszk&ouml;zt teljes el&eacute;r&eacute;si &uacute;ttal
	adjuk meg.</para>
	    </callout>
	  </calloutlist>

	  <para>A &man.ccdconfig.8; futtat&aacute;sa ut&aacute;n a
	    &man.ccd.4; be&aacute;ll&iacute;t&oacute;dik.  Most
	    m&aacute;r &aacute;llom&aacute;nyrendszert is rakhatunk
	    r&aacute;.  A &man.newfs.8; man oldalr&oacute;l szedj&uuml;k
	    &ouml;ssze a sz&uuml;ks&eacute;ges
	    param&eacute;terez&eacute;st, vagy egyszer&#251;en csak
	    g&eacute;pelj&uuml;nk be ennyit:</para>

	  <programlisting>newfs /dev/ccd0c</programlisting>

	</sect4>

	<sect4 id="ccd-auto">
	  <title>Az eg&eacute;sz &ouml;nm&#251;k&ouml;d&#245;v&eacute;
	    t&eacute;tele</title>

	  <para>A &man.ccd.4; eszk&ouml;zt &aacute;ltal&aacute;ban
	    minden egyes ind&iacute;t&aacute;s ut&aacute;n
	    haszn&aacute;lni akarjuk.  Ennek
	    el&eacute;r&eacute;s&eacute;hez el&#245;sz&ouml;r ezt be
	    kell &aacute;ll&iacute;tanunk.  Az al&aacute;bbi parancs
	    kiad&aacute;s&aacute;val &iacute;rassuk be a jelenlegi
	    be&aacute;ll&iacute;tasainkat t&uuml;kr&ouml;z&#245;
	    <filename>/etc/ccd.conf</filename>
	    &aacute;llom&aacute;nyt:</para>

	  <programlisting>ccdconfig -g &gt; /etc/ccd.conf</programlisting>

	  <para>Az &uacute;jraind&iacute;t&aacute;s sor&aacute;n az
	    <command>/etc/rc</command> parancs futtatja le a
	    <command>ccdconfig -C</command> parancsot, ha az
	    <filename>/etc/ccd.conf</filename> &aacute;llom&aacute;ny
	    l&eacute;tezik.  Ez automatikusan be&aacute;ll&iacute;tja a
	    &man.ccd.4; eszk&ouml;z&ouml;ket, &iacute;gy ilyenkor tudjuk
	    csatlakoztatni is ezeket.</para>

	  <note>
	    <para>Ha egyfelhaszn&aacute;l&oacute;s m&oacute;dban
	      ind&iacute;tjuk a rendszert, miel&#245;tt m&eacute;g a
	      &man.mount.8; paranccsal csatlakoztatni tudn&aacute;nk a
	      &man.ccd.4; eszk&ouml;zt, a t&ouml;mb
	      be&aacute;ll&iacute;t&aacute;s&aacute;hoz meg kell
	      h&iacute;vnunk a k&ouml;vetkez&#245; parancsot:</para>

	    <programlisting>ccdconfig -C</programlisting>
	  </note>

	  <para>Ha a rendszerind&iacute;t&aacute;skor automatikusan
	    csatlakoztatni akarjuk a &man.ccd.4; eszk&ouml;zt, akkor az
	    <filename>/etc/fstab</filename> &aacute;llom&aacute;nyba
	    helyezz&uuml;nk el egy hozz&aacute; tartoz&oacute;
	    bejegyz&eacute;st:</para>

	  <programlisting>/dev/ccd0c              /media       ufs     rw      2       2</programlisting>

	</sect4>
      </sect3>

      <sect3 id="vinum">
	<title>A Vinum k&ouml;tetkezel&#245;</title>

	<indexterm>
	  <primary>RAID</primary>
	  <secondary>szoftveres</secondary>
	</indexterm>
	<indexterm>
	  <primary>RAID</primary>
	   <secondary>Vinum</secondary>
	</indexterm>

	<para>A Vinum k&ouml;tetkezel&#245; egy blokkos
	  eszk&ouml;zmeghajt&oacute;, ami virtu&aacute;lis lemezes
	  meghajt&oacute;kat val&oacute;s&iacute;t meg.
	  Elk&uuml;l&ouml;n&iacute;ti a lemezes
	  hardvereszk&ouml;z&ouml;ket a blokkos
	  eszk&ouml;zmeghajt&oacute;k fel&uuml;let&eacute;t&#245;l
	  &eacute;s a kett&#245; k&ouml;z&ouml;tt &uacute;gy
	  k&eacute;pezi le az adatokat, hogy a hagyom&aacute;nyos
	  lemezes t&aacute;rol&aacute;ssal szemben megn&ouml;vekedett
	  rugalmass&aacute;got, teljes&iacute;tm&eacute;nyt &eacute;s
	  megb&iacute;zhat&oacute;s&aacute;got kapunk.  A &man.vinum.8;
	  ismeri a RAID-0, RAID-1 &eacute;s RAID-5 modelleket
	  egyar&aacute;nt, melyeket &ouml;nmagukban &eacute;s
	  egy&uuml;ttesen kombin&aacute;lva is
	  haszn&aacute;lhatunk.</para>

	<para>A <xref linkend="vinum-vinum"> b&#245;vebben ismerteti a
	  &man.vinum.8; rendszer&eacute;t.</para>

      </sect3>
    </sect2>

    <sect2 id="raid-hard">
      <title>Hardveres RAID</title>

      <indexterm>
	<primary>RAID</primary>
	<secondary>hardveres</secondary>
      </indexterm>

      <para>A &os; rengeteg k&uuml;l&ouml;nb&ouml;z&#245;
	t&iacute;pus&uacute; hardveres
	<acronym>RAID</acronym>-vez&eacute;rl&#245;t ismer.  Ezek az
	eszk&ouml;z&ouml;k a &os; k&uuml;l&ouml;n erre a c&eacute;lra
	sz&aacute;nt t&aacute;mogat&aacute;sa n&eacute;lk&uuml;l
	k&eacute;pesek vez&eacute;relni a
	<acronym>RAID</acronym>-alrendszert.</para>

      <para>A rajta lev&#245; <acronym>BIOS</acronym>
	seg&iacute;ts&eacute;g&eacute;vel a k&aacute;rtya a legt&ouml;bb
	lemezm&#251;veletet egyed&uuml;l kezeli.  A
	k&ouml;vetkez&#245;kben egy Promise <acronym>IDE</acronym>
	<acronym>RAID</acronym> vez&eacute;rl&#245;t alkalmaz&oacute;
	rendszert fogunk be&aacute;ll&iacute;tani.  Miut&aacute;n
	telep&iacute;tett&uuml;k a k&aacute;rty&aacute;t &eacute;s
	ind&iacute;tjuk a rendszert, bek&eacute;ri a
	sz&uuml;ks&eacute;ges inform&aacute;ci&oacute;kat.
	K&ouml;vess&uuml;k az utas&iacute;t&aacute;sokat &eacute;s
	l&eacute;pj&uuml;nk be a k&aacute;rtya
	be&aacute;ll&iacute;t&oacute; k&eacute;perny&#245;j&eacute;re.
	Itt tudjuk kombin&aacute;lni az &ouml;sszes csatlakoztatott
	meghajt&oacute;nkat.  Amikor ezzel a v&eacute;gezt&uuml;nk, a
	lemezek egyetlen lemezk&eacute;nt fognak a &os;
	sz&aacute;m&aacute;ra viselkedni.  A t&ouml;bbi
	<acronym>RAID</acronym>-szint is ehhez hasonl&oacute;an
	&aacute;ll&iacute;that&oacute; be.</para>

    </sect2>

    <sect2>
      <title>Az ATA RAID-1 t&ouml;mb&ouml;k
	&uacute;jraszervez&eacute;se</title>

      <para>A &os; lehet&#245;s&eacute;get a t&ouml;mbben lev&#245;
	meghib&aacute;sodott eszk&ouml;z&ouml;k menet k&ouml;zben
	elv&eacute;gezhet&#245; cser&eacute;j&eacute;re.  Ehhez arra van
	sz&uuml;ks&eacute;g&uuml;nk, hogy m&eacute;g
	&uacute;jraind&iacute;t&aacute;s el&#245;tt
	elcs&iacute;pj&uuml;k a hib&aacute;t.</para>

      <para>Hiba eset&eacute;n valami hasonl&oacute;t fogunk
	l&aacute;tni a <filename>/var/log/messages</filename>
	&aacute;llom&aacute;nyban vagy a &man.dmesg.8;
	kimenet&eacute;ben:</para>

      <programlisting>ad6 on monster1 suffered a hard error.
ad6: READ command timeout tag=0 serv=0 - resetting
ad6: trying fallback to PIO mode
ata3: resetting devices .. done
ad6: hard error reading fsbn 1116119 of 0-7 (ad6 bn 1116119; cn 1107 tn 4 sn 11)\\
status=59 error=40
ar0: WARNING - mirror lost</programlisting>

      <para>Tov&aacute;bbi inform&aacute;ci&oacute;kat az
	&man.atacontrol.8; programt&oacute;l szerezhet&uuml;nk:</para>

      <screen>&prompt.root; <userinput>atacontrol list</userinput>
ATA channel 0:
	Master:      no device present
	Slave:   acd0 &lt;HL-DT-ST CD-ROM GCR-8520B/1.00&gt; ATA/ATAPI rev 0

ATA channel 1:
	Master:      no device present
	Slave:       no device present

ATA channel 2:
	Master:  ad4 &lt;MAXTOR 6L080J4/A93.0500&gt; ATA/ATAPI rev 5
	Slave:       no device present

ATA channel 3:
	Master:  ad6 &lt;MAXTOR 6L080J4/A93.0500&gt; ATA/ATAPI rev 5
	Slave:       no device present

&prompt.root; <userinput>atacontrol status ar0</userinput>
ar0: ATA RAID1 subdisks: ad4 ad6 status: DEGRADED</screen>

      <procedure>
	<step>
	  <para>A lemez biztons&aacute;gos
	    elt&aacute;vol&iacute;t&aacute;s&aacute;hoz
	    el&#245;sz&ouml;r v&aacute;lasszuk le (detach) a
	    meghib&aacute;sodott lemezhez tartoz&oacute;
	    csatorn&aacute;t:</para>

	  <screen>&prompt.root; <userinput>atacontrol detach ata3</userinput></screen>
	</step>

	<step>
	  <para>Cser&eacute;lj&uuml;k ki a lemezt.</para>
	</step>

	<step>
	  <para>Csatlakoztassuk &uacute;jra (attach) az ATA
	    csatorn&aacute;t:</para>

	  <screen>&prompt.root; <userinput>atacontrol attach ata3</userinput>
Master:  ad6 &lt;MAXTOR 6L080J4/A93.0500&gt; ATA/ATAPI rev 5
Slave:   no device present</screen>
	</step>

	<step>
	  <para>Tartal&eacute;kk&eacute;nt (spare) adjuk hozz&aacute; az
	    &uacute;j lemezt a t&ouml;mbh&ouml;z:</para>

	  <screen>&prompt.root; <userinput>atacontrol addspare ar0 ad6</userinput></screen>
	</step>

	<step>
	  <para>Szervezz&uuml;k &uacute;jra (rebuild) a
	    t&ouml;mb&ouml;t:</para>

	  <screen>&prompt.root; <userinput>atacontrol rebuild ar0</userinput></screen>
	</step>

	<step>
	  <para>A folyamat el&#245;rehalad&aacute;s&aacute;t a
	    k&ouml;vetkez&#245; parancs
	    beg&eacute;pel&eacute;s&eacute;vel tudjuk figyelni:</para>

	  <screen>&prompt.root; <userinput>dmesg | tail -10</userinput>
[a kimenet t&ouml;bbi r&eacute;sze]
ad6: removed from configuration
ad6: deleted from ar0 disk1
ad6: inserted into ar0 disk1 as spare

&prompt.root; <userinput>atacontrol status ar0</userinput>
ar0: ATA RAID1 subdisks: ad4 ad6 status: REBUILDING 0% completed</screen>
	</step>

	<step>
	  <para>V&aacute;rjunk a m&#251;velet
	    befejez&#245;d&eacute;s&eacute;ig.</para>
	</step>
      </procedure>

    </sect2>
  </sect1>

  <sect1 id="usb-disks">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Marc</firstname>
	  <surname>Fonvieille</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>USB t&aacute;rol&oacute;eszk&ouml;z&ouml;k</title>

    <indexterm>
      <primary>USB</primary>
      <secondary>lemezek</secondary>
    </indexterm>

    <para>Manaps&aacute;g m&aacute;r sz&aacute;mos k&uuml;ls&#245;
      t&aacute;rol&oacute;eszk&ouml;z az USB (Universal Serial Bus)
      k&ouml;zvet&iacute;t&eacute;s&eacute;vel csatlakozik a
      sz&aacute;m&iacute;t&oacute;g&eacute;phez: merevlemezek, pen
      drive-ok, CD-&iacute;r&oacute;k stb.  A &os; ezeket az
      eszk&ouml;z&ouml;ket is ismeri.</para>

    <sect2>
      <title>Be&aacute;ll&iacute;t&aacute;s</title>

      <para>A USB t&aacute;rol&oacute;eszk&ouml;z&ouml;ket kezel&#245;
	meghajt&oacute;, az &man.umass.4; felel&#245;s az USB
	alap&uacute; t&aacute;rol&oacute;eszk&ouml;z&ouml;k
	t&aacute;mogat&aacute;s&aacute;&eacute;rt.  Ha a
	<filename>GENERIC</filename> rendszermagot haszn&aacute;ljuk,
	akkor semmit sem kell v&aacute;ltoztatnunk.  Ha saj&aacute;t
	rendszermagunk van, akkor gondoskodjunk r&oacute;la, hogy a
	k&ouml;vetkez&#245; sorokat beraktuk a rendszermag
	be&aacute;ll&iacute;t&aacute;sait tartalmaz&oacute;
	&aacute;llom&aacute;nyba:</para>

      <programlisting>device scbus
device da
device pass
device uhci
device ehci
device usb
device umass</programlisting>

      <para>Az &man.umass.4; meghajt&oacute; a SCSI alrendszeren
	kereszt&uuml;l &eacute;ri el az USB
	t&aacute;rol&oacute;eszk&ouml;z&ouml;ket, teh&aacute;t az USB
	eszk&ouml;zeinket a rendszer SCSI eszk&ouml;zk&eacute;nt
	l&aacute;tja.  Az alaplapon tal&aacute;lhat&oacute; USB
	chipk&eacute;szlet t&iacute;pus&aacute;t&oacute;l
	f&uuml;gg&#245;en vagy csak a <literal>device uhci</literal>,
	vagy USB&nbsp;1.<replaceable>X</replaceable> eset&eacute;n pedig a
	<literal>device ohci</literal> bejegyz&eacute;sre lesz
	sz&uuml;ks&eacute;g&uuml;nk.  De abb&oacute;l sem
	sz&aacute;rmazik k&aacute;runk, ha mind a kett&#245;t
	meghagyjuk.  Az USB&nbsp;2.0 szabv&aacute;ny&uacute;
	vez&eacute;rl&#245;ket a &man.ehci.4; meghajt&oacute;
	(<literal>device ehci</literal>) t&aacute;mogatja.  Ha
	m&oacute;dos&iacute;tani kellett a konfigur&aacute;ci&oacute;s
	&aacute;llom&aacute;nyt, akkor ne felejts&uuml;k el
	&uacute;jraford&iacute;tani &eacute;s telep&iacute;teni sem a
	rendszermagot.</para>

      <note>
	<para>Ha az USB eszk&ouml;z&uuml;nk egy CD- vagy
	  DVD-&iacute;r&oacute;, akkor a k&ouml;vetkez&#245; sorral a
	  SCSI CD-meghajt&oacute;k meghajt&oacute;j&aacute;t, a
	  &man.cd.4; eszk&ouml;zt kell be&eacute;p&iacute;ten&uuml;nk a
	  rendszermagba:</para>

	<programlisting>device cd</programlisting>

	<para>Mivel az &iacute;r&oacute; is SCSI eszk&ouml;zk&eacute;nt
	  l&aacute;tszik, ez&eacute;rt az &man.atapicam.4; nem
	  szerepelhet a rendszermag be&aacute;ll&iacute;t&aacute;sai
	  k&ouml;z&ouml;tt.</para>
      </note>
    </sect2>

    <sect2>
      <title>A be&aacute;ll&iacute;t&aacute;sok
	kipr&oacute;b&aacute;l&aacute;sa</title>

      <para>A be&aacute;ll&iacute;t&aacute;saink k&eacute;szen
	&aacute;llnak a kipr&oacute;b&aacute;l&aacute;sra:
	csatlakoztassuk a sz&aacute;m&iacute;t&oacute;g&eacute;phez az
	USB eszk&ouml;z&uuml;nket &eacute;s a rendszer&uuml;zeneteket
	t&aacute;rol&oacute; pufferben (&man.dmesg.8;) hamarosan meg is
	jelenik a hozz&aacute; tartoz&oacute; meghajt&oacute;:</para>

      <screen>umass0: USB Solid state disk, rev 1.10/1.00, addr 2
GEOM: create disk da0 dp=0xc2d74850
da0 at umass-sim0 bus 0 target 0 lun 0
da0: &lt;Generic Traveling Disk 1.11&gt; Removable Direct Access SCSI-2 device
da0: 1.000MB/s transfers
da0: 126MB (258048 512 byte sectors: 64H 32S/T 126C)</screen>

      <para>Term&eacute;szetesen a gy&aacute;rt&oacute;ra,
	m&aacute;rk&aacute;ra, az eszk&ouml;z
	le&iacute;r&oacute;j&aacute;ra (<devicename>da0</devicename>)
	&eacute;s egyebekre vonatkoz&oacute; r&eacute;szletek
	elt&eacute;rhetnek.</para>

      <para>Mivel az USB eszk&ouml;z SCSI eszk&ouml;zk&eacute;nt
	l&aacute;tszik, ez&eacute;rt a <command>camcontrol</command>
	parancs haszn&aacute;lhat&oacute; a rendszerhez csatlakoztatott
	USB t&aacute;rol&oacute;eszk&ouml;z&ouml;k
	list&aacute;z&aacute;s&aacute;hoz:</para>

      <screen>&prompt.root; <userinput>camcontrol devlist</userinput>
&lt;Generic Traveling Disk 1.11&gt;      at scbus0 target 0 lun 0 (da0,pass0)</screen>

      <para>Ha a meghajt&oacute;n &aacute;llom&aacute;nyrendszer is
	tal&aacute;lhat&oacute;, akkor k&eacute;pesek vagyunk
	csatlakoztatni.  A <xref linkend="disks-adding">
	elolvas&aacute;sa seg&iacute;thet az USB meghajt&oacute;n
	part&iacute;ci&oacute;kat kialak&iacute;tani &eacute;s
	form&aacute;zni, amennyiben sz&uuml;ks&eacute;ges.</para>

      <warning>
	<para>A rendszer biztons&aacute;ga szempontj&aacute;b&oacute;l
	  nem tekinthet&#245; megb&iacute;zhat&oacute;nak, ha olyan
	  felhaszn&aacute;l&oacute;k sz&aacute;m&aacute;ra is
	  enged&eacute;lyezz&uuml;k tetsz&#245;leges meghajt&oacute;k
	  csatlakoztat&aacute;s&aacute;t (p&eacute;ld&aacute;ul a
	  <literal>vfs.usermount</literal>
	  engedely&eacute;zes&eacute;vel), amelyekben nem b&iacute;zunk
	  meg.  A &os; &aacute;ltal t&aacute;mogatott
	  &aacute;llom&aacute;nyrendszerek d&ouml;nt&#245;
	  t&ouml;bbs&eacute;ge nem ny&uacute;jt v&eacute;delmet a
	  k&aacute;ros sz&aacute;nd&eacute;kkal telep&iacute;tett
	  eszk&ouml;z&ouml;k ellen.</para>
      </warning>

      <para>Ha az eszk&ouml;zt norm&aacute;l
	felhaszn&aacute;l&oacute;kkal is
	csatlakoztathat&oacute;v&aacute; akarjuk tenni, akkor
	tov&aacute;bbi l&eacute;p&eacute;sek megt&eacute;tel&eacute;re
	is sz&uuml;ks&eacute;g&uuml;nk lesz.  El&#245;sz&ouml;r is a
	felhaszn&aacute;l&oacute;knak valahogy el kell tudniuk
	&eacute;rni&uuml;k az USB t&aacute;rol&oacute;eszk&ouml;z
	csatlakoztat&aacute;sakor keletkez&#245; eszk&ouml;z&ouml;ket.
	Ezt &uacute;gy tudjuk megoldani, ha az &eacute;rintett
	felhaszn&aacute;l&oacute;kat felvessz&uuml;k az
	<groupname>operator</groupname> csoportba.  Ebben a &man.pw.8;
	lehet a seg&iacute;ts&eacute;g&uuml;nkre.  M&aacute;sodsorban
	amikor ezek az eszk&ouml;z&ouml;k l&eacute;trej&ouml;nnek, az
	<groupname>operator</groupname> csoportnak tudniuk kell ezeket
	olvasniuk &eacute;s &iacute;rniuk.  Ezt &uacute;gy tudjuk
	megval&oacute;s&iacute;tani, ha felvessz&uuml;k a
	k&ouml;vetkez&#245; sorokat az
	<filename>/etc/devfs.rules</filename>
	&aacute;llom&aacute;nyba:</para>

      <programlisting>[localrules=5]
add path 'da*' mode 0660 group operator</programlisting>

      <note>
	<para>Ha viszont vannak SCSI lemezeink is rendszerben, akkor a
	  helyzet egy kicsit megv&aacute;ltozik.  Teh&aacute;t
	  p&eacute;ld&aacute;ul a rendszerben m&aacute;r eleve vannak
	  <devicename>da0</devicename>, <devicename>da1</devicename>
	  &eacute;s <devicename>da2</devicename> n&eacute;ven lemezek,
	  akkor a m&aacute;sodik sort ennek megfelel&#245;en
	  v&aacute;ltoztassuk meg:</para>

	<programlisting>add path 'da[3-9]*' mode 0660 group operator</programlisting>

	<para>Ezzel kiz&aacute;runk minden, kor&aacute;bban m&aacute;r
	  l&eacute;tez&#245; lemezt az <groupname>operator</groupname>
	  csoportb&oacute;l.</para>
      </note>

      <para>Emellett m&eacute;g az <filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyban enged&eacute;lyezn&uuml;nk kell a
	saj&aacute;t &man.devfs.rules.5;
	szab&aacute;lyrendszer&uuml;nket is:</para>

      <programlisting>devfs_system_ruleset="usb_rules"</programlisting>

      <para>Ezt k&ouml;vet&#245;en be kell &aacute;ll&iacute;tanunk a
	rendszermagban, hogy a hagyom&aacute;nyos
	felhaszn&aacute;l&oacute;k k&eacute;pesek legyenek
	&aacute;llom&aacute;nyrendszereket csatlakoztatni.  Ezt a
	legk&ouml;nnyebb &uacute;gy tudjuk megtenni, ha az
	<filename>/etc/sysctl.conf</filename> &aacute;llom&aacute;nyba
	felvessz&uuml;k a k&ouml;vetkez&#245; sort:</para>

      <programlisting>vfs.usermount=1</programlisting>

      <para>Azonban ne felejts&uuml;k el, hogy ez csak a rendszer
	k&ouml;vetkez&#245; ind&iacute;t&aacute;s&aacute;t&oacute;l
	&eacute;l.  De a &man.sysctl.8; parancs
	haszn&aacute;lat&aacute;val is be&aacute;ll&iacute;thatjuk ezt
	az &eacute;rt&eacute;ket.</para>

      <para>Az utols&oacute; l&eacute;p&eacute;sben hozzunk l&eacute;tre
	egy k&ouml;nyvt&aacute;rat az &aacute;llom&aacute;nyrendszer
	csatlakoztat&aacute;s&aacute;hoz.  Ezt a k&ouml;nyvt&aacute;rat
	az a felhaszn&aacute;l&oacute; fogja birtokolni, aki az
	&aacute;llom&aacute;nyrendszert csatlakoztatnia akarja.  Ez
	p&eacute;ld&aacute;ul <username>root</username>
	felhaszn&aacute;l&oacute;k&eacute;nt &uacute;gy tudjuk megtenni,
	ha a felhaszn&aacute;l&oacute;nak l&eacute;trehozunk egy
	k&ouml;nyvt&aacute;rat
	<filename>/mnt/<replaceable>felhaszn&aacute;l&oacute;</replaceable></filename>
	n&eacute;ven (ahol a
	<replaceable>felhaszn&aacute;l&oacute;</replaceable> nevet
	cser&eacute;lj&uuml;k a t&eacute;nyleges
	felhaszn&aacute;l&oacute; nev&eacute;re, a
	<replaceable>csoport</replaceable> nevet pedig a
	felhaszn&aacute;l&oacute;hoz tartoz&oacute; els&#245;dleges
	csoport nev&eacute;re):</para>

      <screen>&prompt.root; <userinput>mkdir /mnt/<replaceable>felhaszn&aacute;l&oacute;</replaceable></userinput>
&prompt.root; <userinput>chown <replaceable>felhaszn&aacute;l&oacute;</replaceable>:<replaceable>csoport</replaceable> /mnt/<replaceable>felhaszn&aacute;l&oacute;</replaceable></userinput></screen>

      <para>Most tegy&uuml;k fel, hogy csatlakoztatnuk egy USB pen
	drive-ot &eacute;s ennek megfelel&#245;en megjelenik a
	<filename>/dev/da0s1</filename> eszk&ouml;z.  Mivel az ilyen
	eszk&ouml;z&ouml;kre &aacute;ltal&aacute;ban gy&aacute;rilag FAT
	&aacute;llom&aacute;nyrendszert tesznek, ez&eacute;rt &iacute;gy
	kell ezeket csatlakoztatni a &man.mount.8; paranccsal:</para>

      <screen>&prompt.user; <userinput>mount -t msdosfs -o -m=644,-M=755 /dev/da0s1 /mnt/<replaceable>felhaszn&aacute;l&oacute;</replaceable></userinput></screen>

      <para>Ha lev&aacute;lasztjuk az eszk&ouml;zt (miut&aacute;n
	kiadtuk a &man.umount.8; parancsot), akkor a
	rendszer&uuml;zenetek k&ouml;z&ouml;tt valami ilyesmit fogunk
	l&aacute;tni:</para>

      <screen>umass0: at uhub0 port 1 (addr 2) disconnected
(da0:umass-sim0:0:0:0): lost device
(da0:umass-sim0:0:0:0): removing device entry
GEOM: destroy disk da0 dp=0xc2d74850
umass0: detached</screen>

    </sect2>

    <sect2>
      <title>A t&eacute;m&aacute;r&oacute;l b&#245;vebben</title>

      <para>A <link linkend="disks-adding">Lemezek
	hozz&aacute;ad&aacute;sa</link> &eacute;s az <link
	  linkend="mount-unmount">&Aacute;llom&aacute;nyrendszerek
	  csatlakoztat&aacute;sa &eacute;s
	  lev&aacute;laszt&aacute;sa</link> c&iacute;m&#251; szakaszok
	elolvas&aacute;sa mellett a k&ouml;vetkez&#245; man oldalakat is
	aj&aacute;nljuk: &man.umass.4;, &man.camcontrol.8; &eacute;s
	&man.usbconfig.8; &os;&nbsp;8.<replaceable>X</replaceable>
	eset&eacute;ben, vagy &man.usbdevs.8; a &os; kor&aacute;bbi
	v&aacute;ltozatain&aacute;l.</para>
    </sect2>
  </sect1>

  <sect1 id="creating-cds">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Mike</firstname>
	  <surname>Meyer</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>L&eacute;zeres t&aacute;rol&oacute;eszk&ouml;z&ouml;k (CD-k)
      l&eacute;trehoz&aacute;sa &eacute;s haszn&aacute;lata</title>

    <indexterm>
      <primary>CD-k</primary>
      <secondary>l&eacute;trehoz&aacute;sa</secondary>
    </indexterm>

    <sect2>
      <title>Bevezet&eacute;s</title>

      <para>A CD-k sz&aacute;mos lehet&#245;s&eacute;g&uuml;nkben
	elt&eacute;rnek a hagyom&aacute;nyos lemezekt&#245;l.  Kezdetben
	a felhaszn&aacute;l&oacute;k nem is voltak k&eacute;pesek
	&iacute;rni ezeket.  Olyannak tervezt&eacute;k, hogy a fejek
	s&aacute;vok k&ouml;zti mozg&aacute;s&aacute;b&oacute;l
	fakad&oacute; k&eacute;sleltet&eacute;s n&eacute;lk&uuml;l
	lehessen folyamatosan olvasni.  A
	sz&aacute;ll&iacute;t&aacute;sa a maga idej&eacute;ben sokkal
	k&ouml;nnyebb volt minden vele egyforma m&eacute;ret&#251;
	eszk&ouml;zn&eacute;l.</para>

      <para>A CD-ken is tal&aacute;lhatunk s&aacute;vokat, azonban ez
	csak a folyamatosan olvashat&oacute; adat egy szakasz&aacute;t
	jelenti, nem pedig a lemez fizikai tulajdons&aacute;g&aacute;t.
	Ha &os;-n akarunk CD-t k&eacute;sz&iacute;teni, akkor ehhez
	el&#245;sz&ouml;r &ouml;ssze kell &aacute;ll&iacute;tanunk a CD
	egyes s&aacute;vjaira ker&uuml;l&#245; adatokat &eacute;s
	ezut&aacute;n r&ouml;gz&iacute;teni ezeket a s&aacute;vokat a
	CD-n.</para>

      <indexterm><primary>ISO 9660</primary></indexterm>
      <indexterm>
	<primary>&aacute;llom&aacute;nyrendszerek</primary>
	<secondary>ISO 9660</secondary>
      </indexterm>

      <para>Az ISO 9660 &aacute;llom&aacute;nyrendszert &uacute;gy
	tervezt&eacute;k, hogy megbirk&oacute;zzon ezekkel az
	elt&eacute;r&eacute;sekkel.  Sajnos ezzel egy&uuml;tt k&#245;be
	v&eacute;st&eacute;k az &aacute;llom&aacute;nyrendszerek
	akkoriban &eacute;rv&eacute;nyes korl&aacute;toz&aacute;sait is.
	Szerencs&eacute;re lehet&#245;s&eacute;get ad
	b&#245;v&iacute;t&eacute;sre, ez&aacute;ltal a helyesen
	meg&iacute;rt CD-k k&eacute;pesek &uacute;gy
	&aacute;tl&eacute;pni ezeket a hat&aacute;rokat, hogy
	k&ouml;zben az &aacute;ltaluk alkalmazott
	kiterjeszt&eacute;seket nem ismer&#245; rendszerekkel is
	egy&uuml;tt tudnak m&#251;k&ouml;dni.</para>

      <indexterm><primary><filename
	role="package">sysutils/cdrtools</filename></primary></indexterm>

      <para>A <filename role="package">sysutils/cdrtools</filename> port
	tartalmaz egy &man.mkisofs.8; nev&#251; programot, amellyel
	l&eacute;tre tudunk hozni ISO 9660 t&iacute;pus&uacute;
	&aacute;llom&aacute;nyrendszert tartalmaz&oacute;
	adat&aacute;llom&aacute;nyt.  T&ouml;bbf&eacute;le
	kiterjeszt&eacute;st is ismer, amit majd a lentebb ismertett
	opci&oacute;kkal &eacute;rhet&uuml;nk el.</para>

      <indexterm>
	<primary>CD-&iacute;r&oacute;</primary>
	<secondary>ATAPI</secondary>
      </indexterm>

      <para>A CD &iacute;r&aacute;s&aacute;hoz haszn&aacute;lt
	konkr&eacute;t seg&eacute;deszk&ouml;z att&oacute;l f&uuml;gg,
	hogy ATAPI vagy esetleg m&aacute;smilyen &iacute;r&oacute;nk
	van.  Az ATAPI CD-&iacute;r&oacute;k az alaprendszer
	r&eacute;szek&eacute;nt el&eacute;rhet&#245; <command><link
	linkend="burncd">burncd</link></command> programon
	kereszt&uuml;l haszn&aacute;lhat&oacute;ak.  A SCSI &eacute;s
	USB CD-&iacute;r&oacute;k eset&eacute;n pedig a <filename
	role="package">sysutils/cdrtools</filename> portban
	megtal&aacute;lhat&oacute; <command><link
	linkend="cdrecord">cdrecord</link></command> programot
	haszn&aacute;lhatjuk.  Az <link linkend="atapicam">ATAPI/CAM
	modul</link> seg&iacute;ts&eacute;g&eacute;vel a <command><link
	linkend="cdrecord">cdrecord</link></command> &eacute;s
	m&aacute;s SCSI-&iacute;r&oacute;kra k&eacute;sz&uuml;lt
	programokat is tudunk haszn&aacute;lni ATAPI hardvereken.</para>

      <para>Ha a CD-&iacute;r&oacute; szoftver&uuml;nket grafikus
	felhaszn&aacute;l&oacute;i fel&uuml;leten kereszt&uuml;l
	szeretn&eacute;nk haszn&aacute;lni, akkor az
	<application>X-CD-Roast</application> vagy a
	<application>K3b</application> alkalmaz&aacute;sokat
	&eacute;rdemes szem&uuml;gyre venn&uuml;nk.  Ezek az
	eszk&ouml;z&ouml;k el&eacute;rhet&#245;ek csomagk&eacute;nt vagy
	a <filename role="package">sysutils/xcdroast</filename>
	&eacute;s <filename role="package">sysutils/k3b</filename>
	portokb&oacute;l.  ATAPI hardver eset&eacute;n az
	<application>X-CD-Roast</application> &eacute;s a
	<application>K3b</application> alkalmaz&aacute;sok
	haszn&aacute;lat&aacute;hoz sz&uuml;ks&eacute;g&uuml;nk lesz az
	<link linkend="atapicam">ATAPI/CAM modul</link>ra.</para>

    </sect2>

    <sect2 id="mkisofs">
      <title>mkisofs</title>

      <para>A <filename role="package">sysutils/cdrtools</filename> port
	r&eacute;szek&eacute;nt el&eacute;rhet&#245; &man.mkisofs.8;
	program k&eacute;pes a &unix; t&iacute;pus&uacute;
	&aacute;llom&aacute;nyrendszer k&ouml;nyvt&aacute;rszerkezete
	alapj&aacute;n egy ISO 9660 t&iacute;pus&uacute;
	&aacute;llom&aacute;nyrendszert tartalmaz&oacute; image-et
	k&eacute;sz&iacute;teni.  Legegyszer&#251;bb m&oacute;don
	&iacute;gy haszn&aacute;lhatjuk:</para>

      <screen>&prompt.root; <userinput>mkisofs -o <replaceable>image.iso</replaceable> <replaceable>/az/el&eacute;r&eacute;si/&uacute;t</replaceable></userinput></screen>

      <indexterm>
	<primary>&aacute;llom&aacute;nyrendszerek</primary>
	<secondary>ISO 9660</secondary>
      </indexterm>

      <para>Ezzel a paranccsal egy olyan
	<replaceable>image.iso</replaceable> nev&#251;
	&aacute;llom&aacute;nyt hozunk l&eacute;tre, amely
	<replaceable>/az/el&eacute;r&eacute;si/&uacute;t</replaceable>
	&aacute;ltal megadott helyen tal&aacute;lhat&oacute;
	k&ouml;nyvt&aacute;rszerkezetet mint&aacute;zza ISO 9660
	&aacute;llom&aacute;nyrendszer form&aacute;j&aacute;ban.  A
	folyamat sor&aacute;n minden olyan &aacute;llom&aacute;nyt
	lek&eacute;pez szabv&aacute;nyos ISO 9660
	&aacute;llom&aacute;nyrendszerbeli n&eacute;vre, amely megfelel
	a szabv&aacute;ny elv&aacute;r&aacute;sainak, &eacute;s kihagy
	minden olyan &aacute;llom&aacute;nyt, amely nem jellemz&#245; az
	ISO &aacute;llom&aacute;nyrendszerekre.</para>

      <indexterm>
	<primary>&aacute;llom&aacute;nyrendszerek</primary>
	<secondary>HFS</secondary>
      </indexterm>

      <indexterm>
	<primary>&aacute;llom&aacute;nyrendszerek</primary>
	<secondary>Joliet</secondary>
      </indexterm>

      <para>Sz&aacute;mos opci&oacute; lehet
	seg&iacute;ts&eacute;g&uuml;nkre az ilyenkor felbukkan&oacute;
	akad&aacute;lyok lek&uuml;zd&eacute;s&eacute;ben.  Ezek
	k&ouml;z&uuml;l k&uuml;l&ouml;n&ouml;sen fontos az
	<option>-R</option>, amely a &unix; rendszerek
	sz&aacute;m&aacute;ra megszokott Rock Ridge
	kiterjeszt&eacute;seket, valamint a <option>-J</option>, amely a
	Microsoft rendszerekben haszn&aacute;lt Joliet
	kiterjeszt&eacute;seit, &eacute;s v&eacute;g&uuml;l a
	<option>-hfs</option>, amely a &macos; alatt l&eacute;trehozott
	HFS &aacute;llom&aacute;nyrendszerek kiterjeszt&eacute;seit
	enged&eacute;lyezi.</para>

      <para>A kiz&aacute;r&oacute;lag csak &os; rendszereken
	haszn&aacute;lt CD-k eset&eacute;ben a <option>-U</option>
	megad&aacute;s&aacute;val kapcsolhatjuk ki az
	&aacute;llom&aacute;nynevek mindenf&eacute;le
	korl&aacute;toz&aacute;s&aacute;t.  Az <option>-R</option>
	be&aacute;ll&iacute;t&aacute;s haszn&aacute;lat&aacute;val olyan
	&aacute;llom&aacute;nyrendszer k&eacute;p&eacute;t hozzuk
	l&eacute;tre, amely teljesen megegyezik a parancsban megadott
	k&ouml;nyvt&aacute;rb&oacute;l indul&oacute; fa
	tartalm&aacute;val, hab&aacute;r t&ouml;bb m&oacute;don is
	s&eacute;rti az ISO 9660 szabv&aacute;ny
	el&#245;&iacute;r&aacute;sait.</para>

      <indexterm>
	<primary>CD-k</primary>
	<secondary>rendszerind&iacute;t&aacute;shoz</secondary>
      </indexterm>

      <para>Az utols&oacute; &aacute;ltal&aacute;nos jelleggel
	haszn&aacute;lhat&oacute; be&aacute;ll&iacute;t&aacute;s a
	<option>-b</option>.  Ezzel lehet megadni az <quote>El
	Torito</quote> szabv&aacute;nynak megfelel&#245;
	rendszerind&iacute;t&oacute; CD
	k&eacute;sz&iacute;t&eacute;s&eacute;hez sz&uuml;ks&eacute;ges
	rendszerind&iacute;t&oacute; image
	el&eacute;r&eacute;s&eacute;t.  Enn&eacute;l a
	be&aacute;ll&iacute;t&aacute;sn&aacute;l teh&aacute;t meg kell
	adni a rendszerind&iacute;t&aacute;shoz haszn&aacute;lt lemez
	image-&eacute;t, amely a CD tartalm&aacute;t mag&aacute;ban
	foglal&oacute; k&ouml;nyvt&aacute;rszerkezetben
	tal&aacute;lhat&oacute; valahol.  A &man.mkisofs.8;
	alap&eacute;rtelmez&eacute;s szerint egy &uacute;n.
	<quote>floppy emul&aacute;ci&oacute;s</quote> m&oacute;dban
	hozza l&eacute;tre az ISO image-et, ez&eacute;rt a
	rendszerind&iacute;t&aacute;shoz haszn&aacute;latos lemez
	image-&eacute;nek pontosan 1200, 1440 vagy 2880&nbsp;KB
	m&eacute;ret&#251;nek kell lennie.  Egyes
	rendszerbet&ouml;lt&#245;k, mint amilyen p&eacute;ld&aacute;ul a
	&os; terjeszt&eacute;s&eacute;hez haszn&aacute;lt lemezeken
	tal&aacute;lhat&oacute;, nem haszn&aacute;lj&aacute;k ezt az
	emul&aacute;ci&oacute;t.  Ilyen helyzetekben a
	<option>-no-emul-boot</option> kapcsol&oacute;t kell megadni.
	Teh&aacute;t ha a
	<filename><replaceable>/tmp/saj&aacute;tboot</replaceable></filename>
	k&ouml;nyvt&aacute;rban van egy ind&iacute;that&oacute; &os;
	rendszer&uuml;nk, amelyben a
	<filename><replaceable>/tmp/saj&aacute;tboot/boot/cdboot</replaceable></filename>
	a rendszerind&iacute;t&oacute; lemez image-e, akkor egy
	<filename><replaceable>/tmp/ind&iacute;that&oacute;.iso</replaceable></filename>
	nev&#251; ISO 9660 form&aacute;tum&uacute;
	&aacute;llom&aacute;nyrendszert tartalmaz&oacute; image-et
	p&eacute;ld&aacute;ul &iacute;gy tudunk
	elk&eacute;sz&iacute;teni:</para>

      <screen>&prompt.root; <userinput>mkisofs -R -no-emul-boot -b boot/cdboot -o <replaceable>/tmp/ind&iacute;that&oacute;.iso</replaceable> <replaceable>/tmp/saj&aacute;tboot</replaceable></userinput></screen>

      <para>Miut&aacute;n ezt megtett&uuml;k, &eacute;s a
	rendszermagunkban benne van az <devicename>md</devicename>
	eszk&ouml;z t&aacute;mogat&aacute;sa, csatlakoztathatjuk is az
	&aacute;llom&aacute;nyrendszert:</para>

      <screen>&prompt.root; <userinput>mdconfig -a -t vnode -f <replaceable>/tmp/ind&iacute;that&oacute;.iso</replaceable> -u 0</userinput>
&prompt.root; <userinput>mount -t cd9660 /dev/md0 /mnt</userinput></screen>

      <para>Ezut&aacute;n m&aacute;r &ouml;ssze tudjuk vetni az
	<filename>/mnt</filename> &eacute;s
	<filename><replaceable>/tmp/saj&aacute;tboot</replaceable></filename>
	k&ouml;nyvt&aacute;rak egyez&#245;s&eacute;g&eacute;t.</para>

      <para>A &man.mkisofs.8; viselked&eacute;s&eacute;t t&ouml;bb
	m&aacute;s opci&oacute;val tudjuk finomhangolni, mint
	p&eacute;ld&aacute;ul az ISO 9660 kioszt&aacute;s
	m&oacute;dos&iacute;t&aacute;sa vagy a Joliet &eacute;s HFS
	lemezek k&eacute;sz&iacute;t&eacute;se.  A &man.mkisofs.8; man
	oldalon mindezekr&#245;l b&#245;vebben olvashatunk.</para>

    </sect2>

    <sect2 id="burncd">
      <title>burncd</title>

      <indexterm>
	<primary>CD-k</primary>
	<secondary>&iacute;r&aacute;sa</secondary>
      </indexterm>

      <para>Ha ATAPI CD-&iacute;r&oacute;nk van, akkor a
	<command>burncd</command> paranccsal &iacute;rhatjuk az ISO
	image-et a lemezre.  A <command>burncd</command> az alaprendszer
	r&eacute;sze, &eacute;s <filename>/usr/sbin/burncd</filename>
	n&eacute;ven &eacute;rhet&#245; el.  A haszn&aacute;lata igen
	egyszer&#251;, csup&aacute;n p&aacute;r param&eacute;tere
	van:</para>

      <screen>&prompt.root; <userinput>burncd -f <replaceable>eszk&ouml;z</replaceable> data <replaceable>image.iso</replaceable> fixate</userinput></screen>

      <para>Ezzel a paranccsal r&aacute;m&aacute;soljuk az
	<replaceable>image.iso</replaceable> &aacute;llom&aacute;nyt az
	<replaceable>eszk&ouml;z</replaceable> eszk&ouml;zre.  Az
	alap&eacute;rtelmezett eszk&ouml;z a
	<devicename>/dev/acd0</devicename>.  A &man.burncd.8; man
	oldal&aacute;n tal&aacute;ljuk meg az &iacute;r&aacute;si
	sebess&eacute;ggel, a CD &iacute;r&aacute;s ut&aacute;ni
	kiad&aacute;s&aacute;val &eacute;s az audio lemezek
	&iacute;r&aacute;s&aacute;val kapcsolatos
	be&aacute;ll&iacute;t&aacute;sokat.</para>

    </sect2>

    <sect2 id="cdrecord">
      <title>cdrecord</title>

      <para>Ha nincs ATAPI CD-&iacute;r&oacute;nk, akkor az
	&iacute;r&aacute;shoz a <command>cdrecord</command> parancsot
	kell haszn&aacute;lnunk.  A <command>cdrecord</command> nem az
	alaprendszer r&eacute;sze: vagy a <filename
	role="package">sysutils/cdrtools</filename> portb&oacute;l vagy
	a neki megfelel&#245; csomagb&oacute;l kell
	telep&iacute;ten&uuml;nk.  Az alaprendszerben
	v&eacute;gbemen&#245; v&aacute;ltoz&aacute;sok miatt a program
	bin&aacute;ris v&aacute;ltozatai hib&aacute;zhatnak, aminek
	k&ouml;vetkezt&eacute;ben csak
	<quote>poh&aacute;ral&aacute;t&eacute;teket</quote> fogunk tudni
	gy&aacute;rtani.  Ez&eacute;rt a rendszerrel egy&uuml;tt
	&eacute;rdemes friss&iacute;teni ezt a portot is.  Vagy ha a
	<link linkend="stable">-STABLE verzi&oacute;t
	haszn&aacute;ljuk</link>, akkor mindig &eacute;rdemes a port
	el&eacute;rhet&#245; leg&uacute;jabb verzi&oacute;j&aacute;ra
	friss&iacute;teni.</para>

      <para>Mik&ouml;zben a <command>cdrecord</command> sz&aacute;mos
	param&eacute;terrel rendelkezik, az alapvet&#245;
	haszn&aacute;lata m&eacute;gis egyszer&#251;bb a
	<command>burncd</command> parancs&eacute;n&aacute;l.  Egy ISO
	9660 form&aacute;tum&uacute; image-et ugyanis a
	k&ouml;vetkez&#245; m&oacute;don tudunk fel&iacute;rni
	lemezre:</para>

      <screen>&prompt.root; <userinput>cdrecord dev=<replaceable>eszk&ouml;z</replaceable> <replaceable>image.iso</replaceable></userinput></screen>

      <para>A <command>cdrecord</command> haszn&aacute;lat&aacute;nak
	tr&uuml;kk&ouml;s r&eacute;sze a megfelel&#245; eszk&ouml;z
	megtal&aacute;l&aacute;sa, teh&aacute;t a <option>dev</option>
	be&aacute;ll&iacute;t&aacute;s helyes megad&aacute;sa.  Ehhez
	haszn&aacute;ljuk a <command>cdrecord</command>
	<option>-scanbus</option> param&eacute;ter&eacute;t, amely az
	al&aacute;bbihoz hasonl&oacute; eredm&eacute;nyt fog
	produk&aacute;lni:</para>

      <indexterm>
	<primary>CD-k</primary>
	<secondary>&iacute;r&aacute;sa</secondary>
      </indexterm>

      <screen>&prompt.root; <userinput>cdrecord -scanbus</userinput>
Cdrecord-Clone 2.01 (i386-unknown-freebsd7.0) Copyright (C) 1995-2004 J&ouml;rg Schilling
Using libscg version 'schily-0.1'
scsibus0:
        0,0,0     0) 'SEAGATE ' 'ST39236LW       ' '0004' Disk
        0,1,0     1) 'SEAGATE ' 'ST39173W        ' '5958' Disk
        0,2,0     2) *
        0,3,0     3) 'iomega  ' 'jaz 1GB         ' 'J.86' Removable Disk
        0,4,0     4) 'NEC     ' 'CD-ROM DRIVE:466' '1.26' Removable CD-ROM
        0,5,0     5) *
        0,6,0     6) *
        0,7,0     7) *
scsibus1:
        1,0,0   100) *
        1,1,0   101) *
        1,2,0   102) *
        1,3,0   103) *
        1,4,0   104) *
        1,5,0   105) 'YAMAHA  ' 'CRW4260         ' '1.0q' Removable CD-ROM
        1,6,0   106) 'ARTEC   ' 'AM12S           ' '1.06' Scanner
        1,7,0   107) *</screen>

      <para>Itt felsorol&aacute;sra ker&uuml;lnek a <option>dev</option>
	be&aacute;ll&iacute;t&aacute;s &eacute;rt&eacute;kek&eacute;nt
	felhaszn&aacute;lhat&oacute; eszk&ouml;z&ouml;k.  Keress&uuml;k
	meg k&ouml;zt&uuml;k a CD &iacute;r&oacute;nkat &eacute;s a
	<option>dev</option> &eacute;rt&eacute;k&eacute;nek a
	h&aacute;rom vessz&#245;vel elv&aacute;lasztott sz&aacute;mot
	adjuk meg.  Ebben az esetben a CD-&iacute;r&oacute; eszk&ouml;z
	most az 1,5,0 lesz, teh&aacute;t itt a helyes
	param&eacute;terez&eacute;s <option>dev=1,5,0</option>.  Ezt az
	&eacute;rt&eacute;k&eacute;t k&ouml;nnyebben is meg lehet adni.
	Ennek r&eacute;szleteir&#245;l a &man.cdrecord.1; man
	oldal&aacute;n olvashatunk.  Abban az esetben is &eacute;rdemes
	fellapoznunk, ha az audio s&aacute;vok
	&iacute;r&aacute;s&aacute;r&oacute;l, az &iacute;r&aacute;si
	sebess&eacute;g korl&aacute;toz&aacute;s&aacute;r&oacute;l vagy
	m&aacute;s hasonl&oacute; dolgokr&oacute;l akarunk
	olvasni.</para>

    </sect2>

    <sect2 id="duplicating-audiocds">
      <title>Audio CD-k m&aacute;sol&aacute;sa</title>

      <para>Audio CD-t &uacute;gy tudunk m&aacute;solni, ha
	el&#245;sz&ouml;r &aacute;llom&aacute;nyok sorozat&aacute;ba
	mentj&uuml;k a lemez tartalm&aacute;t, majd ezeket az
	&aacute;llom&aacute;nyokat egy &uuml;res CD-re &iacute;rjuk.
	Ennek konkr&eacute;t folyamata azonban n&eacute;mileg
	elt&eacute;r az ATAPI- &eacute;s SCSI-meghajt&oacute;k
	haszn&aacute;lata sor&aacute;n.</para>

      <procedure>
	<title>SCSI-meghajt&oacute;k eset&eacute;n</title>

	<step>
	  <para>A <command>cdda2wav</command> programmal ments&uuml;k le
	    a lemez tartalm&aacute;t.</para>

	  <screen>&prompt.user; <userinput>cdda2wav -vall -D2,0 -B -Owav</userinput></screen>
	</step>

	<step>
	  <para>A <command>cdrecord</command> paranccsal &iacute;rjuk
	    fel a <filename>.wav</filename> kiterjeszt&eacute;s&#251;
	    &aacute;llom&aacute;nyokat.</para>

	  <screen>&prompt.user; <userinput>cdrecord -v dev=<replaceable>2,0</replaceable> -dao -useinfo  *.wav</userinput></screen>

	  <para>Gondoskodjunk r&oacute;la, hogy a
	    <replaceable>2,0</replaceable> &eacute;rt&eacute;ket a <xref
	    linkend="cdrecord">nak megfelel&#245;en helyesen
	    &aacute;ll&iacute;tottuk be.</para>
	</step>
      </procedure>

      <procedure>
	<title>ATAPI-meghajt&oacute;k eset&eacute;n</title>

	<note>
	  <para>Az <link linkend="atapicam">ATAPI/CAM modul</link>
	    seg&iacute;ts&eacute;g&eacute;vel a
	    <command>cdda2wav</command> parancs ATAPI
	    meghajt&oacute;kkal is haszn&aacute;lhat&oacute;.  Ez a
	    megold&aacute;s &aacute;ltal&aacute;ban kedvez&#245;bb (a
	    hib&aacute;k &eacute;s bytesorrend &uuml;gyesebb
	    kezel&eacute;se, stb.) a legt&ouml;bb
	    felhaszn&aacute;l&oacute; sz&aacute;m&aacute;ra, mint az itt
	    ismertetett.</para>
	</note>

	<step>
	  <para>Az ATAPI CD meghajt&oacute;ja az egyes s&aacute;vokat
	  <filename>/dev/acd<replaceable>d</replaceable>t<replaceable>nn</replaceable>
	    </filename> n&eacute;ven teszi
	    el&eacute;rhet&#245;v&eacute;, ahol a
	    <replaceable>d</replaceable> a meghajt&oacute;
	    sorsz&aacute;ma, a <replaceable>nn</replaceable> a
	    s&aacute;v k&eacute;t sz&aacute;mjeggyel ki&iacute;rt
	    sorsz&aacute;ma, amelyet sz&uuml;ks&eacute;g szerint
	    balr&oacute;l null&aacute;val eg&eacute;sz&iacute;tenek ki.
	    &Iacute;gy teh&aacute;t az els&#245; meghajt&oacute;
	    els&#245; s&aacute;vja a <filename>/dev/acd0t01</filename>,
	    a m&aacute;sodik a <filename>/dev/acd0t02</filename>, a
	    harmadik a <filename>/dev/acd0t03</filename> &eacute;s
	    &iacute;gy tov&aacute;bb.</para>

	  <para>Ellen&#245;rizz&uuml;k, hogy ezek az eszk&ouml;z&ouml;k
	    jelen vannak a <filename>/dev</filename>
	    k&ouml;nyvt&aacute;rban.  Amennyiben
	    hi&aacute;nyozn&aacute;nak, k&eacute;nyszer&iacute;ts&uuml;k
	    ki a lemez &uacute;jb&oacute;li
	    beolvas&aacute;s&aacute;t:</para>

	  <screen>&prompt.root; <userinput>dd if=/dev/acd0 of=/dev/null count=1</userinput></screen>
	</step>

	<step>
	  <para>Szedj&uuml;k le az egyes s&aacute;vokat a &man.dd.1;
	    haszn&aacute;lat&aacute;val.  A parancs kiad&aacute;sakor
	    meg kell adnunk egy blokkm&eacute;retet is:</para>

	  <screen>&prompt.root; <userinput>dd if=/dev/acd0t01 of=track1.cdr bs=2352</userinput>
&prompt.root; <userinput>dd if=/dev/acd0t02 of=track2.cdr bs=2352</userinput>
...
</screen>
	</step>

	<step>
	  <para>A <command>burncd</command> haszn&aacute;lat&aacute;val
	    &iacute;rjuk fel a lemezre az im&eacute;nt lementett
	    &aacute;llom&aacute;nyokat.  Meg kell adnunk, hogy ezek
	    audio &aacute;llom&aacute;nyok, &eacute;s hogy a
	    <command>burncd</command> a munka befejezt&eacute;vel
	    z&aacute;rja le (fixate) a lemezt.</para>

	  <screen>&prompt.root; <userinput>burncd -f <replaceable>/dev/acd0</replaceable> audio <replaceable>track1.cdr track2.cdr ...</replaceable> fixate</userinput></screen>
	</step>
      </procedure>

    </sect2>

    <sect2 id="imaging-cd">
      <title>Adat CD-k m&aacute;sol&aacute;sa</title>

      <para>Az adatot tartalmaz&oacute; CD-ket le tudjuk m&aacute;solni
	egy olyan image-be, amely funkcion&aacute;lisan megegyezik egy
	&man.mkisofs.8; &aacute;ltal l&eacute;trehozott image-dzsel
	&eacute;s amivel le tudunk m&aacute;solni b&aacute;rmilyen adat
	CD-t.  Az itt megadott p&eacute;lda azt felt&eacute;telezi, hogy
	a CD-meghajt&oacute;nk neve <devicename>acd0</devicename>.
	Hely&eacute;re a saj&aacute;t CD-meghajt&oacute;nk nev&eacute;t
	kell behelyettes&iacute;teni.</para>

      <screen>&prompt.root; <userinput>dd if=/dev/acd0 of=<replaceable>&aacute;llom&aacute;ny.iso</replaceable> bs=2048</userinput></screen>

      <para>Most miut&aacute;n lementett&uuml;k az image-et,
	&iacute;rjuk fel CD-re a fentiek szerint.</para>

    </sect2>

    <sect2 id="mounting-cd">
      <title>Adat CD-k haszn&aacute;lata</title>

      <para>Most, hogy m&aacute;r k&eacute;sz&iacute;tett&uuml;nk egy
	szabv&aacute;nyos adat CD-t, val&oacute;sz&iacute;n&#251;leg
	szeretn&eacute;nk is valamilyen csatlakoztatni &eacute;s
	el&eacute;rni a rajta lev&#245; adatokat.
	Alap&eacute;rtelmez&eacute;s szerint a &man.mount.8; mindig azt
	felt&eacute;telezi, hogy az &aacute;llom&aacute;nyrendszerek
	<literal>ufs</literal> t&iacute;pus&uacute;ak.  Ez&eacute;rt ha
	valami ilyesmivel pr&oacute;b&aacute;lkozunk:</para>

      <screen>&prompt.root; <userinput>mount /dev/cd0 /mnt</userinput></screen>

      <para>akkor egy <errorname>Incorrect super block</errorname>
	sz&ouml;veg&#251; hiba&uuml;zenetet lesz a jutalmunk, &eacute;s
	term&eacute;szetesen nem tudjuk csatlakoztatni a CD-t.  Mivel a
	CD nem <literal>UFS</literal> &aacute;llom&aacute;nyrendszert
	tartalmaz, ez&eacute;rt az ilyen jelleg&#251;
	k&iacute;s&eacute;rleteink mind kudarcba fognak fulladni.
	Valahogy fel kell vil&aacute;gos&iacute;tanunk a &man.mount.8;
	parancsot arr&oacute;l, hogy itt most egy
	<literal>ISO9660</literal> t&iacute;pus&uacute;
	&aacute;llom&aacute;nyrendszert akarunk csatlakoztatni,
	&eacute;s akkor minden a hely&eacute;re ker&uuml;l.  Ezt
	&uacute;gy tudjuk megtenni, ha a &man.mount.8; parancsnak
	megadjuk a <option>-t cd9660</option> param&eacute;tert.
	P&eacute;ld&aacute;ul, ha a <devicename>/dev/acd0</devicename>
	n&eacute;ven el&eacute;rhet&#245; CD-meghajt&oacute;ban
	lev&#245; lemezt akarjuk a <filename>/mnt</filename>
	k&ouml;nyvt&aacute;rba csatlakoztatni, akkor ezt kell
	beg&eacute;peln&uuml;nk:</para>

      <screen>&prompt.root; <userinput>mount -t cd9660 /dev/cd0 /mnt</userinput></screen>

      <para>Vegy&uuml;k &eacute;szre, hogy az eszk&ouml;z neve (ez ebben
	a p&eacute;ld&aacute;ban most <devicename>/dev/cd0</devicename>)
	lehet m&aacute;s is att&oacute;l f&uuml;gg&#245;en, hogy milyen
	csatol&oacute;fel&uuml;letet haszn&aacute;l a
	CD-meghajt&oacute;nk.  S&#245;t, a <option>-t cd9660</option>
	val&oacute;j&aacute;ban csak a &man.mount.cd9660.8; parancsot
	ind&iacute;tja el.  Ennek t&uuml;kr&eacute;ben teh&aacute;t az
	el&#245;bbi p&eacute;ld&aacute;t &iacute;gy
	r&ouml;vid&iacute;thetj&uuml;k le:</para>

      <screen>&prompt.root; <userinput>mount_cd9660 /dev/cd0 /mnt</userinput></screen>

      <para>Ezen a m&oacute;don b&aacute;rmilyen
	gy&aacute;rtm&aacute;ny&uacute; adat CD-t k&eacute;pesek vagyunk
	csatlakoztatni.  Egyes ISO 9660 kiterjeszt&eacute;seket
	haszn&aacute;l&oacute; lemezek azonban esetleg furcs&aacute;n
	m&#251;k&ouml;dhetnek.  P&eacute;ld&aacute;ul Joliet lemezek az
	&ouml;sszes &aacute;llom&aacute;ny nev&eacute;t
	k&eacute;tbyte-os Unicode karakterben t&aacute;rolj&aacute;k.  A
	&os; rendszermagja ugyan nem besz&eacute;li a Unicode-ot, de a
	&os; CD9660 meghajt&oacute;ja k&eacute;pes menetk&ouml;zben
	&aacute;tkonvert&aacute;lni a Unicode karaktereket.  Ha bizonyos
	nem angol karakterek k&eacute;rd&#245;jelekk&eacute;nt
	jelenn&eacute;nek meg, akkor a <option>-C</option>
	be&aacute;ll&iacute;t&aacute;s haszn&aacute;lat&aacute;val
	m&eacute;g egy helyi k&oacute;dlapot is meg kell adnunk.  Ezzel
	kapcsolatban b&#245;vebb
	t&aacute;j&eacute;koztat&aacute;s&eacute;rt forduljunk a
	&man.mount.cd9660.8; man oldalhoz.</para>

      <note>
	<para>A <option>-C</option> be&aacute;ll&iacute;t&aacute;s
	  seg&iacute;ts&eacute;g&eacute;vel csak akkor lesz k&eacute;pes
	  a rendszermag elv&eacute;gezni ezt az
	  &aacute;talak&iacute;t&aacute;st, ha el&#245;tte
	  bet&ouml;ltj&uuml;k a <filename>cd9660_iconv.ko</filename>
	  modult.  Ezt megtehetj&uuml;k &uacute;gy, hogy ha
	  felvessz&uuml;k a k&ouml;vetkez&#245; sort a
	  <filename>loader.conf</filename>
	  &aacute;llom&aacute;nyba:</para>

	<programlisting>cd9660_iconv_load="YES"</programlisting>

	<para>Ind&iacute;tsuk &uacute;jra a
	  sz&aacute;m&iacute;t&oacute;g&eacute;p&uuml;nket, vagy
	  k&ouml;zvetlen&uuml;l t&ouml;lts&uuml;k be a modult a
	  &man.kldload.8; haszn&aacute;lat&aacute;val.</para>
      </note>

      <para>Estenk&eacute;nt el&#245;fordulhat, hogy kapunk egy
	<errorname>Device not configured</errorname> hiba&uuml;zenetet a
	CD-k csatlakoztat&aacute;sakor.  Ez &aacute;ltal&aacute;ban arra
	utal, hogy a CD-meghajt&oacute; nem &eacute;rz&eacute;keli a
	berakott lemezt, vagy &eacute;ppen a meghajt&oacute; nem
	l&aacute;that&oacute; a buszon.  A CD-meghajt&oacute;k
	eset&eacute;ben p&aacute;r m&aacute;sodpercig eltarthat,
	am&iacute;g felismeri a berakott lemezt, ilyenkor mindig
	legy&uuml;nk t&uuml;relemmel.</para>

      <para>N&eacute;ha a SCSI CD-meghajt&oacute; nem
	l&aacute;that&oacute;, mert nem volt el&eacute;g ideje
	v&aacute;laszolni busz &uacute;jraind&iacute;t&aacute;sa
	el&#245;tt.  Ha SCSI CD-meghajt&oacute;nk van, akkor a
	k&ouml;vetkez&#245; be&aacute;ll&iacute;t&aacute;st tegy&uuml;k
	hozz&aacute; a rendszermagunk
	konfigur&aacute;ci&oacute;j&aacute;hoz &eacute;s <link
	linkend="kernelconfig-building"> ford&iacute;tsuk &uacute;jra a
	rendszermagukat</link>.</para>

      <programlisting>options SCSI_DELAY=15000</programlisting>

      <para>Ezzel utas&iacute;tjuk a SCSI buszunkat egy 15
	m&aacute;sodperces v&aacute;rakoz&aacute;sra a rendszer
	ind&iacute;t&aacute;sa sor&aacute;n, &eacute;s &iacute;gy ezzel
	el&eacute;g es&eacute;lyt adunk arra, hogy a CD-meghajt&oacute;
	v&aacute;laszolni tudjon a busz
	&uacute;jraind&iacute;t&aacute;sa el&#245;tt.</para>

    </sect2>

    <sect2 id="rawdata-cd">
      <title>Nyers adat CD-k &iacute;r&aacute;sa</title>

      <para>&Iacute;rhatunk k&ouml;zvetlen&uuml;l is
	&aacute;llom&aacute;nyokat a CD-re, ISO 9660
	form&aacute;tum&uacute; &aacute;llom&aacute;nyrendszer
	haszn&aacute;lata n&eacute;lk&uuml;l.  Sokan &iacute;gy
	oldj&aacute;k meg a ment&eacute;st.  Ezt sokkal gyorsabban
	lebonyol&iacute;that&oacute; egy szabv&aacute;nyos
	CD eset&eacute;ben:</para>

      <screen>&prompt.root; <userinput>burncd -f /dev/acd1 -s 12 data archive.tar.gz fixate</userinput></screen>

      <para>Az ezen a m&oacute;don meg&iacute;rt CD-ket szint&eacute;n
	nyers m&oacute;don kell olvasnunk:</para>

      <screen>&prompt.root; <userinput>tar xzvf /dev/acd1</userinput></screen>

      <para>Az ilyen lemezeket nem tudjuk a norm&aacute;lis CD-khez
	hasonl&oacute;an csatlakoztatni.  S&#245;t, az ilyen CD-ket csak
	&os; alatt tudjuk olvasni.  Ha csatlakoztathat&oacute;v&aacute;
	akarjuk tenni a lemezt, vagy m&aacute;s oper&aacute;ci&oacute;s
	rendszerek al&oacute;l is szeretn&eacute;nk olvasni, akkor erre
	a c&eacute;lra a fentebb bemutatott &man.mkisofs.8; parancsot
	kell haszn&aacute;lnunk.</para>

    </sect2>

    <sect2 id="atapicam">
      <sect2info>
	<authorgroup>
	  <author>
	    <firstname>Marc</firstname>
	    <surname>Fonvieille</surname>
	    <contrib>&Iacute;rta: </contrib>
	  </author>
	</authorgroup>
      </sect2info>

      <indexterm>
	<primary>CD-&iacute;r&oacute;k</primary>
	<secondary>ATAPI/CAM meghajt&oacute;</secondary>
      </indexterm>

      <title>Az ATAPI/CAM meghajt&oacute; haszn&aacute;lata</title>

      <para>Ez a meghajt&oacute; lehet&#245;v&eacute; teszi az ATAPI
	eszk&ouml;z&ouml;k (CD-ROM, CD-RW, DVD meghajt&oacute;k stb...)
	sz&aacute;m&aacute;ra, hogy a SCSI alrendszeren kereszt&uuml;l
	legyenek el&eacute;rhet&#245;ek, &iacute;gy eset&uuml;nkben is
	haszn&aacute;lhat&oacute;v&aacute; v&aacute;lnak olyan
	alkalmaz&aacute;sok, mint p&eacute;ld&aacute;ul <filename
	role="package">sysutils/cdrdao</filename> vagy a
	&man.cdrecord.1;.</para>

      <para>A meghajt&oacute; haszn&aacute;lat&aacute;hoz a
	k&ouml;vetkez&#245; sort kell a
	<filename>/boot/loader.conf</filename> &aacute;llom&aacute;nyba
	illeszteni:</para>

      <programlisting>atapicam_load="YES"</programlisting>

      <para>Ind&iacute;tsuk &uacute;jra a
	sz&aacute;m&iacute;t&oacute;g&eacute;pet.</para>

      <note>
	<para>Amennyiben a rendszermagban az &man.atapicam.4; statikus
	  t&aacute;mogat&aacute;s&aacute;t szeretn&eacute;nk
	  haszn&aacute;lni, &uacute;gy a k&ouml;vetkez&#245; sort kell a
	  rendszermag konfigur&aacute;ci&oacute;s
	  &aacute;llom&aacute;ny&aacute;ba felvenni:</para>

	<programlisting>device atapicam</programlisting>

	<para>Tov&aacute;bb&aacute; a k&ouml;vetkez&#245; sorokra lesz
	  m&eacute;g sz&uuml;ks&eacute;g&uuml;nk:</para>

	<programlisting>device ata
device scbus
device cd
device pass</programlisting>

	<para>Ezeknek m&aacute;r eleve ott kell szerepelnie.
	  Ezut&aacute;n ford&iacute;tsuk &uacute;jra &eacute;s
	  telep&iacute;ts&uuml;k a rendszermagot, majd ind&iacute;tsuk
	  &uacute;jra a sz&aacute;m&iacute;t&oacute;g&eacute;pet.</para>
      </note>

      <para>A rendszer indul&aacute;sakor az &iacute;r&oacute;nak ehhez
	hasonl&oacute; m&oacute;don kell megjelennie:</para>

      <screen>acd0: CD-RW &lt;MATSHITA CD-RW/DVD-ROM UJDA740&gt; at ata1-master PIO4
cd0 at ata1 bus 0 target 0 lun 0
cd0: &lt;MATSHITA CDRW/DVD UJDA740 1.00&gt; Removable CD-ROM SCSI-0 device
cd0: 16.000MB/s transfers
cd0: Attempt to query device size failed: NOT READY, Medium not present - tray closed</screen>

      <para>A meghajt&oacute; most m&aacute;r el&eacute;rhet&#245; a
	<filename>/dev/cd0</filename> eszk&ouml;z&ouml;n kereszt&uuml;l,
	&eacute;s p&eacute;ld&aacute;ul ennyi
	beg&eacute;pel&eacute;s&eacute;vel csatlakoztatni tudunk
	r&oacute;la egy CD-t a <filename>/mnt</filename>
	k&ouml;nyvt&aacute;rba:</para>

      <screen>&prompt.root; <userinput>mount -t cd9660 <replaceable>/dev/cd0</replaceable> /mnt</userinput></screen>

      <para><username>root</username>
	felhaszn&aacute;l&oacute;k&eacute;nt a k&ouml;vetkez&#245;
	paranccsal tudjuk lek&eacute;rdezi az &iacute;r&oacute; SCSI
	c&iacute;m&eacute;t:</para>

      <screen>&prompt.root; <userinput>camcontrol devlist</userinput>
&lt;MATSHITA CDRW/DVD UJDA740 1.00&gt;   at scbus1 target 0 lun 0 (pass0,cd0)</screen>

      <para>Eszerint a <literal>1,0,0</literal> lesz az eszk&ouml;z SCSI
	c&iacute;me, amelyet a &man.cdrecord.1; &eacute;s m&aacute;s
	SCSI alkalmaz&aacute;sok eset&eacute;n adunk meg.</para>

      <para>Az ATAPI/CAM &eacute;s SCSI rendszerek tekintet&eacute;ben
	olvassuk el az &man.atapicam.4; &eacute;s &man.cam.4; man
	oldalakat.</para>

    </sect2>
  </sect1>

  <sect1 id="creating-dvds">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Marc</firstname>
	  <surname>Fonvieille</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
      <authorgroup>
	<author>
	  <firstname>Andy</firstname>
	  <surname>Polyakov</surname>
	  <contrib>Seg&iacute;ts&eacute;get ny&uacute;jtott benne:
	    </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>L&eacute;zeres t&aacute;rol&oacute;eszk&ouml;z&ouml;k (DVD-k)
      l&eacute;trehoz&aacute;sa &eacute;s haszn&aacute;lata</title>

    <indexterm>
      <primary>DVD</primary>
      <secondary>&iacute;r&aacute;sa</secondary>
    </indexterm>

    <sect2>
      <title>Bevezet&eacute;s</title>

      <para>A DVD a CD-hez k&eacute;pest a l&eacute;zeres
	t&aacute;rol&oacute;eszk&ouml;z&ouml;k
	technol&oacute;gi&aacute;j&aacute;nak &uacute;jabb
	gener&aacute;ci&oacute;j&aacute;t k&eacute;pviseli.  A DVD
	b&aacute;rmelyik CD-n&eacute;l t&ouml;bb adatot k&eacute;pes
	t&aacute;rolni &eacute;s napjaink ez a vide&oacute;k
	kiad&aacute;s&aacute;nak szabv&aacute;nya.</para>

      <para>&Ouml;t fizikailag &iacute;rhat&oacute; form&aacute;tummal
	hat&aacute;rozhatjuk meg az &iacute;rhat&oacute; DVD
	fogalm&aacute;t:</para>

      <itemizedlist>
	<listitem>
	  <para>DVD-R: Ez volt az els&#245; el&eacute;rhet&#245;
	    &iacute;rhat&oacute; DVD form&aacute;tum.  A DVD-R
	    szabv&aacute;ny&aacute;t a <ulink
	    url="http://www.dvdforum.com/forum.shtml"> DVD
	    F&oacute;rum</ulink> fektette le.  Ez a form&aacute;tum csak
	    egyszer &iacute;rhat&oacute;.</para>
	</listitem>

	<listitem>
	  <para>DVD-RW: Ez a DVD-R szabv&aacute;ny
	    &uacute;jra&iacute;rhat&oacute; v&aacute;ltozata.  A DVD-RW
	    k&ouml;r&uuml;lbel&uuml;l 1000 alkalommal
	    &iacute;rhat&oacute; &uacute;jra.</para>
	</listitem>

	<listitem>
	  <para>DVD-RAM: Ez is a DVD F&oacute;rum &aacute;ltal
	    t&aacute;mogatott &uacute;jra&iacute;rhat&oacute;
	    form&aacute;tum.  A DVD-RAM cser&eacute;lhet&#245;
	    merevlemeznek l&aacute;tzsik.  Azonban ez
	    t&iacute;pus&uacute; adathordoz&oacute; nem kompatibilis
	    legt&ouml;bb DVD-ROM hajt&oacute;val &eacute;s DVD-Video
	    lej&aacute;tsz&oacute;val.  Csup&aacute;n csak
	    n&eacute;h&aacute;ny DVD-&iacute;r&oacute; ismeri a DVD-RAM
	    form&aacute;tumot.  A DVD-RAM
	    haszn&aacute;lat&aacute;r&oacute;l a <xref
	    linkend="creating-dvd-ram">ban tal&aacute;lunk b&#245;vebben
	    inform&aacute;ci&oacute;kat.</para>
	</listitem>

	<listitem>
	  <para>DVD+RW: Ezt az &uacute;jra&iacute;rhat&oacute;
	    form&aacute;tumot a <ulink
	    url="http://www.dvdrw.com/">DVD+RW
	    sz&ouml;vets&eacute;g</ulink> alkotta meg.  A DVD+RW lemezek
	    nagyj&aacute;b&oacute;l 1000 alkalommal
	    &iacute;rhat&oacute;ak &uacute;jra.</para>
	</listitem>

	<listitem>
	  <para>DVD+R: Ez a form&aacute;tum a DVD+RW form&aacute;tum
	    egyszer &iacute;rhat&oacute; v&aacute;ltozata.</para>
	</listitem>
      </itemizedlist>

      <para>Az egyr&eacute;teg&#251; &iacute;rhat&oacute; DVD-k
	&ouml;sszesen 4&nbsp;700&nbsp;000&nbsp;000&nbsp;byte-ot
	k&eacute;pesek r&ouml;gz&iacute;teni, ami 4,38&nbsp;GB vagy
	4&nbsp;485&nbsp;MB (1&nbsp;kilobyte itt 1024 byte).</para>

      <note>
	<para>Meg kell k&uuml;l&ouml;nb&ouml;ztetn&uuml;nk fizikai
	  t&aacute;rol&oacute;eszk&ouml;zt &eacute;s az
	  alkalmaz&aacute;st.  P&eacute;ld&aacute;ul a DVD-Video
	  &aacute;llom&aacute;nyok olyan jelleg&#251;
	  elrendez&eacute;s&eacute;t &iacute;rja el&#245;, ami
	  b&aacute;rmelyik &iacute;rhat&oacute; fizikai DVD
	  eszk&ouml;z&ouml;n megjelenhet: DVD-R, DVD+R, DVD-RW stb.
	  Miel&#245;tt kiv&aacute;lasztan&aacute;nk az eszk&ouml;z
	  t&iacute;pus&aacute;t, biztosnak kell lenn&uuml;nk benne, hogy
	  az &iacute;r&oacute; &eacute;s a DVD-Video
	  lej&aacute;tsz&oacute; (ez lehet egy &ouml;n&aacute;ll&oacute;
	  lej&aacute;tsz&oacute; vagy egy
	  sz&aacute;m&iacute;t&oacute;g&eacute;p DVD-ROM
	  meghajt&oacute;ja) kompatibilis a sz&oacute;banforg&oacute;
	  lemezzel.</para>
      </note>

    </sect2>

    <sect2>
      <title>Be&aacute;ll&iacute;t&aacute;s</title>

      <para>A &man.growisofs.1; programot fogjuk a DVD
	r&ouml;gz&iacute;t&eacute;s&eacute;re haszn&aacute;lni.  Ez a
	program a <application>dvd+rw-tools</application>
	seg&eacute;dprogramok (<filename
	role="package">sysutils/dvd+rw-tools</filename>)
	gy&#251;jtem&eacute;ny&eacute;nek r&eacute;sze.  A
	<application>dvd+rw-tools</application> az &ouml;sszes DVD
	m&eacute;dium t&iacute;pus&aacute;t ismeri.</para>

      <para>Ezek a seg&eacute;dprogramok a SCSI alrendszeren
	kereszt&uuml;l &eacute;rik az eszk&ouml;z&ouml;ket, ez&eacute;rt
	a haszn&aacute;lhatukhoz a rendszermagban
	sz&uuml;ks&eacute;g&uuml;nk lesz az <link
	linkend="atapicam">ATAPI/CAM t&aacute;mogat&aacute;sra</link>.
	Ha az &iacute;r&oacute;nk USB fel&uuml;leten csatlakozik, akkor
	mindez sz&uuml;ks&eacute;gtelen, &eacute;s ehelyett a <xref
	linkend="usb-disks">t kell elolvasnunk az USB eszk&ouml;z&ouml;k
	be&aacute;ll&iacute;t&aacute;s&aacute;hoz.</para>

      <para>Enged&eacute;lyezn&uuml;nk kell az ATAPI eszk&ouml;z&ouml;k
	DMA hozz&aacute;f&eacute;r&eacute;s&eacute;t is, amit a
	<filename>/boot/loader.conf</filename> &aacute;llom&aacute;nyban
	a k&ouml;vetkez&#245; sor hozz&aacute;ad&aacute;s&aacute;val
	tudunk megtenni:</para>

      <programlisting>hw.ata.atapi_dma="1"</programlisting>

      <para>A <application>dvd+rw-tools</application>
	haszn&aacute;lat&aacute;nak megkezd&eacute;se el&#245;tt a
	DVD-&iacute;r&oacute;nkkal kapcsolatban &eacute;rdemes
	&aacute;tolvasnunk a <ulink
	url="http://fy.chalmers.se/~appro/linux/DVD+RW/hcn.html">
	dvd+rw-tools hardverkompatibilit&aacute;si jegyzeteit
	(angolul)</ulink>.</para>

      <note>
	<para>Ha grafikus fel&uuml;letet szeretn&eacute;nk
	  haszn&aacute;lni, akkor &eacute;rdemes egy pillanat&aacute;st
	  vetn&uuml;nk a <application>K3b</application>re (<filename
	  role="package">sysutils/k3b</filename>), amely egy
	  felhaszn&aacute;l&oacute;bar&aacute;t fel&uuml;letet ad a
	  &man.growisofs.1; &eacute;s sok m&aacute;s
	  &iacute;r&oacute;program fel&eacute;.</para>
      </note>

    </sect2>

    <sect2>
      <title>Adat DVD-k &iacute;r&aacute;sa</title>

      <para>A &man.growisofs.1; a <link linkend="mkisofs">mkisofs</link>
	parancs el&#245;lapja, teh&aacute;t az
	&aacute;llom&aacute;nyrendszer
	l&eacute;trehoz&aacute;s&aacute;hoz a &man.mkisofs.8; programot
	fogja megh&iacute;vni &eacute;s ezt &iacute;rja fel a DVD-re.
	Ez azt jelenti, hogy az &iacute;r&aacute;si folyamat
	megkezd&eacute;se el&#245;tt nem kell semmilyen image-et
	l&eacute;trehoznunk.</para>

      <para>A <filename
	class="directory">/az/el&eacute;r&eacute;si/&uacute;t</filename>
	k&ouml;nyvt&aacute;rb&oacute;l a k&ouml;vetkez&#245; paranccsal
	tudjuk ki&iacute;rni az adatokat DVD+R vagy DVD-R
	lemezre:</para>

      <screen>&prompt.root; <userinput>growisofs -dvd-compat -Z <replaceable>/dev/cd0</replaceable> -J -R <replaceable>/az/el&eacute;r&eacute;si/&uacute;t</replaceable></userinput></screen>

      <para>A <option>-J -R</option> be&aacute;ll&iacute;t&aacute;sok a
	&man.mkisofs.8; programhoz ker&uuml;lnek &aacute;t az
	&aacute;llom&aacute;nyrendszer l&eacute;trehoz&aacute;sakor (itt
	most egy ISO 9660 &aacute;llom&aacute;nyrendszert hozunk
	l&eacute;tre, Joliet &eacute;s Rock Ridge
	kiterjeszt&eacute;sekkel), haszn&aacute;lat&aacute;nak
	r&eacute;szleteit l&aacute;sd &man.mkisofs.8;.</para>

      <para>A <option>-Z</option> be&aacute;ll&iacute;t&aacute;st a
	kezd&#245;menetek l&eacute;trehoz&aacute;sakor
	haszn&aacute;ljuk: t&ouml;bb menetben akarjuk &iacute;rni a
	lemezt vagy sem.  A DVD eszk&ouml;zt, amely itt most a
	<replaceable>/dev/cd0</replaceable>, a saj&aacute;t
	konfigur&aacute;ci&oacute;nknak megfelel&#245;en kell megadni.
	A <option>-dvd-compat</option> param&eacute;terrel
	lez&aacute;rjuk a lemezt, &iacute;gy ezut&aacute;n
	tov&aacute;bbi &iacute;r&aacute;s m&aacute;r nem
	lehets&eacute;ges.  Ez&eacute;rt cser&eacute;be jobb
	kompatibilit&aacute;st kapunk a DVD-ROM
	meghajt&oacute;kkal.</para>

      <para>El&#245;re legy&aacute;rtott image-dzsel is dolgozhatunk,
	teh&aacute;t p&eacute;ld&aacute;ul, ha az
	<replaceable>image.iso</replaceable> &aacute;llom&aacute;nyt
	akarjuk ki&iacute;rni, akkor ezt kell lefuttatnunk:</para>

      <screen>&prompt.root; <userinput>growisofs -dvd-compat -Z <replaceable>/dev/cd0</replaceable>=<replaceable>image.iso</replaceable></userinput></screen>

      <para>Az &iacute;r&aacute;si sebess&eacute;get
	mag&aacute;t&oacute;l be&aacute;ll&iacute;tja a lemez &eacute;s
	meghajt&oacute; k&eacute;pess&eacute;geinek megfelel&#245;en.
	Az &iacute;r&aacute;si sebess&eacute;g
	fel&uuml;lb&iacute;r&aacute;l&aacute;s&aacute;hoz
	haszn&aacute;ljuk a <option>-speed=</option> param&eacute;tert.
	A param&eacute;terek lehet&#245;s&eacute;geir&#245;l a
	&man.growisofs.1; man oldal&aacute;r&oacute;l tudhatunk meg
	t&ouml;bbet.</para>

      <note>
	<para>4,38&nbsp;GB-n&aacute;l t&ouml;bb adat
	  &iacute;r&aacute;s&aacute;hoz egy hibrid UDF/ISO-9660
	  t&iacute;pus&uacute; &aacute;llom&aacute;nyrendszert kell
	  l&eacute;trehoznunk.  Ezt &uacute;gy tudjuk el&eacute;rni, ha
	  &man.mkisofs.8; &eacute;s a t&ouml;bbi hasonl&oacute; program
	  (p&eacute;ld&aacute;ul &man.growisofs.1;)
	  h&iacute;v&aacute;sakor m&eacute;g hozz&aacute;tessz&uuml;k az
	  <option>-udf -iso-level 3</option> param&eacute;tereket.
	  Ezekre csak lemezk&eacute;pek
	  k&eacute;sz&iacute;t&eacute;sekor vagy az
	  &aacute;llom&aacute;nyok k&ouml;zvetlen lemezre
	  &iacute;r&aacute;sakor van sz&uuml;ks&eacute;g&uuml;nk.  Az
	  &iacute;gy l&eacute;trehozott lemezeket a &man.mount.udf.8;
	  seg&eacute;dprogram seg&iacute;ts&eacute;g&eacute;vel UDF
	  &aacute;llom&aacute;nyrendszerk&eacute;nt tudjuk
	  csatlakoztatni.  Ez&eacute;rt csak olyan
	  oper&aacute;ci&oacute;s rendszereken
	  haszn&aacute;lhat&oacute;, amelyek ismerik ezt a
	  form&aacute;tumot, ellenkez&#245; esetben csak hib&aacute;s
	  &aacute;llom&aacute;nyokat fogunk l&aacute;tni a
	  lemezen.</para>

	<para>P&eacute;lda ilyen lemezk&eacute;p
	  l&eacute;trehoz&aacute;s&aacute;ra:</para>

	<screen>&prompt.root; <userinput>growisofs -dvd-compat -udf -iso-level 3 -Z <replaceable>/dev/cd0</replaceable> -J -R <replaceable>/az/&uacute;j/adat/helye</replaceable></userinput></screen>

	<para>Ha a lemezk&eacute;p m&aacute;r eleve nagyobb
	  m&eacute;ret&#251; &aacute;llom&aacute;nyokat tartalmaz, a lemez
	  &iacute;r&aacute;sakor a &man.growisofs.1; programnak
	  m&aacute;r nem kell tov&aacute;bbi param&eacute;tereket
	  &aacute;tadnunk.</para>

	<para>Lehet&#245;leg mindig a <filename
	    role="package">sysutils/cdrtools</filename> legfrissebb
	  verzi&oacute;j&aacute;t haszn&aacute;ljuk (amely a
	  &man.mkisofs.8; programot is tartalmazza), mivel a
	  r&eacute;gebbi verzi&oacute;k nem t&aacute;mogatj&aacute;k a
	  nagyobb m&eacute;ret&#251; &aacute;llom&aacute;nyokat.  Ha
	  probl&eacute;m&aacute;k ad&oacute;dnak a programok
	  haszn&aacute;lata sor&aacute;n, akkor
	  pr&oacute;b&aacute;lkozzunk a fejleszt&#245;i
	  v&aacute;ltozattal (<filename
	    role="package">sysutils/cdrtools-devel</filename>) &eacute;s
	  olvassuk el a &man.mkisofs.8; man oldal&aacute;t.</para>
      </note>
    </sect2>

    <indexterm>
      <primary>DVD</primary>
      <secondary>DVD-Video</secondary>
    </indexterm>

    <sect2>
      <title>DVD-Video &iacute;r&aacute;sa</title>

      <para>A DVD-Video az &aacute;llom&aacute;nyok speci&aacute;lis
	szervez&eacute;s&eacute;re utal, amely az ISO 9660 &eacute;s az
	mikr&oacute; UDF (M-UDF) specifik&aacute;ci&oacute;kon alapszik.
	A DVD-Video emellett egy adott adatszerkezeti hierarchi&aacute;t
	is takar, ez&eacute;rt kell egy k&uuml;l&ouml;n programmal,
	p&eacute;ld&aacute;ul a <filename
	role="package">multimedia/dvdauthor</filename>
	seg&iacute;ts&eacute;g&eacute;vel
	&ouml;ssze&aacute;ll&iacute;tani egy DVD-t.</para>

      <para>Ha m&aacute;r a birtokunkban van egy DVD-Video
	&aacute;llom&aacute;nyrendszer k&eacute;pe, akkor az eddigiek
	szerint egyszer&#251;en csak &iacute;rjuk fel egy lemezre, ahogy
	azt az el&#245;z&#245; szakaszban is l&aacute;thattuk.  Ha
	&ouml;ssze&aacute;ll&iacute;tottuk a DVD anyag&aacute;t
	&eacute;s p&eacute;ld&aacute;ul a <filename
	class="directory">/a/vide&oacute;/el&eacute;r&eacute;si/&uacute;tja</filename>
	k&ouml;nyvt&aacute;rba raktuk, akkor a k&ouml;vetkez&#245;
	paranccsal &iacute;rathatjuk ki a DVD-Video
	form&aacute;tum&uacute; lemezt:</para>

      <screen>&prompt.root; <userinput>growisofs -Z <replaceable>/dev/cd0</replaceable> -dvd-video <replaceable>/a/vide&oacute;/el&eacute;r&eacute;si/&uacute;tja</replaceable></userinput></screen>

      <para>A <option>-dvd-video</option> param&eacute;tert kell
	&aacute;tadni a &man.mkisofs.8; programnak, amelynek
	hat&aacute;s&aacute;ra l&eacute;trehoz egy DVD-Video
	form&aacute;tum&uacute; &aacute;llom&aacute;nyrendszert.
	Emellett a <option>-dvd-video</option>
	be&aacute;ll&iacute;t&aacute;s maga ut&aacute;n vonja a
	&man.growisofs.1; <option>-dvd-compat</option>
	be&aacute;ll&iacute;t&aacute;s&aacute;t is.</para>

    </sect2>

    <indexterm>
      <primary>DVD</primary>
      <secondary>DVD+RW</secondary>
    </indexterm>

    <sect2>
      <title>A DVD+RW haszn&aacute;lata</title>

      <para>Elt&eacute;r&#245;en a CD-RW-t&#245;l, egy &eacute;rintetlen
	DVD+RW-t az els&#245; haszn&aacute;lat el&#245;tt meg kell
	form&aacute;zni.  A &man.growisofs.1; program err&#245;l az
	els&#245; adand&oacute; alkalommal gondoskodik, &eacute;s ez az
	<emphasis>aj&aacute;nlott</emphasis>.  Azonban a DVD+RW
	form&aacute;z&aacute;s&aacute;ra haszn&aacute;lhatjuk a
	<command>dvd+rw-format</command> parancsot is:</para>

      <screen>&prompt.root; <userinput>dvd+rw-format <replaceable>/dev/cd0</replaceable></userinput></screen>

      <para>Ezt a m&#251;veletet csak egyszer kell elv&eacute;gezni,
	hiszen ne feledj&uuml;k, hogy csak a sz&#251;z DVD+RW lemezeket
	kell megform&aacute;zni.  Ezut&aacute;n a DVD+RW-t a
	kor&aacute;bbi szakaszoknak megfelel&#245;en tudjuk
	&iacute;rni.</para>

      <para>Ha a DVD+RW-re &uacute;j adatot akarunk &iacute;rni (egy
	teljesen &uacute;j &aacute;llom&aacute;nyrendszert, nem pedig
	adatokat hozz&aacute;f&#251;zni), akkor nem kell
	&uuml;ress&eacute; tenni a lemezt, egyszer&#251;en csak
	elegend&#245; fel&uuml;l&iacute;rni az el&#245;z&#245;eket (egy
	&uacute;j kezd&#245;menet l&eacute;trehoz&aacute;s&aacute;val)
	valahogy &iacute;gy:</para>

      <screen>&prompt.root; <userinput>growisofs -Z <replaceable>/dev/cd0</replaceable> -J -R <replaceable>/az/&uacute;j/adat/helye</replaceable></userinput></screen>

      <para>A DVD+RW form&aacute;tum felaj&aacute;nlja annak
	lehet&#245;s&eacute;g&eacute;t is, hogy k&ouml;nnyed&eacute;n
	hozz&aacute; lehessen f&#251;zni adatokat az el&#245;z&#245;
	&iacute;r&aacute;shoz.  A m&#251;velet sor&aacute;n az &uacute;j
	menetet &ouml;sszef&#251;zi a megl&eacute;v&#245;vel,
	teh&aacute;t ez nem egy t&ouml;bbmenetes &iacute;r&aacute;s,
	hanem a &man.growisofs.1; <emphasis>megn&ouml;veli</emphasis> a
	lemezen tal&aacute;lhat&oacute; ISO 9660
	&aacute;llom&aacute;nyrendszert.</para>

      <para>P&eacute;ld&aacute;ul, ha egy kor&aacute;bban meg&iacute;rt
	DVD+RW lemezen lev&#245; adatokhoz akarunk
	hozz&aacute;&iacute;rni, akkor a k&ouml;vetkez&#245; parancsot
	kell kiadnunk:</para>

      <screen>&prompt.root; <userinput>growisofs -M <replaceable>/dev/cd0</replaceable> -J -R <replaceable>/az/&uacute;j/adat/helye</replaceable></userinput></screen>

      <para>A &man.mkisofs.8; be&aacute;ll&iacute;t&aacute;sain&aacute;l
	a kez&#245;menetn&eacute;l megadottakat &eacute;rdemes
	ism&eacute;t megadni.</para>

      <note>
	<para>Ha kompatibilisek akarunk maradni a t&ouml;bbi
	  DVD-meghajt&oacute;val, akkor adjuk meg
	  <option>-dvd-compat</option> param&eacute;tert.  Ez a DVD+RW
	  eset&eacute;ben annyit jelent, hogy nem tudunk tov&aacute;bbi
	  adatokat hozz&aacute;f&#251;zni.</para>
      </note>

      <para>Ha valamilyen okb&oacute;l m&eacute;gis &uuml;ress&eacute;
	szeretn&eacute;nk tenni a lemez, akkor &iacute;r
	j&aacute;rhatunk el:</para>

      <screen>&prompt.root; <userinput>growisofs -Z <replaceable>/dev/cd0</replaceable>=<replaceable>/dev/zero</replaceable></userinput></screen>

    </sect2>

    <indexterm>
      <primary>DVD</primary>
      <secondary>DVD-RW</secondary>
    </indexterm>

    <sect2>
      <title>A DVD-RW haszn&aacute;lata</title>

      <para>A DVD-RW k&eacute;t lemezform&aacute;tumot fogad el: a
	inkrement&aacute;lis soros hozz&aacute;f&eacute;r&eacute;st
	&eacute;s a korl&aacute;tozott fel&uuml;l&iacute;r&aacute;st.
	Alap&eacute;rtelmez&eacute;s szerint a DVD-RW lemezek soros
	el&eacute;r&eacute;s&#251;ek.</para>

      <para>A m&eacute;g fel nem haszn&aacute;lt DVD-RW lemezek
	k&ouml;zvetlen&uuml;l &iacute;rhat&oacute;ak k&uuml;l&ouml;n
	form&aacute;z&aacute;s n&eacute;lk&uuml;l, hab&aacute;r a
	kor&aacute;bban m&aacute;r soros form&aacute;tumban
	haszn&aacute;lt DVD-RW lemezeket egy &uacute;j kezd&#245;menet
	l&eacute;trehoz&aacute;sa el&#245;tt &uuml;ress&eacute; kell
	tenni.</para>

      <para>Soros m&oacute;dban &iacute;gy kell let&ouml;r&ouml;lni egy
	DVD-RW lemezt:</para>

      <screen>&prompt.root; <userinput>dvd+rw-format -blank=full <replaceable>/dev/cd0</replaceable></userinput></screen>

      <note>
	<para>A teljes t&ouml;rl&eacute;s (<option>-blank=full</option>)
	  egy 1x m&eacute;dia eset&eacute;n k&ouml;r&uuml;lbel&uuml;l
	  egy &oacute;r&aacute;t vesz ig&eacute;nybe.  A
	  <option>-blank</option> be&aacute;ll&iacute;t&aacute;ssal egy
	  gyors&iacute;tott t&ouml;rl&eacute;s zajlik le, amennyiben a
	  DVD-RW lemezt Disk-At-Once (DAO) m&oacute;dban &iacute;rjuk.
	  A DVD-RW lemezeket az al&aacute;bbi paranccsal tudjuk DAO
	  m&oacute;dban &iacute;rni:</para>

	<screen>&prompt.root; <userinput>growisofs -use-the-force-luke=dao -Z <replaceable>/dev/cd0</replaceable>=<replaceable>image.iso</replaceable></userinput></screen>

	<para>A <option>-use-the-force-luke=dao</option>
	  be&aacute;ll&iacute;t&aacute;st nem k&ouml;telez&#245;
	  megadni, mivel a &man.growisofs.1; igyekszik a lehet&#245;
	  leggyorsabban t&ouml;r&ouml;lni a lemezt &eacute;s megkezdeni
	  a DAO m&oacute;d&uacute; &iacute;r&aacute;st.</para>

	<para>A DVD-RW eset&eacute;ben val&oacute;j&aacute;ban a
	  korl&aacute;tozott fel&uuml;l&iacute;r&aacute;st lenne
	  &eacute;rdemes haszn&aacute;lnunk, mivel ez a form&aacute;tum
	  sokkal rugalmasabb az alap&eacute;rtelmez&eacute;s szerint
	  felk&iacute;n&aacute;lt inkrement&aacute;lis soros
	  el&eacute;r&eacute;sn&eacute;l.</para>
      </note>

      <para>A soros DVD-RW lemezekre ugyan&uacute;gy tudunk adatokat
	r&ouml;gz&iacute;teni, mint az &ouml;sszes t&ouml;bbi
	form&aacute;tum eset&eacute;ben:</para>

      <screen>&prompt.root; <userinput>growisofs -Z <replaceable>/dev/cd0</replaceable> -J -R <replaceable>/az/adat/helye</replaceable></userinput></screen>
      <para>Ha az el&#245;z&#245; &iacute;r&aacute;shoz akarunk
	m&eacute;g hozz&aacute;f&#251;zni adatokat, akkor ehhez a
	&man.growisofs.1; <option>-M</option>
	be&aacute;ll&iacute;t&aacute;s&aacute;t kell haszn&aacute;lnunk.
	Azonban ha a DVD-RW lemezhet inkrement&aacute;lis soros
	m&oacute;dban adunk hozz&aacute; adatot, akkor ezzel egy
	&uacute;j menetet hozunk l&eacute;tre a lemezen &eacute;s
	&iacute;gy egy t&ouml;bbmenetes lemezt kapunk.</para>

      <para>A korl&aacute;tozott fel&uuml;l&iacute;r&aacute;s&uacute;
	DVD-RW form&aacute;tum haszn&aacute;lata eset&eacute;n nem kell
	mindegyik kezd&#245;menet el&#245;tt t&ouml;r&ouml;lni a lemezt,
	egyszer&#251;en csak fel&uuml;l kell &iacute;rni a
	<option>-Z</option> be&aacute;ll&iacute;t&aacute;ssal,
	hasonl&oacute;an a DVD+RW eset&eacute;hez.  A DVD+RW
	<option>-M</option> be&aacute;ll&iacute;t&aacute;s&aacute;hoz
	hasonl&oacute;an lehet&#245;s&eacute;g&uuml;nk van a lemezen
	tal&aacute;lhat&oacute; ISO 9660 form&aacute;tum&uacute;
	&aacute;llom&aacute;nyrendszer n&ouml;vel&eacute;s&eacute;re.
	Ennek az eredm&eacute;nye egy egymenetes DVD.</para>

      <para>A k&ouml;vetkez&#245; paranccsal tudjuk a DVD-RW lemezt
	korl&aacute;tozott fel&uuml;l&iacute;r&aacute;s&uacute;
	m&oacute;dba tenni:</para>

      <screen>&prompt.root; <userinput>dvd+rw-format <replaceable>/dev/cd0</replaceable></userinput></screen>

      <para>&Iacute;gy tudunk visszav&aacute;ltani a soros
	form&aacute;tum haszn&aacute;lat&aacute;ra:</para>

      <screen>&prompt.root; <userinput>dvd+rw-format -blank=full <replaceable>/dev/cd0</replaceable></userinput></screen>

    </sect2>

    <sect2>
      <title>T&ouml;bb menet haszn&aacute;lata</title>

      <para>Nagyon kev&eacute;s DVD-ROM meghajt&oacute; ismeri a
	t&ouml;bbmenetes DVD-ket, &eacute;s legt&ouml;bbsz&ouml;r is
	csak &aacute;ltal&aacute;ban az els&#245; menetet
	olvass&aacute;k.  A DVD+R, DVD-R &eacute;s DVD-RW
	form&aacute;tumok soros form&aacute;tumban k&eacute;pesek
	t&ouml;bb mentetet is befogadni, viszont a DVD+RW &eacute;s
	DVD-RW korl&aacute;tozott fel&uuml;l&iacute;r&aacute;s&uacute;
	form&aacute;tuma eset&eacute;n nem l&eacute;tezik t&ouml;bb
	menet.</para>

      <para>Az al&aacute;bbi parancs egy &uacute;jabb menetet ad
	hozz&aacute; egy megkezdett (le nem z&aacute;rt) DVD+R, DVD-R
	vagy DVD-RW soros form&aacute;tum&uacute; lemezhez:</para>

      <screen>&prompt.root; <userinput>growisofs -M <replaceable>/dev/cd0</replaceable> -J -R <replaceable>/az/&uacute;j/adat/helye</replaceable></userinput></screen>

      <para>Ha ezt a parancsot egy korl&aacute;tozott
	fel&uuml;l&iacute;r&aacute;s&uacute; DVD+RW vagy DVD-RW lemez
	eset&eacute;n adjuk ki, akkor az &uacute;j adatokat &uacute;gy
	f&#251;zi hozz&aacute;, hogy egy &uacute;j menetet
	&ouml;sszef&eacute;s&uuml;li a megl&eacute;v&#245;vel.  Ezzel
	egy egymenetes lemez keletkezik.  Ilyenkor &iacute;gy
	b&#245;v&iacute;tik a megkezdett lemezeket.</para>

      <note>
	<para>A menetek kezd&eacute;se &eacute;s befejez&eacute;se
	  &aacute;ltal&aacute;ban felhaszn&aacute;l valamennyi helyet a
	  lemezen.  Ez&eacute;rt &uacute;gy tudjuk optimaliz&aacute;lni
	  a lemez helykihaszn&aacute;lts&aacute;g&aacute;t, hogy
	  kev&eacute;s menetben sok adatot visz&uuml;nk fel r&aacute;.
	  A DVD+R eset&eacute;n 154, a DVD-R-n&eacute;l
	  k&ouml;r&uuml;lbel&uuml;l 2000, &eacute;s a dupla
	  r&eacute;teg&#251; DVD+R lemezekn&eacute;l 127 menetet tudunk
	  l&eacute;trehozni.</para>
      </note>

    </sect2>

    <sect2>
      <title>Tov&aacute;bbi olvasnival&oacute;k</title>

      <para>A DVD lemezr&#245;l r&eacute;szletesebb
	inform&aacute;ci&oacute;kat a <command>dvd+rw-mediainfo
	<replaceable>/dev/cd0</replaceable></command> parancs
	kiad&aacute;s&aacute;val tudunk lek&eacute;rdezni.</para>

      <para>A <application>dvd+rw-tools</application>
	haszn&aacute;lat&aacute;r&oacute;l a &man.growisofs.1; man
	oldalon tal&aacute;lunk inform&aacute;ci&oacute;t, valamint a
	<ulink
	url="http://fy.chalmers.se/~appro/linux/DVD+RW/">dvd+rw-tools
	honlapj&aacute;n (angolul)</ulink> &eacute;s a <ulink
	url="http://lists.debian.org/cdwrite/">cdwrite levelez&eacute;si
	lista</ulink> arch&iacute;vumaiban (angolul).</para>

      <note>
	<para>Futassuk <command>dvd+rw-mediainfo</command> parancsot
	  minden olyan esetben, amikor gondunk akad valamilyen lemez
	  &iacute;r&aacute;s&aacute;val.  A kimenete n&eacute;lk&uuml;l
	  szinte lehetetlen seg&iacute;ten&uuml;nk b&aacute;rkinek
	  is.</para>
      </note>

    </sect2>

    <sect2 id="creating-dvd-ram">
      <title>A DVD-RAM haszn&aacute;lata</title>

      <indexterm>
	<primary>DVD</primary>
	<secondary>DVD-RAM</secondary>
      </indexterm>

      <sect3>
	<title>Be&aacute;ll&iacute;t&aacute;s</title>

	<para>A DVD-RAM &iacute;r&oacute;k SCSI vagy ATAPI
	  csatol&oacute;fel&uuml;lettel rendelkeznek.  Az ATAPI
	  eszk&ouml;z&ouml;k eset&eacute;n enged&eacute;lyezni kell a
	  DMA el&eacute;r&eacute;s&eacute;t, amit a
	  <filename>/boot/loader.conf</filename>
	  &aacute;llom&aacute;nyban az al&aacute;bbi sor
	  hozz&aacute;ad&aacute;s&aacute;val tudunk megtenni:</para>

	<programlisting>hw.ata.atapi_dma="1"</programlisting>

      </sect3>

      <sect3>
	<title>A lemez el&#245;k&eacute;sz&iacute;t&eacute;se</title>

	<para>Ahogy arra m&aacute;r kor&aacute;bban utaltunk a fejezet
	  bevezet&eacute;s&eacute;ben, a DVD-RAM &uacute;gy
	  l&aacute;that&oacute;, mint egy cser&eacute;lhet&#245;
	  merevlemez.  A hagyom&aacute;nyos merevlemezekhez
	  hasonl&oacute;an a DVD-RAM-ot is <quote>el&#245; kell
	  k&eacute;sz&iacute;teni</quote> az els&#245;
	  haszn&aacute;lat&aacute;hoz.  Ebben a p&eacute;ld&aacute;ban a
	  lemez teljes ter&uuml;let&eacute;t egy szabv&aacute;nyos UFS2
	  &aacute;llom&aacute;nyrendszerrel t&ouml;ltj&uuml;k
	  fel:</para>

	<screen>&prompt.root; <userinput>dd if=/dev/zero of=<replaceable>/dev/acd0</replaceable> bs=2k count=1</userinput>
&prompt.root; <userinput>bsdlabel -Bw <replaceable>acd0</replaceable></userinput>
&prompt.root; <userinput>newfs <replaceable>/dev/acd0</replaceable></userinput></screen>

	<para>A DVD eszk&ouml;z nev&eacute;t, vagyis az
	  <devicename>acd0</devicename> eszk&ouml;zt a saj&aacute;t
	  rendszer&uuml;nknek megfelel&#245;en kell
	  m&oacute;dos&iacute;tani.</para>

      </sect3>

      <sect3>
	<title>A lemez haszn&aacute;lata</title>

	<para>Miut&aacute;n az el&#245;bbi m&#251;veletet
	  elv&eacute;gezt&uuml;k a DVD-RAM lemezen, m&aacute;r tudjuk is
	  norm&aacute;lis merevlemezk&eacute;nt csatlakoztatni:</para>

	<screen>&prompt.root; <userinput>mount <replaceable>/dev/acd0</replaceable> <replaceable>/mnt</replaceable></userinput></screen>

	<para>Ezt k&ouml;vet&#245;en a DVD-RAM egyar&aacute;nt
	  olvashat&oacute; &eacute;s &iacute;rhat&oacute;.</para>

      </sect3>
    </sect2>
  </sect1>

  <sect1 id="floppies">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Julio</firstname>
	  <surname>Merino</surname>
	  <contrib>Eredetileg k&eacute;sz&iacute;tette: </contrib>
	</author>
      </authorgroup>
      <authorgroup>
	<author>
	  <firstname>Martin</firstname>
	  <surname>Karlsson</surname>
	  <contrib>&Aacute;tdolgozta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>Hajl&eacute;konylemezek l&eacute;trehoz&aacute;sa &eacute;s
      haszn&aacute;lata</title>

    <para>N&eacute;ha hasznos lehet, ha az adatokat floppy lemezeken
      t&aacute;roljuk, p&eacute;ld&aacute;ul olyankor, amikor m&aacute;s
      cser&eacute;lhet&#245; t&aacute;rol&oacute;eszk&ouml;z m&aacute;r
      nem j&ouml;het sz&aacute;m&iacute;t&aacute;sba, vagy amikor kis
      mennyis&eacute;g&#251; adatot kell &aacute;tvinn&uuml;nk az egyik
      sz&aacute;m&iacute;t&oacute;g&eacute;pr&#245;l a
      m&aacute;sikra.</para>

    <para>Ebben a szakaszban bemutatjuk hogyan kell &os; alatt floppy
      lemezeket haszn&aacute;lni.  Els&#245;sorban a 3,5 colos DOS
      lemezek form&aacute;z&aacute;s&aacute;val &eacute;s
      haszn&aacute;lat&aacute;val foglalkozik, de ezek fogalmak a
      t&ouml;bbi hajl&eacute;konylemezes form&aacute;tum eset&eacute;ben
      is hasonl&oacute;ak.</para>

    <sect2>
      <title>A hajl&eacute;konylemezek form&aacute;z&aacute;sa</title>

      <sect3>
	<title>Az eszk&ouml;z</title>

	<para>A floppy lemezek a t&ouml;bbi eszk&ouml;zh&ouml;z
	  hasonl&oacute;an a <filename>/dev</filename>
	  k&ouml;nyvt&aacute;rban &eacute;rhet&#245;ek el.  A nyers
	  floppy lemezek el&eacute;r&eacute;s&eacute;hez egyszer&#251;en
	  csak haszn&aacute;ljuk a
	  <devicename>/dev/fd<replaceable>N</replaceable></devicename>
	  hivatkoz&aacute;st.</para>

      </sect3>

      <sect3>
	<title>A form&aacute;z&aacute;s</title>

	<para>Haszn&aacute;lat el&#245;tt a floppy lemezeket alacsony
	  szinten meg kell form&aacute;zni.  Ezt &aacute;ltal&aacute;ban
	  maga a gy&aacute;rt&oacute; v&eacute;gzi el, de a
	  form&aacute;z&aacute;s gyakran hasznos lehet a lemez
	  s&eacute;rtetlens&eacute;g&eacute;nek
	  ellen&#245;rz&eacute;s&eacute;re.  A legt&ouml;bb floppy lemez
	  hivatalos kapacit&aacute;sa 1440&nbsp;KB, de
	  haszn&aacute;lhatjuk nagyobb (&eacute;s kisebb)
	  m&eacute;retekben is.</para>

	<para>A floppy lemezek alacsony szint&#251;
	  form&aacute;z&aacute;s&aacute;ra az &man.fdformat.1; parancsot
	  haszn&aacute;lhatjuk.  Ez a seg&eacute;dprogram
	  param&eacute;terk&eacute;nt az eszk&ouml;z nev&eacute;t
	  v&aacute;rja.</para>

	<para>Figyelj&uuml;nk a menetk&ouml;zben megjelen&#245;
	  hiba&uuml;zenetekre, mivel ezek seg&iacute;tik eld&ouml;nteni,
	  hogy a lemez haszn&aacute;lhat&oacute; vagy sem.</para>

	<sect4>
	  <title>A hajl&eacute;konylemezek
	    form&aacute;z&aacute;sa</title>

	  <para>A
	    <devicename>/dev/fd<replaceable>N</replaceable></devicename>
	    eszk&ouml;z&ouml;k seg&iacute;ts&eacute;g&eacute;vel tudunk
	    megform&aacute;zni egy floppy lemezt.  Tegy&uuml;nk be egy
	    3,5&nbsp;colos floppy lemezt a meghajt&oacute;ba, majd adjuk
	    ki a k&ouml;vetkez&#245; parancsot:</para>

	  <screen>&prompt.root; <userinput>/usr/sbin/fdformat -f 1440 /dev/fd0</userinput></screen>

	</sect4>
      </sect3>
    </sect2>

    <sect2>
      <title>A lemez c&iacute;mk&eacute;z&eacute;se</title>

      <para>Miut&aacute;n alacsony szinten form&aacute;ztuk a lemezt,
	tenn&uuml;nk kell r&aacute; egy lemezc&iacute;mk&eacute;t is.
	Ez a lemezc&iacute;mke k&eacute;s&#245;bb meg fog
	semmis&uuml;lni, de a rendszernek sz&uuml;ks&eacute;ge van
	r&aacute;, hogy pontosan meg tudja &aacute;llap&iacute;tani a
	lemez m&eacute;ret&eacute;t &eacute;s
	geometri&aacute;j&aacute;t.</para>

      <para>Az &uacute;j lemezc&iacute;mke lefedi az eg&eacute;sz
	lemezt, &eacute;s tartalmazni fogja az &ouml;sszes
	inform&aacute;ci&oacute;t a floppy
	geometri&aacute;j&aacute;r&oacute;l.  A
	lemezc&iacute;mk&eacute;k geometria&eacute;rt&eacute;keit az
	<filename>/etc/disktab</filename> &aacute;llom&aacute;nyban
	tal&aacute;ljuk meg felsorolva.</para>

      <para>Most m&aacute;r futtathatjuk is a &man.bsdlabel.8;
	parancsot:</para>

      <screen>&prompt.root; <userinput>/sbin/bsdlabel -B -w /dev/fd0 fd1440</userinput></screen>

    </sect2>

    <sect2>
      <title>Az &aacute;llom&aacute;nyrendszer</title>

      <para>A hajl&eacute;konylemez most m&aacute;r k&eacute;szen
	&aacute;ll a magas szint&#251; form&aacute;z&aacute;sra.  Ennek
	sor&aacute;n egy &uacute;j &aacute;llom&aacute;nyrendszert
	tesz&uuml;nk r&aacute;, amelyet a &os; k&eacute;pes &iacute;rni
	&eacute;s olvasni.  Miut&aacute;n l&eacute;trej&ouml;tt ez az
	&uacute;j &aacute;llom&aacute;nyrendszer, a lemezc&iacute;mke
	megsemmis&uuml;l, &iacute;gy teh&aacute;t ha &uacute;jra meg
	akarjuk form&aacute;zni a lemezt, akkor &uacute;jra l&eacute;tre
	kell majd hoznunk a lemezc&iacute;mk&eacute;t.</para>

      <para>A floppy &aacute;llom&aacute;nyrendszere lehet UFS vagy FAT.
	A FAT &aacute;ltal&aacute;noss&aacute;gban v&eacute;ve jobb
	v&aacute;laszt&aacute;s a floppy lemezek
	sz&aacute;m&aacute;ra.</para>

      <para>Az al&aacute;bbi m&oacute;don tudunk &uacute;j
	&aacute;llom&aacute;nyrendszert tenni a floppyra:</para>

      <screen>&prompt.root; <userinput>/sbin/newfs_msdos /dev/fd0</userinput></screen>

      <para>A lemez most m&aacute;r k&eacute;szen &aacute;ll a
	haszn&aacute;latra.</para>

    </sect2>

    <sect2>
      <title>A hajl&eacute;konylemezek haszn&aacute;lata</title>

      <para>A floppy lemezt haszn&aacute;lat&aacute;hoz a
	&man.mount.msdosfs.8; paranccsal kell csatlakoztatnunk.
	Ugyanerre a c&eacute;lra haszn&aacute;lhatjuk a
	Portgy&#251;jtem&eacute;nyb&#245;l el&eacute;rhet&#245;
	<filename role="package">emulators/mtools</filename> portot
	is.</para>

    </sect2>
  </sect1>

  <sect1 id="backups-tapebackups">
    <title>Szalagok l&eacute;trehoz&aacute;sa &eacute;s
      haszn&aacute;lata</title>

    <indexterm><primary>szalagos
      adathordoz&oacute;</primary></indexterm>

    <para>A legfontosabb szalagos adathordoz&oacute;k a 4&nbsp;mm-es,
      8&nbsp;mm-es, QIC, a minikazett&aacute;s &eacute;s a DLT.</para>

    <sect2 id="backups-tapebackups-4mm">
      <title>4&nbsp;mm-es (Digit&aacute;lis adatt&aacute;rol&oacute;,
	avagy DDS: Digital Data Storage)</title>

      <indexterm>
	<primary>szalagos adathordoz&oacute;</primary>
	<secondary>(4&nbsp;mm-es) DDS-szalagok</secondary>
      </indexterm>
      <indexterm>
	<primary>szalagos adathordoz&oacute;</primary>
	<secondary>QIC-szalagok</secondary>
      </indexterm>

      <para>A 4&nbsp;mm-es szalagok a QIC-szalagokat
	v&aacute;ltj&aacute;k fel a munka&aacute;llom&aacute;sok
	biztons&aacute;gi ment&eacute;s&eacute;nek
	eszk&ouml;zek&eacute;nt.  Ez a tendencia csak tov&aacute;bb
	n&ouml;vekedett, ahogy a Conner felv&aacute;s&aacute;rolta az
	Archive-ot, a QIC t&iacute;pus&uacute; meghajt&oacute;k
	legnagyobb gy&aacute;rt&oacute;j&aacute;t, majd
	le&aacute;ll&iacute;tott a QIC-meghajt&oacute;k
	gy&aacute;rt&aacute;s&aacute;t.  A 4&nbsp;mm-es meghajt&oacute;k
	m&eacute;rete kicsi &eacute;s csendben is dolgoznak, de a
	megb&iacute;zhat&oacute;s&aacute;g ter&eacute;n nem
	tudhatj&aacute;k maguknak mindazt a sikert, amit a 8&nbsp;mm-es
	t&aacute;rsaikn&aacute;l k&ouml;nyvelhett&uuml;nk el.  A
	kazett&aacute;k is sokkal olcs&oacute;bbak &eacute;s kisebbek
	(3&nbsp;x 2&nbsp;x 0,5&nbsp;col, ami 76&nbsp;x 51&nbsp;x
	12&nbsp;mm) a 8&nbsp;mm-es kiad&aacute;s&eacute;n&aacute;l.  A
	4&nbsp;mm-es feje, hasonl&oacute;an a 8&nbsp;mm-es&eacute;hez,
	valamilyen okb&oacute;l szint&eacute;n viszonylag r&ouml;vid
	ideig b&iacute;rja, &eacute;s mind a kett&#245; spir&aacute;lis
	p&aacute;szt&aacute;z&aacute;st haszn&aacute;l.</para>

      <para>Ezekn&eacute;l a meghajt&oacute;kn&aacute;l az
	adat&aacute;tvitel nagyj&aacute;b&oacute;l
	150&nbsp;KB/mp-n&eacute;l kezd&#245;dik &eacute;s
	500&nbsp;KB/mp-n&eacute;l v&eacute;gz&#245;dik.  Az
	adatt&aacute;rol&aacute;si k&eacute;pess&eacute;g&uuml;k
	1,3&nbsp;GB-t&oacute;l indul &eacute;s 2,0&nbsp;GB-ig tart.  A
	hardveres t&ouml;m&ouml;r&iacute;t&eacute;s, ami a legt&ouml;bb
	ilyen t&iacute;pus&uacute; meghajt&oacute;n&aacute;l
	el&eacute;rhet&#245;, k&ouml;zel megdupl&aacute;zza a
	kapacit&aacute;st.  A t&ouml;bbmeghajt&oacute;s szalagos
	k&ouml;nyvt&aacute;r egys&eacute;gek egyetlen szekr&eacute;nyben
	6 meghajt&oacute;t k&eacute;pes befogadni, a szalagok
	automatikus cser&eacute;lget&eacute;s&eacute;vel.  Az ilyen
	k&ouml;nyvt&aacute;rak kapacit&aacute;sa a 240&nbsp;GB-ot is
	el&eacute;rheti.</para>

      <para>A DDS-3 szabv&aacute;ny most m&aacute;r ak&aacute;r
	12&nbsp;GB (vagy t&ouml;m&ouml;r&iacute;tve 24&nbsp;GB)
	kapacit&aacute;st is el&eacute;rhet&#245;v&eacute; tesz.</para>

      <para>A 4&nbsp;mm-es meghajt&oacute;k, hasonl&oacute;an a
	8&nbsp;mm-es meghajt&oacute;khoz, spir&aacute;lis
	p&aacute;szt&aacute;z&aacute;st alkalmaznak.  A spir&aacute;lis
	p&aacute;szt&aacute;z&aacute;s &ouml;sszes el&#245;nye &eacute;s
	h&aacute;tr&aacute;nya ez&eacute;rt egyar&aacute;nt &eacute;l a
	4&nbsp;mm-es &eacute;s 8&nbsp;mm-es meghajt&oacute;k
	eset&eacute;n.</para>

      <para>A szalagok 2&nbsp;000 menet vagy 100 teljes mentes
	ut&aacute;n kopnak el.</para>

    </sect2>

    <sect2 id="backups-tapebackups-8mm">
      <title>8&nbsp;mm-es (Exabyte)</title>

      <indexterm>
	<primary>szalagos adathordoz&oacute;</primary>
	<secondary>(8&nbsp;mm-es) Exabyte szalagok</secondary>
      </indexterm>

      <para>A 8&nbsp;mm-es szalagok a legelterjedtebb szalagos
	SCSI-meghajt&oacute;k.  A szalagok haszn&aacute;lat&aacute;ra ez
	a legjobb v&aacute;laszt&aacute;s.  Szinte mindegyik rendszerben
	egy 2&nbsp;GB-os 8&nbsp;mm-es Exabyte szalagos meghajt&oacute;t
	haszn&aacute;lnak.  A 8&nbsp;mm-es meghajt&oacute;k
	megb&iacute;zhat&oacute;ak, k&eacute;nyelmesek &eacute;s
	csendesek.  A kazett&aacute;k olcs&oacute;k &eacute;s kicsik
	(4,8&nbsp;x 3,3&nbsp;x 0,6&nbsp;col, azaz 122&nbsp;x 84&nbsp;x
	15&nbsp;mm).  A 8&nbsp;mm-es szalagok feje viszonylag csak
	r&ouml;vid ideig b&iacute;rja a szalag nagy
	m&eacute;rt&eacute;k&#251; oda-vissza mozg&aacute;sa
	miatt.</para>

      <para>Az adat&aacute;tvitel sebess&eacute;ge
	250&nbsp;KB/mp-t&#245;l 500&nbsp;KB/mp-ig terjed, valamint a
	300&nbsp;MB-t&oacute;l eg&eacute;szen 7&nbsp;GB-os
	m&eacute;retig tal&aacute;lkozhatunk vel&uuml;k.  A
	meghajt&oacute;kban el&eacute;rhet&#245; hardveres
	t&ouml;m&ouml;r&iacute;t&eacute;s k&eacute;pes k&ouml;zel
	megdupl&aacute;zni a kapacit&aacute;st.  Ezek a meghajt&oacute;k
	&ouml;n&aacute;ll&oacute; egys&eacute;gk&eacute;nt is
	beszerezhet&#245;ek vagy egy 6 egys&eacute;gb&#245;l
	&aacute;ll&oacute; &eacute;s 120 szalagos szalagos
	k&ouml;nyvt&aacute;r r&eacute;szek&eacute;nt.  Ezek az
	egys&eacute;gek &ouml;n&aacute;ll&oacute;an
	v&aacute;ltj&aacute;k a szalagokat.  Az ilyen
	k&ouml;nyvt&aacute;rak kapacit&aacute;sa el&eacute;ri a
	k&ouml;zel 840&nbsp;GB-ot.</para>

      <para>Az Exabyte <quote>Mammoth</quote> modellje
	szalagonk&eacute;nt 12&nbsp;GB
	(t&ouml;m&ouml;r&iacute;t&eacute;ssel pedig 24&nbsp;GB) adatot
	k&eacute;pes t&aacute;rolni, viszont a hagyom&aacute;nyos
	szalagos meghajt&oacute;kn&aacute;l nagyj&aacute;b&oacute;l
	k&eacute;tszer t&ouml;bbe ker&uuml;l.</para>

      <para>Az adatok spir&aacute;lis p&aacute;szt&aacute;z&aacute;ssal
	ker&uuml;lnek a szalagra, &eacute;s a fejek adott
	(nagyj&aacute;b&oacute;l 6 fokos) sz&ouml;gben &aacute;llnak a
	szalag felett.  A szalag a fejeket tart&oacute; ors&oacute;
	k&ouml;r&eacute; tekeredik, k&ouml;r&uuml;lbel&uuml;l 270
	fokban.  Ennek eredm&eacute;nyk&eacute;ppen nagyobb
	adats&#251;r&#251;s&eacute;g &eacute;s szorosan z&aacute;rt
	s&aacute;vok j&ouml;nnek l&eacute;tre, ahogy ebben a
	sz&ouml;gben a fej eljut a szalag egyik
	&eacute;l&eacute;r&#245;l a m&aacute;sikra.</para>

    </sect2>

    <sect2 id="backups-tapebackups-qic">
      <title>QIC</title>

      <indexterm>
	<primary>szalagos adathordoz&oacute;</primary>
	<secondary>QIC-150</secondary>
      </indexterm>

      <para>A QIC-150 meghajt&oacute;k &eacute;s szalagok tal&aacute;n a
	legelterjedtebb szalagos egys&eacute;gek &eacute;s
	adathordoz&oacute;k.  A QIC szalagos meghajt&oacute;k a
	legolcs&oacute;bb <quote>komolynak tekinthet&#245;</quote>
	biztons&aacute;gi ment&eacute;sre alkalmas meghajt&oacute;k.  Az
	olcs&oacute;s&aacute;g azonban megk&ouml;veteli a maga
	&aacute;r&aacute;t.  A QIC-szalagok a 4 &eacute;s 8&nbsp;mm-es
	szalagokkal szemben ak&aacute;r &ouml;tsz&ouml;r is
	dr&aacute;g&aacute;bbak lehetnek gigabyte-onk&eacute;nt.  De ha
	megel&eacute;gsz&uuml;nk csup&aacute;n f&eacute;ltucat szalaggal
	is, akkor a QIC j&oacute; v&aacute;s&aacute;rnak t&#251;nhet.  A
	QIC a <emphasis>legink&aacute;bb</emphasis> elterjedtebb
	szalagos meghajt&oacute;.  Minden rendszerben biztonsan
	tal&aacute;lunk valamilyen min&#245;s&eacute;gben
	QIC-meghajt&oacute;t.  A QIC fizikailag hasonl&oacute;
	(&eacute;s gyakran azonos) fel&eacute;p&iacute;t&eacute;s&#251;
	szalagokat gy&aacute;rt rengeteg k&uuml;l&ouml;nb&ouml;z&#245;
	adats&#251;r&#251;s&eacute;ggel.  Az ilyenkor keletkez&#245;
	s&uacute;rl&oacute;d&aacute;sok miatt a QIC-meghajt&oacute;k
	egy&aacute;ltal&aacute;n nem nevezhet&#245;ek csendesnek.  Az
	ilyen t&iacute;pus&uacute; meghajt&oacute;k az adatok
	r&ouml;gz&iacute;t&eacute;se el&#245;tt k&uuml;l&ouml;n
	hangjelens&eacute;g k&iacute;s&eacute;ret&eacute;ben keresik meg
	a megfelel&#245; poz&iacute;ci&oacute;t &eacute;s tiszt&aacute;n
	hallhat&oacute;, ahogy olvasnak, &iacute;rnak &eacute;s
	keresnek.  A QIC-szalagok m&eacute;rete 6&nbsp;x 4&nbsp;x
	0,7&nbsp;col (avagy 152&nbsp;x 102&nbsp;x 17&nbsp;mm).</para>

      <para>Az adat&aacute;tviteli sebess&eacute;g
	nagyj&aacute;b&oacute;l 150&nbsp;KB/mp-t&#245;l
	500&nbsp;KB/mp-ig terjedhet.  A kapacit&aacute;s
	szalagonk&eacute;nt 40&nbsp;MB &eacute;s 15&nbsp;GB
	k&ouml;z&ouml;tt v&aacute;ltozhat.  A legt&ouml;bb &uacute;jabb
	QIC-meghajt&oacute; t&aacute;mogatja a hardveres
	t&ouml;m&ouml;r&iacute;t&eacute;st.  QIC-meghajt&oacute;kat
	azonban egyre kev&eacute;sb&eacute; tal&aacute;lhatunk,
	hely&uuml;ket sz&eacute;pen lassan mindenhol &aacute;tveszik a
	DAT-meghajt&oacute;k.</para>

      <para>A szalagokra s&aacute;vokban r&ouml;gz&iacute;tik az
	adatokat.  Ezek a s&aacute;vok szalag fel&uuml;let&eacute;nek
	hosszanti tengely&eacute;n futnak az egyik
	v&eacute;g&eacute;t&#245;l a m&aacute;sikig.  A s&aacute;vok
	sz&aacute;ma valamint a s&aacute;vok vastags&aacute;ga a
	szalagok kapacit&aacute;s&aacute;t&oacute;l f&uuml;gg&#245;en
	v&aacute;ltoznak.  Ha nem is &ouml;sszes leg&uacute;jabb, de a
	legt&ouml;bb meghajt&oacute; legal&aacute;bb olvas&aacute;s
	szintj&eacute;n kompatibilis a r&eacute;gebbi t&iacute;pusokkal
	(de gyakran &iacute;r&aacute;sban is).  A QIC h&iacute;resen
	megb&iacute;zhat&oacute; az adatbiztons&aacute;g
	tekintet&eacute;ben (a mechanik&aacute;ja sokkal egyszer&#251;bb
	&eacute;s strapab&iacute;r&oacute;bb a spir&aacute;lis
	p&aacute;szt&aacute;z&aacute;ssal m&#251;k&ouml;d&#245;
	meghajt&oacute;k&eacute;n&aacute;l).</para>

      <para>A szalagokat 5000 ment&eacute;s ut&aacute;n &eacute;rdemes
	lecser&eacute;lni.</para>

    </sect2>

    <sect2 id="backups-tapebackups-dlt">
      <title>DLT</title>

      <indexterm>
	<primary>szalagos adathordoz&oacute;</primary>
	<secondary>DLT</secondary>
      </indexterm>

      <para>A DLT rendelkezik a legnagyobb adat&aacute;tviteli
	sebess&eacute;ggel az itt &ouml;sszefoglalt mez&#245;nyben.  A
	1/2&nbsp;colos (12,5&nbsp;mm-es) szalag egy egyors&oacute;s
	tokban foglal helyet (m&eacute;rete 4&nbsp;x 4&nbsp;x
	1&nbsp;col, azaz 100&nbsp;x 100&nbsp;x 25&nbsp;mm).  A tok egyik
	oldal&aacute;n v&eacute;gig egy cs&uacute;sz&oacute; kapu
	tal&aacute;lhat&oacute;.  A meghajt&oacute; ezt a kaput nyitja
	ki &eacute;s ezen kereszt&uuml;l h&uacute;zza be a szalagot.  A
	szalag elej&eacute;n tal&aacute;lhat&oacute; egy ov&aacute;lis
	lyuk, amibe a meghajt&oacute; <quote>bele tud
	akaszkodni</quote>.  A fesz&iacute;t&#245; ors&oacute; a
	szalagos meghajt&oacute;ban foglal helyet.  Az &ouml;sszes
	t&ouml;bbi szalag eset&eacute;n (kiv&eacute;ve egyed&uuml;l a 9
	s&aacute;vos szalagokat) mind a seg&eacute;d- &eacute;s
	fesz&iacute;t&#245; ors&oacute;k mag&aacute;ban a
	kazett&aacute;ban tal&aacute;lhat&oacute;ak.</para>

      <para>Az adat&aacute;tviteli sebess&eacute;ge
	megk&ouml;zel&iacute;t&#245;leg 1,5&nbsp;MB/mp, teh&aacute;t
	h&aacute;romszor nagyobb b&aacute;rmelyik 4&nbsp;mm-es,
	8&nbsp;mm-es vagy QIC-szalagos egys&eacute;g&eacute;n&eacute;l.
	Az adatt&aacute;rol&oacute; k&eacute;pess&eacute;ge
	kazett&aacute;nk&eacute;nt 10&nbsp;GB-t&oacute;l 20&nbsp;GB-ig
	terjedhet.  A meghajt&oacute;k egyar&aacute;nt
	el&eacute;rhet&#245;ek t&ouml;bbkazett&aacute;s,
	cser&eacute;lget&#245;s &eacute;s t&ouml;bbkazett&aacute;s,
	t&ouml;bbmeghajt&oacute;s k&ouml;nyvt&aacute;rakban is, melyek 5
	kazett&aacute;t&oacute;l eg&eacute;szen 900 kazett&aacute;ig,
	illetve 1 meghajt&oacute;t&oacute;l 20 meghajt&oacute;ig
	k&eacute;pesek befogadni, &iacute;gy teljes
	t&aacute;rter&uuml;let&uuml;k 50&nbsp;GB-t&oacute;l 9&nbsp;TB-ig
	terjed.</para>

      <para>A DLT Type V form&aacute;tum
	t&ouml;m&ouml;r&iacute;t&eacute;ssel k&ouml;zel 70&nbsp;GB-os
	kapacit&aacute;st k&eacute;pes el&eacute;rni.</para>

      <para>A szalagra az adatok a halad&aacute;si ir&aacute;nnyal
	p&aacute;rhuzamosan ker&uuml;lnek fel (ak&aacute;rcsak a
	QIC-szalagok eset&eacute;ben).  Egyszerre k&eacute;t
	s&aacute;vot r&ouml;gz&iacute;t.  A
	&iacute;r&oacute;/olvas&oacute; fejek &eacute;lettartama
	viszonylag nagy.  Ahogy a szalag meg&aacute;ll, a fej &eacute;s
	a szalag k&ouml;z&ouml;tt nincs sz&uuml;ks&eacute;g
	tov&aacute;bbi relat&iacute;v mozg&aacute;sra.</para>

    </sect2>

    <sect2>
      <title id="backups-tapebackups-ait">AIT</title>

      <indexterm>
	<primary>szalagos adathordoz&oacute;</primary>
	<secondary>AIT</secondary>
      </indexterm>

      <para>Az AIT a Sony &uacute;j form&aacute;tuma, ami eg&eacute;szen
	50&nbsp;GB mennyis&eacute;g&#251; adatot k&eacute;pes
	t&aacute;rolni (t&ouml;m&ouml;r&iacute;t&eacute;ssel) egyetlen
	szalagon.  A szalagokat mem&oacute;riachipekkel
	l&aacute;tj&aacute;k el, melyek a szalag tartalm&aacute;t
	indexelik.  Az indexek felhaszn&aacute;l&aacute;s&aacute;val
	azt&aacute;n a szalagos meghajt&oacute; vill&aacute;mgyorsan
	k&eacute;pes meghat&aacute;rozni a szalagon
	tal&aacute;lhat&oacute; &aacute;llom&aacute;nyok hely&eacute;t,
	szemben az ilyenkor megszokott t&ouml;bbperces m&#251;velettel.
	A <application>SAMS:Alexandria</application> &eacute;s a
	hozz&aacute; hasonl&oacute; szoftverek negyven vagy t&ouml;bb
	AIT-szalagos k&ouml;nyvt&aacute;rral is k&eacute;pesek egyszerre
	dolgozni, &eacute;s k&ouml;zvetlen&uuml;l a szalagok
	mem&oacute;ri&aacute;j&aacute;val veszik fel a kapcsolatot a
	tartalmuk megjelen&iacute;t&eacute;s&eacute;hez, a mentett
	&aacute;llom&aacute;nyok rendszerez&eacute;s&eacute;hez, a
	helyes szalag megkeres&eacute;s&eacute;hez,
	bet&ouml;lt&eacute;s&eacute;hez &eacute;s
	visszat&ouml;lt&eacute;s&eacute;hez.</para>

      <para>Az ilyen k&ouml;nyvt&aacute;rak a 20&nbsp;000
	doll&aacute;ros (kb.  3,5&nbsp;milli&oacute; forintos)
	&aacute;rkateg&oacute;ri&aacute;ba tartoznak, ami miatt csak egy
	kicsivel cs&uacute;sznak ki a hobbi
	kateg&oacute;ri&aacute;b&oacute;l.</para>

    </sect2>

    <sect2>
      <title>Az &uacute;j szalagok els&#245; haszn&aacute;lata</title>

      <para>Amikor az els&#245; alkalommal akarunk beolvasni vagy
	&iacute;rni egy &uacute;j, teljesen &uuml;res szalagot,
	hib&aacute;ra fogunk futni.  Egy ehhez hasonl&oacute;
	konzol&uuml;zenet fog megjelenni:</para>

      <screen>sa0(ncr1:4:0): NOT READY asc:4,1
sa0(ncr1:4:0):  Logical unit is in process of becoming ready</screen>

      <para>A szalag nem tartalmaz azonos&iacute;t&oacute; blokkot
	(Identifier Block) a nulladik blokkban.  A QIC-525
	szabv&aacute;ny &aacute;tv&eacute;tele &oacute;ta mindegyik QIC
	szalagos meghajt&oacute; l&eacute;trehozza ezt az
	azonos&iacute;t&oacute; blokkot.  Teh&aacute;t k&eacute;t
	megold&aacute;s l&eacute;tezik:</para>

      <itemizedlist>
	<listitem>
	  <para>Az <command>mt fsf 1</command> paranccsal
	    fel&iacute;runk egy ilyen azonos&iacute;t&oacute; blokkot a
	    szalagra.</para>
	</listitem>

	<listitem>
	  <para>A meghajt&oacute; el&#245;lapj&aacute;n
	    tal&aacute;lhat&oacute; gomb
	    seg&iacute;ts&eacute;g&eacute;vel dobassuk ki a
	    szalagot.</para>

	  <para>Rakjuk vissza a szalagot &eacute;s hajtsunk v&eacute;gre
	    rajta egy <command>dump</command> parancsot.</para>

	  <para>A <command>dump</command> parancs erre egy
	    <errorname>DUMP: End of tape detected</errorname>
	    (<quote>szalag v&eacute;ge</quote>) hiba&uuml;zenetet ad,
	    majd a k&ouml;vetkez&#245; jelenik meg a konzolon:
	    <errorname>HARDWARE FAILURE info:280
	    asc:80,96</errorname>.</para>

	  <para>Tekertess&uuml;k vissza a szalagot az <command>mt
	    rewind</command> paranccsal.</para>

	  <para>A szalag k&ouml;vetkez&#245; m&#251;velete most
	    m&aacute;r sikeres lesz.</para>
	</listitem>
      </itemizedlist>

    </sect2>
  </sect1>

  <sect1 id="backups-floppybackups">
    <title>Biztons&aacute;gi ment&eacute;s
      hajl&eacute;konylemezekre</title>

    <sect2 id="floppies-using">
      <title>Hajl&eacute;konylemezre is lehet biztons&aacute;gi
	ment&eacute;st k&eacute;sz&iacute;teni?</title>

      <indexterm><primary>biztons&aacute;gi
	floppyk</primary></indexterm>
      <indexterm><primary>floppy lemezek</primary></indexterm>

      <para>A floppy lemezek nem igaz&aacute;n felelnek meg
	biztons&aacute;gi ment&eacute;s
	k&eacute;sz&iacute;t&eacute;s&eacute;re, mivel:</para>

      <itemizedlist>
	<listitem>
	  <para>Nem megb&iacute;zhat&oacute; adathordoz&oacute;k,
	    k&uuml;l&ouml;n&ouml;sen hosszabb id&#245;re.</para>
	</listitem>

	<listitem>
	  <para>Eset&uuml;kben a ment&eacute;s &eacute;s
	    vissza&aacute;ll&iacute;t&aacute;s nagyon
	    lass&uacute;.</para>
	</listitem>

	<listitem>
	  <para>Kapacit&aacute;suk er&#245;sen korl&aacute;tozott (annak
	    m&aacute;r r&eacute;gen elm&uacute;lt az ideje, amikor
	    eg&eacute;sz merevlemezeket tudtunk lementeni egy tucat
	    floppyra).</para>
	</listitem>
      </itemizedlist>

      <para>Hab&aacute;r ha m&aacute;shogy nem tudunk biztons&aacute;gi
	ment&eacute;st k&eacute;sz&iacute;teni, akkor a floppy
	lemezekkel m&eacute;g mindig jobban j&aacute;runk, mint
	n&eacute;lk&uuml;l&uuml;k.</para>

      <para>Ha m&aacute;r mindenk&eacute;ppen floppy lemezeket kell
	haszn&aacute;lnunk, akkor igyekezz&uuml;nk min&eacute;l jobb
	min&#245;s&eacute;g&#251;eket beszerezni.  Teh&aacute;t az olyan
	floppyk, amik m&aacute;r &eacute;vek &oacute;ta kavarognak az
	irod&aacute;ban, erre a c&eacute;lra nem &eacute;ppen
	bizonyulnak a legjobb v&aacute;laszt&aacute;snak.
	Ide&aacute;lis esetben egy megb&iacute;zhat&oacute;
	gy&aacute;rt&oacute;t&oacute;l sz&aacute;rmaz&oacute; &uacute;j
	floppykat haszn&aacute;lunk.</para>

    </sect2>

    <sect2 id="floppies-creating">
      <title>Teh&aacute;t akkor hogyan ments&uuml;k az adatokat
	hajl&eacute;konylemezre?</title>

      <para>Legegyszer&#251;bban a &man.tar.1; <option>-M</option>
	(t&ouml;bbk&ouml;tetes) opci&oacute;j&aacute;val tudunk floppy
	lemezre menteni, aminek haszn&aacute;lat&aacute;val t&ouml;bb
	floppyra kiterjed&#245; ment&eacute;seket is
	k&eacute;sz&iacute;thet&uuml;nk.</para>

      <para>Az aktu&aacute;lis k&ouml;nyvt&aacute;r &eacute;s a benne
	lev&#245; alk&ouml;nyvt&aacute;rak tartalm&aacute;t
	(<username>root</username>) felhaszn&aacute;l&oacute;k&eacute;nt
	a k&ouml;vetkez&#245; paranccsal tudjuk lementeni:</para>

      <screen>&prompt.root; <userinput>tar Mcvf /dev/fd0 *</userinput></screen>

      <para>Amikor az els&#245; floppy megtelik, a &man.tar.1;
	k&eacute;rni fogja a k&ouml;vetkez&#245; k&ouml;tetet (volume)
	(mivel a &man.tar.1; adathordoz&oacute;t&oacute;l f&uuml;ggetlen
	m&oacute;don hivatkozik a k&ouml;tetekre, teh&aacute;t ebben a
	k&ouml;rnyezetben a k&ouml;tet egy floppy lemezt jelent):</para>

      <screen>Prepare volume #2 for /dev/fd0 and hit return:</screen>

      <para>Az &uuml;zenet ford&iacute;t&aacute;sa:</para>

      <screen>K&eacute;sz&iacute;tse el&#245; a 2. k&ouml;tetet a /dev/fd0 eszk&ouml;z&ouml;n &eacute;s nyomja le a
return billenty&#251;t</screen>

      <para>A folyamat eg&eacute;szen addig ism&eacute;tl&#245;dik (a
	k&ouml;tetek sz&aacute;m&aacute;nak
	n&ouml;veked&eacute;s&eacute;vel), am&iacute;g az &ouml;sszes
	&aacute;llom&aacute;ny lement&eacute;sre nem ker&uuml;l.</para>

    </sect2>

    <sect2 id="floppies-compress">
      <title>Lehet t&ouml;m&ouml;r&iacute;teni a
	ment&eacute;seket?</title>

      <indexterm><primary><command>tar</command></primary></indexterm>
      <indexterm><primary><command>gzip</command></primary></indexterm>
      <indexterm><primary>t&ouml;m&ouml;r&iacute;t&eacute;s</primary></indexterm>

      <para>Sajnos a &man.tar.1; t&ouml;bbk&ouml;tetes ment&eacute;sek
	eset&eacute;n nem engedi a <option>-z</option>
	be&aacute;ll&iacute;t&aacute;s haszn&aacute;lat&aacute;t.
	Term&eacute;szetesen ett&#245;l f&uuml;ggetlen&uuml;l a
	&man.gzip.1; seg&iacute;ts&eacute;g&eacute;vel m&eacute;g be
	tudjuk t&ouml;m&ouml;r&iacute;teni az &ouml;sszes
	&aacute;llom&aacute;nyt, a &man.tar.1; paranccsal floppyra
	menteni ezeket, majd a &man.gunzip.1; paranccsal
	kit&ouml;m&ouml;r&iacute;teni.</para>

    </sect2>

    <sect2 id="floppies-restoring">
      <title>Hogyan &aacute;ll&iacute;tsuk vissza a biztons&aacute;gi
	ment&eacute;seket?</title>

      <para>Az eg&eacute;sz ment&eacute;s
	vissza&aacute;ll&iacute;t&aacute;s&aacute;hoz adjuk ki a
	k&ouml;vetkez&#245; parancsot:</para>

      <screen>&prompt.root; <userinput>tar Mxvf /dev/fd0</userinput></screen>

      <para>K&eacute;t m&oacute;don tudunk csak bizonyos
	&aacute;llom&aacute;nyokat vissza&aacute;ll&iacute;tani.
	El&#245;sz&ouml;r is, tegy&uuml;k be a ment&eacute;s els&#245;
	lemez&eacute;t &eacute;s adjuk ki a k&ouml;vetkez&#245;
	parancsot:</para>

      <screen>&prompt.root; <userinput>tar Mxvf /dev/fd0 <replaceable>&aacute;llom&aacute;ny</replaceable></userinput></screen>

      <para>A &man.tar.1; seg&eacute;dprogram ezut&aacute;n sorban
	k&eacute;rni fogja a t&ouml;bbi lemezt eg&eacute;szen addig,
	am&iacute;g meg nem tal&aacute;lja a keresett
	&aacute;llom&aacute;nyt.</para>

      <para>Vagy ha pontosan tudjuk, hogy melyik lemezen
	tal&aacute;lhat&oacute; a keresett &aacute;llom&aacute;ny, akkor
	az im&eacute;nti parancs haszn&aacute;lat&aacute;t azzal a
	lemezzel kezdj&uuml;k.  Vigy&aacute;zzunk, mert ha a lemezen
	tal&aacute;lhat&oacute; els&#245; &aacute;llom&aacute;ny az
	el&#245;z&#245; lemezen kezd&#245;dik, akkor a &man.tar.1;
	figyelmeztetni fog minket, hogy nem &aacute;ll&iacute;tja vissza
	m&eacute;g akkor sem, ha erre nem is k&eacute;rt&uuml;k!</para>

    </sect2>
  </sect1>

  <sect1 id="backup-strategies">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Lowell</firstname>
	  <surname>Gilbert</surname>
	  <contrib>Eredetileg k&eacute;sz&iacute;tette: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>Ment&eacute;si strat&eacute;gi&aacute;k</title>

    <para>Egy biztons&aacute;gi ment&eacute;s kidolgoz&aacute;sa
      sor&aacute;n az els&#245; k&ouml;vetelm&eacute;ny gondoskodnunk az
      al&aacute;bbi probl&eacute;m&aacute;kr&oacute;l:</para>

    <itemizedlist>
      <listitem>
	<para>Lemezhiba</para>
      </listitem>
      <listitem>
	<para>Az &aacute;llom&aacute;nyok v&eacute;letlen
	  t&ouml;rl&eacute;se</para>
      </listitem>
      <listitem>
	<para>Az &aacute;llom&aacute;nyok v&eacute;letlenszer&#251;
	  k&aacute;rosod&aacute;sa</para>
      </listitem>
      <listitem>
	<para>Sz&aacute;m&iacute;t&oacute;g&eacute;pek teljes
	  megsemmis&uuml;l&eacute;se (p&eacute;ld&aacute;ul t&#251;z
	  &aacute;ltal), bel&eacute;rtve a k&ouml;zel&eacute;ben
	  t&aacute;rolt &ouml;sszes biztons&aacute;gi
	  ment&eacute;st</para>
      </listitem>
    </itemizedlist>

    <para>T&ouml;k&eacute;letesen megoldhat&oacute;, hogy egyes
      rendszerek a fentebb felsorolt probl&eacute;m&aacute;k
      mindegyik&eacute;t teljesen elt&eacute;r&#245; technik&aacute;val
      oldj&aacute;k meg.  A nagyon szem&eacute;lyes rendszerekt&#245;l
      &eacute;s a nagyon &eacute;rt&eacute;ktelen adatokt&oacute;l
      eltekintve szinte egy&eacute;rtelm&#251;en kiz&aacute;rt, hogy
      egyetlen technika k&eacute;pes lefedni az &ouml;sszes
      probl&eacute;m&aacute;t.</para>

    <para>Kell&eacute;kt&aacute;runk n&eacute;h&aacute;ny alapvet&#245;
      eszk&ouml;ze:</para>

    <itemizedlist>
      <listitem>
	<para>Az eg&eacute;sz rendszer ment&eacute;se, amit egy
	  megb&iacute;zhat&oacute; helyre elz&aacute;rt, tart&oacute;s
	  adatt&aacute;rol&oacute;ra k&eacute;sz&iacute;t&uuml;nk.  Ez
	  tulajdonk&eacute;ppen v&eacute;delmet biztos&iacute;t a
	  fentebb megeml&iacute;tett &ouml;sszes probl&eacute;ma
	  eset&eacute;ben, de lass&uacute; &eacute;s k&eacute;nyelmetlen
	  r&oacute;la vissza&aacute;ll&iacute;tani az adatokat.  A
	  k&ouml;zelben &eacute;s/vagy neten is tarthatunk err&#245;l
	  m&aacute;solatokat, de m&eacute;g &iacute;gy is
	  k&eacute;nyelmetlen az &aacute;llom&aacute;nyok
	  vissza&aacute;ll&iacute;t&aacute;sa, k&uuml;l&ouml;n&ouml;sen
	  az egyszer&#251; felhaszn&aacute;l&oacute;k
	  sz&aacute;m&aacute;ra.</para>
      </listitem>

      <listitem>
	<para>Pillanatk&eacute;pek k&eacute;sz&iacute;t&eacute;se az
	  &aacute;llom&aacute;nyrendszerr&#245;l.  Ez
	  val&oacute;j&aacute;ban csak olyan esetekben lehet a
	  seg&iacute;ts&eacute;g&uuml;nkre, amikor
	  v&eacute;letlen&uuml;l t&ouml;r&ouml;lt&uuml;nk
	  &aacute;llom&aacute;nyokat, &aacute;m ilyenkor
	  <emphasis>hat&aacute;rozottan</emphasis> j&oacute;l j&ouml;n,
	  mivel igen gyorsan &eacute;s k&ouml;nnyen lehet vele
	  dolgozni.</para>
      </listitem>

      <listitem>
	<para>Az eg&eacute;sz &aacute;llom&aacute;nyrendszer
	  &eacute;s/vagy az &ouml;sszes lemez m&aacute;solata
	  (p&eacute;ld&aacute;ul az &man.rsync.1; id&#245;szakos
	  alkalmaz&aacute;sa a komplett g&eacute;pre).  Az
	  &aacute;ltal&aacute;ban az egyedi ig&eacute;nyekkel
	  b&iacute;r&oacute; h&aacute;l&oacute;zatok eset&eacute;ben
	  eshet a kez&uuml;nkre.  A lemezhiba ellen v&eacute;delemben ez
	  a megold&aacute;s &aacute;ltal&aacute;ban a
	  <acronym>RAID</acronym> alatt &aacute;ll.  A
	  v&eacute;letlen&uuml;l t&ouml;r&ouml;lt
	  &aacute;llom&aacute;nyok
	  vissza&aacute;ll&iacute;t&aacute;s&aacute;nak
	  tekintet&eacute;ben az <acronym>UFS</acronym>
	  pillanatk&eacute;peivel m&eacute;rhet&#245; &ouml;ssze, de ez
	  legink&aacute;bb a saj&aacute;t ig&eacute;nyeinkt&#245;l
	  f&uuml;gg.</para>
      </listitem>

      <listitem>
	<para><acronym>RAID</acronym> alkalmaz&aacute;sa.  A lemezek
	  meghib&aacute;sod&aacute;sa eset&eacute;n seg&iacute;ti
	  minimaliz&aacute;lni vagy elker&uuml;lni a kies&eacute;st,
	  ugyan gyakori lemezhib&aacute;k &aacute;r&aacute;n (mivel
	  ilyenkor t&ouml;bb lemezt haszn&aacute;lunk) de kisebb
	  s&uuml;rg&#245;ss&eacute;ggel.</para>
      </listitem>

      <listitem>
	<para>Az &aacute;llom&aacute;nyok ujjlenyomat&aacute;nak
	  ellen&#245;rz&eacute;se.  Az &man.mtree.8; seg&eacute;dprogram
	  nagyon hasznos tud lenni ebben az esetben.  Hab&aacute;r ez
	  nem egy ment&eacute;si technika, m&eacute;gis seg&iacute;t
	  meg&aacute;llap&iacute;tani, hogy mikor kell nyugd&iacute;jba
	  k&uuml;lden&uuml;nk a biztons&aacute;gi ment&eacute;seinket.
	  Ez k&uuml;l&ouml;n&ouml;sen az akt&iacute;v nem
	  haszn&aacute;lt ment&eacute;sekre vonatkozik, ezeket bizonyos
	  id&#245; eltelt&eacute;vel mindig &eacute;rdemes
	  ellen&#245;rizni.</para>
      </listitem>
    </itemizedlist>

    <para>Nagyon k&ouml;nny&#251; lenne tov&aacute;bbi
	technik&aacute;kat is felsorolni, melyek legt&ouml;bbje az
	im&eacute;ntiek valamilyen kombin&aacute;ci&oacute;ja lenne.  A
	speci&aacute;lis ig&eacute;nyek &aacute;ltal&aacute;ban
	speci&aacute;lis technik&aacute;kat eredm&eacute;nyeznek
	(p&eacute;ld&aacute;ul egy &eacute;les adatb&aacute;zis
	biztons&aacute;gi ment&eacute;se &aacute;ltal&aacute;ban az
	adott adatb&aacute;ziskezel&#245; rendszer
	k&ouml;zrem&#251;k&ouml;d&eacute;s&eacute;t is elv&aacute;rja).
	Mindig fontos tudni, hogy milyen vesz&eacute;lyek ellen
	v&eacute;dekez&uuml;nk &eacute;s hogyan kezelj&uuml;k le
	ezeket.</para>

  </sect1>

  <sect1 id="backup-basics">
    <title>Alapvet&#245; tudnival&oacute;k a biztons&aacute;gi
      ment&eacute;sr&#245;l</title>

    <para>A &man.dump.8;, &man.tar.1; &eacute;s &man.cpio.1; a
      h&aacute;rom legfontosabb biztons&aacute;gi ment&eacute;sekkel
      kapcsolatos program.</para>

    <sect2>
      <title>Ment&eacute;s &eacute;s
	helyre&aacute;ll&iacute;t&aacute;s</title>

      <indexterm>
	<primary>biztons&aacute;gi ment&eacute;st v&eacute;gz&#245;
	  szoftverek</primary>
	<secondary>ment&eacute;s /
	  helyre&aacute;ll&iacute;t&aacute;s</secondary>
      </indexterm>
      <indexterm><primary><command>dump</command></primary></indexterm>
      <indexterm><primary><command>restore</command></primary></indexterm>

      <para>A &unix; t&iacute;pus&uacute; rendszerekben a
	biztons&aacute;gi ment&eacute;st hagyom&aacute;nyosan a
	<command>dump</command> &eacute;s <command>restore</command>
	programok v&eacute;gzik.  A meghajt&oacute;kat lemezblokkok
	&ouml;sszes&eacute;gek&eacute;nt kezelik, az
	&aacute;llom&aacute;nyrendszerek &aacute;ltal l&eacute;trehozott
	&aacute;llom&aacute;nyok, linkek &eacute;s
	k&ouml;nyvt&aacute;rak szintje alatt.  Elt&eacute;r&#245;en
	m&aacute;s, biztons&aacute;gi ment&eacute;st v&eacute;gz&#245;
	szoftverekt&#245;l, a <command>dump</command> az adott
	eszk&ouml;z&ouml;n egy eg&eacute;sz
	&aacute;llom&aacute;nyrendszert k&eacute;pes lementeni.  Nem
	k&eacute;pes csak az &aacute;llom&aacute;nyrendszer vagy egy
	t&ouml;bb &aacute;llom&aacute;nyrendszerre kiterjed&#245;
	k&ouml;nyvt&aacute;rszerkezet egy r&eacute;sz&eacute;t
	lementeni.  A <command>dump</command> nem
	&aacute;llom&aacute;nyokat &eacute;s k&ouml;nyvt&aacute;rakat
	&iacute;r a szalagra, hanem nyers adatblokkokat, amelyek
	&aacute;llom&aacute;nyokat &eacute;s k&ouml;nyvt&aacute;rakat
	form&aacute;znak.  A <command>restore</command> parancs az
	adatokat alap&eacute;rtelmez&eacute;s szerint a <filename
	  class="directory">/tmp</filename> k&ouml;nyvt&aacute;rba
	t&ouml;m&ouml;r&iacute;ti ki.  Ha nem lenne elegend&#245;
	hely&uuml;nk a <filename class="directory">/tmp</filename>
	k&ouml;nyvt&aacute;rban, akkor a <envar>TMPDIR</envar>
	k&ouml;rnyezeti v&aacute;ltoz&oacute;
	&aacute;t&aacute;ll&iacute;t&aacute;s&aacute;val ehelyett
	megadhatunk egy olyat, ahol m&aacute;r kell&#245;
	mennyis&eacute;g&#251; ter&uuml;let &aacute;ll
	rendelkez&eacute;sre a <command>restore</command>
	akad&aacute;lytalan lefut&aacute;s&aacute;hoz.</para>

      <note>
	<para>Ha a <command>dump</command> parancsot a
	  gy&ouml;k&eacute;r k&ouml;nyvt&aacute;rban adjuk ki, akkor nem
	  fogja lementeni a <filename>/home</filename> vagy
	  <filename>/usr</filename> vagy b&aacute;rmilyen m&aacute;s
	  k&ouml;nyvt&aacute;rat, mivel ezek jellemz&#245; m&oacute;don
	  m&aacute;s &aacute;llom&aacute;nyrendszerek
	  csatlakoz&aacute;si pontja vagy m&aacute;s
	  &aacute;llom&aacute;nyrendszerekre mutat&oacute; szimbolikus
	  linkek.</para>
      </note>

      <para>A <command>dump</command> parancsnak vannak olyan
	rigoly&aacute;i, amelyek m&eacute;g az AT&amp;T UNIX 6.
	verzi&oacute;j&aacute;b&oacute;l (1975
	k&ouml;rny&eacute;k&eacute;r&#245;l) maradtak vissza.  Az
	alap&eacute;rtelmezett param&eacute;terez&eacute;se 9
	s&aacute;vos szalagokat felt&eacute;telezi (6250 bpi), nem pedig
	a napjainkban elterjedt nagy
	&iacute;r&aacute;ss&#251;r&#251;ss&eacute;g&#251;
	(eg&eacute;szen 62&nbsp;182 ftpi-s) adathordoz&oacute;kat.  Ezek
	az alap&eacute;rtelmez&eacute;sek term&eacute;szetesen
	paranccsorb&oacute;l fel&uuml;lb&iacute;r&aacute;lhat&oacute;ak,
	&eacute;s &iacute;gy a manaps&aacute;g alkalmazott szalagos
	meghajt&oacute;k teljes kapacit&aacute;sa is
	kihaszn&aacute;lhat&oacute; vele.</para>

      <indexterm><primary><filename>.rhosts</filename></primary></indexterm>

      <para>Emellett az <command>rdump</command> &eacute;s
	<command>rrestore</command> programok
	seg&iacute;ts&eacute;g&eacute;vel h&aacute;l&oacute;zaton
	kereszt&uuml;l is le tudjuk menteni az adatainkat egy
	m&aacute;sik sz&aacute;m&iacute;t&oacute;g&eacute;pre
	csatlakoztatott szalagos egys&eacute;gre.  Mind a k&eacute;t
	program az &man.rcmd.3; &eacute;s a &man.ruserok.3; parancsokat
	haszn&aacute;lja a t&aacute;voli szalagos meghajt&oacute;
	el&eacute;r&eacute;s&eacute;hez.  Az <command>rdump</command>
	&eacute;s <command>rrestore</command> param&eacute;tereinek a
	t&aacute;voli sz&aacute;m&iacute;t&oacute;g&eacute;p
	haszn&aacute;lat&aacute;hoz kell illeszkedni&uuml;k.  Amikor egy
	&os; rendszer&#251; sz&aacute;m&iacute;t&oacute;g&eacute;pet az
	<command>rdump</command> paranccsal egy Sun rendszer&#251;,
	<hostid>komodo</hostid> nev&#251;
	sz&aacute;m&iacute;t&oacute;g&eacute;pre ment&uuml;nk, amelyhez
	egy Exabyte szalagos meghajt&oacute; csatlakozik, akkor ezt a
	&iacute;rjuk be:</para>

      <screen>&prompt.root; <userinput>/sbin/rdump 0dsbfu 54000 13000 126 komodo:/dev/nsa8 /dev/da0a 2>&amp;1</userinput></screen>

      <para>Figyelem: az <filename>.rhosts</filename>
	&aacute;llom&aacute;nyon kereszt&uuml;l
	hiteles&iacute;t&eacute;snek megvannak a maga biztons&aacute;gi
	kock&aacute;zatai.  Ne felejts&uuml;k el felm&eacute;rni ezt a
	saj&aacute;t k&ouml;rnyezet&uuml;nkben sem.</para>

      <para>A <command>dump</command> &eacute;s
	<command>restore</command> parancsokat az <command>ssh</command>
	haszn&aacute;lat&aacute;val m&eacute;g
	biztons&aacute;gosabb&aacute; tehetj&uuml;k.</para>

      <example>
	<title>A <command>dump</command> haszn&aacute;lata az
	  <application>ssh</application> alkalmaz&aacute;ssal</title>

	<screen>&prompt.root; <userinput>/sbin/dump -0uan -f - /usr | gzip -2 | ssh -c blowfish \
          <replaceable>c&eacute;lfelhaszn&aacute;l&oacute;@c&eacute;l.g&eacute;p.hu</replaceable> dd of=<replaceable>/nagy&aacute;llom&aacute;nyok/dump-usr-l0.gz</replaceable></userinput></screen>

      </example>

      <para>Vagy az <envar>RSH</envar> k&ouml;rnyezeti
	v&aacute;ltoz&oacute; megfelel&#245;
	be&aacute;ll&iacute;t&aacute;s&aacute;val haszn&aacute;lhatjuk a
	<command>dump</command> be&eacute;p&iacute;tett
	m&oacute;dszer&eacute;t:</para>

      <example>
	<title>A <command>dump</command> haszn&aacute;lata az
	  <application>ssh</application> alkalmaz&aacute;ssal, az
	  <envar>RSH</envar> k&ouml;rnyezeti v&aacute;ltoz&oacute;
	  be&aacute;ll&iacute;t&aacute;s&aacute;val</title>

	<screen>&prompt.root; <userinput>RSH=/usr/bin/ssh /sbin/dump -0uan -f <replaceable>c&eacute;lfelhaszn&aacute;l&oacute;@c&eacute;l.g&eacute;p.hu</replaceable>:/dev/sa0 /usr</userinput></screen>

      </example>

    </sect2>

    <sect2>
      <title><command>tar</command></title>

      <indexterm>
	<primary>biztons&aacute;gi ment&eacute;st v&eacute;gz&#245;
	  szoftverek</primary>
	<secondary><command>tar</command></secondary>
      </indexterm>

      <para>A &man.tar.1; is az AT&amp;T UNIX 6.
	verzi&oacute;j&aacute;ig ny&uacute;lik vissza (teh&aacute;t
	nagyj&aacute;b&oacute;l 1975-ig).  A <command>tar</command> az
	&aacute;llom&aacute;nyrendszerrel szoros
	egy&uuml;ttm&#251;k&ouml;d&eacute;sben dolgozik,
	&aacute;llom&aacute;nyokat &eacute;s k&ouml;nyvt&aacute;rakat
	&iacute;r a szalagra.  A <command>tar</command> ugyan nem ismeri
	a &man.cpio.1; &aacute;ltal felk&iacute;n&aacute;lt &ouml;sszes
	lehet&#245;s&eacute;get, de nincs is sz&uuml;ks&eacute;ge olyan
	szokatlan paranccsoros &ouml;sszekapcsol&aacute;sokra, mint a
	<command>cpio</command> parancsnak.</para>

      <indexterm><primary><command>tar</command></primary></indexterm>

      <para>A &os;&nbsp;5.3 vagy k&eacute;s&#245;bbi
	v&aacute;ltozataiban a GNU <command>tar</command> &eacute;s az
	alap&eacute;rtelmez&eacute;s szerinti <command>bsdtar</command>
	egyar&aacute;nt el&eacute;rhet&#245;.  A GNU v&aacute;ltozat a
	<command>gtar</command> paranccsal h&iacute;vhat&oacute; meg.
	Az <command>rdump</command> parancshoz hasonl&oacute;
	fel&iacute;r&aacute;sban k&eacute;pes kezelni a t&aacute;voli
	eszk&ouml;z&ouml;ket.  Teh&aacute;t &iacute;gy tudjuk
	haszn&aacute;lni a <command>tar</command> parancsot a
	<hostid>komodo</hostid> nev&#251; Sun
	sz&aacute;m&iacute;t&oacute;g&eacute;p Exab&iacute;te szalagos
	meghajt&oacute;j&aacute;nak
	el&eacute;r&eacute;s&eacute;re:</para>

      <screen>&prompt.root; <userinput>/usr/bin/gtar cf komodo:/dev/nsa8 . 2>&amp;1</userinput></screen>

      <para>Ugyanez elt&eacute;rhet&#245; a <command>bsdtar</command>
	haszn&aacute;lat&aacute;val is, amikor az <command>rsh</command>
	programmal &ouml;sszekapcsolva k&uuml;ld&uuml;nk &aacute;t a
	t&aacute;voli szalagos egys&eacute;gre.</para>

      <screen>&prompt.root; <userinput>tar cf - . | rsh <replaceable>h&aacute;l&oacute;zati-n&eacute;v</replaceable> dd of=<replaceable>szalagos-eszk&ouml;z</replaceable> obs=20b</userinput></screen>

      <para>Ha a h&aacute;l&oacute;zaton kereszt&uuml;l ment&eacute;s
	sor&aacute;n fontos sz&aacute;munkra a biztons&aacute;g, akkor
	az <command>rsh</command> parancs helyett az
	<command>ssh</command> parancsot haszn&aacute;ljuk.</para>

    </sect2>

    <sect2>
      <title><command>cpio</command></title>

      <indexterm>
	<primary>biztons&aacute;gi ment&eacute;st v&eacute;gz&#245;
	  szoftverek</primary>
	<secondary><command>cpio</command></secondary>
      </indexterm>

      <para>A &man.cpio.1; eredetileg a &unix; szalagos programjai
	&eacute;s szalagos egys&eacute;gei k&ouml;z&ouml;tt
	k&ouml;zvet&iacute;tett.  A <command>cpio</command> parancs
	(t&ouml;bbek k&ouml;zt) k&eacute;pes a byte-ok
	sorrendj&eacute;nek felcser&eacute;l&eacute;s&eacute;re,
	t&ouml;bb k&uuml;l&ouml;nb&ouml;z&#245; arch&iacute;vum
	form&aacute;tuma szerint &iacute;rni &eacute;s adatokat
	k&ouml;zvet&iacute;teni m&aacute;s programok fel&eacute;.  Ez
	ut&oacute;bbi lehet&#245;s&eacute;ge miatt a
	<command>cpio</command> k&iacute;v&aacute;l&oacute;an alkalmas a
	telep&iacute;t&#245;eszk&ouml;z&ouml;k sz&aacute;m&aacute;ra.  A
	<command>cpio</command> nem k&eacute;pes bej&aacute;rni a
	k&ouml;nyvt&aacute;rszerkezetet, &eacute;s az
	&aacute;llom&aacute;nyok list&aacute;j&aacute;t a
	szabv&aacute;nyos bemeneten kereszt&uuml;l kell megadni
	neki.</para>

      <indexterm><primary><command>cpio</command></primary></indexterm>

      <para>A <command>cpio</command> nem t&aacute;mogatja a
	biztons&aacute;gi ment&eacute;s
	&aacute;tk&uuml;ld&eacute;s&eacute;t a h&aacute;l&oacute;zaton.
	Programok &ouml;sszekapcsol&aacute;s&aacute;val &eacute;s az
	<command>rsh</command> haszn&aacute;lat&aacute;val tudunk
	adatokat k&uuml;ldeni t&aacute;voli szalagos
	meghajt&oacute;kra.</para>

      <screen>&prompt.root; <userinput>for f in <replaceable>k&ouml;nyvt&aacute;r_lista</replaceable>; do</userinput>
<userinput>find $f &gt;&gt; <replaceable>ment&eacute;si.lista</replaceable></userinput>
<userinput>done</userinput>
&prompt.root; <userinput>cpio -v -o --format=newc &lt; backup.list | ssh <replaceable>felhaszn&aacute;l&oacute;</replaceable>@<replaceable>g&eacute;p</replaceable> "cat &gt; <replaceable>ment&#245;eszk&ouml;z</replaceable>"</userinput></screen>

      <para>Ahol a <replaceable>k&ouml;nyvt&aacute;r_lista</replaceable>
	a menteni k&iacute;v&aacute;nt k&ouml;nyvt&aacute;rak
	list&aacute;ja, a
	<replaceable>felhaszn&aacute;l&oacute;</replaceable>@<replaceable>g&eacute;p</replaceable>
	a ment&eacute;st v&eacute;gz&#245; g&eacute;p
	felhaszn&aacute;l&oacute;j&aacute;nak &eacute;s
	h&aacute;l&oacute;zati nev&eacute;nek egy&uuml;ttese, valamint a
	<replaceable>ment&#245;eszk&ouml;z</replaceable>, ahova a
	ment&eacute;s ker&uuml;l (p&eacute;ld&aacute;ul
	<filename>/dev/nsa0</filename>).</para>

    </sect2>

    <sect2>
      <title><command>pax</command></title>

      <indexterm>
	<primary>biztons&aacute;gi ment&eacute;st v&eacute;gz&#245;
	  szoftverek</primary>
	<secondary><command>pax</command></secondary>
      </indexterm>
      <indexterm><primary><command>pax</command></primary></indexterm>
      <indexterm><primary>POSIX</primary></indexterm>
      <indexterm><primary>IEEE</primary></indexterm>

      <para>A &man.pax.1; az IEEE/&posix; v&aacute;lasza a
	<command>tar</command> &eacute;s <command>cpio</command>
	programokra.  Az &eacute;vek sor&aacute;n a
	<command>tar</command> &eacute;s a <command>cpio</command>
	k&uuml;l&ouml;nb&ouml;z&#245; v&aacute;ltozatai egy kiss&eacute;
	inkompatibiliss&eacute; v&aacute;ltak.  Ez&eacute;rt a
	szabv&aacute;nyos&iacute;t&aacute;suk kiharcol&aacute;sa helyett
	ink&aacute;bb a &posix; l&eacute;trehozott egy &uacute;j
	archiv&aacute;l&oacute; seg&eacute;dprogramot.  A
	<command>pax</command> megpr&oacute;b&aacute;lja &iacute;rni
	&eacute;s olvasni a <command>cpio</command> &eacute;s
	<command>tar</command> form&aacute;tumok legt&ouml;bb
	v&aacute;ltozat&aacute;t, valamint emellett tov&aacute;bbi
	saj&aacute;t form&aacute;tumokat is kezel.  A
	parancsk&eacute;szlete ink&aacute;bb a <command>cpio</command>
	parancs&eacute;ra eml&eacute;keztet, mintsem a
	<command>tar</command> parancs&eacute;ra.</para>

    </sect2>

    <sect2 id="backups-programs-amanda">
      <title><application>Amanda</application></title>

      <indexterm>
	<primary>biztons&aacute;gi ment&eacute;st v&eacute;gz&#245;
	  szoftverek</primary>
	<secondary><application>Amanda</application></secondary>
      </indexterm>
      <indexterm><primary><application>Amanda</application></primary></indexterm>

      <para>Az <application>Amanda</application> (Advanced Maryland
	Network Disk Archiver) egy kliens-szerver alap&uacute;
	ment&eacute;si rendszer, nem pedig egy &ouml;n&aacute;ll&oacute;
	program.  Az <application>Amanda</application> szerver menti
	tetsz&#245;leges sz&aacute;m&uacute;
	sz&aacute;m&iacute;t&oacute;g&eacute;p adat&aacute;t egyetlen
	szalagra, melyek az <application>Amanda</application> klienst
	futtatj&aacute;k &eacute;s h&aacute;l&oacute;zaton
	kereszt&uuml;l hozz&aacute; csatlakoznak.  A nagy
	mennyis&eacute;g&#251; &eacute;s nagy kapacit&aacute;s&uacute;
	lemezekkel rendelkez&#245; rendszerekben k&ouml;zvetlen&uuml;l a
	ment&eacute;shez sz&uuml;ks&eacute;ges id&#245; nem &aacute;ll
	rendelkez&eacute;sre a feladat
	elv&eacute;gz&eacute;s&eacute;hez.  Az
	<application>Amanda</application> viszont k&eacute;pes megoldani
	ezt a probl&eacute;m&aacute;t.  Az
	<application>Amanda</application> k&eacute;pes egy
	<quote>saj&aacute;t lemez</quote> haszn&aacute;lat&aacute;val
	egyszerre t&ouml;bb &aacute;llom&aacute;nyrendszerr&#245;l is
	biztons&aacute;gi ment&eacute;st k&eacute;sz&iacute;teni.  Az
	<application>Amanda</application>
	<quote>arch&iacute;vumk&eacute;szleteket</quote> hoz
	l&eacute;tre: az <application>Amanda</application>
	konfigur&aacute;ci&oacute;s &aacute;llom&aacute;ny&aacute;ban
	megadott &aacute;llom&aacute;nyrendszerekr&#245;l
	k&eacute;sz&iacute;t teljes ment&eacute;st egy adott id&#245;
	alatt egy adott mennyis&eacute;g&#251; szalagra.  Az
	<quote>arch&iacute;vumk&eacute;szlet</quote>
	ezenk&iacute;v&uuml;l m&eacute;g tartalmaz egy napi
	inkrement&aacute;lis (vagy k&uuml;l&ouml;nb&ouml;zeti)
	ment&eacute;st is minden egyes
	&aacute;llom&aacute;nyrendszerr&#245;l.  A s&eacute;r&uuml;lt
	&aacute;llom&aacute;nyrendszerek
	vissza&aacute;ll&iacute;t&aacute;s&aacute;hoz mindig a
	leg&uacute;jabb teljes biztons&aacute;gi ment&eacute;sre
	&eacute;s a hozz&aacute; tartoz&oacute; inkrement&aacute;lis
	ment&eacute;sekre van sz&uuml;ks&eacute;g&uuml;nk.</para>

      <para>A konfigur&aacute;ci&oacute;s &aacute;llom&aacute;ny
	seg&iacute;ts&eacute;g&eacute;vel prec&iacute;z
	ir&aacute;ny&iacute;t&aacute;st gyakorolhatunk a
	l&eacute;trehozott ment&eacute;sek &eacute;s az
	<application>Amanda</application> &aacute;ltal keltett
	h&aacute;l&oacute;zati forgalom felett.  Az
	<application>Amanda</application> a fentiek k&ouml;z&uuml;l
	b&aacute;rmelyik programmal k&eacute;pes az adatokat szalagra
	r&ouml;gz&iacute;teni.  Az <application>Amanda</application>
	portk&eacute;nt vagy csomagk&eacute;nt is el&eacute;rhet&#245;,
	alap&eacute;rtelmez&eacute;s szerint nem telep&uuml;l.</para>

      </sect2>

    <sect2>
      <title>Ne csin&aacute;ljunk semmit</title>

      <para>A <quote>Ne csin&aacute;ljunk semmit</quote> nem egy
	&uacute;jabb sz&aacute;m&iacute;t&oacute;g&eacute;pes program,
	hanem egy igen gyakran alkalmazott ment&eacute;si
	strat&eacute;gia.  Nem kell beruh&aacute;zni.  Nem kell
	semmilyen biztons&aacute;gi ment&eacute;si rendet k&ouml;vetni.
	Egyszer&#251;en semmit se csin&aacute;lunk.  Ha
	v&eacute;letlen&uuml;l valami t&ouml;rt&eacute;nne az
	adatainkkal, akkor csak mosolyogjunk &eacute;s
	t&ouml;r&#245;dj&uuml;nk bele!</para>

      <para>Amennyiben az id&#245;nk &eacute;s adataink keveset vagy
	&eacute;ppen semmit se &eacute;rnek, akkor a <quote>Ne
	csin&aacute;ljunk semmit</quote> az el&eacute;rhet&#245; legjobb
	biztons&aacute;gi ment&eacute;si megold&aacute;s
	sz&aacute;m&iacute;t&oacute;g&eacute;p&uuml;nk
	sz&aacute;m&aacute;ra.  De legy&uuml;nk &oacute;vatosak, mert a
	&unix; egy igen hasznos eszk&ouml;z, &eacute;s f&eacute;l
	&eacute;ven bel&uuml;l k&ouml;nnyen &uacute;gy
	tal&aacute;lhatjuk magunkat, hogy m&eacute;gis csak vannak
	&eacute;rt&eacute;kes adataink.</para>

      <para>A <quote>Ne csin&aacute;ljunk semmit</quote>
	t&ouml;k&eacute;letesen megfelel&#245; ment&eacute;si
	m&oacute;dszer a <filename>/usr/obj</filename> &eacute;s a
	hozz&aacute; hasonl&oacute; m&oacute;don a
	sz&aacute;m&iacute;t&oacute;g&eacute;pen automatikusan
	gener&aacute;lt k&ouml;nyvt&aacute;rak &eacute;s
	&aacute;llom&aacute;nyok eset&eacute;ben.  Ugyanilyen
	p&eacute;lda lehetne a k&eacute;zik&ouml;nyv HTML vagy
	&postscript; v&aacute;ltozata.  Ezek a form&aacute;tumok ugyanis
	az SGML forr&aacute;sok alapj&aacute;n keletkeznek, &iacute;gy a
	HTML vagy &postscript; &aacute;llom&aacute;nyok ment&eacute;se
	nem &eacute;letbev&aacute;g&oacute;.  Az SGML
	&aacute;llom&aacute;nyokat viszont m&aacute;r ann&aacute;l
	ink&aacute;bb ments&uuml;k!</para>

    </sect2>

    <sect2>
      <title>Melyik a legjobb?</title>

      <indexterm><primary>LISA</primary></indexterm>

      <para>&man.dump.8; <emphasis>Pont.</emphasis> Elizabeth D.  Zwicky
	komolyan letesztelte az itt felsorolt &ouml;sszes programot.  A
	&unix; &aacute;llom&aacute;nyrendszerek
	jellegzetess&eacute;geinek &eacute;s rajtuk az &ouml;sszes
	adatunk meg&#245;rz&eacute;s&eacute;nek egy&eacute;rtelm&#251;en
	a <command>dump</command> felel meg a legjobban.  Elizabeth a
	minden egyes program tesztj&eacute;hez olyan
	&aacute;llom&aacute;nyrendszereket hozott l&eacute;tre, amelyek
	rengeteg k&uuml;l&ouml;nf&eacute;le szokatlan helyzetet
	tartalmaztak (valamint n&eacute;h&aacute;ny nem annyira
	szokatlant).  Az &eacute;rintett jellegzetess&eacute;gek: lyukas
	&aacute;llom&aacute;nyok, lyukas &aacute;llom&aacute;nyok
	&eacute;s egy halom nulla, &aacute;llom&aacute;nyok
	&eacute;rdekes karakterekkel a nev&uuml;kben, olvashatatlan
	&eacute;s &iacute;rhatatlan &aacute;llom&aacute;nyok,
	eszk&ouml;z&ouml;k, a ment&eacute;s k&ouml;zben
	m&eacute;ret&uuml;ket v&aacute;ltoztat&oacute;
	&aacute;llom&aacute;nyok, a ment&eacute;s k&ouml;zben
	keletkez&#245; &eacute;s megsz&#251;n&#245;
	&aacute;llom&aacute;nyok &eacute;s m&eacute;g sok minden
	m&aacute;s.  Az eredm&eacute;nyeit a LISA V-ben jelentette meg
	1991 okt&oacute;ber&eacute;ben.  L&aacute;sd <ulink
	  url="http://www.coredumps.de/doc/dump/zwicky/testdump.doc.html"> A
	biztons&aacute;gi ment&eacute;shez &eacute;s
	archiv&aacute;l&aacute;shoz haszn&aacute;lt programok tesztje
	(angolul)</ulink>.</para>
    </sect2>

    <sect2>
      <title>Az adatok helyre&aacute;ll&iacute;t&aacute;sa
	v&eacute;szhelyzetben</title>

      <sect3>
	<title>A katasztr&oacute;fa el&#245;tt</title>

	<para>Csup&aacute;n n&eacute;gy l&eacute;p&eacute;st kell
	  megtenn&uuml;nk az esetleges katasztr&oacute;f&aacute;k
	  bek&ouml;vetkez&eacute;s&eacute;nek eset&eacute;re.</para>

	<indexterm><primary><command>bsdlabel</command></primary></indexterm>

	<para>El&#245;sz&ouml;r is k&eacute;t p&eacute;ld&aacute;nyban
	  nyomtassuk ki az egyes lemezek
	  lemezc&iacute;mk&eacute;j&eacute;t (p&eacute;ld&aacute;ul a
	  <command>bsdlabel da0 | lpr</command> paranccsal) valamint az
	  &aacute;llom&aacute;nyrendszerek
	  t&aacute;bl&aacute;zat&aacute;t (az
	  <filename>/etc/fstab</filename> &aacute;llom&aacute;nyt)
	  &eacute;s az &ouml;sszes rendszerind&iacute;t&aacute;skor
	  megjelen&#245; &uuml;zenetet.</para>

	<indexterm><primary>helyre&aacute;ll&iacute;t&oacute;
	  lemezek</primary></indexterm>

	<para>A m&aacute;sodik l&eacute;p&eacute;sben
	  k&eacute;sz&iacute;ten&uuml;nk kell egy
	  <quote>&eacute;l&#245;</quote> rendszerrel rendelkez&#245;
	  CD-lemezt.  Ezen a lemezen megtal&aacute;lhat&oacute; minden,
	  ami el tudunk ind&iacute;tani egy
	  helyre&aacute;ll&iacute;t&aacute;shoz elegend&#245; rendszert.
	  Ekkor a felhaszn&aacute;l&oacute; futtatni tudja
	  p&eacute;ld&aacute;ul a &man.dump.8;, &man.restore.8;,
	  &man.fdisk.8;, &man.bsdlabel.8;, &man.newfs.8;, &man.mount.8;
	  &eacute;s a t&ouml;bbi seg&eacute;dprogramot.  Ez az image a
	  &os;/&arch.i386;&nbsp;&rel.current;-RELEASE kiad&aacute;shoz
	  az <ulink
	    url="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/&arch.i386;/ISO-IMAGES/&rel.current;/&os;-&rel.current;-RELEASE-&arch.i386;-livefs.iso"></ulink>
	  c&iacute;mr&#245;l t&ouml;lthet&#245; le.</para>

	<para>A harmadik l&eacute;p&eacute;sben igyekezz&uuml;nk
	  min&eacute;l gyakrabban szalagra menteni.  Mindig gondoljuk
	  arra, hogy a legutols&oacute; ment&eacute;s &oacute;ta
	  l&eacute;trehozott v&aacute;ltozat&aacute;saink teljesen el
	  fognak veszni.  A ment&eacute;seket tartalmaz&oacute;
	  szalagokat tegy&uuml;k
	  &iacute;r&aacute;sv&eacute;dett&eacute;.</para>

	<para>A negyedik l&eacute;p&eacute;sben ellen&#245;rizz&uuml;k a
	  a m&aacute;sodik l&eacute;p&eacute;sben
	  k&eacute;sz&iacute;tett helyre&aacute;ll&iacute;t&oacute;
	  lemez&uuml;nket &eacute;s a biztons&aacute;gi
	  ment&eacute;seket tartalmaz&oacute; szalagokat.
	  Jegyezz&uuml;k le az elj&aacute;r&aacute;st.  Ezeket a
	  jegyzeteket is rakjuk el rendszerind&iacute;t&oacute;
	  lemezzel, a kinyomtatott adatokkal &eacute;s a
	  ment&eacute;seket tartalmaz&oacute; szalagokkal egy&uuml;tt.
	  Ezek a jegyzetek megv&eacute;denek minket att&oacute;l, hogy a
	  helyre&aacute;ll&iacute;t&aacute;s k&ouml;zbeni
	  k&eacute;ts&eacute;gbees&eacute;s&uuml;nkben nehogy
	  v&eacute;letlen&uuml;l t&ouml;nkretegy&uuml;k a
	  biztons&aacute;gi ment&eacute;seinket.  (Hogy mik&eacute;nt
	  is?  P&eacute;ld&aacute;ul ha a <command>tar xvf
	    /dev/sa0</command> parancs helyett izgalmunkban a
	  <command>tar cvf /dev/sa0</command> parancsot
	  g&eacute;pelj&uuml;k be, akkor azzal fel&uuml;l&iacute;rjuk a
	  biztons&aacute;gi ment&eacute;seinket).</para>

	<para>A fokozott biztons&aacute;g kedv&eacute;&eacute;rt minden
	  alkalommal k&eacute;sz&iacute;ts&uuml;nk
	  rendszerind&iacute;t&oacute; lemezt &eacute;s
	  legal&aacute;bb k&eacute;t ment&eacute;st.  Az egyiket
	  valamilyen t&aacute;voli helyen t&aacute;roljuk.  Ez a
	  t&aacute;voli hely NE ugyanannak az &eacute;p&uuml;letnek az
	  alagsora legyen!  Sz&aacute;mos c&eacute;g alaposan megtanulta
	  ezt a szab&aacute;lyt a Vil&aacute;gkereskedelmi k&ouml;zpont
	  trag&eacute;di&aacute;ja kapcs&aacute;n.  Ez a t&aacute;voli
	  hely sz&aacute;m&iacute;t&oacute;g&eacute;peinkb&#245;l
	  &eacute;s merevlemezes meghajt&oacute;ink&oacute;l is
	  fizikailag j&oacute;l elk&uuml;l&ouml;n&iacute;thet&#245;,
	  jelent&#245;s t&aacute;vols&aacute;gban legyen.</para>
      </sect3>

      <sect3>
	<title>A katasztr&oacute;fa ut&aacute;n</title>

	<para>Az alapvet&#245; k&eacute;rd&eacute;s: a hardver
	  t&uacute;l&eacute;lte?  Ha rendszeresen
	  k&eacute;sz&iacute;tett&uuml;nk biztons&aacute;gi
	  ment&eacute;seket, akkor a szoftverek miatt
	  egy&aacute;ltal&aacute;n nem kell agg&oacute;dnunk.</para>

	<para>Ha a hardver megs&eacute;r&uuml;lt, akkor a
	  sz&aacute;m&iacute;t&oacute;g&eacute;p
	  haszn&aacute;lat&aacute;nak &uacute;jb&oacute;l
	  megkezd&eacute;se el&#245;tt javasolt cser&eacute;lni a
	  meghib&aacute;sodott alkatr&eacute;szeket.</para>

	<para>Ha a hardverrel minden rendben tal&aacute;ltunk, akkor
	  helyzezz&uuml;k be a helyre&aacute;ll&iacute;t&aacute;shoz
	  haszn&aacute;latos <quote>&eacute;l&#245;</quote> rendszert
	  tartalmaz&oacute; lemezt a CD-meghajt&oacute;ba, &eacute;s
	  ind&iacute;tsuk el vele a
	  sz&aacute;m&iacute;t&oacute;g&eacute;pet.  Ezut&aacute;n
	  nemsok&aacute;ra a telep&iacute;t&eacute;si men&uuml; jelenik
	  meg.  Itt a megfelel&#245; orsz&aacute;g ut&aacute;n a
	  <guimenuitem>Fixit -- Repair mode with CDROM/DVD/floppy or
	    start a shell</guimenuitem>
	  (<quote>Helyre&aacute;ll&iacute;t&aacute;s CD/DVD/floppy
	  haszn&aacute;lat&aacute;val, vagy parancssor
	  ind&iacute;t&aacute;sa</quote>), majd a <guimenuitem>CDROM/DVD
	    -- Use the live filesystem CDROM/DVD</guimenuitem> (<quote>A
	  CD/DVD-n tal&aacute;lhat&oacute; &eacute;l&#245; rendszer
	  haszn&aacute;lata</quote>) men&uuml;pontokat v&aacute;lasszuk.
	  A <command>restore</command> &eacute;s a t&ouml;bbi
	  seg&eacute;dprogram a <filename
	    class="directory">/mnt2/rescue</filename>
	  k&ouml;nyvt&aacute;rban lesznek el&eacute;rhet&#245;ek.</para>

	<para>Egyenk&eacute;nt &aacute;ll&iacute;tsuk vissza az egyes
	  &aacute;llom&aacute;nyrendszereket.</para>

	<indexterm><primary><command>mount</command></primary></indexterm>
	<indexterm><primary>gy&ouml;k&eacute;r
	  part&iacute;ci&oacute;</primary></indexterm>
	<indexterm><primary><command>bsdlabel</command></primary></indexterm>
	<indexterm><primary><command>newfs</command></primary></indexterm>

	<para>A <command>mount</command> paranccsal
	  pr&oacute;b&aacute;ljuk meg csatlakoztatni az els&#245;
	  lemez&uuml;nk rendszerind&iacute;t&oacute;
	  part&iacute;ci&oacute;j&aacute;t (p&eacute;ld&aacute;ul
	  <command>mount /dev/da0a /mt</command>).  Ha a
	  lemezc&iacute;mke megs&eacute;r&uuml;lt, akkor
	  <command>bsdlabel</command> alkalmaz&aacute;s&aacute;val
	  part&iacute;cion&aacute;ljuk &uacute;jra a lemezt &eacute;s
	  c&iacute;mk&eacute;zz&uuml;k meg a kor&aacute;bban
	  kinyomtatott c&iacute;mke adatainak megfelel&#245;en.  A
	  <command>newfs</command> seg&iacute;ts&eacute;g&eacute;vel
	  &uacute;jra hozzuk l&eacute;tre az
	  &aacute;llom&aacute;nyrendszereket.
	  &Iacute;rhat&oacute;-olvashat&oacute; m&oacute;dban
	  csatlakoztassuk &uacute;jra a lemez
	  rendszerin&iacute;t&oacute; part&iacute;ci&oacute;j&aacute;t
	  (<command>mount -u -o rw /mnt</command>).  A biztons&aacute;g
	  ment&eacute;st v&eacute;gz&#245; program &eacute;s a
	  biztons&aacute;gi ment&eacute;st tartalmaz&oacute; szalagok
	  haszn&aacute;lat&aacute;val &aacute;ll&iacute;tsuk helyre az
	  &aacute;llom&aacute;nyrendszer tartalm&aacute;t
	  (p&eacute;ld&aacute;ul <command>restore vrf
	    /dev/sa0</command>).  V&aacute;lasszuk le az
	  &aacute;llom&aacute;nyrendszert (p&eacute;ld&aacute;ul
	  <command>umount /mnt</command>).  Mindegyik s&eacute;r&uuml;lt
	  &aacute;llom&aacute;nyrendszerre ism&eacute;telj&uuml;k a
	  folyamatot.</para>

	<para>Ahogy m&#251;k&ouml;d&#245;k&eacute;pess&eacute;
	  v&aacute;lt a rendszer&uuml;nk, ments&uuml;k az adatainkat
	  &uacute;j szalagokra.  Ak&aacute;rmi is okozta a rendszer
	  &ouml;sszeoml&aacute;s&aacute;t vagy az adatveszt&eacute;st,
	  ism&eacute;t lecsaphat.  Ha most &aacute;ldozunk erre
	  m&eacute;g egy &oacute;r&aacute;t, akkor azzal a
	  k&eacute;s&#245;bbiekben sz&aacute;mos
	  kellemetlens&eacute;gt&#245;l &oacute;vhatjuk meg
	  magunkat.</para>

      </sect3>

<![ %not.published; [

      <sect3>
	<title>* Mit tegyek, ha nem k&eacute;sz&uuml;ltem fel a
	  katasztr&oacute;f&aacute;ra?</title>

	<para></para>
      </sect3>
]]>

    </sect2>
  </sect1>

  <sect1 id="disks-virtual">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Marc</firstname>
	  <surname>Fonvieille</surname>
	  <contrib>&Aacute;tdolgozta &eacute;s feljav&iacute;totta:
	    </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>H&aacute;l&oacute;zat, mem&oacute;ria &eacute;s
      &aacute;llom&aacute;ny alap&uacute;
      &aacute;llom&aacute;nyrendszerek</title>

    <indexterm><primary>virtu&aacute;lis lemezek</primary></indexterm>
    <indexterm>
      <primary>lemezek</primary>
      <secondary>virtu&aacute;lis</secondary>
    </indexterm>

    <para>A sz&aacute;m&iacute;t&oacute;g&eacute;p&uuml;nkben
      l&eacute;tez&#245; fizikai lemezek, p&eacute;ld&aacute;ul floppyk,
      CD-k, merevlemezek &eacute;s egyebek mellett a lemezek egy
      m&aacute;sik form&aacute;j&aacute;t is k&eacute;pes
      meg&eacute;rteni a &os; &mdash; a <firstterm>virtu&aacute;lis
      lemezeket</firstterm>.</para>

    <indexterm><primary>NFS</primary></indexterm>
    <indexterm><primary>Coda</primary></indexterm>
    <indexterm>
      <primary>lemezek</primary>
      <secondary>mem&oacute;ria</secondary>
    </indexterm>

    <para>A virtu&aacute;lis lemeznek tekinthet&#245;ek t&ouml;bbek
      k&ouml;zt az olyan h&aacute;l&oacute;zati
      &aacute;llom&aacute;nyrendszerek, mint p&eacute;ld&aacute;ul a
      <link linkend="network-nfs"> H&aacute;l&oacute;zati
      &aacute;llom&aacute;nyrendszer</link> (Network File System, NFS)
      &eacute;s a Coda, valamint a mem&oacute;ri&aacute;ban &eacute;s
      &aacute;llom&aacute;nyokban l&eacute;trehozott
      &aacute;llom&aacute;nyrendszerek.</para>

    <para>Att&oacute;l f&uuml;gg&#245;en, hogy a &os; melyik
      v&aacute;ltozat&aacute;t haszn&aacute;ljuk, az
      &aacute;llom&aacute;ny &eacute;s mem&oacute;ria alap&uacute;
      &aacute;llom&aacute;nyrendszerek
      l&eacute;trehoz&aacute;s&aacute;hoz, illetve
      haszn&aacute;lat&aacute;hoz k&uuml;l&ouml;nb&ouml;z&#245;
      seg&eacute;dprogramokra lesz sz&uuml;ks&eacute;g&uuml;nk.</para>

    <note>
      <para>A &man.devfs.5; a felhaszn&aacute;l&oacute;
	sz&aacute;m&aacute;ra l&aacute;thatatlan m&oacute;don hozza
	l&eacute;tre az eszk&ouml;z&ouml;k le&iacute;r&oacute;it.</para>
    </note>

    <sect2 id="disks-mdconfig">
      <title>&Aacute;llom&aacute;ny alap&uacute;
	&aacute;llom&aacute;nyrendszerek</title>

      <indexterm>
	<primary>lemezek</primary>
	<secondary>&aacute;llom&aacute;ny alap&uacute;</secondary>
      </indexterm>

      <para>&os; alatt az &man.mdconfig.8; seg&eacute;dprogram
	seg&iacute;ts&eacute;g&eacute;vel tudunk mem&oacute;rialemezeket
	(&man.md.4;) be&aacute;ll&iacute;tani &eacute;s
	enged&eacute;lyezni.  Az &man.mdconfig.8;
	haszn&aacute;lat&aacute;hoz be kell t&ouml;lten&uuml;nk az
	&man.md.4; modult vagy hozz&aacute; kell tenn&uuml;nk a
	rendszermagunk be&aacute;ll&iacute;t&aacute;sait
	tartalmaz&oacute; &aacute;llom&aacute;nyhoz:</para>

      <programlisting>device md</programlisting>

      <para>Az &man.mdconfig.8; parancs h&aacute;romf&eacute;le
	mem&oacute;ria alap&uacute; virtu&aacute;lis lemezt ismer: a
	&man.malloc.9;, &aacute;llom&aacute;nyok vagy
	lapoz&oacute;ter&uuml;let haszn&aacute;lat&aacute;val
	l&eacute;trehozott mem&oacute;rialemezeket.  &Iacute;gy lehet
	p&eacute;ld&aacute;ul csatlakoztatni a floppyk vagy CD-k
	&aacute;llom&aacute;nyokban t&aacute;rolt image-eit.</para>

      <para>Egy meglev&#245; &aacute;llom&aacute;nyrendszer
	image-&eacute;nek csatlakoztat&aacute;sa:</para>

      <example>
	<title>Egy meglev&#245; &aacute;llom&aacute;nyrendszer
	  image-&eacute;nek csatlakoztat&aacute;sa az
	  <command>mdconfig</command> paranccsal</title>

	<screen>&prompt.root; <userinput>mdconfig -a -t vnode -f <replaceable>image</replaceable> -u <replaceable>0</replaceable></userinput>
&prompt.root; <userinput>mount /dev/md<replaceable>0</replaceable> <replaceable>/mnt</replaceable></userinput></screen>
      </example>

	<para>&Uacute;j &aacute;llom&aacute;nyrendszer
	  l&eacute;trehoz&aacute;sa az &man.mdconfig.8;
	  haszn&aacute;lat&aacute;val:</para>

      <example>
	<title>&Uacute;j &aacute;llom&aacute;ny alap&uacute; lemez
	  l&eacute;trehoz&aacute;sa az <command>mdconfig</command>
	  paranccsal</title>

	<screen>&prompt.root; <userinput>dd if=/dev/zero of=<replaceable>&uacute;j-image</replaceable> bs=1k count=<replaceable>5</replaceable>k</userinput>
5120+0 records in
5120+0 records out
&prompt.root; <userinput>mdconfig -a -t vnode -f <replaceable>&uacute;j-image</replaceable> -u <replaceable>0</replaceable></userinput>
&prompt.root; <userinput>bsdlabel -w md<replaceable>0</replaceable> auto</userinput>
&prompt.root; <userinput>newfs md<replaceable>0</replaceable>a</userinput>
/dev/md0a: 5.0MB (10224 sectors) block size 16384, fragment size 2048
        using 4 cylinder groups of 1.25MB, 80 blks, 192 inodes.
super-block backups (for fsck -b #) at:
 160, 2720, 5280, 7840
&prompt.root; <userinput>mount /dev/md<replaceable>0</replaceable>a <replaceable>/mnt</replaceable></userinput>
&prompt.root; <userinput>df <replaceable>/mnt</replaceable></userinput>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md0a       4710    4  4330     0%    /mnt</screen>
      </example>

      <para>Ha az <option>-u</option> be&aacute;ll&iacute;t&aacute;ssal
	nem adjuk meg az egys&eacute;g sz&aacute;m&aacute;t, akkor az
	&man.mdconfig.8; az &man.md.4; automatikus
	kioszt&aacute;s&aacute;n kereszt&uuml;l fog egy
	haszn&aacute;latban m&eacute;g nem lev&#245; eszk&ouml;zt
	kiv&aacute;lasztani.  Az &iacute;gy kiosztott egys&eacute;g neve
	az <devicename>md4</devicename> n&eacute;vhez hasonl&oacute;an
	jelenik meg a szabv&aacute;nyos kimeneten.  Az &man.mdconfig.8;
	haszn&aacute;lat&aacute;nak r&eacute;szleteir&#245;l olvassuk el
	a hozz&aacute; tartoz&oacute; man oldalt.</para>

      <para>Az &man.mdconfig.8; egy nagyon sokoldal&uacute;
	seg&eacute;deszk&ouml;z, hab&aacute;r haszn&aacute;latakor
	viszonylag sok parancsot kell kiadni egy &aacute;llom&aacute;ny
	alap&uacute; &aacute;llom&aacute;nyrendszer
	l&eacute;trehoz&aacute;s&aacute;hoz.  A &os; azonban
	alapb&oacute;l tartalmaz m&eacute;g egy &man.mdmfs.8; nev&#251;
	seg&eacute;dprogramot is, ami az &man.md.4; lemezeket az
	&man.mdconfig.8; seg&iacute;ts&eacute;g&eacute;vel
	&aacute;ll&iacute;tja be, l&eacute;trehoz rajtuk egy UFS
	t&iacute;pus&uacute; &aacute;llom&aacute;nyrendszert a
	&man.newfs.8; seg&iacute;ts&eacute;g&eacute;vel &eacute;s
	csatlakoztatja a &man.mount.8; paranccsal.  &Iacute;gy
	p&eacute;ld&aacute;ul, ha az im&eacute;nti
	&aacute;llom&aacute;nyrendszert akarjuk l&eacute;trehozni
	&eacute;s csatlakoztatni, akkor egyszer&#251;en csak
	g&eacute;pelj&uuml;nk be ennyit:</para>

      <example>
	<title>&Aacute;llom&aacute;ny alap&uacute; lemezek
	  be&aacute;ll&iacute;t&aacute;sa &eacute;s
	  csatlakoztat&aacute;sa az <command>mdmfs</command>
	  paranccsal</title>

	<screen>&prompt.root; <userinput>dd if=/dev/zero of=<replaceable>&uacute;j-image</replaceable> bs=1k count=<replaceable>5</replaceable>k</userinput>
5120+0 records in
5120+0 records out
&prompt.root; <userinput>mdmfs -F <replaceable>&uacute;j-image</replaceable> -s <replaceable>5</replaceable>m md<replaceable>0</replaceable> <replaceable>/mnt</replaceable></userinput>
&prompt.root; <userinput>df <replaceable>/mnt</replaceable></userinput>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md0        4718    4  4338     0%    /mnt</screen>
      </example>

      <para>Ha az <option>md</option> param&eacute;tert az egys&eacute;g
	sz&aacute;ma n&eacute;lk&uuml;l adjuk meg, akkor &man.mdmfs.8;
	az &man.md.4; automatikus kioszt&aacute;s&aacute;ra
	t&aacute;maszkodva fog egy addig m&eacute;g nem haszn&aacute;lt
	eszk&ouml;zt kiv&aacute;lasztani.  A &man.mdmfs.8;
	haszn&aacute;lat&aacute;nak pontos r&eacute;szleteivel
	kapcsolatban l&aacute;sd a hozz&aacute; tartoz&oacute; man
	oldalt.</para>

    </sect2>

    <sect2 id="disks-md-freebsd5">
      <title>Mem&oacute;ria alap&uacute;
	&aacute;llom&aacute;nyrendszerek</title>

      <indexterm>
	<primary>lemezek</primary>
	<secondary>mem&oacute;ria
	  &aacute;llom&aacute;nyrendszer</secondary>
      </indexterm>

      <para>A mem&oacute;ria alap&uacute;
	&aacute;llom&aacute;nyrendszerek eset&eacute;ben
	&aacute;ltal&aacute;ban a
	<quote>lapoz&oacute;&aacute;llom&aacute;ny alap&uacute;</quote>
	megk&ouml;zel&iacute;t&eacute;st alkalmazz&aacute;k.  A
	lapoz&oacute;&aacute;llom&aacute;ny alap&uacute;s&aacute;g nem
	arra utal, hogy a mem&oacute;rialemezt alapb&oacute;l
	kilapozz&aacute;k lemezre, hanem ink&aacute;bb arra, hogy a
	mem&oacute;rialemez olyan ter&uuml;leten j&ouml;n l&eacute;tre,
	amelyet sz&uuml;ks&eacute;g eset&eacute;n lemezre lehet lapozni.
	Mem&oacute;ria alap&uacute; lemezeket a (rendszermag
	szint&#251;) &man.malloc.9; haszn&aacute;lat&aacute;val is
	l&eacute;tre lehet hozni, de a malloc alap&uacute;
	mem&oacute;rialemezekn&eacute;l, k&uuml;l&ouml;n&ouml;sen a
	nagyon nagyok eset&eacute;ben, a rendszer k&ouml;nnyen
	&ouml;ssze tud omlani, ha kifut a rendelkez&eacute;s&eacute;re
	&aacute;ll&oacute; mem&oacute;ri&aacute;b&oacute;l.</para>

      <example>
	<title>&Uacute;j mem&oacute;ria alap&uacute; lemez
	  l&eacute;trehoz&aacute;sa az <command>mdconfig</command>
	  paranccsal</title>

	<screen>&prompt.root; <userinput>mdconfig -a -t swap -s <replaceable>5</replaceable>m -u <replaceable>1</replaceable></userinput>
&prompt.root; <userinput>newfs -U md<replaceable>1</replaceable></userinput>
/dev/md1: 5.0MB (10240 sectors) block size 16384, fragment size 2048
        using 4 cylinder groups of 1.27MB, 81 blks, 192 inodes.
        with soft updates
super-block backups (for fsck -b #) at:
 160, 2752, 5344, 7936
&prompt.root; <userinput>mount /dev/md<replaceable>1</replaceable> <replaceable>/mnt</replaceable></userinput>
&prompt.root; <userinput>df <replaceable>/mnt</replaceable></userinput>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md1        4718    4  4338     0%    /mnt</screen>
      </example>

      <example>
	<title>&Uacute;j mem&oacute;ria alap&uacute; lemez
	  l&eacute;trehoz&aacute;sa az <command>mdmfs</command>
	  paranccsal</title>

	<screen>&prompt.root; <userinput>mdmfs -s <replaceable>5</replaceable>m md<replaceable>2</replaceable> <replaceable>/mnt</replaceable></userinput>
&prompt.root; <userinput>df <replaceable>/mnt</replaceable></userinput>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md2        4846    2  4458     0%    /mnt</screen>
      </example>

    </sect2>

    <sect2>
      <title>Mem&oacute;rialemezek lev&aacute;laszt&aacute;sa a
	rendszerr&#245;l</title>

      <indexterm>
	<primary>lemezek</primary>
	<secondary>egy mem&oacute;rialemez
	  lev&aacute;laszt&aacute;sa</secondary>
      </indexterm>

      <para>Amikor m&aacute;r nem akarunk tov&aacute;bb haszn&aacute;lni
	egy mem&oacute;ria vagy &aacute;llom&aacute;ny alap&uacute;
	&aacute;llom&aacute;nyrendszert, &eacute;rdemes visszaadnunk az
	&aacute;ltaluk felhaszn&aacute;lt er&#245;forr&aacute;sokat a
	rendszernek.  Els&#245;k&eacute;nt v&aacute;lasszuk le
	mag&aacute;t az &aacute;llom&aacute;nyrendszert, majd az
	&man.mdconfig.8; seg&iacute;ts&eacute;g&eacute;vel kapcsoljuk le
	a lemezt a rendszerr&#245;l &eacute;s szabad&iacute;tsuk fel az
	&aacute;ltala felhaszn&aacute;lt
	er&#245;forr&aacute;sokat.</para>

      <para>P&eacute;ld&aacute;ul az <filename>/dev/md4</filename>
	eszk&ouml;zt &iacute;gy lehet lekapcsolni &eacute;s
	felszabad&iacute;tani:</para>

      <screen>&prompt.root; <userinput>mdconfig -d -u <replaceable>4</replaceable></userinput></screen>

      <para>A be&aacute;ll&iacute;tott &man.md.4; eszk&ouml;z&ouml;kkel
	kapcsolatos t&ouml;bbi inform&aacute;ci&oacute;t az
	<command>mdconfig -l</command> paranccsal tudjuk
	lek&eacute;rdezni.</para>

    </sect2>
  </sect1>

  <sect1 id="snapshots">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Tom</firstname>
	  <surname>Rhodes</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>Az &aacute;llom&aacute;nyrendszerek
      pillanatk&eacute;pei</title>

      <indexterm>
	<primary>&aacute;llom&aacute;nyrendszerek</primary>
	<secondary>pillanatk&eacute;pek</secondary>
      </indexterm>

      <para>A &os; a <link linkend="soft-updates">Soft Updates</link>
	mellett felk&iacute;n&aacute;l egy m&aacute;sik
	lehet&#245;s&eacute;get: az
	&aacute;llom&aacute;nyrendszerekr&#245;l
	k&eacute;sz&iacute;thet&#245;
	pillanatfelv&eacute;teleket.</para>

      <para>Ezek a pillanatk&eacute;pek lehet&#245;v&eacute; teszik a
	felhaszn&aacute;l&oacute;k sz&aacute;m&aacute;ra, hogy adott
	&aacute;llom&aacute;nyrendszerekr&#245;l k&eacute;peket hozzanak
	l&eacute;tre &eacute;s azt &aacute;llom&aacute;nyk&eacute;nt
	kezelj&eacute;k.  A pillanatk&eacute;peket az adott
	&aacute;llom&aacute;nyrendszerben kell l&eacute;trehozni,
	&eacute;s a felhaszn&aacute;l&oacute;k
	&aacute;llom&aacute;nyrendszerenk&eacute;nt
	h&uacute;szn&aacute;l t&ouml;bbet nem hozhatnak
	bel&#245;l&uuml;k l&eacute;tre.  Az akt&iacute;v
	pillanatk&eacute;pek a szuperblokkban ker&uuml;lnek
	r&ouml;gz&iacute;t&eacute;sre, ez&eacute;rt az
	&aacute;llom&aacute;nyrendszerek lev&aacute;laszt&aacute;sa
	&eacute;s &uacute;jracsatlakoztat&aacute;sa eset&eacute;n is
	megmaradnak, m&eacute;g &uacute;jraind&iacute;t&aacute;s
	ut&aacute;n is.  Amikor egy pillanatk&eacute;pre m&aacute;r
	nincs tov&aacute;bb sz&uuml;ks&eacute;g&uuml;nk, egy szimpla
	&man.rm.1; paranccsal elt&aacute;vol&iacute;that&oacute;.  A
	pillanatk&eacute;pek tetsz&#245;leges sorrendben
	elt&aacute;vol&iacute;that&oacute;ak, hab&aacute;r ilyenkor az
	&ouml;sszes &aacute;ltaluk lefoglalt hely nem szabadul fel,
	mivel m&aacute;s pillanatk&eacute;peknek m&eacute;g
	sz&uuml;ks&eacute;ge lehet bizonyos blokkjaira.</para>

      <para>Miut&aacute;n az &man.mksnap.ffs.8; paranccsal
	l&eacute;trehoztunk egy pillanatk&eacute;pet tartalmaz&oacute;
	&aacute;llom&aacute;nyt, be&aacute;ll&iacute;t&oacute;dik
	r&aacute; a m&oacute;dos&iacute;thatatlans&aacute;got
	jelent&#245; <option>snapshot</option>
	&aacute;llom&aacute;nyjelz&#245;.  Egyed&uuml;l az
	&man.unlink.1; parancs k&eacute;pez ez al&oacute;l
	kiv&eacute;telt, mivel seg&iacute;ts&eacute;g&eacute;vel a
	pillanatk&eacute;pek
	elt&aacute;vol&iacute;that&oacute;ak.</para>

      <para>A pillanatk&eacute;pek a &man.mount.8; paranccsal
	hozhat&oacute;ak l&eacute;tre.  A k&ouml;vetkez&#245;
	m&oacute;don tudjuk a <filename>/var</filename> egy
	pillanatk&eacute;p&eacute;t elk&eacute;sz&iacute;teni a
	<filename>/var/snapshot/snap</filename>
	&aacute;llom&aacute;nyban:</para>

      <screen>&prompt.root; <userinput>mount -u -o snapshot /var/snapshot/snap /var</userinput></screen>

      <para>Vagy a &man.mksnap.ffs.8; megh&iacute;v&aacute;s&aacute;val
	is k&eacute;sz&iacute;thet&uuml;nk
	pillanatk&eacute;peket:</para>

      <screen>&prompt.root; <userinput>mksnap_ffs /var /var/snapshot/snap</userinput></screen>

      <para>Az &aacute;llom&aacute;nyrendszeren (p&eacute;ld&aacute;ul
	<filename>/var</filename>) a pillanatk&eacute;peket
	tartalmaz&oacute; &aacute;llom&aacute;nyokat a &man.find.1;
	paranccsal kereshetj&uuml;k meg:</para>

      <screen>&prompt.root; <userinput>find /var -flags snapshot</userinput></screen>

      <para>Ahogy elk&eacute;sz&iacute;tett&uuml;nk egy
	pillanatk&eacute;pet, t&ouml;bb mindenre is
	felhaszn&aacute;lhatjuk:</para>

      <itemizedlist>
	<listitem>
	  <para>Egyes rendszergazd&aacute;k a pillanatk&eacute;peket
	    biztons&aacute;gi ment&eacute;sekhez
	    haszn&aacute;lj&aacute;k, mivel ezek gond n&eacute;lk&uuml;l
	    &aacute;ttehet&#245;ek CD-re vagy szalagra.</para>
	</listitem>

	<listitem>
	  <para>Az &aacute;llom&aacute;nyrendszerek
	    s&eacute;rtetlens&eacute;g&eacute;t ellen&#245;rz&#245;
	    program, az &man.fsck.8; is lefuttathat&oacute; egy ilyen
	    pillanatk&eacute;pen.  Felt&eacute;ve, hogy az
	    &aacute;llom&aacute;nyrendszer csatlakoztat&aacute;sakor
	    tiszta volt, mindig egy tiszta (&eacute;s
	    v&aacute;ltoz&aacute;sokat nem tartalmaz&oacute;)
	    eredm&eacute;nyt kell kapnunk.  Ennek megl&eacute;te
	    elengedhetetlen a h&aacute;tt&eacute;rben futtathat&oacute;
	    &man.fsck.8; m&#251;k&ouml;d&eacute;s&eacute;hez.</para>
	</listitem>

	<listitem>
	  <para>Futassuk le a &man.dump.8; seg&eacute;dprogramot a
	    pillanatk&eacute;pen.  Az &iacute;gy l&eacute;trehozott
	    ment&eacute;s megegyezik az &aacute;llom&aacute;nyrendszer
	    adott pillanatban felvett &aacute;llapot&aacute;val.  Az
	    <option>-L</option> be&aacute;ll&iacute;t&aacute;s
	    megad&aacute;s&aacute;val maga a &man.dump.8; is
	    k&eacute;pes egyetlen parancsban pillanatfelv&eacute;telt
	    k&eacute;sz&iacute;teni, ebb&#245;l l&eacute;trehozni a
	    ment&eacute;st, majd elt&aacute;vol&iacute;tani.</para>
	</listitem>

	<listitem>
	  <para>A pillanatk&eacute;pet k&eacute;pesek vagyunk a
	    &man.mount.8; paranccsal az &aacute;llom&aacute;nyrendszer
	    befagyasztott v&aacute;ltozatak&eacute;nt
	    csatlakoztatni:</para>

	  <screen>&prompt.root; <userinput>mdconfig -a -t vnode -f /var/snapshot/snap -u 4</userinput>
&prompt.root; <userinput>mount -r /dev/md4 /mnt</userinput></screen>
	</listitem>
      </itemizedlist>

      <para>&Iacute;gy m&aacute;r a <filename>/mnt</filename>
	k&ouml;nyvt&aacute;rba csatlakoztatva be tudjuk j&aacute;rni a
	befagyasztott <filename>/var</filename>
	&aacute;llom&aacute;nyrendszert.  Minden a
	pillanatfelv&eacute;tel k&eacute;sz&iacute;t&eacute;s&eacute;nek
	id&#245;pontj&aacute;nak megfelel&#245; &aacute;llapotban fog
	maradni.  Az egyetlen kiv&eacute;tel tal&aacute;n annyi, hogy
	kor&aacute;bbi pillanatk&eacute;pek nulla m&eacute;ret&#251;
	&aacute;llom&aacute;nyk&eacute;nt fognak megjelenni.  Mikor
	befejezt&uuml;k a pillanatk&eacute;pek
	haszn&aacute;lat&aacute;t, a &man.umount.8; paranccsal le tudjuk
	v&aacute;lasztani:</para>

      <screen>&prompt.root; <userinput>umount /mnt</userinput>
&prompt.root; <userinput>mdconfig -d -u 4</userinput></screen>

      <para>A <option>softupdates</option> &eacute;s az
	&aacute;llom&aacute;nyrendszerek pillanatk&eacute;peinek
	haszn&aacute;lat&aacute;val, illetve m&#251;szaki
	le&iacute;r&aacute;sukkal kapcsolatban l&aacute;togassuk meg
	Marshall Kirk McKusick honlapj&aacute;t a <ulink
	url="http://www.mckusick.com/"></ulink> c&iacute;men
	(angolul).</para>

  </sect1>

  <sect1 id="quotas">
    <title>Az &aacute;llom&aacute;nyrendszerek
      kv&oacute;t&aacute;i</title>

    <indexterm>
      <primary>nyilv&aacute;ntart&aacute;s</primary>
      <secondary>lemezter&uuml;let</secondary>
    </indexterm>
    <indexterm><primary>lemezkv&oacute;t&aacute;k</primary></indexterm>

    <para>A kv&oacute;t&aacute;k haszn&aacute;lata az
      oper&aacute;ci&oacute;s rendszerben egy olyan
      v&aacute;laszthat&oacute; lehet&#245;s&eacute;g, aminek
      seg&iacute;ts&eacute;g&eacute;vel
      &aacute;llom&aacute;nyrendszerenk&eacute;nt korl&aacute;tozni
      tudjuk az egyes felhaszn&aacute;l&oacute;k vagy csoporttagok
      &aacute;ltal elhaszn&aacute;lt lemezter&uuml;let &eacute;s/vagy
      &aacute;llom&aacute;nyok mennyis&eacute;g&eacute;t.  Ezt
      leggyakrabban olyan id&#245;oszt&aacute;sos rendszerekben
      haszn&aacute;lj&aacute;k ki, ahol sz&uuml;ks&eacute;g lehet az
      egyes felhaszn&aacute;l&oacute;kra vagy csoportokra es&#245;
      er&#245;forr&aacute;sok mennyis&eacute;g&eacute;nek
      szab&aacute;lyoz&aacute;s&aacute;ra.  Ezzel tudjuk
      megakad&aacute;lyozni, hogy a felhaszn&aacute;l&oacute;k vagy
      csoportok elfogyassz&aacute;k az &ouml;sszes rendelkez&eacute;sre
      &aacute;ll&oacute; lemezter&uuml;letet.</para>

    <sect2>
      <title>A kv&oacute;t&aacute;k haszn&aacute;lat&aacute;nak
	be&aacute;ll&iacute;t&aacute;sa</title>

      <para>Miel&#245;tt nekil&aacute;tn&aacute;nk a
	kv&oacute;t&aacute;k haszn&aacute;lat&aacute;nak, meg kell
	gy&#245;z&#245;dn&uuml;nk r&oacute;la, hogy a rendszermagunkban
	megvan hozz&aacute; a sz&uuml;ks&eacute;ges
	t&aacute;mogat&aacute;s.  A kv&oacute;t&aacute;kat a
	k&ouml;vetkez&#245; sorral lehet enged&eacute;lyezni a
	rendszermag be&aacute;ll&iacute;t&aacute;sait tartalmaz&oacute;
	&aacute;llom&aacute;nyban:</para>

      <programlisting>options QUOTA</programlisting>

      <para>A gy&aacute;ri <filename>GENERIC</filename> rendszermag ezt
	alapb&oacute;l nem enged&eacute;lyezi, ez&eacute;rt ehhez
	mindenk&eacute;ppen be kell &aacute;ll&iacute;tani, le kell
	ford&iacute;tani &eacute;s telep&iacute;teni egy kell
	saj&aacute;t rendszermagot.  A saj&aacute;t rendszermag
	l&eacute;trehoz&aacute;s&aacute;hoz k&ouml;vess&uuml;k a <xref
	linkend="kernelconfig"> utas&iacute;t&aacute;sait.</para>

      <para>Ha ezzel megvagyunk, akkor a k&ouml;vetkez&#245; sorral
	b&#245;v&iacute;ts&uuml;k ki az
	<filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyt:</para>

      <programlisting>enable_quotas="YES"</programlisting>

      <indexterm>
	<primary>lemezkv&oacute;t&aacute;k</primary>
	<secondary>ellen&#245;rz&eacute;se</secondary>
      </indexterm>

      <para>A kv&oacute;t&aacute;kat kezel&#245; rendszer
	ind&iacute;t&aacute;s&aacute;nak finomabb
	szab&aacute;lyoz&aacute;s&aacute;ra l&eacute;tezik m&eacute;g
	egy tov&aacute;bbi be&aacute;ll&iacute;t&aacute;si
	lehet&#245;s&eacute;g is.  A rendszer ind&iacute;t&aacute;sa
	sor&aacute;n &aacute;ltal&aacute;ban az egyes
	&aacute;llom&aacute;nyrendszerek kv&oacute;t&aacute;j&aacute;t a
	&man.quotacheck.8; program ellen&#245;rzi.  A &man.quotacheck.8;
	gondoskodik r&oacute;la, hogy a kv&oacute;t&aacute;kat
	t&aacute;rol&oacute; adatb&aacute;zis t&eacute;nylegesen az
	&aacute;llom&aacute;nyrendszeren tal&aacute;lhat&oacute;
	adatokat t&uuml;kr&ouml;zi.  Ez egy nagyon
	id&#245;ig&eacute;nyes folyamat, ami r&aacute;nyomja
	b&eacute;lyeg&eacute;t a rendszer elindul&aacute;s&aacute;hoz
	sz&uuml;ks&eacute;ges id&#245; mennyis&eacute;g&eacute;re is.
	Amennyiben szeretn&eacute;nk megtakar&iacute;tani ezt a
	l&eacute;p&eacute;st, tegy&uuml;k bele az
	<filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyba a
	direkt erre a c&eacute;lra kialak&iacute;tott
	be&aacute;ll&iacute;t&aacute;st:</para>

      <programlisting>check_quotas="NO"</programlisting>

      <para>V&eacute;gezet&uuml;l az &aacute;llom&aacute;nyrendszereken
	az <filename>/etc/fstab</filename> megfelel&#245;
	m&oacute;dos&iacute;t&aacute;s&aacute;val tudjuk
	egyenk&eacute;nt enged&eacute;lyezni a lemezkv&oacute;t&aacute;k
	haszn&aacute;lat&aacute;t.  Itt lehet bekapcsolni az
	&aacute;llom&aacute;nyrendszerek felhaszn&aacute;l&oacute;kra
	vagy csoportokra, esetleg mind a kett&#245;j&uuml;kre
	vonatkoz&oacute; kv&oacute;t&aacute;ikat.</para>

      <para>Ha felhaszn&aacute;l&oacute;i szint&#251;
	kv&oacute;t&aacute;kat akarunk enged&eacute;lyezni egy
	&aacute;llom&aacute;nyrendszeren, akkor az
	<filename>/etc/fstab</filename> &aacute;llom&aacute;nyban az
	&aacute;llom&aacute;nyrendszer be&aacute;ll&iacute;t&aacute;sai
	k&ouml;z&eacute; vegy&uuml;k fel a <option>userquota</option>
	opci&oacute;t.  P&eacute;ld&aacute;ul &iacute;gy:</para>

      <programlisting>/dev/da1s2g   /home    ufs rw,userquota 1 2</programlisting>

      <para>Ehhez hasonl&oacute;an tudjuk enged&eacute;lyezni a
	<option>userquota</option> helyett a <option>groupquota</option>
	opci&oacute; haszn&aacute;lat&aacute;val a csoportszint&#251;
	kv&oacute;t&aacute;kat is.  A felhaszn&aacute;l&oacute;i-
	&eacute;s csoportszint&#251; kv&oacute;t&aacute;k egy&uuml;ttes
	enged&eacute;lyez&eacute;s&eacute;hez &iacute;gy kell
	&aacute;t&iacute;rni az &aacute;llom&aacute;nyrendszer
	bejegyz&eacute;s&eacute;t:</para>

      <programlisting>/dev/da1s2g    /home    ufs rw,userquota,groupquota 1 2</programlisting>

      <para>Alap&eacute;rtelmez&eacute;s szerint az
	&aacute;llom&aacute;nyrendszerekhez tartoz&oacute;
	kv&oacute;t&aacute;k a gy&ouml;ker&uuml;kben
	tal&aacute;lhat&oacute; <filename>quota.user</filename> valamint
	<filename>quota.group</filename> &aacute;llom&aacute;nyokban
	t&aacute;rol&oacute;dnak.  Err&#245;l r&eacute;szletesebben az
	&man.fstab.5; man oldalon olvashatunk.  Noha m&eacute;g az
	&man.fstab.5; man oldala szerint is megadhat&oacute; m&aacute;s
	el&eacute;r&eacute;si &uacute;t a kv&oacute;t&aacute;kat
	t&aacute;rol&oacute; &aacute;llom&aacute;nyokhoz,
	semmik&eacute;ppen sem javasoljuk ezt, mert &uacute;gy
	t&#251;nik, hogy a kv&oacute;t&aacute;kat kezel&#245;
	k&uuml;l&ouml;nb&ouml;z&#245; seg&eacute;dprogramok ezzel nem
	k&eacute;pesek rendesen megbirk&oacute;zni.</para>

      <para>Most kell &uacute;jraind&iacute;tani a rendszer&uuml;nket az
	&uacute;j rendszermaggal.  Az <filename>/etc/rc</filename>
	mag&aacute;t&oacute;l le fogja futtatni a kezdeti
	kv&oacute;ta&aacute;llom&aacute;nyok
	l&eacute;trehoz&aacute;s&aacute;hoz sz&uuml;ks&eacute;ges
	parancsokat az <filename>/etc/fstab</filename>
	&aacute;llom&aacute;nyban megadott
	&aacute;llom&aacute;nyrendszereken.  Ennek megfelel&#245;en
	teh&aacute;t nem nek&uuml;nk kell k&eacute;zzel
	l&eacute;trehoznunk ezeket az &aacute;llom&aacute;nyokat.</para>

      <para>H&eacute;tk&ouml;znapi esetben egy&aacute;ltal&aacute;n nem
	kell manu&aacute;lis futtatnunk a &man.quotacheck.8;,
	&man.quotaon.8; vagy &man.quotaoff.8; parancsokat.  Hab&aacute;r
	ha tiszt&aacute;ban szeretn&eacute;nk lenni a pontos
	m&#251;k&ouml;d&eacute;s&uuml;kkel, akkor mindenk&eacute;ppen
	lapozzuk fel a hozz&aacute;juk tartoz&oacute; man
	oldalakat.</para>

    </sect2>

    <sect2>
      <title>A kv&oacute;t&aacute;k
	be&aacute;ll&iacute;t&aacute;sa</title>

      <indexterm>
	<primary>lemezkv&oacute;t&aacute;k</primary>
	<secondary>korl&aacute;tok</secondary>
      </indexterm>

      <para>Ahogy siker&uuml;lt be&aacute;ll&iacute;tani a
	kv&oacute;t&aacute;k haszn&aacute;lat&aacute;t, egyb&#245;l
	ellen&#245;rizz&uuml;k is a
	m&#251;k&ouml;d&#245;k&eacute;pess&eacute;g&uuml;ket.  Ezt
	legegyszer&#251;bben a k&ouml;vetkez&#245; paranccsal
	tehetj&uuml;k meg:</para>

      <screen>&prompt.root; <userinput>quota -v</userinput></screen>

      <para>Itt egy sorban &ouml;sszefoglalva l&aacute;thatjuk a
	jelenlegi lemezhaszn&aacute;latot &eacute;s az egyes
	&aacute;llom&aacute;nyrendszereken enged&eacute;lyezett
	kv&oacute;t&aacute;k korl&aacute;tait.</para>

      <para>Most m&aacute;r k&eacute;szen&aacute;llunk arra, hogy az
	&man.edquota.8; paranccsal v&eacute;gre korl&aacute;tokat is
	be&aacute;ll&iacute;tsunk a kv&oacute;t&aacute;khoz.</para>

      <para>Sz&aacute;mos be&aacute;ll&iacute;t&aacute;s &aacute;ll
	rendelkez&eacute;s&uuml;nkre a felhaszn&aacute;l&oacute;k vagy
	csoportok &aacute;ltal lefoglalhat&oacute; lemezter&uuml;let
	vagy a l&eacute;trehozhat&oacute; &aacute;llom&aacute;nyok
	sz&aacute;m&aacute;nak korl&aacute;toz&aacute;s&aacute;t
	illet&#245;en.  A helyfoglal&aacute;st szab&aacute;lyozhatjuk
	lemezter&uuml;let alapj&aacute;n (blokk kv&oacute;ta) vagy az
	&aacute;llom&aacute;nyok sz&aacute;ma szerint
	(&aacute;llom&aacute;nyle&iacute;r&oacute; kv&oacute;ta),
	esetleg a kett&#245; kombin&aacute;ci&oacute;j&aacute;val.  A
	korl&aacute;tok tov&aacute;bbi k&eacute;t
	kateg&oacute;ri&aacute;ra bonthat&oacute;ak: er&#245;sre
	&eacute;s gyeng&eacute;re.</para>

      <indexterm><primary>er&#245;s korl&aacute;t</primary></indexterm>

      <para>Az er&#245;s korl&aacute;tot (hard limit) nem lehet
	t&uacute;ll&eacute;pni.  Ahogy a felhaszn&aacute;l&oacute;
	el&eacute;ri a sz&aacute;m&aacute;ra kiszabott er&#245;s
	korl&aacute;tot, semmilyen tov&aacute;bbi ter&uuml;letet nem
	haszn&aacute;lhat fel a k&eacute;rd&eacute;ses
	&aacute;llom&aacute;nyrendszeren.  P&eacute;ld&aacute;ul, ha a
	felhaszn&aacute;l&oacute;nak az &aacute;llom&aacute;nyrendszeren
	500 kilobyte-os er&#245;s korl&aacute;tot
	&aacute;ll&iacute;tottunk be, &eacute;s &eacute;ppen 490
	kilobyte-n&aacute;l tart, akkor a felhaszn&aacute;l&oacute;
	innen m&aacute;r csak 10 kilobyte-nyi helyet foglalhat le.  11
	kilobyte lefoglal&aacute;sa m&aacute;r nem fog sikerrel
	j&aacute;rni.</para>

      <indexterm><primary>gyenge korl&aacute;t</primary></indexterm>

      <para>Ezzel szemben a gyenge korl&aacute;tok (soft limit) egy
	adott ideig &aacute;tl&eacute;phet&#245;ek.  Ezt az id&#245;t
	t&uuml;relmi id&#245;nek (grace period) nevezik, ami
	alap&eacute;rtelmez&eacute;s szerint egy h&eacute;t.  Ha a
	felhaszn&aacute;l&oacute; a gyenge korl&aacute;ton fel&uuml;l
	marad a t&uuml;relmi id&#245; ut&aacute;n is, akkor ezt a gyenge
	korl&aacute;t er&#245;ss&eacute; v&aacute;lik &eacute;s
	semmilyen tov&aacute;bbi helyfoglal&aacute;sra nem lesz
	lehet&#245;s&eacute;ge.  Amikor a felhaszn&aacute;l&oacute;k
	&uacute;jra a gyenge korl&aacute;t al&aacute; ker&uuml;l, a
	t&uuml;relmi id&#245; is vissza&aacute;ll a
	be&aacute;ll&iacute;tott &eacute;rt&eacute;k&eacute;re.</para>

      <para>A most k&ouml;vetkez&#245; p&eacute;ld&aacute;ban az
	&man.edquota.8; parancsot mutatjuk be.  Amikor megh&iacute;vjuk
	az &man.edquota.8; parancsot, akkor elindul az
	<envar>EDITOR</envar> k&ouml;rnyezeti v&aacute;ltoz&oacute;nak
	megfelel&#245; sz&ouml;vegszerkeszt&#245;, illetve ennek
	hi&aacute;ny&aacute;ban a <application>vi</application>,
	&eacute;s lehet&#245;s&eacute;g&uuml;nk ny&iacute;lik a
	kv&oacute;ta korl&aacute;tainak
	m&oacute;dos&iacute;t&aacute;s&aacute;ra.</para>

      <screen>&prompt.root; <userinput>edquota -u <replaceable>teszt</replaceable></userinput></screen>

      <programlisting>Quotas for user <replaceable>teszt</replaceable>:
/usr: kbytes in use: 65, limits (soft = 50, hard = 75)
        inodes in use: 7, limits (soft = 50, hard = 60)
/usr/var: kbytes in use: 0, limits (soft = 50, hard = 75)
        inodes in use: 0, limits (soft = 50, hard = 60)</programlisting>

      <para>Norm&aacute;lis esetben minden kv&oacute;t&aacute;val
	rendelkez&#245; &aacute;llom&aacute;nyrendszerhez k&eacute;t
	sort kapunk.  K&ouml;z&uuml;l&uuml;k az egyik sorban szerepelnek
	a blokkok korl&aacute;tai, a m&aacute;sikban az
	&aacute;llom&aacute;nyle&iacute;r&oacute;k korl&aacute;tai.  Ha
	valamelyik&uuml;ket meg akarjuk v&aacute;ltoztatni, akkor
	egyszer&#251;en csak &aacute;t kell &iacute;rnunk az adott
	korl&aacute;t &eacute;rt&eacute;k&eacute;t.
	P&eacute;ld&aacute;ul n&ouml;velj&uuml;k meg a
	felhaszn&aacute;l&oacute;k 50-es gyenge &eacute;s 75-&ouml;s
	er&#245;s blokk korl&aacute;tj&aacute;t 500-as gyenge &eacute;s
	600-as er&#245;s korl&aacute;tra.  Ehhez szerkessz&uuml;k
	&aacute;t a</para>

      <programlisting>/usr: kbytes in use: 65, limits (soft = 50, hard = 75)</programlisting>

      <para>sort erre:</para>

      <programlisting>/usr: kbytes in use: 65, limits (soft = 500, hard = 600)</programlisting>

      <para>Az &uacute;j korl&aacute;tok akkor fognak
	&eacute;rv&eacute;nybe l&eacute;pni, miut&aacute;n
	kil&eacute;pt&uuml;nk a
	sz&ouml;vegszerkeszt&#245;b&#245;l.</para>

      <para>N&eacute;ha hasznos lehet a korl&aacute;tokat adott
	felhaszn&aacute;l&oacute;i azonos&iacute;t&oacute;khoz
	be&aacute;ll&iacute;tani.  Ezt az &man.edquota.8; parancs
	<option>-p</option> param&eacute;ter&eacute;vel tudjuk
	elv&eacute;gezni.  El&#245;sz&ouml;r is &aacute;ll&iacute;tsuk
	be egy felhaszn&aacute;l&oacute;nak a be&aacute;ll&iacute;tani
	k&iacute;v&aacute;nt korl&aacute;tokat, majd futtassuk le az
	<command>edquota -p <replaceable>teszt</replaceable>
	<replaceable>kezd&#245;uid</replaceable>-<replaceable>v&eacute;guid</replaceable></command>
	parancsot.  P&eacute;ld&aacute;ul ha a
	<username>teszt</username> nev&#251;
	felhaszn&aacute;l&oacute;nak &aacute;ll&iacute;tottuk be a
	sz&aacute;munkra megfelel&#245; korl&aacute;tokat, akkor a
	k&ouml;vetkez&#245; paranccsal lehet a r&aacute;
	vonatkoz&oacute; korl&aacute;tokat kiterjeszteni a 10&nbsp;000
	&eacute;s 19&nbsp;999 k&ouml;z&ouml;tti
	azonos&iacute;t&oacute;j&uacute;
	felhaszn&aacute;l&oacute;kra:</para>

      <screen>&prompt.root; <userinput>edquota -p <replaceable>teszt</replaceable> <replaceable>10000</replaceable>-<replaceable>19999</replaceable></userinput></screen>

      <para>Err&#245;l b&#245;vebben az &man.edquota.8; man
	oldal&aacute;n kaphatunk
	felvil&aacute;gos&iacute;t&aacute;st.</para>

    </sect2>

    <sect2>
      <title>A kv&oacute;t&aacute;k korl&aacute;tainak &eacute;s a
	lemezhaszn&aacute;lat ellen&#245;rz&eacute;se</title>

      <indexterm>
	<primary>lemezkv&oacute;t&aacute;k</primary>
	<secondary>ellen&#245;rz&eacute;se</secondary>
      </indexterm>

      <para>A kv&oacute;t&aacute;k korl&aacute;tait &eacute;s a lemez
	jelenlegi kihaszn&aacute;lts&aacute;g&aacute;t a &man.quota.1;
	vagy &man.repquota.8; parancsokkal is ellen&#245;rizhetj&uuml;k.
	A &man.quota.1; parancs seg&iacute;ts&eacute;g&eacute;vel
	ellen&#245;rizhet&#245; az egyes felhaszn&aacute;l&oacute;k vagy
	csoportok kv&oacute;t&aacute;ja &eacute;s
	lemezhaszn&aacute;lata.  A felhaszn&aacute;l&oacute;k csak a
	saj&aacute;t adataikhoz f&eacute;rhetnek hozz&aacute;, illetve
	mindazon csoportok&eacute;hoz, aminek tagjai.  Egyed&uuml;l a
	rendszeradminisztr&aacute;tor k&eacute;pes l&aacute;tni az
	&ouml;sszes felhaszn&aacute;l&oacute; &eacute;s csoport
	kv&oacute;t&aacute;j&aacute;t.  A &man.repquota.8; paranccsal
	k&eacute;rdezhet&#245; le az &ouml;sszes kv&oacute;ta &eacute;s
	lemezhaszn&aacute;lat r&ouml;vid kimutat&aacute;sa minden olyan
	&aacute;llom&aacute;nyrendszeren, ahol azok
	enged&eacute;lyezettek.</para>

      <para>A k&ouml;vetkez&#245; kimenet a <command>quota -v</command>
	parancst&oacute;l sz&aacute;rmazik, ahol a
	felhaszn&aacute;l&oacute;nak k&eacute;t
	&aacute;llom&aacute;nyrendszeren is vannak
	kv&oacute;t&aacute;i:</para>

      <programlisting>Disk quotas for user <replaceable>teszt</replaceable> (uid 1002):
     Filesystem  usage    quota   limit   grace   files   quota   limit   grace
           /usr      65*     50      75   5days       7      50      60
       /usr/var       0      50      75               0      50      60</programlisting>

      <indexterm><primary>t&uuml;relmi id&#245;</primary></indexterm>

      <para>A fenti p&eacute;ld&aacute;ban l&aacute;that&oacute;, hogy a
	felhaszn&aacute;l&oacute; a <filename>/usr</filename>
	&aacute;llom&aacute;nyrendszeren pillanatnyilag 15 kilobyte-tal
	van az 50&nbsp;kilobyte-os gyenge korl&aacute;tja felett
	&eacute;s 5 napja van h&aacute;tra a t&uuml;relmi
	id&#245;b&#245;l.  Vegy&uuml;k &eacute;szre a sz&aacute;m
	mellett lev&#245; csillagot (<literal>*</literal>), amivel a
	rendszer jelzi, hogy a felhaszn&aacute;l&oacute;
	t&uacute;ll&eacute;pte a korl&aacute;tj&aacute;t.</para>

      <para>A &man.quota.1; parancs kimenet&eacute;ben
	&aacute;ltal&aacute;ban nem jelennek meg azok az
	&aacute;llom&aacute;nyrendszerek, amelyeken a
	felhaszn&aacute;l&oacute;nak ugyan vannak kv&oacute;t&aacute;i,
	de nem foglal rajtuk lemezter&uuml;letet.  A <option>-v</option>
	be&aacute;ll&iacute;t&aacute;s megad&aacute;s&aacute;val ezek az
	&aacute;llom&aacute;nyrendszerek is
	l&aacute;that&oacute;v&aacute; v&aacute;lnak, mint ahogy azt a
	fenti p&eacute;ld&aacute;ban is megfigyelhett&uuml;k a
	<filename>/usr/var</filename> eset&eacute;ben.</para>

    </sect2>

    <sect2>
      <title>Kv&oacute;t&aacute;k NFS-en kereszt&uuml;l</title>

      <indexterm><primary>NFS</primary></indexterm>

      <para>A kv&oacute;t&aacute;k az NFS szerver
	kv&oacute;t&aacute;k&eacute;rt felel&#245;s
	alrendszer&eacute;ben is enged&eacute;lyezhet&#245;ek.  Az
	&man.rpc.rquotad.8; d&eacute;mon teszi az NFS klienseken
	futtatott &man.quota.1; parancsok sz&aacute;m&aacute;ra
	el&eacute;rhet&#245;v&eacute; a kv&oacute;t&aacute;kkal
	kapcsolatos inform&aacute;ci&oacute;kat, aminek
	k&ouml;sz&ouml;nhet&#245;en a felhaszn&aacute;l&oacute;k
	t&aacute;volr&oacute;l is k&eacute;pesek lek&eacute;rdezni a
	kv&oacute;t&aacute;ikat.</para>

      <para>Az <command>rpc.rquotad</command>
	aktivil&aacute;s&aacute;hoz a k&ouml;vetkez&#245;t kell
	be&aacute;ll&iacute;tani az <filename>/etc/inetd.conf</filename>
	&aacute;llom&aacute;nyban:</para>

      <programlisting>rquotad/1      dgram rpc/udp wait root /usr/libexec/rpc.rquotad rpc.rquotad</programlisting>

      <para>Majd ne felejts&uuml;k el &uacute;jraind&iacute;tani az
	<command>inetd</command> d&eacute;mont sem:</para>

      <screen>&prompt.root; <userinput>/etc/rc.d/inetd restart</userinput></screen>

    </sect2>
  </sect1>


  <sect1 id="disks-encrypting">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Lucky</firstname>
	  <surname>Green</surname>
	  <contrib>&Iacute;rta: </contrib>
	  <affiliation>
	    <address><email>shamrock@cypherpunks.to</email></address>
	  </affiliation>
	</author>
      </authorgroup>
    </sect1info>

    <title>A lemezpart&iacute;ci&oacute;k
      titkos&iacute;t&aacute;sa</title>

    <indexterm>
      <primary>lemezek</primary>
      <secondary>titkos&iacute;t&aacute;sa</secondary>
    </indexterm>

    <para>A &os; kit&#251;n&#245; fut&aacute;sk&ouml;zbeni
      v&eacute;delmet aj&aacute;nl fel az adatok illet&eacute;ktelen
      hozz&aacute;f&eacute;r&eacute;se ellen.  Az
      &aacute;llom&aacute;nyok enged&eacute;lyei &eacute;s a
      k&ouml;telez&#245;
      hozz&aacute;f&eacute;r&eacute;s-vez&eacute;rl&eacute;s (Mandatory
      Access Control, MAC, l&aacute;sd <xref linkend="mac">)
      seg&iacute;tenek megv&eacute;deni &eacute;rz&eacute;keny
      adatainkat az ill&eacute;ktelenek ellen az oper&aacute;ci&oacute;s
      rendszer fut&aacute;sa &eacute;s a
      sz&aacute;m&iacute;t&oacute;g&eacute;p m&#251;k&ouml;d&eacute;se
      sor&aacute;n.  Azonban az oper&aacute;ci&oacute;s rendszerben
      kezelt enged&eacute;lyek teljesen hat&aacute;stalanok abban az
      esetben, ha a t&aacute;mad&oacute; fizikailag is k&eacute;pes
      hozz&aacute;f&eacute;rni a
      sz&aacute;m&iacute;t&oacute;g&eacute;p&uuml;nkh&ouml;z,
      elt&aacute;vol&iacute;tani a merevlemezt &eacute;s egy
      m&aacute;sik oper&aacute;ci&oacute;s rendszer
      seg&iacute;ts&eacute;g&eacute;vel kielemezni a rajta
      tal&aacute;lhat&oacute; fontos adatainkat.</para>

    <para>F&uuml;ggetlen&uuml;l att&oacute;l, hogy a
      t&aacute;mad&oacute; val&oacute;j&aacute;ban mik&eacute;nt is
      f&eacute;rk&#245;z&ouml;tt hozz&aacute; a
      merevlemez&uuml;nkh&ouml;z, vagy mik&eacute;nt kapcsolta le a
      sz&aacute;m&iacute;t&oacute;g&eacute;p&uuml;nket, a &os;
      megtal&aacute;lhat&oacute; <application>GEOM alap&uacute;
      lemeztitkos&iacute;t&aacute;s (gbde)</application> &eacute;s a
      <command>geli</command> titkos&iacute;t&aacute;si alrendszer
      egyar&aacute;nt k&eacute;pes v&eacute;delmet ny&uacute;jtani a
      sz&aacute;m&iacute;t&oacute;g&eacute;pen tal&aacute;lhat&oacute;
      &aacute;llom&aacute;nyrendszerek sz&aacute;m&aacute;ra az
      &eacute;rt&eacute;kes adatok ut&aacute;n kutat&oacute; igen
      motiv&aacute;lt bet&ouml;r&#245;k ellen.  A csup&aacute;n egyes
      &aacute;llom&aacute;nyokra kiterjed&#245; k&ouml;rm&ouml;nfont
      titkos&iacute;t&aacute;si m&oacute;dszerekkel szemben a
      <command>gbde</command> &eacute;s a <command>geli</command> az
      eg&eacute;sz &aacute;llom&aacute;nyrendszert
      &eacute;szrev&eacute;tlen m&oacute;don titkos&iacute;tja.
      Titkos&iacute;tatlan adat nem is ker&uuml;l a merevlemezre.</para>

    <sect2>
      <title>A lemez titkos&iacute;t&aacute;sa a
	<application>gbde</application>
	haszn&aacute;lat&aacute;val</title>

      <procedure>
	<step>
	  <title>V&aacute;ljunk <username>root</username>
	    felhaszn&aacute;l&oacute;v&aacute;</title>

	  <para>A <application>gbde</application>
	    be&aacute;ll&iacute;t&aacute;s&aacute;hoz
	    rendszeradminisztr&aacute;tori jogosults&aacute;gokra lesz
	    sz&uuml;ks&eacute;g&uuml;nk.</para>

	  <screen>&prompt.user; <userinput>su -</userinput>
Password:</screen>
	</step>

	<step>
	  <title>Adjuk hozz&aacute; a &man.gbde.4;
	    t&aacute;mogat&aacute;s&aacute;t a rendszermag
	    konfigur&aacute;ci&oacute;s
	    &aacute;llom&aacute;ny&aacute;hoz</title>

	  <para>Tegy&uuml;k a k&ouml;vetkez&#245; sort a rendszermag
	    be&aacute;ll&iacute;t&aacute;sait tartalmaz&oacute;
	    &aacute;llom&aacute;nyba:</para>

	  <para><literal>options GEOM_BDE</literal></para>

	  <para>Ford&iacute;tsuk &uacute;jra a rendszermagot a <xref
	    linkend="kernelconfig">ben le&iacute;rtak szerint.</para>

	  <para>Ind&iacute;tsuk el a
	    sz&aacute;m&iacute;t&oacute;g&eacute;pet az &uacute;j
	    rendszermaggal.</para>
	</step>

	<step>
	  <para>A rendszermag &uacute;jraford&iacute;t&aacute;sa helyett
	    a <command>kldload</command> paranccsal is
	    bet&ouml;lthetj&uuml;k a &man.gbde.4;
	    modulj&aacute;t:</para>

	  <screen>&prompt.root; <userinput>kldload geom_bde</userinput></screen>
	</step>
      </procedure>

    <sect3>
      <title>A titkos&iacute;tott merevlemez
	el&#245;k&eacute;sz&iacute;t&eacute;se</title>

      <para>A k&ouml;vetkez&#245; p&eacute;lda azt felt&eacute;telezi,
	hogy a rendszer&uuml;nkh&ouml;z egy &uacute;j merevlemezt adunk
	hozz&aacute;, amin egyetlen titkos&iacute;tott
	part&iacute;ci&oacute; foglal helyet.  Ezt a
	part&iacute;ci&oacute;t a <filename>/private</filename>
	k&ouml;nyvt&aacute;rba fogjuk csatlakoztatni.  A
	<application>gbde</application> haszn&aacute;lhat&oacute; a
	<filename>/home</filename> &eacute;s a
	<filename>/var/mail</filename>
	titkos&iacute;t&aacute;s&aacute;ra is, de ennek
	megval&oacute;s&iacute;t&aacute;sa olyan bonyolult
	utas&iacute;t&aacute;sokat ig&eacute;nyel, amelyek
	meghaladj&aacute;k ennek a bevezet&eacute;snek a
	kereteit.</para>

      <procedure>
	<step>
	  <title>Az &uacute;j merevlemez
	    hozz&aacute;ad&aacute;sa</title>

	  <para>A <xref linkend="disks-adding">ban bemutatottak szerint
	    adjuk hozz&aacute; a rendszer&uuml;nkh&ouml;z az &uacute;j
	    merevlemezt.  A p&eacute;ld&aacute;ban az &uacute;j lemez
	    part&iacute;ci&oacute;j&aacute;t a
	    <devicename>/dev/ad4s1c</devicename> n&eacute;ven fogjuk
	    tudni el&eacute;rni.  A
	    <devicename>/dev/ad0s1<replaceable>*</replaceable></devicename>
	    eszk&ouml;z&ouml;k a p&eacute;ld&aacute;ban szerepl&#245;
	    &os; rendszer szabv&aacute;nyos part&iacute;ci&oacute;it
	    jel&ouml;lik.</para>

	  <screen>&prompt.root; <userinput>ls /dev/ad*</userinput>
/dev/ad0        /dev/ad0s1b     /dev/ad0s1e     /dev/ad4s1
/dev/ad0s1      /dev/ad0s1c     /dev/ad0s1f     /dev/ad4s1c
/dev/ad0s1a     /dev/ad0s1d     /dev/ad4</screen>
	</step>

	<step>
	  <title>Hozzunk l&eacute;tre egy k&ouml;nyvt&aacute;rat a gbde
	    z&aacute;rol&aacute;sainak
	    t&aacute;rol&aacute;s&aacute;hoz</title>

	  <screen>&prompt.root; <userinput>mkdir /etc/gbde</userinput></screen>

	  <para>A <application>gbde</application>nek az&eacute;rt van
	    sz&uuml;ks&eacute;ge a z&aacute;rol&aacute;sokat
	    r&ouml;gz&iacute;t&#245; &aacute;llom&aacute;nyokra, hogy
	    hozz&aacute; tudjon f&eacute;rni a titkos&iacute;tott
	    part&iacute;ci&oacute;khoz.  Amennyiben ezt nem tudja
	    megtenni, a <application>gbde</application>
	    an&eacute;lk&uuml;l nem lesz k&eacute;pes visszafejteni a
	    titkos&iacute;tott part&iacute;ci&oacute;kon t&aacute;rolt
	    adatokat, hogy az ezeket el&eacute;rni akar&oacute;
	    szoftvereknek ne kelljen jelent&#245;sebb
	    m&eacute;rt&eacute;kben manu&aacute;lisan beavatkoznia.
	    Mindegyik titkos&iacute;tott part&iacute;ci&oacute;
	    k&uuml;l&ouml;n z&aacute;rol&oacute; &aacute;llom&aacute;nyt
	    haszn&aacute;l.</para>
	</step>

	<step>
	  <title>A gbde part&iacute;ci&oacute;
	    inicializ&aacute;l&aacute;sa</title>

	  <para>A <application>gbde</application> &aacute;ltal
	    haszn&aacute;lt part&iacute;ci&oacute;kat haszn&aacute;latuk
	    el&#245;tt inicializ&aacute;lni kell.  Ezt a m&#251;veletet
	    azonban csak egyszer kell elv&eacute;gezni:</para>

	  <screen>&prompt.root; <userinput>gbde init /dev/ad4s1c -i -L /etc/gbde/ad4s1c.lock</userinput></screen>

	  <para>A &man.gbde.8; ekkor elind&iacute;t egy
	    sz&ouml;vegszerkeszt&#245;t &eacute;s benne egy sablon
	    seg&iacute;ts&eacute;g&eacute;vel be tudjuk
	    &aacute;ll&iacute;tani a k&uuml;l&ouml;nb&ouml;z&#245;
	    konfigur&aacute;ci&oacute;s &eacute;rt&eacute;keket.  Az
	    UFS1 vagy UFS2 haszn&aacute;lata eset&eacute;n
	    &aacute;ll&iacute;tsuk a szektorm&eacute;retet
	    2048-ra:</para>

	  <programlisting>$<!-- anti-pre-commit-check -->FreeBSD: src/sbin/gbde/template.txt,v 1.1 2002/10/20 11:16:13 phk Exp $
#
# Sector size is the smallest unit of data which can be read or written.
# Making it too small decreases performance and decreases available space.
# Making it too large may prevent filesystems from working.  512 is the
# minimum and always safe.  For UFS, use the fragment size
#
sector_size     =       2048
[...]
</programlisting>

	  <para>A megjegyz&eacute;s ford&iacute;t&aacute;sa:</para>

	  <programlisting>A szektorm&eacute;ret az adatok &iacute;r&aacute;s&aacute;nak &eacute;s olvas&aacute;s&aacute;nak legkisebb egys&eacute;ge.  Ha
t&uacute;ls&aacute;gosan kicsire v&aacute;lasztjuk meg, akkor cs&ouml;kken a teljes&iacute;tm&eacute;ny &eacute;s cs&ouml;kken a
rendelkez&eacute;sre &aacute;ll&oacute; hely.  Ha viszont t&uacute;ls&aacute;gosan nagyra hagyjuk, akkor azzal
akad&aacute;lyozzuk az &aacute;llom&aacute;nyrendszerek munk&aacute;j&aacute;t.  512 a legkisebb &eacute;rt&eacute;k, amely mindig
megb&iacute;zhat&oacute;.  Az UFS eset&eacute;n haszn&aacute;ljuk a fragmensek m&eacute;ret&eacute;t.</programlisting>

	  <para>A &man.gbde.8; k&eacute;tszer is r&aacute; fog
	    k&eacute;rdeni az adatok titkos&iacute;t&aacute;s&aacute;ra
	    haszn&aacute;lt jelmondatra.  A jelmondatnak
	    term&eacute;szetesen mind a k&eacute;tszer ugyanannak kell
	    lennie.  A <application>gbde</application>
	    v&eacute;delm&eacute;nek hat&eacute;konys&aacute;ga teljesen
	    m&eacute;rt&eacute;kben az &aacute;ltalunk v&aacute;lasztott
	    jelmondat min&#245;s&eacute;g&eacute;t&#245;l f&uuml;gg
	    <footnote>
	      <para>A k&ouml;nnyen megjegyezhet&#245; &aacute;m
		m&eacute;gis biztons&aacute;gos jelmondatok
		megv&aacute;laszt&aacute;s&aacute;hoz a <ulink
		url="http://world.std.com/~reinhold/diceware.html">Diceware
		Passphrase</ulink> honlapj&aacute;n tal&aacute;lunk egy
		kis seg&iacute;ts&eacute;get
		(angolul).</para>
	    </footnote>.</para>

	  <para>A <command>gbde init</command> parancs l&eacute;trehoz
	    egy z&aacute;rol&oacute; &aacute;llom&aacute;nyt a
	    <application>gbde</application> part&iacute;ci&oacute;hoz,
	    amely ebben a p&eacute;ld&aacute;ban az
	    <filename>/etc/gbde/ad4s1c.lock</filename> n&eacute;ven
	    keletkezett.  A <application>gbde</application>
	    z&aacute;rol&oacute; &aacute;llom&aacute;nyainak
	    <quote>.lock</quote> n&eacute;vre kell
	    v&eacute;gz&#245;dni&uuml;k, mivel az
	    <filename>/etc/rc.d/gbde</filename>
	    ind&iacute;t&oacute;szkript csak ebben az esetben
	    &eacute;szleli rendesen.</para>

	  <caution>
	    <para>A <application>gbde</application> z&aacute;rol&oacute;
	      &aacute;llom&aacute;nyait a titkos&iacute;tott
	      part&iacute;ci&oacute;k tartalm&aacute;val egy&uuml;tt
	      <emphasis>kell</emphasis> lementeni.  Mik&ouml;zben a
	      z&aacute;rol&oacute; &aacute;llom&aacute;ny
	      t&ouml;rl&eacute;se nem tudja megakad&aacute;lyozni, hogy
	      az elsz&aacute;nt t&aacute;mad&oacute; visszafejtse a
	      <application>gbde</application> &aacute;ltal
	      titkos&iacute;tott part&iacute;ci&oacute;t, addig a
	      z&aacute;rol&oacute; &aacute;llom&aacute;ny
	      n&eacute;lk&uuml;l a jogos tulajdonos &oacute;r&aacute;si
	      mennyis&eacute;g&#251; munka befektet&eacute;se
	      n&eacute;lk&uuml;l k&eacute;ptelen lesz
	      hozz&aacute;f&eacute;rni a rajta lev&#245; adatokhoz.  Ez
	      ut&oacute;bbit&oacute;l egy&eacute;bk&eacute;nt a
	      &man.gbde.8; &eacute;s a rendszer tervez&#245;je is
	      tot&aacute;lisan elhat&aacute;rolja mag&aacute;t.</para>
	  </caution>
	</step>

	<step>
	  <title>A titkos&iacute;tott part&iacute;ci&oacute;
	    illeszt&eacute;se a rendszermaghoz</title>

	  <screen>&prompt.root; <userinput>gbde attach /dev/ad4s1c -l /etc/gbde/ad4s1c.lock</userinput></screen>

	  <para>Ekkor a titkos&iacute;tott part&iacute;ci&oacute;
	    illeszt&eacute;s&eacute;hez a rendszer k&eacute;rni fogja az
	    inicializ&aacute;l&aacute;s sor&aacute;n v&aacute;lasztott
	    jelmondatot.  Ezut&aacute;n az &uacute;j titkos&iacute;tott
	    eszk&ouml;z megjelenik a <filename>/dev</filename>
	    k&ouml;nyvt&aacute;rban
	    <devicename>/dev/<replaceable>eszk&ouml;zn&eacute;v</replaceable>.bde</devicename>
	    n&eacute;ven:</para>

	  <screen>&prompt.root; <userinput>ls /dev/ad*</userinput>
/dev/ad0        /dev/ad0s1b     /dev/ad0s1e     /dev/ad4s1
/dev/ad0s1      /dev/ad0s1c     /dev/ad0s1f     /dev/ad4s1c
/dev/ad0s1a     /dev/ad0s1d     /dev/ad4        /dev/ad4s1c.bde</screen>
	</step>

	<step>
	  <title>&Aacute;llom&aacute;nyrendszer
	    kialak&iacute;t&aacute;sa egy titkos&iacute;tott
	    eszk&ouml;z&ouml;n</title>

	  <para>Ahogy siker&uuml;lt a titkos&iacute;tott eszk&ouml;zt
	    illeszteni a rendszermaghoz, l&eacute;tre is tudunk hozni
	    egy &aacute;llom&aacute;nyrendszert rajta.  Erre a
	    c&eacute;lra a &man.newfs.8; remek&uuml;l
	    haszn&aacute;lhat&oacute;.  Mivel egy &uacute;j UFS2
	    &aacute;llom&aacute;nyrendszerek
	    inicializ&aacute;l&aacute;sa sokkal gyorsabb a r&eacute;gi
	    UFS1 &aacute;llom&aacute;nyrendszerek
	    inicializ&aacute;l&aacute;s&aacute;n&aacute;l, ez&eacute;rt
	    a &man.newfs.8; haszn&aacute;lata eset&eacute;n az
	    <option>-O2</option> be&aacute;ll&iacute;t&aacute;s
	    megad&aacute;sa aj&aacute;nlott.</para>

	  <screen>&prompt.root; <userinput>newfs -U -O2 /dev/ad4s1c.bde</userinput></screen>

	  <note>
	    <para>A &man.newfs.8; parancsot egy illesztett
	      <application>gbde</application> part&iacute;ci&oacute;n
	      kell v&eacute;grehajtani, amit onnan ismerhet&uuml;nk meg,
	      hogy az eszk&ouml;z nev&eacute;ben szerepel a
	      <devicename><replaceable>*</replaceable>.bde</devicename>
	      kiterjeszt&eacute;s.</para>
	  </note>
	</step>

	<step>
	  <title>A titkos&iacute;tott part&iacute;ci&oacute;
	    csatlakoztat&aacute;sa</title>

	  <para>Hozzunk l&eacute;tre egy csatlakoz&aacute;si pontot a
	    titkos&iacute;tott &aacute;llom&aacute;nyrendszer
	    sz&aacute;m&aacute;ra.</para>

	  <screen>&prompt.root; <userinput>mkdir <replaceable>/priv&aacute;t</replaceable></userinput></screen>

	  <para>Csatlakoztassuk a titkos&iacute;tott
	    &aacute;llom&aacute;nyrendszert.</para>

	  <screen>&prompt.root; <userinput>mount /dev/ad4s1c.bde <replaceable>/priv&aacute;t</replaceable></userinput></screen>
	</step>

	<step>
	  <title>Ellen&#245;rizz&uuml;k a titkos&iacute;tott
	    &aacute;llom&aacute;nyrendszer
	    m&#251;k&ouml;d&#245;k&eacute;pess&eacute;g&eacute;t</title>

	  <para>A titkos&iacute;tott &aacute;llom&aacute;nyrendszert
	    most m&aacute;r l&aacute;tja a &man.df.1; program &eacute;s
	    k&eacute;szen &aacute;ll a haszn&aacute;latra.</para>

	  <screen>&prompt.user; <userinput>df -H</userinput>
Filesystem        Size   Used  Avail Capacity  Mounted on
/dev/ad0s1a      1037M    72M   883M     8%    /
/devfs            1.0K   1.0K     0B   100%    /dev
/dev/ad0s1f       8.1G    55K   7.5G     0%    /home
/dev/ad0s1e      1037M   1.1M   953M     0%    /tmp
/dev/ad0s1d       6.1G   1.9G   3.7G    35%    /usr
/dev/ad4s1c.bde   150G   4.1K   138G     0%    /private</screen>
	</step>
      </procedure>

    </sect3>

    <sect3>
      <title>L&eacute;tez&#245; titkos&iacute;tott
	&aacute;llom&aacute;nyrendszerek csatlakoztat&aacute;sa</title>

      <para>A rendszer minden egyes ind&iacute;t&aacute;sa ut&aacute;n
	az &ouml;sszes titkos&iacute;tott
	&aacute;llom&aacute;nyrendszert t&eacute;nyleges
	haszn&aacute;lata el&#245;tt &uacute;jra illeszteni kell a
	rendszermaghoz, ellen&#245;rizni az &eacute;ps&eacute;g&eacute;t
	&eacute;s csatlakoztatni.  Az ehhez sz&uuml;ks&eacute;ges
	parancsokat <username>root</username>
	felhaszn&aacute;l&oacute;k&eacute;nt kell kiadni.</para>

      <procedure>
	<step>
	  <title>A gbde part&iacute;ci&oacute; illeszt&eacute;se a
	    rendszermaghoz</title>

	  <screen>&prompt.root; <userinput>gbde attach /dev/ad4s1c -l /etc/gbde/ad4s1c.lock</userinput></screen>

	  <para>A <application>gbde</application> part&iacute;ci&oacute;
	    inicializ&aacute;l&aacute;sa sor&aacute;n megadott
	    jelmondatot kell megadnunk a m&#251;velet
	    elv&eacute;gz&eacute;s&eacute;hez.</para>
	</step>

	<step>
	  <title>Az &aacute;llom&aacute;nyrendszer
	    &eacute;ps&eacute;g&eacute;nek
	    ellen&#245;rz&eacute;se</title>

	  <para>Mivel a titkos&iacute;tott
	    &aacute;llom&aacute;nyrendszerek az automatikus
	    csatlakoztat&aacute;shoz m&eacute;g nem
	    szerepeltethet&#245;ek az <filename>/etc/fstab</filename>
	    &aacute;llom&aacute;nyban, ez&eacute;rt az ilyen
	    &aacute;llom&aacute;nyrendszereket csatlakoztat&aacute;suk
	    el&#245;tt manu&aacute;lisan ellen&#245;riztetni kell a
	    &man.fsck.8; lefuttat&aacute;s&aacute;val.</para>

	  <screen>&prompt.root; <userinput>fsck -p -t ffs /dev/ad4s1c.bde</userinput></screen>
	</step>

	<step>
	  <title>A titkos&iacute;tott &aacute;llom&aacute;nyrendszer
	    csatlakoztat&aacute;sa</title>

	  <screen>&prompt.root; <userinput>mount /dev/ad4s1c.bde <replaceable>/priv&aacute;t</replaceable></userinput></screen>

	  <para>A titkos&iacute;tott &aacute;llom&aacute;nyrendszer most
	    m&aacute;r k&eacute;szen &aacute;ll a
	    haszn&aacute;latra.</para>
	</step>
      </procedure>

	<sect4>
	  <title>A titkos&iacute;tott part&iacute;ci&oacute;k
	    &ouml;n&aacute;ll&oacute; csatlakoztat&aacute;sa</title>

	  <para>Lehet &iacute;rni olyan szkriptet, amely a
	    titkos&iacute;tott part&iacute;ci&oacute;kat
	    mag&aacute;t&oacute;l illeszti, ellen&#245;rzi &eacute;s
	    csatlakoztatja, de biztons&aacute;gi
	    megfontol&aacute;sokb&oacute;l semmi esetben sem szabad
	    tartalmaznia a &man.gbde.8; jelszav&aacute;t.  Ehelyett azt
	    javasoljuk, hogy az ilyen szkripteknek k&uuml;l&ouml;n meg
	    kelljen adni a jelsz&oacute;t konzolon vagy az &man.ssh.1;
	    haszn&aacute;lat&aacute;n kereszt&uuml;l.</para>

	  <para>De haszn&aacute;lhatjuk a mell&eacute;kelt
	    <filename>rc.d</filename> szkriptet is.  A szkript
	    param&eacute;tereit az &man.rc.conf.5;
	    &aacute;llom&aacute;nyon kereszt&uuml;l adhatjuk meg,
	    p&eacute;ld&aacute;ul:</para>

	  <programlisting>gbde_autoattach_all="YES"
gbde_devices="ad4s1c"
gbde_lockdir="/etc/gbde"</programlisting>

	  <para>Ilyenkor a <application>gbde</application> &aacute;ltal
	    haszn&aacute;lt jelmondatot a rendszer
	    ind&iacute;t&aacute;sakor kell megadni.  Miut&aacute;n
	    beg&eacute;pelt&uuml;k a megfelel&#245; jelmondatot, a
	    titkos&iacute;tott <application>gbde</application>
	    part&iacute;ci&oacute; mag&aacute;t&oacute;l
	    csatlakoztat&aacute;sra ker&uuml;l.  Ez akkor lehet hasznos,
	    ha a <application>gbde</application>
	    megold&aacute;s&aacute;t hordozhat&oacute;
	    sz&aacute;m&iacute;t&oacute;g&eacute;peken
	    alkalmazzuk.</para>

	</sect4>
      </sect3>

      <sect3>
	<title>A gbde &aacute;ltal alkalmazott titkos&iacute;t&aacute;si
	  m&oacute;dszerek</title>

	<para>A &man.gbde.8; a szektorok tartalm&aacute;t 128&nbsp;bites
	  AES haszn&aacute;lat&aacute;val CBC m&oacute;dban
	  titkos&iacute;tja.  A lemezen tal&aacute;lhat&oacute; minden
	  egyes szektort elt&eacute;r&#245; AES kulccsal k&oacute;dolja.
	  A <application>gbde</application> kriptogr&aacute;fiai
	  fel&eacute;p&iacute;t&eacute;s&eacute;t, valamint mindazt,
	  hogy az egyes szektorok kulcsai mik&eacute;nt
	  sz&aacute;rmaztathat&oacute;ak a felhaszn&aacute;l&oacute;
	  &aacute;ltal megadott jelmondatb&oacute;l, a &man.gbde.4; man
	  oldal&aacute;n olvashatjuk.</para>

      </sect3>

      <sect3>
	<title>Kompatibilit&aacute;si probl&eacute;m&aacute;k</title>

	<para>A &man.sysinstall.8; nem kompatibilis a
	  <application>gbde</application> &aacute;ltal
	  titkos&iacute;tott eszk&ouml;z&ouml;kkel.  A
	  &man.sysinstall.8; ind&iacute;t&aacute;sa el&#245;tt minden
	  <devicename><replaceable>*</replaceable>.bde</devicename>
	  eszk&ouml;zt ki kell iktatni a rendszermagb&oacute;l,
	  k&uuml;l&ouml;nben az eszk&ouml;z&ouml;k keres&eacute;se
	  sor&aacute;n &ouml;ssze fog omlani.  A
	  p&eacute;ld&aacute;nkban haszn&aacute;lt titkos&iacute;tott
	  eszk&ouml;zt a k&ouml;vetkez&#245; paranccsal kell
	  lekapcsolni:</para>

	<screen>&prompt.root; <userinput>gbde detach /dev/ad4s1c</userinput></screen>

	<para>Tov&aacute;bb&aacute; megjegyezz&uuml;k azt is, hogy a
	  &man.vinum.4; nem haszn&aacute;lja a &man.geom.4; alrendszert,
	  ez&eacute;rt a <application>gbde</application>
	  alkalmaz&aacute;sa sor&aacute;n nem haszn&aacute;lhatunk
	  <application>Vinum</application>-k&ouml;teteket.</para>

      </sect3>
    </sect2>

    <sect2>
      <sect2info>
	<authorgroup>
	  <author>
	    <firstname>Daniel</firstname>
	    <surname>Gerzo</surname>
	    <contrib>&Iacute;rta: </contrib>
	  </author>
	</authorgroup>
      </sect2info>

      <title>A lemezek titkos&iacute;t&aacute;sa a
	<command>geli</command> haszn&aacute;lat&aacute;val</title>

      <para>A &os; 6.0&nbsp;v&aacute;ltozat&aacute;t&oacute;l kezdve egy
	&uacute;j kriptogr&aacute;fiai GEOM oszt&aacute;ly is a
	rendelkez&eacute;s&uuml;nkre &aacute;ll, melyet pillanatnyilag
	&a.pjd; fejleszt.  A <command>geli</command> seg&eacute;dprogram
	n&eacute;mileg k&uuml;l&ouml;nb&ouml;z&#245; a
	<command>gbde</command> megold&aacute;s&aacute;t&oacute;l
	&mdash; m&aacute;s lehet&#245;s&eacute;geket k&iacute;n&aacute;l
	fel &eacute;s a titkos&iacute;t&aacute;st is egy
	elt&eacute;r&#245; s&eacute;ma ment&eacute;n
	val&oacute;s&iacute;tja meg.</para>

      <para>A &man.geli.8; legfontosabb jellemz&#245;i a
	k&ouml;vetkez&#245;k:</para>

      <itemizedlist>
	<listitem>
	  <para>A &man.crypto.9; keretrendszer&eacute;t haszn&aacute;lja
	    &mdash; teh&aacute;t ha rendelkez&uuml;nk
	    kriptogr&aacute;fiai hardverrel, akkor a
	    <command>geli</command> automatikusan haszn&aacute;lni
	    fogja.</para>
	</listitem>
	<listitem>
	  <para>T&ouml;bb kriptogr&aacute;fiai algoritmust is ismer
	    (melyek jelenleg az AES, Blowfish &eacute;s a 3DES).</para>
	</listitem>
	<listitem>
	  <para>Seg&iacute;ts&eacute;g&eacute;vel a
	    rendszerind&iacute;t&aacute;shoz haszn&aacute;lt
	    (gy&ouml;k&eacute;r) part&iacute;ci&oacute; is
	    titkos&iacute;that&oacute;.  Ilyenkor a
	    sz&uuml;ks&eacute;ges jelmondatot a rendszer
	    ind&iacute;t&aacute;sakor kell megadni.</para>
	</listitem>
	<listitem>
	  <para>K&eacute;t f&uuml;ggetlen kulcsot (p&eacute;ld&aacute;ul
	    egy <quote>kulcsot</quote> &eacute;s egy <quote>c&eacute;ges
	    kulcsot</quote>) is haszn&aacute;lhatunk vele.</para>
	</listitem>
	<listitem>
	  <para>A <command>geli</command> gyors &mdash; egyszer&#251;en
	    csak szektorr&oacute;l szektorra titkos&iacute;t.</para>
	</listitem>
	<listitem>
	  <para>Lehet&#245;v&eacute; teszi a mesterkulcsok
	    ment&eacute;s&eacute;t is
	    vissza&aacute;ll&iacute;t&aacute;s&aacute;t.  Ha a
	    felhaszn&aacute;l&oacute; v&eacute;letlen&uuml;l
	    megsemmis&iacute;ten&eacute; a kulcs&aacute;t, akkor a
	    biztons&aacute;gi ment&eacute;sb&#245;l
	    helyre&aacute;ll&iacute;tott kulcsok
	    seg&iacute;ts&eacute;g&eacute;vel vissza tudjuk szerezni az
	    adatainkat is.</para>
	</listitem>
	<listitem>
	  <para>Seg&iacute;ts&eacute;g&eacute;vel a lemezeket
	    v&eacute;letlenszer&#251;, egyszeri jelszavakkal is
	    illeszthetj&uuml;k &mdash; ez k&uuml;l&ouml;n&ouml;sen
	    fontos lapoz&oacute;ter&uuml;letek &eacute;s ideiglenes
	    &aacute;llom&aacute;nyrendszerek eset&eacute;ben.</para>
	</listitem>
      </itemizedlist>

      <para>A <command>geli</command> &aacute;ltal
	felk&iacute;n&aacute;lt lehet&#245;s&eacute;gekr&#245;l a
	&man.geli.8; man oldal&aacute;n tal&aacute;lhatunk
	t&ouml;bbet.</para>

      <para>A k&ouml;vetkez&#245; l&eacute;p&eacute;sek
	bemutatj&aacute;k, hogyan lehet a &os; rendszermagj&aacute;ban
	enged&eacute;lyezni a <command>geli</command>
	t&aacute;mogat&aacute;s&aacute;t, &eacute;s hogyan lehet
	l&eacute;trehozni &eacute;s haszn&aacute;lni egy
	<command>geli</command> titkos&iacute;t&aacute;ssal
	rendelkez&#245; adathordoz&oacute;t.</para>

      <para>A <command>geli</command> alkalmaz&aacute;s&aacute;hoz
	legal&aacute;bb a &os; 6.0-RELEASE vagy k&eacute;s&#245;bbi
	v&aacute;ltozat&aacute;ra van sz&uuml;ks&eacute;g&uuml;nk.
	Mivel a rendszermagot is m&oacute;dos&iacute;tanunk kell,
	ez&eacute;rt rendszeradminisztr&aacute;tori jogosults&aacute;gok
	kellenek a m&#251;veletek
	elv&eacute;gz&eacute;s&eacute;hez.</para>

      <procedure>
	<step>
	  <title>A <command>geli</command>
	    t&aacute;mogat&aacute;s&aacute;nak hozz&aacute;ad&aacute;sa
	    a rendszermaghoz</title>

	  <para>Vegy&uuml;k hozz&aacute; a k&ouml;vetkez&#245; sorokat a
	    rendszermag be&aacute;ll&iacute;t&aacute;sait
	    tartalmaz&oacute; &aacute;llom&aacute;nyhoz:</para>

	  <programlisting>options GEOM_ELI
device crypto</programlisting>

	  <para>Ford&iacute;tsuk &uacute;jra a rendszermagot a <xref
	    linkend="kernelconfig">ben le&iacute;rtak szerint.</para>

	  <para>Bet&ouml;lthetj&uuml;k a <command>geli</command>
	    modulj&aacute;t is a rendszer ind&iacute;t&aacute;sakor.
	    Ehhez a k&ouml;vetkez&#245; sort kell betenni a
	    <filename>/boot/loader.conf</filename>
	    &aacute;llom&aacute;nyba:</para>

	  <programlisting>geom_eli_load="YES"</programlisting>

	  <para>A &man.geli.8; most m&aacute;r haszn&aacute;lhat&oacute;
	    a rendszermagban.</para>
	</step>

	<step>
	  <title>A mesterkulcs legener&aacute;l&aacute;sa</title>

	  <para>A most k&ouml;vetkez&#245; p&eacute;ld&aacute;ban egy
	    kulcsot tartalmaz&oacute; &aacute;llom&aacute;ny
	    l&eacute;trehoz&aacute;s&aacute;t illusztr&aacute;ljuk, amit
	    a <filename
	      class="directory"><replaceable>/priv&aacute;t</replaceable></filename>
	    k&ouml;nyvt&aacute;rba csatlakoztatott titkos&iacute;tott
	    adathordoz&oacute; mesterkulcs&aacute;hoz fogunk
	    haszn&aacute;lni.  A kulcs &aacute;llom&aacute;ny a
	    mesterkulcs titkos&iacute;t&aacute;s&aacute;hoz
	    felhaszn&aacute;lt v&eacute;letlenszer&#251; adatot fogja
	    tartalmazni, valamint rajta k&iacute;v&uuml;l m&eacute;g a
	    mesterkulcsot egy jelmondattal is v&eacute;dj&uuml;k.  Az
	    adathordoz&oacute; szektorm&eacute;rete 4&nbsp;kilobyte-os
	    lesz.  Emellett m&eacute;g bemutatjuk, hogyan kell
	    illeszteni egy <command>geli</command>-adathordoz&oacute;t,
	    &aacute;llom&aacute;nyrendszert l&eacute;trehozni rajta,
	    csatlakoztatni, dolgozni vele &eacute;s lekapcsolni.</para>

	  <para>A nagyobb teljes&iacute;tm&eacute;ny
	    &eacute;rdek&eacute;ben javasolt nagyobb
	    szektorm&eacute;retet v&aacute;lasztani (mint
	    p&eacute;ld&aacute;ul 4&nbsp;kilobyte).</para>

	  <para>A mesterkulcsot egy jelmondattal fogjuk v&eacute;deni
	    &eacute;s a kulcsok k&eacute;sz&iacute;t&eacute;s&eacute;hez
	    haszn&aacute;lt adatforr&aacute;s a
	    <filename>/dev/random</filename> lesz.  A
	    <filename>/dev/da2.eli</filename>, amelyet mit csak
	    adathordoz&oacute;nak fogunk csak h&iacute;vni, szektorainak
	    m&eacute;rete 4&nbsp;kilobyte lesz.</para>

	  <screen>&prompt.root; <userinput>dd if=/dev/random of=/root/da2.key bs=64 count=1</userinput>
&prompt.root; <userinput>geli init -s 4096 -K /root/da2.key /dev/da2</userinput>
Enter new passphrase:
Reenter new passphrase:</screen>

	  <para>Nem k&ouml;telez&#245; egyszerre haszn&aacute;lni a
	    jelmondatot &eacute;s a kulcs &aacute;llom&aacute;nyt.  A
	    mesterkulcs elz&aacute;r&aacute;s&aacute;nak
	    bebiztos&iacute;t&aacute;s&aacute;ra b&aacute;rmelyik
	    m&oacute;dszer alkalmas.</para>

	  <para>Ha a kulcs &aacute;llom&aacute;ny a <quote>-</quote>
	    param&eacute;terrel adjuk meg, akkor a szabv&aacute;nyos
	    bemenetr&#245;l olvassa be a program.  Ez a p&eacute;lda
	    t&ouml;bb kulcs haszn&aacute;lat&aacute;t mutatja be.</para>

	  <screen>&prompt.root; <userinput>cat <replaceable>kulcs1 kulcs2 kulcs3</replaceable> | geli init -K - /dev/da2</userinput></screen>
	</step>

	<step>
	  <title>Az adathordoz&oacute; illeszt&eacute;se a
	    gener&aacute;lt kulccsal</title>

	  <screen>&prompt.root; <userinput>geli attach -k /root/da2.key /dev/da2</userinput>
Enter passphrase:</screen>

	  <para>Az &uacute;j titkos&iacute;tatlan eszk&ouml;z neve
	  <devicename>/dev/<replaceable>da2</replaceable>.eli</devicename>
	    lesz.</para>

	  <screen>&prompt.root; <userinput>ls /dev/da2*</userinput>
/dev/da2  /dev/da2.eli</screen>
	</step>

	<step>
	  <title>Az &uacute;j &aacute;llom&aacute;nyrendszer
	    kialak&iacute;t&aacute;sa</title>

	  <screen>&prompt.root; <userinput>dd if=/dev/random of=/dev/da2.eli bs=1m</userinput>
&prompt.root; <userinput>newfs /dev/da2.eli</userinput>
&prompt.root; <userinput>mount /dev/da2.eli <replaceable>/priv&aacute;t</replaceable></userinput></screen>

	  <para>A titkos&iacute;tott &aacute;llom&aacute;nyrendszer most
	    m&aacute;r &man.df.1; sz&aacute;m&aacute;ra is
	    l&aacute;tszik &eacute;s haszn&aacute;lhat&oacute;:</para>

	  <screen>&prompt.root; <userinput>df -H</userinput>
Filesystem     Size   Used  Avail Capacity  Mounted on
/dev/ad0s1a    248M    89M   139M    38%    /
/devfs         1.0K   1.0K     0B   100%    /dev
/dev/ad0s1f    7.7G   2.3G   4.9G    32%    /usr
/dev/ad0s1d    989M   1.5M   909M     0%    /tmp
/dev/ad0s1e    3.9G   1.3G   2.3G    35%    /var
/dev/da2.eli   150G   4.1K   138G     0%    /private</screen>

	</step>

	<step>
	  <title>Az adathordoz&oacute; lev&aacute;laszt&aacute;sa
	    &eacute;s lekapcsol&aacute;sa</title>

	  <para>Miut&aacute;n befejezt&uuml;k a munk&aacute;t a
	    titkos&iacute;tott part&iacute;ci&oacute;n, &eacute;s a
	    <filename
	      class="directory"><replaceable>/priv&aacute;t</replaceable></filename>
	    part&iacute;ci&oacute;ra m&aacute;r nincs tov&aacute;bb
	    sz&uuml;ks&eacute;g&uuml;nk, &eacute;rdemes
	    lev&aacute;lasztanunk &eacute;s kiiktatnunk a
	    <command>geli</command> titkos&iacute;t&aacute;s&uacute;
	    part&iacute;ci&oacute;t a rendszermagb&oacute;l.</para>

	  <screen>&prompt.root; <userinput>umount <replaceable>/priv&aacute;t</replaceable></userinput>
&prompt.root; <userinput>geli detach da2.eli</userinput></screen>
	</step>
      </procedure>

      <para>A &man.geli.8; haszn&aacute;lat&aacute;r&oacute;l
	b&#245;vebben a saj&aacute;t man oldal&aacute;n
	t&aacute;j&eacute;koz&oacute;dhatunk.</para>

      <sect3>
	<title>A <filename>geli</filename> <filename>rc.d</filename>
	  szkriptj&eacute;nek haszn&aacute;lata</title>

	<para>A <command>geli</command> mellett tal&aacute;lhatunk egy
	  saj&aacute;t <filename>rc.d</filename> szkriptet, amely
	  jelent&#245;sen leegyszer&#251;s&iacute;ti a
	  <command>geli</command> haszn&aacute;lat&aacute;t.  A
	  <command>geli</command> p&eacute;ld&aacute;ul &iacute;gy
	  param&eacute;terezhet&#245; az &man.rc.conf.5;
	  &aacute;llom&aacute;nyon kereszt&uuml;l:</para>

	<programlisting>geli_devices="da2"
geli_da2_flags="-p -k /root/da2.key"</programlisting>

	<para>Ennek seg&iacute;ts&eacute;g&eacute;vel a
	  <filename>/dev/da2</filename> eszk&ouml;zt
	  <command>geli</command> adathordoz&oacute;k&eacute;nt
	  &aacute;ll&iacute;tjuk be a <filename>/root/da2.key</filename>
	  &aacute;llom&aacute;nyban tal&aacute;lhat&oacute; mesterkulcs
	  felhaszn&aacute;l&aacute;s&aacute;val, de az
	  illeszt&eacute;skor a <command>geli</command> nem k&eacute;r
	  jelmondatot (ezt csak akkor fogja tenni, ha a <literal>geli
	  init</literal> parancs kiad&aacute;s&aacute;hoz
	  hozz&aacute;tessz&uuml;k a <option>-P</option>
	  be&aacute;ll&iacute;t&aacute;st).  A rendszer
	  le&aacute;ll&iacute;t&aacute;sa el&#245;tt pedig a
	  <command>geli</command> adathordoz&oacute; &iacute;gy
	  automatikusan lev&aacute;laszt&aacute;sra ker&uuml;l.</para>

	<para>Az <filename>rc.d</filename>
	  be&aacute;ll&iacute;t&aacute;s&aacute;val kapcsolatos
	  tudnival&oacute;kat a k&eacute;zik&ouml;nyv <link
	  linkend="configtuning-rcd">rc.d</link> szkriptekr&#245;l
	  sz&oacute;l&oacute; szakasz&aacute;ban ismerhetj&uuml;k
	  meg.</para>

      </sect3>
    </sect2>	
  </sect1>


  <sect1 id="swap-encrypting">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Christian</firstname>
	  <surname>Br&uuml;ffer</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>A lapoz&oacute;ter&uuml;let titkos&iacute;t&aacute;sa</title>

    <indexterm>
      <primary>lapoz&oacute;ter&uuml;let</primary>
      <secondary>titkos&iacute;t&aacute;sa</secondary>
    </indexterm>

    <para>A &os;-ben a lapoz&oacute;ter&uuml;let
      titkos&iacute;t&aacute;sa nagyon k&ouml;nnyen
      be&aacute;ll&iacute;that&oacute; &eacute;s m&aacute;r a
      &os;&nbsp;5.3-RELEASE v&aacute;ltozata &oacute;ta
      el&eacute;rhet&#245;.  Att&oacute;l f&uuml;gg&#245;en, hogy
      konkr&eacute;tan a &os; melyik verzi&oacute;j&aacute;t
      haszn&aacute;ljuk, a konfigur&aacute;ci&oacute;hoz
      kapcsol&oacute;d&oacute; be&aacute;ll&iacute;t&aacute;sok
      n&eacute;mileg elt&eacute;rhetnek.  A &os;&nbsp;6.0-RELEASE
      v&aacute;ltozat&aacute;t&oacute;l kezd&#245;d&#245;en a
      &man.gbde.8; &eacute;s a &man.geli.8; alrendszerek is
      haszn&aacute;lhat&oacute;ak a lapoz&oacute;ter&uuml;let
      titkos&iacute;t&aacute;s&aacute;ra.  A kor&aacute;bbi
      verzi&oacute;kban egyed&uuml;l csak a &man.gbde.8;
      &eacute;rhet&#245; el.  Mind a k&eacute;t rendszer az
      <filename>encswap</filename> <link
      linkend="configtuning-rcd">rc.d</link> szkriptet
      haszn&aacute;lja.</para>

    <para>Az el&#245;z&#245; szakaszban, vagyis a <link
      linkend="disks-encrypting"> A lemezpart&iacute;ci&oacute;k
      titkos&iacute;t&aacute;s&aacute;</link>ban m&aacute;r r&ouml;viden
      &ouml;sszefoglaltuk a k&uuml;l&ouml;nb&ouml;z&#245;
      titkos&iacute;t&aacute;ssal foglalkoz&oacute;
      alrendszereket.</para>

    <sect2>
      <title>Mi&eacute;rt kellene titkos&iacute;tanunk a
	lapoz&oacute;ter&uuml;letet?</title>

      <para>Hasonl&oacute;an a lemezpart&iacute;ci&oacute;k
	titkos&iacute;t&aacute;s&aacute;hoz, a lapoz&oacute;ter&uuml;let
	titkos&iacute;t&aacute;s&aacute;nak is az a c&eacute;lja, hogy
	v&eacute;dj&uuml;k az &eacute;rz&eacute;keny
	inform&aacute;ci&oacute;kat.  K&eacute;pzelj&uuml;k el, hogy egy
	olyan alkalmaz&aacute;ssal dolgozunk, amely jelszavakat kezel.
	Am&iacute;g ezek a jelszavak a mem&oacute;ri&aacute;ban
	maradnak, addig minden a legnagyobb rendben van.  Azonban amikor
	az oper&aacute;ci&oacute;s rendszer nekil&aacute;t a fizikai
	mem&oacute;ria felszabad&iacute;t&aacute;s&aacute;hoz kilapozni
	ezeket az adatokat, a jelszavak titkos&iacute;tatlanul
	ker&uuml;lnek a lemez fel&uuml;let&eacute;re &eacute;s egy
	t&aacute;mad&oacute; sz&aacute;m&aacute;ra k&ouml;nny&#251;
	pr&eacute;d&aacute;v&aacute; v&aacute;lnak.  Ilyen helyzetekben
	csak lapoz&oacute;ter&uuml;let titkos&iacute;t&aacute;sa
	jelenthet megold&aacute;st.</para>

    </sect2>

    <sect2>
      <title>El&#245;k&eacute;sz&uuml;letek</title>

      <note>
	<para>A szakasz tov&aacute;bbi r&eacute;sz&eacute;ben a
	  <devicename>ad0s1b</devicename> lesz a lapoz&aacute;sra
	  haszn&aacute;lt part&iacute;ci&oacute;.</para>
      </note>

      <para>Eg&eacute;szen mostan&aacute;ig nem titkos&iacute;tottuk a
	lapoz&oacute;ter&uuml;letet.  &Iacute;gy
	elk&eacute;pzelhet&#245;, hogy a lemezre m&aacute;r
	titkos&iacute;tatlanul kiker&uuml;ltek jelszavak vagy
	b&aacute;rmilyen m&aacute;s &eacute;rz&eacute;keny adatok.  A
	csorba kik&ouml;sz&ouml;r&uuml;l&eacute;s&eacute;re a
	lapoz&oacute;ter&uuml;leten tal&aacute;lhat&oacute; &ouml;sszes
	adatot &iacute;rjuk fel&uuml;l v&eacute;letlenszer&#251;en
	gener&aacute;lt szem&eacute;ttel:</para>

      <screen>&prompt.root; <userinput>dd if=/dev/random of=/dev/ad0s1b bs=1m</userinput></screen>

    </sect2>

    <sect2>
      <title>A lapoz&oacute;ter&uuml;let titkos&iacute;t&aacute;sa a
	&man.gbde.8; haszn&aacute;lat&aacute;val</title>

      <para>Ha a &os; 6.0-RELEASE vagy &uacute;jabb
	v&aacute;ltozat&aacute;t haszn&aacute;ljuk, akkor az
	<filename>/etc/fstab</filename> &aacute;llom&aacute;nyban
	tegy&uuml;k hozz&aacute; a <literal>.bde</literal>
	ut&oacute;tagot az a lapoz&oacute;ter&uuml;lethez tartoz&oacute;
	eszk&ouml;z nev&eacute;hez.</para>

      <programlisting>
# Device                Mountpoint      FStype  Options         Dump    Pass#
/dev/ad0s1b.bde         none            swap    sw              0       0
      </programlisting>

      <para>A &os;&nbsp;6.0-RELEASE el&#245;tti kiad&aacute;sok
	eset&eacute;ben a k&ouml;vetkez&#245; sort is hozz&aacute; kell
	tenn&uuml;nk az <filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyhoz:</para>

      <programlisting>gbde_swap_enable="YES"</programlisting>

    </sect2>

    <sect2>
      <title>A lapoz&oacute;ter&uuml;let titkos&iacute;t&aacute;sa a
	&man.geli.8; haszn&aacute;lat&aacute;val</title>

      <para>A &man.gbde.8; haszn&aacute;lat&aacute;hoz hasonl&oacute;an
	a &man.geli.8; &aacute;ltal felaj&aacute;nlott
	titkos&iacute;t&aacute;st is alkalmazhatjuk a
	lapoz&oacute;ter&uuml;let v&eacute;delm&eacute;re.  Ilyenkor az
	<filename>/etc/fstab</filename> &aacute;llom&aacute;nyban az
	<literal>.eli</literal> ut&oacute;tagot kell hozz&aacute;tenni a
	lapoz&oacute;ter&uuml;lethez tartoz&oacute; eszk&ouml;z
	n&eacute;vhez.</para>

      <programlisting>
# Device                Mountpoint      FStype  Options         Dump    Pass#
/dev/ad0s1b.eli         none            swap    sw              0       0
      </programlisting>

      <para>Az &man.geli.8; az AES algoritmust
	alap&eacute;rtelmez&eacute;s szerint 256&nbsp;bites kulccsal
	haszn&aacute;lja.</para>

      <para>Ezek az alap&eacute;rtelmez&eacute;sek
	megv&aacute;ltoztathat&oacute;ak az
	<filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyban a
	<literal>geli_swap_flags</literal>
	be&aacute;ll&iacute;t&aacute;s haszn&aacute;lat&aacute;val.  A
	k&ouml;vetkez&#245; sor arra utas&iacute;tja az
	<filename>encswap</filename> rc.d szkriptet, hogy a &man.geli.8;
	&eacute;s a Blowfish algoritmus haszn&aacute;lat&aacute;val
	hozzon l&eacute;tre egy lapoz&oacute;part&iacute;ci&oacute;t
	128&nbsp;bites kulccsal, 4&nbsp;kilobyte-os
	szektorm&eacute;rettel &eacute;s a <quote>detach on last
	close</quote> (<quote>lekapcsol&aacute;s haszn&aacute;lat
	ut&aacute;n</quote>) be&aacute;ll&iacute;t&aacute;ssal:</para>

      <programlisting>geli_swap_flags="-e blowfish -l 128 -s 4096 -d"</programlisting>

      <para>A &os;&nbsp;6.2-RELEASE verzi&oacute; el&#245;tti
	rendszerekben a k&ouml;vetkez&#245; sort kell
	haszn&aacute;lni:</para>

      <programlisting>geli_swap_flags="-a blowfish -l 128 -s 4096 -d"</programlisting>

      <para>A t&ouml;bbi be&aacute;ll&iacute;t&aacute;shoz a
	&man.geli.8; man oldal&aacute;n a <command>onetime</command>
	parancs le&iacute;r&aacute;s&aacute;t &eacute;rdemes
	&aacute;ttanulm&aacute;nyozni.</para>

    </sect2>

    <sect2>
      <title>Ellen&#245;rizz&uuml;k a
	m&#251;k&ouml;d&eacute;s&eacute;t</title>

      <para>Miut&aacute;n &uacute;jraind&iacute;tottuk a rendszert, a
	titkos&iacute;tott lapoz&oacute;ter&uuml;let helyes
	m&#251;k&ouml;d&eacute;s&eacute;t a <command>swapinfo</command>
	paranccsal ellen&#245;rizhetj&uuml;k le.</para>

      <para>A &man.gbde.8; eset&eacute;ben:</para>

      <screen>&prompt.user; <userinput>swapinfo</userinput>
Device          1K-blocks     Used    Avail Capacity
/dev/ad0s1b.bde    542720        0   542720     0%
      </screen>

      <para>Valamint a &man.geli.8; eset&eacute;ben:</para>

      <screen>&prompt.user; <userinput>swapinfo</userinput>
Device          1K-blocks     Used    Avail Capacity
/dev/ad0s1b.eli    542720        0   542720     0%
      </screen>

    </sect2>
  </sect1>
</chapter>

<!--
     Local Variables:
     mode: sgml
     sgml-declaration: "../chapter.decl"
     sgml-indent-data: t
     sgml-omittag: nil
     sgml-always-quote-attributes: t
     sgml-parent-document: ("../book.sgml" "part" "chapter")
     End:
-->
