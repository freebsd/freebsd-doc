<!--
     The FreeBSD Documentation Project

     $FreeBSD$
-->

<!-- The FreeBSD Hungarian Documentation Project
     Translated by: PALI, Gabor <pgj@FreeBSD.org>
     %SOURCE%	en_US.ISO8859-1/books/handbook/advanced-networking/chapter.sgml
     %SRCID%	1.433
-->

<chapter id="advanced-networking" lang="hu">
  <title>Egy&eacute;b halad&oacute; h&aacute;l&oacute;zati
    t&eacute;m&aacute;k</title>

  <sect1 id="advanced-networking-synopsis">
    <title>&Aacute;ttekint&eacute;s</title>

    <para>Ebben a fejezetben sz&aacute;mos komolyabb
      h&aacute;l&oacute;zati t&eacute;m&aacute;t fogunk
      t&aacute;rgyalni.</para>

    <para>A fejezet elolvas&aacute;sa sor&aacute;n
      megismerj&uuml;k:</para>

    <itemizedlist>
      <listitem>
	<para>az &aacute;tj&aacute;r&oacute;k &eacute;s az
	  &uacute;tv&aacute;laszt&aacute;s alapjait;</para>
      </listitem>

      <listitem>
	<para>hogyan &aacute;ll&iacute;tsunk be &ieee; 802.11 &eacute;s
	  &bluetooth; eszk&ouml;z&ouml;ket;</para>
      </listitem>

      <listitem>
	<para>a &os; seg&iacute;ts&eacute;g&eacute;vel hogyan tudunk
	  k&eacute;t h&aacute;l&oacute;zatot &ouml;sszek&ouml;tni
	  h&aacute;l&oacute;zati hidakon kereszt&uuml;l;</para>
      </listitem>

      <listitem>
	<para>hogyan ind&iacute;tsuk h&aacute;l&oacute;zatr&oacute;l egy
	  lemez n&eacute;lk&uuml;li g&eacute;pet;</para>
      </listitem>

      <listitem>
	<para>hogyan &aacute;ll&iacute;tsunk be h&aacute;l&oacute;zati
	  c&iacute;mford&iacute;t&aacute;st;</para>
      </listitem>

      <listitem>
	<para>hogyan kapcsoljunk &ouml;ssze k&eacute;t
	  sz&aacute;m&iacute;t&oacute;g&eacute;pet PLIP
	  haszn&aacute;lat&aacute;val;</para>
      </listitem>

      <listitem>
	<para>hogyan &aacute;ll&iacute;tsuk be az IPv6
	  haszn&aacute;lat&aacute;t egy &os;-s g&eacute;pen</para>
      </listitem>

      <listitem>
	<para>hogyan &aacute;ll&iacute;tsuk be az ATM
	  haszn&aacute;lat&aacute;t;</para>
      </listitem>

      <listitem>
	<para>hogyan enged&eacute;lyezz&uuml;k &eacute;s
	  haszn&aacute;ljuk a K&ouml;z&ouml;s c&iacute;mredundancia
	  protokollt &os;-ben.</para>
      </listitem>
    </itemizedlist>

    <para>A fejezet elolvas&aacute;s&aacute;hoz aj&aacute;nlott:</para>

    <itemizedlist>
      <listitem>
	<para>az <filename>/etc/rc</filename> k&ouml;nyvt&aacute;rban
	  tal&aacute;lhat&oacute; szkriptek
	  m&#251;k&ouml;d&eacute;s&eacute;nek ismerete;</para>
      </listitem>

      <listitem>
	<para>az alapvet&#245; h&aacute;l&oacute;zati fogalmak
	  ismerete;</para>
      </listitem>

      <listitem>
	<para>egy &uacute;j &os; rendszermag
	  be&aacute;ll&iacute;t&aacute;s&aacute;nak &eacute;s
	  telep&iacute;t&eacute;s&eacute;nek ismerete (<xref
	  linkend="kernelconfig">);</para>
      </listitem>

      <listitem>
	<para>a k&uuml;ls&#245; szoftverek
	  telep&iacute;t&eacute;s&eacute;nek ismerete (<xref
	  linkend="ports">).</para>
      </listitem>

    </itemizedlist>
  </sect1>

  <sect1 id="network-routing">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Coranth</firstname>
	  <surname>Gryphon</surname>
	  <contrib>K&eacute;sz&iacute;tette: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>&Aacute;tj&aacute;r&oacute;k &eacute;s az
      &uacute;tv&aacute;laszt&aacute;s</title>

    <indexterm><primary>&uacute;tv&aacute;laszt&aacute;s</primary></indexterm>
    <indexterm><primary>&aacute;tj&aacute;r&oacute;</primary></indexterm>
    <indexterm><primary>alh&aacute;l&oacute;zat</primary></indexterm>

    <para>Egy g&eacute;p egy m&aacute;sikat &uacute;gy tud
      megtal&aacute;lni a h&aacute;l&oacute;zaton, ha erre
      l&eacute;tezik egy olyan mechanizmus, amely le&iacute;rja, hogyan
      tudunk eljutni az egyikt&#245;l a m&aacute;sikig.  Ezt
      h&iacute;vjuk
      <firstterm>&uacute;tv&aacute;laszt&aacute;snak</firstterm>
      (routing).  Az <quote>&uacute;tvonal</quote> (route) c&iacute;mek
      egy p&aacute;rjak&eacute;nt adhat&oacute; meg, egy
      <quote>c&eacute;llal</quote> (destination) &eacute;s egy
      <quote>&aacute;tj&aacute;r&oacute;val</quote> (gateway).  Ez a
      p&aacute;ros mondja meg, hogy ha el akarjuk &eacute;rni ezt a
      <emphasis>c&eacute;lt</emphasis>, akkor ezen az
      <emphasis>&aacute;tj&aacute;r&oacute;n</emphasis> kereszt&uuml;l
      kell tov&aacute;bbhaladnunk.  A c&eacute;loknak h&aacute;rom
      t&iacute;pusa lehet: egy&eacute;ni g&eacute;pek,
      alh&aacute;l&oacute;zatok &eacute;s az
      <quote>alap&eacute;rtelmezett</quote>.  Az
      <quote>alap&eacute;rtelmezett &uacute;tvonalat</quote> (default
      route) abban az esetben alkalmazzuk, ha semelyik m&aacute;s
      &uacute;tvonal nem megfelel&#245;.  Az alap&eacute;rtelmezett
      &uacute;tvonalakr&oacute;l a k&eacute;s&#245;bbiekben m&eacute;g
      besz&eacute;lni fogunk.  H&aacute;rom t&iacute;pusa van az
      &aacute;tj&aacute;r&oacute;knak: egy&eacute;ni g&eacute;pek,
      fel&uuml;letek (avagy <quote>linkek</quote>) &eacute;s a hardveres
      Ethernet c&iacute;mek (MAC-c&iacute;mek).</para>

    <sect2>
      <title>P&eacute;lda</title>

      <para>Az &uacute;tv&aacute;laszt&aacute;s
	k&uuml;l&ouml;nb&ouml;z&#245; ter&uuml;leteit a
	k&ouml;vetkez&#245; <command>netstat</command> parancs
	alapj&aacute;n fogjuk bemutatni:</para>

      <screen>&prompt.user; <userinput>netstat -r</userinput>
Routing tables

Destination      Gateway            Flags     Refs     Use     Netif Expire

default          outside-gw         UGSc       37      418      ppp0
localhost        localhost          UH          0      181       lo0
test0            0:e0:b5:36:cf:4f   UHLW        5    63288       ed0     77
10.20.30.255     link#1             UHLW        1     2421
example.com      link#1             UC          0        0
host1            0:e0:a8:37:8:1e    UHLW        3     4601       lo0
host2            0:e0:a8:37:8:1e    UHLW        0        5       lo0 =>
host2.example.com link#1             UC          0        0
224              link#1             UC          0        0</screen>

      <indexterm><primary>alap&eacute;rtelmezett
	&uacute;tvonal</primary></indexterm>

      <para>Az els&#245; k&eacute;t sorban az alap&eacute;rtelmezett
	&uacute;tvonalat (melyr&#245;l r&eacute;szleteiben majd a <link
	linkend="network-routing-default">k&ouml;vetkez&#245;
	szakaszban</link> fogunk sz&oacute;lni) &eacute;s a
	<hostid>localhost</hostid> &uacute;tvonal&aacute;t
	l&aacute;thatjuk.</para>

      <indexterm><primary>loopback eszk&ouml;z</primary></indexterm>

      <para>A <hostid>localhost</hostid> c&iacute;mhez az
	&uacute;tv&aacute;laszt&aacute;si t&aacute;bl&aacute;zatban a
	<devicename>lo0</devicename> eszk&ouml;z tartozik (a
	<literal>Netif</literal> oszlopban), amelyet loopback
	eszk&ouml;znek is neveznek.  Ez arra utas&iacute;tja a
	rendszert, hogy az ide k&uuml;ld&ouml;tt csomagokat ne a helyi
	h&aacute;l&oacute;zaton k&uuml;ldje kereszt&uuml;l, hanem csak
	ezen a bels&#245; fel&uuml;leten, mivel &uacute;gyis oda
	jutn&aacute;nak vissza, ahonnan indultak.</para>

      <indexterm>
	<primary>Ethernet</primary>
	<secondary>MAC-c&iacute;m</secondary>
      </indexterm>

      <para>A t&aacute;bl&aacute;zatban a k&ouml;vetkez&#245; sor egy
	<hostid role="mac">0:e0</hostid> kezdet&#251; c&iacute;met
	tartalmaz.  Ez egy hardveres Ethernet c&iacute;m, m&aacute;s
	n&eacute;ven MAC-c&iacute;m.  A &os; mag&aacute;t&oacute;l
	k&eacute;pes beazonos&iacute;tani tetsz&#245;leges g&eacute;pet
	(ebben a p&eacute;ld&aacute;ban a <hostid>test0</hostid>
	g&eacute;pet) a helyi Ethernetes h&aacute;l&oacute;zaton
	&eacute;s felvenni hozz&aacute; egy &uacute;tvonalat,
	k&ouml;zvetlen&uuml;l az <devicename>ed0</devicename> Ethernetes
	csatol&oacute;fel&uuml;leten kereszt&uuml;l.  Ehhez a
	t&iacute;pus&uacute; &uacute;tvonalhoz tartozik m&eacute;g egy
	lej&aacute;rati id&#245; is (a <literal>Expire</literal>
	oszlop), amely akkor kap szerepet, ha ennyi id&#245;
	eltelt&eacute;vel nem kapunk semmilyen h&iacute;rt a
	g&eacute;pr&#245;l.  Amikor ilyen t&ouml;rt&eacute;nik, az
	g&eacute;phez eddig nyilv&aacute;ntartott &uacute;tvonal
	automatikusan t&ouml;rl&#245;dik.  Ezek a g&eacute;pek a RIP
	(&uacute;tvonal-inform&aacute;ci&oacute;s protokoll, Routing
	Information Protocol) nev&#251; mechanizmuson kereszt&uuml;l
	azonos&iacute;t&oacute;dnak, mely a legr&ouml;videbb &uacute;t
	kisz&aacute;m&iacute;t&aacute;sa alapj&aacute;n hat&aacute;rozza
	meg a helyi g&eacute;pekhez vezet&#245; &uacute;tvonalat.</para>

      <indexterm><primary>alh&aacute;l&oacute;zat</primary></indexterm>

      <para>A &os; a helyi alh&aacute;l&oacute;zat (<hostid
	role="ipaddr">10.20.30.255</hostid> &eacute;s <hostid
	role="domainname">example.com</hostid>, az
	alh&aacute;l&oacute;zathoz tartoz&oacute; n&eacute;v)
	eset&eacute;ben is felvesz &uacute;tvonalakat.  A
	<literal>link#1</literal> megnevez&eacute;s a g&eacute;pben
	tal&aacute;lhat&oacute; els&#245; Ethernet-k&aacute;rty&aacute;t
	jel&ouml;li.  Megfigyelhetj&uuml;k, hogy rajta k&iacute;v&uuml;l
	nincs is t&ouml;bb fel&uuml;lete.</para>

      <para>Mindegyik csoport (a helyi h&aacute;l&oacute;zati
	g&eacute;pek &eacute;s a helyi alh&aacute;l&oacute;zatokatok)
	&uacute;tvonalait a <application>routed</application> nev&#251;
	d&eacute;mon tartja automatikusan karban.  Ha ez nem fut, akkor
	csak a statikusan defini&aacute;lt (vagyis az el&#245;re
	megadott) &uacute;tvonalak fognak l&eacute;tezni.</para>

      <para>A <literal>host1</literal> sor a saj&aacute;t
	g&eacute;p&uuml;nkre vonatkozik, amelyet az Ethernet c&iacute;me
	szerint ismer&uuml;nk.  Mivel mi vagyunk k&uuml;ld&#245;
	g&eacute;p, a &os; tudni fogja, hogy ilyenkor az Ethernetes
	fel&uuml;let helyett a loopback eszk&ouml;zt
	(<devicename>lo0</devicename>) kell haszn&aacute;lnia.</para>

      <para>A k&eacute;t <literal>host2</literal> sor arra mutat
	p&eacute;ld&aacute;t, amikor az &man.ifconfig.8; paranccsal
	&aacute;lneveket hozunk l&eacute;tre (ennek konkr&eacute;t okait
	l&aacute;sd az Ethernetr&#245;l sz&oacute;l&oacute;
	r&eacute;szben).  A <devicename>lo0</devicename> fel&uuml;let
	neve ut&aacute;n szerepl&#245; <literal>=&gt;</literal>
	szimb&oacute;lum azt jelzi, hogy ez nem csak egy loopback
	fel&uuml;let (mivel a c&iacute;me szint&eacute;n a helyi
	g&eacute;pre mutat), hanem a fel&uuml;let egy m&aacute;sik neve.
	Ilyen &uacute;tvonalak csak az &aacute;lneveket ismer&#245;
	g&eacute;pekn&eacute;l jelennek meg.  A helyi
	h&aacute;l&oacute;zaton minden m&aacute;s g&eacute;pn&eacute;l
	egyszer&#251;en csak a <literal>link#1</literal> jelenik meg az
	ilyen &uacute;tvonalak eset&eacute;ben.</para>

      <para>Az utols&oacute; sor (a <hostid role="ipaddr">224</hostid>
	c&eacute;llal rendelkez&#245; alh&aacute;l&oacute;zat) a
	multicastre (t&ouml;bbesk&uuml;ld&eacute;sre) szolg&aacute;l,
	amellyel majd egy m&aacute;sik szakaszban foglalkozunk.</para>

      <para>V&eacute;gezet&uuml;l az &uacute;tvonalakhoz tartoz&oacute;
	k&uuml;l&ouml;nf&eacute;le tulajdons&aacute;gok a
	<literal>Flags</literal> oszlopban l&aacute;that&oacute;ak.  Az
	al&aacute;bbi r&ouml;vid t&aacute;bl&aacute;zatban
	&ouml;sszefoglaltunk k&ouml;z&uuml;l&uuml;k
	n&eacute;h&aacute;nyat:</para>

      <informaltable frame="none" pgwide="1">
	<tgroup cols="2">
	  <colspec colwidth="1*">
	  <colspec colwidth="4*">

	  <tbody>
	    <row>
	      <entry>U</entry>
	      <entry>Up: az &uacute;tvonal akt&iacute;v</entry>
	    </row>

	    <row>
	      <entry>H</entry>
	      <entry>Host: az &uacute;tvonal egyetlen g&eacute;pre
		mutat</entry>
	    </row>

	    <row>
	      <entry>G</entry>
	      <entry>Gateway: az adott c&eacute;l fel&eacute; ezen a
		g&eacute;pen kereszt&uuml;l k&uuml;ldj&uuml;nk, amely
		majd kital&aacute;lja, hogy merre k&uuml;ldje
		tov&aacute;bb</entry>
	    </row>

	    <row>
	      <entry>S</entry>
	      <entry>Static: ez az &uacute;tvonal statikus, nem a
		rendszer hozta l&eacute;tre automatikusan</entry>
	    </row>

	    <row>
	      <entry>C</entry>
	      <entry>Clone: ebb&#245;l az &uacute;tvonalb&oacute;l
		sz&aacute;rmaztatunk &uacute;j &uacute;tvonalat azokhoz
		a g&eacute;pekhez, amelyekhez csatlakozunk.  Ilyen
		&uacute;tvonalakat &aacute;ltal&aacute;ban a helyi
		h&aacute;l&oacute;zatokban tal&aacute;lhatunk</entry>
	    </row>

	    <row>
	      <entry>W</entry>
	      <entry>WasCloned: azt jelzi, hogy ezt az &uacute;tvonalat
		egy helyi h&aacute;l&oacute;zatra mutat&oacute;
		(kl&oacute;n, avagy Clone t&iacute;pus&uacute;)
		&uacute;tvonal alapj&aacute;n hoztuk l&eacute;tre
		automatikusan</entry>
	    </row>

	    <row>
	      <entry>L</entry>
	      <entry>Link: az &uacute;tvonal Ethernetes hardverhez
		kapcsol&oacute;dik</entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

    </sect2>

    <sect2 id="network-routing-default">
      <title>Alap&eacute;rtelmezett &uacute;tvonalak</title>

      <indexterm><primary>alap&eacute;rtelmezett
	&uacute;tvonal</primary></indexterm>

      <para>Amikor a helyi rendszernek fel kell vennie a kapcsolatot egy
	t&aacute;voli g&eacute;ppel, ellen&#245;rzi az
	&uacute;tv&aacute;laszt&aacute;si t&aacute;bl&aacute;zatban,
	hogy l&eacute;tezik-e m&aacute;r hozz&aacute; valamilyen
	&uacute;tvonal.  Ha a t&aacute;voli g&eacute;p egy olyan
	alh&aacute;l&oacute;zatba esik, amelyet m&aacute;r el tudunk
	&eacute;rni (kl&oacute;nozott &uacute;tvonalak), akkor a
	rendszer megn&eacute;zi, hogy a hozz&aacute; tartoz&oacute;
	fel&uuml;leten k&eacute;pes-e kapcsolatot
	l&eacute;tes&iacute;teni.</para>

      <para>Ha minden ismert &uacute;tvonal cs&#245;d&ouml;t mond, akkor
	a rendszer&uuml;nknek marad m&eacute;g egy utols&oacute;
	es&eacute;lye: az <quote>alap&eacute;rtelmezett</quote>
	&uacute;tvonal haszn&aacute;lata.  Ez az &uacute;tvonal egy
	speci&aacute;lis &aacute;tj&aacute;r&oacute; &uacute;tvonal
	(ebb&#245;l &aacute;ltal&aacute;ban csak egyetlen egy
	l&eacute;tezik a rendszerben) &eacute;s tulajdons&aacute;gai
	k&ouml;z&ouml;tt mindig szerepel a <literal>c</literal>.  A
	helyi h&aacute;l&oacute;zat g&eacute;pei k&ouml;z&uuml;l ez az
	&aacute;tj&aacute;r&oacute; az legyen, amelyik
	k&ouml;zvetlen&uuml;l kapcsol&oacute;dik a k&uuml;ls&#245;
	vil&aacute;ghoz (PPP &ouml;sszek&ouml;ttet&eacute;ssel, DSL,
	k&aacute;belmodem, T1 vagy b&aacute;rmilyen m&aacute;s
	h&aacute;l&oacute;zati fel&uuml;leten kereszt&uuml;l).</para>

      <para>Amikor pedig mag&aacute;t a k&uuml;ls&#245; vil&aacute;g
	fel&eacute; &aacute;tj&aacute;r&oacute;k&eacute;nt
	szolg&aacute;l&oacute; g&eacute;pet &aacute;ll&iacute;tjuk be,
	az alap&eacute;rtelmezett &uacute;tvonal az
	internet-szolg&aacute;ltat&oacute;nk &aacute;ltal megadott
	g&eacute;p c&iacute;me lesz.</para>

      <para>Vegy&uuml;nk egy p&eacute;ld&aacute;t az
	alap&eacute;rtelmezett &uacute;tvonalakra.  Egy tipikus
	konfigur&aacute;ci&oacute;:</para>

      <mediaobject>
	<imageobject>
	  <imagedata fileref="advanced-networking/net-routing">
	</imageobject>

	<textobject>
	  <literallayout class="monospaced">
[Helyi2]  &lt;--ether--&gt;  [Helyi1]  &lt;--PPP--&gt; [ Szolg. ]  &lt;--ether--&gt;  [T1-&Aacute;J]
      </literallayout>
	</textobject>
      </mediaobject>

      <para>A <hostid>Helyi1</hostid> &eacute;s <hostid>Helyi2</hostid>
	g&eacute;pek a h&aacute;l&oacute;zatunk tagjai.  A
	<hostid>Helyi1</hostid> az internet-szolg&aacute;ltat&oacute;t
	&eacute;ri el egy bet&aacute;rcs&aacute;z&oacute;s PPP
	kapcsolaton kereszt&uuml;l.  A PPP szerver a k&uuml;ls&#245;
	fel&uuml;let&eacute;n kereszt&uuml;l a helyi
	h&aacute;l&oacute;zaton pedig egy m&aacute;sik
	&aacute;tj&aacute;r&oacute;hoz csatlakozik.</para>

      <para>Az egyes g&eacute;pek alap&eacute;rtelmezett
	&uacute;tvonalai &iacute;gy alakulnak:</para>

      <informaltable frame="none" pgwide="1">
	<tgroup cols="3">
	  <thead>
	    <row>
	      <entry>G&eacute;p</entry>
	      <entry>Alap&eacute;rtelmezett
		&aacute;tj&aacute;r&oacute;</entry>
	      <entry>Fel&uuml;let</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry>Helyi2</entry>
	      <entry>Helyi1</entry>
	      <entry>Ethernet</entry>
	    </row>

	    <row>
	      <entry>Helyi1</entry>
	      <entry>T1-&Aacute;J</entry>
	      <entry>PPP</entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

      <para>Gyakran felmer&uuml;l a k&eacute;rd&eacute;s, hogy
	<quote>Mi&eacute;rt (&eacute;s hogy-hogy) a
	<hostid>T1-&Aacute;J</hostid> a <hostid>Helyi1</hostid>
	g&eacute;p sz&aacute;m&aacute;ra az alap&eacute;rtelmezett
	&aacute;tj&aacute;r&oacute; &eacute;s nem a
	szolg&aacute;ltat&oacute; azon szervere, amelyhez
	csatlakozott?</quote></para>

      <para>Ne felejts&uuml;k el, hogy a PPP fel&uuml;let a
	szolg&aacute;ltat&oacute; helyi h&aacute;l&oacute;zat&aacute;ban
	a mi r&eacute;sz&uuml;nkre kap c&iacute;met, &eacute;s a itt az
	&ouml;sszes t&ouml;bbi g&eacute;phez tartoz&oacute;
	&uacute;tvonal automatikusan l&eacute;trej&ouml;n.  Emiatt
	m&aacute;r eleve el tudjuk &eacute;rni a
	<hostid>T1-&Aacute;J</hostid> g&eacute;pet, ez&eacute;rt amikor
	a szolg&aacute;ltat&oacute;n kereszt&uuml;l k&uuml;ld&uuml;nk,
	nincs sz&uuml;ks&eacute;g&uuml;nk egy tov&aacute;bbi
	l&eacute;pcs&#245;re.</para>

      <para>&Aacute;ltal&aacute;ban a <hostid
	role="ipaddr">X.X.X.1</hostid> c&iacute;met szokt&aacute;k a
	helyi h&aacute;l&oacute;zat
	&aacute;tj&aacute;r&oacute;j&aacute;nak kiosztani.  Ez&eacute;rt
	(az el&#245;bbi p&eacute;ld&aacute;t
	&uacute;jrahasznos&iacute;tva) ha a helyi
	h&aacute;l&oacute;zatunkon a C oszt&aacute;ly&uacute; <hostid
	role="ipaddr">10.20.30</hostid> c&iacute;mtartom&aacute;nyt
	haszn&aacute;ljuk, &eacute;s a szolg&aacute;ltat&oacute;nkhoz a
	<hostid role="ipaddr">10.9.9</hostid> c&iacute;mtartom&aacute;ny
	tartozik, akkor az alap&eacute;rtelmezett &uacute;tvonalak a
	k&ouml;vetkez&#245;k lesznek:</para>

      <informaltable frame="none" pgwide="1">
	<tgroup cols="2">
	  <thead>
	    <row>
	      <entry>G&eacute;p</entry>
	      <entry>Alap&eacute;rtelmezett &uacute;tvonal</entry>
	    </row>
	  </thead>
	  <tbody>
	    <row>
	      <entry>Helyi2 (10.20.30.2)</entry>
	      <entry>Helyi1 (10.20.30.1)</entry>
	    </row>
	    <row>
	      <entry>Helyi1 (10.20.30.1, 10.9.9.30)</entry>
	      <entry>T1-&Aacute;J (10.9.9.1)</entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

      <para>Az <filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyon kereszt&uuml;l k&ouml;nnyen meg tudjuk
	adni az alap&eacute;rtelmezett &uacute;tvonalat.  A
	p&eacute;ld&aacute;nkban a <hostid>Helyi2</hostid> g&eacute;p
	<filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;ny&aacute;ba kell felvenn&uuml;nk a
	k&ouml;vetkez&#245; sort:</para>

      <programlisting>defaultrouter="10.20.30.1"</programlisting>

      <para>A &man.route.8; parancs haszn&aacute;lat&aacute;val viszont
	ak&aacute;r k&ouml;zvetlen&uuml;l is megtehetj&uuml;k
	mindezt:</para>

      <screen>&prompt.root; <userinput>route add default 10.20.30.1</userinput></screen>

      <para>A &man.route.8; man oldalon olvashatunk arr&oacute;l
	b&#245;vebben, hogy a h&aacute;l&oacute;zati
	&uacute;tv&aacute;laszt&aacute;si t&aacute;bl&aacute;zatokat
	k&eacute;zzel hogyan tudjuk m&oacute;dos&iacute;tani.</para>

    </sect2>

    <sect2 id="network-dual-homed-hosts">
      <title>Kett&#245;s h&aacute;l&oacute;zat&uacute;
	g&eacute;pek</title>

      <indexterm><primary>kett&#245;s h&aacute;l&oacute;zat&uacute;
	g&eacute;pek</primary></indexterm>

      <para>Egy m&aacute;sik t&iacute;pus&uacute;
	konfigur&aacute;ci&oacute;r&oacute;l is sz&oacute;t kell
	ejten&uuml;nk, ahol a g&eacute;p egyszerre k&eacute;t
	h&aacute;l&oacute;zatnak is tagja.  Gyakorlatilag az
	&aacute;tj&aacute;r&oacute;k&eacute;nt &uuml;zemel&#245;
	sz&aacute;m&iacute;t&oacute;g&eacute;pek (mint
	p&eacute;ld&aacute;ul az, amelyik a fenti p&eacute;ld&aacute;ban
	PPP kapcsolattal csatlakozott) ilyen kett&#245;s
	h&aacute;l&oacute;zat&uacute; g&eacute;pnek tekinthet&#245;ek.
	Ez a kifejez&eacute;s azonban igaz&aacute;b&oacute;l csak azokra
	az esetekre illik, ahol a g&eacute;p egyszerre k&eacute;t helyi
	h&aacute;l&oacute;zatban is megjelenik.</para>

      <para>Az egyik esetben a g&eacute;pben k&eacute;t Ethernet
	k&aacute;rtya tal&aacute;lhat&oacute;, melyek mindegyike
	birtokol egy-egy h&aacute;l&oacute;zati c&iacute;met az egyes
	alh&aacute;l&oacute;zatokon.  De el&#245;fordulhat az is, hogy a
	g&eacute;p&uuml;nkben csup&aacute;n egyetlen Ethernet
	k&aacute;rtya van &eacute;s az &man.ifconfig.8;
	seg&iacute;ts&eacute;g&eacute;vel &aacute;lneveket hoztunk
	l&eacute;tre hozz&aacute;.  Az el&#245;bbi
	&aacute;ltal&aacute;ban k&eacute;t fizikailag
	elk&uuml;l&ouml;n&ouml;l&#245; Ethernet alap&uacute;
	h&aacute;l&oacute;zat eset&eacute;ben t&ouml;rt&eacute;nik,
	m&iacute;g az ut&oacute;bbin&aacute;l csak egyetlen fizikai
	h&aacute;l&oacute;zati szegmensr&#245;l van sz&oacute;, amely
	viszont logikailag k&eacute;t k&uuml;l&ouml;n
	alh&aacute;l&oacute;zatot tartalmaz.</para>

      <para>Ak&aacute;rmelyiket is vessz&uuml;k, az
	&uacute;tv&aacute;laszt&aacute;si t&aacute;bl&aacute;zatok
	&uacute;gy j&ouml;nnek l&eacute;tre, hogy benn&uuml;k a
	g&eacute;p a m&aacute;sik alh&aacute;l&oacute;zat fel&eacute;
	&aacute;tj&aacute;r&oacute;k&eacute;nt (bej&ouml;v&#245;
	&uacute;tvonalk&eacute;nt) lesz nyilv&aacute;ntartva.  Ebben a
	konfigur&aacute;ci&oacute;ban a g&eacute;p a k&eacute;t
	alh&aacute;l&oacute;zat k&ouml;z&ouml;tt
	&uacute;tv&aacute;laszt&oacute;k&eacute;nt fog
	tev&eacute;kenykedni, &eacute;s gyakran valamelyik vagy
	&eacute;ppen mind a k&eacute;t ir&aacute;nyba be kell
	&aacute;ll&iacute;tanunk valamilyen csomagsz&#251;r&eacute;st
	vagy t&#251;zfalaz&aacute;st.</para>

      <para>Ha azt szeretn&eacute;nk, hogy ez a g&eacute;p a k&eacute;t
	fel&uuml;let k&ouml;z&ouml;tt tov&aacute;bb&iacute;tson
	csomagokat, akkor a &os;-ben k&uuml;l&ouml;n enged&eacute;lyezni
	kell ezt a lehet&#245;s&eacute;get.  A k&ouml;vetkez&#245;
	szakaszban ennek r&eacute;szleteit t&aacute;rjuk fel.</para>

    </sect2>

    <sect2 id="network-dedicated-router">
      <title>Az &uacute;tv&aacute;laszt&oacute;k
	be&aacute;ll&iacute;t&aacute;sa</title>

      <indexterm><primary>&uacute;tv&aacute;laszt&oacute;</primary></indexterm>

      <para>A h&aacute;l&oacute;zati &uacute;tv&aacute;laszt&oacute; nem
	csin&aacute;l m&aacute;st, csak tov&aacute;bbk&uuml;ldi az egyik
	fel&uuml;let&eacute;n be&eacute;rkez&#245; csomagokat egy
	m&aacute;sik fel&uuml;let&eacute;re.  Az internetes
	szabv&aacute;nyok &eacute;s a sok&eacute;ves m&eacute;rn&ouml;ki
	tapasztalat azonban nem engedik, hogy a &os; Projekt
	alap&eacute;rtelmez&eacute;s szerint is
	el&eacute;rhet&#245;v&eacute; tegye ezt a &os; rendszerekben.
	Ezt a lehet&#245;s&eacute;get az al&aacute;bbi
	v&aacute;ltoz&oacute; <literal>YES</literal>
	&eacute;rt&eacute;k&#251;re
	&aacute;ll&iacute;t&aacute;s&aacute;val lehet
	enged&eacute;lyezni az &man.rc.conf.5;
	&aacute;llom&aacute;nyban:</para>

      <programlisting>gateway_enable="YES"          # Ez legyen YES, ha &aacute;tj&aacute;r&oacute;k&eacute;nt akarunk &uuml;zemelni</programlisting>

      <para>Ezzel l&eacute;nyeg&eacute;ben a
	<varname>net.inet.ip.forwarding</varname> &man.sysctl.8;
	v&aacute;ltoz&oacute; &eacute;rt&eacute;k&eacute;t
	&aacute;ll&iacute;tjuk <literal>1</literal>-re.  Ha
	valami&eacute;rt egy id&#245;re sz&uuml;neteltetni akarjuk a
	csomagok tov&aacute;bbk&uuml;ld&eacute;s&eacute;t, akkor
	&aacute;ll&iacute;tsuk a v&aacute;ltoz&oacute;
	&eacute;rt&eacute;k&eacute;t <literal>0</literal>-ra.</para>

      <indexterm><primary>BGP</primary></indexterm>
      <indexterm><primary>RIP</primary></indexterm>
      <indexterm><primary>OSPF</primary></indexterm>

      <para>Az &uacute;j &uacute;tv&aacute;laszt&oacute;nak nem
	&aacute;rt arr&oacute;l sem tudnia, hogy merre
	tov&aacute;bb&iacute;tsa a forgalmat.  Ha el&eacute;g
	egyszer&#251; a h&aacute;l&oacute;zatunk, akkor ak&aacute;r
	statikus &uacute;tvonalakat is haszn&aacute;lhatunk.  A &os;
	alapb&oacute;l tartalmazza a BSD-k eset&eacute;n
	szabv&aacute;nyos &man.routed.8; &uacute;tv&aacute;laszt&oacute;
	d&eacute;mont, amely a RIP (v1 &eacute;s v2) valamint az IRDP
	megold&aacute;sokat ismeri.  A BGP v4, OSPF v2 &eacute;s a
	t&ouml;bbi fejlettebb &uacute;tv&aacute;laszt&aacute;si
	protokoll a <filename role="package">net/zebra</filename>
	csomagban &eacute;rhet&#245; el.  Az ett&#245;l bonyolultabb
	h&aacute;l&oacute;zati &uacute;tv&aacute;laszt&aacute;si
	feladatokhoz olyan kereskedelmi term&eacute;kek is
	el&eacute;rhet&#245;ek, mint p&eacute;ld&aacute;ul a
	<application>&gated;</application>.</para>
    </sect2>

    <sect2 id="network-static-routes">
      <sect2info>
	<authorgroup>
	  <author>
	    <firstname>Al</firstname>
	    <surname>Hoang</surname>
	    <contrib>&Iacute;rta: </contrib>
	  </author>
	</authorgroup>
      </sect2info>

      <title>Statikus &uacute;tvonalak
	be&aacute;ll&iacute;t&aacute;sa</title>

      <sect3>
	<title>Manu&aacute;lis konfigur&aacute;ci&oacute;</title>

	<para>Tegy&uuml;k fel, hogy h&aacute;l&oacute;zatunk a
	  k&ouml;vetkez&#245;:</para>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="advanced-networking/static-routes">
	  </imageobject>

	  <textobject>
	<literallayout class="monospaced">
    INTERNET
      | (10.0.0.1/24) alap&eacute;rtelmezett &aacute;tj&aacute;r&oacute; internet fel&eacute;
      |
      |az xl0 fel&uuml;let
      |10.0.0.10/24
   +------+
   |      | A-utvalaszto
   |      | (FreeBSD &aacute;tj&aacute;r&oacute;)
   +------+
      | az xl1 fel&uuml;let
      | 192.168.1.1/24
      |
  +--------------------------------+
   1. bels&#245; h&aacute;l&oacute;zat    | 192.168.1.2/24
                       |
                   +------+
                   |      | B-utvalaszto
                   |      |
                   +------+
                       | 192.168.2.1/24
                       |
                     2. bels&#245; h&aacute;l&oacute;zat
	</literallayout>
	  </textobject>
	</mediaobject>

	<para>Ebben a forgat&oacute;k&ouml;nyvben az
	  <hostid>A-utvalaszto</hostid> a mi &os;-s g&eacute;p&uuml;nk,
	  amely az internet fel&eacute; vezet&#245;
	  &uacute;tv&aacute;laszt&oacute; szerep&eacute;t
	  j&aacute;tssza.  Sz&aacute;m&aacute;ra az
	  alap&eacute;rtelmezett &uacute;tvonal a <hostid
	  role="ipaddr">10.0.0.1</hostid>, amelyen kereszt&uuml;l a
	  k&uuml;ls&#245; vil&aacute;got tudja el&eacute;rni.
	  Felt&eacute;telezz&uuml;k, hogy a
	  <hostid>B-utvalaszto</hostid> nev&#251; g&eacute;pet
	  m&aacute;r eleve j&oacute;l &aacute;ll&iacute;tottuk be,
	  ez&eacute;rt tudja merre kell mennie.  (A k&eacute;p
	  alapj&aacute;n egyszer&#251;: csak vegy&uuml;nk fel egy
	  alap&eacute;rtelmezett &uacute;tvonalat a
	  <hostid>B-utvalaszto</hostid> g&eacute;phez, ahol &iacute;gy a
	  <hostid role="ipaddr">192.168.1.1</hostid> lesz az
	  &aacute;tj&aacute;r&oacute;.)</para>

	<para>Ha megn&eacute;zz&uuml;k most az
	  <hostid>A-utvalaszto</hostid>
	  &uacute;tv&aacute;laszt&aacute;si
	  t&aacute;bl&aacute;zat&aacute;t, akkor nagyj&aacute;b&oacute;l
	  a k&ouml;vetkez&#245;ket fogjuk l&aacute;tni:</para>

	<screen>&prompt.user; <userinput>netstat -nr</userinput>
Routing tables

Internet:
Destination        Gateway            Flags    Refs      Use  Netif  Expire
default            10.0.0.1           UGS         0    49378    xl0
127.0.0.1          127.0.0.1          UH          0        6    lo0
10.0.0/24          link#1             UC          0        0    xl0
192.168.1/24       link#2             UC          0        0    xl1</screen>

	<para>Az <hostid>A-utvalaszto</hostid>
	  &uacute;tv&aacute;laszt&aacute;si t&aacute;bl&aacute;zata
	  alapj&aacute;n jelen helyzetben nem lehet el&eacute;rni a 2.
	  bels&#245; h&aacute;l&oacute;zatot.  Nincs ugyanis olyan
	  &uacute;tvonal, amely a <hostid
	  role="ipaddr">192.168.2.0/24</hostid> alh&aacute;l&oacute;zat
	  fel&eacute; vezetne.  Ezt p&eacute;ld&aacute;ul &uacute;gy
	  tudjuk megoldani, ha manu&aacute;lisan felvessz&uuml;k ezt az
	  &uacute;tvonalat.  Az al&aacute;bbi paranccsal
	  hozz&aacute;adjuk a 2.  bels&#245; h&aacute;l&oacute;zat
	  el&eacute;r&eacute;s&eacute;t az <hostid>A-utvalaszto</hostid>
	  &uacute;tv&aacute;laszt&aacute;si
	  t&aacute;bl&aacute;zat&aacute;hoz, ahol a <hostid
	  role="ipaddr">192.168.1.2</hostid> lesz a k&ouml;vetkez&#245;
	  ugr&aacute;si pont (next hop):</para>

	<screen>&prompt.root; <userinput>route add -net 192.168.2.0/24 192.168.1.2</userinput></screen>

	<para>Most m&aacute;r az <hostid>A-utvalaszto</hostid>
	  b&aacute;rmelyik g&eacute;pet k&eacute;pes el&eacute;rni a
	  <hostid role="ipaddr">192.168.2.0/24</hostid>
	  h&aacute;l&oacute;zaton.</para>

      </sect3>

      <sect3>
	<title>R&ouml;gz&iacute;tett konfigur&aacute;ci&oacute;</title>

	<para>A fenti p&eacute;lda t&ouml;k&eacute;letesen
	  szeml&eacute;lti a statikus &uacute;tvonalak
	  felv&eacute;tel&eacute;t egy m&#251;k&ouml;d&#245; rendszeren.
	  Azonban ezzel az a gond, hogy az &iacute;gy megadott
	  &uacute;tv&aacute;laszt&aacute;si inform&aacute;ci&oacute; nem
	  marad meg a g&eacute;p &uacute;jraind&iacute;t&aacute;sa
	  ut&aacute;n.  Ez&eacute;rt az el&#245;bbihez hasonl&oacute;
	  statikus &uacute;tvonalakat ink&aacute;bb az
	  <filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyban
	  r&ouml;gz&iacute;ts&uuml;k:</para>

	<programlisting># A 2. bels&#245; h&aacute;l&oacute;zat el&eacute;r&eacute;s&eacute;t felvessz&uuml;k statikus &uacute;tvonalk&eacute;nt
static_routes="belsohalo2"
route_belsohalo2="-net 192.168.2.0/24 192.168.1.2"</programlisting>

	<para>A <literal>static_routes</literal>
	  konfigur&aacute;ci&oacute;s v&aacute;ltoz&oacute;
	  karakterl&aacute;ncok sz&oacute;k&ouml;zzel tagolt
	  felsorol&aacute;s&aacute;t tartalmazza.  Mindegyik
	  karakterl&aacute;nc egy &uacute;tvonal neve.  Az im&eacute;nti
	  p&eacute;ld&aacute;ban csak egyetlen ilyen n&eacute;v
	  szerepelt a <literal>static_routes</literal>
	  &eacute;rt&eacute;k&eacute;ben, amely a
	  <replaceable>belsohalo2</replaceable> volt.  Ut&aacute;na
	  be&iacute;rtunk m&eacute;g egy konfigur&aacute;ci&oacute;s
	  v&aacute;ltoz&oacute;t is, amelynek a neve
	  <literal>route_<replaceable>belsohalo2</replaceable></literal>.
	  Ide helyezt&uuml;k a &man.route.8; parancsnak
	  &aacute;tadand&oacute; be&aacute;ll&iacute;t&aacute;s
	  &ouml;sszes param&eacute;ter&eacute;t.  Ez pontosan olyan,
	  mintha a k&ouml;vetkez&#245; parancsot adtuk volna ki:</para>

	<screen>&prompt.root; <userinput>route add -net 192.168.2.0/24 192.168.1.2</userinput></screen>

	<para>Ez&eacute;rt kellett a <literal>"-net 192.168.2.0/24
	  192.168.1.2"</literal>.</para>

	<para>Ahogy m&aacute;r kor&aacute;bban is
	  eml&iacute;tett&uuml;k, a <literal>static_routes</literal>
	  &eacute;rt&eacute;k&eacute;ben t&ouml;bb karakterl&aacute;ncot
	  is megadhatunk, aminek seg&iacute;ts&eacute;g&eacute;vel
	  egyszerre t&ouml;bb statikus &uacute;tvonalat is
	  l&eacute;trehozhatunk.  A k&ouml;vetkez&#245; sorok arra
	  mutatnak p&eacute;ld&aacute;t, hogy a <hostid
	  role="ipaddr">192.168.0.0/24</hostid> &eacute;s <hostid
	  role="ipaddr">192.168.1.0/24</hostid> h&aacute;l&oacute;zatok
	  sz&aacute;m&aacute;ra mik&eacute;nt &aacute;ll&iacute;tsunk be
	  statikus &uacute;tvonalakat a k&eacute;pzeletbeli
	  &uacute;tv&aacute;laszt&oacute;nkon:</para>

	<programlisting>static_routes="net1 net2"
route_net1="-net 192.168.0.0/24 192.168.0.1"
route_net2="-net 192.168.1.0/24 192.168.1.1"</programlisting>
      </sect3>
    </sect2>

    <sect2 id="network-routing-propagation">
      <title>Az &uacute;tvonalak terjed&eacute;se</title>

      <indexterm><primary>&uacute;tvonalterjed&eacute;s</primary></indexterm>

      <para>Azt m&aacute;r tudjuk, hogyan adjuk meg a
	k&uuml;lvil&aacute;g fel&eacute; vezet&#245; &uacute;tvonalakat,
	azonban arr&oacute;l m&eacute;g nem besz&eacute;lt&uuml;nk, hogy
	k&iacute;v&uuml;lr&#245;l mik&eacute;nt tal&aacute;lnak meg
	benn&uuml;nket.</para>

      <para>Annyit m&aacute;r megismert&uuml;nk, hogy az
	&uacute;tv&aacute;laszt&aacute;si t&aacute;bl&aacute;zatokban
	megadhatjuk a h&aacute;l&oacute;zaton azt a g&eacute;pet,
	amelyen kereszt&uuml;l az adott c&iacute;mtartom&aacute;ny (a
	p&eacute;ld&aacute;ban egy C oszt&aacute;ly&uacute;
	alh&aacute;l&oacute;zat) fel&eacute; k&uuml;ldhet&uuml;nk, amely
	pedig tov&aacute;bbk&uuml;ldi a hozz&aacute; &eacute;rkez&#245;
	csomagokat.</para>

      <para>Amikor a csatlakozunk az
	internet-szolg&aacute;ltat&oacute;nkhoz, a n&aacute;la lev&#245;
	&uacute;tv&aacute;laszt&aacute;si t&aacute;bl&aacute;zatok
	&uacute;gy &aacute;ll&iacute;t&oacute;dnak be, hogy az
	alh&aacute;l&oacute;zatunk fel&eacute; igyekv&#245; adatok a
	kor&aacute;bban l&eacute;trej&ouml;tt PPP
	&ouml;sszek&ouml;ttet&eacute;sen kereszt&uuml;l jutnak el
	hozz&aacute;nk.  A vil&aacute;g t&ouml;bbi r&eacute;sz&eacute;n
	lev&#245; rendszerek viszont honnan fogj&aacute;k tudni, hogy a
	mi internet-szolg&aacute;ltat&oacute;nknak
	k&uuml;ldjenek?</para>

      <para>Van egy rendszer (ez legink&aacute;bb a n&eacute;vszerverek
	elosztott inform&aacute;ci&oacute;s adatb&aacute;zis&aacute;hoz
	hasonl&iacute;t), ami nyilv&aacute;ntartja a pillanatnyilag
	kiosztott c&iacute;mtartom&aacute;nyokat &eacute;s megadja a
	csatlakoz&aacute;si pontjukat az internet
	gerinch&aacute;l&oacute;zat&aacute;n.  Ez a
	<quote>gerinc</quote> tulajdonk&eacute;ppen olyan
	f&#245;vonalakb&oacute;l &aacute;ll, amelyen kereszt&uuml;l a
	vil&aacute;gban az orsz&aacute;gok k&ouml;z&ouml;tt mozog az
	internet forgalma.  A gerinch&aacute;l&oacute;zat mindegyik
	g&eacute;pe t&aacute;rolja a k&ouml;zponti
	&uacute;tv&aacute;laszt&aacute;si t&aacute;bl&aacute;zatok egy
	m&aacute;solat&aacute;t, ami a forgalmat egy adott
	h&aacute;l&oacute;zatr&oacute;l a megadott gerincbeli
	hordoz&oacute;ra ir&aacute;ny&iacute;tja &aacute;t, v&eacute;gig
	az internet-szolg&aacute;ltat&oacute;k l&aacute;nc&aacute;n
	eg&eacute;szen addig, am&iacute;g az el nem &eacute;ri a
	h&aacute;l&oacute;zatunkat.</para>

      <para>A szolg&aacute;ltat&oacute;nk feladata, hogy a
	g&eacute;p&uuml;nk fel&eacute; le&aacute;gaz&aacute;sk&eacute;nt
	(&eacute;s &iacute;gy a fel&eacute;nk vezet&#245;
	&uacute;tk&eacute;nt) beregiszt&aacute;lja mag&aacute;t a
	gerinch&aacute;l&oacute;zat g&eacute;pein.  Ezt nevezik az
	&uacute;tvonal terjed&eacute;s&eacute;nek.</para>
    </sect2>

    <sect2 id="network-routing-troubleshooting">
      <title>Hibaelh&aacute;r&iacute;t&aacute;s</title>

      <indexterm><primary><command>traceroute</command></primary></indexterm>

      <para>N&eacute;ha gondok lehetnek az &uacute;tvonal
	terjed&eacute;s&eacute;vel, &eacute;s egyes g&eacute;pek nem
	k&eacute;pesek el&eacute;rni minket.  A &man.traceroute.8;
	parancs mind k&ouml;z&uuml;l tal&aacute;n az egyik leghasznosabb
	ilyen helyzetekben, mivel ezzel fel tudjuk der&iacute;teni, hogy
	az &uacute;tv&aacute;laszt&aacute;s hol akad meg.  Ugyanilyen
	j&oacute;l hasznos&iacute;that&oacute; azokban az esetekben,
	amikor l&aacute;tsz&oacute;lag nem tudunk el&eacute;rni egy
	t&aacute;voli g&eacute;pet (teh&aacute;t a &man.ping.8;
	cs&#245;d&ouml;t mond).</para>

      <para>A &man.traceroute.8; parancsnak annak a t&aacute;voli
	g&eacute;pnek a nev&eacute;t kell megadnunk, amelyhez
	csatlakozni akarunk.  Fut&aacute;sa k&ouml;zben
	megjelen&iacute;ti azokat az &aacute;tj&aacute;r&oacute;kat,
	amelyeken kereszt&uuml;l csatlakozni pr&oacute;b&aacute;l,
	ak&aacute;r siker&uuml;lt el&eacute;rni a
	c&eacute;lg&eacute;pet, ak&aacute;r a kapcsolat hi&aacute;nya
	miatt kudarcot vall.</para>

      <para>A parancs haszn&aacute;lat&aacute;r&oacute;l &eacute;s
	m&#251;k&ouml;d&eacute;s&eacute;r&#245;l r&eacute;szletesebb
	inform&aacute;ci&oacute;kat a &man.traceroute.8; man
	oldal&aacute;n tal&aacute;lunk.</para>
    </sect2>

    <sect2 id="network-routing-multicast">
      <title>&Uacute;tv&aacute;laszt&aacute;s multicast
	eset&eacute;n</title>

      <indexterm>
	<primary>multicast &uacute;tv&aacute;laszt&aacute;s</primary>
      </indexterm>

      <indexterm>
	<primary>a rendszermag
	  be&aacute;ll&iacute;t&aacute;sai</primary>
	<secondary>MROUTING</secondary>
      </indexterm>

      <para>A &os; alapb&oacute;l t&aacute;mogatja mind a multicastet
	haszn&aacute;l&oacute; alkalmaz&aacute;sokat, mind pedig a
	multicasthez tartoz&oacute; &uacute;tv&aacute;laszt&aacute;st.
	Multicast eset&eacute;ben semmilyen speci&aacute;lis
	be&aacute;ll&iacute;t&aacute;s nem sz&uuml;ks&eacute;geltetik,
	az ilyen alkalmaz&aacute;sok egyb&#245;l el tudj&aacute;k
	&eacute;rni ezt a lehet&#245;s&eacute;get.  A multicast
	k&eacute;r&eacute;sek
	&uacute;tv&aacute;laszt&aacute;s&aacute;hoz azonban be kell
	&eacute;p&iacute;ten&uuml;nk n&eacute;mi
	t&aacute;mogat&aacute;st a rendszermagba:</para>

      <programlisting>options MROUTING</programlisting>

      <para>Emellett m&eacute;g el kell ind&iacute;tanunk az
	&man.mrouted.8; d&eacute;mont is, amelyhez az
	<filename>/etc/mrouted.conf</filename> &aacute;llom&aacute;nyban
	m&eacute;g be kell &aacute;ll&iacute;tanunk tunneleket &eacute;s
	a <acronym>DVMRP</acronym> haszn&aacute;lat&aacute;t.  A
	multicasthez tartoz&oacute; tov&aacute;bbi
	be&aacute;ll&iacute;t&aacute;sokat az &man.mrouted.8; man
	oldal&aacute;n tal&aacute;lhatjuk.</para>

      <note>
	<para>A &os;&nbsp;7.0 megjelen&eacute;s&eacute;vel a
	  &man.mrouted.8; d&eacute;mont kivett&eacute;k az
	  alaprendszerb&#245;l.  Azt a <acronym>DVMRP</acronym>
	  t&ouml;bbesk&uuml;ld&eacute;si protokollt
	  val&oacute;s&iacute;tja meg, amelyet a legt&ouml;bb
	  alkalmaz&aacute;sban mostans&aacute;g m&aacute;r a &man.pim.4;
	  seg&iacute;ts&eacute;g&eacute;vel oldanak meg.  Ennek
	  megfelel&#245;en a hozz&aacute; tartoz&oacute;
	  multicast protokollt val&oacute;s&iacute;tja meg, amelyet a
	  legt&ouml;bb alkalmaz&aacute;sban mostans&aacute;g m&aacute;r
	  a &man.pim.4; seg&iacute;ts&eacute;g&eacute;vel oldanak meg.
	  Ennek megfelel&#245;en a hozz&aacute; tartoz&oacute;
	  &man.map-mbone.8; &eacute;s &man.mrinfo.8;
	  seg&eacute;dprogramok is elt&aacute;vol&iacute;t&aacute;sra
	  ker&uuml;ltek.  Ezek a programok att&oacute;l a
	  kiad&aacute;st&oacute;l kezd&#245;d&#245;en a
	  Portgy&#251;jtem&eacute;ny r&eacute;szek&eacute;nt
	  &eacute;rhet&#245;ek el a <filename
	    role="package">net/mrouted</filename> portban.</para>
      </note>
    </sect2>
  </sect1>

  <sect1 id="network-wireless">
    <sect1info>
      <authorgroup>
	<author>
	  <othername>Loader</othername>
	</author>

	<author>
	  <firstname>Marc</firstname>
	  <surname>Fonvieille</surname>
	</author>

	<author>
	  <firstname>Murray</firstname>
	  <surname>Stokely</surname>
	</author>
      </authorgroup>
    </sect1info>

    <title>Vezet&eacute;k n&eacute;lk&uuml;li
      h&aacute;l&oacute;zatok</title>

    <indexterm><primary>vezet&eacute;k n&eacute;lk&uuml;li
      h&aacute;l&oacute;zatok</primary></indexterm>

    <indexterm>
      <primary>802.11</primary>
      <see>vezet&eacute;k n&eacute;lk&uuml;li
	h&aacute;l&oacute;zatok</see>
    </indexterm>

    <sect2>
      <title>A vezet&eacute;k n&eacute;lk&uuml;li
	h&aacute;l&oacute;zatok alapjai</title>

      <para>A legt&ouml;bb vezet&eacute;k n&eacute;lk&uuml;li
	h&aacute;l&oacute;zat az &ieee; 802.11 szabv&aacute;nyon nyugszik.
	Az alapvet&#245; vezet&eacute;k n&eacute;lk&uuml;li
	h&aacute;l&oacute;zatokban t&ouml;bb olyan
	&aacute;llom&aacute;st tal&aacute;lhatunk, amelyek
	egym&aacute;ssal r&aacute;di&oacute;jelek
	sz&oacute;r&aacute;s&aacute;val kommunik&aacute;lnak a
	2,4&nbsp;GHz vagy 5&nbsp;GHz frekvenciatartom&aacute;nyban (noha
	ez a helyi viszonyoknak megfelel&#245;en v&aacute;ltozhat,
	&eacute;s a 2,3&nbsp;GHz, illetve a 4,9&nbsp;GHz
	tartom&aacute;nyokban is lehets&eacute;ges a
	kommunik&aacute;ci&oacute;).</para>

      <para>A 802.11 szabv&aacute;ny&uacute; h&aacute;l&oacute;zatok
	k&eacute;tf&eacute;lek&eacute;ppen szervez&#245;dnek.
	El&#245;sz&ouml;r is
	<emphasis>infrastruktur&aacute;lisan</emphasis>,
	(infrastructural mode) ahol az egyik &aacute;llom&aacute;st
	kinevezz&uuml;k a k&ouml;zpontnak &eacute;s a t&ouml;bbi pedig
	ehhez fog tartozni.  Az ilyen h&aacute;l&oacute;zatokat BSS-nek
	nevezz&uuml;k &eacute;s az im&eacute;nt eml&iacute;tett
	k&ouml;zpont neve hozz&aacute;f&eacute;r&eacute;si pont (Access
	Point, AP) lesz.  A BSS-ben az &ouml;sszes
	kommunik&aacute;ci&oacute; a hozz&aacute;f&eacute;r&eacute;si
	pontokon kereszt&uuml;l halad m&eacute;g abban az esetben is,
	amikor az egyik &aacute;llom&aacute;s egy m&aacute;sik
	vezet&eacute;k n&eacute;lk&uuml;li &aacute;llom&aacute;ssal
	akarja felvenni a kapcsolatot.  Az ilyen jelleg&#251;
	h&aacute;l&oacute;zatok m&aacute;sik t&iacute;pus&uacute;
	szervez&#245;d&eacute;si m&oacute;dj&aacute;ban nincsenek
	kijel&ouml;lt k&ouml;zpontok &eacute;s a
	kommunik&aacute;ci&oacute; az &aacute;llom&aacute;sok
	k&ouml;z&ouml;tt k&ouml;zvetlen&uuml;l zajlik.  A
	h&aacute;l&oacute;zat ezen form&aacute;j&aacute;t IBBS-nek
	nevezz&uuml;k, vagy ismeretebb nev&eacute;n <emphasis>ad-hoc
	h&aacute;l&oacute;zatnak</emphasis> (ad-hoc network).</para>

      <para>A 802.11 alap&uacute; h&aacute;l&oacute;zatok
	els&#245;k&eacute;nt a 2,4&nbsp;GHz-es s&aacute;vot
	h&oacute;d&iacute;tott&aacute;k meg, &eacute;s az &ieee; 802.11
	valamint 802.11b szabv&aacute;nyokban r&ouml;gz&iacute;tett
	protokollokat haszn&aacute;lt&aacute;k.  Ezekben a
	specifik&aacute;ci&oacute;kban megtal&aacute;lhatjuk a
	m&#251;k&ouml;d&eacute;si frekvenci&aacute;t, a
	k&ouml;zeghozz&aacute;f&eacute;r&eacute;si r&eacute;teg
	jellemz&#245;inek le&iacute;r&aacute;s&aacute;t,
	bele&eacute;rtve a keretez&eacute;st &eacute;s az
	&aacute;tviteli sebess&eacute;geket (a
	kommunik&aacute;ci&oacute; ugyanis elt&eacute;r&#245;
	sebess&eacute;gekkel is t&ouml;rt&eacute;nhet).  A
	k&eacute;s&#245;bb kiadott 802.11a szabv&aacute;ny azt
	specifik&aacute;lja, hogy az 5&nbsp;GHz-es tartom&aacute;nyban
	mik&eacute;nt m&#251;k&ouml;djenek, ahol t&ouml;bbek k&ouml;zt
	megtal&aacute;lhatjuk a k&uuml;l&ouml;nf&eacute;le
	jelkezel&eacute;si mechanizmusokat &eacute;s a nagyobb
	&aacute;tviteli sebess&eacute;gek haszn&aacute;lat&aacute;t.
	Ezt m&eacute;g a 802.11g szabv&aacute;ny k&ouml;vette, ami a
	802.11b h&aacute;l&oacute;zatokkal kompatibilis m&oacute;don
	lehet&#245;v&eacute; tette a 802.11a
	jelkezel&eacute;s&eacute;nek &eacute;s &aacute;tviteli
	m&oacute;dszereinek haszn&aacute;lat&aacute;t a 2,4&nbsp;GHz-es
	s&aacute;vban.</para>

      <para>A 802.11 alap&uacute; h&aacute;l&oacute;zatok
	mindenf&eacute;le &aacute;tviteli technik&aacute;it&oacute;l
	eltekintve t&ouml;bbf&eacute;le biztons&aacute;gi
	megold&aacute;ssal tal&aacute;lkozhatunk.  Az korai 802.11
	dokumentumok egy nagyon egyszer&#251; biztons&aacute;gi
	protokollt, a WEP-et eml&iacute;tenek.  Ez a protokoll a
	h&aacute;l&oacute;zaton mozg&oacute; adatokat egy
	r&ouml;gz&iacute;tett &eacute;s ismert osztott kulccsal
	k&oacute;dolja le az RC4 titkos&iacute;t&aacute;ssal.  A
	kommunik&aacute;ci&oacute;hoz az &ouml;sszes
	&aacute;llom&aacute;snak el&#245;re meg kell egyeznie ebben a
	kulcsban.  Err&#245;l a s&eacute;m&aacute;r&oacute;l
	id&#245;k&ouml;zben kider&uuml;lt, hogy k&ouml;nnyen
	felt&ouml;rhet&#245; &eacute;s manaps&aacute;g m&aacute;r csak
	nagyon ritk&aacute;n alkalmazz&aacute;k, kiv&eacute;ve
	tal&aacute;n csak a k&oacute;bor felhaszn&aacute;l&oacute;k
	elijeszt&eacute;s&eacute;re.  A jelenleg &eacute;rv&eacute;nyes
	biztons&aacute;gi el&#245;&iacute;r&aacute;sokat az &ieee; 802.11i
	specifik&aacute;ci&oacute; adja meg, amely &uacute;j
	kriptogr&aacute;fiai titkos&iacute;t&aacute;sokat
	defini&aacute;l valamint egy tov&aacute;bbi protokollt az
	&aacute;llom&aacute;sok azonos&iacute;t&aacute;s&aacute;ra
	&eacute;s a kulcsok cser&eacute;j&eacute;re.  Emellett a
	titkos&iacute;t&aacute;shoz haszn&aacute;lt kulcsok
	id&#245;szakosan friss&uuml;lnek &eacute;s k&uuml;l&ouml;n
	eszk&ouml;z&ouml;k &aacute;llnak rendelkez&eacute;sre a
	bet&ouml;r&eacute;si k&iacute;s&eacute;rletek
	&eacute;szlel&eacute;s&eacute;re (&eacute;s azok
	elh&aacute;r&iacute;t&aacute;s&aacute;ra).  A vezet&eacute;k
	n&eacute;lk&uuml;li h&aacute;l&oacute;zatok eset&eacute;ben
	m&aacute;sik elterjedt titkos&iacute;t&aacute;si protokoll a
	WPA.  Ez igaz&aacute;b&oacute;l 802.11i el&#245;dj&eacute;nek
	tekinthet&#245;, amelyet egy ipari csoport defini&aacute;lt,
	am&iacute;g a 802.11i min&#245;s&iacute;t&eacute;s alatt
	&aacute;llt.  A WPA ennek megfelel&#245;en teljes&iacute;ti a
	802.11i szabv&aacute;ny elv&aacute;r&aacute;sainak egy
	r&eacute;sz&eacute;t &eacute;s kifejezetten a r&eacute;gi
	hardverek sz&aacute;m&aacute;ra k&eacute;sz&uuml;lt.  A WPA
	m&#251;k&ouml;d&eacute;s&eacute;hez egyed&uuml;l a TKIP
	titkos&iacute;t&aacute;sra van sz&uuml;ks&eacute;g&uuml;nk,
	amely az eredeti WEP titkos&iacute;t&aacute;sb&oacute;l
	sz&aacute;rmazik.  A 802.11i engedi a TKIP
	haszn&aacute;lat&aacute;t, de az adatok
	k&oacute;dol&aacute;s&aacute;ra egy er&#245;sebb
	titkos&iacute;t&aacute;s, az AES-CCM ismeret&eacute;t is
	ig&eacute;nyli.  (Az AES a WPA eset&eacute;ben nem kell, mivel a
	r&eacute;gi eszk&ouml;z&ouml;k eset&eacute;ben
	t&uacute;ls&aacute;gosan k&ouml;lts&eacute;gesnek
	&iacute;t&eacute;lt&eacute;k meg a
	haszn&aacute;lat&aacute;t.)</para>

      <para>A fenti szabv&aacute;nyokon k&iacute;v&uuml;l a 802.11e a
	m&aacute;sik fontos szabv&aacute;ny, amire tekintettel kell
	lenn&uuml;nk.  Ez &iacute;rja le a 802.11
	h&aacute;l&oacute;zatokon a multim&eacute;di&aacute;s
	alkalmaz&aacute;sok k&ouml;zvet&iacute;t&eacute;s&eacute;hez,
	mint p&eacute;ld&aacute;ul a vide&oacute;k val&oacute;s
	idej&#251; lej&aacute;tsz&aacute;s&aacute;hoz vagy a VoIP (voice
	over IP) megval&oacute;s&iacute;t&aacute;s&aacute;hoz
	tartoz&oacute; protokollokat.  A 802.11i szabv&aacute;nyhoz
	hasonl&oacute;an a 802.11e is mag&aacute;ban foglal egy
	el&#245;zetes specifik&aacute;ci&oacute;t, amelyet WME
	(k&eacute;s&#245;bb pedig m&aacute;r WMM)-nek neveznek.  Ezt
	szint&eacute;n egy ipari csoport defini&aacute;lta a 802.11e
	r&eacute;szek&eacute;nt, amivel a 802.11e v&eacute;gs&#245;
	elfogad&aacute;s&aacute;ig tudj&aacute;k a
	multim&eacute;di&aacute;s ig&eacute;nyeket kiszolg&aacute;lni.
	Amit a 802.11e &eacute;s WME/WMM megold&aacute;saival
	kapcsolatban &eacute;rdemes tudnunk: a QoS (Quality of Service)
	protokoll &eacute;s m&aacute;s egy&eacute;b fejlett
	k&ouml;zeghozz&aacute;f&eacute;r&eacute;si protokollok
	seg&iacute;ts&eacute;g&eacute;vel a vezet&eacute;k
	n&eacute;lk&uuml;li h&aacute;l&oacute;zatokban
	lehet&#245;v&eacute; teszik a forgalom priorit&aacute;s szerinti
	&uuml;temez&eacute;s&eacute;t.  Ezen protokollok megfelel&#245;
	implement&aacute;ci&oacute;j&aacute;nak
	seg&iacute;ts&eacute;g&eacute;vel teh&aacute;t a fontosabb
	adatok nagy sebess&eacute;g&#251; k&uuml;ld&eacute;s&eacute;t
	&eacute;s &aacute;ramoltat&aacute;s&aacute;t vagyunk
	k&eacute;pesek el&eacute;rni.</para>

      <para>A &os; a 6.0 verzi&oacute; &oacute;ta ismeri a 802.11a,
	802.11b &eacute;s 802.11g szabv&aacute;nyokon alapj&aacute;n
	m&#251;k&ouml;d&#245; h&aacute;l&oacute;zatokat.  A WPA
	&eacute;s 802.11i biztons&aacute;gi protokollok (a 11a, 11b
	&eacute;s 11g szabv&aacute;nyok b&aacute;rmelyike eset&eacute;n)
	hasonl&oacute;k&eacute;ppen t&aacute;mogatottak, valamint a
	WME/WMM protokollok m&#251;k&ouml;d&eacute;s&eacute;hez
	sz&uuml;ks&eacute;ges QoS csak bizonyos vezet&eacute;k
	n&eacute;lk&uuml;li eszk&ouml;z&ouml;k eset&eacute;ben.</para>

    </sect2>

    <sect2 id="network-wireless-basic">
      <title>Kezdeti be&aacute;ll&iacute;t&aacute;sok</title>

      <sect3>
	<title>A rendszermag be&aacute;ll&iacute;t&aacute;sa</title>

	<para>A vezet&eacute;k n&eacute;lk&uuml;li
	  h&aacute;l&oacute;zatok haszn&aacute;lat&aacute;hoz egy
	  vezet&eacute;k n&eacute;lk&uuml;li h&aacute;l&oacute;zati
	  k&aacute;rty&aacute;ra lesz sz&uuml;ks&eacute;g&uuml;nk,
	  valamint a rendszermagban is be kell &aacute;ll&iacute;tani
	  ehhez a megfelel&#245; t&aacute;mogat&aacute;st.  Ez
	  ut&oacute;bbit t&ouml;bb k&uuml;l&ouml;nb&ouml;z&#245; modulra
	  szedt&eacute;k sz&eacute;t, &eacute;s ezek k&ouml;z&uuml;l
	  csak azokat kell be&aacute;ll&iacute;tani, amelyeket
	  t&eacute;nyleg haszn&aacute;lni is fogunk.</para>

	<para>El&#245;sz&ouml;r is teh&aacute;t kell egy vezet&eacute;k
	  n&eacute;lk&uuml;li eszk&ouml;z.  Az elterjedtebb
	  t&iacute;pusaik &aacute;ltal&aacute;ban az Atheos &aacute;ltal
	  gy&aacute;rtott alkatr&eacute;szeket tartalmazz&aacute;k.  Az
	  ilyen fajt&aacute;j&uacute; eszk&ouml;z&ouml;ket az
	  &man.ath.4; meghajt&oacute; kezeli, melyet &uacute;gy tudunk a
	  rendszer ind&iacute;t&aacute;sakor bet&ouml;lteni, ha a
	  <filename>/boot/loader.conf</filename>
	  &aacute;llom&aacute;nyba felvessz&uuml;k a k&ouml;vetkez&#245;
	  sort:</para>

	<programlisting>if_ath_load="YES"</programlisting>

	<para>Az Atheos meghajt&oacute;ja h&aacute;rom
	  k&uuml;l&ouml;n&aacute;ll&oacute; r&eacute;szre oszlik: maga a
	  meghajt&oacute; (&man.ath.4;), a hardveres r&eacute;teg, ami a
	  chipf&uuml;gg&#245; funkci&oacute;kat kezeli (&man.ath.hal.4;)
	  &eacute;s a keretek k&uuml;ld&eacute;s&eacute;vel kapcsolatban
	  az &aacute;tviteli sebess&eacute;g
	  megv&aacute;laszt&aacute;s&aacute;t lehet&#245;v&eacute;
	  tev&#245; algoritmus (ez itt most az ath_rate_sample).  Amikor
	  ezt a t&aacute;mogat&aacute;st modulk&eacute;nt
	  t&ouml;ltj&uuml;k be, ezek a f&uuml;gg&#245;s&eacute;gek
	  automatikusan felold&oacute;dnak.  Ha az Atheos
	  eszk&ouml;z&ouml;k helyett valamelyik m&aacute;sikhoz
	  tartoz&oacute; modult szeretn&eacute;nk haszn&aacute;lni,
	  akkor p&eacute;ld&aacute;ul az Intersil Prism eset&eacute;ben
	  a &man.wi.4; meghajt&oacute;t kell megadnunk:</para>

	<programlisting>if_wi_load="YES"</programlisting>

	<note>
	  <para>A le&iacute;r&aacute;s tov&aacute;bbi r&eacute;szeiben
	    az &man.ath.4; eszk&ouml;zt fogjuk haszn&aacute;lni, minden
	    m&aacute;s esetben ennek a nev&eacute;t kell csak
	    lecser&eacute;l&uuml;nk a p&eacute;ld&aacute;kban.  A
	    rendszerben el&eacute;rhet&#245; vezet&eacute;k
	    n&eacute;lk&uuml;li meghajt&oacute;k &eacute;s az
	    &aacute;ltaluk t&aacute;mogatott k&aacute;rty&aacute;k
	    list&aacute;ja a &os; Hardverjegyzetekben
	    tal&aacute;lhat&oacute;.  Ezek a jegyzetek a
	    k&uuml;l&ouml;nb&ouml;z&#245; architekt&uacute;r&aacute;kra
	    &eacute;s kiad&aacute;sokhoz a &os;
	    holnapj&aacute;r&oacute;l, a <ulink
	      url="http://www.FreeBSD.org/releases/index.html">Kiad&aacute;si jegyzetek</ulink>
	    oldalr&oacute;l &eacute;rhet&#245;ek el.  Ha a
	    vezet&eacute;k n&eacute;lk&uuml;li
	    eszk&ouml;z&uuml;nkh&ouml;z nem l&eacute;tezik nat&iacute;v
	    &os;-s meghajt&oacute;, akkor az <link
	    linkend="config-network-ndis">NDIS</link> meghajt&oacute;
	    seg&iacute;ts&eacute;g&eacute;vel ak&aacute;r
	    k&ouml;zvetlen&uuml;l a &windows;-os
	    meghajt&oacute;j&aacute;t is haszn&aacute;lhatjuk.</para>
	</note>

	<para>&os;&nbsp;7.<replaceable>X</replaceable> eset&eacute;n az
	  eszk&ouml;zmeghajt&oacute;
	  be&aacute;ll&iacute;t&aacute;s&aacute;val egy&uuml;tt a 802.11
	  h&aacute;l&oacute;zatok t&aacute;mogat&aacute;s&aacute;t is be
	  kell t&ouml;lten&uuml;nk a rendszermagba.  Ez az &man.ath.4;
	  meghajt&oacute; eset&eacute;ben a legal&aacute;bb a
	  &man.wlan.4;, <literal>wlan_scan_ap</literal> &eacute;s
	  <literal>wlan_scan_sta</literal> modulok
	  bet&ouml;lt&eacute;s&eacute;t jelenti.  A &man.wlan.4; modul a
	  vezet&eacute;kn&eacute;lk&uuml;li eszk&ouml;z
	  meghajt&oacute;programj&aacute;val egy&uuml;tt
	  t&ouml;lt&#245;dik be, m&iacute;g a t&ouml;bbi modult a
	  <filename>/boot/loader.conf</filename> &aacute;llom&aacute;ny
	  haszn&aacute;lat&aacute;val kell a
	  rendszerind&iacute;t&aacute;s sor&aacute;n
	  bet&ouml;lten&uuml;nk:</para>

	<programlisting>wlan_scan_ap_load="YES"
wlan_scan_sta_load="YES"</programlisting>

	<para>A &os;&nbsp;8.0 kiad&aacute;st&oacute;l
	  kezd&#245;d&#245;en ezek a modulok r&eacute;szei a &man.wlan.4;
	  meghajt&oacute;nak, amely a h&aacute;l&oacute;zati
	  k&aacute;rtya meghajt&oacute;j&aacute;val egy&uuml;tt mindig
	  automatikusan bet&ouml;lt&#245;dik.</para>

	<para>Emellett m&eacute;g azokra a modulokra is
	  sz&uuml;ks&eacute;g&uuml;nk van, amelyek a haszn&aacute;lni
	  k&iacute;v&aacute;nt biztons&aacute;gi protokollokhoz
	  ny&uacute;jtanak kriptogr&aacute;fiai
	  t&aacute;mogat&aacute;st.  Ezek hivatalosan a &man.wlan.4;
	  modul k&eacute;r&eacute;s&eacute;re automatikusan
	  bet&ouml;lt&#245;dnek, azonban itt most manu&aacute;lisan
	  &aacute;ll&iacute;tjuk be.  Erre a c&eacute;lra a
	  k&ouml;vetkez&#245; modulokat tal&aacute;ljuk:
	  &man.wlan.wep.4;, &man.wlan.ccmp.4; &eacute;s
	  &man.wlan.tkip.4;.  A &man.wlan.ccmp.4; &eacute;s
	  &man.wlan.tkip.4; meghajt&oacute;k csak akkor fognak kelleni,
	  ha a WPA &eacute;s/vagy a 802.11i biztons&aacute;gi
	  protokollokat haszn&aacute;ljuk.  Amennyiben a
	  h&aacute;l&oacute;zatunkon nincs titkos&iacute;t&aacute;s,
	  akkor m&eacute;g a &man.wlan.wep.4; t&aacute;mogat&aacute;s
	  sem kell.  Ezeket a modulok &uacute;gy lehet bet&ouml;lteni a
	  rendszerind&iacute;t&aacute;sn&aacute;l, ha felvessz&uuml;k a
	  k&ouml;vetkez&#245; sorokat a
	  <filename>/boot/loader.conf</filename>
	  &aacute;llom&aacute;nyba:</para>

	<programlisting>wlan_wep_load="YES"
wlan_ccmp_load="YES"
wlan_tkip_load="YES"</programlisting>

	<para>Miut&aacute;n ezt megcsin&aacute;ltuk, egyszer&#251;en
	  csak ind&iacute;tsuk &uacute;jra a g&eacute;p&uuml;nket.  Ha
	  m&eacute;g nem akarjuk &uacute;jraind&iacute;tani a
	  g&eacute;pet, akkor a &man.kldload.8; parancs
	  seg&iacute;ts&eacute;g&eacute;vel ak&aacute;r k&eacute;zzel is
	  bet&ouml;lthetj&uuml;k az el&#245;bb felsorolt
	  modulokat.</para>

	<note>
	  <para>Ha nem akarunk modulokat haszn&aacute;lni, a
	    m&#251;k&ouml;d&eacute;shez sz&uuml;ks&eacute;ges
	    meghajt&oacute;kat a rendszermagba is be tudjuk
	    &eacute;p&iacute;teni a k&ouml;vetkez&#245; sorok
	    megad&aacute;s&aacute;val a rendszermag
	    be&aacute;ll&iacute;t&aacute;sait tartalmaz&oacute;
	    &aacute;llom&aacute;nyban:</para>

	  <programlisting>device wlan                # a 802.11 t&aacute;mogat&aacute;sa
device wlan_wep            # 802.11 WEP  t&aacute;mogat&aacute;s
device wlan_ccmp           # 802.11 CCMP t&aacute;mogat&aacute;s
device wlan_tkip           # 802.11 TKIP t&aacute;mogat&aacute;s
device wlan_amrr           # AMRR forgalomvez&eacute;rl&eacute;si algoritmus
device ath                 # Atheros IEEE 802.11 vezet&eacute;k n&eacute;lk&uuml;li h&aacute;l&oacute;zati meghajt&oacute;
device ath_hal             # az Atheros meghajt&oacute; hardveres r&eacute;tege
options AH_SUPPORT_AR5416  # az AR5416 tx/rx le&iacute;r&oacute;k enged&eacute;lyez&eacute;se
device ath_rate_sample     # SampleRate forgalomvez&eacute;rl&eacute;si algoritmus</programlisting>

	  <para>Hozz&aacute;tessz&uuml;k, hogy az al&aacute;bbi sorok
	    hozz&aacute;ad&aacute;sa a &os; 7.<replaceable>X</replaceable>
	    v&aacute;ltozat&aacute;ban k&ouml;telez&#245;, m&aacute;s
	    verzi&oacute;kn&aacute;l viszont nem:</para>

	  <programlisting>device wlan_scan_ap        # a 802.11 AP m&oacute;d&uacute; keres&eacute;s
device wlan_scan_sta       # a 802.11 STA m&oacute;d&uacute; keres&eacute;s</programlisting>

	  <para>Az el&#245;bbiek megad&aacute;s&aacute;val
	    ford&iacute;tsuk &uacute;jra &eacute;s telep&iacute;ts&uuml;k
	    a rendszermagot, majd ind&iacute;tsuk &uacute;jra a
	    sz&aacute;m&iacute;t&oacute;g&eacute;p&uuml;nket.</para>
	</note>

	<para>Miut&aacute;n a rendszer&uuml;nk &uacute;jra elindult, a
	  rendszer ind&iacute;t&aacute;s sor&aacute;n gener&aacute;lt
	  &uuml;zenetei k&ouml;z&ouml;tt tal&aacute;lnunk kell
	  valamennyi inform&aacute;ci&oacute;t a felismert
	  vezet&eacute;k n&eacute;lk&uuml;li eszk&ouml;z&ouml;kr&#245;l.
	  P&eacute;ld&aacute;ul:</para>

	<screen>ath0: &lt;Atheros 5212&gt; mem 0x88000000-0x8800ffff irq 11 at device 0.0 on cardbus1
ath0: [ITHREAD]
ath0: AR2413 mac 7.9 RF2413 phy 4.5</screen>
      </sect3>
    </sect2>

    <sect2>
      <title>Az infrastruktur&aacute;lis m&#251;k&ouml;d&eacute;si
	m&oacute;d</title>

      <para>&Aacute;ltal&aacute;ban az infrastruktur&aacute;lis avagy a
	BBS m&oacute;d haszn&aacute;lata a gyakori.  Ebben a
	m&#251;k&ouml;d&eacute;si m&oacute;dban adott
	sz&aacute;m&uacute; vezet&eacute;k n&eacute;lk&uuml;li
	hozz&aacute;f&eacute;r&eacute;si pont csatlakozik a
	hagyom&aacute;nyos h&aacute;l&oacute;zatra.  Mindegyik
	vezet&eacute;k n&eacute;lk&uuml;li h&aacute;l&oacute;zatnak
	saj&aacute;t neve van, amit a h&aacute;l&oacute;zat
	SSID-j&eacute;nek h&iacute;vunk.  A vezet&eacute;k
	n&eacute;lk&uuml;li kliensek ezekhez a vezet&eacute;k
	n&eacute;lk&uuml;li hozz&aacute;f&eacute;r&eacute;si pontokhoz
	kapcsol&oacute;dnak.</para>

      <sect3>
	<title>A &os;-s kliensek haszn&aacute;lata</title>

	<sect4>
	  <title>Hogyan keress&uuml;nk hozz&aacute;f&eacute;r&eacute;si
	    pontokat</title>

	  <para>A h&aacute;l&oacute;zatok keres&eacute;s&eacute;hez az
	    <command>ifconfig</command> paranccsal tudunk nekifogni.
	    Egy ilyen k&eacute;r&eacute;s kiszolg&aacute;l&aacute;sa
	    eltarthat n&eacute;h&aacute;ny pillanatig, mivel ekkor a
	    rendszernek v&eacute;gig kell b&oacute;kl&aacute;sznia az
	    &ouml;sszes el&eacute;rhet&#245; frekvenci&aacute;t
	    &eacute;s azokon hozz&aacute;f&eacute;r&eacute;si pontok
	    ut&aacute;n kutatni.  Egyed&uuml;l a
	    rendszeradminisztr&aacute;tor kezdem&eacute;nyezheti ezeket
	    a keres&eacute;seket:</para>

	  <screen>&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable> create wlandev <replaceable>ath0</replaceable></userinput>
&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable> up scan</userinput>
SSID/MESH ID    BSSID              CHAN RATE  S:N     INT CAPS
dlinkap         00:13:46:49:41:76   11   54M -90:96   100 EPS  WPA WME
freebsdap       00:11:95:c3:0d:ac    1   54M -83:96   100 EPS  WPA</screen>

	  <note>
	    <para>Csak <option>up</option> jelz&eacute;s&#251;
	      fel&uuml;leten tudunk h&aacute;l&oacute;zatokat keresni.
	      Tov&aacute;bbi keres&eacute;sekre m&aacute;r nincs
	      sz&uuml;ks&eacute;g a fel&uuml;let <option>up</option>
	      &aacute;llapotban tart&aacute;s&aacute;hoz.</para>
	  </note>

	  <note>
	    <para>&os;&nbsp;7.<replaceable>X</replaceable> eset&eacute;n
	      a <devicename>wlan<replaceable>0</replaceable></devicename>
	      eszk&ouml;z helyett k&ouml;zvetlen&uuml;l az adott
	      eszk&ouml;z nev&eacute;t kell megadnunk,
	      p&eacute;ld&aacute;ul
	      <devicename><replaceable>ath0</replaceable></devicename>.
	      Az im&eacute;nti sorokat ennek megfelel&#245;en
	      teh&aacute;t ebben az esetben &iacute;gy kell
	      &eacute;rtelmezni:</para>

	    <screen>&prompt.root; <userinput>ifconfig <replaceable>ath0</replaceable> up scan</userinput></screen>

	    <para>A le&iacute;r&aacute;s tov&aacute;bbi
	      r&eacute;sz&eacute;ben a
	      &os;&nbsp;7.<replaceable>X</replaceable>
	      felhaszn&aacute;l&oacute;knak ezen s&eacute;ma
	      alapj&aacute;n kell haszn&aacute;lniuk a parancsokat
	      &eacute;s a konfigur&aacute;ci&oacute;s
	      be&aacute;ll&iacute;t&aacute;sokat.</para>
	  </note>

	  <para>A keres&eacute;s sor&aacute;n keletkez&#245;
	    list&aacute;ban l&aacute;thatjuk megtal&aacute;lt BBS vagy
	    IBBS fajt&aacute;j&uacute; h&aacute;l&oacute;zatokat.  A
	    h&aacute;l&oacute;zatok neve &eacute;s
	    <literal>SSID</literal>-ja mellett m&eacute;g megjelenik egy
	    <literal>BSSID</literal> oszlop is, ahol a
	    hozz&aacute;f&eacute;r&eacute;si pontok MAC-c&iacute;me
	    szerepel.  A <literal>CAPS</literal> oszlop az egyes
	    &aacute;llom&aacute;sok tulajdons&aacute;gait adja
	    meg:</para>

	  <variablelist>
	    <varlistentry>
	      <term><literal>E</literal></term>

	      <listitem>
		<para>Extended Service Set (ESS): az
		  &aacute;llom&aacute;s egy infrastruktur&aacute;lis
		  vagyis BBS h&aacute;l&oacute;zat r&eacute;sze.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term><literal>I</literal></term>

	      <listitem>
		<para>IBSS/ad-hoc h&aacute;l&oacute;zat: az
		  &aacute;llom&aacute;s egy ad-hoc h&aacute;l&oacute;zat
		  r&eacute;sze.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term><literal>P</literal></term>

	      <listitem>
		<para>Privacy: a BBS-en bel&uuml;l minden keretet
		  titkos&iacute;tani kell.  Teh&aacute;t a BSS arra
		  k&ouml;telezi az &aacute;llom&aacute;st, hogy WEP,
		  TKIP vagy AES-CCMP titkos&iacute;t&aacute;s
		  haszn&aacute;lat&aacute;val k&oacute;dolja a
		  h&aacute;l&oacute;zat tagjai k&ouml;z&ouml;tt
		  k&ouml;zleked&#245; kereteket.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term><literal>S</literal></term>

	      <listitem>
		<para>Short Preamble: a h&aacute;l&oacute;zatban
		  r&ouml;vid bevezet&#245;jeleket haszn&aacute;lnak (a
		  802.11b High Rate/DSSS PHY
		  el&#245;&iacute;r&aacute;sai szerint), ahol a
		  szokv&aacute;nyos 128&nbsp;bites
		  szinkroniz&aacute;ci&oacute;s mez&#245; hossza csak
		  56&nbsp;bit.</para>
	      </listitem>
	    </varlistentry>

	    <varlistentry>
	      <term><literal>s</literal></term>

	      <listitem>
		<para>Short Slot Time: a 802.11g h&aacute;l&oacute;zat
		  r&ouml;vid slotid&#245;t haszn&aacute;l, mivel nem
		  tal&aacute;lhat&oacute;ak benne r&eacute;gi (802.11b
		  szabv&aacute;ny&uacute;)
		  &aacute;llom&aacute;sok.</para>
	      </listitem>
	    </varlistentry>
	  </variablelist>

	  <para>A jelenleg ismert h&aacute;l&oacute;zatok
	    list&aacute;j&aacute;t &iacute;gy tudjuk
	    lek&eacute;rdezni:</para>

	  <screen>&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable> list scan</userinput></screen>

	  <para>Ezt az inform&aacute;ci&oacute;t maga az adapter
	    automatikusan, vagy a felhaszn&aacute;l&oacute; tudja
	    friss&iacute;teni a <option>scan</option>
	    k&eacute;r&eacute;s kiad&aacute;s&aacute;val.  Az elavult
	    adatok magukt&oacute;l t&ouml;rl&#245;dnek a
	    gyors&iacute;t&oacute;t&aacute;rb&oacute;l, &iacute;gy
	    id&#245;vel a lista zsugorodni fog, hacsak nem keres&uuml;nk
	    folyamatosan h&aacute;l&oacute;zatokat.</para>

	</sect4>

	<sect4>
	  <title>Alapvet&#245; be&aacute;ll&iacute;t&aacute;sok</title>

	  <para>Ebben a szakaszban arra mutatunk p&eacute;ld&aacute;kat,
	    hogy mik&eacute;nt tudunk &os; alatt
	    titkos&iacute;t&aacute;s n&eacute;lk&uuml;l haszn&aacute;lni
	    egy vezet&eacute;k n&eacute;lk&uuml;li
	    h&aacute;l&oacute;zati k&aacute;rty&aacute;t.  Miut&aacute;n
	    elsaj&aacute;t&iacute;tottuk az itt szerepl&#245;
	    ismereteket, hat&aacute;rozottan javasoljuk, hogy a
	    vezet&eacute;k n&eacute;lk&uuml;li
	    h&aacute;l&oacute;zatunkat <link
	    linkend="network-wireless-wpa">WPA</link>
	    haszn&aacute;lat&aacute;val &aacute;ll&iacute;tsuk
	    be.</para>

	  <para>A vezet&eacute;k n&eacute;lk&uuml;li
	    h&aacute;l&oacute;zatok be&aacute;ll&iacute;t&aacute;sa
	    h&aacute;rom elemi l&eacute;p&eacute;sb&#245;l
	    &eacute;p&uuml;l fel: a hozz&aacute;f&eacute;r&eacute;si
	    pont kiv&aacute;laszt&aacute;sa, az &aacute;llom&aacute;sunk
	    hiteles&iacute;t&eacute;se &eacute;s az IP-c&iacute;m
	    be&aacute;ll&iacute;t&aacute;sa.  A k&ouml;vetkez&#245;kben
	    ezeket a l&eacute;p&eacute;seket vitatjuk meg.</para>

	  <sect5>
	    <title>A hozz&aacute;f&eacute;r&eacute;si pont
	      kiv&aacute;laszt&aacute;sa</title>

	    <para>A legt&ouml;bb esetben hagyjuk, hogy a rendszer
	      v&aacute;lassza ki mag&aacute;nak a
	      k&uuml;l&ouml;nb&ouml;z&#245; heurisztik&aacute;k
	      alapj&aacute;n a legink&aacute;bb megfelel&#245;
	      hozz&aacute;f&eacute;r&eacute;si pontot.  Ez az
	      alap&eacute;rtelmezett tev&eacute;kenys&eacute;g, amikor
	      aktiv&aacute;ljuk a fel&uuml;letet vagy valamilyen
	      m&aacute;s m&oacute;don, p&eacute;ld&aacute;ul
	      az<filename>/etc/rc.conf</filename>
	      &aacute;llom&aacute;nyb&oacute;l hivatkozunk
	      r&aacute;:</para>

	    <programlisting>wlans_ath0="wlan0"
ifconfig_wlan0="DHCP"</programlisting>

	    <note>
	      <para>A kor&aacute;bban eml&iacute;tettek szerint a
		&os;&nbsp;7.<replaceable>X</replaceable>
		felhaszn&aacute;l&oacute;knak csak a
		k&aacute;rty&aacute;t kell
		be&aacute;ll&iacute;tani:</para>

	      <programlisting>ifconfig_ath0="DHCP"</programlisting>
	    </note>

	    <para>Ha viszont t&ouml;bb hozz&aacute;f&eacute;r&eacute;si
	      pont k&ouml;z&uuml;l mi magunk akarunk kiv&aacute;lasztani
	      egyet, akkor ezt az SSID megad&aacute;s&aacute;val
	      tehetj&uuml;k meg:</para>

	    <programlisting>wlans_ath0="wlan0"
ifconfig_wlan0="ssid <replaceable>saj&aacute;t_ssid</replaceable> DHCP"</programlisting>

	    <para>Amikor olyan k&ouml;rnyezetben vagyunk, ahol t&ouml;bb
	      hozz&aacute;f&eacute;r&eacute;si pontnak is megegyezik az
	      SSID-ja (gyakran &iacute;gy pr&oacute;b&aacute;lj&aacute;k
	      egyszer&#251;s&iacute;teni azt, hogy automatikusan
	      v&aacute;ltani lehessen k&ouml;zt&uuml;k), akkor
	      sz&uuml;ks&eacute;g&uuml;nk lehet ezt egy adott
	      eszk&ouml;zh&ouml;z hozz&aacute;rendelni.  Ebben az
	      esetben a hozz&aacute;f&eacute;r&eacute;si pont
	      BSSID-j&aacute;t is defini&aacute;lni kell (&eacute;s az
	      SSID-t ak&aacute;r el is hagyhatjuk):</para>

	    <programlisting>wlans_ath0="wlan0"
ifconfig_wlan0="ssid <replaceable>saj&aacute;t_ssid</replaceable> bssid <replaceable>xx:xx:xx:xx:xx:xx</replaceable> DHCP"</programlisting>

	    <para>M&aacute;s m&oacute;dokon is k&eacute;pesek vagyunk
	      szab&aacute;lyozni a hozz&aacute;f&eacute;r&eacute;si
	      pontok megv&aacute;laszt&aacute;s&aacute;t,
	      p&eacute;ld&aacute;ul a rendszer&uuml;nk &aacute;ltal
	      vizsg&aacute;lt frekvencias&aacute;vok
	      megad&aacute;s&aacute;val.  Ez olyankor tud hasznos lenni,
	      ha t&ouml;bbs&aacute;vos vezet&eacute;k
	      n&eacute;lk&uuml;li k&aacute;rty&aacute;nk van, &eacute;s
	      az &ouml;sszes tartom&aacute;ny
	      v&eacute;gigp&aacute;szt&aacute;z&aacute;sa
	      t&uacute;ls&aacute;gosan sok id&#245;t venne el.  Ezt a
	      m&#251;velet a <option>mode</option> param&eacute;ter
	      megad&aacute;s&aacute;val lehet egy konkr&eacute;t
	      s&aacute;vra lesz&#251;k&iacute;teni,
	      p&eacute;ld&aacute;ul a</para>

	    <programlisting>wlans_ath0="wlan0"
ifconfig_wlan0="mode <replaceable>11g</replaceable> ssid <replaceable>saj&aacute;t_ssid</replaceable> DHCP"</programlisting>

	    <para>be&aacute;ll&iacute;t&aacute;s hat&aacute;s&aacute;ra
	      a k&aacute;rtya 802.11g m&oacute;dban fog &uuml;zemelni,
	      ami kiz&aacute;r&oacute;lag csak 2,4&nbsp;GHz-es
	      frekvenci&aacute;kon haszn&aacute;lhat&oacute;, &iacute;gy
	      az 5&nbsp;GHz-es csatorn&aacute;kat egyszer&#251;en
	      figyelmen k&iacute;v&uuml;l hagyjuk.  Ugyanezt a
	      <option>channel</option> param&eacute;terrel is meg tudjuk
	      oldani, mivel &iacute;gy a m&#251;k&ouml;d&eacute;st egy
	      adott frekvenci&aacute;ra korl&aacute;tozzuk, valamint a
	      <option>chanlist</option> param&eacute;terrel, ahol a
	      p&aacute;szt&aacute;zand&oacute; csatorn&aacute;kat
	      sorolhatjuk fel.  Ezekr&#245;l a
	      param&eacute;terekr&#245;l r&eacute;szletesebb
	      le&iacute;r&aacute;st az &man.ifconfig.8; man oldalon
	      tal&aacute;lhatunk.</para>
	  </sect5>

	  <sect5>
	    <title>Hiteles&iacute;t&eacute;s</title>

	    <para>Miut&aacute;n sikeresen kiv&aacute;lasztottuk a
	      sz&aacute;munkra megfelel&#245;
	      hozz&aacute;f&eacute;r&eacute;si pontot, az adatok
	      k&uuml;ld&eacute;s&eacute;hez az
	      &aacute;llom&aacute;sunknak valamilyen m&oacute;don
	      hiteles&iacute;tenie kell mag&aacute;t.  A
	      hiteles&iacute;t&eacute;s t&ouml;bb m&oacute;don
	      t&ouml;rt&eacute;nhet.  Erre a leggyakrabban alkalmazott
	      s&eacute;m&aacute;t ny&iacute;lt
	      hiteles&iacute;t&eacute;snek (open authentication)
	      nevezik, ahol a h&aacute;l&oacute;zathoz tetsz&#245;leges
	      &aacute;llom&aacute;s csatlakozhat &eacute;s
	      kommunik&aacute;lhat vele.  Ezt a t&iacute;pus&uacute;
	      hiteles&iacute;t&eacute;st akkor &eacute;rdemes
	      haszn&aacute;lni, amikor a vezet&eacute;k
	      n&eacute;lk&uuml;li h&aacute;l&oacute;zatunkat
	      tesztelj&uuml;k.  M&aacute;s s&eacute;m&aacute;kban az
	      adatfolyam megind&iacute;t&aacute;s&aacute;hoz egy
	      titkos&iacute;t&aacute;si k&eacute;zfog&aacute;s
	      sz&uuml;ks&eacute;ges, vagy el&#245;re megosztott kulcsok
	      esetleg jelszavak seg&iacute;ts&eacute;g&eacute;vel, vagy
	      bonyolultabb s&eacute;m&aacute;k eset&eacute;ben itt
	      m&eacute;g olyan k&uuml;l&ouml;nb&ouml;z&#245;
	      h&aacute;tt&eacute;rszolg&aacute;ltat&aacute;sok is
	      megjelennek, mint p&eacute;ld&aacute;ul a RADIUS.  A
	      legt&ouml;bb felhaszn&aacute;l&oacute; a ny&iacute;lt
	      hiteles&iacute;t&eacute;st haszn&aacute;lja, ami egyben az
	      alap&eacute;rtelmez&eacute;s is.  A m&aacute;sik
	      legelterjedtebb be&aacute;ll&iacute;t&aacute;s a WPA-PSK,
	      avagy WPA Personal, amelyr&#245;l <link
	      linkend="network-wireless-wpa-wpa-psk">lentebb</link>
	      m&eacute;g sz&oacute;lni fogunk.</para>

	    <note>
	      <para>Ha &apple; &airport; Extreme Base Station
		t&iacute;pus&uacute; hozz&aacute;f&eacute;r&eacute;si
		pontunk van, akkor az osztott kulcs&uacute;
		hiteles&iacute;t&eacute;s mellett egy WEP kulcsot is be
		&aacute;ll&iacute;tanunk.  Ezt az
		<filename>/etc/rc.conf</filename>
		&aacute;llom&aacute;nyban vagy a &man.wpa.supplicant.8;
		programban tehetj&uuml;k meg.  Ha egyetlen &airport;
		b&aacute;zis&aacute;llom&aacute;sunk van, akkor az
		el&eacute;r&eacute;st valahogy &iacute;gy tudjuk
		be&aacute;ll&iacute;tani:</para>

	      <programlisting>wlans_ath0="wlan0"
ifconfig_wlan0="authmode shared wepmode on weptxkey <replaceable>1</replaceable> wepkey <replaceable>01234567</replaceable> DHCP"</programlisting>

	      <para>&Aacute;ltal&aacute;noss&aacute;gban v&eacute;ve
		elmondhatjuk, hogy az osztott kulcs&uacute;
		hiteles&iacute;t&eacute;st ink&aacute;bb
		ker&uuml;lj&uuml;k el, mivel WEP kulcsok
		haszn&aacute;lat&aacute;ra alapszik &eacute;s
		r&aacute;ad&aacute;sul olyan m&oacute;don, hogy nagyon
		k&ouml;nny&#251; felt&ouml;rni.  Ha m&aacute;r
		mindenk&eacute;ppen a WEP mellett kell
		d&ouml;nten&uuml;nk (p&eacute;ld&aacute;ul a
		r&eacute;gebbi eszk&ouml;z&ouml;kkel &iacute;gy tudunk
		csak kompatibilisek maradni), akkor jobban
		j&aacute;runk, ha a <literal>ny&iacute;lt</literal>
		hiteles&iacute;t&eacute;shez alkalmazzuk.  A WEP
		haszn&aacute;lat&aacute;t &eacute;rint&#245;
		tov&aacute;bbi inform&aacute;ci&oacute;kat a <xref
		linkend="network-wireless-wep">ban
		tal&aacute;ljuk.</para>
	    </note>
	  </sect5>

	  <sect5>
	    <title>IP-c&iacute;m szerz&eacute;se DHCP
	      haszn&aacute;lat&aacute;val</title>

	    <para>Miut&aacute;n kiv&aacute;lasztottunk egy
	      hozz&aacute;f&eacute;r&eacute;si pontot &eacute;s
	      be&aacute;ll&iacute;tottuk a hiteles&iacute;t&eacute;s
	      param&eacute;tereit, egy IP-c&iacute;m is kelleni fog a
	      kommunik&aacute;ci&oacute;hoz.  Az esetek
	      t&uacute;lnyom&oacute; r&eacute;sz&eacute;ben DHCP-n
	      kereszt&uuml;l kapunk IP-c&iacute;met a vezet&eacute;k
	      n&eacute;lk&uuml;li kapcsolatunkhoz.  Ezt &uacute;gy
	      &eacute;rhetj&uuml;k el, ha egyszer&#251;en megnyitjuk az
	      <filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyt
	      &eacute;s az al&aacute;bbihoz hasonl&oacute; m&oacute;don
	      felvessz&uuml;k a <literal>DHCP</literal>
	      param&eacute;tert az eszk&ouml;z&uuml;nk
	      be&aacute;ll&iacute;t&aacute;saihoz:</para>

	    <programlisting>wlans_ath0="DHCP"
ifconfig_wlan0="DHCP"</programlisting>

	    <para>&Iacute;gy m&aacute;r k&eacute;szen is &aacute;llunk a
	      vezet&eacute;k n&eacute;lk&uuml;li fel&uuml;let
	      haszn&aacute;lat&aacute;ra:</para>

	    <screen>&prompt.root; <userinput>/etc/rc.d/netif start</userinput></screen>

	    <para>Ahogy a fel&uuml;let
	      m&#251;k&ouml;d&#245;k&eacute;pess&eacute; v&aacute;lik,
	      az <command>ifconfig</command> parancs
	      seg&iacute;ts&eacute;g&eacute;vel ellen&#245;rizni is
	      tudjuk az <devicename>ath0</devicename> fel&uuml;let
	      &aacute;llapot&aacute;t:</para>

	    <screen>&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable></userinput>
wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        ether 00:11:95:d5:43:62
        inet 192.168.1.100 netmask 0xffffff00 broadcast 192.168.1.255
        media: IEEE 802.11 Wireless Ethernet OFDM/54Mbps mode 11g
        status: associated
        ssid dlinkap channel 11 (2462 Mhz 11g) bssid 00:13:46:49:41:76
        country US ecm authmode OPEN privacy OFF txpower 21.5 bmiss 7
        scanvalid 60 bgscan bgscanintvl 300 bgscanidle 250 roam:rssi 7
        roam:rate 5 protmode CTS wme burst</screen>

	    <para>A <literal>status: associated</literal> azt jelenti,
	      hogy sikeresen csatlakoztunk egy vezet&eacute;k
	      n&eacute;lk&uuml;li h&aacute;l&oacute;zathoz (jelen
	      esetben ez a <literal>dlinkap</literal>).  A
	      <literal>bssid 00:13:46:49:41:76</literal> r&eacute;sz a
	      hozz&aacute;f&eacute;r&eacute;si pont
	      MAC-c&iacute;m&eacute;t tartalmazza.  Az
	      <literal>authmode OPEN</literal> pedig arr&oacute;l
	      sz&aacute;mol be, hogy a kommunik&aacute;ci&oacute; nem
	      titkos&iacute;tott.</para>

	  </sect5>

	  <sect5>
	    <title>Statikus IP-c&iacute;m</title>

	    <para>Ha valami okb&oacute;l nem tudjuk az
	      IP-c&iacute;m&uuml;nket DHCP szerveren kereszt&uuml;l
	      lek&eacute;rni, be&aacute;ll&iacute;thatunk
	      r&ouml;gz&iacute;tett IP-c&iacute;met is.  Ehhez nem kell
	      m&aacute;st tenn&uuml;nk, mint a kor&aacute;bban
	      bemutatott <literal>DHCP</literal> kulcssz&oacute;t
	      kicser&eacute;lni egy konkr&eacute;t c&iacute;mmel.  A
	      hozz&aacute;f&eacute;r&eacute;si ponthoz megadott
	      t&ouml;bbi param&eacute;tert azonban
	      felt&eacute;tlen&uuml;l hagyjuk meg:</para>

	    <programlisting>wlans_ath0="wlan0"
ifconfig_wlan0="inet <replaceable>192.168.1.100</replaceable> netmask <replaceable>255.255.255.0</replaceable>ssid <replaceable>saj&aacute;t_ssid</replaceable>i"</programlisting>

	  </sect5>
	</sect4>

	<sect4 id="network-wireless-wpa">
	  <title>WPA</title>

	  <para>A WPA (Wi-Fi Protected Access, vagyis v&eacute;dett
	    wi-fi hozz&aacute;f&eacute;r&eacute;s) a 802.11
	    szabv&aacute;nyokban haszn&aacute;latos biztons&aacute;gi
	    protokoll, amelyet a <link
	    linkend="network-wireless-wep">WEP</link>
	    gyenges&eacute;geinek &eacute;s megfelel&#245;
	    hiteles&iacute;t&eacute;s&eacute;nek
	    ellens&uacute;lyoz&aacute;s&aacute;ra dolgoztak ki.  A WPA a
	    802.1X hiteles&iacute;t&eacute;si protokolljait
	    er&#245;s&iacute;ti &eacute;s az adat
	    s&eacute;rtetlens&eacute;g&eacute;nek
	    meg&#245;rz&eacute;s&eacute;re a WEP helyett t&ouml;bb
	    titkos&iacute;t&aacute;si algoritmust is felhaszn&aacute;l.
	    A WPA &aacute;ltal ig&eacute;nyelt egyetlen
	    titkos&iacute;t&aacute;s a TKIP (Temporary Key Integrity
	    Protocol, vagyis az ideiglenes kulcs integrit&aacute;si
	    protokoll), amely a WEP &aacute;ltal az integrit&aacute;s
	    ellen&#245;rz&eacute;s&eacute;re &eacute;s a
	    bejut&aacute;sok &eacute;szlel&eacute;s&eacute;re &eacute;s
	    azok reag&aacute;l&aacute;s&aacute;ra sz&aacute;nt alap RC4
	    titkos&iacute;t&aacute;st b&#245;v&iacute;ti ki.  A TKIP a
	    r&eacute;gebbi hardvereken csup&aacute;n szoftveres
	    m&oacute;dos&iacute;t&aacute;ssal
	    m&#251;k&ouml;d&#245;k&eacute;pess&eacute; tehet&#245;.  Ez
	    a kompromisszum a v&eacute;delmet ugyan n&ouml;veli, de
	    m&eacute;g mindig kev&eacute;s a t&aacute;mad&aacute;sok
	    megfelel&#245; elh&aacute;r&iacute;t&aacute;s&aacute;hoz.  A
	    WPA a TKIP mellett tartalmazza m&eacute;g az AES-CCMP
	    titkos&iacute;t&aacute;st is, &eacute;s ennek a
	    haszn&aacute;lata javasolt.  Ezt a
	    specifik&aacute;ci&oacute;t gyakran WPA2 (vagy RSN)
	    n&eacute;ven emlegetik.</para>

	  <para>A WPA defini&aacute;l hiteles&iacute;t&eacute;si
	    &eacute;s titkos&iacute;t&aacute;si protokollokat.  A
	    hiteles&iacute;t&eacute;s &aacute;ltal&aacute;ban a
	    k&ouml;vetkez&#245; k&eacute;t technika egyike
	    alapj&aacute;n t&ouml;rt&eacute;nik: vagy 802.1X &eacute;s
	    egy h&aacute;tt&eacute;rszolg&aacute;ltat&aacute;s,
	    p&eacute;ld&aacute;ul a RADIUS
	    seg&iacute;ts&eacute;g&eacute;vel, vagy egy el&#245;re
	    megosztott kulcsot alkalmaz&oacute; minim&aacute;lis
	    k&eacute;zfog&aacute;ssal az &aacute;llom&aacute;s &eacute;s
	    a hozz&aacute;f&eacute;r&eacute;si pont k&ouml;z&ouml;tt.
	    Az el&#245;bbit gyakran WPA Enterprise-nak, m&iacute;g az
	    ut&oacute;bbit WPA Personalnak h&iacute;vj&aacute;k.  Mivel
	    a legt&ouml;bben nem &aacute;ll&iacute;tanak be egy komplett
	    RADIUS alap&uacute; szervert a vezet&eacute;k
	    n&eacute;lk&uuml;li h&aacute;l&oacute;zatukhoz, ez&eacute;rt
	    a WPA-PSK a WPA legink&aacute;bb elterjedten haszn&aacute;lt
	    v&aacute;ltozata.</para>

	  <para>A vezet&eacute;k n&eacute;lk&uuml;li kapcsolat &eacute;s
	    a hiteles&iacute;t&eacute;s (kulcs alapj&aacute;n vagy
	    szerverrel) vez&eacute;rl&eacute;s&eacute;t a
	    &man.wpa.supplicant.8; seg&eacute;dprogram v&eacute;gzi.
	    Ennek a programnak m&#251;k&ouml;d&eacute;s&eacute;hez egy
	    konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nyra van
	    sz&uuml;ks&eacute;ge, amely az
	    <filename>/etc/wpa_supplicant.conf</filename> n&eacute;ven
	    &eacute;rhet&#245; el.  Err&#245;l az
	    &aacute;llom&aacute;nyr&oacute;l b&#245;vebb
	    inform&aacute;ci&oacute;t a &man.wpa.supplicant.conf.5; man
	    oldal&aacute;n lelhet&uuml;nk.</para>

	  <sect5 id="network-wireless-wpa-wpa-psk">
	    <title>WPA-PSK</title>

	    <para>A WPA-PSK, m&aacute;s n&eacute;ven WPA-Personal, egy
	      adott jelsz&oacute; alapj&aacute;n gener&aacute;lt
	      el&#245;re megosztott kulcssal (pre-shared key, PSK)
	      m&#251;k&ouml;dik, amit a vezet&eacute;k
	      n&eacute;lk&uuml;li h&aacute;l&oacute;zatokban
	      mesterkulcs&eacute;nt haszn&aacute;lnak.  Ez azt jelenti,
	      hogy minden egyes vezet&eacute;k n&eacute;lk&uuml;li
	      felhaszn&aacute;l&oacute; ugyanazon a kulcson osztozik.  A
	      WPA-PSK olyan kis m&eacute;ret&#251;
	      h&aacute;l&oacute;zatok eset&eacute;ben megfelel&#245;,
	      ahol a hiteles&iacute;t&eacute;st elv&eacute;gz&#245;
	      szerver haszn&aacute;lata nem lehets&eacute;ges vagy nem
	      oldhat&oacute; meg.</para>

	    <warning>
	      <para>Mindig igyekezz&uuml;nk er&#245;s jelszavakat
		haszn&aacute;lni, melyek kell&#245;en hossz&uacute;ak
		&eacute;s sokf&eacute;le karaktert tartalmaznak,
		&eacute;s &iacute;gy nehezebben fejthet&#245;ek meg vagy
		t&ouml;rhet&#245;ek fel.</para>
	    </warning>

	    <para>El&#245;sz&ouml;r az
	      <filename>/etc/wpa_supplicant.conf</filename>
	      &aacute;llom&aacute;nyban &aacute;ll&iacute;tsuk be az
	      SSID-t &eacute;s a h&aacute;l&oacute;zatunkhoz
	      tartoz&oacute; el&#245;re megosztott kulcsot:</para>

	    <programlisting>network={
  ssid="freebsdap"
  psk="freebsdmall"
}</programlisting>

	    <para>Ezut&aacute;n az <filename>/etc/rc.conf</filename>
	      &aacute;llom&aacute;nyban jelezz&uuml;k, hogy a
	      vezet&eacute;k n&eacute;lk&uuml;li eszk&ouml;zt a WPA
	      seg&iacute;ts&eacute;g&eacute;vel &aacute;ll&iacute;tjuk
	      be &eacute;s az IP-c&iacute;met a DHCP szervert&#245;l
	      k&eacute;rj&uuml;k el:</para>

	    <programlisting>wlans_ath0="wlan0"
ifconfig_ath0="WPA DHCP"</programlisting>

	    <para>Innent&#245;l m&aacute;r fel is tudjuk
	      &eacute;leszteni a fel&uuml;letet:</para>

	    <screen>&prompt.root; <userinput><filename>/etc/rc.d/netif</filename> start</userinput>
Starting wpa_supplicant.
DHCPDISCOVER on wlan0 to 255.255.255.255 port 67 interval 5
DHCPDISCOVER on wlan0 to 255.255.255.255 port 67 interval 6
DHCPOFFER from 192.168.0.1
DHCPREQUEST on wlan0 to 255.255.255.255 port 67
DHCPACK from 192.168.0.1
bound to 192.168.0.254 -- renewal in 300 seconds.
wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
      ether 00:11:95:d5:43:62
      inet 192.168.0.254 netmask 0xffffff00 broadcast 192.168.0.255
      media: IEEE 802.11 Wireless Ethernet autoselect OFDM/36Mbps mode 11g
      status: associated
      ssid freebsdap channel 1 (2412 Mhz 11g) bssid 00:11:95:c3:0d:ac
      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF
      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan
      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS
      wme burst roaming MANUAL</screen>

	    <para>K&eacute;zzel is megpr&oacute;b&aacute;lhatjuk
	      elind&iacute;tani az <link
	      linkend="network-wireless-wpa-wpa-psk">el&#245;bb</link>
	      elk&eacute;sz&iacute;tett
	      <filename>/etc/wpa_supplicant.conf</filename>
	      &aacute;llom&aacute;ny haszn&aacute;lat&aacute;val:</para>

	    <screen>&prompt.root; <userinput>wpa_supplicant -i <replaceable>wlan0</replaceable> -c /etc/wpa_supplicant.conf</userinput>
Trying to associate with 00:11:95:c3:0d:ac (SSID='freebsdap' freq=2412 MHz)
Associated with 00:11:95:c3:0d:ac
WPA: Key negotiation completed with 00:11:95:c3:0d:ac [PTK=CCMP GTK=CCMP]
CTRL-EVENT-CONNECTED - Connection to 00:11:95:c3:0d:ac completed (auth) [id=0 id_str=]</screen>

	    <para>A k&ouml;vetkez&#245; parancs a
	      <command>dhclient</command> ind&iacute;t&aacute;sa legyen,
	      amivel megszerezz&uuml;k a DHCP szervert&#245;l az
	      IP-c&iacute;m&uuml;nket:</para>

	    <screen>&prompt.root; <userinput>dhclient <replaceable>wlan0</replaceable></userinput>
DHCPREQUEST on wlan0 to 255.255.255.255 port 67
DHCPACK from 192.168.0.1
bound to 192.168.0.254 -- renewal in 300 seconds.
&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable></userinput>
ath0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
      ether 00:11:95:d5:43:62
      inet 192.168.0.254 netmask 0xffffff00 broadcast 192.168.0.255
      media: IEEE 802.11 Wireless Ethernet OFDM/36Mbps mode 11g
      status: associated
      ssid freebsdap channel 1 (2412 Mhz 11g) bssid 00:11:95:c3:0d:ac
      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF
      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan
      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS
      wme burst roaming MANUAL</screen>

	    <note>
	      <para>Ha az <filename>/etc/rc.conf</filename>
		&aacute;llom&aacute;nyban szerepel a
		<literal>ifconfig_wlan0="DHCP"</literal> sor, akkor
		egy&aacute;ltal&aacute;n nem sz&uuml;ks&eacute;ges a
		<command>dhclient</command> parancs manu&aacute;lis
		kiad&aacute;sa, mivel a <command>dhclient</command>
		mag&aacute;t&oacute;l el fog indulni, miut&aacute;n a
		<command>wpa_supplicant</command> egyeztette a
		kulcsokat.</para>
	    </note>

	    <para>Amikor a DHCP nem haszn&aacute;lhat&oacute;,
	      megadhatunk a statikus IP-c&iacute;met is, miut&aacute;n a
	      <command>wpa_supplicant</command> sikeresen
	      lebonyol&iacute;totta a hiteles&iacute;t&eacute;st:</para>

	    <screen>&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable> inet <replaceable>192.168.0.100</replaceable> netmask <replaceable>255.255.255.0</replaceable></userinput>
&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable></userinput>
ath0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
      ether 00:11:95:d5:43:62
      inet 192.168.0.100 netmask 0xffffff00 broadcast 192.168.0.255
      media: IEEE 802.11 Wireless Ethernet OFDM/36Mbps mode 11g
      status: associated
      ssid freebsdap channel 1 (2412 Mhz 11g) bssid 00:11:95:c3:0d:ac
      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF
      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan
      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS
      wme burst roaming MANUAL</screen>

	    <para>Ha egy&aacute;ltal&aacute;n nem haszn&aacute;lunk DHCP
	      szervert, akkor nek&uuml;nk kell be&aacute;ll&iacute;tani
	      az alap&eacute;rtelmezett &aacute;tj&aacute;r&oacute;t
	      &eacute;s a n&eacute;vszervert is:</para>

	    <screen>&prompt.root; <userinput>route add default <replaceable>alap&eacute;rtelmezett_&aacute;tj&aacute;r&oacute;</replaceable></userinput>
&prompt.root; <userinput>echo "nameserver <replaceable>n&eacute;vszerver</replaceable>" &gt;&gt; /etc/resolv.conf</userinput></screen>

	  </sect5>

	  <sect5 id="network-wireless-wpa-eap-tls">
	    <title>WPA &eacute;s EAP-TLS</title>

	    <para>A m&aacute;sik m&oacute;d, ahogy a WPA
	      haszn&aacute;lhat&oacute;, az a 802.1X
	      hiteles&iacute;t&eacute;si szerveren kereszt&uuml;l
	      t&ouml;rt&eacute;nik, &eacute;s ebben az esetben a WPA
	      neve WPA-Enterprise.  Ez sokkal biztons&aacute;gosabb a
	      WPA-Personal el&#245;re kiosztott kulcsaival szemben.  A
	      WPA-Enterprise az EAP (Extensible Authentication Protocol,
	      azaz B&#245;v&iacute;thet&#245; hiteles&iacute;t&eacute;si
	      protokoll) haszn&aacute;lat&aacute;n alapszik.</para>

	    <para>Az EAP &ouml;nmaga nem v&eacute;gez
	      titkos&iacute;t&aacute;st, mivel &uacute;gy
	      alak&iacute;tott&aacute;k ki, hogy mag&aacute;t az EAP
	      protokollt kell egy titkos&iacute;tott j&aacute;raton
	      kereszt&uuml;l b&uacute;jtatni.  Az EAP
	      hiteles&iacute;t&eacute;si m&oacute;dszereinek t&ouml;bb
	      t&iacute;pus&aacute;t is kidolgozt&aacute;k, melyek
	      k&ouml;z&uuml;l a legismertebbek az EAP-TLS, EAP-TTLS
	      valamint a EAP-PEAP.</para>

	    <para>Az EAP-TLS (EAP sz&aacute;ll&iacute;t&aacute;si
	      r&eacute;tegbeli v&eacute;delemmel) a vezet&eacute;k
	      n&eacute;lk&uuml;li vil&aacute;gban egy nagyon j&oacute;l
	      t&aacute;mogatott hiteles&iacute;t&eacute;si protokoll,
	      mivel ez volt az els&#245; EAP m&oacute;dszer, amit a
	      <ulink url="http://www.wi-fi.org/">Wi-fi
	      sz&ouml;vets&eacute;g</ulink> j&oacute;v&aacute;hagyott.
	      Az EAP-TLS m&#251;k&ouml;d&eacute;s&eacute;hez
	      h&aacute;rom tan&uacute;s&iacute;tv&aacute;ny kell: egy
	      hiteles&iacute;t&#245; hat&oacute;s&aacute;gt&oacute;l
	      (Certificate Authority, CA), egy a
	      hiteles&iacute;t&eacute;st v&eacute;gz&#245;
	      szervert&#245;l &eacute;s egy a klienst&#245;l.  Ezzel az
	      EAP m&oacute;dszerrel mind a hiteles&iacute;t&#245;
	      szerver, mind a vezet&eacute;k n&eacute;lk&uuml;li kliens
	      k&uuml;l&ouml;n k&eacute;pviselik a saj&aacute;t
	      tan&uacute;s&iacute;tv&aacute;nyaikat, &eacute;s ezeket a
	      szervezet&uuml;nket hiteles&iacute;t&#245;
	      hat&oacute;s&aacute;g al&aacute;&iacute;r&aacute;sa
	      alapj&aacute;n ellen&#245;rzik.</para>

	    <para>A kor&aacute;bbiaknak megfelel&#245;en a
	      be&aacute;ll&iacute;t&aacute;sokat szint&eacute;n az
	      <filename>/etc/wpa_supplicant.conf</filename>
	      &aacute;llom&aacute;nyon kereszt&uuml;l
	      v&eacute;gezz&uuml;k el:</para>

	    <programlisting>network={
  ssid="freebsdap" <co id="co-tls-ssid">
  proto=RSN  <co id="co-tls-proto">
  key_mgmt=WPA-EAP <co id="co-tls-kmgmt">
  eap=TLS <co id="co-tls-eap">
  identity="loader" <co id="co-tls-id">
  ca_cert="/etc/certs/cacert.pem" <co id="co-tls-cacert">
  client_cert="/etc/certs/clientcert.pem" <co id="co-tls-clientcert">
  private_key="/etc/certs/clientkey.pem" <co id="co-tls-pkey">
  private_key_passwd="freebsdmallclient" <co id="co-tls-pwd">
}</programlisting>

	    <calloutlist>
	      <callout arearefs="co-tls-ssid">
		<para>Ez a mez&#245; adja meg a h&aacute;l&oacute;zat
		  nev&eacute;t (SSID).</para>
	      </callout>

	      <callout arearefs="co-tls-proto">
		<para>Itt az RSN (&ieee; 802.11i), vagyis a WPA2
		  protokollt haszn&aacute;ljuk.</para>
	      </callout>

	      <callout arearefs="co-tls-kmgmt">
		<para>A <literal>key_mgmt</literal> sor a
		  kulcskezel&eacute;si protokollt adja meg.  A mi
		  eset&uuml;nkben ez a WPA lesz, EAP
		  hiteles&iacute;t&eacute;ssel:
		  <literal>WPA-EAP</literal>.</para>
	      </callout>

	      <callout arearefs="co-tls-eap">
		<para>Ebben a mez&#245;ben az EAP m&oacute;dszert
		  nevezz&uuml;k meg a kapcsolathoz.</para>
	      </callout>

	      <callout arearefs="co-tls-id">
		<para>Az <literal>identity</literal> mez&#245; az EAP
		  eset&eacute;n haszn&aacute;lt azonos&iacute;t&oacute;t
		  tartalmazza.</para>
	      </callout>

	      <callout arearefs="co-tls-cacert">
		<para>A <literal>ca_cert</literal> mez&#245; a
		  hiteles&iacute;t&#245; hat&oacute;s&aacute;g
		  tan&uacute;s&iacute;tv&aacute;ny&aacute;t
		  t&aacute;rol&oacute; &aacute;llom&aacute;ny
		  el&eacute;r&eacute;si &uacute;tvonal&aacute;t adja
		  meg.  Ezt a szerver
		  tan&uacute;s&iacute;tv&aacute;ny&aacute;nak
		  hiteles&iacute;t&eacute;s&eacute;hez
		  haszn&aacute;ljuk.</para>
	      </callout>

	      <callout arearefs="co-tls-clientcert">
		<para>A <literal>client_cert</literal> sor a kliens
		  tan&uacute;s&iacute;tv&aacute;ny&aacute;t
		  tartalmaz&oacute; &aacute;llom&aacute;ny
		  el&eacute;r&eacute;si &uacute;tvonal&aacute;t adja
		  meg.  Ennek a vezet&eacute;k n&eacute;lk&uuml;li
		  h&aacute;l&oacute;zat minden egyes kliense
		  eset&eacute;ben egyedinek kell lennie.</para>
	      </callout>

	      <callout arearefs="co-tls-pkey">
		<para>A <literal>private_key</literal> mez&#245; a
		  kliens tan&uacute;s&iacute;tv&aacute;n&aacute;ynak
		  priv&aacute;t kulcs&aacute;t t&aacute;rol&oacute;
		  &aacute;llom&aacute;ny el&eacute;r&eacute;si
		  &uacute;tj&aacute;t adja meg.</para>
	      </callout>

	      <callout arearefs="co-tls-pwd">
		<para>A <literal>private_key_passwd</literal> mez&#245;
		  a priv&aacute;t kulcshoz tartoz&oacute; jelmondatot
		  r&ouml;gz&iacute;ti.</para>
	      </callout>
	    </calloutlist>

	    <para>Az <filename>/etc/rc.conf</filename>
	      &aacute;llom&aacute;nyba vegy&uuml;k fel a
	      k&ouml;vetkez&#245; sorokat:</para>

	    <programlisting>wlans_ath0="wlan0"
ifconfig_wlan0="WPA DHCP"</programlisting>

	    <para>A k&ouml;vetkez&#245; l&eacute;p&eacute;s a
	      fel&uuml;let fel&eacute;breszt&eacute;se lesz az
	      <filename>rc.d</filename> eszk&ouml;z
	      seg&iacute;ts&eacute;g&eacute;vel:</para>

	    <screen>&prompt.root; <userinput>/etc/rc.d/netif start</userinput>
Starting wpa_supplicant.
DHCPREQUEST on wlan0 to 255.255.255.255 port 67
DHCPREQUEST on wlan0 to 255.255.255.255 port 67
DHCPACK from 192.168.0.20
bound to 192.168.0.254 -- renewal in 300 seconds.
wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
      ether 00:11:95:d5:43:62
      inet 192.168.0.254 netmask 0xffffff00 broadcast 192.168.0.255
      media: IEEE 802.11 Wireless Ethernet DS/11Mbps mode 11g
      status: associated
      ssid freebsdap channel 1 (2412 Mhz 11g) bssid 00:11:95:c3:0d:ac
      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF
      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan
      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS
      wme burst roaming MANUAL</screen>

	    <para>Term&eacute;szetesen, ahogy azt m&aacute;r az
	      el&#245;bbiekben is megmutattuk, mindezt manu&aacute;lisan
	      is el tudjuk v&eacute;gezni a
	      <command>wpa_supplicant</command> &eacute;s az
	      <command>ifconfig</command> parancsok
	      seg&iacute;ts&eacute;g&eacute;vel.</para>

	  </sect5>

	  <sect5 id="network-wireless-wpa-eap-ttls">
	    <title>WPA &eacute;s EAP-TTLS</title>

	    <para>Az EAP-TLS haszn&aacute;latakor mind a
	      hiteles&iacute;t&eacute;st v&eacute;gz&#245; szervernek
	      &eacute;s kliensnek is kell
	      tan&uacute;s&iacute;tv&aacute;ny, azonban az EAP-TTLS (
	      sz&aacute;ll&iacute;t&aacute;si r&eacute;tegbeli
	      v&eacute;delem EAP tunnelen kereszt&uuml;l)
	      eset&eacute;ben a kliensn&eacute;l ez elhagyhat&oacute;.
	      Ez a m&oacute;dszer nagyj&aacute;b&oacute;l olyan, mint
	      amit a webes oldalak csin&aacute;lnak, ahol a webszerverek
	      egy v&eacute;dett SSL tunnelt k&eacute;peznek m&eacute;g
	      akkor is, amikor a l&aacute;togat&oacute;k nem
	      rendelkeznek kliens oldali
	      tan&uacute;s&iacute;tv&aacute;nnyal.  Az EAP-TTLS egy
	      titkos&iacute;tott TLS tunnelen kereszt&uuml;l v&eacute;di
	      le a hiteles&iacute;t&eacute;si adatok
	      forgalm&aacute;t.</para>

	    <para>Ezt ism&eacute;t az
	      <filename>/etc/wpa_supplicant.conf</filename>
	      &aacute;llom&aacute;nyon kereszt&uuml;l tudjuk
	      be&aacute;ll&iacute;tani:</para>

	    <programlisting>network={
  ssid="freebsdap"
  proto=RSN
  key_mgmt=WPA-EAP
  eap=TTLS <co id="co-ttls-eap">
  identity="test" <co id="co-ttls-id">
  password="test" <co id="co-ttls-passwd">
  ca_cert="/etc/certs/cacert.pem" <co id="co-ttls-cacert">
  phase2="auth=MD5" <co id="co-ttls-pha2">
}</programlisting>

	    <calloutlist>
	      <callout arearefs="co-ttls-eap">
		<para>Ebben a mez&#245;ben az EAP m&oacute;dszert
		  &aacute;ll&iacute;tjuk be a kapcsolathoz.</para>
	      </callout>

	      <callout arearefs="co-ttls-id">
		<para>Az <literal>identity</literal> mez&#245; a
		  titkos&iacute;tott TLS tunnelen kereszt&uuml;l az EAP
		  hiteles&iacute;t&eacute;sn&eacute;l felhaszn&aacute;lt
		  azonos&iacute;t&oacute;t adja meg.</para>
	      </callout>

	      <callout arearefs="co-ttls-passwd">
		<para>A <literal>password</literal> tartalmazza az EAP
		  hiteles&iacute;t&eacute;sn&eacute;l haszn&aacute;lt
		  jelmondatot.</para>
	      </callout>

	      <callout arearefs="co-ttls-cacert">
		<para>A <literal>ca_cert</literal> mez&#245; hivatkozik
		  a hiteles&iacute;t&#245; hat&oacute;s&aacute;g
		  tan&uacute;s&iacute;tv&aacute;ny&aacute;t
		  tartalmaz&oacute; &aacute;llom&aacute;nyra.  Ez az
		  &aacute;llom&aacute;ny kell a szerver
		  tan&uacute;s&iacute;tv&aacute;ny&aacute;nak
		  ellen&#245;rz&eacute;s&eacute;hez.</para>
	      </callout>

	      <callout arearefs="co-ttls-pha2">
		<para>Ebben a mez&#245;ben a titkos&iacute;tott TLS
		  tunnelben haszn&aacute;lt hiteles&iacute;t&eacute;si
		  m&oacute;dszer nevezz&uuml;k meg.  Jelen
		  eset&uuml;nkben ez az EAP MD5-Challenge
		  haszn&aacute;lat&aacute;val.  A <quote>bels&#245;
		  hiteles&iacute;t&eacute;s</quote>
		  f&aacute;zis&aacute;t gyakran csak
		  <quote>phase2</quote>-nak (2.  f&aacute;zisnak)
		  h&iacute;vj&aacute;k.</para>
	      </callout>
	    </calloutlist>

	    <para>Mindezek mellett m&eacute;g a k&ouml;vetkez&#245;
	      sorokat is vegy&uuml;k fel az
	      <filename>/etc/rc.conf</filename>
	      &aacute;llom&aacute;nyba:</para>

	    <programlisting>wlans_ath0="wlan0"
ifconfig_wlan0="WPA DHCP"</programlisting>

	    <para>Ezut&aacute;n hozzuk m&#251;k&ouml;d&eacute;sbe a
	      fel&uuml;letet:</para>

	    <screen>&prompt.root; <userinput>/etc/rc.d/netif start</userinput>
Starting wpa_supplicant.
DHCPREQUEST on wlan0 to 255.255.255.255 port 67
DHCPREQUEST on wlan0 to 255.255.255.255 port 67
DHCPREQUEST on wlan0 to 255.255.255.255 port 67
DHCPACK from 192.168.0.20
bound to 192.168.0.254 -- renewal in 300 seconds.
wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
      ether 00:11:95:d5:43:62
      inet 192.168.0.254 netmask 0xffffff00 broadcast 192.168.0.255
      media: IEEE 802.11 Wireless Ethernet DS/11Mbps mode 11g
      status: associated
      ssid freebsdap channel 1 (2412 Mhz 11g) bssid 00:11:95:c3:0d:ac
      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF
      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan
      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS
      wme burst roaming MANUAL</screen>
	  </sect5>

	  <sect5 id="network-wireless-wpa-eap-peap">
	    <title>WPA &eacute;s EAP-PEAP</title>

	    <para>A PEAP (V&eacute;dett EAP) az EAP-TTLS egyik
	      alternat&iacute;v&aacute;jak&eacute;nt j&ouml;tt
	      l&eacute;tre.  A PEAP m&oacute;dszernek k&eacute;t
	      v&aacute;ltozata van, melyek k&ouml;z&uuml;l a
	      leggyakoribb a PEAPv0/EAP-MSCHAPv2.  A
	      le&iacute;r&aacute;s tov&aacute;bbi r&eacute;sz&eacute;ben
	      a PEAP elnevez&eacute;ssel erre az EAP m&oacute;dszerre
	      fogunk hivatkozni.  A PEAP az EAP-TLS ut&aacute;n a
	      legink&aacute;bb alkalmazott szabv&aacute;ny, m&aacute;s
	      sz&oacute;val, ha a h&aacute;l&oacute;zatunkban
	      t&ouml;bbf&eacute;le oper&aacute;ci&oacute;s rendszer is
	      megtal&aacute;lhat&oacute;, akkor az EAP-TLS ut&aacute;n
	      val&oacute;sz&iacute;n&#251;leg a PEAP lesz a
	      m&aacute;sik, amit mindegyik ismerni fog.</para>

	    <para>A PEAP hasonl&oacute; az EAP-TTLS-hez: szerver oldali
	      tan&uacute;s&iacute;tv&aacute;nyokkal hiteles&iacute;ti a
	      klienseket &eacute;s titkos&iacute;tott TLS tunnelt hoz
	      l&eacute;tre a kliens &eacute;s a
	      hiteles&iacute;t&eacute;st v&eacute;gz&#245; szerver
	      k&ouml;z&ouml;tt, amivel seg&iacute;ti meg&oacute;vni a
	      hiteles&iacute;t&eacute;si inform&aacute;ci&oacute;kat.
	      Biztons&aacute;g szempontj&aacute;b&oacute;l az EAP-TTLS
	      &eacute;s a PEAP k&ouml;z&ouml;tt az a
	      k&uuml;l&ouml;nbs&eacute;g, hogy a PEAP
	      hiteles&iacute;t&eacute;s a felhaszn&aacute;l&oacute;i
	      nevet titkos&iacute;tatlanul k&uuml;ldi &eacute;s csak a
	      jelsz&oacute; megy &aacute;t a titkos&iacute;tott TLS
	      tunnelen.  Az EAP-TTLS egyar&aacute;nt a TLS tunnelt
	      haszn&aacute;lja mind a felhaszn&aacute;l&oacute;i
	      n&eacute;v, mind a jelsz&oacute; eset&eacute;ben.</para>

	    <para>Az EAP-PEAP be&aacute;ll&iacute;t&aacute;sait az
	      <filename>/etc/wpa_supplicant.conf</filename>
	      &aacute;llom&aacute;nyba kell felvenni:</para>

	    <programlisting>network={
  ssid="freebsdap"
  proto=RSN
  key_mgmt=WPA-EAP
  eap=PEAP <co id="co-peap-eap">
  identity="test" <co id="co-peap-id">
  password="test" <co id="co-peap-passwd">
  ca_cert="/etc/certs/cacert.pem" <co id="co-peap-cacert">
  phase1="peaplabel=0" <co id="co-peap-pha1">
  phase2="auth=MSCHAPV2" <co id="co-peap-pha2">
}</programlisting>

	    <calloutlist>
	      <callout arearefs="co-peap-eap">
		<para>Ebben a mez&#245;ben megadjuk, az EAP
		  m&oacute;dszert haszn&aacute;ljuk a
		  kapcsolathoz.</para>
	      </callout>

	      <callout arearefs="co-peap-id">
		<para>Az <literal>identity</literal> mez&#245; az EAP
		  hiteles&iacute;t&eacute;s sor&aacute;n a
		  titkos&iacute;tott TLS tunnelben
		  &aacute;tk&uuml;ld&ouml;tt azonos&iacute;t&oacute;t
		  tartalmazza.</para>
	      </callout>

	      <callout arearefs="co-peap-passwd">
		<para>A <literal>password</literal> mez&#245; az EAP
		  hiteles&iacute;t&eacute;s sor&aacute;n haszn&aacute;lt
		  jelmondatot defini&aacute;lja.</para>
	      </callout>

	      <callout arearefs="co-peap-cacert">
		<para>A <literal>ca_cert</literal> mez&#245; a
		  hiteles&iacute;t&#245; hat&oacute;s&aacute;g
		  tan&uacute;s&iacute;tv&aacute;ny&aacute;t
		  tartalmaz&oacute; &aacute;llom&aacute;ny
		  el&eacute;r&eacute;si &uacute;tj&aacute;t adja meg.
		  Ez az &aacute;llom&aacute;ny kell a szerver
		  tan&uacute;s&iacute;tv&aacute;ny&aacute;nak
		  ellen&#245;rz&eacute;s&eacute;hez.</para>
	      </callout>

	      <callout arearefs="co-peap-pha1">
		<para>Ez a mez&#245; a hiteles&iacute;t&eacute;s
		  els&#245; f&aacute;zis&aacute;nak (vagyis a TLS
		  tunnel) param&eacute;tereit tartalmazza.  A
		  hiteles&iacute;t&eacute;st v&eacute;gz&#245;
		  szervert&#245;l f&uuml;gg&#245;en a
		  hiteles&iacute;t&eacute;shez meg kell adnunk bizonyos
		  c&iacute;mk&eacute;ket.  A legt&ouml;bb esetben a
		  c&iacute;mke a <quote>kliens oldali EAP
		  titkos&iacute;t&aacute;s</quote> lesz, amit a
		  <literal>peaplabel=0</literal>
		  haszn&aacute;lat&aacute;val &aacute;ll&iacute;tunk be.
		  A r&eacute;szleteket a &man.wpa.supplicant.conf.5; man
		  oldalon olvashatjuk.</para>
	      </callout>

	      <callout arearefs="co-peap-pha2">
		<para>Ebben a mez&#245;ben a titkos&iacute;tott TLS
		  tunnelben alkalmazott hiteles&iacute;t&eacute;st
		  protokollt nevezz&uuml;k meg.  A PEAP eset&eacute;ben
		  ez az <literal>auth=MSCHAPV2</literal> lesz.</para>
	      </callout>
	    </calloutlist>

	    <para>A k&ouml;vetkez&#245;ket kell m&eacute;g
	      hozz&aacute;tenn&uuml;nk az
	      <filename>/etc/rc.conf</filename>
	      &aacute;llom&aacute;nyhoz:</para>

	    <programlisting>wlans_ath0="wlan0"
ifconfig_wlan0="WPA DHCP"</programlisting>

	    <para>Ezut&aacute;n m&aacute;r m&#251;k&ouml;d&eacute;sbe is
	      hozhatjuk a fel&uuml;letet:</para>

	    <screen>&prompt.root; <userinput>/etc/rc.d/netif start</userinput>
Starting wpa_supplicant.
DHCPREQUEST on wlan0 to 255.255.255.255 port 67
DHCPREQUEST on wlan0 to 255.255.255.255 port 67
DHCPREQUEST on wlan0 to 255.255.255.255 port 67
DHCPACK from 192.168.0.20
bound to 192.168.0.254 -- renewal in 300 seconds.
wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
      ether 00:11:95:d5:43:62
      inet 192.168.0.254 netmask 0xffffff00 broadcast 192.168.0.255
      media: IEEE 802.11 Wireless Ethernet DS/11Mbps mode 11g
      status: associated
      ssid freebsdap channel 1 (2412 Mhz 11g) bssid 00:11:95:c3:0d:ac
      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF
      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan
      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS
      wme burst roaming MANUAL</screen>

	  </sect5>
	</sect4>

	<sect4 id="network-wireless-wep">
	  <title>WEP</title>

	  <para>A WEP (Wired Equivalent Privacy, azaz k&aacute;bellel
	    egyen&eacute;rt&eacute;k&#251; titkoss&aacute;g) az eredeti
	    802.11 szabv&aacute;ny r&eacute;sze.  Nincs k&uuml;l&ouml;n
	    hiteles&iacute;t&eacute;si mechanizmusa, csup&aacute;n a
	    hozz&aacute;f&eacute;r&eacute;s-vez&eacute;rl&eacute;s egy
	    gyenge form&aacute;j&aacute;val tal&aacute;lkozhatunk benne,
	    amit azonban k&ouml;nnyen fel lehet t&ouml;rni.</para>

	  <para>A WEP <command>ifconfig</command> parancs
	    haszn&aacute;lat&aacute;n kereszt&uuml;l
	    &aacute;ll&iacute;that&oacute; be:</para>

	  <screen>&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable> create wlandev <replaceable>ath0</replaceable></userinput>
&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable> inet <replaceable>192.168.1.100</replaceable> netmask <replaceable>255.255.255.0</replaceable> \
	  ssid <replaceable>saj&aacute;t_h&aacute;l&oacute;zat</replaceable> wepmode on weptxkey <replaceable>3</replaceable> wepkey <replaceable>3:0x3456789012</replaceable></userinput></screen>

	  <itemizedlist>
	    <listitem>
	      <para>A <literal>weptxkey</literal> utal arra, hogy a
		k&uuml;ld&eacute;s sor&aacute;n WEP kulcsot
		haszn&aacute;lunk.  Itt most egy harmadik kulcsot
		haszn&aacute;ltunk, amelynek egyeznie kell a
		hozz&aacute;f&eacute;r&eacute;si pont
		be&aacute;ll&iacute;t&aacute;saival.  Ha nem tudjuk
		pontosan, hogy milyen kulcsot haszn&aacute;l a
		hozz&aacute;f&eacute;r&eacute;si pont, akkor
		pr&oacute;b&aacute;lkozzunk az <literal>1</literal>
		&eacute;rt&eacute;k (vagyis az els&#245; kulcs)
		megad&aacute;s&aacute;val.</para>
	    </listitem>

	    <listitem>
	      <para>A <literal>wepkey</literal> ut&aacute;n
		k&ouml;vetkezik a kiv&aacute;lasztott WEP kulcs.
		<replaceable>index:kulcs</replaceable> alakban kell
		megadni, &eacute;s ha itt nem adunk meg indexet, akkor
		azzal az <literal>1</literal> index&#251; kulcsot
		&aacute;ll&iacute;tjuk be.  &Uacute;gyis
		fogalmazhatn&aacute;nk, hogy az indexet csak olyankor
		kell megadni, amikor nem az els&#245; kulcsot akarjuk
		haszn&aacute;lni.</para>

	      <note>
		<para>A <literal>0x3456789012</literal>
		  &eacute;rt&eacute;ket a
		  hozz&aacute;f&eacute;r&eacute;si pontn&aacute;l
		  be&aacute;ll&iacute;tott kulcsra kell
		  be&aacute;ll&iacute;tani.</para>
	      </note>
	    </listitem>
	  </itemizedlist>

	  <para>Ha &eacute;rdekelnek minket a tov&aacute;bbi
	    r&eacute;szletek, akkor b&aacute;tran lapozzuk fel az
	    &man.ifconfig.8; parancs man oldal&aacute;t.</para>

	  <para>A <command>wpa_supplicant</command>
	    seg&eacute;dprogramot is bevonhatjuk a vezet&eacute;k
	    n&eacute;lk&uuml;li fel&uuml;letek WEP alap&uacute;
	    haszn&aacute;lat&aacute;ba.  A fenti p&eacute;ld&aacute;t a
	    k&ouml;vetkez&#245; m&oacute;don tudjuk le&iacute;rni az
	    <filename>/etc/wpa_supplicant.conf</filename>
	    &aacute;llom&aacute;nyban:</para>

	  <programlisting>network={
  ssid="sajat_halozat"
  key_mgmt=NONE
  wep_key3=3456789012
  wep_tx_keyidx=3
}</programlisting>

	  <para>Majd:</para>

	  <screen>&prompt.root; <userinput>wpa_supplicant -i <replaceable>wlan0</replaceable> -c /etc/wpa_supplicant.conf</userinput>
Trying to associate with 00:13:46:49:41:76 (SSID='dlinkap' freq=2437 MHz)
Associated with 00:13:46:49:41:76</screen>

	</sect4>
      </sect3>
    </sect2>

    <sect2>
      <title>Az ad-hoc m&#251;k&ouml;d&eacute;si m&oacute;d</title>

      <para>Az IBSS vagy m&aacute;s n&eacute;ven ad-hoc m&oacute;dot
	pont-pont t&iacute;pus&uacute; kapcsolatok
	kialak&iacute;t&aacute;s&aacute;ra tervezt&eacute;k.
	P&eacute;ld&aacute;ul, ha az <hostid>A</hostid> &eacute;s a
	<hostid>B</hostid> g&eacute;pek k&ouml;z&ouml;tt egy ad-hoc
	t&iacute;pus&uacute; h&aacute;l&oacute;zatot akarunk
	l&eacute;tes&iacute;teni, akkor egyszer&#251;en csak ki kell
	v&aacute;lasztanunk k&eacute;t IP-c&iacute;met &eacute;s egy
	SSID-t.</para>

      <para>&Iacute;gy &aacute;ll&iacute;tjuk be az <hostid>A</hostid>
	g&eacute;pet:</para>

      <screen>&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable> create wlandev <replaceable>ath0</replaceable> wlanmode adhoc</userinput>
&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable> inet <replaceable>192.168.0.1</replaceable> netmask <replaceable>255.255.255.0</replaceable> ssid <replaceable>freebsdap</replaceable></userinput>
&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable></userinput>
  wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
	  ether 00:11:95:c3:0d:ac
	  inet 192.168.0.1 netmask 0xffffff00 broadcast 192.168.0.255
	  media: IEEE 802.11 Wireless Ethernet autoselect mode 11g &lt;adhoc&gt;
	  status: running
	  ssid freebsdap channel 2 (2417 MHz) bssid 02:11:95:c3:0d:ac
	  country US ecm authmode OPEN privacy OFF txpower 21.5 scanvalid 60
	  protmode CTS wme burst</screen>

      <para>Az <literal>adhoc</literal> param&eacute;terrel utalunk
	arra, hogy a fel&uuml;let most IBSS m&oacute;dban
	m&#251;k&ouml;dik.</para>

      <para>A <hostid>B</hostid> g&eacute;pen ezut&aacute;n m&aacute;r
	k&eacute;pesek vagyunk &eacute;szlelni az <hostid>A</hostid>
	g&eacute;pet:</para>

      <screen>&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable> create wlandev <replaceable>ath0</replaceable> wlanmode adhoc</userinput>
  SSID/MESH ID    BSSID              CHAN RATE  S:N     INT CAPS
  freebsdap       02:11:95:c3:0d:ac    2   54M -64:-96  100 IS   WME</screen>

      <para>A kimenetben szerepl&#245; <literal>I</literal> is
	meger&#245;s&iacute;ti, hogy az <hostid>A</hostid> g&eacute;pet
	ad-hoc m&oacute;dban &eacute;rj&uuml;k el.  &Iacute;gy
	m&aacute;r csak a <hostid>B</hostid> g&eacute;pet kell
	be&aacute;ll&iacute;tanunk egy m&aacute;sik
	IP-c&iacute;mmel:</para>

      <screen>&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable> inet <replaceable>192.168.0.2</replaceable> netmask <replaceable>255.255.255.0</replaceable> ssid <replaceable>freebsdap</replaceable></userinput>
&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable></userinput>
  wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
	  ether 00:11:95:d5:43:62
	  inet 192.168.0.2 netmask 0xffffff00 broadcast 192.168.0.255
	  media: IEEE 802.11 Wireless Ethernet autoselect mode 11g &lt;adhoc&gt;
	  status: running
	  ssid freebsdap channel 2 (2417 Mhz 11g) bssid 02:11:95:c3:0d:ac
	  country US ecm authmode OPEN privacy OFF txpower 21.5 scanvalid 60
	  protmode CTS wme burst</screen>

	  <para>Most m&aacute;r mind az <hostid>A</hostid> &eacute;s
	    mind a <hostid>B</hostid> k&eacute;szen &aacute;ll az adatok
	    cser&eacute;j&eacute;re.</para>
    </sect2>

    <sect2 id="network-wireless-ap">
      <title>&os; alap&uacute; hozz&aacute;f&eacute;r&eacute;si
	pontok</title>

      <para>A &os; k&eacute;pes hozz&aacute;f&eacute;r&eacute;si
	pontk&eacute;nt (Access Point, AP) is &uuml;zemelni, &iacute;gy
	nem kell k&uuml;l&ouml;n hardveres
	hozz&aacute;f&eacute;r&eacute;si pontot
	v&aacute;s&aacute;rolnunk vagy ad-hoc h&aacute;l&oacute;zatot
	haszn&aacute;lnunk.  Ez k&uuml;l&ouml;n&ouml;sen akkor hasznos,
	amikor a &os; g&eacute;pet egy m&aacute;sik
	h&aacute;l&oacute;zat (p&eacute;ld&aacute;ul az internet)
	fel&eacute; &aacute;ll&iacute;tottuk be
	&aacute;tj&aacute;r&oacute;nak.</para>

      <sect3 id="network-wireless-ap-basic">
	<title>Alapvet&#245; be&aacute;ll&iacute;t&aacute;sok</title>

	<para>Miel&#245;tt neki&aacute;lln&aacute;nk a &os;-s
	  g&eacute;p&uuml;nket hozz&aacute;f&eacute;r&eacute;si pontnak
	  be&aacute;ll&iacute;tani, egy olyan rendszermagra lesz
	  sz&uuml;ks&eacute;g&uuml;nk, amely tartalmazza a
	  megfelel&#245; vezet&eacute;k n&eacute;lk&uuml;li
	  t&aacute;mogat&aacute;st a k&aacute;rty&aacute;nkhoz.
	  Emellett az alkalmazni k&iacute;v&aacute;nt biztons&aacute;gi
	  protokollok t&aacute;mogat&aacute;s&aacute;t is bele kell
	  &eacute;p&iacute;ten&uuml;nk.  Ennek r&eacute;szleteit
	  l&aacute;sd a <xref
	  linkend="network-wireless-basic">ban.</para>

	<note>
	  <para>Jelenleg az NDIS meghajt&oacute;n kereszt&uuml;l
	    haszn&aacute;lt &windows;-os meghajt&oacute;k nem teszik
	    lehet&#245;v&eacute; hozz&aacute;f&eacute;r&eacute;si pontok
	    kialak&iacute;t&aacute;s&aacute;t.  Egyed&uuml;l a
	    vezet&eacute;k n&eacute;lk&uuml;li eszk&ouml;z&ouml;k
	    nat&iacute;v &os;-s meghajt&oacute;i ismerik a
	    hozz&aacute;f&eacute;r&eacute;si pont m&oacute;dot.</para>
	</note>

	<para>Ahogy bet&ouml;lt&ouml;tt&uuml;k a vezet&eacute;k
	  n&eacute;lk&uuml;li h&aacute;l&oacute;zatok
	  t&aacute;mogat&aacute;s&aacute;t, egyb&#245;l ellen&#245;rizni
	  is tudjuk, hogy a vezet&eacute;k n&eacute;lk&uuml;li
	  eszk&ouml;z&uuml;nk haszn&aacute;lhat&oacute;-e
	  hozz&aacute;f&eacute;r&eacute;si pontk&eacute;nt (avagy
	  <quote>hostap</quote> m&oacute;dban):</para>

	<screen>&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable> create wlandev <replaceable>ath0</replaceable></userinput>
&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable> list caps</userinput>
drivercaps=6f85edc1&lt;STA,FF,TURBOP,IBSS,HOSTAP,AHDEMO,TXPMGT,SHSLOT,SHPREAMBLE,MONITOR,MBSS,WPA1,WPA2,BURST,WME,WDS,BGSCAN,TXFRA&gt;
crytocaps=1f&lt;WEP,TKIP,AES,AES_CCM,TKIPMIC&gt;</screen>

	<para>A fenti kimenetben l&aacute;thatjuk a
	  k&aacute;rty&aacute;nk tulajdons&aacute;gait.  A
	  <literal>HOSTAP</literal> sz&oacute; arr&oacute;l
	  tan&uacute;skodik, hogy a vezet&eacute;k n&eacute;lk&uuml;li
	  k&aacute;rty&aacute;nk k&eacute;pes
	  hozz&aacute;f&eacute;r&eacute;si pontk&eacute;nt viselkedni.
	  Mellette m&eacute;g a k&uuml;l&ouml;nf&eacute;le
	  t&aacute;mogatott titkos&iacute;t&aacute;si m&oacute;dszerek
	  is l&aacute;that&oacute;ak: WEP, TKIP, AES stb.  Ezekb&#245;l
	  az inform&aacute;ci&oacute;kb&oacute;l tudjuk
	  kider&iacute;teni, hogy a hozz&aacute;f&eacute;r&eacute;si
	  pontunkon milyen titkos&iacute;t&aacute;si protokollokat
	  tudunk haszn&aacute;lni.</para>

	<para>A vezet&eacute;k n&eacute;lk&uuml;li eszk&ouml;z&uuml;nket
	  innent&#245;l m&aacute;r csak hozz&aacute;f&eacute;r&eacute;si
	  pontnak &aacute;ll&iacute;thatjuk &aacute;t a viru&aacute;lis
	  h&aacute;l&oacute;zati eszk&ouml;z
	  l&eacute;trehoz&aacute;sakor, ez&eacute;rt a kor&aacute;bban
	  l&eacute;trehozott eszk&ouml;zt ehhez el&#245;sz&ouml;r meg
	  kell semmis&iacute;ten&uuml;nk:</para>

	<screen>&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable> destroy</userinput></screen>

	<para>Ezzel l&eacute;trej&ouml;n a megfelel&#245;
	  be&aacute;ll&iacute;t&aacute;sokkal, majd ezekhez
	  &aacute;ll&iacute;tjuk m&eacute;g be a t&ouml;bbit:</para>

	<screen>&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable> create wlandev <replaceable>ath0</replaceable> wlanmode hostap</userinput>
&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable> inet <replaceable>192.168.0.1</replaceable> netmask <replaceable>255.255.255.0</replaceable> ssid <replaceable>freebsdap</replaceable> mode 11g channel 1</userinput></screen>

	<para>Az <command>ifconfig</command> parancs ism&eacute;telt
	  haszn&aacute;lat&aacute;val le is tudjuk k&eacute;rdezni az
	  <devicename>wlan0</devicename> fel&uuml;let
	  &aacute;llapot&aacute;t:</para>

	<screen>&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable></userinput>
  wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
	  inet 192.168.0.1 netmask 0xffffff00 broadcast 192.168.0.255
	  inet6 fe80::211:95ff:fec3:dac%ath0 prefixlen 64 scopeid 0x4
	  ether 00:11:95:c3:0d:ac
	  media: IEEE 802.11 Wireless Ethernet autoselect mode 11g &lt;hostap&gt;
	  status: running
	  ssid freebsdap channel 1 (2412 Mhz) bssid 00:11:95:c3:0d:ac
	  country US ecm authmode OPEN privacy OFF txpower 21.5 scanvalid 60
	  protmode CTS wme burst dtimperiod 1 -dfs</screen>

	<para>A <literal>hostap</literal> param&eacute;terb&#245;l
	  kider&uuml;l, hogy a fel&uuml;let
	  hozz&aacute;f&eacute;r&eacute;si pont m&oacute;dban
	  van.</para>

	<para>Ha az <filename>/etc/rc.conf</filename>
	  &aacute;llom&aacute;nyban megadjuk a k&ouml;vetkez&#245;
	  sorokat, akkor a fel&uuml;let be&aacute;ll&iacute;t&aacute;sa
	  a rendszer ind&iacute;t&aacute;sakor mag&aacute;t&oacute;l
	  megt&ouml;rt&eacute;nik:</para>

	<programlisting>wlans_ath0="wlan0"
create_args_wlan0="wlanmode hostap"
ifconfig_wlan0="inet <replaceable>192.168.0.1</replaceable> netmask <replaceable>255.255.255.0</replaceable> ssid <replaceable>freebsdap</replaceable> mode 11g channel <replaceable>1</replaceable>"</programlisting>
      </sect3>

      <sect3>
	<title>Hiteles&iacute;t&eacute;s vagy titkos&iacute;t&aacute;s
	  n&eacute;lk&uuml;li hozz&aacute;f&eacute;r&eacute;si
	  pontok</title>

	<para>Hab&aacute;r a hozz&aacute;f&eacute;r&eacute;si pontok
	  m&#251;k&ouml;dtet&eacute;se nem javasolt
	  hiteles&iacute;t&eacute;s vagy titkos&iacute;t&aacute;s
	  n&eacute;lk&uuml;l, ebben a m&oacute;dban k&ouml;nnyen meg
	  tudunk gy&#245;z&#245;dni a hozz&aacute;f&eacute;r&eacute;si
	  pontunk haszn&aacute;lhat&oacute;s&aacute;g&aacute;r&oacute;l.
	  Ez a t&iacute;pus&uacute; konfigur&aacute;ci&oacute;
	  ezenk&iacute;v&uuml;l m&eacute;g fontos szerepet
	  j&aacute;tszik a klienseken felbukkan&oacute; hib&aacute;k
	  kisz&#251;r&eacute;s&eacute;ben is.</para>

	<para>Miut&aacute;n siker&uuml;lt az el&#245;bbiekben
	  bemutatottak alapj&aacute;n be&aacute;ll&iacute;tani a
	  hozz&aacute;f&eacute;r&eacute;si pontunkat, egy m&aacute;sik
	  vezet&eacute;k n&eacute;lk&uuml;li g&eacute;pr&#245;l
	  r&ouml;gt&ouml;n meg is kezdhetj&uuml;k a
	  keres&eacute;s&eacute;t:</para>

	<screen>&prompt.root; <userinput>ifconfig <replaceable>ath0</replaceable> up scan</userinput>
SSID/MESH ID    BSSID              CHAN RATE   S:N     INT CAPS
freebsdap       00:11:95:c3:0d:ac    1   54M -66:-96  100 ES   WME</screen>

	<para>L&aacute;thatjuk, hogy a kliens megtal&aacute;lta a
	  hozz&aacute;f&eacute;r&eacute;si pontot &eacute;s tudunk is
	  r&aacute; kapcsol&oacute;dni:</para>

	<screen>&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable> inet <replaceable>192.168.0.2</replaceable> netmask <replaceable>255.255.255.0</replaceable> ssid <replaceable>freebsdap</replaceable></userinput>
&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable></userinput>
  wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
	  inet 192.168.0.2 netmask 0xffffff00 broadcast 192.168.0.255
	  media: IEEE 802.11 Wireless Ethernet OFDM/54Mbps mode 11g
	  status: associated
	  ssid freebsdap channel 1 (2412 Mhz 11g) bssid 00:11:95:c3:0d:ac
	  country US ecm authmode OPEN privacy OFF txpower 21.5 bmiss 7
	  scanvalid 60 bgscan bgscanintvl 300 bgscanidle 250 roam:rssi 7
	  roam:rate 5 protmode CTS wme burst</screen>
      </sect3>

      <sect3>
	<title>WPA titkos&iacute;t&aacute;st haszn&aacute;l&oacute;
	  hozz&aacute;f&eacute;r&eacute;si pontok</title>

	<para>Ebben a szakaszban a &os;-s
	  hozz&aacute;f&eacute;r&eacute;si pontunkat WPA
	  titkos&iacute;t&aacute;ssal &aacute;ll&iacute;tjuk be.  A WPA
	  &eacute;s a WPA alap&uacute; kliensek
	  be&aacute;ll&iacute;t&aacute;s&aacute;nak r&eacute;szleteit a
	  <xref linkend="network-wireless-wpa">ban
	  tal&aacute;ljuk.</para>

	<para>A WPA titkos&iacute;t&aacute;st haszn&aacute;l&oacute;
	  hozz&aacute;f&eacute;r&eacute;si pontokon a
	  <application>hostapd</application> d&eacute;mon foglalkozik a
	  kliensek hiteles&iacute;t&eacute;s&eacute;vel &eacute;s a
	  kulcsok kezel&eacute;s&eacute;vel.</para>

	<para>A tov&aacute;bbiakban az &ouml;sszes
	  be&aacute;ll&iacute;t&aacute;st egy olyan &os;-s g&eacute;pen
	  v&eacute;gezz&uuml;k el, amely
	  hozz&aacute;f&eacute;r&eacute;si pontk&eacute;nt
	  m&#251;k&ouml;dik.  Ahogy siker&uuml;lt
	  be&aacute;ll&iacute;tanunk a hozz&aacute;f&eacute;r&eacute;si
	  pont m&oacute;dot, az <filename>/etc/rc.conf</filename>
	  &aacute;llom&aacute;nyban a k&ouml;vetkez&#245; sor
	  seg&iacute;ts&eacute;g&eacute;vel k&ouml;nnyen meg tudjuk
	  oldani, hogy az <application>hostapd</application>
	  d&eacute;mon a rendszerrel egy&uuml;tt mag&aacute;t&oacute;l
	  elinduljon:</para>

	<programlisting>hostapd_enable="YES"</programlisting>

	<para>Miel&#245;tt megpr&oacute;b&aacute;ln&aacute;nk
	  be&aacute;ll&iacute;tani a <application>hostapd</application>
	  d&eacute;mont, ne felejts&uuml;k el elv&eacute;gezni a <xref
	  linkend="network-wireless-ap-basic">ban eml&iacute;tett
	  alapvet&#245; be&aacute;ll&iacute;t&aacute;sokat sem.</para>

	<sect4>
	  <title>WPA-PSK</title>

	  <para>A WPA-PSK haszn&aacute;lat&aacute;t olyan kis
	    m&eacute;ret&#251; h&aacute;l&oacute;zatok
	    sz&aacute;m&aacute;ra sz&aacute;nj&aacute;k, ahol egy
	    k&uuml;l&ouml;n hiteles&iacute;t&#245; szervert
	    alkalmaz&aacute;sa nem lehets&eacute;ges vagy nem
	    k&iacute;v&aacute;natos.</para>

	  <para>A konfigur&aacute;ci&oacute; az
	    <filename>/etc/hostapd.conf</filename>
	    &aacute;llom&aacute;nyon kereszt&uuml;l
	    t&ouml;rt&eacute;nik:</para>

	  <programlisting>interface=wlan0 <co id="co-ap-wpapsk-iface">
debug=1 <co id="co-ap-wpapsk-dbug">
ctrl_interface=/var/run/hostapd <co id="co-ap-wpapsk-ciface">
ctrl_interface_group=wheel <co id="co-ap-wpapsk-cifacegrp">
ssid=freebsdap <co id="co-ap-wpapsk-ssid">
wpa=1 <co id="co-ap-wpapsk-wpa">
wpa_passphrase=freebsdmall <co id="co-ap-wpapsk-pass">
wpa_key_mgmt=WPA-PSK <co id="co-ap-wpapsk-kmgmt">
wpa_pairwise=CCMP TKIP <co id="co-ap-wpapsk-pwise"></programlisting>

	  <calloutlist>
	    <callout arearefs="co-ap-wpapsk-iface">
	      <para>Ebben a mez&#245;ben jel&ouml;lj&uuml;k ki a
		hozz&aacute;f&eacute;r&eacute;si pontk&eacute;nt
		haszn&aacute;lt vezet&eacute;k n&eacute;lk&uuml;li
		fel&uuml;letet.</para>
	    </callout>

	    <callout arearefs="co-ap-wpapsk-dbug">
	      <para>Ebben a mez&#245;ben adjuk meg a
		<application>hostapd</application> futtat&aacute;sa
		sor&aacute;n keletkez&#245; &uuml;zenetek
		r&eacute;szletess&eacute;g&eacute;t.  A
		p&eacute;ld&aacute;ban szerepl&#245;
		<literal>1</literal> &eacute;rt&eacute;k ennek a
		legkisebb szintj&eacute;t jel&ouml;li.</para>
	    </callout>

	    <callout arearefs="co-ap-wpapsk-ciface">
	      <para>A <literal>ctrl_interface</literal> mez&#245;
		megadja a <application>hostapd</application>
		&aacute;ltal haszn&aacute;lt k&ouml;nyvt&aacute;r
		el&eacute;r&eacute;si &uacute;tvonal&aacute;t, amiben
		azokat a tartom&aacute;nyokhoz tartoz&oacute; socketeket
		t&aacute;roljuk, amelyeken kereszt&uuml;l olyan
		programokkal tudunk kommunik&aacute;lni, mint
		p&eacute;ld&aacute;ul a &man.hostapd.cli.8;.  Itt az
		alap&eacute;rtelmezett &eacute;rt&eacute;ket
		&iacute;rtuk be.</para>
	    </callout>

	    <callout arearefs="co-ap-wpapsk-cifacegrp">
	      <para>A <literal>ctrl_interface_group</literal> sor
		be&aacute;ll&iacute;tja azt a csoportot (ez jelen
		esetben a <groupname>wheel</groupname>), amin
		kereszt&uuml;l a vez&eacute;rl&#245;fel&uuml;let
		(control interface) &aacute;llom&aacute;nyaihoz
		hozz&aacute; tudunk f&eacute;rni.</para>
	    </callout>

	    <callout arearefs="co-ap-wpapsk-ssid">
	      <para>Ebben a mez&#245;ben a h&aacute;l&oacute;zat
		nev&eacute;t &aacute;ll&iacute;tjuk be.</para>
	    </callout>

	    <callout arearefs="co-ap-wpapsk-wpa">
	      <para>A <literal>wpa</literal> mez&#245;vel
		enged&eacute;lyezz&uuml;k a WPA
		haszn&aacute;lat&aacute;t &eacute;s megadjuk, hogy
		melyik WPA hiteles&iacute;t&eacute;si protokollt
		alkalmazzuk.  Az itt szerepl&#245; <literal>1</literal>
		&eacute;rt&eacute;k a WPA-PSK hiteles&iacute;t&eacute;s
		&aacute;ll&iacute;tja be a
		hozz&aacute;f&eacute;r&eacute;si pont
		sz&aacute;m&aacute;ra.</para>
	    </callout>

	    <callout arearefs="co-ap-wpapsk-pass">
	      <para>A <literal>wpa_passphrase</literal> mez&#245; a WPA
		hiteles&iacute;t&eacute;shez sz&uuml;ks&eacute;ges ASCII
		jelmondatot tartalmazza.</para>

	      <warning>
		<para>Lehet&#245;leg mindig er&#245;s jelszavakat
		  haszn&aacute;ljunk, amelyek kell&#245;en
		  hossz&uacute;ak &eacute;s sokf&eacute;le karaktert
		  tartalmaznak, &iacute;gy nehezebben fejthet&#245;ek
		  meg vagy t&ouml;rhet&#245;ek fel.</para>
	      </warning>
	    </callout>

	    <callout arearefs="co-ap-wpapsk-kmgmt">
	      <para>A <literal>wpa_key_mgmt</literal> sor a kulcsok
		kezel&eacute;s&eacute;re haszn&aacute;lt protokollt
		defini&aacute;lja.  Ez a mi eset&uuml;nk most a
		WPA-PSK.</para>
	    </callout>

	    <callout arearefs="co-ap-wpapsk-pwise">
	      <para>A <literal>wpa_pairwise</literal> mez&#245; a
		hozz&aacute;f&eacute;r&eacute;si pont &aacute;ltal
		elfogadott titkos&iacute;t&aacute;si algoritmusokat
		hat&aacute;rozza meg.  A p&eacute;ld&aacute;ban a TKIP
		(WPA) &eacute;s CCMP (WPA2) titkos&iacute;t&aacute;st is
		t&aacute;mogatjuk.  A CCMP titkos&iacute;t&aacute;s a
		TKIP egyik alternat&iacute;v&aacute;ja, &eacute;s
		lehet&#245;s&eacute;g szerint haszn&aacute;ljuk ezt.  A
		TKIP csak olyan &aacute;llom&aacute;sok eset&eacute;ben
		javasolt, amelyek nem t&aacute;mogatj&aacute;k a CCMP
		haszn&aacute;lat&aacute;t.</para>
	    </callout>
	  </calloutlist>

	  <para>A k&ouml;vetkez&#245; l&eacute;p&eacute;s a
	    <application>hostapd</application>
	    elind&iacute;t&aacute;sa:</para>

	  <screen>&prompt.root <userinput>/etc/rc.d/hostapd forcestart</userinput></screen>

	<screen>&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable></userinput>
  wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 2290
	  inet 192.168.0.1 netmask 0xffffff00 broadcast 192.168.0.255
	  inet6 fe80::211:95ff:fec3:dac%ath0 prefixlen 64 scopeid 0x4
	  ether 00:11:95:c3:0d:ac
	  media: IEEE 802.11 Wireless Ethernet autoselect mode 11g &lt;hostap&gt;
	  status: associated
	  ssid freebsdap channel 1 bssid 00:11:95:c3:0d:ac
	  authmode WPA2/802.11i privacy MIXED deftxkey 2 TKIP 2:128-bit txpowmax 36 protmode CTS dtimperiod 1 bintval 100</screen>

	<para>A hozz&aacute;f&eacute;r&eacute;si pont mostant&oacute;l
	  m&#251;k&ouml;dik, innent&#245;l a kliensek m&aacute;r
	  k&eacute;pesek csatlakozni hozz&aacute;, b&#245;vebben
	  l&aacute;sd a <xref linkend="network-wireless-wpa">ban.  A
	  hozz&aacute;f&eacute;r&eacute;si ponthoz tartoz&oacute;
	  &aacute;llom&aacute;sokat az <command>ifconfig
	  <replaceable>wlan0</replaceable> list sta</command> paranccsal
	  tudjuk list&aacute;zni.</para>
	</sect4>
      </sect3>

      <sect3>
	<title>WEP titkos&iacute;t&aacute;st haszn&aacute;l&oacute;
	  hozz&aacute;f&eacute;r&eacute;si pontok</title>

	<para>A WEP titkos&iacute;t&aacute;st nem javasoljuk a
	  hozz&aacute;f&eacute;r&eacute;si pontok eset&eacute;ben, mivel
	  nem tartalmaz semmilyen hiteles&iacute;t&eacute;si
	  mechanizmust &eacute;s k&ouml;nnyen felt&ouml;rhet&#245;.
	  Egyes r&eacute;gebbi vezet&eacute;k n&eacute;lk&uuml;li
	  k&aacute;rty&aacute;k azonban csak a WEP &aacute;ltal
	  ny&uacute;jtott v&eacute;delmet ismerik, ez&eacute;rt az
	  ilyenek csak olyan hozz&aacute;f&eacute;r&eacute;si pontokhoz
	  tudnak csatlakozni, amelyek vagy nem haszn&aacute;lnank
	  hiteles&iacute;t&eacute;st &eacute;s
	  titkos&iacute;t&aacute;st, vagy erre a WEP protokollt
	  haszn&aacute;lj&aacute;k.</para>

	<para>A vezet&eacute;k n&eacute;lk&uuml;li eszk&ouml;zt
	  tegy&uuml;k hozz&aacute;f&eacute;r&eacute;si pont m&oacute;dba
	  &eacute;s &aacute;ll&iacute;tsuk be neki a megfelel&#245;
	  SSID-t &eacute;s IP-c&iacute;met:</para>

	<screen>&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable> create wlandev <replaceable>ath0</replaceable> wlanmode hostap</userinput>
&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable> inet <replaceable>192.168.0.1</replaceable> netmask <replaceable>255.255.255.0</replaceable> \
	ssid <replaceable>freebsdap</replaceable> wepmode on weptxkey <replaceable>3</replaceable> wepkey <replaceable>3:0x3456789012</replaceable> mode 11g</userinput></screen>

	<itemizedlist>
	  <listitem>
	    <para>A <literal>weptxkey</literal>
	      be&aacute;ll&iacute;t&aacute;s ut&aacute;n adjuk meg a
	      k&uuml;ld&eacute;shez haszn&aacute;lt WEP kulcsot.  Itt a
	      harmadik kulcsot adtuk meg (vegy&uuml;k &eacute;szre, hogy
	      a kulcsok sz&aacute;moz&aacute;sa az <literal>1</literal>
	      &eacute;rt&eacute;kkel kezd&#245;dik).  Ez a
	      param&eacute;tert az adatok t&eacute;nyleges
	      titkos&iacute;t&aacute;s&aacute;hoz kell megadni.</para>
	  </listitem>

	  <listitem>
	    <para>A <literal>wepkey</literal> a kiv&aacute;lasztott WEP
	      kulcs be&aacute;ll&iacute;t&aacute;s&aacute;t jel&ouml;li,
	      aminek a form&aacute;tuma
	      <replaceable>index:kulcs</replaceable>.  Ha itt nem adunk
	      meg indexet, akkor automatikusan az els&#245; kulcsot
	      &aacute;ll&iacute;tjuk be.  Ez&eacute;rt tal&aacute;n
	      mondanunk sem kell, hogy az indexet csak akkor kell
	      megadni, ha nem az els&#245; kulcsot akarjuk
	      haszn&aacute;lni.</para>
	  </listitem>
	</itemizedlist>

	<para>A <devicename>wlan0</devicename> fel&uuml;let
	  &aacute;llapot&aacute;nak megtekint&eacute;s&eacute;hez adjuk
	  ki megint az <command>ifconfig</command> parancsot:</para>

	<screen>&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable></userinput>
  ath0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
	  inet 192.168.0.1 netmask 0xffffff00 broadcast 192.168.0.255
	  ether 00:11:95:c3:0d:ac
	  media: IEEE 802.11 Wireless Ethernet autoselect mode 11g &lt;hostap&gt;
	  status: running
	  ssid freebsdap channel 4 (2427 Mhz) bssid 00:11:95:c3:0d:ac
	  country US ecm authmode OPEN privacy ON deftxkey 3 wepkey 3:40-bit
	  txpower 21.5 scanvalid 60 protmode CTS wme burst dtimperiod 1 -dfs</screen>

	<para>Egy m&aacute;sik vezet&eacute;k n&eacute;lk&uuml;li
	  g&eacute;pr&#245;l most m&aacute;r
	  megpr&oacute;b&aacute;lhatjuk megkeresni a
	  hozz&aacute;f&eacute;r&eacute;si pontot:</para>

	<screen>&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable> create wlandev <replaceable>ath0</replaceable></userinput>
SSID            BSSID              CHAN RATE  S:N   INT CAPS
freebsdap       00:11:95:c3:0d:ac    1   54M 22:1   100 EPS</screen>

	<para>L&aacute;thatjuk, hogy a kliens megtal&aacute;lta a
	  hozz&aacute;f&eacute;r&eacute;si pontot, &eacute;s a
	  megfelel&#245; param&eacute;terekkel (kulcs stb.) k&eacute;pes
	  kapcsol&oacute;dni hozz&aacute; a <xref
	    linkend="network-wireless-wep">ban le&iacute;rtak
	  szerint.</para>
      </sect3>
    </sect2>

    <sect2>
      <title>A vezet&eacute;kes &eacute;s vezet&eacute;k
	n&eacute;lk&uuml;li h&aacute;l&oacute;zatok egy&uuml;ttes
	haszn&aacute;lata</title>

      <para>A vezet&eacute;kes h&aacute;l&oacute;zatok
	&aacute;ltal&aacute;ban jobb teljes&iacute;tm&eacute;nyt
	ny&uacute;jtanak &eacute;s megb&iacute;zhat&oacute;bbak,
	mik&ouml;zben a vezet&eacute;k n&eacute;lk&uuml;li
	h&aacute;l&oacute;zatok pedig nagyobb rugalmass&aacute;got
	&eacute;s mozg&aacute;steret szolg&aacute;ltatnak.  Ez&eacute;rt
	a hordozhat&oacute; sz&aacute;m&iacute;t&oacute;g&eacute;pek
	tulajdonosaiban felmer&uuml;lhet az ig&eacute;ny, hogy egyszerre
	mind a kett&#245;t haszn&aacute;lva, tetsz&#245;legesen
	&eacute;s probl&eacute;mamentesen v&aacute;lthassanak a
	h&aacute;l&oacute;zatok k&ouml;z&ouml;tt.</para>

      <para>&os; rendszereken &uacute;n.
	<quote>hibat&#251;r&#245;</quote> m&oacute;don k&eacute;t vagy
	ak&aacute;r t&ouml;bb h&aacute;l&oacute;zati interf&eacute;szt
	&ouml;ssze tudunk vonni.  Ennek k&ouml;sz&ouml;nhet&#245;en az
	akt&iacute;v h&aacute;l&oacute;zati kapcsolat
	megsz&uuml;n&eacute;sekor rendszer&uuml;nk
	&ouml;n&aacute;ll&oacute;an igyekszik mindig a fennmarad&oacute;
	el&eacute;rhet&#245; h&aacute;l&oacute;zatok k&ouml;z&uuml;l a
	legink&aacute;bb prefer&aacute;ltabbra v&aacute;ltani.</para>

      <para>A h&aacute;l&oacute;zati &ouml;sszek&ouml;ttet&eacute;sek
	&ouml;sszef&#251;z&eacute;s&eacute;vel &eacute;s a
	hibat&#251;r&eacute;s konkr&eacute;t
	megval&oacute;s&iacute;t&aacute;s&aacute;val az <xref
	  linkend="network-aggregation">ban foglalkozunk, ahol a <xref
	  linkend="networking-lagg-wired-and-wireless">ban
	l&aacute;thatjuk is a vezet&eacute;kes &eacute;s vezet&eacute;k
	n&eacute;lk&uuml;li kapcsolatok egy&uuml;ttes
	haszn&aacute;lat&aacute;nak
	be&aacute;ll&iacute;t&aacute;s&aacute;t.</para>
    </sect2>

    <sect2>
      <title>Hibaelh&aacute;r&iacute;t&aacute;s</title>

      <para>Ha valamilyen gondunk lenne a vezet&eacute;k
	n&eacute;lk&uuml;li h&aacute;l&oacute;zatok
	haszn&aacute;lat&aacute;val, akad n&eacute;h&aacute;ny
	l&eacute;p&eacute;s, amivel esetleg fel tudjuk der&iacute;teni a
	hiba ok&aacute;t.</para>

      <itemizedlist>
	<listitem>
	  <para>Ha nem l&aacute;tjuk a hozz&aacute;f&eacute;r&eacute;si
	    pontot a p&aacute;szt&aacute;z&aacute;s ut&aacute;n,
	    ellen&#245;rizz&uuml;k, hogy a vezet&eacute;k
	    n&eacute;lk&uuml;li eszk&ouml;zt v&eacute;letlen&uuml;l nem
	    korl&aacute;toztuk-e le bizonyos csatorn&aacute;kra.</para>
	</listitem>

	<listitem>
	  <para>Ha nem tudunk csatlakozni a
	    hozz&aacute;f&eacute;r&eacute;si ponthoz, akkor
	    egyeztess&uuml;k vele az &aacute;llom&aacute;s egyes
	    param&eacute;tereit, bele&eacute;rtve a
	    hiteles&iacute;t&eacute;si s&eacute;m&aacute;t &eacute;s a
	    biztons&aacute;gi protokollokat.  Min&eacute;l jobban
	    egyszer&#251;s&iacute;ts&uuml;k le a
	    konfigur&aacute;ci&oacute;kat.  Ha WPA vagy WEP
	    titkos&iacute;t&aacute;st haszn&aacute;lunk, akkor a
	    hozz&aacute;f&eacute;r&eacute;si ponton
	    &aacute;ll&iacute;tsunk be ny&iacute;lt
	    hiteles&iacute;t&eacute;st &eacute;s kapcsoljuk ki a
	    titkos&iacute;t&aacute;st, majd n&eacute;zz&uuml;k meg, hogy
	    &iacute;gy eljut-e hozz&aacute;nk valamilyen
	    forgalom.</para>
	</listitem>

	<listitem>
	  <para>Ahogy siker&uuml;lt csatlakozunk a
	    hozz&aacute;f&eacute;r&eacute;si ponthoz, a
	    biztons&aacute;gi be&aacute;ll&iacute;t&aacute;sokat olyan
	    egyszer&#251; eszk&ouml;z&ouml;kkel pr&oacute;b&aacute;ljuk
	    meg diagnosztiz&aacute;lni, mint p&eacute;ld&aacute;ul a
	    &man.ping.8;.</para>

	  <para>A <command>wpa_supplicant</command>
	    seg&eacute;dprogrammal tudunk nyomk&ouml;vet&eacute;st
	    v&eacute;gezni.  A <option>-dd</option> opci&oacute;
	    megad&aacute;s&aacute;val ind&iacute;tsuk el
	    manu&aacute;lisan &eacute;s ellen&#245;rizz&uuml;k a
	    rendszernapl&oacute;kat.</para>
	</listitem>

	<listitem>
	  <para>Vannak alacsonyabb szint&#251; nyomk&ouml;vet&eacute;si
	    lehet&#245;s&eacute;gek is.  A 802.11 protokollt
	    t&aacute;mogat&oacute; r&eacute;tegben is tudunk
	    enged&eacute;lyezni nyomk&ouml;vet&eacute;si &uuml;zeneteket
	    a <filename>/usr/src/tools/tools/net80211</filename>
	    k&ouml;nyvt&aacute;rban tal&aacute;lhat&oacute;
	    <command>wlandebug</command> program
	    seg&iacute;ts&eacute;g&eacute;vel.  P&eacute;ld&aacute;ul
	    a</para>

	  <screen>&prompt.root; <userinput>wlandebug -i <replaceable>ath0</replaceable> +scan+auth+debug+assoc</userinput>
  net.wlan.0.debug: 0 =&gt; 0xc80000&lt;assoc,auth,scan&gt;</screen>

	  <para>paranccsal a hozz&aacute;f&eacute;r&eacute;si pontok
	    keres&eacute;s&eacute;hez &eacute;s a 802.11 protokollon
	    bel&uuml;l a kapcsolat megszervez&eacute;s&eacute;hez
	    sz&uuml;ks&eacute;ges k&eacute;zfog&aacute;sokhoz
	    kapcsol&oacute;d&oacute; konzol&uuml;zeneteket tudjuk
	    enged&eacute;lyezni.</para>

	  <para>A 802.11 r&eacute;tegben rengeteg hasznos
	    statisztik&aacute;t tal&aacute;lhatunk.  Mindezeket a
	    <command>wlanstats</command> eszk&ouml;zzel tudjuk
	    ki&iacute;ratni.  Ezeknek a statisztik&aacute;knak a 802.11
	    r&eacute;teg &ouml;sszes hib&aacute;j&aacute;t be kell
	    tudniuk azonos&iacute;taniuk.  Vigy&aacute;zzunk azonban,
	    mert az eszk&ouml;zmeghajt&oacute;kban a 802.11 r&eacute;teg
	    alatt rejl&#245; bizonyos hib&aacute;k ilyenkor nem jelennek
	    meg.  Az eszk&ouml;zf&uuml;gg&#245; probl&eacute;m&aacute;k
	    felder&iacute;t&eacute;s&eacute;vel kapcsolatban a
	    megfelel&#245; meghajt&oacute;
	    dokument&aacute;ci&oacute;j&aacute;t olvassuk
	    &aacute;t.</para>
	</listitem>

      </itemizedlist>

      <para>Amennyiben a fenti tan&aacute;csok ment&eacute;n sem
	siker&uuml;l orvosolnunk a hib&aacute;t ok&aacute;t,
	k&uuml;ldj&uuml;nk egy hibajelent&eacute;st &eacute;s
	mell&eacute;kelj&uuml;k hozz&aacute; a fentebb t&aacute;rgyalt
	eszk&ouml;z&ouml;k &aacute;ltal gy&aacute;rtott
	kimeneteket.</para>

    </sect2>
  </sect1>

  <sect1 id="network-bluetooth">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Pav</firstname>
	  <surname>Lucistnik</surname>
	  <contrib>&Iacute;rta: </contrib>
	  <affiliation>
	    <address><email>pav@FreeBSD.org</email></address>
	  </affiliation>
	</author>
      </authorgroup>
    </sect1info>

    <title>Bluetooth</title>

    <indexterm><primary>Bluetooth</primary></indexterm>

    <sect2>
      <title>Bevezet&eacute;s</title>

      <para>A Bluetooth egy olyan vezet&eacute;k n&eacute;lk&uuml;li
	technol&oacute;gia, amellyel a 2,4&nbsp;GHz-es
	frekvenciatartom&aacute;nyban tudunk szem&eacute;lyi
	h&aacute;l&oacute;zatokat l&eacute;trehozni 10 m&eacute;teren
	bel&uuml;l.  Az ilyen t&iacute;pus&uacute;
	h&aacute;l&oacute;zatok &aacute;ltal&aacute;ban alkalmi
	jelleggel keletkeznek k&uuml;l&ouml;nf&eacute;le
	hordozhat&oacute; eszk&ouml;z&ouml;k, mint p&eacute;ld&aacute;ul
	mobiltelefonok, k&eacute;zi
	sz&aacute;m&iacute;t&oacute;g&eacute;pek &eacute;s laptopok
	k&ouml;z&ouml;tt.  Elt&eacute;r&#245;en m&aacute;s
	n&eacute;pszer&#251; vezet&eacute;k n&eacute;lk&uuml;li
	technol&oacute;gi&aacute;kt&oacute;l, p&eacute;ld&aacute;ul a
	wi-fit&#245;l, a Bluetooth magasabb szint&#251;
	szolg&aacute;lt&aacute;si profilokat is felaj&aacute;nl:
	FTP-szer&#251; &aacute;llom&aacute;nyszervereket, az
	&aacute;llom&aacute;nyok &aacute;ttol&aacute;s&aacute;t, hang
	&aacute;tk&uuml;ld&eacute;s&eacute;t, soros vonali
	emul&aacute;ci&oacute;t &eacute;s m&eacute;g sok minden
	m&aacute;st.</para>

      <para>A &os;-ben megval&oacute;s&iacute;tott Bluetooth
	protokollk&eacute;szlet a Netgraph rendszerre
	&eacute;p&iacute;tkezik (l&aacute;sd &man.netgraph.4;).  A
	Bluetooth alap&uacute; USB-s hardverz&aacute;rak sz&eacute;les
	k&ouml;r&eacute;t t&aacute;mogatja az &man.ng.ubt.4;
	meghajt&oacute;.  A Broadcom BCM2033 chipre
	&eacute;p&iacute;tett Bluetooth eszk&ouml;z&ouml;ket az
	&man.ubtbcmfw.4; &eacute;s az &man.ng.ubt.4; meghajt&oacute;k
	t&aacute;mogatj&aacute;k.  A 3Com Bluetooth PC Card 3CRWB60-A
	eszk&ouml;zt az &man.ng.bt3c.4; meghajt&oacute;
	t&aacute;mogatja.  A soros &eacute;s UART alap&uacute; Bluetooth
	eszk&ouml;z&ouml;ket a &man.sio.4;, &man.ng.h4.4; &eacute;s
	&man.hcseriald.8; ismeri.  Ebben a szakaszban a Bluetooth
	alap&uacute; USB-s hardverz&aacute;rak haszn&aacute;lat&aacute;t
	mutatjuk be.</para>

    </sect2>

    <sect2>
      <title>Az eszk&ouml;z csatlakoztat&aacute;sa</title>

      <para>Alap&eacute;rtelmez&eacute;s szerint a Bluetooth
	eszk&ouml;zmeghajt&oacute;k modulk&eacute;nt
	&eacute;rhet&#245;ek el.  Az eszk&ouml;z csatlakoztat&aacute;sa
	el&#245;tt a megfelel&#245; meghajt&oacute;t be kell
	t&ouml;lten&uuml;nk a rendszermagba:</para>

      <screen>&prompt.root; <userinput>kldload ng_ubt</userinput></screen>

      <para>Ha a Bluetooth eszk&ouml;z m&aacute;r a rendszer
	ind&iacute;t&aacute;sakor is jelen van, akkor a modult az
	<filename>/boot/loader.conf</filename> &aacute;llom&aacute;nyon
	kereszt&uuml;l is bet&ouml;lthetj&uuml;k:</para>

      <programlisting>ng_ubt_load="YES"</programlisting>

      <para>Dugjuk be az USB-s hardverz&aacute;runkat.  Az
	al&aacute;bbihoz hasonl&oacute; kimenet fog keletkezni a
	konzolon (vagy a rendszernapl&oacute;ban):</para>

      <screen>ubt0: vendor 0x0a12 product 0x0001, rev 1.10/5.25, addr 2
ubt0: Interface 0 endpoints: interrupt=0x81, bulk-in=0x82, bulk-out=0x2
ubt0: Interface 1 (alt.config 5) endpoints: isoc-in=0x83, isoc-out=0x3,
      wMaxPacketSize=49, nframes=6, buffer size=294</screen>

      <para>Az <filename>/etc/rc.d/bluetooth</filename> szkript fogja
	v&eacute;gezni a Bluetooth haszn&aacute;lat&aacute;hoz
	sz&uuml;ks&eacute;ges protokollk&eacute;szlet
	elind&iacute;t&aacute;s&aacute;t &eacute;s
	le&aacute;ll&iacute;t&aacute;s&aacute;t.  J&oacute; &ouml;tlet
	le&aacute;ll&iacute;tani az eszk&ouml;z
	elt&aacute;vol&iacute;t&aacute;sa el&#245;tt, de ha elhagyjuk,
	(&aacute;ltal&aacute;ban) nem okoz v&eacute;gzetes hib&aacute;t.
	Az ind&iacute;t&aacute;skor a k&ouml;vetkez&#245; kimenetet
	kapjuk:</para>

      <screen>&prompt.root; <userinput>/etc/rc.d/bluetooth start ubt0</userinput>
BD_ADDR: 00:02:72:00:d4:1a
Features: 0xff 0xff 0xf 00 00 00 00 00
&lt;3-Slot&gt; &lt;5-Slot&gt; &lt;Encryption&gt; &lt;Slot offset&gt;
&lt;Timing accuracy&gt; &lt;Switch&gt; &lt;Hold mode&gt; &lt;Sniff mode&gt;
&lt;Park mode&gt; &lt;RSSI&gt; &lt;Channel quality&gt; &lt;SCO link&gt;
&lt;HV2 packets&gt; &lt;HV3 packets&gt; &lt;u-law log&gt; &lt;A-law log&gt; &lt;CVSD&gt;
&lt;Paging scheme&gt; &lt;Power control&gt; &lt;Transparent SCO data&gt;
Max. ACL packet size: 192 bytes
Number of ACL packets: 8
Max. SCO packet size: 64 bytes
Number of SCO packets: 8</screen>

    </sect2>

    <indexterm><primary>HCI</primary></indexterm>

    <sect2>
      <title>Host Controller Interface (HCI)</title>

      <para>A Host Controller Interface (HCI) egy parancsfel&uuml;letet
	ny&uacute;jt a m&#251;k&ouml;d&eacute;si s&aacute;v
	vez&eacute;rl&#245;j&eacute;hez (baseband controller) &eacute;s
	az &ouml;sszek&ouml;ttet&eacute;sek kezel&#245;j&eacute;hez
	(link manager), valamint hozz&aacute;f&eacute;r&eacute;st a
	hardver&aacute;llapot &eacute;s -vez&eacute;rl&#245;
	regiszterekhez.  Ez a fel&uuml;let egy egys&eacute;ges
	m&oacute;dszert szolg&aacute;ltat a Bluetooth
	m&#251;k&ouml;d&eacute;si s&aacute;vj&aacute;hoz tartoz&oacute;
	tulajdons&aacute;gok el&eacute;r&eacute;s&eacute;hez.  Az
	eszk&ouml;z&ouml;n &uuml;zemel&#245; HCI r&eacute;teg a
	Bluetooth hardverben tal&aacute;lhat&oacute; HCI firmware-rel
	v&aacute;lt adatokat &eacute;s parancsokat.  A Host Controller
	Transport Layer (vagyis a fizikai busz) meghajt&oacute;ja mind a
	k&eacute;t HCI r&eacute;teget &eacute;s a kettej&uuml;k
	k&ouml;zti inform&aacute;ci&oacute;cser&eacute;t is
	el&eacute;rhet&#245;v&eacute; teszi.</para>

      <para>Az egyes Bluetooth eszk&ouml;z&ouml;kh&ouml;z
	l&eacute;trej&ouml;n egy-egy <emphasis>hci</emphasis>
	t&iacute;pus&uacute; Netgraph-beli csom&oacute;pont.  Ez a HCI
	csom&oacute;pont &aacute;ltal&aacute;ban a Bluetooth
	eszk&ouml;zmeghajt&oacute; csom&oacute;pontj&aacute;hoz
	(lefel&eacute;) &eacute;s az L2CAP csom&oacute;ponthoz
	(felfel&eacute;) csatlakozik.  Az &ouml;sszes HCI m&#251;veletet
	a HCI csom&oacute;ponton kell elv&eacute;gezni &eacute;s nem az
	eszk&ouml;zmeghajt&oacute;hoz tartoz&oacute;n.  A HCI
	csom&oacute;pont alap&eacute;rtelmezett neve a
	<quote>devicehci</quote>.  Ezekr&#245;l t&ouml;bbet az
	&man.ng.hci.4; man oldal&aacute;n tudhatunk meg.</para>

      <para>Az egyik leg&aacute;ltal&aacute;nosabb feladat a Bluetooth
	eszk&ouml;z&ouml;k eset&eacute;ben a k&ouml;zelben lev&#245;
	tov&aacute;bbi eszk&ouml;z&ouml;k felder&iacute;t&eacute;se.
	Ezt a m&#251;veletet
	<emphasis>tudakoz&oacute;d&aacute;snak</emphasis>
	(<quote>inquiry</quote>) nevezik.  A tudakoz&oacute;d&aacute;st
	&eacute;s az &ouml;sszes t&ouml;bbi HCI-hez
	kapcsol&oacute;d&oacute; m&#251;veletet a &man.hccontrol.8;
	seg&eacute;dprogrammal tudjuk elv&eacute;gezni.  A lentebb
	l&aacute;that&oacute; p&eacute;lda azt mutatja meg, hogyan
	tudunk Bluetooth eszk&ouml;z&ouml;ket keresni egy adott
	t&aacute;vols&aacute;gon bel&uuml;l.  Az el&eacute;rhet&#245;
	eszk&ouml;z&ouml;k list&aacute;j&aacute;t n&eacute;h&aacute;ny
	m&aacute;sodpercen alatt megkapjuk.  A t&aacute;voli azonban
	eszk&ouml;z&ouml;k csak akkor fognak v&aacute;laszolni, ha
	<emphasis>felder&iacute;thet&#245;</emphasis>
	(<quote>discoverable</quote>) m&oacute;dban vannak.</para>

      <screen>&prompt.user; <userinput>hccontrol -n ubt0hci inquiry</userinput>
Inquiry result, num_responses=1
Inquiry result #0
       BD_ADDR: 00:80:37:29:19:a4
       Page Scan Rep. Mode: 0x1
       Page Scan Period Mode: 00
       Page Scan Mode: 00
       Class: 52:02:04
       Clock offset: 0x78ef
Inquiry complete. Status: No error [00]</screen>

      <para>A <literal>BD_ADDR</literal> a Bluetooth eszk&ouml;z egyedi
	c&iacute;me, hasonl&oacute; a h&aacute;l&oacute;zati
	k&aacute;rty&aacute;k MAC-c&iacute;m&eacute;hez.  Erre a
	c&iacute;mre lesz sz&uuml;ks&eacute;g ahhoz, hogy a
	tov&aacute;bbiakban kommunik&aacute;lni tudjunk az
	eszk&ouml;zzel.  Emberek sz&aacute;m&aacute;ra
	&eacute;rtelmezhet&#245; nevet is hozz&aacute; tudunk rendelni a
	BD_ADDR c&iacute;mhez.  Az
	<filename>/etc/bluetooth/hosts</filename> &aacute;llom&aacute;ny
	tartalmazza a Bluetooth eszk&ouml;z&ouml;kre vonatkoz&oacute;
	inform&aacute;ci&oacute;kat.  A k&ouml;vetkez&#245;
	p&eacute;ld&aacute;ban azt l&aacute;thatjuk, hogyan tudunk
	besz&eacute;desebb nevet adni egy t&aacute;voli
	eszk&ouml;znek:</para>

      <screen>&prompt.user; <userinput>hccontrol -n ubt0hci remote_name_request 00:80:37:29:19:a4</userinput>
BD_ADDR: 00:80:37:29:19:a4
Name: Pav T39-ese</screen>

      <para>Amikor tudakoz&oacute;dni kezd&uuml;nk a t&aacute;voli
	Bluetooth eszk&ouml;z&ouml;k jelenl&eacute;te fel&#245;l, a
	g&eacute;p&uuml;nket <quote>sajat.gep.nev (ubt0)</quote>
	n&eacute;ven fogj&aacute;k l&aacute;tni.  Ez a helyi
	eszk&ouml;zh&ouml;z rendelt n&eacute;v b&aacute;rmikor
	megv&aacute;ltoztathat&oacute;.</para>

      <para>A Bluetooth rendszer lehet&#245;s&eacute;g ad pont-pont
	(term&eacute;szetesen csak k&eacute;t Bluetooth egys&eacute;g
	k&ouml;z&ouml;tt) vagy pont-multipont t&iacute;pus&uacute;
	kapcsolatok ki&eacute;p&iacute;t&eacute;s&eacute;re.  A
	pont-multipont kapcsolat eset&eacute;n a kapcsolaton t&ouml;bb
	Bluetooth eszk&ouml;z osztozik.  A most k&ouml;vetkez&#245;
	p&eacute;ld&aacute;ban megl&aacute;thatjuk, hogyan kell az
	akt&iacute;v m&#251;k&ouml;d&eacute;si s&aacute;vban
	lek&eacute;rdezni a helyi eszk&ouml;z l&eacute;trej&ouml;tt
	kapcsolatait:</para>

      <screen>&prompt.user; <userinput>hccontrol -n ubt0hci read_connection_list</userinput>
Remote BD_ADDR    Handle Type Mode Role Encrypt Pending Queue State
00:80:37:29:19:a4     41  ACL    0 MAST    NONE       0     0 OPEN</screen>

      <para>A <emphasis>kapcsolat azonos&iacute;t&oacute;ja</emphasis>
	(connection handle) akkor hasznos, amikor egy s&aacute;vbeli
	kapcsolatot akarunk lez&aacute;rni.  Ezt &aacute;ltal&aacute;ban
	nem kell k&eacute;zzel megcsin&aacute;lni.  A rendszer
	mag&aacute;t&oacute;l lez&aacute;rja az inakt&iacute;v
	s&aacute;vbeli kapcsolatokat.</para>

      <screen>&prompt.root; <userinput>hccontrol -n ubt0hci disconnect 41</userinput>
Connection handle: 41
Reason: Connection terminated by local host [0x16]</screen>

      <para>A <command>hccontrol help</command> paranccsal tudjuk
	lek&eacute;rdezni az el&eacute;rhet&#245; HCI parancsokat.  A
	legt&ouml;bb HCI parancs v&eacute;grehajt&aacute;s&aacute;hoz
	nem kellenek rendszeradminisztr&aacute;tori
	jogosults&aacute;gok.</para>

    </sect2>

    <indexterm><primary>L2CAP</primary></indexterm>

    <sect2>
      <title>Logical Link Control and Adaptation Protocol
	(L2CAP)</title>

      <para>A Logical Link Control and Adaptation Protocol (L2CAP) a
	kapcsolat-orient&aacute;lt &eacute;s a kapcsolat
	n&eacute;lk&uuml;li adatszolg&aacute;ltat&aacute;sok&eacute;rt
	felel&#245;s a fels&#245;bb r&eacute;tegek fel&eacute;, valamit
	t&aacute;mogatja a protokollok
	t&ouml;bbsz&ouml;r&ouml;z&eacute;s&eacute;t, a darabol&aacute;st
	&eacute;s az &ouml;sszerak&aacute;st.  Az L2CAP a magasabb
	szint&#251; protokollok &eacute;s az alkalmaz&aacute;sok
	sz&aacute;m&aacute;ra eg&eacute;szen 64&nbsp;kilobyte
	m&eacute;retig lehet&#245;v&eacute; teszi az adatcsomagok
	k&uuml;ld&eacute;s&eacute;t &eacute;s
	fogad&aacute;s&aacute;t.</para>

      <para>A L2CAP a <emphasis>csatorna</emphasis> (channel)
	fogalm&aacute;ra &eacute;p&iacute;tkezik.  A csatorna egy
	logikai kapcsolatot k&eacute;pvisel a m&#251;k&ouml;d&eacute;si
	s&aacute;von bel&uuml;li kapcsolat felett.  Mindegyik
	csatorn&aacute;hoz egyetlen protokoll k&ouml;t&#245;dik, egy a
	t&ouml;bbh&ouml;z alapon.  T&ouml;bb csatorna is tarthozhat
	ugyanahhoz a protokollhoz, de egy csatorn&aacute;n nem
	haszn&aacute;lhatunk t&ouml;bb protokollt.  A csatorn&aacute;kon
	kereszt&uuml;l &eacute;rkez&#245; L2CAP csomagok ezut&aacute;n a
	megfelel&#245; fels&#245;bb r&eacute;tegbeli protokollokhoz
	ker&uuml;lnek.  T&ouml;bb csatorna osztozhat ugyanazon a
	s&aacute;vbeli kapcsolaton.</para>

      <para>Minden Bluetooth eszk&ouml;zh&ouml;z l&eacute;trej&ouml;n
	egy <emphasis>l2cap</emphasis> t&iacute;pus&uacute;
	Netgraph-csom&oacute;pont.  Az L2CAP csom&oacute;pont
	&aacute;ltal&aacute;ban egy Bluetooth HCI csom&oacute;ponthoz
	(lefel&eacute;) &eacute;s egy Bluetooth sockethez
	(felfel&eacute;) kapcsol&oacute;dik.  Az L2CAP csom&oacute;pont
	alap&eacute;rtelmezett neve <quote>devicel2cap</quote>.
	Err&#245;l r&eacute;szletesebben az &man.ng.l2cap.4; man oldal
	vil&aacute;gos&iacute;t fel minket.</para>

      <para>Ezen a szinten hasznos parancsnak bizonyulhat az
	&man.l2ping.8;, amivel m&aacute;s eszk&ouml;z&ouml;ket tudunk
	pingelni.  El&#245;fordulhat, hogy egyes Bluetooth
	implement&aacute;ci&oacute;k nem v&aacute;laszolnak semmilyen
	fel&eacute;j&uuml;k k&uuml;ld&ouml;tt adatra, &iacute;gy az
	al&aacute;bbi p&eacute;ld&aacute;ban is szerepl&#245; <literal>0
	bytes</literal> teljesen norm&aacute;lis.</para>

      <screen>&prompt.root; <userinput>l2ping -a 00:80:37:29:19:a4</userinput>
0 bytes from 0:80:37:29:19:a4 seq_no=0 time=48.633 ms result=0
0 bytes from 0:80:37:29:19:a4 seq_no=1 time=37.551 ms result=0
0 bytes from 0:80:37:29:19:a4 seq_no=2 time=28.324 ms result=0
0 bytes from 0:80:37:29:19:a4 seq_no=3 time=46.150 ms result=0</screen>

      <para>Az &man.l2control.8; seg&eacute;dprogram
	haszn&aacute;lhat&oacute; az L2CAP csom&oacute;pontok
	k&uuml;l&ouml;nb&ouml;z&#245; m&#251;veleteinek
	kivitelez&eacute;s&eacute;re.  Ebben a p&eacute;ld&aacute;ban a
	helyi eszk&ouml;zh&ouml;z tartoz&oacute; logikai kapcsolatokat
	(csatorn&aacute;k) &eacute;s s&aacute;vokat
	k&eacute;rdezz&uuml;k le:</para>

      <screen>&prompt.user; <userinput>l2control -a 00:02:72:00:d4:1a read_channel_list</userinput>
L2CAP channels:
Remote BD_ADDR     SCID/ DCID   PSM  IMTU/ OMTU State
00:07:e0:00:0b:ca    66/   64     3   132/  672 OPEN
&prompt.user; <userinput>l2control -a 00:02:72:00:d4:1a read_connection_list</userinput>
L2CAP connections:
Remote BD_ADDR    Handle Flags Pending State
00:07:e0:00:0b:ca     41 O           0 OPEN</screen>

      <para>M&aacute;sik ugyanilyen diagnosztikai eszk&ouml;z a
	&man.btsockstat.1;.  Ha a viselked&eacute;s&eacute;t
	tekintj&uuml;k, akkor legink&aacute;bb a &man.netstat.1;
	programra hasonl&iacute;t, de a Bluetooth
	h&aacute;l&oacute;zatban megjelen&#245; adatszerkezetekkel
	dolgozik.  Az al&aacute;bbi p&eacute;lda az im&eacute;nti
	&man.l2control.8; parancs kimenet&eacute;ben szerepl&#245;
	logikai kapcsolatokat mutatja:</para>

      <screen>&prompt.user; <userinput>btsockstat</userinput>
Active L2CAP sockets
PCB      Recv-Q Send-Q Local address/PSM       Foreign address   CID   State
c2afe900      0      0 00:02:72:00:d4:1a/3     00:07:e0:00:0b:ca 66    OPEN
Active RFCOMM sessions
L2PCB    PCB      Flag MTU   Out-Q DLCs State
c2afe900 c2b53380 1    127   0     Yes  OPEN
Active RFCOMM sockets
PCB      Recv-Q Send-Q Local address     Foreign address   Chan DLCI State
c2e8bc80      0    250 00:02:72:00:d4:1a 00:07:e0:00:0b:ca 3    6    OPEN</screen>

    </sect2>

    <indexterm><primary>RFCOMM</primary></indexterm>

    <sect2>
      <title>Az RFCOMM protokoll</title>

      <para>Az RFCOMM protokoll a soros portok
	emul&aacute;ci&oacute;j&aacute;t val&oacute;s&iacute;tja meg az
	L2CAP protokollon kereszt&uuml;l.  A protokoll az ETSI TS 07.10.
	RFCOMM szabv&aacute;ny&aacute;n alapszik, &eacute;s egy
	egyszer&#251; &aacute;tviteli protokoll, amelyet a 9 t&#251;s
	RS-232 (EIATIA-232-E) soros portok
	emul&aacute;ci&oacute;j&aacute;ra k&eacute;sz&iacute;tettek fel.
	Az RFCOMM protokoll legfeljebb 60 kapcsolat (RFCOMM csatorna)
	p&aacute;rhuzamos haszn&aacute;lat&aacute;t t&aacute;mogatja
	k&eacute;t Bluetooth eszk&ouml;z k&ouml;z&ouml;tt.</para>

      <para>Az RFCOMM sz&aacute;m&aacute;ra a teljes
	kommunik&aacute;ci&oacute;s &uacute;tvonal k&eacute;t
	k&uuml;l&ouml;nb&ouml;z&#245; eszk&ouml;z&ouml;n fut&oacute;
	alkalmaz&aacute;st (kommunik&aacute;ci&oacute;s
	v&eacute;gpontot) &eacute;s k&ouml;zt&uuml;k lev&#245;
	kommunik&aacute;ci&oacute;s szegments foglalja mag&aacute;ban.
	Az RFCOMM az adott eszk&ouml;z&ouml;n a soros portot
	haszn&aacute;l&oacute; alkalmaz&aacute;sok r&eacute;sz&eacute;re
	k&eacute;sz&uuml;lt.  A kommunik&aacute;ci&oacute;s szegmens az
	egyik eszk&ouml;zt&#245;l a m&aacute;sikig vezet&#245; Bluetooth
	alap&uacute; &ouml;sszek&ouml;ttet&eacute;s (k&ouml;zvetlen
	kapcsolat).</para>

      <para>K&ouml;zvetlen kapcsolat eset&eacute;n az RFCOMM csak az
	eszk&ouml;z&ouml;k k&ouml;zti kapcsolattal foglalkozik, valamint
	h&aacute;l&oacute;zati kapcsolat eset&eacute;n az eszk&ouml;z
	&eacute;s a modem k&ouml;zti kapcsolattal.  Az RFCOMM m&aacute;s
	konfigur&aacute;ci&oacute;kat is t&aacute;mogat,
	p&eacute;ld&aacute;ul olyan modulokat, amelyek az egyik oldalon
	a Bluetooth vezet&eacute;k n&eacute;lk&uuml;li
	technol&oacute;gi&aacute;n kereszt&uuml;l kommunik&aacute;lnak,
	m&iacute;g a m&aacute;sik oldalon egy vonalas fel&uuml;letet
	ny&uacute;jtanak.</para>

      <para>A &os;-ben az RFCOMM protokollt Bluetooth foglalatok
	r&eacute;teg&eacute;ben val&oacute;s&iacute;tott&aacute;k
	meg.</para>

    </sect2>

    <indexterm><primary>p&aacute;ros&iacute;t&aacute;s</primary></indexterm>

    <sect2>
      <title>Az eszk&ouml;z&ouml;k
	p&aacute;ros&iacute;t&aacute;sa</title>

      <para>Alap&eacute;rtelmez&eacute;s szerint a Bluetooth
	kommunik&aacute;ci&oacute; nem hiteles&iacute;t&#245;dik
	&eacute;s b&aacute;rmelyik eszk&ouml;z k&eacute;pes
	b&aacute;rmelyik m&aacute;sikkal felvenni a kapcsolatot.  Egy
	Bluetooth eszk&ouml;z (p&eacute;ld&aacute;ul egy mobiltelefon)
	egy adott szolg&aacute;ltat&aacute;shoz ig&eacute;nyelhet
	hiteles&iacute;t&eacute;st (p&eacute;ld&aacute;ul
	bet&aacute;rcs&aacute;z&aacute;shoz).  A Bluetooth alap&uacute;
	hiteles&iacute;t&eacute;s t&ouml;bbnyire <emphasis>PIN
	k&oacute;dokkal</emphasis> t&ouml;rt&eacute;nik.  A PIN
	k&oacute;d egy legfeljebb 16 karakterb&#245;l &aacute;ll&oacute;
	ASCII karakterl&aacute;nc.  A felhaszn&aacute;l&oacute;knak mind
	a k&eacute;t eszk&ouml;z&ouml;n ugyanazt a PIN k&oacute;dot kell
	megadniuk.  Miut&aacute;n megadtuk a PIN k&oacute;dot, az
	eszk&ouml;z&ouml;k l&eacute;trehoznak hozz&aacute;juk egy
	<emphasis>&ouml;sszek&ouml;tett&eacute;sbeli kulcsot</emphasis>
	(link key).  Ezut&aacute;n ezt a kulcsot vagy az
	eszk&ouml;z&ouml;k&ouml;n t&aacute;roljuk vagy pedig valamilyen
	tart&oacute;s t&aacute;rol&oacute;n.  A k&ouml;vetkez&#245;
	alkalommal mind a k&eacute;t eszk&ouml;zt ezt a kor&aacute;bban
	elk&eacute;sz&iacute;tett kulcsot fogja haszn&aacute;lni.  Ezt
	az elj&aacute;r&aacute;st nevezik
	<emphasis>p&aacute;ros&iacute;t&aacute;snak</emphasis>
	(pairing).  Ha valamelyik eszk&ouml;z elveszti az
	&ouml;ssszek&ouml;ttet&eacute;s kulcs&aacute;t, akkor a
	p&aacute;ros&iacute;t&aacute;st meg kell
	ism&eacute;telni.</para>

      <para>A &man.hcsecd.8; d&eacute;mon felel&#245;s az &ouml;sszes
	Bluetooth alap&uacute; hiteles&iacute;t&eacute;si
	k&eacute;r&eacute;s lekezel&eacute;s&eacute;&eacute;rt.  Az
	alap&eacute;rtelmezett konfigur&aacute;ci&oacute;s
	&aacute;llom&aacute;nya az
	<filename>/etc/bluetooth/hcsecd.conf</filename>.
	P&eacute;ld&aacute;ul &iacute;gy tudjuk benne egy
	mobiltelefonhoz megadni az <quote>1234</quote> PIN
	k&oacute;dot:</para>

      <programlisting>device {
        bdaddr  00:80:37:29:19:a4;
        name    "Pav T39-ese";
        key     nokey;
        pin     "1234";
      }</programlisting>

      <para>Semmilyen korl&aacute;toz&aacute;s nincs a PIN
	k&oacute;dokra (a m&eacute;ret&uuml;kt&#245;l eltekintve).
	Egyes eszk&ouml;z&ouml;kbe (p&eacute;ld&aacute;ul a Bluetooth
	fejhallgat&oacute;k) el&#245;re r&ouml;gz&iacute;tett PIN
	k&oacute;dot &eacute;p&iacute;tettek bele.  A
	<option>-d</option> kapcsol&oacute; hat&aacute;s&aacute;ra a
	&man.hcsecd.8; d&eacute;mont az el&#245;t&eacute;rben lehet
	futtatni, &iacute;gy k&ouml;nnyebben l&aacute;thatjuk mi
	t&ouml;rt&eacute;nik.  A t&aacute;voli eszk&ouml;zt
	&aacute;ll&iacute;tsuk be a p&aacute;ros&iacute;t&aacute;s
	elfogad&aacute;s&aacute;ra &eacute;s kezdem&eacute;nyezz&uuml;nk
	fel&eacute; egy Bluetooth kapcsolatot.  A t&aacute;voli
	eszk&ouml;znek erre azt kell v&aacute;laszolnia, hogy elfogadta
	a p&aacute;ros&iacute;t&aacute;st, majd k&eacute;rni fogja a PIN
	k&oacute;dot.  Adjuk meg ugyanazt a PIN k&oacute;dot, mint amit
	a <filename>hcsecd.conf</filename> &aacute;llom&aacute;nyba is
	be&iacute;rtunk.  Most m&aacute;r a g&eacute;p&uuml;nk &eacute;s
	a t&aacute;voli eszk&ouml;z p&aacute;rban vannak.  A
	p&aacute;ros&iacute;t&aacute;st a t&aacute;voli
	eszk&ouml;zr&#245;l is kezdem&eacute;nyezhetj&uuml;k.</para>

      <para>A &os;&nbsp;5.5, 6.1 &eacute;s &uacute;jabb
	v&aacute;ltozataiban az <filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyba a k&ouml;vetkez&#245; sort kell
	felvenni a <application>hcsecd</application> automatikus
	ind&iacute;t&aacute;s&aacute;hoz:</para>

      <programlisting>hcsecd_enable="YES"</programlisting>

      <para>Ez pedig a <application>hcsecd</application> d&eacute;mon
	&aacute;ltal gener&aacute;lt kimenetre p&eacute;lda:</para>

<programlisting>hcsecd[16484]: Got Link_Key_Request event from 'ubt0hci', remote bdaddr 0:80:37:29:19:a4
hcsecd[16484]: Found matching entry, remote bdaddr 0:80:37:29:19:a4, name 'Pav's T39', link key doesn't exist
hcsecd[16484]: Sending Link_Key_Negative_Reply to 'ubt0hci' for remote bdaddr 0:80:37:29:19:a4
hcsecd[16484]: Got PIN_Code_Request event from 'ubt0hci', remote bdaddr 0:80:37:29:19:a4
hcsecd[16484]: Found matching entry, remote bdaddr 0:80:37:29:19:a4, name 'Pav's T39', PIN code exists
hcsecd[16484]: Sending PIN_Code_Reply to 'ubt0hci' for remote bdaddr 0:80:37:29:19:a4</programlisting>

    </sect2>

    <indexterm><primary>SDP</primary></indexterm>

    <sect2>
      <title>Service Discovery Protocol (SDP)</title>

      <para>A Service Discovery Protocol (SDP)
	seg&iacute;ts&eacute;g&eacute;vel a kliens alkalmaz&aacute;sok
	k&eacute;pes felder&iacute;teni, hogy a szerver
	alkalmaz&aacute;sok r&eacute;sz&eacute;r&#245;l milyen
	szolg&aacute;ltat&aacute;sok &eacute;rhet&#245;ek el, valamint
	ezek a szolg&aacute;ltat&aacute;sok milyen
	tulajdons&aacute;gokkal rendelkeznek.  A
	szolg&aacute;ltat&aacute;sok tulajdons&aacute;gi
	k&ouml;z&eacute; soroljuk t&ouml;bbek k&ouml;z&ouml;tt a
	felaj&aacute;nlott szolg&aacute;ltat&aacute;s
	t&iacute;pus&aacute;t vagy oszt&aacute;ly&aacute;t, illetve a
	szolg&aacute;ltat&aacute;s kihaszn&aacute;l&aacute;s&aacute;hoz
	sz&uuml;ks&eacute;ges mechanizmusra vagy protokollra
	vonatkoz&oacute; inform&aacute;ci&oacute;kat.</para>

      <para>Az SDP az SDP szerver &eacute;s az SDP kliens k&ouml;zti
	kommunik&aacute;ci&oacute;t foglalja mag&aacute;ban.  A szerver
	karbantart egy list&aacute;t azokr&oacute;l a
	szolg&aacute;ltat&aacute;si rekordokr&oacute;l, amelyek a
	szerverhez tartoz&oacute; szolg&aacute;ltat&aacute;sok
	jellemz&#245;it &iacute;rj&aacute;k le.  Mindegyik ilyen
	szolg&aacute;ltat&aacute;si rekord egyetlen
	szolg&aacute;ltat&aacute;s adatait tartalmazza.  A kliensek egy
	SDP k&eacute;r&eacute;ssel ezeket a szolg&aacute;ltat&aacute;si
	rekordokat k&eacute;rhetik el az SDP szervert&#245;l.
	Amennyiben a kliens, vagy a hozz&aacute; tartoz&oacute;
	alkalmaz&aacute;s a szolg&aacute;ltat&aacute;s haszn&aacute;lata
	mellett d&ouml;nt, akkor a szolg&aacute;ltat&aacute;s
	haszn&aacute;lat&aacute;hoz a megfelel&#245;
	szolg&aacute;ltat&oacute; fel&eacute; nyitnia kell egy
	k&uuml;l&ouml;n kapcsolatot.  Az SDP csak a
	szolg&aacute;ltat&aacute;sok &eacute;s azok
	tulajdons&aacute;gainak felder&iacute;t&eacute;s&eacute;hez ad
	seg&iacute;ts&eacute;get, de semmilyen eszk&ouml;zt nem
	tartalmaz a felhaszn&aacute;l&aacute;sukra.</para>

      <para>&Aacute;ltal&aacute;ban az SDP kliensek
	&aacute;ltal&aacute;ban valamilyen sz&aacute;munkra kell&#245;
	tulajdons&aacute;g alapj&aacute;n keresnek
	szolg&aacute;ltat&aacute;sokat.  R&aacute;ad&aacute;sul
	ad&oacute;dhatnak olyan alkalmak is, amikor a
	szolg&aacute;ltat&aacute;sok el&#245;zetes ismerete
	n&eacute;lk&uuml;l szeretn&eacute;nk felder&iacute;teni a
	rendelkez&eacute;sre &aacute;ll&oacute;
	szolg&aacute;ltat&aacute;sok t&iacute;pusait.  A
	felaj&aacute;nlott szolg&aacute;ltat&aacute;sok ilyen
	t&iacute;pus&uacute; feldolgoz&aacute;s&aacute;t nevezz&uuml;k
	<emphasis>b&ouml;ng&eacute;sz&eacute;snek</emphasis>
	(browsing).</para>

      <para>Az &man.sdpd.8; Bluetooth SDP szerver &eacute;s a
	parancssoros &man.sdpcontrol.8; kliens az alap &os;
	telep&iacute;t&eacute;s r&eacute;sze.  Az al&aacute;bbi
	p&eacute;ld&aacute;ban egy SDP b&ouml;ng&eacute;sz&eacute;si
	k&eacute;r&eacute;st adunk ki:</para>

      <screen>&prompt.user; <userinput>sdpcontrol -a 00:01:03:fc:6e:ec browse</userinput>
Record Handle: 00000000
Service Class ID List:
        Service Discovery Server (0x1000)
Protocol Descriptor List:
        L2CAP (0x0100)
                Protocol specific parameter #1: u/int/uuid16 1
                Protocol specific parameter #2: u/int/uuid16 1

Record Handle: 0x00000001
Service Class ID List:
        Browse Group Descriptor (0x1001)

Record Handle: 0x00000002
Service Class ID List:
        LAN Access Using PPP (0x1102)
Protocol Descriptor List:
        L2CAP (0x0100)
        RFCOMM (0x0003)
                Protocol specific parameter #1: u/int8/bool 1
Bluetooth Profile Descriptor List:
        LAN Access Using PPP (0x1102) ver. 1.0
</screen>

      <para>&eacute;s &iacute;gy tov&aacute;bb.  Mindegyik
	szolg&aacute;ltat&aacute;shoz hozz&aacute;tartozik a
	tulajdons&aacute;gok egy list&aacute;ja (p&eacute;ld&aacute;ul
	RFCOMM csatorna).  Lehets&eacute;ges, hogy
	szolg&aacute;ltat&aacute;st&oacute;l f&uuml;gg&#245;en bizonyos
	tulajdons&aacute;gokat kell figyeln&uuml;nk.  Egyes Bluetooth
	implement&aacute;ci&oacute;k nem t&aacute;mogatj&aacute;k a
	szolg&aacute;ltat&aacute;sok
	b&ouml;ng&eacute;sz&eacute;s&eacute;t &eacute;s ez&eacute;rt egy
	&uuml;res list&aacute;t adnak vissza.  Ebben az esetben egy
	konkr&eacute;t szolg&aacute;ltat&aacute;sra tudunk
	r&aacute;keresni.  A k&ouml;vetkez&#245; p&eacute;ld&aacute;ban
	az OBEX Object Push (OPUSH) szolg&aacute;ltat&aacute;st
	keress&uuml;k:</para>

      <screen>&prompt.user; <userinput>sdpcontrol -a 00:01:03:fc:6e:ec search OPUSH</userinput></screen>

      <para>&os; alatt az &man.sdpd.8; szerverrel tudunk
	szolg&aacute;ltat&aacute;sokat felaj&aacute;nlani a Bluetooth
	klienseknek.  A &os;&nbsp;5.5, 6.1 vagy k&eacute;s&#245;bbi
	v&aacute;ltozataiban ehhez a k&ouml;vetkez&#245; sort kell
	megadnunk az <filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyban:</para>

      <programlisting>sdpd_enable="YES"</programlisting>

      <para>Ezut&aacute;n az <application>sdpd</application>
	d&eacute;mon &iacute;gy ind&iacute;that&oacute; el:</para>

      <screen>&prompt.root; <userinput>/etc/rc.d/sdpd start</userinput></screen>

      <para>A t&aacute;voli kliensek r&eacute;sz&eacute;re Bluetooth
	szolg&aacute;ltat&aacute;sokat felaj&aacute;nlani
	k&iacute;v&aacute;n&oacute; helyi szerver alkalmaz&aacute;soknak
	regisztr&aacute;lniuk kell magukat a helyi SDP
	d&eacute;monn&aacute;l.  P&eacute;ld&aacute;ul az egyik ilyen
	alkalmaz&aacute;s az &man.rfcomm.pppd.8;, &eacute;s
	elind&iacute;t&aacute;sa ut&aacute;n regisztr&aacute;lni fogja a
	Bluetooth LAN szolg&aacute;ltat&aacute;st a helyi SDP
	d&eacute;monn&aacute;l.</para>

      <para>A helyi SDP szerveren regisztr&aacute;lt
	szolg&aacute;ltat&aacute;sokat a helyi vez&eacute;rl&eacute;si
	csatorn&aacute;n kereszt&uuml;l egy <literal>browse</literal>
	k&eacute;r&eacute;ssel tudjuk lek&eacute;rdezni:</para>

      <screen>&prompt.root; <userinput>sdpcontrol -l browse</userinput></screen>

    </sect2>

    <sect2>
      <title>A bet&aacute;rcs&aacute;z&oacute;s h&aacute;l&oacute;zati
	&eacute;s a PPP h&aacute;l&oacute;zati
	hozz&aacute;f&eacute;r&eacute;si (LAN) profilok</title>

      <para>A bet&aacute;rcs&aacute;z&oacute;s h&aacute;l&oacute;zati
	(Dial-Up Networking, DUN) profil leggyakrabban a modemek
	&eacute;s mobiltelefonok k&ouml;z&ouml;tt t&#251;nik fel.  Ez a
	profil a k&ouml;vetkez&#245; forgat&oacute;k&ouml;nyveket
	dolgozza fel:</para>

      <itemizedlist>
	<listitem>
	  <para>A sz&aacute;m&iacute;t&oacute;g&eacute;p&uuml;nkkel egy
	    mobiltelefont vagy modemet vezet&eacute;k
	    n&eacute;lk&uuml;li modemk&eacute;nt haszn&aacute;lunk,
	    amivel az internethez vagy m&aacute;s
	    h&aacute;l&oacute;zatokhoz csatlakozunk
	    bet&aacute;rcs&aacute;z&aacute;ssal.</para>
	</listitem>

	<listitem>
	  <para>A sz&aacute;m&iacute;t&oacute;g&eacute;p&uuml;nkkel egy
	    mobiltelefonon vagy modemen kereszt&uuml;l fogadunk
	    adath&iacute;v&aacute;sokat.</para>
	</listitem>
      </itemizedlist>

      <para>A PPP h&aacute;l&oacute;zati
	hozz&aacute;f&eacute;r&eacute;si (LAN) profil a
	k&ouml;vetkez&#245; helyezetekben alkalmazhat&oacute;:</para>

      <itemizedlist>
	<listitem>
	  <para>LAN hozz&aacute;f&eacute;r&eacute;s egyetlen Bluetooth
	    eszk&ouml;zh&ouml;z</para>
	</listitem>

	<listitem>
	  <para>LAN hozz&aacute;f&eacute;r&eacute;s t&ouml;bb Bluetooth
	    eszk&ouml;zh&ouml;z</para>
	</listitem>

	<listitem>
	  <para>K&eacute;t g&eacute;p &ouml;sszek&ouml;t&eacute;se (a
	    soros vonali kapcsolat emul&aacute;ci&oacute;val PPP-n
	    kereszt&uuml;l)</para>
	</listitem>
      </itemizedlist>

      <para>&os; alatt mind a k&eacute;t profilt a &man.ppp.8; &eacute;s
	az &man.rfcomm.pppd.8; val&oacute;s&iacute;tja meg &mdash; egy
	olyan wrapper eszk&ouml;z, amely az RFCOMM Bluetooth
	kapcsolatokat a PPP sz&aacute;m&aacute;ra is
	&eacute;rtelmess&eacute; alak&iacute;tja &aacute;t.
	Miel&#245;tt m&eacute;g b&aacute;rmelyik profilt
	elkezden&eacute;nk haszn&aacute;lni, egy &uacute;j PPP
	c&iacute;mk&eacute;t kell l&eacute;trehozni az
	<filename>/etc/ppp/ppp.conf</filename>
	&aacute;llom&aacute;nyban.  Erre p&eacute;ld&aacute;t az
	&man.rfcomm.pppd.8; man oldalon tal&aacute;lhatunk.</para>

      <para>A k&ouml;vetkez&#245; p&eacute;ld&aacute;ban az
	&man.rfcomm.pppd.8; programot fogjuk haszn&aacute;lni arra, hogy
	egy RFCOMM t&iacute;pus&uacute; kapcsolatot nyissunk a
	00:80:37:29:19:a4 c&iacute;mmel rendelkez&#245; t&aacute;voli
	Bluetooth eszk&ouml;z fel&eacute;.  A t&eacute;nyleges RFCOMM
	csatorna sz&aacute;m&aacute;t SDP-n kereszt&uuml;l a
	t&aacute;voli eszk&ouml;zt&#245;l kapjuk.  Az RFCOMM csatorna
	k&eacute;zzel is megadhat&oacute;, &eacute;s ilyen esetekben az
	&man.rfcomm.pppd.8; nem fog SDP k&eacute;r&eacute;st
	k&uuml;ldeni.  A &man.sdpcontrol.8; haszn&aacute;lat&aacute;val
	tudjuk lek&eacute;rdezni a t&aacute;voli eszk&ouml;z&ouml;n
	l&eacute;trej&ouml;tt RFCOMM csatorn&aacute;t.</para>

      <screen>&prompt.root; <userinput>rfcomm_pppd -a 00:80:37:29:19:a4 -c -C dun -l rfcomm-dialup</userinput></screen>

      <para>A PPP h&aacute;l&oacute;zati el&eacute;r&eacute;s (LAN)
	szolg&aacute;ltat&aacute;s beind&iacute;t&aacute;s&aacute;hoz
	futni kell a &man.sdpd.8; szervernek.  A helyi
	h&aacute;l&oacute;zaton kereszt&uuml;l csatlakoz&oacute;
	kliensekhez l&eacute;tre kell hozni egy &uacute;j
	bejegyz&eacute;st az <filename>/etc/ppp/ppp.conf</filename>
	&aacute;llom&aacute;nyban.  Az &man.rfcomm.pppd.8; man oldalon
	tal&aacute;lhatunk erre p&eacute;ld&aacute;kat.
	V&eacute;gezet&uuml;l ind&iacute;tsuk el az RFCOMM PPP szervert
	egy &eacute;rv&eacute;nyes RFCOMM csatornasz&aacute;mmal.  Az
	RFCOMM PPP szerver ekkor automatikusan regisztr&aacute;lja a
	Bluetooth LAN szolg&aacute;ltat&aacute;st a helyi SDP
	d&eacute;monn&aacute;l.  A k&ouml;vetkez&#245;
	p&eacute;ld&aacute;ban megmutatjuk, hogyan lehet
	elind&iacute;tani egy RFCOMM PPP szervert:</para>

      <screen>&prompt.root; <userinput>rfcomm_pppd -s -C 7 -l rfcomm-server</userinput></screen>

    </sect2>

    <indexterm><primary>OBEX</primary></indexterm>

    <sect2>
      <title>Az OBEX Object Push (OPUSH) profil</title>

      <para>Az OBEX egy sz&eacute;les k&ouml;rben alkalmazott protokoll
	a mobileszk&ouml;z&ouml;k k&ouml;zti egyszer&#251;
	&aacute;llom&aacute;nyvitelre.  Legf&#245;k&eacute;ppen az
	infrav&ouml;r&ouml;s kommunik&aacute;ci&oacute;ban
	alkalmazz&aacute;k, ahol a laptopok vagy PDA-k k&ouml;zti
	&aacute;ltal&aacute;nos &aacute;llom&aacute;ny&aacute;tvitelre
	haszn&aacute;lj&aacute;k, illetve
	n&eacute;vjegyk&aacute;rty&aacute;k vagy
	napt&aacute;rbejegyz&eacute;sek
	&aacute;tk&uuml;ld&eacute;s&eacute;re mobiltelefonok
	k&ouml;z&ouml;tt &eacute;s egy&eacute;b PIM alkalmaz&aacute;st
	futtat&oacute; eszk&ouml;z&ouml;k eset&eacute;ben.</para>

      <para>Az OBEX szervert &eacute;s klienst egy k&uuml;ls&#245;
	csomag, az <application>obexapp</application>
	val&oacute;s&iacute;tja meg, amelyet az <filename
	role="package">comms/obexapp</filename> portb&oacute;l
	&eacute;rhet&uuml;nk el.</para>

      <para>Az OBEX kliens haszn&aacute;lhat&oacute; objektumok
	&aacute;ttol&aacute;s&aacute;ra vagy
	leh&uacute;z&aacute;s&aacute;ra az OBEX szerverhez.  Ez az
	objektum lehet p&eacute;ld&aacute;ul egy
	n&eacute;vjegyk&aacute;rtya vagy egy megbesz&eacute;lt
	tal&aacute;lkoz&oacute;.  Az OBEX kliens SDP-n kereszt&uuml;l
	tud mag&aacute;nak RFCOMM csatornasz&aacute;mot szerezni.  Ezt
	&uacute;gy tehetj&uuml;k meg, ha a szolg&aacute;ltat&aacute;s
	neve helyett egy RFCOMM csatorna sz&aacute;m&aacute;t adjuk meg.
	A t&aacute;mogatott szolg&aacute;ltat&aacute;sok: IrMC, FTRN
	&eacute;s OPUSH.  Sz&aacute;mk&eacute;nt RFCOMM csatorna is
	megadhat&oacute;.  Az al&aacute;bbi p&eacute;ld&aacute;ban egy
	OBEX munkamenetet l&aacute;thatunk, ahol az eszk&ouml;z
	inform&aacute;ci&oacute;s objektum&aacute;t h&uacute;zzuk le a
	mobiltelefonr&oacute;l &eacute;s egy &uacute;j objektumot (egy
	n&eacute;vjegyk&aacute;rty&aacute;t) tolunk fel a telefon
	k&ouml;nyvt&aacute;r&aacute;ba.</para>

      <screen>&prompt.user; <userinput>obexapp -a 00:80:37:29:19:a4 -C IrMC</userinput>
obex&gt; get telecom/devinfo.txt devinfo-t39.txt
Success, response: OK, Success (0x20)
obex&gt; put new.vcf
Success, response: OK, Success (0x20)
obex&gt; di
Success, response: OK, Success (0x20)</screen>

      <para>Az OBEX objektumok tologat&aacute;s&aacute;nak
	t&aacute;mogat&aacute;s&aacute;hoz az &man.sdpd.8; szervernek
	kell futnia.  Tov&aacute;bb&aacute; a be&eacute;rkez&#245;
	objektumok t&aacute;rol&aacute;s&aacute;hoz l&eacute;tre kell
	hoznunk m&eacute;g egy k&ouml;nyvt&aacute;rat is.  Ez az
	k&ouml;nyvt&aacute;r alap&eacute;rtelmez&eacute;s szerint a
	<filename>/var/spool/obex</filename>.  V&eacute;g&uuml;l
	ind&iacute;tsuk el az OBEX szervert egy &eacute;rv&eacute;nyes
	RFCOMM csatorna sz&aacute;m&aacute;nak
	megad&aacute;s&aacute;val.  Az OBEX szerver ezut&aacute;n
	automatikusan regisztr&aacute;lja az <quote>OBEX Object
	Push</quote> nev&#251; szolg&aacute;ltat&aacute;st a helyi SDP
	d&eacute;monn&aacute;l.  Ebben a p&eacute;ld&aacute;ban
	l&aacute;thatjuk az OBEX szerver
	ind&iacute;t&aacute;s&aacute;t:</para>

      <screen>&prompt.root; <userinput>obexapp -s -C 10</userinput></screen>

    </sect2>

    <sect2>
      <title>Soros vonali profil (SPP)</title>

      <para>A soros vonali profil (Serial Port Profile, SPP)
	haszn&aacute;lat&aacute;val RS232 (vagy ahhoz hasonl&oacute;)
	vonali adat&aacute;tvitelt tudunk emul&aacute;lni.  Ez a profil
	a r&eacute;gebben fejlesztett alkalmaz&aacute;sokkal
	birk&oacute;zik meg, &eacute;s a Bluetooth
	technol&oacute;gi&aacute;val val&oacute;di k&aacute;bel helyett
	egy virtu&aacute;lis soros portot k&eacute;pez le.</para>

      <para>Az &man.rfcomm.sppd.1; seg&eacute;dprogram ezt a soros
	vonali profilt val&oacute;s&iacute;tja meg.  &Iacute;gy egy
	pszeudo termin&aacute;lt tudunk virtu&aacute;lis soros
	portk&eacute;nt haszn&aacute;lni.  Ha nem adunk meg RFCOMM
	csatorn&aacute;t, akkor az &man.rfcomm.sppd.1; k&eacute;pes
	SDP-n kereszt&uuml;l k&eacute;rni egyet mag&aacute;nak a
	t&aacute;voli eszk&ouml;zt&#245;l.  Ha ezt fel&uuml;l
	k&iacute;v&aacute;njuk b&iacute;r&aacute;lni, akkor a
	parancssorban megadhatunk ak&aacute;r egy konkr&eacute;t RFCOMM
	csatorn&aacute;t is.</para>

      <screen>&prompt.root; <userinput>rfcomm_sppd -a 00:07:E0:00:0B:CA -t /dev/ttyp6</userinput>
rfcomm_sppd[94692]: Starting on /dev/ttyp6...</screen>

      <para>Miut&aacute;n csatlakoztunk, a pszeudo termin&aacute;lt
	tudjuk soros portk&eacute;nt haszn&aacute;lni:</para>

      <screen>&prompt.root; <userinput>cu -l ttyp6</userinput></screen>

    </sect2>

    <sect2>
      <title>Hibaelh&aacute;r&iacute;t&aacute;s</title>

      <sect3>
	<title>Nem tudunk csatlakozni a t&aacute;voli
	  eszk&ouml;zzel</title>

	<para>Egyes Bluetooth eszk&ouml;z&ouml;k nem
	  t&aacute;mogatj&aacute;k a szerepek cser&eacute;j&eacute;t
	  (role switch).  Alap&eacute;rtelmez&eacute;s szerint amikor a
	  &os; elfogad egy &uacute;j kapcsolatot,
	  megpr&oacute;b&aacute;l rajta szerepet cser&eacute;lni
	  &eacute;s mesterr&eacute; v&aacute;lni.  Azok az
	  eszk&ouml;z&ouml;k, amelyek ezt nem t&aacute;mogatj&aacute;k,
	  nem lesznek k&eacute;pesek emiatt csatlakozni.  Ez a
	  szerepv&aacute;lt&aacute;s az &uacute;j kapcsolatok
	  fel&eacute;p&iacute;t&eacute;se sor&aacute;n zajlik le,
	  ez&eacute;rt egy t&aacute;voli eszk&ouml;zt&#245;l nem lehet
	  megtudni, hogy ismeri-e ezt a lehet&#245;s&eacute;get.  A
	  helyi oldalon a k&ouml;vetkez&#245; HCI opci&oacute;val lehet
	  kikapcsolni a szerepcser&eacute;t:</para>

	<screen>&prompt.root; <userinput>hccontrol -n ubt0hci write_node_role_switch 0</userinput></screen>

      </sect3>

      <sect3>
	<title>Valami nem megy.  Lehet l&aacute;tni valahogy, pontosan
	  mi is t&ouml;rt&eacute;nik?</title>

	<para>Persze, igen.  Egy k&uuml;ls&#245; csomag, a
	  <application>hcidump</application>
	  seg&iacute;ts&eacute;g&eacute;vel, amely a <filename
	  role="package">comms/hcidump</filename> portb&oacute;l
	  &eacute;rhet&#245; el.  A <application>hcidump</application>
	  seg&eacute;dprogram a &man.tcpdump.1; programhoz
	  hasonl&iacute;that&oacute;.  Ezzel lehet a Bluetooth csomagok
	  tartalm&aacute;t megn&eacute;zni a termin&aacute;lon vagy
	  elmenteni ezeket egy &aacute;llom&aacute;nyba.</para>

      </sect3>
    </sect2>
  </sect1>

  <sect1 id="network-bridging">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Andrew</firstname>
	  <surname>Thompson</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>H&aacute;l&oacute;zati hidak</title>

    <sect2>
      <title>Bevezet&eacute;s</title>

      <indexterm><primary>IP-alh&aacute;l&oacute;zat</primary></indexterm>
      <indexterm><primary>h&aacute;l&oacute;zati
	h&iacute;d</primary></indexterm>

      <para>Gyakran hasznos lehet an&eacute;lk&uuml;l felosztani egy
	fizikai h&aacute;l&oacute;zatot (p&eacute;ld&aacute;ul egy
	Ethernet szegmenst) k&eacute;t k&uuml;l&ouml;n
	h&aacute;l&oacute;zati szegmensre, hogy k&uuml;l&ouml;n
	IP-alh&aacute;l&oacute;zatot kellene l&eacute;trehozunk
	&eacute;s &ouml;sszek&ouml;tn&uuml;nk ezeket egy
	&uacute;tv&aacute;laszt&oacute;val.  A k&eacute;t ilyen
	m&oacute;don kialak&iacute;tott h&aacute;l&oacute;zatot
	&ouml;sszek&ouml;t&#245; eszk&ouml;zt nevezz&uuml;k
	<quote>h&aacute;l&oacute;zati h&iacute;dnak</quote> (bridge).  A
	legal&aacute;bb k&eacute;t h&aacute;l&oacute;zati
	fel&uuml;lettel rendelkez&#245; &os; rendszerek k&eacute;pesek
	h&aacute;l&oacute;zati h&iacute;d szerep&eacute;t
	bet&ouml;lteni.</para>

      <para>A h&aacute;l&oacute;zati h&iacute;d az eszk&ouml;z&ouml;k
	adatkapcsolati r&eacute;tegben a hozz&aacute; tartoz&oacute;
	fel&uuml;letein megjelen&#245; (vagyis Ethernet)
	c&iacute;m&eacute;nek megtanul&aacute;s&aacute;val
	m&#251;k&ouml;dik.  A k&eacute;t h&aacute;l&oacute;zat
	k&ouml;z&ouml;tt csak akkor k&ouml;zvet&iacute;t forgalmat,
	amikor a forr&aacute;s &eacute;s c&eacute;l nem ugyanabban a
	h&aacute;l&oacute;zatban tal&aacute;lhat&oacute;.</para>

      <para>A h&aacute;l&oacute;zati hidak bizonyos szempontb&oacute;l
	l&eacute;nyeg&eacute;ben nagyon kev&eacute;s porttal
	rendelkez&#245; Ethernet switch-ek.</para>

    </sect2>

    <sect2>
      <title>A h&aacute;l&oacute;zati hidak tipikus
	alkalmaz&aacute;sai</title>

      <para>Napjainkban akad n&eacute;h&aacute;ny igen jellemz&#245;
	szitu&aacute;ci&oacute;, ahol sz&uuml;ks&eacute;g van a
	h&aacute;l&oacute;zati hidak alkalmaz&aacute;s&aacute;ra.</para>

      <sect3>
	<title>H&aacute;l&oacute;zatok
	  &ouml;sszek&ouml;t&eacute;se</title>

	<para>A h&aacute;l&oacute;zati hidak alapvet&#245; feladata
	  k&eacute;t vagy t&ouml;bb h&aacute;l&oacute;zati szegmens
	  &ouml;sszek&ouml;t&eacute;se.  Az egyszer&#251;
	  h&aacute;l&oacute;zati k&ouml;rnyezet
	  fel&aacute;ll&iacute;t&aacute;sa helyett t&ouml;bb
	  okb&oacute;l is felmer&uuml;lhet a hidak
	  l&eacute;trehoz&aacute;sa: k&aacute;belez&eacute;si
	  megszor&iacute;t&aacute;sok, t&#251;zfalaz&aacute;s vagy
	  pszeudo h&aacute;l&oacute;zatok, p&eacute;ld&aacute;ul
	  virtu&aacute;lis g&eacute;pek fel&uuml;let&eacute;nek
	  csatlakoztat&aacute;sa miatt.  Egy h&iacute;d
	  haszn&aacute;lat&aacute;val r&aacute;ad&aacute;sul &ouml;ssze
	  tudunk k&ouml;tni egy vezet&eacute;k n&eacute;lk&uuml;li
	  hozz&aacute;f&eacute;r&eacute;si pontk&eacute;nt
	  &uuml;zemel&#245; fel&uuml;letet egy vezet&eacute;kes
	  h&aacute;l&oacute;zattal.</para>

      </sect3>

      <sect3>
	<title>Sz&#251;r&eacute;s vagy forgalomkorl&aacute;toz&aacute;s
	  t&#251;zfallal</title>

	<indexterm><primary>t&#251;zfal</primary></indexterm>
	<indexterm><primary>NAT</primary></indexterm>

	<para>Sokszor el&#245;fordulhat, hogy
	  &uacute;tv&aacute;laszt&aacute;s vagy h&aacute;l&oacute;zati
	  c&iacute;mford&iacute;t&aacute;s (NAT) n&eacute;lk&uuml;l
	  szeretn&eacute;nk t&#251;zfalat haszn&aacute;lni.</para>

	<para>P&eacute;ldak&eacute;nt k&eacute;pzelj&uuml;nk el egy
	  olyan kis m&eacute;ret&#251; c&eacute;get, amely egy DSL vagy
	  ISDN vonalon kapcsol&oacute;dik az
	  internet-szolg&aacute;ltat&oacute;j&aacute;hoz.  A
	  szolg&aacute;ltat&oacute;t&oacute;l 13, mindenki &aacute;ltal
	  haszn&aacute;lhat&oacute; IP-c&iacute;met kaptak &eacute;s a
	  h&aacute;l&oacute;zatukban 10 g&eacute;p van.  Ebben a
	  helyzetben egy &uacute;tv&aacute;laszt&aacute;st
	  v&eacute;gz&#245; t&#251;zfal m&#251;k&ouml;dtet&eacute;se
	  neh&eacute;zkess&eacute; v&aacute;lna az
	  alh&aacute;l&oacute;zatok probl&eacute;m&aacute;i
	  miatt.</para>

	<indexterm><primary>&uacute;tv&aacute;laszt&oacute;</primary></indexterm>
	<indexterm><primary>DSL</primary></indexterm>
	<indexterm><primary>ISDN</primary></indexterm>

	<para>Egy h&iacute;dk&eacute;nt viselked&#245; t&#251;zfallal
	  azonban minden IP sz&aacute;moz&aacute;si probl&eacute;ma
	  n&eacute;lk&uuml;l egyszer&#251;en be tudjuk dobni a
	  g&eacute;peket a DSL/ISDN &uacute;tv&aacute;laszt&oacute;
	  m&ouml;g&eacute;.</para>

      </sect3>

      <sect3>
	<title>A h&aacute;l&oacute;zat megcsapol&aacute;sa</title>

	<para>Egy h&aacute;l&oacute;zati h&iacute;ddal &uacute;gy
	  kapcsolunk &ouml;ssze k&eacute;t h&aacute;l&oacute;zati
	  szegmenst, hogy k&ouml;zben meg tudjuk vizsg&aacute;lni a
	  kettej&uuml;k k&ouml;z&ouml;tt mozg&oacute; Ethernet
	  kereteket.  Ezt a h&iacute;d fel&uuml;leten a &man.bpf.4;
	  valamint a &man.tcpdump.1; seg&iacute;ts&eacute;g&eacute;vel
	  tudjuk megoldani, vagy &uacute;gy, ha egy m&aacute;sik
	  fel&uuml;leten elk&uuml;ldj&uuml;k az &ouml;sszes keret
	  m&aacute;solat&aacute;t (span, vagyis fesz&iacute;t&#245;
	  port).</para>

      </sect3>

      <sect3>
	<title>VPN az adatkapcsolati r&eacute;tegben</title>

	<para>A k&eacute;t Ethernet h&aacute;l&oacute;zatot egy IP
	  alap&uacute; &ouml;sszek&ouml;ttet&eacute;sen kereszt&uuml;l
	  is &ouml;ssze tudunk k&ouml;tni, ha a
	  h&aacute;l&oacute;zatokat egy EtherIP j&aacute;raton
	  kereszt&uuml;l k&ouml;tj&uuml;k &ouml;ssze h&iacute;ddal, vagy
	  egy OpenVPN-hez hasonl&oacute; &man.tap.4; alap&uacute;
	  megold&aacute;ssal.</para>

      </sect3>

      <sect3>
	<title>Redundancia az adatkapcsolati r&eacute;tegben</title>

	<para>A h&aacute;l&oacute;zatokat t&ouml;bb linken
	  kereszt&uuml;l k&ouml;tj&uuml;k &ouml;ssze &eacute;s a
	  redund&aacute;ns &uacute;tvonalakat a fesz&iacute;t&#245;fa
	  protokollal (Spanning Tree Protocol, STP).  Az Ethernetes
	  h&aacute;l&oacute;zatok eset&eacute;ben a megfelel&#245;
	  m&#251;k&ouml;d&eacute;shez a k&eacute;t eszk&ouml;z
	  k&ouml;z&ouml;tt csak egyetlen akt&iacute;v &uacute;tvonal
	  l&eacute;tezhet, &iacute;gy a fesz&iacute;t&#245;fa protokoll
	  &eacute;szleli a hurkokat &eacute;s a redund&aacute;ns
	  &ouml;sszek&ouml;ttet&eacute;seket blokkolt &aacute;llapotba
	  teszi.  Amikor azonban az akt&iacute;v linkek egyike
	  meghib&aacute;sodik, akkor a protokoll
	  &uacute;jrasz&aacute;molja a f&aacute;t &eacute;s a
	  h&aacute;l&oacute;zati pontjai k&ouml;zti
	  konnektivit&aacute;st megpr&oacute;b&aacute;lja
	  helyre&aacute;ll&iacute;tani az addig blokkolt linkek
	  ism&eacute;telt enged&eacute;lyez&eacute;s&eacute;vel.</para>

      </sect3>
    </sect2>

    <sect2>
      <title>A rendszermag be&aacute;ll&iacute;t&aacute;sai</title>

      <para>Ebben a szakaszban az &man.if.bridge.4;
	h&aacute;l&oacute;zati h&iacute;d implement&aacute;ci&oacute;val
	foglalkozunk, de a Netgraph seg&iacute;ts&eacute;g&eacute;vel is
	tudunk hidakat &eacute;p&iacute;teni.  Ez
	ut&oacute;bbir&oacute;l az &man.ng.bridge.4; man oldalon
	olvashatunk.</para>

      <para>Amikor l&eacute;trehozunk egy h&aacute;l&oacute;zati hidat,
	az &man.ifconfig.8; automatikusan bet&ouml;lti a
	hozz&aacute; tartoz&oacute; meghajt&oacute;t.  Ha viszont a
	rendszermag be&aacute;ll&iacute;t&aacute;sait tartalmaz&oacute;
	&aacute;llom&aacute;nyba felvessz&uuml;k a <literal>device
	if_bridge</literal> sort, akkor ak&aacute;r be is
	&eacute;p&iacute;thetj&uuml;k a rendszermagba.</para>

      <para>A csomagsz&#251;r&eacute;s minden olyan t&#251;zfallal
	haszn&aacute;lhat&oacute;, amely a &man.pfil.9; rendszerre
	kapcsol&oacute;dik.  Maga a t&#251;zfal is bet&ouml;lthet&#245;
	modulk&eacute;nt, vagy beleford&iacute;that&oacute; a
	rendszermagba.</para>

      <para>A h&aacute;l&oacute;zati h&iacute;ddal forgalmat is tudunk
	szab&aacute;lyozni az &man.altq.4; vagy a &man.dummynet.4;
	seg&iacute;ts&eacute;g&eacute;vel.</para>

    </sect2>

    <sect2>
      <title>A h&aacute;l&oacute;zati h&iacute;d
	enged&eacute;lyez&eacute;se</title>

      <para>H&aacute;l&oacute;zati hidak fel&uuml;letek
	kl&oacute;noz&aacute;s&aacute;val hozhat&oacute;ak l&eacute;tre.
	A h&iacute;d l&eacute;trehoz&aacute;s&aacute;hoz
	haszn&aacute;ljuk az &man.ifconfig.8; programot, &eacute;s a
	megfelel&#245; meghajt&oacute; automatikusan
	bet&ouml;lt&#245;dik, ha nem lenne m&eacute;g
	el&eacute;rhet&#245; a rendszermagban.</para>

      <screen>&prompt.root; <userinput>ifconfig bridge create</userinput>
bridge0
&prompt.root; <userinput>ifconfig bridge0</userinput>
bridge0: flags=8802&lt;BROADCAST,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        ether 96:3d:4b:f1:79:7a
        id 00:00:00:00:00:00 priority 32768 hellotime 2 fwddelay 15
        maxage 20 holdcnt 6 proto rstp maxaddr 100 timeout 1200
        root id 00:00:00:00:00:00 priority 0 ifcost 0 port 0</screen>

      <para>Ekkor l&eacute;trej&ouml;n a h&aacute;l&oacute;zati
	h&iacute;dhoz tartoz&oacute; fel&uuml;let &eacute;s
	v&eacute;letlenszer&#251;en gener&aacute;l&oacute;dik
	hozz&aacute; egy Ethernetes c&iacute;m.  A
	<literal>maxaddr</literal> &eacute;s a
	<literal>timeout</literal> param&eacute;terek vez&eacute;rlik,
	hogy a h&iacute;d mennyi MAC-c&iacute;met tartson meg a keretek
	tov&aacute;bb&iacute;t&aacute;s&aacute;&eacute;rt felel&#245;s
	t&aacute;bl&aacute;zatban &eacute;s mennyi m&aacute;sodperc
	ut&aacute;n t&ouml;r&ouml;lj&ouml;n automatikusan egy
	bejegyz&eacute;st a legutols&oacute; haszn&aacute;lat
	ut&aacute;n.  A t&ouml;bbi param&eacute;ter a
	fesz&iacute;t&#245;fa m&#251;k&ouml;d&eacute;s&eacute;t
	ir&aacute;ny&iacute;tja.</para>

      <para>Vegy&uuml;k fel a h&iacute;dhoz tartoz&oacute;
	h&aacute;l&oacute;zati tagfel&uuml;leteket.  A h&iacute;d csak
	akkor fog a tagfel&uuml;letek k&ouml;z&ouml;tt csomagokat
	tov&aacute;bbk&uuml;ldeni, amikor a h&iacute;d &eacute;s a tagok
	is <literal>up</literal> &aacute;llapotban vannak:</para>

      <screen>&prompt.root; <userinput>ifconfig bridge0 addm fxp0 addm fxp1 up</userinput>
&prompt.root; <userinput>ifconfig fxp0 up</userinput>
&prompt.root; <userinput>ifconfig fxp1 up</userinput></screen>

      <para>A h&iacute;d most m&aacute;r &aacute;tk&uuml;ldi az Ethernet
	kereteket a <devicename>fxp0</devicename> &eacute;s
	<devicename>fxp1</devicename> fel&uuml;letek k&ouml;z&ouml;tt.
	Az im&eacute;ntiekkel megegyez&#245; konfigur&aacute;ci&oacute;t
	az <filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyban
	&iacute;gy alak&iacute;thatjuk ki:</para>

      <programlisting>cloned_interfaces="bridge0"
ifconfig_bridge0="addm fxp0 addm fxp1 up"
ifconfig_fxp0="up"
ifconfig_fxp1="up"</programlisting>

      <para>Ha a h&iacute;dhoz IP-c&iacute;met is rendelni akarunk,
	akkor ink&aacute;bb mag&aacute;n&aacute;l a h&iacute;dn&aacute;l
	adjuk meg, ne a tagokn&aacute;l.  Ezt statikusan vagy DHCP
	haszn&aacute;lat&aacute;val is megtehetj&uuml;k:</para>

      <screen>&prompt.root; <userinput>ifconfig bridge0 inet 192.168.0.1/24</userinput></screen>

      <para>A h&iacute;dhoz IPv6 c&iacute;met is hozz&aacute; tudunk
	rendelni.</para>

    </sect2>

    <sect2>
      <title>T&#251;zfalaz&aacute;s</title>

      <indexterm><primary>t&#251;zfalak</primary></indexterm>

      <para>Ha enged&eacute;lyezz&uuml;k a csomagsz&#251;r&eacute;st, a
	h&iacute;don &aacute;thalad&oacute; csomagok el&#245;sz&ouml;r a
	k&uuml;ld&#245; fel&uuml;let &eacute;rkez&eacute;si
	oldal&aacute;ra ker&uuml;lnek, majd a h&iacute;dra,
	v&eacute;g&uuml;l a megfelel&#245; ir&aacute;nyban lev&#245;
	fel&uuml;let k&uuml;ld&eacute;si oldal&aacute;ra.
	B&aacute;rmelyik f&aacute;zis letilthat&oacute;.  Amikor a
	csomagok &aacute;raml&aacute;s&aacute;nak ir&aacute;nya fontos
	sz&aacute;munkra, akkor jobban j&aacute;runk, ha nem
	mag&aacute;ra a h&iacute;dra, hanem csak a tagfel&uuml;letekre
	&aacute;ll&iacute;tjuk be a t&#251;zfalat.</para>

      <para>A h&iacute;d sz&aacute;mos m&oacute;dos&iacute;that&oacute;
	be&aacute;ll&iacute;t&aacute;ssal rendelkezik a nem-IP &eacute;s
	ARP csomagok &aacute;tk&uuml;ld&eacute;s&eacute;re, valamint
	arra, hogy az IPFW t&#251;zfal adatkapcsolati r&eacute;teg
	szintj&eacute;n m&#251;k&ouml;dhessen.  Az &man.if.bridge.4; man
	oldal ennek r&eacute;szleteit t&aacute;rja fel.</para>

    </sect2>

    <sect2>
      <title>Fesz&iacute;t&#245;f&aacute;k</title>

      <para>A h&iacute;d meghajt&oacute;ja a gyors fesz&iacute;t&#245;fa
	protokollt (Rapid Spanning Tree Protocol, RSTP avagy 802.1w)
	val&oacute;s&iacute;tja meg, ami visszafel&eacute; kompatibilis
	a kor&aacute;bban eml&iacute;tett fesz&iacute;t&#245;fa
	protokollal.  A fesz&iacute;t&#245;f&aacute;kat a
	h&aacute;l&oacute;zati topol&oacute;gi&aacute;ban
	felbukkan&oacute; hurkok &eacute;szlel&eacute;s&eacute;re
	&eacute;s elt&aacute;vol&iacute;t&aacute;s&aacute;ra
	alkalmazz&aacute;k.  Az RSTP azonban a hagyom&aacute;nyos
	STP-n&eacute;l valamivel gyorsabb konvergenci&aacute;t
	&iacute;g&eacute;r, mivel itt a szomsz&eacute;dos switch-ek
	kicser&eacute;lik egym&aacute;s k&ouml;z&ouml;tt az adataikat,
	&eacute;s &iacute;gy &uacute;jabb hurkok
	l&eacute;trehoz&aacute;sa n&eacute;lk&uuml;l k&eacute;pesek
	viszonylag gyorsan egyik &aacute;llapotb&oacute;l
	&aacute;tv&aacute;ltani a m&aacute;sikba.</para>

      <para>Az al&aacute;bbi t&aacute;bl&aacute;zat a t&aacute;mogatott
	m&#251;k&ouml;d&eacute;si m&oacute;dokat
	l&aacute;thatjuk:</para>

      <informaltable frame="none" pgwide="1">
	<tgroup cols="3">
	  <thead>
	    <row>
	      <entry>Oper&aacute;ci&oacute;s rendszer</entry>
	      <entry>STP m&oacute;dok</entry>
	      <entry>Alap&eacute;rtelmez&eacute;s</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry>&os;&nbsp;5.4&mdash;&os;&nbsp;6.2</entry>
	      <entry>STP</entry>
	      <entry>STP</entry>
	    </row>

	    <row>
	      <entry>&os;&nbsp;6.3+</entry>
	      <entry>RSTP vagy STP</entry>
	      <entry>STP</entry>
	    </row>

	    <row>
	      <entry>&os;&nbsp;7.0+</entry>
	      <entry>RSTP vagy STP</entry>
	      <entry>RSTP</entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

      <para>A tagfel&uuml;leteken az <literal>stp</literal> paranccsal
	tudjuk enged&eacute;lyezni a fesz&iacute;t&#245;f&aacute;k
	haszn&aacute;lat&aacute;t.  Az <devicename>fxp0</devicename>
	&eacute;s <devicename>fxp1</devicename> fel&uuml;leteket
	&ouml;sszek&ouml;t&#245; h&iacute;dfel&uuml;let eset&eacute;ben
	teh&aacute;t &iacute;gy:</para>

      <screen>&prompt.root; <userinput>ifconfig bridge0 stp fxp0 stp fxp1</userinput>
bridge0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        ether d6:cf:d5:a0:94:6d
        id 00:01:02:4b:d4:50 priority 32768 hellotime 2 fwddelay 15
        maxage 20 holdcnt 6 proto rstp maxaddr 100 timeout 1200
        root id 00:01:02:4b:d4:50 priority 32768 ifcost 0 port 0
        member: fxp0 flags=1c7&lt;LEARNING,DISCOVER,STP,AUTOEDGE,PTP,AUTOPTP&gt;
                port 3 priority 128 path cost 200000 proto rstp
                role designated state forwarding
        member: fxp1 flags=1c7&lt;LEARNING,DISCOVER,STP,AUTOEDGE,PTP,AUTOPTP&gt;
                port 4 priority 128 path cost 200000 proto rstp
                role designated state forwarding</screen>

      <para>L&aacute;thatjuk, hogy a h&iacute;d a
	fesz&iacute;t&#245;f&aacute;ban megkapta a
	<literal>00:01:02:4b:d4:50</literal>-es azonos&iacute;t&oacute;t
	&eacute;s a <literal>32768</literal>-as priorit&aacute;st.
	Mivel <literal>root id</literal> &eacute;rt&eacute;ke is
	ugyanez, elmondhatjuk, hogy ez a fa gy&ouml;kerek&eacute;nt
	funkcion&aacute;l&oacute; h&iacute;d.</para>

      <para>Ha a h&aacute;l&oacute;zaton m&aacute;r valahol
	l&eacute;tezik egy m&aacute;sik h&iacute;d:</para>

      <screen>bridge0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        ether 96:3d:4b:f1:79:7a
        id 00:13:d4:9a:06:7a priority 32768 hellotime 2 fwddelay 15
        maxage 20 holdcnt 6 proto rstp maxaddr 100 timeout 1200
        root id 00:01:02:4b:d4:50 priority 32768 ifcost 400000 port 4
        member: fxp0 flags=1c7&lt;LEARNING,DISCOVER,STP,AUTOEDGE,PTP,AUTOPTP&gt;
                port 4 priority 128 path cost 200000 proto rstp
                role root state forwarding
        member: fxp1 flags=1c7&lt;LEARNING,DISCOVER,STP,AUTOEDGE,PTP,AUTOPTP&gt;
                port 5 priority 128 path cost 200000 proto rstp
                role designated state forwarding</screen>

      <para>A <literal>root id 00:01:02:4b:d4:50 priority 32768 ifcost
	400000 port 4</literal> sor mutatja, hogy a fa
	gy&ouml;ker&eacute;t k&eacute;pez&#245; h&iacute;d most a
	<literal>00:01:02:4b:d4:50</literal> azonos&iacute;t&oacute;val
	rendelkezik, &eacute;s ezt a hidat <literal>400000</literal>-res
	k&ouml;lts&eacute;ggel &eacute;ri el a <literal>port 4</literal>
	(a 4.  porton) kereszt&uuml;l, amely jelen esetben az
	<devicename>fxp0</devicename> fel&uuml;let.</para>

    </sect2>

    <sect2>
      <title>Komolyabb hidak &eacute;p&iacute;t&eacute;se</title>

      <sect3>
	<title>A forgalom &aacute;raml&aacute;s&aacute;nak
	  &aacute;tszerkeszt&eacute;se</title>

	<para>A hidak t&aacute;mogatj&aacute;k az &uacute;n.
	  megfigyel&eacute;si m&oacute;dot, ahol a csomagokat a
	  &man.bpf.4; feldolgoz&aacute;suk ut&aacute;n eldobja,
	  &iacute;gy nem folytat&oacute;dik a feldolgoz&aacute;suk vagy
	  nem haladnak tov&aacute;bb.  Ennek
	  kihaszn&aacute;l&aacute;s&aacute;val a k&eacute;t vagy
	  t&ouml;bb fel&uuml;leten &eacute;rkez&#245; adatokat egyetlen
	  &man.bpf.4; folyamm&aacute; tudjuk alak&iacute;tani.  Ez olyan
	  h&aacute;l&oacute;zati csapok forgalm&aacute;nak
	  &aacute;tszerkeszt&eacute;s&eacute;ben hasznos, ahol a
	  k&eacute;t k&uuml;l&ouml;nb&ouml;z&#245; fel&uuml;leten
	  kereszt&uuml;l k&uuml;ldj&uuml;k ki az RX/TX
	  (fogad&aacute;s/k&uuml;ld&eacute;s) jeleket.</para>

	<para>Az al&aacute;bbi paranccsal tudjuk megoldani, hogy
	  n&eacute;gy fel&uuml;letr&#245;l &eacute;rkez&#245; adatot
	  legy&uuml;nk k&eacute;pesek egyetlen folyamk&eacute;nt
	  olvasni:</para>

	<screen>&prompt.root; <userinput>ifconfig bridge0 addm fxp0 addm fxp1 addm fxp2 addm fxp3 monitor up</userinput>
&prompt.root; <userinput>tcpdump -i bridge0</userinput></screen>

      </sect3>

      <sect3>
	<title>Fesz&iacute;t&#245; portok</title>

	<para>A h&iacute;dhoz befut&oacute; Ethernet keretek
	  mindegyik&eacute;r&#245;l k&eacute;sz&uuml;l egy
	  m&aacute;solat, ami egy megadott fesz&iacute;t&#245; porton
	  kereszt&uuml;l megy tov&aacute;bb.  Hidank&eacute;nt
	  v&eacute;gtelen sz&aacute;m&uacute; ilyen fesz&iacute;t&#245;
	  port l&eacute;tezhet, &eacute;s ha egy fel&uuml;letet
	  fesz&iacute;t&#245; portnak adtunk meg, akkor
	  hagyom&aacute;nyos portk&eacute;nt m&aacute;r nem
	  haszn&aacute;lhatjuk.  Ez legink&aacute;bb akkor hasznos,
	  amikor passz&iacute;van akarjuk megfigyelni a h&iacute;ddal
	  rendelkez&#245; h&aacute;l&oacute;zatot a h&iacute;d
	  valamelyik fesz&iacute;t&#245; portj&aacute;ra
	  csatlakoz&oacute; g&eacute;pr&#245;l.</para>

	<para>K&uuml;ldess&uuml;k az &ouml;sszes keretr&#245;l egy
	  m&aacute;solatot az <devicename>fxp4</devicename>
	  fel&uuml;letre:</para>

	<screen>&prompt.root; <userinput>ifconfig bridge0 span fxp4</userinput></screen>

      </sect3>

      <sect3>
	<title>Priv&aacute;t fel&uuml;letek</title>

	<para>A priv&aacute;t fel&uuml;letek (private interface) csak
	  m&aacute;s priv&aacute;t fel&uuml;letek fel&eacute;
	  k&uuml;ldenek tov&aacute;bb adatot.  &Iacute;gy
	  felt&eacute;tel n&eacute;lk&uuml;l tudjuk korl&aacute;tozni a
	  forgalmat, &eacute;s sem Ethernet keretek, sem pedig ARP nem
	  megy kereszt&uuml;l rajtuk.  Ha viszont szelekt&iacute;ven
	  akarjuk korl&aacute;tozni a forgalmat, akkor helyette
	  haszn&aacute;ljunk t&#251;zfalat.</para>

      </sect3>

      <sect3>
	<title>Tapad&oacute;s fel&uuml;letek</title>

	<para>Ha a h&iacute;d egyik tagfel&uuml;let&eacute;t
	  tapad&oacute;snak (sticky) adjuk meg, akkor a dinamikusan
	  megtanult c&iacute;mek bejegyz&eacute;sei a
	  gyors&iacute;t&oacute;t&aacute;rba ker&uuml;l&eacute;s&uuml;k
	  ut&aacute;n &aacute;lland&oacute;sulnak.  A tapad&oacute;s
	  bejegyz&eacute;sek soha nem &eacute;v&uuml;lnek el vagy
	  cser&eacute;l&#245;dnek le, m&eacute;g abban az esetben sem,
	  ha ut&aacute;na az adott c&iacute;met egy m&aacute;sik
	  fel&uuml;letr&#245;l l&aacute;tjuk.  &Iacute;gy a
	  tov&aacute;bb&iacute;t&aacute;sra vonatkoz&oacute;
	  t&aacute;bl&aacute;zatot nem kell el&#245;re
	  felt&ouml;lten&uuml;nk, &eacute;s a h&iacute;d egyik
	  oldal&aacute;n megl&aacute;tott kliensek nem k&eacute;pesek
	  &aacute;tv&aacute;ndorolni egy m&aacute;sik
	  h&aacute;l&oacute;zati szegmensbe.</para>

	<para>M&aacute;sik ilyen p&eacute;lda a tapad&oacute;s
	  c&iacute;mek haszn&aacute;lat&aacute;ra az lehetne, amikor a
	  hidat VLAN-nal kombin&aacute;ljuk, &eacute;s &iacute;gy egy
	  olyan &uacute;tv&aacute;laszt&oacute;t hozunk l&eacute;tre,
	  ahol az &uuml;gyfeleink az IP-c&iacute;mtartom&aacute;ny
	  pocs&eacute;kl&aacute;sa n&eacute;lk&uuml;l
	  z&aacute;rhat&oacute;ak el egym&aacute;st&oacute;l.
	  Tegy&uuml;k fel, hogy az <hostid
	  role="hostname">A-ugyfel</hostid> a
	  <literal>vlan100</literal>, &eacute;s a <hostid
	  role="hostname">B-ugyfel</hostid> a <literal>vlan101</literal>
	  fel&uuml;leten csatlakozik.  A h&iacute;d IP-c&iacute;me
	  <hostid role="ipaddr">192.168.0.1</hostid>, amely maga is egy
	  internet fel&eacute; mutat&oacute;
	  &uacute;tv&aacute;laszt&oacute;.</para>

	<screen>&prompt.root; <userinput>ifconfig bridge0 addm vlan100 sticky vlan100 addm vlan101 sticky vlan101</userinput>
&prompt.root; <userinput>ifconfig bridge0 inet 192.168.0.1/24</userinput></screen>

	<para>Mind a k&eacute;t kliens a <hostid
	  role="ipaddr">192.168.0.1</hostid> c&iacute;met l&aacute;tja
	  alap&eacute;rtelmezett &aacute;tj&aacute;r&oacute;k&eacute;nt,
	  &eacute;s mivel a h&iacute;d gyors&iacute;t&oacute;t&aacute;ra
	  tapad&oacute;s bejegyz&eacute;seket tartalmaz, a
	  MAC-c&iacute;meik meghamis&iacute;t&aacute;s&aacute;val nem
	  tudj&aacute;k elcs&iacute;pni a m&aacute;sikuk
	  forgalm&aacute;t.</para>

	<para>A VLAN-ok k&ouml;zti b&aacute;rminem&#251;
	  kommunik&aacute;ci&oacute;t priv&aacute;t fel&uuml;letek
	  l&eacute;trehoz&aacute;s&aacute;val akad&aacute;lyozzuk meg
	  (vagy egy t&#251;zfallal):</para>

	<screen>&prompt.root; <userinput>ifconfig bridge0 private vlan100 private vlan101</userinput></screen>

	<para>Ezzel a megold&aacute;ssal az &uuml;gyfeleinket teljesen
	  elszigetelj&uuml;k egym&aacute;st&oacute;l &uacute;gy, hogy
	  k&ouml;zben az eg&eacute;sz <hostid
	  role="netmask">/24</hostid> c&iacute;mtartom&aacute;ny
	  k&uuml;l&ouml;n alh&aacute;l&oacute;zatok
	  kialak&iacute;t&aacute;sa n&eacute;lk&uuml;l
	  kioszthat&oacute;.</para>

      </sect3>

      <sect3>
	<title>C&iacute;mek korl&aacute;toz&aacute;sa</title>

	<para>Korl&aacute;tozhat&oacute;ak az egy fel&uuml;let
	  m&ouml;g&uuml;l k&uuml;ldeni k&eacute;pes egyedi
	  MAC-c&iacute;mek.  Amikor ezen a hat&aacute;ron fel&uuml;l
	  &eacute;rkeznek ismeretlen felad&oacute;t&oacute;l csomagok,
	  eg&eacute;szen addig eldobjuk ezeket, am&iacute;g egy
	  kor&aacute;bban m&aacute;r regisztr&aacute;lt
	  bejegyz&eacute;st a rendszer ki nem t&ouml;r&ouml;l vagy ki
	  nem vesz&uuml;nk a
	  gyors&iacute;t&oacute;t&aacute;rb&oacute;l.</para>

	<para>A k&ouml;vetkez&#245; p&eacute;ld&aacute;ban az
	  <literal>vlan100</literal> fel&uuml;leten csatlakoz&oacute;
	  <hostid role="hostname">A-ugyfel</hostid>
	  sz&aacute;m&aacute;ra korl&aacute;tozzuk le 10-re az Ethernet
	  eszk&ouml;z&ouml;k sz&aacute;m&aacute;t:</para>

	<screen>&prompt.root; <userinput>ifconfig bridge0 ifmaxaddr vlan100 10</userinput></screen>

      </sect3>

      <sect3>
	<title>SNMP fel&uuml;gyelet</title>

	<para>A hidak &eacute;s az STP param&eacute;terei az alap &os;
	  rendszerben megtal&aacute;lhat&oacute; SNMP d&eacute;monnal
	  fel&uuml;gyelhet&#245;ek.  A h&iacute;dhoz export&aacute;lt
	  fel&uuml;gyeleti inform&aacute;ci&oacute;k (Management
	  Information Base, MIB) megfelelnek az IETF &aacute;ltal
	  el&#245;&iacute;rt szabv&aacute;nyoknak, &iacute;gy
	  ak&aacute;r tetsz&#245;leges SNMP kliens vagy b&aacute;rmilyen
	  m&aacute;s fel&uuml;gyeleti szoftver alkalmas az
	  olvas&aacute;sukra.</para>

	<para>A hidat m&#251;k&ouml;dtet&#245; g&eacute;pen az
	  <filename>/etc/snmp.config</filename>
	  &aacute;llom&aacute;nyban enged&eacute;lyezz&uuml;k a
	  <literal>begemotSnmpdModulePath."bridge" =
	  "/usr/lib/snmp_bridge.so"</literal> sort &eacute;s
	  ind&iacute;tsuk el a <application>bsnmpd</application>
	  d&eacute;mont.  Itt m&eacute;g sz&uuml;ks&eacute;g lehet
	  m&aacute;s be&aacute;ll&iacute;t&aacute;sok,
	  p&eacute;ld&aacute;ul a k&ouml;z&ouml;ss&eacute;gek
	  nev&eacute;nek (community name) vagy a
	  hozz&aacute;f&eacute;r&eacute;si list&aacute;k (access list)
	  m&oacute;dos&iacute;t&aacute;s&aacute;ra is.  Ezzel
	  kapcsolatban a &man.bsnmpd.1; &eacute;s az &man.snmp.bridge.3;
	  man oldalakat lapozzuk fel.</para>

	<para>A k&ouml;vetkez&#245; p&eacute;ld&aacute;ban a
	  <application>Net-SNMP</application> nev&#251; szoftver
	  (<filename role="package">net-mgmt/net-snmp</filename>) fogjuk
	  haszn&aacute;lni a h&iacute;d el&eacute;r&eacute;s&eacute;re,
	  de ugyanerre a <filename
	  role="package">net-mgmt/bsnmptools</filename> port is
	  alkalmas.  Az SNMP klienst haszn&aacute;l&oacute; g&eacute;pen
	  eg&eacute;sz&iacute;ts&uuml;k ki az
	  <filename>$HOME/.snmp/snmp.conf</filename>
	  &aacute;llom&aacute;nyt a h&iacute;d fel&uuml;gyeleti
	  inform&aacute;ci&oacute;inak
	  import&aacute;l&aacute;s&aacute;val az
	  <application>Net-SNMP</application> rendszer&eacute;be:</para>

	<programlisting>mibdirs +/usr/share/snmp/mibs
mibs +BRIDGE-MIB:RSTP-MIB:BEGEMOT-MIB:BEGEMOT-BRIDGE-MIB</programlisting>

	<para>Az IETF BRIDGE-MIB (RFC&nbsp;4188)
	  haszn&aacute;lat&aacute;n kereszt&uuml;l &iacute;gy tudjuk
	  elind&iacute;tani egy h&iacute;d
	  fel&uuml;gyelet&eacute;t:</para>

	<screen>&prompt.user; <userinput>snmpwalk -v 2c -c public bridge1.example.com mib-2.dot1dBridge</userinput>
BRIDGE-MIB::dot1dBaseBridgeAddress.0 = STRING: 66:fb:9b:6e:5c:44
BRIDGE-MIB::dot1dBaseNumPorts.0 = INTEGER: 1 ports
BRIDGE-MIB::dot1dStpTimeSinceTopologyChange.0 = Timeticks: (189959) 0:31:39.59 centi-seconds
BRIDGE-MIB::dot1dStpTopChanges.0 = Counter32: 2
BRIDGE-MIB::dot1dStpDesignatedRoot.0 = Hex-STRING: 80 00 00 01 02 4B D4 50
...
BRIDGE-MIB::dot1dStpPortState.3 = INTEGER: forwarding(5)
BRIDGE-MIB::dot1dStpPortEnable.3 = INTEGER: enabled(1)
BRIDGE-MIB::dot1dStpPortPathCost.3 = INTEGER: 200000
BRIDGE-MIB::dot1dStpPortDesignatedRoot.3 = Hex-STRING: 80 00 00 01 02 4B D4 50
BRIDGE-MIB::dot1dStpPortDesignatedCost.3 = INTEGER: 0
BRIDGE-MIB::dot1dStpPortDesignatedBridge.3 = Hex-STRING: 80 00 00 01 02 4B D4 50
BRIDGE-MIB::dot1dStpPortDesignatedPort.3 = Hex-STRING: 03 80
BRIDGE-MIB::dot1dStpPortForwardTransitions.3 = Counter32: 1
RSTP-MIB::dot1dStpVersion.0 = INTEGER: rstp(2)</screen>

	<para>A p&eacute;ld&aacute;ban l&aacute;tszik, hogy a
	  <literal>dot1dStpTopChanges.0</literal> &eacute;rt&eacute;ke
	  kett&#245;, ami arra utal, hogy az STP h&iacute;d
	  topol&oacute;gi&aacute;ja k&eacute;tszer v&aacute;ltozott.  A
	  topol&oacute;gia v&aacute;ltoz&aacute;sa pedig azt jelenti,
	  hogy a h&aacute;l&oacute;zaton bel&uuml;l egy vagy t&ouml;bb
	  link &aacute;llapota megv&aacute;ltozott vagy egyszer&#251;en
	  meghib&aacute;sodott &eacute;s ez&eacute;rt egy &uacute;j
	  f&aacute;t kellett sz&aacute;molni.  A
	  <literal>dot1dStpTimeSinceTopologyChange.0</literal>
	  &eacute;rt&eacute;k adja meg, hogy ez pontosan mikor is
	  t&ouml;rt&eacute;nt.</para>

	<para>T&ouml;bb h&iacute;d fel&uuml;let&eacute;nek
	  fel&uuml;gyelet&eacute;hez a bels&#245; BEGEMOT-BRIDGE-MIB
	  parancsot is haszn&aacute;lhatjuk:</para>

	<screen>&prompt.user; <userinput>snmpwalk -v 2c -c public bridge1.example.com</userinput>
enterprises.fokus.begemot.begemotBridge
BEGEMOT-BRIDGE-MIB::begemotBridgeBaseName."bridge0" = STRING: bridge0
BEGEMOT-BRIDGE-MIB::begemotBridgeBaseName."bridge2" = STRING: bridge2
BEGEMOT-BRIDGE-MIB::begemotBridgeBaseAddress."bridge0" = STRING: e:ce:3b:5a:9e:13
BEGEMOT-BRIDGE-MIB::begemotBridgeBaseAddress."bridge2" = STRING: 12:5e:4d:74:d:fc
BEGEMOT-BRIDGE-MIB::begemotBridgeBaseNumPorts."bridge0" = INTEGER: 1
BEGEMOT-BRIDGE-MIB::begemotBridgeBaseNumPorts."bridge2" = INTEGER: 1
...
BEGEMOT-BRIDGE-MIB::begemotBridgeStpTimeSinceTopologyChange."bridge0" = Timeticks: (116927) 0:19:29.27 centi-seconds
BEGEMOT-BRIDGE-MIB::begemotBridgeStpTimeSinceTopologyChange."bridge2" = Timeticks: (82773) 0:13:47.73 centi-seconds
BEGEMOT-BRIDGE-MIB::begemotBridgeStpTopChanges."bridge0" = Counter32: 1
BEGEMOT-BRIDGE-MIB::begemotBridgeStpTopChanges."bridge2" = Counter32: 1
BEGEMOT-BRIDGE-MIB::begemotBridgeStpDesignatedRoot."bridge0" = Hex-STRING: 80 00 00 40 95 30 5E 31
BEGEMOT-BRIDGE-MIB::begemotBridgeStpDesignatedRoot."bridge2" = Hex-STRING: 80 00 00 50 8B B8 C6 A9</screen>

	<para>&Iacute;gy tudjuk megadni, hogy a hidat
	  <literal>mib-2.dot1dBridge</literal> r&eacute;szf&aacute;n
	  kereszt&uuml;l akarjuk megfigyelni:</para>

	<screen>&prompt.user; <userinput>snmpset -v 2c -c private bridge1.example.com</userinput>
BEGEMOT-BRIDGE-MIB::begemotBridgeDefaultBridgeIf.0 s bridge2</screen>

      </sect3>
    </sect2>
  </sect1>

  <sect1 id="network-aggregation">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Andrew</firstname>
	  <surname>Thompson</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>Linkek &ouml;sszef&#251;z&eacute;se &eacute;s
      hibat&#251;r&eacute;se</title>

    <indexterm><primary>lagg</primary></indexterm>
    <indexterm><primary>failover</primary></indexterm>
    <indexterm><primary>fec</primary></indexterm>
    <indexterm><primary>lacp</primary></indexterm>
    <indexterm><primary>loadbalance</primary></indexterm>
    <indexterm><primary>roundrobin</primary></indexterm>

    <sect2>
      <title>Bevezet&eacute;s</title>

      <para>A &man.lagg.4; fel&uuml;let lehet&#245;v&eacute; teszi, hogy
	t&ouml;bb h&aacute;l&oacute;zati fel&uuml;letet egyetlen
	virtu&aacute;lis fel&uuml;letk&eacute;nt f&#251;zz&uuml;nk
	&ouml;ssze, &eacute;s ezzel egy hibat&#251;r&#245; &eacute;s
	nagysebess&eacute;g&#251; &ouml;sszek&ouml;ttet&eacute;st
	alak&iacute;tsunk ki.</para>

    </sect2>

    <sect2>
      <title>M&#251;k&ouml;d&eacute;si m&oacute;dok</title>

      <variablelist>
	<varlistentry><term>failover</term>
	<listitem>
	  <para>Csak az els&#245;dlegesk&eacute;nt kijel&ouml;lt porton
	    kereszt&uuml;l fogad &eacute;s k&uuml;ld adatokat.  Amikor
	    ez az els&#245;dleges port el&eacute;rhetetlenn&eacute;
	    v&aacute;lik, a k&ouml;vetkez&#245; akt&iacute;v portot
	    fogja haszn&aacute;lni.  Az els&#245;k&eacute;nt felvett
	    fel&uuml;let v&aacute;lik automatikusan az els&#245;dleges
	    portt&aacute;, &eacute;s az ut&aacute;na felvett &ouml;sszes
	    t&ouml;bbit pedig csak hiba eset&eacute;n
	    haszn&aacute;ljuk.</para>
	</listitem>
	</varlistentry>

	<varlistentry><term>&cisco; Fast &etherchannel;</term>

	<listitem>
	  <para>A &cisco; Fast &etherchannel; (FEC) technol&oacute;gia
	    t&aacute;mogat&aacute;sa.  Ez egy statikus
	    be&aacute;ll&iacute;t&aacute;s, &eacute;s nem egyezteti az
	    &ouml;sszef&#251;z&eacute;st a t&ouml;bbiekkel vagy a linkek
	    fel&uuml;gyelet&eacute;hez nem v&aacute;lt kereteket.  Ha a
	    switch t&aacute;mogatja az LACP haszn&aacute;lat&aacute;t,
	    akkor ink&aacute;bb azt v&aacute;lasszuk.</para>

	  <para>A <acronym>FEC</acronym> a kimen&#245; forgalmat a
	    fejl&eacute;cekben szerepl&#245; protokollok alapj&aacute;n
	    sz&aacute;molt has&iacute;t&oacute;k&oacute;ddal
	    pr&oacute;b&aacute;lja sz&eacute;tosztani az akt&iacute;v
	    portok k&ouml;z&ouml;tt, &eacute;s tetsz&#245;leges
	    akt&iacute;v porton fogad be&eacute;rkez&#245; adatokat.  Az
	    eml&iacute;tett has&iacute;t&oacute;k&oacute;dban egy
	    Ethernetes forr&aacute;s- &eacute;s c&eacute;lc&iacute;m
	    szerepel, valamint ha el&eacute;rhet&#245;, akkor egy VLAN
	    c&iacute;mke, illetve az IPv4/IPv6 forr&aacute;s- &eacute;s
	    c&eacute;lc&iacute;m.</para>
	</listitem>
	</varlistentry>

	<varlistentry><term>LACP</term>

	<listitem>
	  <para>Az &ieee; 802.3ad Link Aggregation Control Protocol (LACP)
	    &eacute;s a Marker Protcol t&aacute;mogat&aacute;sa.  Az
	    LACP megpr&oacute;b&aacute;lja egyeztetni a t&ouml;bbi
	    g&eacute;ppel az &ouml;sszef&#251;zhet&#245; linkeket egy
	    vagy t&ouml;bb csoportban (Link Aggregated Group, LAG).
	    Mindegyik ilyen csoportban ugyanolyan sebess&eacute;g&#251;
	    portokat tal&aacute;lunk, full-duplex
	    m&#251;k&ouml;d&eacute;si m&oacute;dban.  A forgalmat
	    &iacute;gy a legnagyobb &ouml;sszsebess&eacute;ggel
	    rendelkez&#245; csoportban megtal&aacute;lhat&oacute; portok
	    k&ouml;z&ouml;tt osztja el, ami a legt&ouml;bb esetben az
	    &ouml;sszes portot mag&aacute;ban foglal&oacute; csoport.  A
	    fizikai konnektivit&aacute;s megv&aacute;ltoz&aacute;sa
	    eset&eacute;n a linkek &ouml;sszef&#251;z&#245;d&eacute;se
	    igen gyorsan alkalmazkodik az &uacute;j
	    konfigur&aacute;ci&oacute;hoz.</para>

	  <para>Az <acronym>LACP</acronym> a kimen&#245; forgalmat az
	    akt&iacute;v portok k&ouml;z&ouml;tt osztja sz&eacute;t
	    fejl&eacute;cekben szerepl&#245; protokollok alapj&aacute;n
	    sz&aacute;molt has&iacute;t&oacute;k&oacute;ddal, &eacute;s
	    b&aacute;rmelyik akt&iacute;v portr&oacute;l fogad
	    bej&ouml;v&#245; forgalmat.  A
	    has&iacute;t&oacute;k&oacute;dban megtal&aacute;lhat&oacute;
	    az Ethernetes forr&aacute;s- &eacute;s c&eacute;lc&iacute;m,
	    valamint ha el&eacute;rhet&#245;, akkor a VLAN c&iacute;mke,
	    illetve az IPv4/IPv6 forr&aacute;s- &eacute;s
	    c&eacute;lc&iacute;mek.</para>
	</listitem>
	</varlistentry>

	<varlistentry><term>Loadbalance</term>

	<listitem>
	  <para>Ez a <emphasis>FEC</emphasis> m&oacute;d m&aacute;sik
	    neve.</para>
	</listitem>
	</varlistentry>

	<varlistentry><term>Round-Robin</term>

	<listitem>
	  <para>A kimen&#245; forgalmat egy k&ouml;rk&ouml;r&ouml;s
	    (Round-Robin) elv&#251; &uuml;temez&#245;vel osztja
	    sz&eacute;t az akt&iacute;v portok k&ouml;z&ouml;tt
	    &eacute;s tetsz&#245;leges akt&iacute;v portr&oacute;l fogad
	    bej&ouml;v&#245; forgalmat.  Ez a m&#251;k&ouml;d&eacute;si
	    m&oacute;d megs&eacute;rti az Ethernet keretek
	    rendez&eacute;s&eacute;t &eacute;s csak nagy
	    k&ouml;r&uuml;ltekint&eacute;s mellett alkalmazzuk.</para>
	</listitem>
	</varlistentry>
      </variablelist>

    </sect2>

    <sect2>
      <title>P&eacute;ld&aacute;k</title>

      <example id="networking-lacp-aggregation-cisco">
	<title>LACP alap&uacute; &ouml;sszef&#251;z&eacute;s egy &cisco;
	  switch-csel</title>

	<para>Ebben a p&eacute;ld&aacute;ban egy &os;-s g&eacute;p
	  k&eacute;t fel&uuml;let&eacute;t kapcsoljuk &ouml;ssze
	  switch-csel egy egyszer&#251;
	  terhel&eacute;s-kiegyenl&iacute;t&eacute;ssel &eacute;s
	  hibat&#251;r&eacute;ssel be&aacute;ll&iacute;tott linken
	  kereszt&uuml;l.  Mivel az Ethernet keretek sorrendje
	  d&ouml;nt&#245; fontoss&aacute;g&uacute;, ez&eacute;rt a
	  k&eacute;t &aacute;llom&aacute;s k&ouml;z&ouml;tt egyazon
	  fizikai linken zajl&oacute; forgalom maxim&aacute;lis
	  sebess&eacute;g&eacute;t az adott fel&uuml;let
	  kapacit&aacute;sa korl&aacute;tozza.  A k&uuml;ld&eacute;si
	  algoritmus a lehet&#245; legt&ouml;bb inform&aacute;ci&oacute;
	  alapj&aacute;n pr&oacute;b&aacute;lja egym&aacute;st&oacute;l
	  megk&uuml;l&ouml;nb&ouml;ztetni a forgalmakat &eacute;s
	  elosztani ezeket a rendelkez&eacute;sre &aacute;ll&oacute;
	  fel&uuml;letek k&ouml;z&ouml;tt.</para>

	<para>A &cisco; switch-en vegy&uuml;nk fel a
	  <replaceable>FastEthernet0/1</replaceable> &eacute;s
	  <replaceable>FastEthernet0/2</replaceable>
	  interf&eacute;szeket az <replaceable>1</replaceable> csoportba
	  (channel group):</para>

	<screen><userinput>interface <replaceable>FastEthernet0/1</replaceable>
 channel-group <replaceable>1</replaceable> mode active
 channel-protocol lacp</userinput>
!
<userinput>interface <replaceable>FastEthernet0/2</replaceable>
 channel-group <replaceable>1</replaceable> mode active
 channel-protocol lacp</userinput></screen>

	<para>A &os;-s g&eacute;pen pedig a
	  <replaceable>fxp0</replaceable> &eacute;s
	  <replaceable>fxp1</replaceable> haszn&aacute;lat&aacute;val
	  hozzunk l&eacute;tre a &man.lagg.4; interf&eacute;szt:</para>

	<screen>&prompt.root; <userinput>ifconfig <replaceable>lagg0</replaceable> create</userinput>
&prompt.root; <userinput>ifconfig <replaceable>lagg0</replaceable> up laggproto lacp laggport <replaceable>fxp0</replaceable> laggport <replaceable>fxp1</replaceable></userinput></screen>

	<para>Ellen&#245;rizz&uuml;k a fel&uuml;let
	  &aacute;llapot&aacute;t:</para>

	<screen>&prompt.root; <userinput>ifconfig <replaceable>lagg0</replaceable></userinput></screen>

	<para>A <emphasis>ACTIVE</emphasis> jelz&eacute;s&#251;, vagyis
	  akt&iacute;v &aacute;llapot&uacute; portok az
	  &ouml;sszef&#251;z&eacute;shez kialak&iacute;tott csoport azon
	  tagjai, amelyekn&eacute;l fel&eacute;p&uuml;lt a kapcsolat a
	  t&aacute;voli switch fel&eacute; &eacute;s k&eacute;szen
	  &aacute;llnak a k&uuml;ld&eacute;sre &eacute;s
	  fogad&aacute;sra.  Ha az &man.ifconfig.8; programt&oacute;l
	  r&eacute;szletesebb kimenetet k&eacute;r&uuml;nk, akkor
	  l&aacute;thatjuk a csoportok azonos&iacute;t&oacute;it
	  is:</para>

	<screen>lagg0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        options=8&lt;VLAN_MTU&gt;
        ether 00:05:5d:71:8d:b8
        media: Ethernet autoselect
        status: active
        laggproto lacp
        laggport: fxp1 flags=1c&lt;ACTIVE,COLLECTING,DISTRIBUTING&gt;
        laggport: fxp0 flags=1c&lt;ACTIVE,COLLECTING,DISTRIBUTING&gt;</screen>

	<para>A <userinput>show lacp neighbor</userinput> paranccsal
	  k&eacute;rdezhetj&uuml;k le a portok
	  &aacute;llapot&aacute;t:</para>

	<screen>switch# show lacp neighbor
Flags:  S - Device is requesting Slow LACPDUs
        F - Device is requesting Fast LACPDUs
        A - Device is in Active mode       P - Device is in Passive mode

Channel group 1 neighbors

Partner's information:

                  LACP port                        Oper    Port     Port
Port      Flags   Priority  Dev ID         Age     Key     Number   State
Fa0/1     SA      32768     0005.5d71.8db8  29s    0x146   0x3      0x3D
Fa0/2     SA      32768     0005.5d71.8db8  29s    0x146   0x4      0x3D</screen>

	<para>R&eacute;szletesebb kijelz&eacute;st a <userinput>show
	    lacp neighbor detail</userinput> paranccsal kaphatunk.</para>
      </example>

      <example id="networking-lagg-failover">
	<title>A hibat&#251;r&eacute;s
	  be&aacute;ll&iacute;t&aacute;sa</title>

	<para>A hibat&#251;r&eacute;si m&oacute;d arra alkalmas, hogy
	  amikor az els&#245;dleges porton elvesztj&uuml;k a
	  kapcsolatot, helyette egy m&aacute;sodlagos interf&eacute;sz
	  haszn&aacute;lat&aacute;ra tudunk &aacute;tt&eacute;rni.
	  Hozzuk l&eacute;tre &eacute;s &aacute;ll&iacute;tsuk be a
	  <replaceable>lagg0</replaceable> interf&eacute;szt, ahol az
	  <replaceable>fxp0</replaceable> legyen a
	  f&#245;interf&eacute;sz, az <replaceable>fxp1</replaceable>
	  pedig a tartal&eacute;k interf&eacute;sz:</para>

	<screen>&prompt.root; <userinput>ifconfig <replaceable>lagg0</replaceable> create</userinput>
&prompt.root; <userinput>ifconfig <replaceable>lagg0</replaceable> up laggproto failover laggport <replaceable>fxp0</replaceable> laggport <replaceable>fxp1</replaceable></userinput></screen>

	<para>Az &iacute;gy l&eacute;trej&ouml;v&#245; interf&eacute;sz
	  nagyj&aacute;b&oacute;l az al&aacute;bbi lesz, ahol
	  elt&eacute;r&eacute;s a <acronym>MAC</acronym>-c&iacute;m
	  &eacute;s az eszk&ouml;z neve:</para>

	<screen>&prompt.root; <userinput>ifconfig <replaceable>lagg0</replaceable></userinput>
lagg0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        options=8&lt;VLAN_MTU&gt;
        ether 00:05:5d:71:8d:b8
        media: Ethernet autoselect
        status: active
        laggproto failover
        laggport: fxp1 flags=0&lt;&gt;
        laggport: fxp0 flags=5&lt;MASTER,ACTIVE&gt;</screen>

	<para>A forgalom kezdetben az <replaceable>fxp0</replaceable>
	  fel&uuml;leten kereszt&uuml;l &eacute;rkezik &eacute;s
	  t&aacute;vozik.  Ha az <replaceable>fxp0</replaceable>
	  fel&uuml;leten valami&eacute;rt megszakadna a kapcsolat,
	  helyette az <replaceable>fxp1</replaceable> lesz az
	  akt&iacute;v link.  Ha k&eacute;s&#245;bb helyre&aacute;ll a
	  kapcsolat az els&#245;dleges fel&uuml;leten, akkor &uacute;jra
	  az lesz akt&iacute;v link.</para>
      </example>

      <example id="networking-lagg-wired-and-wireless">
	<title>Hibat&#251;r&eacute;s be&aacute;ll&iacute;t&aacute;sa
	  vezet&eacute;kes &eacute;s vezet&eacute;k n&eacute;lk&uuml;li
	  h&aacute;l&oacute;zatok k&ouml;z&ouml;tt</title>

	<para>Hordozhat&oacute; sz&aacute;m&iacute;t&oacute;g&eacute;pek
	  haszn&aacute;lata eset&eacute;n &aacute;ltal&aacute;ban
	  &eacute;rdemesebb a vezet&eacute;k n&eacute;lk&uuml;li
	  kapcsolatot m&aacute;sodlagos interf&eacute;szk&eacute;nt
	  be&aacute;ll&iacute;tani, &iacute;gy csak akkor
	  haszn&aacute;lja a rendszer, ha vezet&eacute;kes
	  h&aacute;l&oacute;zat nem &eacute;rhet&#245; el.  A
	  &man.lagg.4; seg&iacute;ts&eacute;g&eacute;vel egyetlen
	  IP-c&iacute;mmel tudjuk haszn&aacute;lni mind a k&eacute;t
	  interf&eacute;szt: a teljes&iacute;tm&eacute;ny &eacute;s
	  biztons&aacute;goss&aacute;g miatt els&#245;sorban a
	  vezet&eacute;kes h&aacute;l&oacute;zatot haszn&aacute;ljuk,
	  mik&ouml;zben megmarad a lehet&#245;s&eacute;g az adatok
	  tov&aacute;bb&iacute;t&aacute;s&aacute;ra a vezet&eacute;k
	  n&eacute;lk&uuml;li kapcsolaton kereszt&uuml;l is.</para>

	<para>A be&aacute;ll&iacute;t&aacute;s sor&aacute;n a
	  vezet&eacute;k n&eacute;lk&uuml;li interf&eacute;sz
	  <acronym>MAC</acronym>-c&iacute;m&eacute;t &uacute;gy kell
	  m&oacute;dos&iacute;tanunk, hogy megegyezzen a &man.lagg.4;
	  c&iacute;m&eacute;vel.  A &man.lagg.4; interf&eacute;sz a
	  saj&aacute;t <acronym>MAC</acronym>-c&iacute;m&eacute;t az
	  els&#245;dleges interf&eacute;szt&#245;l &ouml;r&ouml;kli,
	  amely jelen eset&uuml;nkben a vezet&eacute;kes
	  interf&eacute;sz lesz.</para>

	<para>A most k&ouml;vetkez&#245; p&eacute;ld&aacute;ban a
	  vezet&eacute;kes h&aacute;l&oacute;zatunk lesz az
	  els&#245;dleges interf&eacute;sz
	  (<replaceable>bge0</replaceable>), m&iacute;g a vezet&eacute;k
	  n&eacute;lk&uuml;li (<replaceable>wlan0</replaceable>) a
	  m&aacute;sodlagos.  A <replaceable>wlan0</replaceable>
	  interf&eacute;szt az <replaceable>iwn0</replaceable>
	  interf&eacute;szb&#245;l hoztuk l&eacute;tre, &eacute;s a
	  vezet&eacute;kes kapcsolat
	  <acronym>MAC</acronym>-c&iacute;m&eacute;t
	  &aacute;ll&iacute;tjuk be neki.  Els&#245;
	  l&eacute;p&eacute;sk&eacute;nt teh&aacute;t le kell
	  k&eacute;rdezn&uuml;nk a vezet&eacute;kes interf&eacute;sz
	  <acronym>MAC</acronym>-c&iacute;m&eacute;t:</para>

	<screen>&prompt.root; <userinput>ifconfig <replaceable>bge0</replaceable></userinput>
bge0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
	options=19b&lt;RXCSUM,TXCSUM,VLAN_MTU,VLAN_HWTAGGING,VLAN_HWCSUM,TSO4&gt;
	ether 00:21:70:da:ae:37
	inet6 fe80::221:70ff:feda:ae37%bge0 prefixlen 64 scopeid 0x2 
	nd6 options=29&lt;PERFORMNUD,IFDISABLED,AUTO_LINKLOCAL&gt;
	media: Ethernet autoselect (1000baseT &lt;full-duplex&gt;)
	status: active</screen>

	<para>A <replaceable>bge0</replaceable> helyett
	  term&eacute;szetesen a saj&aacute;t vezet&eacute;kes
	  h&aacute;l&oacute;zati interf&eacute;sz&uuml;nket kell
	  megadni, &eacute;s az <literal>ether</literal> kezdet&#251;
	  sorban is saj&aacute;t k&aacute;rty&aacute;nk
	  <acronym>MAC</acronym>-c&iacute;me fog megjelenni.
	  Ezut&aacute;n m&aacute;r meg is tudjuk v&aacute;ltoztatni az
	  <replaceable>iwn0</replaceable> c&iacute;m&eacute;t:</para>

	<screen>&prompt.root; <userinput>ifconfig <replaceable>iwn0</replaceable> ether <replaceable>00:21:70:da:ae:37</replaceable></userinput></screen>

	<para>Aktiv&aacute;ljuk a vezet&eacute;k n&eacute;lk&uuml;li
	  interf&eacute;szt, de ne &aacute;ll&iacute;tsunk be neki
	  semmilyen IP-c&iacute;met:</para>

	<screen>&prompt.root; <userinput>ifconfig <replaceable>wlan0</replaceable> create wlandev <replaceable>iwn0</replaceable> ssid <replaceable>wlan_h&aacute;l&oacute;zat</replaceable> up</userinput></screen>

	<para>Hozzuk l&eacute;tre a &man.lagg.4; interf&eacute;szt a
	  <replaceable>bge0</replaceable> mint els&#245;dleges
	  interf&eacute;sz megad&aacute;s&aacute;val, valamint a
	  <replaceable>wlan0</replaceable> legyen a sz&uuml;ks&eacute;g
	  eset&eacute;n haszn&aacute;lhat&oacute;
	  tartal&eacute;k:</para>

	<screen>&prompt.root; <userinput>ifconfig <replaceable>lagg0</replaceable> create</userinput>
&prompt.root; <userinput>ifconfig <replaceable>lagg0</replaceable> up laggproto failover laggport <replaceable>bge0</replaceable> laggport <replaceable>wlan0</replaceable></userinput></screen>

	<para>Az &iacute;gy l&eacute;trehozott interf&eacute;sz
	  nagyj&aacute;b&oacute;l &iacute;gy fog megjelenni, egyed&uuml;li
	  fontosabb elt&eacute;r&eacute;sek a
	  <acronym>MAC</acronym>-c&iacute;mek &eacute;s az
	  eszk&ouml;z&ouml;k nevei:</para>

	<screen>&prompt.root; <userinput>ifconfig <replaceable>lagg0</replaceable></userinput>
lagg0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        options=8&lt;VLAN_MTU&gt;
        ether 00:21:70:da:ae:37
        media: Ethernet autoselect
        status: active
        laggproto failover
        laggport: wlan0 flags=0&lt;&gt;
        laggport: bge0 flags=5&lt;MASTER,ACTIVE&gt;</screen>

	<para>Hogy ne kelljen a rendszer minden egyes
	  ind&iacute;t&aacute;sa ut&aacute;n ezt a m&#251;veletet
	  megism&eacute;telni, vegy&uuml;k fel a k&ouml;vetkez&#245;
	  sorokat az <filename>/etc/rc.conf</filename>
	  &aacute;llom&aacute;nyba:</para>

	<programlisting>ifconfig_bge0="up"
ifconfig_iwn0="ether 00:21:70:da:ae:37"
wlans_iwn0="wlan0"
ifconfig_wlan0="WPA"
cloned_interfaces="lagg0"
ifconfig_lagg0="laggproto failover laggport bge0 laggport wlan0 DHCP"
</programlisting>
      </example>
    </sect2>
  </sect1>

  <sect1 id="network-diskless">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Jean-Fran&ccedil;ois</firstname>
	  <surname>Dock&egrave;s</surname>
	  <contrib>Friss&iacute;tette: </contrib>
	</author>
      </authorgroup>
      <authorgroup>
	<author>
	  <firstname>Alex</firstname>
	  <surname>Dupre</surname>
	  <contrib>&Aacute;tdolgozta &eacute;s jav&iacute;totta:
	    </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>Lemez n&eacute;lk&uuml;li m&#251;k&ouml;d&eacute;s</title>

    <indexterm><primary>lemez n&eacute;lk&uuml;li
      munka&aacute;llom&aacute;s</primary></indexterm>
    <indexterm><primary>lemez n&eacute;lk&uuml;li
      m&#251;k&ouml;d&eacute;s</primary></indexterm>

    <para>A &os; k&eacute;pes h&aacute;l&oacute;zaton kereszt&uuml;l
      elindulni &eacute;s helyi lemez n&eacute;lk&uuml;l egy
      <acronym>NFS</acronym> szerver &aacute;ltal megosztott
      &aacute;llom&aacute;nyrendszer csatlakoztat&aacute;s&aacute;val
      m&#251;k&ouml;dni.  Ehhez a szabv&aacute;nyos
      konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nyok
      m&oacute;dos&iacute;t&aacute;s&aacute;n k&iacute;v&uuml;l semmi
      m&aacute;sra nincs sz&uuml;ks&eacute;g&uuml;nk.  Egy ilyen
      rendszert viszonylag k&ouml;nny&#251; be&aacute;ll&iacute;tani,
      mivel az &ouml;sszes hozz&aacute;val&oacute; szinte k&eacute;szen
      el&eacute;rhet&#245;:</para>

    <itemizedlist>
      <listitem>
	<para>R&ouml;gt&ouml;n adott legal&aacute;bb k&eacute;t
	  m&oacute;dszer, ha a rendszermagot h&aacute;l&oacute;zaton
	  kereszt&uuml;l akarjuk bet&ouml;lteni:</para>

	<itemizedlist>
	  <listitem>
	    <para><acronym>PXE</acronym>: az &intel; &aacute;ltal
	      fejlesztett Preboot eXecution Environment
	      (<quote>ind&iacute;t&aacute;s el&#245;tti
	      v&eacute;grehajt&aacute;si k&ouml;rnyezet</quote>)
	      nev&#251; rendszer a h&aacute;l&oacute;zati
	      k&aacute;rty&aacute;kba vagy alaplapokba
	      &eacute;p&iacute;tett ROM
	      seg&iacute;ts&eacute;g&eacute;vel teszi
	      lehet&#245;v&eacute; az intelligens
	      rendszerind&iacute;t&aacute;st.  A &man.pxeboot.8; man
	      oldal&aacute;n olvashatunk err&#245;l
	      r&eacute;szletesebben.</para>
	  </listitem>
	  <listitem>
	    <para>Az <application>Etherboot</application> port
	      (<filename role="package">net/etherboot</filename>) olyan
	      ROM-ba programozhat&oacute; k&oacute;dot
	      k&eacute;sz&iacute;t, amellyel rendszermagokat tudunk
	      h&aacute;l&oacute;zaton kereszt&uuml;l bet&ouml;lteni.  Ez
	      a k&oacute;d egyar&aacute;nt felhaszn&aacute;lhat&oacute;
	      egy h&aacute;l&oacute;zati rendszerind&iacute;t&oacute;
	      PROM be&eacute;get&eacute;s&eacute;hez, vagy
	      bet&ouml;lthet&#245; a helyi floppy (esetleg
	      merev)lemezr&#245;l, illetve &ms-dos; rendszer
	      al&oacute;l.  El&eacute;g sok h&aacute;l&oacute;zati
	      k&aacute;rtya t&aacute;mogatja ezt a m&oacute;dot.</para>
	  </listitem>
	</itemizedlist>
	</listitem>

      <listitem>
	<para>Egy mintaszkript
	  (<filename>/usr/share/examples/diskless/clone_root</filename>)
	  is pr&oacute;b&aacute;lja megk&ouml;nny&iacute;teni a
	  szerveren a munka&aacute;llom&aacute;s
	  rendszerind&iacute;t&oacute;
	  &aacute;llom&aacute;nyrendszer&eacute;nek
	  l&eacute;trehoz&aacute;s&aacute;t &eacute;s
	  karbantart&aacute;s&aacute;t.  Ezt a szkriptet
	  val&oacute;sz&iacute;n&#251;leg n&eacute;mileg
	  m&oacute;dos&iacute;tani kell, de &iacute;gy is sokat
	  seg&iacute;t az elindul&aacute;sban.</para>
      </listitem>

      <listitem>
	<para>Az <filename>/etc</filename> k&ouml;nyvt&aacute;rban
	  tal&aacute;lhat&oacute; szabv&aacute;nyos
	  rendszerind&iacute;t&aacute;shoz haszn&aacute;lt
	  &aacute;llom&aacute;nyok, amelyekkel a lemez
	  n&eacute;lk&uuml;li indul&aacute;st lehet detekt&aacute;lni
	  &eacute;s seg&iacute;teni.</para>
      </listitem>

      <listitem>
	<para>A lapoz&aacute;s, amennyiben sz&uuml;ks&eacute;ges,
	  <acronym>NFS</acronym> vagy helyi lemez
	  seg&iacute;ts&eacute;g&eacute;vel oldhat&oacute; meg.</para>
      </listitem>
    </itemizedlist>

    <para>Sz&aacute;mos m&oacute;don &aacute;ll&iacute;thatunk be egy
      lemez n&eacute;lk&uuml;li munka&aacute;llom&aacute;st.  Rengeteg
      r&eacute;szb&#245;l tev&#245;dik &ouml;ssze, &eacute;s ezek
      legt&ouml;bbje remek&uuml;l testreszabhat&oacute; az
      ig&eacute;nyeinknek.  A tov&aacute;bbiakban egy teljes rendszer
      &ouml;ssze&aacute;ll&iacute;t&aacute;s&aacute;nak
      lehets&eacute;ges vari&aacute;ci&oacute;it ismertetj&uuml;k,
      k&uuml;l&ouml;n&ouml;s hangs&uacute;lyt fektet&uuml;nk arra, hogy
      egyszer&#251;ek &eacute;s a hagyom&aacute;nyos &os;
      ind&iacute;t&oacute;szkriptekkel kompatibilisek maradjanak.  A
      bemutatand&oacute; rendszer a k&ouml;vetkez&#245;
      jellemz&#245;kkel b&iacute;r:</para>

    <itemizedlist>
      <listitem>
	<para>A lemez n&eacute;lk&uuml;li munka&aacute;llom&aacute;sok
	  megosztott <filename>/</filename> &eacute;s
	  <filename>/usr</filename> &aacute;llom&aacute;nyrendszereket
	  haszn&aacute;lnak.</para>

	<para>A rendszer ind&iacute;t&aacute;s&aacute;hoz
	  haszn&aacute;lt gy&ouml;k&eacute;r
	  &aacute;llom&aacute;nyrendszer a szabv&aacute;ny &os;-s
	  gy&ouml;k&eacute;r (ez &aacute;ltal&aacute;ban a
	  szerver&eacute;), ahol n&eacute;h&aacute;ny
	  &aacute;llom&aacute;nyt fel&uuml;l&iacute;rtunk a lemez
	  n&eacute;lk&uuml;li m&#251;k&ouml;d&eacute;shez vagy
	  az&eacute;rt, mert egyszer&#251;en az adott
	  munka&aacute;llom&aacute;shoz tartozik.</para>

	<para>A gy&ouml;k&eacute;r azon r&eacute;szeit, amelyeket
	  &iacute;rhat&oacute;v&aacute; k&iacute;v&aacute;nunk tenni,
	  &man.md.4; alap&uacute; &aacute;llom&aacute;nyrendszerekkel
	  lapoljuk fel&uuml;l.  Ilyenkor azonban b&aacute;rmilyen rajtuk
	  ejtett v&aacute;ltoztat&aacute;s a rendszer
	  &uacute;jraind&iacute;t&aacute;s&aacute;val elveszik.</para>
      </listitem>

      <listitem>
	<para>A rendszermagot vagy az
	  <application>Etherboot</application> vagy a
	  <acronym>PXE</acronym> haszn&aacute;lat&aacute;val
	  k&uuml;ldess&uuml;k &aacute;t &eacute;s t&ouml;lts&uuml;k be,
	  mivel egyes helyzetekben ezekre sz&uuml;ks&eacute;g
	  lesz.</para>
      </listitem>
    </itemizedlist>

    <caution>
      <para>A bemutatott rendszer nem biztons&aacute;gos.
	Helyezz&uuml;k a h&aacute;l&oacute;zatunk egy j&oacute;l
	v&eacute;dett r&eacute;sz&eacute;re, &eacute;s a t&ouml;bbi
	g&eacute;p ne tekintse megb&iacute;zhat&oacute;nak.</para>
    </caution>

    <para>A szakaszban szerepl&#245; &ouml;sszes
      inform&aacute;ci&oacute;t a &os;&nbsp;5.2.1-RELEASE
      v&aacute;ltozat&aacute;val tesztelt&uuml;k.</para>

    <sect2>
      <title>H&aacute;tt&eacute;rinform&aacute;ci&oacute;k</title>

      <para>A lemez n&eacute;lk&uuml;li munka&aacute;llom&aacute;sok
	be&aacute;ll&iacute;t&aacute;sa egyszerre adja mag&aacute;t
	&eacute;s k&ouml;nnyen is elv&eacute;thet&#245;.  Az
	elk&ouml;vetett hib&aacute;kat olykor sz&aacute;mos okb&oacute;l
	kifoly&oacute;lag neh&eacute;z felismerni.
	P&eacute;ld&aacute;ul:</para>

      <itemizedlist>
	<listitem>
	  <para>A ford&iacute;t&aacute;si id&#245;ben megadott
	    be&aacute;ll&iacute;t&aacute;sok m&aacute;st
	    eredm&eacute;nyeznek fut&aacute;si id&#245;ben.</para>
	</listitem>

	<listitem>
	  <para>A hiba&uuml;zenetek gyakran titokzatosak vagy esetleg
	    teljesen el is maradnak.</para>
	</listitem>
      </itemizedlist>

      <para>Ez&eacute;rt ha valamennyire tiszt&aacute;ban vagyunk a
	h&aacute;tt&eacute;rben zajl&oacute; folyamatokkal, akkor sokkal
	t&ouml;bb es&eacute;llyel lesz&uuml;nk k&eacute;pesek megoldani
	a menet k&ouml;zben felmer&uuml;l&#245;
	probl&eacute;m&aacute;kat.</para>

      <para>A rendszernek a sikeres felkapaszkod&aacute;shoz t&ouml;bb
	m&#251;veletet is v&eacute;gre kell hajtania:</para>

      <itemizedlist>
	<listitem>
	  <para>A g&eacute;pnek sz&uuml;ks&eacute;ge van olyan
	    indul&oacute; param&eacute;terekhez, mint
	    p&eacute;ld&aacute;ul az IP-c&iacute;m, a
	    v&eacute;grehajthat&oacute; &aacute;llom&aacute;ny neve, a
	    szerver neve, a gy&ouml;k&eacute;r el&eacute;r&eacute;si
	    &uacute;tja.  Ezeket a <acronym>DHCP</acronym> vagy a BOOTP
	    protokollok haszn&aacute;lat&aacute;val adhatjuk meg.  A
	    <acronym>DHCP</acronym> a BOOTP kompatibilis
	    kiterjeszt&eacute;se, ez&eacute;rt ugyanazokat a portokat
	    &eacute;s alapvet&#245; csomagform&aacute;tumot
	    alkalmazza.</para>

	  <para>A rendszer&uuml;ket kiz&aacute;r&oacute;lag BOOTP
	    haszn&aacute;lat&aacute;val is be&aacute;ll&iacute;thatjuk.
	    A &man.bootpd.8; szerver az alap &os; rendszer
	    r&eacute;sze.</para>

	  <para>A <acronym>DHCP</acronym> azonban rengeteg el&#245;nnyel
	    rendelkezik a BOOTP protokollal szemben
	    (&aacute;ttekinthet&#245;bb konfigur&aacute;ci&oacute;s
	    &aacute;llom&aacute;nyok, a <acronym>PXE</acronym>
	    haszn&aacute;lat&aacute;nak lehet&#245;s&eacute;ge, illetve
	    sok minden m&aacute;s, ami nem csak a lemez
	    n&eacute;lk&uuml;li m&#251;k&ouml;d&eacute;shez kellhet),
	    ez&eacute;rt itt alapvet&#245;en egy DHCP alap&uacute;
	    konfigur&aacute;ci&oacute;t mutatunk be, de ahol
	    megoldhat&oacute;, megeml&iacute;tj&uuml;k a &man.bootpd.8;
	    eset&eacute;n alkalmas p&eacute;ld&aacute;kat is.  A
	    mintak&eacute;nt szolg&aacute;l&oacute;
	    konfigur&aacute;ci&oacute; az <application>ISC
	    DHCP</application> szoftvercsomagot haszn&aacute;lja (a
	    tesztszerverre ennek a 3.0.1.r12 verzi&oacute;j&aacute;t
	    telep&iacute;tet&uuml;k fel).</para>
	</listitem>

	<listitem>
	  <para>A g&eacute;pnek egy vagy t&ouml;bb programot kell a
	    saj&aacute;t mem&oacute;ri&aacute;j&aacute;ba
	    &aacute;tt&ouml;ltenie.  Erre vagy a <acronym>TFTP</acronym>
	    vagy pedig az <acronym>NFS</acronym> alkalmas.  A
	    <acronym>TFTP</acronym> &eacute;s az <acronym>NFS</acronym>
	    k&ouml;z&ouml;tt sok helyen ford&iacute;t&aacute;si
	    id&#245;ben tudunk v&aacute;lasztani.  Gyakori
	    hibaforr&aacute;s a protokollhoz rosszul megadott
	    &aacute;llom&aacute;nynevek haszn&aacute;lata: a
	    <acronym>TFTP</acronym> &aacute;ltal&aacute;ban az
	    &ouml;sszes &aacute;llom&aacute;nyt a szerverr&#245;l
	    egyetlen k&ouml;nyvt&aacute;rb&oacute;l t&ouml;lti
	    &aacute;t, ez&eacute;rt arra sz&aacute;m&iacute;t, hogy a
	    neveiket ehhez viszony&iacute;tva adjuk meg.  Az
	    <acronym>NFS</acronym> haszn&aacute;lata sor&aacute;n
	    azonban abszol&uacute;t el&eacute;r&eacute;si utakat kell
	    megadnunk.</para>
	</listitem>

	<listitem>
	  <para>A rendszer ind&iacute;t&aacute;s&aacute;t
	    lehet&#245;v&eacute; tev&#245; k&ouml;zbens&#245;
	    programokat &eacute;s a rendszermagot valahogy
	    inicializ&aacute;lni kell &eacute;s elind&iacute;tani.  Ezen
	    a ter&uuml;leten t&ouml;bb fontos v&aacute;ltozat kapott
	    helyet:</para>

	  <itemizedlist>
	    <listitem>
	      <para>A <acronym>PXE</acronym> a &man.pxeboot.8;
		k&oacute;dj&aacute;t fogja bet&ouml;lteni, ez
		l&eacute;nyeg&eacute;ben a &os; bet&ouml;lt&#245;
		harmadik fokozat&aacute;nak egy m&oacute;dos&iacute;tott
		v&aacute;ltozata.  A &man.loader.8; a
		m&#251;k&ouml;d&eacute;s&eacute;hez
		sz&uuml;ks&eacute;ges param&eacute;tereket a rendszer
		ind&iacute;t&aacute;sakor kapja meg, majd a
		vez&eacute;rl&eacute;s &aacute;tad&aacute;sa el&#245;tt
		ezeket a rendszermag k&ouml;rnyezet&eacute;ben hagyja.
		Ebben az esetben ak&aacute;r a
		<filename>GENERIC</filename> rendszermag is
		haszn&aacute;lhat&oacute;.</para>
	    </listitem>

	    <listitem>
	      <para>Az <application>Etherboot</application> kevesebb
		el&#245;k&eacute;sz&iacute;t&eacute;ssel
		k&ouml;zvetlen&uuml;l mag&aacute;t a rendszermagot
		t&ouml;lti be.  Ehhez azonban egy saj&aacute;t
		rendszermagot kell &eacute;p&iacute;teni,
		k&uuml;l&ouml;n
		be&aacute;ll&iacute;t&aacute;sokkal.</para>
	    </listitem>
	  </itemizedlist>

	  <para>A <acronym>PXE</acronym> &eacute;s az
	    <application>Etherboot</application> egyar&aacute;nt
	    j&oacute;l haszn&aacute;lhat&oacute;.  Mivel azonban a
	    rendszermagok &aacute;ltal&aacute;ban a &man.loader.8;
	    k&oacute;dj&aacute;ra hagyj&aacute;k a munka legnagyobb
	    r&eacute;sz&eacute;t, ez&eacute;rt ahol lehets&eacute;ges, a
	    <acronym>PXE</acronym> megold&aacute;s&aacute;t
	    &eacute;rdemes alkalmazni.</para>

	  <para>Teh&aacute;t ha az alaplapi <acronym>BIOS</acronym>
	    &eacute;s a h&aacute;l&oacute;zati k&aacute;rtya is
	    t&aacute;mogatja a <acronym>PXE</acronym>
	    haszn&aacute;lat&aacute;t, akkor v&aacute;lasszunk
	    ink&aacute;bb azt.</para>
	</listitem>

	<listitem>
	  <para>V&eacute;gezet&uuml;l a g&eacute;pnek valamilyen
	    m&oacute;don hozz&aacute; kell tudnia f&eacute;rnie az
	    &aacute;llom&aacute;nyrendszerekhez.  Erre t&ouml;bbnyire az
	    <acronym>NFS</acronym> j&ouml;het sz&oacute;ba.</para>
	</listitem>
      </itemizedlist>

      <para>A tov&aacute;bbi r&eacute;szleket l&aacute;sd a
	&man.diskless.8; man oldalon.</para>

    </sect2>

    <sect2>
      <title>Be&aacute;ll&iacute;t&aacute;si
	&uacute;tmutat&oacute;</title>

      <sect3>
	<title>Be&aacute;ll&iacute;t&aacute;s a <application>ISC
	  DHCP</application> haszn&aacute;lat&aacute;val</title>

	<indexterm>
	  <primary>DHCP</primary>
	  <secondary>lemez n&eacute;lk&uuml;li
	    m&#251;k&ouml;d&eacute;s</secondary>
	</indexterm>

	  <para>Az <application>ISC DHCP</application> szervere
	    k&eacute;pes a BOOTP &eacute;s <acronym>DHCP</acronym>
	    k&eacute;r&eacute;seket is megv&aacute;laszolni.</para>

	  <para>Az <application>ISC DHCP 3.0</application> nem az
	    alaprendszer r&eacute;sze, ez&eacute;rt a
	    haszn&aacute;lat&aacute;hoz el&#245;sz&ouml;r
	    telep&iacute;ten&uuml;nk kell a <filename
	    role="package">net/isc-dhcp30-server</filename> portot vagy a
	    neki megfelel&#245; csomagot.</para>

	  <para>Ahogy feltelep&iacute;tett&uuml;k, le kell futtatnunk az
	    <application>ISC DHCP</application>
	    konfigur&aacute;ci&oacute;s &aacute;llom&aacute;ny&aacute;t
	    (ezt &aacute;ltal&aacute;ban
	    <filename>/usr/local/etc/dhcpd.conf</filename> n&eacute;ven
	    tal&aacute;ljuk meg).  A most k&ouml;vetkez&#245;,
	    megjegyz&eacute;sekkel kieg&eacute;sz&iacute;tett
	    p&eacute;ld&aacute;ban egy <hostid>margaux</hostid>
	    nev&#251; g&eacute;p az
	    <application>Etherboot</application>, valamint egy
	    <hostid>corbieres</hostid> nev&#251; g&eacute;p
	    <acronym>PXE</acronym> haszn&aacute;lat&aacute;val akar
	    kapcsol&oacute;dni:</para>

	  <programlisting>
default-lease-time 600;
max-lease-time 7200;
authoritative;

option domain-name "minta.com";
option domain-name-servers 192.168.4.1;
option routers 192.168.4.1;

subnet 192.168.4.0 netmask 255.255.255.0 {
  use-host-decl-names on; <co id="co-dhcp-host-name">
  option subnet-mask 255.255.255.0;
  option broadcast-address 192.168.4.255;

  host margaux {
    hardware ethernet 01:23:45:67:89:ab;
    fixed-address margaux.minta.com;
    next-server 192.168.4.4; <co id="co-dhcp-next-server">
    filename "/data/misc/kernel.diskless"; <co id="co-dhcp-filename">
    option root-path "192.168.4.4:/data/misc/diskless"; <co id="co-dhcp-root-path">
  }
  host corbieres {
    hardware ethernet 00:02:b3:27:62:df;
    fixed-address corbieres.minta.com;
    next-server 192.168.4.4;
    filename "pxeboot";
    option root-path "192.168.4.4:/data/misc/diskless";
  }
}
</programlisting>

	  <calloutlist>
	    <callout arearefs="co-dhcp-host-name">
	      <para>Ez a be&aacute;ll&iacute;t&aacute;s arra
		utas&iacute;tja a <application>dhcpd</application>
		d&eacute;mont, hogy a lemez n&eacute;lk&uuml;li
		g&eacute;p h&aacute;l&oacute;zati nevek&eacute;nt a
		<literal>host</literal> deklar&aacute;ci&oacute;ban
		megadott &eacute;rt&eacute;ket k&uuml;ldje el.  Ezt
		&uacute;gyis meg lehet csin&aacute;lni, hogy
		felvessz&uuml;nk egy <literal>option host-name
		<replaceable>margaux</replaceable> </literal>
		r&eacute;szt a <literal>host</literal>
		deklar&aacute;ci&oacute;k k&ouml;z&eacute;.</para>
	    </callout>

	    <callout arearefs="co-dhcp-next-server">
	      <para>A <literal>next-server</literal> direkt&iacute;va a
		bet&ouml;lt&#245; vagy a rendszermag
		bet&ouml;lt&eacute;s&eacute;&eacute;rt felel&#245;s
		<acronym>TFTP</acronym> vagy <acronym>NFS</acronym>
		szervert jel&ouml;li ki (alap&eacute;rtelmez&eacute;s
		szerint ez megegyezik a <acronym>DHCP</acronym>
		szerverrel).</para>
	    </callout>

	    <callout arearefs="co-dhcp-filename">
	      <para>A <literal>filename</literal> direkt&iacute;va azt
		az &aacute;llom&aacute;nyt adja meg, amelyet az
		<application>Etherboot</application> vagy a
		<acronym>PXE</acronym> a k&ouml;vetkez&#245;
		v&eacute;grehajt&aacute;si l&eacute;p&eacute;sben
		bet&ouml;lt.  Ezt a kiv&aacute;lasztott &aacute;tviteli
		m&oacute;dnak megfelel&#245;en kell megadni.  Az
		<application>Etherboot</application>
		leford&iacute;that&oacute; az <acronym>NFS</acronym>
		vagy a <acronym>TFTP</acronym>
		haszn&aacute;lat&aacute;val is.  A &os; port
		alapb&oacute;l az <acronym>NFS</acronym>
		t&aacute;mogat&aacute;s&aacute;t tartalmazza.  A
		<acronym>PXE</acronym> a <acronym>TFTP</acronym>
		protokollt haszn&aacute;lja, ez&eacute;rt itt
		relat&iacute;v &aacute;llom&aacute;nyneveket adunk meg
		(ez persze a <acronym>TFTP</acronym> szerver
		be&aacute;ll&iacute;t&aacute;sait&oacute;l f&uuml;gg, de
		&aacute;ltal&aacute;ban ez a jellemz&#245;).  S&#245;t,
		a <acronym>PXE</acronym> a <filename>pxeboot</filename>
		&aacute;llom&aacute;nyt t&ouml;lti be, nem is a
		rendszermagot.  L&eacute;teznek tov&aacute;bbi
		&eacute;rdekes lehet&#245;s&eacute;gek is, mint
		p&eacute;ld&aacute;ul a <filename>pxeboot</filename>
		&aacute;llom&aacute;ny bet&ouml;lt&eacute;se a &os;
		CD-j&eacute;n tal&aacute;lhat&oacute; <filename
		  class="directory">/boot</filename>
		k&ouml;nyvt&aacute;rb&oacute;l (mivel a &man.pxeboot.8;
		a <filename>GENERIC</filename> rendszermagot
		k&eacute;pes bet&ouml;lteni, ez&eacute;rt a
		<acronym>PXE</acronym> haszn&aacute;lat&aacute;val
		ak&aacute;r egy t&aacute;voli
		CD-meghajt&oacute;r&oacute;l is ind&iacute;thatjuk a
		rendszert).</para>
	    </callout>

	    <callout arearefs="co-dhcp-root-path">
	      <para>A <literal>root-path</literal> opci&oacute; a
		rendszer ind&iacute;t&aacute;s&aacute;hoz
		haszn&aacute;lt gy&ouml;k&eacute;r
		&aacute;llom&aacute;nyrendszert nevezi meg, amelyet
		t&ouml;bbnyire az <acronym>NFS</acronym>
		jel&ouml;l&eacute;si m&oacute;dszere szerint kell
		megadni.  A <acronym>PXE</acronym> haszn&aacute;lata
		sor&aacute;n el lehet hagyni a g&eacute;p
		IP-c&iacute;m&eacute;t eg&eacute;szen addig, am&iacute;g
		nem enged&eacute;lyezz&uuml;k a rendszermagban a BOOTP
		be&aacute;ll&iacute;t&aacute;st.  Az
		<acronym>NFS</acronym> szerver ekkor megegyzik a
		<acronym>TFTP</acronym> szerverrel.</para>
	    </callout>
	  </calloutlist>

      </sect3>

      <sect3>
	<title>Be&aacute;ll&iacute;t&aacute;s a BOOTP
	  haszn&aacute;lat&aacute;val</title>

	<indexterm>
	  <primary>BOOTP</primary>
	  <secondary>lemez n&eacute;lk&uuml;li
	    m&#251;k&ouml;d&eacute;s</secondary>
	</indexterm>

	  <para>Itt a <application>bootpd</application> (egyetlen
	    kliensre korl&aacute;tozott)
	    be&aacute;ll&iacute;t&aacute;s&aacute;t l&aacute;thatjuk.
	    Ezt az <filename>/etc/bootptab</filename>
	    &aacute;llom&aacute;nyba tegy&uuml;k.</para>

	  <para>Ne feledj&uuml;k, hogy a BOOTP
	    haszn&aacute;lat&aacute;hoz az
	    <application>Etherboot</application> portot a
	    <literal>NO_DHCP_SUPPORT</literal>
	    be&aacute;ll&iacute;t&aacute;ssal kell ford&iacute;tanunk,
	    mik&ouml;zben a <acronym>PXE</acronym> eset&eacute;ben kell
	    a <acronym>DHCP</acronym>.  Egy&eacute;bk&eacute;nt a
	    <application>bootpd</application> egyed&uuml;li
	    nyilv&aacute;nval&oacute; el&#245;nye csup&aacute;n annyi,
	    hogy az alaprendszer r&eacute;sze.</para>

	  <programlisting>
.def100:\
  :hn:ht=1:sa=192.168.4.4:vm=rfc1048:\
  :sm=255.255.255.0:\
  :ds=192.168.4.1:\
  :gw=192.168.4.1:\
  :hd="/tftpboot":\
  :bf="/kernel.diskless":\
  :rp="192.168.4.4:/data/misc/diskless":

margaux:ha=0123456789ab:tc=.def100
</programlisting>

      </sect3>

      <sect3>
	<title>A rendszer el&#245;k&eacute;sz&iacute;t&eacute;se az
	  <application>Etherboot</application>
	  sz&aacute;m&aacute;ra</title>

	<indexterm><primary>Etherboot</primary></indexterm>

	<para>Az <ulink url="http://etherboot.sourceforge.net">Etherboot
	  honlapj&aacute;n </ulink> tal&aacute;lhatunk egy <ulink
	  url="http://etherboot.sourceforge.net/doc/html/userman/t1.html">
	  minden r&eacute;szletre kiterjed&#245;
	  dokument&aacute;ci&oacute;t (angolul)</ulink>, amely
	  els&#245;sorban ugyan a Linux t&iacute;pus&uacute; rendszerek
	  sz&aacute;m&aacute;ra &iacute;r&oacute;dott, de ett&#245;l
	  f&uuml;ggetlen&uuml;l m&eacute;g hasznos
	  inform&aacute;ci&oacute;kat tartalmaz.  A tov&aacute;bbiakban
	  csak annyit szeretn&eacute;nk k&ouml;rvonalazni, hogy az
	  <application>Etherboot</application> mik&eacute;nt
	  b&iacute;rhat&oacute; m&#251;k&ouml;d&eacute;sre &os;
	  rendszerekkel.</para>

	<para>El&#245;sz&ouml;r telep&iacute;ten&uuml;nk kell a
	  <filename role="package">net/etherboot</filename> csomagot
	  vagy portot.</para>

	<para>Az <application>Etherboot</application>
	  be&aacute;ll&iacute;t&aacute;s&aacute;t (vagyis a
	  <acronym>TFTP</acronym> haszn&aacute;lat&aacute;nak
	  megad&aacute;s&aacute;t az <acronym>NFS</acronym> helyett) az
	  <application>Etherboot</application> forr&aacute;s&aacute;t
	  tartalmaz&oacute; k&ouml;nyvt&aacute;rban
	  tal&aacute;lhat&oacute; <filename>Config</filename>
	  &aacute;llom&aacute;ny megfelel&#245;
	  &aacute;t&iacute;r&aacute;s&aacute;val tudjuk megtenni.</para>

	<para>Itt most floppyr&oacute;l fogjuk ind&iacute;tani a
	  rendszert.  A t&ouml;bbi m&oacute;dszerrel (PROM vagy &ms-dos;
	  program) kapcsolatban olvassuk el az
	  <application>Etherboot</application>
	  dokument&aacute;ci&oacute;j&aacute;t.</para>

	<para>A rendszerind&iacute;t&oacute; lemez
	  elk&eacute;sz&iacute;t&eacute;s&eacute;hez tegy&uuml;nk egy
	  lemezt annak a g&eacute;pnek a meghajt&oacute;j&aacute;ba,
	  ahov&aacute; az <application>Etherboot</application>
	  felker&uuml;lt.  V&aacute;ltsunk az
	  <application>Etherboot</application>
	  k&ouml;nyvt&aacute;r&aacute;n bel&uuml;l az
	  <filename>src</filename> alk&ouml;nyvt&aacute;rba &eacute;s
	  g&eacute;pelj&uuml;k be:</para>

	<screen>
&prompt.root; <userinput>gmake bin32/<replaceable>eszk&ouml;zt&iacute;pus</replaceable>.fd0</userinput>
</screen>

	<para>Az <replaceable>eszk&ouml;zt&iacute;pus</replaceable> a
	  lemez n&eacute;lk&uuml;li munka&aacute;llom&aacute;s Ethernet
	  k&aacute;rty&aacute;j&aacute;t&oacute;l f&uuml;gg.  Az
	  ugyanebben a k&ouml;nyvt&aacute;rban tal&aacute;lhat&oacute;
	  <filename>NIC</filename> &aacute;llom&aacute;nyb&oacute;l
	  tudjuk kiolvasni, hogy az adott k&aacute;rty&aacute;hoz melyik
	  <replaceable>eszk&ouml;zt&iacute;pus</replaceable>
	  tartozik.</para>

      </sect3>

      <sect3>
	<title>A rendszer ind&iacute;t&aacute;sa <acronym>PXE</acronym>
	  haszn&aacute;lat&aacute;val</title>

	<para>Alap&eacute;rtelmez&eacute;s szerint a &man.pxeboot.8;
	  bet&ouml;lt&#245; a rendszermagot <acronym>NFS</acronym>-en
	  kereszt&uuml;l t&ouml;lti be.  Ha az
	  <filename>/etc/make.conf</filename> &aacute;llom&aacute;nyban
	  a <literal>LOADER_TFTP_SUPPORT</literal>
	  be&aacute;ll&iacute;t&aacute;st adjuk meg, akkor
	  <acronym>TFTP</acronym> t&aacute;mogat&aacute;ssal is
	  leford&iacute;that&oacute;.  Ezzel kapcsolatban a
	  <filename>/usr/share/examples/etc/make.conf</filename>
	  &aacute;llom&aacute;nyban tal&aacute;lhat&oacute;
	  megjegyz&eacute;seket &eacute;rdemes elolvasnunk.</para>

	<para>A <filename>make.conf</filename> &aacute;llom&aacute;nyban
	  m&eacute;g tov&aacute;bbi k&eacute;t m&aacute;sik hasznos
	  opci&oacute;t is tal&aacute;lhatunk a soros vonali konzollal
	  &uuml;zemel&#245; lemez n&eacute;lk&uuml;li g&eacute;pek
	  sz&aacute;m&aacute;ra: az egyik a
	  <literal>BOOT_PXELDR_PROBE_KEYBOARD</literal>, a m&aacute;sik
	  pedig a <literal>BOOT_PXELDR_ALWAYS_SERIAL</literal>.</para>

	<para>A g&eacute;p ind&iacute;t&aacute;sakor &uacute;gy tudjuk
	  be&uuml;zemelni a <acronym>PXE</acronym>
	  haszn&aacute;lat&aacute;t, ha a BIOS
	  be&aacute;ll&iacute;t&aacute;sai k&ouml;z&ouml;tt a
	  <literal>Boot from network</literal> opci&oacute;t
	  v&aacute;lasztjuk ki, vagy a g&eacute;p bekapcsol&aacute;sa
	  ut&aacute;n lenyomjuk hozz&aacute; a megfelel&#245;
	  funkci&oacute;billenty&#251;t.</para>

      </sect3>

      <sect3>
	<title>A <acronym>TFTP</acronym> &eacute;s
	  <acronym>NFS</acronym> szerverek
	  be&aacute;ll&iacute;t&aacute;sa</title>

	<indexterm>
	  <primary>TFTP</primary>
	  <secondary>lemez n&eacute;lk&uuml;li
	    m&#251;k&ouml;d&eacute;s</secondary>
	</indexterm>
	<indexterm>
	  <primary>NFS</primary>
	  <secondary>lemez n&eacute;lk&uuml;li
	    m&#251;k&ouml;d&eacute;s</secondary>
	</indexterm>

	<para>Ha a <acronym>PXE</acronym> vagy az
	  <application>Etherboot</application> a <acronym>TFTP</acronym>
	  protokollt haszn&aacute;lja, akkor az
	  &aacute;llom&aacute;nyszerveren a
	  <application>tftpd</application> d&eacute;mont kell
	  elind&iacute;tani:</para>

	<procedure>
	  <step>
	    <para>K&eacute;sz&iacute;ts&uuml;nk egy
	      k&ouml;nyvt&aacute;rat, ahonnan majd a
	      <application>tftpd</application> k&uuml;ldi az
	      &aacute;llom&aacute;nyokat, p&eacute;ld&aacute;ul legyen
	      ez a <filename>/tftpboot</filename>.</para>
	  </step>

	  <step>
	    <para>Vegy&uuml;k fel a k&ouml;vetkez&#245; sort az
	      <filename>/etc/inetd.conf</filename>
	      &aacute;llom&aacute;nyunkba:</para>

	    <programlisting>tftp	dgram	udp	wait	root	/usr/libexec/tftpd	tftpd -l -s /tftpboot</programlisting>

	    <note>
	      <para>A tapasztalat szerint egyes <acronym>PXE</acronym>
		verzi&oacute;k a <acronym>TFTP</acronym>
		<acronym>TCP</acronym> alap&uacute;
		v&aacute;ltozat&aacute;t haszn&aacute;lj&aacute;k.
		Ebben az esetben vegy&uuml;nk fel m&eacute;g egy
		m&aacute;sodik sort is, ahol a <literal>dgram
		udp</literal> r&eacute;szt <literal>stream
		tcp</literal>-re cser&eacute;lj&uuml;k.</para>
	    </note>
	  </step>

	  <step>
	    <para>Mondjuk meg az <application>inetd</application>
	      d&eacute;monnak, hogy olvassa &uacute;jra a
	      konfigur&aacute;ci&oacute;s
	      &aacute;llom&aacute;ny&aacute;t.  Az al&aacute;bbi parancs
	      megfelel&#245; m&#251;k&ouml;d&eacute;s&eacute;hez Az
	      <option>inetd_enable="YES"</option> sornak szerepelnie
	      kell az <filename>/etc/rc.conf</filename>
	      &aacute;llom&aacute;nyban:</para>

	    <screen>&prompt.root; <userinput>/etc/rc.d/inetd restart</userinput></screen>
	  </step>
	</procedure>

	<para>A <filename>tftpboot</filename> k&ouml;nyvt&aacute;rat
	  b&aacute;rhova rakhatjuk a szerveren.  Viszont az
	  <filename>inetd.conf</filename> &eacute;s
	  <filename>dhcpd.conf</filename> &aacute;llom&aacute;nyokban
	  ezt ne felejts&uuml;k fel megadni.</para>

	<para>Minden esetben enged&eacute;lyezn&uuml;nk kell az
	  <acronym>NFS</acronym> haszn&aacute;lat&aacute;t &eacute;s
	  vele egy&uuml;tt export&aacute;lni az <acronym>NFS</acronym>
	  szerverr&#245;l el&eacute;rni k&iacute;v&aacute;nt
	  &aacute;llom&aacute;nyrendszereket.</para>

	<procedure>
	  <step>
	    <para>Az <filename>/etc/rc.conf</filename>
	      &aacute;llom&aacute;nyba tegy&uuml;k bele a
	      k&ouml;vetkez&#245;t:</para>

	    <programlisting>nfs_server_enable="YES"</programlisting>
	  </step>

	  <step>
	    <para>Az <filename>/etc/exports</filename>
	      &aacute;llom&aacute;nyban a lemez n&eacute;lk&uuml;li
	      rendszereknek sz&aacute;nt
	      gy&ouml;k&eacute;rk&ouml;nyvt&aacute;rat tegy&uuml;k
	      el&eacute;rhet&#245;v&eacute; (a p&eacute;ld&aacute;ban
	      &iacute;rjuk &aacute;t a k&ouml;tet csatlakoz&aacute;si
	      pontj&aacute;t &eacute;s a <replaceable>margaux
	      corbieres</replaceable> hely&eacute;re
	      &aacute;ll&iacute;tsuk be a saj&aacute;t lemez
	      n&eacute;lk&uuml;li munka&aacute;llom&aacute;saink
	      neveit:</para>

	    <programlisting><replaceable>/data/misc</replaceable> -alldirs -ro <replaceable>margaux corbieres</replaceable></programlisting>
	  </step>

	  <step>
	    <para>K&eacute;rj&uuml;k meg a
	      <application>mountd</application> d&eacute;mont, hogy
	      olvassa &uacute;jra a konfigur&aacute;ci&oacute;s
	      &aacute;llom&aacute;ny&aacute;t.  El&#245;fordulhat
	      azonban, hogy ehhez el&#245;sz&ouml;r az
	      <acronym>NFS</acronym> szolg&aacute;ltat&aacute;st kell
	      enged&eacute;lyezni az <filename>/etc/rc.conf</filename>
	      &aacute;llom&aacute;nyb&oacute;l &eacute;s
	      &uacute;jraind&iacute;tani a g&eacute;pet.</para>

	    <screen>&prompt.root; <userinput>/etc/rc.d/mountd restart</userinput></screen>
	  </step>
        </procedure>

      </sect3>

      <sect3>
	<title>Lemez n&eacute;lk&uuml;li rendszermag
	  ford&iacute;t&aacute;sa</title>

	<indexterm>
	  <primary>lemez n&eacute;lk&uuml;li
	    m&#251;k&ouml;d&eacute;s</primary>
	  <secondary>a rendszermag
	    be&aacute;ll&iacute;t&aacute;sai</secondary>
	</indexterm>

	<para>Ha az <application>Etherboot</application>
	  haszn&aacute;lata mellett d&ouml;nt&uuml;nk, akkor a lemez
	  n&eacute;lk&uuml;li kliensek sz&aacute;m&aacute;ra a
	  rendszermagot a k&ouml;vetkez&#245;
	  be&aacute;ll&iacute;t&aacute;sok haszn&aacute;lat&aacute;val
	  kell &uacute;jraford&iacute;tani (a megszokottak
	  mellett):</para>

	<programlisting>
options     BOOTP          # BOOTP-n kereszt&uuml;l k&eacute;r&uuml;nk IP-c&iacute;met &eacute;s h&aacute;l&oacute;zati nevet
options     BOOTP_NFSROOT  # a BOOTP-t&#245;l kapott inform&aacute;ci&oacute;k alapj&aacute;n csatoljuk a gy&ouml;keret NFS-en kereszt&uuml;l
</programlisting>

	<para>Ezek mellett val&oacute;sz&iacute;n&#251;leg
	  sz&uuml;ks&eacute;g&uuml;nk lesz a
	  <literal>BOOTP_NFSV3</literal>, <literal>BOOT_COMPAT</literal>
	  &eacute;s <literal>BOOTP_WIRED_TO</literal>
	  be&aacute;ll&iacute;t&aacute;sok megad&aacute;s&aacute;ra is
	  (l&aacute;sd a <filename>NOTES</filename>
	  &aacute;llom&aacute;nyt).</para>

	<para>A be&aacute;ll&iacute;t&aacute;sok nevei
	  r&eacute;gr&#245;l sz&aacute;rmaznak &eacute;s n&eacute;mileg
	  f&eacute;lrevezet&#245;ek lehetnek, mivel
	  val&oacute;j&aacute;ban semmit sem v&aacute;ltoztatnak a
	  rendszermagban lev&#245; <acronym>DHCP</acronym> vagy a BOOTP
	  rutinok haszn&aacute;lat&aacute;ban (egy&eacute;bk&eacute;nt
	  meg lehet adni vagy az egyik vagy a m&aacute;sik protokoll
	  kiz&aacute;r&oacute;l&aacute;gos haszn&aacute;lat&aacute;t
	  is).</para>

	<para>Ford&iacute;tsuk le a rendszermagot (l&aacute;sd <xref
	  linkend="kernelconfig">), &eacute;s m&aacute;soljuk a
	  <filename>dhcpd.conf</filename> &aacute;llom&aacute;nyban
	  megadott helyre.</para>

	<note>
	  <para>Amikor a <acronym>PXE</acronym> protokollt
	    haszn&aacute;ljuk, a rendszermagot nem fontos az
	    im&eacute;nt felsorolt param&eacute;terekkel
	    ford&iacute;tanunk (hab&aacute;r aj&aacute;nlatos).  Az
	    enged&eacute;lyez&eacute;s&uuml;kkel t&ouml;bb
	    <acronym>DHCP</acronym> k&eacute;r&eacute;s keletkezik a
	    rendszermag elindul&aacute;sa k&ouml;zben, ez&eacute;rt
	    kisebb a kock&aacute;zata annak, hogy a &man.pxeboot.8;
	    &aacute;ltal bizonyos esetekben megszerzett &eacute;s az
	    &uacute;j &eacute;rt&eacute;kek k&ouml;z&ouml;tt valamilyen
	    ellentmond&aacute;s j&ouml;n l&eacute;tre.  A
	    haszn&aacute;latuk egyik el&#245;nye, hogy &iacute;gy
	    mell&eacute;khat&aacute;sk&eacute;nt a
	    h&aacute;l&oacute;zati nev&uuml;nket is megkapjuk.
	    Ellenkez&#245; esetben erre is tal&aacute;lnunk kellene
	    valamilyen m&oacute;dot, p&eacute;ld&aacute;ul fenntartani
	    egy-egy <filename>rc.conf</filename> &aacute;llom&aacute;nyt
	    minden kliensen.</para>
	</note>

	<note>
	  <para>Az <application>Etherboot</application> csak akkor lesz
	    k&eacute;pes bet&ouml;lteni a rendszermagot, ha device
	    hinteket is be&eacute;p&iacute;t&uuml;nk.  Ezt a
	    k&ouml;vetkez&#245; be&aacute;ll&iacute;t&aacute;ssal tudjuk
	    megoldani (err&#245;l b&#245;vebben l&aacute;sd a
	    <filename>NOTES</filename> &aacute;llom&aacute;ny
	    megjegyz&eacute;seit):</para>

	  <programlisting>hints		"GENERIC.hints"</programlisting>
	</note>

      </sect3>

      <sect3>
	<title>A rendszerind&iacute;t&oacute;
	  &aacute;llom&aacute;nyrendszer
	  el&#245;k&eacute;sz&iacute;t&eacute;se</title>

	<indexterm>
	  <primary>rendszerind&iacute;t&oacute;
	    &aacute;llom&aacute;nyrendszer</primary>
	  <secondary>lemez n&eacute;lk&uuml;li
	    m&#251;k&ouml;d&eacute;s</secondary>
	</indexterm>

	<para>A <filename>dhcpd.conf</filename> &aacute;llom&aacute;ny
	  <literal>root-path</literal>
	  be&aacute;ll&iacute;t&aacute;s&aacute;nak megfelel&#245;en
	  hozzunk l&eacute;tre a rendszer
	  ind&iacute;t&aacute;s&aacute;ra alkalmas gy&ouml;k&eacute;r
	  &aacute;llom&aacute;nyrendszert.</para>

	<sect4>
	  <title>Az &aacute;llom&aacute;nyrendszer
	    felt&ouml;lt&eacute;se a <command>make world</command>
	    paranccsal</title>

	  <para>Ezzel a m&oacute;dszerrel a <envar>DESTDIR</envar>
	    k&ouml;nyvt&aacute;rba pillanatok alatt telep&iacute;teni
	    tudunk egy teljes sz&#251;z rendszert (&eacute;s nem csak a
	    rendszerind&iacute;t&oacute;
	    &aacute;llom&aacute;nyrendszert).  Ehhez mind&ouml;ssze csak
	    annyit kell tenni, hogy lefuttatjuk a k&ouml;vetkez&#245;
	    szkriptet:</para>

	  <programlisting>#!/bin/sh
export DESTDIR=/data/misc/diskless
mkdir -p ${DESTDIR}
cd /usr/src; make buildworld &amp;&amp; make buildkernel
make installworld &amp;&amp; make installkernel
cd /usr/src/etc; make distribution</programlisting>

	  <para>Miut&aacute;n v&eacute;gzett, m&aacute;r csak a
	    <envar>DESTDIR</envar> k&ouml;nyvt&aacute;rban
	    tal&aacute;lhat&oacute; <filename>/etc/rc.conf</filename>
	    &eacute;s <filename>/etc/fstab</filename>
	    &aacute;llom&aacute;nyokat kell az ig&eacute;nyeinkhez
	    igaz&iacute;tani.</para>

	</sect4>
      </sect3>

      <sect3>
	<title>A lapoz&oacute;ter&uuml;let
	  be&aacute;ll&iacute;t&aacute;sa</title>

	<para>Amennyiben sz&uuml;ks&eacute;ges, a szerveren
	  tal&aacute;lhat&oacute; lapoz&oacute;&aacute;llom&aacute;nyt
	  <acronym>NFS</acronym>-en kereszt&uuml;l el tudjuk
	  &eacute;rni.</para>

	<sect4>
	  <title>Lapoz&aacute;s <acronym>NFS</acronym>-sel</title>

	  <para>A rendszermag maga nem t&aacute;mogatja az
	    <acronym>NFS</acronym> alap&uacute; lapoz&aacute;s
	    enged&eacute;lyez&eacute;s&eacute;t a rendszer
	    ind&iacute;t&aacute;sakor.  A
	    lapoz&oacute;&aacute;llom&aacute;nyt ez&eacute;rt a
	    rendszerind&iacute;t&oacute; szkripteken kereszt&uuml;l
	    aktiv&aacute;ljuk, amelyekben csatlakoztatunk egy
	    &iacute;rhat&oacute; &aacute;llom&aacute;nyrendszert, ahol
	    l&eacute;trehozzuk &eacute;s enged&eacute;lyezz&uuml;k a
	    lapoz&oacute;&aacute;llom&aacute;nyt.  Tetsz&#245;leges
	    m&eacute;ret&#251; lapoz&oacute;&aacute;llom&aacute;nyt
	    p&eacute;ld&aacute;ul &iacute;gy tudunk
	    k&eacute;sz&iacute;teni:</para>

	  <screen>&prompt.root; <userinput>dd if=/dev/zero of=<replaceable>/a/lapoz&oacute;&aacute;llom&aacute;ny/helye</replaceable> bs=1k count=1 oseek=<replaceable>100000</replaceable></userinput></screen>

	  <para>Az enged&eacute;lyez&eacute;s&eacute;hez pedig a
	    k&ouml;vetkez&#245; sort kell felvenni az
	    <filename>rc.conf</filename>
	    &aacute;llom&aacute;nyba:</para>

	  <programlisting>swapfile=<replaceable>/a/lapoz&oacute;&aacute;llom&aacute;ny/helye</replaceable></programlisting>

	</sect4>
      </sect3>

      <sect3>
	<title>Egy&eacute;b probl&eacute;m&aacute;k</title>

	<sect4>
	  <title>&Iacute;r&aacute;sv&eacute;dett
	    <filename>/usr</filename> haszn&aacute;lata</title>

	  <indexterm>
	    <primary>lemez n&eacute;lk&uuml;li
	      m&#251;k&ouml;d&eacute;s</primary>
	    <secondary>&iacute;r&aacute;sv&eacute;dett /usr</secondary>
	  </indexterm>

	    <para>Ha a lemez n&eacute;lk&uuml;li
	      munka&aacute;llom&aacute;son X szervert akarunk futtatni,
	      akkor az <application>XDM</application>
	      konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nyait
	      kicsit m&oacute;dos&iacute;tanunk kell, mert
	      alap&eacute;rtelmez&eacute;s szerint a
	      <filename>/usr</filename> k&ouml;nyvt&aacute;rban hozza
	      l&eacute;tre a napl&oacute;kat.</para>

	</sect4>

	<sect4>
	  <title>Nem &os;-s szerver haszn&aacute;lata</title>

	  <para>Amikor a rendszer ind&iacute;t&aacute;s&aacute;hoz
	    haszn&aacute;lt &aacute;llom&aacute;nyrendszert nem egy &os;
	    alap&uacute; sz&aacute;m&iacute;t&oacute;g&eacute;pen
	    t&aacute;roljuk, akkor el&#245;sz&ouml;r ezt egy &os;-s
	    g&eacute;pen kell elk&eacute;sz&iacute;teni, majd a
	    <command>tar</command> vagy <command>cpio</command>
	    seg&iacute;ts&eacute;g&eacute;vel &aacute;tm&aacute;solni a
	    megfelel&#245; helyre.</para>

	  <para>Ilyen helyzetekben gyakran gondok ad&oacute;dhatnak
	    olyan speci&aacute;lis &aacute;llom&aacute;nyokkal, mint
	    p&eacute;ld&aacute;ul amelyek a <filename>/dev</filename>
	    k&ouml;nyvt&aacute;rban tal&aacute;lhat&oacute;ak, mivel a
	    f&#245;- &eacute;s aleszk&ouml;zazonos&iacute;t&oacute;k
	    t&aacute;rol&aacute;s&aacute;ra sz&aacute;nt m&eacute;ret
	    k&uuml;l&ouml;nb&ouml;zhet.  Ezt &uacute;gy oldhatjuk meg,
	    ha export&aacute;lunk egy k&ouml;nyvt&aacute;rat a nem &os;
	    alap&uacute; szerveren, ezt csatlakoztatjuk a &os;-s
	    g&eacute;pen, majd a &man.devfs.5;
	    seg&iacute;ts&eacute;g&eacute;vel a
	    eszk&ouml;zle&iacute;r&oacute;kat a
	    felhaszn&aacute;l&oacute; sz&aacute;m&aacute;ra
	    &eacute;szrev&eacute;tlen m&oacute;don foglaljuk le.</para>

	</sect4>
      </sect3>
    </sect2>
  </sect1>

  <sect1 id="network-isdn">
    <title>ISDN</title>

    <indexterm><primary>ISDN</primary></indexterm>

    <para>Az ISDN technol&oacute;giai &eacute;s hardveres
      h&aacute;tter&eacute;r&#245;l sokat megtudhatunk <ulink
      url="http://www.alumni.caltech.edu/~dank/isdn/">Dan Kegel
      ISDN-r&#245;l sz&oacute;l&oacute; oldal&aacute;n
      (angolul)</ulink>.</para>

    <para>Az ISDN haszn&aacute;lat&aacute;t r&ouml;viden &iacute;gy
      foglalhatn&aacute;nk &ouml;ssze:</para>

    <itemizedlist>
      <listitem>
	<para>Ha Eur&oacute;p&aacute;ban &eacute;l&uuml;nk, akkor minden
	  bizonnyal az ISDN k&aacute;rty&aacute;kkal foglalkoz&oacute;
	  szakaszt &eacute;rdemes elolvasnunk.</para>
      </listitem>

      <listitem>
	<para>Ha els&#245;sorban bet&aacute;rcs&aacute;z&oacute;s
	  ISDN-nel szeretn&eacute;nk csatlakozni az internetre egy
	  internet-szolg&aacute;ltat&oacute;n kereszt&uuml;l, akkor a
	  termin&aacute;l adaptereket t&aacute;rgyal&oacute; szakaszt
	  n&eacute;zz&uuml;k meg.  A szolg&aacute;ltat&oacute;k
	  v&aacute;lt&aacute;sakor ezzel j&aacute;r a legt&ouml;bb
	  rugalmass&aacute;g &eacute;s a legkevesebb
	  probl&eacute;ma.</para>
      </listitem>

      <listitem>
	<para>Ha k&eacute;t helyi h&aacute;l&oacute;zat
	  &ouml;sszek&ouml;t&eacute;s&eacute;re haszn&aacute;ljuk, vagy
	  az internethez egy b&eacute;relt ISDN vonalon kereszt&uuml;l
	  kapcsol&oacute;dunk, akkor egy &ouml;n&aacute;ll&oacute;
	  &uacute;tv&aacute;laszt&oacute; vagy h&aacute;l&oacute;zati
	  h&iacute;d be&aacute;ll&iacute;t&aacute;s&aacute;ban
	  &eacute;rdemes gondolkodnunk.</para>
      </listitem>
    </itemizedlist>

    <para>A k&ouml;lts&eacute;g fontos szerepet j&aacute;tszik az
      elfogadhat&oacute; megold&aacute;s
      kiv&aacute;laszt&aacute;s&aacute;ban.  A most k&ouml;vetkez&#245;
      lehet&#245;s&eacute;geket a legolcs&oacute;bbt&oacute;l indulva
      kezdj&uuml;k el felsorolni eg&eacute;szen a
      legdr&aacute;g&aacute;bbig.</para>

    <sect2 id="network-isdn-cards">
      <sect2info>
	<authorgroup>
	  <author>
	    <firstname>Hellmuth</firstname>
	    <surname>Michaelis</surname>
	    <contrib>K&eacute;sz&iacute;tette: </contrib>
	  </author>
	</authorgroup>
      </sect2info>

      <title>ISDN k&aacute;rty&aacute;k</title>

      <indexterm>
	<primary>ISDN</primary>
	<secondary>k&aacute;rty&aacute;k</secondary>
      </indexterm>

      <para>A &os;-ben megtal&aacute;lhat&oacute; ISDN
	implement&aacute;ci&oacute; csak a DSS1/Q.931 (m&aacute;s
	n&eacute;ven Euro-ISDN) szabv&aacute;ny szerint gy&aacute;rtott
	passz&iacute;v k&aacute;rty&aacute;kat t&aacute;mogatja.  Ismer
	azonban egyes olyan akt&iacute;v k&aacute;rty&aacute;kat is,
	amelyekn&eacute;l a firmware tov&aacute;bbi m&aacute;s
	jelkezel&eacute;si protokollokat is t&aacute;mogat.  Ilyen
	t&ouml;bbek k&ouml;zt az els&#245;k&eacute;nt t&aacute;mogatott
	Primary Rate (PRI) ISDN k&aacute;rtya.</para>

      <para>Az <application>isdn4bsd</application> szoftver
	seg&iacute;ts&eacute;g&eacute;vel kapcsol&oacute;dni tudunk
	m&aacute;s ISDN &uacute;tv&aacute;laszt&oacute;khoz IP-n
	kereszt&uuml;l a nyers HDLC felett, vagy szinkron PPP
	haszn&aacute;lat&aacute;val.  Mindezeket a rendszermagban
	tal&aacute;lhat&oacute; PPP-re vagy az
	<literal>isppp</literal>-re &eacute;p&iacute;tkezik.</para>

      <para>&os; alatt egyre t&ouml;bb PC-s ISDN k&aacute;rty&aacute;hoz
	k&eacute;sz&uuml;l el a t&aacute;mogat&aacute;s, &eacute;s a
	visszajelz&eacute;sek azt mutatj&aacute;k, hogy
	Eur&oacute;p&aacute;ban &eacute;s a vil&aacute;g minden
	r&eacute;sz&eacute;n sikerrel haszn&aacute;lj&aacute;k
	ezeket.</para>

      <para>A passz&iacute;v ISDN k&aacute;rty&aacute;k k&ouml;z&uuml;l
	is legink&aacute;bb az Infineon (kor&aacute;bban Siemens)
	gy&aacute;rtm&aacute;ny&uacute; ISAC/HSCX/IPAC ISDN
	chipk&eacute;szletek t&aacute;mogatottak, de a Cologne chippel
	rendelkez&#245; (de csak ISA buszos) ISDN k&aacute;rty&aacute;k,
	a Winbond W6692 chipes PCI buszos k&aacute;rty&aacute;k,
	&eacute;s a Tiger300/320/ISAC chipk&eacute;szletek egyes
	v&aacute;ltozatai, valamint n&eacute;h&aacute;ny
	gy&aacute;rt&oacute;f&uuml;gg&#245; chipk&eacute;szlettel
	rendelkez&#245; k&aacute;rtya, mint p&eacute;ld&aacute;ul az AVM
	Fritz!Card PCI V.1.0 &eacute;s az AVM Fritz!Card PnP is
	remek&uuml;l m&#251;k&ouml;dik.</para>

      <para>Jelenleg a k&ouml;vetkez&#245; akt&iacute;v ISDN
	k&aacute;rty&aacute;kat t&aacute;mogatja a rendszer: AVM B1 (ISA
	&eacute;s PCI) BRI k&aacute;rty&aacute;k &eacute;s az AVM T1 PCI
	PRI k&aacute;rty&aacute;k.</para>

      <para>Az <application>isdn4bsd</application>
	dokument&aacute;ci&oacute;j&aacute;t a rendszer&uuml;nk&ouml;n
	bel&uuml;l a <filename>/usr/share/examples/isdn/</filename>
	k&ouml;nyvt&aacute;rban tal&aacute;lhatjuk meg, vagy
	k&ouml;zvetlen&uuml;l <ulink
	url="http://www.freebsd-support.de/i4b/">az isdn4bsd
	honlapj&aacute;n</ulink>, ahol t&ouml;bb hivatkoz&aacute;st is
	tal&aacute;lunk tippekre, hibajegyz&eacute;kekre &eacute;s
	b&#245;s&eacute;gesebb dokument&aacute;ci&oacute;ra,
	p&eacute;ld&aacute;ul <ulink
	url="http://people.FreeBSD.org/~hm/">az isdn4bsd saj&aacute;t
	k&eacute;zik&ouml;nyv&eacute;re</ulink>.</para>

      <para>Ha szeretn&eacute;nk egy m&aacute;sik ISDN protokoll
	t&aacute;mogat&aacute;s&aacute;nak
	kifejleszt&eacute;s&eacute;ben r&eacute;sztvenni, vagy egy
	jelenleg m&eacute;g nem t&aacute;mogatott ISDN
	k&aacute;rty&aacute;t haszn&aacute;lhat&oacute;v&aacute; tenni,
	esetleg valamilyen m&aacute;s m&oacute;don seg&iacute;teni az
	<application>isdn4bsd</application> &uuml;gy&eacute;t,
	vegy&uuml;k fel a kapcsolatot &a.hm; fejleszt&#245;vel.</para>

      <para>Az <application>isdn4bsd</application>
	telep&iacute;t&eacute;s&eacute;vel,
	be&aacute;ll&iacute;t&aacute;s&aacute;val &eacute;s
	hibaelh&aacute;r&iacute;t&aacute;s&aacute;val kapcsolatos
	k&eacute;rd&eacute;seinket a &a.isdn.name; levelez&eacute;si
	list&aacute;n tehetj&uuml;k fel.</para>

    </sect2>

    <sect2>
      <title>ISDN termin&aacute;l adapterek</title>

      <para>Az ISDN sz&aacute;m&aacute;ra olyanok a termin&aacute;l
	adapterek, mint a hagyom&aacute;nyos telefonvonalak
	sz&aacute;m&aacute;ra a modemek.</para>

      <indexterm><primary>modem</primary></indexterm>

      <para>A legt&ouml;bb termin&aacute;l adapter a Hayes-modemek
	szabv&aacute;nyos AT parancsk&eacute;szlet&eacute;t
	haszn&aacute;lja, &eacute;s k&ouml;nnyen be lehet iktatni egy
	modem helyett.</para>

      <para>A termin&aacute;l adapterek alapvet&#245;en ugyan&uacute;gy
	m&#251;k&ouml;dnek, mint a modemek, kiv&eacute;ve, hogy egy
	&aacute;tlagos modemn&eacute;l j&oacute;val nagyobb
	adat&aacute;tviteli sebess&eacute;gre k&eacute;pesek.
	Ez&eacute;rt a <link linkend="ppp">PPP</link> kapcsolatunkat
	pontosan ugyan&uacute;gy kell be&aacute;ll&iacute;tani, mint a
	modemek eset&eacute;ben.  Ne felejts&uuml;k a soros pont
	sebess&eacute;g&eacute;t a maxim&aacute;lis
	&eacute;rt&eacute;kre &aacute;ll&iacute;tani.</para>

      <indexterm><primary>PPP</primary></indexterm>

      <para>A termin&aacute;l adapterek haszn&aacute;lat&aacute;nak
	egyik legnagyobb el&#245;nye, hogy
	seg&iacute;ts&eacute;g&uuml;kkel dinamikus PPP-n kereszt&uuml;l
	tudunk az internet-szolg&aacute;ltat&oacute;nkhoz
	kapcsol&oacute;dni.  Mivel az IP-c&iacute;mtartom&aacute;ny
	egyre ink&aacute;bb sz&#251;k&ouml;sebb, a legt&ouml;bb
	szolg&aacute;ltat&oacute; nem sz&iacute;vesen oszt ki
	b&aacute;rkinek is statikus IP-c&iacute;met.  A legt&ouml;bb
	&ouml;n&aacute;ll&oacute; &uacute;tv&aacute;laszt&oacute;
	azonban nem k&eacute;pes alkalmazkodni az IP-c&iacute;mek
	dinamikus kioszt&aacute;s&aacute;hoz.</para>

      <para>A termin&aacute;l adapter az el&eacute;rhet&#245;
	lehet&#245;s&eacute;geket &eacute;s a kapcsolat
	stabilit&aacute;s&aacute;t tekintve teljesen a PPP
	d&eacute;mont&oacute;l f&uuml;gg.  Emiatt egy &os;-s
	g&eacute;pet k&ouml;nny&#251; modemr&#245;l
	&aacute;t&aacute;ll&iacute;tani az ISDN
	haszn&aacute;lat&aacute;ra, ha m&aacute;r egyszer
	be&aacute;ll&iacute;tottuk a PPP d&eacute;mont.  Ezzel
	egy&uuml;tt azonban a PPP haszn&aacute;lata sor&aacute;n
	tapasztalt probl&eacute;m&aacute;k ugyan&uacute;gy ism&eacute;t
	felmer&uuml;lnek.</para>

      <para>Ha a maxim&aacute;lis stabilit&aacute;sra van
	sz&uuml;ks&eacute;g&uuml;nk, akkor a rendszermag <link
	linkend="ppp">PPP</link> be&aacute;ll&iacute;t&aacute;s&aacute;t
	haszn&aacute;ljuk, &eacute;s ne a <link
	linkend="userppp">felhaszn&aacute;l&oacute;i PPP
	megold&aacute;st</link>.</para>

      <para>A &os; hivatalosan az al&aacute;bbi termin&aacute;l
	adaptereket ismeri:</para>

      <itemizedlist>
	<listitem>
	  <para>Motorola&nbsp;BitSurfer &eacute;s
	    Bitsurfer&nbsp;Pro</para>
	</listitem>

	<listitem>
	  <para>Adtran</para>
	</listitem>
      </itemizedlist>

      <para>Val&oacute;sz&iacute;n&#251;leg a t&ouml;bbi termin&aacute;l
	adapterrel is k&eacute;pes egy&uuml;ttm&#251;k&ouml;dni, mivel a
	termin&aacute;l adapterek gy&aacute;rt&oacute;i
	&aacute;ltal&aacute;ban igyekeznek a term&eacute;keiket a
	szabv&aacute;nyos modemes AT parancsk&eacute;szlet&eacute;vel
	kompatibiliss&aacute; tenni.</para>

      <para>Az igazi probl&eacute;ma a k&uuml;ls&#245; termin&aacute;l
	adapterekkel ad&oacute;dik, mivel, ak&aacute;rcsak a modemek
	eset&eacute;ben, egy nagyon j&oacute; soros
	k&aacute;rty&aacute;t ig&eacute;nyelnek.</para>

      <para>A soros eszk&ouml;z&ouml;k
	m&#251;k&ouml;d&eacute;s&eacute;nek r&eacute;szleteit valamint
	az aszinkron &eacute;s szinkron soros portok k&ouml;zti
	k&uuml;l&ouml;nbs&eacute;geket a <ulink
	url="&url.articles.serial-uart.en;/index.html">&os; soros
	hardverekr&#245;l</ulink> sz&oacute;l&oacute; cikk&eacute;ben
	olvashatjuk.</para>

      <para>A termin&aacute;l adaptereken kereszt&uuml;l
	el&eacute;rhet&#245; sebess&eacute;get a PC-kben
	tal&aacute;lhat&oacute; szabv&aacute;nyos (aszinkron) soros port
	115,2&nbsp;Kb/mp-re korl&aacute;tozza, m&eacute;g
	128&nbsp;Kb/mp-es adat&aacute;tvitel&#251; kapcsolatok
	eset&eacute;ben is.  Az ISDN &aacute;ltal ny&uacute;jtott
	128&nbsp;Kb/mp kihaszn&aacute;l&aacute;s&aacute;hoz a
	termin&aacute;l adaptert egy szinkron soros
	k&aacute;rty&aacute;val kell &ouml;sszek&ouml;tn&uuml;nk.</para>

      <para>Ne higyj&uuml;k, hogy egy bels&#245; termin&aacute;l adapter
	megv&aacute;s&aacute;rl&aacute;s&aacute;val
	megmenek&uuml;l&uuml;nk ett&#245;l a gondt&oacute;l.  A
	bels&#245; termin&aacute;l adapterekbe egyszer&#251;en csak egy
	sima szabv&aacute;nyos PC-s soros portot &eacute;p&iacute;tettek
	bele.  Mind&ouml;ssze egy soros k&aacute;belt &eacute;s egy
	konnektort takar&iacute;tunk meg vel&uuml;k.</para>

      <para>A termin&aacute;l adapterhez csatlakoz&oacute; szinkron
	k&aacute;rty&aacute;k legal&aacute;bb olyan gyorsak, mint egy
	&ouml;n&aacute;ll&oacute; &uacute;tv&aacute;laszt&oacute;,
	&eacute;s egy egyszer&#251; 386-osra &eacute;p&uuml;l&#245; &os;
	rendszerrel tal&aacute;n m&eacute;g rugalmasabban is
	kezelhet&#245;ek.</para>

      <para>A termin&aacute;l adapter plusz szinkron k&aacute;rtya
	kontra &ouml;n&aacute;ll&oacute; &uacute;tv&aacute;laszt&oacute;
	k&eacute;rd&eacute;se m&aacute;r
	hitk&eacute;rd&eacute;ss&eacute; fajult, amir&#245;l igen sokat
	vitatkoztak szerte a levelez&eacute;si list&aacute;kon.  A
	teljes okfejt&eacute;s elolvas&aacute;s&aacute;hoz az <ulink
	url="&url.base;/search/index.html">arch&iacute;vum</ulink>
	b&ouml;ng&eacute;sz&eacute;s&eacute;t javasoljuk.</para>

    </sect2>

    <sect2>
      <title>&Ouml;n&aacute;ll&oacute; ISDN h&aacute;l&oacute;zati hidak
	&eacute;s &uacute;tv&aacute;laszt&oacute;k</title>

      <indexterm>
	<primary>ISDN</primary>
	<secondary>&ouml;n&aacute;ll&oacute; h&aacute;l&oacute;zati
	  hidak &eacute;s &uacute;tv&aacute;laszt&oacute;k</secondary>
      </indexterm>

      <para>Az ISDN hidak vagy &uacute;tv&aacute;laszt&oacute;k nem
	eg&eacute;szen a &os; vagy oper&aacute;ci&oacute;s rendszerek
	ter&uuml;let&eacute;hez tartoznak.  Az
	&uacute;tv&aacute;laszt&aacute;s &eacute;s a
	h&aacute;l&oacute;zatok hidak alapjainak a
	sz&aacute;m&iacute;t&oacute;g&eacute;pes
	h&aacute;l&oacute;zatokr&oacute;l sz&oacute;l&oacute;
	szakirodalomban j&aacute;rhatunk ut&aacute;na.</para>

      <para>Ebben a szakaszban a h&aacute;l&oacute;zati h&iacute;d
	&eacute;s az &uacute;tv&aacute;laszt&oacute;
	kifejez&eacute;seket egym&aacute;s
	szinon&iacute;m&aacute;jak&eacute;nt fogjuk
	haszn&aacute;lni.</para>

      <para>Ahogy az olcs&oacute;bb ISDN
	&uacute;tv&aacute;laszt&oacute;k &eacute;s hidak &aacute;rai
	egyre jobban cs&ouml;kkennek, ez&eacute;rt egyre ink&aacute;bb
	n&eacute;pszer&#251;bb&eacute; v&aacute;lnak.  Az ISDN
	&uacute;tv&aacute;laszt&oacute; egy apr&oacute; doboz, amelyet
	k&ouml;zvetlen&uuml;l a helyi Ethernet
	h&aacute;l&oacute;zatunkra tudunk csatlakoztatni, &eacute;s a
	t&ouml;bbi &uacute;tv&aacute;laszt&oacute;hoz vagy h&iacute;dhoz
	kapcsol&oacute;dik.  A benne tal&aacute;lhat&oacute; szoftverrel
	k&eacute;pes kommunik&aacute;lni a PPP vagy m&aacute;s
	egy&eacute;b n&eacute;pszer&#251; protokollokon
	kereszt&uuml;l.</para>

      <para>Az &uacute;tv&aacute;laszt&oacute; egy szabv&aacute;nyos
	termin&aacute;l adaptern&eacute;l sokkal nagyobb
	adat&aacute;tvitelt tesz lehet&#245;v&eacute;, mivel a teljes
	szinkron ISDN kapcsolatot k&eacute;pes
	kihaszn&aacute;lni.</para>

      <para>Az ISDN &uacute;tv&aacute;laszt&oacute;kkal &eacute;s
	hidakkal kapcsolatban az egyik legnagyobb
	probl&eacute;m&aacute;t a k&uuml;l&ouml;nb&ouml;z&#245;
	gy&aacute;rt&oacute;k k&ouml;zti elt&eacute;r&eacute;sek
	jelenthetik.  Ha egy szolg&aacute;ltat&oacute;hoz akarunk ezen a
	m&oacute;don csatlakozni, akkor &eacute;rdemes el&#245;zetesen
	egyeztetni az ig&eacute;nyeinket vel&uuml;k.</para>

      <para>Ha k&eacute;t helyi h&aacute;l&oacute;zati szegmenst akarunk
	&ouml;sszekapcsolni, mint p&eacute;ld&aacute;ul az otthoni
	&eacute;s az irodai h&aacute;l&oacute;zatot, akkor ez a
	megold&aacute;s j&aacute;r a legkevesebb karbantart&aacute;si
	k&ouml;lts&eacute;ggel.  Mivel ekkor mi magunk
	v&aacute;s&aacute;roljuk a kapcsolat mind a k&eacute;t
	oldal&aacute;ra a felszerel&eacute;st, biztosak lehet&uuml;nk
	benne, hogy az &iacute;gy l&eacute;trehozott
	&ouml;sszek&ouml;tett&eacute;s m&#251;k&ouml;dni fog.</para>

      <para>P&eacute;ld&aacute;ul, ha egy otthon vagy a v&aacute;llalat
	egy fi&oacute;kj&aacute;n&aacute;l lev&#245; g&eacute;pet
	akarjuk &ouml;sszek&ouml;tni az igazgat&oacute;s&aacute;g
	h&aacute;l&oacute;zat&aacute;val, akkor a k&ouml;vetkez&#245;
	fel&aacute;ll&aacute;st &eacute;rdemes
	k&ouml;vetn&uuml;nk:</para>

      <example>
	<title>Egy otthoni vagy egy fi&oacute;kbeli
	  h&aacute;l&oacute;zat</title>

	<indexterm><primary>10 Base 2</primary></indexterm>

	<para>A h&aacute;l&oacute;zat busz
	  topol&oacute;gi&aacute;j&uacute; &eacute;s 10 Base 2
	  Ethernetet haszn&aacute;l (<quote>thinnet</quote>).  Ha
	  sz&uuml;ks&eacute;ges, akkor az
	  &uacute;tv&aacute;laszt&oacute;t egy AUI/10BT
	  ad&oacute;-vev&#245;vel csatlakoztassuk a
	  h&aacute;l&oacute;zati k&aacute;belre.</para>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="advanced-networking/isdn-bus">
	  </imageobject>

	  <textobject>
	    <literallayout class="monospaced">---Sun munka&aacute;llom&aacute;s
|
---&os;
|
---Windows 95
|
az &ouml;n&aacute;ll&oacute; &uacute;tv&aacute;laszt&oacute;
   |
ISDN BRI vonal</literallayout>
          </textobject>

	  <textobject>
	    <phrase>10 Base 2 Ethernet</phrase>
	  </textobject>
	</mediaobject>

	<para>Ha az otthoni vagy fi&oacute;kbeli
	  sz&aacute;m&iacute;t&oacute;g&eacute;p az egyed&uuml;li, akkor
	  egy keresztk&ouml;t&eacute;s&#251; sodrott &eacute;rp&aacute;r
	  k&aacute;bellel ak&aacute;r k&ouml;zvetlen&uuml;l is
	  csatlakozhatunk az &uacute;tv&aacute;laszt&oacute;hoz.</para>
      </example>

      <example>
	<title>Az igazgat&oacute;s&aacute;gi iroda vagy egy m&aacute;sik
	  helyi h&aacute;l&oacute;zat</title>

	<indexterm><primary>10 Base T</primary></indexterm>

	<para>A h&aacute;l&oacute;zat csillag
	  topol&oacute;gi&aacute;j&uacute;, &eacute;s 10 Base T Ethernet
	  k&aacute;belez&eacute;s&#251; (<quote>sodrott
	  &eacute;rp&aacute;r</quote>).</para>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="advanced-networking/isdn-twisted-pair">
	  </imageobject>

	  <textobject>
	    <literallayout class="monospaced">    -------Novell szerver
    | H |
    |   ---Sun
    |   |
    | U ---&os;
    |   |
    |   ---Windows 95
    | B |
    |___---az &ouml;n&aacute;ll&oacute; &uacute;tv&aacute;laszt&oacute;
                |
        ISDN BRI vonal</literallayout>
	  </textobject>

	  <textobject>
	    <phrase>Az ISDN h&aacute;l&oacute;zat
	      fel&eacute;p&iacute;t&eacute;se</phrase>
	  </textobject>
	</mediaobject>
      </example>

      <para>A legt&ouml;bb &uacute;tv&aacute;laszt&oacute;/h&iacute;d
	el&#245;nye, hogy <emphasis>egyszerre</emphasis> 2
	<emphasis>egym&aacute;st&oacute;l f&uuml;ggetlen</emphasis> PPP
	kapcsolatot tudunk fel&eacute;p&iacute;teni vel&uuml;k 2
	egym&aacute;st&oacute;l f&uuml;ggetlen g&eacute;ppel.  Ezt a
	legt&ouml;bb termin&aacute;l adapter nem t&aacute;mogatja,
	kiv&eacute;ve azok a (&aacute;ltal&aacute;ban dr&aacute;ga)
	t&iacute;pusok, amelyek k&eacute;t soros porttal rendelkeznek.
	Ezt ne t&eacute;vessz&uuml;k &ouml;ssze a csatorn&aacute;k
	nyal&aacute;bol&aacute;s&aacute;val, az MPP-vel &eacute;s a
	t&ouml;bbivel.</para>

      <para>Ez nagyon hasznos lehet p&eacute;ld&aacute;ul olyan
	esetekben, amikor van egy dedik&aacute;lt ISDN kapcsolatunk az
	irod&aacute;ban, amelyet ugyan szeretn&eacute;nk megcsapolni, de
	nem szeretn&eacute;nk a m&aacute;sik ISDN vonalat is elrabolni.
	Az irod&aacute;ban lev&#245; A &uacute;tv&aacute;laszt&oacute;
	k&eacute;pes a dedik&aacute;lt B csatorn&aacute;j&uacute;
	kapcsolaton (64&nbsp;Kb/mp) kereszt&uuml;l el&eacute;rni az
	internetet, mik&ouml;zben a m&aacute;sik B csatorn&aacute;t
	ett&#245;l f&uuml;ggetlen adatkapcsolatra haszn&aacute;lja.  A
	m&aacute;sodik B csatorna &iacute;gy haszn&aacute;lhat&oacute;
	bet&aacute;rcs&aacute;z&aacute;sra,
	kit&aacute;rcs&aacute;z&aacute;sra vagy a m&aacute;sik B
	csatorn&aacute;val egy&uuml;tt dinamikus
	nyal&aacute;bol&aacute;sra (MPP stb.) a nagyobb
	s&aacute;vsz&eacute;less&eacute;g el&eacute;r&eacute;se
	&eacute;rdek&eacute;ben.</para>

      <indexterm><primary>IPX/SPX</primary></indexterm>

      <para>Az Ethernetes h&iacute;d nem IP alap&uacute; forgalmat is
	k&eacute;pes tov&aacute;bb&iacute;tani, ez&eacute;rt rajta
	kereszt&uuml;l ak&aacute;r IPX vagy SPX &eacute;s m&aacute;s
	egy&eacute;b protokollokat is haszn&aacute;lni tudunk.</para>

    </sect2>
  </sect1>

  <sect1 id="network-natd">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Chern</firstname>
	  <surname>Lee</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>H&aacute;l&oacute;zati
      c&iacute;mford&iacute;t&aacute;s</title>

    <sect2 id="network-natoverview">
      <title>&Aacute;ttekint&eacute;s</title>

      <indexterm><primary><application>natd</application></primary></indexterm>

      <para>A &os; h&aacute;l&oacute;zati
	c&iacute;mford&iacute;t&aacute;s&eacute;rt felel&#245;s
	d&eacute;monprogramja, a &man.natd.8; (Network Address
	Translation daemon), a be&eacute;rkez&#245; nyers IP csomagokat
	dolgozza fel, &eacute;s a helyi g&eacute;pek
	forr&aacute;sc&iacute;m&eacute;t kicser&eacute;lve
	visszailleszti ezeket a csomagokat a kimen&#245; folyamba.  A
	&man.natd.8; mindezt &uacute;gy teszi a forr&aacute;s
	IP-c&iacute;mekkel &eacute;s portokkal, hogy amikor az adat
	vissza&eacute;rkezik, akkor k&eacute;pes lesz megmondani a
	csomag eredeti k&uuml;ld&#245;j&eacute;t &eacute;s
	visszak&uuml;ldeni neki a v&aacute;laszt.</para>

      <indexterm><primary>internet-kapcsolat
	megoszt&aacute;sa</primary></indexterm>
      <indexterm><primary>NAT</primary></indexterm>

      <para>A h&aacute;l&oacute;zati c&iacute;mford&iacute;t&aacute;st
	&aacute;ltal&aacute;ban az internet-kapcsolatok
	megoszt&aacute;s&aacute;n&aacute;l alkalmazzuk.</para>

    </sect2>

    <sect2 id="network-natsetup">
      <title>A h&aacute;l&oacute;zat
	fel&eacute;p&iacute;t&eacute;se</title>

      <para>Az IPv4 vil&aacute;g&aacute;ban egyre jobban fogy&oacute;
	IP-c&iacute;mek &eacute;s az egyre n&ouml;vekv&#245;
	sz&aacute;m&uacute;, nagysebess&eacute;gre v&aacute;gy&oacute;,
	p&eacute;ld&aacute;ul k&aacute;beles vagy DSL-es
	fogyaszt&oacute;k miatt az ig&eacute;ny is egyre nagyobb az
	internet-kapcsolatok megoszt&aacute;s&aacute;ra.  Ha t&ouml;bb
	sz&aacute;m&iacute;t&oacute;g&eacute;ppel szeretn&eacute;nk
	egyetlen kapcsolaton &eacute;s egy IP-c&iacute;men
	kereszt&uuml;l kapcsol&oacute;dni az internetre, akkor ehhez a
	&man.natd.8; t&ouml;k&eacute;letes
	v&aacute;laszt&aacute;s.</para>

      <para>Az esetek t&ouml;bbs&eacute;g&eacute;ben a
	felhaszn&aacute;l&oacute;k egy k&aacute;beles vagy DSL vonalra
	csatlakoznak, melyhez egyetlen IP-c&iacute;m tartozik, &eacute;s
	ezen a g&eacute;pen kereszt&uuml;l szeretn&eacute;k
	el&eacute;rni az internetet a helyi h&aacute;l&oacute;zaton
	lev&#245; t&ouml;bbi g&eacute;pr&#245;l.</para>

      <para>Ezt &uacute;gy tudjuk el&eacute;rni, ha az internethez
	kapcsol&oacute;d&oacute; &os;-s g&eacute;pet
	&aacute;tj&aacute;r&oacute;nak &aacute;ll&iacute;tjuk be.  Ebben
	az &aacute;tj&aacute;r&oacute;ban legal&aacute;bb k&eacute;t
	h&aacute;l&oacute;zati fel&uuml;letnek kell l&eacute;teznie
	&mdash; az egyikkel az internetes
	&uacute;tv&aacute;laszt&oacute;hoz, a m&aacute;sikkal pedig a
	helyi h&aacute;l&oacute;zathoz kapcsol&oacute;dik.  A bels&#245;
	h&aacute;l&oacute;zaton lev&#245; g&eacute;pek egy hub vagy egy
	switch seg&iacute;ts&eacute;g&eacute;vel csatlakoznak
	egym&aacute;shoz.</para>

      <note>
	<para>T&ouml;bb m&oacute;don is el tudjuk &eacute;rni a
	  bels&#245; h&aacute;l&oacute;zatr&oacute;l az internetet egy
	  &os;-s &aacute;tj&aacute;r&oacute;n kereszt&uuml;l.  Ebben a
	  p&eacute;ld&aacute;ban most csak olyan
	  &aacute;tj&aacute;r&oacute;kkal foglalkozunk, amelyekben
	  legal&aacute;bb k&eacute;t h&aacute;l&oacute;zati
	  k&aacute;rtya tal&aacute;lhat&oacute;.</para>
      </note>

      <mediaobject>
	<imageobject>
	  <imagedata fileref="advanced-networking/natd">
	</imageobject>

	<textobject>
	  <literallayout class="monospaced">  _______       __________       ________
 |       |     |          |     |        |
 |  Hub  |-----| B kliens |-----| &Uacute;tv&aacute;l. |----- Internet
 |_______|     |__________|     |________|
     |
 ____|_____
|          |
| A kliens |
|__________|</literallayout>
        </textobject>

	<textobject>
	  <phrase>A h&aacute;l&oacute;zat feloszt&aacute;sa</phrase>
	</textobject>
      </mediaobject>

      <para>Egy ehhez hasonl&oacute; be&aacute;ll&iacute;t&aacute;s igen
	gyakori a megosztott internet-kapcsolatok eset&eacute;ben.  A
	helyi h&aacute;l&oacute;zat egyik g&eacute;pe csatlakozik az
	internetre.  A t&ouml;bbi g&eacute;p ezen az
	<quote>&aacute;tj&aacute;r&oacute;n</quote> kereszt&uuml;l
	&eacute;ri el az internetet.</para>
    </sect2>

    <sect2 id="network-netdloaderconfiguration">
      <indexterm>
	<primary>rendszerbet&ouml;lt&#245;</primary>
	<secondary>be&aacute;ll&iacute;t&aacute;sa</secondary>
      </indexterm>

      <title>A rendszerbet&ouml;lt&#245;
	be&aacute;ll&iacute;t&aacute;sa</title>

      <para>A &man.natd.8; m&#251;k&ouml;d&eacute;s&eacute;hez
	sz&uuml;ks&eacute;ges c&iacute;mford&iacute;t&aacute;si
	t&aacute;mogat&aacute;st a <filename>GENERIC</filename>
	t&iacute;pus&uacute; rendszermagok nem tartalmazz&aacute;k,
	viszont a <filename>/boot/loader.conf</filename> megfelel&#245;
	param&eacute;terez&eacute;s&eacute;vel a rendszer
	bet&ouml;lt&eacute;se k&ouml;zben ezt hozz&aacute; tudjuk
	adni:</para>

      <programlisting>ipfw_load="YES"
ipdivert_load="YES"</programlisting>

      <para>Valamint a <varname>net.inet.ip.fw.default_to_accept</varname>
	vltozt lltsuk az <literal>1</literal> rtkre.</para>

      <programlisting>net.inet.ip.fw.default_to_accept="1"</programlisting>

      <note>
	<para>Ez ut&oacute;bbi be&aacute;ll&iacute;t&aacute;st
	  legink&aacute;bb a t&#251;zfal &eacute;s a
	  c&iacute;mford&iacute;t&aacute;st v&eacute;gz&#245;
	  &aacute;tj&aacute;r&oacute;
	  pr&oacute;b&aacute;lgat&aacute;sakor &eacute;rdemes
	  alkalmazni.  Ilyenkor ugyanis az &man.ipfw.8;
	  alap&eacute;rtelmezett m&oacute;don az <literal>allow ip from
	  any to any</literal> (minden forgalom enged&eacute;lyezett)
	  szab&aacute;lyt k&ouml;veti, &eacute;s nem pedig a
	  kev&eacute;sb&eacute; bar&aacute;ts&aacute;gos <literal>deny
	  ip from any to any</literal> (minden forgalom tiltott)
	  szab&aacute;lyt.  A rendszer
	  &uacute;jraind&iacute;t&aacute;sakor &iacute;gy valamivel
	  nehezebb lesz kiz&aacute;rnunk magunkat a szab&aacute;lyok
	  megad&aacute;sa sor&aacute;n.</para>
      </note>
    </sect2>

    <sect2 id="network-natdkernconfiguration">
      <indexterm>
	<primary>rendszermag</primary>
	<secondary>be&aacute;ll&iacute;t&aacute;sa</secondary>
      </indexterm>

      <title>A rendszermag be&aacute;ll&iacute;t&aacute;sa</title>

      <para>Amikor viszont nincs lehet&#245;s&eacute;g&uuml;nk modulok
	haszn&aacute;lat&aacute;ra, vagy szeretn&eacute;nk minden
	ig&eacute;nyelt funkci&oacute;t be&eacute;p&iacute;teni a
	rendszermagba, akkor a rendszermag
	be&aacute;ll&iacute;t&aacute;sait tartalmaz&oacute;
	&aacute;llom&aacute;nyban a k&ouml;vetkez&#245;ket kell
	megadnunk:</para>

      <programlisting>options IPFIREWALL
options IPDIVERT</programlisting>

      <para>A fentiek mellett m&eacute;g ezeket a
	lehet&#245;s&eacute;geket tudjuk v&aacute;lasztani:</para>

      <programlisting>options IPFIREWALL_DEFAULT_TO_ACCEPT
options IPFIREWALL_VERBOSE</programlisting>
    </sect2>

    <sect2 id="network-natdsystemconfiguration">
      <title>A rendszerind&iacute;t&aacute;s
	be&aacute;ll&iacute;t&aacute;sa</title>

      <para>A t&#251;zfal &eacute;s a h&aacute;l&oacute;zati
	c&iacute;mford&iacute;t&aacute;s
	beind&iacute;t&aacute;s&aacute;hoz a k&ouml;vetkez&#245;knek
	kell az <filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyban lennie:</para>

      <programlisting>gateway_enable="YES" <co id="co-natd-gateway-enable">
firewall_enable="YES" <co id="co-natd-firewall-enable">
firewall_type="OPEN" <co id="co-natd-firewall-type">
natd_enable="YES"
natd_interface="<replaceable>fxp0</replaceable>" <co id="co-natd-natd-interface">
natd_flags="" <co id="co-natd-natd-flags"></programlisting>

      <calloutlist>
	<callout arearefs="co-natd-gateway-enable">
	  <para>A g&eacute;pet &aacute;tj&aacute;r&oacute;nak
	    &aacute;ll&iacute;tja be.  Hat&aacute;sa megegyezik a
	    <command>sysctl net.inet.ip.forwarding=1</command> parancs
	    kiad&aacute;s&aacute;val.</para>
	</callout>

	<callout arearefs="co-natd-firewall-enable">
	  <para>A rendszer ind&iacute;t&aacute;sakor enged&eacute;lyezi
	    az <filename>/etc/rc.firewall</filename>
	    &aacute;llom&aacute;nyban szerepl&#245;
	    t&#251;zfalszab&aacute;lyok
	    haszn&aacute;lat&aacute;t.</para>
	</callout>

	<callout arearefs="co-natd-firewall-type">
	  <para>Egy olyan el&#245;re defini&aacute;lt t&#251;zfalat ad
	    meg, amely alapb&oacute;l mindent beenged.  Az
	    <filename>/etc/rc.firewall</filename>
	    &aacute;llom&aacute;nyban tal&aacute;lhatjuk a t&ouml;bbi
	    t&iacute;pust.</para>
	</callout>

	<callout arearefs="co-natd-natd-interface">
	  <para>Megadja, hogy melyik fel&uuml;leten
	    tov&aacute;bb&iacute;tsunk csomagokat az internet
	    fel&eacute; (ez a fel&uuml;let csatlakozik az
	    internetre).</para>
	</callout>

	<callout arearefs="co-natd-natd-flags">
	  <para>Itt szerepel minden tov&aacute;bbi param&eacute;ter,
	    amelyet m&eacute;g az ind&iacute;t&aacute;skor &aacute;t
	    kell adnunk a &man.natd.8; d&eacute;monnak.</para>
	</callout>
      </calloutlist>

      <para>Amikor megadjuk ezeket a be&aacute;ll&iacute;t&aacute;sokat
	az <filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyban,
	pontosan ugyanaz t&ouml;rt&eacute;nik, mintha a <command>natd
	-interface fxp0</command> parancsot adtunk volna ki a rendszer
	ind&iacute;t&aacute;sakor.  Ez teh&aacute;t manu&aacute;lisan is
	elind&iacute;that&oacute;.</para>

      <note>
	<para>Ha t&uacute;ls&aacute;gosan sok param&eacute;tert akarunk
	  egyszerre be&aacute;ll&iacute;tani &man.natd.8;
	  haszn&aacute;lat&aacute;hoz, akkor ak&aacute;r egy
	  k&uuml;l&ouml;n konfigur&aacute;ci&oacute;s
	  &aacute;llom&aacute;nyt is megadhatunk.  Ebben az esetben a
	  konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nyt a
	  k&ouml;vetkez&#245; m&oacute;don kell megjel&ouml;lni az
	  <filename>/etc/rc.conf</filename>
	  &aacute;llom&aacute;nyban:</para>

	<programlisting>natd_flags="-f /etc/natd.conf"</programlisting>

	<para>Ekkor a <filename>/etc/natd.conf</filename>
	  &aacute;llom&aacute;ny fogja tartalmazni a
	  be&aacute;ll&iacute;t&aacute;sokat, soronk&eacute;nt egyet.
	  P&eacute;ld&aacute;ul a k&ouml;vetkez&#245; szakaszban ez lesz
	  a tartalma:</para>

	<programlisting>redirect_port tcp 192.168.0.2:6667 6667
redirect_port tcp 192.168.0.3:80 80</programlisting>

	<para>A konfigur&aacute;ci&oacute;s
	  &aacute;llom&aacute;nyr&oacute;l &eacute;s az
	  <option>-f</option> opci&oacute; haszn&aacute;lat&aacute;val
	  kapcsolatban olvassuk el a &man.natd.8; man
	  oldal&aacute;t.</para>
      </note>

      <para>A helyi h&aacute;l&oacute;zaton mindegyik g&eacute;pnek az
	<ulink
	url="ftp://ftp.isi.edu/in-notes/rfc1918.txt">RFC&nbsp;1918</ulink>
	&aacute;ltal megadott priv&aacute;t IP-c&iacute;mterekb&#245;l
	sz&aacute;rmaz&oacute; c&iacute;met kell haszn&aacute;lnia,
	&eacute;s az alap&eacute;rtelmezett
	&aacute;tj&aacute;r&oacute;nak mindenhol a
	<application>natd</application> d&eacute;mont futtat&oacute;
	g&eacute;p IP-c&iacute;m&eacute;t kell megadni.</para>

      <para>P&eacute;ld&aacute;ul a bels&#245; h&aacute;l&oacute;zaton
	tal&aacute;lhat&oacute; <hostid>A</hostid> &eacute;s
	<hostid>B</hostid> kliensek IP-c&iacute;mei rendre <hostid
	role="ipaddr">192.168.0.2</hostid> &eacute;s <hostid
	role="ipaddr">192.168.0.3</hostid>, m&iacute;g a &man.natd.8;
	d&eacute;mont futtat&oacute; g&eacute;p bels&#245; c&iacute;me
	<hostid role="ipaddr">192.168.0.1</hostid>.  Az
	<hostid>A</hostid> &eacute;s a <hostid>B</hostid> kliens
	alap&eacute;rtelmezett &aacute;tj&aacute;r&oacute;j&aacute;t a
	<application>natd</application> g&eacute;pre, vagyis a <hostid
	role="ipaddr">192.168.0.1</hostid> c&iacute;mre kell
	be&aacute;ll&iacute;tanunk.  A <application>natd</application>
	g&eacute;p k&uuml;ls&#245;, avagy internetes fel&uuml;lete
	semmilyen tov&aacute;bbi m&oacute;dos&iacute;t&aacute;st nem
	ig&eacute;nyel a &man.natd.8;
	m&#251;k&ouml;d&eacute;s&eacute;hez.</para>

    </sect2>

    <sect2 id="network-natdport-redirection">
      <title>A portok &aacute;tir&aacute;ny&iacute;t&aacute;sa</title>

      <para>A &man.natd.8; alkalmaz&aacute;s&aacute;nak
	h&aacute;tr&aacute;nya, hogy a bels&#245;
	h&aacute;l&oacute;zatra csatlakoz&oacute; kliensek az
	internetr&#245;l nem &eacute;rhet&#245;ek el.  Teh&aacute;t a
	helyi h&aacute;l&oacute;zat kliensei k&eacute;pesek
	el&eacute;rni a k&uuml;lvil&aacute;got, de az visszafel&eacute;
	m&aacute;r nem igaz.  Ez akkor jelent igaz&aacute;b&oacute;l
	probl&eacute;m&aacute;t, ha az egyik bels&#245; kliensen
	szolg&aacute;ltat&aacute;sokat akarunk futtatni.  A
	probl&eacute;ma egyik egyszer&#251; megold&aacute;sa, ha a
	<application>natd</application> haszn&aacute;lat&aacute;val az
	internet fel&#245;l egyszer&#251;en
	&aacute;tir&aacute;ny&iacute;tunk bizonyos portokat a
	megfelel&#245; bels&#245; kliensre.</para>

      <para>P&eacute;ld&aacute;ul tegy&uuml;k fel, hogy az
	<hostid>A</hostid> kliens egy IRC szervert, m&iacute;g a
	<hostid>B</hostid> kliens egy webszervert futtat.  Ez akkor fog
	m&#251;k&ouml;dni, ha a szolg&aacute;ltat&aacute;sokhoz
	tartoz&oacute; 6667 (IRC) &eacute;s 80 (web) portokat
	&aacute;tir&aacute;ny&iacute;tjuk a hozz&aacute;juk
	tartoz&oacute; g&eacute;pek fel&eacute;.</para>

      <para>Ehhez a &man.natd.8; d&eacute;monnak a
	<option>-redirect_port</option> param&eacute;tert kell
	&aacute;tadni.  A pontos fel&iacute;r&aacute;s &iacute;gy
	n&eacute;z ki:</para>

      <programlisting>     -redirect_port <replaceable>protokoll</replaceable> <replaceable>c&eacute;lIP</replaceable>:<replaceable>c&eacute;lPORT</replaceable>[-<replaceable>c&eacute;lPORT</replaceable>]
                 [<replaceable>k&uuml;ls&#245;IP</replaceable>:]<replaceable>k&uuml;ls&#245;PORT</replaceable>[-<replaceable>k&uuml;ls&#245;PORT</replaceable>]
                 [<replaceable>t&aacute;voliIP</replaceable>[:<replaceable>t&aacute;voliPORT</replaceable>[-<replaceable>t&aacute;voliPORT</replaceable>]]]</programlisting>

      <para>A fenti p&eacute;ld&aacute;ban teh&aacute;t ezt kell
	megadnunk:</para>

      <programlisting>    -redirect_port tcp 192.168.0.2:6667 6667
    -redirect_port tcp 192.168.0.3:80 80</programlisting>

      <para>&Iacute;gy az egyes k&uuml;ls&#245; <emphasis>tcp</emphasis>
	portokat &aacute;tir&aacute;ny&iacute;tjuk a bels&#245;
	h&aacute;l&oacute;zat g&eacute;pei fel&eacute;.</para>

      <para>A <option>-redirect_port</option> param&eacute;ternek
	ak&aacute;r eg&eacute;sz porttartom&aacute;nyokat is
	megadhatunk.  P&eacute;ld&aacute;ul a <replaceable>tcp
	192.168.0.2:2000-3000 2000-3000</replaceable>
	megad&aacute;s&aacute;val az &ouml;sszes 2000-t&#245;l 3000-ig
	terjed&#245; port csatlakoz&aacute;s&aacute;t
	lek&eacute;pezz&uuml;k az <hostid>A</hostid> kliens 2000
	&eacute;s 3000 k&ouml;zti portjaira.</para>

      <para>Ezek a be&aacute;ll&iacute;t&aacute;sok a &man.natd.8;
	k&ouml;zvetlen futtat&aacute;sakor adhat&oacute;ak meg, esetleg
	az <filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyban
	az <literal>natd_flags=""</literal> opci&oacute; kereszt&uuml;l,
	vagy egy k&uuml;l&ouml;n konfigur&aacute;ci&oacute;s
	&aacute;llom&aacute;nyban.</para>

      <para>A t&ouml;bbi be&aacute;ll&iacute;t&aacute;si
	lehet&#245;s&eacute;get a &man.natd.8; man oldal&aacute;n
	ismerhetj&uuml;k meg.</para>

    </sect2>

    <sect2 id="network-natdaddress-redirection">
      <title>A c&iacute;mek
	&aacute;tir&aacute;ny&iacute;t&aacute;sa</title>

      <indexterm><primary>c&iacute;m&aacute;tir&aacute;ny&iacute;t&aacute;s</primary></indexterm>

      <para>A c&iacute;mek &aacute;tir&aacute;ny&iacute;t&aacute;sa
	abban az esetben hasznos, amikor t&ouml;bb IP-c&iacute;m
	&aacute;ll rendelkez&eacute;s&uuml;nkre, de ezek egy
	g&eacute;phez tartoznak.  Ilyenkor az &man.natd.8; k&eacute;pes
	a bels&#245; h&aacute;l&oacute;zat egyes g&eacute;peihez
	saj&aacute;t k&uuml;ls&#245; IP-c&iacute;met rendelni.  A
	&man.natd.8; a bels&#245; h&aacute;l&oacute;zat kliensei
	&aacute;ltal k&uuml;ld&ouml;tt csomagokban kicser&eacute;li a
	c&iacute;m&uuml;ket a megfelel&#245; k&uuml;ls&#245;
	IP-c&iacute;mmel, illetve az ezekre a c&iacute;mekre
	&eacute;rkez&#245; forgalmat tov&aacute;bb&iacute;tja a
	megfelel&#245; bels&#245; kliens ir&aacute;ny&aacute;ba.  Ezt a
	megold&aacute;st statikus h&aacute;l&oacute;zati
	c&iacute;mford&iacute;t&aacute;snak is nevezz&uuml;k.
	P&eacute;ld&aacute;ul a <hostid role="ipaddr">128.1.1.2</hostid>
	&eacute;s a <hostid role="ipaddr">128.1.1.3</hostid>
	IP-c&iacute;mek a <application>natd</application> d&eacute;mont
	futtat&oacute; &aacute;tj&aacute;r&oacute;hoz tartoznak.  A
	<hostid role="ipaddr">128.1.1.1</hostid> c&iacute;m
	haszn&aacute;lhat&oacute; a <application>natd</application>
	alap&uacute; &aacute;tj&aacute;r&oacute; k&uuml;ls&#245;
	IP-c&iacute;mek&eacute;nt, mik&ouml;zben a <hostid
	role="ipaddr">128.1.1.2</hostid> &eacute;s a <hostid
	role="ipaddr">128.1.1.3</hostid> c&iacute;meket a bels&#245;
	h&aacute;l&oacute;zaton el&eacute;rhet&#245; <hostid>A</hostid>
	&eacute;s <hostid>B</hostid> kliensek fel&eacute;
	k&ouml;zvet&iacute;tj&uuml;k.</para>

      <para>A <option>-redirect_address</option> fel&iacute;r&aacute;sa
	teh&aacute;t a k&ouml;vetkez&#245;:</para>

      <programlisting>-redirect_address <replaceable>helyiIP</replaceable> <replaceable>publikusIP</replaceable></programlisting>

      <informaltable frame="none" pgwide="1">
	<tgroup cols="2">
	  <tbody>
	    <row>
	      <entry><replaceable>helyiIP</replaceable></entry>
	      <entry>A helyi h&aacute;l&oacute;zaton
		tal&aacute;lhat&oacute; kliens saj&aacute;t
		IP-c&iacute;me.</entry>
	    </row>
	    <row>
	      <entry><replaceable>publikusIP</replaceable></entry>
	      <entry>A klienshez tartoz&oacute; megfelel&#245;
		k&uuml;ls&#245; IP-c&iacute;m.</entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

      <para>Az im&eacute;nti p&eacute;ld&aacute;ban a pontos
	param&eacute;terek ezek lesznek:</para>

      <programlisting>-redirect_address 192.168.0.2 128.1.1.2
-redirect_address 192.168.0.3 128.1.1.3</programlisting>

      <para>A <option>-redirect_port</option> opci&oacute;hoz
	hasonl&oacute;an ez is megadhat&oacute; az
	<filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyban az
	<literal>natd_flags=""</literal>
	be&aacute;ll&iacute;t&aacute;son kereszt&uuml;l vagy egy
	k&uuml;l&ouml;n konfigur&aacute;ci&oacute;s
	&aacute;llom&aacute;nyban.  A c&iacute;mek
	&aacute;tir&aacute;ny&iacute;t&aacute;s&aacute;val nincs
	sz&uuml;ks&eacute;ge a portok
	&aacute;tir&aacute;ny&iacute;t&aacute;s&aacute;ra, mivel az
	adott IP-c&iacute;mhez tartoz&oacute; &ouml;sszes forgalmat
	&aacute;tir&aacute;ny&iacute;tjuk.</para>

      <para>A <application>natd</application> d&eacute;mont
	futtat&oacute; g&eacute;pen a k&uuml;ls&#245; IP-c&iacute;meket
	aktiv&aacute;lni kell &eacute;s a k&uuml;ls&#245;
	fel&uuml;let&eacute;hez kell rendelni.  A &man.rc.conf.5; man
	oldalon j&aacute;rhatunk ut&aacute;na, hogy mindezt hogyan is
	tudjuk megcsin&aacute;lni.</para>

    </sect2>
  </sect1>

  <sect1 id="network-plip">
    <title>P&aacute;rhuzamos vonali IP (PLIP)</title>

    <indexterm><primary>PLIP</primary></indexterm>
    <indexterm>
      <primary>p&aacute;rhuzamos vonali IP</primary>
      <see>PLIP</see>
    </indexterm>

    <para>A p&aacute;rhuzamos vonali IP (Parallel Line IP, PLIP) a
      TCP/IP protokoll haszn&aacute;lat&aacute;t val&oacute;s&iacute;tja
      meg p&aacute;rhuzamos porton kereszt&uuml;l.  Olyan g&eacute;pek
      sz&aacute;m&aacute;ra lehet hasznos, amelyekben nincs
      h&aacute;l&oacute;zati k&aacute;rtya, vagy esetleg
      laptopokn&aacute;l.  Ebben a szakaszban a k&ouml;vetkez&#245;ket
      t&aacute;rgyaljuk:</para>

    <itemizedlist>
      <listitem>
	<para>P&aacute;rhuzamos (laplink) k&aacute;bel
	  k&eacute;sz&iacute;t&eacute;se</para>
      </listitem>

      <listitem>
	<para>K&eacute;t sz&aacute;m&iacute;t&oacute;g&eacute;p
	  &ouml;sszekapcsol&aacute;sa a PLIP
	  seg&iacute;ts&eacute;g&eacute;vel</para>
      </listitem>
    </itemizedlist>

    <sect2 id="network-create-parallel-cable">
      <title>P&aacute;rhuzamos k&aacute;bel
	k&eacute;sz&iacute;t&eacute;se</title>

      <para>P&aacute;rhuzamos k&aacute;belt a legt&ouml;bb
	sz&aacute;m&iacute;t&aacute;stechnikai boltban tudunk
	v&aacute;s&aacute;rolni.  Ha m&eacute;gsem tudn&aacute;nk sehol
	sem beszerezni, vagy egyszer&#251;en tudni szeretn&eacute;nk,
	hogyan lehet ilyet k&eacute;sz&iacute;teni, akkor az
	al&aacute;bbi t&aacute;bl&aacute;zatban l&aacute;thatjuk, hogy
	mik&eacute;nt tudunk egy h&eacute;tk&ouml;znapi
	nyomtat&oacute;k&aacute;belt &aacute;talak&iacute;tani a
	c&eacute;ljainkra.</para>

      <table frame="none">
	<title>A p&aacute;rhuzamos k&aacute;bel h&aacute;l&oacute;zati
	  haszn&aacute;latra alkalmas bek&ouml;t&eacute;se</title>

	<tgroup cols="5">
	  <thead>
	    <row>
	      <entry>A-n&eacute;v</entry>
	      <entry>A-v&eacute;g</entry>
	      <entry>B-v&eacute;g</entry>
	      <entry>Le&iacute;r&aacute;s</entry>
	      <entry>Post/Bit</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry><literallayout>DATA0
-ERROR</literallayout></entry>
	      <entry><literallayout>2
15</literallayout></entry>
	      <entry><literallayout>15
2</literallayout></entry>
	      <entry>Adat</entry>
	      <entry><literallayout>0/0x01
1/0x08</literallayout></entry>
	    </row>

	    <row>
	      <entry><literallayout>DATA1
+SLCT</literallayout></entry>
	      <entry><literallayout>3
13</literallayout></entry>
	      <entry><literallayout>13
3</literallayout></entry>
	      <entry>Adat</entry>
	      <entry><literallayout>0/0x02
1/0x10</literallayout></entry>
	    </row>

	    <row>
	      <entry><literallayout>DATA2
+PE</literallayout></entry>
	      <entry><literallayout>4
12</literallayout></entry>
	      <entry><literallayout>12
4</literallayout></entry>
	      <entry>Adat</entry>
	      <entry><literallayout>0/0x04
1/0x20</literallayout></entry>
	    </row>

	    <row>
	      <entry><literallayout>DATA3
-ACK</literallayout></entry>
	      <entry><literallayout>5
10</literallayout></entry>
	      <entry><literallayout>10
5</literallayout></entry>
	      <entry>V&aacute;l. imp.</entry>
	      <entry><literallayout>0/0x08
1/0x40</literallayout></entry>
	    </row>

	    <row>
	      <entry><literallayout>DATA4
BUSY</literallayout></entry>
	      <entry><literallayout>6
11</literallayout></entry>
	      <entry><literallayout>11
6</literallayout></entry>
	      <entry>Adat</entry>
	      <entry><literallayout>0/0x10
1/0x80</literallayout></entry>
	    </row>

	    <row>
	      <entry>GND</entry>
	      <entry>18-25</entry>
	      <entry>18-25</entry>
	      <entry>F&ouml;ld</entry>
	      <entry>-</entry>
	    </row>
	  </tbody>
	</tgroup>
      </table>
    </sect2>

    <sect2 id="network-plip-setup">
      <title>A PLIP be&aacute;ll&iacute;t&aacute;sa</title>

      <para>El&#245;sz&ouml;r is szerezn&uuml;nk kell valahonnan egy
	laplink k&aacute;belt.  Ha ez megvan, akkor mind a k&eacute;t
	g&eacute;pen ellen&#245;rizz&uuml;k, hogy a rendszermag
	tartalmazza az &man.lpt.4; meghajt&oacute;t:</para>

      <screen>&prompt.root; <userinput>grep lp /var/run/dmesg.boot</userinput>
lpt0: &lt;Printer&gt; on ppbus0
lpt0: Interrupt-driven port</screen>

      <para>A p&aacute;rhuzamos portnak megszak&iacute;t&aacute;ssal
	vez&eacute;reltnek kell lennie (<quote>interrupt driven</quote>),
	&eacute;s az <filename>/boot/device.hints</filename>
	&aacute;llom&aacute;nyban szerepelnie kell
	nagyj&aacute;b&oacute;l a k&ouml;vetkez&#245; soroknak:</para>

      <programlisting>hint.ppc.0.at="isa"
hint.ppc.0.irq="7"</programlisting>

      <para>Ezut&aacute;n n&eacute;zz&uuml;k meg, hogy a rendszermag
	be&aacute;ll&iacute;t&aacute;sait tartalmaz&oacute;
	&aacute;llom&aacute;nyban megjelenik-e a <literal>device
	plip</literal> sor, vagy a <filename>plip.ko</filename> modul
	bet&ouml;lt&#245;d&ouml;tt-e.  Ak&aacute;rmelyik is
	t&ouml;rt&eacute;nt, a p&aacute;rhuzamos h&aacute;l&oacute;zati
	fel&uuml;let most m&aacute;r a rendelkez&eacute;s&uuml;nkre
	&aacute;ll, &eacute;s az &man.ifconfig.8; paranccsal ezt meg is
	tudjuk n&eacute;zni:</para>

      <screen>&prompt.root; <userinput>ifconfig plip0</userinput>
plip0: flags=8810&lt;POINTOPOINT,SIMPLEX,MULTICAST&gt; mtu 1500</screen>

      <para>A laplink k&aacute;belt csatlakoztassuk mind a k&eacute;t
	sz&aacute;m&iacute;t&oacute;g&eacute;phez.</para>

      <para>Mind a k&eacute;t a h&aacute;l&oacute;zati fel&uuml;let
	param&eacute;tereit <username>root</username>
	felhaszn&aacute;l&oacute;k&eacute;nt hangoljuk be.
	P&eacute;ld&aacute;ul, ha az
	<hostid><replaceable>egyikg&eacute;p</replaceable></hostid>
	nev&#251; g&eacute;pet akarjuk a
	<hostid><replaceable>m&aacute;sikg&eacute;p</replaceable></hostid>
	nev&#251; g&eacute;phez csatlakoztatni:</para>

      <programlisting>              <replaceable>egyikg&eacute;p</replaceable> &lt;-----&gt; <replaceable>m&aacute;sikg&eacute;p</replaceable>
IP-c&iacute;m        10.0.0.1      10.0.0.2</programlisting>

      <para>Az
      <hostid><replaceable>egyikg&eacute;p</replaceable></hostid>
	fel&uuml;let&eacute;t &iacute;gy &aacute;ll&iacute;tsuk be:</para>

      <screen>&prompt.root; <userinput>ifconfig plip0 10.0.0.1 10.0.0.2</userinput></screen>

      <para>A
      <hostid><replaceable>m&aacute;sikg&eacute;p</replaceable></hostid>
	fel&uuml;let&eacute;t &iacute;gy &aacute;ll&iacute;tsuk be:</para>

      <screen>&prompt.root; <userinput>ifconfig plip0 10.0.0.2 10.0.0.1</userinput></screen>

      <para>Ezt k&ouml;vet&#245;en m&aacute;r egy m&#251;k&ouml;d&#245;
	kapcsolatnak kell fel&eacute;p&uuml;lnie.  Az egy&eacute;b
	r&eacute;szletek kapcs&aacute;n az &man.lp.4; &eacute;s az
	&man.lpt.4; man oldalait n&eacute;zz&uuml;k &aacute;t.</para>

      <para>Ezt a k&eacute;t g&eacute;pet vegy&uuml;k fel az
	<filename>/etc/hosts</filename> &aacute;llom&aacute;nyba
	is:</para>

      <programlisting>127.0.0.1               <replaceable>localhost.saj&aacute;t.tartom&aacute;ny</replaceable> localhost
10.0.0.1                <replaceable>egyikg&eacute;p.saj&aacute;t.tartom&aacute;ny egyikg&eacute;p</replaceable>
10.0.0.2                <replaceable>m&aacute;sikg&eacute;p.saj&aacute;t.tartom&aacute;ny</replaceable></programlisting>

      <para>A kapcsolat
	m&#251;k&ouml;d&#245;k&eacute;pess&eacute;g&eacute;r&#245;l
	&uacute;gy tudunk meggy&#245;z&#245;dni, ha az egyik
	g&eacute;pr&#245;l megpr&oacute;b&aacute;ljuk pingelni a
	m&aacute;sikat.  P&eacute;ld&aacute;ul az
	<hostid><replaceable>egyikg&eacute;p</replaceable></hostid>
	eset&eacute;ben:</para>

      <screen>&prompt.root; <userinput>ifconfig plip0</userinput>
plip0: flags=8851&lt;UP,POINTOPOINT,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        inet 10.0.0.1 --&gt; 10.0.0.2 netmask 0xff000000
&prompt.root; <userinput>netstat -r</userinput>
Routing tables

Internet:
Destination        Gateway          Flags     Refs     Use      Netif Expire
<replaceable>m&aacute;sikg&eacute;p</replaceable>           <replaceable>egyikg&eacute;p</replaceable>         UH          0       0       plip0
&prompt.root; <userinput>ping -c 4 <replaceable>m&aacute;sikg&eacute;p</replaceable></userinput>
PING <replaceable>m&aacute;sikg&eacute;p</replaceable> (10.0.0.2): 56 data bytes
64 bytes from 10.0.0.2: icmp_seq=0 ttl=255 time=2.774 ms
64 bytes from 10.0.0.2: icmp_seq=1 ttl=255 time=2.530 ms
64 bytes from 10.0.0.2: icmp_seq=2 ttl=255 time=2.556 ms
64 bytes from 10.0.0.2: icmp_seq=3 ttl=255 time=2.714 ms

--- <replaceable>m&aacute;sikg&eacute;p</replaceable> ping statistics ---
4 packets transmitted, 4 packets received, 0% packet loss
round-trip min/avg/max/stddev = 2.530/2.643/2.774/0.103 ms</screen>

    </sect2>
  </sect1>

  <sect1 id="network-ipv6">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Aaron</firstname>
	  <surname>Kaplan</surname>
	  <contrib>Eredetileg &iacute;rta: </contrib>
	</author>
      </authorgroup>
      <authorgroup>
	<author>
	  <firstname>Tom</firstname>
	  <surname>Rhodes</surname>
	  <contrib>&Aacute;tszervezte &eacute;s
	    kieg&eacute;sz&iacute;tette: </contrib>
	</author>
      </authorgroup>
      <authorgroup>
	<author>
	  <firstname>Brad</firstname>
	  <surname>Davis</surname>
	  <contrib>Tov&aacute;bb b&#245;v&iacute;tette: </contrib>
	</author>
      </authorgroup>

    </sect1info>

    <title>Az IPv6</title>

    <para>Az IPv6 (m&aacute;sik n&eacute;ven az IPng, vagy a <quote>az
      internet k&ouml;vetkez&#245; gener&aacute;ci&oacute;s
      protokollja</quote>, <quote>IP next generation</quote>) a
      j&oacute;l ismert IP protokoll (avagy az <acronym>IPv4</acronym>)
      &uacute;j v&aacute;ltozata.  Hasonl&oacute;an a jelenleg
      m&#251;k&ouml;d&#245; &ouml;sszes t&ouml;bbi BSD rendszerhez, a
      &os; is tartalmazza a KAME IPv6 referencia
      implement&aacute;ci&oacute;t.  Ez&eacute;rt ha ezzel
      szeretn&eacute;nk k&iacute;s&eacute;rletezni, akkor ehhez a &os;
      minden eszk&ouml;z biztos&iacute;t sz&aacute;munkra.  Ez a szakasz
      az IPv6 be&aacute;ll&iacute;t&aacute;s&aacute;t &eacute;s
      haszn&aacute;lat&aacute;t mutatja be.</para>

    <para>Az 1990-es &eacute;vek elej&eacute;n az IPv4-es
      c&iacute;mterek rohamos m&eacute;rt&eacute;k&#251;
      kimer&uuml;l&eacute;s&eacute;t figyelt&eacute;k meg.  Az internet
      jelenlegi b&#245;v&uuml;l&eacute;si &uuml;teme mellett k&eacute;t
      nagyobb aggodalomnak adott okot:</para>

    <itemizedlist>
      <listitem>
	<para>A c&iacute;mek elfogy&aacute;sa.  Napjainkban efel&#245;l
	  egyre kevesebb a k&eacute;ts&eacute;g, mivel az RFC&nbsp;1918
	  &aacute;ltal megfogalmazott priv&aacute;t c&iacute;mterek
	  (<hostid role="ipaddr">10.0.0.0/8</hostid>, <hostid
	  role="ipaddr">172.16.0.0/12</hostid>, &eacute;s <hostid
	  role="ipaddr">192.168.0.0/16</hostid>), valamint a
	  h&aacute;l&oacute;zati c&iacute;mford&iacute;t&aacute;s
	  (Network Address Translation, <acronym>NAT</acronym>)
	  haszn&aacute;lata igen elterjedt.</para>
      </listitem>

      <listitem>
	<para>Az &uacute;tv&aacute;laszt&aacute;si
	  t&aacute;bl&aacute;zatok m&eacute;ret&eacute;nek
	  n&ouml;veked&eacute;se.  Ez m&eacute;g manaps&aacute;g is
	  aggaszt&oacute;.</para>
      </listitem>
    </itemizedlist>

    <para>Az IPv6 ezeket &eacute;s m&eacute;g m&aacute;s egy&eacute;b
      probl&eacute;m&aacute;kat a k&ouml;vetkez&#245; m&oacute;don
      igyekszik megoldani:</para>

    <itemizedlist>
      <listitem>
	<para>A 128&nbsp;bites c&iacute;mt&eacute;r haszn&aacute;lata.
	  M&aacute;s sz&oacute;val, elm&eacute;letben &ouml;sszesen
	  340&nbsp;282&nbsp;366&nbsp;920&nbsp;938&nbsp;463&nbsp;463&nbsp;374&nbsp;607&nbsp;431&nbsp;768&nbsp;211&nbsp;456
	  darab c&iacute;met k&eacute;pes kiosztani.  Ez azt jelenti,
	  hogy bolyg&oacute;nk minden egyes
	  n&eacute;gyzetm&eacute;ter&eacute;re
	  megk&ouml;zel&iacute;t&#245;leg 6,67 * 10^27 IPv6
	  t&iacute;pus&uacute; c&iacute;m jut.</para>
      </listitem>

      <listitem>
	<para>Az &uacute;tv&aacute;laszt&oacute;k a saj&aacute;t
	  t&aacute;bl&aacute;zataikban csak a h&aacute;l&oacute;zatok
	  &ouml;sszevont c&iacute;meit t&aacute;rolj&aacute;k el,
	  ez&aacute;ltal egy &aacute;tlagos
	  &uacute;tv&aacute;laszt&aacute;si t&aacute;bl&aacute;zatban
	  tal&aacute;lhat&oacute; bejegyz&eacute;sek sz&aacute;ma 8192
	  al&aacute; cs&ouml;kken.</para>
      </listitem>
    </itemizedlist>

    <para>Az IPv6 emellett m&eacute;g rengeteg m&aacute;s
      el&#245;ny&ouml;s lehet&#245;s&eacute;get is
      k&iacute;n&aacute;l:</para>

    <itemizedlist>
      <listitem>
	<para>A c&iacute;mek automatikus be&aacute;ll&iacute;t&aacute;sa
	  (l&aacute;sd <ulink
	  url="http://www.ietf.org/rfc/rfc2462.txt">RFC&nbsp;2462</ulink>)</para>
      </listitem>

      <listitem>
	<para>Anycast (b&aacute;rkik&uuml;ld&eacute;s, vagyis <quote>egy
	  a sokb&oacute;l</quote>)</para>
      </listitem>

      <listitem>
	<para>K&ouml;telez&#245; (mandatory) multicast</para>
      </listitem>

      <listitem>
	<para>IPsec (IP szint&#251; v&eacute;delem)</para>
      </listitem>

      <listitem>
	<para>Egyszer&#251;s&iacute;tett fejl&eacute;c</para>
      </listitem>

      <listitem>
	<para>Mobil <acronym>IP</acronym></para>
      </listitem>

      <listitem>
	<para>IPv6-IPv4 k&ouml;zti
	  &aacute;tj&aacute;rhat&oacute;s&aacute;g</para>
      </listitem>
    </itemizedlist>

    <para>Ha mindezekr&#245;l t&ouml;bbet szeretn&eacute;nk megtudni,
      akkor erre &eacute;rdemes tov&aacute;bbl&eacute;pn&uuml;nk:</para>

    <itemizedlist>
      <listitem>
	<para>Az IPv6 &aacute;ttekint&eacute;se a <ulink
	url="http://playground.sun.com/pub/ipng/html/ipng-main.html">playground.sun.com</ulink>
	  honlapon</para>
      </listitem>

      <listitem>
	<para><ulink url="http://www.kame.net">KAME.net</ulink></para>
      </listitem>
    </itemizedlist>

    <sect2>
      <title>Az IPv6 c&iacute;mek h&aacute;ttere</title>

      <para>Az IPv6 c&iacute;meknek t&ouml;bb t&iacute;pusa
	l&eacute;tezik: a unicast (egyesk&uuml;ld&eacute;s), az anycast
	(b&aacute;rkik&uuml;ld&eacute;s) &eacute;s a multicast
	(t&ouml;bbesk&uuml;ld&eacute;s).</para>

      <para>A unicasthez haszn&aacute;lt c&iacute;mek j&oacute;l ismert
	c&iacute;mek.  Az &iacute;gy elk&uuml;ld&ouml;tt csomag pontosan
	ahhoz a fel&uuml;lethez &eacute;rkezik meg, amelyhez az adott
	c&iacute;m tartozik.</para>

      <para>Az anycasthez haszn&aacute;lt c&iacute;mek
	fel&iacute;r&aacute;sukban t&ouml;k&eacute;letesen megegyeznek a
	unicast eset&eacute;vel, de val&oacute;j&aacute;ban
	fel&uuml;letek egy csoportj&aacute;t c&iacute;mezik.  Az
	anycastre be&aacute;ll&iacute;tott c&iacute;mekre
	k&uuml;ld&ouml;tt csomagok mindig a(z
	&uacute;tv&aacute;laszt&oacute; szerinti) legk&ouml;zelebb
	lev&#245; fel&uuml;lethez &eacute;rkeznek meg.  Az anycastet az
	&uacute;tv&aacute;laszt&oacute;k sz&aacute;m&aacute;ra
	tal&aacute;lt&aacute;k ki.</para>

      <para>A multicasthez haszn&aacute;lt c&iacute;mek fel&uuml;letek
	egy csoportj&aacute;t nevezik meg.  A multicast c&iacute;mekre
	&eacute;rkez&#245; csomagokat a csoport minden egyes tagja
	megkapja.</para>

	<note>
	  <para>Az IPv4 eset&eacute;ben az
	    &uuml;zenetsz&oacute;r&aacute;sra sz&aacute;nt
	    (&aacute;ltal&aacute;ban az <hostid
	    role="ipaddr">xxx.xxx.xxx.255</hostid>
	    form&aacute;tum&uacute;) c&iacute;meket az IPv6
	    eset&eacute;ben multicast c&iacute;mekkel fejezz&uuml;k
	    ki.</para>
	</note>

      <table frame="none">
	<title>Fenntartott IPv6 c&iacute;mek</title>

	<tgroup cols="4">
	  <thead>
	    <row>
	      <entry>IPv6 c&iacute;m</entry>
	      <entry>Az el&#245;tag hossza (bitekben)</entry>
	      <entry>Le&iacute;r&aacute;s</entry>
	      <entry>Megjegyz&eacute;s</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry><hostid role="ip6addr">::</hostid></entry>
	      <entry>128&nbsp;bit</entry>
	      <entry>nem specifik&aacute;lt</entry>
	      <entry>V&ouml;.  a <hostid role="ipaddr">0.0.0.0</hostid>
		c&iacute;mmel az IPv4 eset&eacute;ben.</entry>
	    </row>

	    <row>
	      <entry><hostid role="ip6addr">::1</hostid></entry>
	      <entry>128&nbsp;bit</entry>
	      <entry>saj&aacute;t c&iacute;m</entry>
	      <entry>V&ouml;.  a <hostid
		role="ipaddr">127.0.0.1</hostid> c&iacute;mmel az IPv4
		eset&eacute;ben.</entry>
	    </row>

	    <row>
	      <entry><hostid
		role="ip6addr">::00:xx:xx:xx:xx</hostid></entry>
	      <entry>96&nbsp;bit</entry>
	      <entry>IPv4 be&aacute;gyaz&aacute;sa</entry>
	      <entry>Az als&oacute; 32&nbsp;bit egy IPv4
		form&aacute;tum&uacute; c&iacute;m.  Ezt <quote>IPv4
		kompatibilis IPv6 c&iacute;mnek</quote> is
		nevezik.</entry>
	    </row>

	    <row>
	      <entry><hostid
		role="ip6addr">::ff:xx:xx:xx:xx</hostid></entry>
	      <entry>96&nbsp;bit</entry>
	      <entry>IPv4-re lek&eacute;pzett IPv6 c&iacute;mek</entry>
	      <entry>Az als&oacute; 32&nbsp;bit egy IPv4 c&iacute;met
		jel&ouml;l.  Olyan g&eacute;pekn&eacute;l
		haszn&aacute;latos, amelyek nem t&aacute;mogatj&aacute;k
		az IPv6 protokollt.</entry>
	    </row>

	    <row>
	      <entry><hostid role="ip6addr">fe80::</hostid> - <hostid
		role="ip6addr">feb::</hostid></entry>
	      <entry>10&nbsp;bit</entry>
	      <entry>helyi &ouml;sszek&ouml;ttet&eacute;s</entry>
	      <entry>V&ouml;.  az IPv4 loopback c&iacute;meivel.</entry>
	    </row>

	    <row>
	      <entry><hostid role="ip6addr">fec0::</hostid> - <hostid
		role="ip6addr">fef::</hostid></entry>
	      <entry>10&nbsp;bit</entry>
	      <entry>helyi c&iacute;m</entry>
	      <entry>&nbsp;</entry>
	    </row>

	    <row>
	      <entry><hostid role="ip6addr">ff::</hostid></entry>
	      <entry>8&nbsp;bit</entry>
	      <entry>multicast</entry>
	      <entry>&nbsp;</entry>
	    </row>

	    <row>
	      <entry><hostid role="ip6addr">001</hostid> (2-es alap&uacute;)</entry>
	      <entry>3&nbsp;bit</entry>
	      <entry>glob&aacute;lis unicast</entry>
	      <entry>Az &ouml;sszes glob&aacute;lis unicast c&iacute;met
		ebb&#245;l a tartom&aacute;nyb&oacute;l osztjuk ki.  Az
		els&#245; 3&nbsp;bit
		&eacute;rt&eacute;ke<quote>001</quote>.</entry>
	    </row>
	  </tbody>
	</tgroup>
      </table>
    </sect2>

    <sect2>
      <title>Az IPv6 c&iacute;mek olvas&aacute;sa</title>

      <para>Az IPv6 c&iacute;mek kanonikus form&aacute;ja &iacute;gy
	&aacute;br&aacute;zolhat&oacute;: <hostid
	role="ip6addr">x:x:x:x:x:x:x:x</hostid>, ahol mindegyik
	<quote>x</quote> egy 16&nbsp;bites hexadecim&aacute;lis
	&eacute;rt&eacute;k.  P&eacute;ld&aacute;ul: <hostid
	role="ip6addr">FEBC:A574:382B:23C1:AA49:4592:4EFE:9982</hostid>.</para>

      <para>Gyakran a c&iacute;mek hossz&uacute; null&aacute;kb&oacute;l
	&aacute;ll&oacute; sorozatokat tartalmaznak, ez&eacute;rt
	mindegyik ilyen sorozatot r&ouml;vid&iacute;teni tudjuk a
	<quote>::</quote> jel&ouml;l&eacute;ssel.  Rajtuk
	k&iacute;v&uuml;l m&eacute;g az egyes hexadecim&aacute;lis
	csoportokban a bevezet&#245; null&aacute;k is
	elhagyhat&oacute;ak.  P&eacute;ld&aacute;ul az <hostid
	role="ip6addr">fe80::1</hostid> c&iacute;m kanonikus
	form&aacute;ja: <hostid
	role="ip6addr">fe80:0000:0000:0000:0000:0000:0000:0001</hostid>.</para>

      <para>A harmadik forma szerint az utols&oacute; 32&nbsp;bites
	r&eacute;szt &iacute;rjuk fel a megszokott (decim&aacute;lis)
	IPv4 st&iacute;lus&uacute; pontoz&aacute;ssal, ahol teh&aacute;t
	a <quote>.</quote> v&aacute;lasztja el a tagokat.  &Iacute;gy
	p&eacute;ld&aacute;ul a <hostid
	role="ip6addr">2002::10.0.0.1</hostid> fel&iacute;r&aacute;s a
	<hostid
	role="ip6addr">2002:0000:0000:0000:0000:0000:0a00:0001</hostid>
	kanonikus (hexadecim&aacute;lis)
	&aacute;br&aacute;zol&aacute;snak feleltethet&#245; meg, ami
	pedig egyszer&#251;en <hostid
	role="ip6addr">2002::a00:1</hostid> alakban is
	megadhat&oacute;.</para>

      <para>Mostanra m&aacute;r minden bizonnyal a kedves olvas&oacute;
	&eacute;rteni fogja a k&ouml;vetkez&#245;t:</para>

      <screen>&prompt.root; <userinput>ifconfig</userinput></screen>

      <programlisting>rl0: flags=8943&lt;UP,BROADCAST,RUNNING,PROMISC,SIMPLEX,MULTICAST&gt; mtu 1500
         inet 10.0.0.10 netmask 0xffffff00 broadcast 10.0.0.255
         inet6 fe80::200:21ff:fe03:8e1%rl0 prefixlen 64 scopeid 0x1
         ether 00:00:21:03:08:e1
         media: Ethernet autoselect (100baseTX )
         status: active</programlisting>

      <para>A <hostid
	role="ip6addr">fe80::200:21ff:fe03:8e1%rl0</hostid> c&iacute;m
	az automatikusan be&aacute;ll&iacute;tott helyi
	&ouml;sszek&ouml;ttet&eacute;s c&iacute;me.  Ez az automatikus
	be&aacute;ll&iacute;t&aacute;s r&eacute;szek&eacute;nt a
	MAC-c&iacute;mb&#245;l j&ouml;tt l&eacute;tre.</para>

      <para>Az IPv6 c&iacute;mek szerkezet&eacute;r&#245;l
	tov&aacute;bbi r&eacute;szleteket az <ulink
	url="http://www.ietf.org/rfc/rfc3513.txt">RFC&nbsp;3513</ulink>-ban
	tal&aacute;lunk.</para>

    </sect2>

    <sect2>
      <title>Kapcsol&oacute;d&aacute;s</title>

      <para>Jelenleg n&eacute;gy m&oacute;don tudunk m&aacute;s IPv6-os
	g&eacute;phez &eacute;s h&aacute;l&oacute;zathoz
	csatlakozni:</para>

      <itemizedlist>
	<listitem>
	  <para>K&eacute;rj&uuml;nk a h&aacute;l&oacute;zati
	    el&eacute;r&eacute;s&uuml;nk&eacute;rt felel&#245;s
	    illet&eacute;kesekt&#245;l IPv6 alap&uacute;
	    h&aacute;l&oacute;zatot.  A r&eacute;szletek
	    tekintet&eacute;ben vegy&uuml;k fel a kapcsolatot az
	    internet-szolg&aacute;ltat&oacute;nkkal.</para>
	</listitem>

	<listitem>
	  <para>A <ulink url="http://www.sixxs.net">SixXS</ulink> a
	    vil&aacute;g minden t&aacute;j&aacute;n k&iacute;n&aacute;l
	    v&eacute;gpontokkal rendelkez&#245; tunneleket.</para>
	</listitem>

	<listitem>
	  <para>Egy 6-b&oacute;l-4 (<ulink
	  url="http://www.ietf.org/rfc/rfc3068.txt">RFC&nbsp;3068</ulink>)
	    t&iacute;pus&uacute; tunnellel.</para>
	</listitem>

	<listitem>
	  <para>Ha bet&aacute;rcs&aacute;z&oacute;s kapcsolatunk van,
	    akkor haszn&aacute;ljuk a <filename
	    role="package">net/freenet6</filename> portot.</para>
	</listitem>
      </itemizedlist>

    </sect2>

    <sect2>
      <title>A nevek felold&aacute;sa az IPv6
	vil&aacute;g&aacute;ban</title>

      <para>IPv6 alatt r&eacute;gebben k&eacute;t t&iacute;pusa volt a
	nevek felold&aacute;s&aacute;&eacute;rt felel&#245;s
	rekordoknak.  Az IETF az A6 rekordokat id&#245;k&ouml;zben
	elavultnak nyilv&aacute;n&iacute;totta.  Ez&eacute;rt
	manaps&aacute;g m&aacute;r az AAAA rekordok tekinthet&#245;ek
	szabv&aacute;nyosnak.</para>

      <para>Az AAAA rekordok haszn&aacute;lata mag&aacute;t&oacute;l
	&eacute;rtet&#245;dik.  A h&aacute;l&oacute;zati
	nev&uuml;kh&ouml;z az al&aacute;bbi m&oacute;don tudunk IPv6
	c&iacute;met rendelni az els&#245;dleges z&oacute;n&aacute;t
	le&iacute;r&oacute; &aacute;llom&aacute;nyban:</para>

      <programlisting><replaceable>SAJ&Aacute;TN&Eacute;V</replaceable>           AAAA    <replaceable>SAJ&Aacute;TIPv6C&Iacute;M</replaceable></programlisting>

      <para>Ha nem rendelkez&uuml;nk saj&aacute;t
	n&eacute;vfelold&aacute;si z&oacute;n&aacute;val, akkor erre
	k&eacute;rj&uuml;k meg a n&eacute;vfelold&aacute;st
	v&eacute;gz&#245; szolg&aacute;ltat&oacute;nkat.  A
	<application>bind</application> jelenlegi v&aacute;ltozatai (8.3
	&eacute;s 9), valamint a <filename
	role="package">dns/djbdns</filename> (IPv6
	t&aacute;mogat&aacute;s&aacute;ra vonatkoz&oacute;
	jav&iacute;t&aacute;ssal) t&aacute;mogatj&aacute;k az AAAA
	rekordokat.</para>

    </sect2>

    <sect2>
      <title>Az <filename>/etc/rc.conf</filename> sz&uuml;ks&eacute;ges
	m&oacute;dos&iacute;t&aacute;sai</title>

      <sect3>
	<title>Az IPv6 kliensek be&aacute;ll&iacute;t&aacute;sai</title>

	<para>Ezek a be&aacute;ll&iacute;t&aacute;sok egy helyi
	  h&aacute;l&oacute;zaton lev&#245; g&eacute;pre vonatkoznak,
	  nem pedig egy &uacute;tv&aacute;laszt&oacute;ra.  Az
	  &man.rtsol.8; az al&aacute;bbi megad&aacute;s&aacute;val fogja
	  automatikusan be&aacute;ll&iacute;tani a fel&uuml;leteinket a
	  rendszer ind&iacute;t&aacute;sakor:</para>

	<programlisting>ipv6_enable="YES"</programlisting>

	<para>Ha az <devicename>fxp0</devicename> fel&uuml;lethez
	  statikusan akarunk IP-c&iacute;met rendelni,
	  p&eacute;ld&aacute;ul a <hostid role="ip6addr">
	  2001:471:1f11:251:290:27ff:fee0:2093</hostid> c&iacute;met,
	  akkor ehhez a k&ouml;vetkez&#245;t kell megadni:</para>

	<programlisting>ipv6_ifconfig_fxp0="2001:471:1f11:251:290:27ff:fee0:2093"</programlisting>

	<para>Az <filename>/etc/rc.conf</filename>
	  &aacute;llom&aacute;nyban az alap&eacute;rtelmezett
	  &aacute;tj&aacute;r&oacute;t a k&ouml;vetkez&#245;
	  m&oacute;don tudjuk a <hostid
	  role="ip6addr">2001:471:1f11:251::1</hostid> c&iacute;mre
	  be&aacute;ll&iacute;tani:</para>

	<programlisting>ipv6_defaultrouter="2001:471:1f11:251::1"</programlisting>

      </sect3>

      <sect3>
	<title>Az IPv6 &uacute;tv&aacute;laszt&oacute;k &eacute;s
	  &aacute;tj&aacute;r&oacute;k
	  be&aacute;ll&iacute;t&aacute;sa</title>

	<para>Itt most a tunnelt biztos&iacute;t&oacute;
	  szolg&aacute;ltat&oacute; &aacute;ltal mutatott ir&aacute;nyt
	  k&ouml;vetj&uuml;k, &eacute;s olyan form&aacute;ra
	  alak&iacute;tjuk, amely megmarad az
	  &uacute;jraind&iacute;t&aacute;s ut&aacute;n is.  A rendszer
	  ind&iacute;t&aacute;sakor az <filename>/etc/rc.conf</filename>
	  &aacute;llom&aacute;nyban valami ilyesmit kell megadni a
	  j&aacute;rat
	  vissza&aacute;ll&iacute;t&aacute;s&aacute;hoz:</para>

	<para>Soroljuk fel a be&aacute;ll&iacute;tand&oacute;
	  &aacute;ltal&aacute;nos tunnel alap&uacute; fel&uuml;leteket,
	  ilyen lehet p&eacute;ld&aacute;ul a
	  <devicename>gif0</devicename>:</para>

	<programlisting>gif_interfaces="gif0"</programlisting>

	<para>A fel&uuml;letnek &aacute;ll&iacute;tsunk be egy helyi
	  v&eacute;gpontot a
	  <replaceable>SAJ&Aacute;T_IPv4_C&Iacute;M</replaceable>
	  megad&aacute;s&aacute;val, valamint egy t&aacute;voli
	  v&eacute;gpontot a
	  <replaceable>T&Aacute;VOLI_IPv4_C&Iacute;M</replaceable>
	  megad&aacute;s&aacute;val:</para>

	<programlisting>gifconfig_gif0="<replaceable>SAJ&Aacute;T_IPv4_C&Iacute;M T&Aacute;VOLI_IPv4_C&Iacute;M</replaceable>"</programlisting>

	<para>Az IPv6 tunnel&uuml;nk v&eacute;gpontj&aacute;hoz kapott
	  c&iacute;m aktiv&aacute;l&aacute;s&aacute;hoz az
	  al&aacute;bbit kell m&eacute;g megadnunk:</para>

	<programlisting>ipv6_ifconfig_gif0="<replaceable>SAJ&Aacute;T_KAPOTT_IPv6_TUNNEL_V&Eacute;GPONTJ&Aacute;NAK_C&Iacute;ME</replaceable>"</programlisting>

	<para>Ezut&aacute;n m&aacute;r csak az alap&eacute;rtelmezett
	  &uacute;tvonalat kell be&aacute;ll&iacute;tani az IPv6
	  sz&aacute;m&aacute;ra.  Ez az IPv6 j&aacute;rat m&aacute;sik
	  oldala:</para>

	<programlisting>ipv6_defaultrouter="<replaceable>SAJ&Aacute;T_IPv6_T&Aacute;VOLI_TUNNEL_V&Eacute;GPONTJ&Aacute;NAK_C&Iacute;ME</replaceable>"</programlisting>

      </sect3>

      <sect3>
	<title>Az IPv6 tunnel be&aacute;ll&iacute;t&aacute;sai</title>

	<para>Amennyiben a szerver IPv6 alap&uacute; forgalmat
	  k&ouml;zvet&iacute;t a h&aacute;l&oacute;zatunk &eacute;s a
	  vil&aacute;g k&ouml;z&ouml;tt, az
	  <filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyba a
	  k&ouml;vetkez&#245;t kell felvenn&uuml;nk:</para>

	<programlisting>ipv6_gateway_enable="YES"</programlisting>

      </sect3>
    </sect2>

    <sect2>
      <title>Az &uacute;tv&aacute;laszt&oacute;k kihirdet&eacute;se
	&eacute;s automatikus konfigur&aacute;ci&oacute;ja</title>

      <para>Ebben a szakaszban az &man.rtadvd.8;
	be&aacute;ll&iacute;t&aacute;s&aacute;val fogjuk az
	alap&eacute;rtelmezett IPv6 &uacute;tvonalat kihirdetni.</para>

      <para>Az &man.rtadvd.8; enged&eacute;lyez&eacute;s&eacute;hez az
	al&aacute;bbi sort kell betenn&uuml;nk az
	<filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyba:</para>

      <programlisting>rtadvd_enable="YES"</programlisting>

      <para>Emellett m&eacute;g fontos megadnunk azt a fel&uuml;letet,
	ahol az IPv6 &uacute;tv&aacute;laszt&oacute;
	k&eacute;relmez&eacute;s&eacute;t v&eacute;gezz&uuml;k.  Ha erre
	a feladatra p&eacute;ld&aacute;ul az
	<devicename>fxp0</devicename> fel&uuml;letet v&aacute;lasztjuk,
	akkor err&#245;l az &man.rtadvd.8; &iacute;gy
	&eacute;rtes&iacute;thet&#245;:</para>

      <programlisting>rtadvd_interfaces="fxp0"</programlisting>

      <para>Most pedig k&eacute;sz&iacute;ten&uuml;nk kell hozz&aacute;
	egy konfigur&aacute;ci&oacute;t is, vagyis az
	<filename>/etc/rtadvd.conf</filename> &aacute;llom&aacute;nyt.
	&Iacute;me erre egy p&eacute;lda:</para>

      <programlisting>fxp0:\
	:addrs#1:addr="2001:471:1f11:246::":prefixlen#64:tc=ether:</programlisting>

      <para>Az <devicename>fxp0</devicename> fel&uuml;letet
	term&eacute;szetesen cser&eacute;lj&uuml;k ki a
	saj&aacute;tunkkal.</para>

      <para>Ezut&aacute;n a <hostid
	role="ip6addr">2001:471:1f11:246::</hostid> c&iacute;mre
	hely&eacute;re &iacute;rjuk be a saj&aacute;t kioszt&aacute;sunk
	el&#245;tagj&aacute;t.</para>

      <para>Egy eg&eacute;sz <hostid role="netmask">/64</hostid>
	alh&aacute;l&oacute;zat eset&eacute;n nem is kell t&ouml;bbet
	megadni.  Minden m&aacute;s helyezetben az el&#245;tag
	hossz&aacute;ra <literal>prefixlen#</literal> vonatkoz&oacute;
	&eacute;rt&eacute;ket is be kell m&eacute;g
	&aacute;ll&iacute;tanunk.</para>

   </sect2>
  </sect1>

  <sect1 id="network-atm">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Harti</firstname>
	  <surname>Brandt</surname>
	  <contrib>K&eacute;sz&iacute;tette: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>Az Aszinkron adat&aacute;tviteli m&oacute;d (ATM)</title>

    <sect2>
      <title>A klasszikus IP-c&iacute;mek
	be&aacute;ll&iacute;t&aacute;sa ATM felett
	(&aacute;lland&oacute;)</title>

      <para>A klasszikus IP ATM felett (Classical IP over ATM,
	<acronym>CLIP</acronym>) a legegyszer&#251;bb m&oacute;dszer az
	IP-c&iacute;mek haszn&aacute;lat&aacute;ra az Aszinkron
	adat&aacute;tviteli m&oacute;ddal (Asynchronous Transfer Mode,
	ATM) egy&uuml;tt.  Kapcsolt &eacute;s &aacute;lland&oacute;
	kapcsolatok (Switched Virtual Channel, SVC &eacute;s Permanent
	Virtual Channel, PVC) eset&eacute;n egyar&aacute;nt
	megfelel&#245;.  Ebben a szakaszban ez ut&oacute;bbival fogunk
	foglalkozni.</para>

      <sect3>
	<title>A teljesen h&aacute;l&oacute;szer&#251;
	  konfigur&aacute;ci&oacute;k</title>

	<para>A <acronym>CLIP</acronym>
	  be&aacute;ll&iacute;t&aacute;s&aacute;t &aacute;lland&oacute;
	  csatorn&aacute;kon p&eacute;ld&aacute;ul &uacute;gy tudjuk
	  megoldani, ha az &ouml;sszes g&eacute;pet k&uuml;l&ouml;n
	  ezekre a c&eacute;lokra sz&aacute;nt &aacute;lland&oacute;
	  csatorn&aacute;kkal &ouml;sszekapcsoljuk egym&aacute;ssal.  Ez
	  az egyszer&#251; megold&aacute;s azonban nagyobb
	  sz&aacute;m&uacute; g&eacute;p eset&eacute;ben m&aacute;r nem
	  el&eacute;gg&eacute; hat&eacute;kony.  A k&ouml;vetkez&#245;
	  p&eacute;ld&aacute;ban csup&aacute;n n&eacute;gy g&eacute;pet
	  k&ouml;t&uuml;nk h&aacute;l&oacute;zatba, melyik mindegyike
	  egy <acronym role="Asynchronous Transfer Mode">ATM</acronym>
	  k&aacute;rty&aacute;val csatlakozik az <acronym
	  role="Asynchronous Transfer Mode">ATM</acronym>
	  h&aacute;l&oacute;zatra.  Ehhez els&#245;k&eacute;nt
	  tervezz&uuml;k meg az IP-c&iacute;mek kioszt&aacute;s&aacute;t
	  &eacute;s a g&eacute;pek k&ouml;zti <acronym
	  role="Asynchronous Transfer Mode">ATM</acronym> kapcsolatokat.
	  A p&eacute;ld&aacute;ban ez az al&aacute;bbiak szerint
	  alakul:</para>

	<informaltable frame="none" pgwide="1">
	  <tgroup cols="2">
	    <colspec colwidth="1*">
	    <colspec colwidth="1*">
	    <thead>
	      <row>
		<entry>G&eacute;p</entry>
		<entry>IP-c&iacute;m</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry><hostid>A-gep</hostid></entry>
		<entry><hostid
		  role="ipaddr">192.168.173.1</hostid></entry>
	      </row>

	      <row>
		<entry><hostid>B-gep</hostid></entry>
		<entry><hostid
		  role="ipaddr">192.168.173.2</hostid></entry>
	      </row>

	      <row>
		<entry><hostid>C-gep</hostid></entry>
		<entry><hostid
		  role="ipaddr">192.168.173.3</hostid></entry>
	      </row>

	      <row>
		<entry><hostid>D-gep</hostid></entry>
		<entry><hostid
		  role="ipaddr">192.168.173.4</hostid></entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>A teljes h&aacute;l&oacute;zat
	  fel&eacute;p&iacute;t&eacute;s&eacute;hez minden egyes
	  p&aacute;r k&ouml;z&ouml;tt egy-egy ATM kapcsolatra lesz
	  sz&uuml;ks&eacute;g&uuml;nk:</para>

	<informaltable frame="none" pgwide="1">
	  <tgroup cols="2">
	    <colspec colwidth="1*">
	    <colspec colwidth="1*">
	    <thead>
	      <row>
		<entry>G&eacute;pek</entry>
		<entry>VPI.VCI p&aacute;r</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry><hostid>A-gep</hostid> -
		  <hostid>B-gep</hostid></entry>
		<entry>0.100</entry>
	      </row>

	      <row>
		<entry><hostid>A-gep</hostid> -
		  <hostid>C-gep</hostid></entry>
		<entry>0.101</entry>
	      </row>

	      <row>
		<entry><hostid>A-gep</hostid> -
		  <hostid>D-gep</hostid></entry>
		<entry>0.102</entry>
	      </row>

	      <row>
		<entry><hostid>B-gep</hostid> -
		  <hostid>C-gep</hostid></entry>
		<entry>0.103</entry>
	      </row>

	      <row>
		<entry><hostid>B-gep</hostid> -
		  <hostid>D-gep</hostid></entry>
		<entry>0.104</entry>
	      </row>

	      <row>
		<entry><hostid>C-gep</hostid> -
		  <hostid>D-gep</hostid></entry>
		<entry>0.105</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>A kapcsolatok egyes v&eacute;gein szerepl&#245; VPI
	  &eacute;s VCI &eacute;rt&eacute;kek term&eacute;szetesen
	  elt&eacute;rhetnek, de ezeket mi most az
	  egyszer&#251;s&eacute;g kedv&eacute;&eacute;rt egyenl&#245;nek
	  tekintett&uuml;k.  A k&ouml;vetkez&#245;
	  l&eacute;p&eacute;sben minden g&eacute;pen
	  &aacute;ll&iacute;tsuk be az ATM fel&uuml;let:</para>

	<screen>A-gep&prompt.root; <userinput>ifconfig hatm0 192.168.173.1 up</userinput>
B-gep&prompt.root; <userinput>ifconfig hatm0 192.168.173.2 up</userinput>
C-gep&prompt.root; <userinput>ifconfig hatm0 192.168.173.3 up</userinput>
D-gep&prompt.root; <userinput>ifconfig hatm0 192.168.173.4 up</userinput></screen>

	<para>Ha felt&eacute;telezz&uuml;k, hogy minden g&eacute;pen a
	  <devicename>hatm0</devicename> az ATM fel&uuml;let neve.  Most
	  pedig az <hostid>A-gep</hostid>-en &aacute;ll&iacute;tsuk be
	  az &aacute;lland&oacute; csatorn&aacute;kat.  (Itt most
	  feltessz&uuml;k, hogy az ATM switch-eken mindezt m&aacute;r
	  elv&eacute;gezt&uuml;k.  A switch
	  k&eacute;zik&ouml;nyv&eacute;ben err&#245;l
	  r&eacute;szletesebb le&iacute;r&aacute;st is
	  tal&aacute;lhatunk.)</para>

	<screen>A-gep&prompt.root; <userinput>atmconfig natm add 192.168.173.2 hatm0 0 100 llc/snap ubr</userinput>
A-gep&prompt.root; <userinput>atmconfig natm add 192.168.173.3 hatm0 0 101 llc/snap ubr</userinput>
A-gep&prompt.root; <userinput>atmconfig natm add 192.168.173.4 hatm0 0 102 llc/snap ubr</userinput>

B-gep&prompt.root; <userinput>atmconfig natm add 192.168.173.1 hatm0 0 100 llc/snap ubr</userinput>
B-gep&prompt.root; <userinput>atmconfig natm add 192.168.173.3 hatm0 0 103 llc/snap ubr</userinput>
B-gep&prompt.root; <userinput>atmconfig natm add 192.168.173.4 hatm0 0 104 llc/snap ubr</userinput>

C-gep&prompt.root; <userinput>atmconfig natm add 192.168.173.1 hatm0 0 101 llc/snap ubr</userinput>
C-gep&prompt.root; <userinput>atmconfig natm add 192.168.173.2 hatm0 0 103 llc/snap ubr</userinput>
C-gep&prompt.root; <userinput>atmconfig natm add 192.168.173.4 hatm0 0 105 llc/snap ubr</userinput>

D-gep&prompt.root; <userinput>atmconfig natm add 192.168.173.1 hatm0 0 102 llc/snap ubr</userinput>
D-gep&prompt.root; <userinput>atmconfig natm add 192.168.173.2 hatm0 0 104 llc/snap ubr</userinput>
D-gep&prompt.root; <userinput>atmconfig natm add 192.168.173.3 hatm0 0 105 llc/snap ubr</userinput></screen>

	<para>Term&eacute;szetesen nem csak UBR
	  haszn&aacute;lhat&oacute;, hanem minden m&aacute;s olyan
	  forgalmaz&aacute;si be&aacute;ll&iacute;t&aacute;s, amit az
	  ATM k&aacute;rty&aacute;ink ismernek.  Itt most a forgalmi
	  be&aacute;ll&iacute;t&aacute;s nev&eacute;t a
	  hozz&aacute; tartoz&oacute; konkr&eacute;t param&eacute;terek
	  k&ouml;vetik.  Az &man.atmconfig.8; seg&eacute;dprogram
	  haszn&aacute;lat&aacute;hoz &iacute;gy k&eacute;rhet&uuml;nk
	  seg&iacute;ts&eacute;get:</para>

	<screen>&prompt.root; <userinput>atmconfig help natm add</userinput></screen>

	<para>Olvassuk el az &man.atmconfig.8; man
	  oldal&aacute;t.</para>

	<para>Ugyanez a be&aacute;ll&iacute;t&aacute;s az
	  <filename>/etc/rc.conf</filename> &aacute;llom&aacute;ny
	  haszn&aacute;lat&aacute;val is elv&eacute;gezhet&#245;.  Az
	  <hostid>A-gep</hostid> eset&eacute;ben mindez &iacute;gy
	  n&eacute;zne ki:</para>

	<programlisting>network_interfaces="lo0 hatm0"
ifconfig_hatm0="inet 192.168.173.1 up"
natm_static_routes="B-gep C-gep D-gep"
route_B-gep="192.168.173.2 hatm0 0 100 llc/snap ubr"
route_C-gep="192.168.173.3 hatm0 0 101 llc/snap ubr"
route_D-gep="192.168.173.4 hatm0 0 102 llc/snap ubr"</programlisting>

	<para>A <acronym>CLIP</acronym> &uacute;tvonalak pillanatnyi
	  &aacute;llapota &iacute;gy k&eacute;rdezhet&#245; le:</para>

	<screen>A-gep&prompt.root; <userinput>atmconfig natm show</userinput></screen>

      </sect3>
    </sect2>
  </sect1>

  <sect1 id="carp">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Tom</firstname>
	  <surname>Rhodes</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>A K&ouml;z&ouml;s c&iacute;m redundancia protokoll
      (CARP)</title>

    <indexterm><primary>CARP</primary></indexterm>
    <indexterm><primary>K&ouml;z&ouml;s c&iacute;m redundancia
      protokoll</primary></indexterm>

    <para>A K&ouml;z&ouml;s c&iacute;m redundancia protokoll (Common
      Address Redundancy Protocol, avagy <acronym>CARP</acronym>)
      seg&iacute;ts&eacute;g&eacute;vel t&ouml;bb g&eacute;p
      k&eacute;pes egyazon <acronym>IP</acronym>-c&iacute;men osztozni.
      Bizonyos konfigur&aacute;ci&oacute;kban ez a terhel&eacute;s
      eloszt&aacute;s&aacute;ra
      (terhel&eacute;s-kiegyenl&iacute;t&eacute;sre) vagy a
      rendelkez&eacute;sre &aacute;ll&aacute;s
      n&ouml;vel&eacute;s&eacute;re (hibat&#251;r&eacute;sre)
      alkalmazhat&oacute;.  A benne szerepl&#245; g&eacute;pek
      ak&aacute;r elt&eacute;r&#245; <acronym>IP</acronym>-c&iacute;mmel
      is rendelkezhetnek, ahogy azt majd a p&eacute;ld&aacute;ban is
      l&aacute;thatjuk.</para>

    <para>A <acronym>CARP</acronym> t&aacute;mogat&aacute;s&aacute;nak
      enged&eacute;lyez&eacute;s&eacute;hez a &os; rendszermagj&aacute;t
      a k&ouml;vetkez&#245; be&aacute;ll&iacute;t&aacute;ssal kell
      &uacute;jraford&iacute;tanunk:</para>

    <programlisting>device	carp</programlisting>

    <para>A <acronym>CARP</acronym> &aacute;ltal biztos&iacute;tott
      lehet&#245;s&eacute;gek ezut&aacute;n m&aacute;r
      el&eacute;rhet&#245;ek, &eacute;s sz&aacute;mos
      <command>sysctl</command> v&aacute;ltoz&oacute;n kereszt&uuml;l
      &aacute;ll&iacute;that&oacute;ak:</para>

    <informaltable frame="none" pgwide="1">
      <tgroup cols="2">
	<thead>
	  <row>
	    <entry>V&aacute;ltoz&oacute;</entry>
	    <entry>Le&iacute;r&aacute;s</entry>
	  </row>
	</thead>

	<tbody>
	  <row>
	    <entry><varname>net.inet.carp.allow</varname></entry>
	    <entry>A be&eacute;rkez&#245; <acronym>CARP</acronym>
	      csomagok elfogad&aacute;sa.  Alap&eacute;rtelmez&eacute;s
	      szerint enged&eacute;lyezett.</entry>
	  </row>

	  <row>
	    <entry><varname>net.inet.carp.preempt</varname></entry>
	    <entry>Ezzel a be&aacute;ll&iacute;t&aacute;ssal az adott
	      g&eacute;pen az &ouml;sszes <acronym>CARP</acronym>
	      fel&uuml;let le&aacute;ll, ha k&ouml;z&uuml;l&uuml;k
	      b&aacute;rmelyik is
	      m&#251;k&ouml;d&eacute;sk&eacute;ptelenn&eacute;
	      v&aacute;lik.  Alap&eacute;rtelmez&eacute;s szerint
	      tiltott.</entry>
	  </row>

	  <row>
	    <entry><varname>net.inet.carp.log</varname></entry>
	    <entry>A <literal>0</literal> &eacute;rt&eacute;kkel
	      kikapcsoljuk a napl&oacute;z&aacute;st.  Az
	      <literal>1</literal> &eacute;rt&eacute;kkel a rossz
	      <acronym>CARP</acronym> csomagok
	      napl&oacute;z&aacute;s&aacute;t enged&eacute;lyezz&uuml;k.
	      Az ett&#245;l nagyobb &eacute;rt&eacute;kek eset&eacute;n
	      pedig a <acronym>CARP</acronym> fel&uuml;letek
	      v&aacute;ltoz&aacute;sait napl&oacute;zzuk.  Az
	      alap&eacute;rtelmezett &eacute;rt&eacute;ke az
	      <literal>1</literal>.</entry>
	  </row>

	  <row>
	    <entry><varname>net.inet.carp.arpbalance</varname></entry>
	    <entry>Az <acronym>ARP</acronym> protokoll
	      seg&iacute;ts&eacute;g&eacute;vel pr&oacute;b&aacute;lja
	      meg a helyi h&aacute;l&oacute;zati forgalmat
	      mentes&iacute;teni a terhel&eacute;st&#245;l.
	      Alap&eacute;rtelmez&eacute;s szerint tiltott.</entry>
	  </row>

	  <row>
	    <entry><varname>net.inet.carp.suppress_preempt</varname></entry>
	    <entry>Ez a v&aacute;ltoz&oacute;
	      &iacute;r&aacute;sv&eacute;dett, &eacute;s a
	      megszak&iacute;t&aacute;s elnyom&aacute;s&aacute;nak
	      &aacute;llapot&aacute;t mutatja.  A
	      megszak&iacute;t&aacute;s elnyomhat&oacute;, ha a
	      fel&uuml;let egyik linkje nem m&#251;k&ouml;dik.  A
	      <literal>0</literal> &eacute;rt&eacute;k arra utal, hogy a
	      megszak&iacute;t&aacute;st nem nyomt&aacute;k el.  Minden
	      probl&eacute;ma n&ouml;veli ennek a
	      v&aacute;ltoz&oacute;nak az
	      &eacute;rt&eacute;k&eacute;t.</entry>
	  </row>
	</tbody>
      </tgroup>
    </informaltable>

    <para>A <acronym>CARP</acronym> eszk&ouml;z&ouml;k maguk az
      <command>ifconfig</command> paranccsal
      k&eacute;sz&iacute;thet&#245;ek el:</para>

    <screen>&prompt.root; <userinput>ifconfig carp0 create</userinput></screen>

    <para>Egy val&oacute;s k&ouml;rnyezetben az ilyen fel&uuml;leteknek
      egy <acronym>VHID</acronym> n&eacute;ven ismert egyedi
      azonos&iacute;t&oacute;val kell rendelkezni&uuml;k.  Ez a
      <acronym>VHID</acronym> vagy m&aacute;s n&eacute;ven a
      virtu&aacute;lis g&eacute;pazonos&iacute;t&oacute; (azaz Virtual
      Host Identification) fogja a g&eacute;p&uuml;nket a
      h&aacute;l&oacute;zat t&ouml;bbi elem&eacute;t&#245;l
      megk&uuml;l&ouml;nb&ouml;ztetni.</para>

    <sect2>
      <title>A CARP felhaszn&aacute;l&aacute;sa a rendelkez&eacute;sre
	&aacute;ll&aacute;s jav&iacute;t&aacute;s&aacute;ban</title>

      <para>A <acronym>CARP</acronym> haszn&aacute;lat&aacute;nak egyik
	m&oacute;dja, ahogy arra m&aacute;r kor&aacute;bban is utaltunk,
	a szerverek rendelkez&eacute;sre &aacute;ll&aacute;s&aacute;nak
	feljav&iacute;t&aacute;sa.  Ebben a p&eacute;ld&aacute;ban
	h&aacute;rom g&eacute;ppel fogunk hibat&#251;r&eacute;st
	biztos&iacute;tani, melyik mindegyike egyedi
	<acronym>IP</acronym>-c&iacute;mmel rendelkezik &eacute;s
	ugyanazt a webes tartalmat szolg&aacute;ltatj&aacute;k.  A
	g&eacute;peket egy Round Robin rendszer&#251;
	(k&ouml;rbej&aacute;r&oacute;) n&eacute;vfelold&aacute;ssal
	egy&uuml;tt haszn&aacute;ljuk.  A tartal&eacute;k
	g&eacute;p&uuml;nknek lesz m&eacute;g tov&aacute;bbi k&eacute;t
	<acronym>CARP</acronym> fel&uuml;lete, k&uuml;l&ouml;n a szerver
	<acronym>IP</acronym>-c&iacute;meihez tartoz&oacute; egyes webes
	tartalmakhoz.  Amikor valami meghib&aacute;sodik, a
	tartal&eacute;k szerver &aacute;tveszi a meghib&aacute;sodott
	g&eacute;p <acronym>IP</acronym>-c&iacute;m&eacute;t.  Ilyenkor
	a hiba teljesen &eacute;szrev&eacute;tlen marad a
	felhaszn&aacute;l&oacute;k sz&aacute;m&aacute;ra.  A
	tartal&eacute;k szerveren a t&ouml;bbi szerverrel egyez&#245;
	tartalomnak &eacute;s szolg&aacute;ltat&aacute;soknak kell
	megjelennie, hogy b&aacute;rmikor &aacute;t tudja
	t&#245;l&uuml;k venni a forgalmat.</para>

      <para>A h&aacute;l&oacute;zati neveikt&#245;l &eacute;s a
	virtu&aacute;lis azonos&iacute;t&oacute;ikt&oacute;l eltekintve
	a k&eacute;t g&eacute;pet ugyan&uacute;gy kell
	be&aacute;ll&iacute;tani.  Ebben a p&eacute;ld&aacute;ban a
	g&eacute;peket most az <hostid>a-gep.minta.org</hostid>
	&eacute;s <hostid>b-gep.minta.org</hostid> nevekkel
	l&aacute;ttuk el.  El&#245;sz&ouml;r is a
	<acronym>CARP</acronym>
	be&aacute;ll&iacute;t&aacute;s&aacute;hoz el kell
	helyezn&uuml;nk a megfelel&#245; hivatkoz&aacute;sokat az
	<filename>rc.conf</filename> &aacute;llom&aacute;nyban.  Az
	<hostid>a-gep.minta.org</hostid> eset&eacute;ben az
	<filename>rc.conf</filename> &aacute;llom&aacute;ny a
	k&ouml;vetkez&#245; sorokat tartalmazza:</para>

      <programlisting>hostname="a-gep.minta.org"
ifconfig_fxp0="inet 192.168.1.3 netmask 255.255.255.0"
cloned_interfaces="carp0"
ifconfig_carp0="vhid 1 pass testpass 192.168.1.50/24"</programlisting>

      <para>Mik&ouml;zben a <hostid>b-gep.minta.org</hostid> az
	<filename>rc.conf</filename> &aacute;llom&aacute;ny&aacute;ban
	ezeket adjuk meg:</para>

      <programlisting>hostname="b-gep.minta.org"
ifconfig_fxp0="inet 192.168.1.4 netmask 255.255.255.0"
cloned_interfaces="carp0"
ifconfig_carp0="vhid 2 pass testpass 192.168.1.51/24"</programlisting>

      <note>
	<para>Nagyon fontos, hogy az <command>ifconfig</command> parancs
	  <literal>pass</literal> param&eacute;ter&eacute;vel megadott
	  jelszavak megegyezzenek.  A <devicename>carp</devicename>
	  eszk&ouml;z&ouml;k csak a megfelel&#245; jelsz&oacute;t
	  birtokl&oacute; g&eacute;peket fogadj&aacute;k el.  A
	  virtu&aacute;lis g&eacute;pazonos&iacute;t&oacute;nak azonban
	  minden esetben el kell t&eacute;rnie.</para>
      </note>

      <para>A harmadik, <hostid>szolgaltato.minta.org</hostid>
	c&iacute;mmel rendelkez&#245; g&eacute;pet fogjuk
	felk&eacute;sz&iacute;teni az el&#245;bbi g&eacute;pek
	meghib&aacute;sod&aacute;s&aacute;ra felk&eacute;sz&iacute;teni.
	Ennek a g&eacute;pnek k&eacute;t <devicename>carp</devicename>
	eszk&ouml;zre lesz sz&uuml;ks&eacute;ge, melyek az egyes
	g&eacute;peket kezelik.  Az ehhez illeszked&#245; sorok valahogy
	&iacute;gy fognak kin&eacute;zni az <filename>rc.conf</filename>
	&aacute;llom&aacute;nyban:</para>

      <programlisting>hostname="szolgaltato.minta.org"
ifconfig_fxp0="inet 192.168.1.5 netmask 255.255.255.0"
cloned_interfaces="carp0 carp1"
ifconfig_carp0="vhid 1 advskew 100 pass testpass 192.168.1.50/24"
ifconfig_carp1="vhid 2 advskew 100 pass testpass 192.168.1.51/24"</programlisting>

      <para>K&eacute;t <devicename>carp</devicename> eszk&ouml;z
	haszn&aacute;lat&aacute;val a
	<hostid>szolgaltato.minta.org</hostid> k&eacute;pes
	&eacute;szlelni &eacute;s &aacute;tvenni b&aacute;rmelyik olyan
	g&eacute;p <acronym>IP</acronym>-c&iacute;m&eacute;t, amely nem
	v&aacute;laszol.</para>

      <note>
	<para>Az alap &os; rendszermag haszn&aacute;lata eset&eacute;n
	  <emphasis>el&#245;fordulhat</emphasis>, hogy a
	  megszak&iacute;t&aacute;s (a <quote>preemption</quote>
	  opci&oacute;) enged&eacute;lyezett.  Amennyiben &iacute;gy
	  lenne, a <hostid>szolgaltato.minta.org</hostid> nem fogja
	  minden esetben fogja rendesen visszaadni az
	  <acronym>IP</acronym>-c&iacute;met az eredeti
	  tulajdonos&aacute;nak.  Ilyenkor a rendszergazd&aacute;nak
	  kell ezt manu&aacute;lisan megtennie.  Teh&aacute;t a
	  k&ouml;vetkez&#245; parancsot kell kiadnia a
	  <hostid>szolgaltato.minta.org</hostid> g&eacute;pen:</para>

	<screen>&prompt.root; <userinput>ifconfig carp0 down && ifconfig carp0 up</userinput></screen>

	<para>Ezt az adott g&eacute;phez tartoz&oacute;
	  <devicename>carp</devicename> fel&uuml;lettel kell
	  megcsin&aacute;lni.</para>
      </note>

      <para>Innent&#245;l a <acronym>CARP</acronym> m&aacute;r teljesen
	enged&eacute;lyezhet&#245; &eacute;s k&eacute;szen &aacute;ll a
	tesztel&eacute;sre.  A tesztel&eacute;shez vagy a
	h&aacute;l&oacute;zati rendszert kell
	&uacute;jraind&iacute;tani, vagy a g&eacute;peket.</para>

      <para>Tov&aacute;bbi inform&aacute;ci&oacute;kat a &man.carp.4;
	man oldal&aacute;n tal&aacute;lhatunk.</para>

    </sect2>
  </sect1>
</chapter>

<!--
     Local Variables:
     mode: sgml
     sgml-declaration: "../chapter.decl"
     sgml-indent-data: t
     sgml-omittag: nil
     sgml-always-quote-attributes: t
     sgml-parent-document: ("../book.sgml" "part" "chapter")
     End:
-->
<!--  LocalWords:  config mnt www -->
