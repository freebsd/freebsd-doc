<!--
     The FreeBSD Documentation Project

     $FreeBSD$
-->

<!-- The FreeBSD Hungarian Documentation Project
     Translated by: PALI, Gabor <pgj@FreeBSD.org>
     %SOURCE%	en_US.ISO8859-1/books/handbook/config/chapter.sgml
     %SRCID%	1.244
-->

<chapter id="config-tuning" lang="hu">
  <chapterinfo>
    <authorgroup>
      <author>
	<firstname>Chern</firstname>
	<surname>Lee</surname>
	<contrib>&Iacute;rta: </contrib>
      </author>
    </authorgroup>
    <authorgroup>
      <author>
	<firstname>Mike</firstname>
	<surname>Smith</surname>
	<contrib>Az alapj&aacute;ul szolg&aacute;l&oacute;
	  bemutat&aacute;st &iacute;rta: </contrib>
      </author>
    </authorgroup>
    <authorgroup>
      <author>
	<firstname>Matt</firstname>
	<surname>Dillon</surname>
	<contrib>Valamint az alapj&aacute;t k&eacute;pz&#245; tuning(7)
	  oldalt &iacute;rta: </contrib>
      </author>
    </authorgroup>
  </chapterinfo>

  <title>Be&aacute;ll&iacute;t&aacute;s &eacute;s
    finomhangol&aacute;s</title>

  <sect1 id="config-synopsis">
    <title>&Aacute;ttekint&eacute;s</title>

    <indexterm><primary>a rendszer
      be&aacute;ll&iacute;t&aacute;sa</primary></indexterm>
    <indexterm><primary>a rendszer
      finomhangol&aacute;sa</primary></indexterm>

    <para>A &os; egyik fontos szempontja a rendszer megfelel&#245;
      be&aacute;ll&iacute;t&aacute;sa, aminek
      seg&iacute;ts&eacute;g&eacute;vel elker&uuml;lhetj&uuml;k a
      k&eacute;s&#245;bbi friss&iacute;t&eacute;sek sor&aacute;n
      keletkez&#245; kellemetlens&eacute;geket.  Ez a fejezet a &os;
      be&aacute;ll&iacute;t&aacute;si folyamat&aacute;b&oacute;l
      k&iacute;v&aacute;n min&eacute;l t&ouml;bbet bemutatni,
      k&ouml;zt&uuml;k a &os; rendszerek finomhangol&aacute;s&aacute;ra
      sz&aacute;nt param&eacute;tereket.</para>

    <para>A fejezet elolvas&aacute;sa sor&aacute;n
      megismerj&uuml;k:</para>

    <itemizedlist>
      <listitem>
	<para>hogyan dolgozzunk hat&eacute;konyan az
	  &aacute;llom&aacute;nyrendszerekkel &eacute;s a
	  lapoz&oacute;&aacute;llom&aacute;nyokkal;</para>
      </listitem>
      <listitem>
	<para>az <filename>rc.conf</filename>
	  be&aacute;ll&iacute;t&aacute;s&aacute;nak alapjait &eacute;s a
	  <filename class="directory">/usr/local/etc/rc.d</filename>
	  k&ouml;nyvt&aacute;rban tal&aacute;lhat&oacute;
	  ind&iacute;t&aacute;si rendszert;</para>
      </listitem>
      <listitem>
	<para>hogyan &aacute;ll&iacute;tsunk be &eacute;s
	  pr&oacute;b&aacute;ljunk ki egy h&aacute;l&oacute;zati
	  k&aacute;rty&aacute;t;</para>
      </listitem>
      <listitem>
	<para>hogyan &aacute;ll&iacute;tsunk be virtu&aacute;lis
	  c&iacute;meket a h&aacute;l&oacute;zati
	  eszk&ouml;zeinken;</para>
      </listitem>
      <listitem>
	<para>hogyan haszn&aacute;ljuk az <filename
	    class="directory">/etc</filename> k&ouml;nyvt&aacute;rban
	  megtal&aacute;lhat&oacute; k&uuml;l&ouml;nf&eacute;le
	  konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nyokat;</para>
      </listitem>
      <listitem>
	<para>hogyan hangoljuk a &os; m&#251;k&ouml;d&eacute;s&eacute;t
	  a <command>sysctl</command> v&aacute;ltoz&oacute;inak
	  seg&iacute;ts&eacute;g&eacute;vel;</para>
      </listitem>
      <listitem>
	<para>hogyan hangoljuk a lemezek
	  teljes&iacute;tm&eacute;ny&eacute;t &eacute;s
	  m&oacute;dos&iacute;tsuk a rendszermag
	  korl&aacute;toz&aacute;sait.</para>
      </listitem>
    </itemizedlist>

    <para>A fejezet elolvas&aacute;s&aacute;hoz aj&aacute;nlott:</para>

    <itemizedlist>
      <listitem>
	<para>a &unix; &eacute;s a &os; alapjainak
	  meg&eacute;rt&eacute;se (<xref linkend="basics">);</para>
      </listitem>
      <listitem>
	<para>a rendszermag be&aacute;ll&iacute;t&aacute;s&aacute;hoz
	  &eacute;s ford&iacute;t&aacute;s&aacute;hoz
	  k&ouml;t&#245;d&#245; alapok ismerete (<xref
	  linkend="kernelconfig">).</para>
      </listitem>
    </itemizedlist>
  </sect1>

  <sect1 id="configtuning-initial">
    <title>Kezdeti be&aacute;ll&iacute;t&aacute;sok</title>

    <sect2>
      <title>A part&iacute;ci&oacute;k kioszt&aacute;sa</title>

      <indexterm><primary>part&iacute;ci&oacute;kioszt&aacute;s</primary></indexterm>
      <indexterm><primary><filename class="directory">/etc</filename></primary></indexterm>
      <indexterm><primary><filename class="directory">/var</filename></primary></indexterm>
      <indexterm><primary><filename class="directory">/usr</filename></primary></indexterm>

      <sect3>
	<title>Alappart&iacute;ci&oacute;k</title>

	<para>Amikor a &man.bsdlabel.8; vagy a &man.sysinstall.8;
	  seg&iacute;ts&eacute;g&eacute;vel
	  &aacute;llom&aacute;nyrendszereket telep&iacute;t&uuml;nk, nem
	  szabad figyelmen k&iacute;v&uuml;l hagynunk a t&eacute;nyt,
	  hogy a merevlemezes egys&eacute;gekben a k&uuml;ls&#245;
	  s&aacute;vokb&oacute;l gyorsabban lehet
	  hozz&aacute;f&eacute;rni az adatokhoz, mint a
	  bels&#245;kb&#245;l.  Emiatt a kisebb &eacute;s gyakrabban
	  el&eacute;rni k&iacute;v&aacute;nt
	  &aacute;llom&aacute;nyrendszereket a meghajt&oacute;
	  lemez&eacute;nek k&uuml;lsej&eacute;hez k&ouml;zel kell
	  l&eacute;trehozni, m&iacute;g p&eacute;ld&aacute;ul a
	  <filename class="directory">/usr</filename>
	  part&iacute;ci&oacute;hoz hasonl&oacute; nagyobb
	  part&iacute;ci&oacute;kat annak bels&#245; r&eacute;sze
	  fel&eacute;.  A part&iacute;ci&oacute;kat a
	  k&ouml;vetkez&#245; sorrendben &eacute;rdemes
	  kialak&iacute;tani: gy&ouml;k&eacute;r
	  (rendszerind&iacute;t&oacute;),
	  lapoz&oacute;&aacute;llom&aacute;ny, <filename
	    class="directory">/var</filename> &eacute;s <filename
	  class="directory">/usr</filename>.</para>

	<para>A <filename class="directory">/var</filename>
	  m&eacute;ret&eacute;nek t&uuml;kr&ouml;znie kell a
	  sz&aacute;m&iacute;t&oacute;g&eacute;p
	  sz&aacute;nd&eacute;kolt haszn&aacute;lat&aacute;t.  A
	  <filename class="directory">/var</filename>
	  part&iacute;ci&oacute;n foglalnak helyet a
	  felhaszn&aacute;l&oacute;k postal&aacute;d&aacute;i, a
	  napl&oacute;&aacute;llom&aacute;nyok &eacute;s a
	  nyomtat&aacute;si sorok.  A postal&aacute;d&aacute;k &eacute;s
	  a napl&oacute;&aacute;llom&aacute;nyok eg&eacute;szen
	  v&aacute;ratlan m&eacute;rt&eacute;kben is k&eacute;pesek
	  megn&ouml;vekedni att&oacute;l f&uuml;gg&#245;en, hogy mennyi
	  felhaszn&aacute;l&oacute;nk van a rendszerben &eacute;s hogy
	  mekkora napl&oacute;kat tartunk meg.  Itt a legt&ouml;bb
	  felhaszn&aacute;l&oacute;nak soha nem lesz
	  sz&uuml;ks&eacute;ge egy gigabyte-n&aacute;l t&ouml;bb
	  helyre.</para>

	<note>
	  <para>Bizonyos esetekben a <filename
	      class="directory">/var/tmp</filename>
	    k&ouml;nyvt&aacute;rban az&eacute;rt enn&eacute;l
	    t&ouml;bb t&aacute;rter&uuml;let sz&uuml;ks&eacute;geltetik.
	    Amikor a &man.pkg.add.1; seg&iacute;ts&eacute;g&eacute;vel
	    egy friss szoftvert telep&iacute;t&uuml;nk a
	    rendszer&uuml;nkre, akkor a program a <filename
	    class="directory">/var/tmp</filename> k&ouml;nyvt&aacute;rba
	    t&ouml;m&ouml;r&iacute;ti ki a hozz&aacute; tartoz&oacute;
	    csomag tartalm&aacute;t.  Ez&eacute;rt a nagyobb
	    szoftvercsomagok, mint p&eacute;ld&aacute;ul a
	    <application>Firefox</application> vagy az
	    <application>OpenOffice</application> eset&eacute;n gondok
	    mer&uuml;lhetnek fel, ha nem rendelkez&uuml;nk elegend&#245;
	    szabad ter&uuml;lettel a <filename
	      class="directory">/var/tmp</filename>
	    k&ouml;nyvt&aacute;rban.</para>
	</note>

	<para>A <filename class="directory">/usr</filename>
	  part&iacute;ci&oacute; tartalmaz sz&aacute;mos, a rendszer
	  m&#251;k&ouml;d&eacute;s&eacute;hez elengedhetetlen&uuml;l
	  fontos &aacute;llom&aacute;nyt, t&ouml;bbek k&ouml;zt a portok
	  gy&#251;jtem&eacute;ny&eacute;t (aj&aacute;nlott, l&aacute;sd
	  &man.ports.7;) &eacute;s a forr&aacute;sk&oacute;dot
	  (v&aacute;laszthat&oacute;).  A portok &eacute;s az
	  alaprendszer forr&aacute;sai telep&iacute;t&eacute;s
	  sor&aacute;n v&aacute;laszthat&oacute;ak, de
	  telep&iacute;t&eacute;s&uuml;k eset&eacute;n akkor ezen a
	  part&iacute;ci&oacute;n legal&aacute;bb k&eacute;t
	  gigabyte-nyi hely aj&aacute;nlott.</para>

	<para>Vegy&uuml;k figyelembe a t&aacute;rbeli ig&eacute;nyeket,
	  amikor megv&aacute;lasztjuk a part&iacute;ci&oacute;k
	  m&eacute;ret&eacute;t.  Igen kellemetlen lehet, amikor
	  &uacute;gy futunk ki az egyik part&iacute;ci&oacute;n a szabad
	  helyb&#245;l, hogy a m&aacute;sikat alig
	  haszn&aacute;ljuk.</para>

	<note>
	  <para>Egyes felhaszn&aacute;l&oacute;k szerint
	    el&#245;fordulhat, hogy a &man.sysinstall.8;
	    <literal>Auto-defaults</literal> opci&oacute;ja a <filename
	      class="directory">/var</filename> &eacute;s <filename
	      class="directory">/</filename> part&iacute;ci&oacute;k
	    m&eacute;ret&eacute;t t&uacute;l kicsire v&aacute;lasztja.
	    Particion&aacute;ljunk okosan &eacute;s
	    nagylelk&#251;en!</para>
	</note>
      </sect3>

      <sect3 id="swap-design">
	<title>A lapoz&oacute;&aacute;llom&aacute;ny
	  part&iacute;ci&oacute;ja</title>

	<indexterm><primary>a lapoz&oacute;&aacute;llom&aacute;ny
	  m&eacute;rete</primary></indexterm>
	<indexterm><primary>a lapoz&oacute;&aacute;llom&aacute;ny
	  part&iacute;ci&oacute;ja</primary></indexterm>

	<para>&Aacute;ltal&aacute;nos szab&aacute;ly, hogy a
	  lapoz&oacute;&aacute;llom&aacute;nyt t&aacute;rol&oacute;
	  part&iacute;ci&oacute; m&eacute;rete legyen a rendszer fizikai
	  mem&oacute;ri&aacute;j&aacute;nak (RAM) k&eacute;tszerese.
	  P&eacute;ld&aacute;ul, ha a
	  sz&aacute;m&iacute;t&oacute;g&eacute;p&uuml;nk
	  128&nbsp;megabyte mem&oacute;ri&aacute;val rendelkezik, akkor
	  a lapoz&oacute;&aacute;llom&aacute;ny m&eacute;ret&eacute;nek
	  256&nbsp;megabyte-nak kell lennie.  Az enn&eacute;l kevesebb
	  mem&oacute;ri&aacute;t maguknak tud&oacute; rendszerek
	  t&ouml;bb lapoz&oacute;&aacute;llom&aacute;nnyal jobban
	  teljes&iacute;tenek.  256&nbsp;megabyte-n&aacute;l kevesebb
	  lapoz&oacute;&aacute;llom&aacute;nyt semmik&eacute;ppen sem
	  aj&aacute;nlunk, &eacute;s ink&aacute;bb a fizikai
	  mem&oacute;ri&aacute;t &eacute;rdemes
	  b&#245;v&iacute;ten&uuml;nk.  A rendszermag virtu&aacute;lis
	  mem&oacute;ri&aacute;t kezel&#245; lapoz&aacute;si
	  algoritmusait &uacute;gy &aacute;ll&iacute;tott&aacute;k be,
	  hogy abban az esetben teljes&iacute;tsenek a legjobban, ha a
	  lapoz&oacute;&aacute;llom&aacute;ny m&eacute;rete
	  legal&aacute;bb k&eacute;tszerese a k&ouml;zponti
	  mem&oacute;ria mennyis&eacute;g&eacute;nek.  A t&uacute;l
	  kicsi lapoz&oacute;&aacute;llom&aacute;ny
	  be&aacute;ll&iacute;t&aacute;sa rontja a virtu&aacute;lis
	  mem&oacute;ria lapkeres&eacute;s&eacute;si rutinj&aacute;nak
	  hat&eacute;konys&aacute;g&aacute;t &eacute;s a mem&oacute;ria
	  b&#245;v&iacute;t&eacute;se eset&eacute;n m&eacute;g
	  tov&aacute;bbi gondokat is okozhat.</para>

	<para>A t&ouml;bb SCSI-lemezzel (vagy a
	  k&uuml;l&ouml;nb&ouml;z&#245; vez&eacute;rl&#245;kre
	  csatlakoztatott t&ouml;bb IDE-lemezzel) b&iacute;r&oacute;
	  nagyobb rendszerek eset&eacute;ben &eacute;rdemes minden egyes
	  (de legfeljebb n&eacute;gy) meghajt&oacute;ra
	  be&aacute;ll&iacute;tani lapoz&oacute;&aacute;llom&aacute;nyt.
	  A lapoz&oacute;&aacute;llom&aacute;nyoknak k&ouml;zel azonos
	  m&eacute;ret&#251;nek kell lenni&uuml;k.  A rendszermag
	  tetsz&#245;leges m&eacute;ret&#251;eket k&eacute;pes kezelni,
	  azonban a belsej&eacute;ben alkalmazott adatszerkezetek a
	  legnagyobb lapoz&oacute;&aacute;llom&aacute;ny
	  m&eacute;ret&eacute;nek n&eacute;gyszeres&eacute;ig
	  k&eacute;pesek n&ouml;vekedni.  Ha a
	  lapoz&oacute;&aacute;llom&aacute;nyokat
	  nagyj&aacute;b&oacute;l ugyanazon a m&eacute;reten tartjuk,
	  akkor a rendszermag k&eacute;pes lesz a lapoz&aacute;shoz
	  felhaszn&aacute;lt ter&uuml;letet optim&aacute;lisan elosztani
	  a lemezek k&ouml;z&ouml;tt.  A nagyobb
	  lapoz&oacute;&aacute;llom&aacute;nyok haszn&aacute;lata
	  m&eacute;g akkor is j&oacute;l j&ouml;n, ha nem is
	  haszn&aacute;ljuk annyira.  Seg&iacute;ts&eacute;g&eacute;vel
	  sokkal k&ouml;nnyebben talpra tudunk &aacute;llni egy
	  elszabadult program tombol&aacute;s&aacute;b&oacute;l,
	  &eacute;s nem kell r&ouml;gt&ouml;n
	  &uacute;jraind&iacute;tanunk a rendszert.</para>
      </sect3>

      <sect3>
	<title>Mi&eacute;rt particion&aacute;ljunk?</title>

	<para>Egyes felhaszn&aacute;l&oacute;k &uacute;gy
	  gondolj&aacute;k, hogy egyetlen nagyobb m&eacute;ret&#251;
	  part&iacute;ci&oacute; mindenre megfelel, &aacute;m ez a
	  gondolat t&ouml;bb okb&oacute;l is helytelennek
	  tekinthet&#245;.  El&#245;sz&ouml;r is, minden egyes
	  part&iacute;ci&oacute;nak elt&eacute;r a
	  m&#251;k&ouml;d&eacute;si jellemz&#245;je, &eacute;s
	  k&uuml;l&ouml;nv&aacute;laszt&aacute;sukkal
	  lehet&#245;v&eacute; v&aacute;lik az
	  &aacute;llom&aacute;nyrendszerek megfelel&#245;
	  behangol&aacute;sa.  P&eacute;ld&aacute;ul a
	  rendszerind&iacute;t&aacute;shoz haszn&aacute;lt &eacute;s a
	  <filename class="directory">/usr</filename>
	  part&iacute;ci&oacute;kat t&ouml;bbs&eacute;g&eacute;ben csak
	  olvas&aacute;sra haszn&aacute;lj&aacute;k, &eacute;s nem sokat
	  &iacute;rnak r&aacute;juk.  Ek&ouml;zben a <filename
	    class="directory">/var</filename> &eacute;s <filename
	    class="directory">/var/tmp</filename>
	  k&ouml;nyvt&aacute;rakban zajlik az &iacute;r&aacute;sok
	  &eacute;s olvas&aacute;sok t&uacute;lnyom&oacute;
	  r&eacute;sze.</para>

	<para>A rendszer megfelel&#245; feloszt&aacute;s&aacute;val a
	  kisebb, intenz&iacute;vebben &iacute;rt
	  part&iacute;ci&oacute;kon megjelen&#245;
	  t&ouml;redezetts&eacute;g nem sziv&aacute;rog &aacute;t a
	  t&ouml;bbs&eacute;g&eacute;ben csak olvas&aacute;sra
	  haszn&aacute;lt part&iacute;ci&oacute;kra.  Ha a sokat
	  &iacute;rt part&iacute;ci&oacute;kat k&ouml;zel tartjuk a
	  lemez sz&eacute;l&eacute;hez, akkor azokon a
	  part&iacute;ci&oacute;kon n&ouml;vekszik az I/O
	  teljes&iacute;tm&eacute;nye, ahol az a leggyakrabban
	  megjelenik.  Mivel mostans&aacute;g az I/O
	  teljes&iacute;tm&eacute;ny&eacute;re ink&aacute;bb a nagyobb
	  part&iacute;ci&oacute;k eset&eacute;n van sz&uuml;ks&eacute;g,
	  azzal nem &eacute;r&uuml;nk el ebben k&uuml;l&ouml;n&ouml;sebb
	  m&eacute;rt&eacute;k&#251; n&ouml;veked&eacute;st, ha a
	  <filename class="directory">/var</filename>
	  part&iacute;ci&oacute;t a lemez sz&eacute;l&eacute;re toljuk.
	  Befejez&eacute;sk&eacute;ppen hozz&aacute;tessz&uuml;k, hogy
	  ennek vannak biztons&aacute;gi megfontol&aacute;sai is.  Egy
	  kisebb &eacute;s takarosabb rendszerind&iacute;t&oacute;
	  part&iacute;ci&oacute;, ami t&ouml;bbnyire
	  &iacute;r&aacute;sv&eacute;dett, nagyobb es&eacute;llyel
	  &eacute;l t&uacute;l egy cs&uacute;fos
	  rendszer&ouml;sszeoml&aacute;st.</para>
      </sect3>
    </sect2>
  </sect1>

  <sect1 id="configtuning-core-configuration">
    <title>A mag be&aacute;ll&iacute;t&aacute;sa</title>

    <indexterm>
      <primary>rc &aacute;llom&aacute;nyok</primary>
      <secondary><filename>rc.conf</filename></secondary>
    </indexterm>

    <para>A rendszer be&aacute;ll&iacute;t&aacute;saira vonatkoz&oacute;
      inform&aacute;ci&oacute;k k&ouml;zponti lel&#245;helye az
      <filename>/etc/rc.conf</filename> &aacute;llom&aacute;ny.  Ez az
      &aacute;llom&aacute;ny tartalmazza a
      be&aacute;ll&iacute;t&aacute;sokra vonatkoz&oacute; adatok
      sz&eacute;les k&ouml;r&eacute;t, amelyet els&#245;sorban a
      rendszer indul&aacute;sa sor&aacute;n a rendszer
      be&aacute;ll&iacute;t&aacute;s&aacute;ra haszn&aacute;lnak.  Erre
      a neve is utal: ez az <filename>rc*</filename>
      &aacute;llom&aacute;nyok konfigur&aacute;ci&oacute;s
      &aacute;llom&aacute;nya.</para>

    <para>A rendszergazda az <filename>rc.conf</filename>
      &aacute;llom&aacute;nyban tudja fel&uuml;lb&iacute;r&aacute;lni az
      <filename>/etc/defaults/rc.conf</filename>
      &aacute;llom&aacute;nyban szerepl&#245; alap&eacute;rtelmezett
      be&aacute;ll&iacute;t&aacute;sokat.  Az
      alap&eacute;rtelmez&eacute;seket tartalmaz&oacute;
      &aacute;llom&aacute;nyt nem szabad k&ouml;zvetlen&uuml;l
      &aacute;tm&aacute;solni az <filename
	class="directory">/etc</filename> k&ouml;nyvt&aacute;rba, hiszen
      alap&eacute;rtelmezett &eacute;rt&eacute;keket tartalmaz, nem
      pedig mint&aacute;kat.  Minden rendszerf&uuml;gg&#245;
      be&aacute;ll&iacute;t&aacute;st mag&aacute;ban az
      <filename>rc.conf</filename> &aacute;llom&aacute;nyban kell
      elv&eacute;gezni.</para>

    <para>Sz&aacute;mos strat&eacute;gia l&eacute;tezik a t&ouml;megesen
      adminisztr&aacute;lt
      sz&aacute;m&iacute;t&oacute;g&eacute;pekn&eacute;l a
      k&ouml;z&ouml;s &eacute;s rendszerf&uuml;gg&#245;
      be&aacute;ll&iacute;t&aacute;sok
      k&uuml;l&ouml;nv&aacute;laszt&aacute;s&aacute;ra, ez&aacute;ltal a
      karbantart&aacute;si k&ouml;lts&eacute;gek
      cs&ouml;kkent&eacute;s&eacute;re.  A k&ouml;z&ouml;s
      be&aacute;ll&iacute;t&aacute;sokat aj&aacute;nlott egy
      m&aacute;sik helyre, p&eacute;ld&aacute;ul az
      <filename>/etc/rc.conf.site</filename> &aacute;llom&aacute;nyba
      rakni, majd hivatkozni erre a kiz&aacute;r&oacute;lag csak
      rendszerf&uuml;gg&#245; inform&aacute;ci&oacute;kat
      tartalmaz&oacute; <filename>/etc/rc.conf</filename>
      &aacute;llom&aacute;nyb&oacute;l.</para>

    <para>Mivel az <filename>rc.conf</filename> &aacute;llom&aacute;nyt
      az &man.sh.1; dolgozza fel, ezt el&eacute;g k&ouml;nnyen el tudjuk
      &eacute;rni.  P&eacute;ld&aacute;ul:</para>

    <itemizedlist>
      <listitem><para>rc.conf:</para>
<programlisting>	. /etc/rc.conf.site
	hostname="node15.example.com"
	network_interfaces="fxp0 lo0"
	ifconfig_fxp0="inet 10.1.1.1"</programlisting></listitem>
      <listitem><para>rc.conf.site:</para>
<programlisting>	defaultrouter="10.1.1.254"
	saver="daemon"
	blanktime="100"</programlisting></listitem>
    </itemizedlist>

    <para>Az <filename>rc.conf.site</filename> &aacute;llom&aacute;ny
      ezt k&ouml;vet&#245;en az <command>rsync</command> parancs
      haszn&aacute;lat&aacute;val m&aacute;r
      sz&eacute;tsz&oacute;rhat&oacute; a rendszerben, mik&ouml;zben az
      <filename>rc.conf</filename> &aacute;llom&aacute;ny
      mindenkin&eacute;l egyedi marad.</para>

    <para>Ha a rendszert a &man.sysinstall.8; vagy a <command>make
      world</command> haszn&aacute;lat&aacute;val
      friss&iacute;tj&uuml;k, akkor az <filename>rc.conf</filename>
      tartalma nem &iacute;r&oacute;dik fel&uuml;l, &iacute;gy a
      rendszer be&aacute;ll&iacute;t&aacute;sair&oacute;l
      sz&oacute;l&oacute; adatok nem vesznek el.</para>

  </sect1>

  <sect1 id="configtuning-appconfig">
    <title>Az alkalmaz&aacute;sok
      be&aacute;ll&iacute;t&aacute;sa</title>

    <para>A telep&iacute;tett alkalmaz&aacute;sok
      &aacute;ltal&aacute;ban saj&aacute;t konfigur&aacute;ci&oacute;s
      &aacute;llom&aacute;nyokkal, azok pedig saj&aacute;t
      form&aacute;tummal stb.  rendelkeznek.  Fontos, hogy ezeket az
      &aacute;llom&aacute;nyokat az alaprendszert&#245;l
      elk&uuml;l&ouml;n&iacute;tve t&aacute;roljuk, ez&aacute;ltal a
      csomagkezel&#245; eszk&ouml;z&ouml;k k&ouml;nnyen r&aacute;juk
      tudjanak tal&aacute;lni &eacute;s dolgozni vel&uuml;k.</para>

    <indexterm><primary>/usr/local/etc</primary></indexterm>

    <para>Ezeket az &aacute;llom&aacute;nyokat &aacute;ltal&aacute;ban a
      <filename class="directory">/usr/local/etc</filename>
      k&ouml;nyvt&aacute;rban tal&aacute;ljuk meg.  Amennyiben egy
      alkalmaz&aacute;shoz t&ouml;bb konfigur&aacute;ci&oacute;s
      &aacute;llom&aacute;ny is tartozik, akkor ahhoz ezen bel&uuml;l
      egy k&uuml;l&ouml;n alk&ouml;nyvt&aacute;r j&ouml;n
      l&eacute;tre.</para>

    <para>Norm&aacute;lis esetben, amikor egy portot vagy csomagot
      telep&iacute;t&uuml;nk, minta konfigur&aacute;ci&oacute;s
      &aacute;llom&aacute;nyokat is kapunk.  Ezek nev&eacute;ben
      t&ouml;bbnyire a <filename>.default</filename> ut&oacute;tag
      szerepel.  Ha m&eacute;g nincs konfigur&aacute;ci&oacute;s
      &aacute;llom&aacute;ny az adott alkalmaz&aacute;shoz, akkor a
      <filename>.default</filename> jelz&eacute;s&#251;
      &aacute;llom&aacute;nyokb&oacute;l ez
      l&eacute;trehozhat&oacute;.</para>

    <para>P&eacute;ldak&eacute;ppen most tekints&uuml;k a <filename
	class="directory">/usr/local/etc/apache</filename>
      k&ouml;nyvt&aacute;r tartalm&aacute;t:</para>

<literallayout class="monospaced">-rw-r--r--  1 root  wheel   2184 May 20  1998 access.conf
-rw-r--r--  1 root  wheel   2184 May 20  1998 access.conf.default
-rw-r--r--  1 root  wheel   9555 May 20  1998 httpd.conf
-rw-r--r--  1 root  wheel   9555 May 20  1998 httpd.conf.default
-rw-r--r--  1 root  wheel  12205 May 20  1998 magic
-rw-r--r--  1 root  wheel  12205 May 20  1998 magic.default
-rw-r--r--  1 root  wheel   2700 May 20  1998 mime.types
-rw-r--r--  1 root  wheel   2700 May 20  1998 mime.types.default
-rw-r--r--  1 root  wheel   7980 May 20  1998 srm.conf
-rw-r--r--  1 root  wheel   7933 May 20  1998 srm.conf.default</literallayout>

    <para>Az &aacute;llom&aacute;nyok m&eacute;rete j&oacute;l mutatja,
      hogy csak az <filename>srm.conf</filename> v&aacute;ltozott meg.
      Az <application>Apache</application> k&eacute;s&#245;bbi
      friss&iacute;t&eacute;sei ezt az &aacute;llom&aacute;nyt nem
      fogj&aacute;k fel&uuml;l&iacute;rni.</para>
  </sect1>

  <sect1 id="configtuning-starting-services">
    <sect1info>
      <authorgroup>
        <author>
	<firstname>Tom</firstname>
	<surname>Rhodes</surname>
	<contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>Szolg&aacute;ltat&aacute;sok ind&iacute;t&aacute;sa</title>

    <indexterm><primary>szolg&aacute;ltat&aacute;sok</primary></indexterm>

    <para>A felhaszn&aacute;l&oacute;k k&ouml;z&uuml;l sokan
      v&aacute;lasztj&aacute;k a &os;
      Portgy&#251;jtem&eacute;ny&eacute;ben tal&aacute;lhat&oacute;
      k&uuml;ls&#245; szoftverek telep&iacute;t&eacute;s&eacute;t.  A
      telep&iacute;tett szoftvert ilyenkor gyakran &uacute;gy kell
      be&aacute;ll&iacute;tani, hogy a rendszer
      indul&aacute;s&aacute;val egy&uuml;tt induljon.  Az olyan
      szolg&aacute;ltat&aacute;sok, mint p&eacute;ld&aacute;ul a
      <filename role="package">mail/postfix</filename> vagy a <filename
	role="package">www/apache13</filename> csup&aacute;n k&eacute;t
      olyan szoftvercsomag, amelyet a rendszerrel egy&uuml;tt kell
      elind&iacute;tani.  Ebben a szakaszban a k&uuml;ls&#245;
      szoftverek ind&iacute;t&aacute;s&aacute;ra haszn&aacute;latos
      elj&aacute;r&aacute;sokkal foglalkozunk.</para>

    <para>A &os;-ben megjelen&#245; legt&ouml;bb
      szolg&aacute;ltat&aacute;s, mint p&eacute;ld&aacute;ul a
      &man.cron.8;, a rendszerind&iacute;t&oacute; szkripteken
      kereszt&uuml;l kel &eacute;letre.  Hab&aacute;r ezek a szkriptek a
      &os; egyes verzi&oacute;i vagy az egyes gy&aacute;rt&oacute;k
      eset&eacute;n k&uuml;l&ouml;nb&ouml;zhetnek, azonban az
      mindegyik&uuml;kben k&ouml;z&ouml;s, hogy az
      elind&iacute;t&aacute;sukra vonatkoz&oacute;
      be&aacute;ll&iacute;t&aacute;sok egyszer&#251;
      ind&iacute;t&oacute;szkriptekkel adhat&oacute;ak meg.</para>

    <sect2>
      <title>Az alkalmaz&aacute;sok r&eacute;szletesebb
	be&aacute;ll&iacute;t&aacute;sa</title>

      <para>Most miut&aacute;n a &os; rendelkezik egy
	<filename>rc.d</filename> k&ouml;nyvt&aacute;rral, az
	alkalmaz&aacute;sok ind&iacute;t&aacute;s&aacute;nak
	be&aacute;ll&iacute;t&aacute;sa is k&ouml;nnyebb&eacute;
	&eacute;s &uuml;gyesebb&eacute; v&aacute;lt.  Az <link
	linkend="configtuning-rcd">rc.d</link>
	m&#251;k&ouml;d&eacute;s&eacute;r&#245;l sz&oacute;l&oacute;
	szakaszban megismert kulcsszavak
	seg&iacute;ts&eacute;g&eacute;vel az alkalmaz&aacute;sok
	mostant&oacute;l kezdve a t&ouml;bbi szolg&aacute;ltat&aacute;s,
	p&eacute;ld&aacute;ul a <acronym>DNS</acronym> ut&aacute;n
	indulnak el, &eacute;s az <filename>rc.conf</filename>
	&aacute;llom&aacute;nyon kereszt&uuml;l a szkriptekbe
	huzalozottak helyett most m&aacute;r tetsz&#245;leges
	param&eacute;tereket is &aacute;tadhatunk stb.  Egy
	egyszer&#251; szkript ehhez hasonl&oacute;an n&eacute;z
	ki:</para>

      <programlisting>#!/bin/sh
#
# PROVIDE: utility
# REQUIRE: DAEMON
# KEYWORD: shutdown

. /etc/rc.subr

name="utility"
rcvar=`set_rcvar`
command="/usr/local/sbin/utility"

load_rc_config $name

#
# NE V&Aacute;LTOZTASSUK MEG AZ ITT L&Eacute;V&#213; ALAP&Eacute;RTELMEZ&Eacute;SEKET,
# INK&Aacute;BB AZ /etc/rc.conf &Aacute;LLOM&Aacute;NYBAN &Aacute;LL&Iacute;TSUK BE EZEKET
#
utility_enable=${utility_enable-"NO"}
utility_pidfile=${utility_pidfile-"/var/run/utility.pid"}

pidfile="${utility_pidfile}"

run_rc_command "$1"</programlisting>

      <para>Ez a szkript gondoskodik arr&oacute;l, hogy a
	<application>utility</application> nev&#251; alkalmaz&aacute;s a
	<literal>DAEMON</literal> szolg&aacute;ltat&aacute;s ut&aacute;n
	induljon el.  Emellett m&eacute;g felk&iacute;n&aacute;l egy
	m&oacute;dszert a <acronym>PID</acronym> avagy fut&oacute;
	programok azonos&iacute;t&oacute;j&aacute;nak
	be&aacute;ll&iacute;t&aacute;s&aacute;ra &eacute;s
	nyomonk&ouml;vet&eacute;s&eacute;re is.</para>

      <para>Ezt k&ouml;vet&#245;en az <filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyb&oacute;l az alkalmaz&aacute;s
	elind&iacute;that&oacute; az al&aacute;bbi sor
	hozz&aacute;ad&aacute;s&aacute;val:</para>

      <programlisting>utility_enable="YES"</programlisting>

      <para>Ez a m&oacute;dszer megk&ouml;nny&iacute;ti a parancssorban
	&aacute;tadott param&eacute;terek
	m&oacute;dos&iacute;t&aacute;s&aacute;t, az
	<filename>/etc/rc.subr</filename> &aacute;llom&aacute;nyban
	szerepl&#245; alap&eacute;rtelmezett f&uuml;ggv&eacute;nyek
	haszn&aacute;lat&aacute;t, az &man.rcorder.8;
	seg&eacute;dprogrammal szembeni kompatibilit&aacute;st &eacute;s
	az <filename>rc.conf</filename> &aacute;llom&aacute;ny
	k&ouml;nnyebb be&aacute;ll&iacute;t&aacute;s&aacute;t.</para>
    </sect2>

    <sect2>
      <title>Szolg&aacute;ltat&aacute;sok ind&iacute;t&aacute;sa
	szolg&aacute;ltat&aacute;sokkal</title>

      <para>M&aacute;s szolg&aacute;ltat&aacute;sok, mint
	p&eacute;ld&aacute;ul a <acronym>POP</acronym>3 vagy
	<acronym>IMAP</acronym> szerverek d&eacute;monai stb.  az
	&man.inetd.8; seg&iacute;ts&eacute;g&eacute;vel
	ind&iacute;that&oacute;ak el.  Ez a
	Portgy&#251;jtem&eacute;nyb&#245;l telep&iacute;tett
	szolg&aacute;ltat&aacute;sok eset&eacute;n mag&aacute;val vonja
	az adott seg&eacute;dprogram felv&eacute;tel&eacute;t vagy a
	hozz&aacute; tartoz&oacute; sor
	enged&eacute;lyez&eacute;s&eacute;t az
	<filename>/etc/inetd.conf</filename> &aacute;llom&aacute;nyban.
	Az <application>inetd</application>
	m&#251;k&ouml;d&eacute;s&eacute;vel &eacute;s annak
	be&aacute;ll&iacute;t&aacute;s&aacute;val
	m&eacute;lyrehat&oacute;bban az <link
	linkend="network-inetd">inetd</link> szakasza
	foglalkozik.</para>

      <para>A legt&ouml;bb esetben a &man.cron.8; d&eacute;mon
	haszn&aacute;lata k&eacute;zenfekv&#245; a rendszerszint&#251;
	szolg&aacute;ltat&aacute;sok elind&iacute;t&aacute;s&aacute;ban.
	Ez a megk&ouml;zel&iacute;t&eacute;s sz&aacute;mos el&#245;nyt
	tartogat, mivel a <command>cron</command> ezeket a programokat a
	felhaszn&aacute;l&oacute; <filename>crontab</filename>
	&aacute;llom&aacute;nya alapj&aacute;n futtatja.  Ezzel a mezei
	felhaszn&aacute;l&oacute;k sz&aacute;m&aacute;ra is
	lehet&#245;v&eacute; v&aacute;lik, hogy elind&iacute;tsanak
	&eacute;s karbantartsanak alkalmaz&aacute;sokat.</para>

      <para>A <command>cron</command> seg&eacute;dprogramnak van egy
	olyan speci&aacute;lis lehet&#245;s&eacute;ge, hogy az id&#245;
	helyett a <literal>@reboot</literal> &eacute;rt&eacute;ket
	adhatjuk meg.  Ennek hat&aacute;s&aacute;ra a feladat a
	&man.cron.8; ind&iacute;t&aacute;s&aacute;val egy&uuml;tt fut
	le, teh&aacute;t megszokott esetben a rendszer
	ind&iacute;t&aacute;sa sor&aacute;n.</para>
    </sect2>
  </sect1>

  <sect1 id="configtuning-cron">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Tom</firstname>
	  <surname>Rhodes</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>A <command>cron</command> seg&eacute;dprogram
      be&aacute;ll&iacute;t&aacute;sa</title>

    <indexterm>
      <primary>cron</primary>
      <secondary>be&aacute;ll&iacute;t&aacute;sa</secondary>
    </indexterm>

    <para>A &man.cron.8; a &os; egyik leghasznosabb
      seg&eacute;dprogramja.  A <command>cron</command>
      seg&eacute;dprogram a h&aacute;tt&eacute;rben fut &eacute;s
      folyamatosan figyeli az <filename>/etc/crontab</filename>
      &aacute;llom&aacute;nyt.  Emellett a <command>cron</command>
      &uacute;j <filename>crontab</filename> &aacute;llom&aacute;nyok
      ut&aacute;n kutatva folyamatosan ellen&#245;rzi a
      <filename class="directory">/var/cron/tabs</filename>
      k&ouml;nyvt&aacute;rat.  Ezek a <filename>crontab</filename>
      &aacute;llom&aacute;nyok olyan feladatokr&oacute;l t&aacute;rolnak
      adatokat, amelyeket a <command>cron</command> programnak egy adott
      pillanatban el kell v&eacute;geznie.</para>

    <para>A <command>cron</command> a konfigur&aacute;ci&oacute;s
      &aacute;llom&aacute;nyok k&eacute;t k&uuml;l&ouml;n
      fajt&aacute;j&aacute;t, a rendszer- &eacute;s
      felhaszn&aacute;l&oacute;i crontabokat haszn&aacute;lja.  A
      k&eacute;t t&iacute;pus k&ouml;z&ouml;tt lev&#245; egyetlen
      k&uuml;l&ouml;nbs&eacute;g a hatodik mez&#245;ben
      tal&aacute;lhat&oacute;.  A rendszerszint&#251; crontabok
      eset&eacute;ben a hatodik mez&#245; annak a
      felhaszn&aacute;l&oacute;nak a nev&eacute;t tartalmazza, amivel a
      program fut.  Ezzel a rendszer szintj&eacute;n
      m&#251;k&ouml;d&#245; crontaboknak megadatott az a
      k&eacute;pess&eacute;g, hogy tetsz&#245;leges
      felhaszn&aacute;l&oacute; nev&eacute;ben futtassanak programokat.
      A felhaszn&aacute;l&oacute;k crontabjaiban a hatodik mez&#245; a
      futtatand&oacute; parancsot tartalmazza, &eacute;s ilyenkor az
      &ouml;sszes parancs a crontabot l&eacute;trehoz&oacute;
      felhaszn&aacute;l&oacute; nev&eacute;ben hajt&oacute;dik
      v&eacute;gre.  Ez ut&oacute;bbi egy fontos biztons&aacute;gi
      jellemz&#245;.</para>

    <note>
      <para>A felhaszn&aacute;l&oacute;i crontabok lehet&#245;v&eacute;
	teszik az egyes felhaszn&aacute;l&oacute;k
	sz&aacute;m&aacute;ra, hogy a <username>root</username>
	felhaszn&aacute;l&oacute; jogosults&aacute;gai
	n&eacute;lk&uuml;l k&eacute;pesek legyenek feladatokat
	&uuml;temezni, ugyanis a felhaszn&aacute;l&oacute;hoz
	tartoz&oacute; crontabban szerepl&#245; parancsok mindegyike a
	tulajdonos&aacute;nak enged&eacute;lyeivel fut.</para>

      <para>Az &aacute;tlagos felhaszn&aacute;l&oacute;khoz
	hasonl&oacute;an a <username>root</username>
	felhaszn&aacute;l&oacute;nak is lehet crontabja, ami nem
	ugyanaz, mint az <filename>/etc/crontab</filename> (a rendszer
	saj&aacute;t crontab &aacute;llom&aacute;nya).  De mivel a
	rendszernek k&uuml;l&ouml;n crontabja van, ez&eacute;rt a
	<username>root</username> felhaszn&aacute;l&oacute;nak nem kell
	k&uuml;l&ouml;n crontabot l&eacute;trehozni.</para>
    </note>

    <para>Vess&uuml;nk egy pillanat&aacute;st az
      <filename>/etc/crontab</filename> (a rendszer crontabj&aacute;nak)
      tartalm&aacute;ra:</para>

    <programlisting># /etc/crontab - a root crontabja &os; alatt
#
# &dollar;&os;: src/etc/crontab,v 1.32 2002/11/22 16:13:39 tom Exp &dollar;
# <co id="co-comments">
#
SHELL=/bin/sh
PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin <co id="co-env">
HOME=/var/log
#
#
#minute	hour	day	month	wday	who	command <co id="co-field-descr">
#
#
*/5	*	*	*	*	root	/usr/libexec/atrun <co id="co-main">
</programlisting>

    <calloutlist>
      <callout arearefs="co-comments">
	<para>A &os; legt&ouml;bb konfigur&aacute;ci&oacute;s
	  &aacute;llom&aacute;ny&aacute;hoz hasonl&oacute;an itt is a
	  <literal>#</literal> jel&ouml;li a megjegyz&eacute;seket.  Az
	  ilyen megjegyz&eacute;sek remek&uuml;l
	  haszn&aacute;lhat&oacute;ak annak feljegyz&eacute;s&eacute;re,
	  hogy mit &eacute;s mi&eacute;rt akarunk futtatni.  A
	  megjegyz&eacute;sek azonban nem szerepelhetnek a paranccsal
	  egy sorban, mivel m&aacute;sk&uuml;l&ouml;nben a parancs
	  r&eacute;szek&eacute;nt ker&uuml;lnek
	  &eacute;rtelmez&eacute;sre.  Teh&aacute;t mindig &uacute;j
	  sorba kell raknunk ezeket.  Az &uuml;res sorokat a program nem
	  veszi figyelembe.</para>
      </callout>

      <callout arearefs="co-env">
	<para>El&#245;sz&ouml;r is meg kell adnunk egy k&ouml;rnyezetet.
	  Az egyenl&#245;s&eacute;g (<literal>=</literal>) karakter
	  haszn&aacute;latos a k&ouml;rnyezeti
	  be&aacute;ll&iacute;t&aacute;sok
	  meghat&aacute;roz&aacute;s&aacute;ra, ahogy mindezt az itteni
	  p&eacute;ld&aacute;ban is tapasztalhatjuk a
	  <envar>SHELL</envar>, <envar>PATH</envar> &eacute;s
	  <envar>HOME</envar> &eacute;rt&eacute;kek eset&eacute;ben.  Ha
	  nem adunk meg m&aacute;st, akkor a <command>cron</command> az
	  alap&eacute;rtelmez&eacute;s szerinti <command>sh</command>
	  parancs&eacute;rtelmez&#245;t haszn&aacute;lja.  Ha nem adjuk
	  meg a <envar>PATH</envar> v&aacute;ltoz&oacute;
	  &eacute;rt&eacute;k&eacute;t, akkor minden
	  &aacute;llom&aacute;nyra abszol&uacute;t el&eacute;r&eacute;si
	  &uacute;ttal kell hivatkoznunk, mivel ennek nincs
	  alap&eacute;rtelmezett &eacute;rt&eacute;ke.  Ha nem
	  defini&aacute;ljuk a <envar>HOME</envar> v&aacute;ltoz&oacute;
	  &eacute;rt&eacute;k&eacute;t, akkor a <command>cron</command>
	  a parancshoz tartoz&oacute; felhaszn&aacute;l&oacute;
	  k&ouml;nyvt&aacute;r&aacute;b&oacute;l fog dolgozni.</para>
      </callout>

      <callout arearefs="co-field-descr">
	<para>Ez a sor &iacute;rja le a megadhat&oacute; h&eacute;t
	  mez&#245;t.  Az itt szerepl&#245; &eacute;rt&eacute;kek a
	  <literal>minute</literal> (perc), <literal>hour</literal>
	  (&oacute;ra), <literal>mday</literal> (a h&oacute;nap napja),
	  <literal>month</literal> (h&oacute;nap),
	  <literal>wday</literal> (a h&eacute;t napja),
	  <literal>who</literal> (ki) &eacute;s
	  <literal>command</literal> (mit).  A mez&#245;k szinte
	  magukt&oacute;l &eacute;rtet&#245;dnek.  A
	  <literal>minute</literal> egy &oacute;r&aacute;n bel&uuml;l
	  adja meg azokat a perceket, amikor az adott parancsot le kell
	  futtatni.  A <literal>hour</literal> hasonl&oacute; a
	  <literal>minute</literal> be&aacute;ll&iacute;t&aacute;shoz,
	  csak az itt szerepl&#245; &eacute;rt&eacute;k&eacute;t
	  &oacute;r&aacute;kban kell &eacute;rtelmezni.  Az
	  <literal>mday</literal> a h&oacute;nap napjaiban
	  sz&aacute;mol.  A <literal>month</literal> hasonl&oacute; a
	  <literal>minute</literal> &eacute;s <literal>hour</literal>
	  opci&oacute;khoz, de ez h&oacute;napot jel&ouml;l.  A
	  <literal>wday</literal> a h&eacute;t egy napj&aacute;t jelzi.
	  Ezeknek a mez&#245;knek numerikus, valamint a
	  huszonn&eacute;gy &oacute;r&aacute;s
	  id&#245;form&aacute;tumnak megfelel&#245;
	  &eacute;rt&eacute;keket kell tartalmazniuk.  A
	  <literal>who</literal> mez&#245;, a t&ouml;bbiekt&#245;l
	  elt&eacute;r&#245; m&oacute;don, csak az
	  <filename>/etc/crontab</filename> &aacute;llom&aacute;nyban
	  jelenik meg.  Ez a mez&#245; adja meg, hogy a parancsot milyen
	  felhaszn&aacute;l&oacute;val kell futtatni.  Ez az
	  opci&oacute; nem jelenik meg a felhaszn&aacute;l&oacute;k
	  saj&aacute;t <filename>crontab</filename>
	  &aacute;llom&aacute;nyainak telep&iacute;t&eacute;sekor.  A
	  sor v&eacute;g&eacute;n l&aacute;thatjuk m&eacute;g a
	  <literal>command</literal> oszlopot is.  Ez az utols&oacute;
	  mez&#245;, &eacute;s ide ker&uuml;l a
	  v&eacute;grehajtand&oacute; parancs.</para>
      </callout>

      <callout arearefs="co-main">
	<para>Ez az utols&oacute; sor a fentebb t&aacute;rgyalt
	  &eacute;rt&eacute;keket hat&aacute;rozza meg.
	  &Eacute;szrevehetj&uuml;k, hogy a sor egy
	  <literal>*/5</literal> alak&uacute; fel&iacute;r&aacute;ssal
	  kezd&#245;dik, amelyet tov&aacute;bbi <literal>*</literal>
	  karakterek k&ouml;vetnek.  A <literal>*</literal> karakterek
	  jelent&eacute;se <quote>els&#245;-utols&oacute;</quote>, ami
	  arra utal, hogy <emphasis>mindig</emphasis>.  Ennek
	  megfelel&#245;en &uacute;gy &eacute;rtelmezhetj&uuml;k ezt a
	  sort, hogy a <username>root</username>
	  felhaszn&aacute;l&oacute;val le kell futtatni az
	  <command>atrun</command> parancsot minden &ouml;t&ouml;dik
	  percben, f&uuml;ggetlen&uuml;l att&oacute;l, hogy milyen nap
	  vagy h&oacute;nap van.  Az <command>atrun</command>
	  parancsr&oacute;l r&eacute;szletesebban az &man.atrun.8; man
	  oldal&aacute;n kapunk
	  felvil&aacute;gos&iacute;t&aacute;st.</para>

	<para>Az itt szerepl&#245; parancsoknak tetsz&#245;leges
	  mennyis&eacute;g&#251; param&eacute;ter adhat&oacute;
	  &aacute;t, azonban a t&ouml;bb soron kereszt&uuml;l
	  &aacute;t&iacute;vel&#245; parancsok
	  t&ouml;rdel&eacute;s&eacute;t a sor v&eacute;g&eacute;n a
	  <quote>\</quote> karakterrel kell jelezni.</para>
      </callout>
    </calloutlist>

    <para>Ez mindegyik <filename>crontab</filename>
      &aacute;llom&aacute;ny alapbe&aacute;ll&iacute;t&aacute;sa,
      hab&aacute;r ett&#245;l &aacute;ltal&aacute;ban egy dologban
      elt&eacute;rnek.  A hatodik mez&#245;, ahol a
      felhaszn&aacute;l&oacute;t adtuk meg, csak a rendszer
      <filename>/etc/crontab</filename>
      &aacute;llom&aacute;ny&aacute;ban jelenik meg.  Ez a mez&#245; a
      felhaszn&aacute;l&oacute;k <filename>crontab</filename>
      &aacute;llom&aacute;nyaib&oacute;l kimarad.</para>

    <sect2 id="configtuning-installcrontab">
      <title>Egy crontab telep&iacute;t&eacute;se</title>

      <important>
	<para>Nem k&ouml;telez&#245; az itt ismertet&eacute;sre
	  ker&uuml;l&#245; m&oacute;don szerkeszteni vagy
	  telep&iacute;teni a rendszer crontabj&aacute;t.
	  Egyszer&#251;en nyissuk meg a kedvenc
	  sz&ouml;vegszerkeszt&#245;nkkel, &eacute;s a
	  <command>cron</command> seg&eacute;dprogram majd
	  &eacute;szreveszi, hogy az &aacute;llom&aacute;ny
	  megv&aacute;ltozott, majd ennek megfelel&#245;en neki is
	  l&aacute;t a m&oacute;dos&iacute;tott v&aacute;ltozat
	  haszn&aacute;lat&aacute;nak.  Err&#245;l <ulink
	  url="&url.books.faq.en;/admin.html#ROOT-NOT-FOUND-CRON-ERRORS">a
	  GYIK-ban (angolul)</ulink> t&ouml;bbet is megtudhatunk.</para>
      </important>

      <para>Egy frissen k&eacute;sz&iacute;tett
	felhaszn&aacute;l&oacute;i <filename>crontab</filename>
	telep&iacute;t&eacute;s&eacute;hez el&#245;sz&ouml;r a kedvenc
	sz&ouml;vegszerkeszt&#245;nk seg&iacute;ts&eacute;g&eacute;vel
	l&eacute;tre kell hoznunk a megfelel&#245;
	form&aacute;tum&uacute; &aacute;llom&aacute;nyt, majd
	haszn&aacute;lnunk a <command>crontab</command>
	seg&eacute;dprogramot.  Ennek &aacute;ltal&aacute;nos
	alakja:</para>

      <screen>&prompt.user; <userinput>crontab <replaceable>crontab_&aacute;llom&aacute;ny</replaceable></userinput></screen>

      <para>Ebben a p&eacute;ld&aacute;ban a
      <filename><replaceable>crontab_&aacute;llom&aacute;ny</replaceable></filename>
	a kor&aacute;bban l&eacute;trehozott
	<filename>crontab</filename> neve lesz.</para>

      <para>Lehet&#245;s&eacute;g&uuml;nk van lek&eacute;rdezni a
	telep&iacute;tett <filename>crontab</filename>
	&aacute;llom&aacute;nyokat: egyszer&#251;en adjuk &aacute;t a
	<option>-l</option> kapcsol&oacute;t a
	<command>crontab</command> parancsnak, &eacute;s
	n&eacute;zz&uuml;k meg, mit ad vissza.</para>

      <para>A <command>crontab -e</command> haszn&aacute;lata olyan
	felhaszn&aacute;l&oacute;k sz&aacute;m&aacute;ra
	aj&aacute;nlott, akik sablon alkalmaz&aacute;sa
	n&eacute;lk&uuml;l szeretn&eacute;nek teljesen magukt&oacute;l
	meg&iacute;rni egy crontab &aacute;llom&aacute;nyt.  Ennek
	hat&aacute;s&aacute;ra a kiv&aacute;lasztott
	sz&ouml;vegszerkeszt&#245; egy &uuml;res &aacute;llom&aacute;nyt
	kap.  Miut&aacute;n ezt az &aacute;llom&aacute;nyt
	elmentett&uuml;k, a <command>crontab</command> programmal
	mag&aacute;t&oacute;l telep&iacute;t&eacute;sre
	ker&uuml;l.</para>

      <para>Ha a k&eacute;s&#245;bbiekben t&ouml;r&ouml;lni akarjuk a
	felhaszn&aacute;l&oacute;nkhoz tartoz&oacute;
	<filename>crontab</filename> &aacute;llom&aacute;nyt, akkor erre
	a c&eacute;lra haszn&aacute;ljuk a <command>crontab</command>
	<option>-r</option> kapcsol&oacute;j&aacute;t.</para>
    </sect2>
  </sect1>

  <sect1 id="configtuning-rcd">
    <sect1info>
      <authorgroup>
	<author>
	 <firstname>Tom</firstname>
	 <surname>Rhodes</surname>
	 <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>Az rc haszn&aacute;lata &os; alatt</title>

    <para>A rendszer ind&iacute;t&aacute;s&aacute;ra a &os; 2002-ben
      &aacute;tvette a NetBSD <filename>rc.d</filename>
      rendszer&eacute;t.  Ezt a felhaszn&aacute;l&oacute;k k&ouml;nnyen
      felismerhetik az <filename class="directory">/etc/rc.d</filename>
      k&ouml;nyvt&aacute;rban tal&aacute;lhat&oacute;
      &aacute;llom&aacute;nyokr&oacute;l.  A legt&ouml;bbj&uuml;k olyan
      alapvet&#245; szolg&aacute;ltat&aacute;s, amelyet a
      <option>start</option>, <option>stop</option> &eacute;s
      <option>restart</option> param&eacute;terekkel lehet
      vez&eacute;relni.  P&eacute;ld&aacute;ul az &man.sshd.8; az
      al&aacute;bbi paranccsal ind&iacute;that&oacute;
      &uacute;jra:</para>

    <screen>&prompt.root; <userinput>/etc/rc.d/sshd restart</userinput></screen>

    <para>Ez az elj&aacute;r&aacute;s hasonl&oacute; a t&ouml;bbi
      szolg&aacute;ltat&aacute;s eset&eacute;n is.  Term&eacute;szetesen
      ezek a szolg&aacute;ltat&aacute;sok &aacute;ltal&aacute;ban
      magukt&oacute;l indulnak el a rendszer ind&iacute;t&aacute;sa
      sor&aacute;n az &man.rc.conf.5; &aacute;llom&aacute;nyban
      megadottak szerint.  P&eacute;ld&aacute;ul ha a rendszer&uuml;nk
      indul&aacute;sakor szeretn&eacute;nk aktiv&aacute;lni a
      h&aacute;l&oacute;zati c&iacute;mford&iacute;t&aacute;ssal
      foglalatoskod&oacute; d&eacute;mont, akkor csak adjuk hozz&aacute;
      az <filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyhoz a
      k&ouml;vetkez&#245; sort:</para>

    <programlisting>natd_enable="YES"</programlisting>

    <para>Amennyiben a <option>natd_enable="NO"</option> sor m&aacute;r
      szerepel benne, akkor egyszer&#251;en &iacute;rjuk &aacute;t a
      <option>NO</option> &eacute;rt&eacute;ket <option>YES</option>-re.
      Ezut&aacute;n az rc szkriptek a rendszer k&ouml;vetkez&#245;
      ind&iacute;t&aacute;sakor a lentieknek megfelel&#245;en
      automatikusan elind&iacute;tj&aacute;k a hozz&aacute;
      tartoz&oacute; szolg&aacute;ltat&aacute;sokat is.</para>

    <para>Mivel az <filename>rc.d</filename> rendszert els&#245;sorban
      arra haszn&aacute;lj&aacute;k, hogy szolg&aacute;ltat&aacute;sokat
      ind&iacute;tsanak el vagy &aacute;ll&iacute;tsanak le az
      oper&aacute;ci&oacute;s rendszerrel egy&uuml;tt, a
      szabv&aacute;nyos <option>start</option>, <option>stop</option>
      &eacute;s <option>restart</option> param&eacute;terek csak abban
      az esetben l&aacute;tj&aacute;k el a feladatukat, ha a nekik
      megfelel&#245; v&aacute;ltoz&oacute;kat be&aacute;ll&iacute;tottuk
      az <filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyban.
      Teh&aacute;t p&eacute;ld&aacute;ul az <command>sshd
      restart</command> csak abban az esetben fog b&aacute;rmit is
      csin&aacute;lni, ha az <filename>/etc/rc.conf</filename>
      &aacute;llom&aacute;nyban az <varname>sshd_enable</varname>
      v&aacute;ltoz&oacute;t a <option>YES</option>
      &eacute;rt&eacute;kre &aacute;ll&iacute;tottuk.  Ha az
      <filename>/etc/rc.conf</filename>
      be&aacute;ll&iacute;t&aacute;sait&oacute;l f&uuml;ggetlen&uuml;l
      k&iacute;v&aacute;nunk egy szolg&aacute;ltat&aacute;snak
      <option>start</option>, <option>stop</option> vagy
      <option>restart</option> parancsot adni, akkor el&eacute; kell
      tenn&uuml;nk egy <quote>one</quote> sz&oacute;t.
      P&eacute;ld&aacute;ul ha az <command>sshd</command>
      szolg&aacute;ltat&aacute;s
      &uacute;jraind&iacute;t&aacute;s&aacute;hoz az
      <filename>/etc/rc.conf</filename> tartalm&aacute;t figyelmen
      k&iacute;v&uuml;l akarjuk hagyni, akkor ezt a parancsot kell
      kiadnunk:</para>

    <screen>&prompt.root; <userinput>/etc/rc.d/sshd onerestart</userinput></screen>

    <para>K&ouml;nnyen ellen&#245;rizni tudjuk, hogy az adott
      szolg&aacute;ltat&aacute;s az <filename>/etc/rc.conf</filename>
      r&eacute;sz&eacute;r&#245;l enged&eacute;lyezett-e, ha a neki
      megfelel&#245; <filename>rc.d</filename> szkriptnek megadjuk az
      <option>rcvar</option> param&eacute;tert.  Ennek
      seg&iacute;ts&eacute;g&eacute;vel p&eacute;ld&aacute;ul a
      rendszergazda &iacute;gy k&eacute;pes ellen&#245;rizni, hogy az
      <command>sshd</command> szolg&aacute;ltat&aacute;st
      enged&eacute;lyezi-e az <filename>/etc/rc.conf</filename>:</para>

    <screen>&prompt.root; <userinput>/etc/rc.d/sshd rcvar</userinput>
# sshd
$sshd_enable=YES</screen>

    <note>
      <para>A m&aacute;sodik sor (<literal># sshd</literal>) az
	<command>sshd</command> parancs kimenete, nem pedig a
	<username>root</username> parancssora.</para>
    </note>

    <para>A <option>status</option> param&eacute;terrel
      kider&iacute;thetj&uuml;k, hogy egy szolg&aacute;ltat&aacute;s
      akt&iacute;v-e.  Ezzel p&eacute;ld&aacute;ul &iacute;gy tudjuk
      ellen&#245;rizni az <command>sshd</command>
      szolg&aacute;ltat&aacute;s
      m&#251;k&ouml;d&eacute;s&eacute;t:</para>

    <screen>&prompt.root; <userinput>/etc/rc.d/sshd status</userinput>
sshd is running as pid 433.</screen>

    <para>Az &uuml;zenet:</para>

    <screen>Az sshd a 433-as azonos&iacute;t&oacute;val fut.</screen>

    <para>Bizonyos esetekben a <option>reload</option> param&eacute;ter
      haszn&aacute;lat&aacute;val lehet&#245;s&eacute;g&uuml;nk van a
      szolg&aacute;ltat&aacute;sok
      &uacute;jraind&iacute;t&aacute;s&aacute;ra is.  Ilyenkor a
      rendszer megpr&oacute;b&aacute;l egy olyan jelz&eacute;st
      k&uuml;ldeni a szolg&aacute;ltat&aacute;snak, amivel a
      konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nyainak
      &uacute;jraolvas&aacute;s&aacute;t k&eacute;ri.  A
      legt&ouml;bbsz&ouml;r l&eacute;nyeg&eacute;ben ez a
      <literal>SIGHUP</literal> jelz&eacute;s
      kik&uuml;ld&eacute;s&eacute;t rejti mag&aacute;ban.  Ez a
      lehet&#245;s&eacute;g azonban nem mindegyik
      szolg&aacute;ltat&aacute;s eset&eacute;n &eacute;rhet&#245;
      el.</para>

    <para>Az <filename>rc.d</filename> rendszer nem csup&aacute;n
      h&aacute;l&oacute;zati szolg&aacute;ltat&aacute;sok eset&eacute;n
      haszn&aacute;latos, hanem nagyr&eacute;szben
      hozz&aacute;j&aacute;rul a rendszer
      ind&iacute;t&aacute;s&aacute;hoz is.  Erre vegy&uuml;k
      p&eacute;ld&aacute;nak a <filename>bgfsck</filename>
      &aacute;llom&aacute;nyt.  Amikor ez a szkript lefut, a
      k&ouml;vetkez&#245; &uuml;zenetet jelen&iacute;ti meg:</para>

    <screen>Starting background file system checks in 60 seconds.</screen>

    <para>Az &uuml;zenet ford&iacute;t&aacute;sa:</para>

    <screen>A h&aacute;tt&eacute;rben 60 m&aacute;sodperc m&uacute;lva megkezd&#245;dik az &aacute;llom&aacute;nyrendszerek ellen&#245;rz&eacute;se.</screen>

    <para>Ennek megfelel&#245;en teh&aacute;t ezt az
      &aacute;llom&aacute;nyt az &aacute;llom&aacute;nyrendszerek
      h&aacute;tt&eacute;rben foly&oacute;
      ellen&#245;rz&eacute;s&eacute;re haszn&aacute;lj&aacute;k, ami
      pedig a rendszer ind&iacute;t&aacute;sa sor&aacute;n fut
      le.</para>

    <para>Sz&aacute;mos rendszerszolg&aacute;ltat&aacute;s
      ig&eacute;nyel a m&#251;k&ouml;d&eacute;s&eacute;hez
      tov&aacute;bbi szolg&aacute;ltat&aacute;sokat.
      P&eacute;ld&aacute;ul a NIS &eacute;s m&aacute;s egy&eacute;b
      t&aacute;voli elj&aacute;r&aacute;sh&iacute;v&aacute;son
      alap&uacute; szolg&aacute;ltat&aacute;sok eg&eacute;szen addig nem
      k&eacute;pesek elindulni, am&iacute;g az
      <command>rpcbind</command> (portmapper)
      szolg&aacute;ltat&aacute;st el nem ind&iacute;tjuk.  Az ilyen
      jelleg&#251; gondok felold&aacute;s&aacute;ra az
      ind&iacute;t&oacute;szkriptek elej&eacute;n lev&#245;
      megjegyz&eacute;sekben tal&aacute;lhat&oacute; egy kev&eacute;s
      metainform&aacute;ci&oacute; a szkript
      m&#251;k&ouml;d&eacute;s&eacute;hez sz&uuml;ks&eacute;ges elemekre
      (f&uuml;gg&#245;s&eacute;geire) vonatkoz&oacute;an.  A rendszer
      ind&iacute;t&aacute;sa k&ouml;zben az &man.rcorder.8; nev&#251;
      program k&eacute;pes a megjegyz&eacute;sek k&ouml;zt ezeket az
      inform&aacute;ci&oacute;kat feldolgozni &eacute;s ebb&#245;l
      meg&aacute;llap&iacute;tani, hogy a f&uuml;gg&#245;s&eacute;gi
      viszonyok betart&aacute;s&aacute;val milyen sorrendben kell
      elind&iacute;tani a rendszer &aacute;ltal felk&iacute;n&aacute;lt
      szolg&aacute;ltat&aacute;sokat.</para>

    <para>Ehhez a k&ouml;vetkez&#245; kulcsszavakat kell megadni az
      egyes ind&iacute;t&oacute; szkriptek elej&eacute;n (az
      &man.rc.subr.8; &iacute;gy tudja
      <quote>enged&eacute;lyezni</quote> az ind&iacute;t&oacute;
      szkriptet):</para>

    <itemizedlist>
      <listitem>
	<para><literal>PROVIDE</literal>:
	  seg&iacute;ts&eacute;g&eacute;vel megmondjuk, hogy ez az
	  &aacute;llom&aacute;ny milyen szolg&aacute;ltat&aacute;sokat
	  ny&uacute;jt.</para>
      </listitem>
    </itemizedlist>

    <para>A k&ouml;vetkez&#245; kulcsszavak az egyes
      ind&iacute;t&oacute;&aacute;llom&aacute;nyok elej&eacute;n
      szerepelhetnek.  Nem kell felt&eacute;tlen&uuml;l
      haszn&aacute;lnunk ezeket, de vel&uuml;k az &man.rcorder.8;
      munk&aacute;j&aacute;t seg&iacute;thetj&uuml;k:</para>

    <itemizedlist>
      <listitem>
	<para><literal>REQUIRE</literal>: felsoroljuk azokat a
	  szolg&aacute;ltat&aacute;sokat, amelyek a
	  fut&aacute;s&aacute;hoz kellenek.  Az &aacute;llom&aacute;ny
	  teh&aacute;t az itt megadott szolg&aacute;ltat&aacute;sok
	  <emphasis>ut&aacute;n</emphasis> fog lefutni.</para>
      </listitem>

      <listitem>
	<para><literal>BEFORE</literal>: felsoroljuk azokat a
	  szolg&aacute;ltat&aacute;sokat, amelyek
	  <emphasis>el&#245;tt</emphasis> futtatni kell ezt az
	  &aacute;llom&aacute;nyt.</para>
      </listitem>
    </itemizedlist>

    <para>Az ind&iacute;t&oacute; szkriptekben a kulcsszavak &uuml;gyes
      megv&aacute;laszt&aacute;s&aacute;val a rendszergazda nagyon
      finoman k&eacute;pes az ind&iacute;t&aacute;skor
      v&eacute;grehajt&oacute;d&oacute; szkriptek sorrendj&eacute;t
      szab&aacute;lyozni &eacute;s a t&ouml;bbi &unix; alap&uacute;
      oper&aacute;ci&oacute;s rendszerb&#245;l ismert
      <quote>futtat&aacute;si szintek</quote> haszn&aacute;lata
      n&eacute;lk&uuml;l vez&eacute;relni a rendszerben megjelen&#245;
      szolg&aacute;ltat&aacute;sokat.</para>

    <para>Az <filename>rc.d</filename> rendszerr&#245;l b&#245;vebben az
      &man.rc.8; &eacute;s &man.rc.subr.8; man oldalakon olvashatunk.
      Ha szeretn&eacute;nk saj&aacute;t <filename>rc.d</filename>
      szkripteket &iacute;rni vagy jav&iacute;tani a m&aacute;r
      megl&eacute;v&#245;k&ouml;n, akkor ez <ulink
      url="&url.articles.rc-scripting.en;">a cikk</ulink> (angolul)
      seg&iacute;ts&eacute;g&uuml;nkre lehet.</para>
  </sect1>

  <sect1 id="config-network-setup">
    <sect1info>
      <authorgroup>
	<author>
	 <firstname>Marc</firstname>
	 <surname>Fonvieille</surname>
	 <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>A h&aacute;l&oacute;zati k&aacute;rty&aacute;k
      be&aacute;ll&iacute;t&aacute;sa</title>

    <indexterm>
      <primary>h&aacute;l&oacute;zati k&aacute;rty&aacute;k</primary>
      <secondary>be&aacute;ll&iacute;t&aacute;sa</secondary>
    </indexterm>

    <para>Manaps&aacute;g m&aacute;r el sem tudunk k&eacute;pzelni
      sz&aacute;m&iacute;t&oacute;g&eacute;pet h&aacute;l&oacute;zati
      csatlakoz&aacute;s n&eacute;lk&uuml;l.  A h&aacute;l&oacute;zati
      csatol&oacute;k&aacute;rty&aacute;k hozz&aacute;ad&aacute;sa
      &eacute;s be&aacute;ll&iacute;t&aacute;sa egy &os; rendszergazda
      mindennapos feladata.</para>

    <sect2>
      <title>A megfelel&#245; meghajt&oacute;program
	felder&iacute;t&eacute;se</title>

      <indexterm>
	<primary>h&aacute;l&oacute;zati k&aacute;rty&aacute;k</primary>
	<secondary>meghajt&oacute;</secondary>
      </indexterm>

      <para>Miel&#245;tt b&aacute;rminek is nekikezden&eacute;nk,
	&eacute;rdemes tiszt&aacute;ban lenn&uuml;nk azzal, hogy a
	rendelkez&eacute;s&uuml;nkre &aacute;ll&oacute; k&aacute;rtya
	milyen t&iacute;pus&uacute;, milyen chipet haszn&aacute;l
	&eacute;s hogy PCI vagy ISA buszon csatlakozik-e.  A &os; a PCI
	&eacute;s ISA csatol&oacute;s k&aacute;rty&aacute;k
	sz&eacute;les spektrum&aacute;t ismeri.  Az egyes
	kiad&aacute;sokhoz mell&eacute;kelt <quote>Hardware
	Compatibility List</quote> (Hardverkompatibilit&aacute;si lista)
	dokumentumokban tudjuk ellen&#245;rizni, hogy a
	k&aacute;rty&aacute;kat ismeri a rendszer.</para>

      <para>Miut&aacute;n meggy&#245;z&#245;dt&uuml;nk r&oacute;la, hogy
	a k&aacute;rty&aacute;nkat ismeri a rendszer, meg kell
	keresn&uuml;nk a hozz&aacute; tartoz&oacute; meghajt&oacute;t.
	A <filename>/usr/src/sys/conf/NOTES</filename> &eacute;s a
	<filename>/usr/src/sys/<replaceable>arch</replaceable>/conf/NOTES</filename>
	&aacute;llom&aacute;nyok tartalmazz&aacute;k a
	h&aacute;l&oacute;zati k&aacute;rty&aacute;k meghajt&oacute;inak
	r&ouml;vid le&iacute;r&aacute;s&aacute;t, benne a
	t&aacute;mogatott chipsetek &eacute;s k&aacute;rty&aacute;k
	t&iacute;pusaival.  Ha ez alapj&aacute;n nem tudjuk teljes
	biztos&aacute;ggal eld&ouml;nteni, hogy melyik a
	sz&aacute;munkra megfelel&#245; meghajt&oacute;,
	n&eacute;zz&uuml;k meg a saj&aacute;t man oldal&aacute;t.  Ezen
	a man oldalon megtal&aacute;ljuk az &aacute;ltala ismert
	&ouml;sszes eszk&ouml;zt &eacute;s a vel&uuml;k kapcsolatban
	el&#245;fordul&oacute; jellemz&#245;
	probl&eacute;m&aacute;kat.</para>

      <para>Ha egy elterjedt t&iacute;pust siker&uuml;lt
	beszerezn&uuml;nk, akkor nem kell k&uuml;l&ouml;n&ouml;sebben
	sok&aacute;ig keresn&uuml;nk a neki megfelel&#245;
	meghajt&oacute;t.  Az ismertebb h&aacute;l&oacute;zati
	k&aacute;rty&aacute;k meghajt&oacute;i ugyanis alapb&oacute;l
	benne vannak a <filename>GENERIC</filename> rendszermagban,
	ez&eacute;rt a rendszer ind&iacute;t&aacute;sa sor&aacute;n
	ehhez hasonl&oacute;an meg is jelennek a
	k&aacute;rty&aacute;k:</para>

<screen>dc0: &lt;82c169 PNIC 10/100BaseTX&gt; port 0xa000-0xa0ff mem 0xd3800000-0xd38
000ff irq 15 at device 11.0 on pci0
miibus0: &lt;MII bus&gt; on dc0
bmtphy0: &lt;BCM5201 10/100baseTX PHY&gt; PHY 1 on miibus0
bmtphy0:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
dc0: Ethernet address: 00:a0:cc:da:da:da
dc0: [ITHREAD]
dc1: &lt;82c169 PNIC 10/100BaseTX&gt; port 0x9800-0x98ff mem 0xd3000000-0xd30
000ff irq 11 at device 12.0 on pci0
miibus1: &lt;MII bus&gt; on dc1
bmtphy1: &lt;BCM5201 10/100baseTX PHY&gt; PHY 1 on miibus1
bmtphy1:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
dc1: Ethernet address: 00:a0:cc:da:da:db
dc1: [ITHREAD]</screen>

      <para>Ebben a p&eacute;ld&aacute;ban l&aacute;thatunk is
	k&eacute;t olyan k&aacute;rty&aacute;t, amelyek a &man.dc.4;
	meghajt&oacute;t haszn&aacute;lj&aacute;k.</para>

      <para>Ha a h&aacute;l&oacute;zati k&aacute;rty&aacute;nk
	meghajt&oacute;ja nem szerepel a <filename>GENERIC</filename>
	konfigur&aacute;ci&oacute;ban, akkor a
	m&#251;k&ouml;d&eacute;s&eacute;hez be kell t&ouml;lteni a
	megfelel&#245; meghajt&oacute;t.  Ezt alapvet&#245;en
	k&eacute;tf&eacute;lek&eacute;ppen &eacute;rhetj&uuml;k
	el:</para>

      <itemizedlist>
	<listitem>
	  <para>Ennek legegyszer&#251;bb m&oacute;dja, ha a
	    &man.kldload.8; haszn&aacute;lat&aacute;val
	    alkalmank&eacute;nt vagy a
	    <filename>/boot/loader.conf</filename>
	    &aacute;llom&aacute;nyban a megfelel&#245; sor
	    hozz&aacute;ad&aacute;s&aacute;val a rendszer
	    ind&iacute;t&aacute;s&aacute;val egy&uuml;tt
	    bet&ouml;ltj&uuml;k a h&aacute;l&oacute;zati k&aacute;rtya
	    meghajt&oacute;j&aacute;hoz tartoz&oacute; modult.  Nem
	    mindegyik h&aacute;l&oacute;zati k&aacute;rtya
	    meghajt&oacute;ja &eacute;rhet&#245; el modul
	    form&aacute;j&aacute;ban.  Erre konkr&eacute;t
	    p&eacute;ld&aacute;ul szolg&aacute;lnak az ISA
	    k&aacute;rty&aacute;khoz tartoz&oacute; modulok.</para>
	</listitem>

	<listitem>
	  <para>M&aacute;sik lehet&#245;s&eacute;g&uuml;nk, ha
	    statikusan be&eacute;p&iacute;tj&uuml;k a
	    k&aacute;rty&aacute;nk t&aacute;mogat&aacute;s&aacute;t a
	    rendszermagba.  A
	    <filename>/usr/src/sys/conf/NOTES</filename> &eacute;s az
	    <filename>/usr/src/sys/<replaceable>arch</replaceable>/conf/NOTES</filename>
	    &aacute;llom&aacute;nyok, valamint a meghajt&oacute;hoz
	    tartoz&oacute; man oldal elolvas&aacute;s&aacute;b&oacute;l
	    megtudhatjuk a rendszermag be&aacute;ll&iacute;t&aacute;sait
	    tartalmaz&oacute; &aacute;llom&aacute;nyban megadand&oacute;
	    param&eacute;tereket.  A rendszermag
	    &uacute;jraford&iacute;t&aacute;s&aacute;t l&aacute;sd <xref
	    linkend="kernelconfig">.  Ha a rendszermag
	    (<filename>GENERIC</filename>) az indul&aacute;s
	    sor&aacute;n &eacute;szlelte a k&aacute;rty&aacute;nkat, nem
	    kell &uacute;jat k&eacute;sz&iacute;ten&uuml;nk.</para>
	</listitem>
      </itemizedlist>

      <sect3 id="config-network-ndis">
	<title>A &windows; NDIS meghajt&oacute;inak
	  haszn&aacute;lata</title>

	<indexterm><primary>NDIS</primary></indexterm>
	<indexterm><primary>NDISulator</primary></indexterm>
	<indexterm><primary>&windows;
	  meghajt&oacute;k</primary></indexterm>
	<indexterm><primary>Microsoft Windows</primary></indexterm>
	<indexterm>
	  <primary>Microsoft Windows</primary>
	  <secondary>eszk&ouml;zmeghajt&oacute;k</secondary></indexterm>
	<indexterm><primary>KLD (a rendszermag bet&ouml;lthet&#245;
	  objektuma)</primary></indexterm>

	<para>Sajnos m&eacute;g mindig sok olyan gy&aacute;rt&oacute;
	  akad, akik a ny&iacute;lt forr&aacute;s&uacute;
	  k&ouml;z&ouml;ss&eacute;g sz&aacute;m&aacute;ra nem
	  adj&aacute;k ki a meghajt&oacute;ik
	  m&#251;k&ouml;d&eacute;s&eacute;nek alapjait, mivel az ilyen
	  adatokat szakmai titoknak tekintik.  Ebb&#245;l
	  k&ouml;vetkezik, hogy a &os; &eacute;s m&aacute;s
	  oper&aacute;ci&oacute;s rendszerek fejleszt&#245;i
	  sz&aacute;m&aacute;ra k&eacute;t v&aacute;laszt&aacute;s
	  marad: vagy a gy&aacute;ri meghajt&oacute;k
	  visszafejt&eacute;s&eacute;nek hossz&uacute; &eacute;s
	  f&aacute;jdalmas &uacute;tj&aacute;n haladva fejlesztik ki a
	  saj&aacute;t meghajt&oacute;jukat, vagy pedig a
	  &microsoft.windows; platformra kiadott meghajt&oacute;k
	  bin&aacute;risait hasznos&iacute;tj&aacute;k.  A legt&ouml;bb
	  fejleszt&#245;, k&ouml;zt&uuml;k a &os; fejleszt&#245;i is, ez
	  ut&oacute;bbi megk&ouml;zel&iacute;t&eacute;st
	  v&aacute;lasztott&aacute;k.</para>

	<para>Bill Paul (wpaul) j&oacute;volt&aacute;b&oacute;l a
	  &os;&nbsp;5.3-RELEASE v&aacute;ltozat&aacute;ban megjelent a
	  <quote>Network Driver Interface Specification</quote> (NDIS,
	  avagy h&aacute;l&oacute;zati meghajt&oacute;k
	  szabv&aacute;nyos fel&uuml;lete) <quote>nat&iacute;v</quote>
	  t&aacute;mogat&aacute;sa.  A &os; NDISulator
	  (m&aacute;sn&eacute;ven Project Evil, a Gonosz terve)
	  nev&#251; komponense fog egy &windows;-os meghajt&oacute;t
	  &eacute;s elhiteti vele, hogy a &windows;
	  oper&aacute;ci&oacute;s rendszerrel kommunik&aacute;l.  Mivel
	  az &man.ndis.4; meghajt&oacute; &windows; bin&aacute;risokat
	  haszn&aacute;l fel, ez&eacute;rt csak &arch.i386; &eacute;s
	  &arch.amd64; rendszerek eset&eacute;n &eacute;rhet&#245;
	  el.</para>

	<note>
	  <para>Az &man.ndis.4; meghajt&oacute; legink&aacute;bb a PCI,
	    CardBus &eacute;s PCMCIA csatol&oacute;j&uacute;
	    eszk&ouml;z&ouml;k t&aacute;mogat&aacute;s&aacute;ra lett
	    kital&aacute;lva, az USB eszk&ouml;z&ouml;ket m&eacute;g nem
	    ismeri.</para>
	</note>

	<para>Az NDISulator haszn&aacute;lat&aacute;hoz h&aacute;rom
	  t&eacute;nyez&#245;re van sz&uuml;ks&eacute;g&uuml;nk:</para>

	<orderedlist>
	 <listitem>
	  <para>A rendszermag forr&aacute;sa</para>
	 </listitem>
	 <listitem>
	  <para>a &windowsxp; meghajt&oacute; bin&aacute;risa
	    (<filename>.SYS</filename> a kiterjeszt&eacute;se)</para>
	 </listitem>
	 <listitem>
	  <para>a &windowsxp; meghajt&oacute;
	    konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nya
	    (<filename>.INF</filename> a kiterjeszt&eacute;se)</para>
	 </listitem>
	</orderedlist>

	<para>Keress&uuml;k meg az eml&iacute;tett
	  &aacute;llom&aacute;nyokat az adott k&aacute;rty&aacute;hoz.
	  Ezeket &aacute;ltal&aacute;ban a mell&eacute;kelt CD-n vagy a
	  gy&aacute;rt&oacute; honlapj&aacute;n tal&aacute;ljuk meg.  A
	  most k&ouml;vetkez&#245; p&eacute;ld&aacute;kban a
	  <filename>W32DRIVER.SYS</filename> &eacute;s a
	  <filename>W32DRIVER.INF</filename> neveket fogjuk
	  haszn&aacute;lni.</para>

	<note>
	  <para>A &windows; i386 architekt&uacute;r&aacute;j&uacute;
	    verzi&oacute;j&aacute;hoz k&eacute;sz&uuml;lt
	    meghajt&oacute;programokat nem tudjuk a &os;/amd64
	    verzi&oacute;j&aacute;val haszn&aacute;lni.  A
	    m&#251;k&ouml;d&eacute;shez amd64-re k&eacute;sz&uuml;lt
	    &windows;-os meghajt&oacute;kra van
	    sz&uuml;ks&eacute;g.</para>
	</note>

	<para>A k&ouml;vetkez&#245; l&eacute;p&eacute;s a
	  meghajt&oacute; bin&aacute;risainak bet&ouml;lthet&#245;
	  modulba ford&iacute;t&aacute;sa.  Ennek
	  el&eacute;r&eacute;s&eacute;hez haszn&aacute;ljuk az
	  &man.ndisgen.8; parancsot a <username>root</username>
	  felhaszn&aacute;l&oacute;val:</para>

	<screen>&prompt.root; <userinput>ndisgen <replaceable>/windowsos/meghajt&oacute;/W32DRIVER.INF</replaceable> <replaceable>/windowsos/meghajt&oacute;/W32DRIVER.SYS</replaceable></userinput></screen>

	<para>Az &man.ndisgen.8; egy interakt&iacute;v
	  seg&eacute;dprogram, amely m&#251;k&ouml;d&eacute;se
	  k&ouml;zben m&eacute;g r&aacute;k&eacute;rdez
	  n&eacute;h&aacute;ny sz&uuml;ks&eacute;ges
	  inform&aacute;ci&oacute;ra.  Az aktu&aacute;lis
	  k&ouml;nyvt&aacute;rban l&eacute;trehoz egy rendszermagmodult,
	  amelyet az al&aacute;bbi m&oacute;don tudunk
	  bet&ouml;lteni:</para>

	<screen>&prompt.root; <userinput>kldload <replaceable>./W32DRIVER_SYS.ko</replaceable></userinput></screen>

	<para>Az el&#245;&aacute;ll&iacute;tott modul mell&eacute; be
	  kell t&ouml;lten&uuml;nk m&eacute;g az
	  <filename>ndis.ko</filename> &eacute;s az
	  <filename>if_ndis.ko</filename> modulokat is.  Ez
	  &aacute;ltal&aacute;ban minden olyan modul eset&eacute;n
	  megt&ouml;rt&eacute;nik mag&aacute;t&oacute;l, amely f&uuml;gg
	  az &man.ndis.4; haszn&aacute;lat&aacute;t&oacute;l.
	  K&eacute;zileg a k&ouml;vetkez&#245; parancsokkal tudjuk
	  ezeket bet&ouml;lteni:</para>

	<screen>&prompt.root; <userinput>kldload ndis</userinput>
&prompt.root; <userinput>kldload if_ndis</userinput></screen>

	<para>Itt az els&#245; parancs bet&ouml;lti az NDIS miniport
	  meghajt&oacute; burkol&aacute;s&aacute;ra sz&aacute;nt
	  k&oacute;dot, valamint a m&aacute;sodik a t&eacute;nyleges
	  h&aacute;l&oacute;zati csatol&oacute;fel&uuml;letet.</para>

	<para>Most pedig a &man.dmesg.8; kimenet&eacute;ben
	  ellen&#245;rizz&uuml;k, hogy t&ouml;rt&eacute;nt-e valamilyen
	  hiba a bet&ouml;lt&eacute;s sor&aacute;n.  Ha minden
	  j&oacute;l ment, akkor az al&aacute;bbiakhoz hasonl&oacute;
	  kimenetet produk&aacute;lt:</para>

	<screen>ndis0: &lt;Wireless-G PCI Adapter&gt; mem 0xf4100000-0xf4101fff irq 3 at device 8.0 on pci1
ndis0: NDIS API version: 5.0
ndis0: Ethernet address: 0a:b1:2c:d3:4e:f5
ndis0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps
ndis0: 11g rates: 6Mbps 9Mbps 12Mbps 18Mbps 36Mbps 48Mbps 54Mbps</screen>

	<para>Innent&#245;l kezdve az <devicename>ndis0</devicename>
	  nev&#251; eszk&ouml;zt &uacute;gy tudjuk haszn&aacute;lni,
	  mint b&aacute;rmelyik m&aacute;s h&aacute;l&oacute;zati
	  fel&uuml;letet (p&eacute;ld&aacute;ul
	  <devicename>dc0</devicename>).</para>

	<para>A t&ouml;bbi modulhoz hasonl&oacute; m&oacute;don be
	  tudjuk &aacute;ll&iacute;tani, hogy a rendszer
	  indul&aacute;s&aacute;val egy&uuml;tt bet&ouml;lt&#245;djenek
	  az NDIS modulok.  Ehhez el&#245;sz&ouml;r m&aacute;soljuk az
	  im&eacute;nt l&eacute;trehozott modult, az
	  <filename>W32DRIVER_SYS.ko</filename> &aacute;llom&aacute;nyt a
	  <filename class="directory">/boot/modules</filename>
	  k&ouml;nyvt&aacute;rba.  Ezut&aacute;n adjuk hozz&aacute; a
	  k&ouml;vetkez&#245; sort a
	  <filename>/boot/loader.conf</filename> &aacute;llom&aacute;ny
	  tartalm&aacute;hoz:</para>

	<programlisting>W32DRIVER_SYS_load="YES"</programlisting>
      </sect3>
    </sect2>

    <sect2>
      <title>A h&aacute;l&oacute;zati k&aacute;rtya
	be&aacute;ll&iacute;t&aacute;sa</title>

      <indexterm>
	<primary>h&aacute;l&oacute;zati k&aacute;rty&aacute;k</primary>
	<secondary>be&aacute;ll&iacute;t&aacute;sa</secondary>
      </indexterm>

      <para>Ahogy bet&ouml;lt&#245;d&ouml;tt a megfelel&#245;
	meghajt&oacute; a h&aacute;l&oacute;zati
	k&aacute;rty&aacute;nkhoz, be is kell &aacute;ll&iacute;tanunk a
	k&aacute;rty&aacute;t.  A h&aacute;l&oacute;zati
	k&aacute;rty&aacute;k sok m&aacute;s dologgal egy&uuml;tt
	be&aacute;ll&iacute;that&oacute;ak a telep&iacute;t&eacute;s
	sor&aacute;n a <application>sysinstall</application>
	seg&iacute;ts&eacute;g&eacute;vel.</para>

      <para>A rendszer&uuml;nkben be&aacute;ll&iacute;tott
	h&aacute;l&oacute;zati csatol&oacute;fel&uuml;letek
	megjelen&iacute;t&eacute;s&eacute;hez g&eacute;pelj&uuml;k be a
	k&ouml;vetkez&#245; parancsot:</para>

<screen>&prompt.user; <userinput>ifconfig</userinput>
dc0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        options=80008&lt;VLAN_MTU,LINKSTATE&gt;
        ether 00:a0:cc:da:da:da
        inet 192.168.1.3 netmask 0xffffff00 broadcast 192.168.1.255
        media: Ethernet autoselect (100baseTX &lt;full-duplex&gt;)
        status: active
dc1: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        options=80008&lt;VLAN_MTU,LINKSTATE&gt;
        ether 00:a0:cc:da:da:db
        inet 10.0.0.1 netmask 0xffffff00 broadcast 10.0.0.255
        media: Ethernet 10baseT/UTP
        status: no carrier
plip0: flags=8810&lt;POINTOPOINT,SIMPLEX,MULTICAST&gt; mtu 1500
lo0: flags=8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; metric 0 mtu 16384
        options=3&lt;RXCSUM,TXCSUM&gt;
        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x4
        inet6 ::1 prefixlen 128
        inet 127.0.0.1 netmask 0xff000000
        nd6 options=8010&lt;POINTOPOINT,MULTICAST&gt; mtu 1500</screen>

      <para>Az el&#245;bbi parancs kimenet&eacute;ben a
	k&ouml;vetkez&#245; eszk&ouml;z&ouml;k jelentek meg:</para>

      <itemizedlist>
	<listitem>
	  <para><devicename>dc0</devicename>: az els&#245; Ethernet
	    fel&uuml;let</para>
	</listitem>

	<listitem>
	  <para><devicename>dc1</devicename>: a m&aacute;sodik Ethernet
	    fel&uuml;let</para>
	</listitem>

	<listitem>
	  <para><devicename>plilp0</devicename>: a p&aacute;rhuzamos
	    port fel&uuml;lete (amennyiben tal&aacute;lhat&oacute;
	    p&aacute;rhuzamos port a
	    sz&aacute;m&iacute;t&oacute;g&eacute;pben)</para>
	</listitem>

	<listitem>
	  <para><devicename>lo0</devicename>: a loopback
	    eszk&ouml;z</para>
	</listitem>
      </itemizedlist>

      <para>A &os; a k&aacute;rty&aacute;hoz tartoz&oacute;
	meghajt&oacute; nev&eacute;vel &eacute;s egy sorsz&aacute;mmal
	azonos&iacute;tja a rendszermag indul&aacute;sa sor&aacute;n
	tal&aacute;lt eszk&ouml;z&ouml;ket.  P&eacute;ld&aacute;ul az
	<devicename>sis2</devicename> a rendszerben
	tal&aacute;lhat&oacute; harmadik olyan eszk&ouml;z, amely a
	&man.sis.4; meghajt&oacute;t haszn&aacute;lja.</para>

      <para>A p&eacute;ld&aacute;ban a <devicename>dc0</devicename>
	eszk&ouml;z akt&iacute;v &eacute;s
	m&#251;k&ouml;d&#245;k&eacute;pes.  Ennek legfontosabb
	jelei:</para>

      <orderedlist>
	<listitem>
	  <para>Az <literal>UP</literal> sz&oacute; mutatja, hogy a
	    k&aacute;rty&aacute;t siker&uuml;lt be&aacute;ll&iacute;tani
	    &eacute;s k&eacute;szen &aacute;ll a
	    haszn&aacute;latra.</para>
	</listitem>

	<listitem>
	  <para>A k&aacute;rtya internet (<literal>inet</literal>)
	    c&iacute;me (jelen eset&uuml;nkben ez <hostid
	    role="ipaddr">192.168.1.3</hostid>).</para>
	</listitem>

	<listitem>
	  <para>&Eacute;rv&eacute;nyes h&aacute;l&oacute;zati maszkkal
	    rendelkezik (<literal>netmask</literal>, ahol a <hostid
	    role="netmask">0xffffff00</hostid> a <hostid
	    role="netmask">255.255.255.0</hostid> c&iacute;mnek felel
	    meg).</para>
	</listitem>

	<listitem>
	  <para>&Eacute;rv&eacute;nyes broadcast
	    (&uuml;zenetsz&oacute;r&oacute;) c&iacute;mmel rendelkezik
	    (ami itt most <hostid
	    role="ipaddr">192.168.1.255</hostid>).</para>
	</listitem>

	<listitem>
	  <para>A k&aacute;rtya MAC-c&iacute;me
	    (<literal>ether</literal>) <hostid
	    role="mac">00:a0:cc:da:da:da</hostid>.</para>
	</listitem>

	<listitem>
	  <para>A hozz&aacute; tartoz&oacute; fizikai eszk&ouml;z
	    kiv&aacute;laszt&aacute;sa automatikus (<literal>media:
	    Ethernet autoselect (100baseTX
	    &lt;full-duplex&gt;)</literal>).  L&aacute;thatjuk, hogy a
	    <devicename>dc1</devicename> eszk&ouml;zt egy
	    <literal>10baseT/UTP</literal> t&iacute;pus&uacute; fizikai
	    eszk&ouml;zh&ouml;z &aacute;ll&iacute;tottuk be.  Az egyes
	    meghajt&oacute;khoz tartoz&oacute; fizikai
	    m&oacute;dokr&oacute;l a nekik megfelel&#245; man oldalakon
	    olvashatunk.</para>
	</listitem>

	<listitem>
	  <para>A kapcsolat &aacute;llapota (<literal>status</literal>)
	    <literal>active</literal> &eacute;rt&eacute;k&#251;,
	    teh&aacute;t van vonal.  A <devicename>dc1</devicename>
	    eset&eacute;n l&aacute;thatjuk, hogy a <literal>status: no
	    carrier</literal> (nincs vonal).  Ez teljesen
	    norm&aacute;lisnak tekinthet&#245; minden olyan esetben,
	    amikor a k&aacute;rty&aacute;ba m&eacute;g nem dugtunk
	    Ethernet-k&aacute;belt.</para>
	</listitem>
      </orderedlist>

      <para>Amennyiben az &man.ifconfig.8; kimenete valami
	ilyesmi:</para>

      <screen>dc0: flags=8843&lt;BROADCAST,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
	        options=80008&lt;VLAN_MTU,LINKSTATE&gt;
	        ether 00:a0:cc:da:da:da
	        media: Ethernet autoselect (100baseTX &lt;full-duplex&gt;)
	        status: active</screen>

      <para>akkor az arra utal, hogy a k&aacute;rty&aacute;t nem
	&aacute;ll&iacute;tottuk be.</para>

      <para>A k&aacute;rtya be&aacute;ll&iacute;t&aacute;s&aacute;hoz a
	<username>root</username> felhaszn&aacute;l&oacute;
	jogosults&aacute;gaira van sz&uuml;ks&eacute;g&uuml;nk.  A
	h&aacute;l&oacute;zati k&aacute;rty&aacute;k
	be&aacute;ll&iacute;t&aacute;sa az &man.ifconfig.8;
	seg&iacute;ts&eacute;g&eacute;vel elv&eacute;gezhet&#245;
	parancssorb&oacute;l is, de a g&eacute;p
	&uacute;jraind&iacute;t&aacute;sakor az &iacute;gy megadott
	&eacute;rt&eacute;kek elvesznek.  Ez&eacute;rt az
	<filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyba kell
	felvenn&uuml;nk a h&aacute;l&oacute;zati k&aacute;rty&aacute;k
	&eacute;rv&eacute;nyes be&aacute;ll&iacute;t&aacute;sait.</para>

      <para>A kedvenc sz&ouml;vegszerkeszt&#245;nkben nyissuk meg az
	<filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyt.
	Minden egyes h&aacute;l&oacute;zati csatol&oacute;hoz fel kell
	venn&uuml;nk benne egy sort, ennek megfelel&#245;en most a
	p&eacute;ld&aacute;hoz tartoz&oacute; m&oacute;don az
	al&aacute;bbiakat:</para>

      <programlisting>ifconfig_dc0="inet 192.168.1.3 netmask 255.255.255.0"
ifconfig_dc1="inet 10.0.0.1 netmask 255.255.255.0 media 10baseT/UTP"</programlisting>

      <para>A <devicename>dc0</devicename> &eacute;s
	<devicename>dc1</devicename> neveket kell a rendszer&uuml;nkben
	t&eacute;nylegesen megtal&aacute;lhat&oacute; eszk&ouml;z&ouml;k
	neveire kicser&eacute;lni, valamint megadni a nekik
	megfelel&#245; c&iacute;meket.  A k&aacute;rtya
	meghajt&oacute;j&aacute;nak &eacute;s az &man.ifconfig.8; man
	oldal&aacute;nak elolvas&aacute;s&aacute;val
	kider&iacute;thetj&uuml;k az itt megadhat&oacute; tov&aacute;bbi
	be&aacute;ll&iacute;t&aacute;sokat, valamint az &man.rc.conf.5;
	man oldal&aacute;n r&eacute;szletesebben megismerhetj&uuml;k az
	<filename>/etc/rc.conf</filename> formai
	k&ouml;vetelm&eacute;nyeit.</para>

      <para>Ha a telep&iacute;t&eacute;s sor&aacute;n
	be&aacute;ll&iacute;tottuk volna a h&aacute;l&oacute;zati
	kapcsolatokat, akkor tapasztalhatjuk, hogy egyes
	h&aacute;l&oacute;zati k&aacute;rty&aacute;k sorai itt
	m&aacute;r szerepelnek.  Ellen&#245;rizz&uuml;k az
	<filename>/etc/rc.conf</filename> tartalm&aacute;t, miel&#245;tt
	b&#245;v&iacute;ten&eacute;nk!</para>

      <para>Mindezek mellett az <filename>/etc/hosts</filename>
	&aacute;llom&aacute;nyba is be kell &iacute;rnunk a helyi
	h&aacute;l&oacute;zatunkon tal&aacute;lhat&oacute;
	k&uuml;l&ouml;nf&eacute;le g&eacute;pek neveit &eacute;s
	IP-c&iacute;meit, ha m&eacute;g nem szerepeln&eacute;nek ott.
	Err&#245;l tov&aacute;bbi r&eacute;szleteket a &man.hosts.5; man
	oldalr&oacute;l &eacute;s az
	<filename>/usr/share/examples/etc/hosts</filename>
	&aacute;llom&aacute;nyb&oacute;l tudhatunk meg.</para>

      <note>
	<para>Ha a g&eacute;ppel szeretn&eacute;nk majd csatlakozni az
	  internetre, akkor ne felejts&uuml;k el manu&aacute;lisan
	  be&aacute;ll&iacute;tani az alap&eacute;rtelmezett
	  &aacute;tj&aacute;r&oacute;t &eacute;s a
	  n&eacute;vfelold&aacute;shoz sz&uuml;ks&eacute;ges
	  kiszolg&aacute;l&oacute;t:</para>

	<screen>&prompt.root; <userinput>echo 'defaultrouter="<replaceable>alapertelmezett_atjaro</replaceable>"' &gt;&gt; /etc/rc.conf</userinput>
&prompt.root; <userinput>echo 'nameserver <replaceable>DNS_kiszolgalo</replaceable>' &gt;&gt; /etc/resolv.conf</userinput></screen>
      </note>
    </sect2>

    <sect2>
      <title>Tesztel&eacute;s &eacute;s
	hibaelh&aacute;r&iacute;t&aacute;s</title>

      <para>Miut&aacute;n az <filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyban elv&eacute;gezt&uuml;k a
	sz&uuml;ks&eacute;ges v&aacute;ltoztat&aacute;sokat,
	&eacute;rdemes &uacute;jraind&iacute;tanunk a
	rendszer&uuml;nket.  Ennek r&eacute;v&eacute;n
	&eacute;rv&eacute;nyes&iacute;tj&uuml;k a
	csatol&oacute;fel&uuml;letekkel kapcsolatos
	v&aacute;ltoztat&aacute;sainkat &eacute;s
	ellen&#245;rizz&uuml;k, hogy &iacute;gy a rendszer
	mindenf&eacute;le hiba&uuml;zenet n&eacute;lk&uuml;l
	k&eacute;pes elindulni.  A m&aacute;sik lehet&#245;s&eacute;g,
	ha csak mag&aacute;t a h&aacute;l&oacute;zati alrendszer
	konfigur&aacute;ci&oacute;j&aacute;t ind&iacute;tjuk el
	&uacute;jra:</para>

      <screen>&prompt.root; <userinput>/etc/rc.d/netif restart</userinput></screen>

      <note>
	<para>Ha az <filename>/etc/rc.conf</filename>
	  &aacute;llom&aacute;nyban m&aacute;r be&aacute;ll&iacute;tottuk
	  az alap&eacute;rtelmezett &aacute;tj&aacute;r&oacute;t, akkor
	  elegend&#245; csup&aacute;n ez a parancs:</para>

	<screen>&prompt.root; <userinput>/etc/rc.d/routing restart</userinput></screen>
      </note>

      <para>Ahogy &uacute;jrakonfigur&aacute;ltuk a
	h&aacute;l&oacute;zati alrendszert, ki is tudjuk
	pr&oacute;b&aacute;lni a h&aacute;l&oacute;zati
	fel&uuml;leteket.</para>

      <sect3>
	<title>Az Ethernet k&aacute;rty&aacute;k
	  tesztel&eacute;se</title>

	<indexterm>
	  <primary>h&aacute;l&oacute;zati
	    k&aacute;rty&aacute;k</primary>
	  <secondary>tesztel&eacute;se</secondary>
	</indexterm>

	<para>Az Ethernet k&aacute;rty&aacute;k helyes
	  be&aacute;ll&iacute;t&aacute;s&aacute;nak
	  vizsg&aacute;lat&aacute;hoz k&eacute;t dolgot kell
	  kipr&oacute;b&aacute;lnunk.  El&#245;sz&ouml;r is
	  pingelj&uuml;k mag&aacute;t a fel&uuml;letet, majd
	  ezut&aacute;n pingelj&uuml;nk meg a helyi
	  h&aacute;l&oacute;zaton egy m&aacute;sik
	  sz&aacute;m&iacute;t&oacute;g&eacute;pet.</para>

	<para>Els&#245;k&eacute;nt teh&aacute;t pr&oacute;b&aacute;ljuk
	  meg a helyi fel&uuml;letet:</para>

	<screen>&prompt.user; <userinput>ping -c5 192.168.1.3</userinput>
PING 192.168.1.3 (192.168.1.3): 56 data bytes
64 bytes from 192.168.1.3: icmp_seq=0 ttl=64 time=0.082 ms
64 bytes from 192.168.1.3: icmp_seq=1 ttl=64 time=0.074 ms
64 bytes from 192.168.1.3: icmp_seq=2 ttl=64 time=0.076 ms
64 bytes from 192.168.1.3: icmp_seq=3 ttl=64 time=0.108 ms
64 bytes from 192.168.1.3: icmp_seq=4 ttl=64 time=0.076 ms

--- 192.168.1.3 ping statistics ---
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev = 0.074/0.083/0.108/0.013 ms</screen>

	<para>Most pedig pingelj&uuml;nk meg egy m&aacute;sik
	  sz&aacute;m&iacute;t&oacute;g&eacute;pet a helyi
	  h&aacute;l&oacute;zaton:</para>

	<screen>&prompt.user; <userinput>ping -c5 192.168.1.2</userinput>
PING 192.168.1.2 (192.168.1.2): 56 data bytes
64 bytes from 192.168.1.2: icmp_seq=0 ttl=64 time=0.726 ms
64 bytes from 192.168.1.2: icmp_seq=1 ttl=64 time=0.766 ms
64 bytes from 192.168.1.2: icmp_seq=2 ttl=64 time=0.700 ms
64 bytes from 192.168.1.2: icmp_seq=3 ttl=64 time=0.747 ms
64 bytes from 192.168.1.2: icmp_seq=4 ttl=64 time=0.704 ms

--- 192.168.1.2 ping statistics ---
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev = 0.700/0.729/0.766/0.025 ms</screen>

	<para>Ha be&aacute;ll&iacute;tottuk az
	  <filename>/etc/hosts</filename> &aacute;llom&aacute;nyt, akkor
	  a <hostid role="ipaddr">192.168.1.2</hostid> helyett a
	  g&eacute;p nev&eacute;t is megadhatjuk.</para>
      </sect3>

      <sect3>
	<title>A hib&aacute;k elh&aacute;r&iacute;t&aacute;sa</title>

      <indexterm>
	<primary>h&aacute;l&oacute;zati k&aacute;rty&aacute;k</primary>
	<secondary>hibaelh&aacute;r&iacute;t&aacute;sa</secondary>
      </indexterm>

	<para>A hardverek &eacute;s szoftverek
	  be&aacute;ll&iacute;t&aacute;saiban mindig is val&oacute;di
	  k&iacute;n megtal&aacute;lni a hib&aacute;kat, &eacute;s
	  ezeket a k&iacute;nokat t&ouml;bbnyire &uacute;gy tudjuk
	  enyh&iacute;teni, ha el&#245;sz&ouml;r az egyszer&#251;
	  hibaforr&aacute;sokat sz&#251;rj&uuml;k ki.  Csatlakoztattuk a
	  h&aacute;l&oacute;zati k&aacute;belt?  Tisztess&eacute;gesen
	  be&aacute;ll&iacute;tottuk a h&aacute;l&oacute;zati
	  szolg&aacute;ltat&aacute;sokat?  J&oacute;l
	  &aacute;ll&iacute;tottuk be a t&#251;zfalat?  A &os;
	  k&eacute;pes kezelni a k&aacute;rty&aacute;t?  A
	  hibajelent&eacute;sek elk&uuml;ld&eacute;se el&#245;tt mindig
	  b&uacute;jjuk &aacute;t a t&aacute;mogatott
	  hardvereszk&ouml;z&ouml;k list&aacute;j&aacute;t.  A &os;
	  verzi&oacute;kat friss&iacute;ts&uuml;k a leg&uacute;jabb
	  STABLE v&aacute;ltozatra.  Olvassuk &aacute;t a
	  levelez&eacute;si list&aacute;k arch&iacute;vumait vagy
	  legal&aacute;bb keress&uuml;nk r&aacute; a
	  t&eacute;m&aacute;ra az interneten.</para>

	<para>Ha a k&aacute;rtya m&#251;k&ouml;dik, de a
	  teljes&iacute;tm&eacute;nye nem kiel&eacute;g&iacute;t&#245;,
	  &eacute;rdemes ennek ut&aacute;nan&eacute;zni a &man.tuning.7;
	  man oldalon.  Ilyenkor &eacute;rdemes ellen&#245;rizni a
	  h&aacute;l&oacute;zati be&aacute;ll&iacute;t&aacute;sainkat
	  is, mivel a helytelen be&aacute;ll&iacute;t&aacute;sok gyakran
	  okoznak teljes&iacute;tm&eacute;nyveszt&eacute;st.</para>

	<para>Bizonyos esetekben l&aacute;thatunk egy vagy k&eacute;t
	  <errorname>device timeout</errorname> t&iacute;pus&uacute;
	  hib&aacute;t is, ami a k&aacute;rty&aacute;k egyes
	  fajt&aacute;in&aacute;l elfogadhat&oacute;.  Ha azonban
	  folyamatosan megjelennek vagy zavar&oacute;v&aacute;
	  v&aacute;lnak, &eacute;rdemes ut&aacute;nan&eacute;zn&uuml;nk,
	  hogy az eszk&ouml;z nem &uuml;tk&ouml;zik-e valamelyik
	  m&aacute;sikkal.  Mindenk&eacute;ppen
	  gy&#245;z&#245;dj&uuml;nk meg a k&aacute;belek
	  &eacute;ps&eacute;g&eacute;r&#245;l &eacute;s
	  csatlakoztat&aacute;s&aacute;r&oacute;l.  M&eacute;g az is
	  elk&eacute;pzelhet&#245;, hogy egyszer&#251;en csak egy
	  m&aacute;sik h&aacute;l&oacute;zati k&aacute;rty&aacute;ra van
	  sz&uuml;ks&eacute;g&uuml;nk.</para>

	<para>N&eacute;ha felbukkanak <errorname>watchdog
	  timeout</errorname> jelleg&#251; hib&aacute;k is.  Ilyenkor
	  els&#245;k&eacute;nt mindig a h&aacute;l&oacute;zati
	  k&aacute;belt ellen&#245;rizz&uuml;k.  Egyes
	  k&aacute;rty&aacute;knak olyan PCI foglalatra van
	  sz&uuml;ks&eacute;g&uuml;k, ami t&aacute;mogatja a Bus
	  Mastering opci&oacute;t.  N&eacute;h&aacute;ny r&eacute;gebbi
	  alaplapon csak ilyen PCI b&#245;v&iacute;t&#245;hely
	  tal&aacute;lhat&oacute; (ami &aacute;ltal&aacute;ban a 0.
	  foglalat).  Olvassunk ut&aacute;na a h&aacute;l&oacute;zati
	  k&aacute;rtya &eacute;s az alaplap
	  dokument&aacute;ci&oacute;j&aacute;ban, h&aacute;tha ezek
	  okozz&aacute;k a probl&eacute;m&aacute;t.</para>

	<para>A <errorname>No route to host</errorname> &uuml;zenet
	  akkor jelenik meg, ha a rendszer k&eacute;ptelen
	  meg&aacute;llap&iacute;tani, milyen &uacute;ton juttassa el a
	  csomagokat a megadott c&eacute;lhoz.  Ez t&ouml;bbnyire
	  olyankor t&ouml;rt&eacute;nik meg, amikor nem adtunk meg
	  alap&eacute;rtelmezett k&eacute;zbes&iacute;t&eacute;si
	  ir&aacute;nyt (default route) vagy nem dugtuk be a
	  h&aacute;l&oacute;zati k&aacute;belt.  A <command>netstat
	  -rn</command> kimenet&eacute;b&#245;l meg tudjuk
	  &aacute;llap&iacute;tani, hogy l&eacute;tezik-e
	  &eacute;rv&eacute;nyes &uacute;t az el&eacute;rni
	  k&iacute;v&aacute;nt c&eacute;l fel&eacute;.  Ha nincs, akkor
	  haladjunk tov&aacute;bb a <xref
	  linkend="advanced-networking">re.</para>

	<para>A <errorname>ping: sendto: Permission denied</errorname>
	  jelleg&#251; &uuml;zeneteket t&ouml;bbs&eacute;g&eacute;ben
	  egy helytelen&uuml;l be&aacute;ll&iacute;tott t&#251;zfal
	  okozza.  Ha az <command>ipfw</command>
	  m&#251;k&ouml;d&eacute;s&eacute;t enged&eacute;lyezt&uuml;k a
	  rendszermagban, de nem adtunk meg hozz&aacute;
	  szab&aacute;lyokat, akkor az alap&eacute;rtelmezett
	  h&aacute;zirend szerint minden forgalmat blokkolni fog,
	  teh&aacute;t m&eacute;g a pingeket is!  Ezzel kapcsolatban a
	  <xref linkend="firewalls"> elolvas&aacute;s&aacute;t
	  aj&aacute;nljuk.</para>

	<para>El&#245;fordulhat, hogy a k&aacute;rtya
	  teljes&iacute;tm&eacute;nye igen gyenge vagy az &aacute;tlagos
	  alatt van.  Ilyenkor a fizikai eszk&ouml;z
	  <literal>autoselect</literal> (automatikus)
	  t&iacute;pus&uacute; kiv&aacute;laszt&aacute;sa helyett
	  &eacute;rdemes megadnunk a konkr&eacute;t eszk&ouml;znek
	  megfelel&#245; t&iacute;pust.  Hab&aacute;r ez a legt&ouml;bb
	  hardver eset&eacute;n bev&aacute;lik, nem mindenki
	  sz&aacute;m&aacute;ra jelent megold&aacute;st.
	  Ism&eacute;telten csak annyit tudunk ehhez hozz&aacute;tenni,
	  hogy ellen&#245;rizz&uuml;k a h&aacute;l&oacute;zati
	  be&aacute;ll&iacute;t&aacute;sainkat &eacute;s olvassuk el a
	  &man.tuning.7; man oldalt.</para>
      </sect3>
    </sect2>
  </sect1>

  <sect1 id="configtuning-virtual-hosts">
    <title>Virtu&aacute;lis c&iacute;mek</title>

    <indexterm><primary>virtu&aacute;lis
      c&iacute;mek</primary></indexterm>
    <indexterm><primary>IP-&aacute;lnevek</primary></indexterm>

    <para>A &os; alkalmaz&aacute;sa sor&aacute;n igen gyakori a
      virtu&aacute;lis c&iacute;mek haszn&aacute;lata, aminek
      seg&iacute;ts&eacute;g&eacute;vel egyetlen szerver t&ouml;bb
      szerverk&eacute;nt k&eacute;pes l&aacute;tsz&oacute;dni a
      h&aacute;l&oacute;zaton.  Ezt &uacute;gy &eacute;rik el, hogy
      egyetlen fel&uuml;lethez t&ouml;bb h&aacute;l&oacute;zati
      c&iacute;met rendelnek hozz&aacute;.</para>

    <para>Az adott h&aacute;l&oacute;zati csatol&oacute;fel&uuml;letnek
      van egy <quote>val&oacute;di c&iacute;me</quote> &eacute;s
      tetsz&#245;leges sz&aacute;m&uacute;
      <quote>&aacute;lc&iacute;me</quote>.  Ezeket az
      &aacute;lc&iacute;meket &aacute;ltal&aacute;ban az
      <filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyban kell
      felt&uuml;ntetni.</para>

    <para>Az <devicename>fxp0</devicename> fel&uuml;let eset&eacute;n az
      &aacute;lc&iacute;mek megad&aacute;sa valahogy &iacute;gy
      n&eacute;z ki:</para>

    <programlisting>ifconfig_fxp0_alias0="inet xxx.xxx.xxx.xxx netmask xxx.xxx.xxx.xxx"</programlisting>

    <para>Figyelj&uuml;k meg, hogy az &aacute;lc&iacute;mekhez
      tartoz&oacute; bejegyz&eacute;sek az <literal>alias0</literal>
      n&eacute;vvel kezd&#245;dnek &eacute;s sz&aacute;m szerint
      n&ouml;vekv&#245;leg k&ouml;vetkeznek egym&aacute;s ut&aacute;n
      (p&eacute;ld&aacute;ul, <literal>_alias1</literal>,
      <literal>_alias2</literal> &eacute;s &iacute;gy tov&aacute;bb).  A
      be&aacute;ll&iacute;t&aacute;s a sorozat els&#245; kimarad&oacute;
      tagj&aacute;n&aacute;l megszakad.</para>

    <para>Az &aacute;lc&iacute;mek h&aacute;l&oacute;zati
      maszkj&aacute;nak pontos meghat&aacute;roz&aacute;sa nagyon
      fontos, de szerencs&eacute;re nem k&uuml;l&ouml;n&ouml;sebben
      bonyolult.  Minden fel&uuml;let eset&eacute;n lennie kell egy
      olyan c&iacute;mnek, amely helyesen reprezent&aacute;lja a
      h&aacute;l&oacute;zat h&aacute;l&oacute;zati maszkj&aacute;t.
      Minden egy&eacute;b olyan c&iacute;mnek, ami ugyanabba az
      alh&aacute;l&oacute;zatba esik, v&eacute;gig
      <literal>1</literal>-esekb&#245;l &aacute;ll&oacute;
      h&aacute;l&oacute;zati maszkkal kell rendelkezni&uuml;k (ami
      fel&iacute;rhat&oacute; <hostid
      role="netmask">255.255.255.255</hostid> vagy <hostid
      role="netmask">0xffffffff</hostid> form&aacute;j&aacute;ban
      is).</para>

    <para>P&eacute;ld&aacute;ul vegy&uuml;k azt, hogy az
      <devicename>fxp0</devicename> fel&uuml;leten kereszt&uuml;l
      k&eacute;t h&aacute;l&oacute;zathoz csatlakozunk, melyek
      k&ouml;z&uuml;l az egyik a <hostid
      role="ipaddr">10.1.1.0</hostid>, amelynek h&aacute;l&oacute;zati
      maszkja <hostid role="netmask">255.255.255.0</hostid>, &eacute;s a
      <hostid role="ipaddr">202.0.75.16</hostid>, amelynek
      h&aacute;l&oacute;zati maszkja <hostid
      role="netmask">255.255.255.240</hostid>.  Azt szeretn&eacute;nk
      el&eacute;rni, hogy a rendszer&uuml;nk a <hostid
      role="ipaddr">10.1.1.1</hostid> c&iacute;mt&#245;l a <hostid
      role="ipaddr">10.1.1.5</hostid> c&iacute;mig, valamint a <hostid
      role="ipaddr">202.0.75.17</hostid> c&iacute;mt&#245;l a <hostid
      role="ipaddr">202.0.75.20</hostid> c&iacute;mig jelenjen meg a
      nekik megfelel&#245; h&aacute;l&oacute;zatokon.  Ahogy arra
      m&aacute;r fentebb is utaltunk, az adott h&aacute;l&oacute;zati
      tartom&aacute;nyban csak az els&#245; c&iacute;mnek (ebben az
      esetben ez a <hostid role="ipaddr">10.0.1.1</hostid> &eacute;s a
      <hostid role="ipaddr">202.0.75.17</hostid>) kell val&oacute;di
      h&aacute;l&oacute;zati maszkkal rendelkeznie.  Minden
      tov&aacute;bbi c&iacute;mnek (a <hostid
      role="ipaddr">10.1.1.2</hostid> &eacute;s <hostid
      role="ipaddr">10.1.1.5</hostid> k&ouml;z&ouml;tt, valamint a
      <hostid role="ipaddr">202.0.75.18</hostid> &eacute;s <hostid
      role="ipaddr">202.0.75.20</hostid> k&ouml;z&ouml;tt) legyen
      <hostid role="netmask">255.255.255.255</hostid> a
      h&aacute;l&oacute;zati maszkja.</para>

    <para>Az al&aacute;bbi <filename>/etc/rc.conf</filename>
      bejegyz&eacute;sek ennek az elrendez&eacute;snek megfelel&#245;en
      &aacute;ll&iacute;tj&aacute;k be a k&aacute;rty&aacute;t:</para>

    <programlisting>ifconfig_fxp0="inet 10.1.1.1 netmask 255.255.255.0"
ifconfig_fxp0_alias0="inet 10.1.1.2 netmask 255.255.255.255"
ifconfig_fxp0_alias1="inet 10.1.1.3 netmask 255.255.255.255"
ifconfig_fxp0_alias2="inet 10.1.1.4 netmask 255.255.255.255"
ifconfig_fxp0_alias3="inet 10.1.1.5 netmask 255.255.255.255"
ifconfig_fxp0_alias4="inet 202.0.75.17 netmask 255.255.255.240"
ifconfig_fxp0_alias5="inet 202.0.75.18 netmask 255.255.255.255"
ifconfig_fxp0_alias6="inet 202.0.75.19 netmask 255.255.255.255"
ifconfig_fxp0_alias7="inet 202.0.75.20 netmask 255.255.255.255"</programlisting>
  </sect1>

  <sect1 id="configtuning-configfiles">
    <title>Konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nyok</title>

    <sect2>
      <title>Az <filename class="directory">/etc</filename>
	fel&eacute;p&iacute;t&eacute;se</title>

      <para>A be&aacute;ll&iacute;t&aacute;sokkal kapcsolatos
	inform&aacute;ci&oacute;k sz&aacute;mos k&ouml;nyvt&aacute;rban
	t&aacute;rol&oacute;dnak.  T&ouml;bbek k&ouml;zt:</para>

      <informaltable frame="none" pgwide="1">
	<tgroup cols="2">
	  <colspec colwidth="1*">
	  <colspec colwidth="2*">

	  <tbody>
	    <row>
	      <entry><filename class="directory">/etc</filename></entry>
	      <entry>&Aacute;ltal&aacute;nos rendszerszint&#251;
		be&aacute;ll&iacute;t&aacute;sok.  Az itt lev&#245;
		adatok a rendszer eg&eacute;sz&eacute;re
		vonatkoznak.</entry>
	    </row>
	    <row>
	      <entry><filename class="directory">/etc/defaults</filename></entry>
	      <entry>A rendszer konfigur&aacute;ci&oacute;s
		&aacute;llom&aacute;nyainak alap&eacute;rtelmezett
		v&aacute;ltozatai.</entry>
	    </row>
	    <row>
	      <entry><filename class="directory">/etc/mail</filename></entry>
	      <entry>A &man.sendmail.8;
		be&aacute;ll&iacute;t&aacute;s&aacute;hoz tartoz&oacute;
		tov&aacute;bbi &aacute;llom&aacute;nyok, egy&eacute;b
		lev&eacute;lk&uuml;ld&eacute;shez haszn&aacute;lt
		adatok.</entry>
	    </row>
	    <row>
	      <entry><filename class="directory">/etc/ppp</filename></entry>
	      <entry>A felhaszn&aacute;l&oacute;i &eacute;s rendszermag
		szint&#251; ppp programok
		be&aacute;ll&iacute;t&aacute;sai.</entry>
	    </row>
	    <row>
	      <entry><filename class="directory">/etc/namedb</filename></entry>
	      <entry>A &man.named.8; m&#251;k&ouml;d&eacute;s&eacute;hez
		sz&uuml;ks&eacute;ges adatok alap&eacute;rtelmezett
		helye.  &Aacute;ltal&aacute;ban a
		<filename>named.conf</filename> &eacute;s a
		z&oacute;n&aacute;k le&iacute;r&aacute;s&aacute;t
		t&aacute;rol&oacute; &aacute;llom&aacute;nyok
		ker&uuml;lnek ide.</entry>
	    </row>
	    <row>
	      <entry><filename class="directory">/usr/local/etc</filename></entry>
	      <entry>A telep&iacute;tett alkalmaz&aacute;sok
		konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nyai.
		N&eacute;ha alkalmaz&aacute;sonk&eacute;nt
		k&uuml;l&ouml;n k&ouml;nyvt&aacute;rakba ker&uuml;lnek a
		benne tal&aacute;lhat&oacute;
		&aacute;llom&aacute;nyok.</entry>
	    </row>
	    <row>
	      <entry><filename class="directory">/usr/local/etc/rc.d</filename></entry>
	      <entry>A telep&iacute;tett alkalmaz&aacute;sok
		ind&iacute;t&aacute;s&aacute;val &eacute;s
		le&aacute;ll&iacute;t&aacute;s&aacute;val kapcsolatos
		szkriptek.</entry>
	    </row>
	    <row>
	      <entry><filename class="directory">/var/db</filename></entry>
	      <entry>Automatikusan gener&aacute;lt rendszerszint&#251;
		adatb&aacute;zisok a csomagokkal, a programok
		hely&eacute;vel stb.  kapcsolatosan.</entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>
    </sect2>

    <sect2>
      <title>H&aacute;l&oacute;zati nevek</title>

      <indexterm><primary>h&aacute;l&oacute;zati
	n&eacute;v</primary></indexterm>
      <indexterm><primary>DNS</primary></indexterm>

      <sect3>
	<title><filename>/etc/resolv.conf</filename></title>

	<indexterm><primary><filename>resolv.conf</filename></primary></indexterm>

	<para>Az <filename>/etc/resolv.conf</filename> hat&aacute;rozza
	  meg, hogy a &os; n&eacute;vfelold&oacute;ja mik&eacute;nt
	  f&eacute;r hozz&aacute; az internet tartom&aacute;nyn&eacute;v
	  rendszer&eacute;hez (a DNS-hez).</para>

	<para>Az <filename>resolv.conf</filename>
	  &aacute;llom&aacute;nyban leggyakrabban a k&ouml;vetkez&#245;
	  bejegyz&eacute;sek fordulnak el&#245;:</para>

	<informaltable frame="none" pgwide="1">
	  <tgroup cols="2">
	  <colspec colwidth="1*">
	  <colspec colwidth="2*">

	    <tbody>
	      <row>
		<entry><literal>nameserver</literal></entry>
		<entry>Annak a n&eacute;vszernek az IP-c&iacute;me,
		  ahova a n&eacute;vfelold&oacute; k&uuml;ldi a
		  k&eacute;r&eacute;seit.  A n&eacute;vszervereket a
		  fel&iacute;r&aacute;s sorrendj&eacute;ben
		  k&eacute;rdezi meg, maximum h&aacute;rmat.</entry>
	      </row>
	      <row>
		<entry><literal>search</literal></entry>
		<entry>A h&aacute;l&oacute;zati nevek
		  keres&#245;list&aacute;ja.  Ezt
		  &aacute;ltal&aacute;ban a helyi h&aacute;l&oacute;zati
		  nevek tartom&aacute;nya hat&aacute;rozza meg.</entry>
	      </row>
	      <row>
		<entry><literal>domain</literal></entry>
		<entry>A helyi tartom&aacute;ny neve.</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>Egy &aacute;tlagos <filename>resolv.conf</filename>
	  tartalma:</para>

	<programlisting>search example.com
nameserver 147.11.1.11
nameserver 147.11.100.30</programlisting>

	<note>
	  <para>Csak egy <literal>search</literal> &eacute;s
	    <literal>domain</literal> opci&oacute;t szabad
	    megadni.</para>
	</note>

	<para>A DHCP haszn&aacute;latakor a &man.dhclient.8; fel&uuml;l
	  szokta &iacute;rni a <filename>resolv.conf</filename>
	  tartalm&aacute;t a DHCP szervert&#245;l kapott
	  inform&aacute;ci&oacute;kkal.</para>
      </sect3>

      <sect3>
	<title><filename>/etc/hosts</filename></title>

	<indexterm><primary>hosts</primary></indexterm>

	<para>Az <filename>/etc/hosts</filename> az internet kezdeti
	  napjaira eml&eacute;keztet&#245; egyszer&#251; sz&ouml;veges
	  adatb&aacute;zis.  A nevek &eacute;s IP-c&iacute;mek
	  k&ouml;zti lek&eacute;pz&eacute;seket a DNS &eacute;s NIS
	  rendszerekkel kar&ouml;ltve oldja fel.  Ide a helyi
	  h&aacute;l&oacute;zaton csatlakoz&oacute;
	  sz&aacute;m&iacute;t&oacute;g&eacute;pek neveit lehet
	  be&iacute;rni ahelyett, hogy erre a c&eacute;lra
	  be&aacute;ll&iacute;tan&aacute;nk egy k&uuml;l&ouml;n
	  &man.named.8; szervert.  Ezenk&iacute;v&uuml;l m&eacute;g az
	  <filename>/etc/hosts</filename> &aacute;llom&aacute;nyba
	  internetes nevek rekordj&aacute;t is felvehetj&uuml;k, amivel
	  &iacute;gy cs&ouml;kkenthetj&uuml;k a gyakran haszn&aacute;lt
	  nevek felold&aacute;s&aacute;ra ir&aacute;nyul&oacute;
	  k&uuml;ls&#245; k&eacute;r&eacute;seket.</para>

	<programlisting># &dollar;&os;&dollar;
#
#
# A h&aacute;l&oacute;zati nevek adatb&aacute;zisa
#
# Ebbe az &aacute;llom&aacute;nyba rakjuk a helyi h&aacute;l&oacute;zaton tal&aacute;lhat&oacute; c&iacute;meket &eacute;s
# a hozz&aacute;juk tartoz&oacute; h&aacute;l&oacute;zati neveket, ahol szinte ugyanez az
# adatb&aacute;zis megtal&aacute;lhat&oacute;.  A 'my.domain' hely&eacute;re a saj&aacute;t g&eacute;p&uuml;nk
# nev&eacute;t &iacute;rjuk be.
#
# A DNS vagy NIS alkalmaz&aacute;sa eset&eacute;n ez az &aacute;llom&aacute;ny nem felt&eacute;tlen&uuml;l ker&uuml;l
# felhaszn&aacute;l&aacute;sra. A n&eacute;vfelold&aacute;s sorrendj&eacute;t az /etc/nsswitch.conf
# &aacute;llom&aacute;nyban adhatjuk meg.
#
::1                     localhost localhost.my.domain
127.0.0.1               localhost localhost.my.domain

#
# Egy k&eacute;pzeletbeli h&aacute;l&oacute;zat.
#10.0.0.2               myname.my.domain myname
#10.0.0.3               myfriend.my.domain myfriend
#
# Az RFC 1918-nak megfelel&#245;en a k&ouml;vetkez&#245; IP-c&iacute;mekkel rendelkez&#245;
# alh&aacute;l&oacute;zatok sosem csatlakozhatnak k&ouml;zvetlen&uuml;l az internetre:
#
#       10.0.0.0        -   10.255.255.255
#       172.16.0.0      -   172.31.255.255
#       192.168.0.0     -   192.168.255.255
#
# Amikor csatlakozunk az internethez, egy val&oacute;di, hivatalosan
# kiosztott sz&aacute;mra lesz sz&uuml;ks&eacute;g&uuml;nk.  Ne tal&aacute;ljunk ki magunknak
# h&aacute;l&oacute;zati c&iacute;meket, hanem haszn&aacute;ljuk az internetszolg&aacute;ltat&oacute;t&oacute;l
# kapott c&iacute;met (amennyiben rendelkez&uuml;nk # ilyennel) vagy az
# region&aacute;lis internetes nyilv&aacute;ntart&aacute;sban szerepl&#245; c&iacute;mek k&ouml;z&uuml;l
# valamelyiket (ARIN, APNIC, LACNIC, RIPE NCC vagy AfriNIC).
</programlisting>

	<para>Az <filename>/etc/hosts</filename> formai
	  fel&eacute;p&iacute;t&eacute;se igen egyszer&#251;:</para>

	<programlisting>[internetes c&iacute;m] [hivatalos h&aacute;l&oacute;zati n&eacute;v] [&aacute;ln&eacute;v1] [&aacute;ln&eacute;v2] ...</programlisting>

	<para>Teh&aacute;t p&eacute;ld&aacute;ul:</para>

	<programlisting>10.0.0.1 azEnValodiNevem.aHalozaton.hu azEnValodiNevem izemize1 izemize2</programlisting>

	<para>A r&eacute;szletek&eacute;rt keress&uuml;k fel a
	  &man.hosts.5; man oldalt.</para>
      </sect3>
    </sect2>

    <sect2>
      <title>A napl&oacute;&aacute;llom&aacute;nyok
	be&aacute;ll&iacute;t&aacute;sa</title>

      <indexterm><primary>napl&oacute;&aacute;llom&aacute;nyok</primary></indexterm>

      <sect3>
	<title><filename>syslog.conf</filename></title>

	<indexterm><primary>syslog.conf</primary></indexterm>

	<para>A <filename>syslog.conf</filename> &aacute;llom&aacute;ny
	  a &man.syslogd.8; program be&aacute;ll&iacute;t&aacute;sait
	  tartalmazza.  Seg&iacute;ts&eacute;g&eacute;vel megadhatjuk,
	  hogy a <command>syslog</command> &aacute;ltal gener&aacute;lt
	  &uuml;zenetek egyes t&iacute;pusait milyen
	  napl&oacute;&aacute;llom&aacute;nyokba ments&uuml;k.</para>

	<programlisting># &dollar;&os;&dollar;
#
# Ebben az &aacute;llom&aacute;nyban HASZN&Aacute;LHAT&Oacute;AK sz&oacute;k&ouml;z&ouml;k a mez&#245;k elv&aacute;laszt&aacute;s&aacute;ra,
# hab&aacute;r a t&ouml;bbi *nix-t&iacute;pus&uacute; rendszer ink&aacute;bb tabul&aacute;torokat haszn&aacute;l
# erre a c&eacute;lra. Ha t&ouml;bb rendszeren is haszn&aacute;lni akarjuk ezt az
# &aacute;llom&aacute;nyt, akkor ne haszn&aacute;ljunk sz&oacute;k&ouml;z&ouml;ket.
#
# A t&ouml;bbit l&aacute;sd a syslog.conf(5) man oldalon.
#
.err;kern.debug;auth.notice;mail.crit           /dev/console
*.notice;kern.debug;lpr.info;mail.crit;news.err /var/log/messages
security.*                                      /var/log/security
mail.info                                       /var/log/maillog
lpr.info                                        /var/log/lpd-errs
cron.*                                          /var/log/cron
*.err                                           root
*.notice;news.err                               root
*.alert                                         root
*.emerg                                         *
# Tegy&uuml;k vissza ezt a sort, ha a /dev/console eszk&ouml;zre ki&iacute;rt
# &uuml;zeneteket &aacute;t akarjuk ir&aacute;ny&iacute;tani az /var/log/console.log &aacute;llom&aacute;nyba.
#console.info                                   /var/log/console.log
# Ha az &ouml;sszes &uuml;zenetet a /var/log/all.log &aacute;llom&aacute;nyba akarjuk menteni,
# akkor tegy&uuml;k vissza ezt a sort.
#*.*                                            /var/log/all.log
# Ha egy "loghost" nev&#251; g&eacute;pre szeretn&eacute;nk napl&oacute;zni, akkor tegy&uuml;k vissza
# ezt a sort.
#*.*                                            @loghost
# Az inn haszn&aacute;latakor tegy&uuml;k vissza ezeket a sorokat.
# news.crit                                     /var/log/news/news.crit
# news.err                                      /var/log/news/news.err
# news.notice                                   /var/log/news/news.notice
!startslip
*.*                                             /var/log/slip.log
!ppp
*.*                                             /var/log/ppp.log</programlisting>

	<para>A &man.syslog.conf.5; man oldal&aacute;nak
	  elolvas&aacute;s&aacute;val tudhatunk meg t&ouml;bbet
	  ezekr&#245;l.</para>
      </sect3>

      <sect3>
	<title><filename>newsyslog.conf</filename></title>

	<indexterm><primary>newsyslog.conf</primary></indexterm>

	<para>A <filename>newsyslog.conf</filename> a &man.newsyslog.8;
	  be&aacute;ll&iacute;t&aacute;sait t&aacute;rol&oacute;
	  &aacute;llom&aacute;ny.  Ez egy olyan program, amelyet
	  &aacute;ltal&aacute;ban a &man.cron.8; futtat le.  A
	  &man.newsyslog.8; d&ouml;nti el, hogy mikor van
	  sz&uuml;ks&eacute;g a napl&oacute;k
	  archiv&aacute;l&aacute;s&aacute;ra &eacute;s
	  &aacute;trendez&eacute;s&eacute;re.  Ennek sor&aacute;n a
	  <filename>logfile</filename> &aacute;llom&aacute;nyb&oacute;l
	  <filename>logfile.0</filename> lesz, a
	  <filename>logfile.0</filename>
	  &aacute;llom&aacute;nyb&oacute;l pedig
	  <filename>logfile.1</filename> &eacute;s &iacute;gy
	  tov&aacute;bb.  Be&aacute;ll&iacute;thatjuk &uacute;gy is,
	  hogy a napl&oacute;&aacute;llom&aacute;nyokat
	  archiv&aacute;lja &man.gzip.1; form&aacute;tumban, aminek
	  megfelel&#245;en ezek <filename>logfile.0.gz</filename>,
	  <filename>logfile.1.gz</filename> &eacute;s ehhez
	  hasonl&oacute; n&eacute;vvel j&ouml;nnek l&eacute;tre.</para>

	<para>A <filename>newsyslog.conf</filename> megadja, hogy melyik
	  napl&oacute;&aacute;llom&aacute;nyokat kell fel&uuml;gyelni,
	  mennyi p&eacute;ld&aacute;nyt tartsunk meg bel&#245;l&uuml;k
	  &eacute;s mikor kell vel&uuml;k foglalkozni.  A
	  napl&oacute;&aacute;llom&aacute;nyok
	  &aacute;trendezhet&#245;ek &eacute;s/vagy
	  archiv&aacute;lhat&oacute;ak egy adott m&eacute;ret
	  el&eacute;r&eacute;sekor vagy egy adott id&#245; eltelte
	  ut&aacute;n.</para>

	<programlisting># A newsyslog konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nya
# &dollar;&os;&dollar;
#
# &aacute;llom&aacute;nyn&eacute;v     [tulajdonos:csoport]  m&oacute;d  darab m&eacute;ret mikor [ZB] [/pid_&aacute;llom&aacute;ny] [jelz&eacute;s]
/var/log/cron                           600  3     100  *     Z
/var/log/amd.log                        644  7     100  *     Z
/var/log/kerberos.log                   644  7     100  *     Z
/var/log/lpd-errs                       644  7     100  *     Z
/var/log/maillog                        644  7     *    @T00  Z
/var/log/sendmail.st                    644  10    *    168   B
/var/log/messages                       644  5     100  *     Z
/var/log/all.log                        600  7     *    @T00  Z
/var/log/slip.log                       600  3     100  *     Z
/var/log/ppp.log                        600  3     100  *     Z
/var/log/security                       600  10    100  *     Z
/var/log/wtmp                           644  3     *    @01T05 B
/var/log/daily.log                      640  7     *    @T00  Z
/var/log/weekly.log                     640  5     1    $W6D0 Z
/var/log/monthly.log                    640  12    *    $M1D0 Z
/var/log/console.log                    640  5     100  *     Z</programlisting>

	<para>Tov&aacute;bbi inform&aacute;ci&oacute;kat a
	  &man.newsyslog.8; man oldal&aacute;r&oacute;l
	  nyerhet&uuml;nk.</para>
      </sect3>
    </sect2>

    <sect2 id="configtuning-sysctlconf">
      <title><filename>sysctl.conf</filename></title>

      <indexterm><primary>sysctl.conf</primary></indexterm>
      <indexterm><primary>sysctl</primary></indexterm>

      <para>A <filename>sysctl.conf</filename> &aacute;llom&aacute;ny
	legink&aacute;bb az <filename>rc.conf</filename>
	&aacute;llom&aacute;nyhoz hasonl&iacute;t, benne az
	&eacute;rt&eacute;keket
	<literal>v&aacute;ltoz&oacute;=&eacute;rt&eacute;k</literal>
	p&aacute;rokban adhatjuk meg.  Az itt defini&aacute;lt
	&eacute;rt&eacute;kek akkor ker&uuml;lnek t&eacute;nylegesen
	be&aacute;ll&iacute;t&aacute;sra, amikor a rendszer
	t&ouml;bbfelhaszn&aacute;l&oacute;s m&oacute;dba v&aacute;lt.
	Ezen a m&oacute;don nem mindegyik v&aacute;ltoz&oacute;
	&eacute;rt&eacute;k&eacute;t tudjuk
	&aacute;t&aacute;ll&iacute;tani.</para>

      <para>A <filename>sysctl.conf</filename> &aacute;llom&aacute;nyban
	az al&aacute;bbi &eacute;rt&eacute;k
	be&aacute;ll&iacute;t&aacute;s&aacute;val tudjuk
	be&aacute;ll&iacute;tani, hogy a rendszer ne napl&oacute;zza,
	amikor a programok v&eacute;gzetes jelz&eacute;ssel
	fejez&#245;dnek be, valamint azt, hogy a
	felhaszn&aacute;l&oacute;k l&aacute;thass&aacute;k egym&aacute;s
	fut&oacute; programjait:</para>

      <programlisting># Ne napl&oacute;zzuk a v&eacute;gzetes jelz&eacute;sekhez (p&eacute;ld&aacute;ul sig 11) tartoz&oacute; kil&eacute;p&eacute;seket.
kern.logsigexit=0

# Ne engedj&uuml;k a felhaszn&aacute;l&oacute;knak, hogy l&aacute;ss&aacute;k egy m&aacute;sik felhaszn&aacute;l&oacute;
# azonos&iacute;t&oacute;j&aacute;val fut&oacute; programokat.
security.bsd.see_other_uids=0</programlisting>
    </sect2>
  </sect1>

  <sect1 id="configtuning-sysctl">
    <title>Finomhangol&aacute;s a sysctl
      haszn&aacute;lat&aacute;val</title>

    <indexterm><primary>sysctl</primary></indexterm>
    <indexterm>
      <primary>finomhangol&aacute;s</primary>
      <secondary>a sysctl haszn&aacute;lat&aacute;val</secondary>
    </indexterm>

    <para>A &man.sysctl.8; egy olyan fel&uuml;let, amely
      lehet&#245;s&eacute;get biztos&iacute;t egy m&#251;k&ouml;d&#245;
      &os; rendszer megv&aacute;ltoztat&aacute;s&aacute;ra.
      Seg&iacute;ts&eacute;g&eacute;vel t&ouml;bbek k&ouml;zt
      hozz&aacute;f&eacute;rhet&uuml;nk a TCP/IP protokollk&eacute;szlet
      &eacute;s a virtu&aacute;lis mem&oacute;ri&aacute;t kezel&#245;
      alrendszer rengeteg apr&oacute; opci&oacute;j&aacute;hoz, melyek
      megfelel&#245; be&aacute;ll&iacute;t&aacute;s&aacute;val egy
      tapasztalt rendszergazda kez&eacute;ben drasztikusan
      n&ouml;velhet&#245; a rendszer teljes&iacute;tm&eacute;nye.  A
      &man.sysctl.8; alkalmaz&aacute;s&aacute;val t&ouml;bb mint
      &ouml;tsz&aacute;z rendszerszint&#251; v&aacute;ltoz&oacute;
      k&eacute;rdezhet&#245; le &eacute;s &aacute;ll&iacute;that&oacute;
      be.</para>

    <para>A &man.sysctl.8; k&eacute;t funkci&oacute;t rejt
      mag&aacute;ban: a rendszer be&aacute;ll&iacute;t&aacute;sainak
      lek&eacute;rdez&eacute;s&eacute;t &eacute;s
      m&oacute;dos&iacute;t&aacute;s&aacute;t.</para>

    <para>&Iacute;gy n&eacute;zhetj&uuml;k meg az &ouml;sszes
      lek&eacute;rdezhet&oacute; v&aacute;ltoz&oacute;t:</para>

    <screen>&prompt.user; <userinput>sysctl -a</userinput></screen>

    <para>&Iacute;gy k&eacute;rhetj&uuml;k egy konkr&eacute;t
      v&aacute;ltoz&oacute;, p&eacute;ld&aacute;ul a
      <varname>kern.maxproc</varname>
      &eacute;rt&eacute;k&eacute;t:</para>

    <screen>&prompt.user; <userinput>sysctl kern.maxproc</userinput>
kern.maxproc: 1044</screen>

    <para>Egy adott v&aacute;ltoz&oacute; &eacute;rt&eacute;k&eacute;nek
      m&oacute;dos&iacute;t&aacute;s&aacute;hoz pedig haszn&aacute;ljuk
      a
      <replaceable>v&aacute;ltoz&oacute;</replaceable>=<replaceable>&eacute;rt&eacute;k</replaceable>
      fel&iacute;r&aacute;st:</para>

    <screen>&prompt.root; <userinput>sysctl kern.maxfiles=5000</userinput>
kern.maxfiles: 2088 -&gt; 5000</screen>

    <para>A sysctl v&aacute;ltoz&oacute;k &eacute;rt&eacute;kei lehetnek
      karakterl&aacute;ncok, sz&aacute;mok &eacute;s logikai
      &eacute;rt&eacute;kek (ahol az <literal>1</literal> az igennek, a
      <literal>0</literal> a nemnek felel meg).</para>

    <para>Ha a sz&aacute;m&iacute;t&oacute;g&eacute;p
      ind&iacute;t&aacute;sakor automatikusan be akarunk
      &aacute;ll&iacute;tani bizonyos v&aacute;ltoz&oacute;kat, akkor
      vegy&uuml;k fel ezeket az <filename>/etc/sysctl.conf</filename>
      &aacute;llom&aacute;nyba.  Ennek pontosabb r&eacute;szleteit a
      &man.sysctl.conf.5; man oldalon &eacute;s a <xref
      linkend="configtuning-sysctlconf">ban tal&aacute;lhatjuk
      meg.</para>

  <sect2 id="sysctl-readonly">
    <sect2info>
      <authorgroup>
	<author>
	 <firstname>Tom</firstname>
	 <surname>Rhodes</surname>
	 <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect2info>

    <title>A &man.sysctl.8; &iacute;r&aacute;sv&eacute;dett
      &eacute;rt&eacute;kei</title>

    <para>Egyes esetekben sz&uuml;ks&eacute;ges lehet a &man.sysctl.8;
      &iacute;r&aacute;sv&eacute;dett v&aacute;ltoz&oacute;inak
      m&oacute;dos&iacute;t&aacute;sa.  Hab&aacute;r gyakran
      elengedhetetlen, ezt kiz&aacute;r&oacute;lag csak a rendszer
      (&uacute;jra)ind&iacute;t&aacute;sakor tudjuk megtenni.</para>

    <para>P&eacute;ld&aacute;ul egyes laptopokn&aacute;l a
      &man.cardbus.4; eszk&ouml;z nem pr&oacute;b&aacute;lkozik
      t&ouml;bb mem&oacute;riater&uuml;let haszn&aacute;lat&aacute;val,
      ez&eacute;rt egy ehhez hasonl&oacute; hib&aacute;val
      le&aacute;ll:</para>

    <screen>cbb0: Could not map register memory
device_probe_and_attach: cbb0 attach returned 12</screen>

    <para>Az ilyen &eacute;s ehhez hasonl&oacute; esetekben gyakran
      olyan &man.sysctl.8; v&aacute;ltoz&oacute;k alap&eacute;rtelmezett
      &eacute;rt&eacute;keit kellene megv&aacute;ltoztatnunk, amelyek
      &iacute;r&aacute;sv&eacute;dettek.  Ilyenkor tegy&uuml;k az
      &eacute;rintett &man.sysctl.8; v&aacute;ltoz&oacute;
      <quote>objektumazonos&iacute;t&oacute;j&aacute;t</quote> (OID)
      &eacute;s a hozz&aacute; tartoz&oacute; &eacute;rt&eacute;ket a
      <filename>/boot/loader.conf</filename>
      &aacute;llom&aacute;nyunkba.  Az alap&eacute;rtelmez&eacute;seket
      a <filename>/boot/defaults/loader.conf</filename>
      &aacute;llom&aacute;nyban tal&aacute;ljuk meg.</para>

    <para>A fentebb t&aacute;rgyalt probl&eacute;ma
      megold&aacute;s&aacute;hoz a felhaszn&aacute;l&oacute;nak a
      <option>hw.pci.allow_unsupported_io_range=1</option>
      &eacute;rt&eacute;ket kell be&aacute;ll&iacute;tania az el&#245;bb
      eml&iacute;tett &aacute;llom&aacute;nyban.  Ezut&aacute;n
      m&aacute;r a &man.cardbus.4; megfelel&#245;en fog
      m&#251;k&ouml;dni.</para>
    </sect2>
  </sect1>

  <sect1 id="configtuning-disk">
    <title>A lemezek finomhangol&aacute;sa</title>

    <sect2>
      <title>Sysctl v&aacute;ltoz&oacute;k</title>

      <sect3>
	<title><varname>vfs.vmiodirenable</varname></title>

	<indexterm><primary><varname>vfs.vmiodirenable</varname></primary></indexterm>

	<para>A <varname>vfs.vmiodirenable</varname> sysctl
	  v&aacute;ltoz&oacute; &eacute;rt&eacute;ke lehet 0 (ki) vagy 1
	  (be, &eacute;s ez az alap&eacute;rtelmez&eacute;s is).  Ez a
	  v&aacute;ltoz&oacute; vez&eacute;rli a k&ouml;nyvt&aacute;rak
	  gyors&iacute;t&oacute;t&aacute;raz&aacute;s&aacute;t a
	  rendszerben.  A k&ouml;nyvt&aacute;rak t&ouml;bbs&eacute;ge
	  kis m&eacute;ret&#251;, &iacute;gy az
	  &aacute;llom&aacute;nyrendszerb&#245;l csak egyetlen
	  (&aacute;ltal&aacute;ban 1&nbsp;KB m&eacute;ret&#251;)
	  darabk&aacute;t haszn&aacute;lnak &eacute;s m&eacute;g
	  enn&eacute;l is kevesebbet (&aacute;ltal&aacute;ban
	  512&nbsp;byte-ot) a pufferben.  A v&aacute;ltoz&oacute;
	  kikapcsolt (avagy 0) &eacute;rt&eacute;ke mellett a puffer
	  csak r&ouml;gz&iacute;tett sz&aacute;m&uacute;
	  k&ouml;nyvt&aacute;rat t&aacute;raz be m&eacute;g abban az
	  esetben is, amikor tem&eacute;rdek mennyis&eacute;g&#251;
	  mem&oacute;ria &aacute;ll a rendelkez&eacute;s&eacute;re.  Ha
	  viszont (az 1 &eacute;rt&eacute;kkel)
	  enged&eacute;lyezz&uuml;k, akkor a rendszer a
	  k&ouml;nyvt&aacute;rak t&aacute;raz&aacute;s&aacute;ra
	  felhaszn&aacute;lja a virtu&aacute;lis
	  mem&oacute;ri&aacute;ban pufferelt lapokat is, amivel
	  l&eacute;nyeg&eacute;ben az &ouml;sszes el&eacute;rhet&#245;
	  mem&oacute;ri&aacute;t a k&ouml;nyvt&aacute;rak
	  t&aacute;raz&aacute;s&aacute;ra ford&iacute;tja.  Ilyenkor
	  azonban az egyes k&ouml;nyvt&aacute;rak
	  t&aacute;raz&aacute;s&aacute;ra haszn&aacute;lt legkisebb
	  mem&oacute;riater&uuml;let a fizikai lapm&eacute;rettel
	  egyezik meg (ami &aacute;ltal&aacute;ban 4&nbsp;KB) &eacute;s
	  nem 512&nbsp;byte.  Abban az esetben javasoljuk ennek a
	  be&aacute;ll&iacute;t&aacute;snak a haszn&aacute;lat&aacute;t,
	  ha olyan szolg&aacute;ltat&aacute;sokkal dolgozunk, amelyek
	  nagy sz&aacute;m&uacute; &aacute;llom&aacute;nnyal dolgoznak
	  egyszerre.  Ilyen szolg&aacute;ltat&aacute;sok t&ouml;bbek
	  k&ouml;zt a webes gyors&iacute;t&oacute;t&aacute;rak, nagyobb
	  levelez&#245;rendszerek &eacute;s h&iacute;rrendszerek.  Az
	  opci&oacute; enged&eacute;lyez&eacute;se alapvet&#245;en nem
	  veti vissza a rendszer teljes&iacute;tm&eacute;ny&eacute;t
	  m&eacute;g akkor sem, ha ezzel mem&oacute;ri&aacute;t
	  pazarlunk el, de ezt igaz&aacute;b&oacute;l &eacute;rdemes
	  kik&iacute;s&eacute;rletezni.</para>
      </sect3>

     <sect3>
	<title><varname>vfs.write_behind</varname></title>

	<indexterm><primary><varname>vfs.write_behind</varname></primary></indexterm>

	<para>A <varname>vfs.write_behind</varname> sysctl
	  v&aacute;ltoz&oacute; alap&eacute;rtelmezett
	  &eacute;rt&eacute;ke <literal>1</literal> (bekapcsolt).  Ez
	  arra utas&iacute;tja az &aacute;llom&aacute;nyrendszert, hogy
	  csak akkor k&uuml;ldje ki az adatokat az eszk&ouml;zre, ha
	  bel&#245;l&uuml;k teljes f&uuml;rt&ouml;k gy&#251;ltek
	  &ouml;ssze.  Ez jellemz&#245; m&oacute;don nagyobb
	  szekvenci&aacute;lis &aacute;llom&aacute;nyok
	  &iacute;r&aacute;sa eset&eacute;n kedvez&#245;.  Arra
	  szolg&aacute;l, hogy seg&iacute;ts&eacute;g&eacute;vel el
	  lehessen ker&uuml;lni az I/O t&uacute;ls&aacute;gosan gyakori
	  m&oacute;dos&iacute;t&aacute;sok okozta
	  terhel&eacute;s&eacute;t.  Bizonyos
	  k&ouml;r&uuml;lm&eacute;nyek k&ouml;zt ez azonban
	  lass&iacute;thatja a fut&oacute; programok
	  m&#251;k&ouml;d&eacute;s&eacute;t, ez&eacute;rt ilyenkor
	  &eacute;rdemes megfontolni a
	  kikapcsol&aacute;s&aacute;t.</para>
       </sect3>

       <sect3>
	<title><varname>vfs.hirunningspace</varname></title>

	<indexterm><primary><varname>vfs.hirunningspace</varname></primary></indexterm>

	<para>A <varname>vfs.hirunningspace</varname> sysctl
	  v&aacute;ltoz&oacute; &eacute;rt&eacute;ke azt adja meg, hogy
	  tetsz&#245;leges sz&aacute;m&uacute;
	  p&eacute;ld&aacute;nyn&aacute;l rendszerszinten mekkora
	  m&eacute;rt&eacute;k&#251; &iacute;r&aacute;si m&#251;velet
	  ir&aacute;ny&iacute;that&oacute; &aacute;t a
	  lemezvez&eacute;rl&#245;k soraiba.  Az
	  alap&eacute;rtelmez&eacute;s t&ouml;bbnyire elegend&#245;, de
	  olyan g&eacute;peken, ahol sok lemez dolgozik egyszerre, ez az
	  &eacute;rt&eacute;k n&eacute;gy vagy &ouml;t
	  <emphasis>megabyte-ra</emphasis> is felsz&ouml;khet!
	  Hozz&aacute;tenn&eacute;nk, hogy ha ezt az
	  &eacute;rt&eacute;ket t&uacute;ls&aacute;gosan nagyra
	  &aacute;ll&iacute;tjuk (&eacute;s &iacute;gy
	  t&uacute;ll&eacute;pj&uuml;k a puffer &iacute;r&aacute;si
	  k&uuml;sz&ouml;b&eacute;rt&eacute;k&eacute;t), akkor ezzel
	  hihetetlen&uuml;l gyenge f&uuml;rt&ouml;z&eacute;si
	  teljes&iacute;tm&eacute;nyt nyer&uuml;nk.  Semmik&eacute;pp se
	  &aacute;ll&iacute;tsuk t&uacute;lzottan nagy
	  &eacute;rt&eacute;kre!  A nagyobb &iacute;r&aacute;si
	  &eacute;rt&eacute;kek a vel&uuml;k p&aacute;rhuzamos
	  olvas&aacute;sok sz&aacute;m&aacute;ra
	  k&eacute;sleltet&eacute;st is jelentenek.</para>

	<para>Tal&aacute;lhatunk m&eacute;g m&aacute;s egy&eacute;b
	  pufferel&eacute;si &eacute;s
	  gyors&iacute;t&oacute;t&aacute;raz&aacute;si sysctl
	  v&aacute;ltoz&oacute;kat, azonban ezek
	  megv&aacute;ltoztat&aacute;s&aacute;t egy&aacute;ltal&aacute;n
	  nem javasoljuk, mivel a virtu&aacute;lis mem&oacute;ria
	  alrendszer kiv&aacute;l&oacute;an tudja
	  &ouml;n&aacute;ll&oacute;an &aacute;ll&iacute;tani ezeket a
	  param&eacute;tereit.</para>
       </sect3>

       <sect3>
	<title><varname>vm.swap_idle_enabled</varname></title>

	<indexterm><primary><varname>vm.swap_idle_enabled</varname></primary></indexterm>

	<para>A <varname>vm.swap_idle_enabled</varname> sysctl
	  v&aacute;ltoz&oacute; m&oacute;dos&iacute;t&aacute;sa olyan
	  nagyobb t&ouml;bbfelhaszn&aacute;l&oacute;s rendszerekben
	  bizonyulhat hasznosnak, ahol sok felhaszn&aacute;l&oacute;
	  l&eacute;p be &eacute;s l&eacute;p ki a rendszerbe &eacute;s
	  sok az &uuml;resj&aacute;ratban fut&oacute; program.  Az ilyen
	  jelleg&#251; rendszerek hajlamosak nagy mennyis&eacute;g&#251;
	  folyamatos terhel&eacute;st m&eacute;rni a tartal&eacute;kolt
	  szabad mem&oacute;ri&aacute;ra.  A
	  be&aacute;ll&iacute;t&aacute;s
	  enged&eacute;lyez&eacute;s&eacute;vel, valamint a
	  <varname>vm.swap_idle_threshold1</varname> &eacute;s a
	  <varname>vm.swap_idle_threshold2</varname>
	  v&aacute;ltoz&oacute;kon kereszt&uuml;l a kilapoz&aacute;s
	  <quote>reakci&oacute;idej&eacute;nek</quote> alkalmas
	  behangol&aacute;s&aacute;val a megszokottn&aacute;l gyorsabban
	  lenyomhatjuk az &uuml;resj&aacute;ratban dolgoz&oacute;
	  programokhoz tartoz&oacute; mem&oacute;rialapok
	  priorit&aacute;s&aacute;t, amivel a kilapoz&aacute;sokat
	  vez&eacute;rl&#245; d&eacute;mon kez&eacute;re
	  j&aacute;tszunk.  Azonban t&eacute;nyleg csak akkor
	  enged&eacute;lyezz&uuml;k ezt a lehet&#245;s&eacute;get, ha
	  val&oacute;ban sz&uuml;ks&eacute;g&uuml;nk van r&aacute;,
	  mivel &iacute;gy a mem&oacute;ri&aacute;t j&oacute;val
	  el&#245;bb lapozzuk ki &eacute;s ezzel t&ouml;bb
	  lapoz&oacute;&aacute;llom&aacute;nyt &eacute;s
	  lemezteljes&iacute;tm&eacute;nyt em&eacute;szt&uuml;nk fel.
	  Kisebb rendszerekben j&oacute;l behat&aacute;rolhat&oacute; a
	  hat&aacute;sa, azonban a nagyobb rendszerekben, ahol
	  m&aacute;r eleve visszafogott m&eacute;rt&eacute;k&#251;
	  lapoz&aacute;s t&ouml;rt&eacute;nik, ez a
	  be&aacute;ll&iacute;t&aacute;s lehet&#245;v&eacute; teszi a
	  virtu&aacute;lis mem&oacute;ri&aacute;t kezel&#245; alrendszer
	  sz&aacute;m&aacute;ra, hogy k&ouml;nnyed&eacute;n ki-
	  &eacute;s be rakosgasson komplett fut&oacute; programokat a
	  mem&oacute;ri&aacute;ba.</para>
       </sect3>

      <sect3>
	<title><varname>hw.ata.wc</varname></title>

	<indexterm><primary><varname>hw.ata.wc</varname></primary></indexterm>

	<para>A &os;&nbsp;4.3 egyszer m&aacute;r kac&eacute;rkodott az
	  IDE-lemezek &iacute;r&aacute;si puffer&eacute;nek
	  kikapcsol&aacute;s&aacute;val.  Ez ugyan cs&ouml;kkentette az
	  IDE-lemezek &iacute;r&aacute;si
	  s&aacute;vsz&eacute;less&eacute;g&eacute;t, azonban bizonyos
	  merevlemezgy&aacute;rt&oacute;k
	  gondatlans&aacute;g&aacute;b&oacute;l ered&#245; s&uacute;lyos
	  adatveszt&eacute;sek miatt sz&uuml;ks&eacute;ges volt a
	  haszn&aacute;lata.  A gond ezzel kapcsolatban ott van, hogy
	  egyes IDE-meghajt&oacute;k hazudnak az &iacute;r&aacute;sok
	  teljes&iacute;t&eacute;s&eacute;r&#245;l.  A lemezek
	  &iacute;r&aacute;si
	  gyors&iacute;t&oacute;t&aacute;raz&aacute;s&aacute;nak
	  bekapcsol&aacute;s&aacute;val az IDE-meghajt&oacute;k nem csak
	  az &iacute;r&aacute;sok sorrendj&eacute;t rendezik &aacute;t,
	  hanem nagyobb terhel&eacute;s eset&eacute;n egyes blokkokat
	  j&oacute;val k&eacute;s&#245;bb is r&ouml;gz&iacute;tenek.
	  Ez&eacute;rt a rendszer esetleges &ouml;sszeoml&aacute;sa vagy
	  egy &aacute;ramkimarad&aacute;s s&uacute;lyos k&aacute;rokat
	  okozhat az &aacute;llom&aacute;nyrendszerben.  A &os;
	  &uacute;gy d&ouml;nt&ouml;tt, hogy a
	  megb&iacute;zhat&oacute;s&aacute;got v&aacute;lasztja.  Sajnos
	  ez olyan nagys&aacute;g&uacute;
	  teljes&iacute;tm&eacute;nyveszt&eacute;st okozott, hogy a
	  k&ouml;vetkez&#245; kiad&aacute;sban m&aacute;r
	  k&eacute;nytelenek voltunk alap&eacute;rtelmez&eacute;s
	  szerint is visszakapcsolni ezt a lehet&#245;s&eacute;get.  A
	  <varname>hw.ata.wc</varname> nev&#251; sysctl
	  v&aacute;ltoz&oacute; vizsg&aacute;lat&aacute;val
	  ellen&#245;rizhetj&uuml;k a rendszer&uuml;nk&ouml;n
	  &eacute;rv&eacute;nyes alap&eacute;rtelmezett
	  be&aacute;ll&iacute;t&aacute;st.  Amennyiben az IDE
	  &iacute;r&aacute;sok
	  gyors&iacute;t&oacute;t&aacute;raz&aacute;sa nem
	  enged&eacute;lyezett, akkor ezt a v&aacute;ltoz&oacute;
	  &eacute;rt&eacute;k&eacute;nek 1-re
	  &aacute;ll&iacute;t&aacute;s&aacute;val
	  &aacute;ll&iacute;thatjuk vissza.  Ezt a rendszer
	  ind&iacute;t&aacute;sakor a rendszerbet&ouml;lt&#245;ben
	  tehetj&uuml;k meg.  A rendszermag ind&iacute;t&aacute;sa
	  ut&aacute;n ennek m&aacute;r nincs hat&aacute;sa.</para>

	<para>A r&eacute;szleteket a &man.ata.4; man oldalon tudhatjuk
	  meg.</para>
      </sect3>

      <sect3>
	<title><literal>SCSI_DELAY</literal>
	  (<varname>kern.cam.scsi_delay</varname>)</title>

	<indexterm><primary><varname>kern.cam.scsi_delay</varname></primary></indexterm>

	<indexterm>
	  <primary>a rendszermag
	    be&aacute;ll&iacute;t&aacute;sai</primary>
	  <secondary><literal>SCSI_DELAY</literal></secondary>
	</indexterm>

	<para>A rendszermag <literal>SCSI_DELAY</literal> nev&#251;
	  be&aacute;ll&iacute;t&aacute;sa a rendszer
	  indul&aacute;s&aacute;nak idej&eacute;t hivatott
	  m&eacute;rs&eacute;kelni.  Az alap&eacute;rtelmezett
	  &eacute;rt&eacute;ke viszonylag magas, innen sz&aacute;rmazik
	  a rendszer ind&iacute;t&aacute;sa sor&aacute;n keletkez&#245;
	  <literal>15</literal> m&aacute;sodperces
	  cs&uacute;sz&aacute;s.  &Aacute;ltal&aacute;ban az is
	  megfelel&#245;, ha ezt visszavessz&uuml;k az
	  <literal>5</literal> &eacute;rt&eacute;kre (f&#245;leg a
	  modernebb meghajt&oacute;k sz&aacute;m&aacute;ra).  A &os;
	  &uacute;jabb (5.0 vagy k&eacute;s&#245;bbi)
	  v&aacute;ltozataiban ez az &eacute;rt&eacute;k m&aacute;r a
	  <varname>kern.cam.scsi_delay</varname> sysctl
	  v&aacute;ltoz&oacute; &eacute;rt&eacute;k&eacute;vel is
	  megadhat&oacute; a rendszer ind&iacute;t&aacute;sakor.
	  Azonban &uuml;gyelj&uuml;nk r&aacute;, hogy mind a
	  finomhangol&aacute;shoz haszn&aacute;lt v&aacute;ltoz&oacute;,
	  mind pedig rendszermag be&aacute;ll&iacute;t&aacute;sa
	  <emphasis>ezredm&aacute;sodpercben</emphasis> &eacute;s
	  <emphasis>nem</emphasis>
	  <emphasis>m&aacute;sodpercben</emphasis> &eacute;rtelmezi ezt
	  az &eacute;rt&eacute;ket.</para>
      </sect3>
    </sect2>

    <sect2 id="soft-updates">
      <title>Soft Updates</title>

      <indexterm><primary>Soft Updates</primary></indexterm>
      <indexterm><primary>tunefs</primary></indexterm>

      <para>A &man.tunefs.8; nev&#251; program haszn&aacute;lhat&oacute;
	az &aacute;llom&aacute;nyrendszerek
	finomhangol&aacute;s&aacute;ra.  Nagyon sok opci&oacute;t
	tal&aacute;lhatunk benne, de itt most csak a <quote>Soft
	Updates</quote> ki- &eacute;s bekapcsol&aacute;s&aacute;val
	foglalkozunk, amit a k&ouml;vetkez&#245; m&oacute;don
	tehet&uuml;nk meg:</para>

      <screen>&prompt.root; <userinput>tunefs -n enable /allomanyrendszer</userinput>
&prompt.root; <userinput>tunefs -n disable /allomanyrendszer</userinput></screen>

      <para>Am&iacute;g egy &aacute;llom&aacute;nyrendszer
	csatlakoztatott &aacute;llapotban van, addig nem
	m&oacute;dos&iacute;that&oacute; a &man.tunefs.8; paranccsal.  A
	Soft Updates bekapcsol&aacute;s&aacute;ra ez&eacute;rt az a
	legalkalmasabb id&#245;pont, amikor
	egyfelhaszn&aacute;l&oacute;s m&oacute;dban vagyunk &eacute;s
	m&eacute;g egyetlen part&iacute;ci&oacute;t sem
	csatlakoztattunk.</para>

      <para>A Soft Updates be&aacute;ll&iacute;t&aacute;s
	enged&eacute;lyez&eacute;se a mem&oacute;ri&aacute;ban pufferelt
	gyors&iacute;t&oacute;t&aacute;ron kereszt&uuml;l jelent&#245;s
	m&eacute;rt&eacute;kben fokozza a metaadatok
	teljes&iacute;tm&eacute;ny&eacute;t, els&#245;sorban az
	&aacute;llom&aacute;nyok l&eacute;trehoz&aacute;s&aacute;t
	&eacute;s t&ouml;rl&eacute;s&eacute;t.  A Soft Updates
	haszn&aacute;lat&aacute;t ez&eacute;rt minden
	&aacute;llom&aacute;nyrendszer eset&eacute;n aj&aacute;nljuk.  A
	Soft Updates alkalmaz&aacute;s&aacute;nak k&eacute;t rossz
	oldal&aacute;ra kell tekintettel lenn&uuml;nk.
	El&#245;sz&ouml;r is a Soft Updates a rendszer
	&ouml;sszeoml&aacute;sa eset&eacute;n ugyan garant&aacute;lja az
	&aacute;llom&aacute;nyrendszer konzisztenci&aacute;j&aacute;t,
	de k&ouml;nnyen elk&eacute;pzelhet&#245;, hogy t&ouml;bb
	m&aacute;sodperccel (vagy ak&aacute;r egy eg&eacute;sz perccel!)
	h&aacute;tr&eacute;bb j&aacute;r a fizikai lemez
	friss&iacute;t&eacute;s&eacute;ben.  M&aacute;sodszor a Soft
	Updates k&eacute;slelteti az &aacute;llom&aacute;nyrendszer
	blokkjainak felszabad&iacute;t&aacute;s&aacute;t.  Ha van egy
	olyan &aacute;llom&aacute;nyrendszer&uuml;nk (mint
	p&eacute;ld&aacute;ul a rendszer
	ind&iacute;t&aacute;s&aacute;hoz haszn&aacute;lt
	gy&ouml;k&eacute;r part&iacute;ci&oacute;), ami m&aacute;r
	majdnem betelt, akkor egy nagyobb friss&iacute;t&eacute;s,
	p&eacute;ld&aacute;ul a <command>make installworld</command>
	parancs kiad&aacute;sa, sor&aacute;n az
	&aacute;llom&aacute;nyrendszer egyszer&#251;en kifogy a
	helyb&#245;l &eacute;s &iacute;gy a friss&iacute;t&eacute;s
	meghi&uacute;sul.</para>

      <sect3>
	<title>B&#245;vebben a Soft Updates
	  m&#251;k&ouml;d&eacute;s&eacute;r&#245;l</title>

	<indexterm>
	  <primary>Soft Updates</primary>
	  <secondary>r&eacute;szletei</secondary>
	</indexterm>

	<para>K&eacute;t hagyom&aacute;nyos
	  megk&ouml;zel&iacute;t&eacute;s l&eacute;tezik az
	  &aacute;llom&aacute;nyrendszerek metaadatainak
	  vissza&iacute;r&aacute;s&aacute;ra.  (A metaadatok
	  m&oacute;dos&iacute;t&aacute;sakor olyan nem adatot
	  tartalmaz&oacute; blokkok v&aacute;ltoznak meg, mint
	  p&eacute;ld&aacute;ul az &aacute;llom&aacute;nyokra
	  vonatkoz&oacute; inform&aacute;ci&oacute;k vagy a
	  k&ouml;nyvt&aacute;rak.)</para>

	<para>Eredetileg alap&eacute;rtelmez&eacute;s szerint a
	  metaadatok v&aacute;ltoz&aacute;sait szinkron m&oacute;don
	  &iacute;rt&aacute;k ki.  Amikor egy k&ouml;nyvt&aacute;r
	  megv&aacute;ltozott, a rendszer eg&eacute;szen addig
	  v&aacute;rt, am&iacute;g ez a v&aacute;ltoz&aacute;s a lemezre
	  nem &iacute;r&oacute;dott.  Ugyanekkor az
	  &aacute;llom&aacute;nyok adatait tartalmaz&oacute; pufferek
	  (az &aacute;llom&aacute;nyok tartalma) &aacute;tker&uuml;ltek
	  a pufferelt gyors&iacute;t&oacute;t&aacute;rba, hogy majd
	  k&eacute;s&#245;bb, aszinkron m&oacute;don ker&uuml;ljenek
	  ki&iacute;r&aacute;sra.  Ennek az
	  implement&aacute;ci&oacute;nak a biztons&aacute;gos
	  m&#251;k&ouml;d&eacute;s volt az el&#245;nye, mivel &iacute;gy
	  a metaadatok m&eacute;g akkor is konzisztens &aacute;llapotban
	  maradtak, amikor valamilyen hiba k&ouml;vetkezett be.
	  Teh&aacute;t egy &aacute;llom&aacute;ny vagy teljesen
	  l&eacute;trej&ouml;tt vagy egy&aacute;ltal&aacute;n nem.  Ha
	  az &aacute;llom&aacute;nyhoz tartoz&oacute; blokkok m&aacute;r
	  nem tudtak kijutni a
	  gyors&iacute;t&oacute;t&aacute;rb&oacute;l az
	  &ouml;sszeoml&aacute;s ideje el&#245;tt, akkor az &man.fsck.8;
	  felismerte ezt a helyzetet &eacute;s az
	  &aacute;llom&aacute;nyrendszer ilyen jelleg&#251;
	  hib&aacute;j&aacute;t &uacute;gy orvosolta, hogy az adott
	  &aacute;llom&aacute;ny m&eacute;ret&eacute;t null&aacute;ra
	  &aacute;ll&iacute;totta.  Ezenk&iacute;v&uuml;l m&eacute;g az
	  implement&aacute;ci&oacute;s r&eacute;szletek is
	  tiszt&aacute;k &eacute;s egyszer&#251;ek maradtak.  Ennek
	  viszont h&aacute;tr&aacute;nya, hogy a metaadatok
	  kezel&eacute;se lass&uacute;.  Ha p&eacute;ld&aacute;ul
	  kiadunk egy <command>rm -r</command> parancsot, akkor az a
	  k&ouml;nyvt&aacute;rban lev&#245; &aacute;llom&aacute;nyokat
	  szekvenci&aacute;lisan dolgozza fel, de minden egyes
	  v&aacute;ltoztat&aacute;st (az &aacute;llom&aacute;nyok
	  t&ouml;rl&eacute;s&eacute;t) csak szinkron m&oacute;don
	  r&ouml;gz&iacute;ti a lemezre.  Ezek a
	  friss&iacute;t&eacute;sek &eacute;rintik mag&aacute;t a
	  k&ouml;nyvt&aacute;rat, az &aacute;llom&aacute;nyokkal
	  kapcsolatos inform&aacute;ci&oacute;kat t&aacute;rol&oacute;
	  t&aacute;bl&aacute;zatot (az &uacute;n.  inode
	  t&aacute;bl&aacute;t) &eacute;s minden
	  val&oacute;sz&iacute;n&#251;s&eacute;g szerint az
	  &aacute;llom&aacute;nyok &aacute;ltal lefoglalt blokkokat is
	  k&ouml;zvetve.  Hasonl&oacute; megfontol&aacute;sok
	  &eacute;lnek a nagyobb k&ouml;nyvt&aacute;rszerkezetek
	  kibont&aacute;sa eset&eacute;n is (<command>tar
	  -x</command>).</para>

	<para>A m&aacute;sodik lehet&#245;s&eacute;g a metaadatok
	  aszinkron friss&iacute;t&eacute;se.  Ez az
	  alap&eacute;rtelmez&eacute;s a Linux ext2fs &eacute;s BSD-k
	  <command>mount -o async</command> opci&oacute;val
	  csatlakoztatott UFS &aacute;llom&aacute;nyrendszerei
	  eset&eacute;n.  Ilyenkor minden metaadattal kapcsolatos
	  aktualiz&aacute;l&aacute;s egyszer&#251;en beker&uuml;lt a
	  pufferelt gyors&iacute;t&oacute;t&aacute;rba, teh&aacute;t az
	  &aacute;llom&aacute;nyok adatai &eacute;s ezek a
	  t&iacute;pus&uacute; friss&iacute;t&eacute;sek keverednek.
	  Ennek a megval&oacute;s&iacute;t&aacute;snak az az
	  el&#245;nye, hogy nem kell megv&aacute;rni, am&iacute;g a
	  metaadatok is ki&iacute;r&oacute;dnak a lemezre, ez&eacute;rt
	  a metaadatok &oacute;ri&aacute;si mennyis&eacute;g&#251;
	  v&aacute;ltoz&aacute;s&aacute;val j&aacute;r&oacute;
	  m&#251;veletek sokkal gyorsabban hajt&oacute;dnak
	  v&eacute;gre, mint a szinkron esetben.  S&#245;t, maga az
	  implement&aacute;ci&oacute; is tiszta &eacute;s egyszer&#251;
	  marad, ez&eacute;rt a k&oacute;dban megjelen&#245;
	  hib&aacute;k besziv&aacute;rg&aacute;s&aacute;nak
	  kock&aacute;zata alacsony.  A m&oacute;dszer
	  h&aacute;tr&aacute;nya, hogy egy&aacute;ltal&aacute;n
	  semmilyen garanci&aacute;t nem kapunk az
	  &aacute;llom&aacute;nyrendszer
	  konzisztenci&aacute;j&aacute;ra.  Ha teh&aacute;t egy rengeteg
	  metaadat megv&aacute;ltoz&aacute;s&aacute;val
	  egy&uuml;ttj&aacute;r&oacute; m&#251;velet k&ouml;zben
	  t&ouml;rt&eacute;nik valamilyen probl&eacute;ma
	  (&aacute;ramkimarad&aacute;s, vagy valaki egyszer&#251;en
	  megnyomja a reset gombot), akkor az
	  &aacute;llom&aacute;nyrendszer el&#245;re
	  kisz&aacute;m&iacute;thatatlan &aacute;llapotba ker&uuml;l.  A
	  rendszer &uacute;jb&oacute;li ind&iacute;t&aacute;sakor
	  ez&eacute;rt nincs lehet&#245;s&eacute;g&uuml;nk
	  megvizsg&aacute;lni az &aacute;llom&aacute;nyrendszer
	  &aacute;llapot&aacute;t.  Elk&eacute;pzelhet&#245;, hogy az
	  &aacute;llom&aacute;nyokhoz tartoz&oacute; adatok m&aacute;r
	  kiker&uuml;ltek a lemezre, mik&ouml;zben a r&aacute;
	  vonatkoz&oacute; inode- vagy k&ouml;nyvt&aacute;ri
	  bejegyz&eacute;sek m&eacute;g nem.  &Iacute;gy
	  l&eacute;nyeg&eacute;ben lehetetlen olyan
	  <command>fsck</command> implement&aacute;ci&oacute;t
	  k&eacute;sz&iacute;teni, ami k&eacute;pes lenne
	  elt&uuml;ntetni ezt a k&aacute;oszt (hiszen az ehhez
	  sz&uuml;ks&eacute;ges adatok nem &aacute;llnak
	  rendelkez&eacute;sre).  Ha az &aacute;llom&aacute;nyrendszer
	  helyrehozhatatlanul k&aacute;rosodott, akkor csak a
	  &man.newfs.8; &eacute;s a biztons&aacute;gi ment&eacute;s
	  vissza&aacute;ll&iacute;t&aacute;sa seg&iacute;thet
	  rajta.</para>

	<para>Ezt &aacute;ltal&aacute;ban &uacute;gy
	  k&uuml;sz&ouml;b&ouml;lik ki, hogy az eg&eacute;szhez
	  hozz&aacute;teszik m&eacute;g a
	  <emphasis>m&oacute;dos&iacute;tott ter&uuml;letek
	  feljegyz&eacute;s&eacute;t</emphasis>, amit gyakran csak
	  <emphasis>napl&oacute;z&aacute;snak</emphasis> (journaling)
	  neveznek, hab&aacute;r ezt az elnevez&eacute;st nem mindenhol
	  ilyen &eacute;rtelemben haszn&aacute;lj&aacute;k, ez&eacute;rt
	  a tranzakci&oacute;k napl&oacute;z&aacute;s&aacute;nak
	  m&aacute;s form&aacute;ira is utalhat.  A metaadatok
	  friss&iacute;t&eacute;se ebben az esetben is csak szinkron
	  m&oacute;don t&ouml;rt&eacute;nik, de csak a lemez egy kisebb
	  ter&uuml;let&eacute;re.  K&eacute;s&#245;bb ez a
	  megfelel&#245; hely&eacute;re ker&uuml;l.  Mivel a lemez
	  napl&oacute;z&aacute;sra ford&iacute;tott r&eacute;sze egy
	  viszonylag kis m&eacute;ret&#251;, folytonos ter&uuml;let, a
	  lemez fej&eacute;nek m&eacute;g a megterhel&#245;bb
	  m&#251;veletek eset&eacute;n sem kell sokat mozognia,
	  ez&eacute;rt val&oacute;j&aacute;ban ez a megold&aacute;s
	  gyorsabb, mint a mezei szinkron friss&iacute;t&eacute;sek.  Az
	  implement&aacute;ci&oacute; bonyolults&aacute;ga
	  tov&aacute;bbra is j&oacute;l behat&aacute;rolhat&oacute;, a
	  velej&aacute;r&oacute; hibalehet&#245;s&eacute;gek
	  kock&aacute;zata alacsony.  H&aacute;tr&aacute;nya, hogy
	  minden metaadat k&eacute;tszer &iacute;r&oacute;dik ki
	  (egyszer a napl&oacute;z&aacute;si ter&uuml;letre,
	  azt&aacute;n a megfelel&#245; helyre), ez&eacute;rt a
	  h&eacute;tk&ouml;znapi haszn&aacute;lat sor&aacute;n
	  <quote>visszaes&eacute;s</quote> tapasztalhat&oacute; a
	  teljes&iacute;tm&eacute;nyben.  M&aacute;sr&eacute;szr&#245;l
	  azonban egy &ouml;sszeoml&aacute;s eset&eacute;n a
	  napl&oacute;z&aacute;si ter&uuml;let
	  seg&iacute;ts&eacute;g&eacute;vel minden f&uuml;gg&#245;ben
	  lev&#245; metaadattal kapcsolatos m&#251;velet k&ouml;nnyen
	  visszaford&iacute;that&oacute; vagy lez&aacute;rhat&oacute; a
	  rendszer k&ouml;vetkez&#245; ind&iacute;t&aacute;sakor,
	  &iacute;gy ezzel egy gyors
	  helyre&aacute;ll&iacute;t&aacute;st nyer&uuml;nk.</para>

	<para>Kirk McKusick, a Berkeley FFS fejleszt&#245;je ezt a
	  probl&eacute;m&aacute;t a Soft Updates
	  seg&iacute;ts&eacute;g&eacute;vel hidalta &aacute;t: a
	  metaadatokkal kapcsolatos minden f&uuml;gg&#245;ben lev&#245;
	  friss&iacute;t&eacute;st a mem&oacute;ri&aacute;ban tart, majd
	  ezeket rendezett sorrendben &iacute;rja ki a lemezre (<quote>a
	  metaadatok rendezett friss&iacute;t&eacute;se</quote>).  Ennek
	  k&ouml;vetkezm&eacute;nyek&eacute;ppen a metaadatok komolyabb
	  friss&iacute;t&eacute;se sor&aacute;n a k&eacute;s&#245;bb
	  &eacute;rkez&#245; m&oacute;dos&iacute;t&aacute;soknak
	  lehet&#245;s&eacute;g&uuml;k van <quote>elkapni</quote> a
	  mem&oacute;ri&aacute;ban lev&#245; kor&aacute;bbi
	  v&aacute;ltozataikat, ha azok m&eacute;g nem ker&uuml;ltek ki
	  a lemezre.  &Iacute;gy az &ouml;sszes, p&eacute;ld&aacute;ul
	  k&ouml;nyvt&aacute;rakon v&eacute;gzett, m&#251;velet a
	  lemezre &iacute;r&aacute;s el&#245;tt &aacute;ltal&aacute;ban
	  el&#245;sz&ouml;r a mem&oacute;ri&aacute;ban
	  j&aacute;tsz&oacute;dik le (az adatblokkok a
	  poz&iacute;ci&oacute;juknak megfelel&#245;en ker&uuml;lnek
	  rendez&eacute;sre, ez&eacute;rt a r&aacute;juk
	  vonatkoz&oacute; metaadatok el&#245;tt nem jutnak ki a
	  lemezre).  Ha ek&ouml;zben a rendszer &ouml;sszeomlik, akkor
	  &iacute;gy implicit m&oacute;don a <quote>napl&oacute;
	  visszalapoz&aacute;s&aacute;t</quote> eredm&eacute;nyezi:
	  minden olyan m&#251;velet, ami m&aacute;r nem tudott kijutni a
	  lemezre, meg nem t&ouml;rt&eacute;ntnek sz&aacute;m&iacute;t.
	  Ezen a m&oacute;don az &aacute;llom&aacute;nyrendszernek egy
	  30 &eacute;s 60 m&aacute;sodperc k&ouml;zti kor&aacute;bbi
	  &aacute;llapota marad fenn.  Az algoritmus garant&aacute;lja,
	  hogy az &ouml;sszes haszn&aacute;lt er&#245;forr&aacute;s a
	  nekik megfelel&#245; bitt&eacute;rk&eacute;pekben helyesen
	  jel&ouml;l&#245;dik, a blokkokban &eacute;s az inode-okban.
	  Az &ouml;sszeoml&aacute;s ut&aacute;n az
	  er&#245;forr&aacute;sok kioszt&aacute;s&aacute;val
	  kapcsolatban csak egyetlen hiba l&eacute;phet fel: amikor
	  olyan er&#245;forr&aacute;sok jel&ouml;l&#245;dnek
	  <quote>haszn&aacute;ltnak</quote>, amelyek
	  igaz&aacute;b&oacute;l <quote>szabadok</quote>.  Az
	  &man.fsck.8; azonban k&eacute;pes felismerni ezeket a
	  helyzeteket &eacute;s felszabad&iacute;tani a nem
	  haszn&aacute;lt er&#245;forr&aacute;sokat.  A <command>mount
	  -f</command> parancs kiad&aacute;s&aacute;val minden
	  tov&aacute;bbi k&ouml;vetkezm&eacute;ny n&eacute;lk&uuml;l
	  figyelmen k&iacute;v&uuml;l hagyhatjuk az
	  &aacute;llom&aacute;nyrendszer f&eacute;lk&eacute;sz
	  &aacute;llapot&aacute;t &eacute;s csatlakoztathatjuk az
	  &aacute;llom&aacute;nyrendszereket.  A haszn&aacute;latban
	  m&aacute;r nem lev&#245; er&#245;forr&aacute;sok
	  felszabad&iacute;t&aacute;s&aacute;hoz az &man.fsck.8;
	  parancsot k&eacute;s&#245;bb kell futtatni.  Ez az
	  alap&ouml;tlet h&uacute;z&oacute;dik meg a
	  <emphasis>h&aacute;tt&eacute;rben v&eacute;gzett
	  lemezellen&#245;rz&eacute;s</emphasis> m&ouml;g&ouml;tt.  A
	  rendszer ind&iacute;t&aacute;sakor az
	  &aacute;llom&aacute;nyrendszernek csup&aacute;n egy
	  <emphasis>pillanatk&eacute;p&eacute;t</emphasis>
	  r&ouml;gz&iacute;tj&uuml;k, &eacute;s az
	  <command>fsck</command> t&eacute;nyleges
	  lefuttat&aacute;s&aacute;t k&eacute;s&#245;bbre toljuk.  Mivel
	  mindegyik &aacute;llom&aacute;nyrendszer
	  csatlakoztathat&oacute; <quote>f&eacute;lk&eacute;sz</quote>
	  &aacute;llapotban, ez&eacute;rt a rendszer k&eacute;pes
	  elindulni t&ouml;bbfelhaszn&aacute;l&oacute;s m&oacute;dban.
	  Ek&ouml;zben a h&aacute;tt&eacute;rben az
	  <command>fsck</command> be&uuml;temezhet&#245; minden olyan
	  &aacute;llom&aacute;nyrendszer sz&aacute;m&aacute;ra, ahol
	  arra sz&uuml;ks&eacute;g van, hogy szabad&iacute;tsa fel az
	  esetlegesen m&aacute;r nem haszn&aacute;lt
	  er&#245;forr&aacute;sokat.  (&Iacute;gy a Soft Updates
	  opci&oacute;t nem alkalmaz&oacute;
	  &aacute;llom&aacute;nyrendszerek eset&eacute;n tov&aacute;bbra
	  is sz&uuml;ks&eacute;g van az el&#245;t&eacute;rben
	  elv&eacute;gzett <command>fsck</command> parancsra.)</para>

	<para>A m&oacute;dszer el&#245;nye, hogy &iacute;gy a
	  metaadatokkal kapcsolatos m&#251;veletek k&ouml;zel olyan
	  gyorsak, mint az aszinkron m&oacute;don v&eacute;gzett
	  friss&iacute;t&eacute;sek (teh&aacute;t gyorsabb, mintha
	  <emphasis>napl&oacute;zn&aacute;nk</emphasis>, ami ugye minden
	  metaadatot k&eacute;tszer &iacute;r ki).  A
	  h&aacute;tr&aacute;nya a bonyolultabb k&oacute;d (ami miatt
	  n&ouml;vekszik az olyan hib&aacute;k lehet&#245;s&eacute;ge,
	  amelyek &eacute;rz&eacute;kenyen
	  befoly&aacute;solhatj&aacute;k a felhaszn&aacute;l&oacute;i
	  adatok elveszt&eacute;s&eacute;t) &eacute;s a nagyobb
	  mem&oacute;riaig&eacute;ny.  Ezenk&iacute;v&uuml;l m&eacute;g
	  van n&eacute;h&aacute;ny olyan egy&eacute;ni jellemz&#245;je,
	  amelyet meg kell szokni.  A rendszer &ouml;sszeoml&aacute;sa
	  ut&aacute;n az &aacute;llom&aacute;nyrendszer valamivel
	  <quote>r&eacute;gebbi</quote> lesz.  Amikor pedig megszokott
	  szinkron megk&ouml;zel&iacute;t&eacute;s szerint az
	  <command>fsck</command> lefut&aacute;sa ut&aacute;n nulla
	  m&eacute;ret&#251; &aacute;llom&aacute;nyok
	  j&ouml;nn&eacute;nek l&eacute;tre, ezek az
	  &aacute;llom&aacute;nyok a Soft Updates eset&eacute;n
	  egy&aacute;ltal&aacute;n meg sem jelennek, mivel sem a
	  r&aacute;juk vonatkoz&oacute; metaadatok, sem pedig a
	  tartalmuk nem ker&uuml;lt ki a lemezre.  Egy
	  <command>rm</command> lefuttat&aacute;sa ut&aacute;n a
	  lemezter&uuml;let addig nem ker&uuml;l
	  felszabad&iacute;t&aacute;sra, am&iacute;g a
	  friss&iacute;t&eacute;sek teljesen r&aacute; nem ker&uuml;lnek
	  a lemezre.  Ez nagyobb mennyis&eacute;g&#251; adat
	  telep&iacute;t&eacute;sekor gondokat okozhat egy olyan
	  &aacute;llom&aacute;nyrendszeren, ahol nincs elegend&#245;
	  hely az &aacute;llom&aacute;nyok k&eacute;tszeri
	  t&aacute;rol&aacute;s&aacute;ra.</para>
      </sect3>
    </sect2>
  </sect1>

  <sect1 id="configtuning-kernel-limits">
    <title>A rendszermag korl&aacute;tainak
      finomhangol&aacute;sa</title>

    <indexterm>
      <primary>finomhangol&aacute;s</primary>
      <secondary>a rendszermag korl&aacute;tai</secondary>
    </indexterm>

    <sect2 id="file-process-limits">
      <title>Az &aacute;llom&aacute;nyok &eacute;s a fut&oacute;
	programok korl&aacute;toz&aacute;sai</title>

      <sect3 id="kern-maxfiles">
	<title><varname>kern.maxfiles</varname></title>

	<indexterm><primary><varname>kern.maxfiles</varname></primary></indexterm>

	<para>A <varname>kern.maxfiles</varname> &eacute;rt&eacute;ke a
	  rendszer&uuml;nk ig&eacute;nyeinek megfelel&#245;en
	  n&ouml;velhet&#245; vagy cs&ouml;kkenthet&#245;.  Ez a
	  v&aacute;ltoz&oacute; adja meg a rendszer&uuml;nkben lev&#245;
	  &aacute;llom&aacute;nyle&iacute;r&oacute;k maxim&aacute;lis
	  sz&aacute;m&aacute;t.  Amikor az
	  &aacute;llom&aacute;nyle&iacute;r&oacute;kat
	  t&aacute;rol&oacute; t&aacute;bl&aacute;zat megtelik, a
	  rendszer &uuml;zenetpuffer&eacute;ben egy <errorname>file:
	  table is full</errorname> &uuml;zenet jelenik meg, amit a
	  <command>dmesg</command> paranccsal tudunk
	  megn&eacute;zni.</para>

	<para>Minden megnyitott &aacute;llom&aacute;ny,
	  csatlakoz&aacute;s vagy FIFO elhaszn&aacute;l egy
	  &aacute;llom&aacute;nyle&iacute;r&oacute;t.  Egy
	  nagym&eacute;ret&#251; szerver k&ouml;nnyen
	  felem&eacute;szthet t&ouml;bb ezernyi
	  &aacute;llom&aacute;nyle&iacute;r&oacute;t att&oacute;l
	  f&uuml;gg&#245;en, hogy milyen &eacute;s mennyi
	  szolg&aacute;ltat&aacute;st futtat egym&aacute;s
	  mellett.</para>

	<para>A &os; kor&aacute;bbi kiad&aacute;saiban a
	  <varname>kern.maxfiles</varname> a rendszermag
	  be&aacute;ll&iacute;t&aacute;sait tartalmaz&oacute;
	  &aacute;llom&aacute;ny <option>maxusers</option> (a
	  rendszerben egyszerre jelenlev&#245;
	  felhaszn&aacute;l&oacute;k maximum&aacute;nak)
	  &eacute;rt&eacute;k&eacute;b&#245;l sz&aacute;rmazott,
	  teh&aacute;t a <varname>kern.maxfiles</varname> a
	  <option>maxusers</option> &eacute;rt&eacute;k&eacute;vel
	  ar&aacute;nyosan n&ouml;vekszik.  Amikor
	  k&eacute;sz&iacute;t&uuml;nk egy saj&aacute;t rendszermagot,
	  mindig &eacute;rdemes a rendszer&uuml;nk
	  haszn&aacute;lat&aacute;nak megfelel&#245;en
	  be&aacute;ll&iacute;tani ezt az &eacute;rt&eacute;ket, mivel a
	  rendszermag ebb&#245;l a sz&aacute;mb&oacute;l
	  hat&aacute;rozza meg a legt&ouml;bb el&#245;re
	  meghat&aacute;rozott korl&aacute;tait.  Mivel m&eacute;g egy
	  komoly szerveren sem jelentkeznek be egyszerre 256
	  felhaszn&aacute;l&oacute;n&aacute;l t&ouml;bben,
	  nagyj&aacute;b&oacute;l ugyanannyi er&#245;forr&aacute;sra van
	  sz&uuml;ks&eacute;ge, mint egy nagyobb webszervernek.</para>

	<para>A <varname>kern.maxusers</varname> &eacute;rt&eacute;ke a
	  rendelkez&eacute;sre &aacute;ll&oacute;
	  mem&oacute;ri&aacute;nak megfelel&#245;en
	  mag&aacute;t&oacute;l m&eacute;retez&#245;dik a rendszer
	  ind&iacute;t&aacute;sakor, &eacute;s amit fut&aacute;s
	  k&ouml;zben csak a <varname>kern.maxusers</varname> sysctl
	  v&aacute;ltoz&oacute; &iacute;r&aacute;sv&eacute;dett
	  &eacute;rt&eacute;k&eacute;nek
	  lek&eacute;rdez&eacute;s&eacute;b&#245;l tudhatunk meg.  Egyes
	  oldalak &uuml;zemeltet&eacute;se a
	  <varname>kern.maxusers</varname> &iacute;gy
	  meg&aacute;llap&iacute;tott
	  &eacute;rt&eacute;k&eacute;t&#245;l nagyobbat vagy
	  &eacute;ppen kisebbet ig&eacute;nyel, ez&eacute;rt a
	  bet&ouml;lt&eacute;skor minden gond n&eacute;lk&uuml;l
	  &aacute;t lehet &aacute;ll&iacute;tani 64, 128 vagy 256
	  &eacute;rt&eacute;k&#251;re.  Senkinek sem aj&aacute;nljuk,
	  hogy 256 fel&eacute; menjen, hacsak t&eacute;nyleg nincs
	  sz&uuml;ks&eacute;ge ekkora mennyis&eacute;g&#251;
	  &aacute;llom&aacute;nyle&iacute;r&oacute;ra.  A
	  <varname>kern.maxusers</varname>
	  f&uuml;ggv&eacute;ny&eacute;ben be&aacute;ll&iacute;tott
	  alap&eacute;rtelmezett &eacute;rt&eacute;kek tetsz&#245;leges
	  m&oacute;don &aacute;t&aacute;ll&iacute;that&oacute;ak a
	  rendszer ind&iacute;t&aacute;sakor vagy fut&aacute;s
	  k&ouml;zben a <filename>/boot/loader.conf</filename>
	  m&oacute;dos&iacute;t&aacute;s&aacute;val (az ide
	  kapcsol&oacute;d&oacute; javaslatokr&oacute;l b&#245;vebben
	  l&aacute;sd a &man.loader.conf.5; man oldalt vagy a
	  <filename>/boot/defaults/loader.conf</filename>
	  &aacute;llom&aacute;nyt) illetve a le&iacute;r&aacute;s
	  m&aacute;s r&eacute;sz&eacute;n megadott m&oacute;dok
	  szerint.</para>

	<para>A kor&aacute;bbi kiad&aacute;sokban &uacute;gy lehet
	  &ouml;nszab&aacute;lyoz&oacute;ra &aacute;ll&iacute;tani a
	  <literal>maxusers</literal> be&aacute;ll&iacute;t&aacute;st,
	  ha explicit m&oacute;don <literal>0</literal>
	  &eacute;rt&eacute;ket adtunk meg neki
	  <footnote>
	    <para>Az &ouml;nszab&aacute;lyoz&oacute; algoritmus a
	      <literal>maxusers</literal> &eacute;rt&eacute;k&eacute;t a
	      rendszerben tal&aacute;lhat&oacute;
	      mem&oacute;ri&aacute;nak megfelel&#245;en legal&aacute;bb
	      32-re, legfeljebb 384-re &aacute;ll&iacute;tja.</para>
	  </footnote>.  A <literal>maxusers</literal> param&eacute;ter
	  be&aacute;ll&iacute;t&aacute;sakor &eacute;rdemes
	  legal&aacute;bb 4-et megadni, k&uuml;l&ouml;n&ouml;sen akkor,
	  ha haszn&aacute;ljuk az X Window Systemet vagy szoftvereket
	  ford&iacute;tunk le.  Az&eacute;rt van erre
	  sz&uuml;ks&eacute;g, mert a <literal>maxusers</literal>
	  &eacute;rt&eacute;ke &aacute;ltal szab&aacute;lyozott
	  legfontosabb mennyis&eacute;g az egyszerre futtathat&oacute;
	  programok t&aacute;bl&aacute;zat&aacute;nak maxim&aacute;lis
	  m&eacute;rete, amelyet &iacute;gy sz&aacute;molunk ki:
	  <literal>20 + 16 * maxusers</literal>.  Teh&aacute;t ha a
	  <literal>maxusers</literal> &eacute;rt&eacute;k&eacute;t 1-re
	  &aacute;ll&iacute;tjuk be, akkor az el&#245;bbi k&eacute;plet
	  &eacute;rtelm&eacute;ben csak 36 programunk futhat
	  egym&aacute;ssal p&aacute;rhuzamosan, bele&eacute;rtve mindazt
	  a kb.  18 programot, amelyek a rendszerrel egy&uuml;tt
	  indulnak, illetve m&eacute;g azt a tov&aacute;bbi 15
	  programot, amelyeket az X Window System
	  haszn&aacute;lat&aacute;val ind&iacute;tunk el.  M&eacute;g
	  egy olyan egyszer&#251; dolog is, mint p&eacute;ld&aacute;ul
	  egy man oldal megn&eacute;z&eacute;se, legal&aacute;bb kilenc
	  programot ind&iacute;t el a sz&#251;r&eacute;shez,
	  kit&ouml;m&ouml;r&iacute;t&eacute;shez &eacute;s
	  megn&eacute;z&eacute;shez.  Azonban ha a
	  <literal>maxusers</literal> &eacute;rt&eacute;k&eacute;t 64-re
	  &aacute;ll&iacute;tjuk, akkor egyszerre ak&aacute;r m&aacute;r
	  1044 programot futtathatunk, ami szinte mindenre
	  elegend&#245;.  Ha persze egy &uacute;j program
	  ind&iacute;t&aacute;sakor kapunk egy <errortype>proc table
	  full</errortype> t&iacute;pus&uacute; &uuml;zenetet vagy nagy
	  sz&aacute;m&uacute; konkurens felhaszn&aacute;l&oacute;val
	  futtatunk szervert (ilyen p&eacute;ld&aacute;ul az <hostid
	  role="fqdn">ftp.FreeBSD.org</hostid>), akkor &eacute;rdemes
	  n&ouml;velni ezt a sz&aacute;mot &eacute;s
	  &uacute;jraford&iacute;tani a rendszermagot.</para>

	<note>
	  <para>A <literal>maxusers</literal> <emphasis>nem</emphasis>
	    korl&aacute;tozza a sz&aacute;m&iacute;t&oacute;g&eacute;pre
	    egyszerre bejelentkezni k&eacute;pes
	    felhaszn&aacute;l&oacute;k sz&aacute;m&aacute;t.
	    Egyszer&#251;en csak be&aacute;ll&iacute;tja
	    n&eacute;h&aacute;ny t&aacute;bl&aacute;zat
	    m&eacute;ret&eacute;t &eacute;s az egyszerre
	    futtathat&oacute; programok mennyis&eacute;g&eacute;t a
	    rendszert egyidej&#251;leg haszn&aacute;lni
	    k&iacute;v&aacute;n&oacute; felhaszn&aacute;l&oacute;k
	    maxim&aacute;lis sz&aacute;m&aacute;nak
	    figyelembev&eacute;tel&eacute;vel.</para>
	</note>
      </sect3>

      <sect3>
	<title><varname>kern.ipc.somaxconn</varname></title>

	<indexterm><primary><varname>kern.ipc.somaxconn</varname></primary></indexterm>

	<para>Az <varname>kern.ipc.somaxconn</varname> sysctl
	  v&aacute;ltoz&oacute; a be&eacute;rkez&#245; TCP kapcsolatokat
	  fogad&oacute; sor hossz&aacute;t hat&aacute;rozza meg.  Ennek
	  az alap&eacute;rtelmezett &eacute;rt&eacute;ke
	  <literal>128</literal>, ami az &uacute;j kapcsolatok
	  megb&iacute;zhat&oacute; kezel&eacute;s&eacute;hez
	  &aacute;ltal&aacute;ban kev&eacute;s egy er&#245;sen leterhelt
	  webszerver sz&aacute;m&aacute;ra.  Ilyen helyzetekben ezt az
	  &eacute;rt&eacute;ket javasolt <literal>1024</literal>-re vagy
	  m&eacute;g ann&aacute;l is nagyobbra &aacute;ll&iacute;tani.
	  Az egyes szolg&aacute;ltat&aacute;sok d&eacute;monai ugyan
	  szint&eacute;n korl&aacute;tozni szokt&aacute;k a
	  fogad&oacute;soruk m&eacute;ret&eacute;t
	  (p&eacute;ld&aacute;ul a &man.sendmail.8; vagy az
	  <application>Apache</application>), de gyakran tal&aacute;lunk
	  a be&aacute;ll&iacute;t&aacute;sai k&ouml;z&ouml;tt olyat,
	  amivel ennek a sornak a m&eacute;rete n&ouml;velhet&#245;.  A
	  nagyobb fogad&oacute;sorok mellesleg j&oacute;
	  szolg&aacute;latot tesznek a Denial of Service
	  (<abbrev>DoS</abbrev>) t&iacute;pus&uacute;
	  t&aacute;mad&aacute;sokkal szemben is.</para>
      </sect3>

    </sect2>
    <sect2 id="nmbclusters">
      <title>H&aacute;l&oacute;zati korl&aacute;toz&aacute;sok</title>

      <para>A rendszermag <literal>NMBCLUSTERS</literal> nev&#251;
	be&aacute;ll&iacute;t&aacute;sa szab hat&aacute;rt a rendszer
	r&eacute;sz&eacute;re el&eacute;rhet&#245;
	mem&oacute;riapufferek mennyis&eacute;g&eacute;nek.  Egy nagyobb
	forgalm&uacute; szerver eset&eacute;n a pufferek alacsony
	sz&aacute;ma g&aacute;tat szabhat a &os;
	k&eacute;pess&eacute;geinek.  Minden klaszter
	nagyj&aacute;b&oacute;l 2&nbsp;KB mem&oacute;ri&aacute;t takar,
	&iacute;gy az 1024-es &eacute;rt&eacute;k azt jelenti, hogy a
	rendszermag mem&oacute;ri&aacute;j&aacute;b&oacute;l 2
	megabyte-ot ford&iacute;tunk a h&aacute;l&oacute;zati
	pufferel&eacute;sre.  Egyszer&#251;en
	kisz&aacute;m&iacute;that&oacute;, mennyire is van
	sz&uuml;ks&eacute;g&uuml;nk: ha van egy webszerver&uuml;nk,
	amely egyszerre legfeljebb 1000 p&aacute;rhuzamos kapcsolatot
	fogad, &eacute;s minden kapcsolat lefoglal 16&nbsp;KB-ot a
	fogad&oacute;-, valamint &uacute;jabb 16&nbsp;KB-ot a
	k&uuml;ld&#245;puffer sz&aacute;m&aacute;ra, akkor
	megk&ouml;zel&iacute;t&#245;leg 32&nbsp;MB-nyi
	h&aacute;l&oacute;zati pufferre lesz sz&uuml;ks&eacute;g&uuml;nk
	a webszerver hat&eacute;kony
	m&#251;k&ouml;d&eacute;s&eacute;hez.  Ezt az
	&eacute;rt&eacute;ket gyakran m&eacute;g &eacute;rdemes
	megszorozni kett&#245;vel, &iacute;gy
	2&nbsp;x&nbsp;32&nbsp;MB&nbsp;/&nbsp;2&nbsp;KB&nbsp;=
	64&nbsp;MB&nbsp;/&nbsp;2&nbsp;KB&nbsp;= 32768.  T&ouml;bb
	mem&oacute;ri&aacute;val rendelkez&#245;
	sz&aacute;m&iacute;t&oacute;g&eacute;pek eset&eacute;n egy 4096
	&eacute;s 32768 k&ouml;zti &eacute;rt&eacute;ket javaslunk.
	Semmilyen k&ouml;r&uuml;lm&eacute;nyek k&ouml;z&ouml;tt ne
	adjunk meg enn&eacute;l nagyobb &eacute;rt&eacute;ket, mert
	ezzel a rendszer m&aacute;r az ind&iacute;t&aacute;sa
	sor&aacute;n &ouml;sszeomolhat.  A &man.netstat.1;
	<option>-m</option> be&aacute;ll&iacute;t&aacute;s&aacute;val
	ellen&#245;rizhetj&uuml;k a h&aacute;l&oacute;zati klaszterek
	kihaszn&aacute;lts&aacute;g&aacute;t.</para>

      <para>A <varname>kern.ipc.nmbclusters</varname>
	v&aacute;ltoz&oacute; &eacute;rt&eacute;k&eacute;t a rendszer
	ind&iacute;t&aacute;sakor &eacute;rdemes megv&aacute;ltoztatni.
	A &os; kor&aacute;bbi v&aacute;ltozataiban ehhez a rendszermag
	<literal>NMBCLUSTERS</literal> nev&#251; &man.config.8;
	param&eacute;ter&eacute;nek
	m&oacute;dos&iacute;t&aacute;s&aacute;ra van
	sz&uuml;ks&eacute;g&uuml;nk.</para>

      <para>Az olyan forgalmasabb szervereken, ahol sokat
	haszn&aacute;lj&aacute;k a &man.sendfile.2;
	rendszerh&iacute;v&aacute;st, sz&uuml;ks&eacute;g&uuml;nk lehet
	a &man.sendfile.2; &aacute;ltal haszn&aacute;lt pufferek
	sz&aacute;m&aacute;nak n&ouml;vel&eacute;s&eacute;re a
	rendszermag <literal>NFSBUFS</literal> nev&#251;
	konfigur&aacute;ci&oacute;s param&eacute;ter&eacute;n vagy a
	<filename>/boot/loader.conf</filename> &aacute;llom&aacute;nyon
	kereszt&uuml;l (l&aacute;sd &man.loader.8;).  Amikor a
	fut&oacute; programok k&ouml;z&uuml;l sokan vannak
	<literal>sfbufa</literal> &aacute;llapotban, akkor az
	egy&eacute;rtelm&#251;en annak a jele, hogy ezen a
	param&eacute;teren &aacute;ll&iacute;tanunk kell.  A
	<varname>kern.ipc.nsfbufs</varname> egy
	&iacute;r&aacute;sv&eacute;dett v&aacute;ltoz&oacute;t, amelyet
	a rendszermag &aacute;ll&iacute;t be.  Ez a param&eacute;ter
	n&eacute;vlegesen a <varname>kern.maxusers</varname>
	v&aacute;ltoz&oacute; &eacute;rt&eacute;k&eacute;nek
	megfelel&#245;en v&aacute;ltozik, de bizonyos esetekben
	ett&#245;l f&uuml;ggetlen&uuml;l &ouml;n&aacute;ll&oacute;an
	kell behangolni.</para>

      <important>
	<para>Annak ellen&eacute;re, hogy egy socketet
	  blokkol&aacute;smentesnek jel&ouml;lt&uuml;nk meg, a
	  &man.sendfile.2; megh&iacute;v&aacute;sa egy
	  blokkol&aacute;smentes socketre blokkol&oacute;d&aacute;st
	  eredm&eacute;nyezhet eg&eacute;szen addig, am&iacute;g a
	  haszn&aacute;lat&aacute;hoz elegend&#245; <literal>struct
	  sf_buf</literal> strukt&uacute;ra &ouml;ssze nem
	  gy&#251;lik.</para>
      </important>

      <sect3>
	<title><varname>net.inet.ip.portrange.*</varname></title>

	<indexterm><primary>net.inet.ip.portrange.*</primary></indexterm>

	<para>A <varname>net.inet.ip.portrange.*</varname> sysctl
	  v&aacute;ltoz&oacute;k vez&eacute;rlik a TCP &eacute;s UDP
	  csatlakoz&aacute;sokhoz automatikusan hozz&aacute;rendelt
	  portsz&aacute;mok tartom&aacute;ny&aacute;t.  H&aacute;rom
	  ilyen tartom&aacute;ny l&eacute;tezik: az als&oacute;, az
	  alap&eacute;rtelmezett &eacute;s a fels&#245;
	  tartom&aacute;ny.  A legt&ouml;bb h&aacute;l&oacute;zati
	  program a <varname>net.inet.ip.portrange.first</varname>
	  &eacute;s <varname>net.inet.ip.portrange.last</varname>
	  v&aacute;ltoz&oacute;k &aacute;ltal rendre az 1024-t&#245;l
	  5000-ig kijel&ouml;lt alap&eacute;rtelmezett tartom&aacute;nyt
	  haszn&aacute;lja.  A kimen&#245; kapcsolatok is
	  r&ouml;gz&iacute;tett porttartom&aacute;nyokat k&ouml;vetnek,
	  &eacute;s adott k&ouml;r&uuml;lm&eacute;nyek mellett be lehet
	  &aacute;ll&iacute;tani &uacute;gy a rendszer&uuml;nket, hogy
	  ezen k&iacute;v&uuml;l osszon ki portokat.  Ez a
	  legt&ouml;bbsz&ouml;r akkor fordul el&#245;, amikor egy
	  er&#245;sen leterhelt webproxyt m&#251;k&ouml;dtet&uuml;nk.  A
	  porttartom&aacute;nyok nem okoznak gondot olyan
	  szerverekn&eacute;l, ahol &aacute;ltal&aacute;ban
	  bej&ouml;v&#245; kapcsolatokra lehet sz&aacute;m&iacute;tani,
	  teh&aacute;t p&eacute;ld&aacute;ul webszerverek eset&eacute;n,
	  vagy ahol korl&aacute;tozott a kimen&#245; kapcsolatok
	  sz&aacute;ma, mint p&eacute;ld&aacute;ul a levelek
	  tov&aacute;bb&iacute;t&aacute;s&aacute;n&aacute;l.  Ha olyan
	  helyzetbe keveredn&eacute;nk, ahol m&aacute;r kifutunk a
	  felhaszn&aacute;lhat&oacute; portokb&oacute;l, a
	  <varname>net.inet.ip.portrange.last</varname>
	  m&eacute;rs&eacute;kelt n&ouml;vel&eacute;s&eacute;vel
	  javasolt kit&ouml;rni.  Ilyenkor a <literal>10000</literal>,
	  <literal>20000</literal> vagy <literal>30000</literal>
	  &eacute;rt&eacute;kek elfogadhat&oacute;ak.  Amikor
	  megv&aacute;ltoztatjuk a porttartom&aacute;nyok
	  hat&aacute;rait, el&#245;tte mindig gondoljuk &aacute;t,
	  milyen hat&aacute;ssal lehet ez a t&#251;zfalra.  Egyes
	  t&#251;zfalak blokkolhatnak bizonyos tartom&aacute;nyokat
	  (&aacute;ltal&aacute;ban az alacsonyabbakat) &eacute;s arra
	  sz&aacute;m&iacute;tanak, hogy a rendszerek a kimen&#245;
	  kapcsolatokhoz a nagyobb sz&aacute;m&uacute; portokat
	  haszn&aacute;lj&aacute;k &mdash; ebb&#245;l kifoly&oacute;lag
	  nem aj&aacute;nlott cs&ouml;kkenteni a
	  <varname>net.inet.ip.portrange.first</varname>
	  &eacute;rt&eacute;k&eacute;t.</para>
      </sect3>

      <sect3>
	<title>A TCP
	  s&aacute;vsz&eacute;less&eacute;g-k&eacute;sletet&eacute;s
	  szorzat</title>

	<indexterm>
	  <primary>A TCP
	    s&aacute;vsz&eacute;less&eacute;g-k&eacute;sleltet&eacute;s
	    szorzat&aacute;nak korl&aacute;toz&aacute;sa</primary>
	  <secondary><varname>net.inet.tcp.inflight.enable</varname></secondary>
	</indexterm>

	<para>A TCP
	  s&aacute;vsz&eacute;less&eacute;g-k&eacute;sleltet&eacute;s
	  szorzat korl&aacute;toz&aacute;sa hasonl&iacute;t a NetBSD-ben
	  megtal&aacute;lhat&oacute; TCP/Vegas
	  implement&aacute;ci&oacute;hoz.  A
	  <varname>net.inet.tcp.inflight.enable</varname> sysctl
	  v&aacute;ltoz&oacute; <literal>1</literal>-re
	  &aacute;ll&iacute;t&aacute;s&aacute;val lehet
	  enged&eacute;lyezni.  A rendszer ilyenkor minden egyes
	  kapcsolathoz megpr&oacute;b&aacute;lja
	  kisz&aacute;m&iacute;tani a
	  s&aacute;vsz&eacute;less&eacute;g-k&eacute;sleltet&eacute;s
	  szorzatot &eacute;s az optim&aacute;lis &aacute;tviteli
	  sebess&eacute;g fenntart&aacute;s&aacute;hoz illeszked&#245;en
	  korl&aacute;tozni a h&aacute;l&oacute;zat fel&eacute;
	  k&uuml;ld&ouml;tt adatok sor&aacute;nak hossz&aacute;t.</para>

	<para>Ez a lehet&#245;s&eacute;g m&eacute;g olyankor bizonyulhat
	  hasznosnak, amikor modemen, Gigabit Etherneten vagy
	  nagysebess&eacute;g&#251; WAN (vagy b&aacute;rmilyen
	  m&aacute;s nagy
	  s&aacute;vsz&eacute;less&eacute;g-k&eacute;sleltet&eacute;s
	  szorzattal b&iacute;r&oacute;)
	  &ouml;sszek&ouml;ttet&eacute;seken kereszt&uuml;l
	  k&uuml;ld&uuml;nk &aacute;t adatokat, k&uuml;l&ouml;n&ouml;sen
	  abban az esetben, amikor ablakm&eacute;retez&eacute;st is
	  haszn&aacute;lnunk vagy nagy k&uuml;ld&eacute;si ablakot
	  &aacute;ll&iacute;tottunk be.  Az
	  enged&eacute;lyez&eacute;sekor ne felejts&uuml;k el
	  <varname>net.inet.tcp.infligt.debug</varname>
	  v&aacute;ltoz&oacute;t sem be&aacute;ll&iacute;tani
	  <literal>0</literal>-ra (amivel &iacute;gy kikapcsoljuk a
	  nyomk&ouml;vet&eacute;st),&eacute;les haszn&aacute;lat
	  eset&eacute;n pedig el&#245;ny&ouml;s lehet a
	  <varname>net.inet.cp.inflight.min</varname>
	  v&aacute;ltoz&oacute;t legal&aacute;bb
	  <literal>6144</literal>-re &aacute;ll&iacute;tani.  Azonban
	  hozz&aacute;tessz&uuml;k, hogy
	  &ouml;sszek&ouml;ttet&eacute;st&#245;l f&uuml;gg&#245;en a
	  nagy minimum &eacute;rt&eacute;kek tulajdonk&eacute;ppen
	  kikapcsolj&aacute;k a
	  s&aacute;vsz&eacute;less&eacute;gkorl&aacute;toz&aacute;st.
	  Ez a korl&aacute;toz&aacute;si lehet&#245;s&eacute;g
	  cs&ouml;kkenti a k&ouml;zbens&#245; &uacute;t adatainak
	  &eacute;s csomagv&aacute;lt&aacute;sokhoz tartoz&oacute;
	  soroknak a m&eacute;ret&eacute;t, mik&ouml;zben cs&ouml;kkenti
	  a helyi sz&aacute;m&iacute;t&oacute;g&eacute;p
	  fel&uuml;let&eacute;n fel&eacute;p&uuml;l&#245; sorok
	  m&eacute;ret&eacute;t is.  Ha kevesebb csomagot rakunk be a
	  sorba, akkor az interakt&iacute;v kapcsolatok,
	  k&uuml;l&ouml;n&ouml;sen a lassabb modemek eset&eacute;ben,
	  kisebb <emphasis>k&ouml;rbej&aacute;r&aacute;si
	  id&#245;vel</emphasis> (Round Trip Time) m&#251;k&ouml;dnek.
	  Tov&aacute;bb&aacute; megeml&iacute;ten&eacute;nk, hogy ez a
	  lehet&#245;s&eacute;g csak az adatok
	  k&uuml;ld&eacute;s&eacute;re (felt&ouml;lt&eacute;s&eacute;re,
	  szerveroldalra) van hat&aacute;ssal.  Semmilyen
	  befoly&aacute;sa nincs az adatok fogad&aacute;s&aacute;ra
	  (let&ouml;lt&eacute;s&eacute;re).</para>

	<para>A <varname>net.inet.tcp.inflight.stab</varname>
	  &aacute;ll&iacute;tgat&aacute;sa <emphasis>nem</emphasis>
	  aj&aacute;nlott.  A param&eacute;ter &eacute;rt&eacute;ke
	  alap&eacute;rtelmez&eacute;s szerint 20, ami legfeljebb 2
	  csomag hozz&aacute;ad&aacute;s&aacute;t jelenti a
	  s&aacute;vsz&eacute;less&eacute;g-k&eacute;sleltet&eacute;s
	  szorzat ablak&aacute;nak kisz&aacute;m&iacute;t&aacute;sakor.
	  Erre a kieg&eacute;sz&iacute;t&#245; ablakra az&eacute;rt van
	  sz&uuml;ks&eacute;g, hogy stabiliz&aacute;lni tudjuk vele az
	  algoritmust &eacute;s jav&iacute;tani tudjuk a
	  v&aacute;ltoz&oacute; felt&eacute;telekre adott
	  reakci&oacute;t, de lassabb &ouml;sszek&ouml;ttet&eacute;sek
	  eset&eacute;ben nagyobb ping id&#245;ket is
	  eredm&eacute;nyezhet (hab&aacute;r ezek m&eacute;g &iacute;gy
	  kisebbek, mint ha nem haszn&aacute;ln&aacute;nk az
	  algoritmust).  Ilyen esetekben megpr&oacute;b&aacute;lhatjuk
	  15-re, 10-re vagy esetleg 5-re visszavenni a param&eacute;ter
	  &eacute;rt&eacute;k&eacute;t, de ekkor a k&iacute;v&aacute;nt
	  hat&aacute;s el&eacute;r&eacute;s&eacute;hez minden bizonnyal
	  a <varname>net.inet.tcp.inflight.min</varname>
	  &eacute;rt&eacute;k&eacute;t is reduk&aacute;lunk kell majd
	  (p&eacute;ld&aacute;ul 3500-ra).  Ezen param&eacute;terek
	  megv&aacute;ltoztat&aacute;s&aacute;t csak v&eacute;gs&#245;
	  esetben aj&aacute;nljuk!</para>
      </sect3>
    </sect2>

    <sect2>
      <title>Virtu&aacute;lis mem&oacute;ria</title>

      <sect3>
	<title><varname>kern.maxvnodes</varname></title>

	<para>A vnode egy &aacute;llom&aacute;ny vagy
	  k&ouml;nyvt&aacute;r bels&#245;
	  &aacute;br&aacute;zol&aacute;sa.  Ennek megfelel&#245;en a
	  vnode-ok sz&aacute;m&aacute;nak n&ouml;vel&eacute;s&eacute;vel
	  az oper&aacute;ci&oacute;s rendszer sp&oacute;rolni tud a
	  lemezm&#251;veletekkel.  Ezt &aacute;ltal&aacute;ban maga az
	  oper&aacute;ci&oacute;s rendszer szab&aacute;lyozza, &eacute;s
	  nincs sz&uuml;ks&eacute;g a finomhangol&aacute;s&aacute;ra.
	  N&eacute;h&aacute;ny esetben, amikor a lemezm&#251;veletek
	  jelentik a rendszerben a sz&#251;k keresztmetszetet &eacute;s
	  kezdenek elfogyni a vnode-ok, sz&uuml;ks&eacute;g lehet ennek
	  a sz&aacute;mnak a n&ouml;vel&eacute;s&eacute;re.  Ehhez az
	  inakt&iacute;v &eacute;s szabad fizikai mem&oacute;ria
	  mennyis&eacute;g&eacute;t kell sz&aacute;m&iacute;t&aacute;sba
	  venn&uuml;nk.</para>

	<para>&Iacute;gy k&eacute;rhetj&uuml;k le a pillanatnyilag
	  haszn&aacute;latban lev&#245; vnode-ok
	  mennyis&eacute;g&eacute;t:</para>

	<screen>&prompt.root; <userinput>sysctl vfs.numvnodes</userinput>
vfs.numvnodes: 91349</screen>

	<para>&Iacute;gy tudhatjuk meg a vnode-ok maxim&aacute;lis
	  sz&aacute;m&aacute;t:</para>

	<screen>&prompt.root; <userinput>sysctl kern.maxvnodes</userinput>
kern.maxvnodes: 100000</screen>

	<para>Ha a vnode-ok aktu&aacute;lis kihaszn&aacute;lts&aacute;ga
	  megk&ouml;zel&iacute;ti a cs&uacute;cs&eacute;rt&eacute;ket,
	  nagyj&aacute;b&oacute;l ezerrel javasolt megn&ouml;velni a
	  <varname>kern.maxvnodes</varname>
	  &eacute;rt&eacute;k&eacute;t.  Ezut&aacute;n figyelj&uuml;k
	  tov&aacute;bbra is a <varname>vfs.numvnodes</varname>
	  v&aacute;ltoz&aacute;s&aacute;t.  Ha ism&eacute;t
	  felk&uacute;szik a maxim&aacute;lis &eacute;rt&eacute;kre,
	  akkor n&ouml;velj&uuml;k megint egy keveset a
	  <varname>kern.maxvnodes</varname>
	  &eacute;rt&eacute;k&eacute;n.  Ek&ouml;zben a &man.top.1;
	  haszn&aacute;lat&aacute;val figyelhetj&uuml;k a mem&oacute;ria
	  kihaszn&aacute;lts&aacute;g&aacute;nak
	  n&ouml;veked&eacute;s&eacute;t is, ilyenkor teh&aacute;t
	  t&ouml;bb mem&oacute;ri&aacute;nak kell haszn&aacute;latban
	  lennie.</para>
      </sect3>
    </sect2>
  </sect1>

  <sect1 id="adding-swap-space">
    <title>A lapoz&oacute;ter&uuml;let
      b&#245;v&iacute;t&eacute;se</title>

    <para>Nem sz&aacute;m&iacute;t, mennyire tervez&uuml;nk j&oacute;l
      el&#245;re, mindig el&#245;fordulhat, hogy a rendszer&uuml;nk
      m&eacute;gsem teljes&iacute;ti a kit&#251;z&ouml;tt
      elv&aacute;r&aacute;sokat.  Amennyiben tov&aacute;bbi
      lapoz&oacute;ter&uuml;let hozz&aacute;ad&aacute;s&aacute;ra lenne
      sz&uuml;ks&eacute;g&uuml;nk, azt igen k&ouml;nnyen
      megtehetj&uuml;k.  H&aacute;romf&eacute;lek&eacute;ppen
      n&ouml;velhetj&uuml;k a lapoz&aacute;sra sz&aacute;nt
      ter&uuml;letet: hozz&aacute;adunk a rendszerhez egy &uacute;jabb
      merevlemezes meghajt&oacute;t, NFS-en kereszt&uuml;l lapozunk,
      vagy egy m&aacute;r meglev&#245; part&iacute;ci&oacute;n hozunk
      l&eacute;tre lapoz&oacute;&aacute;llom&aacute;nyt.</para>

    <para>A lapoz&oacute;ter&uuml;let
      titkos&iacute;t&aacute;s&aacute;val, valamint annak
      lehet&#245;s&eacute;geivel &eacute;s okaival kapcsolatban lapozzuk
      fel a k&eacute;zik&ouml;nyv <xref
      linkend="swap-encrypting">&aacute;t.</para>

    <sect2 id="new-drive-swap">
      <title>Lapoz&aacute;s egy &uacute;j merevlemezre</title>

      <para>A lapoz&oacute;ter&uuml;let
	b&#245;v&iacute;t&eacute;s&eacute;nek legjobb m&oacute;dja
	term&eacute;szetesen remek indok egy &uacute;j merevlemez
	beszerz&eacute;s&eacute;re is.  Elv&eacute;gre egy
	merevlemezt mindig fel tudunk ilyen c&eacute;lra
	haszn&aacute;lni.  Ha ezt a megold&aacute;st v&aacute;lasztjuk,
	el&#245;tte aj&aacute;nlott (&uacute;jra) elolvasni a
	k&eacute;zik&ouml;nyv <xref
	linkend="configtuning-initial">&aacute;ban a
	lapoz&oacute;ter&uuml;letek elrendez&eacute;s&eacute;re
	vonatkoz&oacute; javaslatokat.</para>
    </sect2>

    <sect2 id="nfs-swap">
      <title>Lapoz&aacute;s NFS-en kereszt&uuml;l</title>

      <para>NFS-en kereszt&uuml;l csak akkor lapozzunk, ha ezt helyi
	lemezek seg&iacute;ts&eacute;g&eacute;vel nem tudjuk megtenni.
	Az NFS alap&uacute; lapoz&aacute;s
	hat&eacute;konys&aacute;g&aacute;t er&#245;sen
	behat&aacute;rolja a rendelkez&eacute;sre &aacute;ll&oacute;
	h&aacute;l&oacute;zati s&aacute;vsz&eacute;less&eacute;g
	&eacute;s tov&aacute;bbi terheket r&oacute; az NFS
	szerver&uuml;nkre is.</para>
    </sect2>

    <sect2 id="create-swapfile">
      <title>Lapoz&oacute;&aacute;llom&aacute;nyok</title>

      <para>Lapoz&oacute;&aacute;llom&aacute;nynak egy adott
	m&eacute;ret&#251; &aacute;llom&aacute;nyt hozzunk l&eacute;tre.
	Ebben a p&eacute;ld&aacute;ban erre egy
	<filename>/usr/swap0</filename> nev&#251;, 64&nbsp;MB
	m&eacute;ret&#251; &aacute;llom&aacute;nyt fogunk
	haszn&aacute;lni.  Term&eacute;szetesen b&aacute;rmilyen
	m&aacute;s nevet is v&aacute;laszthatunk.</para>

      <example>
	<title>Lapoz&oacute;&aacute;llom&aacute;ny
	  l&eacute;trehoz&aacute;sa &os;-ben</title>

	<orderedlist>
	  <listitem>
	    <para>Gy&#245;z&#245;dj&uuml;nk meg r&oacute;la, hogy a
	      rendszermagunk be&aacute;ll&iacute;t&aacute;sai
	      k&ouml;z&ouml;tt megtal&aacute;lhat&oacute; a
	      mem&oacute;rialemez meghajt&oacute;j&aacute;nak (&man.md.4;)
	      haszn&aacute;lata.  Ez a <filename>GENERIC</filename>
	      rendszermag alapb&oacute;l tartalmazza.</para>

	    <programlisting>device   md   # Mem&oacute;ria "lemezek"</programlisting>
	  </listitem>

	  <listitem>
	    <para>Hozzunk l&eacute;tre egy
	      lapoz&oacute;&aacute;llom&aacute;nyt
	      (<filename>/usr/swap0</filename>):</para>

	    <screen>&prompt.root; <userinput>dd if=/dev/zero of=/usr/swap0 bs=1024k count=64</userinput></screen>
	  </listitem>

	  <listitem>
	    <para>&Aacute;ll&iacute;tsuk be r&aacute; a megfelel&#245;
	      enged&eacute;lyeket
	      (<filename>/usr/swap0</filename>):</para>

	    <screen>&prompt.root; <userinput>chmod 0600 /usr/swap0</userinput></screen>
	  </listitem>

	  <listitem>
	    <para>Adjuk meg a lapoz&oacute;&aacute;llom&aacute;nyt az
	      <filename>/etc/rc.conf</filename>
	      &aacute;llom&aacute;nyban:</para>

	    <programlisting>swapfile="/usr/swap0"   # &Aacute;ll&iacute;tsuk be swapfile &eacute;rt&eacute;k&eacute;t, ha k&uuml;ls&#245; lapoz&oacute;&aacute;llom&aacute;nyra van sz&uuml;ks&eacute;g&uuml;nk.</programlisting>
	  </listitem>

	  <listitem>
	    <para>Ind&iacute;tsuk &uacute;jra a
	      sz&aacute;m&iacute;t&oacute;g&eacute;p&uuml;nket, vagy a
	      lapoz&oacute;&aacute;llom&aacute;ny azonnali
	      haszn&aacute;ltba v&eacute;tel&eacute;hez &iacute;rjuk
	      be:</para>

	    <screen>&prompt.root; <userinput>mdconfig -a -t vnode -f /usr/swap0 -u 0 &amp;&amp; swapon /dev/md0</userinput></screen>
	  </listitem>
	</orderedlist>
      </example>

    </sect2>
  </sect1>

  <sect1 id="acpi-overview">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Hiten</firstname>
	  <surname>Pandya</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
	<author>
	  <firstname>Tom</firstname>
	  <surname>Rhodes</surname>
	</author>
      </authorgroup>
    </sect1info>

    <title>Energia- &eacute;s
      er&#245;forr&aacute;sgazd&aacute;lkod&aacute;s</title>

    <para>Fontos a hardveres er&#245;forr&aacute;saink hat&eacute;kony
      kihaszn&aacute;l&aacute;sa.  Az <acronym>ACPI</acronym>
      megjelen&eacute;se el&#245;tt az oper&aacute;ci&oacute;s
      rendszerek csak neh&eacute;zkesen &eacute;s rugalmatlanul
      tudt&aacute;k kezelni a rendszer
      energiafelhaszn&aacute;l&aacute;si &eacute;s
      h&#245;szab&aacute;lyz&aacute;si lehet&#245;s&eacute;geit.  A
      hardvert a <acronym>BIOS</acronym> kezelte, ez&eacute;rt a
      felhaszn&aacute;l&oacute; kevesebbet tudott l&aacute;tni &eacute;s
      ir&aacute;ny&iacute;tani az energiagazd&aacute;lkod&aacute;si
      be&aacute;ll&iacute;t&aacute;sokb&oacute;l.  Az <emphasis>Fejlett
      energiagazd&aacute;lkod&aacute;s (Advanced Power Management,
      APM)</emphasis> ehhez ny&uacute;jtott egy er&#245;sen
      korl&aacute;tozott fel&uuml;letet.  Napjaink
      oper&aacute;ci&oacute;s rendszereiben az energia- &eacute;s
      er&#245;forr&aacute;skezel&eacute;s az egyik legfontosabb
      alkot&oacute;elem.  P&eacute;ld&aacute;ul, ha az
      oper&aacute;ci&oacute;s rendszerrel folyamatosan figyelni akarjuk
      a rendszer h&#245;m&eacute;rs&eacute;klet&eacute;nek
      v&aacute;ratlan n&ouml;veked&eacute;s&eacute;t (&eacute;s
      err&#245;l figyelmeztet&eacute;st k&eacute;rni).</para>

    <para>A &os; k&eacute;zik&ouml;nyv&eacute;nek ezen
      szakasz&aacute;ban az <acronym>ACPI</acronym>-r&#245;l adunk egy
      &aacute;tfog&oacute; &aacute;ttekint&eacute;st, a
      v&eacute;g&eacute;n pedig &ouml;sszefoglaljuk a
      t&eacute;m&aacute;hoz tartoz&oacute; irodalmat.</para>

    <sect2 id="acpi-intro">
      <title>Mi az ACPI?</title>

      <indexterm><primary>ACPI</primary></indexterm>
      <indexterm><primary>APM</primary></indexterm>

      <para>A speci&aacute;lis energia- &eacute;s
	konfigur&aacute;ci&oacute;s illeszt&#245; fel&uuml;let (Advanced
	Configuration and Power Interface, avagy
	<acronym>ACPI</acronym>) gy&aacute;rt&oacute;k egy csoportja
	&aacute;ltal l&eacute;trehozott szabv&aacute;ny, amely a
	hardveres er&#245;forr&aacute;sok &eacute;s az
	energiagazd&aacute;lkod&aacute;s egys&eacute;ges
	fel&uuml;let&eacute;t r&ouml;gz&iacute;ti (innen a neve).
	D&ouml;nt&#245; szerepet j&aacute;tszik a
	<emphasis>Be&aacute;ll&iacute;t&aacute;sok &eacute;s az
	energiagazd&aacute;lkod&aacute;s oper&aacute;ci&oacute;s
	rendszerek &aacute;ltai
	vez&eacute;rl&eacute;s&eacute;ben</emphasis>, vagyis
	seg&iacute;ts&eacute;g&eacute;vel az oper&aacute;ci&oacute;s
	rendszer m&eacute;g nagyobb m&eacute;rt&eacute;kben &eacute;s
	rugalmass&aacute;ggal tudja ir&aacute;ny&iacute;tani ezeket a
	lehet&#245;s&eacute;geket.  A modern oper&aacute;ci&oacute;s
	rendszerek az <acronym>ACPI</acronym>
	felbukkan&aacute;s&aacute;val <quote>kitolt&aacute;k</quote> a
	jelenleg meglev&#245; Plug and Play fel&uuml;letek
	korl&aacute;tait.  Az <acronym>ACPI</acronym> az
	<acronym>APM</acronym> k&ouml;zvetlen
	lesz&aacute;rmazottja.</para>
    </sect2>

    <sect2 id="acpi-old-spec">
      <title>A Fejlett energiagazd&aacute;lkod&aacute;s (APM)
	hi&aacute;nyoss&aacute;gai</title>

      <para>A <emphasis>Fejlett energiagazd&aacute;lkod&aacute;s
	(APM)</emphasis> a rendszer &aacute;ltal felhaszn&aacute;lt
	energi&aacute;t annak elfoglalts&aacute;ga alapj&aacute;n
	vez&eacute;rli.  Az APM-et t&aacute;mogat&oacute; BIOS-t a
	(rendszert) gy&aacute;rt&oacute; &aacute;ll&iacute;tja el&#245;
	&eacute;s az adott hardverplatformra jellemz&#245;.  Az APM
	oper&aacute;ci&oacute;s rendszerben lev&#245; meghajt&oacute;ja
	hozz&aacute;f&eacute;r&eacute;st biztos&iacute;t az
	<emphasis>APM szoftveres fel&uuml;let&eacute;hez</emphasis>,
	amivel lehet&#245;s&eacute;g ny&iacute;lik az energiaszintek
	kezel&eacute;s&eacute;re.  Az APM-et 2000 el&#245;tt &eacute;s
	k&ouml;r&uuml;l m&eacute;g mindig haszn&aacute;lt&aacute;k egyes
	rendszerek gy&aacute;rt&aacute;s&aacute;n&aacute;l.</para>

      <para>Az APM haszn&aacute;lata n&eacute;gy nagyobb gondot rejt
	mag&aacute;ban.  El&#245;sz&ouml;r is, az
	energiagazd&aacute;lkod&aacute;st a
	(gy&aacute;rt&oacute;f&uuml;gg&#245;) BIOS v&eacute;gzi el,
	&eacute;s az oper&aacute;ci&oacute;s rendszernek err&#245;l
	semmilyen ismerete nincsen.  Ennek egyik p&eacute;ld&aacute;ja
	az, amikor a felhaszn&aacute;l&oacute; az APM-et ismer&#245;
	BIOS-ban be&aacute;ll&iacute;tja a merevlemezek automatikus
	kikapcsol&aacute;s&aacute;nak idej&eacute;t, majd amikor ez
	letelik, a BIOS az oper&aacute;ci&oacute;s rendszer tudta
	n&eacute;lk&uuml;l egyszer&#251;en le&aacute;ll&iacute;tja a
	lemezt.  M&aacute;sodszor: az APM
	m&#251;k&ouml;d&eacute;s&eacute;t a BIOS-ban programozt&aacute;k
	le, &eacute;s teljesen az oper&aacute;ci&oacute;s rendszer
	hat&aacute;sk&ouml;r&eacute;n t&uacute;l tev&eacute;kenykedik.
	Ez azt jelenti, hogy a felhaszn&aacute;l&oacute; csak &uacute;gy
	tudja korrig&aacute;lni az APM-es BIOS-ok
	probl&eacute;m&aacute;it, ha friss&iacute;ti az alaplapi ROM-ot.
	Ez viszont egy nagyon kock&aacute;zatos folyamat, amelynek
	hib&aacute;ja r&eacute;v&eacute;n a rendszer&uuml;nk
	helyrehozhatatlan &aacute;llapotba ker&uuml;lhet.  Harmadszor:
	az APM alapvet&#245;en egy gy&aacute;rt&oacute;f&uuml;gg&#245;
	megold&aacute;s, ami azt vonja maga ut&aacute;n, hogy sok az
	&aacute;tfed&eacute;s (ugyanazt val&oacute;s&iacute;tj&aacute;k
	meg t&ouml;bb m&oacute;don), &eacute;s ha az egyik
	gy&aacute;rt&oacute; BIOS-&aacute;ban hib&aacute;t
	tal&aacute;lnak, akkor a m&aacute;sik&eacute;ban az nem
	felt&eacute;tlen&uuml;l jav&iacute;that&oacute;.
	V&eacute;g&uuml;l, de nem utols&oacute;sorban, az APM
	alap&uacute; BIOS-okban nincs el&eacute;g hely az igaz&aacute;n
	kifinomult energiagazd&aacute;lkod&aacute;si s&eacute;m&aacute;k
	vagy b&aacute;rmi m&aacute;s kialak&iacute;t&aacute;s&aacute;ra,
	amivel a felhaszn&aacute;l&oacute;k k&eacute;pesek
	lenn&eacute;nek az ig&eacute;nyeikhez alak&iacute;tani a
	sz&aacute;m&iacute;t&oacute;g&eacute;pet.</para>

      <para>A <emphasis>Plug and Play BIOS (PNPBIOS)</emphasis> sok
	szempontb&oacute;l megb&iacute;zhatatlannak bizonyult.  A
	PNPBIOS r&aacute;ad&aacute;sul egy 16 bites megold&aacute;s,
	ez&eacute;rt az oper&aacute;ci&oacute;s rendszereknek 16 bites
	emul&aacute;ci&oacute;t kell haszn&aacute;lniuk a PNPBIOS
	eszk&ouml;zeinek
	<quote>el&eacute;r&eacute;s&eacute;hez</quote>.</para>

      <para>A &os; <acronym>APM</acronym> meghajt&oacute;j&aacute;nak
	dokument&aacute;ci&oacute;j&aacute;t az &man.apm.4; man oldalon
	tal&aacute;ljuk.</para>
    </sect2>

    <sect2 id="acpi-config">
      <title>Az <acronym>ACPI</acronym>
	be&aacute;ll&iacute;t&aacute;sa</title>

      <para>Az <filename>acpi.ko</filename> meghajt&oacute;
	alap&eacute;rtelmez&eacute;s szerint a &man.loader.8;
	seg&iacute;ts&eacute;g&eacute;vel t&ouml;lt&#245;dik be,
	&eacute;s <emphasis>ne</emphasis> is ford&iacute;tsuk bele a
	rendszermagba.  Ezt azzal tudn&aacute;nk magyar&aacute;zni, hogy
	modulokkal k&ouml;nnyebb dolgozni, p&eacute;ld&aacute;ul ha a
	rendszermag &uacute;jraford&iacute;t&aacute;sa
	n&eacute;lk&uuml;l egy m&aacute;sik <filename>acpi.ko</filename>
	modult akarunk haszn&aacute;lni.  Ezzel a
	l&eacute;nyeg&eacute;ben a tesztel&eacute;s is
	egyszer&#251;bb&eacute; v&aacute;lik.  M&aacute;sik
	magyar&aacute;zat, hogy a rendszer <acronym>ACPI</acronym>
	t&aacute;mogat&aacute;sa nem minden esetben m&#251;k&ouml;dik
	rendesen.  Ha a rendszer ind&iacute;t&aacute;sa sor&aacute;n
	valamilyen probl&eacute;m&aacute;t tapasztalunk, akkor
	pr&oacute;b&aacute;lkozzunk meg az <acronym>ACPI</acronym>
	kikapcsol&aacute;s&aacute;val.  Ezt a meghajt&oacute;t nem lehet
	&eacute;s nem is szabad kidobni a
	mem&oacute;ri&aacute;b&oacute;l, mivel a hardverrel a
	rendszerbuszon kereszt&uuml;l tartja a kapcsolatot.  Az
	<acronym>ACPI</acronym> a
	<literal>hint.acpi.0.disabled="1"</literal> sor
	megad&aacute;s&aacute;val kapcsolhat&oacute; a
	<filename>/boot/loader.conf</filename> &aacute;llom&aacute;nyban
	vagy a &man.loader.8; parancssor&aacute;ban.</para>

      <note>
	<para>Az <acronym>ACPI</acronym> &eacute;s az
	  <acronym>APM</acronym> nem haszn&aacute;lat&oacute; egyszerre.
	  K&ouml;z&uuml;l&uuml;k a k&eacute;s&#245;bb
	  bet&ouml;lt&ouml;tt mag&aacute;t&oacute;l kil&eacute;p, ha
	  &eacute;szreveszi, hogy a m&aacute;sikuk m&aacute;r
	  m&#251;k&ouml;d&eacute;sbe l&eacute;pett.</para>
      </note>

      <para>Az <acronym>ACPI</acronym> &eacute;s az &man.acpiconf.8;
	haszn&aacute;lat&aacute;val a rendszer&uuml;nk
	k&eacute;szenl&eacute;ti m&oacute;dba helyezhet&#245; az
	<option>-s</option> valamint az <literal>1-5</literal>
	param&eacute;terek megad&aacute;s&aacute;val.  Ezek
	k&ouml;z&uuml;l is a legt&ouml;bb felhaszn&aacute;l&oacute;
	sz&aacute;m&aacute;ra csak az <literal>1</literal> vagy a
	<literal>3</literal> (&aacute;llapot ment&eacute;se a fizikai
	mem&oacute;ri&aacute;ba) &eacute;rdekes.  Az
	<literal>5</literal> opci&oacute; egy szoftveres
	kikapcsol&aacute;st eredm&eacute;nyez, ehhez
	hasonl&oacute;an:</para>

      <screen>&prompt.root; <userinput>halt -p</userinput></screen>

      <para>A tov&aacute;bbi opci&oacute;k a &man.sysctl.8; man
	oldal&aacute;r&oacute;l &eacute;rhet&#245;ek el.  Ezen
	k&iacute;v&uuml;l m&eacute;g olvassuk el az &man.acpi.4;
	&eacute;s &man.acpiconf.8; man oldalakat is.</para>
    </sect2>
  </sect1>

  <sect1 id="ACPI-debug">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Nate</firstname>
	  <surname>Lawson</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
      <authorgroup>
	<author>
	  <firstname>Peter</firstname>
	  <surname>Schultz</surname>
	  <contrib>Seg&iacute;ts&eacute;g&eacute;re volt m&eacute;g:
	    </contrib>
	</author>
	<author>
	  <firstname>Tom</firstname>
	  <surname>Rhodes</surname>
	</author>
      </authorgroup>
    </sect1info>

    <title>A &os; <acronym>ACPI</acronym>
      t&aacute;mogat&aacute;s&aacute;nak haszn&aacute;lata &eacute;s
      nyomonk&ouml;vet&eacute;se</title>

    <indexterm>
      <primary>ACPI</primary>
      <secondary>probl&eacute;m&aacute;k</secondary>
    </indexterm>

    <para>Az <acronym>ACPI</acronym> az eszk&ouml;z&ouml;k
      felder&iacute;t&eacute;s&eacute;nek,
      energiagazd&aacute;lkod&aacute;s&aacute;nak &eacute;s a
      kor&aacute;bban a <acronym>BIOS</acronym> &aacute;ltal kezelt
      hardverek szabv&aacute;nyos&iacute;tott
      hozz&aacute;f&eacute;r&eacute;s&eacute;nek alapjaiban &uacute;j
      m&oacute;dja.  Az <acronym>ACPI</acronym> folyamatosan
      fejl&#245;dik, de &uacute;tj&aacute;t az egyes alaplapok
      <firstterm><acronym>ACPI</acronym> Machine Language</firstterm>
      (<acronym>AML</acronym>) bytek&oacute;d
      implement&aacute;ci&oacute;j&aacute;ban megjelen&#245;
      hib&aacute;k, a &os; rendszermag alrendszereinek
      befejezetlens&eacute;ge &eacute;s az &intel;
      <acronym>ACPI-CA</acronym> &eacute;rtelmez&#245;j&eacute;ben
      lev&#245; hib&aacute;k lass&iacute;tj&aacute;k.</para>

    <para>Ez a le&iacute;r&aacute;s azzal a sz&aacute;nd&eacute;kkal
      k&eacute;sz&uuml;lt, hogy seg&iacute;ts&uuml;nk a
      felhaszn&aacute;l&oacute;knak megtal&aacute;lni az &aacute;ltaluk
      tapasztalt probl&eacute;m&aacute;k gy&ouml;ker&eacute;t &eacute;s
      ezzel seg&iacute;teni az <acronym>ACPI</acronym> fejleszt&#245;ket
      a nyomonk&ouml;vet&eacute;s&eacute;ben &eacute;s
      kijav&iacute;t&aacute;s&aacute;ban.  A fejleszt&#245;k
      k&ouml;sz&ouml;nik, hogy ezt elolvassuk &eacute;s
      seg&eacute;dkez&uuml;nk a rendszer&uuml;nkkel kapcsolatban
      felmer&uuml;l&#245; probl&eacute;m&aacute;k
      orvosol&aacute;s&aacute;ban!</para>

    <sect2 id="ACPI-submitdebug">
      <title>A nyomk&ouml;vet&eacute;si inform&aacute;ci&oacute;k
	bek&uuml;ld&eacute;se</title>

      <note>
	<para>Miel&#245;tt bek&uuml;lden&eacute;nk b&aacute;rmilyen
	  probl&eacute;m&aacute;t is, gondoskodjunk r&oacute;la, hogy a
	  <acronym>BIOS</acronym>-unk, &eacute;s ha lehets&eacute;ges,
	  akkor a be&aacute;gyazott vez&eacute;rl&#245;k, legfrissebb
	  verzi&oacute;j&aacute;t haszn&aacute;ljuk.</para>
      </note>

      <para>Megk&eacute;rn&eacute;nk azokat, akik hib&aacute;t akarnak
	bejelenteni, hogy a k&ouml;vetkez&#245;
	inform&aacute;ci&oacute;kat k&uuml;ldj&eacute;k a <ulink
	url="mailto:freebsd-acpi@FreeBSD.org">
	freebsd-acpi@FreeBSD.org</ulink> c&iacute;mre:</para>

      <itemizedlist>
	<listitem>
	  <para>A hib&aacute;s m&#251;k&ouml;d&eacute;s
	    le&iacute;r&aacute;sa, bele&eacute;rtve a rendszer
	    t&iacute;pus&aacute;t &eacute;s
	    gy&aacute;rtm&aacute;ny&aacute;t, illetve minden olyat,
	    aminek k&ouml;ze lehet a hib&aacute;hoz.  Ha eddig
	    m&eacute;g nem tapasztaltuk, igyekezz&uuml;nk min&eacute;l
	    pontosabban le&iacute;rni a hiba
	    keletkez&eacute;s&eacute;nek folyamat&aacute;t.</para>
	</listitem>

	<listitem>
	  <para>A <command>boot -v</command> paranccsal ind&iacute;tott
	    rendszer &man.dmesg.8; kimenet&eacute;t, bele&eacute;rtve a
	    vizsg&aacute;lni k&iacute;v&aacute;nt hiba &aacute;ltal
	    okozott &ouml;sszes hiba&uuml;zenetet.</para>
</listitem>

	<listitem>
	  <para>A <command>boot -v</command> paranccsal &eacute;s az
	    <acronym>ACPI</acronym> haszn&aacute;lata n&eacute;lk&uuml;l
	    ind&iacute;tott rendszer &man.dmesg.8; kimenete abban az
	    esetben, ha ez seg&iacute;t megoldani a
	    probl&eacute;m&aacute;t.</para>
	</listitem>

	<listitem>
	  <para>A <command>sysctl hw.acpi</command> parancs kimenete.
	    Ezzel egy&eacute;bk&eacute;nt kit&#251;n&#245;en
	    kider&iacute;thet&#245;, milyen lehet&#245;s&eacute;geket is
	    k&iacute;n&aacute;l fel a rendszer&uuml;nk.</para>
	</listitem>

	<listitem>
	  <para>Az &aacute;ltalunk haszn&aacute;lt
	    <firstterm><acronym>ACPI</acronym>
	    forr&aacute;snyelv&eacute;nek</firstterm>
	    (<acronym>ACPI</acronym> Source Language,
	    <acronym>ASL</acronym>) el&eacute;rhet&#245;s&eacute;ge az
	    interneten.  Mivel ezek ak&aacute;r igen nagyok is lehetnek,
	    ez&eacute;rt a list&aacute;ra k&ouml;zvetlen&uuml;l ne
	    k&uuml;ldj&uuml;nk <acronym>ASL</acronym> k&oacute;dokat!
	    Az <acronym>ASL</acronym> m&aacute;solat&aacute;t az
	    al&aacute;bbi parancs kiad&aacute;s&aacute;val hozhatjuk
	    l&eacute;tre:</para>

	  <screen>&prompt.root; <userinput>acpidump -dt &gt; <replaceable>n&eacute;v</replaceable>-<replaceable>rendszer</replaceable>.asl</userinput></screen>

	  <para>(Adjuk meg a <replaceable>n&eacute;v</replaceable>
	    helyett a bejelentkez&eacute;shez haszn&aacute;lt
	    nev&uuml;nket, a <replaceable>rendszer</replaceable> helyett
	    pedig a gy&aacute;rt&oacute;t/t&iacute;pust.
	    P&eacute;ld&aacute;ul:
	    <filename>njl-FooCo6000.asl</filename>)</para>
	</listitem>
      </itemizedlist>

      <para>Hab&aacute;r a legt&ouml;bb fejleszt&#245; a &a.current;t
	figyeli, a probl&eacute;m&aacute;ink
	le&iacute;r&aacute;s&aacute;t mindenk&eacute;ppen a
	&a.acpi.name; list&aacute;ra k&uuml;ldj&uuml;k, hogy biztosan
	&eacute;szrevegy&eacute;k.  A fejleszt&#245;k azt k&eacute;rik,
	hogy legy&uuml;nk t&uuml;relmesek, hiszen emellett mindannyian
	teljes &aacute;ll&aacute;sban is dolgoznak.  Ha az
	&aacute;ltalunk felfedezett hiba nem teljesen
	egy&eacute;rtelm&#251;, akkor a fejleszt&#245;k
	val&oacute;sz&iacute;n&#251;leg meg fognak k&eacute;rni arra,
	hogy a &man.send-pr.1; haszn&aacute;lat&aacute;val hozzunk
	r&oacute;la l&eacute;tre egy hivatalos hibajelent&eacute;st.  A
	hibajelent&eacute;s k&eacute;sz&iacute;t&eacute;sekor
	lehet&#245;leg a fentebb megadott inform&aacute;ci&oacute;kat
	ugyan&uacute;gy adjuk meg.  Ez seg&iacute;t a probl&eacute;ma
	szemmel tart&aacute;s&aacute;ban &eacute;s
	elh&aacute;r&iacute;t&aacute;s&aacute;ban.  Az &a.acpi.name;
	lista kihagy&aacute;sa n&eacute;lk&uuml;l k&ouml;zvetlen&uuml;l
	ne k&uuml;ldj&uuml;nk hibajelent&eacute;st, mivel a
	hibabejelent&#245; rendszert els&#245;sorban
	eml&eacute;keztet&#245;nek haszn&aacute;ljuk, nem pedig a
	hib&aacute;k t&eacute;nyleges bejelent&eacute;s&eacute;re.
	Gyakran el&#245;fordul, hogy valaki kor&aacute;bban m&aacute;r
	tal&aacute;lkozott az adott probl&eacute;m&aacute;val.</para>
    </sect2>

    <sect2 id="ACPI-background">
      <title>H&aacute;tt&eacute;r</title>

      <indexterm><primary>ACPI</primary></indexterm>

      <para>Az <acronym>ACPI</acronym> minden olyan modern
	sz&aacute;m&iacute;t&oacute;g&eacute;pben
	megtal&aacute;lhat&oacute;, mely megfelel az ia32 (x86), ia64
	(Itanium) vagy amd64 (AMD) architekt&uacute;r&aacute;nak.  A
	teljes szabv&aacute;ny rengeteg lehet&#245;s&eacute;get
	biztos&iacute;t, t&ouml;bbek k&ouml;zt a processzor
	teljes&iacute;tm&eacute;ny&eacute;nek kezel&eacute;s&eacute;t,
	az energiaszintek vez&eacute;rl&eacute;s&eacute;t,
	h&#245;z&oacute;n&aacute;kat, k&uuml;l&ouml;nf&eacute;le
	akkumul&aacute;tor rendszereket, be&aacute;gyazott
	vez&eacute;rl&#245;k &eacute;s a buszok
	felsorol&aacute;s&aacute;t.  A legt&ouml;bb rendszer
	&aacute;ltal&aacute;ban nem a teljes szabv&aacute;nyt
	val&oacute;s&iacute;tja meg.  P&eacute;ld&aacute;ul egy asztali
	rendszer &aacute;ltal&aacute;ban csak a buszok
	felsorol&aacute;s&aacute;val kapcsolatos r&eacute;szeket
	tartalmazza, mik&ouml;zben egy laptop felaj&aacute;nlhatja a
	h&#251;t&eacute;s &eacute;s az akkumul&aacute;tor
	kezel&eacute;s&eacute;t is.  A laptopokban gyakorta
	tal&aacute;lunk k&eacute;szenl&eacute;ti &uuml;zemm&oacute;dot a
	maguk elbonyol&iacute;tott form&aacute;j&aacute;ban.</para>

      <para>Egy <acronym>ACPI</acronym>-nak megfelel&#245; rendszert
	sz&aacute;mos &ouml;sszetev&#245; alkot.  A
	<acronym>BIOS</acronym>-ok &eacute;s chipk&eacute;szletek
	gy&aacute;rt&oacute;i a mem&oacute;ri&aacute;ban egy el&#245;re
	r&ouml;gz&iacute;tett ponton elhelyeznek bizonyos
	t&aacute;bl&aacute;zatokat (p&eacute;ld&aacute;ul
	<acronym>FADT</acronym>), amelyekkel megadj&aacute;k
	p&eacute;ld&aacute;ul az <acronym>APIC</acronym>
	&ouml;sszerendel&eacute;seit (ezt az <acronym>SMP</acronym>
	rendszerek haszn&aacute;lj&aacute;k), a
	konfigur&aacute;ci&oacute;s regisztereket &eacute;s az
	egyszer&#251;bb konfigur&aacute;ci&oacute;s
	&eacute;rt&eacute;keket.  Itt ezenk&iacute;v&uuml;l m&eacute;g
	bytek&oacute;dok egy t&aacute;bl&aacute;zata (amit
	<firstterm>Differenci&aacute;lt rendszerle&iacute;rt&oacute;
	t&aacute;bl&aacute;nak</firstterm>, Differentiated System
	Description Table, <acronym>DSDT</acronym> nevez&uuml;nk) is
	megtal&aacute;lhat&oacute;, ahol az eszk&ouml;z&ouml;k &eacute;s
	m&oacute;dszerek nevei szerepelnek faszer&#251;
	elrendez&eacute;sben.</para>

      <para>Az <acronym>ACPI</acronym>-hoz tartoz&oacute;
	meghajt&oacute;nak k&eacute;pesnek kell lennie &eacute;rtelmezni
	ezeket a r&ouml;gz&iacute;tett t&aacute;bl&aacute;zatokat,
	implement&aacute;lni egy bytek&oacute;d-&eacute;rtelmez&#245;t,
	m&oacute;dos&iacute;tani az eszk&ouml;zmeghajt&oacute;kat
	&eacute;s a rendszermagot az <acronym>ACPI</acronym>
	alrendszerb&#245;l &eacute;rkez&#245; inform&aacute;ci&oacute;k
	befogad&aacute;s&aacute;hoz.  A Linuxszal &eacute;s a NetBSD-vel
	k&ouml;z&ouml;sen a &os; kapott egy ilyen &eacute;rtelmez&#245;t
	az &intel;t&#245;l (<acronym>ACPI-CA</acronym>).  Az
	<acronym>ACPI-CA</acronym> forr&aacute;sk&oacute;dja a rendszer
	forr&aacute;sai k&ouml;z&ouml;tt, a <filename
	  class="directory">src/sys/dev/acpica</filename>
	k&ouml;nyvt&aacute;rban tal&aacute;lhat&oacute;.  A <filename
	  class="directory">src/sys/dev/acpica/0sd</filename>
	k&ouml;nyvt&aacute;rban tal&aacute;lhat&oacute; forr&aacute;sok
	pedig lehet&#245;v&eacute; teszik, hogy az
	<acronym>ACPI-CA</acronym> m&#251;k&ouml;dhessen &os;-n.
	V&eacute;gezet&uuml;l, az <acronym>ACPI</acronym>
	eszk&ouml;z&ouml;ket megval&oacute;s&iacute;t&oacute;
	meghajt&oacute;k a <filename
	  class="directory">src/sys/dev/acpica</filename>
	k&ouml;nyvt&aacute;rban tal&aacute;lhat&oacute;ak.</para>
    </sect2>

    <sect2 id="ACPI-comprob">
      <title>Gyakori probl&eacute;m&aacute;k</title>

      <indexterm>
	<primary>ACPI</primary>
	<secondary>probl&eacute;m&aacute;k</secondary>
      </indexterm>

      <para>Az <acronym>ACPI</acronym> megfelel&#245;
	m&#251;k&ouml;d&eacute;s&eacute;hez minden
	alkot&oacute;r&eacute;sznek helyesen kell m&#251;k&ouml;dnie.  A
	most k&ouml;vetkezend&#245;kben el&#245;fordul&aacute;suk
	gyakoris&aacute;ga szerint felsorolunk n&eacute;h&aacute;ny
	ismert probl&eacute;m&aacute;t, valamint a hozz&aacute;juk
	tartoz&oacute; jav&iacute;t&aacute;sokat vagy
	elker&uuml;l&eacute;s&uuml;k m&oacute;dszer&eacute;t.</para>

      <sect3>
	<title>Gondok az eg&eacute;rrel</title>

	<para>Egyes esetekben felf&uuml;ggesztett
	  &aacute;llapotb&oacute;l visszat&eacute;rve az eger&uuml;nk
	  nem hajland&oacute; m&#251;k&ouml;dni.  Ezt &uacute;gy lehet
	  elker&uuml;lni, ha <filename>/boot/loader.conf</filename>
	  &aacute;llom&aacute;nyba be&iacute;rjuk a
	  <literal>hint.psm.0.flags="0x3000"</literal> sort.  Ha ez nem
	  seg&iacute;t, akkor a fentieknek megfelel&#245;en
	  k&uuml;ldj&uuml;nk be egy hibajelent&eacute;st.</para>
      </sect3>

      <sect3>
	<title>Felf&uuml;ggeszt&eacute;s/Folytat&aacute;s</title>

	<para>Az <acronym>ACPI</acronym> h&aacute;rom
	  (<acronym>STR</acronym>) &aacute;llapotban k&eacute;pes a
	  fizikai mem&oacute;ria seg&iacute;ts&eacute;g&eacute;vel
	  k&eacute;szenl&eacute;ti m&oacute;dba v&aacute;ltani, ezek az
	  <literal>S1</literal>-<literal>S3</literal>, &eacute;s egy
	  &aacute;llapotban haszn&aacute;lja a lemezt
	  (<literal>STD</literal>), amelyet <literal>S4</literal>-nek
	  h&iacute;vnak.  Az <literal>S5</literal> neve a
	  <quote>szoftveres kikapcsol&aacute;s</quote>, ami egy olyan
	  &aacute;llapotot takar, amikor a rendszer&uuml;nk &aacute;ram
	  alatt van, de m&eacute;g nem &uuml;zemel.  Az
	  <literal>S4</literal><acronym>BIOS</acronym> &aacute;llapot a
	  <acronym>BIOS</acronym> seg&iacute;ts&eacute;g&eacute;vel a
	  lemezre menti a rendszert, az
	  <literal>S4</literal><acronym>OS</acronym> &aacute;llapotot
	  pedig teljes eg&eacute;sz&eacute;ben az
	  oper&aacute;ci&oacute;s rendszer val&oacute;s&iacute;tja
	  meg.</para>

	<para>A rendszer&uuml;nk &aacute;ltal ismert
	  k&eacute;szenl&eacute;ti m&oacute;dokat a <command>sysctl
	  hw.acpi</command> paranccsal ellen&#245;rizhetj&uuml;k.
	  &Iacute;me mindez egy Thinkpad eset&eacute;n:</para>

	<screen>hw.acpi.supported_sleep_state: S3 S4 S5
hw.acpi.s4bios: 0</screen>

	<para>Ez azt jelenti, hogy az <command>acpiconf -s</command>
	  parancs kiad&aacute;s&aacute;val kipr&oacute;b&aacute;lhatjuk
	  az <literal>S3</literal>,
	  <literal>S4</literal><acronym>OS</acronym>, &eacute;s
	  <literal>S5</literal> &aacute;llapotokat.  Ha az
	  <option>s4bios</option> &eacute;rt&eacute;ke egy
	  (<literal>1</literal>), akkor az
	  <literal>S4</literal><acronym>BIOS</acronym>
	  t&aacute;mogat&aacute;sa helyett az <literal>S4</literal>
	  <acronym>OS</acronym> &aacute;llapotot kapjuk.</para>

	<para>A felf&uuml;ggeszt&eacute;s &eacute;s folytat&aacute;s
	  kipr&oacute;b&aacute;l&aacute;sa sor&aacute;n kezdj&uuml;k az
	  <literal>S1</literal> &aacute;llapottal, m&aacute;r amennyiben
	  az t&aacute;mogatott a rendszer&uuml;nk&ouml;n.  Ez az
	  &aacute;llapot t&ouml;bbnyire haszn&aacute;lhat&oacute;, mivel
	  nem ig&eacute;nyel t&uacute;ls&aacute;gosan sok
	  t&aacute;mogat&aacute;st a meghajt&oacute;
	  r&eacute;sz&eacute;r&#245;l.  Eddig m&eacute;g senki sem
	  implement&aacute;lta az <literal>S2</literal>
	  &aacute;llapotot, de ha ezt is tudja a rendszer&uuml;nk, akkor
	  az <literal>S1</literal>-hez hasonl&oacute;t nyer&uuml;nk
	  vele.  A k&ouml;vetkez&#245; pr&oacute;ba az
	  <literal>S3</literal> &aacute;llapot&eacute;.  Ez a
	  legm&eacute;lyebb <acronym>STR</acronym> &aacute;llapot,
	  &eacute;s a hardver megfelel&#245;
	  &uacute;jra&eacute;leszt&eacute;s&eacute;hez rengeteg
	  t&aacute;mogat&aacute;s sz&uuml;ks&eacute;geltetik a
	  meghajt&oacute; r&eacute;sz&eacute;r&#245;l.  Ha gondjaink
	  lenn&eacute;nek a rendszer&uuml;nk
	  fel&eacute;breszt&eacute;s&eacute;vel, nyugodtan &iacute;rjunk
	  egy levelet a &a.acpi.name; list&aacute;ra, &aacute;m a
	  probl&eacute;ma gyors megold&oacute;d&aacute;s&aacute;ban ne
	  rem&eacute;nykedj&uuml;nk, hiszen ehhez m&eacute;g
	  tem&eacute;rdek meghajt&oacute;n &eacute;s hardveren kell
	  tesztelni &eacute;s kell dolgozni.</para>

	<para>Felf&uuml;ggeszt&eacute;s &eacute;s folytat&aacute;s
	  eset&eacute;n gyakori probl&eacute;ma, hogy sok
	  eszk&ouml;zmeghajt&oacute; nem menti el, nem
	  &aacute;ll&iacute;tja vissza vagy &eacute;ppen nem hozza
	  &uacute;jra rendesen m&#251;k&ouml;d&eacute;sbe az adott
	  eszk&ouml;z&ouml;n tal&aacute;lhat&oacute; firmware-t, a
	  regisztereket vagy mem&oacute;ri&aacute;t.  Az okok
	  felder&iacute;t&eacute;s&eacute;hez el&#245;sz&ouml;r
	  &eacute;rdemes a k&ouml;vetkez&#245;ket
	  kipr&oacute;b&aacute;lni:</para>

	<screen>&prompt.root; <userinput>sysctl debug.bootverbose=1</userinput>
&prompt.root; <userinput>sysctl debug.acpi.suspend_bounce=1</userinput>
&prompt.root; <userinput>acpiconf -s 3</userinput></screen>

	<para>Ezzel a m&oacute;dszerrel tesztelni tudjuk az &ouml;sszes
	  meghajt&oacute; felf&uuml;ggeszt&eacute;si &eacute;s
	  folytat&aacute;si rutinjait an&eacute;lk&uuml;l, hogy
	  t&eacute;nylegesen <literal>S3</literal> &aacute;llapotba
	  helyezn&eacute;nk az eszk&ouml;zt.  Bizonyos esetekben ezzel
	  k&ouml;nnyen elcs&iacute;phet&#245; a hiba
	  (p&eacute;ld&aacute;ul a firmware &aacute;llapot&aacute;nak
	  elveszt&eacute;se, watchdog time out, meg&aacute;ll&aacute;s
	  n&eacute;lk&uuml;li
	  &uacute;jrapr&oacute;b&aacute;lkoz&aacute;sok).  A rendszer
	  ilyenkor nem v&aacute;lt <literal>S3</literal>
	  &aacute;llapotra, vagyis az eszk&ouml;z nem ker&uuml;l
	  energiatakar&eacute;kos &aacute;llapotba, &eacute;s
	  elt&eacute;r&#245;en a val&oacute;s <literal>S3</literal>
	  &aacute;llapott&oacute;l tov&aacute;bbra is m&#251;k&ouml;dik
	  m&eacute;g abban az esetben is, amikor a sz&uuml;ks&eacute;ges
	  felf&uuml;ggeszt&eacute;si &eacute;s folytat&aacute;si rutinok
	  teljesen hi&aacute;nyoznak.</para>

	<para>Komolyabb esetben tov&aacute;bbi
	  seg&eacute;deszk&ouml;z&ouml;kre lesz
	  sz&uuml;ks&eacute;g&uuml;nk, vagyis soros portra &eacute;s
	  k&aacute;belre a soros vonali nyomk&ouml;vet&eacute;shez, vagy
	  Firewire portra &eacute;s k&aacute;belre a &man.dcons.4;
	  haszn&aacute;lat&aacute;hoz, valamint n&eacute;mi
	  tapasztalatra a rendszermagon bel&uuml;li
	  hibakeres&eacute;sben.</para>

	<para>A probl&eacute;m&aacute;t nagy m&eacute;rt&eacute;kben
	  seg&iacute;ti k&uuml;l&ouml;nv&aacute;lasztani, ha
	  igyeksz&uuml;nk min&eacute;l t&ouml;bb meghajt&oacute;t
	  kivenni a rendszermagb&oacute;l.  Ha &iacute;gy javul a
	  helyzet, akkor m&aacute;r k&ouml;nnyen le lehet
	  sz&#251;k&iacute;teni arra a meghajt&oacute;ra a k&ouml;rt,
	  aminek bet&ouml;lt&eacute;s&eacute;vel esetleg gondok
	  akadhatnak.  &Aacute;ltal&aacute;ban ilyenek a bin&aacute;ris
	  meghajt&oacute;k, mint p&eacute;ld&aacute;ul az
	  <filename>nvidia.ko</filename>, az X11
	  megjelen&iacute;t&eacute;s&eacute;rt felel&#245;s &eacute;s az
	  <acronym>USB</acronym> eszk&ouml;z&ouml;k meghajt&oacute;i,
	  mik&ouml;zben az Ethernet eszk&ouml;z&ouml;k remek&uuml;l
	  szoktak m&#251;k&ouml;dni.  Ha k&uuml;l&ouml;n&ouml;sebb gond
	  n&eacute;lk&uuml;l k&eacute;pesek vagyunk bet&ouml;lteni
	  &eacute;s elt&aacute;vol&iacute;tani ezeket a
	  meghajt&oacute;kat, akkor ezt a folyamatot
	  &ouml;n&aacute;ll&oacute;s&iacute;tani is tudjuk &uacute;gy,
	  hogy az <filename>/etc/rc.suspend</filename> &eacute;s
	  <filename>/etc/rc.resume</filename> szkriptekbe
	  beillesztj&uuml;k az ehhez sz&uuml;ks&eacute;ges parancsokat.
	  Ezekben egy&eacute;bk&eacute;nt tal&aacute;lunk is egy
	  megjegyz&eacute;sbe rakott p&eacute;ld&aacute;t a
	  meghajt&oacute;k bet&ouml;lt&eacute;s&eacute;r&#245;l
	  &eacute;s elt&aacute;vol&iacute;t&aacute;s&aacute;r&oacute;l.
	  Ha az &eacute;breszt&eacute;s ut&aacute;n elszemetel&#245;dik
	  a k&eacute;perny&#245; tartalma, akkor &aacute;ll&iacute;tsuk
	  &aacute;t a <option>hw.acpi.reset_video</option>
	  v&aacute;ltoz&oacute; &eacute;rt&eacute;k&eacute;t
	  null&aacute;ra (<literal>0</literal>).  Sokat seg&iacute;thet
	  meg az is, ha a <option>hw.acpi.sleep_delay</option>
	  &eacute;rt&eacute;k&eacute;t cs&ouml;kkentj&uuml;k vagy
	  n&ouml;velj&uuml;k.</para>

	<para>Megpr&oacute;b&aacute;lhatjuk azt is, hogy
	  elind&iacute;tunk egy frissebb Linux
	  disztrib&uacute;ci&oacute;t <acronym>ACPI</acronym>
	  t&aacute;mogat&aacute;ssal &eacute;s ugyanazon a hardveren
	  kipr&oacute;b&aacute;ljuk az &aacute;ltala
	  felk&iacute;n&aacute;lt felf&uuml;ggeszt&eacute;si &eacute;s
	  folytat&aacute;si lehet&#245;s&eacute;get.  Ha Linux alatt ez
	  megb&iacute;zhat&oacute;an m&#251;k&ouml;dik, akkor nagy a
	  val&oacute;sz&iacute;n&#251;s&eacute;ge, hogy ez &os; alatt az
	  egyik meghajt&oacute; hib&aacute;j&aacute;b&oacute;l
	  fakad&oacute;an nem haszn&aacute;lhat&oacute;.  &Iacute;gy
	  fokozatosan le is tudjuk sz&#251;k&iacute;teni, hogy pontosan
	  melyikkel lehet a gond, &eacute;s ezzel a fejleszt&#245;k
	  munk&aacute;j&aacute;t seg&iacute;tj&uuml;k.
	  Megjegyezn&eacute;nk, hogy az <acronym>ACPI</acronym>-t
	  karbantart&oacute; fejleszt&#245;k &aacute;ltal&aacute;ban nem
	  foglalkoznak m&aacute;s meghajt&oacute;kkal
	  (p&eacute;ld&aacute;ul hangk&aacute;rtya vagy
	  <acronym>ATA</acronym> stb.), ez&eacute;rt az adott
	  meghajt&oacute;val kapcsolatos hib&aacute;r&oacute;l javasolt
	  &eacute;rtes&iacute;teni a &a.current.name; list&aacute;t
	  &eacute;s a meghajt&oacute;&eacute;rt felel&#245;s
	  fejleszt&#245;t is.  Ha van egy kis kedv&uuml;nk &eacute;s
	  id&#245;nk, mi magunk is belebiggyeszthet&uuml;nk a
	  meghajt&oacute;ba n&eacute;h&aacute;ny &man.printf.3;
	  f&uuml;ggv&eacute;nyt annak kider&iacute;t&eacute;s&eacute;re,
	  pontosan hol is fagy le a folytat&aacute;si
	  funkci&oacute;.</para>

	<para>V&eacute;g&uuml;l megpr&oacute;b&aacute;lkozhatunk az
	  <acronym>ACPI</acronym> kikapcsol&aacute;s&aacute;val is,
	  &eacute;s &aacute;tt&eacute;rhet&uuml;nk helyette az
	  <acronym>APM</acronym> haszn&aacute;lat&aacute;ra.  Ha az
	  <acronym>APM</acronym>-mel m&#251;k&ouml;dnek a
	  k&eacute;szenl&eacute;ti &aacute;llapotok, akkor
	  &eacute;rdemes ink&aacute;bb azzal dolgozni,
	  k&uuml;l&ouml;n&ouml;sen a r&eacute;gebbi (2000 el&#245;tti)
	  hardverek eset&eacute;ben.  A gy&aacute;rt&oacute;knak
	  eltartott egy ideig, am&iacute;g rendes
	  <acronym>ACPI</acronym> t&aacute;mogat&aacute;st voltak
	  k&eacute;pesek adni, ez&eacute;rt a r&eacute;gebbi
	  hardverekn&eacute;l ink&aacute;bb a
	  <acronym>BIOS</acronym>-nak akadnak gondjai az
	  <acronym>ACPI</acronym>-val.</para>
      </sect3>

      <sect3>
	<title>A rendszer lemerevedik (ideiglenesen vagy
	  teljesen)</title>

	<para>A legt&ouml;bb rendszer olyankor akad meg, amikor sok
	  megszak&iacute;t&aacute;s elveszik, vagy amikor &eacute;ppen
	  sok megszak&iacute;t&aacute;s &eacute;rkezik egyszerre.  A
	  chipk&eacute;szleteknek sz&aacute;mos baja sz&aacute;rmazik
	  abb&oacute;l, hogy a <acronym>BIOS</acronym> milyen
	  m&oacute;don &aacute;ll&iacute;tja be a rendszer
	  ind&iacute;t&aacute;sa el&#245;tt a
	  megszak&iacute;t&aacute;sokat, mennyire helyes az
	  <acronym>APIC</acronym> (<acronym>MADT</acronym>)
	  t&aacute;bl&aacute;zata &eacute;s hogyan vez&eacute;rli a
	  <firstterm>Rendszervez&eacute;rl&#245;
	  megszak&iacute;t&aacute;st</firstterm> (System Control
	  Interrupt, <acronym>SCI</acronym>).</para>

	<indexterm><primary>megszak&iacute;t&aacute;s-viharok</primary></indexterm>

	<para>A megszak&iacute;t&aacute;s-viharok a <command>vmstat
	  -i</command> parancs kimenet&eacute;ben szerepl&#245;
	  elveszett megszak&iacute;t&aacute;sokb&oacute;l
	  azonos&iacute;that&oacute;k be, ahol keress&uuml;nk r&aacute;
	  az <literal>acpi0</literal> sorra.  Ha ez a
	  sz&aacute;ml&aacute;l&oacute; m&aacute;sodpercenk&eacute;nt
	  kett&#245;n&eacute;l t&ouml;bbel n&ouml;vekszik, akkor a
	  megszak&iacute;t&aacute;saink viharba keveredtek.  Ha a
	  rendszer l&aacute;tsz&oacute;lag lefagyott,
	  pr&oacute;b&aacute;ljuk meg el&#245;h&iacute;vni a
	  <acronym>DDB</acronym>-t (konzolban a <keycombo
	  action="simul">
	  <keycap>CTRL</keycap><keycap>ALT</keycap><keycap>ESC</keycap>
	  </keycombo>) &eacute;s g&eacute;pelj&uuml;k be, hogy
	  <literal>show interrupts</literal>.</para>

	<indexterm>
	  <primary>APIC</primary>
	  <secondary>kikapcsol&aacute;sa</secondary>
	</indexterm>

	<para>A megszak&iacute;t&aacute;si probl&eacute;m&aacute;kkal
	  kapcsolatban egyetlen rem&eacute;ny&uuml;nk az
	  <acronym>APIC</acronym> t&aacute;mogat&aacute;s
	  kikapcsol&aacute;sa lehet a <filename>loader.conf</filename>
	  &aacute;llom&aacute;nyban a
	  <literal>hint.apic.0.disabled="1"</literal> sor
	  hozz&aacute;ad&aacute;s&aacute;val.</para>
      </sect3>

      <sect3>
	<title>V&eacute;gzetes hib&aacute;k</title>

	<para>Az <acronym>ACPI</acronym>-vel kapcsolatos v&eacute;gzetes
	  hib&aacute;k viszonylag ritk&aacute;k, &eacute;s
	  jav&iacute;t&aacute;suk a legfontosabb.  Ilyenkor az els&#245;
	  teend&#245;nk elk&uuml;l&ouml;n&iacute;teni a hiba
	  reproduk&aacute;l&aacute;s&aacute;nak egyes
	  l&eacute;p&eacute;seit &eacute;s (ha lehets&eacute;ges)
	  lek&eacute;rni a h&iacute;v&aacute;si l&aacute;ncot.
	  K&ouml;vess&uuml;k az <literal>options DDB</literal> &eacute;s
	  a soros vonali konzol
	  be&aacute;ll&iacute;t&aacute;s&aacute;hoz adott
	  tan&aacute;csokat (l&aacute;sd <xref
	  linkend="serialconsole-ddb">) vagy hozzunk l&eacute;tre egy
	  &man.dump.8; part&iacute;ci&oacute;t.  A
	  <acronym>DDB</acronym>-ben a h&iacute;v&aacute;si
	  l&aacute;ncot a <literal>tr</literal> parancs
	  seg&iacute;ts&eacute;g&eacute;vel k&eacute;rhetj&uuml;k le.
	  Ha k&eacute;zzel &iacute;rjuk le l&aacute;ncot, akkor
	  legal&aacute;bb az als&oacute; &ouml;t (5) &eacute;s a
	  fels&#245; &ouml;t (5) sor&aacute;t mindenk&eacute;ppen
	  jegyezz&uuml;k fel!</para>

	<para>Ezut&aacute;n pr&oacute;b&aacute;ljuk meg &uacute;gy
	  sz&#251;k&iacute;teni a probl&eacute;ma
	  lehet&#245;s&eacute;g&eacute;t, hogy az
	  <acronym>ACPI</acronym> haszn&aacute;lata n&eacute;lk&uuml;l
	  ind&iacute;tjuk a rendszert.  Ha ezzel nincs semmi gond, akkor
	  a <option>debug.acpi.disable</option> v&aacute;ltoz&oacute;
	  &eacute;rt&eacute;k&eacute;nek megfelel&#245;
	  be&aacute;ll&iacute;t&aacute;s&aacute;val egyenk&eacute;nt meg
	  tudjuk figyelni az <acronym>ACPI</acronym> alrendszer egyes
	  r&eacute;szeit.  Ehhez p&eacute;ld&aacute;kat az &man.acpi.4;
	  man oldalon tal&aacute;lunk.</para>
      </sect3>

      <sect3>
	<title>Felf&uuml;ggeszt&eacute;s vagy
	  le&aacute;ll&iacute;t&aacute;s ut&aacute;n elindul a
	  rendszer</title>

	<para>El&#245;sz&ouml;r is pr&oacute;b&aacute;ljuk meg a
	  <literal>hw.acpi.disable_on_poweroff</literal>
	  v&aacute;ltoz&oacute; &eacute;rt&eacute;k&eacute;t
	  <literal>0</literal>-ra &aacute;ll&iacute;tani a
	  &man.loader.conf.5; &aacute;llom&aacute;nyban.  Ezzel
	  t&aacute;voltartjuk az <acronym>ACPI</acronym> alrendszert a
	  rendszer le&aacute;ll&iacute;t&aacute;si
	  folyamat&aacute;t&oacute;l.  Egyes rendszereknek valamilyen
	  okb&oacute;l kifoly&oacute;lag sz&uuml;ks&eacute;g&uuml;k van
	  itt az <literal>1</literal> (az alap&eacute;rtelmezett)
	  &eacute;rt&eacute;kre.  Ez t&ouml;bbnyire megoldja a
	  probl&eacute;m&aacute;t, amikor a rendszer v&aacute;ratlanul
	  elindul a k&eacute;szenl&eacute;ti m&oacute;d
	  aktiv&aacute;l&aacute;s&aacute;kor vagy
	  kikapcsol&aacute;skor.</para>
      </sect3>

      <sect3>
	<title>Egy&eacute;b probl&eacute;m&aacute;k</title>

	<para>Ha m&aacute;s gondjaink lenn&eacute;nek az
	  <acronym>ACPI</acronym>-val (dokkol&oacute;
	  &aacute;llom&aacute;sunk van, egyes eszk&ouml;z&ouml;ket nem
	  vesz &eacute;szre stb.), akkor term&eacute;szetesen err&#245;l
	  is k&uuml;ldj&uuml;nk egy le&iacute;r&aacute;st a
	  levelez&eacute;si list&aacute;ra.  Azonban vegy&uuml;k
	  figyelembe, hogy egyes probl&eacute;m&aacute;k a
	  <acronym>ACPI</acronym> alrendszer eddig m&eacute;g nem
	  implement&aacute;lt, befejezetlen r&eacute;szeihez
	  k&ouml;t&#245;dnek, ez&eacute;rt azok megold&aacute;sa
	  m&eacute;g v&aacute;rat mag&aacute;ra.  K&eacute;r&uuml;nk
	  mindenkit, hogy legyen t&uuml;relemmel &eacute;s &aacute;lljon
	  k&eacute;szen a kik&uuml;ld&ouml;tt jav&iacute;t&aacute;sok
	  tesztel&eacute;s&eacute;re!</para>
      </sect3>
    </sect2>

    <sect2 id="ACPI-aslanddump">
      <title><acronym>ASL</acronym>, <command>acpidump</command>
	&eacute;s <acronym>IASL</acronym></title>

      <indexterm>
	<primary>ACPI</primary>
	<secondary>ASL</secondary>
      </indexterm>

      <para>A probl&eacute;m&aacute;k leggyakoribb forr&aacute;sa, hogy
	a <acronym>BIOS</acronym>-gy&aacute;rt&oacute;k rossz (vagy
	kifejezetten hib&aacute;s!) bytek&oacute;dokat adnak.  Ez
	&aacute;ltal&aacute;ban a k&ouml;vetkez&#245;h&ouml;z
	hasonl&oacute; rendszer&uuml;zenetb&#245;l der&uuml;l ki:</para>

      <screen>ACPI-1287: *** Error: Method execution failed [\\_SB_.PCI0.LPC0.FIGD._STA] \\
(Node 0xc3f6d160), AE_NOT_FOUND</screen>

      <para>Az ilyen jelleg&#251; hib&aacute;kat gyakran &uacute;gy
	lehet orvosolni, ha a <acronym>BIOS</acronym>-unkat
	friss&iacute;tj&uuml;k a leg&uacute;jabb verzi&oacute;ra.  A
	legt&ouml;bb ilyen &uuml;zenet teljesen &aacute;rtalmatlan, de
	ha vannak m&aacute;s probl&eacute;m&aacute;ink is,
	p&eacute;ld&aacute;ul az akkumul&aacute;tor &aacute;llapota nem
	olvashat&oacute; le, akkor el&#245;sz&ouml;r az
	<acronym>AML</acronym> k&ouml;rny&eacute;k&eacute;n
	&eacute;rdemes kutakodnunk.  A bytek&oacute;d, m&aacute;s
	n&eacute;ven <acronym>AML</acronym>, az <acronym>ASL</acronym>
	elnevez&eacute;s&#251; forr&aacute;snyelvb&#245;l
	sz&aacute;rmazik.  Az <acronym>AML</acronym> egy
	<acronym>DSDT</acronym> n&eacute;ven ismert
	t&aacute;bl&aacute;zatban tal&aacute;lhat&oacute; meg.  Az
	<acronym>ASL</acronym> m&aacute;solat&aacute;t az
	&man.acpidump.8; paranccsal k&eacute;sz&iacute;thetj&uuml;k el.
	Param&eacute;terk&eacute;nt egyar&aacute;nt adjuk meg a
	<option>-t</option> (megmutatja a r&ouml;gz&iacute;tett
	t&aacute;bl&aacute;k tartalm&aacute;t) &eacute;s
	<option>-d</option> (visszafejti az <acronym>AML</acronym>
	k&oacute;dokat az <acronym>ASL</acronym> nyelv&eacute;re)
	kapcsol&oacute;kat.  A fel&iacute;r&aacute;s pontos
	form&aacute;tum&aacute;t a <link linkend="ACPI-submitdebug">A
	nyomk&ouml;vet&eacute;si inform&aacute;ci&oacute;k
	bek&uuml;ld&eacute;se</link> c&iacute;m&#251; szakaszban
	olvashatjuk.</para>

      <para>Els&#245;k&eacute;nt pr&oacute;b&aacute;ljuk meg
	&uacute;jraford&iacute;tani az &iacute;gy nyert
	<acronym>ASL</acronym> programot &eacute;s keress&uuml;nk benne
	hib&aacute;kat.  A figyelmeztet&eacute;sek
	&aacute;ltal&aacute;ban nyugodtan figyelmen k&iacute;v&uuml;l
	hagyhat&oacute;ak, azonban a hib&aacute;k olyan
	implement&aacute;ci&oacute;s hib&aacute;kra utalnak, amelyek
	akad&aacute;lyozz&aacute;k az <acronym>ACPI</acronym> helyes
	m&#251;k&ouml;d&eacute;s&eacute;t.  Az <acronym>ASL</acronym>
	&uacute;jraford&iacute;t&aacute;s&aacute;t az al&aacute;bbi
	paranccsal tudjuk elv&eacute;gezni:</para>

      <screen>&prompt.root; <userinput>iasl <replaceable>saj&aacute;t.asl</replaceable></userinput></screen>
    </sect2>

    <sect2 id="ACPI-fixasl">
      <title>Az <acronym>ASL</acronym> kijav&iacute;t&aacute;sa</title>

      <indexterm>
	<primary>ACPI</primary>
	<secondary>ASL</secondary>
      </indexterm>

      <para>V&eacute;geredm&eacute;nyben az a c&eacute;lunk, hogy az
	<acronym>ACPI</acronym> megfelel&#245;
	m&#251;k&ouml;d&eacute;s&eacute;hez senkinek se kelljen
	hozz&aacute;ny&uacute;lnia semmihez.  Azonban m&eacute;g mindig
	sz&uuml;ks&eacute;g van
	<acronym>BIOS</acronym>-gy&aacute;rt&oacute;k &aacute;ltal
	elk&ouml;vetett gyakori hib&aacute;k
	elker&uuml;l&eacute;s&eacute;nek kifejleszt&eacute;s&eacute;re.
	A &microsoft; &eacute;rtelmez&#245;je
	(<filename>acpi.sys</filename> &eacute;s
	<filename>acpiec.sys</filename>) nem ellen&#245;rzi
	szigor&uacute;an a szabv&aacute;ny szerinti megfelel&eacute;st,
	ez&eacute;rt sz&aacute;mos olyan
	<acronym>BIOS</acronym>-gy&aacute;rt&oacute;, akik csak
	&windows; alatt tesztelik az <acronym>ACPI</acronym>
	implement&aacute;ci&oacute;jukat, soha nem fogj&aacute;k
	kijav&iacute;tani a <acronym>ASL</acronym> k&oacute;djukban
	ejtett hib&aacute;ikat.  Rem&eacute;nyked&uuml;nk, hogy
	folyamatosan siker&uuml;l felder&iacute;teni &eacute;s
	dokument&aacute;lni a &microsoft; &eacute;rtelmez&#245;je
	&aacute;ltal elt&#251;rt szabv&aacute;nyon k&iacute;v&uuml;li
	viselked&eacute;st &eacute;s leut&aacute;nozni &os; alatt is,
	hogy &iacute;gy ne kelljen a felhaszn&aacute;l&oacute;knak
	k&eacute;zzel a saj&aacute;t <acronym>ASL</acronym>
	forr&aacute;saikat jav&iacute;tgatni.  Az ebb&#245;l
	fakad&oacute; hib&aacute;kat &uacute;gy tudjuk elker&uuml;lni
	&eacute;s seg&iacute;teni a fejleszt&#245;knek
	azonos&iacute;tani a hozz&aacute; t&aacute;rsul&oacute;
	viselked&eacute;st, hogy magunk jav&iacute;tjuk az
	<acronym>ASL</acronym>-ben felfedezett hib&aacute;kat.  Ha ez
	bev&aacute;lik, akkor k&uuml;ldj&uuml;k el a r&eacute;gi
	&eacute;s &uacute;j <acronym>ASL</acronym> k&ouml;zti
	&man.diff.1;-et a fejleszt&#245;knek, akik &iacute;gy majd az
	<acronym>ACPI-CA</acronym>-ban ki tudnak dolgozni egy
	megold&aacute;st a hib&aacute;s viselked&eacute;sre, ezzel a
	jav&iacute;t&aacute;sunk sz&uuml;ks&eacute;gtelenn&eacute;
	v&aacute;lik.</para>

      <indexterm>
	<primary>ACPI</primary>
	<secondary>hiba&uuml;zenetek</secondary>
      </indexterm>

      <para>Most pedig k&ouml;vetkezzenek a legismertebb
	hiba&uuml;zenetek, az okaik &eacute;s
	jav&iacute;t&aacute;suk:</para>

      <sect3>
	<title>Oper&aacute;ci&oacute;s rendszeri
	  f&uuml;gg&#245;s&eacute;gek</title>

	<para>N&eacute;h&aacute;ny <acronym>AML</acronym> &uacute;gy
	  gondolja, hogy a vil&aacute;g csak a
	  k&uuml;l&ouml;nb&ouml;z&#245; &windows;
	  verzi&oacute;kb&oacute;l &aacute;ll.  A &os;-nek
	  megadhat&oacute;, hogy m&aacute;sik oper&aacute;ci&oacute;s
	  rendszernek adja ki mag&aacute;t, &eacute;s ezzel tal&aacute;n
	  meg is sz&uuml;ntethet&#245; p&aacute;r hiba.  Ezt a
	  legegyszer&#251;bb &uacute;gy tudjuk megtenni, ha a
	  <filename>/boot/loader.conf</filename>
	  &aacute;llom&aacute;nyhoz hozz&aacute;f&#251;zz&uuml;k a
	  <literal>hw.acpi.osname="Windows 2001"</literal> sort, vagy
	  itt egy olyan karakterl&aacute;ncot adunk meg, amit az
	  <acronym>ASL</acronym> forr&aacute;sban l&aacute;ttunk.</para>
      </sect3>

      <sect3>
	<title>Hi&aacute;nyz&oacute; visszat&eacute;r&eacute;si
	  &eacute;rt&eacute;k</title>

	<para>Bizonyos m&oacute;dszerek a szabv&aacute;ny szerint
	  elv&aacute;rtakt&oacute;l elt&eacute;r&#245;en nem adnak
	  vissza explicit m&oacute;don &eacute;rt&eacute;ket.  Mivel az
	  <acronym>ACPI-CA</acronym> ezt nem kezeli le, ez&eacute;rt a
	  &os; r&eacute;sz&eacute;r&#245;l tartalmaz egy olyan
	  m&oacute;dos&iacute;t&aacute;st, amivel implicit m&oacute;don
	  is vissza lehet adni &eacute;rt&eacute;ket.  Ha biztosak
	  akarunk lenni a visszaadni k&iacute;v&aacute;nt
	  &eacute;rt&eacute;kben, akkor helyezz&uuml;nk el a
	  megfelel&#245; helyekre explicit Return
	  utas&iacute;t&aacute;sokat.  Az <command>iasl</command> a
	  <option>-f</option> param&eacute;terrel
	  k&eacute;nyszer&iacute;thet&#245; az ilyen
	  <acronym>ASL</acronym> forr&aacute;sok
	  leford&iacute;t&aacute;s&aacute;ra.</para>
      </sect3>

      <sect3>
	<title>Az alap&eacute;rtelmezett <acronym>AML</acronym>
	  fel&uuml;lb&iacute;r&aacute;l&aacute;sa</title>

	<para>Miut&aacute;n m&oacute;dos&iacute;tottuk a
	  <filename><replaceable>saj&aacute;t.asl</replaceable></filename>
	  &aacute;llom&aacute;nyunkat, &iacute;gy tudjuk
	  leford&iacute;tani:</para>

	<screen>&prompt.root; <userinput>iasl <replaceable>saj&aacute;t.asl</replaceable></userinput></screen>

	<para>Az <option>-f</option> kapcsol&oacute;
	  megad&aacute;s&aacute;val
	  kik&eacute;nyszer&iacute;thetj&uuml;k az
	  <acronym>AML</acronym> l&eacute;trehoz&aacute;s&aacute;t
	  m&eacute;g abban az esetben is, amikor hib&aacute;kat
	  tartalmaz.  &Uuml;gyelj&uuml;nk r&aacute;, hogy bizonyos
	  hib&aacute;kat (p&eacute;ld&aacute;ul a hi&aacute;nyz&oacute;
	  visszat&eacute;r&eacute;si &eacute;rt&eacute;keket) a
	  ford&iacute;t&oacute; mag&aacute;t&oacute;l
	  kiker&uuml;l.</para>

	<para>Az <command>iasl</command> alap&eacute;rtelmezett kimenete
	  a <filename>DSDT.aml</filename> &aacute;llom&aacute;ny.  A
	  <filename>/boot/loader.conf</filename>
	  &aacute;t&iacute;r&aacute;s&aacute;val &iacute;gy tudjuk ezzel
	  helyettes&iacute;teni a <acronym>BIOS</acronym>-unk
	  hib&aacute;s v&aacute;ltozat&aacute;t (ami m&eacute;g mindig
	  megtal&aacute;lhat&oacute; a flash
	  mem&oacute;ri&aacute;ban):</para>

	<programlisting>acpi_dsdt_load="YES"
acpi_dsdt_name="/boot/DSDT.aml"</programlisting>

	<para>Ehhez ne felejts&uuml;k el a saj&aacute;t
	  <filename>DSDT.aml</filename> &aacute;llom&aacute;nyunkat
	  bem&aacute;solni a <filename
	    class="directory">/boot</filename>
	  k&ouml;nyvt&aacute;rba.</para>
      </sect3>
    </sect2>

    <sect2 id="ACPI-debugoutput">
      <title>Nyomk&ouml;vet&eacute;si inform&aacute;ci&oacute;k
	kinyer&eacute;se az <acronym>ACPI</acronym>-b&#245;l</title>

      <indexterm>
	<primary>ACPI</primary>
	<secondary>probl&eacute;m&aacute;k</secondary>
      </indexterm>

      <indexterm>
	<primary>ACPI</primary>
	<secondary>nyomk&ouml;vet&eacute;s</secondary>
      </indexterm>

      <para>Az <acronym>ACPI</acronym> meghajt&oacute;ja nagyon rugalmas
	nyomk&ouml;vet&eacute;si lehet&#245;s&eacute;gekkel rendelkezik.
	Ennek r&eacute;v&eacute;n ugyan&uacute;gy megadhatjuk a
	nyomonk&ouml;vetni k&iacute;v&aacute;nt alrendszert, mint ahogy
	annak m&eacute;lys&eacute;g&eacute;t is.  A nyomk&ouml;vetni
	k&iacute;v&aacute;nt alrendszereket
	<quote>r&eacute;tegekk&eacute;nt</quote> adjuk meg, valamint
	ezek <acronym>ACPI-CA</acronym> komponensekre
	(ACPI_ALL_COMPONENTS) &eacute;s <acronym>ACPI</acronym>
	hardvert&aacute;mogat&aacute;sra (ACPI_ALL_DRIVERS) bomlanak le.
	A nyomk&ouml;vet&eacute;skor keletkez&#245; kimenet
	r&eacute;szletess&eacute;g&eacute;t a
	<quote>szintk&eacute;nt</quote> adjuk meg, ami az
	ACPI_LV_ERROR-t&oacute;l (csak a hib&aacute;k)
	ACPI_LV_VERBOSE-ig (minden) terjedhet.  A <quote>szint</quote>
	itt egy bitmaszk, ez&eacute;rt sz&oacute;k&ouml;zzel
	elv&aacute;lasztva egyszerre t&ouml;bb
	be&aacute;ll&iacute;t&aacute;s megadhat&oacute;.  Ha
	t&uacute;ls&aacute;gosan sok &uuml;zenet &eacute;rkezik a konzol
	&uuml;zenetpuffer&eacute;be, akkor sz&uuml;ks&eacute;g&uuml;nk
	lehet a soros konzol kereszt&uuml;li nyomk&ouml;vet&eacute;sre
	is.  Az &ouml;sszes szint &eacute;s r&eacute;teg az &man.acpi.4;
	man oldalon tal&aacute;lhat&oacute; meg.</para>

      <para>A nyomk&ouml;vet&eacute;s alap&eacute;rtelmez&eacute;s
	szerint nem enged&eacute;lyezett.  Az
	enged&eacute;lyez&eacute;s&eacute;hez hozz&aacute; kell adnunk
	az <literal>options ACPI_DEBUG</literal> sort a rendszermagunk
	be&aacute;ll&iacute;t&aacute;sait tartalmaz&oacute;
	&aacute;llom&aacute;nyhoz, amennyiben a rendszermagba
	ford&iacute;tjuk az <acronym>ACPI</acronym>
	t&aacute;mogat&aacute;st.  Ha az
	<filename>/etc/make.conf</filename> &aacute;llom&aacute;nyba
	&iacute;rjuk bele az <literal>ACPI_DEBUG=1</literal> sort, akkor
	azt glob&aacute;lisan enged&eacute;lyezhetj&uuml;k.  Ha
	modulk&eacute;nt haszn&aacute;ljuk, elegend&#245; csak a
	k&ouml;vetkez&#245; m&oacute;don &uacute;jraford&iacute;tani az
	<filename>acpi.ko</filename> modult:</para>

      <screen>&prompt.root; <userinput>cd /sys/modules/acpi/acpi
&amp;&amp; make clean &amp;&amp;
make ACPI_DEBUG=1</userinput></screen>

      <para>Telep&iacute;ts&uuml;k fel a <filename>acpi.ko</filename>
	modult a <filename class="directory">/boot/kernel</filename>
	k&ouml;nyvt&aacute;rba &eacute;s &aacute;ll&iacute;tsuk be a
	sz&aacute;munkra megfelel&#245; szintet &eacute;s r&eacute;teget
	a <filename>loader.conf</filename> &aacute;llom&aacute;nyban.
	Az al&aacute;bbi p&eacute;ld&aacute;ban
	enged&eacute;lyezz&uuml;k az &ouml;sszes
	<acronym>ACPI-CA</acronym> komponens &eacute;s az &ouml;sszes
	<acronym>ACPI</acronym> hardvermeghajt&oacute; (processzor,
	<acronym>LID</acronym> stb.) nyomk&ouml;vet&eacute;s&eacute;t.
	Csak a hiba&uuml;zeneteket &iacute;rja ki
	r&eacute;szletesen.</para>

      <programlisting>debug.acpi.layer="ACPI_ALL_COMPONENTS ACPI_ALL_DRIVERS"
debug.acpi.level="ACPI_LV_ERROR"</programlisting>

      <para>Ha az &aacute;ltalunk keresett inform&aacute;ci&oacute;t egy
	adott esem&eacute;ny v&aacute;ltja ki (p&eacute;ld&aacute;ul egy
	felf&uuml;ggeszt&eacute;s vagy egy &eacute;breszt&eacute;s),
	akkor nem is fontos &aacute;t&iacute;rnunk hozz&aacute; a
	<filename>loader.conf</filename> &aacute;llom&aacute;nyt, hanem
	helyette a rendszer ind&iacute;t&aacute;sa ut&aacute;n
	haszn&aacute;ljuk a <command>sysctl</command> parancsot a
	r&eacute;teg &eacute;s a szint megad&aacute;s&aacute;ra akkor,
	amikor a rendszert felk&eacute;sz&iacute;tj&uuml;k az
	esem&eacute;nyre.  A <command>sysctl</command>
	v&aacute;ltoz&oacute;kat ugyan&uacute;gy nevezt&eacute;k el,
	mint a <filename>loader.conf</filename>
	&aacute;llom&aacute;nyban tal&aacute;lhat&oacute;
	be&aacute;ll&iacute;t&aacute;sokat.</para>
    </sect2>

    <sect2 id="ACPI-References">
      <title>Hivatkoz&aacute;sok</title>

      <para>Az <acronym>ACPI</acronym>-r&#245;l az al&aacute;bbi
	helyeken tal&aacute;lunk r&eacute;szletesebb
	inform&aacute;ci&oacute;kat:</para>

      <itemizedlist>
	<listitem>
	  <para>A &a.acpi;</para>
	</listitem>

	<listitem>
	  <para>Az <acronym>ACPI</acronym> levelez&eacute;si lista
	    arch&iacute;vuma: <ulink
	    url="http://lists.freebsd.org/pipermail/freebsd-acpi/"></ulink></para>
	</listitem>

	<listitem>
	  <para>A kor&aacute;bbi <acronym>ACPI</acronym>
	    levelez&eacute;si lista arch&iacute;vuma: <ulink
	    url="http://home.jp.FreeBSD.org/mail-list/acpi-jp/"></ulink></para>
	</listitem>

	<listitem>
	  <para>Az <acronym>ACPI</acronym> 2.0
	    specifik&aacute;ci&oacute;ja: <ulink
	    url="http://acpi.info/spec.htm"></ulink></para>
	</listitem>

	<listitem>
	  <para>A &os; k&ouml;vetkez&#245; man oldalai: &man.acpi.4;,
	    &man.acpi.thermal.4;, &man.acpidump.8;, &man.iasl.8;,
	    &man.acpidb.8;</para>
	</listitem>

	<listitem>
	  <para><ulink
	    url="http://www.cpqlinux.com/acpi-howto.html#fix_broken_dsdt">
	    A <acronym>DSDT</acronym> nyomk&ouml;vet&eacute;se
	    (angolul)</ulink>.  (P&eacute;ld&aacute;nak a Compaqot hozza
	    fel, de &aacute;ltal&aacute;noss&aacute;gban v&eacute;ve
	    hasznos.)</para>
	</listitem>
      </itemizedlist>
    </sect2>
  </sect1>
</chapter>

<!--
     Local Variables:
     mode: sgml
     sgml-declaration: "../chapter.decl"
     sgml-indent-data: t
     sgml-omittag: nil
     sgml-always-quote-attributes: t
     sgml-parent-document: ("../book.sgml" "part" "chapter")
     End:
-->
