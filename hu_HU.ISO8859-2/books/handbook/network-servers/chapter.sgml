<!--
     The FreeBSD Documentation Project

     $FreeBSD$
-->

<!-- The FreeBSD Hungarian Documentation Project
     Translated by: PALI, Gabor <pgj@FreeBSD.org>
     %SOURCE%	en_US.ISO8859-1/books/handbook/network-servers/chapter.sgml
     %SRCID%	1.113
-->

<chapter id="network-servers" lang="hu">
  <chapterinfo>
    <authorgroup>
      <author>
	<firstname>Murray</firstname>
	<surname>Stokely</surname>
	<contrib>&Aacute;tdolgozta: </contrib>
      </author>
    </authorgroup>
  </chapterinfo>

  <title>H&aacute;l&oacute;zati szerverek</title>

  <sect1 id="network-servers-synopsis">
    <title>&Aacute;ttekint&eacute;s</title>

    <para>Ebben a fejezetben a &unix; t&iacute;pus&uacute; rendszerekben
      leggyakrabban alkalmazott h&aacute;l&oacute;zati
      szolg&aacute;ltat&aacute;sok k&ouml;z&uuml;l fogunk
      n&eacute;h&aacute;nyat bemutatni.  Ennek sor&aacute;n
      megismerj&uuml;k a h&aacute;l&oacute;zati
      szolg&aacute;ltat&aacute;sok k&uuml;l&ouml;nb&ouml;z&#245;
      t&iacute;pusainak telep&iacute;t&eacute;s&eacute;t,
      be&aacute;ll&iacute;t&aacute;s&aacute;t, tesztel&eacute;s&eacute;t
      &eacute;s karbantart&aacute;s&aacute;t.  A fejezet
      tartalm&aacute;t folyamatosan p&eacute;ld&aacute;kkal
      igyeksz&uuml;nk illusztr&aacute;lni.</para>

    <para>A fejezet elolvas&aacute;sa sor&aacute;n
      megismerj&uuml;k:</para>

    <itemizedlist>

      <listitem>
	<para>hogyan dolgozzunk az <application>inetd</application>
	  d&eacute;monnal;</para>
      </listitem>

      <listitem>
	<para>hogyan &aacute;ll&iacute;tsuk be a h&aacute;l&oacute;zati
	  &aacute;llom&aacute;nyrendszereket;</para>
      </listitem>

      <listitem>
	<para>hogyan &aacute;ll&iacute;tsunk be egy
	  h&aacute;l&oacute;zati inform&aacute;ci&oacute;s szervert a
	  felhaszn&aacute;l&oacute;i hozz&aacute;f&eacute;r&eacute;sek
	  megoszt&aacute;s&aacute;ra;</para>
      </listitem>

      <listitem>
	<para>hogyan &aacute;ll&iacute;tsuk be automatikusan a
	  h&aacute;l&oacute;zati
	  hozz&aacute;f&eacute;r&eacute;s&uuml;nket a DHCP
	  haszn&aacute;lat&aacute;val;</para>
      </listitem>

      <listitem>
	<para>hogyan &aacute;ll&iacute;tsunk be n&eacute;vfelold&oacute;
	  szervereket;</para>
      </listitem>

      <listitem>
	<para>hogyan &aacute;ll&iacute;tsuk be az
	  <application>Apache</application> webszervert;</para>
      </listitem>

      <listitem>
	<para>hogyan &aacute;ll&iacute;tsuk be az
	  &aacute;llom&aacute;nyok &aacute;tvitel&eacute;&eacute;rt
	  felel&#245;s (FTP) szervert;</para>
      </listitem>

      <listitem>
	<para>a <application>Samba</application>
	  haszn&aacute;lat&aacute;val hogyan &aacute;ll&iacute;tsunk be
	  &windows;-os kliensek sz&aacute;m&aacute;ra
	  &aacute;llom&aacute;ny- &eacute;s
	  nyomtat&oacute;szervert;</para>
      </listitem>

      <listitem>
	<para>az NTP protokoll seg&iacute;ts&eacute;g&eacute;vel hogyan
	  egyeztess&uuml;k az id&#245;t &eacute;s d&aacute;tumot, hogyan
	  &aacute;ll&iacute;tsunk be egy id&#245;szervert;</para>
      </listitem>

      <listitem>
	<para>a szabv&aacute;nyos napl&oacute;z&oacute; d&eacute;mon, a
	  <command>syslogd</command>
	  be&aacute;ll&iacute;t&aacute;s&aacute;t h&aacute;l&oacute;zati
	  kereszt&uuml;li napl&oacute;z&aacute;sra.</para>
      </listitem>
    </itemizedlist>

    <para>A fejezet elolvas&aacute;s&aacute;hoz aj&aacute;nlott:</para>

    <itemizedlist>
      <listitem>
	<para>az <filename>/etc/rc</filename> szkriptek alapjainak
	  ismerete;</para>
      </listitem>

      <listitem>
	<para>az alapvet&#245; h&aacute;l&oacute;zati fogalmak
	  ismerete;</para>
      </listitem>

      <listitem>
	<para>a k&uuml;ls&#245; szoftverek
	  telep&iacute;t&eacute;s&eacute;nek ismerete (<xref
	  linkend="ports">).</para>
      </listitem>
    </itemizedlist>
  </sect1>

  <sect1 id="network-inetd">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Chern</firstname>
	  <surname>Lee</surname>
	  <contrib>K&eacute;sz&iacute;tette: </contrib>
	</author>
      </authorgroup>
      <authorgroup>
	<author>
	  <contrib>A &os;&nbsp;6.1-RELEASE v&aacute;ltozat&aacute;hoz
	    igaz&iacute;totta: </contrib>
	  <othername>A &os; Dokument&aacute;ci&oacute;s
	    Projekt</othername>
	</author>
      </authorgroup>
    </sect1info>

    <title>Az <application>inetd</application>
      <quote>szuperszerver</quote></title>

    <sect2 id="network-inetd-overview">
      <title>&Aacute;ttekint&eacute;s</title>

      <para>Az &man.inetd.8; d&eacute;mont gyakran csak <quote>internet
	szuperszerverk&eacute;nt</quote> nevezik, mivel a helyi
	szolg&aacute;ltat&aacute;sok kapcsolatainak
	kezel&eacute;s&eacute;&eacute;rt felel&#245;s.  Amikor az
	<application>inetd</application> fogad egy csatlakoz&aacute;si
	k&eacute;relmet, akkor eld&ouml;nti r&oacute;la, hogy ez melyik
	programhoz tartozik &eacute;s elind&iacute;t egy
	p&eacute;ld&aacute;nyt bel&#245;le, majd &aacute;tadja neki a
	socketet (az &iacute;gy megh&iacute;vott program a
	szabv&aacute;ny bemenet&eacute;hez, kimenet&eacute;hez &eacute;s
	hibajelz&eacute;si csatorn&aacute;j&aacute;hoz kapja meg a
	socket le&iacute;r&oacute;it).  Az
	<application>inetd</application> haszn&aacute;lat&aacute;val
	&uacute;gy tudjuk cs&ouml;kkenteni a rendszer&uuml;nk
	terhel&eacute;s&eacute;t, hogy a csak alkalmank&eacute;nt
	megh&iacute;vott szolg&aacute;ltat&aacute;sokat nem futtatjuk
	teljesen f&uuml;ggetlen &ouml;n&aacute;ll&oacute;
	m&oacute;dban.</para>

      <para>Az <application>inetd</application> d&eacute;mont
	els&#245;sorban m&aacute;s d&eacute;monok
	elind&iacute;t&aacute;s&aacute;ra haszn&aacute;ljuk, de
	n&eacute;h&aacute;ny trivi&aacute;lis protokollt
	k&ouml;zvetlen&uuml;l is k&eacute;pes kezelni, mint
	p&eacute;ld&aacute;ul a <application>chargen</application>,
	<application>auth</application> &eacute;s a
	<application>daytime</application>.</para>

      <para>Ebben a fejezetben az <application>inetd</application>
	be&aacute;ll&iacute;t&aacute;s&aacute;nak alapjait foglaljuk
	&ouml;ssze mind parancssoros m&oacute;dban, mind pedig az
	<filename>/etc/inetd.conf</filename> konfigur&aacute;ci&oacute;s
	&aacute;llom&aacute;nyon kereszt&uuml;l.</para>

    </sect2>

    <sect2 id="network-inetd-settings">
      <title>Be&aacute;ll&iacute;t&aacute;sok</title>

      <para>Az <application>inetd</application>
	m&#251;k&ouml;d&eacute;se az &man.rc.8; rendszeren
	kereszt&uuml;l inicializ&aacute;lhat&oacute;.  Az
	<literal>inetd_enable</literal> ugyan alapb&oacute;l a
	<literal>NO</literal> &eacute;rt&eacute;ket veszi fel, vagyis
	tiltott, de a <application>sysinstall</application>
	haszn&aacute;lat&aacute;val m&aacute;r ak&aacute;r a
	telep&iacute;t&eacute;s sor&aacute;n bekapcsolhat&oacute;
	att&oacute;l f&uuml;gg&#245;en, hogy a felhaszn&aacute;l&oacute;
	milyen konfigur&aacute;ci&oacute;t v&aacute;lasztott.  Ha
	teh&aacute;t a:</para>

      <programlisting>inetd_enable="YES"</programlisting>

      <para>vagy</para>

      <programlisting>inetd_enable="NO"</programlisting>

      <para>sort tessz&uuml;k az <filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyba, akkor azzal az
	<application>inetd</application> d&eacute;mont
	ind&iacute;thatjuk el vagy tilthatjuk le a rendszer
	ind&iacute;t&aacute;sa sor&aacute;n.  Az</para>

      <screen>&prompt.root; <userinput>/etc/rc.d/inetd rcvar</userinput></screen>

      <para>paranccsal lek&eacute;rdezhetj&uuml;k a pillanatnyilag
	&eacute;rv&eacute;nyes be&aacute;ll&iacute;t&aacute;st.</para>

      <para>Emellett m&eacute;g az <application>inetd</application>
	d&eacute;monnak az <literal>inetd_flags</literal>
	v&aacute;ltoz&oacute;n kereszt&uuml;l
	k&uuml;l&ouml;nb&ouml;z&#245; parancssori param&eacute;tereket
	is &aacute;t tudunk adni.</para>

    </sect2>

    <sect2 id="network-inetd-cmdline">
      <title>Parancssori param&eacute;terek</title>

      <para>Hasonl&oacute;an a legt&ouml;bb szerverhez, az
	<application>inetd</application> viselked&eacute;s&eacute;t is
	befoly&aacute;solni tudjuk a parancssorban
	&aacute;tadhat&oacute; k&uuml;l&ouml;nb&ouml;z&#245;
	param&eacute;terekkel.  Ezek teljes list&aacute;ja a
	k&ouml;vetkez&#245;:</para>

      <para><command>inetd</command> <option>[-d] [-l] [-w] [-W] [-c
	maximum] [-C ar&aacute;ny] [-a c&iacute;m | n&eacute;v] [-p
	&aacute;llom&aacute;ny] [-R ar&aacute;ny] [-s maximum]
	[konfigur&aacute;ci&oacute;s
	&aacute;llom&aacute;ny]</option></para>

      <para>Ezek a param&eacute;terek az
	<filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyban az
	<literal>inetd_flags</literal> seg&iacute;ts&eacute;g&eacute;vel
	adhat&oacute;ak meg az <application>inetd</application>
	r&eacute;sz&eacute;re.  Alap&eacute;rtelmez&eacute;s szerint az
	<literal>inetd_flags</literal> &eacute;rt&eacute;ke <literal>-wW
	-C 60</literal>, ami az <application>inetd</application>
	&aacute;ltal biztos&iacute;tott szolg&aacute;ltat&aacute;sok TCP
	protokollon kereszt&uuml;li wrappel&eacute;s&eacute;t kapcsolja
	be, illetve egy IP-c&iacute;mr&#245;l nem engedi a
	felk&iacute;n&aacute;lt szolg&aacute;ltat&aacute;sok
	el&eacute;r&eacute;s&eacute;t percenk&eacute;nt hatvann&aacute;l
	t&ouml;bbsz&ouml;r.</para>

      <para>A kezd&#245; felhaszn&aacute;l&oacute;k &ouml;r&ouml;mmel
	nyugt&aacute;zhatj&aacute;k, hogy ezeket az
	alapbe&aacute;ll&iacute;t&aacute;sokat nem sz&uuml;ks&eacute;ges
	m&oacute;dos&iacute;taniuk, hab&aacute;r a
	k&eacute;s&#245;bbiekben majd f&eacute;ny der&uuml;l arra, hogy
	a kiszolg&aacute;l&aacute;s gyakoris&aacute;g&aacute;nak
	szab&aacute;lyoz&aacute;sa remek v&eacute;dekez&eacute;st
	ny&uacute;jthat t&uacute;lzottan nagy mennyis&eacute;g&#251;
	kapcsol&oacute;d&aacute;si k&eacute;relem ellen.  A
	megadhat&oacute; param&eacute;terek teljes list&aacute;ja az
	&man.inetd.8; man oldal&aacute;n olvashat&oacute;.</para>

      <variablelist>
	<varlistentry>
	  <term>-c <replaceable>maximum</replaceable></term>

	  <listitem>
	    <para>Az egyes szolg&aacute;ltat&aacute;sokhoz egyszerre
	      fel&eacute;p&iacute;thet&#245; kapcsolatok
	      alap&eacute;rtelmezett maxim&aacute;lis
	      sz&aacute;m&aacute;t adja meg.  Alapb&oacute;l ezt a
	      d&eacute;mont nem korl&aacute;tozza.  A
	      <option>max-child</option>
	      be&aacute;ll&iacute;t&aacute;ssal ez ak&aacute;r
	      szolg&aacute;ltat&aacute;sonk&eacute;nt k&uuml;l&ouml;n is
	      megadhat&oacute;.</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>-C <replaceable>ar&aacute;ny</replaceable></term>

	  <listitem>
	    <para>Korl&aacute;tozza, hogy egyetlen IP-c&iacute;mr&#245;l
	      alapb&oacute;l h&aacute;nyszor h&iacute;vhat&oacute;ak meg
	      az egyes szolg&aacute;ltat&aacute;sok egy percen
	      bel&uuml;l.  Ez az &eacute;rt&eacute;k alapb&oacute;l
	      korl&aacute;tlan.  A
	      <option>max-connections-per-ip-per-minute</option>
	      be&aacute;ll&iacute;t&aacute;ssal ez
	      szolg&aacute;ltat&aacute;sonk&eacute;nt is
	      defini&aacute;lhat&oacute;.</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>-R <replaceable>ar&aacute;ny</replaceable></term>

	  <listitem>
	    <para>Megadja, hogy egy szolg&aacute;ltat&aacute;st egy perc
	      alatt mennyiszer lehet megh&iacute;vni.  Ez az
	      &eacute;rt&eacute;k alap&eacute;rtelmez&eacute;s szerint
	      256.  A 0 megad&aacute;s&aacute;val
	      elt&ouml;r&ouml;lj&uuml;k ezt a t&iacute;pus&uacute;
	      korl&aacute;toz&aacute;st.</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>-s <replaceable>maximum</replaceable></term>

	  <listitem>
	    <para>Annak maximum&aacute;t adja meg, hogy egyetlen
	      IP-c&iacute;mr&#245;l egyszerre az egyes
	      szolg&aacute;ltat&aacute;sokat mennyiszer tudjuk
	      el&eacute;rni.  Alapb&oacute;l ez korl&aacute;tlan.
	      Szolg&aacute;ltat&aacute;sonk&eacute;nt ezt a
	      <option>max-child-per-ip</option> param&eacute;terrel
	      tudjuk fel&uuml;lb&iacute;r&aacute;lni.</para>
	  </listitem>
	</varlistentry>
      </variablelist>
    </sect2>

    <sect2 id="network-inetd-conf">
      <title>Az <filename>inetd.conf</filename>
	&aacute;llom&aacute;ny</title>

      <para>Az <application>inetd</application>
	be&aacute;ll&iacute;t&aacute;s&aacute;t az
	<filename>/etc/inetd.conf</filename> konfigur&aacute;ci&oacute;s
	&aacute;llom&aacute;nyon kereszt&uuml;l v&eacute;gezhetj&uuml;k
	el.</para>

      <para>Amikor az <filename>/etc/inetd.conf</filename>
	&aacute;llom&aacute;nyban m&oacute;dos&iacute;tunk valamit, az
	<application>inetd</application> d&eacute;mont a
	k&ouml;vetkez&#245; paranccsal meg kell k&eacute;rn&uuml;nk,
	hogy olvassa &uacute;jra:</para>

      <example id="network-inetd-reread">
	<title>Az <application>inetd</application>
	  konfigur&aacute;ci&oacute;s &aacute;llom&aacute;ny&aacute;nak
	  &uacute;jraolvas&aacute;sa</title>

	<screen>&prompt.root; <userinput>/etc/rc.d/inetd reload</userinput></screen>
      </example>

      <para>A konfigur&aacute;ci&oacute;s &aacute;llom&aacute;ny minden
	egyes sora egy-egy d&eacute;mont &iacute;r le.  A
	megjegyz&eacute;seket egy <quote>#</quote> jel vezeti be.  Az
	<filename>/etc/inetd.conf</filename> &aacute;llom&aacute;ny
	bejegyz&eacute;seinek form&aacute;tuma az al&aacute;bbi:</para>

      <programlisting><replaceable>szolg&aacute;ltat&aacute;s-neve</replaceable>
<replaceable>socket-t&iacute;pusa</replaceable>
<replaceable>protokoll</replaceable>
{wait|nowait}[/max-child[/max-connections-per-ip-per-minute[/max-child-per-ip]]]
<replaceable>felhaszn&aacute;l&oacute;</replaceable>[:<replaceable>csoport</replaceable>][/<replaceable>bejelentkez&eacute;si-oszt&aacute;ly</replaceable>]
<replaceable>szerver-program</replaceable>
<replaceable>szerver-program-param&eacute;terei</replaceable></programlisting>

      <para>Az IPv4 protokollt haszn&aacute;l&oacute; &man.ftpd.8;
	d&eacute;mon bejegyz&eacute;se p&eacute;ld&aacute;ul &iacute;gy
	n&eacute;z ki:</para>

      <programlisting>ftp     stream  tcp     nowait  root    /usr/libexec/ftpd       ftpd -l</programlisting>

      <variablelist>
	<varlistentry>
	  <term>szolg&aacute;ltat&aacute;s-neve</term>

	  <listitem>
	    <para>Ez az adott d&eacute;mon &aacute;ltal k&eacute;pviselt
	      szolg&aacute;ltat&aacute;st nevezi meg, amelynek
	      szerepelnie kell az <filename>/etc/services</filename>
	      &aacute;llom&aacute;nyban.  Ez hat&aacute;rozza meg, hogy
	      az <application>inetd</application> milyen porton figyelje
	      a be&eacute;rkez&#245; kapcsolatokat.  Ha egy &uacute;j
	      szolg&aacute;ltat&aacute;st hozunk l&eacute;tre, akkor azt
	      el&#245;sz&ouml;r az <filename>/etc/services</filename>
	      &aacute;llom&aacute;nyba kell felvenn&uuml;nk.</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>csatlakoz&aacute;s-t&iacute;pusa</term>

	  <listitem>
	    <para>Ennek az &eacute;rt&eacute;ke
	      <literal>stream</literal>, <literal>dgram</literal>,
	      <literal>raw</literal>, vagy <literal>seqpacket</literal>
	      lehet.  A <literal>stream</literal> t&iacute;pust
	      haszn&aacute;lja a legt&ouml;bb kapcsolat-orient&aacute;lt
	      TCP d&eacute;mon, mik&ouml;zben a <literal>dgram</literal>
	      t&iacute;pus az <acronym>UDP</acronym>
	      sz&aacute;ll&iacute;t&aacute;si protokollt
	      alkalmaz&oacute; d&eacute;monok eset&eacute;ben
	      haszn&aacute;latos.</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>protokoll</term>

	  <listitem>
	    <para>Valamelyik a k&ouml;vetkez&#245;k
	      k&ouml;z&uuml;l:</para>

	    <informaltable frame="none" pgwide="1">
	      <tgroup cols="2">
		<thead>
		  <row>
		    <entry>Protokoll</entry>
		    <entry>Magyar&aacute;zat</entry>
		  </row>
		</thead>
		<tbody>
		  <row>
		    <entry>tcp, tcp4</entry>
		    <entry>TCP IPv4</entry>
		  </row>
		  <row>
		    <entry>udp, udp4</entry>
		    <entry>UDP IPv4</entry>
		  </row>
		  <row>
		    <entry>tcp6</entry>
		    <entry>TCP IPv6</entry>
		  </row>
		  <row>
		    <entry>udp6</entry>
		    <entry>UDP IPv6</entry>
		  </row>
		  <row>
		    <entry>tcp46</entry>
		    <entry>TCP IPv4 &eacute;s v6</entry>
		  </row>
		  <row>
		    <entry>udp46</entry>
		    <entry>UDP IPv4 &eacute;s v6</entry>
		  </row>
		</tbody>
	      </tgroup>
	    </informaltable>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>{wait|nowait}[/max-child[/max-connections-per-ip-per-minute[/max-child-per-ip]]]</term>

	  <listitem>
	    <para>A <option>wait|nowait</option>
	      be&aacute;ll&iacute;t&aacute;s mondja meg, hogy az
	      <application>inetd</application> d&eacute;monb&oacute;l
	      megh&iacute;vott d&eacute;mon saj&aacute;t maga
	      k&eacute;pes-e kezelni kapcsolatokat.  A
	      <option>dgram</option> t&iacute;pus&uacute; kapcsolatok
	      eset&eacute;ben egy&eacute;rtelm&#251;en a
	      <option>wait</option> be&aacute;ll&iacute;t&aacute;st kell
	      haszn&aacute;lni, mik&ouml;zben a <option>stream</option>
	      eset&eacute;n, ahol &aacute;ltal&aacute;ban t&ouml;bb
	      sz&aacute;lon dolgozunk, a <option>nowait</option>
	      megad&aacute;sa javasolt.  A <option>wait</option>
	      hat&aacute;s&aacute;ra &aacute;ltal&aacute;ban egyetlen
	      d&eacute;monnak adunk &aacute;t t&ouml;bb socketet,
	      m&iacute;g a <option>nowait</option> minden sockethez egy
	      &uacute;jabb p&eacute;ld&aacute;nyt ind&iacute;t
	      el.</para>

	    <para>Az <application>inetd</application> &aacute;ltal
	      ind&iacute;that&oacute; p&eacute;ld&aacute;nyokat a
	      <option>max-child</option> megad&aacute;s&aacute;val
	      korl&aacute;tozhatjuk.  Ha teh&aacute;t
	      p&eacute;ld&aacute;ul az adott d&eacute;mon
	      sz&aacute;m&aacute;ra legfeljebb p&eacute;ld&aacute;ny
	      l&eacute;trehoz&aacute;s&aacute;t
	      enged&eacute;lyezz&uuml;k, akkor a <option>nowait</option>
	      ut&aacute;n <literal>/10</literal>
	      be&aacute;ll&iacute;t&aacute;st kell megadnunk.  A
	      <literal>/0</literal> haszn&aacute;lat&aacute;val
	      korl&aacute;tlan mennyis&eacute;g&#251;
	      p&eacute;ld&aacute;nyt
	      enged&eacute;lyezhet&uuml;nk.</para>

	    <para>A <option>max-child</option> mellett m&eacute;g
	      tov&aacute;bbi k&eacute;t m&aacute;sik
	      be&aacute;ll&iacute;t&aacute;s j&ouml;het
	      sz&aacute;m&iacute;t&aacute;sba az egyes d&eacute;monok
	      &aacute;ltal kezelhet&#245; kapcsolatok maxim&aacute;lis
	      sz&aacute;m&aacute;nak
	      korl&aacute;toz&aacute;s&aacute;ban.  A
	      <option>max-connections-per-ip-per-minute</option> az
	      egyes IP-c&iacute;mekr&#245;l befut&oacute;
	      lekezelhet&#245; kapcsolatok percenk&eacute;nti
	      sz&aacute;m&aacute;t szab&aacute;lyozza, &iacute;gy
	      p&eacute;ld&aacute;ul ha itt a tizes &eacute;rt&eacute;ket
	      adjuk meg, akkor az adott szolg&aacute;ltat&aacute;shoz
	      egy IP-c&iacute;mr&#245;l percenk&eacute;nt csak
	      t&iacute;zszer f&eacute;rhet&uuml;nk hozz&aacute;.  A
	      <option>max-child-per-ip</option> az egyes
	      IP-c&iacute;mekhez egyszerre elind&iacute;that&oacute;
	      p&eacute;ld&aacute;nyok sz&aacute;m&aacute;ra &iacute;r
	      el&#245; egy korl&aacute;tot.  Ezek a param&eacute;terek
	      seg&iacute;tenek meg&oacute;vni rendszer&uuml;nket az
	      er&#245;forr&aacute;sok akaratos vagy akaratlan
	      kimer&iacute;t&eacute;s&eacute;t&#245;l &eacute;s a DoS
	      (Denial of Service) t&iacute;pus&uacute;
	      t&aacute;mad&aacute;sokt&oacute;l.</para>

	    <para>Ebben a mez&#245;ben a <option>wait</option> vagy
	      <option>nowait</option> valamelyik&eacute;t
	      k&ouml;telez&#245; megadni.  A <option>max-child</option>,
	      <option>max-connections-per-ip-per-minute</option>
	      &eacute;s <option>max-child-per-ip</option>
	      param&eacute;terek ellenben elhagyhat&oacute;ak.</para>

	    <para>A <option>stream</option> t&iacute;pus&uacute;
	      t&ouml;bb sz&aacute;lon fut&oacute; d&eacute;monok a
	      <option>max-child</option>,
	      <option>max-connections-per-ip-per-minute</option> vagy
	      <option>max-child-per-ip</option>
	      korl&aacute;toz&aacute;sa n&eacute;lk&uuml;l
	      egyszer&#251;en csak &iacute;gy adhat&oacute;ak meg:
	      <literal>nowait</literal>.</para>

	    <para>Ha ugyanezt a d&eacute;mont t&iacute;z kapcsolatra
	      lekorl&aacute;tozzuk, akkor a k&ouml;vetkez&#245;t kell
	      megadnunk: <literal>nowait/10</literal>.</para>

	    <para>Amikor pedig IP-c&iacute;menk&eacute;nt 20 kapcsolatot
	      enged&eacute;lyez&uuml;nk percenk&eacute;nt &eacute;s
	      mind&ouml;ssze 10 p&eacute;ld&aacute;nyt, akkor:
	      <literal>nowait/10/20</literal>.</para>

	    <para>Az im&eacute;nti be&aacute;ll&iacute;t&aacute;sok a
	      &man.fingerd.8; d&eacute;mon alap&eacute;rtelmezett
	      param&eacute;terein&eacute;l is
	      megtal&aacute;lhat&oacute;ak:</para>

	    <programlisting>finger stream  tcp     nowait/3/10 nobody /usr/libexec/fingerd fingerd -s</programlisting>

	    <para>V&eacute;gezet&uuml;l enged&eacute;lyezz&uuml;k 100
	      p&eacute;ld&aacute;nyt, melyek k&ouml;z&uuml;l
	      IP-c&iacute;menk&eacute;nt 5 haszn&aacute;lhat&oacute;:
	      <literal>nowait/100/0/5</literal>.</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>felhaszn&aacute;l&oacute;</term>

	  <listitem>
	    <para>Ezzel azt a felhaszn&aacute;l&oacute;t adjuk meg,
	      akinek a nev&eacute;ben az adott d&eacute;mon futni fog.
	      Az esetek t&uacute;lnyom&oacute; r&eacute;sz&eacute;ben a
	      d&eacute;monokat a <username>root</username>
	      felhaszn&aacute;l&oacute; futtatja.  L&aacute;thatjuk
	      azonban, hogy biztons&aacute;gi okokb&oacute;l bizonyos
	      d&eacute;monok a <username>daemon</username> vagy a
	      legkevesebb joggal rendelkez&#245;
	      <username>nobody</username> felhaszn&aacute;l&oacute;val
	      futnak.</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>szerver-program</term>

	  <listitem>
	    <para>A kapcsolat fel&eacute;p&uuml;l&eacute;sekor az itt
	      teljes el&eacute;r&eacute;si &uacute;ttal megadott
	      d&eacute;mon indul el.  Ha ezt a
	      szolg&aacute;ltat&aacute;st maga az
	      <application>inetd</application> bels&#245;leg
	      val&oacute;s&iacute;tja meg, akkor ebben a mez&#245;ben az
	      <option>internal</option> &eacute;rt&eacute;ket adjuk
	      meg.</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>szerver-program-param&eacute;terei</term>

	  <listitem>
	    <para>Ez a <option>szerver-program</option>
	      be&aacute;ll&iacute;t&aacute;ssal egy&uuml;tt
	      m&#251;k&ouml;dik, &eacute;s ebben a mez&#245;ben a
	      d&eacute;mon megh&iacute;v&aacute;sakor
	      alkalmazand&oacute; param&eacute;tereket tudjuk
	      r&ouml;gz&iacute;teni, amelyet a d&eacute;mon
	      nev&eacute;vel kezd&uuml;nk.  Ha a d&eacute;mont a
	      parancssorb&oacute;l a
	      <command><replaceable>saj&aacute;td&eacute;mon</replaceable>
	      -d</command> paranccsal h&iacute;vn&aacute;nk meg, akkor a
	      <literal><replaceable>saj&aacute;td&eacute;mon</replaceable>
	      -d</literal> lesz
	      <option>szerver-program-param&eacute;terei</option>
	      be&aacute;ll&iacute;t&aacute;s helyes &eacute;rt&eacute;ke
	      is.  Term&eacute;szetesen, ha a d&eacute;mon egy
	      bels&#245;leg megval&oacute;s&iacute;tott
	      szolg&aacute;ltat&aacute;s, akkor ebben a mez&#245;ben is
	      az <option>internal</option> fog megjelenni.</para>
	  </listitem>
	</varlistentry>
      </variablelist>
    </sect2>

    <sect2 id="network-inetd-security">
      <title>V&eacute;delem</title>

      <para>Att&oacute;l f&uuml;gg&#245;en, hogy a
	telep&iacute;t&eacute;s sor&aacute;n mit v&aacute;lasztottunk,
	az <application>inetd</application> &aacute;ltal
	t&aacute;mogatott szolg&aacute;ltat&aacute;sok egyes
	r&eacute;sze tal&aacute;n alapb&oacute;l enged&eacute;lyezett
	is.  Amennyiben egy adott d&eacute;mont konkr&eacute;tan nem
	haszn&aacute;lunk, akkor &eacute;rdemes megfontolni a
	letilt&aacute;s&aacute;t.  A k&eacute;rd&eacute;ses d&eacute;mon
	sor&aacute;ba tegy&uuml;nk egy <quote>#</quote> jelet az
	<filename>/etc/inetd.conf</filename> &aacute;llom&aacute;nyba,
	majd <link linkend="network-inetd-reread">olvastassuk
	&uacute;jra az inetd be&aacute;ll&iacute;t&aacute;sait</link>.
	Egyes d&eacute;monok, mint p&eacute;ld&aacute;ul az
	<application>fingerd</application> haszn&aacute;lata
	egy&aacute;ltal&aacute;n nem aj&aacute;nlott, mivel a
	t&aacute;mad&oacute;k sz&aacute;m&aacute;ra hasznos
	inform&aacute;ci&oacute;kat tudnak
	kisziv&aacute;rogtatni.</para>

      <para>M&aacute;s d&eacute;monok nem &uuml;gyelnek a
	v&eacute;delemre, &eacute;s a kapcsolatokhoz rendelt
	lej&aacute;rati idej&uuml;k t&uacute;ls&aacute;gosan
	hossz&uacute; vagy &eacute;ppen nincs is.  Ezzel a
	t&aacute;mad&oacute;nak lehet&#245;s&eacute;ge van lass&uacute;
	kapcsolatokkal leterhelni az adott d&eacute;mont, ez&aacute;ltal
	kimer&iacute;teni a rendszer er&#245;forr&aacute;sait.  Ha
	&uacute;gy tal&aacute;ljuk, hogy t&uacute;ls&aacute;gosan sok az
	ilyen kapcsolat, akkor j&oacute; &ouml;tletnek bizonyulhat a
	d&eacute;monok sz&aacute;m&aacute;ra a
	<option>max-connections-per-ip-per-minute</option>,
	<option>max-child</option> vagy
	<option>max-child-per-ip</option> korl&aacute;toz&aacute;sok
	elrendel&eacute;se.</para>

      <para>Alap&eacute;rtelmez&eacute;s szerint a TCP kapcsolatok
	wrappel&eacute;se enged&eacute;lyezett.  A &man.hosts.access.5;
	man oldalon tal&aacute;lhatjuk meg az
	<application>inetd</application> &aacute;ltal
	megh&iacute;vhat&oacute; k&uuml;l&ouml;nf&eacute;le
	d&eacute;monok TCP-alap&uacute; korl&aacute;toz&aacute;sainak
	lehet&#245;s&eacute;geit.</para>

    </sect2>

    <sect2 id="network-inetd-misc">
      <title>Egy&eacute;b lehet&#245;s&eacute;gek</title>

      <para>A <application>daytime</application>,
	<application>time</application>,
	<application>echo</application>,
	<application>discard</application>,
	<application>chargen</application> &eacute;s
	<application>auth</application> szolg&aacute;ltat&aacute;sok
	feladatainak mindegyik&eacute;t maga az
	<application>inetd</application> is k&eacute;pes
	ell&aacute;tni.</para>

      <para>Az <application>auth</application>
	szolg&aacute;ltat&aacute;s a h&aacute;l&oacute;zati
	kereszt&uuml;l azonos&iacute;t&aacute;st teszi
	lehet&#245;v&eacute; &eacute;s bizonyos m&eacute;rt&eacute;kig
	be&aacute;ll&iacute;that&oacute;.  A t&ouml;bbit egyszer&#251;en
	csak kapcsoljuk ki vagy be.</para>

      <para>A t&eacute;m&aacute;ban az &man.inetd.8; man oldal&aacute;n
	tudunk m&eacute;g jobban elmer&uuml;lni.</para>

    </sect2>
  </sect1>

  <sect1 id="network-nfs">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Tom</firstname>
	  <surname>Rhodes</surname>
	  <contrib>&Aacute;tdolgozta &eacute;s jav&iacute;totta:
	    </contrib>
	</author>
      </authorgroup>
      <authorgroup>
	<author>
	  <firstname>Bill</firstname>
	  <surname>Swingle</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>A h&aacute;l&oacute;zati &aacute;llom&aacute;nyrendszer
      (NFS)</title>

    <indexterm><primary>NFS</primary></indexterm>

    <para>A &os; t&ouml;bb &aacute;llom&aacute;nyrendszert ismer,
      k&ouml;zt&uuml;k a h&aacute;l&oacute;zati
      &aacute;llom&aacute;nyrendszert (Network File System, <acronym
      role="Network File System">NFS</acronym>) is.  Az <acronym
      role="Network File System">NFS</acronym> &aacute;llom&aacute;nyok
      &eacute;s k&ouml;nyvt&aacute;rak megoszt&aacute;s&aacute;t teszi
      lehet&#245;v&eacute; a h&aacute;l&oacute;zaton kereszt&uuml;l.  Az
      <acronym role="Network File System">NFS</acronym>
      haszn&aacute;lat&aacute;val a felhaszn&aacute;l&oacute;k &eacute;s
      a programok k&eacute;pesek majdnem &uacute;gy el&eacute;rni a
      t&aacute;voli rendszereken tal&aacute;lhat&oacute;
      &aacute;llom&aacute;nyokat, mintha helyben
      l&eacute;tezn&eacute;nek.</para>

    <para>&Iacute;me az <acronym>NFS</acronym> n&eacute;h&aacute;ny
      legjelent&#245;sebb el&#245;nye:</para>

    <itemizedlist>
      <listitem>
	<para>A helyi munka&aacute;llom&aacute;sok kevesebb
	  t&aacute;rter&uuml;letet haszn&aacute;lnak, mivel a
	  k&ouml;z&ouml;s adatokat csak egyetlen
	  sz&aacute;m&iacute;t&oacute;g&eacute;pen t&aacute;roljuk
	  &eacute;s megosztjuk mindenki k&ouml;z&ouml;tt.</para>
      </listitem>

      <listitem>
	<para>A felhaszn&aacute;l&oacute;knak nem kell a
	  h&aacute;l&oacute;zat minden egyes g&eacute;p&eacute;n
	  k&uuml;l&ouml;n felhaszn&aacute;l&oacute;i
	  k&ouml;nyvt&aacute;rral rendelkezni&uuml;k.  Ezek ugyanis az
	  <acronym>NFS</acronym> seg&iacute;ts&eacute;g&eacute;vel
	  ak&aacute;r egy szerveren is
	  be&aacute;ll&iacute;that&oacute;ak &eacute;s
	  el&eacute;rhet&#245;v&eacute; tehet&#245;ek a
	  h&aacute;l&oacute;zaton kereszt&uuml;l.</para>
      </listitem>

      <listitem>
	<para>A k&uuml;l&ouml;nb&ouml;z&#245;
	  h&aacute;tt&eacute;rt&aacute;rak, mint p&eacute;ld&aacute;ul a
	  floppy lemezek, CD-meghajt&oacute;k &eacute;s &iomegazip;
	  meghajt&oacute;k a h&aacute;l&oacute;zaton t&ouml;bb
	  sz&aacute;m&iacute;t&oacute;g&eacute;p k&ouml;z&ouml;tt
	  megoszthat&oacute;ak.  Ezzel cs&ouml;kkenteni tudjuk a
	  h&aacute;l&oacute;zatunkban sz&uuml;ks&eacute;ges
	  cser&eacute;lhet&#245; lemezes eszk&ouml;z&ouml;k
	  sz&aacute;m&aacute;t.</para>
      </listitem>
    </itemizedlist>

    <sect2>
      <title>Ahogy az <acronym>NFS</acronym> m&#251;k&ouml;dik</title>

      <para>Az <acronym>NFS</acronym> legal&aacute;bb k&eacute;t f&#245;
	r&eacute;szb&#245;l rakhat&oacute; &ouml;ssze: egy
	szerverb&#245;l &eacute;s egy vagy t&ouml;bb kliensb&#245;l.  A
	kliensek a szerver &aacute;ltal megosztott adatokhoz
	k&eacute;pesek t&aacute;volr&oacute;l hozz&aacute;f&eacute;rni.
	A megfelel&#245; m&#251;k&ouml;d&eacute;shez mind&ouml;ssze csak
	n&eacute;h&aacute;ny programot kell be&aacute;ll&iacute;tani
	&eacute;s futtatni.</para>

      <para>A szervernek a k&ouml;vetkez&#245; d&eacute;monokat kell
	m&#251;k&ouml;dtetnie:</para>

      <indexterm>
	<primary>NFS</primary>
	<secondary>szerver</secondary>
      </indexterm>
      <indexterm>
	<primary>&aacute;llom&aacute;nyszerver</primary>
	<secondary>UNIX kliensek</secondary>
      </indexterm>

      <indexterm>
	<primary><application>rpcbind</application></primary>
      </indexterm>
      <indexterm>
	<primary><application>mountd</application></primary>
      </indexterm>
      <indexterm>
	<primary><application>nfsd</application></primary>
      </indexterm>

      <informaltable frame="none" pgwide="1">
	<tgroup cols="2">
	  <colspec colwidth="1*">
	  <colspec colwidth="3*">

	  <thead>
	    <row>
	      <entry>D&eacute;mon</entry>
	      <entry>Le&iacute;r&aacute;s</entry>
	    </row>
	  </thead>
	  <tbody>
	    <row>
	      <entry><application>nfsd</application></entry>
	      <entry>Az <acronym>NFS</acronym> d&eacute;mon, amely
		kiszolg&aacute;lja az <acronym>NFS</acronym>
		kliensekt&#245;l &eacute;rkez&#245;
		k&eacute;r&eacute;seket.</entry>
	    </row>
	    <row>
	      <entry><application>mountd</application></entry>
	      <entry>Az <acronym>NFS</acronym> csatlakoztat&oacute;
		d&eacute;monja, amely v&eacute;grehajtja az &man.nfsd.8;
		&aacute;ltal &aacute;tk&uuml;ld&ouml;tt
		k&eacute;r&eacute;seket.</entry>
	    </row>
	    <row>
	      <entry><application>rpcbind</application></entry>
	      <entry>Ez a d&eacute;mon lehet&#245;v&eacute; teszi az
		<acronym>NFS</acronym> kliensek sz&aacute;m&aacute;ra,
		hogy fel tudj&aacute;k der&iacute;teni az
		<acronym>NFS</acronym> szerver &aacute;ltal
		haszn&aacute;lt portot.</entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

      <para>A kliensen is futnia kell egy d&eacute;monnak, amelynek a
	neve <application>nfsiod</application>.  Az
	<application>nfsiod</application> d&eacute;mon az
	<acronym>NFS</acronym> szerver fel&#245;l &eacute;rkez&#245;
	k&eacute;r&eacute;seket szolg&aacute;lja ki.  A
	haszn&aacute;lata teljesen opcion&aacute;lis, csup&aacute;n a
	teljes&iacute;tm&eacute;nyt h&iacute;vatott jav&iacute;tani, de
	a norm&aacute;lis &eacute;s helyes m&#251;k&ouml;d&eacute;shez
	nincs r&aacute; sz&uuml;ks&eacute;g&uuml;nk.  Az &man.nfsiod.8;
	man oldal&aacute;n err&#245;l t&ouml;bbet is
	megtudhatunk.</para>

    </sect2>

    <sect2 id="network-configuring-nfs">
      <title>Az <acronym>NFS</acronym>
	be&aacute;ll&iacute;t&aacute;sa</title>

      <indexterm>
	<primary>NFS</primary>
	<secondary>be&aacute;ll&iacute;t&aacute;s</secondary>
      </indexterm>

      <para>Az <acronym>NFS</acronym> be&aacute;ll&iacute;t&aacute;sa
	viszonylag egy&eacute;rtelm&#251;en adja mag&aacute;t.  A
	m&#251;k&ouml;d&eacute;s&eacute;hez sz&uuml;ks&eacute;ges
	programok automatikus elind&iacute;t&aacute;sa csup&aacute;n
	n&eacute;h&aacute;ny apr&oacute; m&oacute;dos&iacute;t&aacute;st
	ig&eacute;nyel az <filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyban.</para>

      <para>Az <acronym>NFS</acronym> szerveren gondoskodjunk
	r&oacute;la, hogy az al&aacute;bbi
	be&aacute;ll&iacute;t&aacute;sok szerepeljenek az
	<filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyban:</para>

      <programlisting>rpcbind_enable="YES"
nfs_server_enable="YES"
mountd_flags="-r"</programlisting>

      <para>A <application>mountd</application> mag&aacute;t&oacute;l el
	fog indulni, ha az <acronym>NFS</acronym> szervert
	enged&eacute;lyezz&uuml;k.</para>

      <para>A kliensen a k&ouml;vetkez&#245;
	be&aacute;ll&iacute;t&aacute;st kell felvenn&uuml;nk az
	<filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyba:</para>

      <programlisting>nfs_client_enable="YES"</programlisting>

      <para>Az <filename>/etc/exports</filename> &aacute;llom&aacute;ny
	adja meg, hogy az <acronym>NFS</acronym> milyen
	&aacute;llom&aacute;nyrendszereket export&aacute;ljon (vagy
	m&aacute;sk&eacute;ppen sz&oacute;lva <quote>osszon
	meg</quote>).  Az <filename>/etc/exports</filename>
	&aacute;llom&aacute;nyban teh&aacute;t a megosztani
	k&iacute;v&aacute;nt &aacute;llom&aacute;nyrendszereket kell
	szerepeltetn&uuml;nk, &eacute;s azt, hogy melyik
	sz&aacute;m&iacute;t&oacute;g&eacute;pekkel tudjuk ezeket
	el&eacute;rni.  A g&eacute;pek megnevez&eacute;se mellett a
	hozz&aacute;f&eacute;r&eacute;sre tov&aacute;bbi
	megszor&iacute;t&aacute;sokat &iacute;rhatunk fel.  Ezek
	r&eacute;szletes le&iacute;r&aacute;s&aacute;t az
	&man.exports.5; man oldalon tal&aacute;ljuk meg.</para>

      <para>L&aacute;ssunk n&eacute;h&aacute;ny p&eacute;ld&aacute;t az
	<filename>/etc/exports</filename> &aacute;llom&aacute;nyban
	megjelen&#245; bejegyz&eacute;sekre:</para>

      <indexterm>
	<primary>NFS</primary>
	<secondary>p&eacute;ld&aacute;k
	  export&aacute;l&aacute;sra</secondary>
      </indexterm>

      <para>A most k&ouml;vetkez&#245; p&eacute;ld&aacute;kban az
	&aacute;llom&aacute;nyrendszerek
	export&aacute;l&aacute;s&aacute;nak finoms&aacute;gait
	igyeksz&uuml;nk &eacute;rz&eacute;keltetni, noha a
	konkr&eacute;t be&aacute;ll&iacute;t&aacute;sok gyakran a
	rendszer&uuml;nkt&#245;l &eacute;s a h&aacute;l&oacute;zati
	konfigur&aacute;ci&oacute;t&oacute;l f&uuml;ggenek.
	P&eacute;ld&aacute;ul, ha a <filename>/cdrom</filename>
	k&ouml;nyt&aacute;rat akarjuk h&aacute;rom g&eacute;p
	sz&aacute;m&aacute;ra megosztani, akik a szerverrel
	megegyez&#245; tartom&aacute;nyban tal&aacute;lhat&oacute;ak
	(ez&eacute;rt nem is kell megadnunk a tartom&aacute;nyt) vagy
	mert egyszer&#251;en megtal&aacute;lhat&oacute;k az
	<filename>/etc/hosts</filename> &aacute;llom&aacute;nyunkban.
	Az <option>-ro</option> be&aacute;ll&iacute;t&aacute;s az
	export&aacute;lt &aacute;llom&aacute;nyrendszereket
	&iacute;r&aacute;sv&eacute;dett&eacute; teszi.  Ezzel a
	be&aacute;ll&iacute;t&aacute;ssal a t&aacute;voli rendszerek nem
	lesznek k&eacute;pesek m&oacute;dos&iacute;tani az
	export&aacute;lt &aacute;llom&aacute;nyrendszer
	tartalm&aacute;t.</para>

      <programlisting>/cdrom -ro <replaceable>g&eacute;p1 g&eacute;p2 g&eacute;p3</replaceable></programlisting>

      <para>A k&ouml;vetkez&#245; sorban a <filename>/home</filename>
	k&ouml;nyvt&aacute;rat h&aacute;rom g&eacute;p
	sz&aacute;m&aacute;ra osztjuk meg, melyeket IP-c&iacute;mekkel
	adtunk meg.  Ez olyan helyi h&aacute;l&oacute;zat eset&eacute;n
	hasznos, ahol nem &aacute;ll&iacute;tottunk be
	n&eacute;vfelold&aacute;st.  Esetleg a bels&#245;
	h&aacute;l&oacute;zati neveket az
	<filename>/etc/hosts</filename> &aacute;llom&aacute;nyban is
	t&aacute;rolhatjuk.  Ezzel ut&oacute;bbival kapcsolatban a
	&man.hosts.5; man oldalt &eacute;rdemes fellapoznunk.  Az
	<option>-alldirs</option> be&aacute;ll&iacute;t&aacute;s
	lehet&#245;v&eacute; teszi, hogy az alk&ouml;nyvt&aacute;rak is
	csatlakoz&aacute;si pontok lehessenek.  M&aacute;s
	sz&oacute;val, nem fogja csatlakoztatni az
	alk&ouml;nyvt&aacute;rakat, de megengedi a kliensek
	sz&aacute;m&aacute;ra, hogy csak azokat a
	k&ouml;nyvt&aacute;rakat csatlakoztass&aacute;k, amelyeket kell
	vagy amelyekre sz&uuml;ks&eacute;g&uuml;nk van.</para>

      <programlisting>/home  -alldirs  10.0.0.2 10.0.0.3 10.0.0.4</programlisting>

      <para>A k&ouml;vetkez&#245; sorban az <filename>/a</filename>
	k&ouml;nyvt&aacute;rat &uacute;gy export&aacute;ljuk, hogy az
	&aacute;llom&aacute;nyrendszerhez k&eacute;t
	k&uuml;l&ouml;nb&ouml;z&#245; tartom&aacute;nyb&oacute;l is
	hozz&aacute; lehessen f&eacute;rni.  A
	<option>-maproot=root</option> be&aacute;ll&iacute;t&aacute;s
	hat&aacute;s&aacute;ra a t&aacute;voli rendszer
	<username>root</username> felhaszn&aacute;l&oacute;ja az
	export&aacute;lt &aacute;llom&aacute;nyrendszeren szint&eacute;n
	<username>root</username> felhaszn&aacute;l&oacute;k&eacute;nt
	fogja &iacute;rni az adatokat.  Amennyiben a
	<literal>-maproot=root</literal> be&aacute;ll&iacute;t&aacute;st
	nem adjuk meg, akkor a t&aacute;voli rendszeren hi&aacute;ba
	<username>root</username> az adott felhaszn&aacute;l&oacute;, az
	export&aacute;lt &aacute;llom&aacute;nyrendszeren nem lesz
	k&eacute;pes egyetlen &aacute;llom&aacute;nyt sem
	m&oacute;dos&iacute;tani.</para>

      <programlisting>/a  -maproot=root  gep.minta.com doboz.haz.org</programlisting>

      <para>A kliensek is csak a megfelel&#245; enged&eacute;lyek
	birtok&aacute;ban k&eacute;pesek el&eacute;rni a megosztott
	&aacute;llom&aacute;nyrendszereket.  Ez&eacute;rt a klienst ne
	felejts&uuml;k el felvenni a szerver
	<filename>/etc/exports</filename>
	&aacute;llom&aacute;ny&aacute;ba.</para>

      <para>Az <filename>/etc/exports</filename>
	&aacute;llom&aacute;nyban az egyes sorok az egyes
	&aacute;llom&aacute;nyrendszerekre &eacute;s az egyes
	g&eacute;pekre vonatkoznak.  A t&aacute;voli g&eacute;pek
	&aacute;llom&aacute;nyrendszerenk&eacute;nt csak egyszer
	adhat&oacute;ak meg, &eacute;s csak egy alap&eacute;rtelmezett
	bejegyz&eacute;s&uuml;k lehet.  P&eacute;ld&aacute;ul
	tegy&uuml;k fel, hogy a <filename>/usr</filename> egy
	&ouml;n&aacute;ll&oacute; &aacute;llom&aacute;nyrendszer.  Ennek
	megfelel&#245;en az al&aacute;bbi bejegyz&eacute;sek az
	<filename>/etc/exports</filename> &aacute;llom&aacute;nyban
	&eacute;rv&eacute;nytelenek:</para>

      <programlisting># Nem haszn&aacute;lhat&oacute;, ha a /usr egy &aacute;llom&aacute;nyrendszer:
/usr/src   kliens
/usr/ports kliens</programlisting>

      <para>Egy &aacute;llom&aacute;nyrendszerhez, vagyis itt a
	<filename>/usr</filename> part&iacute;ci&oacute;hoz, k&eacute;t
	export sort is megadtunk ugyanahhoz a <hostid>kliens</hostid>
	nev&#251; g&eacute;phez.  Helyesen &iacute;gy kell megoldani az
	ilyen helyzeteket:</para>

      <programlisting>/usr/src /usr/ports  kliens</programlisting>

      <para>Az adott g&eacute;phez tartoz&oacute; egy
	&aacute;llom&aacute;nyrendszerre vonatkoz&oacute; exportoknak
	mindig egy sorban kell szerepelni&uuml;k.  A kliens
	n&eacute;lk&uuml;l fel&iacute;rt sorok egyetlen g&eacute;phez
	tartoz&oacute;nak fognak sz&aacute;m&iacute;tani.  Ezzel az
	&aacute;llom&aacute;nyrendszerek megoszt&aacute;s&aacute;t
	tudjuk szab&aacute;lyozni, de legt&ouml;bbek
	sz&aacute;m&aacute;ra nem jelent gondot.</para>

      <para>Most egy &eacute;rv&eacute;nyes exportlista k&ouml;vetkezik,
	ahol a <filename>/usr</filename> &eacute;s az
	<filename>/exports</filename> mind helyi
	&aacute;llom&aacute;nyrendszerek:</para>

      <programlisting># Osszuk meg az src &eacute;s ports k&ouml;nyvt&aacute;rakat a kliens01 &eacute;s kliens02 r&eacute;sz&eacute;re, de csak a
# kliens01 f&eacute;rhessen hozz&aacute; rendszeradminisztr&aacute;tori jogokkal:
/usr/src /usr/ports -maproot=root    kliens01
/usr/src /usr/ports               kliens02
# A kliensek az /exports k&ouml;nyvt&aacute;rban teljes joggal rendelkeznek &eacute;s azon bel&uuml;l
# b&aacute;rmit tudnak csatlakoztatni. Rajtuk k&iacute;v&uuml;l mindenki csak &iacute;r&aacute;sv&eacute;detten k&eacute;pes
# el&eacute;rni az /exports/obj k&ouml;nyvt&aacute;rat:
/exports -alldirs -maproot=root      kliens01 kliens02
/exports/obj -ro</programlisting>

      <para>A <application>mountd</application> d&eacute;monnal az
	<filename>/etc/exports</filename> &aacute;llom&aacute;nyt minden
	egyes m&oacute;dos&iacute;t&aacute;sa ut&aacute;n &uacute;jra be
	kell olvastatni, mivel a v&aacute;ltoztat&aacute;saink csak
	&iacute;gy fognak &eacute;rv&eacute;nyes&uuml;lni.  Ezt
	megcsin&aacute;lhatjuk &uacute;gy is, hogy k&uuml;ld&uuml;nk egy
	HUP (hangup, avagy felf&uuml;ggeszt&eacute;s) jelz&eacute;st a
	m&aacute;r fut&oacute; d&eacute;monnak:</para>

      <screen>&prompt.root; <userinput>kill -HUP `cat /var/run/mountd.pid`</userinput></screen>

      <para>vagy megh&iacute;vjuk a <command>mountd</command> &man.rc.8;
	szkriptet a megfelel&#245; param&eacute;terrel:</para>

      <screen>&prompt.root; <userinput>/etc/rc.d/mountd onereload</userinput></screen>

      <para>Az <xref linkend="configtuning-rcd">ban tudhatunk meg
	r&eacute;szleteket az rc szkriptek
	haszn&aacute;lat&aacute;r&oacute;l.</para>

      <para>Ezek ut&aacute;n ak&aacute;r a &os;
	&uacute;jraind&iacute;t&aacute;s&aacute;val is
	aktiv&aacute;lhatjuk a megoszt&aacute;sokat, hab&aacute;r ez nem
	felt&eacute;tlen&uuml;l sz&uuml;ks&eacute;ges.  Ha
	<username>root</username> felhaszn&aacute;l&oacute;nk&eacute;nt
	kiadjuk a k&ouml;vetkez&#245; parancsokat, akkor azzal minden
	sz&uuml;ks&eacute;ges programot elind&iacute;tunk.</para>

      <para>Az <acronym>NFS</acronym> szerveren teh&aacute;t:</para>

      <screen>&prompt.root; <userinput>rpcbind</userinput>
&prompt.root; <userinput>nfsd -u -t -n 4</userinput>
&prompt.root; <userinput>mountd -r</userinput></screen>

      <para>Az <acronym>NFS</acronym> kliensen pedig:</para>

      <screen>&prompt.root; <userinput>nfsiod -n 4</userinput></screen>

      <para>Ezzel most m&aacute;r minden k&eacute;szen &aacute;ll a
	t&aacute;voli &aacute;llom&aacute;nyrendszer
	csatlakoztat&aacute;s&aacute;ra.  A p&eacute;ld&aacute;kban a
	szerver neve <hostid>szerver</hostid> lesz, valamint a kliens
	neve <hostid>kliens</hostid>.  Ha csak ideiglenesen akarunk
	csatlakoztatni egy &aacute;llom&aacute;nyrendszert vagy
	egyszer&#251;en csak ki akarjuk pr&oacute;b&aacute;lni a
	be&aacute;ll&iacute;t&aacute;sainkat, a kliensen
	<username>root</username> felhaszn&aacute;l&oacute;k&eacute;nt
	az al&aacute;bbi parancsot hajtsuk v&eacute;gre:</para>

      <indexterm>
	<primary>NFS</primary>
	<secondary>csatlakoztat&aacute;s</secondary>
      </indexterm>

      <screen>&prompt.root; <userinput>mount szerver:/home /mnt</userinput></screen>

      <para>Ezzel a szerveren tal&aacute;lhat&oacute;
	<filename>/home</filename> k&ouml;nyvt&aacute;rat fogjuk a
	kliens <filename>/mnt</filename> k&ouml;nyvt&aacute;r&aacute;ba
	csatlakoztatni.  Ha mindent j&oacute;l
	be&aacute;ll&iacute;tottunk, akkor a kliensen most m&aacute;r be
	tudunk l&eacute;pni az <filename>/mnt</filename>
	k&ouml;nyvt&aacute;rba &eacute;s l&aacute;thatjuk a szerveren
	tal&aacute;lhat&oacute; &aacute;llom&aacute;nyokat.</para>

      <para>Ha a sz&aacute;m&iacute;t&oacute;g&eacute;p
	ind&iacute;t&aacute;s&aacute;val automatikusan akarunk
	h&aacute;l&oacute;zati &aacute;llom&aacute;nyrendszereket
	csatlakoztatni, akkor vegy&uuml;k fel ezeket az
	<filename>/etc/fstab</filename> &aacute;llom&aacute;nyba.  Erre
	&iacute;me egy p&eacute;lda:</para>

      <programlisting>szerver:/home	/mnt	nfs	rw	0	0</programlisting>

      <para>Az &man.fstab.5; man megtal&aacute;lhatjuk az &ouml;sszes
	t&ouml;bbi be&aacute;ll&iacute;t&aacute;st.</para>

    </sect2>

    <sect2>
      <title>Z&aacute;rol&aacute;sok</title>

      <para>Bizonyos alkalmaz&aacute;sok (p&eacute;ld&aacute;ul a
	<application>mutt</application>) csak akkor m&#251;k&ouml;dnek
	megfelel&#245;en, ha az &aacute;llom&aacute;nyokat a
	megfelel&#245; m&oacute;don z&aacute;rolj&aacute;k.  Az
	<acronym>NFS</acronym> eset&eacute;ben az
	<application>rpc.lockd</application> haszn&aacute;lhat&oacute;
	az ilyen z&aacute;rol&aacute;sok
	megval&oacute;s&iacute;t&aacute;s&aacute;ra.  Az
	enged&eacute;lyez&eacute;s&eacute;hez mind a szerveren &eacute;s
	a kliensen vegy&uuml;k fel a k&ouml;vetkez&#245; sort az
	<filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyba (itt
	m&aacute;r felt&eacute;telezz&uuml;k, hogy az
	<acronym>NFS</acronym> szervert &eacute;s klienst
	kor&aacute;bban be&aacute;ll&iacute;tottuk):</para>

      <programlisting>rpc_lockd_enable="YES"
rpc_statd_enable="YES"</programlisting>

      <para>A k&ouml;vetkez&#245; m&oacute;don ind&iacute;thatjuk
	el:</para>

      <screen>&prompt.root; <userinput>/etc/rc.d/lockd start</userinput>
&prompt.root; <userinput>/etc/rc.d/statd start</userinput></screen>

      <para>Ha nincs sz&uuml;ks&eacute;g&uuml;nk val&oacute;di
	z&aacute;rol&aacute;sra az <acronym>NFS</acronym> kliensek
	&eacute;s az <acronym>NFS</acronym> szerver k&ouml;z&ouml;tt,
	akkor megcsin&aacute;lhatjuk azt is, hogy az
	<acronym>NFS</acronym> kliensen a &man.mount.nfs.8; programnak
	az <option>-L</option> param&eacute;ter
	&aacute;tad&aacute;s&aacute;val csak helyileg
	v&eacute;gz&uuml;nk z&aacute;rol&aacute;st.  Ennek
	tov&aacute;bbi r&eacute;szleter&#245;l a &man.mount.nfs.8; man
	oldalon kaphatunk felvil&aacute;gos&iacute;t&aacute;st.</para>

    </sect2>

    <sect2>
      <title>Gyakori felhaszn&aacute;l&aacute;si m&oacute;dok</title>

      <para>Az <acronym>NFS</acronym> megold&aacute;s&aacute;t a
	gyakorlatban rengeteg esetben alkalmazz&aacute;k.  Ezek
	k&ouml;z&uuml;l most felsoroljuk a legelterjedtebbeket:</para>

      <indexterm>
	<primary>NFS</primary>
	<secondary>haszn&aacute;lata</secondary>
      </indexterm>

      <itemizedlist>
	<listitem>
	  <para>T&ouml;bb g&eacute;p k&ouml;z&ouml;tt megosztunk egy
	    telep&iacute;t&#245;lemezt vagy m&aacute;s
	    telep&iacute;t&#245;eszk&ouml;zt.  Ez &iacute;gy sokkal
	    olcs&oacute;bb &eacute;s gyakorta k&eacute;nyelmes
	    megold&aacute;s abban az esetben, ha egyszerre t&ouml;bb
	    g&eacute;pre akarjuk ugyanazt a szoftvert
	    telep&iacute;teni.</para>
	</listitem>

	<listitem>
	  <para>Nagyobb h&aacute;l&oacute;zatokon sokkal
	    k&eacute;nyelmesebb lehet egy k&ouml;zponti
	    <acronym>NFS</acronym> szerver haszn&aacute;lata, ahol a
	    felhaszn&aacute;l&oacute;k k&ouml;nyvt&aacute;rait
	    t&aacute;roljuk.  Ezek a felhaszn&aacute;l&oacute;i
	    k&ouml;nyvt&aacute;rak azt&aacute;n megoszthat&oacute;ak a
	    h&aacute;l&oacute;zaton kereszt&uuml;l, &iacute;gy a
	    felhaszn&aacute;l&oacute;k mindig ugyanazt a
	    k&ouml;nyv&aacute;rat kapj&aacute;k f&uuml;ggetlen&uuml;l
	    att&oacute;l, hogy milyen
	    munka&aacute;llom&aacute;sr&oacute;l is jelentkeztek
	    be.</para>
	</listitem>

	<listitem>
	  <para>T&ouml;bb g&eacute;ppel is k&eacute;pes &iacute;gy
	    osztozni az <filename>/usr/ports/distfiles</filename>
	    k&ouml;nyvt&aacute;ron.  Ezen a m&oacute;don sokkal
	    gyorsabban tudunk portokat telep&iacute;teni a
	    g&eacute;pekre, mivel nem kell k&uuml;l&ouml;n mindegyikre
	    let&ouml;lteni az ehhez sz&uuml;ks&eacute;ges
	    forr&aacute;sokat.</para>
	</listitem>
      </itemizedlist>

    </sect2>

    <sect2 id="network-amd">
      <sect2info>
	<authorgroup>
	  <author>
	    <firstname>Wylie</firstname>
	    <surname>Stilwell</surname>
	    <contrib>K&eacute;sz&iacute;tette: </contrib>
	  </author>
	</authorgroup>
	<authorgroup>
	  <author>
	    <firstname>Chern</firstname>
	    <surname>Lee</surname>
	    <contrib>&Uacute;jra&iacute;rta: </contrib>
	  </author>
	</authorgroup>
      </sect2info>

      <title>Automatikus csatlakoztat&aacute;s az
	<application>amd</application>
	haszn&aacute;lat&aacute;val</title>

      <indexterm><primary>amd</primary></indexterm>
      <indexterm><primary>automatikus csatlakoztat&oacute;
	d&eacute;mon</primary></indexterm>

      <para>Az &man.amd.8; (automatikus csatlakoztat&oacute;
	d&eacute;mon, az automatic mounter daemon)
	&ouml;nm&#251;k&ouml;d&#245;en csatlakoztatja a t&aacute;voli
	&aacute;llom&aacute;nyrendszereket, amikor azokon bel&uuml;l
	valamelyik &aacute;llom&aacute;nyhoz vagy
	k&ouml;nyvt&aacute;rhoz pr&oacute;b&aacute;lunk
	hozz&aacute;f&eacute;rni.  Emellett az
	<application>amd</application> az egy ideje m&aacute;r
	inakt&iacute;v &aacute;llom&aacute;nyrendszereket is
	automatikusan lev&aacute;lasztja.  Az
	<application>amd</application> haszn&aacute;lata egy remek
	alternat&iacute;v&aacute;t k&iacute;n&aacute;l az
	&aacute;ltal&aacute;ban az <filename>/etc/fstab</filename>
	&aacute;llom&aacute;nyban megjelen&#245; &aacute;lland&oacute;an
	csatlakoztatott &aacute;llom&aacute;nyrendszerekkel
	szemben.</para>

      <para>Az <application>amd</application> &uacute;gy
	m&#251;k&ouml;dik, hogy kapcsol&oacute;dik egy NFS szerver
	<filename>/host</filename> &eacute;s <filename>/net</filename>
	k&ouml;nyvt&aacute;raihoz.  Amikor egy &aacute;llom&aacute;nyt
	akarunk el&eacute;rni ezeken a k&ouml;nyvt&aacute;rakon
	bel&uuml;l, az <application>amd</application> kikeresi a
	megfelel&#245; t&aacute;voli csatlakoztat&aacute;st &eacute;s
	mag&aacute;t&oacute;l csatlakoztatja.  A
	<filename>/net</filename> seg&iacute;ts&eacute;g&eacute;vel egy
	IP-c&iacute;mr&#245;l tudunk export&aacute;lt
	&aacute;llom&aacute;nyrendszereket csatlakoztatni, mik&ouml;zben
	a <filename>/host</filename> a t&aacute;voli g&eacute;p
	h&aacute;l&oacute;zati neve eset&eacute;ben
	haszn&aacute;latos.</para>

      <para>Ha teh&aacute;t a <filename>/host/izemize/usr</filename>
	k&ouml;nyvt&aacute;rban akarunk el&eacute;rni egy
	&aacute;llom&aacute;nyt, akkor az <application>amd</application>
	d&eacute;monnak ahhoz el&#245;sz&ouml;r az
	<hostid>izemize</hostid> nev&#251; g&eacute;pr&#245;l
	export&aacute;lt <filename>/usr</filename>
	k&ouml;nyvt&aacute;rat kell csatlakoztatnia.</para>

      <example>
	<title>Egy export&aacute;lt &aacute;llom&aacute;nyrendszer
	  csatlakoztat&aacute;sa az <application>amd</application>
	  haszn&aacute;lat&aacute;val</title>

	<para>Egy t&aacute;voli sz&aacute;m&iacute;t&oacute;g&eacute;p
	  &aacute;ltal rendelkez&eacute;sre bocs&aacute;tott
	  megoszt&aacute;sokat a <command>showmount</command> paranccsal
	  tudjuk lek&eacute;rdezni.  P&eacute;ld&aacute;ul az
	  <hostid>izemize</hostid> g&eacute;pen el&eacute;rhet&#245;
	  export&aacute;lt &aacute;llom&aacute;nyrendszereket &iacute;gy
	  l&aacute;thatjuk:</para>

	<screen>&prompt.user; <userinput>showmount -e izemize</userinput>
Exports list on izemize:
/usr                               10.10.10.0
/a                                 10.10.10.0
&prompt.user; <userinput>cd /host/izemize/usr</userinput></screen>
      </example>

      <para>Ahogy a p&eacute;ld&aacute;ban l&aacute;tjuk is, a
	<command>showmount</command> parancs a <filename>/usr</filename>
	k&ouml;nyvt&aacute;rat mutatja megoszt&aacute;sk&eacute;nt.
	Amikor teh&aacute;t bel&eacute;p&uuml;nk a
	<filename>/host/izemize/usr</filename> k&ouml;nyvt&aacute;rba,
	akkor <application>amd</application> mag&aacute;t&oacute;l
	megpr&oacute;b&aacute;lja feloldani az <hostid>izemize</hostid>
	h&aacute;l&oacute;zati nevet &eacute;s csatlakoztatni az
	el&eacute;rni k&iacute;v&aacute;nt export&aacute;lt
	&aacute;llom&aacute;nyrendszert.</para>

      <para>Az <application>amd</application> az ind&iacute;t&oacute;
	szkripteken kereszt&uuml;l az <filename>/etc/rc.conf</filename>
	al&aacute;bbi be&aacute;ll&iacute;t&aacute;s&aacute;val
	enged&eacute;lyezhet&#245;:</para>

      <programlisting>amd_enable="YES"</programlisting>

      <para>Emellett m&eacute;g az <varname>amd_flags</varname>
	haszn&aacute;lat&aacute;val tov&aacute;bbi param&eacute;terek is
	&aacute;tadhat&oacute; az <application>amd</application>
	fel&eacute;.  Alap&eacute;rtelmez&eacute;s szerint az
	<varname>amd_flags</varname> tartalmaz az al&aacute;bbi:</para>

      <programlisting>amd_flags="-a /.amd_mnt -l syslog /host /etc/amd.map /net /etc/amd.map"</programlisting>

      <para>Az <filename>/etc/amd.map</filename> &aacute;llom&aacute;ny
	adja meg az export&aacute;lt &aacute;llom&aacute;nyrendszerek
	alap&eacute;rtelmezett be&aacute;ll&iacute;t&aacute;sait.  Az
	<filename>/etc/amd.conf</filename> &aacute;llom&aacute;nyban az
	<application>amd</application> tov&aacute;bbi
	lehet&#245;s&eacute;geit konfigur&aacute;lhatjuk..</para>

      <para>Ha t&ouml;bbet is szeretn&eacute;nk tudni a
	t&eacute;m&aacute;r&oacute;l, akkor az &man.amd.8; &eacute;s az
	&man.amd.conf.5; man oldalakat javasolt elolvasnunk.</para>

    </sect2>

    <sect2 id="network-nfs-integration">
      <sect2info>
	<authorgroup>
	  <author>
	    <firstname>John</firstname>
	    <surname>Lind</surname>
	    <contrib>K&eacute;sz&iacute;tette: </contrib>
	  </author>
	</authorgroup>
      </sect2info>

      <title>Probl&eacute;m&aacute;k m&aacute;s rendszerek
	haszn&aacute;latakor</title>

      <para>N&eacute;mely PC-s ISA buszos Ethernet
	k&aacute;rty&aacute;kra olyan korl&aacute;toz&aacute;sok
	&eacute;rv&eacute;nyesek, melyek komoly h&aacute;l&oacute;zati
	probl&eacute;m&aacute;k keletkez&eacute;s&eacute;hez
	vezethetnek, k&uuml;l&ouml;n&ouml;sen az NFS eset&eacute;ben.
	Ez a neh&eacute;zs&eacute;g nem &os;-f&uuml;gg&#245;, de a &os;
	rendszereket is &eacute;rinti.</para>

      <para>Ez gond &aacute;ltal&aacute;ban majdnem mindig akkor
	mer&uuml;l fel, amikor egy (&os;-s) PC egy
	h&aacute;l&oacute;zatba ker&uuml;l t&ouml;bbek k&ouml;zt a
	Silicon Graphic &eacute;s a Sun Microsystems &aacute;ltal
	gy&aacute;rtott nagyteljes&iacute;tm&eacute;ny&#251;
	munka&aacute;llom&aacute;sokkal.  Az NFS csatlakoztat&aacute;sa
	&eacute;s bizonyos m&#251;veletek m&eacute;g hib&aacute;tlanul
	v&eacute;grehajt&oacute;dnak, azonban hirtelen a szerver
	l&aacute;tsz&oacute;lag nem v&aacute;laszol t&ouml;bbet a kliens
	fel&eacute; &uacute;gy, hogy a t&ouml;bbi rendszert&#245;l
	folyamatosan dolgozza felfele a k&eacute;r&eacute;seket.  Ez a
	kliens rendszeren tapasztalhat&oacute; csak, amikor a kliens
	&os; vagy egy munka&aacute;llom&aacute;s.  Sok rendszeren
	egyszer&#251;en rendesen le sem lehet &aacute;ll&iacute;tani a
	klienst, ha a probl&eacute;ma egyszer m&aacute;r
	fel&uuml;t&ouml;tte a fej&eacute;t.  Egyed&uuml;li
	megold&aacute;s gyakran csak a kliens
	&uacute;jraind&iacute;t&aacute;sa marad, mivel az NFS-ben
	kialakult helyzetet m&aacute;shogy nem lehet megoldani.</para>

      <para>Noha a <quote>helyes</quote> megold&aacute;s az lenne, ha
	beszerezn&eacute;nk egy nagyobb teljes&iacute;tm&eacute;ny&#251;
	&eacute;s kapacit&aacute;s&uacute; k&aacute;rty&aacute;t a &os;
	rendszer sz&aacute;m&aacute;ra, azonban egy j&oacute;val
	egyszer&#251;bb ker&uuml;l&#245;&uacute;t is
	tal&aacute;lhat&oacute; a kiel&eacute;g&iacute;t&#245;
	m&#251;k&ouml;d&eacute;s el&eacute;r&eacute;s&eacute;hez.  Ha a
	&os; rendszer k&eacute;pviseli a <emphasis>szervert</emphasis>,
	akkor a kliensn&eacute;l adjuk meg a <option>-w=1024</option>
	be&aacute;ll&iacute;t&aacute;st is a
	csatlakoztat&aacute;sn&aacute;l.  Ha a &os; rendszer a
	<emphasis>kliens</emphasis> szerep&eacute;t t&ouml;lti be, akkor
	az NFS &aacute;llom&aacute;nyrendszert az
	<option>-r=1024</option> be&aacute;ll&iacute;t&aacute;ssal
	csatlakoztassuk r&oacute;la.  Ezek a
	be&aacute;ll&iacute;t&aacute;sok az <filename>fstab</filename>
	&aacute;llom&aacute;ny negyedik mez&#245;j&eacute;ben is
	megadhat&oacute;ak az automatikus csatlakoztat&aacute;shoz, vagy
	manu&aacute;lis esetben a &man.mount.8; parancsnak a
	<option>-o</option> param&eacute;terrel.</para>

      <para>Hozz&aacute; kell azonban tenn&uuml;nk, hogy l&eacute;tezik
	egy m&aacute;sik probl&eacute;ma, amit gyakran ezzel
	t&eacute;vesztenek &ouml;ssze, amikor az NFS szerverek &eacute;s
	kliensek nem ugyanabban a h&aacute;l&oacute;zatban
	tal&aacute;lhat&oacute;ak.  Ilyen esetekben mindenk&eacute;ppen
	<emphasis>gy&#245;z&#245;dj&uuml;nk meg r&oacute;la</emphasis>,
	hogy az &uacute;tv&aacute;laszt&oacute;k rendesen
	tov&aacute;bbk&uuml;ldik a m&#251;k&ouml;d&eacute;shez
	sz&uuml;ks&eacute;ges <acronym>UDP</acronym>
	inform&aacute;ci&oacute;kat, k&uuml;l&ouml;nben nem sokat tudunk
	tenni a megold&aacute;s &eacute;rdek&eacute;ben.</para>

      <para>A most k&ouml;vetkez&#245; p&eacute;ld&aacute;kban a
	<hostid>gyorsvonat</hostid> lesz a
	nagyteljes&iacute;tm&eacute;ny&#251; munka&aacute;llom&aacute;s
	(fel&uuml;let) neve, illetve a <hostid>freebsd</hostid> pedig a
	gyeng&eacute;bb teljes&iacute;tm&eacute;ny&#251; Ethernet
	k&aacute;rty&aacute;val rendelkez&#245; &os; rendszer
	(fel&uuml;let) neve.  A szerveren az
	<filename>/osztott</filename> nev&#251; k&ouml;nyvt&aacute;rat
	fogjuk NFS &aacute;llom&aacute;nyrendszerk&eacute;nt
	export&aacute;lni (l&aacute;sd &man.exports.5;), amelyet majd a
	<filename>/projekt</filename> k&ouml;nyvt&aacute;rba fogunk
	csatlakoztatni a kliensen.  Minden esetben &eacute;rdemes lehet
	m&eacute;g megadnunk a <option>hard</option> vagy
	<option>soft</option>, illetve <option>bg</option>
	opci&oacute;kat is.</para>

      <para>Ebben a p&eacute;ld&aacute;ban a &os; rendszer
	(<hostid>freebsd</hostid>) lesz a kliens, &eacute;s az
	<filename>/etc/fstab</filename>
	&aacute;llom&aacute;ny&aacute;ban &iacute;gy szerepel az
	export&aacute;lt &aacute;llom&aacute;nyrendszer:</para>

      <programlisting>gyorsvonat:/osztott /projekt nfs rw,-r=1024 0 0</programlisting>

      <para>&Eacute;s &iacute;gy tudjuk manu&aacute;lisan
	csatlakoztatni:</para>

      <screen>&prompt.root; <userinput>mount -t nfs -o -r=1024 gyorsvonat:/osztott /projekt</userinput></screen>

      <para>Itt a &os; rendszer lesz a szerver, &eacute;s a
	<hostid>gyorsvonat</hostid> <filename>/etc/fstab</filename>
	&aacute;llom&aacute;nya &iacute;gy fog kin&eacute;zni:</para>

      <programlisting>freebsd:/osztott /projekt nfs rw,-w=1024 0 0</programlisting>

      <para>Manu&aacute;lisan &iacute;gy csatlakoztathatjuk az
	&aacute;llom&aacute;nyrendszert:</para>

      <screen>&prompt.root; <userinput>mount -t nfs -o -w=1024 freebsd:/osztott /projekt</userinput></screen>

      <para>Szinte az &ouml;sszes 16&nbsp;bites Ethernet k&aacute;rtya
	k&eacute;pes m&#251;k&ouml;dni a fenti &iacute;r&aacute;si vagy
	olvas&aacute;si korl&aacute;toz&aacute;sok n&eacute;lk&uuml;l
	is.</para>

      <para>A k&iacute;v&aacute;ncsibb olvas&oacute;k
	sz&aacute;m&aacute;ra el&aacute;ruljuk, hogy pontosan
	mi&eacute;rt is k&ouml;vetkezik be ez a hiba, ami egyben arra is
	magyar&aacute;zatot ad, hogy mi&eacute;rt nem tudjuk
	helyrehozni.  Az NFS &aacute;ltal&aacute;ban 8&nbsp;kilobyte-os
	<quote>blokkokkal</quote> dolgozik (hab&aacute;r kisebb
	m&eacute;ret&#251; darabk&aacute;kat is tud
	k&eacute;sz&iacute;teni).  Mivel az Ethernet &aacute;ltal kezelt
	legnagyobb m&eacute;ret nagyj&aacute;b&oacute;l 1500&nbsp;byte,
	ez&eacute;rt az NFS <quote>blokkokat</quote> t&ouml;bb Ethernet
	csomagra kell osztani &mdash; m&eacute;g olyankor is, ha ez a
	program fels&#245;bb r&eacute;tegeiben osztatlan
	egys&eacute;gk&eacute;nt l&aacute;tszik &mdash; ezt azt&aacute;n
	fogadni kell, &ouml;sszerakni &eacute;s
	<emphasis>nyugt&aacute;zni</emphasis> mint egys&eacute;get.  A
	nagyteljes&iacute;tm&eacute;ny&#251;
	munka&aacute;llom&aacute;sok a szabv&aacute;ny &aacute;ltal
	m&eacute;g &eacute;ppen megengedett szoross&aacute;ggal
	k&eacute;pesek ontani magukb&oacute;l az egy egys&eacute;ghez
	tartoz&oacute; csomagokat, k&ouml;zvetlen&uuml;l egym&aacute;s
	ut&aacute;n.  A kisebb, gyeng&eacute;bb
	teljes&iacute;tm&eacute;ny&#251; k&aacute;rty&aacute;k
	eset&eacute;ben azonban az egym&aacute;shoz tartoz&oacute;,
	k&eacute;s&#245;bb &eacute;rkez&#245; csomagok r&aacute;futnak a
	kor&aacute;bban megkapott csomagokra m&eacute;g pontosan
	azel&#245;tt, hogy el&eacute;rn&eacute;k a g&eacute;pet,
	&iacute;gy az egys&eacute;gek nem
	&aacute;ll&iacute;that&oacute;ak &ouml;ssze vagy nem
	nyugt&aacute;zhat&oacute;ak.  Ennek
	eredm&eacute;nyek&eacute;ppen a munka&aacute;llom&aacute;s egy
	adott id&#245; m&uacute;lva megint pr&oacute;b&aacute;lkozik, de
	ism&eacute;t az eg&eacute;sz 8&nbsp;kilobyte-os blokkot
	k&uuml;ldi el, ez&eacute;rt ez a folyamat a
	v&eacute;gtelens&eacute;gig ism&eacute;tl&#245;dik.</para>

      <para>Ha a k&uuml;ldend&#245; egys&eacute;gek
	m&eacute;ret&eacute;t az Ethernet &aacute;ltal kezelt csomagok
	maxim&aacute;lis m&eacute;rete al&aacute; cs&ouml;kkentj&uuml;k,
	akkor biztosak lehet&uuml;nk benne, hogy a teljes Ethernet
	csomag egyben meg&eacute;rkezik &eacute;s
	nyugt&aacute;z&oacute;dik, &iacute;gy elker&uuml;lj&uuml;k a
	holtpontot.</para>

      <para>A nagyteljes&iacute;tm&eacute;ny&#251;
	munka&aacute;llom&aacute;sok term&eacute;szetesen
	tov&aacute;bbra is k&uuml;ldhetnek a PC-s rendszerek fel&eacute;
	t&uacute;lfut&oacute; csomagokat, de egy jobb
	k&aacute;rty&aacute;val az ilyen t&uacute;lfut&aacute;sok nem
	&eacute;rintik az NFS &aacute;ltal haszn&aacute;lt
	<quote>egys&eacute;geket</quote>.  Amikor egy ilyen
	t&uacute;lfut&aacute;s bek&ouml;vetkezik, az &eacute;rintett
	egys&eacute;get egyszer&#251;en &uacute;jra elk&uuml;ldik,
	amelyet a r&aacute;k&ouml;vetkez&#245; alkalommal nagy
	val&oacute;sz&iacute;n&#251;s&eacute;ggel m&aacute;r tudunk
	rendesen fogadni, &ouml;sszerakni &eacute;s
	nyugt&aacute;zni.</para>

    </sect2>
  </sect1>

  <sect1 id="network-nis">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Bill</firstname>
	  <surname>Swingle</surname>
	  <contrib>&Iacute;rta: </contrib>
	 </author>
      </authorgroup>
      <authorgroup>
	<author>
	  <firstname>Eric</firstname>
	  <surname>Ogren</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
	<author>
	  <firstname>Udo</firstname>
	  <surname>Erdelhoff</surname>
	</author>
      </authorgroup>
    </sect1info>

    <title>H&aacute;l&oacute;zati inform&aacute;ci&oacute;s rendszer
      (NIS/YP)</title>

    <sect2>
      <title>Mi ez?</title>

      <indexterm><primary>NIS</primary></indexterm>
      <indexterm><primary>Solaris</primary></indexterm>
      <indexterm><primary>HP-UX</primary></indexterm>
      <indexterm><primary>AIX</primary></indexterm>
      <indexterm><primary>Linux</primary></indexterm>
      <indexterm><primary>NetBSD</primary></indexterm>
      <indexterm><primary>OpenBSD</primary></indexterm>

      <para>A h&aacute;l&oacute;zati inform&aacute;ci&oacute;s
	szolg&aacute;ltat&aacute;st (Network Information Service, avagy
	<acronym role="Network Information System">NIS</acronym>) a Sun
	Microsystems fejlesztette ki a &unix; (eredetileg &sunos;)
	rendszerek k&ouml;zpontos&iacute;tott
	karbantart&aacute;s&aacute;hoz.  Mostanra m&aacute;r
	l&eacute;nyeg&eacute;ben ipari szabv&aacute;nny&aacute;
	n&#245;tte ki mag&aacute;t, hiszen az &ouml;sszes nagyobb
	&unix;-szer&#251; rendszer (a &solaris;, HP-UX, &aix;, Linux,
	NetBSD, OpenBSD, &os; stb.) t&aacute;mogatja a <acronym
	role="Network Information System">NIS</acronym>
	haszn&aacute;lat&aacute;t.</para>

      <indexterm>
	<primary>s&aacute;rga oldalak</primary>
	<see>NIS</see>
      </indexterm>

      <para>A <acronym role="Network Information System">NIS</acronym>
	r&eacute;gebben s&aacute;rga oldalak (Yellow Pages) n&eacute;ven
	volt ismert, de a k&uuml;l&ouml;nb&ouml;z&#245; jogi
	probl&eacute;m&aacute;k miatt k&eacute;s&#245;bb ezt a Sun
	megv&aacute;ltoztatta.  A r&eacute;gi elnevez&eacute;st
	(&eacute;s a yp r&ouml;vid&iacute;t&eacute;st) azonban
	m&eacute;g napjainkban is lehet n&eacute;hol
	l&aacute;tni.</para>

      <indexterm>
	<primary>NIS</primary>
	<secondary>tartom&aacute;nyok</secondary>
      </indexterm>

      <para>Ez egy RPC alapj&aacute;n m&#251;k&ouml;d&#245;,
	kliens/szerver fel&eacute;p&iacute;t&eacute;s&#251; rendszer,
	amely az egy NIS tartom&aacute;ny bel&uuml;l lev&#245;
	sz&aacute;m&iacute;t&oacute;g&eacute;pek sz&aacute;m&aacute;ra
	teszi lehet&#245;v&eacute; ugyanazon konfigur&aacute;ci&oacute;s
	&aacute;llom&aacute;nyok haszn&aacute;lat&aacute;t.
	Seg&iacute;ts&eacute;g&eacute;vel a rendszergazda a NIS
	klienseket a lehet&#245; legkevesebb adat
	hozz&aacute;ad&aacute;s&aacute;val,
	elt&aacute;vol&iacute;t&aacute;s&aacute;val vagy
	m&oacute;dos&iacute;t&aacute;s&aacute;val k&eacute;pes egyetlen
	helyr&#245;l be&aacute;ll&iacute;tani.</para>

      <indexterm><primary>Windows NT</primary></indexterm>

      <para>Hasonl&oacute; a &windowsnt; tartom&aacute;nyaihoz,
	&eacute;s hab&aacute;r a bels&#245; implement&aacute;ci&oacute;t
	tekintve m&aacute;r akadnak k&ouml;zt&uuml;k jelent&#245;s
	elt&eacute;r&eacute;sek is, az alapvet&#245; funkci&oacute;k
	szintj&eacute;n m&eacute;gis &ouml;sszevethet&#245;ek.</para>

    </sect2>

    <sect2>
      <title>A t&eacute;m&aacute;hoz tartoz&oacute; fogalmak &eacute;s
	programok</title>

      <para>A NIS telep&iacute;t&eacute;se sz&aacute;mos fogalom
	&eacute;s fontos felhaszn&aacute;l&oacute;i program ker&uuml;l
	el&#245; &os;-n, ak&aacute;r egy NIS szervert akarunk
	be&aacute;ll&iacute;tani, ak&aacute;r csak egy NIS
	klienst:</para>

      <indexterm><primary><application>rpcbind</application></primary></indexterm>
      <indexterm><primary><application>portmap</application></primary></indexterm>

      <informaltable frame="none" pgwide="1">
	<tgroup cols="2">
	<colspec colwidth="1*">
	<colspec colwidth="3*">

	  <thead>
	    <row>
	      <entry>Fogalom</entry>
	      <entry>Le&iacute;r&aacute;s</entry>
	    </row>
	  </thead>
	  <tbody>
	    <row>
	      <entry>NIS tartom&aacute;nyn&eacute;v</entry>
	      <entry>A NIS k&ouml;zponti szerverei &eacute;s az
		&ouml;sszes hozz&aacute;juk tartoz&oacute; kliens
		(bele&eacute;rtve az al&aacute;rendelt szervereket)
		rendelkezik egy NIS tartom&aacute;nyn&eacute;vvel.
		Hasonl&oacute; a &windowsnt; &aacute;ltal
		haszn&aacute;lt tartom&aacute;nynevekhez, de a NIS
		tartom&aacute;nynevei semmilyen kapcsolatban nem
		&aacute;llnak a n&eacute;vfelold&aacute;ssal.</entry>
	    </row>

	    <row>
	      <entry><application>rpcbind</application></entry>
	      <entry>Az <acronym>RPC</acronym> (Remote Procedure Call, a
		NIS &aacute;ltal haszn&aacute;lt egyik
		h&aacute;l&oacute;zati protokoll)
		enged&eacute;lyez&eacute;s&eacute;hez lesz r&aacute;
		sz&uuml;ks&eacute;g&uuml;nk.  Ha az
		<application>rpcbind</application> nem fut, akkor sem
		NIS szervert, sem pedig NIS klienst nem tudunk
		m&#251;k&ouml;dtetni.</entry>
	    </row>

	    <row>
	      <entry><application>ypbind</application></entry>
	      <entry>A NIS klienst <quote>k&ouml;ti &ouml;ssze</quote> a
		hozz&aacute;tartoz&oacute; NIS szerverrel.  A NIS
		tartom&aacute;nynevet a rendszert&#245;l veszi,
		&eacute;s az <acronym>RPC</acronym>
		haszn&aacute;lat&aacute;val csatlakozik a szerverhez.
		Az <application>ypbind</application> a NIS
		k&ouml;rnyezet kliens &eacute;s szerver k&ouml;zti
		kommunik&aacute;ci&oacute;j&aacute;nak magj&aacute;t
		alkotja.  Ha az <application>ypbind</application>
		le&aacute;ll a kliens g&eacute;p&eacute;n, akkor nem
		tudjuk el&eacute;rni a NIS szervert.</entry>
	    </row>

	    <row>
	      <entry><application>ypserv</application></entry>
	      <entry>Csak a NIS szervereken szabad futnia, mivel ez maga
		a NIS szerver programja.  Ha az &man.ypserv.8;
		le&aacute;ll, akkor a szerver nem lesz k&eacute;pes
		tov&aacute;bb kiszolg&aacute;lni a NIS
		k&eacute;r&eacute;seket (szerencs&eacute;re az
		al&aacute;rendelt szerverek k&eacute;pesek
		&aacute;tvenni ezeket).  A NIS bizonyos
		v&aacute;ltozatai (de nem az, amelyik a &os;-ben is
		megjelenik) nem pr&oacute;b&aacute;lnak meg m&aacute;s
		szerverekhez csatlakozni, ha bed&ouml;glik az
		aktu&aacute;lis haszn&aacute;lt szerver.  Ezen gyakran
		egyed&uuml;l csak a szervert k&eacute;pvisel&#245;
		program (vagy ak&aacute;r az eg&eacute;sz szerver)
		&uacute;jraind&iacute;t&aacute;sa seg&iacute;thet,
		illetve az <application>ypbind</application>
		&uacute;jraind&iacute;t&aacute;sa a kliensen.</entry>
	    </row>

	    <row>
	      <entry><application>rpc.yppasswdd</application></entry>
	      <entry>Ez egy olyan program, amelyet csak a NIS
		k&ouml;zponti szerverein kell csak futtatni.  Ez a
		d&eacute;mon a NIS kliensek sz&aacute;m&aacute;ra a NIS
		jelszavaik megv&aacute;ltoztat&aacute;s&aacute;t teszi
		lehet&#245;v&eacute;.  Ha ez a d&eacute;mon nem fut,
		akkor a felhaszn&aacute;l&oacute;k csak &uacute;gy
		tudj&aacute;k megv&aacute;ltoztatni a jelszavukat, ha
		bejelentkeznek a k&ouml;zponti NIS szerverre.</entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

    </sect2>

    <sect2>
      <title>Hogyan m&#251;k&ouml;dik?</title>

      <para>A NIS k&ouml;rnyezetekben h&aacute;romf&eacute;le g&eacute;p
	l&eacute;tezik: a k&ouml;zponti szerverek, az al&aacute;rendelt
	szerverek &eacute;s a kliensek.  A szerverek k&eacute;pezik a
	g&eacute;pek konfigur&aacute;ci&oacute;s
	inform&aacute;ci&oacute;inak k&ouml;zponti
	t&aacute;rhely&eacute;t.  A k&ouml;zponti szerverek
	t&aacute;rolj&aacute;k ezen inform&aacute;ci&oacute;k hiteles
	m&aacute;solat&aacute;t, m&iacute;g ezt az al&aacute;rendelt
	szerverek redund&aacute;nsan t&uuml;kr&ouml;zik.  A kliensek a
	szerverekre t&aacute;maszkodnak ezen inform&aacute;ci&oacute;k
	beszerz&eacute;s&eacute;hez.</para>

      <para>Sok &aacute;llom&aacute;ny tartalma megoszthat&oacute; ezen
	a m&oacute;don.  P&eacute;ld&aacute;ul a
	<filename>master.passwd</filename>, a <filename>group</filename>
	&eacute;s <filename>hosts</filename> &aacute;llom&aacute;nyokat
	meg szokt&aacute;k osztani NFS-en.  Amikor a kliensen
	fut&oacute; valamelyik programnak olyan
	inform&aacute;ci&oacute;ra lenne sz&uuml;ks&eacute;ge, amely
	&aacute;ltal&aacute;ban ezekben az &aacute;llom&aacute;nyokban
	n&aacute;la megtal&aacute;lhat&oacute; lenne, akkor helyette a
	NIS szerverhez fordul.</para>

      <sect3>
	<title>A g&eacute;pek t&iacute;pusai</title>

	<itemizedlist>
	  <indexterm>
	    <primary>NIS</primary>
	    <secondary>k&ouml;zponti szerver</secondary>
	  </indexterm>

	  <listitem>
	    <para>A <emphasis>k&ouml;zponti NIS szerver</emphasis>.  Ez
	      a szerver, amely legink&aacute;bb a &windowsnt;
	      els&#245;dleges
	      tartom&aacute;nyvez&eacute;rl&#245;j&eacute;hez
	      hasonl&iacute;that&oacute; tartja karban az &ouml;sszes,
	      NIS kliensek &aacute;ltal haszn&aacute;lt
	      &aacute;llom&aacute;nyt.  A <filename>passwd</filename>,
	      <filename>group</filename>, &eacute;s &ouml;sszes
	      t&ouml;bbi ehhez hasonl&oacute; &aacute;llom&aacute;ny
	      ezen a k&ouml;zponti szerveren tal&aacute;lhat&oacute;
	      meg.</para>

	    <note>
	      <para>Egy g&eacute;p ak&aacute;r t&ouml;bb NIS
		tartom&aacute;nyban is lehet k&ouml;zponti szerver.
		Ezzel a lehet&#245;s&eacute;ggel viszont itt most nem
		foglalkozunk, mivel most csak egy viszonylag kis
		m&eacute;ret&#251; NIS k&ouml;rnyezetet
		felt&eacute;telez&uuml;nk.</para>
	      </note>
	  </listitem>

	  <indexterm>
	    <primary>NIS</primary>
	    <secondary>al&aacute;rendelt szerver</secondary>
	  </indexterm>

	  <listitem>
	    <para>Az <emphasis>al&aacute;rendelt NIS
	      szerverek</emphasis>.  A &windowsnt; tartal&eacute;k
	      tartom&aacute;nyvez&eacute;rl&#245;ihez
	      hasonl&iacute;tanak, &eacute;s az al&aacute;rendelt NIS
	      szerverek feladata a k&ouml;zponti NIS szerveren
	      t&aacute;rolt adatok m&aacute;solatainak
	      karbantart&aacute;sa.  Az al&aacute;rendelt NIS szerverek
	      a redundancia megval&oacute;s&iacute;t&aacute;s&aacute;ban
	      seg&iacute;tenek, aminek legink&aacute;bb a fontosabb
	      k&ouml;rnyezetekben van szerepe.  Emellett a k&ouml;zponti
	      szerver terhel&eacute;s&eacute;nek
	      kiegyenl&iacute;t&eacute;s&eacute;t is elv&eacute;gzik.  A
	      NIS kliensek els&#245;k&eacute;nt mindig ahhoz a NIS
	      szerverhez csatlakoznak, amelyt&#245;l el&#245;sz&ouml;r
	      v&aacute;laszt kapnak, legyen ak&aacute;r az egy
	      al&aacute;rendelt szerver.</para>
	  </listitem>

	  <indexterm>
	    <primary>NIS</primary>
	    <secondary>kliens</secondary>
	  </indexterm>

	  <listitem>
	    <para>A <emphasis>NIS kliensek</emphasis>.  A NIS kliensek,
	      hasonl&oacute;an a &windowsnt;
	      munka&aacute;llom&aacute;sokhoz, a NIS szerveren (amely a
	      &windowsnt; munka&aacute;llom&aacute;sok eset&eacute;ben a
	      tartom&aacute;nyvez&eacute;rl&#245;) kereszt&uuml;l
	      jelentkeznek be.</para>
	  </listitem>
	</itemizedlist>

      </sect3>
    </sect2>

    <sect2>
      <title>A NIS/YP haszn&aacute;lata</title>

      <para>Ebben a szakaszban egy p&eacute;lda NIS k&ouml;rnyezetet
	&aacute;ll&iacute;tunk be.</para>

      <sect3>
	<title>Tervez&eacute;s</title>

	<para>Tegy&uuml;k fel, hogy egy apr&oacute;cska egyetemi labor
	  rendszergazd&aacute;i vagyunk.  A labor, mely 15 &os;-s
	  g&eacute;pet tudhat mag&aacute;&eacute;nak, jelen pillanatban
	  m&eacute;g semmilyen k&ouml;zpontos&iacute;tott
	  adminisztr&aacute;ci&oacute; nem l&eacute;tezik.  Mindegyik
	  g&eacute;p saj&aacute;t <filename>/etc/passwd</filename>
	  &eacute;s <filename>/etc/master.passwd</filename>
	  &aacute;llom&aacute;nnyal rendelkezik.  Ezeket az
	  &aacute;llom&aacute;nyokat saj&aacute;t kez&#251;leg kell
	  szinkronban tartani.  Teh&aacute;t ha most felvesz&uuml;nk egy
	  felhaszn&aacute;l&oacute;t a laborhoz, akkor az
	  <command>adduser</command> parancsot mind a 15 g&eacute;pen ki
	  kell adni.  Egy&eacute;rtelm&#251;, hogy ez &iacute;gy nem
	  maradhat, ez&eacute;rt &uacute;gy d&ouml;nt&ouml;tt&uuml;k,
	  hogy a laborban NIS-t fogunk haszn&aacute;lni, &eacute;s
	  k&eacute;t g&eacute;pet kinevez&uuml;nk szervernek.</para>

	<para>Az im&eacute;ntieknek megfelel&#245;en a labor most
	  valahogy &iacute;gy n&eacute;z ki:</para>

	<informaltable frame="none" pgwide="1">
	  <tgroup cols="3">
	    <thead>
	      <row>
		<entry>A g&eacute;p neve</entry>
		<entry>IP-c&iacute;m</entry>
		<entry>A g&eacute;p szerepe</entry>
	      </row>
	    </thead>
	    <tbody>
	      <row>
		<entry><hostid>ellington</hostid></entry>
		<entry><hostid role="ipaddr">10.0.0.2</hostid></entry>
		<entry>k&ouml;zponti NIS</entry>
	      </row>
	      <row>
		<entry><hostid>coltrane</hostid></entry>
		<entry><hostid role="ipaddr">10.0.0.3</hostid></entry>
		<entry>al&aacute;rendelt NIS</entry>
	      </row>
	      <row>
		<entry><hostid>basie</hostid></entry>
		<entry><hostid role="ipaddr">10.0.0.4</hostid></entry>
		<entry>tansz&eacute;ki munka&aacute;llom&aacute;s</entry>
	      </row>
	      <row>
		<entry><hostid>bird</hostid></entry>
		<entry><hostid role="ipaddr">10.0.0.5</hostid></entry>
		<entry>kliensg&eacute;p</entry>
	      </row>
	      <row>
		<entry><hostid>cli[1-11]</hostid></entry>
		<entry><hostid
		  role="ipaddr">10.0.0.[6-17]</hostid></entry>
		<entry>a t&ouml;bbi kliensg&eacute;p</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>Ha m&eacute;g nincs tapasztalatunk a NIS rendszerek
	  &ouml;ssze&aacute;ll&iacute;t&aacute;s&aacute;ban, akkor
	  el&#245;sz&ouml;r j&oacute; &ouml;tlet lehet
	  v&eacute;giggondolni, mik&eacute;nt is akarjuk
	  kialak&iacute;tani.  A h&aacute;l&oacute;zatunk
	  m&eacute;ret&eacute;t&#245;l f&uuml;ggetlen&uuml;l is akadnak
	  olyan d&ouml;nt&eacute;sek, amelyeket mindenk&eacute;ppen meg
	  kell hoznunk.</para>

	<sect4>
	  <title>A NIS tartom&aacute;nyn&eacute;v
	    megv&aacute;laszt&aacute;sa</title>

	  <indexterm>
	    <primary>NIS</primary>
	    <secondary>tartom&aacute;nyn&eacute;v</secondary>
	  </indexterm>

	  <para>Ez nem az a <quote>tartom&aacute;nyn&eacute;v</quote>,
	    amit megszokhattunk.  Ennek a pontos neve <quote>NIS
	    tartom&aacute;nyn&eacute;v</quote>.  Amikor a kliensek
	    k&eacute;rnek valamilyen inform&aacute;ci&oacute;t, akkor
	    megadj&aacute;k annak a NIS tartom&aacute;nynak a
	    nev&eacute;t is, amelynek r&eacute;szei.  &Iacute;gy tud egy
	    h&aacute;l&oacute;zaton t&ouml;bb szerver arr&oacute;l
	    d&ouml;nteni, hogy melyik&uuml;k melyik k&eacute;r&eacute;st
	    v&aacute;laszolja meg.  A NIS &aacute;ltal haszn&aacute;lt
	    tartom&aacute;nyn&eacute;vre teh&aacute;t ink&aacute;bb
	    &uacute;gy &eacute;rdemes gondolni, mint egy valamilyen
	    m&oacute;don &ouml;sszetartoz&oacute; g&eacute;pek
	    k&ouml;z&ouml;s nev&eacute;re.</para>

	  <para>El&#245;fordul, hogy egyes szervezetek az interneten is
	    nyilv&aacute;ntartott tartom&aacute;nynev&uuml;ket
	    v&aacute;lasztj&aacute;k NIS tartom&aacute;nyn&eacute;vnek.
	    Ez alapvet&#245;en nem aj&aacute;nlott, mivel a
	    h&aacute;l&oacute;zati probl&eacute;m&aacute;k
	    felder&iacute;t&eacute;se k&ouml;zben
	    f&eacute;lre&eacute;rt&eacute;seket sz&uuml;lhet.  A NIS
	    tartom&aacute;nyn&eacute;vnek a h&aacute;l&oacute;zatunkon
	    bel&uuml;l egyedinek kell lennie, &eacute;s lehet&#245;leg
	    min&eacute;l jobban &iacute;rja le az &aacute;ltala
	    csoportba sorolt g&eacute;peket.  P&eacute;ld&aacute;ul a
	    Kis Kft.  &uuml;zleti oszt&aacute;ly&aacute;t tegy&uuml;k a
	    <quote>kis-uzlet</quote> NIS tartom&aacute;nyba.  Ebben a
	    p&eacute;ld&aacute;ban most a
	    <literal>proba-tartomany</literal> nevet
	    v&aacute;lasztottuk.</para>

	  <indexterm><primary>SunOS</primary></indexterm>

	  <para>A legt&ouml;bb oper&aacute;ci&oacute;s rendszer azonban
	    (k&ouml;zt&uuml;k a &sunos;) a NIS tartom&aacute;nynevet
	    haszn&aacute;lja internetes
	    tartom&aacute;nyn&eacute;vk&eacute;nt is.  Ha a
	    h&aacute;l&oacute;zatunkon egy vagy t&ouml;bb ilyen
	    g&eacute;p is tal&aacute;lhat&oacute;, akkor a NIS
	    tartom&aacute;ny nev&eacute;nek az internetes
	    tartom&aacute;nynevet <emphasis>kell</emphasis>
	    megadnunk.</para>

	</sect4>

	<sect4>
	  <title>A szerverek fizikai elv&aacute;r&aacute;sai</title>

	  <para>Nem &aacute;rt n&eacute;h&aacute;ny dolgot fejben
	    tartani, amikor a NIS szervernek haszn&aacute;lt
	    g&eacute;pet kiv&aacute;lasztjuk.  Az egyik ilyen
	    szerencs&eacute;tlen dolog az a szint&#251;
	    f&uuml;gg&#245;s&eacute;g, ami a NIS kliensek fel&#245;l
	    megfigyelhet&#245; a szerverek fel&eacute;.  Ha egy kliens
	    nem tudja a NIS tartom&aacute;nyon bel&uuml;l felvenni a
	    kapcsolatot valamelyik szerverrel, akkor az a g&eacute;p
	    k&ouml;nnyen megb&iacute;zhatatlann&aacute; v&aacute;lhat.
	    Felhaszn&aacute;l&oacute;i- &eacute;s
	    csoportinform&aacute;ci&oacute;k n&eacute;lk&uuml;l a
	    legt&ouml;bb rendszer egy id&#245;re le is merevedik.  Ennek
	    figyelembev&eacute;tel&eacute;vel teh&aacute;t olyan
	    g&eacute;pet kell szervernek v&aacute;lasztanunk, amelyet
	    nem kell gyakran &uacute;jraind&iacute;tani, &eacute;s nem
	    v&eacute;gz&uuml;nk rajta semmilyen komoly munk&aacute;t.  A
	    c&eacute;lnak legjobban megfelel&#245; NIS szerverek
	    val&oacute;j&aacute;ban olyan g&eacute;pek, amelyek
	    egyed&uuml;li feladata csak a NIS k&eacute;r&eacute;sek
	    kiszolg&aacute;l&aacute;sa.  Ha a h&aacute;l&oacute;zatunk
	    nem annyira leterhelt, akkor m&eacute;g a NIS szerver
	    mellett m&aacute;s programokat is futtathatunk, de ne
	    feledj&uuml;k, hogy ha a NIS szolg&aacute;ltat&aacute;s
	    megsz&#251;nik, akkor az az <emphasis>&ouml;sszes</emphasis>
	    NIS kliensen &eacute;reztetni fogja kedvez&#245;tlen
	    hat&aacute;s&aacute;t.</para>

	</sect4>
      </sect3>

      <sect3>
	<title>A NIS szerverek</title>

	<para>A NIS rendszerben t&aacute;rolt &ouml;sszes
	  inform&aacute;ci&oacute; &aacute;ltal&aacute;nos
	  p&eacute;ld&aacute;nya egyetlen g&eacute;pen
	  tal&aacute;lhat&oacute; meg, amelyet a k&ouml;zponti NIS
	  szervernek h&iacute;vunk.  Az inform&aacute;ci&oacute;k
	  t&aacute;rol&aacute;s&aacute;ra sz&aacute;nt adatb&aacute;zis
	  pedig NIS t&aacute;bl&aacute;zatoknak (NIS map) nevezz&uuml;k.
	  &os; alatt ezek a t&aacute;bl&aacute;zatok a
	  <filename>/var/yp/<replaceable>tartom&aacute;nyn&eacute;v</replaceable></filename>
	  k&ouml;nyvt&aacute;rban tal&aacute;lhat&oacute;ak, ahol a
	  <filename><replaceable>tartom&aacute;nyn&eacute;v</replaceable></filename>
	  a kiszolg&aacute;lt NIS tartom&aacute;nyt nevezi meg.
	  Egyetlen NIS szerver egyszerre ak&aacute;r t&ouml;bb
	  tartom&aacute;nyt is kiszolg&aacute;lhat, &iacute;gy itt
	  t&ouml;bb k&ouml;nyvt&aacute;r is tal&aacute;lhat&oacute;,
	  minden t&aacute;mogatott tartom&aacute;nyhoz egy.  Minden
	  tartom&aacute;ny saj&aacute;t, egym&aacute;st&oacute;l
	  f&uuml;ggetlen t&aacute;bl&aacute;zatokkal rendelkezik.</para>

	<para>A k&ouml;zponti &eacute;s al&aacute;rendelt NIS szerverek
	  az <command>ypserv</command> d&eacute;mon
	  seg&iacute;ts&eacute;g&eacute;vel dolgozz&aacute;k fel a NIS
	  k&eacute;r&eacute;seket.  Az <command>ypserv</command>
	  felel&#245;s a NIS kliensekt&#245;l befut&oacute;
	  k&eacute;r&eacute;sek fogad&aacute;s&aacute;&eacute;rt,
	  &eacute;s a k&eacute;rt tartom&aacute;ny valamint
	  t&aacute;bl&aacute;zat nev&eacute;b&#245;l meghat&aacute;rozza
	  az adatb&aacute;zisban t&aacute;rolt &aacute;llom&aacute;nyt,
	  majd innen visszak&uuml;ldi a hozz&aacute;tartoz&oacute;
	  adatot a kliensnek.</para>

	<sect4>
	  <title>A k&ouml;zponti NIS szerver
	    be&aacute;ll&iacute;t&aacute;sa</title>

	  <indexterm>
	    <primary>NIS</primary>
	    <secondary>szerver
	      be&aacute;ll&iacute;t&aacute;sa</secondary>
	  </indexterm>

	  <para>A k&ouml;zponti NIS szerver
	    be&aacute;ll&iacute;t&aacute;sa viszonylag
	    mag&aacute;t&oacute;l &eacute;rtet&#245;d&#245;, de a
	    neh&eacute;zs&eacute;g&eacute;t az ig&eacute;nyeink
	    szabj&aacute;k meg.  A &os; alapb&oacute;l t&aacute;mogatja
	    a NIS haszn&aacute;lat&aacute;t.  Ez&eacute;rt
	    mind&ouml;ssze annyit kell tenn&uuml;nk, hogy a
	    k&ouml;vetkez&#245; sorokat betessz&uuml;k az
	    <filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyba,
	    &eacute;s a &os; gondoskodik a t&ouml;bbir&#245;l.</para>

	  <procedure>
	    <step>
	      <para><programlisting>nisdomainname="proba-tartomany"</programlisting>
		Ez a sor adja meg a h&aacute;l&oacute;zati
		be&aacute;ll&iacute;t&aacute;sok (vagy
		p&eacute;ld&aacute;ul az
		&uacute;jraind&iacute;t&aacute;s) sor&aacute;n a NIS
		tartom&aacute;ny nev&eacute;t, amely a kor&aacute;bbiak
		szerint itt most a
		<literal>proba-tartomany</literal>.</para>
	    </step>

	    <step>
	      <para><programlisting>nis_server_enable="YES"</programlisting>
		Ezzel utas&iacute;tjuk a &os;-t, hogy a
		h&aacute;l&oacute;zati alkalmaz&aacute;sok
		k&ouml;vetkez&#245; ind&iacute;t&aacute;sakor a NIS
		szervert is aktiv&aacute;lja.</para>
	    </step>

	    <step>
	      <para><programlisting>nis_yppasswdd_enable="YES"</programlisting>
		Ezzel enged&eacute;lyezz&uuml;k az
		<command>rpc.yppasswdd</command> d&eacute;mont, amely a
		kor&aacute;bban eml&iacute;tettek szerint
		lehet&#245;v&eacute; teszi a felhaszn&aacute;l&oacute;k
		sz&aacute;m&aacute;ra, hogy a k&ouml;zvetlen&uuml;l a
		kliensekr&#245;l v&aacute;ltoztass&aacute;k meg a NIS
		jelszavukat.</para>
	    </step>
	  </procedure>

	  <note>
	    <para>A konkr&eacute;t NIS
	      be&aacute;ll&iacute;t&aacute;sainkt&oacute;l
	      f&uuml;gg&#245;en tov&aacute;bbi bejegyz&eacute;sek
	      felv&eacute;tel&eacute;re is sz&uuml;ks&eacute;g&uuml;nk
	      lehet.  Erre k&eacute;s&#245;bb m&eacute;g <link
	      linkend="network-nis-server-is-client">az olyan NIS
	      szerverekn&eacute;l, amelyek egyben NIS kliensek</link>,
	      vissza fogunk t&eacute;rni.</para>
	  </note>

	  <para>Most mind&ouml;ssze annyit kell tenn&uuml;nk, hogy
	    rendszeradminisztr&aacute;tork&eacute;nt kiadjuk az
	    <command>/etc/netstart</command> parancsot.  Az
	    <filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyban
	    szerepl&#245; adatok alapj&aacute;n mindent
	    be&aacute;ll&iacute;t mag&aacute;t&oacute;l.</para>

	</sect4>

	<sect4>
	  <title>A NIS t&aacute;bl&aacute;zatok
	    inicializ&aacute;l&aacute;sa</title>

	  <indexterm>
	    <primary>NIS</primary>
	    <secondary>t&aacute;bl&aacute;zatok</secondary>
	  </indexterm>

	  <para>A <emphasis>NIS t&aacute;bl&aacute;zatok</emphasis>
	    l&eacute;nyeg&eacute;ben a <filename>/var/yp</filename>
	    k&ouml;nyvt&aacute;rban t&aacute;rolt adatb&aacute;zisok.  A
	    k&ouml;zponti NIS szerver <filename>/etc</filename>
	    k&ouml;nyvt&aacute;r&aacute;ban tal&aacute;lhat&oacute;
	    konfigur&aacute;ci&oacute;s
	    &aacute;llom&aacute;nyokb&oacute;l
	    &aacute;ll&iacute;t&oacute;dnak el&#245;, egyetlen
	    kiv&eacute;tellel: ez az
	    <filename>/etc/master.passwd</filename>
	    &aacute;llom&aacute;ny.  Ennek megvan a maga oka, hiszen nem
	    akarjuk a <username>root</username> &eacute;s az &ouml;sszes
	    t&ouml;bbi fontosabb felhaszn&aacute;l&oacute;hoz
	    tartoz&oacute; jelsz&oacute;t az eg&eacute;sz NIS
	    tartom&aacute;nnyal megosztani.  Ennek megfelel&#245;en a
	    NIS t&aacute;bl&aacute;zatok
	    inicializ&aacute;l&aacute;s&aacute;hoz a
	    k&ouml;vetkez&#245;t kell tenn&uuml;nk:</para>

	  <screen>&prompt.root; <userinput>cp /etc/master.passwd /var/yp/master.passwd</userinput>
&prompt.root; <userinput>cd /var/yp</userinput>
&prompt.root; <userinput>vi master.passwd</userinput></screen>

	  <para>El kell t&aacute;vol&iacute;tanunk az &ouml;sszes
	    rendszerszint&#251; (<username>bin</username>,
	    <username>tty</username>, <username>kmem</username>,
	    <username>games</username>, stb), &eacute;s minden olyan
	    egy&eacute;b hozz&aacute;f&eacute;r&eacute;st, amelyeket nem
	    akarjuk k&ouml;zvet&iacute;teni a NIS kliensek fel&eacute;
	    (p&eacute;ld&aacute;ul a <username>root</username> &eacute;s
	    minden m&aacute;s null&aacute;s, vagyis
	    rendszeradminisztr&aacute;tori azonos&iacute;t&oacute;val
	    ell&aacute;tott hozz&aacute;f&eacute;r&eacute;st).</para>

	  <note>
	    <para>Gondoskodjunk r&oacute;la, hogy az
	      <filename>/var/yp/master.passwd</filename>
	      &aacute;llom&aacute;ny sem a csoport, sem pedig
	      b&aacute;rki m&aacute;s sz&aacute;m&aacute;ra nem
	      olvashat&oacute; (600-as enged&eacute;ly)!  Ennek
	      be&aacute;ll&iacute;t&aacute;s&aacute;hoz
	      haszn&aacute;ljuk az <command>chmod</command> parancsot,
	      ha sz&uuml;ks&eacute;ges.</para>
	  </note>

	  <indexterm><primary>Tru64 UNIX</primary></indexterm>

	  <para>Ha v&eacute;gezt&uuml;nk, akkor m&aacute;r
	    t&eacute;nyleg itt az ideje inicializ&aacute;lni NIS
	    t&aacute;bl&aacute;zatainkat.  A &os; erre egy
	    <command>ypinit</command> nev&#251; szkriptet aj&aacute;nl
	    fel (err&#245;l a saj&aacute;t man oldal&aacute;n tudhatunk
	    meg t&ouml;bbet).  Ez a szkript egy&eacute;bk&eacute;nt a
	    legt&ouml;bb &unix; t&iacute;pus&uacute;
	    oper&aacute;ci&oacute;s rendszeren
	    megtal&aacute;lhat&oacute;, de nem az &ouml;sszesen.  A
	    Digital UNIX/Compaq Tru64 UNIX rendszereken ennek a neve
	    <command>ypsetup</command>.  Mivel most a k&ouml;zponti NIS
	    szerver t&aacute;bl&aacute;zatait hozzuk l&eacute;tre,
	    az&eacute;rt az <command>ypinit</command> szkriptnek
	    &aacute;t kell adnunk a <option>-m</option> opci&oacute;t
	    is.  A NIS t&aacute;bl&aacute;zatok
	    el&#245;&aacute;ll&iacute;t&aacute;s&aacute;n&aacute;l
	    felt&eacute;telezz&uuml;k, hogy a fentebb ismertetett
	    l&eacute;p&eacute;seket m&aacute;r megtett&uuml;k, majd
	    kiadjuk ezt a parancsot:</para>

	  <screen>ellington&prompt.root; <userinput>ypinit -m proba-tartomany</userinput>
Server Type: MASTER Domain: proba-tartomany
Creating an YP server will require that you answer a few questions.
Questions will all be asked at the beginning of the procedure.
Do you want this procedure to quit on non-fatal errors? [y/n: n] <userinput>n</userinput>
Ok, please remember to go back and redo manually whatever fails.
If you don't, something might not work.
At this point, we have to construct a list of this domains YP servers.
rod.darktech.org is already known as master server.
Please continue to add any slave servers, one per line. When you are
done with the list, type a &lt;control D&gt;.
master server   :  ellington
next host to add:  <userinput>coltrane</userinput>
next host to add:  <userinput>^D</userinput>
The current list of NIS servers looks like this:
ellington
coltrane
Is this correct?  [y/n: y] <userinput>y</userinput>

[ .. a t&aacute;bl&aacute;zatok gener&aacute;l&aacute;sa .. ]

NIS Map update completed.
ellington has been setup as an YP master server without any errors.</screen>

	  <para>Az &uuml;zenetek ford&iacute;t&aacute;sa:</para>

	  <screen>A szerver t&iacute;pusa: K&Ouml;ZPONTI, tartom&aacute;ny: proba-tartomany
Az YP szerver l&eacute;trehoz&aacute;s&aacute;hoz meg kell v&aacute;laszolni n&eacute;h&aacute;ny k&eacute;rd&eacute;st az
elj&aacute;r&aacute;s megkezd&eacute;se el&#245;tt.
Szeretn&eacute;nk, ha az elj&aacute;r&aacute;s megszakadna a nem v&eacute;gzetes hib&aacute;k eset&eacute;n is? [i/n: n] <userinput>n</userinput>
Rendben, akkor ne felejts&uuml;k el manu&aacute;lisan kijav&iacute;tani a hib&aacute;t, ha
valamivel gond lenne.  Ha nem tessz&uuml;k meg, akkor el&#245;fordulhat, hogy
valami nem fog rendesen m&#251;k&ouml;dni.  Most &ouml;ssze kell &aacute;ll&iacute;tanunk egy list&aacute;t
a tartom&aacute;ny YP szervereir&#245;l.
Jelenleg a rod.darktech.org a k&ouml;zponti szerver.
K&eacute;rj&uuml;nk, adjon meg tov&aacute;bbi al&aacute;rendelt szervereket, soronk&eacute;nt egyet.
Amikor ezt befejezt&uuml;k, a &lt;control D&gt; lenyom&aacute;s&aacute;val tudunk
kil&eacute;pni.
k&ouml;zponti szerver : ellington
k&ouml;vetkez&#245; g&eacute;p    : <userinput>coltrane</userinput>
k&ouml;vetkez&#245; g&eacute;p    : <userinput>^D</userinput>
A NIS szerverek list&aacute;ja jelenleg a k&ouml;vetkez&#245;:
ellington
coltrane
Ez megfelel&#245;?  [i/n: i] <userinput>i</userinput>

[ .. a t&aacute;bl&aacute;zatok gener&aacute;l&aacute;sa .. ]

A NIS t&aacute;bl&aacute;zatok sikeressen friss&uuml;ltek.
Az elligon szervert minden hiba n&eacute;lk&uuml;l siker&uuml;lt k&ouml;zponti szerverk&eacute;nt
be&aacute;ll&iacute;tani.</screen>

	  <para>Az <command>ypinit</command> a
	    <filename>/var/yp/Makefile.dist</filename>
	    &aacute;llom&aacute;nyb&oacute;l l&eacute;trehozza a
	    <filename>/var/yp/Makefile</filename>
	    &aacute;llom&aacute;nyt.  Amennyiben ez
	    l&eacute;trej&ouml;tt, az &aacute;llom&aacute;ny
	    felt&eacute;telezi, hogy csak &os;-s g&eacute;pek
	    r&eacute;szv&eacute;tel&eacute;vel akarunk
	    kialak&iacute;tani egy egyszerveres NIS k&ouml;rnyezetet.
	    Mivel a <literal>proba-tartomany</literal> m&eacute;g egy
	    al&aacute;rendelt szervert is tartalmaz, ez&eacute;rt
	    &aacute;t kell &iacute;rnunk a
	    <filename>/var/yp/Makefile</filename>
	    &aacute;llom&aacute;nyt:</para>

	  <screen>ellington&prompt.root; <userinput>vi /var/yp/Makefile</userinput></screen>

	  <para>Ezt a sort kell megjegyz&eacute;sbe tenn&uuml;nk:</para>

	  <programlisting>NOPUSH = "True"</programlisting>

	  <para>(ha m&eacute;g nem lenne &uacute;gy).</para>

	</sect4>

	<sect4>
	  <title>Az al&aacute;rendelt NIS szerverek
	    be&aacute;ll&iacute;t&aacute;sa</title>

	  <indexterm>
	    <primary>NIS</primary>
	    <secondary>al&aacute;rendelt szerver</secondary>
	  </indexterm>

	  <para>Az al&aacute;rendelt NIS szerverek
	    be&aacute;ll&iacute;t&aacute;sa m&eacute;g a
	    k&ouml;zpontin&aacute;l is egyszer&#251;bb.
	    Jelentkezz&uuml;nk be az al&aacute;rendelt szerverre
	    &eacute;s az eddigieknek megfelel&#245;en &iacute;rjuk
	    &aacute;t az <filename>/etc/rc.conf</filename>
	    &aacute;llom&aacute;nyt.  Az egyetlen
	    k&uuml;l&ouml;nbs&eacute;g ez&uacute;ttal csup&aacute;n
	    annyi lesz, hogy az <command>ypinit</command>
	    lefuttat&aacute;sakor a <option>-s</option> opci&oacute;t
	    kell megadnunk (mint slave, vagyis al&aacute;rendelt).  A
	    <option>-s</option> opci&oacute; haszn&aacute;lat&aacute;hoz
	    a k&ouml;zponti NIS szerver nev&eacute;t is &aacute;t kell
	    adnunk, ez&eacute;rt a konkr&eacute;t parancs valahogy
	    &iacute;gy fog kin&eacute;zni:</para>

	  <screen>coltrane&prompt.root; <userinput>ypinit -s ellington proba-tartomany</userinput>

Server Type: SLAVE Domain: test-domain Master: ellington

Creating an YP server will require that you answer a few questions.
Questions will all be asked at the beginning of the procedure.

Do you want this procedure to quit on non-fatal errors? [y/n: n]  <userinput>n</userinput>

Ok, please remember to go back and redo manually whatever fails.
If you don't, something might not work.
There will be no further questions. The remainder of the procedure
should take a few minutes, to copy the databases from ellington.
Transferring netgroup...
ypxfr: Exiting: Map successfully transferred
Transferring netgroup.byuser...
ypxfr: Exiting: Map successfully transferred
Transferring netgroup.byhost...
ypxfr: Exiting: Map successfully transferred
Transferring master.passwd.byuid...
ypxfr: Exiting: Map successfully transferred
Transferring passwd.byuid...
ypxfr: Exiting: Map successfully transferred
Transferring passwd.byname...
ypxfr: Exiting: Map successfully transferred
Transferring group.bygid...
ypxfr: Exiting: Map successfully transferred
Transferring group.byname...
ypxfr: Exiting: Map successfully transferred
Transferring services.byname...
ypxfr: Exiting: Map successfully transferred
Transferring rpc.bynumber...
ypxfr: Exiting: Map successfully transferred
Transferring rpc.byname...
ypxfr: Exiting: Map successfully transferred
Transferring protocols.byname...
ypxfr: Exiting: Map successfully transferred
Transferring master.passwd.byname...
ypxfr: Exiting: Map successfully transferred
Transferring networks.byname...
ypxfr: Exiting: Map successfully transferred
Transferring networks.byaddr...
ypxfr: Exiting: Map successfully transferred
Transferring netid.byname...
ypxfr: Exiting: Map successfully transferred
Transferring hosts.byaddr...
ypxfr: Exiting: Map successfully transferred
Transferring protocols.bynumber...
ypxfr: Exiting: Map successfully transferred
Transferring ypservers...
ypxfr: Exiting: Map successfully transferred
Transferring hosts.byname...
ypxfr: Exiting: Map successfully transferred

coltrane has been setup as an YP slave server without any errors.
Don't forget to update map ypservers on ellington.</screen>

	  <para>Most m&aacute;r lennie kell egy
	    <filename>/var/yp/proba-tartomany</filename> nev&#251;
	    k&ouml;nyvt&aacute;runknak is.  A k&ouml;zponti NIS szerver
	    t&aacute;bl&aacute;zatainak m&aacute;solata itt fognak
	    t&aacute;rol&oacute;dni.  Ezeket soha ne felejts&uuml;k el
	    frissen tartani.  Az al&aacute;rendelt szervereken a
	    k&ouml;vetkez&#245; <filename>/etc/crontab</filename>
	    bejegyz&eacute;sek pontosan ezt a feladatot
	    l&aacute;tj&aacute;k el:</para>

	  <programlisting>20      *       *       *       *       root   /usr/libexec/ypxfr passwd.byname
21      *       *       *       *       root   /usr/libexec/ypxfr passwd.byuid</programlisting>

	  <para>Ez a k&eacute;t sor gondoskodik r&oacute;la, hogy az
	    al&aacute;rendelt szerverek ne felejts&eacute;k el
	    egyeztetni a t&aacute;bl&aacute;zataikat a k&ouml;zponti
	    szerver t&aacute;bl&aacute;zataival.  Hab&aacute;r ezek a
	    bejegyz&eacute;sek nem n&eacute;lk&uuml;l&ouml;zhetetlenek a
	    megfelel&#245; m&#251;k&ouml;d&eacute;shez, mivel a
	    k&ouml;zponti szerver mindig igyekszik az al&aacute;rendelt
	    szervereknek elk&uuml;ldeni a NIS
	    t&aacute;bl&aacute;zataiban l&eacute;trej&ouml;tt
	    v&aacute;ltoz&aacute;sokat.  Mivel azonban a jelszavak
	    l&eacute;tfontoss&aacute;g&uacute;ak a szervert&#245;l
	    f&uuml;gg&#245; rendszerek sz&aacute;m&aacute;ra,
	    ez&eacute;rt j&oacute; &ouml;tlet lehet explicit
	    m&oacute;don is el&#245;&iacute;rni a
	    friss&iacute;t&eacute;st.  Ez a forgalmasabb
	    h&aacute;l&oacute;zatokon nagyobb jelent&#245;s&eacute;ggel
	    b&iacute;r, mivel ott a t&aacute;bl&aacute;zatok
	    friss&iacute;t&eacute;se nem mindig fejez&#245;dik be
	    rendesen.</para>

	  <para>Most pedig futassuk le a
	    <command>/etc/netstart</command> parancsot az
	    al&aacute;rendelt szervereken is, amivel &iacute;gy elindul
	    a NIS szerver.</para>

	</sect4>
      </sect3>

      <sect3>
	<title>A NIS kliensek</title>

	<para>A NIS kliens az <command>ypbind</command> d&eacute;mon
	  seg&iacute;ts&eacute;g&eacute;vel egy k&ouml;t&eacute;snek
	  (bind) nevezett kapcsolatot &eacute;p&iacute;t ki egy adott
	  NIS szerverrel.  Az <command>ypbind</command> ellen&#245;rzi a
	  rendszer alap&eacute;rtelmezett tartom&aacute;ny&aacute;t (ezt
	  a <command>domainname</command> paranccsal
	  &aacute;ll&iacute;tottunk be), majd RPC
	  k&eacute;r&eacute;seket kezd sz&oacute;rni a helyi
	  h&aacute;l&oacute;zaton.  Ezek a k&eacute;r&eacute;sek annak a
	  tartom&aacute;nynak a nev&eacute;t tartalmazz&aacute;k,
	  amelyhez az <command>ypbind</command> megpr&oacute;b&aacute;l
	  k&ouml;t&eacute;st l&eacute;trehozni.  Ha az adott
	  tartom&aacute;ny kiszolg&aacute;l&aacute;s&aacute;ra
	  be&aacute;ll&iacute;tott szerver &eacute;szleli ezeket a
	  k&eacute;r&eacute;seket, akkor v&aacute;laszol az
	  <command>ypbind</command> d&eacute;monnak, amely pedig
	  feljegyzi a szerver c&iacute;m&eacute;t.  Ha t&ouml;bb szerver
	  is el&eacute;rhet&#245; (p&eacute;ld&aacute;ul egy
	  k&ouml;zponti &eacute;s t&ouml;bb al&aacute;rendelt), akkor az
	  <command>ypbind</command> az els&#245;k&eacute;nt
	  v&aacute;laszol&oacute; c&iacute;m&eacute;t fogja
	  r&ouml;gz&iacute;teni.  Innent&#245;l kezdve a kliens
	  k&ouml;zvetlen&uuml;l ennek a szervernek fogja k&uuml;ldeni a
	  NIS k&eacute;r&eacute;seit.  Az <command>ypbind</command>
	  id&#245;nk&eacute;nt <quote>megpingeli</quote> a szervert,
	  hogy meggy&#245;z&#245;dj&ouml;n az
	  el&eacute;rhet&#245;s&eacute;g&eacute;r&#245;l.  Ha az
	  <command>ypbind</command> egy adott id&#245;n bel&uuml;l nem
	  kap v&aacute;laszt a ping k&eacute;r&eacute;seire, akkor
	  megsz&uuml;nteti a k&ouml;t&eacute;st a tartom&aacute;nyhoz
	  &eacute;s nekil&aacute;t keresni egy m&aacute;sik
	  szervert.</para>

	<sect4>
	  <title>A NIS kliensek be&aacute;ll&iacute;t&aacute;sa</title>

	  <indexterm>
	    <primary>NIS</primary>
	    <secondary>a kliensek be&aacute;ll&iacute;t&aacute;sa</secondary>
	  </indexterm>

	  <para>Egy &os;-s g&eacute;pet NIS kliensk&eacute;nt
	    meglehet&#245;sen egyszer&#251;en lehet
	    be&aacute;ll&iacute;tani.</para>

	  <procedure>
	    <step>
	      <para>Nyissuk meg az <filename>/etc/rc.conf</filename>
		&aacute;llom&aacute;nyt &eacute;s a NIS
		tartom&aacute;nyn&eacute;v
		be&aacute;ll&iacute;t&aacute;s&aacute;hoz, valamint az
		<command>ypbind</command>
		elind&iacute;t&aacute;s&aacute;hoz a
		k&ouml;vetkez&#245;ket &iacute;rjuk bele:</para>

	      <programlisting>nisdomainname="proba-tartomany"
nis_client_enable="YES"</programlisting>
	    </step>

	    <step>
	      <para>A NIS szerveren tal&aacute;lhat&oacute; jelszavak
		import&aacute;l&aacute;s&aacute;hoz
		t&aacute;vol&iacute;tsuk el az &ouml;sszes
		felhaszn&aacute;l&oacute;i
		hozz&aacute;f&eacute;r&eacute;st az
		<filename>/etc/master.passwd</filename>
		&aacute;llom&aacute;nyunkb&oacute;l &eacute;s a
		<command>vipw</command>
		seg&iacute;ts&eacute;g&eacute;vel adjuk hozz&aacute; az
		al&aacute;bbi sort az &aacute;llom&aacute;ny
		v&eacute;g&eacute;hez:</para>

	      <programlisting>+:::::::::</programlisting>

	      <note>
		<para>Ez a sor beenged b&aacute;rkit a
		  rendszer&uuml;nkre, akinek a NIS szervereken van
		  &eacute;rv&eacute;nyes
		  hozz&aacute;f&eacute;r&eacute;se.  A NIS klienseket
		  ezzel a sorral sokf&eacute;le m&oacute;don tudjuk
		  &aacute;ll&iacute;tani.  A <link
		  linkend="network-netgroups">h&aacute;l&oacute;zati
		  csoportokr&oacute;l sz&oacute;l&oacute;
		  szakaszban</link> tal&aacute;lunk majd err&#245;l
		  t&ouml;bb inform&aacute;ci&oacute;t.  A t&eacute;ma
		  m&eacute;lyebb megismer&eacute;s&eacute;hez az
		  O'Reilly <literal>Managing NFS and NIS</literal>
		  c&iacute;m&#251; k&ouml;nyv&eacute;t
		  aj&aacute;nljuk.</para>
	      </note>

	      <note>
		<para>Legal&aacute;bb helyi
		  hozz&aacute;f&eacute;r&eacute;st (vagyis amit nem
		  NIS-en kereszt&uuml;l import&aacute;lunk) azonban
		  mindenk&eacute;ppen hagyjunk meg az
		  <filename>/etc/master.passwd</filename>
		  &aacute;llom&aacute;nyunkban, &eacute;s ez a
		  hozz&aacute;f&eacute;r&eacute;s legyen a
		  <groupname>wheel</groupname> csoport tagja.  Ha valami
		  gond lenne a NIS haszn&aacute;lat&aacute;val, akkor
		  ezen a hozz&aacute;f&eacute;r&eacute;sen
		  kereszt&uuml;l tudunk a g&eacute;pre
		  t&aacute;volr&oacute;l bejelentkezni, majd innen
		  <username>root</username> felhaszn&aacute;l&oacute;ra
		  v&aacute;ltva megoldani a felmer&uuml;lt
		  probl&eacute;m&aacute;kat.</para>
	      </note>
	    </step>

	    <step>
	      <para>A NIS szerverr&#245;l az &ouml;sszes
		lehets&eacute;ges csoport-bejegyz&eacute;st az
		<filename>/etc/group</filename>
		&aacute;llom&aacute;nyban &iacute;gy tudjuk
		import&aacute;lni:</para>

	      <programlisting>+:*::</programlisting>
	    </step>
	  </procedure>

	  <para>Miut&aacute;n elv&eacute;gezt&uuml;k ezeket a
	    l&eacute;p&eacute;seket, k&eacute;pesek lesz&uuml;nk
	    futtatni az <command>ypcat passwd</command> parancsot,
	    &eacute;s l&aacute;tni a NIS szerver jelszavakat
	    tartalmaz&oacute; t&aacute;bl&aacute;zat&aacute;t.</para>

	</sect4>
      </sect3>
    </sect2>

    <sect2>
      <title>A NIS biztons&aacute;ga</title>

      <para>&Aacute;ltal&aacute;ban tetsz&#245;leges t&aacute;voli
	felhaszn&aacute;l&oacute; k&uuml;ldhet RPC
	k&eacute;r&eacute;seket az &man.ypserv.8; sz&aacute;m&aacute;ra
	&eacute;s k&eacute;rheti le a NIS t&aacute;bl&aacute;zatok
	tartalm&aacute;t, felt&eacute;ve, hogy ismeri a tartom&aacute;ny
	nev&eacute;t.  Az ilyen hiteles&iacute;t&eacute;s
	n&eacute;lk&uuml;li m&#251;veletek ellen az &man.ypserv.8;
	&uacute;gy v&eacute;dekezik, hogy tartalmaz egy
	<quote>securenets</quote> nev&#251; lehet&#245;s&eacute;get,
	amellyel az el&eacute;rhet&#245;s&eacute;g&uuml;ket tudjuk
	lesz&#251;k&iacute;teni g&eacute;pek egy csoportj&aacute;ra.  Az
	&man.ypserv.8; ind&iacute;t&aacute;sakor ezeket az
	inform&aacute;ci&oacute;kat a
	<filename>/var/yp/securenets</filename>
	&aacute;llom&aacute;nyb&oacute;l pr&oacute;b&aacute;lja meg
	bet&ouml;lteni.</para>

      <note>
	<para>Az el&eacute;r&eacute;si &uacute;tvonala megadhat&oacute;
	  a <option>-p</option> opci&oacute;
	  haszn&aacute;lat&aacute;val.  Ez az &aacute;llom&aacute;ny
	  olyan bejegyz&eacute;seket tartalmaz, amelyekben egy
	  h&aacute;l&oacute;zati c&iacute;m &eacute;s t&#245;le
	  l&aacute;thatatlan karakterekkel elv&aacute;lasztva egy
	  h&aacute;l&oacute;zati maszk szerepel.  A <quote>#</quote>
	  karakterrel kezd&#245;d&#245; sorokat megjegyz&eacute;snek
	  nyilv&aacute;n&iacute;tjuk.  Egy minta securenets
	  &aacute;llom&aacute;ny valahogy &iacute;gy n&eacute;zne
	  ki:</para>
      </note>

      <programlisting># Enged&eacute;lyezz&uuml;k &ouml;nmagunkr&oacute;l a csatlakoz&aacute;st -- kell!
127.0.0.1     255.255.255.255
# Enged&eacute;lyezz&uuml;k a 192.168.128.0 h&aacute;l&oacute;zatr&oacute;l &eacute;rkez&#245; csatlakoz&aacute;sokat:
192.168.128.0 255.255.255.0
# Enged&eacute;lyezz&uuml;k a laborban tal&aacute;lhat&oacute; 10.0.0.0 &eacute;s 10.0.15.255 k&ouml;zti
# c&iacute;mekkel rendelkez&#245; g&eacute;pek csatlakoz&aacute;s&aacute;t:
10.0.0.0      255.255.240.0</programlisting>

      <para>Ha az &man.ypserv.8; olyan c&iacute;mr&#245;l kap
	k&eacute;r&eacute;st, amely illeszkedik az el&#245;&iacute;rt
	c&iacute;mek valamelyik&eacute;re, akkor a szok&aacute;sos
	m&oacute;don feldolgozza azt.  Ellenkez&#245; esetben a
	k&eacute;r&eacute;st figyelmen k&iacute;v&uuml;l hagyja
	&eacute;s egy figyelmeztet&eacute;st vesz fel hozz&aacute; a
	napl&oacute;ba.  Ha a <filename>/var/yp/securenets</filename>
	&aacute;llom&aacute;ny nem l&eacute;tezik, akkor az
	<command>ypserv</command> tetsz&#245;leges g&eacute;pr&#245;l
	enged&eacute;lyezi a csatlakoz&aacute;st.</para>

      <para>Az <command>ypserv</command> lehet&#245;s&eacute;get ad a
	Wietse Venema &aacute;ltal fejlesztett <application>TCP
	Wrapper</application> csomag haszn&aacute;lat&aacute;ra is.
	Ezzel a rendszergazda a <filename>/var/yp/securenets</filename>
	&aacute;llom&aacute;ny helyett a <application>TCP
	Wrapper</application> konfigur&aacute;ci&oacute;s
	&aacute;llom&aacute;nyai alapj&aacute;n k&eacute;pes
	szab&aacute;lyozni az el&eacute;rhet&#245;s&eacute;get.</para>

      <note>
	<para>Mik&ouml;zben mind a k&eacute;t m&oacute;dszer
	  ny&uacute;jt valamilyen fajta v&eacute;delmet, de a
	  privilegiz&aacute;lt portok tesztel&eacute;s&eacute;hez
	  hasonl&oacute;an az <quote>IP
	  &aacute;lc&aacute;z&aacute;s&aacute;val</quote> (IP spoofing)
	  sebezhet&#245;ek.  Ez&eacute;rt az &ouml;sszes NIS-hez
	  tartoz&oacute; forgalmat t&#251;zfallal kell
	  blokkolnunk.</para>

	<para>Az <filename>/var/yp/securenets</filename>
	  &aacute;llom&aacute;nyt haszn&aacute;l&oacute; szerverek nem
	  k&eacute;pesek az elavult TCP/IP
	  implement&aacute;ci&oacute;kat haszn&aacute;l&oacute;
	  &eacute;rv&eacute;nyes klienseket rendesen kiszolg&aacute;lni.
	  Egyes ilyen implement&aacute;ci&oacute;k a c&iacute;mben a
	  g&eacute;phez tartoz&oacute; biteket null&aacute;ra
	  &aacute;ll&iacute;tj&aacute;k az
	  &uuml;zenetsz&oacute;r&aacute;shoz, &eacute;s/vagy
	  ez&eacute;rt az &uuml;zenetsz&oacute;r&aacute;shoz
	  haszn&aacute;lt c&iacute;m kisz&aacute;m&iacute;t&aacute;sakor
	  nem tudja &eacute;szleli a h&aacute;l&oacute;zati maszkot.  A
	  legt&ouml;bb ilyen probl&eacute;ma megoldhat&oacute; a kliens
	  konfigur&aacute;ci&oacute;j&aacute;nak
	  megv&aacute;ltoztat&aacute;s&aacute;val, m&iacute;g m&aacute;s
	  probl&eacute;m&aacute;k megold&aacute;sa a
	  k&eacute;rd&eacute;ses kliensek
	  nyugd&iacute;jaz&aacute;s&aacute;t
	  k&iacute;v&aacute;nj&aacute;k meg, vagy a
	  <filename>/var/yp/securenets</filename>
	  haszn&aacute;lat&aacute;nak elhagy&aacute;s&aacute;t.</para>

	<para>Egy r&eacute;gebbi TCP/IP implement&aacute;ci&oacute;val
	  &uuml;zemel&#245; szerveren pedig a
	  <filename>/var/yp/securenets</filename> &aacute;llom&aacute;ny
	  haszn&aacute;lata kifejezetten rossz &ouml;tlet, &eacute;s a
	  h&aacute;l&oacute;zatunk nagy r&eacute;sz&eacute;ben
	  k&eacute;pes haszn&aacute;lhatatlann&aacute; tenni a NIS
	  funkci&oacute;it.</para>

	<indexterm><primary>TCP wrapperek</primary></indexterm>

	<para>A <application>TCP Wrapper</application> csomag
	  alkalmaz&aacute;sa a NIS szerver&uuml;nk
	  v&aacute;laszad&aacute;shoz sz&uuml;ks&eacute;ges
	  idej&eacute;t is seg&iacute;t cs&ouml;kkenteni.  Az ilyenkor
	  jelentkez&#245; plusz k&eacute;sleked&eacute;s mellesleg
	  el&eacute;g nagy lehet ahhoz, hogy a kliensekn&eacute;l
	  id&#245;t&uacute;ll&eacute;p&eacute;s k&ouml;vetkezzen be,
	  k&uuml;l&ouml;n&ouml;sen a terheltebb
	  h&aacute;l&oacute;zatokon vagy a lass&uacute; NIS szerverek
	  eset&eacute;ben.  Ha egy vagy t&ouml;bb kliens&uuml;nk is
	  ilyen t&uuml;neteket mutat, akkor &eacute;rdemes a
	  k&eacute;rd&eacute;ses kliens rendszereket al&aacute;rendelt
	  NIS szerverekk&eacute; alak&iacute;tani &eacute;s
	  &ouml;nmagukhoz rendelni.</para>
      </note>

    </sect2>

    <sect2>
      <title>Egyes felhaszn&aacute;l&oacute;k
	bejelentkez&eacute;s&eacute;nek
	megakad&aacute;lyoz&aacute;sa</title>

      <para>A laborunkban van egy <hostid>basie</hostid> nev&#251;
	g&eacute;p, amely a tansz&eacute;k egyetlen
	munka&aacute;llom&aacute;sa.  Ezt a g&eacute;pet nem akarjuk
	kivenni a NIS tartom&aacute;nyb&oacute;l, de a k&ouml;zponti NIS
	szerver <filename>passwd</filename> &aacute;llom&aacute;nya
	m&eacute;gis egyar&aacute;nt tartalmazza a hallgat&oacute;k
	&eacute;s az oktat&oacute;k el&eacute;r&eacute;seit.  Mit lehet
	ilyenkor tenni?</para>

      <para>Adott felhaszn&aacute;l&oacute;k eset&eacute;ben le tudjuk
	tiltani a bejelentkez&eacute;st a g&eacute;pen m&eacute;g
	olyankor is, ha l&eacute;teznek a NIS
	adatb&aacute;zis&aacute;ban.  Ehhez mind&ouml;ssze a kliensen az
	<filename>/etc/master.passwd</filename> &aacute;llom&aacute;ny
	v&eacute;g&eacute;re be kell tenn&uuml;nk egy
	<literal>-<replaceable>felhaszn&aacute;l&oacute;n&eacute;v</replaceable></literal>
	sort, ahol a
	<replaceable>felhaszn&aacute;l&oacute;n&eacute;v</replaceable>
	annak a felhaszn&aacute;l&oacute;nak a neve, akit nem akarunk
	beengedni a g&eacute;pre.  Ezt legink&aacute;bb a
	<command>vipw</command> haszn&aacute;lat&aacute;n kereszt&uuml;l
	&eacute;rdemes megtenn&uuml;nk, mivel a <command>vipw</command>
	az <filename>/etc/master.passwd</filename>
	&aacute;llom&aacute;ny alapj&aacute;n v&eacute;gez n&eacute;mi
	ellen&#245;rz&eacute;st, valamint a szerkeszt&eacute;s
	befejezt&eacute;vel mag&aacute;t&oacute;l
	&uacute;jragener&aacute;lja a jelszavakat t&aacute;rol&oacute;
	adatb&aacute;zist.  P&eacute;ld&aacute;ul, ha a
	<username>bill</username> nev&#251; felhaszn&aacute;l&oacute;t
	ki akarjuk tiltani a <hostid>basie</hostid> nev&#251;
	g&eacute;pr&#245;l, akkor:</para>

      <screen>basie&prompt.root; <userinput>vipw</userinput>
<userinput>[vegy&uuml;k fel a -bill sort a v&eacute;g&eacute;re, majd l&eacute;pj&uuml;nk ki]</userinput>
vipw: rebuilding the database...
vipw: done

basie&prompt.root; <userinput>cat /etc/master.passwd</userinput>

root:[jelsz&oacute;]:0:0::0:0:The super-user:/root:/bin/csh
toor:[jelsz&oacute;]:0:0::0:0:The other super-user:/root:/bin/sh
daemon:*:1:1::0:0:Owner of many system processes:/root:/sbin/nologin
operator:*:2:5::0:0:System &:/:/sbin/nologin
bin:*:3:7::0:0:Binaries Commands and Source,,,:/:/sbin/nologin
tty:*:4:65533::0:0:Tty Sandbox:/:/sbin/nologin
kmem:*:5:65533::0:0:KMem Sandbox:/:/sbin/nologin
games:*:7:13::0:0:Games pseudo-user:/usr/games:/sbin/nologin
news:*:8:8::0:0:News Subsystem:/:/sbin/nologin
man:*:9:9::0:0:Mister Man Pages:/usr/share/man:/sbin/nologin
bind:*:53:53::0:0:Bind Sandbox:/:/sbin/nologin
uucp:*:66:66::0:0:UUCP pseudo-user:/var/spool/uucppublic:/usr/libexec/uucp/uucico
xten:*:67:67::0:0:X-10 daemon:/usr/local/xten:/sbin/nologin
pop:*:68:6::0:0:Post Office Owner:/nonexistent:/sbin/nologin
nobody:*:65534:65534::0:0:Unprivileged user:/nonexistent:/sbin/nologin
+:::::::::
-bill

basie&prompt.root;</screen>

    </sect2>

    <sect2 id="network-netgroups">
      <sect2info>
	<authorgroup>
	  <author>
	    <firstname>Udo</firstname>
	    <surname>Erdelhoff</surname>
	    <contrib>K&eacute;sz&iacute;tette: </contrib>
	  </author>
	</authorgroup>
      </sect2info>

      <title>A h&aacute;l&oacute;zati csoportok
	alkalmaz&aacute;sa</title>

      <indexterm><primary>h&aacute;l&oacute;zati
	csoportok</primary></indexterm>

      <para>Az el&#245;z&#245; szakaszban ismertetett m&oacute;dszer
	viszonylag j&oacute;l m&#251;k&ouml;dik olyan esetekben, amikor
	nagyon kev&eacute;s felhaszn&aacute;l&oacute;ra &eacute;s/vagy
	sz&aacute;m&iacute;t&oacute;g&eacute;pre kell alkalmaznunk
	speci&aacute;lis megszor&iacute;t&aacute;sokat.  A nagyobb
	h&aacute;l&oacute;zatokban szinte <emphasis>biztos</emphasis>,
	hogy elfelejt&uuml;nk kiz&aacute;rni egyes
	felhaszn&aacute;l&oacute;kat az &eacute;rz&eacute;keny
	g&eacute;pekr&#245;l, vagy az &ouml;sszes g&eacute;pen
	egyenk&eacute;nt kell ehhez a megfelel&#245;
	be&aacute;ll&iacute;t&aacute;sokat elv&eacute;gezni, &eacute;s
	ezzel l&eacute;nyeg&eacute;ben elvesztj&uuml;k a NIS
	legfontosabb el&#245;ny&eacute;t, vagyis a
	<emphasis>k&ouml;zpontos&iacute;tott</emphasis>
	karbantarthat&oacute;s&aacute;got.</para>

      <para>A NIS fejleszt&#245;i erre a probl&eacute;m&aacute;ra a
	<emphasis>h&aacute;l&oacute;zati csoportokat</emphasis>
	l&eacute;trehoz&aacute;s&aacute;val v&aacute;laszoltak.  A
	c&eacute;ljuk &eacute;s m&#251;k&ouml;d&eacute;s&uuml;k
	szempontj&aacute;b&oacute;l legink&aacute;bb a &unix;-os
	&aacute;llom&aacute;nyrendszerekben tal&aacute;lhat&oacute;
	csoportokhoz m&eacute;rhet&#245;ek.  A legnagyobb
	elt&eacute;r&eacute;s a numerikus azonos&iacute;t&oacute;k
	hi&aacute;ny&aacute;ban mutatkozik meg, valamint a
	h&aacute;l&oacute;zati csoportokat a
	felhaszn&aacute;l&oacute;kon k&iacute;v&uuml;l tov&aacute;bbi
	h&aacute;l&oacute;zati csoportok megad&aacute;s&aacute;val is ki
	lehet alak&iacute;tani.</para>

      <para>A h&aacute;l&oacute;zati csoportok a nagyobb, bonyolultabb,
	t&ouml;bbsz&aacute;z felhaszn&aacute;l&oacute;s
	h&aacute;l&oacute;zatok sz&aacute;m&aacute;ra j&ouml;ttek
	l&eacute;tre.  Egy r&eacute;szr&#245;l ez nagyon j&oacute;
	dolog, k&uuml;l&ouml;n&ouml;sen akkor, ha egy ilyen helyzettel
	kell szemben&eacute;zn&uuml;nk.  M&aacute;sr&eacute;szr&#245;l
	ez a m&eacute;rt&eacute;k&#251; bonyolults&aacute;g szinte
	teljesen lehetetlenn&eacute; teszi a h&aacute;l&oacute;zati
	csoportok egyszer&#251; bemutat&aacute;s&aacute;t.  A szakasz
	tov&aacute;bbi r&eacute;sz&eacute;ben haszn&aacute;lt
	p&eacute;lda is ezt a probl&eacute;m&aacute;t igyekszik
	illusztr&aacute;lni.</para>

      <para>T&eacute;telezz&uuml;k fel, hogy laborunkban a NIS sikeres
	bevezet&eacute;se felkeltette a f&#245;n&ouml;keink
	figyelm&eacute;t.  &Iacute;gy a k&ouml;vetkez&#245; feladatunk
	az lett, hogy terjessz&uuml;k ki a NIS tartom&aacute;nyt az
	egyetemen tal&aacute;lhat&oacute; n&eacute;h&aacute;ny
	m&aacute;sik g&eacute;pre is.  Az al&aacute;bbi k&eacute;t
	t&aacute;bl&aacute;zatban az &uacute;j
	felhaszn&aacute;l&oacute;k &eacute;s az &uacute;j
	sz&aacute;m&iacute;t&oacute;g&eacute;p neveit tal&aacute;ljuk,
	valamint a r&ouml;vid le&iacute;r&aacute;sukat.</para>

      <informaltable frame="none" pgwide="1">
	<tgroup cols="2">
	  <thead>
	    <row>
	      <entry>Felhaszn&aacute;l&oacute;k nevei</entry>
	      <entry>Le&iacute;r&aacute;s</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry><username>alpha</username>,
		<username>beta</username></entry>
	      <entry>az IT tansz&eacute;k h&eacute;tk&ouml;znapi
		dolgoz&oacute;i</entry>
	    </row>

	    <row>
	      <entry><username>charlie</username>,
		<username>delta</username></entry>
	      <entry>az IT tansz&eacute;k &uacute;jdons&uuml;lt
		dolgoz&oacute;i</entry>
	    </row>

	    <row>
	      <entry><username>echo</username>,
		<username>foxtrott</username>, <username>golf</username>,
		...</entry>
	      <entry>&aacute;tlagos dolgoz&oacute;k</entry>
	    </row>

	    <row>
	      <entry><username>able</username>,
		<username>baker</username>, ...</entry>
	      <entry>&ouml;szt&ouml;nd&iacute;jasok</entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

      <informaltable frame="none" pgwide="1">
	<tgroup cols="2">
	  <thead>
	    <row>
	      <entry>G&eacute;pek nevei</entry>
	      <entry>Le&iacute;r&aacute;s</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry><hostid>haboru</hostid>, <hostid>halal</hostid>,
		<hostid>ehseg</hostid>, <hostid>szennyezes</hostid></entry>
	      <entry>A legfontosabb szervereink.  Csak az IT
		tansz&eacute;k dolgoz&oacute;i f&eacute;rhetnek
		hozz&aacute;juk.</entry>
	    </row>
	    <row>
	      <entry><hostid>buszkeseg</hostid>,
		<hostid>kapzsisag</hostid>, <hostid>irigyseg</hostid>,
		<hostid>harag</hostid>, <hostid>bujasag</hostid>,
		<hostid>lustasag</hostid></entry>
		<entry>Kev&eacute;sb&eacute; fontos szerverek.  Az IT
		tanksz&eacute;k &ouml;sszes tagja el tudja &eacute;rni
		ezeket a g&eacute;peket.</entry>
	    </row>

	    <row>
	      <entry><hostid>egy</hostid>, <hostid>ketto</hostid>,
		<hostid>harom</hostid>, <hostid>negy</hostid>,
		...</entry>
	      <entry>&Aacute;tlagos munka&aacute;llom&aacute;sok.
		Egyed&uuml;l csak a <emphasis>val&oacute;di</emphasis>
		dolgoz&oacute;k jelentkezhetnek be ezekre a
		g&eacute;pekre.</entry>
	    </row>

	    <row>
	      <entry><hostid>szemetes</hostid></entry>
	      <entry>Egy nagyon r&eacute;gi g&eacute;p, semmi
		&eacute;rt&eacute;kes adat nincs rajta.  Ak&aacute;r
		m&eacute;g az &ouml;sz&ouml;nd&iacute;jasok is
		ny&uacute;zhatj&aacute;k.</entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

      <para>Ha ezeket az ig&eacute;nyeket &uacute;gy
	pr&oacute;b&aacute;ljuk meg teljes&iacute;teni, hogy a
	felhaszn&aacute;l&oacute;kat egyenk&eacute;nt blokkoljuk, akkor
	minden rendszer <filename>passwd</filename>
	&aacute;llom&aacute;ny&aacute;ba k&uuml;l&ouml;n fel kell
	venn&uuml;nk a
	<literal>-<replaceable>felhaszn&aacute;l&oacute;</replaceable></literal>
	sorokat a letiltott felhaszn&aacute;l&oacute;khoz.  Ha csak
	egyetlen bejegyz&eacute;st is kihagyunk, akkor k&ouml;nnyen
	bajunk sz&aacute;rmazhat bel&#245;le.  Ez a rendszer kezdeti
	be&aacute;ll&iacute;t&aacute;sa sor&aacute;n m&eacute;g
	tal&aacute;n nem okoz gondot, de az &uacute;j
	felhaszn&aacute;l&oacute;kat <emphasis>biztosan</emphasis> el
	fogjuk felejteni felvenni a megfelel&#245; csoportokba.
	Elv&eacute;gre Murphy is optimista volt.</para>

      <para>A h&aacute;l&oacute;zati csoportok haszn&aacute;lata ilyen
	helyzetekben sz&aacute;mos el&#245;nyt rejt.  Nem kell az egyes
	felhaszn&aacute;l&oacute;kat k&uuml;l&ouml;n felvenni, egy
	felhaszn&aacute;l&oacute;t felvesz&uuml;nk valamelyik csoportba
	vagy csoportokba, &eacute;s a csoportok &ouml;sszes
	tagj&aacute;nak egyszerre tudjuk tiltani vagy
	enged&eacute;lyezni a hozz&aacute;f&eacute;r&eacute;seket.  Ha
	hozz&aacute;adunk egy &uacute;j g&eacute;pet a
	h&aacute;l&oacute;zatunkhoz, akkor mind&ouml;ssze a
	h&aacute;l&oacute;zati csoportok bejelentkez&eacute;si
	korl&aacute;toz&aacute;sait kell be&aacute;ll&iacute;tani.  Ha
	&uacute;j felhaszn&aacute;l&oacute;t vesz&uuml;nk fel, akkor a
	felhaszn&aacute;l&oacute;t kell venn&uuml;nk egy vagy t&ouml;bb
	h&aacute;l&oacute;zati csoportba.  Ezek a
	v&aacute;ltoztat&aacute;sok f&uuml;ggetlenek
	egym&aacute;st&oacute;l, &eacute;s nincs sz&uuml;ks&eacute;g
	<quote>minden felhaszn&aacute;l&oacute; &eacute;s minden
	g&eacute;p &ouml;sszes
	kombin&aacute;ci&oacute;j&aacute;ra</quote>.  Ha a NIS
	be&aacute;ll&iacute;t&aacute;sainkat el&#245;zetesen
	k&ouml;r&uuml;ltekint&#245;en megtervezt&uuml;k, akkor egyetlen
	k&ouml;zponti konfigur&aacute;ci&oacute;s
	&aacute;llom&aacute;nyt kell m&oacute;dos&iacute;tani a
	g&eacute;pek el&eacute;r&eacute;s&eacute;nek
	enged&eacute;lyez&eacute;s&eacute;hez vagy
	tilt&aacute;s&aacute;hoz.</para>

      <para>Az els&#245; l&eacute;p&eacute;s a h&aacute;l&oacute;zati
	csoportokat tartalmaz&oacute; NIS t&aacute;bl&aacute;zat
	inicializ&aacute;l&aacute;sa.  A &os; &man.ypinit.8; programja
	alap&eacute;rtelmez&eacute;s szerint nem hozza l&eacute;tre ezt
	a t&aacute;bl&aacute;zatot, de ha k&eacute;sz&iacute;t&uuml;nk
	egy ilyet, akkor a NIS implement&aacute;ci&oacute;ja
	k&eacute;pes kezelni.  Egy ilyen &uuml;res
	t&aacute;bl&aacute;zat
	elk&eacute;sz&iacute;t&eacute;s&eacute;hez ennyit kell
	beg&eacute;pelni:</para>

      <screen>ellington&prompt.root; <userinput>vi /var/yp/netgroup</userinput></screen>

      <para>Ezut&aacute;n elkezdhetj&uuml;k felvenni a tartalm&aacute;t.
	A p&eacute;ld&aacute;nk szerint legal&aacute;bb n&eacute;gy
	h&aacute;l&oacute;zati csoportot kell csin&aacute;lnunk: az IT
	dolgoz&oacute;inak, az IT &uacute;j dolgoz&oacute;inak, a
	norm&aacute;l dolgoz&oacute;knak &eacute;s az
	&ouml;sz&ouml;nd&iacute;jasoknak.</para>

      <programlisting>IT_DOLG       (,alpha,proba-tartomany)    (,beta,proba-tartomany)
IT_UJDOLG     (,charlie,proba-tartomany)  (,delta,proba-tartomany)
FELHASZNALO   (,echo,proba-tartomany)     (,foxtrott,proba-tartomany) \
              (,golf,proba-tartomany)
OSZTONDIJAS   (,able,proba-tartomany)     (,baker,proba-tartomany)</programlisting>

      <para>Az <literal>IT_DOLG</literal>, <literal>IT_UJDOLG</literal>
	stb.  a h&aacute;l&oacute;zati csoportok nevei lesznek.  Minden
	egyes z&aacute;r&oacute;jelezett csoport egy vagy t&ouml;bb
	felhaszn&aacute;l&oacute;i hozz&aacute;f&eacute;r&eacute;st
	tartalmaz.  A csoportokban szerepl&#245; h&aacute;rom mez&#245;
	a k&ouml;vetkez&#245;:</para>

      <orderedlist>
	<listitem>
	  <para>Azon g&eacute;pek neve, amelykre a k&ouml;vetkez&#245;
	    elemek &eacute;rv&eacute;nyesek.  Ha itt nem adunk meg
	    neveket, akkor a bejegyz&eacute;s az &ouml;sszes
	    g&eacute;pre vonatkozik.  Ha megadjuk egy g&eacute;p
	    nev&eacute;t, akkor jutalmunk a teljes
	    s&ouml;t&eacute;ts&eacute;g, a retteget&eacute;s &eacute;s
	    tot&aacute;lis megt&eacute;bolyod&aacute;s.</para>
	</listitem>

	<listitem>
	  <para>A csoporthoz tartoz&oacute;
	    hozz&aacute;f&eacute;r&eacute;s neve.</para>
	</listitem>

	<listitem>
	  <para>A hozz&aacute;f&eacute;r&eacute;shez
	    kapcsol&oacute;d&oacute; NIS tartom&aacute;ny.  A csoportba
	    m&aacute;s NIS tartom&aacute;nyokb&oacute;l is &aacute;t
	    tudunk hozni hozz&aacute;f&eacute;r&eacute;seket, ha
	    netal&aacute;n &eacute;ppen olyan szerencs&eacute;tlenek
	    lenn&eacute;nk, hogy t&ouml;bb NIS tartom&aacute;nyt is
	    fel&uuml;gyeln&uuml;nk kell.</para>
	</listitem>
      </orderedlist>

      <para>A mez&#245;k mindegyike tartalmazhat
	dzs&oacute;kerkaraktereket.  Err&#245;l r&eacute;szletesebben a
	&man.netgroup.5; man oldalon olvashatunk.</para>

      <note>
	<indexterm><primary>h&aacute;l&oacute;zati
	  csoportok</primary></indexterm>

	<para>A h&aacute;l&oacute;zati csoportoknak lehet&#245;leg ne
	  adjunk 8 karaktern&eacute;l hosszabb nevet,
	  k&uuml;l&ouml;n&ouml;sen abban az esetben, ha a NIS
	  tartom&aacute;nyban m&aacute;s oper&aacute;ci&oacute;s
	  rendszereket is haszn&aacute;lunk.  A nevekben elt&eacute;rnek
	  a kis- &eacute;s nagybet&#251;k.  Ha a h&aacute;l&oacute;zati
	  csoportokat nev&eacute;t nagybet&#251;kkel &iacute;rjuk, akkor
	  k&ouml;nnyen k&uuml;l&ouml;nbs&eacute;get tudunk tenni a
	  felhaszn&aacute;l&oacute;k, g&eacute;pek &eacute;s
	  h&aacute;l&oacute;zati csoportok nevei
	  k&ouml;z&ouml;tt.</para>

	<para>Egyes (nem &os; alap&uacute;) NIS kliensek nem
	  k&eacute;pesek kezelni a nagyon sok bejegyz&eacute;st
	  tartalmaz&oacute; h&aacute;l&oacute;zati csoportokat.
	  P&eacute;ld&aacute;ul a &sunos; n&eacute;h&aacute;ny
	  kor&aacute;bbi verzi&oacute;ja fennakad rajta, ha egy
	  h&aacute;l&oacute;zati csoport 15
	  <emphasis>bejegyz&eacute;sn&eacute;l</emphasis> t&ouml;bbet
	  tartalmaz.  Az ilyen korl&aacute;toz&aacute;sok al&oacute;l
	  &uacute;gy tudunk kib&uacute;jni, ha 15
	  felhaszn&aacute;l&oacute;nk&eacute;nt &uacute;jabb
	  h&aacute;l&oacute;zati csoportokat hozunk l&eacute;tre,
	  amelyekkel az eredeti h&aacute;l&oacute;zati csoportot
	  &eacute;p&iacute;tj&uuml;k fel:</para>

	<programlisting>NAGYCSP1  (,joe1,tartomany)  (,joe2,tartomany)  (,joe3,tartomany) [...]
NAGYCSP2  (,joe16,tartomany)  (,joe17,tartomany) [...]
NAGYCSP3  (,joe31,tartomany)  (,joe32,tartomany)
NAGYCSOPORT  NAGYCSP1 NAGYCSP2 NAGYCSP3</programlisting>

	<para>Ugyanez a folyamat javasolt olyan esetekben is, ahol 225
	  felhaszn&aacute;l&oacute;n&aacute;l t&ouml;bbre lenne
	  sz&uuml;ks&eacute;g egyetlen h&aacute;l&oacute;zati csoporton
	  bel&uuml;l.</para>
      </note>

      <para>Az &iacute;gy l&eacute;trehozott &uacute;j NIS
	t&aacute;bl&aacute;zat sz&eacute;tk&uuml;ld&eacute;se
	meglehet&#245;sen k&ouml;nny&#251; feladat:</para>

      <screen>ellington&prompt.root; <userinput>cd /var/yp</userinput>
ellington&prompt.root; <userinput>make</userinput></screen>

      <para>Ez a parancs l&eacute;trehoz h&aacute;rom NIS
	t&aacute;bl&aacute;zatot: <filename>netgroup</filename>,
	<filename>netgroup.byhost</filename> &eacute;s
	<filename>netgroup.byuser</filename>.  Az &man.ypcat.1;
	paranccsal ellen&#245;rizni is tudjuk az &uacute;j NIS
	t&aacute;bl&aacute;zatainkat:</para>

      <screen>ellington&prompt.user; <userinput>ypcat -k netgroup</userinput>
ellington&prompt.user; <userinput>ypcat -k netgroup.byhost</userinput>
ellington&prompt.user; <userinput>ypcat -k netgroup.byuser</userinput></screen>

      <para>Az els&#245; parancs kimenete a
	<filename>/var/yp/netgroup</filename> &aacute;llom&aacute;ny
	tartalm&aacute;ra eml&eacute;keztethet minket.  A m&aacute;sodik
	parancsnak nincs semmilyen kimenete, hacsak nem adtunk meg
	valamilyen g&eacute;pf&uuml;gg&#245; h&aacute;l&oacute;zati
	csoportot.  A harmadik parancs a h&aacute;l&oacute;zati
	csoportokat list&aacute;zza ki a
	felhaszn&aacute;l&oacute;khoz.</para>

      <para>A kliensek be&aacute;ll&iacute;t&aacute;sa teh&aacute;t
	nagyon egyszer&#251;.  A <hostid>haboru</hostid> nev&#251;
	szerver be&aacute;ll&iacute;t&aacute;s&aacute;hoz
	ind&iacute;tsuk el a &man.vipw.8; programot, &eacute;s
	cser&eacute;lj&uuml;k a</para>

      <programlisting>+:::::::::</programlisting>

      <para>sort erre:</para>

      <programlisting>+@IT_DOLG:::::::::</programlisting>

      <para>Innent&#245;l kezdve kiz&aacute;r&oacute;lag csak az
	<literal>IT_DOLG</literal> csoportban tal&aacute;lhat&oacute;
	felhaszn&aacute;l&oacute;k fognak beker&uuml;lni a
	<hostid>haboru</hostid> jelsz&oacute;
	adatb&aacute;zis&aacute;ba, &eacute;s csak ezek a
	felhaszn&aacute;l&oacute;k tudnak ide bejelentkezni.</para>

      <para>Sajnos ez a korl&aacute;toz&aacute;s a
	parancs&eacute;rtelmez&#245; <literal>~</literal>
	funkci&oacute;j&aacute;ra &eacute;s &ouml;sszes olyan rutinra is
	vonatkozik, amelyet a felhaszn&aacute;l&oacute;i nevek &eacute;s
	azok numerikus azonos&iacute;t&oacute; k&ouml;z&ouml;tt
	k&eacute;pez le.  M&aacute;s sz&oacute;val a <command>cd
	~<replaceable>felhaszn&aacute;l&oacute;</replaceable></command>
	parancs nem fog m&#251;k&ouml;dni, &eacute;s az <command>ls
	-l</command> parancs kimenet&eacute;ben a
	felhaszn&aacute;l&oacute;i nevek helyett csak numerikus
	azonos&iacute;t&oacute;k jelennek meg, tov&aacute;bb&aacute;
	a<command>find .  -user joe -print</command> <errorname>No such
	user</errorname> (<errorname>Nincs ilyen
	felhaszn&aacute;l&oacute;</errorname>) hib&aacute;t fog
	visszaadni.  Ez &uacute;gy tudjuk megjav&iacute;tani, ha
	&uacute;gy import&aacute;ljuk a szerverre az &ouml;sszes
	felhaszn&aacute;l&oacute; bejegyz&eacute;s&eacute;t, hogy
	<emphasis>k&ouml;zben tiltjuk a
	hozz&aacute;f&eacute;r&eacute;s&uuml;ket</emphasis>.</para>

      <para>Ehhez vegy&uuml;nk fel egy &uacute;jabb sort az
	<filename>/etc/master.passwd</filename>
	&aacute;llom&aacute;nyba.  A sor valahogy &iacute;gy fog
	kin&eacute;zni:</para>

      <para><literal>+:::::::::/sbin/nologin</literal>, amely annyit
	tesz, hogy <quote>import&aacute;ljuk az &ouml;sszes
	bejegyz&eacute;st, de a hozz&aacute;juk tartoz&oacute;
	parancs&eacute;rtelmez&#245; a
	<filename>/sbin/nologin</filename> legyen</quote>.  A
	<literal>passwd</literal> &aacute;llom&aacute;nyban
	tetsz&#245;leges mez&#245; tartalm&aacute;t le tudjuk &uacute;gy
	cser&eacute;lni, ha megadunk neki egy alap&eacute;rtelmezett
	&eacute;rt&eacute;ket az <filename>/etc/master.passwd</filename>
	&aacute;llom&aacute;nyban.</para>

      <warning>
	<para>Vigy&aacute;zzunk, hogy a
	  <literal>+:::::::::/sbin/nologin</literal> sort az
	  <literal>+@IT_DOLG:::::::::</literal> sor ut&aacute;n
	  &iacute;rjuk.  Ha nem &iacute;gy tesz&uuml;nk, akkor a
	  NIS-b&#245;l import&aacute;lt &ouml;sszes
	  felhaszn&aacute;l&oacute;i hozz&aacute;f&eacute;r&eacute;s a
	  <filename>/sbin/nologin</filename>
	  parancs&eacute;rtelmez&#245;t kapja.</para>
      </warning>

      <para>Miut&aacute;n elv&eacute;gezt&uuml;k ezt a
	v&aacute;ltoztat&aacute;st, minden &uacute;jabb dolgoz&oacute;
	felv&eacute;tele ut&aacute;n csup&aacute;n egyetlen
	t&aacute;bl&aacute;zatot kell megv&aacute;ltoztatnunk.  Ugyanezt
	a taktik&aacute;t k&ouml;vethetj&uuml;k a kev&eacute;sb&eacute;
	fontosabb szerverek eset&eacute;ben is, hogy ha a helyi
	<filename>/etc/master.passwd</filename>
	&aacute;llom&aacute;nyukban a kor&aacute;bbi
	<literal>+:::::::::</literal> bejegyz&eacute;st valami
	ilyesmivel helyettes&iacute;tj&uuml;k:</para>

      <programlisting>+@IT_DOLG:::::::::
+@IT_UJDOLG:::::::::
+:::::::::/sbin/nologin</programlisting>

      <para>Az egyszer&#251; munka&aacute;llom&aacute;sok
	eset&eacute;ben pedig ezekre a sorokra lesz
	sz&uuml;ks&eacute;g&uuml;nk:</para>

      <programlisting>+@IT_DOLG:::::::::
+@FELHASZNALOK:::::::::
+:::::::::/sbin/nologin</programlisting>

      <para>Minden remek&uuml;l &uuml;zemel eg&eacute;szen addig,
	am&iacute;g n&eacute;h&aacute;ny m&uacute;lva ism&eacute;t
	v&aacute;ltozik a h&aacute;zirend: az IT tansz&eacute;kre
	&ouml;szt&ouml;nd&iacute;jasok &eacute;rkeznek.  Az IT
	&ouml;szt&ouml;nd&iacute;jasai a munka&aacute;llom&aacute;sokat
	&eacute;s a kev&eacute;sb&eacute; fontosabb szervereket
	tudj&aacute;k haszn&aacute;lni.  Az &uacute;j IT dolgoz&oacute;k
	m&aacute;r a k&ouml;zponti szerverekre is bejelentkezhetnek.
	&Iacute;gy teh&aacute;t l&eacute;trehozunk egy &uacute;j
	h&aacute;l&oacute;zati csoportot
	<literal>IT_OSZTONDIJAS</literal> n&eacute;ven, majd
	felvessz&uuml;k ide az &uacute;j IT
	&ouml;szt&ouml;nd&iacute;jasokat, &eacute;s nekil&aacute;tunk
	v&eacute;gigzongor&aacute;zni az &ouml;sszes g&eacute;p
	&ouml;sszes konfigur&aacute;ci&oacute;s
	&aacute;llom&aacute;ny&aacute;t...  Ahogy azonban egy
	r&eacute;gi mond&aacute;s is tartja: <quote>A
	k&ouml;zpontos&iacute;tott tervez&eacute;sben ejtett
	hib&aacute;k teljes k&aacute;oszhoz vezetnek</quote>.</para>

      <para>A NIS az ilyen helyzeteket &uacute;gy igyekszik
	elker&uuml;lni, hogy megengedi &uacute;jabb
	h&aacute;l&oacute;zati csoportok
	l&eacute;trehoz&aacute;s&aacute;t m&aacute;s
	h&aacute;l&oacute;zati csoportokb&oacute;l.  Egyik ilyen
	lehet&#245;s&eacute;g a szerep alap&uacute;
	h&aacute;l&oacute;zati csoportok kialak&iacute;t&aacute;sa.
	P&eacute;ld&aacute;ul, ha a fontosabb szerverek
	bejelentkez&eacute;si korl&aacute;toz&aacute;sai
	sz&aacute;m&aacute;ra hozzunk l&eacute;tre egy
	<literal>NAGYSRV</literal> nev&#251; csoportot, valamint egy
	m&aacute;sik h&aacute;l&oacute;zati csoportot
	<literal>KISSRV</literal> n&eacute;ven a kev&eacute;sb&eacute;
	fontosabb szerverekhez, v&eacute;g&uuml;l
	<literal>MUNKA</literal> n&eacute;ven egy harmadik
	h&aacute;l&oacute;zati csoportot a
	munka&aacute;llom&aacute;sokhoz.  Mindegyik ilyen
	h&aacute;l&oacute;zati csoport tartalmazza azokat a csoportokat,
	amelyek enged&eacute;lyezik a g&eacute;pek
	el&eacute;r&eacute;s&eacute;t.  A h&aacute;l&oacute;zati
	csoportok le&iacute;r&aacute;s&aacute;t tartalmaz&oacute; NIS
	t&aacute;bl&aacute;zat most valahogy &iacute;gy fog
	kin&eacute;zni:</para>

      <programlisting>NAGYSRV  IT_DOLG IT_UJDOLG
KISSRV   IT_DOLG IT_UJDOLG IT_OSZTONDIJAS
MUNKA    IT_DOLG IT_OSZTONDIJAS FELHASZNALOK</programlisting>

      <para>A bejelentkez&eacute;si megszor&iacute;t&aacute;sok ilyen
	t&iacute;pus&uacute; megad&aacute;sa viszonylag j&oacute;l
	m&#251;k&ouml;dik, hogy ha azonos korl&aacute;toz&aacute;sok
	al&aacute; es&#245; g&eacute;pek csoportjait akarjuk
	fel&iacute;rni.  B&aacute;natunk ez a kiv&eacute;tel, &eacute;s
	nem a szab&aacute;ly.  Az esetek nagy
	t&ouml;bbs&eacute;g&eacute;ben ugyanis a bejelentkez&eacute;sre
	vonatkoz&oacute; korl&aacute;toz&aacute;sokat
	g&eacute;penk&eacute;nt kell egyes&eacute;vel megadni.</para>

      <para>A h&aacute;l&oacute;zati csoportok g&eacute;pf&uuml;gg&#245;
	megad&aacute;sa teh&aacute;t az im&eacute;nti h&aacute;zirendhez
	t&aacute;rsul&oacute; ig&eacute;nyek
	kiel&eacute;g&iacute;t&eacute;s&eacute;nek egyik m&oacute;dja.
	Ebben a forgat&oacute;k&ouml;nyvben az
	<filename>/etc/master.passwd</filename> &aacute;llom&aacute;ny
	minden sz&aacute;m&iacute;t&oacute;g&eacute;pen k&eacute;t
	<quote>+</quote>-os sorral kezd&#245;dik.
	K&ouml;z&uuml;l&uuml;k az els&#245; a g&eacute;pen
	enged&eacute;lyezett hozz&aacute;f&eacute;r&eacute;seket
	tartalmaz&oacute; h&aacute;l&oacute;zati csoportra vonatkozik, a
	m&aacute;sodik pedig az &ouml;sszes t&ouml;bbi
	hozz&aacute;f&eacute;r&eacute;shez az
	<filename>/sbin/nologin</filename> parancs&eacute;rtelmez&#245;t
	kapcsolja hozz&aacute;.  Itt j&oacute; &ouml;tlet, ha a
	g&eacute;p nev&eacute;nek
	<quote>V&Eacute;GIG-NAGYBET&#219;S</quote>
	v&aacute;ltozat&aacute;t adjuk meg a hozz&aacute;tartoz&oacute;
	h&aacute;l&oacute;zati csoport nev&eacute;nek:</para>

      <programlisting>+@<replaceable>G&Eacute;PN&Eacute;V</replaceable>:::::::::
+:::::::::/sbin/nologin</programlisting>

      <para>Miut&aacute;n elv&eacute;gezt&uuml;k ezt a feladatot minden
	egyes g&eacute;pen, az <filename>/etc/master.passwd</filename>
	&aacute;llom&aacute;ny helyi v&aacute;ltozatait soha
	t&ouml;bb&eacute; nem kell m&oacute;dos&iacute;tanunk.  Az
	&ouml;sszes t&ouml;bbi v&aacute;ltoztat&aacute;st a NIS
	t&aacute;bl&aacute;zaton kereszt&uuml;l tudjuk kereszt&uuml;l
	vinni.  &Iacute;me a felv&aacute;zolt
	forgat&oacute;k&ouml;nyvh&ouml;z tartoz&oacute;
	h&aacute;l&oacute;zati csoportok
	ki&eacute;p&iacute;t&eacute;s&eacute;nek egyik lehets&eacute;ges
	v&aacute;ltozata, egy-k&eacute;t finoms&aacute;ggal
	kieg&eacute;sz&iacute;tve:</para>

      <programlisting># El&#245;sz&ouml;r a felhaszn&aacute;l&oacute;k csoportjait adjuk meg:
IT_DOLG         (,alpha,proba-tartomany)    (,beta,proba-tartomany)
IT_UJDOLG       (,charlie,proba-tartomany)  (,delta,proba-tartomany)
TANSZ1          (,echo,proba-tartomany)     (,foxtrott,proba-tartomany)
TANSZ2          (,golf,proba-taromany)      (,hotel,proba-tartomany)
TANSZ3          (,india,proba-taromany)     (,juliet,proba-tartomany)
IT_OSZTONDIJAS  (,kilo,proba-tartomany)     (,lima,proba-tartomany)
D_OSZTONDIJAS   (,able,proba-tartomany)     (,baker,proba-tartomany)
#
# Most pedig hozzunk l&eacute;tre csoportokat szerepek szerint:
FELHASZNALOK     TANSZ1   TANSZ2          TANSZ3
NAGYSRV          IT_DOLG  IT_UJDOLG
KISSRV           IT_DOLG  IT_UJDOLG       IT_OSZTONDIJAS
MUNKA            IT_DOLG  IT_OSZTONDIJAS  FELHASZNALOK
#
# K&ouml;vetkezzenek a speci&aacute;lis feladatokhoz tartoz&oacute; csoportok:
# Az echo &eacute;s a golf tudja el&eacute;rni a v&iacute;rusv&eacute;delem&eacute;rt felel&#245;s g&eacute;pet:
VEDELEM          IT_DOLG  (,echo,proba-tartomany)  (,golf,proba-tartomany)
#
# G&eacute;p alap&uacute; h&aacute;l&oacute;zati csoportok
# A f&#245; szervereink:
HABORU      NAGYSRV
EHSEG       NAGYSRV
# Az india nev&#251; felhaszn&aacute;l&oacute; hozz&aacute; szeretn&eacute; ehhez f&eacute;rni:
SZENNYEZES  NAGYSRV  (,india,proba-tartomany)
#
# Ez val&oacute;ban fontos &eacute;s komolyan szab&aacute;lyoznunk kell:
HALAL       IT_DOLG
#
# Az el&#245;bb eml&iacute;tett v&iacute;rusv&eacute;delmi g&eacute;p:
EGY         VEDELEM
#
# Egyetlen felhaszn&aacute;l&oacute;ra korl&aacute;tozzuk le ezt a g&eacute;pet:
KETTO       (,hotel,proba-tartomany)
# [...&eacute;s itt folytat&oacute;dik a t&ouml;bbi csoporttal]</programlisting>

      <para>Ha a felhaszn&aacute;l&oacute;i
	hozz&aacute;f&eacute;r&eacute;seinket valamilyen
	adatb&aacute;zisban t&aacute;roljuk, akkor a
	t&aacute;bl&aacute;zat els&#245; r&eacute;sz&eacute;t
	ak&aacute;r az adatb&aacute;zis lek&eacute;rdez&eacute;sein
	kereszt&uuml;l is el&#245; tudjuk &aacute;ll&iacute;tani.  Ezzel
	a m&oacute;dszerrel az &uacute;j felhaszn&aacute;l&oacute;k
	automatikusan hozz&aacute;f&eacute;rnek a
	g&eacute;pekhez.</para>

      <para>Legy&uuml;nk viszont &oacute;vatosak: nem mindig javasolt
	g&eacute;peken alapul&oacute; h&aacute;l&oacute;zati csoportokat
	k&eacute;sz&iacute;teni.  Ha a hallgat&oacute;i laborokba
	egyszerre t&ouml;bb tucat vagy ak&aacute;r t&ouml;bb sz&aacute;z
	azonos konfigur&aacute;ci&oacute;j&uacute; g&eacute;pet
	telep&iacute;t&uuml;nk, akkor a g&eacute;p alap&uacute;
	csoportok helyett ink&aacute;bb szerep alap&uacute; csoportokat
	&eacute;p&iacute;ts&uuml;nk fel, mivel &iacute;gy a NIS
	t&aacute;bl&aacute;zatok m&eacute;ret&eacute;t egy
	elfogadhat&oacute; m&eacute;reten tudjuk tartani.</para>

    </sect2>

    <sect2>
      <title>Amit felt&eacute;tlen&uuml;l &eacute;szben kell
	tartanunk</title>

      <para>M&eacute;g mindig akad n&eacute;h&aacute;ny olyan dolog,
	amit m&aacute;sk&eacute;ppen kell csin&aacute;lnunk
	azut&aacute;n, hogy most m&aacute;r NIS k&ouml;rnyezetben
	vagyunk.</para>

      <itemizedlist>
	<listitem>
	  <para>Amikor egy &uacute;j felhaszn&aacute;l&oacute;t akarunk
	    felvenni a laborba, akkor <emphasis>csak</emphasis> a
	    k&ouml;zponti NIS szerverre kell felvenn&uuml;nk, &eacute;s
	    <emphasis>&uacute;jra kell gener&aacute;ltatnunk a NIS
	    t&aacute;bl&aacute;zatokat</emphasis>.  Ha ezt
	    elfelejtj&uuml;k megtenni, akkor az &uacute;j
	    felhaszn&aacute;l&oacute; a k&ouml;zponti NIS szerveren
	    k&iacute;v&uuml;l sehova sem lesz k&eacute;pes
	    bejelentkezni.  P&eacute;ld&aacute;ul, ha fel akarjuk venni
	    a <username>jsmith</username> nev&#251;
	    felhaszn&aacute;l&oacute;t a laborba, akkor ezt kell
	    tenn&uuml;nk:</para>

	  <screen>&prompt.root; <userinput>pw useradd jsmith</userinput>
&prompt.root; <userinput>cd /var/yp</userinput>
&prompt.root; <userinput>make proba-tartomany</userinput></screen>

	  <para>Vagy a <command>pw useradd jsmith</command> parancs
	    helyett az <command>adduser jsmith</command> parancsot is
	    haszn&aacute;lhatjuk.</para>
	</listitem>
	<listitem>
	  <para><emphasis>A rendszergazdai szint&#251;
	    hozz&aacute;f&eacute;r&eacute;seket ne t&aacute;roljuk a NIS
	    t&aacute;bl&aacute;zatokban</emphasis>.  Olyan
	    g&eacute;pekre egy&aacute;ltal&aacute;n ne is
	    k&uuml;ldj&uuml;nk olyan karbantart&aacute;shoz
	    haszn&aacute;lt hozz&aacute;f&eacute;r&eacute;seket,
	    amelynek a felhaszn&aacute;l&oacute;i hivatalosan nem is
	    f&eacute;rhetn&eacute;nek hozz&aacute;juk.</para>
	</listitem>
	<listitem>
	  <para><emphasis>A k&ouml;zponti NIS szervert &eacute;s az
	    al&aacute;rendelt szervereket &oacute;vjuk min&eacute;l
	    jobban, &eacute;s igyekezz&uuml;nk minimaliz&aacute;lni a
	    kies&eacute;seiket</emphasis>.  Ha valaki felt&ouml;ri vagy
	    egyszer&#251;en csak kikapcsolja ezeket a g&eacute;peket,
	    akkor ezzel l&eacute;nyeg&eacute;ben mindenkit
	    megakad&aacute;lyoz abban, hogy be tudjon jelentkezni a
	    laborban.</para>

	  <para>Ezek a k&ouml;zpontos&iacute;tott
	    vez&eacute;rl&eacute;s&#251; rendszerek legf&#245;bb
	    gyenges&eacute;gei.  Ha nem v&eacute;dj&uuml;k kell&#245;en
	    a NIS szervereinket, akkor azzal nagyon ellens&eacute;get
	    szerezhet&uuml;nk magunknak!</para>
	</listitem>
      </itemizedlist>

    </sect2>

    <sect2>
      <title>Kompatibilit&aacute;s a NIS els&#245;
	v&aacute;ltozat&aacute;val</title>

      <para>A &os;-ben megtal&aacute;lhat&oacute;
	<application>ypserv</application> szolg&aacute;ltat&aacute;s
	valamennyire k&eacute;pes ell&aacute;tni a NIS els&#245;
	v&aacute;ltozat&aacute;t haszn&aacute;l&oacute; klienseket is.
	A &os; NIS implement&aacute;ci&oacute;ja csak a NIS v2
	protokollt haszn&aacute;lja, azonban mivel m&aacute;s
	implement&aacute;ci&oacute;k kompatibilisek
	k&iacute;v&aacute;nnak maradni a r&eacute;gebbi rendszerekkel,
	ismerik a v1 protokollt is.  Az ilyen rendszerekhez
	tartoz&oacute; <application>ypbind</application> d&eacute;monok
	m&eacute;g olyankor is megpr&oacute;b&aacute;lnak v1-es NIS
	szerverekhez k&ouml;t&eacute;st l&eacute;trehozni, amikor
	val&oacute;j&aacute;ban nincs is r&aacute;
	sz&uuml;ks&eacute;g&uuml;k (&eacute;s gyakran m&eacute;g akkor
	is ilyet keresnek, amikor az &uuml;zenet&uuml;kre m&aacute;r
	v&aacute;laszolt egy v2-es szerver).
	Hozz&aacute;tenn&eacute;nk, hogy b&aacute;r az
	<application>ypserver</application> ezen v&aacute;ltozata a
	norm&aacute;l kliensh&iacute;v&aacute;sokat k&eacute;pes
	feldolgozni, a t&aacute;bl&aacute;zatokat m&aacute;r nem tudja
	&aacute;tk&uuml;ldeni a v1-es klienseknek.  Ebb&#245;l
	k&ouml;vetkezik, hogy a k&ouml;zponti vagy al&aacute;rendelt
	szerverek nem tudnak egy&uuml;ttm&#251;k&ouml;dni olyan NIS
	szerverekkel, amelyek csak a v1-es protokollt besz&eacute;lik.
	Szerencs&eacute;re ilyen szervereket manaps&aacute;g m&aacute;r
	alig haszn&aacute;lnak.</para>

    </sect2>

    <sect2 id="network-nis-server-is-client">
      <title>NIS szerverek, melyek egyben NIS kliensek</title>

      <para>&Oacute;vatosan kell b&aacute;nnunk az
	<application>ypserv</application>
	elind&iacute;t&aacute;s&aacute;val olyan t&ouml;bbszerveres
	tartom&aacute;nyokban, ahol a szerverek maguk is NIS kliensek.
	Alapvet&#245;en nincs abban semmi kivetnival&oacute;, ha a
	szervereket saj&aacute;t magukhoz k&ouml;tj&uuml;k ahelyett,
	hogy engedn&eacute;nk nekik a k&ouml;t&eacute;si
	k&eacute;r&eacute;sek k&uuml;ld&eacute;s&eacute;t &eacute;s
	&iacute;gy egym&aacute;shoz k&ouml;tn&eacute;nk ezeket.
	K&uuml;l&ouml;n&ouml;s hib&aacute;k tudnak sz&aacute;rmazni
	olyan helyzetekben, amikor az egyik szerver le&aacute;ll,
	mik&ouml;zben a t&ouml;bbiek pedig f&uuml;ggenek t&#245;le.
	V&eacute;g&uuml;l is ilyenkor minden kliens sz&eacute;pen
	kiv&aacute;rja a sz&uuml;ks&eacute;ges id&#245;t, azt&aacute;n
	megpr&oacute;b&aacute;l m&aacute;s szerverekhez
	k&ouml;t&#245;dni, de az itt fell&eacute;p&#245;
	k&eacute;sleked&eacute;s jelent&#245;s mennyis&eacute;g&#251;
	lehet, &eacute;s ez a hibajelens&eacute;g ism&eacute;t
	fenn&aacute;llhat, mivel el&#245;fordulhat, hogy a szerverek
	megint egym&aacute;shoz kapcsol&oacute;dnak.</para>

      <para>A klienst &uacute;gy tudjuk egy adott szerverhez k&ouml;tni,
	ha az <command>ypbind</command> parancsot a <option>-S</option>
	be&aacute;ll&iacute;t&aacute;ssal ind&iacute;tjuk.  Ha mindezt
	nem akarjuk manu&aacute;lisan megtenni a NIS szerver minden
	egyes &uacute;jraind&iacute;t&aacute;sakor, akkor vegy&uuml;k
	fel a k&ouml;vetkez&#245; sorokat az
	<filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyba:</para>

      <programlisting>nis_client_enable="YES"	# elind&iacute;tjuk a klienst is
nis_client_flags="-S <replaceable>NIS tartom&aacute;ny</replaceable>,<replaceable>szerver</replaceable>"</programlisting>

      <para>R&eacute;szletesebb l&aacute;sd az &man.ypbind.8; man
	oldal&aacute;t.</para>

    </sect2>

    <sect2>
      <title>A jelszavak form&aacute;tuma</title>

      <indexterm>
	<primary>NIS</primary>
	<secondary>jelszavak form&aacute;tuma</secondary>
      </indexterm>

      <para>A NIS rendszerek ki&eacute;p&iacute;t&eacute;se sor&aacute;n
	az emberek leggyakrabban a jelszavak form&aacute;tum&aacute;val
	kapcsolatban tapasztalnak neh&eacute;zs&eacute;geket.  Ha a
	szerver&uuml;nk DES titkos&iacute;t&aacute;s&uacute; jelszavakat
	haszn&aacute;l, akkor csak olyan klienseket fog tudni
	t&aacute;mogatni, amelyek szint&eacute;n &iacute;gy
	k&oacute;dolj&aacute;k ezeket.  P&eacute;ld&aacute;ul, ha a
	h&aacute;l&oacute;zaton vannak &solaris; rendszer&#251; NIS
	klienseink, akkor szinte biztos, hogy DES
	titkos&iacute;t&aacute;st kell haszn&aacute;lnunk.</para>

      <para>A szerverek &eacute;s a kliensek &aacute;ltal
	haszn&aacute;lt form&aacute;tumokat az
	<filename>/etc/login.conf</filename> &aacute;llom&aacute;nyba
	tekintve der&iacute;thetj&uuml;k ki.  Ha a g&eacute;pek
	t&ouml;bbs&eacute;g&eacute;n a DES titkos&iacute;t&aacute;st
	l&aacute;tjuk, akkor a <literal>default</literal>
	oszt&aacute;lynak egy ilyen bejegyz&eacute;st kell
	tartalmaznia:</para>

      <programlisting>default:\
	:passwd_format=des:\
	:copyright=/etc/COPYRIGHT:\
	[a t&ouml;bbit most nem mutatjuk]</programlisting>

      <para>A <literal>passwd_format</literal> tulajdons&aacute;g
	tov&aacute;bbi lehets&eacute;ges &eacute;rt&eacute;kei lehetnek
	a <literal>blf</literal> &eacute;s az <literal>md5</literal>
	(melyek rendre a Blowfish &eacute;s MD5
	titkos&iacute;t&aacute;s&uacute; jelszavakat adj&aacute;k
	meg).</para>

      <para>Ha v&aacute;ltoztattunk valamit az
	<filename>/etc/login.conf</filename> &aacute;llom&aacute;nyban,
	akkor a bejelentkez&eacute;si tulajdons&aacute;gok
	adatb&aacute;zis&aacute;t is &uacute;jra kell gener&aacute;lni,
	melyet <username>root</username>
	felhaszn&aacute;l&oacute;k&eacute;nt a k&ouml;vetkez&#245;
	m&oacute;don tehet&uuml;nk meg:</para>

      <screen>&prompt.root; <userinput>cap_mkdb /etc/login.conf</userinput></screen>

      <note>
	<para>Az <filename>/etc/master.passwd</filename>
	  &aacute;llom&aacute;nyban jelenlev&#245; jelszavak
	  form&aacute;tuma azonban nem friss&iacute;t&#245;dik
	  eg&eacute;szen addig, am&iacute;g a felhaszn&aacute;l&oacute;k
	  a bejelentkez&eacute;si adatb&aacute;zis
	  &uacute;jragener&aacute;l&aacute;sa
	  <emphasis>ut&aacute;n</emphasis> meg nem
	  v&aacute;ltoztatj&aacute;k a jelszavaikat.</para>
      </note>

      <para>&Uacute;gy tudjuk m&eacute;g biztos&iacute;tani, hogy a
	jelszavak megfelel&#245; form&aacute;tumban
	k&oacute;dol&oacute;djanak, ha az
	<filename>/etc/auth.conf</filename> &aacute;llom&aacute;nyban
	megkeress&uuml;k a <literal>crypt_default</literal> sort,
	amelyben a v&aacute;laszthat&oacute;
	jelsz&oacute;form&aacute;tumok
	felhaszn&aacute;l&aacute;s&aacute;i sorrendj&eacute;t
	tal&aacute;lhatjuk meg.  Itt teh&aacute;t mind&ouml;ssze annyit
	kell tenn&uuml;nk, hogy a kiszemelt form&aacute;tumot a lista
	elej&eacute;re tessz&uuml;k.  P&eacute;ld&aacute;ul, ha a DES
	titkos&iacute;t&aacute;s&uacute; jelszavakat akarunk
	haszn&aacute;lni, akkor ez a bejegyz&eacute;s &iacute;gy fog
	kin&eacute;zni:</para>

      <programlisting>crypt_default	=	des blf md5</programlisting>

      <para>Ha a fenti l&eacute;p&eacute;seket k&ouml;vetj&uuml;k az
	&ouml;sszes &os; alap&uacute; NIS szervern&eacute;l &eacute;s
	kliensn&eacute;l, akkor biztosra mehet&uuml;nk abban, hogy a
	h&aacute;l&oacute;zatunkon bel&uuml;l ugyanazt a
	jelsz&oacute;form&aacute;tumot fogj&aacute;k haszn&aacute;lni.
	Ha gondunk akadna a NIS kliensek
	hiteles&iacute;t&eacute;s&eacute;vel, akkor itt &eacute;rdemes
	kezdeni a hiba felder&iacute;t&eacute;s&eacute;t.  Ne
	felejts&uuml;k: ha egy NIS szervert egy heterog&eacute;n
	h&aacute;l&oacute;zatba akarunk telep&iacute;teni, akkor
	val&oacute;sz&iacute;n&#251;leg az &ouml;sszes rendszeren a DES
	titkos&iacute;t&aacute;st kell v&aacute;lasztani, mivel
	&aacute;ltal&aacute;ban ez a k&ouml;z&ouml;s nevez&#245; ebben a
	tekintetben.</para>

    </sect2>
  </sect1>

  <sect1 id="network-dhcp">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Greg</firstname>
	  <surname>Sutter</surname>
	  <contrib>&Iacute;rta: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>A h&aacute;l&oacute;zat automatikus
      be&aacute;ll&iacute;t&aacute;sa (DHCP)</title>

    <sect2>
      <title>Mi az a DHCP?</title>

      <indexterm>
	<primary>Dinamikus
	  &aacute;llom&aacute;skonfigur&aacute;ci&oacute;s
	  protokoll</primary>
	<see>DHCP</see>
      </indexterm>
      <indexterm><primary>internetes szoftverkonzorcium
	(ISC)</primary></indexterm>

      <para>A Dinamikus &aacute;llom&aacute;skonfigur&aacute;ci&oacute;s
	protokoll, avagy Dynamic Host Configuration Protocol (DHCP)
	annak eszk&ouml;zeit &iacute;rja le, hogy egy rendszer
	mik&eacute;nt tud csatlakozni egy h&aacute;l&oacute;zathoz
	&eacute;s mik&eacute;nt tudja azon bel&uuml;l megszerezni a
	kommunik&aacute;ci&oacute;hoz sz&uuml;ks&eacute;ges
	inform&aacute;ci&oacute;kat.  A &os;&nbsp;6.0 el&#245;tti
	v&aacute;ltozatai az ISC (Internet Software Consortium, vagyis
	az internetes szoftverkonzorcium) &aacute;ltal kidolgozott DHCP
	kliens (&man.dhclient.8;) implement&aacute;ci&oacute;j&aacute;t
	tartalmazz&aacute;k.  A k&eacute;s&#245;bbi verzi&oacute;kban
	pedig az OpenBSD&nbsp;3.7 verzi&oacute;j&aacute;b&oacute;l
	&aacute;tvett <command>dhclient</command> paranccsal
	dolgozhatunk.  Ebben a szakaszban a <command>dhclient</command>
	parancsra vonatkoz&oacute; &ouml;sszes inform&aacute;ci&oacute;
	egyar&aacute;nt &eacute;rv&eacute;nyes az ISC &eacute;s az
	OpenBSD &aacute;ltal fejlesztett DHCP kliensekre.  A DHCP
	szerver az ISC-t&#245;l sz&aacute;rmazik.</para>

    </sect2>

    <sect2>
      <title>Mivel foglalkozik ez a szakasz</title>

      <para>Ebben a szakaszban az ISC &eacute;s az OpenBSD DHCP
	klienseinek kliens- &eacute;s szerver oldali komponsenseit
	mutatjuk be.  A kliens oldali program neve a
	<command>dhclient</command>, amely a &os;
	r&eacute;szek&eacute;nt &eacute;rkezik, &eacute;s a szerver
	oldali elem pedig a <filename
	role="package">net/isc-dhcp3-server</filename> porton
	kereszt&uuml;l &eacute;rhet&#245; el.  A lentebb eml&iacute;tett
	hivatkoz&aacute;sok mellett a t&eacute;m&aacute;ban m&eacute;g a
	&man.dhclient.8;, &man.dhcp-options.5; &eacute;s a
	&man.dhclient.conf.5; man adhatnak b&#245;vebb
	felvil&aacute;gos&iacute;t&aacute;st a
	t&eacute;m&aacute;ban.</para>

    </sect2>

    <sect2>
      <title>Ahogyan m&#251;k&ouml;dik</title>

      <indexterm><primary>UDP</primary></indexterm>

      <para>Amikor a <command>dhclient</command>, vagyis a DHCP kliens
	elindul egy kliensg&eacute;pen, akkor a h&aacute;l&oacute;zaton
	&uuml;zenetsz&oacute;r&aacute;ssal pr&oacute;b&aacute;lja meg
	elk&eacute;rni a konfigur&aacute;ci&oacute;j&aacute;hoz
	sz&uuml;ks&eacute;ges adatokat.  Alap&eacute;rtelmez&eacute;s
	szerint ezek a k&eacute;r&eacute;sek a 68-as UDP porton
	kereszt&uuml;l mennek.  A szerver ezekre a 67-es UDP porton
	v&aacute;laszol, ahol visszaad a kliensnek egy IP-c&iacute;met
	&eacute;s a h&aacute;l&oacute;zat haszn&aacute;lat&aacute;hoz
	sz&uuml;ks&eacute;ges tov&aacute;bbi
	inform&aacute;ci&oacute;kat, mint p&eacute;ld&aacute;ul a
	h&aacute;l&oacute;zati maszkot, az alap&eacute;rtelmezett
	&aacute;tj&aacute;r&oacute; &eacute;s a
	n&eacute;vfelold&aacute;s&eacute;rt felel&#245;s szerverek
	c&iacute;m&eacute;t.  Az &ouml;sszes ilyen jelleg&#251; adat egy
	DHCP <quote>b&eacute;rlet</quote> (lease)
	form&aacute;j&aacute;ban &eacute;rkezik meg, amely csak egy
	adott ideig &eacute;rv&eacute;nyes (ezt a DHCP szerver
	karbantart&oacute;ja &aacute;ll&iacute;tja be).  &Iacute;gy a
	h&aacute;l&oacute;zaton a kliens n&eacute;lk&uuml;li
	IP-c&iacute;meket egy id&#245; ut&aacute;n automatikusan
	visszanyerj&uuml;k.</para>

      <para>A DHCP kliensek rengeteg inform&aacute;ci&oacute;t
	k&eacute;pes elk&eacute;rni a szervert&#245;l.  Ezek teljes
	list&aacute;j&aacute;t a &man.dhcp-options.5; man oldal&aacute;n
	olvashatjuk el.</para>

    </sect2>

    <sect2>
      <title>Haszn&aacute;lat a &os;-n bel&uuml;l</title>

      <para>A &os; teljes eg&eacute;sz&eacute;ben tartalmazza az ISC
	vagy az OpenBSD DHCP kliens&eacute;t, a
	<command>dhclient</command> programot (att&oacute;l
	f&uuml;gg&#245;en, hogy a &os; melyik v&aacute;ltozat&aacute;t
	haszn&aacute;ljuk).  A DHCP kliensek t&aacute;mogat&aacute;sa a
	telep&iacute;t&#245;ben &eacute;s az alaprendszerben is
	megtal&aacute;lhat&oacute;, &eacute;s ezzel
	mentes&uuml;l&uuml;nk minden konkr&eacute;t
	h&aacute;l&oacute;zati be&aacute;ll&iacute;t&aacute;s
	al&oacute;l a DHCP szervereket alkalmaz&oacute;
	h&aacute;l&oacute;zatokon.  A <command>dhclient</command> a
	&os;&nbsp;3.2 v&aacute;ltozata &oacute;ta
	megtal&aacute;lhat&oacute; a rendszerben.</para>

      <indexterm><primary><application>sysinstall</application></primary></indexterm>

      <para>DHCP haszn&aacute;lat&aacute;t a
	<application>sysinstall</application> is lehet&#245;v&eacute;
	teszi.  Amikor egy h&aacute;l&oacute;zati fel&uuml;letet a
	<application>sysinstall</application> programon bel&uuml;l
	&aacute;ll&iacute;tunk be, akkor a m&aacute;sodik
	k&eacute;rd&eacute;s mindig ez szokott lenni: <quote>Do you want
	to try DHCP configuration of the interface?</quote>
	(<quote>Megpr&oacute;b&aacute;ljuk DHCP
	haszn&aacute;lat&aacute;val be&aacute;ll&iacute;tani a
	fel&uuml;letet?</quote>) Ha erre igennel v&aacute;laszolunk,
	akkor azzal l&eacute;nyeg&eacute;ben a
	<command>dhclient</command> parancsot ind&iacute;tjuk el,
	&eacute;s ha mindez sikerrel z&aacute;rul, akkor szinte
	mag&aacute;t&oacute;l kit&ouml;lt&#245;dik az &ouml;sszes
	h&aacute;l&oacute;zati be&aacute;ll&iacute;t&aacute;sunk.</para>

      <para>A DHCP haszn&aacute;lat&aacute;hoz k&eacute;t dolgot kell
	be&aacute;ll&iacute;tanunk a rendszer&uuml;nk&ouml;n:</para>

      <indexterm>
	<primary>DHCP</primary>
	<secondary>k&ouml;vetelm&eacute;nyek</secondary>
      </indexterm>

	<itemizedlist>
	  <listitem>
	    <para>Gondoskodjunk r&oacute;la, hogy a
	      <devicename>bpf</devicename> eszk&ouml;z r&eacute;sze a
	      rendszermagunknak.  Ha m&eacute;g nem lenne benne, akkor a
	      rendszermag be&aacute;ll&iacute;t&aacute;sait
	      tartalmaz&oacute; &aacute;llom&aacute;nyba vegy&uuml;k fel
	      a <literal>device bpf</literal> sort &eacute;s
	      ford&iacute;tsuk &uacute;jra a rendszermagot.  A
	      rendszermagok ford&iacute;t&aacute;s&aacute;r&oacute;l a
	      <xref linkend="kernelconfig">ben tudhatunk meg
	      t&ouml;bbet.</para>

	    <para>A <devicename>bpf</devicename> eszk&ouml;z
	      alapb&oacute;l megtal&aacute;lhat&oacute; a
	      <filename>GENERIC</filename> rendszermagokban, &iacute;gy
	      ha ezt haszn&aacute;ljuk, akkor nem kell saj&aacute;t
	      verzi&oacute;t k&eacute;sz&iacute;ten&uuml;nk a DHCP
	      haszn&aacute;lat&aacute;hoz.</para>

	    <note>
	      <para>Azok sz&aacute;m&aacute;ra viszont, akik
		biztons&aacute;gi szempontb&oacute;l agg&oacute;dnak a
		rendszer&uuml;k miatt, meg kell eml&iacute;ten&uuml;nk,
		hogy a <devicename>bpf</devicename> egyben az az
		eszk&ouml;z, amely a csomagok
		lehallgat&aacute;s&aacute;t is lehet&#245;v&eacute;
		teszi (hab&aacute;r az ilyeneket
		<username>root</username>
		felhaszn&aacute;l&oacute;k&eacute;nt lehet csak
		elind&iacute;tani).  A <devicename>bpf</devicename>
		<emphasis>kell</emphasis> a DHCP
		haszn&aacute;lat&aacute;hoz, azonban ha nagyon fontos
		nek&uuml;nk a rendszer&uuml;nk biztons&aacute;ga, akkor
		a <devicename>bpf</devicename> eszk&ouml;zt
		&eacute;rdemes kivenn&uuml;nk a rendszermagb&oacute;l,
		ha m&eacute;g pillanatnyilag nem haszn&aacute;lunk
		ilyet.</para>
	    </note>
	  </listitem>
	  <listitem>
	    <para>Az <filename>/etc/rc.conf</filename>
	      &aacute;llom&aacute;nyunkat az al&aacute;bbiak szerint
	      kell m&oacute;dos&iacute;tani:</para>

	    <programlisting>ifconfig_fxp0="DHCP"</programlisting>

	    <note>
	      <para>Az <literal>fxp0</literal> eszk&ouml;zt ne
		felejts&uuml;k el kicser&eacute;lni arra a
		fel&uuml;letre, amelyet automatikusan akarunk
		be&aacute;ll&iacute;tani.  Ennek mik&eacute;ntje a <xref
		linkend="config-network-setup">ban
		olvashat&oacute;.</para>
	    </note>

	    <para>Ha a <command>dhclient</command> a rendszer&uuml;nkben
	      m&aacute;shol tal&aacute;lhat&oacute;, vagy
	      egyszer&#251;en csak tov&aacute;bbi
	      be&aacute;ll&iacute;t&aacute;sokat akarunk &aacute;tadni a
	      <command>dhclient</command> parancsnak, akkor adjuk meg a
	      k&ouml;vetkez&#245;t is (v&aacute;ltoztassuk meg
	      ig&eacute;nyeink szerint):</para>

	    <programlisting>dhclient_program="/sbin/dhclient"
dhclient_flags=""</programlisting>
	  </listitem>
	</itemizedlist>

	<indexterm>
	  <primary>DHCP</primary>
	  <secondary>szerver</secondary>
	</indexterm>

	    <para>A DHCP szerver, a <application>dhcpd</application> a
	      <filename role="package">net/isc-dhcp3-server</filename>
	      port r&eacute;szek&eacute;nt &eacute;rhet&#245; el.  Az a
	      port tartalmazza az ISC DHCP szerver&eacute;t &eacute;s a
	      hozz&aacute;tartoz&oacute;
	      dokument&aacute;ci&oacute;t.</para>

    </sect2>

    <sect2>
      <title>&Aacute;llom&aacute;nyok</title>

      <indexterm>
	<primary>DHCP</primary>
	<secondary>konfigur&aacute;ci&oacute;s
	  &aacute;llom&aacute;nyok</secondary>
      </indexterm>

      <itemizedlist>
	<listitem>
	  <para><filename>/etc/dhclient.conf</filename></para>

	  <para>A <command>dhclient</command>
	    m&#251;k&ouml;d&eacute;s&eacute;hez sz&uuml;ks&eacute;g lesz
	    egy konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nyra,
	    aminek a neve <filename>/etc/dhclient.conf</filename>.  Ez
	    az &aacute;llom&aacute;ny &aacute;ltal&aacute;ban csak
	    megjegyz&eacute;seket tartalmaz, mivel az
	    alap&eacute;rtelmezett &eacute;rt&eacute;kek t&ouml;bbnyire
	    megfelel&#245;ek.  Ezt a konfigur&aacute;ci&oacute;s
	    &aacute;llom&aacute;nyt a &man.dhclient.conf.5; man oldal
	    &iacute;rja le.</para>
	</listitem>

	<listitem>
	  <para><filename>/sbin/dhclient</filename></para>

	  <para>A <command>dhclient</command> statikusan linkelt
	    &eacute;s az <filename>/sbin</filename>
	    k&ouml;nyvt&aacute;rban tal&aacute;lhat&oacute;.  A
	    &man.dhclient.8; man oldal tud r&oacute;la
	    r&eacute;szletesebb felvil&aacute;gos&iacute;t&aacute;st
	    adni.</para>
	</listitem>

	<listitem>
	  <para><filename>/sbin/dhclient-script</filename></para>

	  <para>A <command>dhclient-script</command> a &os;-ben
	    lev&#245; DHCP kliens konfigur&aacute;ci&oacute;s szkriptje.
	    M&#251;k&ouml;d&eacute;s&eacute;t a &man.dhclient-script.8;
	    man oldal &iacute;rja le, de a felhaszn&aacute;l&oacute;k
	    r&eacute;sz&eacute;r&#245;l semmilyen
	    m&oacute;dos&iacute;t&aacute;st nem ig&eacute;nyel.</para>
	</listitem>

	<listitem>
	  <para><filename>/var/db/dhclient.leases</filename></para>

	  <para>A DHCP kliens az &eacute;rv&eacute;nyes
	    b&eacute;rleteket tartja nyilv&aacute;n ezekben az
	    &aacute;llom&aacute;nyban &eacute;s napl&oacute;k&eacute;nt
	    haszn&aacute;lja.  A &man.dhclient.leases.5; man oldal ezt
	    valamivel b&#245;vebben kifejti.</para>
	</listitem>
      </itemizedlist>
    </sect2>

    <sect2>
      <title>Tov&aacute;bbi olvasnival&oacute;k</title>

      <para>A DHCP protokoll m&#251;k&ouml;d&eacute;s&eacute;t az <ulink
	url="http://www.freesoft.org/CIE/RFC/2131/">RFC&nbsp;2131</ulink>
	mutatja be.  A t&eacute;m&aacute;hoz kapcsol&oacute;d&oacute;an
	<ulink url="http://www.dhcp.org/"> itt</ulink> tudunk m&eacute;g
	le&iacute;r&aacute;sokat tal&aacute;lni.</para>

    </sect2>

    <sect2 id="network-dhcp-server">
	<title>A DHCP szerverek telep&iacute;t&eacute;se &eacute;s
	  be&aacute;ll&iacute;t&aacute;sa</title>

	<sect3>
	  <title>Mir&#245;l sz&oacute;l ez a szakasz</title>

	  <para>Ebben a szakaszban arr&oacute;l olvashatunk, hogy
	    mik&eacute;nt kell egy &os; t&iacute;pus&uacute; rendszert
	    DHCP szervernek be&aacute;ll&iacute;tani, ha az ISC
	    (internetes szoftverkonzorcium) DHCP szerver&eacute;t
	    haszn&aacute;ljuk.</para>

	  <para>Ez a szerver nem r&eacute;sze a &os;-nek, ez&eacute;rt a
	    szolg&aacute;ltat&aacute;s
	    elind&iacute;t&aacute;s&aacute;hoz el&#245;sz&ouml;r fel
	    kell raknunk a <filename
	    role="package">net/isc-dhcp3-server</filename> portot.  A
	    Portgy&#251;jtem&eacute;ny haszn&aacute;lat&aacute;ra
	    vonatkoz&oacute;an a <xref linkend="ports"> lehet
	    seg&iacute;ts&eacute;g&uuml;nkre.</para>

	</sect3>

	<sect3>
	  <title>A DHCP szerver telep&iacute;t&eacute;se</title>

	  <indexterm>
	    <primary>DHCP</primary>
	    <secondary>telep&iacute;t&eacute;s</secondary>
	  </indexterm>

	  <para>Ha a &os; rendszer&uuml;nket DHCP szerverk&eacute;nt
	    akarjuk be&aacute;ll&iacute;tani, akkor ehhez
	    els&#245;k&eacute;nt a &man.bpf.4; eszk&ouml;z
	    jelenl&eacute;t&eacute;t kell biztos&iacute;tani a
	    rendszermagban.  Ehhez vegy&uuml;k fel a <literal>device
	    bpf</literal> sort a rendszermagunk
	    be&aacute;ll&iacute;t&aacute;sait tartalmaz&oacute;
	    &aacute;llom&aacute;nyba, majd ford&iacute;tsuk &uacute;jra
	    a rendszermagot.  A rendszermag
	    leford&iacute;t&aacute;s&aacute;r&oacute;l a <xref
	    linkend="kernelconfig">ben olvashatunk.</para>

	  <para>A <devicename>bpf</devicename> eszk&ouml;z a &os;-hez
	    alapb&oacute;l adott <filename>GENERIC</filename>
	    rendszermag r&eacute;sze, ez&eacute;rt a DHCP
	    haszn&aacute;lat&aacute;hoz nem kell felt&eacute;tlen&uuml;l
	    &uacute;jat ford&iacute;tanunk.</para>

	    <note>
	      <para>A biztons&aacute;gi szempontok miatt
		agg&oacute;d&oacute; felhaszn&aacute;l&oacute;k
		r&eacute;sz&eacute;re megjegyezz&uuml;k, hogy a
		<devicename>bpf</devicename> eszk&ouml;z egyben a
		csomagok lehallgat&aacute;s&aacute;t is
		lehet&#245;v&eacute; teszi (hab&aacute;r az ilyen
		t&eacute;m&aacute;j&uacute; programok
		futtat&aacute;s&aacute;hoz megfelel&#245; jogokra is
		sz&uuml;ks&eacute;g van).  A
		<devicename>bpf</devicename> haszn&aacute;lata
		<emphasis>k&ouml;telez&#245;</emphasis> a DHCP
		m&#251;k&ouml;dtet&eacute;s&eacute;hez, de ha nagyon
		k&eacute;nyesek vagyunk a biztons&aacute;got
		illet&#245;en, akkor minden olyan esetben, amikor nem
		haszn&aacute;ljuk ki ezt a lehet&#245;s&eacute;get,
		t&aacute;vol&iacute;tsuk el a
		rendszermagb&oacute;l.</para>
	    </note>

	  <para>A k&ouml;vetkez&#245; l&eacute;p&eacute;sben &aacute;t
	    kell szerkeszten&uuml;nk a mintak&eacute;nt mell&eacute;kelt
	    <filename>dhcpd.conf</filename> &aacute;llom&aacute;nyt,
	    amelyet a <filename
	    role="package">net/isc-dhcp3-server</filename> port rakott
	    fel.  Ez alap&eacute;rtelmez&eacute;s szerint a
	    <filename>/usr/local/etc/dhcpd.conf.sample</filename>
	    n&eacute;ven tal&aacute;lhat&oacute; meg, &eacute;s
	    miel&#245;tt b&aacute;rmit is v&aacute;ltoztatn&aacute;nk
	    rajta, m&aacute;soljuk le
	    <filename>/usr/local/etc/dhcpd.conf</filename>
	    n&eacute;ven.</para>

	</sect3>

	<sect3>
	  <title>A DHCP szerver be&aacute;ll&iacute;t&aacute;sa</title>

	  <indexterm>
	    <primary>DHCP</primary>
	    <secondary>dhcpd.conf</secondary>
	  </indexterm>

	  <para>A <filename>dhcpd.conf</filename> az
	    alh&aacute;l&oacute;zatokat illetve a g&eacute;peket
	    &eacute;rint&#245; deklar&aacute;ci&oacute;kat tartalmazza,
	    &eacute;s tal&aacute;n a legk&ouml;nnyebben a
	    k&ouml;vetkez&#245; p&eacute;lda alapj&aacute;n
	    mutathat&oacute; be:</para>

	  <programlisting>option domain-name "minta.com";<co id="domain-name">
option domain-name-servers 192.168.4.100;<co id="domain-name-servers">
option subnet-mask 255.255.255.0;<co id="subnet-mask">

default-lease-time 3600;<co id="default-lease-time">
max-lease-time 86400;<co id="max-lease-time">
ddns-update-style none;<co id="ddns-update-style">

subnet 192.168.4.0 netmask 255.255.255.0 {
  range 192.168.4.129 192.168.4.254;<co id="range">
  option routers 192.168.4.1;<co id="routers">
}

host mailhost {
  hardware ethernet 02:03:04:05:06:07;<co id="hardware">
  fixed-address levelezes.minta.com;<co id="fixed-address">
}</programlisting>

	  <calloutlist>
	    <callout arearefs="domain-name">
	      <para>Ez a be&aacute;ll&iacute;t&aacute;s adja meg a
		kliensek sz&aacute;m&aacute;ra az alap&eacute;rtelmezett
		keres&eacute;si tartom&aacute;nyt (search domain).  A
		&man.resolv.conf.5; tud ezzel kapcsolatban
		r&eacute;szletesebb inform&aacute;ci&oacute;kat
		adni.</para>
	    </callout>

	    <callout arearefs="domain-name-servers">
	      <para>Ez a be&aacute;ll&iacute;t&aacute;s adja meg a
		kliensek &aacute;ltal haszn&aacute;lt
		n&eacute;vfelold&oacute; szerverek vessz&#245;vel
		elv&aacute;lasztott felsorol&aacute;s&aacute;t.</para>
	    </callout>

	    <callout arearefs="subnet-mask">
	      <para>A kliensekhez tartoz&oacute; h&aacute;l&oacute;zati
		maszk.</para>
	    </callout>

	    <callout arearefs="default-lease-time">
	      <para>A kliens egy adott id&#245;re k&eacute;rhet
		b&eacute;rleti jogot, egy&eacute;bk&eacute;nt a szerver
		d&ouml;nt a b&eacute;rlet lej&aacute;rati
		idej&eacute;r&#245;l (m&aacute;sodpercekben).</para>
	    </callout>

	    <callout arearefs="max-lease-time">
	      <para>Ez az a maxim&aacute;lis id&#245;, amennyire a
		szerver hajland&oacute; b&eacute;rbe adni
		IP-c&iacute;met.  A kliens ugyan hosszabb id&#245;re is
		k&eacute;rheti &eacute;s meg is kapja, de legfeljebb
		csak <literal>max-lease-time</literal>
		m&aacute;sodpercig lesz &eacute;rv&eacute;nyes.</para>
	    </callout>

	    <callout arearefs="ddns-update-style">
	      <para>Ez a be&aacute;ll&iacute;t&aacute;s hat&aacute;rozza
		meg, hogy a DHCP szervernek friss&iacute;tse-e a
		n&eacute;vold&aacute;si inform&aacute;ci&oacute;kat a
		b&eacute;rl&eacute;sek
		elfogad&aacute;s&aacute;n&aacute;l vagy
		visszamond&aacute;s&aacute;n&aacute;l.  Az ISC
		implement&aacute;ci&oacute;j&aacute;n&aacute;l ez a
		be&aacute;ll&iacute;t&aacute;s
		<emphasis>k&ouml;telez&#245;</emphasis>.</para>
	    </callout>

	    <callout arearefs="range">
	      <para>Ezzel adjuk meg milyen tartom&aacute;nyb&oacute;l
		tudunk IP-c&iacute;meket kiosztani a kliensek
		sz&aacute;m&aacute;ra.  A kezd&#245; c&iacute;met is
		bele&eacute;rtve, innen fogunk kiutalni egyet a
		klienseknek.</para>
	    </callout>

	    <callout arearefs="routers">
	      <para>A kliensek fel&eacute; elk&uuml;ld&ouml;tt
		alap&eacute;rtelmezett &aacute;tj&aacute;r&oacute;
		c&iacute;me.</para>
	    </callout>

	    <callout arearefs="hardware">
	      <para>A g&eacute;p hardveres MAC-c&iacute;me (&iacute;gy a
		DHCP szerver k&eacute;pes felismerni a
		k&eacute;r&eacute;s k&uuml;ld&#245;j&eacute;t).</para>
	    </callout>

	    <callout arearefs="fixed-address">
	      <para>Ennek megad&aacute;s&aacute;val a g&eacute;pek
		mindig ugyanazt az IP-c&iacute;met kapj&aacute;k.  Itt
		m&aacute;r megadhatunk egy h&aacute;l&oacute;zati nevet,
		mivel a b&eacute;rlethez tartoz&oacute;
		inform&aacute;ci&oacute;k visszak&uuml;ld&eacute;se
		el&#245;tt maga a DHCP szerver fogja feloldani a
		g&eacute;p nev&eacute;t.</para>
	    </callout>
	  </calloutlist>

	  <para>Miut&aacute;n befejezt&uuml;k a
	    <filename>dhcpd.conf</filename>
	    m&oacute;dos&iacute;t&aacute;s&aacute;t, a DHCP szerver az
	    <filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyban
	    tudjuk enged&eacute;lyezni, vagyis tegy&uuml;k bele a
	    k&ouml;vetkez&#245;t:</para>

	  <programlisting>dhcpd_enable="YES"
dhcpd_ifaces="dc0"</programlisting>

	  <para>A <literal>dc0</literal> fel&uuml;let nev&eacute;t
	    helyettes&iacute;ts&uuml;k annak a fel&uuml;letnek (vagy
	    whitespace karakterekkel elv&aacute;lasztott
	    fel&uuml;leteknek) a nev&eacute;vel, amelyen kereszt&uuml;l
	    a DHCP szerver v&aacute;rni fogja a kliensek
	    k&eacute;r&eacute;seit.</para>

	  <para>Ezut&aacute;n a k&ouml;vetkez&#245; parancs
	    kiad&aacute;s&aacute;val ind&iacute;tsuk el a
	    szervert:</para>

	  <screen>&prompt.root; <userinput>/usr/local/etc/rc.d/isc-dhcpd.sh start</userinput></screen>

	  <para>Amikor a j&ouml;v&#245;ben valamit v&aacute;ltoztatunk a
	    konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nyon, akkor
	    ezzel kapcsolatban fontos megeml&iacute;teni, hogy ha csak
	    egy <literal>SIGHUP</literal> jelz&eacute;st
	    k&uuml;ld&uuml;nk a <application>dhcpd</application>
	    d&eacute;monnak, akkor az a t&ouml;bbi
	    d&eacute;mont&oacute;l elt&eacute;r&#245;en
	    &ouml;nmag&aacute;ban m&eacute;g <emphasis>nem</emphasis>
	    eredm&eacute;nyezi a konfigur&aacute;ci&oacute;s adatok
	    &uacute;jraolvas&aacute;s&aacute;t.  Helyette a
	    <literal>SIGTERM</literal> jelz&eacute;ssel kell
	    le&aacute;ll&iacute;tani a programot, majd
	    &uacute;jraind&iacute;tani a fenti paranccsal.</para>

	</sect3>

	<sect3>
	  <title>&Aacute;llom&aacute;nyok</title>

	  <indexterm>
	    <primary>DHCP</primary>
	    <secondary>konfigur&aacute;ci&oacute;s
	      &aacute;llom&aacute;nyok</secondary>
	  </indexterm>

	  <itemizedlist>
	    <listitem>
	      <para><filename>/usr/local/sbin/dhcpd</filename></para>

	      <para>A <application>dhcpd</application> statikusan
		linkelt &eacute;s a <filename>/usr/local/sbin</filename>
		k&ouml;nyvt&aacute;rban tal&aacute;lhat&oacute;.  A
		porttal egy&uuml;tt felker&uuml;l&#245; &man.dhcpd.8;
		man oldal ad r&eacute;szletesebb
		&uacute;tmutat&aacute;st
		<application>dhcpd</application>
		haszn&aacute;lat&aacute;r&oacute;l.</para>
	    </listitem>

	    <listitem>
	      <para><filename>/usr/local/etc/dhcpd.conf</filename></para>

	      <para>Miel&#245;tt a <application>dhcpd</application>
		megkezdhetn&eacute; m&#251;k&ouml;d&eacute;s&eacute;t,
		egy konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nyra
		is sz&uuml;ks&eacute;g&uuml;nk lesz, amely a
		<filename>/usr/local/etc/dhcpd.conf</filename>.  Ez az
		&aacute;llom&aacute;ny tartalmazza az &ouml;sszes olyan
		inform&aacute;ci&oacute;t, ami kell a kliensek
		megfelel&#245; kiszolg&aacute;l&aacute;s&aacute;hoz
		valamint a szerver m&#251;k&ouml;d&eacute;s&eacute;hez.
		Ez a konfigur&aacute;ci&oacute;s &aacute;llom&aacute;ny
		porthoz tartoz&oacute; &man.dhcpd.conf.5; man oldalon
		ker&uuml;l ismertet&eacute;sre.</para>
	    </listitem>

	    <listitem>
	      <para><filename>/var/db/dhcpd.leases</filename></para>

	      <para>A DHCP szerver ebben az &aacute;llom&aacute;nyba
		tartja nyilv&aacute;n a kiadott b&eacute;rleteket, egy
		napl&oacute; form&aacute;j&aacute;ban.  A porthoz
		kapcsol&oacute;d&oacute; &man.dhcpd.leases.5; man
		oldalon err&#245;l t&ouml;bbet is megtudhatunk.</para>
	    </listitem>

	    <listitem>
	      <para><filename>/usr/local/sbin/dhcrelay</filename></para>

	      <para>A <application>dhcrelay</application>
		&aacute;llom&aacute;nynak olyan komolyabb
		k&ouml;rnyezetekben van szerepe, ahol a DHCP szerver a
		kliensekt&#245;l &eacute;rkez&#245;
		k&eacute;r&eacute;seket egy m&aacute;sik
		h&aacute;l&oacute;zaton tal&aacute;lhat&oacute; DHCP
		szerverhez tov&aacute;bb&iacute;tja.  Ha
		sz&uuml;ks&eacute;g lenne erre a
		lehet&#245;s&eacute;gre, akkor telep&iacute;ts&uuml;k
		fel a <filename
		role="package">net/isc-dhcp3-relay</filename> portot.  A
		porthoz tartoz&oacute; &man.dhcrelay.8; man oldal ennek
		r&eacute;szleteit taglalja.</para>
	    </listitem>
	  </itemizedlist>

	</sect3>
      </sect2>
  </sect1>

  <sect1 id="network-dns">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Chern</firstname>
	  <surname>Lee</surname>
	  <contrib>K&eacute;sz&iacute;tette: </contrib>
	</author>

	<author>
	  <firstname>Tom</firstname>
	  <surname>Rhodes</surname>
	</author>

	<author>
	  <firstname>Daniel</firstname>
	  <surname>Gerzo</surname>
	</author>
      </authorgroup>
    </sect1info>

    <title>N&eacute;vfelold&aacute;s (<acronym>DNS</acronym>)</title>

    <sect2>
      <title>&Aacute;ttekint&eacute;s</title>

      <indexterm><primary>BIND</primary></indexterm>

      <para>A &os; alap&eacute;rtelmez&eacute;s szerint a BIND (Berkeley
	Internet Name Domain) egyik verzi&oacute;j&aacute;t tartalmazza,
	amely a n&eacute;vfelold&aacute;si (Domain Name System,
	<acronym>DNS</acronym>) protokoll egyik elterjedt
	implement&aacute;ci&oacute;ja.  A <acronym>DNS</acronym>
	protokollon kereszt&uuml;l tudunk az
	<acronym>IP</acronym>-c&iacute;mekhez neveket rendelni &eacute;s
	ford&iacute;tva.  P&eacute;ld&aacute;ul a <hostid
	role="fqdn">www.FreeBSD.org</hostid> n&eacute;vre a &os; Projekt
	webszerver&eacute;nek <acronym>IP</acronym>-c&iacute;m&eacute;t
	kapjuk meg, mik&ouml;zben a <hostid
	role="fqdn">ftp.FreeBSD.org</hostid> pedig a
	hozz&aacute;tartoz&oacute; <acronym>FTP</acronym> szerver
	<acronym>IP</acronym>-c&iacute;m&eacute;t fogja visszaadni.
	Ehhez hasonl&oacute;an a ford&iacute;tottja is
	megt&ouml;rt&eacute;nhet, vagyis egy
	<acronym>IP</acronym>-c&iacute;mhez is k&eacute;rhetj&uuml;k a
	h&aacute;l&oacute;zati n&eacute;v felold&aacute;s&aacute;t.  A
	n&eacute;vfelold&aacute;si k&eacute;r&eacute;sek
	kiszolg&aacute;l&aacute;s&aacute;hoz nem felt&eacute;tlen&uuml;l
	sz&uuml;ks&eacute;ges n&eacute;vszervert futtatni a
	rendszer&uuml;nk&ouml;n.</para>

      <para>A &os; jelen pillanatban alapb&oacute;l a
	<acronym>BIND</acronym>9 n&eacute;vszervert tartalmazza.  A
	benne szerepl&#245; v&aacute;ltozata t&ouml;bb biztons&aacute;gi
	jav&iacute;t&aacute;st, &uacute;j
	&aacute;llom&aacute;nyrendszeri kioszt&aacute;st &eacute;s
	automatiz&aacute;lt &man.chroot.8;
	be&aacute;ll&iacute;t&aacute;st is mag&aacute;ban foglal.</para>

      <indexterm><primary>n&eacute;vfelold&aacute;s</primary></indexterm>

      <para>Az interneten kereszt&uuml;li n&eacute;vfelold&aacute;st
	legfels&#245; szint&#251; tartom&aacute;nyoknak (Top Level
	Domain, <acronym>TLD</acronym>) nevezett hiteles&iacute;tett
	t&ouml;vek n&eacute;mileg bonyolult rendszer&eacute;n alapszik,
	valamint m&aacute;s egy&eacute;b olyan n&eacute;vszervereken,
	amelyek tov&aacute;bbi egy&eacute;ni inform&aacute;ci&oacute;kat
	t&aacute;rolnak &eacute;s t&aacute;raznak.</para>

      <para>A BIND fejleszt&eacute;s&eacute;t jelenleg az Internet
	Software Consortium (<ulink url="http://www.isc.org/"></ulink>)
	fel&uuml;gyeli.</para>

    </sect2>

    <sect2>
      <title>Alapfogalmak</title>

      <para>A le&iacute;r&aacute;s meg&eacute;rt&eacute;s&eacute;hez be
	kell mutatnunk n&eacute;h&aacute;ny n&eacute;vfelold&aacute;ssal
	kapcsolatos fogalmat.</para>

      <indexterm><primary>n&eacute;vfelold&oacute;</primary></indexterm>
      <indexterm><primary>inverz DNS</primary></indexterm>
      <indexterm><primary>gy&ouml;k&eacute;rz&oacute;na</primary></indexterm>

      <informaltable frame="none" pgwide="1">
	<tgroup cols="2">
	  <colspec colwidth="1*">
	  <colspec colwidth="3*">

	  <thead>
	    <row>
	      <entry>Fogalom</entry>
	      <entry>Meghat&aacute;roz&aacute;s</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry>K&ouml;zvetlen n&eacute;vfelold&aacute;s (forward
		<acronym>DNS</acronym>)</entry>
	      <entry>A h&aacute;l&oacute;zati nevek
		lek&eacute;pez&eacute;se IP-c&iacute;mekre.</entry>
	    </row>

	    <row>
	      <entry>&#213;s (origin)</entry>
	      <entry>Egy adott z&oacute;na &aacute;llom&aacute;nyban
		szerepl&#245; tartom&aacute;nyra vonatkozik.</entry>
	    </row>

	    <row>
	      <entry><application>named</application>, BIND,
		n&eacute;vszerver (name server)</entry>
	      <entry>A &os;-n bel&uuml;li BIND n&eacute;vszerver
		k&uuml;l&ouml;nb&ouml;z&#245;
		megnevez&eacute;sei.</entry>
	    </row>

	    <row>
	      <entry>N&eacute;vfelold&oacute; (resolver)</entry>
	      <entry>Az a program a rendszerben, amelyhez a
		h&aacute;l&oacute;zaton lev&#245; g&eacute;pek a
		z&oacute;n&aacute;k adatainak
		el&eacute;r&eacute;s&eacute;vel kapcsolatban
		fordulnak.</entry>
	    </row>

	    <row>
	      <entry>Inverz n&eacute;vfelold&aacute;s (reverse
		<acronym>DNS</acronym>)</entry>
	      <entry>A rendes n&eacute;vfelold&aacute;s
		ellent&eacute;te, vagyis az
		<acronym>IP</acronym>-c&iacute;mek
		lek&eacute;pz&eacute;se h&aacute;l&oacute;zati
		nevekre.</entry>
	    </row>

	    <row>
	      <entry>Gy&ouml;k&eacute;rz&oacute;na (root zone)</entry>
	      <entry>Az interneten tal&aacute;lhat&oacute;
		z&oacute;n&aacute;k hierarchi&aacute;j&aacute;nak
		t&ouml;ve.  Minden z&oacute;na ebbe a
		gy&ouml;k&eacute;rz&oacute;n&aacute;ba esik, ahhoz
		hasonl&oacute;an, ahogy egy
		&aacute;llom&aacute;nyrendszerben az
		&aacute;llom&aacute;nyok a
		gy&ouml;k&eacute;rk&ouml;nyvt&aacute;rba.</entry>
	    </row>

	    <row>
	      <entry>Z&oacute;na (zone)</entry>
	      <entry>Egy k&uuml;l&ouml;n&aacute;ll&oacute;
		tartom&aacute;ny, altartom&aacute;ny vagy a
		n&eacute;vfelold&aacute;s azon r&eacute;sze, amelyet
		egyazon fennhat&oacute;s&aacute;g alatt tartanak
		karban.</entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

      <indexterm>
	<primary>z&oacute;n&aacute;k</primary>
	<secondary>p&eacute;ld&aacute;k</secondary>
      </indexterm>

      <para>P&eacute;ld&aacute;k z&oacute;n&aacute;kra:</para>

      <itemizedlist>
	<listitem>
	  <para>A <hostid>.</hostid>
	    gy&ouml;k&eacute;rz&oacute;na.</para>
	</listitem>

	<listitem>
	  <para>A <hostid>org.</hostid> egy legfels&#245; szint&#251;
	    tartom&aacute;ny (<acronym>TLD</acronym>) a
	    gy&ouml;k&eacute;rz&oacute;n&aacute;n bel&uuml;l.</para>
	</listitem>

	<listitem>
	  <para>A <hostid role="domainname">minta.org.</hostid> a
	    <hostid>org.</hostid> <acronym>TLD</acronym>
	    tartom&aacute;ny alatti z&oacute;na.</para>
	</listitem>

	<listitem>
	  <para>A <hostid>1.168.192.in-addr.arpa</hostid> egy olyan
	    z&oacute;na, amelyek a <hostid
	    role="ipaddr">192.168.1.*</hostid>
	    <acronym>IP</acronym>-tartom&aacute;nyban szerepl&#245;
	    &ouml;sszes c&iacute;met jel&ouml;li.</para>
	</listitem>
      </itemizedlist>

      <para>Mint l&aacute;thatjuk, a h&aacute;l&oacute;zati nevek
	balr&oacute;l kieg&eacute;sz&uuml;lve pontosodnak.  Teh&aacute;t
	p&eacute;ld&aacute;ul a <hostid
	role="domainname">minta.org.</hostid> sokkal pontosabb
	meghat&aacute;roz&aacute;s, mint a <hostid>org.</hostid>, ahogy
	az <hostid>org.</hostid> mag&aacute;n&aacute;l a
	gy&ouml;k&eacute;rz&oacute;n&aacute;n&aacute;l jelent
	t&ouml;bbet.  A h&aacute;l&oacute;zati nevek feloszt&aacute;sa
	legink&aacute;bb egy &aacute;llom&aacute;nyrendszerhez
	hasonl&iacute;that&oacute;, p&eacute;ld&aacute;ul a <filename
	  class="directory">/dev</filename> k&ouml;nyvt&aacute;r a
	gy&ouml;k&eacute;ren bel&uuml;l tal&aacute;lhat&oacute;,
	&eacute;s &iacute;gy tov&aacute;bb.</para>

    </sect2>

    <sect2>
      <title>Mi&eacute;rt &eacute;rdemes n&eacute;vszervert
	futtatni</title>

      <para>A n&eacute;vszerverek &aacute;ltal&aacute;ban k&eacute;t
	alakban jelennek meg.  Egyik&uuml;k a hiteles&iacute;tett
	n&eacute;vszerver, a m&aacute;sikuk a
	gyors&iacute;t&oacute;t&aacute;raz&oacute;
	n&eacute;vszerver.</para>

      <para>Egy hiteles&iacute;tett n&eacute;vszerverre akkor van
	sz&uuml;ks&eacute;g&uuml;nk, ha:</para>

      <itemizedlist>
	<listitem>
	  <para>a vil&aacute;g t&ouml;bbi r&eacute;sze fel&eacute;
	    akarunk hiteles n&eacute;vfelold&aacute;si
	    inform&aacute;ci&oacute;kat szolg&aacute;ltatni;</para>
	</listitem>

	<listitem>
	  <para>regisztr&aacute;ltunk egy tartom&aacute;nyt
	    (p&eacute;ld&aacute;ul <hostid
	    role="domainname">minta.org</hostid>) &eacute;s az alatta
	    lev&#245; h&aacute;l&oacute;zati nevekhez is
	    szeretn&eacute;nk <acronym>IP</acronym>-c&iacute;meket
	    rendeltetni;</para>
	</listitem>

	<listitem>
	  <para>a <acronym>IP</acronym>-c&iacute;mtartom&aacute;nyunkban
	    sz&uuml;ks&eacute;g van inverz n&eacute;vfelold&aacute;si
	    bejegyz&eacute;sekre (amely
	    <acronym>IP</acronym>-c&iacute;mb&#245;l ad meg
	    h&aacute;l&oacute;zati nevet) is;</para>
	</listitem>

	<listitem>
	  <para>a k&eacute;r&eacute;sek
	    teljes&iacute;t&eacute;s&eacute;hez egy tartal&eacute;k
	    avagy m&aacute;sodik, al&aacute;rendelt (slave)
	    n&eacute;vszerver kell.</para>
	</listitem>
      </itemizedlist>

      <para>A gyors&iacute;t&oacute;t&aacute;raz&oacute;
	n&eacute;vszerverre akkor van sz&uuml;ks&eacute;g&uuml;nk,
	ha:</para>

      <itemizedlist>
	<listitem>
	  <para>egy helyi n&eacute;vfelold&oacute; szerver
	    felhaszn&aacute;l&aacute;s&aacute;val fel akarjuk
	    gyors&iacute;tani az egy&eacute;bk&eacute;nt a
	    k&uuml;ls&#245; n&eacute;vszerver fel&eacute;
	    ir&aacute;nyul&oacute; k&eacute;r&eacute;sek
	    kiszolg&aacute;l&aacute;s&aacute;t.</para>
	</listitem>
      </itemizedlist>

      <para>Amikor valaki lek&eacute;rdezi a <hostid
	role="fqdn">www.FreeBSD.org</hostid> c&iacute;m&eacute;t, akkor
	a n&eacute;vfelold&oacute; el&#245;sz&ouml;r
	&aacute;ltal&aacute;ban a kapcsolatot rendelkez&eacute;sre
	bocs&aacute;t&oacute; internet-szolg&aacute;ltat&oacute;
	n&eacute;vszerver&eacute;t k&eacute;rdezi meg &eacute;s onnan
	kapja meg a v&aacute;laszt.  Egy helyi,
	gyors&iacute;t&oacute;t&aacute;raz&oacute; n&eacute;vszerver
	haszn&aacute;lata eset&eacute;n azonban egy ilyen
	k&eacute;r&eacute;st csak egyszer kell kiadni a k&uuml;ls&#245;
	n&eacute;vszervernek.  Ezut&aacute;n m&aacute;r minden
	tov&aacute;bbi ilyen k&eacute;r&eacute;s el sem hagyja a
	bels&#245; h&aacute;l&oacute;zatunkat, mivel a v&aacute;lasz
	szerepel a gyors&iacute;t&oacute;t&aacute;rban.</para>

    </sect2>

    <sect2>
      <title>Ahogyan m&#251;k&ouml;dik</title>

      <para>&os; alatt a BIND d&eacute;mon nyilv&aacute;nval&oacute;
	okokb&oacute;l <application>named</application> n&eacute;ven
	&eacute;rhet&#245; el.</para>

      <informaltable frame="none" pgwide="1">
	<tgroup cols="2">
	  <thead>
	    <row>
	      <entry>&Aacute;llom&aacute;ny</entry>
	      <entry>Le&iacute;r&aacute;s</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry>&man.named.8;</entry>
	      <entry>A BIND d&eacute;mon.</entry>
	    </row>

	    <row>
	      <entry>&man.rndc.8;</entry>
	      <entry>A n&eacute;vszervert vez&eacute;rl&#245;
		seg&eacute;dprogram.</entry>
	    </row>

	    <row>
	      <entry><filename class="directory">/etc/namedb</filename></entry>
	      <entry>A BIND &aacute;ltal kezelt z&oacute;n&aacute;k
		adatait t&aacute;rol&oacute;
		k&ouml;nyvt&aacute;r.</entry>
	    </row>

	    <row>
	      <entry><filename>/etc/namedb/named.conf</filename></entry>
	      <entry>A d&eacute;mon konfigur&aacute;ci&oacute;s
		&aacute;llom&aacute;nya.</entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

      <para>Att&oacute;l f&uuml;gg&#245;en, hogy mik&eacute;nt
	&aacute;ll&iacute;tjuk be az adott z&oacute;n&aacute;t a
	szerveren, a hozz&aacute;tartoz&oacute; &aacute;llom&aacute;nyok
	a <filename class="directory">/etc/namedb</filename>
	k&ouml;nyvt&aacute;ron bel&uuml;l a <filename
	  class="directory">master</filename>, <filename
	  class="directory">slave</filename> vagy <filename
	  class="directory">dynamic</filename> alk&ouml;nyvt&aacute;rban
	foglalnak helyet.  Az itt t&aacute;rolt
	&aacute;llom&aacute;nyokban lev&#245; n&eacute;vfelold&aacute;si
	inform&aacute;ci&oacute;k alapj&aacute;n v&aacute;laszol a
	n&eacute;vszerver a fel&eacute; int&eacute;zett
	k&eacute;r&eacute;sekre.</para>

    </sect2>

    <sect2>
      <title>A BIND elind&iacute;t&aacute;sa</title>

      <indexterm>
	<primary>BIND</primary>
	<secondary>elind&iacute;t&aacute;s</secondary>
      </indexterm>

      <para>Mivel a BIND alapb&oacute;l el&eacute;rhet&#245; a
	rendszerben, viszonylag k&ouml;nnyen be tudjuk
	&aacute;ll&iacute;tani.</para>

      <para>A <application>named</application> alap&eacute;rtelmezett
	be&aacute;ll&iacute;t&aacute;sa szerint egy &man.chroot.8;
	k&ouml;rnyezetben fut&oacute; egyszer&#251;
	n&eacute;vfelold&aacute;st v&eacute;gz&#245; szerver.  Ezzel a
	be&aacute;ll&iacute;t&aacute;ssal a k&ouml;vetkez&#245;
	parancson kereszt&uuml;l tudjuk elind&iacute;tani:</para>

      <screen>&prompt.root; <userinput>/etc/rc.d/named forcestart</userinput></screen>

      <para>Ha enged&eacute;lyezni akarjuk a
	<application>named</application> d&eacute;mont minden egyes
	rendszerind&iacute;t&aacute;skor, tegy&uuml;k a
	k&ouml;vetkez&#245; sort az <filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyba:</para>

      <programlisting>named_enable="YES"</programlisting>

      <para>&Eacute;rtelemszer&#251;en az
	<filename>/etc/namedb/named.conf</filename> tele van olyan
	be&aacute;ll&iacute;t&aacute;si lehet&#245;s&eacute;gekkel,
	amelyek meghaladj&aacute;k ennek a le&iacute;r&aacute;snak a
	kereteit.  Ha viszont k&iacute;v&aacute;ncsiak vagyunk a
	&os;-ben a <application>named</application>
	ind&iacute;t&aacute;s&aacute;hoz haszn&aacute;lt
	be&aacute;ll&iacute;t&aacute;sokra, akkor az
	<filename>/etc/defaults/rc.conf</filename>
	&aacute;llom&aacute;nyban n&eacute;zz&uuml;k meg
	<literal>named_<replaceable>*</replaceable></literal>
	v&aacute;ltoz&oacute;kat &eacute;s olvassuk &aacute;t az
	&man.rc.conf.5; man oldalt.  Emellett m&eacute;g a <xref
	linkend="configtuning-rcd">t is hasznos lehet elolvasni.</para>

    </sect2>

    <sect2>
      <title>A konfigur&aacute;ci&oacute;s
	&aacute;llom&aacute;nyok</title>

      <indexterm>
	<primary>BIND</primary>
	<secondary>konfigur&aacute;ci&oacute;s
	  &aacute;llom&aacute;nyok</secondary>
      </indexterm>

      <para>A <application>named</application>
	be&aacute;ll&iacute;t&aacute;sait tartalmaz&oacute;
	&aacute;llom&aacute;nyok pillanatnyilag az <filename
	  class="directory">/etc/namedb</filename> k&ouml;nyvt&aacute;rban
	tal&aacute;lhat&oacute;ak &eacute;s hacsak nem egy egyszer&#251;
	n&eacute;vfelold&oacute;ra tartunk ig&eacute;nyt, akkor a
	haszn&aacute;lata el&#245;tt m&oacute;dos&iacute;tanunk is kell.
	Itt ejtj&uuml;k meg a be&aacute;ll&iacute;t&aacute;sok nagy
	r&eacute;sz&eacute;t.</para>

      <sect3>
	<title>A <command>make-localhost</command>
	  haszn&aacute;lata</title>

	<para>Ha a helyi g&eacute;pen egy k&ouml;zponti
	  z&oacute;n&aacute;t akarunk be&aacute;ll&iacute;tani, akkor
	  l&eacute;pj&uuml;nk be az <filename
	    class="directory">/etc/namedb</filename> k&ouml;nyvt&aacute;rba
	  &eacute;s futtassuk le a k&ouml;vetkez&#245; parancsot:</para>

	<screen>&prompt.root; <userinput>sh make-localhost</userinput></screen>

	<para>Ha nem t&ouml;rt&eacute;nt semmilyen hiba, akkor a
	  <filename class="directory">master</filename>
	  alk&ouml;nyvt&aacute;rban most meg kell jelennie egy &uacute;j
	  &aacute;llom&aacute;nynak.  A helyi
	  tartom&aacute;nyn&eacute;vhez tartoz&oacute;
	  &aacute;llom&aacute;ny a <filename>localhost.rev</filename>,
	  valamint <acronym>IPv6</acronym> k&ouml;rnyezetben a
	  <filename>localhost-v6.rev</filename>.  Alap&eacute;rtelmezett
	  konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nyk&eacute;nt
	  a <filename>named.conf</filename> ehhez tartalmaz minden
	  sz&uuml;ks&eacute;ges inform&aacute;ci&oacute;t.</para>

      </sect3>

      <sect3>
	<title><filename>/etc/namedb/named.conf</filename></title>

	<programlisting>// &dollar;FreeBSD&dollar;
//
// R&eacute;szletesebb le&iacute;r&aacute;st a named.conf(5) &eacute;s named(8) man oldalakon, valamint
// a /usr/share/doc/bind9 k&ouml;nyvt&aacute;rban tal&aacute;lhatunk.
//
// Ha egy hiteles&iacute;tett szervert akarunk be&aacute;ll&iacute;tani, akkor igyekezz&uuml;nk
// a n&eacute;vfelold&aacute;s &ouml;sszes finom r&eacute;szlet&eacute;vel pontosan tiszt&aacute;ban lenni.
// Ugyanis m&eacute;g a legkisebb hib&aacute;kkal is egyr&eacute;szt elv&aacute;ghatunk g&eacute;peket az
// internet-l&eacute;r&eacute;s&eacute;t&#245;l, vagy m&aacute;sr&eacute;szt felesleges forgalmat tudunk
// gener&aacute;lni
//

options {
	directory	"/etc/namedb";
	pid-file	"/var/run/named/pid";
	dump-file	"/var/dump/named_dump.db";
	statistics-file	"/var/stats/named.stats";

// Ha a named d&eacute;mont csak helyi n&eacute;vfelold&oacute;k&eacute;nt haszn&aacute;ljuk, akkor ez
// egy biztons&aacute;gos alapbe&aacute;ll&iacute;t&aacute;s. Ha viszont a named d&eacute;mon az eg&eacute;sz
// h&aacute;l&oacute;zatunkat is kiszolg&aacute;lja, akkor ezt a be&aacute;ll&iacute;t&aacute;st tegy&uuml;k
// megjegyz&eacute;sbe, vagy adjunk meg egy rendes IP-c&iacute;met, esetleg
// t&ouml;r&ouml;lj&uuml;k ki.
	listen-on	{ 127.0.0.1; };

// Ha rendszer&uuml;nk&ouml;n enged&eacute;lyezett az IPv6 haszn&aacute;lata, akkor a helyi
// n&eacute;vfelold&oacute; haszn&aacute;lat&aacute;hoz ezt a sort vegy&uuml;k ki a megjegyz&eacute;sb&#245;l.
// A h&aacute;l&oacute;zatunk t&ouml;bbi r&eacute;sz&eacute;r&#245;l pedig &uacute;gy lehet el&eacute;rni, ha itt megadunk
// egy IPv6 c&iacute;met, vagy az "any" kulcssz&oacute;t.
//	listen-on-v6	{ ::1; };

// A "forwarders" blokk mellett a k&ouml;vetkez&#245; sorral megk&eacute;rhetj&uuml;k a
// n&eacute;vszervert, hogy &ouml;nmag&aacute;t&oacute;l soha nem kezdem&eacute;nyezzen k&eacute;r&eacute;seket,
// hanem mindig az im&eacute;nti helyen megjel&ouml;lt szerverekhez ir&aacute;ny&iacute;tsa
// ezeket:
//
//	forward only;

// Ha a szolg&aacute;ltat&oacute;nk n&eacute;vszervert is el&eacute;rhet&#245;v&eacute; tett sz&aacute;munkra, akkor
// itt adjuk meg annak az IP-c&iacute;m&eacute;t &eacute;s enged&eacute;lyezz&uuml;k az al&aacute;bbi sort.
// Ezzel egyben kihaszn&aacute;ljuk a gyors&iacute;t&oacute;t&aacute;rat is, &iacute;gy m&eacute;rs&eacute;kelj&uuml;k az
// internet fel&eacute; mozg&oacute; n&eacute;vfelold&aacute;sokat.
/*
	forwarders {
		127.0.0.1;
	};
*/</programlisting>

	<para>Ahogy arr&oacute;l a megjegyz&eacute;sekben is sz&oacute;
	  esik, &uacute;gy tudjuk aktiv&aacute;lni a
	  gyors&iacute;t&oacute;t&aacute;rat, ha megadjuk a
	  <literal>forwarders</literal> be&aacute;ll&iacute;t&aacute;st.
	  Norm&aacute;lis k&ouml;r&uuml;lm&eacute;nyek k&ouml;z&ouml;tt
	  a n&eacute;vszerver az interneten az egyes
	  n&eacute;vszervereket rekurz&iacute;van fogja keresni
	  eg&eacute;szen addig, am&iacute;g meg nem tal&aacute;lja a
	  keresett v&aacute;laszt.  Az im&eacute;nti
	  be&aacute;ll&iacute;t&aacute;s
	  enged&eacute;lyez&eacute;s&eacute;vel azonban
	  el&#245;sz&ouml;r a szolg&aacute;ltat&oacute;
	  n&eacute;vszerver&eacute;t (vagy az &aacute;ltala
	  kijel&ouml;lt n&eacute;vszervert) fogjuk megk&eacute;rdezni, a
	  saj&aacute;t
	  gyors&iacute;t&oacute;t&aacute;r&aacute;b&oacute;l.  Ha a
	  szolg&aacute;ltat&oacute; k&eacute;rd&eacute;ses
	  n&eacute;vszervere egy gyakran haszn&aacute;lt, gyors
	  n&eacute;vszerver, akkor ezt &eacute;rdemes
	  bekapcsolnunk.</para>

	<warning>
	  <para>Itt a <hostid role="ipaddr">127.0.0.1</hostid>
	    megad&aacute;sa <emphasis>nem</emphasis> m&#251;k&ouml;dik.
	    Mindenk&eacute;ppen &iacute;rjuk &aacute;t a
	    szolg&aacute;ltat&oacute;nk n&eacute;vszerver&eacute;nek
	    <acronym>IP</acronym>-c&iacute;m&eacute;re.</para>
	</warning>

	<programlisting>	/*
	 * Ha k&ouml;zt&uuml;nk &eacute;s az el&eacute;rni k&iacute;v&aacute;nt n&eacute;vszerverek k&ouml;z&ouml;tt t&#251;zfal
	 * is tal&aacute;lhat&oacute;, akkor az al&aacute;bbi "query-source" direkt&iacute;v&aacute;t is
	 * enged&eacute;lyezn&uuml;nk kell. A BIND kor&aacute;bbi v&aacute;ltozatait mindig az
	 * 53-as porton kereszt&uuml;l k&uuml;ldt&eacute;k el a k&eacute;r&eacute;seiket, de BIND
	 * nyolcadik verzi&oacute;j&aacute;t&oacute;l kezdve alap&eacute;rtelmez&eacute;s szerint
	 * erre a feladatra m&aacute;r egy v&eacute;letlenszer&#251;en v&aacute;lasztott, nem
	 * privilegiz&aacute;lt UDP portot haszn&aacute;lnak.
	 */
	 // query-source address * port 53;
};

// Ha enged&eacute;lyezz&uuml;k a helyi n&eacute;vszervert, akkor az /etc/resolv.conf
// &aacute;llom&aacute;nyban els&#245; helyen megadni a 127.0.0.1 c&iacute;met. S&#245;t, az
// /etc/rc.conf &aacute;llom&aacute;nyb&oacute;l se felejts&uuml;k ki.

zone "." {
	type hint;
	file "named.root";
};

zone "0.0.127.IN-ADDR.ARPA" {
	type master;
	file "master/localhost.rev";
};

// RFC 3152
zone "1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.IP6.ARPA" {
	type master;
	file "master/localhost-v6.rev";
};

// FONTOS: Ne haszn&aacute;ljuk ezeket az IP-c&iacute;meket, mert nem val&oacute;diak,
// csup&aacute;n illusztr&aacute;ci&oacute;s &eacute;s dokument&aacute;ci&oacute;s c&eacute;lokb&oacute;l adtuk meg!
//
// Az al&aacute;rendelt z&oacute;n&aacute;k be&aacute;ll&iacute;t&aacute;saira vonatkoz&oacute; bejegyz&eacute;sek. &Eacute;rdemes
// ilyet be&aacute;ll&iacute;tani legal&aacute;bb ahhoz a z&oacute;n&aacute;hoz, amelyhez a tartom&aacute;nyunk is
// tartozik. Az els&#245;dleges z&oacute;n&aacute;hoz tartoz&oacute; IP-c&iacute;met &eacute;rdekl&#245;dj&uuml;k meg
// az illet&eacute;kes h&aacute;l&oacute;zati rendszergazd&aacute;t&oacute;l.
//
// Soha ne felejts&uuml;nk el megadni z&oacute;n&aacute;t az inverz keres&eacute;shez
// IN-ADDR.ARPA)! (A neve a IP-c&iacute;m tagjainak ford&iacute;tott sorrendj&eacute;b&#245;l
// sz&aacute;rmazik, amelyhez hozz&aacute;toldunk m&eacute;g egy ".IN-ADDR.ARPA" r&eacute;szt.)
//
// Miel&#245;tt nekil&aacute;tn&aacute;nk egy els&#245;dleges z&oacute;na be&aacute;ll&iacute;t&aacute;s&aacute;nak, gondoljuk
// v&eacute;gig, hogy t&eacute;nyleg a megfelel&#245; szinten ismerj&uuml;k a n&eacute;vfelold&aacute;s &eacute;s
// a BIND m&#251;k&ouml;d&eacute;s&eacute;t. Gyakran ugyanis egy&aacute;ltal&aacute;n nem nyilv&aacute;nval&oacute;
// csapd&aacute;kba tudunk esni. Egy al&aacute;rendelt z&oacute;na be&aacute;ll&iacute;t&aacute;sa sokkal
// egyszer&#251;bb feladat.
//
// FONTOS: Ne k&ouml;vess&uuml;k vakon a most k&ouml;vetkez&#245; p&eacute;ld&aacute;t :-) Helyette ink&aacute;bb
// val&oacute;di neveket &eacute;s c&iacute;meket adjunk meg.

/* P&eacute;lda k&ouml;zponti z&oacute;n&aacute;ra
zone "minta.net" {
	type master;
	file "master/minta.net";
};
*/

/* P&eacute;lda dinamikus z&oacute;n&aacute;ra
key "mintaorgkulcs" {
	algorithm hmac-md5;
	secret "sf87HJqjkqh8ac87a02lla==";
};
zone "minta.org" {
	type master;
	allow-update {
		key "mintaorgkulcs";
	};
	file "dynamic/minta.org";
};
*/

/* P&eacute;lda k&ouml;zvetlen &eacute;s inverz al&aacute;rendelt z&oacute;n&aacute;kra
zone "minta.com" {
	type slave;
	file "slave/minta.com";
	masters {
		192.168.1.1;
	};
};
zone "1.168.192.in-addr.arpa" {
	type slave;
	file "slave/1.168.192.in-addr.arpa";
	masters {
		192.168.1.1;
	};
};
*/</programlisting>

	<para>A <filename>named.conf</filename>
	  &aacute;llom&aacute;nyban teh&aacute;t &iacute;gy adhatunk meg
	  k&ouml;zvetlen &eacute;s inverz al&aacute;rendelt
	  z&oacute;n&aacute;kat.</para>

	<para>Minden egyes &uacute;jabb kiszolg&aacute;lt
	  z&oacute;n&aacute;hoz az egy &uacute;j bejegyz&eacute;st kell
	  felvenni a <filename>named.conf</filename>
	  &aacute;llom&aacute;nyban.</para>

	<para>P&eacute;ld&aacute;ul a <hostid
	  role="domainname">minta.org</hostid> c&iacute;mhez
	  tartoz&oacute; legegyszer&#251;bb ilyen bejegyz&eacute;s
	  &iacute;gy n&eacute;z ki:</para>

	<programlisting>zone "minta.org" {
	type master;
	file "master/minta.org";
};</programlisting>

	<para>Ez egy k&ouml;zponti z&oacute;na, ahogy arr&oacute;l a
	  <option>type</option> mez&#245;, vagyis a t&iacute;pusa is
	  &aacute;rulkodik.  Tov&aacute;bb&aacute; a
	  <option>file</option> mez&#245;ben l&aacute;thatjuk, hogy a
	  hozz&aacute;tartoz&oacute; inform&aacute;ci&oacute;kat az
	  <filename>/etc/namedb/master/minta.org</filename>
	  &aacute;llom&aacute;nyban t&aacute;rolja.</para>

	<programlisting>zone "minta.org" {
	type slave;
	file "slave/minta.org";
};</programlisting>

	<para>Az al&aacute;rendelt esetben a z&oacute;n&aacute;hoz
	  tartoz&oacute; inform&aacute;ci&oacute;kat a z&oacute;na
	  k&ouml;zponti szerver&eacute;t&#245;l kapjuk meg &eacute;s
	  megadott &aacute;llom&aacute;nyban mentj&uuml;k el.  Ha
	  valami&eacute;rt a k&ouml;zponti szerver le&aacute;ll vagy nem
	  &eacute;rhet&#245; el, akkor az al&aacute;rendelt szerver az
	  &aacute;tk&uuml;ld&ouml;tt z&oacute;na
	  inform&aacute;ci&oacute;k alapj&aacute;n k&eacute;pes helyette
	  kiszolg&aacute;lni a k&eacute;r&eacute;seket.</para>

      </sect3>

      <sect3>
	<title>A z&oacute;na &aacute;llom&aacute;nyok</title>

	<indexterm>
	  <primary>BIND</primary>
	  <secondary>z&oacute;na &aacute;llom&aacute;nyok</secondary>
	</indexterm>

	<para>A <hostid role="domainname">minta.org</hostid>
	  c&iacute;mhez tartoz&oacute; p&eacute;lda k&ouml;zponti
	  z&oacute;na &aacute;llom&aacute;ny (amely az
	  <filename>/etc/namedb/master/n&eacute;ven.org</filename>
	  &eacute;rhet&#245; el) tartalma az al&aacute;bbi:</para>

	<programlisting>&dollar;TTL 3600        ; 1 &oacute;ra
minta.org.      IN      SOA      ns1.minta.org. admin.minta.org. (
                                2006051501      ; sorozatsz&aacute;m
                                10800           ; friss&iacute;t&eacute;s
                                3600            ; ism&eacute;tl&eacute;s
                                604800          ; lej&aacute;rat
                                86400           ; minim&aacute;lis TTL
                        )

; n&eacute;vszerverek
                IN      NS      ns1.minta.org.
                IN      NS      ns2.minta.org.

; MX rekordok
                IN      MX 10   mx.minta.org.
                IN      MX 20   levelezes.minta.org.

                IN      A       192.168.1.1

; a g&eacute;pek nevei
localhost       IN      A       127.0.0.1
ns1             IN      A       192.168.1.2
ns2             IN      A       192.168.1.3
mx              IN      A       192.168.1.4
levelezes       IN      A       192.168.1.5

; &aacute;lnevek
www             IN      CNAME   @</programlisting>

	<para>A <quote>.</quote>-ra v&eacute;gz&#245;d&#245;
	  h&aacute;l&oacute;zati nevek abszol&uacute;t nevek, m&iacute;g
	  minden m&aacute;s <quote>.</quote> n&eacute;lk&uuml;li
	  n&eacute;v az &#245;s&eacute;re vezehet&#245; vissza
	  (teh&aacute;t relat&iacute;v).  P&eacute;ld&aacute;ul a
	  <literal>www</literal> a
	  <literal>www.<replaceable>&#245;s</replaceable></literal>.  A
	  kital&aacute;lt z&oacute;na &aacute;llom&aacute;nyunkban itt
	  most az &#245;s a <hostid>minta.org</hostid>, &iacute;gy a
	  <literal>www</literal> n&eacute;vb&#245;l a
	  <hostid>www.minta.org</hostid> n&eacute;v keletkezik.</para>

	<para>A z&oacute;na &aacute;llom&aacute;nyok
	  fel&eacute;p&iacute;t&eacute;se a k&ouml;vetkez&#245;:</para>

	<programlisting>rekordn&eacute;v      IN rekordt&iacute;pus   &eacute;rt&eacute;k</programlisting>

	<indexterm>
	  <primary>n&eacute;vfelold&aacute;s</primary>
	  <secondary>rekordok</secondary>
	</indexterm>

	<para>A n&eacute;vfelold&aacute;sban leggyakrabban alkalmazott
	  rekordok t&iacute;pusai:</para>

	<variablelist>
	  <varlistentry>
	    <term>SOA</term>

	    <listitem>
	      <para>a z&oacute;na fennhat&oacute;s&aacute;g&aacute;nak
		kezdete</para>
	    </listitem>
	  </varlistentry>

	  <varlistentry>
	    <term>NS</term>

	    <listitem>
	      <para>egy hiteles&iacute;tett n&eacute;vszerver</para>
	    </listitem>
	  </varlistentry>

	  <varlistentry>
	    <term>A</term>

	    <listitem>
	      <para>egy g&eacute;p c&iacute;me</para>
	    </listitem>
	  </varlistentry>

	  <varlistentry>
	    <term>CNAME</term>

	    <listitem>
	      <para>egy &aacute;ln&eacute;v kanonikus neve</para>
	    </listitem>
	  </varlistentry>

	  <varlistentry>
	    <term>MX</term>

	    <listitem>
	      <para>lev&eacute;lv&aacute;lt&oacute;</para>
	    </listitem>
	  </varlistentry>

	  <varlistentry>
	    <term>PTR</term>

	    <listitem>
	      <para>mutat&oacute; a tartom&aacute;nyn&eacute;vre (az
		inverz felold&aacute;s haszn&aacute;lja)</para>
	    </listitem>
	  </varlistentry>
	</variablelist>

	<programlisting>
minta.org. IN SOA ns1.minta.org. admin.minta.org. (
                        2006051501      ; sorozatsz&aacute;m
                        10800           ; 3 &oacute;r&aacute;nk&eacute;nt friss&iacute;ts&uuml;nk
                        3600            ; 1 &oacute;ra ut&aacute;n pr&oacute;b&aacute;lkozzunk &uacute;jra
                        604800          ; 1 h&eacute;t ut&aacute;n j&aacute;r le
                        86400 )         ; a minim&aacute;lis TTL 1 nap</programlisting>



	<variablelist>
	  <varlistentry>
	    <term><hostid role="domainname">minta.org.</hostid></term>

	    <listitem>
	      <para>a tartom&aacute;ny neve, amely egyben a z&oacute;na
		&#245;se</para>
	    </listitem>
	  </varlistentry>

	  <varlistentry>
	    <term><hostid role="fqdn">ns1.minta.org.</hostid></term>

	    <listitem>
	      <para>a z&oacute;na els&#245;dleges/hiteles&iacute;tett
		n&eacute;vszervere</para>
	    </listitem>
	  </varlistentry>

	  <varlistentry>
	    <term><literal>admin.minta.org.</literal></term>

	    <listitem>
	      <para>a z&oacute;n&aacute;&eacute;rt felel&#245;s
		szem&eacute;ly neve, akinek az e-mail
		c&iacute;m&eacute;t a <quote>@</quote>
		behelyettes&iacute;t&eacute;s&eacute;vel kapjuk meg.
		(Teh&aacute;t a <email>admin@example.org</email>
		c&iacute;mb&#245;l <literal>admin.example.org</literal>
		lesz.)</para>
	    </listitem>
	  </varlistentry>

	  <varlistentry>
	    <term><literal>2006051501</literal></term>

	    <listitem>
	      <para>az &aacute;llom&aacute;ny sorozatsz&aacute;ma.  Ezt
		a z&oacute;na &aacute;llom&aacute;ny
		m&oacute;dos&iacute;t&aacute;sakor mindig
		n&ouml;veln&uuml;nk kell.  Manaps&aacute;g a
		rendszergazd&aacute;k a sorozatsz&aacute;mot
		<literal>&eacute;&eacute;&eacute;&eacute;hhnnvv</literal>
		alakban adj&aacute;k meg.  A
		<literal>2006051501</literal> teh&aacute;t azt jelenti,
		hogy az &aacute;llom&aacute;nyt 2006.  m&aacute;jus
		15-&eacute;n m&oacute;dos&iacute;tott&aacute;k
		utolj&aacute;ra, &eacute;s a <literal>01</literal> pedig
		arra utal, hogy aznap el&#245;sz&ouml;r.  A
		sorozatsz&aacute;m megad&aacute;sa fontos az
		al&aacute;rendelt n&eacute;vszerverek
		sz&aacute;m&aacute;ra, mivel &iacute;gy tudj&aacute;k
		meg&aacute;llap&iacute;tani, hogy a z&oacute;na mikor
		v&aacute;ltozott utolj&aacute;ra.</para>
	    </listitem>
	  </varlistentry>
	</variablelist>

	<programlisting>
       IN NS           ns1.minta.org.</programlisting>

	<para>Ez egy NS bejegyz&eacute;s.  A z&oacute;n&aacute;hoz
	  tartoz&oacute; minden hiteles&iacute;tett n&eacute;vszervernek
	  lennie kell legal&aacute;bb egy ilyen
	  bejegyz&eacute;s&eacute;nek.</para>

	<programlisting>
localhost       IN      A       127.0.0.1
ns1             IN      A       192.168.1.2
ns2             IN      A       192.168.1.3
mx              IN      A       192.168.1.4
levelezes       IN      A       192.168.1.5</programlisting>

	<para>Az A rekord egy g&eacute;p nev&eacute;t adja meg.  Ahogy a
	  fenti p&eacute;ld&aacute;b&oacute;l is kider&uuml;l, az
	  <hostid role="fqdn">ns1.minta.org</hostid> n&eacute;v a
	  <hostid role="ipaddr">192.168.1.2</hostid> c&iacute;mre
	  k&eacute;pz&#245;dik le.</para>

	<programlisting>
                IN      A       192.168.1.1</programlisting>

	<para>Ez a sor <hostid role="ipaddr">192.168.1.1</hostid>
	  c&iacute;met rendeli az aktu&aacute;lis &#245;sh&ouml;z, amely
	  jelen eset&uuml;nkben az <hostid
	  role="domainname">example.org</hostid>.</para>

	<programlisting>
www             IN CNAME        @</programlisting>

	<para>A kanonikus neveket t&aacute;rol&oacute; rekordokat
	  &aacute;ltal&aacute;ban egy g&eacute;p &aacute;lneveihez
	  haszn&aacute;ljuk.  Ebben a p&eacute;ld&aacute;ban a
	  <hostid>www</hostid> a <quote>f&#245;g&eacute;p</quote> egyik
	  &aacute;lneve, amely itt a <hostid
	  role="domainname">minta.org</hostid> (<hostid
	  role="ipaddr">192.168.1.1</hostid>) tartom&aacute;ny.  A CNAME
	  rekordok teh&aacute;t &aacute;lnevek megad&aacute;s&aacute;ra
	  haszn&aacute;lhat&oacute;ak, vagy egyetlen
	  &aacute;llom&aacute;nyn&eacute;v k&ouml;rk&ouml;r&ouml;s
	  rendszer&#251; (round robin t&iacute;pus&uacute;)
	  felold&aacute;s&aacute;ra t&ouml;bb g&eacute;p
	  k&ouml;z&ouml;tt.</para>

	<indexterm><primary>MX rekord</primary></indexterm>

	<programlisting>
               IN MX   10      levelezes.minta.org.</programlisting>

	<para>Az MX rekord adja meg, hogy milyen levelez&#245; szerverek
	  felel&#245;sek a z&oacute;n&aacute;ba &eacute;rkez&#245;
	  levelek fogad&aacute;s&aacute;&eacute;rt.  A <hostid
	  role="fqdn">levelezes.minta.org</hostid> a levelez&#245;
	  szerver h&aacute;l&oacute;zati neve, ahol a 10 az adott
	  levelez&#245; szerver priorit&aacute;sa.</para>

	<para>T&ouml;bb levelez&#245; szerver is megadhat&oacute; 10-es,
	  20-as stb.  priorit&aacute;sokkal.  A <hostid
	  role="domainname">minta.org</hostid> tartom&aacute;nyon
	  bel&uuml;l el&#245;sz&ouml;r mindig a legnagyobb MX
	  priorit&aacute;ssal rendelkez&#245; levelez&#245; szervernek
	  pr&oacute;b&aacute;ljuk meg tov&aacute;bb&iacute;tani a
	  leveleket (a legkisebb priorit&aacute;si
	  &eacute;rt&eacute;kkel rendelkez&#245; rekord), majd
	  ezut&aacute;n a m&aacute;sodik legnagyobbnak stb.
	  eg&eacute;szen addig, am&iacute;g a levelet tov&aacute;bb nem
	  k&uuml;ldt&uuml;k.</para>

	<para>Az in-addr.arpa z&oacute;na &aacute;llom&aacute;nyok
	  (inverz DNS) eset&eacute;n ugyanez a
	  fel&eacute;p&iacute;t&eacute;s, kiv&eacute;ve, hogy a PTR
	  t&iacute;pus&uacute; bejegyz&eacute;sek szerepelnek az A
	  &eacute;s CNAME helyett.</para>

	<programlisting>$TTL 3600

1.168.192.in-addr.arpa. IN SOA ns1.minta.org. admin.minta.org. (
                        2006051501      ; sorozatsz&aacute;m
                        10800           ; friss&iacute;t&eacute;s
                        3600            ; ism&eacute;tl&eacute;s
                        604800          ; lej&aacute;rat
                        3600 )          ; minimum

        IN      NS      ns1.minta.org.
        IN      NS      ns2.minta.org.

1       IN      PTR     minta.org.
2       IN      PTR     ns1.minta.org.
3       IN      PTR     ns2.minta.org.
4       IN      PTR     mx.minta.org.
5       IN      PTR     levelezes.minta.org.</programlisting>

	<para>Ez az &aacute;llom&aacute;ny &iacute;rja le teh&aacute;t a
	  kital&aacute;lt tartom&aacute;nyunkon bel&uuml;l az
	  IP-c&iacute;mek &eacute;s h&aacute;l&oacute;zati nevek
	  &ouml;sszerendel&eacute;s&eacute;t.</para>

      </sect3>
    </sect2>

    <sect2>
      <title>A gyors&iacute;t&oacute;t&aacute;raz&oacute;
	n&eacute;vszerver</title>

      <indexterm>
	<primary>BIND</primary>
	<secondary>gyors&iacute;t&oacute;t&aacute;raz&oacute;
	  n&eacute;vszerver</secondary>
      </indexterm>

      <para>A gyors&iacute;t&oacute;t&aacute;raz&oacute;
	n&eacute;vszerver az a n&eacute;vszerver, amelyik egyik
	z&oacute;n&aacute;ban sem hiteles&iacute;tett.  Egyszer&#251;en
	csak &ouml;nc&eacute;l&uacute; k&eacute;r&eacute;seket
	k&uuml;ld, &eacute;s a kapott v&aacute;laszokat megjegyzi.  A
	be&aacute;ll&iacute;t&aacute;s&aacute;hoz mind&ouml;ssze annyit
	kell tenn&uuml;nk, hogy az eddigiekhez hasonl&oacute;an, de
	z&oacute;n&aacute;k n&eacute;lk&uuml;l be&aacute;ll&iacute;tunk
	egy n&eacute;vszervert.</para>

    </sect2>

    <sect2>
      <title>Biztons&aacute;g</title>

      <para>Hab&aacute;r a n&eacute;vfelold&aacute;s
	szempontj&aacute;b&oacute;l a BIND a legelterjedtebb, a
	biztons&aacute;goss&aacute;g&aacute;val az&eacute;rt akadnak
	gondok.  Gyakran tal&aacute;lnak benne potenci&aacute;lis
	&eacute;s kihaszn&aacute;lhat&oacute; biztons&aacute;gi
	r&eacute;seket.</para>

      <para>A &os; azonban a <application>named</application>
	d&eacute;mont automatikusan egy &man.chroot.8; k&ouml;rnyezetbe
	helyezi.  Emellett m&eacute;g l&eacute;teznek tov&aacute;bbi
	m&aacute;s v&eacute;delmi mechanizmusok is, amelyek
	seg&iacute;ts&eacute;g&eacute;vel el tudjuk ker&uuml;lni a
	n&eacute;vfelold&aacute;st c&eacute;lz&oacute; esetleges
	t&aacute;mad&aacute;sokat.</para>

      <para>Sosem &aacute;rt olvasgatni a <ulink
	url="http://www.cert.org/">CERT</ulink> &aacute;ltal kiadott
	biztons&aacute;gi figyelmeztet&eacute;seket &eacute;s
	feliratkozni a &a.security-notifications; c&iacute;m&eacute;re,
	hogy folyamatosan &eacute;rtes&uuml;lj&uuml;nk az interneten
	&eacute;s a &os;-ben tal&aacute;lt k&uuml;l&ouml;nb&ouml;z&#245;
	biztons&aacute;gi hib&aacute;kr&oacute;l.</para>

      <tip>
	<para>Ha valamilyen gondunk t&aacute;madna, akkor esetleg
	  pr&oacute;b&aacute;lkozzunk meg a forr&aacute;saink
	  friss&iacute;t&eacute;s&eacute;vel &eacute;s a
	  <application>named</application>
	  &uacute;jraford&iacute;t&aacute;s&aacute;val.</para>
      </tip>

    </sect2>

    <sect2>
      <title>Egy&eacute;b olvasnival&oacute;k</title>

      <para>A BIND/<application>named</application> man oldalai:
	&man.rndc.8; &man.named.8; &man.named.conf.5;</para>

      <itemizedlist>
	<listitem>
	  <para><ulink url="http://www.isc.org/products/BIND/">Az ISC
	    BIND hivatalos honlapja (angolul)</ulink></para>
	</listitem>

	<listitem>
	  <para><ulink url="http://www.isc.org/sw/guild/bf/">Az ISC BIND
	    hivatalos f&oacute;ruma (angolul)</ulink></para>
	</listitem>

	<listitem>
	  <para><ulink
	    url="http://www.isc.org/index.pl?/sw/bind/FAQ.php">
	    A BIND9 GYIK (angolul)</ulink></para>
	</listitem>

	<listitem>
	  <para><ulink
	    url="http://www.oreilly.com/catalog/dns5/">O'Reilly DNS and
	    BIND 5th Edition</ulink></para>
	</listitem>

	<listitem>
	  <para><ulink
	    url="ftp://ftp.isi.edu/in-notes/rfc1034.txt">RFC1034 -
	    Domain Names - Concepts and Facilities</ulink></para>
	</listitem>

	<listitem>
	  <para><ulink
	    url="ftp://ftp.isi.edu/in-notes/rfc1035.txt">RFC1035 -
	    Domain Names - Implementation and
	    Specification</ulink></para>
	</listitem>
      </itemizedlist>

    </sect2>
  </sect1>

  <sect1 id="network-apache">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Murray</firstname>
	  <surname>Stokely</surname>
	  <contrib>K&eacute;sz&iacute;tette: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>Az Apache webszerver</title>

    <indexterm>
      <primary>webszerverek</primary>
      <secondary>be&aacute;ll&iacute;t&aacute;sa</secondary>
    </indexterm>

    <indexterm><primary>Apache</primary></indexterm>

    <sect2>
      <title>&Aacute;ttekint&eacute;s</title>

      <para>A &os; szolg&aacute;lja ki a legforgalmasabb honlapok nagy
	r&eacute;sz&eacute;t szerte a vil&aacute;gban.  A
	m&ouml;g&ouml;tt&uuml;k &aacute;ll&oacute; webszerverek
	&aacute;ltal&aacute;ban az <application>Apache
	webszervert</application> alkalmazz&aacute;k.  Az
	<application>Apache</application> haszn&aacute;lat&aacute;hoz
	sz&uuml;ks&eacute;ges csomagok megtal&aacute;lhat&oacute;ak a
	&os; telep&iacute;t&#245;lemez&eacute;n is.  Ha a &os; els&#245;
	telep&iacute;t&eacute;sekor m&eacute;g nem
	telep&iacute;tett&uuml;k volna az
	<application>Apache</application> szerver&eacute;t, akkor a
	<filename role="package">www/apache13</filename> vagy <filename
	role="package">www/apache12</filename> portb&oacute;l tudjuk
	feltenni.</para>

      <para>Az <application>Apache</application> szervert sikeres
	telep&iacute;t&eacute;s&eacute;t k&ouml;vet&#245;en be kell
	&aacute;ll&iacute;tanunk.</para>

      <note>
	<para>Ebben a szakaszban az <application>Apache
	  webszerver</application> 1.3.X v&aacute;ltozat&aacute;t
	  mutatjuk be, mivel ezt haszn&aacute;lj&aacute;k a
	  legt&ouml;bben &os; alatt.  Az
	  <application>Apache</application>&nbsp;2.X rengeteg &uacute;j
	  technol&oacute;gi&aacute;t vezetett be, de ezekkel itt most
	  nem foglalkozunk.  Az
	  <application>Apache</application>&nbsp;2.X
	  v&aacute;ltozat&aacute;val kapcsolatban keress&uuml;k fel a
	  <ulink url="http://httpd.apache.org/"></ulink> oldalt.</para>
      </note>

    </sect2>

    <sect2>
      <title>Be&aacute;ll&iacute;t&aacute;s</title>

      <indexterm>
	<primary>Apache</primary>
	<secondary>konfigur&aacute;ci&oacute;s
	  &aacute;llom&aacute;nyok</secondary>
      </indexterm>

      <para>Az <application>Apache webszerver</application>
	konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nya &os; alatt
	<filename>/usr/local/etc/apache/httpd.conf</filename>
	n&eacute;ven tal&aacute;lhat&oacute;.  Ez az
	&aacute;llom&aacute;ny egy szokv&aacute;nyos &unix;-os
	sz&ouml;veges konfigur&aacute;ci&oacute;s
	&aacute;llom&aacute;ny, ahol a megjegyz&eacute;seket egy
	<literal>#</literal> karakterrel vezetj&uuml;k be.  Az itt
	haszn&aacute;lhat&oacute; &ouml;sszes lehets&eacute;ges
	be&aacute;ll&iacute;t&aacute;si lehet&#245;s&eacute;g
	&aacute;tfog&oacute; ismertet&eacute;se meghaladn&aacute; az
	eg&eacute;sz k&eacute;zik&ouml;nyv hat&aacute;rait, ez&eacute;rt
	most csak a leggyakrabban m&oacute;dos&iacute;tott
	direkt&iacute;v&aacute;kat fogjuk ismertetni.</para>

      <variablelist>
	<varlistentry>
	  <term><literal>ServerRoot <replaceable>"/usr/local"</replaceable></literal></term>

	  <listitem>
	    <para>Ez adja meg az <application>Apache</application>
	      sz&aacute;m&aacute;ra az alap&eacute;rtelmezett
	      k&ouml;nyvt&aacute;rat.  A bin&aacute;risai ezen
	      bel&uuml;l a <filename class="directory">bin</filename>
	      &eacute;s <filename class="directory">sbin</filename>
	      alk&ouml;nyvt&aacute;rakban, a konfigur&aacute;ci&oacute;s
	      &aacute;llom&aacute;nyai pedig az <filename
	      class="directory">etc/apache</filename>
	      k&ouml;nyvt&aacute;rban t&aacute;rol&oacute;dnak.</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><literal>ServerAdmin <replaceable>saj&aacute;t@c&iacute;m&uuml;nk.az.interneten</replaceable></literal></term>

	  <listitem>
	    <para>Erre a c&iacute;mre k&uuml;ldhetik nek&uuml;nk a
	      szerverrel kapcsolatos hib&aacute;kat.  Ez a c&iacute;m
	      egyes szerver &aacute;ltal gener&aacute;lt oldalakon
	      jelenik meg, p&eacute;ld&aacute;ul hib&aacute;k
	      eset&eacute;ben.</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><literal>ServerName <replaceable>www.minta.com</replaceable></literal></term>

	  <listitem>
	    <para>A <literal>ServerName</literal>
	      seg&iacute;ts&eacute;g&eacute;vel meg tudjuk adni, hogy
	      milyen nevet k&uuml;ldj&ouml;n vissza a szerver a
	      klienseknek olyankor, ha az nem egyezne meg a jelenlegivel
	      (vagyis a <hostid>www</hostid> nevet haszn&aacute;ljuk a
	      g&eacute;p&uuml;nk val&oacute;di neve helyett).</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term><literal>DocumentRoot <replaceable>"/usr/local/www/data"</replaceable></literal></term>

	  <listitem>
	    <para>A <literal>DocumentRoot</literal> adja meg azt a
	      k&ouml;nyvt&aacute;rat, ahonnan kiszolg&aacute;ljuk a
	      dokumentumokat.  Alap&eacute;rtelmez&eacute;s szerint az
	      &ouml;sszes k&eacute;r&eacute;s erre a
	      k&ouml;nyvt&aacute;rra fog vonatkozni, de a szimbolikus
	      linkek &eacute;s az &aacute;lnevek ak&aacute;r m&aacute;s
	      helyekre is mutathatnak.</para>
	  </listitem>
	</varlistentry>
      </variablelist>

      <para>A v&aacute;ltoztat&aacute;sok v&eacute;grehajt&aacute;sa
	el&#245;tt mindig is j&oacute; &ouml;tlet biztons&aacute;gi
	m&aacute;solatot k&eacute;sz&iacute;teni az
	<application>Apache</application> konfigur&aacute;ci&oacute;s
	&aacute;llom&aacute;nyair&oacute;l.  Ahogy siker&uuml;lt
	&ouml;sszerakni egy sz&aacute;munkra megfelel&#245;
	konfigur&aacute;ci&oacute;t, k&eacute;szen is &aacute;llunk az
	<application>Apache</application>
	futtat&aacute;s&aacute;ra.</para>

    </sect2>

    <sect2>
      <title>Az <application>Apache</application>
	futtat&aacute;sa</title>

      <indexterm>
	<primary>Apache</primary>
	<secondary>ind&iacute;t&aacute;sa &eacute;s
	  le&aacute;ll&iacute;t&aacute;sa</secondary>
      </indexterm>

      <para>A t&ouml;bbi h&aacute;l&oacute;zati szervert&#245;l
	elt&eacute;r&#245;en az <application>Apache</application> nem az
	<application>inetd</application> szuperszerverb&#245;l fut.  A
	kliensekt&#245;l &eacute;rkez&#245; HTTP k&eacute;r&eacute;sek
	min&eacute;l gyorsabb kiszolg&aacute;l&aacute;s&aacute;nak
	&eacute;rdek&eacute;ben &uacute;gy &aacute;ll&iacute;tottuk be,
	hogy &ouml;n&aacute;ll&oacute;an fusson.  Ehhez egy szkriptet is
	mell&eacute;kelt&uuml;nk, amellyel igyekezt&uuml;nk a
	lehet&#245; legjobban leegyszer&#251;s&iacute;teni a szerver
	ind&iacute;t&aacute;s&aacute;t,
	le&aacute;ll&iacute;t&aacute;s&aacute;t &eacute;s
	&uacute;jraind&iacute;t&aacute;s&aacute;t.  Az
	<application>Apache</application> els&#245;
	ind&iacute;t&aacute;s&aacute;hoz adjuk ki a k&ouml;vetkez&#245;
	parancsot:</para>

      <screen>&prompt.root; <userinput>/usr/local/sbin/apachectl start</userinput></screen>

      <para>&Iacute;gy pedig a szervert b&aacute;rmikor
	le&aacute;ll&iacute;thatjuk:</para>

      <screen>&prompt.root; <userinput>/usr/local/sbin/apachectl stop</userinput></screen>

      <para>Ha valamilyen okb&oacute;l megv&aacute;ltoztattuk volna a
	szerver be&aacute;ll&iacute;t&aacute;sait, akkor ezen a
	m&oacute;don tudjuk &uacute;jraind&iacute;tani:</para>

      <screen>&prompt.root; <userinput>/usr/local/sbin/apachectl restart</userinput></screen>

      <para>Ha a jelenleg megnyitott kapcsolatok felbont&aacute;sa
	n&eacute;lk&uuml;l akarjuk &uacute;jraind&iacute;tani az
	<application>Apache</application> szervert, akkor ezt
	&iacute;rjuk be:</para>

      <screen>&prompt.root; <userinput>/usr/local/sbin/apachectl graceful</userinput></screen>

      <para>Mindezekr&#245;l az &man.apachectl.8; man oldalon
	tal&aacute;lunk b&#245;vebb le&iacute;r&aacute;st.</para>

      <para>Amennyiben sz&uuml;ks&eacute;g&uuml;nk lenne az
	<application>Apache</application>
	elind&iacute;t&aacute;s&aacute;ra a rendszer
	ind&iacute;t&aacute;sakor, akkor a k&ouml;vetkez&#245; sort
	vegy&uuml;nk fel az <filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyba:</para>

      <programlisting>apache_enable="YES"</programlisting>

      <para>Az <application>Apache</application>&nbsp;2.2
	eset&eacute;ben:</para>

      <programlisting>apache22_enable="YES"</programlisting>

      <para>Amikor az <application>Apache</application>
	<command>httpd</command> nev&#251; programj&aacute;nak
	szeretn&eacute;nk tov&aacute;bbi paranccsori
	param&eacute;tereket &aacute;tadni a rendszer
	ind&iacute;t&aacute;sa sor&aacute;n, akkor ezeket &iacute;gy
	tudjuk megadni az <filename>rc.conf</filename>
	&aacute;llom&aacute;nyban:</para>

      <programlisting>apache_flags=""</programlisting>

      <para>Most, miut&aacute;n a webszerver&uuml;nk m&#251;k&ouml;dik,
	a b&ouml;ng&eacute;sz&#245;nkkel mindezt ellen&#245;rizni is
	tudjuk a <literal>http://localhost/</literal> c&iacute;m
	be&iacute;r&aacute;s&aacute;val.  Ilyenkor az
	alap&eacute;rtelmez&eacute;s szerinti
	<filename>/usr/local/www/data/index.html</filename>
	&aacute;llom&aacute;ny tartalm&aacute;t l&aacute;thatjuk.</para>

    </sect2>

    <sect2>
      <title>Virtu&aacute;lis nevek</title>

      <para>Az <application>Apache</application> a virtu&aacute;lis
	nevek haszn&aacute;lat&aacute;nak k&eacute;t
	k&uuml;l&ouml;nb&ouml;z&#245; m&oacute;dj&aacute;t ismeri.  Ezek
	k&ouml;z&uuml;l az els&#245; m&oacute;dszer a n&eacute;v
	alap&uacute; virtualiz&aacute;ci&oacute; (Name-based Virtual
	Hosting).  Ilyenkor a kliens HTTP/1.1
	fejl&eacute;c&eacute;b&#245;l pr&oacute;b&aacute;lja meg a
	szerver meg&aacute;llap&iacute;tani a hivatkoz&aacute;si nevet.
	Seg&iacute;ts&eacute;g&eacute;vel t&ouml;bb tartom&aacute;ny is
	osztozhat egyetlen IP-c&iacute;men.</para>

      <para>Az <application>Apache</application> n&eacute;v alap&uacute;
	virtualiz&aacute;ci&oacute;j&aacute;nak
	be&aacute;ll&iacute;t&aacute;s&aacute;hoz az al&aacute;bbi
	be&aacute;ll&iacute;t&aacute;st kell hozz&aacute;tenn&uuml;nk a
	<filename>httpd.conf</filename>
	&aacute;llom&aacute;nyhoz:</para>

      <programlisting>NameVirtualHost *</programlisting>

      <para>Ha a webszerver&uuml;nk neve <hostid
	role="fqdn">www.tartomany.hu</hostid>, &eacute;s hozz&aacute;
	egy <hostid role="fqdn">www.valamilyenmasiktartomany.hu</hostid>
	virtu&aacute;lis nevet akarunk megadni, akkor azt a
	k&ouml;vetkez&#245;k&eacute;ppen tehetj&uuml;k meg a
	<filename>httpd.conf</filename> &aacute;llom&aacute;nyon
	bel&uuml;l:</para>

      <screen>&lt;VirtualHost *&gt;
ServerName www.tartomany.hu
DocumentRoot /www/tartomany.hu
&lt;/VirtualHost&gt;

&lt;VirtualHost *&gt;
ServerName www.valamilyenmasiktartomany.hu
DocumentRoot /www/valamilyenmasiktartomany.hu
&lt;/VirtualHost&gt;</screen>

      <para>A c&iacute;mek &eacute;s el&eacute;r&eacute;si utak
	hely&eacute;re helyettes&iacute;ts&uuml;k be a haszn&aacute;lni
	k&iacute;v&aacute;nt c&iacute;meket &eacute;s
	el&eacute;r&eacute;si utakat.</para>

      <para>A virtu&aacute;lis nevek
	be&aacute;ll&iacute;t&aacute;s&aacute;nak tov&aacute;bbi
	r&eacute;szleteivel kapcsolatosan keress&uuml;k fel az
	<application>Apache</application> hivatalos
	dokument&aacute;ci&oacute;j&aacute;t a <ulink
	url="http://httpd.apache.org/docs/vhosts/"></ulink> c&iacute;men
	(angolul).</para>

    </sect2>

    <sect2>
      <title>Apache-modulok</title>

      <indexterm>
	<primary>Apache</primary>
	<secondary>modulok</secondary>
      </indexterm>

      <para>Az alap szerver k&eacute;pess&eacute;geinek
	kieg&eacute;sz&iacute;t&eacute;s&eacute;hez t&ouml;bb
	k&uuml;l&ouml;nb&ouml;z&#245; <application>Apache</application>
	modul &aacute;ll rendelkez&eacute;s&uuml;nkre.  A &os;
	Portgy&#251;jtem&eacute;nye az <application>Apache</application>
	telep&iacute;t&eacute;se mellett lehet&#245;s&eacute;get ad a
	n&eacute;pszer&#251;bb b&#245;v&iacute;tm&eacute;nyeinek
	telep&iacute;t&eacute;s&eacute;re is.</para>

      <sect3>
	<title>mod_ssl</title>

	<indexterm>
	  <primary>webszerverek</primary>
	  <secondary>biztons&aacute;g</secondary>
	</indexterm>

	<indexterm><primary>SSL</primary></indexterm>
	<indexterm><primary>titkos&iacute;t&aacute;s</primary></indexterm>

	<para>A <application>mod_ssl</application> modul az OpenSSL
	  k&ouml;nyvt&aacute;r haszn&aacute;lat&aacute;val
	  val&oacute;s&iacute;t meg er&#245;s titkos&iacute;t&aacute;st
	  a biztons&aacute;gos socket r&eacute;teg m&aacute;sodik,
	  illetve harmadik verzi&oacute;j&aacute;val (Secure Sockets
	  Layer, SSL v2/v3) &eacute;s a biztons&aacute;gos
	  sz&aacute;ll&iacute;t&aacute;si r&eacute;tegbeli (Transport
	  Layer Security v1) protokoll
	  seg&iacute;ts&eacute;g&eacute;vel.  Ez a modul mindent
	  biztos&iacute;t ahhoz, hogy a megfelel&#245;
	  hat&oacute;s&aacute;gok &aacute;ltal al&aacute;&iacute;rt
	  tan&uacute;s&iacute;tv&aacute;nyokat tudjunk k&eacute;rni,
	  &eacute;s ez&aacute;ltal egy v&eacute;dett webszervert
	  futtassunk &os;-n.</para>

	<para>Ha m&eacute;g nem telep&iacute;tett&uuml;nk volna fel az
	  <application>Apache</application> szervert, akkor a <filename
	  role="package">www/apache13-modssl</filename> porton
	  kereszt&uuml;l a <application>mod_ssl</application> modullal
	  egy&uuml;tt is fel tudjuk rakni az
	  <application>Apache</application>&nbsp;1.3.X
	  v&aacute;ltozat&aacute;t.  Az SSL t&aacute;mogat&aacute;sa
	  pedig m&aacute;r az <application>Apache</application>&nbsp;2.X
	  <filename role="package">www/apache22</filename> porton
	  kereszt&uuml;l el&eacute;rhet&#245; v&aacute;ltozataiban
	  alap&eacute;rtelmez&eacute;s szerint
	  enged&eacute;lyezett.</para>

      </sect3>

      <sect3>
	<title>Kapcsol&oacute;d&aacute;s nyelvekhez</title>

	<para>Mindegyik nagyobb szkriptnyelvhez l&eacute;tezik egy
	  k&uuml;l&ouml;n Apache-modul, amelyek
	  seg&iacute;ts&eacute;g&eacute;vel komplett
	  <application>Apache</application>-modulokat tudunk
	  k&eacute;sz&iacute;teni az adott nyelven.  Gyakran a dinamikus
	  honlapok is &iacute;gy pr&oacute;b&aacute;lj&aacute;k a
	  szerverbe &eacute;p&iacute;tett bels&#245;
	  &eacute;rtelmez&#245;n kereszt&uuml;l a k&uuml;ls&#245;
	  &eacute;rtelmez&#245; ind&iacute;t&aacute;s&aacute;b&oacute;l
	  &eacute;s benne a szkriptek
	  lefuttat&aacute;s&aacute;b&oacute;l fakad&oacute;
	  k&ouml;lts&eacute;geket megsp&oacute;rolni, ahogy err&#245;l a
	  k&ouml;vetkez&#245; szakaszokban olvashatunk.</para>

      </sect3>
    </sect2>

    <sect2>
      <title>Dinamikus honlapok</title>

      <indexterm>
	<primary>webszerverek</primary>
	<secondary>dinamikus</secondary>
      </indexterm>

      <para>Az ut&oacute;bbi &eacute;vtizedben egyre t&ouml;bb
	v&aacute;llalkoz&aacute;s fordult az internet fel&eacute;
	bev&eacute;teleik &eacute;s r&eacute;szesed&eacute;seinek
	n&ouml;vel&eacute;s&eacute;nek rem&eacute;ny&eacute;ben, amivel
	egyre jobban megn&#245;tt az ig&eacute;ny a dinamikus honlapokra
	is.  Mik&ouml;zben bizonyos c&eacute;gek, mint
	p&eacute;ld&aacute;ul a &microsoft;, a saj&aacute;t
	fejleszt&eacute;s&#251; term&eacute;keikbe
	&eacute;p&iacute;tettek be ehhez t&aacute;mogat&aacute;st, addig
	a ny&iacute;lt forr&aacute;sokkal foglalkoz&oacute;
	k&ouml;z&ouml;ss&eacute;g sem maradt t&eacute;tlen &eacute;s
	felvette a keszty&#251;t.  A dinamikus tartalom
	l&eacute;trehoz&aacute;s&aacute;hoz t&ouml;bbek k&ouml;zt
	Django, Ruby on Rails, a <application>mod_perl</application>
	&eacute;s a <application>mod_php</application> modulok
	haszn&aacute;lhat&oacute;ak.</para>

      <sect3>
	<title>Django</title>

	<indexterm><primary>Python</primary></indexterm>
	<indexterm><primary>Django</primary></indexterm>

	<para>A Django egy BSD t&iacute;pus&uacute; licensszel
	  rendelkez&#245; keretrendszer, amelynek
	  haszn&aacute;lat&aacute;val nagy
	  teljes&iacute;tm&eacute;ny&#251; &eacute;s eleg&aacute;ns
	  webes alkalmaz&aacute;sokat tudunk gyorsan kifejleszteni.
	  Tartalmaz egy objektum-rel&aacute;ci&oacute;s
	  lek&eacute;pez&#245;t, &iacute;gy az adatt&iacute;pusokat
	  Python-objektumokk&eacute;nt tudjuk le&iacute;rni, &eacute;s
	  ezekhez az objektumokhoz egy sokr&eacute;t&#251;, dinamikus
	  adatb&aacute;zis hozz&aacute;f&eacute;r&eacute;st
	  ny&uacute;jt&oacute; alkalmaz&aacute;sfejleszt&#245;i
	  fel&uuml;letet, &iacute;gy a fejleszt&#245;knek egyetlen SQL
	  utas&iacute;t&aacute;st sem kell meg&iacute;rniuk.
	  Tal&aacute;lhatunk m&eacute;g benne tov&aacute;bb&aacute; egy
	  b&#245;v&iacute;thet&#245; sablonrendszert, amelynek
	  k&ouml;sz&ouml;nhet&#245;en az alkalmaz&aacute;s bels&#245;
	  m&#251;k&ouml;d&eacute;se elv&aacute;laszthat&oacute; a
	  HTML-beli megjelen&eacute;s&eacute;t&#245;l.</para>

	<para>A Django m&#251;k&ouml;d&eacute;s&eacute;hez a
	  <application>mod_python</application> modulra, az
	  <application>Apache</application> szerverre &eacute;s egy
	  tetsz&#245;legesen v&aacute;lasztott SQL alap&uacute;
	  adatb&aacute;zisrendszerre van sz&uuml;ks&eacute;g.  A
	  hozz&aacute;tartoz&oacute; &os; port mindezeket automatikusan
	  telep&iacute;ti a megadott be&aacute;ll&iacute;t&aacute;sok
	  szerint.</para>

	<example id="network-www-django-install">
	  <title>A Django telep&iacute;t&eacute;se az Apache,
	    mod_python3 &eacute;s a PostgreSQL
	    haszn&aacute;lat&aacute;val</title>

	  <screen>&prompt.root; <userinput>cd /usr/ports/www/py-django; make all install clean -DWITH_MOD_PYTHON3 -DWITH_POSTGRESQL</userinput></screen>
	</example>

	<para>Miut&aacute;n a Django &eacute;s a hozz&aacute;
	  sz&uuml;ks&eacute;ges komponensek felker&uuml;ltek
	  rendszer&uuml;nkre, hozzunk l&eacute;tre egy
	  k&ouml;nyvt&aacute;rat a leend&#245; Django projekt&uuml;nknek
	  &eacute;s &aacute;ll&iacute;tsuk be az Apache szervert, hogy
	  az oldalunk bel&uuml;l a megadott linkekre a saj&aacute;t
	  alkalmaz&aacute;sunkat h&iacute;vja meg a be&aacute;gyazott
	  Python-&eacute;rtelmez&#245;n kereszt&uuml;l.</para>

	<example id="network-www-django-apache-config">
	  <title>Az Apache be&aacute;ll&iacute;t&aacute;sa a Django
	    &eacute;s mod_python haszn&aacute;lat&aacute;hoz</title>

	  <para>A k&ouml;vetkez&#245; sort kell hozz&aacute;tenn&uuml;nk
	    a <filename>httpd.conf</filename> &aacute;llom&aacute;nyhoz,
	    hogy az Apache bizonyos linkeket a webes alkalmaz&aacute;s
	    fel&eacute; ir&aacute;ny&iacute;tson &aacute;t:</para>

	  <screen>&lt;Location "/"&gt;
    SetHandler python-program
    PythonPath "['<replaceable>/a/django/csomagok/helye/</replaceable>'] + sys.path"
    PythonHandler django.core.handlers.modpython
    SetEnv DJANGO_SETTINGS_MODULE <replaceable>azoldalam.beallitasai</replaceable>
    PythonAutoReload On
    PythonDebug On
&lt;/Location&gt;</screen>
	</example>

      </sect3>

      <sect3>
	<title>Ruby on Rails</title>

	<indexterm><primary>Ruby on Rails</primary></indexterm>

	<para>A Ruby on Rails egy olyan m&aacute;sik ny&iacute;lt
	  forr&aacute;sk&oacute;d&uacute; keretrendszer, amivel
	  l&eacute;nyeg&eacute;ben egy teljes fejleszt&#245;i
	  k&eacute;szletet kapunk &eacute;s amelyet kifejezetten arra
	  &eacute;lezt&eacute;k ki, hogy
	  seg&iacute;ts&eacute;g&eacute;vel a webfejleszt&#245;k sokkal
	  gyorsabban tudjanak haladni &eacute;s a komolyabb
	  alkalmaz&aacute;sok gyorsabb elk&eacute;sz&iacute;t&eacute;se
	  se okozzon nekik gondot.  A
	  Portrgy&#251;jtem&eacute;nyb&#245;l pillanatok alatt
	  telep&iacute;thet&#245;.</para>

	<screen>&prompt.root; <userinput>cd /usr/ports/www/rubygem-rails; make all install clean</userinput></screen>

      </sect3>

      <sect3>
	<title>mod_perl</title>

	<indexterm>
	  <primary>mod_perl</primary>
	  <secondary>Perl</secondary>
	</indexterm>

	<para>Az <application>Apache</application> &eacute;s Perl
	  egyes&iacute;t&eacute;s&eacute;n f&aacute;radoz&oacute;
	  projekt a Perl programoz&aacute;si nyelv &eacute;s az
	  <application>Apache webszerver</application> erej&eacute;nek
	  &ouml;sszehangol&aacute;s&aacute;n dolgozik.  A
	  <application>mod_perl</application> modulon kereszt&uuml;l
	  Perlben vagyunk k&eacute;pesek modulokat
	  k&eacute;sz&iacute;teni az <application>Apache</application>
	  szerverhez.  R&aacute;ad&aacute;sul a szerverben egy
	  bels&#245; &aacute;lland&oacute; &eacute;rtelmez&#245; is
	  tal&aacute;lhat&oacute; hozz&aacute;, ezzel igyekeznek
	  megsp&oacute;rolni a k&uuml;ls&#245; &eacute;rtelmez&#245;
	  &eacute;s a Perl ind&iacute;t&aacute;s&aacute;b&oacute;l
	  keletkez&#245; t&ouml;bbletk&ouml;lts&eacute;geket.</para>

	<para>A <application>mod_perl</application> t&ouml;bb
	  k&uuml;l&ouml;nb&ouml;z&#245; m&oacute;don
	  &aacute;ll&iacute;that&oacute; munk&aacute;ba.  A
	  <application>mod_perl</application>
	  haszn&aacute;lat&aacute;hoz nem szabad elfelejten&uuml;nk,
	  hogy a <application>mod_perl</application> 1.0-&aacute;s
	  verzi&oacute;ja csak az <application>Apache</application> 1.3
	  v&aacute;ltozat&aacute;val m&#251;k&ouml;dik, &eacute;s a
	  <application>mod_perl</application> 2.0-&aacute;s
	  v&aacute;ltozata pedig csak az
	  <application>Apache</application>&nbsp;2.X
	  v&aacute;ltozataival.  A <application>mod_perl</application>
	  1.0 a <filename role="package">www/mod_perl</filename>
	  portb&oacute;l telep&iacute;thet&#245;, valamint a statikusan
	  be&eacute;p&iacute;tett v&aacute;ltozata a <filename
	  role="package">www/apache13-modperl</filename> portban
	  tal&aacute;lhat&oacute;.  A
	  <application>mod_perl</application>&nbsp;2.0 a <filename
	  role="package">www/mod_perl2</filename> portb&oacute;l
	  rakhat&oacute; fel.</para>

      </sect3>

      <sect3>
	<sect3info>
	  <authorgroup>
	    <author>
	      <firstname>Tom</firstname>
	      <surname>Rhodes</surname>
	      <contrib>&Iacute;rta: </contrib>
	    </author>
	  </authorgroup>
	</sect3info>

	<title>mod_php</title>

	<indexterm>
	  <primary>mod_php</primary>
	  <secondary>PHP</secondary>
	</indexterm>

	<para>A <acronym>PHP</acronym>, vagy m&aacute;sik nev&eacute;n
	  <quote>PHP, a hipertext feldolgoz&oacute;</quote> egy
	  &aacute;ltal&aacute;nos c&eacute;l&uacute; szkriptnyelv,
	  amelyet kifejezetten honlapok fejleszt&eacute;s&eacute;hez
	  hoztak l&eacute;tre.  A szabv&aacute;nyos
	  <acronym>HTML</acronym> &aacute;gyazhat&oacute; nyelv
	  fel&eacute;p&iacute;t&eacute;s&eacute;ben a C, &java;
	  &eacute;s Perl nyelveket &ouml;tv&ouml;zi annak
	  el&eacute;r&eacute;se &eacute;rdek&eacute;ben, hogy ezzel
	  seg&iacute;tse a fejleszt&#245;ket a dinamikusan
	  gener&aacute;lt oldalak min&eacute;l gyorsabb
	  meg&iacute;r&aacute;s&aacute;ban.</para>

	<para>A <acronym>PHP</acronym>5 t&aacute;mogat&aacute;s&aacute;t
	  &uacute;gy tudjuk hozz&aacute;adni az
	  <application>Apache</application> webszerverhez, ha
	  telep&iacute;tj&uuml;k a <filename
	  role="package">lang/php5</filename> portot.</para>

	<para>Ha a <filename role="package">lang/php5</filename> portot
	  most telep&iacute;tj&uuml;k el&#245;sz&ouml;r, akkor a vele
	  kapcsolatos be&aacute;ll&iacute;t&aacute;sokat
	  tartalmaz&oacute; <literal>OPTIONS</literal> men&uuml;
	  automatikusan megjelenik.  Ha ezzel nem
	  tal&aacute;lkozn&aacute;nk, mert p&eacute;ld&aacute;ul
	  valamikor kor&aacute;bban m&aacute;r felraktuk volna a
	  <filename role="package">lang/php5</filename> portot, akkor a
	  port k&ouml;nyvt&aacute;r&aacute;ban k&ouml;vetkez&#245;
	  parancs kiad&aacute;s&aacute;val tudjuk &uacute;jra
	  visszahozni:</para>

	<screen>&prompt.root; <userinput>make config</userinput></screen>

	<para>A be&aacute;ll&iacute;t&aacute;sok k&ouml;z&ouml;tt
	  jel&ouml;lj&uuml;k be az <literal>APACHE</literal>
	  opci&oacute;t, amelynek eredm&eacute;nyek&eacute;ppen
	  l&eacute;trej&ouml;n az <application>Apache</application>
	  webszerverhez haszn&aacute;lhat&oacute;
	  <application>mod_php5</application> bet&ouml;lthet&#245;
	  modul.</para>

	<note>
	  <para>A <acronym>PHP</acronym>4 modult m&eacute;g ma is
	    rengeteg szerver haszn&aacute;lja t&ouml;bb
	    k&uuml;l&ouml;nb&ouml;z&#245; okb&oacute;l
	    (p&eacute;ld&aacute;ul kompatibilit&aacute;si
	    probl&eacute;m&aacute;k vagy a m&aacute;r kor&aacute;bban
	    kiadott tartalom miatt).  Ha teh&aacute;t a
	    <application>mod_php5</application> helyett ink&aacute;bb a
	    <application>mod_php4</application> modulra lenne
	    sz&uuml;ks&eacute;g&uuml;nk, akkor a <filename
	    role="package">lang/php4</filename> portot
	    haszn&aacute;ljuk.  A <filename
	    role="package">lang/php4</filename> portn&aacute;l is
	    megtal&aacute;lhatjuk a <filename
	    role="package">lang/php5</filename> ford&iacute;t&aacute;si
	    idej&#251; be&aacute;ll&iacute;t&aacute;sainak nagy
	    r&eacute;sz&eacute;t.</para>
	</note>

	<para>Az im&eacute;ntiek r&eacute;v&eacute;n telep&uuml;lnek
	  &eacute;s be&aacute;ll&iacute;t&oacute;dnak a dinamikus
	  <acronym>PHP</acronym> alkalmaz&aacute;sok
	  t&aacute;mogat&aacute;s&aacute;hoz sz&uuml;ks&eacute;ges
	  mouldok.  Az
	  <filename>/usr/local/etc/apache/httpd.conf</filename>
	  &aacute;llom&aacute;nyban ellen&#245;rizni is tudjuk, hogy az
	  al&aacute;bbi r&eacute;szek megjelentek-e:</para>

	<programlisting>LoadModule php5_module        libexec/apache/libphp5.so</programlisting>

	<programlisting>AddModule mod_php5.c
    &lt;IfModule mod_php5.c&gt;
        DirectoryIndex index.php index.html
    &lt;/IfModule&gt;
    &lt;IfModule mod_php5.c&gt;
        AddType application/x-httpd-php .php
        AddType application/x-httpd-php-source .phps
    &lt;/IfModule&gt;</programlisting>

	<para>Ahogy befejez&#245;d&ouml;tt a m&#251;velet, a
	  <acronym>PHP</acronym> modul bet&ouml;lt&eacute;s&eacute;hez
	  mind&ouml;sszesen az <command>apachectl</command> paranccsal
	  kell &oacute;vatosan &uacute;jraind&iacute;tanunk a
	  webszervert:</para>

	<screen>&prompt.root; <userinput>apachectl graceful</userinput></screen>

	<para>A <acronym>PHP</acronym> j&ouml;v&#245;beni
	  friss&iacute;t&eacute;seihez m&aacute;r nem lesz
	  sz&uuml;ks&eacute;g&uuml;nk a <command>make config</command>
	  parancsra, mivel a kor&aacute;bban kiv&aacute;lasztott
	  <literal>OPTIONS</literal> men&uuml;n bel&uuml;li
	  be&aacute;ll&iacute;tasainkat a &os;
	  Portgy&#251;jtem&eacute;ny&eacute;hez tartoz&oacute;
	  keretrendszer automatikusan elmenti.</para>

	<para>A <acronym>PHP</acronym> &os;-ben
	  megtal&aacute;lhat&oacute; t&aacute;mogat&aacute;sa
	  kifejezetten modul&aacute;ris, ez&eacute;rt az alap
	  telep&iacute;t&eacute;se igencsak korl&aacute;tozott.  A
	  tov&aacute;bbi elemek hozz&aacute;ad&aacute;s&aacute;hoz a
	  <filename role="package">lang/php5-extensions</filename>
	  portot tudjuk haszn&aacute;lni.  A port egy
	  men&uuml;vez&eacute;relt fel&uuml;letet ny&uacute;jt a
	  <acronym>PHP</acronym> k&uuml;l&ouml;nb&ouml;z&#245;
	  b&#245;v&iacute;tm&eacute;nyeinek
	  telep&iacute;t&eacute;s&eacute;hez.  Az egyes
	  b&#245;v&iacute;tm&eacute;nyeket azonban a megfelel&#245;
	  portok haszn&aacute;lat&aacute;val is fel tudjuk rakni.</para>

	<para>P&eacute;ld&aacute;ul <acronym>PHP</acronym>5 modulhoz
	  &uacute;gy tudunk t&aacute;mogat&aacute;st adni a
	  <application>MySQL</application> adatb&aacute;zis szerverhez,
	  ha feltelep&iacute;tj&uuml;k a <filename
	  role="package">databases/php5-mysql</filename> portot.</para>

	<para>Miut&aacute;n telep&iacute;tett&uuml;nk egy
	  b&#245;v&iacute;tm&eacute;nyt, az
	  <application>Apache</application> szerverrel &uacute;jra be
	  kell t&ouml;ltetn&uuml;nk a megv&aacute;ltozott
	  be&aacute;ll&iacute;t&aacute;sokat:</para>

	<screen>&prompt.root; <userinput>apachectl graceful</userinput></screen>

      </sect3>
    </sect2>
  </sect1>

  <sect1 id="network-ftp">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Murray</firstname>
	  <surname>Stokely</surname>
	  <contrib>K&eacute;sz&iacute;tette: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>&Aacute;llom&aacute;nyok &aacute;tvitele (FTP)</title>

    <indexterm><primary>FTP szerverek</primary></indexterm>

    <sect2>
      <title>&Aacute;ttekint&eacute;s</title>

      <para>Az adat&aacute;llom&aacute;ny &aacute;tviteli protokoll
	(File Transfer Protocol, FTP) a felhaszn&aacute;l&oacute;k
	sz&aacute;m&aacute;ra lehet&#245;s&eacute;get ad az &uacute;n.
	<acronym role="File Transfer Protocol">FTP</acronym> szerverekre
	&aacute;llom&aacute;nyokat felt&ouml;lteni, illetve onnan
	&aacute;llom&aacute;nyokat let&ouml;lteni.  A &os; alaprendszere
	is tartalmaz egy ilyen <acronym role="File Transfer
	Protocol">FTP</acronym> szerverprogramot,
	<application>ftpd</application> n&eacute;ven.  Ez&eacute;rt &os;
	alatt egy <acronym role="File Transfer Protocol">FTP</acronym>
	szerver be&aacute;ll&iacute;t&aacute;sa meglehet&#245;sen
	egyszer&#251;.</para>

    </sect2>

    <sect2>
      <title>Be&aacute;ll&iacute;t&aacute;s</title>

      <para>A be&aacute;ll&iacute;t&aacute;s legfontosabb
	l&eacute;p&eacute;se, hogy eld&ouml;nts&uuml;k milyen
	hozz&aacute;f&eacute;r&eacute;seken &aacute;t lehet
	el&eacute;rni az FTP szervert.  Egy h&eacute;tk&ouml;znapi &os;
	rendszerben rengeteg hozz&aacute;f&eacute;r&eacute;s a
	k&uuml;l&ouml;nb&ouml;z&#245; d&eacute;monokhoz tartozik, de az
	ismeretlen felhaszn&aacute;l&oacute;k sz&aacute;m&aacute;ra nem
	kellene megengedn&uuml;nk ezek haszn&aacute;lat&aacute;t.  Az
	<filename>/etc/ftpusers</filename> &aacute;llom&aacute;nyban
	szerepelnek azok a felhaszn&aacute;l&oacute;k, akik semmilyen
	m&oacute;don nem &eacute;rhetik el az FTP
	szolg&aacute;ltat&aacute;st.  Alap&eacute;rtelmez&eacute;s
	szerint itt tal&aacute;lhatjuk az el&#245;bb eml&iacute;tett
	rendszerszint&#251; hozz&aacute;f&eacute;r&eacute;seket is, de
	ide minden tov&aacute;bbi n&eacute;lk&uuml;l felvehetj&uuml;k
	azokat a felhaszn&aacute;l&oacute;kat, akikn&eacute;l nem
	akarjuk engedni az FTP el&eacute;r&eacute;s&eacute;t.</para>

      <para>M&aacute;s esetekben el&#245;fordulhat, hogy csak
	korl&aacute;tozni akarjuk egyes felhaszn&aacute;l&oacute;k FTP
	el&eacute;r&eacute;s&eacute;t.  Ezt az
	<filename>/etc/ftpchroot</filename> &aacute;llom&aacute;nyon
	kereszt&uuml;l tehetj&uuml;k meg.  Ebben az
	&aacute;llom&aacute;nyban a lekorl&aacute;tozni
	k&iacute;v&aacute;nt felhaszn&aacute;l&oacute;kat &eacute;s
	csoportokat &iacute;rhatjuk bele.  Az &man.ftpchroot.5; man
	oldal&aacute;n olvashatjuk el ennek r&eacute;szleteit,
	ez&eacute;rt ennek pontos r&eacute;szleteit itt most nem
	t&aacute;rgyaljuk.</para>

      <indexterm>
	<primary>FTP</primary>
	<secondary>anonim</secondary>
      </indexterm>

      <para>Ha az FTP szerver&uuml;nkh&ouml;z n&eacute;vtelen (anonim)
	hozz&aacute;f&eacute;r&eacute;st is enged&eacute;lyezni akarunk,
	akkor ahhoz el&#245;sz&ouml;r k&eacute;sz&iacute;ten&uuml;nk
	kell egy <username>ftp</username> nev&#251;
	felhaszn&aacute;l&oacute;t a &os; rendszer&uuml;nkben.  A
	felhaszn&aacute;l&oacute;k ezut&aacute;n az
	<username>ftp</username> vagy <username>anonymous</username>
	nevek, valamint egy tetsz&#245;leges jelsz&oacute; (ez a
	hagyom&aacute;nyok szerint a felhaszn&aacute;l&oacute; e-mail
	c&iacute;me) haszn&aacute;lat&aacute;val is k&eacute;pesek
	lesznek bejelentkezni.  Az FTP szerver ezut&aacute;n a
	n&eacute;vtelen felhaszn&aacute;l&oacute;k eset&eacute;ben
	megh&iacute;vja a &man.chroot.2; rendszerh&iacute;v&aacute;st,
	&eacute;s ezzel lekorl&aacute;tozza
	hozz&aacute;f&eacute;r&eacute;s&uuml;ket az
	<username>ftp</username> felhaszn&aacute;l&oacute;
	k&ouml;nyvt&aacute;r&aacute;ra.</para>

      <para>K&eacute;t sz&ouml;veges &aacute;llom&aacute;nyban adhatunk
	meg a becsatlakoz&oacute; FTP kliensek sz&aacute;m&aacute;ra
	&uuml;dv&ouml;zl&#245; &uuml;zeneteket.  Az
	<filename>/etc/ftpwelcome</filename> &aacute;llom&aacute;ny
	tartalm&aacute;t m&eacute;g a bejelentkez&eacute;s el&#245;tt
	l&aacute;tni fogj&aacute;k a felhaszn&aacute;l&oacute;k, a
	sikeres bejelentkez&eacute;st k&ouml;vet&#245;en pedig az
	<filename>/etc/ftpmotd</filename> &aacute;llom&aacute;ny
	tartalm&aacute;t l&aacute;tj&aacute;k.  Vigy&aacute;zzunk, mert
	ennek az &aacute;llom&aacute;nynak m&aacute;r a
	bejelentkez&eacute;si k&ouml;rnyezethez k&eacute;pest
	relat&iacute;v az el&eacute;r&eacute;se, ez&eacute;rt a
	n&eacute;vtelen felhaszn&aacute;l&oacute;k eset&eacute;ben ez
	konkr&eacute;tan az <filename>~ftp/etc/ftpmotd</filename>
	&aacute;llom&aacute;ny lesz.</para>

      <para>Ahogy be&aacute;ll&iacute;tottuk az FTP szervert, az
	<filename>/etc/inetd.conf</filename> &aacute;llom&aacute;nyban
	is enged&eacute;lyezn&uuml;nk kell.  Itt mind&ouml;ssze annyira
	lesz sz&uuml;ks&eacute;g&uuml;nk, hogy
	elt&aacute;vol&iacute;tsuk a megjegyz&eacute;st jelz&#245;
	<quote>#</quote> karaktert a m&aacute;r meglev&#245;
	<application>ftpd</application> sor el&#245;l:</para>

      <programlisting>ftp	stream	tcp	nowait	root	/usr/libexec/ftpd	ftpd -l</programlisting>

      <para>Ahogy arr&oacute;l m&aacute;r a <xref
	linkend="network-inetd-reread"> sz&oacute;t ejtett, az
	<application>inetd</application>
	be&aacute;ll&iacute;t&aacute;sait &uacute;jra be kell
	olvastatunk a konfigur&aacute;ci&oacute;s &aacute;llom&aacute;ny
	megv&aacute;ltoztat&aacute;sa ut&aacute;n.  A <xref
	  linkend="network-inetd-settings"> &iacute;rja le az
	<application>inetd</application>
	enged&eacute;lyez&eacute;s&eacute;nek r&eacute;szleteit.</para>

      <para>Az <application>ftpd</application> &ouml;n&aacute;ll&oacute;
	szerverk&eacute;nt is elind&iacute;that&oacute;.  Ehhez
	mind&ouml;ssze elegend&#245; csak a megfelel&#245;
	v&aacute;ltoz&oacute;t be&aacute;ll&iacute;tani az
	<filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyban:</para>

      <programlisting>ftpd_enable="YES"</programlisting>

      <para>Miut&aacute;n megadtuk az im&eacute;nti
	v&aacute;ltoz&oacute;t, a szerver el fog indulni a rendszer
	k&ouml;vetkez&#245; ind&iacute;t&aacute;sa sor&aacute;n.
	Sz&uuml;ks&eacute;g eset&eacute;n term&eacute;szetesen
	<username>root</username> felhaszn&aacute;l&oacute;k&eacute;nt a
	k&ouml;vetkez&#245; paranccsal is k&ouml;zvetlen&uuml;l
	elind&iacute;that&oacute;:</para>

      <screen>&prompt.root; <userinput>/etc/rc.d/ftpd start</userinput></screen>

      <para>Most m&aacute;r be is tudunk jelentkezni az FTP
	szerverre:</para>

      <screen>&prompt.user; <userinput>ftp localhost</userinput></screen>

    </sect2>

    <sect2>
      <title>Karbantart&aacute;s</title>

      <indexterm><primary>syslog</primary></indexterm>

      <indexterm>
	<primary>napl&oacute;&aacute;llom&aacute;nyok</primary>
	<secondary>FTP</secondary>
      </indexterm>

      <para>Az <application>ftpd</application> d&eacute;mon a
	&man.syslog.3; haszn&aacute;lat&aacute;val napl&oacute;zza az
	&uuml;zeneteket.  Alap&eacute;rtelmez&eacute;s szerint a
	rendszernapl&oacute;z&oacute; d&eacute;mon az FTP
	m&#251;k&ouml;d&eacute;s&eacute;re vonatkoz&oacute;
	&uuml;zeneteket az <filename>/var/log/xferlog</filename>
	&aacute;llom&aacute;nyba &iacute;rja.  Az FTP napl&oacute;inak
	hely&eacute;t az <filename>/etc/syslog.conf</filename>
	&aacute;llom&aacute;nyban tudjuk
	m&oacute;dos&iacute;tani:</para>

      <programlisting>ftp.info      /var/log/xferlog</programlisting>

      <indexterm>
	<primary>FTP</primary>
	<secondary>anonim</secondary>
      </indexterm>

      <para>Legy&uuml;nk k&ouml;r&uuml;ltekint&#245;ek a n&eacute;vtelen
	FTP szerverek &uuml;zemeltet&eacute;sekor.  Azt pedig
	k&eacute;tszer is gondoljuk meg, hogy
	enged&eacute;lyezz&uuml;k-e a n&eacute;vtelen
	felhaszn&aacute;l&oacute;k sz&aacute;m&aacute;ra
	&aacute;llom&aacute;nyok felt&ouml;lt&eacute;s&eacute;t, hiszen
	k&ouml;nnyen azon kaphatjuk magunkat, hogy az FTP oldalunk
	illeg&aacute;lis &aacute;llom&aacute;nycser&eacute;k
	sz&iacute;nter&eacute;v&eacute; v&aacute;lik vagy esetleg valami
	sokkal rosszabb t&ouml;rt&eacute;nik.  Ha mindenk&eacute;ppen
	sz&uuml;ks&eacute;g&uuml;nk lenne erre a
	lehet&#245;s&eacute;gre, akkor &aacute;ll&iacute;tsunk be olyan
	enged&eacute;lyeket a felt&ouml;lt&ouml;tt
	&aacute;llom&aacute;nyokra, hogy a t&ouml;bbi n&eacute;vtelen
	felhaszn&aacute;l&oacute; ezeket a tartalmuk t&uuml;zetes
	ellen&#245;rz&eacute;s&eacute;ig ne is olvashassa.</para>

    </sect2>
  </sect1>

  <sect1 id="network-samba">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Murray</firstname>
	  <surname>Stokely</surname>
	  <contrib>K&eacute;sz&iacute;tette: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>&Aacute;llom&aacute;ny- &eacute;s nyomtat&aacute;si
      szolg&aacute;ltat&aacute;sok &microsoft.windows; kliensek
      sz&aacute;m&aacute;ra (Samba)</title>

    <indexterm><primary>Samba szerver</primary></indexterm>
    <indexterm><primary>Microsoft Windows</primary></indexterm>
    <indexterm>
      <primary>&aacute;llom&aacute;nyszerver</primary>
      <secondary>windowszos kliensek</secondary>
    </indexterm>
    <indexterm>
      <primary>nyomtat&oacute;szerver</primary>
      <secondary>windowszos kliensek</secondary>
    </indexterm>

    <sect2>
      <title>&Aacute;ttekint&eacute;s</title>

      <para>A <application>Samba</application> egy olyan elterjedt
	ny&iacute;lt forr&aacute;sk&oacute;d&uacute; szoftver, ami
	&microsoft.windows; kliensek sz&aacute;m&aacute;ra tesz
	lehet&#245;v&eacute; &aacute;llom&aacute;ny- &eacute;s
	nyomtat&aacute;si szolg&aacute;ltat&aacute;sokat.  Az ilyen
	kliensek &aacute;ltala helyi meghajt&oacute;k&eacute;nt
	k&eacute;pesek el&eacute;rni a &os;
	&aacute;llom&aacute;nyrendszer&eacute;t, vagy helyi
	nyomtat&oacute;k&eacute;nt a &os; &aacute;ltalt kezelt
	nyomtat&oacute;kat.</para>

      <para>A <application>Samba</application> csomagja
	&aacute;ltal&aacute;ban megtal&aacute;lhat&oacute; a &os;
	telep&iacute;t&#245;eszk&ouml;z&eacute;n.  Ha a &os;-vel
	egy&uuml;tt nem raktuk fel a <application>Samba</application>
	csomagj&aacute;t, akkor ezt k&eacute;s&#245;bb <filename
	role="package">net/samba3</filename> port vagy csomag
	telep&iacute;t&eacute;s&eacute;vel p&oacute;tolhatjuk.</para>

    </sect2>

    <sect2>
      <title>Be&aacute;ll&iacute;t&aacute;s</title>

      <para>A <application>Samba</application>
	konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nya a
	telep&iacute;t&eacute;s ut&aacute;n
	<filename>/usr/local/share/examples/samba/smb.conf.default</filename>
	n&eacute;ven tal&aacute;lhat&oacute; meg.  Ezt kell
	lem&aacute;solnunk <filename>/usr/local/etc/smb.conf</filename>
	n&eacute;ven, amelyet azt&aacute;n a
	<application>Samba</application> t&eacute;nyleges
	haszn&aacute;lata el&#245;tt m&oacute;dos&iacute;tanunk
	kell.</para>

      <para>Az <filename>smb.conf</filename> &aacute;llom&aacute;ny a
	<application>Samba</application> fut&aacute;s&aacute;hoz
	haszn&aacute;lt be&aacute;ll&iacute;t&aacute;sokat tartalmazza,
	mint p&eacute;ld&aacute;ul &windows; kliensek
	sz&aacute;m&aacute;ra felk&iacute;n&aacute;lt a nyomtat&oacute;k
	&eacute;s <quote>megoszt&aacute;sok</quote> adatait.  A
	<application>Samba</application> csomagban ezen
	k&iacute;v&uuml;l tal&aacute;lhatunk m&eacute;g egy
	<application>swat</application> nev&#251; webes eszk&ouml;zt,
	amellyel egyszer&#251; m&oacute;don tudjuk az
	<filename>smb.conf</filename> &aacute;llom&aacute;nyt
	&aacute;ll&iacute;tgatni.</para>

      <sect3>
	<title>A Samba webes adminisztr&aacute;ci&oacute;s eszk&ouml;ze
	  (SWAT)</title>

	<para>A Samba webes adminisztr&aacute;ci&oacute;s
	  seg&eacute;deszk&ouml;ze (Samba Web Administration Tool, SWAT)
	  az <application>inetd</application> d&eacute;monon
	  kereszt&uuml;l fut d&eacute;monk&eacute;nt.  Ennek
	  megfelel&#245;n az <filename>/etc/inetd.conf</filename>
	  &aacute;llom&aacute;nyban a k&ouml;vetkez&#245; sort kell
	  kivenn&uuml;nk megjegyz&eacute;sb&#245;l, miel&#245;tt a
	  <application>swat</application>
	  seg&iacute;ts&eacute;g&eacute;vel megkezden&eacute;nk a
	  <application>Samba</application>
	  be&aacute;ll&iacute;t&aacute;s&aacute;t:</para>

	<programlisting>swat   stream  tcp     nowait/400      root    /usr/local/sbin/swat    swat</programlisting>

	<para>Ahogy azt a <xref linkend="network-inetd-reread"> is
	  mutatja, az <application>inetd</application> d&eacute;mont
	  &uacute;jra kell ind&iacute;tanunk a megv&aacute;ltozott
	  konfigur&aacute;ci&oacute;s &aacute;llom&aacute;ny&aacute;nak
	  &uacute;jb&oacute;li beolvas&aacute;s&aacute;hoz.</para>

	<para>Miut&aacute;n az <filename>inetd.conf</filename>
	  &aacute;llom&aacute;nyban a <application>swat</application>
	  enged&eacute;lyez&eacute;sre ker&uuml;lt, a
	  b&ouml;ng&eacute;sz&#245;nk seg&iacute;ts&eacute;g&eacute;vel
	  pr&oacute;b&aacute;ljunk meg a <ulink
	  url="http://localhost:901"></ulink> c&iacute;mre csatlakozni.
	  El&#245;sz&ouml;r a rendszer <username>root</username>
	  hozz&aacute;f&eacute;r&eacute;s&eacute;vel kell
	  bejelentkezn&uuml;nk.</para>

	<para>Miut&aacute;n sikeresen bejelentkezt&uuml;nk a
	  <application>Samba</application>
	  be&aacute;ll&iacute;t&aacute;sait t&aacute;rgyal&oacute;
	  lapra, el tudjuk olvasni a rendszer
	  dokument&aacute;ci&oacute;j&aacute;t, vagy a
	  <guimenu>Globals</guimenu> f&uuml;lre kattintva
	  nekil&aacute;thatunk a be&aacute;ll&iacute;t&aacute;sok
	  elv&eacute;gz&eacute;s&eacute;nek.  A
	  <guimenu>Globals</guimenu> r&eacute;szben
	  tal&aacute;lhat&oacute; opci&oacute;k az
	  <filename>/usr/local/etc/smb.conf</filename>
	  &aacute;llom&aacute;ny <literal>[global]</literal>
	  szekci&oacute;j&aacute;ban tal&aacute;lhat&oacute;
	  v&aacute;ltoz&oacute;kat t&uuml;kr&ouml;zik.</para>

      </sect3>

      <sect3>
	<title>&Aacute;ltal&aacute;nos
	  be&aacute;ll&iacute;t&aacute;sok</title>

	<para>Ak&aacute;r a <application>swat</application>
	  eszk&ouml;zzel, ak&aacute;r a
	  <filename>/usr/local/etc/smb.conf</filename> k&ouml;zvetlen
	  m&oacute;dos&iacute;t&aacute;s&aacute;val dolgozunk, a
	  <application>Samba</application>
	  be&aacute;ll&iacute;t&aacute;sa sor&aacute;n a
	  k&ouml;vetkez&#245;kkel mindenk&eacute;ppen &ouml;ssze fogunk
	  futni:</para>

        <variablelist>
	  <varlistentry>
	    <term><literal>workgroup</literal></term>

	    <listitem>
	      <para>A szervert el&eacute;rni k&iacute;v&aacute;n&oacute;
		sz&aacute;m&iacute;t&oacute;g&eacute;pek &aacute;ltal
		haszn&aacute;lt NT tartom&aacute;ny vagy munkacsoport
		neve.</para>
	    </listitem>
	  </varlistentry>

	  <varlistentry>
	    <term><literal>netbios name</literal></term>
	    <indexterm><primary>NetBIOS</primary></indexterm>

	    <listitem>
	      <para>A <application>Samba</application> szerver NetBIOS
		neve.  Alap&eacute;rtelmez&eacute;s szerint ez a
		n&eacute;v a g&eacute;p h&aacute;l&oacute;zati
		nev&eacute;nek els&#245; tagja.</para>
	    </listitem>
	  </varlistentry>

	  <varlistentry>
	    <term><literal>server string</literal></term>

	    <listitem>
	      <para>Ez a sz&ouml;veg jelenik meg akkor, ha
		p&eacute;ld&aacute;ul a <command>net view</command>
		paranccsal vagy valamilyen m&aacute;s
		h&aacute;l&oacute;zati seg&eacute;dprogrammal
		k&eacute;rdezz&uuml;k le a szerver besz&eacute;desebb
		le&iacute;r&aacute;s&aacute;t.</para>
	    </listitem>
	  </varlistentry>
        </variablelist>
      </sect3>

      <sect3>
	<title>Biztons&aacute;gi
	  be&aacute;ll&iacute;t&aacute;sok</title>

	<para>A <filename>/usr/local/etc/smb.conf</filename>
	  &aacute;llom&aacute;nyban a k&eacute;t legfontosabb
	  be&aacute;ll&iacute;t&aacute;s a v&aacute;lasztott
	  biztons&aacute;gi modell &eacute;s a kliensek
	  felhaszn&aacute;l&oacute;i jelszavainak
	  t&aacute;rol&aacute;s&aacute;hoz haszn&aacute;lt
	  form&aacute;tum.  Az al&aacute;bbi direkt&iacute;v&aacute;k
	  vez&eacute;rlik ezeket:</para>

        <variablelist>
	  <varlistentry>
	    <term><literal>security</literal></term>

	    <listitem>
	      <para>Itt a k&eacute;t leggyakoribb
		be&aacute;ll&iacute;t&aacute;s a <literal>security =
		share</literal> &eacute;s a <literal>security =
		user</literal>.  Ha a kliensek a &os; g&eacute;pen
		tal&aacute;lhat&oacute; felhaszn&aacute;l&oacute;i
		neveiket haszn&aacute;lj&aacute;k, akkor
		felhaszn&aacute;l&oacute;i szint&#251; v&eacute;delemre
		van sz&uuml;ks&eacute;g&uuml;nk (teh&aacute;t a user
		be&aacute;ll&iacute;t&aacute;sra).  Ez az
		alap&eacute;rtelmezett biztons&aacute;gi h&aacute;zirend
		&eacute;s ilyenkor a klienseknek el&#245;sz&ouml;r be
		kell jelentkezni&uuml;k a megosztott
		er&#245;forr&aacute;sok
		el&eacute;r&eacute;s&eacute;hez.</para>

	      <para>A megoszt&aacute;s (share) szint&#251;
		v&eacute;delem eset&eacute;ben, a klienseknek nem kell a
		szerveren &eacute;rv&eacute;nyes
		felhaszn&aacute;l&oacute;i n&eacute;vvel &eacute;s
		jelsz&oacute;val rendelkezni&uuml;k a megosztott
		er&#245;forr&aacute;sok el&eacute;r&eacute;s&eacute;hez.
		Ez volt az alapbe&aacute;ll&iacute;t&aacute;s a
		<application>Samba</application> kor&aacute;bbi
		v&aacute;ltozataiban.</para>
	    </listitem>
	  </varlistentry>

	  <varlistentry>
	    <term><literal>passdb backend</literal></term>

	    <indexterm><primary>NIS+</primary></indexterm>
	    <indexterm><primary>LDAP</primary></indexterm>
	    <indexterm><primary>SQL adatb&aacute;zis</primary></indexterm>

	    <listitem>
	      <para>A <application>Samba</application> sz&aacute;mos
		k&uuml;l&ouml;nb&ouml;z&#245; hiteles&iacute;t&eacute;si
		modellt ismer.  A klienseket LDAP, NIS+, SQL
		adatb&aacute;zis vagy esetleg egy
		m&oacute;dos&iacute;tott jelsz&oacute;
		&aacute;llom&aacute;nnyal is tudjuk hiteles&iacute;teni.
		Az alap&eacute;rtelmezett hiteles&iacute;t&eacute;si
		m&oacute;dszer a <literal>smbpasswd</literal>,
		&iacute;gy itt most ezzel foglalkozunk.</para>
	    </listitem>
	  </varlistentry>
	</variablelist>

	<para>Ha feltessz&uuml;k, hogy az alap&eacute;rtelmezett
	  <literal>smbpasswd</literal> form&aacute;tumot
	  v&aacute;lasztottuk, akkor a <application>Samba</application>
	  &uacute;gy fogja tudni hiteles&iacute;teni a klienseket, ha
	  el&#245;tte l&eacute;trehozzuk a
	  <filename>/usr/local/private/smbpasswd</filename>
	  &aacute;llom&aacute;nyt.  Ha a &windows;-os kliensekkel is el
	  akarjuk &eacute;rni a &unix;-os felhaszn&aacute;l&oacute;i
	  hozz&aacute;f&eacute;r&eacute;seinket, akkor haszn&aacute;ljuk
	  a k&ouml;vetkez&#245; parancsot:</para>

	<screen>&prompt.root; <userinput>smbpasswd -a <replaceable>felhaszn&aacute;l&oacute;n&eacute;v</replaceable></userinput></screen>

	<note>
	  <para>A <application>Samba</application> a 3.0.23c
	    verzi&oacute;j&aacute;t&oacute;l kezd&#245;d&#245;en a
	    hiteles&iacute;t&eacute;shez sz&uuml;ks&eacute;ges
	    &aacute;llom&aacute;nyokat a <filename
	    class="directory">/usr/local/etc/samba</filename>
	    k&ouml;nyvt&aacute;rban t&aacute;rolja.  A
	    felhaszn&aacute;l&oacute;i hozz&aacute;f&eacute;r&eacute;sek
	    hozz&aacute;ad&aacute;s&aacute;ra innent&#245;l m&aacute;r a
	    <literal>tdbsam</literal> parancs haszn&aacute;lata
	    javasolt:</para>

	  <screen>&prompt.root; <userinput><command>pdbedit <option>-a</option> <option>-u</option> <replaceable>felhaszn&aacute;l&oacute;n&eacute;v</replaceable></command></userinput></screen>
	</note>

	<para>A <ulink
	  url="http://www.samba.org/samba/docs/man/Samba-HOWTO-Collection/">
	  hivatalos Samba HOGYAN</ulink> ezekr&#245;l a
	  be&aacute;ll&iacute;t&aacute;sokr&oacute;l szolg&aacute;l
	  tov&aacute;bbi inform&aacute;ci&oacute;kkal (angolul).
	  Viszont az itt v&aacute;zolt alapok viszont m&aacute;r
	  elegend&#245;ek a <application>Samba</application>
	  elind&iacute;t&aacute;s&aacute;hoz.</para>

      </sect3>
    </sect2>

    <sect2>
      <title>A <application>Samba</application>
	elind&iacute;t&aacute;sa</title>

      <para>A <filename role="package">net/samba3</filename> port a
	<application>Samba</application>
	ir&aacute;ny&iacute;t&aacute;s&aacute;ra egy &uacute;j
	ind&iacute;t&oacute; szkriptet tartalmaz.  A szkript
	enged&eacute;lyez&eacute;s&eacute;hez, teh&aacute;t
	&aacute;ltala a <application>Samba</application>
	elind&iacute;t&aacute;s&aacute;nak,
	le&aacute;ll&iacute;t&aacute;s&aacute;nak &eacute;s
	&uacute;jraind&iacute;t&aacute;s&aacute;nak lehet&#245;v&eacute;
	t&eacute;tel&eacute;hez vegy&uuml;k fel a k&ouml;vetkez&#245;
	sort az <filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyba:</para>

      <programlisting>samba_enable="YES"</programlisting>

      <para>Ha m&eacute;g finomabb ir&aacute;ny&iacute;t&aacute;sra
	v&aacute;gyunk:</para>

      <programlisting>nmbd_enable="YES"</programlisting>
      <programlisting>smbd_enable="YES"</programlisting>

      <note>
	<para>Ezzel egyben a rendszer ind&iacute;t&aacute;sakor
	  automatikusan be is ind&iacute;tjuk a
	  <application>Samba</application>
	  szolg&aacute;ltat&aacute;st.</para>
      </note>

      <para>A <application>Samba</application> a k&ouml;vetkez&#245;kkel
	b&aacute;rmikor elind&iacute;that&oacute;:</para>

      <screen>&prompt.root; <userinput>/usr/local/etc/rc.d/samba start</userinput>
Starting SAMBA: removing stale tdbs :
Starting nmbd.
Starting smbd.</screen>

      <para>Az rc szkriptekkel kapcsolatban a <xref
	linkend="configtuning-rcd">t aj&aacute;nljuk
	elolvas&aacute;sra.</para>

      <para>A <application>Samba</application> jelen pillanatban
	h&aacute;rom k&uuml;l&ouml;n&aacute;ll&oacute;
	d&eacute;monb&oacute;l &aacute;ll.  L&aacute;thatjuk is, hogy az
	<application>nmbd</application> &eacute;s
	<application>smbd</application> d&eacute;monokat
	elind&iacute;totta a <filename>samba</filename> szkript.  Ha az
	<filename>smb.conf</filename> &aacute;llom&aacute;nyban
	enged&eacute;lyezt&uuml;k a <application>winbind</application>
	n&eacute;vfelold&aacute;si szolg&aacute;ltat&aacute;st is, akkor
	l&aacute;thatjuk, hogy ilyenkor a
	<application>winbindd</application> d&eacute;mon is
	elindul.</para>

      <para>A <application>Samba</application> &iacute;gy
	&aacute;ll&iacute;that&oacute; le ak&aacute;rmikor:</para>

      <screen>&prompt.root; <userinput>/usr/local/etc/rc.d/samba stop</userinput></screen>

      <para>A <application>Samba</application> egy &ouml;sszetett
	szoftvercsomag, amely a &microsoft.windows;
	h&aacute;l&oacute;zatokkal kapcsolatos sz&eacute;les
	k&ouml;r&#251; egy&uuml;ttm&#251;k&ouml;d&eacute;st tesz
	lehet&#245;v&eacute;.  Az &aacute;ltala felk&iacute;n&aacute;lt
	alapvet&#245; lehet&#245;s&eacute;geken t&uacute;l a t&ouml;bbit
	a <ulink url="http://www.samba.org"></ulink> honlapon
	ismerhetj&uuml;k meg (angolul).</para>

    </sect2>
  </sect1>

  <sect1 id="network-ntp">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Tom</firstname>
	  <surname>Hukins</surname>
	  <contrib>K&eacute;sz&iacute;tette: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>Az &oacute;r&aacute;k egyeztet&eacute;se az NTP
      haszn&aacute;lat&aacute;val</title>

    <indexterm><primary>NTP</primary></indexterm>

    <sect2>
      <title>&Aacute;ttekint&eacute;s</title>

      <para>Id&#245;vel a sz&aacute;m&iacute;t&oacute;g&eacute;p
	&oacute;r&aacute;ja hajlamos elm&aacute;szni.  A
	h&aacute;l&oacute;zati id&#245; protokoll (Network Time
	Protocol, NTP) az egyik m&oacute;dja az &oacute;r&aacute;nk
	pontosan tart&aacute;s&aacute;nak.</para>

      <para>Rengeteg internetes szolg&aacute;ltat&aacute;s
	elv&aacute;rja vagy &eacute;ppen el&#245;nyben
	r&eacute;szes&iacute;ti a sz&aacute;m&iacute;t&oacute;g&eacute;p
	&oacute;r&aacute;j&aacute;nak pontoss&aacute;g&aacute;t.
	P&eacute;ld&aacute;ul egy webszervert&#245;l
	megk&eacute;rdezhetik, hogy egy &aacute;llom&aacute;nyt adott
	ideje m&oacute;dos&iacute;tottak-e.  A helyi
	h&aacute;l&oacute;zatban az egyazon
	&aacute;llom&aacute;nyszerveren megosztott
	&aacute;llom&aacute;nyok ellentmond&aacute;smentes
	d&aacute;tumoz&aacute;sa &eacute;rdek&eacute;ben szinte
	elengedhetetlen az &oacute;r&aacute;k
	szinkroniz&aacute;l&aacute;sa.  Az olyan
	szolg&aacute;ltat&aacute;sok, mint a &man.cron.8; is komolyan
	&eacute;p&iacute;tkeznek a pontosan j&aacute;r&oacute;
	rendszer&oacute;r&aacute;ra, amikor egy adott pillanatban kell
	lefuttatniuk parancsokat.</para>

      <indexterm>
	<primary>NTP</primary>
	<secondary>ntpd</secondary>
      </indexterm>

      <para>A &os; alapb&oacute;l az &man.ntpd.8; <acronym role="Network
	Time Protocol">NTP</acronym> szervert tartalmazza, amellyel
	m&aacute;s <acronym role="Network Time Protocol">NTP</acronym>
	szerverek seg&iacute;ts&eacute;g&eacute;vel tudjuk
	be&aacute;ll&iacute;tani g&eacute;p&uuml;nk
	&oacute;r&aacute;j&aacute;t, vagy &eacute;ppen id&#245;vel
	kapcsolatos inform&aacute;ci&oacute;kat szolg&aacute;ltatni
	m&aacute;soknak.</para>

    </sect2>

    <sect2>
      <title>A megfelel&#245; NTP szerverek
	kiv&aacute;laszt&aacute;sa</title>

      <indexterm>
	<primary>NTP</primary>
	<secondary>a szerverek kiv&aacute;laszt&aacute;sa</secondary>
      </indexterm>

      <para>Az &oacute;r&aacute;nk egyeztet&eacute;s&eacute;hez egy vagy
	t&ouml;bb <acronym role="Network Time Protocol">NTP</acronym>
	szerverre lesz sz&uuml;ks&eacute;g&uuml;nk.  El&#245;fordulhat,
	hogy a h&aacute;l&oacute;zati rendszergazd&aacute;nk vagy az
	internet-szolg&aacute;ltat&oacute;nk m&aacute;r
	be&aacute;ll&iacute;tott egy ilyen szervert erre a c&eacute;lra.
	Ezzel kapcsolatban olvassuk el a megfelel&#245;
	le&iacute;r&aacute;sokat.  A <ulink
	url="http://ntp.isc.org/bin/view/Servers/WebHome">nyilv&aacute;nosan
	el&eacute;rhet&#245; NTP szerverekr&#245;l k&eacute;sz&uuml;lt
	egy lista</ulink>, ahonnan k&ouml;nnyed&eacute;n ki tudjuk
	keresni a sz&aacute;munkra legink&aacute;bb megfelel&#245;
	(hozz&aacute;nk legk&ouml;zelebbi) szervert.  Ne hagyjuk
	figyelmen k&iacute;v&uuml;l a szerverre vonatkoz&oacute;
	h&aacute;zirendet &eacute;s k&eacute;rj&uuml;nk enged&eacute;lyt
	a haszn&aacute;lat&aacute;hoz, amennyiben ez
	sz&uuml;ks&eacute;ges.</para>

      <para>T&ouml;bb, egym&aacute;ssal k&ouml;zvetlen kapcsolatban nem
	&aacute;ll&oacute; NTP szerver
	v&aacute;laszt&aacute;s&aacute;val j&aacute;runk j&oacute;l, ha
	netal&aacute;n az egyik&uuml;k v&aacute;ratlanul
	el&eacute;rhetetlenn&eacute; vagy az &oacute;r&aacute;ja
	pontatlann&aacute; v&aacute;lna.  Az &man.ntpd.8; a visszakapott
	v&aacute;laszokat intelligensen haszn&aacute;lja fel, mivel
	eset&uuml;kben a megb&iacute;zhat&oacute; szervereket
	r&eacute;szes&iacute;ti el&#245;nyben.</para>

    </sect2>

    <sect2>
      <title>A g&eacute;p&uuml;nk
	be&aacute;ll&iacute;t&aacute;sa</title>

      <indexterm>
	<primary>NTP</primary>
	<secondary>be&aacute;ll&iacute;t&aacute;sa</secondary>
      </indexterm>

      <sect3>
	<title>Alapvet&#245; be&aacute;ll&iacute;t&aacute;sok</title>

	<indexterm><primary>ntpdate</primary></indexterm>

	<para>Ha a sz&aacute;m&iacute;t&oacute;g&eacute;p&uuml;nk
	  ind&iacute;t&aacute;sakor akarjuk egyeztetni az
	  &oacute;r&aacute;nkat, akkor erre az &man.ntpdate.8; nev&#251;
	  programot haszn&aacute;lhatjuk.  Ez olyan asztali g&eacute;pek
	  sz&aacute;m&aacute;ra megfelel&#245; v&aacute;laszt&aacute;s,
	  amelyeket gyakran ind&iacute;tanak &uacute;jra &eacute;s csak
	  id&#245;nk&eacute;nt kell szinkroniz&aacute;lnunk.  A
	  legt&ouml;bb g&eacute;pnek viszont az &man.ntpd.8;
	  haszn&aacute;lat&aacute;ra van sz&uuml;ks&eacute;ge.</para>

	<para>Az &man.ntpdate.8; elind&iacute;t&aacute;sa olyan
	  esetekben is hasznos, ahol az &man.ntpd.8; is fut.  Az
	  &man.ntpd.8; az &oacute;r&aacute;t fokozatosan
	  &aacute;ll&iacute;tja, ellenben az &man.ntpdate.8; az
	  elt&eacute;r&eacute;s m&eacute;rt&eacute;k&eacute;t&#245;l
	  &eacute;s ir&aacute;ny&aacute;t&oacute;l f&uuml;ggetlen&uuml;l
	  egyszer&#251;en &aacute;t&aacute;ll&iacute;tja a g&eacute;p
	  &oacute;r&aacute;j&aacute;t a pontos id&#245;re.</para>

	<para>Az &man.ntpdate.8; elind&iacute;t&aacute;s&aacute;t
	  &uacute;gy tudjuk enged&eacute;lyezni a rendszer
	  ind&iacute;t&aacute;sakor, ha az
	  <filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyba
	  berakjuk az <literal>ntpdate_enable="YES"</literal> sort.
	  Emellett m&eacute;g <varname>ntpdate_flags</varname>
	  v&aacute;ltoz&oacute;ban meg kell adnunk az alkalmazott
	  be&aacute;ll&iacute;t&aacute;sok mellett azokat a szervereket,
	  amelyekkel szinkroniz&aacute;lni akarunk.</para>

      </sect3>

      <sect3>

	<indexterm>
	  <primary>NTP</primary>
	  <secondary>ntp.conf</secondary>
	</indexterm>

	<title>&Aacute;ltal&aacute;nos
	  be&aacute;ll&iacute;t&aacute;sok</title>

	<para>Az NTP az <filename>/etc/ntp.conf</filename>
	  &aacute;llom&aacute;nyon kereszt&uuml;l
	  &aacute;ll&iacute;that&oacute;, amelyek
	  fel&eacute;p&iacute;t&eacute;s&eacute;t az &man.ntp.conf.5;
	  man oldal t&aacute;rgyalja.  &Iacute;me erre egy egyszer&#251;
	  p&eacute;lda:</para>

	<programlisting>server ntplocal.minta.com prefer
server timeserver.minta.org
server ntp2a.minta.net

driftfile /var/db/ntp.drift</programlisting>

	<para>A <literal>server</literal> be&aacute;ll&iacute;t&aacute;s
	  adja meg az egyeztet&eacute;shez haszn&aacute;lt szervereket,
	  soronk&eacute;nt egyet.  Ha egy szerver mellett szerepel
	  m&eacute;g a <literal>prefer</literal> param&eacute;ter is,
	  ahogy azt a p&eacute;ld&aacute;ban a <hostid
	  role="fqdn">ntplocal.minta.com</hostid> mellett
	  l&aacute;thattuk, akkor a t&ouml;bbivel szemben azt a szervert
	  fogjuk el&#245;nyben r&eacute;szes&iacute;teni.  Az &iacute;gy
	  kiemelt szervert&#245;l &eacute;rkez&#245; v&aacute;laszt
	  abban az esetben viszont eldobjuk, hogy a t&ouml;bbi
	  szervert&#245;l kapott v&aacute;lasz jelent&#245;s
	  m&eacute;rt&eacute;kben elt&eacute;r t&#245;le.  Minden
	  m&aacute;s esetben a &#245; v&aacute;lasza lesz a
	  m&eacute;rvad&oacute;.  A <literal>prefer</literal>
	  param&eacute;tert &aacute;ltal&aacute;ban olyan NTP
	  szerverekhez haszn&aacute;lj&aacute;k, amelyek
	  k&ouml;zismerten nagy pontoss&aacute;g&uacute;ak, teh&aacute;t
	  p&eacute;ld&aacute;ul k&uuml;l&ouml;n erre a c&eacute;lra
	  sz&aacute;nt fel&uuml;gyeleti eszk&ouml;zt is
	  tartalmaznak.</para>

	<para>A <literal>driftfile</literal>
	  be&aacute;ll&iacute;t&aacute;ssal azt az
	  &aacute;llom&aacute;nyt adjuk meg, amiben a rendszer&oacute;ra
	  frekvencia eltol&oacute;d&aacute;sait t&aacute;roljuk.  Az
	  &man.ntpd.8; program ezzel ellens&uacute;lyozza automatikusan
	  az &oacute;ra term&eacute;szetes
	  elm&aacute;sz&aacute;s&aacute;t, ez&aacute;ltal
	  lehet&#245;v&eacute; t&eacute;ve, hogy egy viszonylag pontos
	  id&#245;t kapjuk m&eacute;g abban az esetben is, amikor egy
	  kis id&#245;re k&uuml;ls&#245; id&#245;forr&aacute;sok
	  n&eacute;lk&uuml;l maradn&aacute;nk.</para>

	<para>A <literal>driftfile</literal>
	  be&aacute;ll&iacute;t&aacute;ssal egyben azt az
	  &aacute;llom&aacute;nyt jel&ouml;lj&uuml;k ki, amely az NTP
	  szervert&#245;l kapott kor&aacute;bbi v&aacute;laszokat
	  t&aacute;rolja.  Ez az NTP m&#251;k&ouml;d&eacute;s&eacute;hez
	  sz&uuml;ks&eacute;ges bels&#245; adatokat tartalmaz,
	  ez&eacute;rt semmilyen m&aacute;s programnak nem szabad
	  m&oacute;dos&iacute;tania.</para>

      </sect3>

      <sect3>
	<title>A szerver&uuml;nk el&eacute;r&eacute;s&eacute;nek
	  szab&aacute;lyoz&aacute;sa</title>

	<para>Alap&eacute;rtelmez&eacute;s szerint az NTP
	  szerver&uuml;nket b&aacute;rki k&eacute;pes el&eacute;rni az
	  interneten.  Az <filename>/etc/ntp.conf</filename>
	  &aacute;llom&aacute;nyban szerepl&#245;
	  <literal>restrict</literal> be&aacute;ll&iacute;t&aacute;s
	  seg&iacute;ts&eacute;g&eacute;vel azonban meg tudjuk mondani,
	  milyen g&eacute;pek &eacute;rhetik el a
	  szerver&uuml;nket.</para>

	<para>Ha az NTP szerver&uuml;nk fel&eacute; mindenf&eacute;le
	  pr&oacute;b&aacute;lkoz&aacute;st el akarunk utas&iacute;tani,
	  akkor az <filename>/etc/ntp.conf</filename>
	  &aacute;llom&aacute;nyba a k&ouml;vetkez&#245; sort kell
	  felvenn&uuml;nk:</para>

	<programlisting>restrict default ignore</programlisting>

	<note>
	  <para>Ezzel egyben azonban a helyi
	    be&aacute;ll&iacute;t&aacute;sainkban szerepl&#245;
	    szerverek el&eacute;r&eacute;s&eacute;t is
	    megakad&aacute;lyozzuk.  Ha k&uuml;ls&#245; NTP szerverekkel
	    is szeretn&eacute;nk szinkroniz&aacute;lni, akkor itt is
	    enged&eacute;lyez&uuml;nk kell ezeket.  Err&#245;l
	    b&#245;vebben l&aacute;sd az &man.ntp.conf.5; man
	    oldalon.</para>
	</note>

	<para>Ha csak a bels&#245; h&aacute;l&oacute;zatunkban lev&#245;
	  g&eacute;pek sz&aacute;m&aacute;ra szeretn&eacute;nk
	  el&eacute;rhet&#245;v&eacute; tenni az &oacute;r&aacute;k
	  egyeztet&eacute;s&eacute;t, de sem a szerver
	  &aacute;llapot&aacute;nak
	  m&oacute;dos&iacute;t&aacute;s&aacute;t nem
	  enged&eacute;lyezz&uuml;k, sem pedig azt, hogy a vele
	  egyenrang&uacute; szerverekkel szinkroniz&aacute;ljon, akkor
	  az im&eacute;nti helyett a</para>

	<programlisting>restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap</programlisting>

	<para>sort &iacute;rjuk bele, ahol a <hostid
	    role="ipaddr">192.168.1.0</hostid> a bels&#245;
	  h&aacute;l&oacute;zatunk IP-c&iacute;me &eacute;s a <hostid
	    role="netmask">255.255.255.0</hostid> a
	  hozz&aacute;tartoz&oacute; h&aacute;l&oacute;zati
	  maszk.</para>

	<para>Az <filename>/etc/ntp.conf</filename> t&ouml;bb
	  <literal>restrict</literal> t&iacute;pus&uacute;
	  be&aacute;ll&iacute;t&aacute;st is tartalmazhat.  Ennek
	  r&eacute;szleteir&#245;l az &man.ntp.conf.5; man oldalon, az
	  <literal>Access Control Support</literal> c&iacute;m&#251;
	  szakaszban olvashatunk.</para>

      </sect3>
    </sect2>

    <sect2>
      <title>Az NTP futtat&aacute;sa</title>

      <para>&Uacute;gy tudjuk az NTP szervert elind&iacute;tani a
	rendszer&uuml;nkkel egy&uuml;tt, ha az
	<filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyban
	szerepeltetj&uuml;k az <literal>ntpd_enable="YES"</literal>
	sort.  Ha az &man.ntpd.8; sz&aacute;m&aacute;ra tov&aacute;bbi
	be&aacute;ll&iacute;t&aacute;sokat is &aacute;t akarunk adni,
	akkor az <filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyban adjuk meg az
	<varname>ntpd_flags</varname> param&eacute;tert.</para>

      <para>Ha a g&eacute;p&uuml;nk &uacute;jraind&iacute;t&aacute;sa
	n&eacute;lk&uuml;l akarjuk elind&iacute;tani a szerver, akkor az
	<command>ntpd</command> parancsot adjuk ki az
	<filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyban a
	<varname>ntpd_flags</varname> v&aacute;ltoz&oacute;hoz megadott
	param&eacute;terekkel.  Mint p&eacute;ld&aacute;ul:</para>

      <screen>&prompt.root; <userinput>ntpd -p /var/run/ntpd.pid</userinput></screen>

    </sect2>

    <sect2>
      <title>Az ntpd haszn&aacute;lati id&#245;leges internet
	csatlakoz&aacute;ssal</title>

      <para>Az &man.ntpd.8; program megfelel&#245;
	m&#251;k&ouml;d&eacute;s&eacute;hez nem sz&uuml;ks&eacute;ges
	&aacute;lland&oacute; internet kapcsolat.  Ha azonban
	ig&eacute;ny szerinti t&aacute;rcs&aacute;z&aacute;ssal
	&eacute;p&iacute;tj&uuml;nk fel ideiglenes kapcsolatot, akkor
	&eacute;rdemes letiltani az NTP forgalm&aacute;t, nehogy
	feleslegesen aktiv&aacute;lja vagy tartsa &eacute;letben a
	vonalat.  Ha PPP t&iacute;pus&uacute; kapcsolatunk van, akkor az
	<filename>/etc/ppp/ppp.conf</filename> &aacute;llom&aacute;nyban
	a <literal>filter</literal> direkt&iacute;v&aacute;val tudjuk
	ezt leszab&aacute;lyozni.  P&eacute;ld&aacute;ul:</para>

      <programlisting> set filter dial 0 deny udp src eq 123
 # Nem engedj&uuml;k az NTP &aacute;ltal k&uuml;ld&ouml;tt adatoknak, hogy t&aacute;rcs&aacute;z&aacute;st
 # kezdem&eacute;nyezzenek:
 set filter dial 1 permit 0 0
 set filter alive 0 deny udp src eq 123
 # Nem engedj&uuml;k az NTP adatainak, hogy fenntarts&aacute;k a kapcsolatot:
 set filter alive 1 deny udp dst eq 123
 set filter alive 2 permit 0/0 0/0</programlisting>

      <para>Mindenezekr&#245;l r&eacute;szletesebb
	felvil&aacute;gos&iacute;t&aacute;st a &man.ppp.8; man oldal
	<literal>PACKET FILTERING</literal> c&iacute;m&#251;
	szakasz&aacute;ban &eacute;s a
	<filename>/usr/share/examples/ppp/</filename>
	k&ouml;nyvt&aacute;rban tal&aacute;lhat&oacute;
	p&eacute;ld&aacute;kban kaphatunk.</para>

      <note>
	<para>Egyes internet-szolg&aacute;ltat&oacute;k
	  blokkolj&aacute;k az alacsonyabb portokat, ez&aacute;ltal az
	  NTP nem haszn&aacute;lhat&oacute;, mivel a v&aacute;laszok nem
	  fogj&aacute;k el&eacute;rni a g&eacute;p&uuml;nket.</para>
      </note>
    </sect2>

    <sect2>
      <title>Tov&aacute;bbi olvasnival&oacute;k</title>

      <para>Az NTP szerver dokument&aacute;ci&oacute;ja HTML
	form&aacute;tumban a <filename>/usr/share/doc/ntp/</filename>
	k&ouml;nyvt&aacute;rban tal&aacute;lhat&oacute;.</para>
    </sect2>
  </sect1>

  <sect1 id="network-syslogd">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Tom</firstname>
	  <surname>Rhodes</surname>
	  <contrib>K&eacute;sz&iacute;tette: </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>T&aacute;voli g&eacute;pek napl&oacute;z&aacute;sa
      <command>syslogd</command> haszn&aacute;lat&aacute;val</title>

    <para>A rendszernapl&oacute;kkal kapcsolatos m&#251;veletek
      egyar&aacute;nt fontosak a biztons&aacute;g &eacute;s a
      karbantart&aacute;s szempontj&aacute;b&oacute;l.  Ha k&ouml;zepes
      vagy nagyobb m&eacute;ret&#251;, esetleg
      k&uuml;l&ouml;nb&ouml;z&#245; t&iacute;pus&uacute;
      h&aacute;l&oacute;zatokban adminisztr&aacute;lunk t&ouml;bb
      g&eacute;pet, akkor k&ouml;nnyen
      &aacute;tl&aacute;thatatlann&aacute; v&aacute;lhat a napl&oacute;k
      rendszeres fel&uuml;gyelete.  Ilyen helyzetekben a t&aacute;voli
      napl&oacute;z&aacute;s be&aacute;ll&iacute;t&aacute;s&aacute;val
      az eg&eacute;sz folyamatot sokkal k&eacute;nyelmesebb&eacute;
      tehetj&uuml;k.</para>

    <para>N&eacute;mileg k&eacute;pesek vagyunk enyh&iacute;teni a
      napl&oacute;&aacute;llom&aacute;nyok kezel&eacute;s&eacute;nek
      terh&eacute;t, ha egyetlen k&ouml;zponti szerverre
      k&uuml;ldj&uuml;k &aacute;t az adatokat.  Ekkor a &os;
      alaprendszer&eacute;ben megtal&aacute;lhat&oacute;
      alapeszk&ouml;z&ouml;kkel, mint p&eacute;ld&aacute;ul a
      &man.syslogd.8; vagy a &man.newsyslog.8;
      felhaszn&aacute;l&aacute;s&aacute;val egyetlen helyen be tudjuk
      &aacute;ll&iacute;tani a napl&oacute;k
      &ouml;sszegy&#251;jt&eacute;s&eacute;t,
      &ouml;sszef&eacute;s&uuml;l&eacute;s&eacute;t &eacute;s
      cser&eacute;j&eacute;t.  A most k&ouml;vetkez&#245; p&eacute;lda
      konfigur&aacute;ci&oacute;ban az <hostid>A</hostid> g&eacute;p, a
      <hostid role="fqdn">naploszerver.minta.com</hostid> fogja
      gy&#251;jteni a helyi h&aacute;l&oacute;zatr&oacute;l
      &eacute;rkez&#245; napl&oacute;inform&aacute;ci&oacute;kat.  A
      <hostid>B</hostid> g&eacute;p, a <hostid
	role="fqdn">naplokliens.minta.com</hostid> pedig a szervernek
      k&uuml;ldi a napl&oacute;zand&oacute; adatokat.  &Eacute;les
      k&ouml;rnyezetben mind a k&eacute;t g&eacute;pnek rendelkeznie
      kell megfelel&#245; <acronym>DNS</acronym> bejegyz&eacute;sekkel,
      vagy legal&aacute;bb szerepelni&uuml;k kell egym&aacute;s
      <filename>/etc/hosts</filename> &aacute;llom&aacute;nyaiban.  Ha
      ezt elmulasztjuk, a szerver nem lesz hajland&oacute; adatokat
      fogadni.</para>

    <sect2>
      <title>A napl&oacute;szerver
	be&aacute;ll&iacute;t&aacute;sa</title>

      <para>A napl&oacute;szerverek olyan g&eacute;pek, amelyeket
	&uacute;gy &aacute;ll&iacute;tottunk be, hogy
	napl&oacute;z&aacute;si inform&aacute;ci&oacute;kat tudjanak
	fogadni t&aacute;voli
	sz&aacute;m&iacute;t&oacute;g&eacute;pekr&#245;l.  A
	legt&ouml;bb esetben &iacute;gy egyszer&#251;s&iacute;teni
	tudunk a konfigur&aacute;ci&oacute;n, vagy olykor
	egyszer&#251;en csak hasznos, ha ezt a megold&aacute;st
	alkalmazzuk.  F&uuml;ggetlen&uuml;l att&oacute;l, hogy
	mi&eacute;rt haszn&aacute;ljuk, a
	tov&aacute;bbl&eacute;p&eacute;s el&#245;tt n&eacute;h&aacute;ny
	el&#245;k&eacute;sz&uuml;letet meg kell tenn&uuml;nk.</para>

      <para>Egy rendesen be&aacute;ll&iacute;tott napl&oacute;szervernek
	legal&aacute;bb a k&ouml;vetkez&#245; k&ouml;vetelm&eacute;nyeknek
	kell eleget tennie:</para>

      <itemizedlist>
	<listitem>
	  <para>az 514-es <acronym>UDP</acronym> portot
	    enged&eacute;lyezni kell mind a kliensen, mind pedig a
	    szerveren fut&oacute; t&#251;zfal
	    szab&aacute;lyrendszer&eacute;ben;</para>
	</listitem>

	<listitem>
	  <para>a &man.syslogd.8; k&eacute;pes legyen a t&aacute;voli
	    kliens g&eacute;pekr&#245;l &eacute;rkez&#245; &uuml;zeneteket
	    fogadni;</para>
	</listitem>

	<listitem>
	  <para>a &man.syslogd.8; szervernek &eacute;s az &ouml;sszes
	    kliensnek rendelkeznie kell &eacute;rv&eacute;nyes
	    <acronym>DNS</acronym> (k&ouml;zvetlen &eacute;s inverz)
	    bejegyz&eacute;sekkel vagy szerepelnie kell az
	    <filename>/etc/hosts</filename>
	    &aacute;llom&aacute;nyban.</para>
	</listitem>
      </itemizedlist>

      <para>A napl&oacute;szerver
	be&aacute;ll&iacute;t&aacute;s&aacute;hoz mindegyik klienst fel
	kell venn&uuml;nk az <filename>/etc/syslog.conf</filename>
	&aacute;llom&aacute;nyba, valamint meg kell adnunk a
	megfelel&#245; funkci&oacute;t (facility):</para>

      <programlisting>+naplokliens.minta.com
*.*     /var/log/naplokliens.log</programlisting>

      <note>
	<para>A &man.syslog.conf.5; man oldal&aacute;n
	  megtal&aacute;lhatjuk a k&uuml;l&ouml;nb&ouml;z&#245;
	  t&aacute;mogatott &eacute;s el&eacute;rhet&#245;
	  <emphasis>funkci&oacute;kat</emphasis>.</para>
      </note>

      <para>Miut&aacute;n be&aacute;ll&iacute;tottuk, az &ouml;sszes
	adott funkci&oacute;hoz tartoz&oacute; &uuml;zenet az el&#245;bb
	megadott &aacute;llom&aacute;nyba
	(<filename>/var/log/naplokliens.log</filename>) fog
	ker&uuml;lni.</para>

      <para>Befejez&eacute;sk&eacute;ppen hozzuk l&eacute;tre a
	napl&oacute;&aacute;llom&aacute;nyt.  Teljesen mindegy, hogy erre
	milyen megold&aacute;st alkalmazunk, p&eacute;ld&aacute;ul a
	&man.touch.1; remek&uuml;l megfelel:</para>

      <screen>&prompt.root; <userinput>touch /var/log/naplokliens.log</userinput></screen>

      <para>Ezut&aacute;n ind&iacute;tsuk &uacute;jra &eacute;s
	ellen&#245;rizz&uuml;k a <command>syslogd</command>
	d&eacute;mont:</para>

      <screen>&prompt.root; <userinput>/etc/rc.d/syslogd restart</userinput>
&prompt.root; <userinput>pgrep syslog</userinput></screen>

      <para>Ha v&aacute;laszul megkapjuk a fut&oacute; d&eacute;mon
	azonos&iacute;t&oacute;j&aacute;t, akkor siker&uuml;lt
	&uacute;jraind&iacute;tanunk, elkezdhetj&uuml;k a kliens
	be&aacute;ll&iacute;t&aacute;s&aacute;t.  Ha valami&eacute;rt
	nem indult volna &uacute;jra a szerver, az
	<filename>/var/log/messages</filename>
	&aacute;llom&aacute;nyb&oacute;l pr&oacute;b&aacute;ljuk meg
	kider&iacute;teni az ok&aacute;t.</para>
    </sect2>

    <sect2>
      <title>A napl&oacute;kliens
	be&aacute;ll&iacute;t&aacute;sa</title>

      <para>A napl&oacute;kliens az a g&eacute;p, amely egy helyi
	napl&oacute;p&eacute;ld&aacute;ny karbantart&aacute;sa mellett
	tov&aacute;bbk&uuml;ldni a napl&oacute;zand&oacute;
	inform&aacute;ci&oacute;kat egy napl&oacute;szervernek.</para>

      <para>Hasonl&oacute;an a napl&oacute;szerverekhez, a klienseknek
	is teljes&iacute;tenie bizonyos alapvet&#245;
	elv&aacute;r&aacute;sokat:</para>

      <itemizedlist>
	<listitem>
	  <para>a &man.syslogd.8; d&eacute;mon k&uuml;ldj&ouml;n
	    bizonyos t&iacute;pus&uacute; &uuml;zeneteket a
	    napl&oacute;szervernek, amely ezeket pedig k&eacute;pes
	    legyen fogadni;</para>
	</listitem>

	<listitem>
	  <para>a hozz&aacute;tartoz&oacute; t&#251;zfal engedje
	    &aacute;t a forgalmat az 514-es <acronym>UDP</acronym>
	    porton;</para>
	</listitem>

	<listitem>
	  <para>rendelkezzen mind k&ouml;zvetlen, mind pedig inverz
	    <acronym>DNS</acronym> bejegyz&eacute;ssel, vagy
	    szerepeljenek az <filename>/etc/hosts</filename>
	    &aacute;llom&aacute;nyban.</para>
	</listitem>
      </itemizedlist>

      <para>A kliens be&aacute;ll&iacute;t&aacute;sa sokkal
	egyszer&#251;bb a szerverhez k&eacute;pest.  A szerveren adjuk
	hozz&aacute; a k&ouml;vetkez&#245; sorokat az
	<filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyhoz:</para>

      <programlisting>syslogd_enabled="YES"
syslogd_flags="-a naplokliens.minta.com -vv"</programlisting>

      <para>Az els&#245; sorral enged&eacute;lyezz&uuml;k a
	<command>syslogd</command> elind&iacute;t&aacute;s&aacute;t a
	rendszerind&iacute;t&aacute;s sor&aacute;n, majd a
	m&aacute;sodik sorral enged&eacute;lyezz&uuml;k, hogy a kliens
	napl&oacute;zni tudjon a szerverre.  Itt m&eacute;g
	l&aacute;that&oacute; a <option>-vv</option> opci&oacute;,
	amellyel a napl&oacute;zott &uuml;zenetek
	r&eacute;szletess&eacute;g&eacute;t tudjuk n&ouml;velni.  Ennek
	nagyon fontos a szerepe a napl&oacute;z&aacute;si
	funkci&oacute;k behangol&aacute;sakor, mivel &iacute;gy a
	rendszergazd&aacute;k pontosan l&aacute;thatj&aacute;k milyen
	t&iacute;pus&uacute; &uuml;zenetek milyen funkci&oacute;val
	ker&uuml;ltek r&ouml;gz&iacute;t&eacute;sre a
	napl&oacute;ban.</para>

      <para>A funkci&oacute;k a rendszernek azon r&eacute;sz&eacute;t
	&iacute;rj&aacute;k le, amelyhez l&eacute;trej&ouml;n az adott
	&uuml;zenet.  Teh&aacute;t p&eacute;ld&aacute;ul az
	<literal>ftp</literal> &eacute;s <literal>ipfw</literal>
	egyar&aacute;nt ilyen funkci&oacute;k.  Amikor keletkezik egy
	napl&oacute;&uuml;zenet valamelyik&uuml;kh&ouml;z,
	&aacute;ltal&aacute;ban megjelenik a nev&uuml;k.  A
	funkci&oacute;khoz tartozik m&eacute;g egy priorit&aacute;s vagy
	szint is, amellyel az adott &uuml;zenet
	fontoss&aacute;g&aacute;t jelzik.  Ezek k&ouml;z&uuml;l a
	leggyakoribb a <literal>warning</literal> (mint
	<quote>figyelmeztet&eacute;s</quote>) &eacute;s
	<literal>info</literal> (mint
	<quote>inform&aacute;ci&oacute;</quote>).  A
	haszn&aacute;lhat&oacute; funkci&oacute;k &eacute;s a
	hozz&aacute;juk tartoz&oacute; priorit&aacute;sok teljes
	list&aacute;j&aacute;t a &man.syslog.3; man oldal&aacute;n
	olvashatjuk.</para>

      <para>A napl&oacute;szervert meg kell adnunk a kliens
	<filename>/etc/syslog.conf</filename>
	&aacute;llom&aacute;ny&aacute;ban.  Itt a <literal>@</literal>
	szimb&oacute;lummal jelezz&uuml;k, hogy az adatokat egy
	t&aacute;voli szerverre szeretn&eacute;nk
	tov&aacute;bbk&uuml;ldeni, valahogy &iacute;gy:</para>

      <programlisting>*.*               @naploszerver.minta.com</programlisting>

      <para>Ezut&aacute;n a be&aacute;ll&iacute;t&aacute;s
	&eacute;rv&eacute;nyes&iacute;t&eacute;s&eacute;hez &uacute;jra
	kell ind&iacute;tanunk a <command>syslogd</command>
	d&eacute;mont:</para>

      <screen>&prompt.root; <userinput>/etc/rc.d/syslogd restart</userinput></screen>

      <para>A &man.logger.1; haszn&aacute;lat&aacute;val
	pr&oacute;b&aacute;ljuk ki a napl&oacute;&uuml;zenetek
	h&aacute;l&oacute;zaton kereszt&uuml;li
	k&uuml;ld&eacute;s&eacute;t, &eacute;s k&uuml;ldj&uuml;nk
	valamit a <command>syslogd</command> d&eacute;monnak:</para>

      <screen>&prompt.root; <userinput>logger "Udvozlet a naplokliensrol"</userinput></screen>

      <para>A parancs kiad&aacute;sa ut&aacute;n az &uuml;zenetnek mind
	a kliens, mind pedig a szerver
	<filename>/var/log/messages</filename>
	&aacute;llom&aacute;ny&aacute;ban meg kell jelennie.</para>
    </sect2>

    <sect2>
      <title>Hibakeres&eacute;s</title>

      <para>El&#245;fordulhat, hogy a napl&oacute;szerver
	valami&eacute;rt nem kapja meg rendesen az &uuml;zeneteket,
	ez&eacute;rt valamilyen m&oacute;don meg kell keresn&uuml;nk a
	hiba ok&aacute;t.  Ez t&ouml;bb minden lehet, de
	&aacute;ltal&aacute;ban k&eacute;t leggyakoribb ok valamilyen
	h&aacute;l&oacute;zati kapcsol&oacute;d&aacute;si vagy
	<acronym>DNS</acronym> be&aacute;ll&iacute;t&aacute;si hiba.
	Ezek tesztel&eacute;s&eacute;hez gondoskodjunk r&oacute;la, hogy
	a g&eacute;pek k&ouml;lcs&ouml;n&ouml;sen el&eacute;rhet&#245;ek
	egym&aacute;sr&oacute;l az <filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyban megadott h&aacute;l&oacute;zati
	nev&uuml;k szerint.  Ha ezzel l&aacute;tsz&oacute;lag minden
	rendben van, akkor pr&oacute;b&aacute;ljuk meg
	m&oacute;dos&iacute;tani a <literal>syslogd_flags</literal>
	&eacute;rt&eacute;k&eacute;t az
	<filename>/etc/rc.conf</filename>
	&aacute;llom&aacute;nyban.</para>

      <para>A most k&ouml;vetkez&#245; p&eacute;ld&aacute;ban a
	<filename>/var/log/naplokliens.log</filename> teljesen
	&uuml;res, illetve a <filename>/var/log/messages</filename>
	&aacute;llom&aacute;ny semmilyen hib&aacute;ra utal&oacute; okot
	nem tartalmaz.  A hibakeres&eacute;shez m&eacute;g t&ouml;bb
	inform&aacute;ci&oacute;t a <literal>syslogd_flags</literal>
	&aacute;t&iacute;r&aacute;s&aacute;val tudunk
	k&eacute;rni:</para>

      <programlisting>syslogd_flags="-d -a naploklien.minta.com -vv"</programlisting>

      <para>Term&eacute;szetesen ne felejts&uuml;k el
	&uacute;jraind&iacute;tani a szervert:</para>

      <screen>&prompt.root; <userinput>/etc/rc.d/syslogd restart</userinput></screen>

      <para>A d&eacute;mon &uacute;jraind&iacute;t&aacute;sa ut&aacute;n
	k&ouml;zvetlen&uuml;l az al&aacute;bbiakhoz hasonl&oacute;
	&uuml;zenetek &aacute;rasztj&aacute;k el a
	k&eacute;perny&#245;t:</para>

      <screen>logmsg: pri 56, flags 4, from naploszerver.minta.com, msg syslogd: restart
syslogd: restarted
logmsg: pri 6, flags 4, from naploszerver.minta.com, msg syslogd: kernel boot file is /boot/kernel/kernel
Logging to FILE /var/log/messages
syslogd: kernel boot file is /boot/kernel/kernel
cvthname(192.168.1.10)
validate: dgram from IP 192.168.1.10, port 514, name naplokliens.minta.com;
rejected in rule 0 due to name mismatch.</screen>

      <para>A diagnosztikai &uuml;zeneteket v&eacute;gigolvasva
	nyilv&aacute;nval&oacute; v&aacute;lik, hogy az&eacute;rt dobja el
	az &uuml;zeneteket a szerver, mert nem megfelel&#245; a
	g&eacute;p neve.  Miut&aacute;n &aacute;tn&eacute;zz&uuml;k a
	be&aacute;ll&iacute;t&aacute;sainkat, felfedezhet&uuml;nk az
	<filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyban egy
	apr&oacute; hib&aacute;t:</para>

      <programlisting>syslogd_flags="-d -a naploklien.minta.com -vv"</programlisting>

      <para>L&aacute;thatjuk, hogy ebben a sorban a
	<literal>naplokliens</literal> n&eacute;vnek kellene szerepelni,
	nem pedig a <literal>naploklien</literal> n&eacute;vnek.
	Miut&aacute;n elv&eacute;gezt&uuml;k a sz&uuml;ks&eacute;ges
	jav&iacute;t&aacute;sokat, ind&iacute;tsuk &uacute;jra a
	szervert &eacute;s vizsg&aacute;ljuk meg az
	eredm&eacute;nyt:</para>

      <screen>&prompt.root; <userinput>/etc/rc.d/syslogd restart</userinput>
logmsg: pri 56, flags 4, from naploszerver.minta.com, msg syslogd: restart
syslogd: restarted
logmsg: pri 6, flags 4, from naploszerver.minta.com, msg syslogd: kernel boot file is /boot/kernel/kernel
syslogd: kernel boot file is /boot/kernel/kernel
logmsg: pri 166, flags 17, from naploszerver.minta.com, msg Dec 10 20:55:02 &lt;syslog.err&gt; naploszerver.minta.com syslogd: exiting on signal 2
cvthname(192.168.1.10)
validate: dgram from IP 192.168.1.10, port 514, name naplokliens.minta.com;
accepted in rule 0.
logmsg: pri 15, flags 0, from naplokliens.minta.com, msg Dec 11 02:01:28 pgj: Masodik teszt uzenet
Logging to FILE /var/log/naplokliens.log
Logging to FILE /var/log/messages</screen>

      <para>Itt m&aacute;r minden &uuml;zenet rendben meg&eacute;rkezett
	&eacute;s a megfelel&#245; &aacute;llom&aacute;nyba
	ker&uuml;lt.</para>
    </sect2>

    <sect2>
      <title>Biztons&aacute;gi megfontol&aacute;sok</title>

      <para>Mint minden h&aacute;l&oacute;zati
	szolg&aacute;ltat&aacute;s eset&eacute;n, ilyenkor is figyelembe
	kell venn&uuml;nk bizonyos biztons&aacute;gi
	megfontol&aacute;sokat a t&eacute;nyleges
	konfigur&aacute;ci&oacute; ki&eacute;p&iacute;t&eacute;se
	el&#245;tt.  Olykor el&#245;fordulhat, hogy a napl&oacute;k
	k&uuml;l&ouml;nb&ouml;z&#245; k&eacute;nyes
	inform&aacute;ci&oacute;kat tartalmaznak, mint
	p&eacute;ld&aacute;ul a helyi rendszeren fut&oacute;
	szolg&aacute;ltat&aacute;sok nevei, felhaszn&aacute;l&oacute;i
	nevek vagy egy&eacute;b konfigur&aacute;ci&oacute;s adatok.  A
	kliens &eacute;s a szerver k&ouml;z&ouml;tt
	h&aacute;l&oacute;zaton utaz&oacute; adatok viszont se nem
	titkos&iacute;tottak, se nem jelsz&oacute;val v&eacute;dettek.
	Ha titkos&iacute;t&aacute;st szeretn&eacute;nk haszn&aacute;lni,
	akkor javasoljuk p&eacute;ld&aacute;ul a <filename
	  role="package">security/stunnel</filename> portot, amellyel egy
	titkos&iacute;tott tunnelen kereszt&uuml;l tudunk adatokat
	k&uuml;ldeni a h&aacute;l&oacute;zaton.</para>

      <para>A helyi rendszer biztons&aacute;g&aacute;nak
	szavatol&aacute;sa is fontos lehet.  A napl&oacute;k sem a
	haszn&aacute;lat sor&aacute;n, sem pedig a
	lecser&eacute;l&eacute;s&uuml;k ut&aacute;n nem ker&uuml;lnek
	titkos&iacute;t&aacute;sra.  Emiatt a helyi rendszerhez
	hozz&aacute;f&eacute;r&#245; felhaszn&aacute;l&oacute;k
	kedv&uuml;kre nyerhetnek ki bel&#245;l&uuml;k a
	rendszer&uuml;nket &eacute;rint&#245;
	konfigur&aacute;ci&oacute;s inform&aacute;ci&oacute;kat.
	Ez&eacute;rt ilyenkor nagyon fontos, hogy mindig a
	megfelel&#245; enged&eacute;lyeket &aacute;ll&iacute;tsuk be a
	napl&oacute;kra.  A &man.newsyslog.8; seg&eacute;dprogrammal be
	tudjuk &aacute;ll&iacute;tani a frissen l&eacute;trehozott
	&eacute;s a lecser&eacute;lt napl&oacute;k enged&eacute;lyeit.
	Teh&aacute;t k&ouml;nnyen megakad&aacute;lyozhatjuk a helyi
	felhaszn&aacute;l&oacute;k
	k&iacute;v&aacute;ncsiskod&aacute;s&aacute;t, ha itt a
	napl&oacute;k enged&eacute;lyeit p&eacute;ld&aacute;ul a
	<literal>600</literal> k&oacute;ddal adjuk meg.</para>
    </sect2>
  </sect1>
</chapter>

<!--
     Local Variables:
     mode: sgml
     sgml-declaration: "../chapter.decl"
     sgml-indent-data: t
     sgml-omittag: nil
     sgml-always-quote-attributes: t
     sgml-parent-document: ("../book.sgml" "part" "chapter")
     End:
-->
<!--  LocalWords:  config mnt www -->
