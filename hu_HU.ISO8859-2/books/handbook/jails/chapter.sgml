<!--
    The FreeBSD Documentation Project

    $FreeBSD$
-->
<!--
    The FreeBSD Hungarian Documentation Project
    Translated by: PALI, Gabor <pgj@FreeBSD.org>
    %SOURCE%	en_US.ISO8859-1/books/handbook/jails/chapter.sgml
    %SRCID%	1.21
-->

<chapter id="jails" lang="hu">
  <chapterinfo>
    <authorgroup>
      <author>
	<firstname>Matteo</firstname>
	<surname>Riondato</surname>
	<contrib>&Iacute;rta: </contrib>
      </author>
    </authorgroup>
  </chapterinfo>

  <title>A jail alrendszer</title>

  <indexterm><primary>jail</primary></indexterm>

  <sect1 id="jails-synopsis">
    <title>&Aacute;ttekint&eacute;s</title>

    <para>Ez a fejezet a &os;-ben tal&aacute;lhat&oacute; jail
      alrendszert, valamint annak haszn&aacute;lat&aacute;t mutatja be
      k&ouml;zelebbr&#245;l.  Az jail, melyet gyakran csak &uacute;gy
      emlegetnek, mint a <emphasis>chroot k&ouml;rnyezetek</emphasis>
      tov&aacute;bbfejleszt&eacute;s&eacute;t, a rendszergazd&aacute;k
      sz&aacute;m&aacute;ra aj&aacute;nlott, nagyon sokoldal&uacute;
      eszk&ouml;z, de a halad&oacute; felhaszn&aacute;l&oacute;k is
      hasznosnak tal&aacute;lhatj&aacute;k.</para>

    <para>A fejezet elolvas&aacute;sa sor&aacute;n
      megismerj&uuml;k:</para>

    <itemizedlist>
      <listitem>
	<para>mi is az a jail, milyen c&eacute;lra
	  haszn&aacute;lhat&oacute; a &os;-ben;</para>
      </listitem>

      <listitem>
	<para>hogyan hozzunk l&eacute;tre, ind&iacute;tsunk el &eacute;s
	  &aacute;ll&iacute;tsunk le jaileket;</para>
      </listitem>

      <listitem>
	<para>a l&eacute;trehozott jailek karbantart&aacute;sainak
	  alapjait, a jailek bel&uuml;lr&#245;l &eacute;s
	  k&iacute;v&uuml;lr&#245;l egyar&aacute;nt.</para>
      </listitem>
    </itemizedlist>

    <para>A jail alrendszerr&#245;l m&eacute;g t&ouml;bb hasznos
      inform&aacute;ci&oacute;t a k&ouml;vetkez&#245; helyekr&#245;l
      tudhatunk meg:</para>

    <itemizedlist>
      <listitem>
	<para>A &man.jail.8; man oldal.  Ez tartalmazza a
	  <command>jail</command> seg&eacute;dprogram teljes
	  referenci&aacute;j&aacute;t &mdash; ez az a
	  karbantart&aacute;sra haszn&aacute;lhat&oacute; eszk&ouml;z,
	  amellyel el tudjuk ind&iacute;tani, le tudjuk
	  &aacute;ll&iacute;tani &eacute;s vez&eacute;relni tudjuk a
	  jaileket a &os;-ben.</para>
      </listitem>

      <listitem>
	<para>A levelez&eacute;si list&aacute;k &eacute;s azok
	  arch&iacute;vumai.  A &a.questions; arch&iacute;vuma &eacute;s
	  a &a.mailman.lists;en tal&aacute;lhat&oacute; t&ouml;bbi
	  levelez&eacute;si lista rengeteg olvasnival&oacute;t tartogat
	  a jailekkel kapcsolatban.  Mindig &eacute;rdemes keresni
	  ezekben az arch&iacute;vumokban, vagy bek&uuml;ldeni a
	  k&eacute;rd&eacute;s&uuml;nket a &a.questions.name;
	  levelez&eacute;si list&aacute;ra.</para>
      </listitem>
    </itemizedlist>

  </sect1>

  <sect1 id="jails-terms">
    <title>A jail alrendszerhez kapcsol&oacute;d&oacute;
      fogalmak</title>

    <para>A fejezet tov&aacute;bbi r&eacute;sz&eacute;ben a
      k&ouml;vetkez&#245; fogalmakat fogjuk haszn&aacute;lni, hogy a
      &os; jailekhez tartoz&oacute; egyes r&eacute;szeit &eacute;s azok
      bels&#245; m&#251;k&ouml;d&eacute;s&eacute;t, valamint
      kapcsolatukat a rendszer t&ouml;bbi r&eacute;sz&eacute;vel
      m&eacute;g ink&aacute;bb &eacute;rthet&#245;v&eacute;
      tegy&uuml;k:</para>

    <variablelist>
      <varlistentry>
	<term>&man.chroot.8; (parancs)</term>
	<listitem>
	  <para>Egy seg&eacute;dprogram, amely a &os; &man.chroot.2;
	    rendszerh&iacute;v&aacute;s&aacute;n kereszt&uuml;l egy
	    program &eacute;s annak lesz&aacute;rmazottjainak
	    futtat&aacute;s&aacute;hoz megv&aacute;ltoztatja a rendszer
	    gy&ouml;k&eacute;rk&ouml;nyvt&aacute;r&aacute;t (change
	    root).</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>&man.chroot.2; (k&ouml;rnyezet)</term>
	<listitem>
	  <para>A <quote>chroot</quote> m&oacute;dban fut&oacute;
	    programok k&ouml;rnyezete.  Olyan er&#245;forr&aacute;sokat
	    foglal mag&aacute;ban, mint mondjuk az
	    &aacute;llom&aacute;nyrendszer l&aacute;that&oacute;
	    r&eacute;sze, az el&eacute;rhet&#245;
	    felhaszn&aacute;l&oacute;i &eacute;s csoport
	    azonos&iacute;t&oacute;k, h&aacute;l&oacute;zati
	    csatol&oacute;k &eacute;s egy&eacute;b folyamatok k&ouml;zti
	    kommunik&aacute;ci&oacute;s mechanizmusok stb.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>&man.jail.8; (parancs)</term>
	<listitem>
	  <para>Az a rendszerkarbantart&oacute; seg&eacute;dprogram,
	    amely lehet&#245;v&eacute; teszi program
	    elind&iacute;t&aacute;s&aacute;t elz&aacute;rt
	    k&ouml;rnyezetben.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>befogad&oacute; (rendszer, program,
	  felhaszn&aacute;l&oacute; stb.)</term>
	<listitem>
	  <para>Az elz&aacute;rt k&ouml;rnyezetet
	    ir&aacute;ny&iacute;t&oacute; rendszer.  A befogad&oacute;
	    rendszer hozz&aacute; tud f&eacute;rni az &ouml;sszes
	    el&eacute;rhet&#245; hardveres er&#245;forr&aacute;shoz,
	    k&eacute;pes az elz&aacute;rt k&ouml;rnyezeten
	    k&iacute;v&uuml;l &eacute;s bel&uuml;l fut&oacute;
	    programokat vez&eacute;relni.  Az egyik legfontosabb
	    k&uuml;l&ouml;nbs&eacute;g a befogad&oacute; &eacute;s az
	    elz&aacute;rt rendszer k&ouml;z&ouml;tt, hogy azok a
	    korl&aacute;toz&aacute;sok, amelyek az elz&aacute;rt
	    k&ouml;rnyezetben rendszeradminisztr&aacute;tori jogokkal
	    fut&oacute; programokra vonatkoznak, nem
	    felt&eacute;tlen&uuml;l &eacute;rv&eacute;nyesek a
	    befogad&oacute; rendszerben fut&oacute;akra.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>befogadott (rendszer, program, felhaszn&aacute;l&oacute;
	  stb.)</term>
	<listitem>
	  <para>Olyan program, felhaszn&aacute;l&oacute; vagy m&aacute;s
	    egy&eacute;b egyed, amely csak egy jailen kereszt&uuml;l,
	    korl&aacute;tozottan tud hozz&aacute;f&eacute;rni az
	    er&#245;forr&aacute;sokhoz.</para>
	</listitem>
      </varlistentry>
    </variablelist>

  </sect1>

  <sect1 id="jails-intro">
    <title>Bevezet&eacute;s</title>

    <para>Mivel a rendszeradminisztr&aacute;ci&oacute; egy neh&eacute;z
      &eacute;s zavarba ejt&#245; feladat, rengeteg komoly eszk&ouml;z
      j&ouml;tt l&eacute;tre a rendszergazd&aacute;k
      &eacute;let&eacute;nek megk&ouml;nny&iacute;t&eacute;s&eacute;re.
      Ezek az eszk&ouml;z&ouml;k t&ouml;bbnyire a rendszerek
      telep&iacute;t&eacute;s&eacute;t,
      be&aacute;ll&iacute;t&aacute;s&aacute;t &eacute;s
      karbantart&aacute;s&aacute;t igyekeznek valamilyen m&oacute;don
      jobb&aacute; tenni.  A rendszergazd&aacute;k egyik feladata
      &uacute;gy gondoskodni a biztons&aacute;gr&oacute;l, hogy
      k&ouml;zben a rendszer k&eacute;pes legyen ell&aacute;tni eredeti
      feladat&aacute;t.</para>

    <para>A &os; rendszerek biztons&aacute;goss&aacute;g&aacute;nak
      n&ouml;vel&eacute;s&eacute;t hivatott egyik ilyen eszk&ouml;z a
      <emphasis>jails</emphasis>.  El&#245;sz&ouml;r a &os;&nbsp;4.X
      verzi&oacute;j&aacute;ban bukkant fel, de jelent&#245;s
      fejl&#245;d&eacute;sen ment kereszt&uuml;l a &os;&nbsp;5.X
      verzi&oacute;kban, aminek k&ouml;sz&ouml;nhet&#245;en sokkal
      er&#245;teljesebb &eacute;s rugalmasabb alrendszerr&eacute;
      v&aacute;lt.  A fejleszt&eacute;se term&eacute;szetesen most is
      folytat&oacute;dik tov&aacute;bb, &aacute;lland&oacute;an
      fejl&#245;dik a haszn&aacute;lhat&oacute;s&aacute;ga,
      teljes&iacute;tm&eacute;nye, megb&iacute;zhat&oacute;s&aacute;ga
      &eacute;s biztons&aacute;goss&aacute;ga.</para>

    <sect2 id="jails-what">
      <title>Mi is az a jail?</title>

      <para>A BSD-szer&#251; oper&aacute;ci&oacute;s rendszerekben
	m&aacute;r a 4.2BSD &oacute;ta megtal&aacute;lhat&oacute; volt a
	&man.chroot.2;.  A &man.chroot.8; seg&eacute;dprogrammal meg
	tudjuk megv&aacute;ltoztatni adott programok
	sz&aacute;m&aacute;ra a
	gy&ouml;k&eacute;rk&ouml;nyvt&aacute;rat, &eacute;s ezzel egy
	biztons&aacute;gos k&ouml;rnyezetet teremteni, t&aacute;vol a
	rendszer t&ouml;bbi r&eacute;sz&eacute;t&#245;l.  A chroot-tal
	kialak&iacute;tott k&ouml;rnyezetben elindul&oacute; programok
	nem tudnak hozz&aacute;f&eacute;rni a rajta k&iacute;v&uuml;l
	tal&aacute;lhat&oacute; &aacute;llom&aacute;nyokhoz &eacute;s
	er&#245;forr&aacute;sokhoz.  Ennek ok&aacute;n, ha egy ilyen
	k&ouml;rnyezetben fut&oacute; szolg&aacute;ltat&aacute;st
	megt&aacute;madnak, az &ouml;nmag&aacute;ban m&eacute;g nem
	teszi lehet&#245;v&eacute; a t&aacute;mad&oacute;
	sz&aacute;m&aacute;ra, hogy el&eacute;rhesse az eg&eacute;sz
	rendszert.  A &man.chroot.8; remek&uuml;l
	haszn&aacute;lhat&oacute; olyan egyszer&#251;bb feladatok
	megold&aacute;s&aacute;ra, amelyek nem ig&eacute;nyelnek
	t&uacute;ls&aacute;gosan sok rugalmass&aacute;got vagy bonyolult
	&eacute;s fejlett t&aacute;mogat&aacute;st.  A chroot
	&ouml;tlet&eacute;nek felmer&uuml;l&eacute;se &oacute;ta azonban
	sz&aacute;mos kiskaput tal&aacute;ltak m&aacute;r az
	&aacute;ltala l&eacute;trehozott k&ouml;rnyezetekben, &eacute;s
	hab&aacute;r ezek mindegyik&eacute;t jav&iacute;tott&aacute;k a
	&os; &uacute;jabb v&aacute;ltozataiban, teljesen
	egy&eacute;rtelm&#251;v&eacute; v&aacute;lt, hogy a
	&man.chroot.2; nem biztos&iacute;t j&aacute;rhat&oacute; utat a
	szolg&aacute;ltat&aacute;sok biztons&aacute;goss&aacute;
	t&eacute;tel&eacute;hez.  Erre a feladatra egy &uacute;j
	alrendszert kellett ki&eacute;p&iacute;teni.</para>

      <para>Ez az egyik oka annak, ami&eacute;rt az
	<emphasis>jaileket</emphasis> kifejlesztett&eacute;k.</para>

      <para>A jailek &aacute;ltal k&eacute;pviselt elz&aacute;r&aacute;s
	&ouml;tlete t&ouml;bb szempontb&oacute;l is a hagyom&aacute;nyos
	&man.chroot.2; k&ouml;rnyezet elv&eacute;n alapszik.  Egy
	hagyom&aacute;nyos &man.chroot.2; k&ouml;rnyezetben fut&oacute;
	programok korl&aacute;toz&aacute;sa csup&aacute;n abban
	mer&uuml;l ki, hogy az &aacute;llom&aacute;nyrendszer melyik
	r&eacute;sz&eacute;t l&aacute;thatj&aacute;k.  A rendszer
	t&ouml;bbi er&#245;forr&aacute;sa (mint mondjuk a
	felhaszn&aacute;l&oacute;k, fut&oacute; programok vagy a
	h&aacute;l&oacute;zati alrendszer) azonban tov&aacute;bbra is
	megosztva marad a chroot k&ouml;rnyezetben &eacute;s a
	befogad&oacute; rendszerben fut&oacute; programok
	k&ouml;z&ouml;tt.  A jailek &aacute;ltal alkalmazott
	megold&aacute;s kib&#245;v&iacute;ti ezt a modellt, &eacute;s
	nem csak az &aacute;llom&aacute;nyrendszerre vonatkoz&oacute;
	hozz&aacute;f&eacute;r&eacute;st virtualiz&aacute;lja, hanem
	t&ouml;bb m&aacute;s dolog mellett kiterjeszti ezt a
	felhaszn&aacute;l&oacute;kra &eacute;s a &os;
	h&aacute;l&oacute;zati alrendszer&eacute;re is.  Az
	elz&aacute;rt k&ouml;rnyezetek
	be&aacute;ll&iacute;t&aacute;saihoz el&eacute;rhet&#245;
	finomhangol&aacute;si lehet&#245;s&eacute;gekr&#245;l
	b&#245;vebben a <xref linkend="jails-tuning">ban esik
	sz&oacute;.</para>

      <para>A jaileket az al&aacute;bb n&eacute;gy elem &iacute;rja
	le:</para>

      <itemizedlist>
	<listitem>
	  <para>A k&ouml;nyvt&aacute;rszerkezet egy
	    r&eacute;szf&aacute;ja &mdash; att&oacute;l a
	    r&eacute;szt&#245;l indulva, ahonnan a jail kezd&#245;dik.
	    A jailen bel&uuml;l fut&oacute; programok nem
	    l&eacute;phetnek ki ebb&#245;l a
	    r&eacute;szf&aacute;b&oacute;l.  Az eredeti &man.chroot.2;
	    kialak&iacute;t&aacute;s&aacute;ban mereng&#245;
	    biztons&aacute;gi hib&aacute;k lehet&#245;s&eacute;gei nem
	    vesz&eacute;lyeztetik a t&ouml;bbi &os; jailt.</para>
	</listitem>

	<listitem>
	  <para>A rendszer neve &mdash; a n&eacute;v, amelyet a jailen
	    bel&uuml;l haszn&aacute;lunk.  Mivel a jaileket
	    els&#245;sorban h&aacute;l&oacute;zati
	    szolg&aacute;ltat&aacute;sok kord&aacute;ban
	    tart&aacute;s&aacute;ra haszn&aacute;ljuk, a jailekhez
	    tartoz&oacute; besz&eacute;des rendszernevek sokat tudnak
	    seg&iacute;teni a rendszergazd&aacute;k
	    munk&aacute;j&aacute;ban.</para>
	</listitem>

	<listitem>
	  <para>Egy <acronym>IP</acronym>-c&iacute;m &mdash; a jailhez
	    tartozik &eacute;s nem v&aacute;ltoztathat&oacute; meg a
	    m&#251;k&ouml;d&eacute;se sor&aacute;n.  Egy jail
	    IP-c&iacute;me &aacute;ltal&aacute;ban egy m&aacute;r
	    l&eacute;tez&#245; h&aacute;l&oacute;zati csatol&oacute;
	    m&aacute;sik c&iacute;me, de ez nem
	    sz&uuml;ks&eacute;gszer&#251;en igaz minden esetben.</para>
	</listitem>

	<listitem>
	  <para>Egy parancs &mdash; annak a programnak az
	    el&eacute;r&eacute;si &uacute;tja, amelyet elz&aacute;rtan
	    k&iacute;v&aacute;nunk futtatni.  Az elz&aacute;rt
	    k&ouml;rnyezet gy&ouml;ker&eacute;t&#245;l m&eacute;rve
	    relat&iacute;van adjuk meg, &eacute;s az adott
	    k&ouml;rnyezet t&iacute;pus&aacute;t&oacute;l
	    f&uuml;gg&#245;en elt&eacute;r&#245; lehet.</para>
	</listitem>
      </itemizedlist>

      <para>Ezekt&#245;l eltekintve a jailek rendelkezhetnek
	saj&aacute;t felhaszn&aacute;l&oacute;kkal &eacute;s lehetnek
	saj&aacute;t <username>root</username>
	felhaszn&aacute;l&oacute;ik is.  Term&eacute;szetesen a
	<username>root</username> hat&aacute;sk&ouml;re csak az
	elz&aacute;rt k&ouml;rnyezetre korl&aacute;toz&oacute;dik,
	&eacute;s a befogad&oacute; rendszer
	szemsz&ouml;g&eacute;b&#245;l az elz&aacute;rt
	<username>root</username> nem mindenhat&oacute;.
	R&aacute;ad&aacute;sul az elz&aacute;rt
	<username>root</username> felhaszn&aacute;l&oacute; nem hajthat
	v&eacute;gre semmilyen kritikus m&#251;veletet a saj&aacute;t
	&man.jail.8; k&ouml;rnyezet&eacute;n k&iacute;v&uuml;l.  A
	<username>root</username> tov&aacute;bbi
	k&eacute;pess&eacute;geir&#245;l &eacute;s
	korl&aacute;toz&aacute;sair&oacute;l lentiekben b&#245;vebben is
	eml&iacute;t&eacute;st tesz&uuml;nk a <xref
	linkend="jails-tuning">ban.</para>

    </sect2>
  </sect1>

  <sect1 id="jails-build">
    <title>A jailek l&eacute;trehoz&aacute;sa &eacute;s
      vez&eacute;rl&eacute;se</title>

    <para>Egyes rendszergazd&aacute;k a jaileket a k&ouml;vetkez&#245;
      k&eacute;t t&iacute;pusba sorolj&aacute;k: <quote>teljes</quote>
      jail, mely egy val&oacute;di &os; rendszerre eml&eacute;keztet,
      &eacute;s a <quote>szolg&aacute;ltat&aacute;s</quote> jail, mely
      egyetlen, feltehet&#245;en kiemelt jogokkal fut&oacute;
      alkalmaz&aacute;s vagy szolg&aacute;ltat&aacute;s
      sz&aacute;m&aacute;ra van el&#245;k&eacute;sz&iacute;tve.  Ez a
      besorol&aacute;s csup&aacute;n fogalmi szint&#251;, a jail
      fel&eacute;p&iacute;t&eacute;s&eacute;nek m&oacute;dj&aacute;t nem
      befoly&aacute;solja.  A &man.jail.8; man oldal r&eacute;szletesen
      ismerteti a jailek l&eacute;trehoz&aacute;s&aacute;t:</para>

    <screen>&prompt.root; <userinput>setenv D <replaceable>/itt/lesz/a/jail</replaceable></userinput>
&prompt.root; <userinput>mkdir -p $D</userinput> <co id="jailpath">
&prompt.root; <userinput>cd /usr/src</userinput>
&prompt.root; <userinput>make buildworld</userinput> <co id="jailbuildworld">
&prompt.root; <userinput>make installworld DESTDIR=$D</userinput> <co id="jailinstallworld">
&prompt.root; <userinput>make distribution DESTDIR=$D</userinput> <co id="jaildistrib">
&prompt.root; <userinput>mount -t devfs devfs $D/dev</userinput> <co id="jaildevfs"></screen>

    <calloutlist>
      <callout arearefs="jailpath">
	<para>&Eacute;rdemes el&#245;sz&ouml;r a jail hely&eacute;t
	  megv&aacute;lasztani.  Itt fog fizikailag helyet foglalni a
	  befogad&oacute; rendszer
	  &aacute;llom&aacute;nyrendszer&eacute;n bel&uuml;l a jail.
	  J&oacute; v&aacute;laszt&aacute;s lehet erre a <filename
	    class="directory">/usr/jail/<replaceable>jailn&eacute;v</replaceable></filename>,
	  ahol a <replaceable>jailn&eacute;v</replaceable> a jailt
	  azonos&iacute;t&oacute; rendszern&eacute;v.  A <filename
	    class="directory">/usr/</filename>
	  &aacute;llom&aacute;nyrendszeren &aacute;ltal&aacute;ban
	  elegend&#245; hely jut a jail
	  &aacute;llom&aacute;nyrendszer&eacute;nek, ami egy
	  <quote>teljes</quote> jail eset&eacute;n
	  l&eacute;nyeg&eacute;ben a &os; alaprendszer
	  alap&eacute;rtelmezett telep&iacute;t&eacute;s&eacute;ben
	  megtal&aacute;lhat&oacute; &ouml;sszes &aacute;llom&aacute;ny
	  m&aacute;solat&aacute;t tartalmazza.</para>
      </callout>

      <callout arearefs="jailbuildworld">
	<para>Ha kor&aacute;bban m&aacute;r a <command>make
	  world</command> vagy a <command>make buildworld</command>
	  parancs seg&iacute;ts&eacute;g&eacute;vel
	  &uacute;jraford&iacute;tottuk az alaprendszert, akkor ezt a
	  l&eacute;p&eacute;st ki is hagyhatjuk &eacute;s
	  telep&iacute;ts&uuml;k az &uacute;j alaprendszert
	  k&ouml;zvetlen&uuml;l az &uacute;j jailbe.</para>
      </callout>

      <callout arearefs="jailinstallworld">
	<para>Ez a parancs fogja felm&aacute;solni a jail fizikai
	  hely&eacute;nek v&aacute;lasztott
	  k&ouml;nyvt&aacute;r-r&eacute;szf&aacute;ba a
	  m&#251;k&ouml;d&eacute;shez sz&uuml;ks&eacute;ges programokat,
	  f&uuml;ggv&eacute;nyk&ouml;nyvt&aacute;rakat, man oldalakat
	  &eacute;s &iacute;gy tov&aacute;bb.</para>
      </callout>

      <callout arearefs="jaildistrib">
	<para>A <application>make</application>
	  param&eacute;terek&eacute;nt megadott
	  <maketarget>distribution</maketarget> c&eacute;l gondoskodik
	  az &ouml;sszes sz&uuml;ks&eacute;ges
	  konfigur&aacute;ci&oacute;s &aacute;llom&aacute;ny
	  felm&aacute;sol&aacute;s&aacute;r&oacute;l.  Magyar&aacute;n
	  sz&oacute;lva, &aacute;tm&aacute;solja az &ouml;sszes
	  telep&iacute;het&#245; &aacute;llom&aacute;nyt a <filename
	    class="directory">/usr/src/etc/</filename>
	  k&ouml;nyvt&aacute;rb&oacute;l a jail <filename
	    class="directory">/etc</filename>
	  alk&ouml;nyvt&aacute;r&aacute;ba, vagyis a <filename
	    class="directory">$D/etc/</filename>
	  k&ouml;nyvt&aacute;rba.</para>
      </callout>

      <callout arearefs="jaildevfs">
	<para>A jaileken bel&uuml;l a &man.devfs.8;
	  csatlakoztat&aacute;sa nem k&ouml;telez&#245;.
	  M&aacute;sr&eacute;szt azonban majdnem mindegyik
	  alkalmaz&aacute;s, a feladat&aacute;t&oacute;l
	  f&uuml;gg&#245;en, legal&aacute;bb egy eszk&ouml;zh&ouml;z
	  hozz&aacute; akar f&eacute;rni.  Nagyon fontos, hogy a
	  kez&uuml;nkbe vegy&uuml;k a eszk&ouml;z&ouml;k
	  hozz&aacute;f&eacute;r&eacute;s&eacute;nek
	  ir&aacute;ny&iacute;t&aacute;s&aacute;t a jaileken bel&uuml;l,
	  mivel a helytelen be&aacute;ll&iacute;t&aacute;sok
	  r&eacute;v&eacute;n a t&aacute;mad&oacute;k cs&uacute;nya
	  dolgokat tudnak majd m&#251;velni.  A &man.devfs.8;
	  m&#251;k&ouml;d&eacute;s&eacute;t a &man.devfs.8; &eacute;s
	  &man.devfs.conf.5; man oldalakon is ismertetett
	  szab&aacute;lyrendszerek
	  ir&aacute;ny&iacute;tj&aacute;k.</para>
      </callout>
    </calloutlist>

    <para>Ahogy a jailt telep&iacute;tett&uuml;k, a &man.jail.8;
      seg&eacute;dprogrammal tudjuk elind&iacute;tani.  A &man.jail.8;
      n&eacute;gy k&ouml;telez&#245; param&eacute;tert v&aacute;r,
      melyekre a <xref linkend="jails-what">ban ki is
      t&eacute;r&uuml;nk.  M&aacute;s param&eacute;tereket is
      megadhatunk, p&eacute;ld&aacute;ul azt, hogy az elz&aacute;rt
      program egy adott felhaszn&aacute;l&oacute; jogaival fusson.  A
      <option><replaceable>command</replaceable></option>
      param&eacute;ter haszn&aacute;lata a jail
      t&iacute;pus&aacute;t&oacute;l f&uuml;gg: egy
      <emphasis>virtu&aacute;lis rendszer</emphasis> eset&eacute;ben a
      <filename>/etc/rc</filename> j&oacute; v&aacute;laszt&aacute;snak
      bizonyulhat, mivel ennek seg&iacute;ts&eacute;g&eacute;vel egy
      val&oacute;di &os; rendszerind&iacute;t&aacute;si
      folyamat&aacute;t j&aacute;tszhatjuk le.  Amennyiben elz&aacute;rt
      <emphasis>szolg&aacute;ltat&aacute;s</emphasis>r&oacute;l van
      sz&oacute;l, az adott szolg&aacute;ltat&aacute;st&oacute;l vagy
      alkalmaz&aacute;st&oacute;l f&uuml;gg.</para>

    <para>A jaileket gyakran m&aacute;r a rendszerind&iacute;t&aacute;s
      sor&aacute;n elind&iacute;tj&aacute;k, amit a &os;
      <filename>rc</filename> mechanizmusa nagyban meg is
      k&ouml;nny&iacute;t.</para>

    <procedure>
      <step>
	<para>A rendszer ind&iacute;t&aacute;sa sor&aacute;n
	  aktiv&aacute;land&oacute; jailek list&aacute;j&aacute;t
	  vegy&uuml;k hozz&aacute; a &man.rc.conf.5;
	  &aacute;llom&aacute;nyhoz:</para>

	<programlisting>jail_enable="YES"   # Ide NO-t &iacute;rjunk, ha ki akarjuk kapcsolni
jail_list="<replaceable>www</replaceable>"     # Sz&oacute;k&ouml;zzel elv&aacute;lasztva soroljuk fel a jaileket</programlisting>

	<note>
	  <para>A <varname>jail_list</varname>
	    &eacute;rt&eacute;kek&eacute;nt felsorolt jailek nevei csak
	    bet&#251;ket &eacute;s sz&aacute;mjegyeket
	    tartalmazhatnak.</para>
	</note>
      </step>

      <step>
	<para>A <varname>jail_list</varname>-ben szerepl&#245;
	  &ouml;sszes jailt meg kell adnunk az ezeket
	  le&iacute;r&oacute; &man.rc.conf.5;-beli
	  be&aacute;ll&iacute;t&aacute;sokat:</para>

	<programlisting>jail_<replaceable>www</replaceable>_rootdir="/usr/jail/www"     # a jail gy&ouml;k&eacute;rk&ouml;nyvt&aacute;ra
jail_<replaceable>www</replaceable>_hostname="<replaceable>www</replaceable>.example.org"  # a jail neve
jail_<replaceable>www</replaceable>_ip="192.168.0.10"           # a jail IP-c&iacute;me
jail_<replaceable>www</replaceable>_devfs_enable="YES"          # legyen-e devfs a jailen bel&uuml;l
jail_<replaceable>www</replaceable>_devfs_ruleset="<replaceable>www_ruleset</replaceable>" # az alkalmazott devfs szab&aacute;lyrendszer</programlisting>

	<para>Az &man.rc.conf.5; &aacute;llom&aacute;nyban szerepl&#245;
	  jailek eset&eacute;n a <filename>/etc/rc</filename> szkript
	  fut le, teh&aacute;t felt&eacute;telezi, hogy az &iacute;gy
	  megadott jail egy teljes virtu&aacute;lis rendszer.  A
	  szolg&aacute;ltat&aacute;sok jailbe foglal&aacute;s&aacute;hoz
	  meg kell v&aacute;ltoztatnunk a jail alap&eacute;rtelmezett
	  parancs&aacute;t is.  Ezt a
	  <varname>jail_<replaceable>jailn&eacute;v</replaceable>_exec_start</varname>
	  opci&oacute; megfelel&#245;
	  be&aacute;ll&iacute;t&aacute;s&aacute;val tudjuk
	  megtenni.</para>

	<note>
	  <para>Az &ouml;sszes itt el&eacute;rhet&#245; opci&oacute;t a
	    &man.rc.conf.5; man oldalon tal&aacute;lhatjuk meg.</para>
	</note>
      </step>
    </procedure>

    <para>Ha l&eacute;teznek a megfelel&#245; bejegyz&eacute;sek az
      <filename>rc.conf</filename> &aacute;llom&aacute;nyban, akkor az
      <filename>/etc/rc.d/jail</filename> szkript is
      haszn&aacute;lhat&oacute; arra, hogy a jaileket k&eacute;zzel
      ind&iacute;tsuk el vagy &aacute;ll&iacute;tsuk le:</para>

    <screen>&prompt.root; <userinput>/etc/rc.d/jail start <replaceable>www</replaceable></userinput>
&prompt.root; <userinput>/etc/rc.d/jail stop <replaceable>www</replaceable></userinput></screen>

    <para>A &man.jail.8; le&aacute;ll&iacute;t&aacute;s&aacute;ra jelen
      pillanatban m&eacute;g nem &eacute;rhet&#245; el szab&aacute;lyos
      m&oacute;dszer.  Ez az&eacute;rt van, mert a szab&aacute;lyos
      rendszerle&aacute;ll&iacute;t&aacute;st elv&eacute;gz&#245;
      parancsok nem haszn&aacute;lhat&oacute;ak a jailen bel&uuml;l.
      Emiatt a jaileket a legtiszt&aacute;bban &uacute;gy tudjuk
      le&aacute;ll&iacute;tani, ha kiadjuk az al&aacute;bbi parancsot
      mag&aacute;ban a jailben vagy pedig a &man.jexec.8;
      seg&eacute;dprogrammal a jailen k&iacute;v&uuml;lr&#245;l:</para>

    <screen>&prompt.root; <userinput>sh /etc/rc.shutdown</userinput></screen>

    <para>Err&#245;l a t&eacute;m&aacute;r&oacute;l t&ouml;bbet a
      &man.jail.8; man oldalon olvashatunk.</para>

  </sect1>

  <sect1 id="jails-tuning">
    <title>Finomhangol&aacute;s &eacute;s karbantart&aacute;s</title>

    <para>Sz&aacute;mos opci&oacute; &aacute;ll&iacute;that&oacute; be a
      jailekn&eacute;l, &eacute;s sokf&eacute;le m&oacute;don
      vegy&iacute;thetj&uuml;k a befogad&oacute; &os; rendszer&uuml;nket
      a jailekkel, ami &aacute;ltal magasabb szint&#251;
      alkalmaz&aacute;sokat hozhatunk l&eacute;tre.  Ebben a
      r&eacute;szben bemutatunk:</para>

    <itemizedlist>
      <listitem>
	<para>N&eacute;h&aacute;ny olyan
	  be&aacute;ll&iacute;t&aacute;st, amellyel finomhangolhatjuk a
	  telep&iacute;tett jailek &aacute;ltal
	  megval&oacute;s&iacute;tott biztons&aacute;gi
	  megszor&iacute;t&aacute;sok viselked&eacute;s&eacute;t.</para>
      </listitem>

      <listitem>
	<para>A jailek kezel&eacute;s&eacute;re alkalmas
	  n&eacute;h&aacute;ny olyan magasabb szint&#251;
	  alkalmaz&aacute;st, amelyek el&eacute;rhet&#245;ek a &os;
	  Portgy&#251;jtem&eacute;ny&eacute;n kereszt&uuml;l, &eacute;s
	  &aacute;ltal&aacute;nos jail alap&uacute; megold&aacute;sok
	  kialak&iacute;t&aacute;s&aacute;hoz
	  haszn&aacute;lhat&oacute;ak.</para>
	    </listitem>
    </itemizedlist>

    <sect2 id="jails-tuning-utilities">
      <title>A &os;-ben tal&aacute;lhat&oacute; finomhangol&oacute;
	eszk&ouml;z&ouml;k</title>

      <para>A jailek be&aacute;ll&iacute;t&aacute;sainak
	finomhangol&aacute;s&aacute;t t&uacute;lnyom&oacute;r&eacute;szt
	&man.sysctl.8; v&aacute;ltoz&oacute;kkal v&eacute;gezhetj&uuml;k
	el.  A sysctl-en bel&uuml;l egy speci&aacute;lis
	r&eacute;szf&aacute;ban tal&aacute;lhatunk erre alkalmas
	be&aacute;ll&iacute;t&aacute;sokat: ez a a &os; rendszermag
	opci&oacute;i k&ouml;z&ouml;tt megtal&aacute;lhat&oacute;
	<varname>security.jail.*</varname>.  Itt k&ouml;z&uuml;lj&uuml;k
	a jailekre vonatkoz&oacute; fontosabb sysctl
	v&aacute;ltoz&oacute;k list&aacute;j&aacute;t, az
	alap&eacute;rtelmezett &eacute;rt&eacute;keikkel egy&uuml;tt.  A
	nevek minden bizonnyal sokat el&aacute;rulnak, de ha t&ouml;bbet
	szeretn&eacute;nk tudni r&oacute;luk, lapozzuk fel a
	&man.jail.8; &eacute;s &man.sysctl.8; man oldalakat.</para>

      <itemizedlist>
	<listitem>
	  <para><varname>security.jail.set_hostname_allowed:
	     1</varname></para>
	</listitem>

	<listitem>
	  <para><varname>security.jail.socket_unixiproute_only:
	     1</varname></para>
	</listitem>

	<listitem>
	  <para><varname>security.jail.sysvipc_allowed:
	     0</varname></para>
	</listitem>

	<listitem>
	  <para><varname>security.jail.enforce_statfs:
	     2</varname></para>
	</listitem>

	<listitem>
	  <para><varname>security.jail.allow_raw_sockets:
	     0</varname></para>
	</listitem>

	<listitem>
	  <para><varname>security.jail.chflags_allowed:
	    0</varname></para>
	</listitem>

	<listitem>
	  <para><varname>security.jail.jailed: 0</varname></para>
	</listitem>
      </itemizedlist>

      <para>Ezekkel a v&aacute;ltoz&oacute;kkal a
	<emphasis>befogad&oacute; rendszer</emphasis>
	rendszergazd&aacute;ja tud hozz&aacute;tenni vagy elvenni a
	<username>root</username> felhaszn&aacute;l&oacute;
	alap&eacute;rtelmezett hat&aacute;raihoz.  Vegy&uuml;k azonban
	&eacute;szre, hogy egyes korl&aacute;toz&aacute;sok azonban
	semmik&eacute;ppen sem sz&uuml;ntethet&#245;ek meg.  A
	<username>root</username> nem csatlakoztathat &eacute;s
	v&aacute;laszthat le &aacute;llom&aacute;nyrendszereket a
	&man.jail.8; k&ouml;rnyezetben.  Az elz&aacute;rt
	<username>root</username> nem t&ouml;lthet be &eacute;s
	t&ouml;r&ouml;lhet &man.devfs.8; szab&aacute;lyrendszereket,
	t&#251;zfal szab&aacute;lyokat sem, ill.  nem v&eacute;gezhet
	semmilyen olyan b&aacute;rmilyen m&aacute;s karbantart&aacute;si
	feladatot, amely a rendszermag adataiban
	m&oacute;dos&iacute;t&aacute;st vonna maga ut&aacute;n,
	p&eacute;ld&aacute;ul nem &aacute;ll&iacute;thatja a rendszermag
	<varname>securelevel</varname> (biztons&aacute;gi
	szintj&eacute;nek) &eacute;rt&eacute;k&eacute;t.</para>

      <para>A &os; alaprendszere tartalmazza azokat a
	seg&eacute;deszk&ouml;z&ouml;ket, amelyekkel a rendszerben
	akt&iacute;v jailek inform&aacute;ci&oacute;t tudjuk
	megjelen&iacute;teni, vagy csatlakozni tudunk hozz&aacute;juk.
	A &man.jls.8; &eacute;s &man.jexec.8; parancsok r&eacute;szei az
	alap &os; rendszernek, seg&iacute;ts&eacute;g&uuml;kkel
	elv&eacute;gezhet&#245;ek az al&aacute;bbi egyszer&#251;
	feladatokat:</para>

      <itemizedlist>
	<listitem>
	  <para>Ki tudjuk &iacute;ratni az akt&iacute;v jailek &eacute;s
	    hozz&aacute;juk tartoz&oacute; azonos&iacute;t&oacute;kat
	    (<acronym>JID</acronym>-eket),
	    <acronym>IP</acronym>-c&iacute;meket, neveket &eacute;s
	    &uacute;tvonalakat.</para>
	</listitem>

	<listitem>
	  <para>A befogad&oacute; rendszerb&#245;l hozz&aacute; tudunk
	    csatlakozni egy fut&oacute; jailhez, &eacute;s parancsokat
	    tudunk futtatni a jailen bel&uuml;l vagy
	    karbantart&aacute;si feladatokat tudunk elv&eacute;gezni
	    mag&aacute;n a jailen bel&uuml;l.  Ez
	    k&uuml;l&ouml;n&ouml;sen hasznosnak bizonyulhat, amikor a
	    <username>root</username> felhaszn&aacute;l&oacute;
	    szab&aacute;lyosan le akarja &aacute;ll&iacute;tani a jailt.
	    A &man.jexec.8; seg&eacute;dprogrammal el tudunk
	    ind&iacute;tani egy parancs&eacute;rtelmez&#245;t a jailen
	    bel&uuml;l, amib&#245;l azt&aacute;n
	    ir&aacute;ny&iacute;thatjuk.  P&eacute;lda:</para>

	  <screen>&prompt.root; <userinput>jexec <replaceable>1</replaceable> tcsh</userinput></screen>
	</listitem>
      </itemizedlist>

    </sect2>

    <sect2 id="jails-tuning-admintools">
      <title>Magasszint&#251; karbantart&oacute; eszk&ouml;z&ouml;k a
	&os; Portgy&#251;jtem&eacute;ny&eacute;ben</title>

      <para>A sok k&uuml;ls&#245; karbantart&oacute; eszk&ouml;z
	k&ouml;z&uuml;l az egyik legteljesebb &eacute;s leghasznosabb a
	<filename role="package">sysutils/jailutils</filename>.  Sok
	kisebb alkalmaz&aacute;st tartalmaz, melyek
	kib&#245;v&iacute;tik a &man.jail.8;
	ir&aacute;ny&iacute;that&oacute;s&aacute;g&aacute;t.
	B&#245;vebb inform&aacute;ci&oacute;k&eacute;rt
	k&eacute;rj&uuml;k, l&aacute;togassa meg a
	hozz&aacute; tartoz&oacute; honlapot.</para>

    </sect2>
  </sect1>

  <sect1 id="jails-application">
    <title>A jailek alkalmaz&aacute;sa</title>

    <sect2 id="jails-service-jails">
      <sect2info>
	<authorgroup>
	  <author>
	    <firstname>Daniel</firstname>
	    <surname>Gerzo</surname>
	    <contrib>&Iacute;rta: </contrib>
	  </author>
	</authorgroup>
      </sect2info>

      <title>Szolg&aacute;ltat&aacute;sok jailbe
	foglal&aacute;sa</title>

      <para>Ez a r&eacute;sz eredetileg &a.simon; <ulink
	url="http://simon.nitro.dk/service-jails.html"></ulink> oldalon
	tal&aacute;lhat&oacute; &iacute;r&aacute;s&aacute;n, valamint
	Ken Tom (<email>locals@gmail.com</email>) &aacute;tdolgozott
	cikk&eacute;n alapul.  Itt megismerhetj&uuml;k, hogyan
	&aacute;ll&iacute;tsunk be a &os; rendszer&uuml;nkben egy
	biztons&aacute;gi r&eacute;teget a &man.jail.8;
	felhaszn&aacute;l&aacute;s&aacute;val.  Tov&aacute;bb&aacute;
	felt&eacute;telezz&uuml;k, hogy ez a rendszer legal&aacute;bb
	RELENG_6_0 verzi&oacute;j&uacute; &eacute;s a fejezetben
	kor&aacute;bban t&aacute;rgyaltakat az olvas&oacute; teljes
	m&eacute;rt&eacute;kben meg&eacute;rtette.</para>

      <sect3 id="jails-service-jails-design">
	<title>A kialak&iacute;t&aacute;s</title>

	<para>A jailek egyik legnagyobb gondja a friss&iacute;t&eacute;s
	  folyamat&aacute;nak lebonyol&iacute;t&aacute;sa.  Az&eacute;rt
	  jelent ez egyre ink&aacute;bb gondot, mert minden egyes jailt
	  &uacute;jra fel kell &eacute;p&iacute;ten&uuml;nk a
	  friss&iacute;t&eacute;se sor&aacute;n.  Ez t&ouml;bbnyire nem
	  okoz gondot egyetlen jail haszn&aacute;lata sor&aacute;n,
	  mivel maga a friss&iacute;t&eacute;si folyamat
	  meglehet&#245;sen egyszer&#251;, azonban igen
	  id&#245;ig&eacute;nyess&eacute; &eacute;s
	  f&aacute;raszt&oacute;v&aacute; tud v&aacute;lni t&ouml;bb
	  jail eset&eacute;ben.</para>

	<warning>
	  <para>Ez a p&eacute;lda a &os; k&eacute;pess&eacute;geinek
	    halad&oacute; szint&#251; ismeret&eacute;t k&ouml;veteli
	    meg.  Amennyiben az itt bemutatott l&eacute;pesek
	    t&uacute;ls&aacute;gosan is bonyolultnak
	    t&#251;nn&eacute;nek, &eacute;rdemes olyan egyszer&#251;bb
	    rendszerek ut&aacute;n n&eacute;zni, mint mondjuk a
	    <filename role="package">sysutils/ezjail</filename>, amely
	    egy egyszer&#251;bb m&oacute;dszert k&iacute;n&aacute;l fel
	    a &os;-ben haszn&aacute;lt jailek
	    karbantart&aacute;s&aacute;ra, &eacute;s nem is annyira
	    bonyolult, mint ez a p&eacute;lda.</para>
	</warning>

	<para>A bemutatand&oacute; p&eacute;lda c&eacute;lja, hogy
	  feloldja az ilyen jelleg&#251; probl&eacute;m&aacute;kat,
	  &eacute;s ez&eacute;rt igyekszik a jailek k&ouml;z&ouml;tt
	  mindent megosztani, ami csak lehets&eacute;ges.  Mindezt
	  biztons&aacute;gosan &eacute;ri el &mdash;
	  &iacute;r&aacute;sv&eacute;dett &man.mount.nullfs.8;
	  &aacute;llom&aacute;nyrendszer haszn&aacute;lat&aacute;val,
	  aminek k&ouml;sz&ouml;nhet&#245;en a friss&iacute;t&eacute;s
	  maga egyszer&#251;bb&eacute;, az egyes
	  szolg&aacute;ltat&aacute;sok
	  k&uuml;l&ouml;nz&aacute;r&aacute;sa pedig
	  vonz&oacute;bb&aacute; v&aacute;lik.  R&aacute;ad&aacute;sul
	  egy&uacute;ttal egy nagyon egyszer&#251; m&oacute;dszert mutat
	  az &uacute;j jailek hozz&aacute;ad&aacute;s&aacute;ra
	  &eacute;s a r&eacute;gi t&ouml;rl&eacute;s&eacute;re
	  ugyan&uacute;gy, mint a
	  friss&iacute;t&eacute;s&uuml;kre.</para>

	<note>
	  <para>P&eacute;ld&aacute;ul ilyen
	    szolg&aacute;ltat&aacute;sokat k&iacute;v&aacute;nunk
	    szab&aacute;lyozni: egy <acronym>HTTP</acronym> szervert,
	    egy <acronym>DNS</acronym> szervert, egy
	    <acronym>SMTP</acronym> szervert &eacute;s &iacute;gy
	    tov&aacute;bb.</para>
	</note>

	<para>Az itt szerepl&#245; be&aacute;ll&iacute;t&aacute;s
	  c&eacute;ljai:</para>

	<itemizedlist>
	  <listitem>
	    <para>K&eacute;sz&iacute;ts&uuml;nk egy egyszer&#251;en
	      &eacute;s k&ouml;nnyen &aacute;tl&aacute;that&oacute;
	      jailkezel&eacute;si rendszert.  Ebb&#245;l teh&aacute;t
	      k&ouml;vetkezik, hogy <emphasis>ne</emphasis> kelljen
	      lefuttatni a teljes rendszer
	      telep&iacute;t&eacute;s&eacute;t minden egyes
	      jailre.</para>
	  </listitem>
	  <listitem>
	    <para>K&ouml;nny&iacute;ts&uuml;k meg az &uacute;j jailek
	      hozz&aacute;ad&aacute;s&aacute;t &eacute;s a r&eacute;giek
	      elt&aacute;vol&iacute;t&aacute;s&aacute;t.</para>
	  </listitem>
	  <listitem>
	    <para>K&ouml;nny&iacute;ts&uuml;k meg a m&aacute;r
	      l&eacute;tez&#245; jailek friss&iacute;t&eacute;s&eacute;t
	      &eacute;s cser&eacute;j&eacute;t.</para>
	  </listitem>
	  <listitem>
	    <para>Tegy&uuml;k lehet&#245;v&eacute; saj&aacute;t &os;
	      &aacute;gak futtat&aacute;s&aacute;t.</para>
	  </listitem>
	  <listitem>
	    <para>Legy&uuml;nk k&uuml;l&ouml;n&ouml;sen
	      k&ouml;r&uuml;ltekint&#245;ek a biztons&aacute;g
	      tekintet&eacute;ben, &eacute;s igyekezz&uuml;nk
	      min&eacute;l jobban cs&ouml;kkenteni vesz&eacute;ly
	      kock&aacute;zat&aacute;t.</para>
	  </listitem>
	  <listitem>
	    <para>Takar&eacute;koskodjunk a t&aacute;rhellyel &eacute;s
	      az &aacute;llom&aacute;nyrendszerrel, amennyire csak
	      lehet.</para>
	  </listitem>
	</itemizedlist>

	<para>Ahogy azt m&aacute;r kor&aacute;bban is
	  eml&iacute;tett&uuml;k, ez a kialak&iacute;t&aacute;s nagyban
	  &eacute;p&iacute;tkezik egyetlen f&#245; sablonra, amely
	  &iacute;r&aacute;sv&eacute;detten ker&uuml;l
	  csatlakoztat&aacute;sra (<application>nullfs</application>en
	  kereszt&uuml;l) az egyes jailekben, valamint jailenk&eacute;nt
	  egy-egy &iacute;rhat&oacute;-olvashat&oacute; eszk&ouml;zre.
	  Ez az eszk&ouml;z lehet egy k&uuml;l&ouml;n fizikai lemez, egy
	  part&iacute;ci&oacute; vagy egy vnode alap&uacute; &man.md.4;
	  eszk&ouml;z.  Ebben a p&eacute;ld&aacute;ban
	  &iacute;rhat&oacute;-olvashat&oacute;
	  <application>nullfs</application> csatlakoz&aacute;sokat
	  haszn&aacute;lunk.</para>

	<para>Az &aacute;llom&aacute;nyrendszer kioszt&aacute;sa a most
	  k&ouml;vetkez&#245; list&aacute;ban szerepel:</para>

	<itemizedlist>
	  <listitem>
	    <para>Minden jailt a <filename
	      class="directory">/home/j</filename>
	      k&ouml;nyvt&aacute;rban csatlakoztatunk.</para>
	  </listitem>
	  <listitem>
	    <para>A <filename class="directory">/home/j/mroot</filename>
	      lesz az &ouml;sszes jail sablonja &eacute;s
	      mindegyik&uuml;k sz&aacute;m&aacute;ra
	      &iacute;r&aacute;sv&eacute;dett.</para>
	  </listitem>
	  <listitem>
	    <para>Minden jailnek l&eacute;trehozunk egy &uuml;res
	      alk&ouml;nyvt&aacute;rat a <filename
		class="directory">/home/j</filename>
	      k&ouml;nyvt&aacute;rban.</para>
	  </listitem>
	  <listitem>
	    <para>Minden jailnek lesz egy <filename
		class="directory">/s</filename> alk&ouml;nyvt&aacute;ra,
	      amelyet a rendszer &iacute;rhat&oacute;-olvashat&oacute;
	      r&eacute;sz&eacute;re ir&aacute;ny&iacute;tunk.</para>
	  </listitem>
	  <listitem>
	    <para>Minden jailnek lesz egy saj&aacute;t
	      &iacute;rhat&oacute;-olvashat&oacute; r&eacute;sze, amely
	      a <filename class="directory">/home/j/skel</filename>
	      k&ouml;nyvt&aacute;ron alapszik.</para>
	  </listitem>
	  <listitem>
	    <para>Mindegyik elz&aacute;rt ter&uuml;let (a jailek
	      &iacute;rhat&oacute;-olvashat&oacute; r&eacute;sze) a
	      <filename class="directory">/home/js</filename>
	      k&ouml;nyvt&aacute;rban j&ouml;n l&eacute;tre.<para>
	  </listitem>
	</itemizedlist>

	<note>
	  <para>Ez a kioszt&aacute;s felt&eacute;telezi, hogy a jaileket
	    a <filename class="directory">/home</filename>
	    part&iacute;ci&oacute;n hozzuk l&eacute;tre.  Ez
	    term&eacute;szetesen b&aacute;rmi m&aacute;sra
	    megv&aacute;ltoztathat&oacute;, de akkor figyeln&uuml;nk
	    kell erre minden egyes parancs kiad&aacute;sa
	    el&#245;tt.</para>
	</note>

      </sect3>

      <sect3 id="jails-service-jails-template">
	<title>A sablon l&eacute;trehoz&aacute;sa</title>

	<para>Ez a r&eacute;sz le&iacute;rja a f&#245; sablon
	  l&eacute;trehoz&aacute;s&aacute;hoz sz&uuml;ks&eacute;ges
	  l&eacute;p&eacute;seket.  Ez a jailek sz&aacute;m&aacute;ra
	  &iacute;r&aacute;sv&eacute;dett lesz.<para>

	<para>&Eacute;rdemes mindig friss&iacute;teni a &os;
	  rendszer&uuml;nket a leg&uacute;jabb -RELEASE &aacute;gra.
	  Ehhez olvassuk el az ide tartoz&oacute; <ulink
	  url="&url.books.handbook;/makeworld.html">fejezetet</ulink> a
	  k&eacute;zik&ouml;nyvb&#245;l.  Abban az esetben, ha a
	  friss&iacute;t&eacute;s nem lenne megoldhat&oacute;, egy
	  <command>make buildworld</command> parancsot
	  mindenk&eacute;ppen le kell tudnunk futtatni.  Ezenfel&uuml;l
	  a <filename role="package">sysutils/cpdup</filename> csomagra
	  is sz&uuml;ks&eacute;g&uuml;nk van.  Haszn&aacute;lni fogjuk a
	  &man.portsnap.8; seg&eacute;dprogramot is a &os;
	  Portgy&#251;jtem&eacute;ny let&ouml;lt&eacute;s&eacute;hez.
	  Akik nem ismern&eacute;k, a k&eacute;zik&ouml;nyv <ulink
	  url="&url.books.handbook;/portsnap.html">err&#245;l
	  sz&oacute;l&oacute; fejezet&eacute;ben</ulink> olvashatnak
	  r&oacute;la.</para>

	<procedure>
	  <step>
	    <para>El&#245;sz&ouml;r is, k&eacute;sz&iacute;ts&uuml;k el
	      az &iacute;r&aacute;sv&eacute;dett
	      &aacute;llom&aacute;nyrendszer
	      k&ouml;nyvt&aacute;rszerkezet&eacute;t, amely majd
	      tartalmazni fogja a jailek &aacute;ltal haszn&aacute;lt
	      &os;-s programokat.  Ezut&aacute;n l&eacute;pj&uuml;nk be
	      a &os; forr&aacute;sf&aacute;j&aacute;nak
	      k&ouml;nyvt&aacute;r&aacute;ba &eacute;s
	      telep&iacute;ts&uuml;k fel az
	      &iacute;r&aacute;sv&eacute;dett
	      &aacute;llom&aacute;nyrendszert a sablonba:</para>

	    <screen>&prompt.root; <userinput>mkdir /home/j /home/j/mroot</userinput>
&prompt.root; <userinput>cd /usr/src</userinput>
&prompt.root; <userinput>make installworld DESTDIR=/home/j/mroot</userinput></screen>
	  </step>

	  <step>
	    <para>Ezt k&ouml;vet&#245;en k&eacute;sz&iacute;ts&uuml;k
	      el&#245; a jailek sz&aacute;m&aacute;ra a &os;
	      Portgy&#251;jtem&eacute;nyt &eacute;s &os;
	      forr&aacute;sf&aacute;t, melyek kellenek a
	      <application>mergemaster</application>
	      haszn&aacute;lat&aacute;hoz:</para>

	    <screen>&prompt.root; <userinput>cd /home/j/mroot</userinput>
&prompt.root; <userinput>mkdir usr/ports</userinput>
&prompt.root; <userinput>portsnap -p /home/j/mroot/usr/ports fetch extract</userinput>
&prompt.root; <userinput>cpdup /usr/src /home/j/mroot/usr/src</userinput></screen>
	  </step>

	  <step>
	    <para>Hozzuk l&eacute;tre a rendszer
	      &iacute;r&aacute;sv&eacute;dett r&eacute;sz&eacute;nek
	      v&aacute;z&aacute;t:</para>

	    <screen>&prompt.root; <userinput>mkdir /home/j/skel /home/j/skel/home /home/j/skel/usr-X11R6 /home/j/skel/distfiles</userinput>
&prompt.root; <userinput>mv etc /home/j/skel</userinput>
&prompt.root; <userinput>mv usr/local /home/j/skel/usr-local</userinput>
&prompt.root; <userinput>mv tmp /home/j/skel</userinput>
&prompt.root; <userinput>mv var /home/j/skel</userinput>
&prompt.root; <userinput>mv root /home/j/skel</userinput></screen>
	  </step>

	  <step>
	    <para>Haszn&aacute;ljuk a
	      <application>mergemaster</application>t a
	      hi&aacute;nyz&oacute; konfigur&aacute;ci&oacute;s
	      &aacute;llom&aacute;nyok
	      telep&iacute;t&eacute;s&eacute;re.  Szabaduljunk meg a
	      <application>mergemaster</application> &aacute;ltal
	      k&eacute;sz&iacute;tett felesleges
	      k&ouml;nyvt&aacute;rakt&oacute;l:</para>

	    <screen>&prompt.root; <userinput>mergemaster -t /home/j/skel/var/tmp/temproot -D /home/j/skel -i</userinput>
&prompt.root; <userinput>cd /home/j/skel</userinput>
&prompt.root; <userinput>rm -R bin boot lib libexec mnt proc rescue sbin sys usr dev</userinput></screen>
	  </step>

	  <step>
	    <para>Most pedig szimbolikusan linkelj&uuml;k az
	      &iacute;rhat&oacute;-olvashat&oacute;
	      &aacute;llom&aacute;nyrendszert az
	      &iacute;r&aacute;sv&eacute;dett
	      &aacute;llom&aacute;nyrendszerre.  Ellen&#245;rizz&uuml;k,
	      hogy a szimbolikus linkek a megfelel&#245; <filename
	      class="directory">s/</filename> k&ouml;nyvt&aacute;rakban
	      j&ouml;ttek l&eacute;tre.  Val&oacute;s vagy rossz helyen
	      l&eacute;trehozott k&ouml;nyvt&aacute;rak
	      haszn&aacute;lata eset&eacute;n a telep&iacute;t&eacute;s
	      nem fog siker&uuml;lni.</para>

	    <screen>&prompt.root; <userinput>cd /home/j/mroot</userinput>
&prompt.root; <userinput>mkdir s</userinput>
&prompt.root; <userinput>ln -s s/etc etc</userinput>
&prompt.root; <userinput>ln -s s/home home</userinput>
&prompt.root; <userinput>ln -s s/root root</userinput>
&prompt.root; <userinput>ln -s ../s/usr-local usr/local</userinput>
&prompt.root; <userinput>ln -s ../s/usr-X11R6 usr/X11R6</userinput>
&prompt.root; <userinput>ln -s ../../s/distfiles usr/ports/distfiles</userinput>
&prompt.root; <userinput>ln -s s/tmp tmp</userinput>
&prompt.root; <userinput>ln -s s/var var</userinput></screen>
	  </step>

	  <step>
	    <para>Utols&oacute; l&eacute;p&eacute;sk&eacute;nt hozzunk
	      l&eacute;tre egy
	      <filename>/home/j/skel/etc/make.conf</filename>
	      &aacute;llom&aacute;nyt az al&aacute;bbi
	      tartalommal:</para>

	    <programlisting>WRKDIRPREFIX?=  /s/portbuild</programlisting>

	    <para>A <literal>WRKDIRPREFIX</literal>
	      be&aacute;ll&iacute;t&aacute;s&aacute;val
	      lehet&#245;v&eacute; v&aacute;lik a &os; portok jaileken
	      bel&uuml;li ford&iacute;t&aacute;sa.  Ne felejts&uuml;k
	      el, hogy a portokat tartalmaz&oacute; k&ouml;nyvt&aacute;r
	      az &iacute;r&aacute;sv&eacute;dett rendszer r&eacute;sze!
	      Az &aacute;t&aacute;ll&iacute;tott
	      <literal>WRKDIRPREFIX</literal> azonban megengedi, hogy a
	      ford&iacute;t&aacute;sok az egyes jailek
	      &iacute;rhat&oacute;-olvashat&oacute; r&eacute;szeiben
	      t&ouml;rt&eacute;njenek.</para>
	  </step>
	</procedure>

      </sect3>

      <sect3 id="jails-service-jails-creating">
	<title>A jailek l&eacute;trehoz&aacute;sa</title>

	<para>Most, miut&aacute;n teljesen elk&eacute;sz&uuml;lt a &os;
	  jailek sablonja, be is tudjuk &aacute;ll&iacute;tani &eacute;s
	  hozz&aacute; is tudjuk venni ezeket az
	  <filename>/etc/rc.conf</filename> &aacute;llom&aacute;nyhoz.
	  Ebben a p&eacute;ld&aacute;ban 3 jail
	  l&eacute;trehoz&aacute;s&aacute;t l&aacute;thatjuk:
	  <quote>NS</quote>, <quote>MAIL</quote> &eacute;s
	  <quote>WWW</quote>.</para>

	<procedure>
	  <step>
	    <para>&Iacute;rjuk bele a k&ouml;vetkez&#245; sorokat az
	      <filename>/etc/fstab</filename> &aacute;llom&aacute;nyba,
	      aminek k&ouml;sz&ouml;nhet&#245;en az egyes jailek
	      sz&aacute;m&aacute;ra el&eacute;rhet&#245;v&eacute;
	      v&aacute;lik az &iacute;r&aacute;sv&eacute;dett sablon
	      &eacute;s a hozz&aacute;juk tartoz&oacute;
	      &iacute;rhat&oacute;-olvashat&oacute;
	      ter&uuml;letek:</para>

	    <programlisting>/home/j/mroot   /home/j/ns     nullfs  ro  0   0
/home/j/mroot   /home/j/mail   nullfs  ro  0   0
/home/j/mroot   /home/j/www    nullfs  ro  0   0
/home/js/ns     /home/j/ns/s   nullfs  rw  0   0
/home/js/mail   /home/j/mail/s nullfs  rw  0   0
/home/js/www    /home/j/www/s  nullfs  rw  0   0</programlisting>

	    <note>
	      <para>Az els&#245; helyen null&aacute;val jel&ouml;lt
		part&iacute;ci&oacute;kat a &man.fsck.8; nem fogja
		ellen&#245;rizni a rendszer indul&aacute;sa
		sor&aacute;n, a m&aacute;sodik helyen null&aacute;val
		jel&ouml;lt part&iacute;ci&oacute;kat pedig nem fogja
		menteni a &man.dump.8;.  Mi egy&aacute;ltal&aacute;n nem
		akarjuk, hogy az <application>fsck</application>
		ellen&#245;rizze vagy a <application>dump</application>
		lementse a jailjeinkhez tartoz&oacute;
		&iacute;r&aacute;sv&eacute;dett
		<application>nullfs</application>-part&iacute;ci&oacute;inkat.
		Ez&eacute;rt szerepel v&eacute;gig
		<quote>0&nbsp;0</quote> a fentebb szerepl&#245;
		<filename>fstab</filename>-bejegyz&eacute;sek
		utols&oacute; k&eacute;t oszlop&aacute;ban.</para>
	    </note>
	  </step>

	  <step>
	    <para>&Aacute;ll&iacute;tsuk be a jaileket az
	      <filename>/etc/rc.conf</filename>-ban:</para>

	    <programlisting>jail_enable="YES"
jail_set_hostname_allow="NO"
jail_list="ns mail www"
jail_ns_hostname="ns.example.org"
jail_ns_ip="192.168.3.17"
jail_ns_rootdir="/usr/home/j/ns"
jail_ns_devfs_enable="YES"
jail_mail_hostname="mail.example.org"
jail_mail_ip="192.168.3.18"
jail_mail_rootdir="/usr/home/j/mail"
jail_mail_devfs_enable="YES"
jail_www_hostname="www.example.org"
jail_www_ip="62.123.43.14"
jail_www_rootdir="/usr/home/j/www"
jail_www_devfs_enable="YES"</programlisting>

	    <warning>
	      <para>Az&eacute;rt &aacute;ll&iacute;tottuk a
	      <varname>jail_<replaceable>n&eacute;v</replaceable>_rootdir</varname>
		v&aacute;ltoz&oacute; &eacute;rt&eacute;k&eacute;t a
		<filename class="directory">/usr/home</filename>
		k&ouml;nyvt&aacute;rra a <filename
		  class="directory">/home</filename> k&ouml;nyvt&aacute;r
		helyett, mert a &os;
		alaptelep&iacute;t&eacute;s&eacute;ben a <filename
		  class="directory">/home</filename> k&ouml;nyvt&aacute;r
		fizikailag a <filename
		  class="directory">/usr/home</filename>
		k&ouml;nyvt&aacute;rral egyezik meg.  A
		<varname>jail_<replaceable>n&eacute;v</replaceable>_rootdir</varname>
		v&aacute;ltoz&oacute; &eacute;rt&eacute;kek&eacute;nt
		megadott k&ouml;nyvt&aacute;r <emphasis>nem</emphasis>
		tartalmazhat szimbolikus linket,
		m&aacute;sk&uuml;l&ouml;nben a jailek nem lesznek
		hajland&oacute;ak l&eacute;trej&ouml;nni.  Ennek
		meg&aacute;llap&iacute;t&aacute;s&aacute;ban a
		&man.realpath.1; seg&eacute;dprogram lehet
		seg&iacute;ts&eacute;g&uuml;nkre.  A
		korl&aacute;toz&aacute;s r&eacute;szleteir&#245;l a
		&os;-SA-07:01.jail biztons&aacute;gi
		figyelmeztet&eacute;sben olvashatunk.</para>
	    </warning>

	  </step>
	  <step>
	    <para>Hozzuk l&eacute;tre az egyes jailek
	      &iacute;r&aacute;sv&eacute;dett
	      &aacute;llom&aacute;nyrendszereihez sz&uuml;ks&eacute;ges
	      csatlakoz&aacute;si pontokat:</para>

	    <screen>&prompt.root; <userinput>mkdir /home/j/ns /home/j/mail /home/j/www</userinput></screen>
	  </step>

	  <step>
	    <para>Telep&iacute;ts&uuml;k az
	      &iacute;rhat&oacute;-olvashat&oacute; sablont az egyes
	      jailekbe.  Figyelj&uuml;k meg a <filename
	      role="package">sysutils/cpdup</filename>
	      haszn&aacute;lat&aacute;t, amellyel az egyes
	      k&ouml;nyvt&aacute;rak pontos m&aacute;solatait hozhatjuk
	      l&eacute;tre:</para>

	    <screen>&prompt.root; <userinput>mkdir /home/js</userinput>
&prompt.root; <userinput>cpdup /home/j/skel /home/js/ns</userinput>
&prompt.root; <userinput>cpdup /home/j/skel /home/js/mail</userinput>
&prompt.root; <userinput>cpdup /home/j/skel /home/js/www</userinput></screen>
	  </step>

	  <step>
	    <para>Ebben a f&aacute;zisban a jailek m&aacute;r
	      elk&eacute;sz&uuml;ltek &eacute;s k&eacute;szen
	      &aacute;llnak a fut&aacute;sra.  El&#245;sz&ouml;r
	      csatlakoztassuk az egyes jailekhez sz&uuml;ks&eacute;ges
	      &aacute;llom&aacute;nyrendszereket, majd ind&iacute;tsuk
	      el ezeket a <filename>/etc/rc.d/jail</filename>
	      szkripttel:</para>

	    <screen>&prompt.root; <userinput>mount -a</userinput>
&prompt.root; <userinput>/etc/rc.d/jail start</userinput></screen>
	  </step>
	</procedure>

	<para>A jailek most m&aacute;r futnak.  Az elindul&aacute;suk
	  ellen&#245;rz&eacute;s&eacute;hez haszn&aacute;ljuk a
	  &man.jls.8; parancsot.  Valami ilyesmit l&aacute;thatunk a
	  kiad&aacute;sa ut&aacute;n:</para>

	<screen>&prompt.root; <userinput>jls</userinput>
   JID  IP Address      Hostname                      Path
     3  192.168.3.17    ns.example.org                /home/j/ns
     2  192.168.3.18    mail.example.org              /home/j/mail
     1  62.123.43.14    www.example.org               /home/j/www</screen>

	<para>Itt m&aacute;r be tudunk jelentkezni az egyes jailekbe,
	  &uacute;j felhaszn&aacute;l&oacute;kat tudunk
	  k&eacute;sz&iacute;teni vagy d&eacute;monokat tudunk
	  be&aacute;ll&iacute;tani.  A <literal>JID</literal> oszlop
	  mutatja az egyes jailek azonos&iacute;t&aacute;si
	  sz&aacute;m&aacute;t.  A 3-as <literal>JID</literal>
	  sz&aacute;m&uacute; jailben az al&aacute;bbi parancs
	  haszn&aacute;lat&aacute;val karbantart&aacute;si feladatokat
	  elv&eacute;gezni:</para>

	<screen>&prompt.root; <userinput>jexec 3 tcsh</userinput></screen>
      </sect3>

      <sect3 id="jails-service-jails-upgrading">
	<title>Friss&iacute;t&eacute;s</title>

	<para>Id&#245;r&#245;l id&#245;re ad&oacute;dhat, hogy
	  friss&iacute;ten&uuml;nk kell a rendszert a &os; egy
	  &uacute;jabb v&aacute;ltozat&aacute;ra, vagy egy
	  biztons&aacute;gi hiba jav&iacute;t&aacute;sa miatt, vagy
	  pedig a m&aacute;r meglev&#245; jailek sz&aacute;m&aacute;ra
	  hasznos &uacute;j&iacute;t&aacute;sok bevezet&eacute;se miatt.
	  Ez a kialak&iacute;t&aacute;s megk&ouml;nny&iacute;ti a
	  kor&aacute;bban l&eacute;trehozott jailjeink
	  friss&iacute;t&eacute;s&eacute;t.  Tov&aacute;bb&aacute;
	  igyekszik minimaliz&aacute;lni a kies&eacute;s&uuml;ket is,
	  mivel a jaileket csak a legutols&oacute; pillanatban fogjuk
	  le&aacute;ll&iacute;tani.  S&#245;t, m&eacute;g az is
	  lehet&#245;v&eacute; v&aacute;lik, hogy
	  vissza&aacute;ll&iacute;tsuk a kor&aacute;bbi verzi&oacute;t,
	  ha v&eacute;letlen&uuml;l valami rosszul s&uuml;lne el
	  menetk&ouml;zben.</para>

	<procedure>
	  <step>
	    <para>Els&#245; l&eacute;p&eacute;sek&eacute;nt
	      friss&iacute;ts&uuml;k mag&aacute;t a befogad&oacute;
	      rendszert a megszokott m&oacute;don.  Ezut&aacute;n
	      hozzunk l&eacute;tre egy &uacute;j
	      &iacute;r&aacute;sv&eacute;dett sablont a <filename
		class="directory">/home/j/mroot2</filename>
	      k&ouml;nyvt&aacute;rban.</para>

	    <screen>&prompt.root; <userinput>mkdir /home/j/mroot2</userinput>
&prompt.root; <userinput>cd /usr/src</userinput>
&prompt.root; <userinput>make installworld DESTDIR=/home/j/mroot2</userinput>
&prompt.root; <userinput>cd /home/j/mroot2</userinput>
&prompt.root; <userinput>cpdup /usr/src usr/src</userinput>
&prompt.root; <userinput>mkdir s</userinput></screen>

	    <para>A <maketarget>installworld</maketarget>
	      lefuttat&aacute;sa l&eacute;trehoz n&eacute;h&aacute;ny
	      felesleges k&ouml;nyvt&aacute;rat, melyeket
	      takar&iacute;tsunk is el:</para>

	    <screen>&prompt.root; <userinput>chflags -R 0 var</userinput>
&prompt.root; <userinput>rm -R etc var root usr/local tmp</userinput></screen>
	  </step>

	  <step>
	    <para>Hozzuk &uacute;jra l&eacute;tre az
	      &iacute;rhat&oacute;-olvashat&oacute; szimbolikus
	      linkjeinket a f&#245;
	      &aacute;llom&aacute;nyrendszerre:</para>

	    <screen>&prompt.root; <userinput>ln -s s/etc etc</userinput>
&prompt.root; <userinput>ln -s s/root root</userinput>
&prompt.root; <userinput>ln -s s/home home</userinput>
&prompt.root; <userinput>ln -s ../s/usr-local usr/local</userinput>
&prompt.root; <userinput>ln -s ../s/usr-X11R6 usr/X11R6</userinput>
&prompt.root; <userinput>ln -s s/tmp tmp</userinput>
&prompt.root; <userinput>ln -s s/var var</userinput></screen>
	  </step>

	  <step>
	    <para>Most &eacute;rkezett el az id&#245;, hogy
	      le&aacute;ll&iacute;tsuk a jaileket:</para>

	    <screen>&prompt.root; <userinput>/etc/rc.d/jail stop</userinput></screen>
	  </step>

	  <step>
	    <para>V&aacute;lasszuk le az eredeti
	      &aacute;llom&aacute;nyrendszereket:</para>

	    <screen>&prompt.root; <userinput>umount /home/j/ns/s</userinput>
&prompt.root; <userinput>umount /home/j/ns</userinput>
&prompt.root; <userinput>umount /home/j/mail/s</userinput>
&prompt.root; <userinput>umount /home/j/mail</userinput>
&prompt.root; <userinput>umount /home/j/www/s</userinput>
&prompt.root; <userinput>umount /home/j/www</userinput></screen>

	    <note>
	      <para>Az &iacute;rhat&oacute;-olvashat&oacute;
		&aacute;llom&aacute;nyrendszerek hozz&aacute; vannak
		kapcsolva az &iacute;r&aacute;sv&eacute;dett
		&aacute;llom&aacute;nyrendszerhez (<filename
		  class="directory">/s</filename>), ez&eacute;rt azokat
		el&#245;sz&ouml;r le kell v&aacute;lasztani.</para>
	    </note>
	  </step>

	  <step>
	    <para>Mozgassuk el az &uacute;tb&oacute;l a r&eacute;gi
	      &iacute;r&aacute;sv&eacute;dett
	      &aacute;llom&aacute;nyrendszer&uuml;nket &eacute;s
	      v&aacute;ltsuk fel az &uacute;jjal.  &Iacute;gy
	      biztons&aacute;gi ment&eacute;sk&eacute;nt &eacute;s a
	      r&eacute;gi &iacute;r&aacute;sv&eacute;dett rendszer
	      arch&iacute;vumak&eacute;nt tov&aacute;bbra is
	      rendelkez&eacute;sre &aacute;ll, ha valami baj
	      t&ouml;rt&eacute;nne.  Az itt haszn&aacute;lt
	      elnevez&eacute;s az &uacute;jonnan l&eacute;trehozott
	      &iacute;r&aacute;sv&eacute;dett
	      &aacute;llom&aacute;nyrendszer
	      d&aacute;tum&aacute;b&oacute;l ered.  Mozgassuk &aacute;t
	      az eredeti &os; Portgy&#251;jtem&eacute;nyt az &uacute;j
	      &aacute;llom&aacute;nyrendszerre, hogy
	      megtakar&iacute;tsunk n&eacute;mi t&aacute;rhelyet
	      &eacute;s
	      &aacute;llom&aacute;nyle&iacute;r&oacute;t:</para>

	    <screen>&prompt.root; <userinput>cd /home/j</userinput>
&prompt.root; <userinput>mv mroot mroot.20060601</userinput>
&prompt.root; <userinput>mv mroot2 mroot</userinput>
&prompt.root; <userinput>mv mroot.20060601/usr/ports mroot/usr</userinput></screen>
	  </step>
	  <step>
	    <para>Most m&aacute;r k&eacute;szen &aacute;ll az &uacute;j
	      &iacute;r&aacute;sv&eacute;dett sablon, &iacute;gy
	      m&aacute;r csak az &aacute;llom&aacute;nyrendszerek
	      &uacute;jracsatlakoztat&aacute;sa &eacute;s a jailek
	      &uacute;jraind&iacute;t&aacute;sa maradt:</para>

	    <screen>&prompt.root; <userinput>mount -a</userinput>
&prompt.root; <userinput>/etc/rc.d/jail start</userinput></screen>
	  </step>
	</procedure>

	<para>A &man.jls.8; haszn&aacute;lat&aacute;val
	  ellen&#245;rizz&uuml;k, hogy a jailek rendesen elindultak.  Ne
	  felejts&uuml;k el jailenk&eacute;nt lefuttatni a mergemastert
	  sem.  A konfigur&aacute;ci&oacute;s &aacute;llom&aacute;nyokat
	  &eacute;s az rc.d szkripteket is friss&iacute;ten&uuml;nk kell
	  majd.</para>

      </sect3>
    </sect2>
  </sect1>
</chapter>
