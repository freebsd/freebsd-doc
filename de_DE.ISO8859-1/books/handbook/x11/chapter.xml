<?xml version="1.0" encoding="iso-8859-1"?>
<!--
     The FreeBSD Documentation Project

     $FreeBSD$
     $FreeBSDde: de-docproj/books/handbook/x11/chapter.xml,v 1.79 2012/04/30 16:18:12 bcr Exp $
     basiert auf: r47566
-->
<chapter xmlns="http://docbook.org/ns/docbook"
  xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0"
  xml:id="x11">
  <info>
    <title>Das X-Window-System</title>

    <!--
    <authorgroup>
      <author><personname><firstname>Ken</firstname><surname>Tom</surname></personname><contrib>Erweitert um X.Orgs X11-Server von </contrib></author>
      <author><personname><firstname>Marc</firstname><surname>Fonvieille</surname></personname></author>
    </authorgroup>
    -->

    <authorgroup>
      <author>
	<personname>
	  <firstname>Martin</firstname>
	  <surname>Heinen</surname>
	</personname>
	<contrib>Übersetzt von </contrib>
      </author>
    </authorgroup>
  </info>

  <sect1 xml:id="x11-synopsis">
    <title>Übersicht</title>

    <para>Bei einer Installation von &os; mit
      <application>bsdinstall</application> wird nicht automatisch
      eine grafische Benutzeroberfläche installiert.  Dieses Kapitel
      beschreibt die Installation und Konfiguration von
      <application>&xorg;</application>, das eine grafische
      Umgebung über das quelloffene X-Window-System zur Verfügung
      stellt.  Weiterhin wird beschrieben, wie Sie eine
      Desktop-Umgebung oder einen Window Manager finden und
      installieren können.</para>

    <note>
      <para>Benutzer die eine Installationsmethode bevorzugen, welche
	automatisch <application>&xorg;</application> konfiguriert und
	zudem die Auswahl eines Window Managers während der
	Installation anbietet, sollten sich die
	<link xlink:href="http://www.pcbsd.org/">pcbsd.org</link>
	Webseite ansehen.</para>
    </note>

    <para>Weitere Informationen über Video-Hardware, die von
      <application>&xorg;</application> unterstützt wird, finden Sie
      auf der <link xlink:href="http://www.x.org/">x.org</link>
      Webseite.</para>

    <para>Nachdem Sie dieses Kapitel gelesen haben, werden Sie</para>

    <itemizedlist>
      <listitem>
	<para>Die Komponenten des X-Window-Systems und ihr
	  Zusammenspiel kennen.</para>
      </listitem>

      <listitem>
	<para>Wissen, wie <application>&xorg;</application>
	  installiert und konfiguriert wird.</para>
      </listitem>

      <listitem>
	<para>Wissen, wie verschiedene Window-Manager und
	  Desktop-Umgebungen installiert und konfiguriert
	  werden.</para>
      </listitem>

      <listitem>
	<para>Wissen, wie &truetype;-Schriftarten mit
	  <application>&xorg;</application> benutzt werden.</para>
      </listitem>

      <listitem>
	<para>Wissen, wie Sie die grafische Anmeldung
	  (<application>XDM</application>) einrichten.</para>
      </listitem>
    </itemizedlist>

    <para>Bevor Sie dieses Kapitel lesen, sollten Sie</para>

    <itemizedlist>
      <listitem>
	<para>Wissen, wie Sie Software Dritter, wie in
	  <xref linkend="ports"/> beschrieben, installieren.</para>
      </listitem>
    </itemizedlist>
  </sect1>

  <sect1 xml:id="x-understanding">
    <title>Terminologie</title>

    <para>Obwohl es nicht nötig ist, alle Details der verschiedenen
      Komponenten des X Window Systems und deren Zusammenspiel zu
      kennen, kann es trotzdem nützlich sein die Grundlagen dieser
      Komponenten zu verstehen:</para>

    <variablelist>
      <varlistentry>
	<term>X-Server</term>

	<listitem>
	  <para>X wurde von Anfang an netzwerktransparent entworfen
	    und verwendet ein <quote>Client-Server-Modell</quote>.  In
	    diesem Modell läuft der <quote>X-Server</quote> auf dem
	    Rechner, an dem die Tastatur, der Bildschirm und die Maus
	    angeschlossen ist.  Der Server ist für Dinge wie die
	    Verwaltung des Bildschirms und die Verarbeitung von
	    Tastatur- und Maus-Eingaben sowie anderer Ein- und
	    Ausgabegeräte, wie beispielsweise ein Tablet oder ein
	    Videoprojektor, verantwortlich.  Dieses Modell verwirrt
	    viele Leute, die erwarten, dass der
	    <quote>X-Server</quote> der leistungsstarke Rechner im
	    Maschinenraum und der <quote>X-Client</quote> ihr
	    Arbeitsplatzrechner ist.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>X-Client</term>

	<listitem>
	  <para>Jede X-Anwendung, wie beispielsweise
	    <application>XTerm</application> oder
	    <application>Firefox</application> ist ein
	    <quote>X-Client</quote>.  Der Client
	    sendet dem Server Nachrichten wie <quote>Zeichne an diesen
	    Koordinaten ein Fenster</quote> und der Server sendet dem
	    Client Nachrichten der Art <quote>Der Benutzer hat gerade
	      den Ok-Knopf gedrückt</quote>.</para>

	  <para>In kleinen Umgebungen laufen der X-Server und die
	    X-Clients auf demselben Rechner.  Es ist auch möglich, den
	    X-Server auf einem weniger leistungsfähigen Rechner laufen
	    zu lassen und die X-Anwendungen auf einem
	    leistungsfähigeren Rechner zu betreiben.  In diesem Fall
	    kommunizieren der X-Server und die X-Clients über das
	    Netzwerk.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>Window-Manager</term>

	<listitem>
	  <para>X schreibt nicht vor, wie Fenster auf dem Bildschirm
	    auszusehen haben, wie sie mit der Maus zu verschieben
	    sind, welche Tastenkombinationen benutzt werden sollen um
	    zwischen den Fenstern zu wechseln, wie die Fensterrahmen
	    aussehen, oder ob diese Schaltflächen zum schließen haben.
	    Stattdessen gibt X die Verantwortung für all diese Sachen
	    an eine separate <firstterm>Window-Manager</firstterm>
	    Anwendung ab.  Es stehen <uri
	      xlink:href="http://xwinman.org/">zahlreiche
	      Window-Manager</uri> zur Verfügung.  Jeder
	    Window-Manager bietet ein anderes Erscheinungsbild:
	    einige unterstützen virtuelle Bildschirme, andere erlauben
	    Tastenkombinationen zur Verwaltung des Bildschirms.
	    Einige besitzen eine <quote>Start</quote> Schaltfläche und
	    in manchen lässt sich das Aussehen und Verhalten der
	    Anwendung über <foreignphrase>Themes</foreignphrase>
	    beliebig einstellen.  Window-Manager stehen in der
	    Kategorie <filename>x11-wm</filename> der Ports-Sammlung
	    zur Verfügung.</para>

	  <para>Jeder Window-Manager wird unterschiedlich
	    konfiguriert.  Einige erwarten eine manuell erstellte
	    Konfigurationsdatei, während andere ein grafisches
	    Werkzeug für die meisten Konfigurationsarbeiten
	    anbieten.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>Desktop-Umgebungen</term>

	<listitem>
	  <para><application>KDE</application> und
	    <application>GNOME</application> werden als
	    Desktop-Umgebungen bezeichnet, da sie eine ganze Reihe von
	    Anwendungen für typische Desktop-Aufgaben enthalten.  Dazu
	    zählen beispielsweise Office-Pakete, Webbrowser und
	    Spiele.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>Fokus</term>

	<listitem>
	  <para>Der Window-Manager ist für die Methode verantwortlich,
	    mit der ein Fenster den Fokus bekommt.  Jedes System, das
	    Fenster verwendet muss entscheiden, wie ein Fenster
	    aktiviert wird, damit es Eingaben empfangen kann.  Das
	    aktive Fenster sollte zudem sichtbar gekennzeichnet
	    werden.</para>

	  <para>Eine Methode wird <quote>click-to-focus</quote>
	    genannt.  Ein Fenster wird aktiv, wenn es mit der Maus
	    angeklickt wird.  Eine weitere Methode ist
	    <quote>focus-follows-mouse</quote>.  Hier hat liegt der
	    Fokus auf dem Fenster, auf dem sich der Mauszeiger
	    befindet.  Wird der Mauszeiger in ein anderes Fenster
	    bewegt, so erhält dieses Fenster den Fokus.  Eine dritte
	    Methode ist <quote>sloppy-focus</quote>.  Hier wechselt
	    der Fokus nur dann, wenn sich der Mauszeiger in ein neues
	    Fenster bewegt und nicht, wenn er das aktive Fenster
	    verlässt.  Ist der Mauszeiger auf der Desktop Oberfläche,
	    so bleibt der Fokus auf dem  zuletzt verwendeten Fenster.
	    Bei der Methode <quote>click-to-focus</quote> wird das
	    aktive Fenster durch einen Mausklick festgelegt.
	    Dabei kann das Fenster vor alle anderen Fenster gesetzt
	    werden.  Alle Eingaben werden dann, unabhängig von der
	    Position des Mauszeigers, dem aktiven Fenster
	    zugeordnet.</para>

	  <para>Die verschiedenen Window-Manager unterstützen noch
	    andere Methoden.  Alle unterstützen jedoch
	    <quote>click-to-focus</quote> und die meisten von ihnen
	    auch die anderen Methoden.  Lesen Sie die Dokumentation
	    des Window-Managers um festzustellen, welche Methoden zur
	    Verfügung stehen.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>Widgets</term>

	<listitem>
	  <para><firstterm>Widget</firstterm> bezeichnet Objekte, die
	    in irgendeiner Weise geklickt oder manipuliert werden
	    können.  Dazu gehören
	    <foreignphrase>buttons</foreignphrase> (Schaltflächen),
	    <foreignphrase>check buttons</foreignphrase>
	    (Schaltfläche für Mehrfachauswahlen),
	    <foreignphrase>radio buttions</foreignphrase>
	    (Schaltfläche für Einfachauswahlen), Icons und
	    Auswahllisten.  Eine Widget-Sammlung ist eine Reihe von
	    Widgets, die verwendet werden um grafische Anwendungen zu
	    erstellen.  Es gibt mehrere populäre Widget-Sammlungen,
	    einschließlich Qt, das von <application>KDE</application>
	    benutzt wird, und GTK+, das von
	    <application>GNOME</application> benutzt wird.  Als Folge
	    dessen, haben Anwendungen einen bestimmten
	    <foreignphrase>look and feel</foreignphrase>, je nachdem
	    welche Widget-Sammlung benutzt wurde, um die Anwendung zu
	    erstellen.</para>
	</listitem>
      </varlistentry>
    </variablelist>
  </sect1>

  <sect1 xml:id="x-install">
    <title><application>&xorg;</application> installieren</title>

    <para>In &os; kann <application>&xorg;</application> als Paket
      oder Port installiert werden.</para>

    <para>Die nachstehenden Kommandos bauen und installieren
      <application>&xorg;</application> aus der
      Ports-Sammlung:</para>

    <screen>&prompt.root; <userinput>cd /usr/ports/x11/xorg</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>

    <para>Die Installation des Pakets ist zwar schneller, dafür können
      weniger Optionen angepasst werden:</para>

    <screen>&prompt.root; <userinput>pkg install xorg</userinput></screen>

    <para>Bei beiden Vorgehensweisen wird ein vollständiges
      <application>&xorg;</application>-System installiert.  Dies ist
      die beste Option für die meisten Anwender.</para>

    <para>Eine kleinere Version des
      <application>&xorg;</application>-Systems für erfahrene Anwender
      ist mit <package>x11/xorg-minimal</package> verfügbar.  Die
      meisten Dokumente, Bibliotheken und Anwendungen werden hierbei
      nicht installiert.  Einige Anwendungen erfordern jedoch diese
      zusätzlichen Komponenten, um ordnungsgemäß zu
      funktionieren.</para>
  </sect1>

  <sect1 xml:id="x-config">
    <title><application>&xorg;</application> konfigurieren</title>

    <info>
      <author>
	<personname>
	  <firstname>Warren</firstname>
	  <surname>Block</surname>
	</personname>
	<contrib>Geschrieben von </contrib>
      </author>
      <author>
	<personname>
	  <firstname>Björn</firstname>
	  <surname>Heidotting</surname>
	</personname>
	<contrib>Übersetzt von </contrib>
      </author>
    </info>

    <indexterm>
      <primary>&xorg;</primary>
    </indexterm>
    <indexterm>
      <primary><application>&xorg;</application></primary>
    </indexterm>

    <sect2 xml:id="x-config-quick-start">
      <title>Schnellstartanleitung</title>

      <para><application>&xorg;</application> unterstützt die meisten
	gängigen Grafikkarten, Tastaturen und Zeigegeräte.  Diese
	Geräte werden automatisch erkannt und müssen nicht manuell
	konfiguriert werden.</para>

      <procedure>
	<step>
	  <para>Wenn <application>&xorg;</application> bereits zuvor
	    auf diesem Computer verwendet wurde, verschieben oder
	    entfernen Sie alle vorhandenen
	    Konfigurationsdateien:</para>
	
	  <screen>&prompt.root; <userinput>mv /etc/X11/xorg.conf ~/xorg.conf.etc</userinput>
&prompt.root; <userinput>mv /usr/local/etc/X11/xorg.conf ~/xorg.conf.localetc</userinput></screen>
	</step>

	<step>
	  <para>Fügen Sie die Benutzer, die
	    <application>&xorg;</application> verwenden, zur Gruppe
	    <literal>video</literal> oder <literal>wheel</literal>
	    hinzu, um die 3D-Beschleunigung zu aktivieren.  Um den
	    Benutzer <replaceable>jru</replaceable> in eine der
	    verfügbaren Gruppen hinzuzufügen:</para>

	  <screen>&prompt.root; <userinput>pw groupmod video -m <replaceable>jru</replaceable> || pw groupmod wheel -m <replaceable>jru</replaceable></userinput></screen>
	</step>

	<step>
	  <para>Der Window-Manager <acronym>TWM</acronym> ist
	    standardmäßig enthalten und wird auch gestartet, wenn
	    <application>&xorg;</application> startet:</para>

	  <screen>&prompt.user; <userinput>startx</userinput></screen>
	</step>

	<step>
	  <para>Auf einigen älteren Versionen von &os; muss die
	    Systemkonsole auf &man.vt.4; eingestellt sein, damit der
	    Wechsel auf die Konsole ordnungsgemäß funktioniert.
	    Informationen dazu finden Sie im
	    <xref linkend="x-config-kms"/>.</para>
	</step>
      </procedure>
    </sect2>

    <sect2 xml:id="x-config-user-group">
      <title>Benutzergruppen für Grafikbeschleunigung</title>

      <para>Um die 3D-Beschleunigung für Grafikkarten zu ermöglichen,
	ist der Zugriff auf <filename>/dev/dri</filename> notwendig.
	In der Regel ist es am einfachsten, die Benutzer zur Gruppe
	<literal>video</literal> oder <literal>wheel</literal>
	hinzuzufügen.  In diesem Beispiel wird &man.pw.8; verwendet,
	um den Benutzer <replaceable>slurms</replaceable> zu der
	Gruppe <literal>video</literal> hinzuzufügen, bzw. zur Gruppe
	<literal>wheel</literal>, falls die Gruppe
	<literal>video</literal> nicht existiert:</para>

      <screen>&prompt.root; <userinput>pw groupmod video -m <replaceable>slurms</replaceable> || pw groupmod wheel -m <replaceable>slurms</replaceable></userinput></screen>
    </sect2>

    <sect2 xml:id="x-config-kms">
      <title>Kernel Mode Setting (<acronym>KMS</acronym>)</title>

      <para>Wenn der Computer die Anzeige von der Konsole auf eine
	höhere Bildschirmauflösung für X umstellt, muss der
	Videoausgabe-Modus eingestellt werden.  Neuere Versionen von
	<application>&xorg;</application> verwenden dazu ein System
	innerhalb des Kernels, um diesen Modus effizienter zu ändern.
	Ältere Versionen von &os; verwenden dafür &man.sc.4;, welches
	jedoch nicht mit dem <acronym>KMS</acronym>-System umgehen
	kann.  Das führt dazu, dass nach dem Schließen von X die
	Konsole leer bleibt, obwohl sie weiterhin funktioniert.  Die
	neuere &man.vt.4; Konsole vermeidet dieses Problem.</para>

      <para>Fügen Sie diese Zeile in
	<filename>/boot/loader.conf</filename> ein um &man.vt.4; zu
	aktivieren:</para>

      <programlisting>kern.vty=vt</programlisting>
    </sect2>

    <sect2 xml:id="x-config-files">
      <title>Konfigurationsdateien</title>

      <sect3 xml:id="x-config-files-directory">
	<title>Verzeichnis</title>

	<para><application>&xorg;</application> sucht in verschiedenen
	  Verzeichnissen nach Konfigurationsdateien.  Unter &os; ist
	  <filename>/usr/local/etc/X11/</filename> das bevorzugte
	  Verzeichnis für diese Dateien.  Die Verwendung dieses
	  Verzeichnisses hilft dabei, Anwendungsdateien vom
	  Betriebssystem getrennt zu halten.</para>

	<para>Das Speichern von Konfigurationsdateien unter
	  <filename>/etc/X11/</filename> funktioniert immer noch,
	  allerdings vermischt diese Methode Anwendungsdateien mit
	  Dateien des Basissystems und wird daher nicht
	  empfohlen.</para>
      </sect3>

      <sect3 xml:id="x-config-files-single-or-multiple">
	<title>Einzelne oder mehrere Dateien</title>

	<para>Anstatt die traditionelle
	  <filename>xorg.conf</filename> zu verwenden, ist es
	  einfacher, mehrere Dateien, die jeweils eine bestimmte
	  Einstellung konfigurieren, zu verwenden.  Diese Dateien
	  werden im Unterverzeichnis <filename>xorg.conf.d/</filename>
	  des Hauptverzeichnisses gespeichert.  Der vollständige Pfad
	  ist normalerweise
	  <filename>/usr/local/etc/X11/xorg.conf.d/</filename>.</para>

	<para>Beispiele für diese Dateien werden später in diesem
	  Abschnitt vorgestellt.</para>

	<para>Die traditionelle, einzelne
	  <filename>xorg.conf</filename> funktioniert weiterhin, ist
	  jedoch nicht so übersichtlich und flexibel wie die
	  Verwendung von mehreren Dateien im Unterverzeichnis
	  <filename>xorg.conf.d/</filename>.</para>
      </sect3>
    </sect2>

    <sect2 xml:id="x-config-video-cards">
      <title>Grafikkarten</title>

      <variablelist>
	<varlistentry xml:id="x-config-video-cards-intel">
	  <term>&intel;</term>

	  <listitem>
	    <para>3D-Beschleunigung wird von den meisten
	      &intel;-Grafikkarten unterstützt, einschließlich
	      IronLake, SandyBridge und IvyBridge.</para>
	  </listitem>
	</varlistentry>

	<varlistentry xml:id="x-config-video-cards-radeon">
	  <term>&amd; Radeon</term>

	  <listitem>
	    <para>2D- und 3D-Beschleunigung wird von den
	      meisten Radeon-Karten bis zur HD6000-Serie
	      unterstützt.</para>
	  </listitem>
	</varlistentry>

	<varlistentry xml:id="x-config-video-cards-nvidia">
	  <term>NVIDIA</term>

	  <listitem>
	    <para>Verschiedene NVIDIA Treiber sind in der
	      Kategorie <filename>x11</filename> der Ports-Sammlung
	      enthalten.  Installieren Sie den Treiber, der für die
	      Grafikkarte benötigt wird.</para>
	  </listitem>
	</varlistentry>

	<varlistentry xml:id="x-config-video-cards-hybrid">
	  <term>Hybride Kombinationen</term>

	  <listitem>
	    <para>Einige Notebooks besitzen zusätzlich zum Chipsatz
	      oder Prozessor einen Grafikprozessor.
	      <emphasis>Optimus</emphasis> kombiniert &intel; und
	      NVIDIA Hardware.
	      <emphasis>Umschaltbare Grafik</emphasis> bzw.
	      <emphasis>Hybride Grafik</emphasis> ist eine Kombination
	      aus &intel; und einer &amd; Radeon
	      <acronym>GPU</acronym>.</para>

	    <para>Die Implementierungen dieser Hybrid-Grafik-Systeme
	      variieren und &xorg; in &os; ist nicht in der Lage, alle
	      Versionen der Hardware zu betreiben.</para>

	    <para>Einige Computer bieten jedoch eine
	      <acronym>BIOS</acronym>-Option, um eine der beiden
	      Grafikkarten zu deaktivieren oder den
	      <emphasis>diskreten</emphasis> Modus einzuschalten.
	      Zum Beispiel ist es manchmal möglich, die NVIDIA
	      <acronym>GPU</acronym> in einem Optimus-System zu
	      deaktivieren.  &intel; Video kann dann mit einem &intel;
	      Treiber verwendet werden.</para>

	    <para>Die <acronym>BIOS</acronym>-Einstellungen sind
	      abhängig vom Modell des Computers.</para>
	  </listitem>
	</varlistentry>

	<varlistentry xml:id="x-config-video-cards-other">
	  <term>Andere Grafikkarten</term>

	  <listitem>
	    <para>Treiber für weniger gebräuchliche Grafikkarten
	      finden Sie in der Kategorie
	      <filename>x11-drivers</filename> der
	      Ports-Sammlung.</para>

	    <para>Karten, die nicht durch einen speziellen Treiber
	      unterstützt werden, sind vielleicht noch mit dem Treiber
	      <package>x11-drivers/xf86-video-vesa</package> nutzbar.
	      Dieser Treiber wird von <package>x11/xorg</package>
	      installiert.  Der Treiber kann auch manuell als
	      <package>x11-drivers/xf86-video-vesa</package>
	      installiert werden.  &xorg; versucht immer diesen
	      Treiber zu verwenden, wenn für die Grafikkarte kein
	      passender Treiber gefunden wird.</para>

	    <para><package>x11-drivers/xf86-video-scfb</package> ist
	      ein ähnlicher Treiber, der mit vielen
	      <acronym>UEFI</acronym> und &arm; Computern
	      funktioniert.</para>
	  </listitem>
	</varlistentry>
      </variablelist>
    </sect2>

    <sect2 xml:id="x-config-monitors">
      <title>Monitore</title>

      <para>Fast alle Monitore unterstützen den Extended Display
	Identification Data Standard (<acronym>EDID</acronym>).
	&xorg; verwendet <acronym>EDID</acronym> um mit dem Monitor zu
	kommunizieren und die unterstützten Auflösungen und
	Bildwiederholfrequenzen zu erkennen.  &xorg; wählt dann die
	für den Monitor am besten geeignete Kombination von
	Einstellungen.</para>

      <para>Weitere vom Monitor unterstützte Auflösungen, können in
	der Konfigurationsdatei, oder nach dem Start des X-Servers mit
	&man.xrandr.1; gesetzt werden.</para>

      <variablelist>
	<varlistentry xml:id="x-config-monitors-xrandr">
	  <term>&man.xrandr.1; benutzen</term>

	  <listitem>
	    <para>Führen Sie &man.xrandr.1; ohne Parameter aus, um
	      eine Liste von Video-Ausgängen und erkannten
	      Monitor-Modi zu sehen:</para>

	    <screen>&prompt.user; <userinput>xrandr</userinput>
Screen 0: minimum 320 x 200, current 3000 x 1920, maximum 8192 x 8192
DVI-0 connected primary 1920x1200+1080+0 (normal left inverted right x axis y axis) 495mm x 310mm
   1920x1200     59.95*+
   1600x1200     60.00
   1280x1024     85.02    75.02    60.02
   1280x960      60.00
   1152x864      75.00
   1024x768      85.00    75.08    70.07    60.00
   832x624       74.55
   800x600       75.00    60.32
   640x480       75.00    60.00
   720x400       70.08
DisplayPort-0 disconnected (normal left inverted right x axis y axis)
HDMI-0 disconnected (normal left inverted right x axis y axis)</screen>

	    <para>Die Auflistung zeigt, dass der
	      <literal>DVI-0</literal> Ausgang benutzt wird, um eine
	      Bildschirmauflösung von 1920x1200 bei einer
	      Bildwiederholrate von 60 Hz anzuzeigen.  An den
	      Anschlüssen <literal>DisplayPort-0</literal> und
	      <literal>HDMI-0</literal> sind keine Monitore
	      angeschlossen.</para>

	    <para>Die anderen Anzeigemodi können mit &man.xrandr.1;
	      ausgewählt werden.  Um beispielsweise auf 1280x1024 bei
	      60 Hz umzuschalten:</para>

	    <screen>&prompt.user; <userinput>xrandr --mode 1280x1024 --rate 60</userinput></screen>

	    <para>Häufig wird für einen Videoprojektor der externe
	      Videoausgang eines Notebooks verwendet.</para>

	    <para>Da die Namen und Typen der Videoanschlüsse
	      variieren, führen Sie &man.xrandr.1; ohne Optionen aus,
	      um eine Liste der Ausgänge anzuzeigen:</para>

	    <screen>&prompt.user; <userinput>xrandr</userinput>
Screen 0: minimum 320 x 200, current 1366 x 768, maximum 8192 x 8192
LVDS1 connected 1366x768+0+0 (normal left inverted right x axis y axis) 344mm x 193mm
   1366x768      60.04*+
   1024x768      60.00
   800x600       60.32    56.25
   640x480       59.94
VGA1 connected (normal left inverted right x axis y axis)
   1280x1024     60.02 +  75.02
   1280x960      60.00
   1152x864      75.00
   1024x768      75.08    70.07    60.00
   832x624       74.55
   800x600       72.19    75.00    60.32    56.25
   640x480       75.00    72.81    66.67    60.00
   720x400       70.08
HDMI1 disconnected (normal left inverted right x axis y axis)
DP1 disconnected (normal left inverted right x axis y axis)</screen>

	    <para>Vier Ausgänge wurden gefunden: das integrierte Panel
	      <literal>LVDS1</literal>, sowie die externen Anschlüsse
	      <literal>VGA1</literal>, <literal>HDMI1</literal> und
	      <literal>DP1</literal>.</para>

	    <para>Der Videoprojektor wurde am Ausgang
	      <literal>VGA1</literal> angeschlossen.  &man.xrandr.1;
	      wird nun verwendet, um diese Ausgabe auf die native
	      Auflösung des Projektors einzustellen und den
	      zusätzlichen Platz auf der rechten Seite des Desktops
	      hinzuzufügen:</para>

	    <screen>&prompt.user; <userinput>xrandr --output VGA1 --auto --right-of LVDS1</userinput></screen>

	    <para><literal>--auto</literal> wählt die Auflösung und
	      Aktualisierungsrate die von <acronym>EDID</acronym>
	      ermittelt wurden.  Wenn die Auflösung nicht richtig
	      ermittelt wurde, kann ein fester Wert mit
	      <literal>--mode</literal> anstelle von
	      <literal>--auto</literal> angegeben werden.
	      Beispielsweise können die meisten Projektoren mit einer
	      Auflösung von 1024x768 betrieben werden, die mit
	      <literal>--mode 1024x768</literal> gesetzt wird.</para>

	    <para>&man.xrandr.1; wird häufig aus
	      <filename>.xinitrc</filename> ausgeführt, um den
	      entsprechenden Modus zu setzen wenn X startet.</para>
	  </listitem>
	</varlistentry>

	<varlistentry xml:id="x-config-monitors-files">
	  <term>Bildschirmauflösung über eine Datei einstellen</term>

	  <listitem>
	    <para>Eine Bildschirmauflösung von 1024x768 in einer
	      Konfigurationsdatei einstellen:</para>

	    <programlisting>Section "Screen"
	Identifier "Screen0"
	Device     "Card0"
	SubSection "Display"
	Modes      "1024x768"
	EndSubSection
EndSection</programlisting>

	    <para>Die wenigen Monitore, die <acronym>EDID</acronym>
	      nicht beherrschen, können durch setzen von
	      <literal>HorizSync</literal> und
	      <literal>VertRefresh</literal> auf den Bereich der
	      vom Monitor unterstützten Frequenzen konfiguriert
	      werden.</para>

	    <example>
	      <title>Manuelles Einstellen der
		Monitorfrequenzen</title>

	      <para><filename>/usr/local/etc/X11/xorg.conf.d/monitor0-freq.conf</filename></para>

	      <programlisting>Section "Monitor"
	Identifier   "Monitor0"
	HorizSync    30-83  # kHz
	VertRefresh  50-76  # Hz
EndSection</programlisting>
	    </example>
	  </listitem>
	</varlistentry>
      </variablelist>
    </sect2>

    <sect2 xml:id="x-config-input">
      <title>Eingabegeräte</title>

      <sect3 xml:id="x-config-input-keyboard">
	<title>Tastaturen</title>

	<variablelist>
	  <varlistentry xml:id="x-config-input-keyboard-layout">
	    <term>Tastaturlayout</term>

	    <listitem>
	      <para>Die standardisierte Position von Tasten auf einer
		Tastatur wird als <emphasis>Layout</emphasis>
		bezeichnet.  Layouts und andere einstellbare Parameter
		werden in &man.xkeyboard-config.7; beschrieben.</para>

	      <para>In der Voreinstellung ist ein US-amerikanisches
		Layout aktiv.  Um ein alternatives Layout zu wählen,
		setzen Sie die Optionen
		<literal>XkbLayout</literal> und
		<literal>XkbVariant</literal> in der Klasse
		<literal>InputClass</literal>.  Dies wird für alle
		Eingabegeräte der entsprechenden Klasse angewendet
		werden.</para>

	      <example>
		<title>Konfiguration des Tastaturlayouts</title>

		<para><filename>/usr/local/etc/X11/xorg.conf.d/keyboard-fr-oss.conf</filename></para>

		<programlisting>Section "InputClass"
	Identifier	"KeyboardDefaults"
	Driver		"keyboard"
	MatchIsKeyboard	"on"
	Option		"XkbLayout" "fr"
	Option		"XkbVariant" "oss"
EndSection</programlisting>
	      </example>
	    </listitem>
	  </varlistentry>

	  <varlistentry xml:id="x-config-input-keyboard-zap">
	    <term>&xorg; über die Tastatur beenden</term>

	    <listitem>
	      <para>X kann über eine Tastenkombination geschlossen
		werden.  Standardmäßig ist die Tastenkombination
		jedoch nicht gesetzt, da sie mit Tastaturbefehlen für
		einige Anwendungen in Konflikt steht.  Die Aktivierung
		dieser Option erfordert Änderungen in der Sektion
		<literal>InputDevice</literal> für die
		Tastatur:</para>

	      <example>
		<title>X über die Tastatur beenden</title>

		<para><filename>/usr/local/etc/X11/xorg.conf.d/keyboard-zap.conf</filename></para>

		<programlisting>Section "InputClass"
	Identifier	"KeyboardDefaults"
	Driver		"keyboard"
	MatchIsKeyboard	"on"
	Option		"XkbOptions" "terminate:ctrl_alt_bksp"
EndSection</programlisting>
	      </example>
	    </listitem>
	  </varlistentry>
	</variablelist>
      </sect3>

      <sect3 xml:id="x11-input-mice">
	<title>Mäuse und Zeigegeräte</title>

	<para>Viele Parameter für die Maus können über
	  Konfigurationseinstellungen eingestellt werden.
	  &man.mousedrv.4x; enthält eine vollständige Liste.</para>

	<variablelist>
	  <varlistentry xml:id="x11-input-mice-buttons">
	    <term>Mauszeiger</term>

	    <listitem>
	      <para>Die Anzahl der Maustasten wird in
		<filename>xorg.conf</filename> im Abschnitt
		<literal>InputDevice</literal> für die Maus
		festgelegt.  Um die Anzahl der Tasten auf
		7 zu setzen:</para>

	      <example>
		<title>Die Anzahl der Maustasten festlegen</title>

		<para><filename>/usr/local/X11/xorg.conf.d/mouse0-buttons.conf</filename></para>

		<programlisting>Section "InputDevice"
	Identifier  "Mouse0"
	Option	    "Buttons" "7"
EndSection</programlisting>
	      </example>
	    </listitem>
	  </varlistentry>
	</variablelist>
      </sect3>
    </sect2>

    <sect2 xml:id="x-config-manual-configuration">
      <title>Manuelle Konfiguration</title>

      <para>In einigen Fällen funktioniert die Autokonfiguration nicht
	mit bestimmter Hardware, oder es wird eine andere
	Konfiguration benötigt.  Für diese Fälle kann eine
	benutzerdefinierte Konfigurationsdatei erstellt werden.</para>

      <para>Eine Konfigurationsdatei kann, basierend auf der von
	&xorg; erfassten Hardware erzeugt werden.  Diese
	Konfigurationsdatei ist ein guter Ausgangspunkt für angepasste
	Konfigurationen.</para>

      <para>Erzeugung einer <filename>xorg.conf</filename>:</para>

      <screen>&prompt.root; <userinput>Xorg -configure</userinput></screen>

      <para>Die Konfigurationsdatei wird in
	<filename>/root/xorg.conf.new</filename> gespeichert.  Machen
	Sie alle gewünschten Änderungen an dieser Datei.  Danach
	testen Sie die Datei mit:</para>

      <screen>&prompt.root; <userinput>Xorg -config /root/xorg.conf.new</userinput></screen>

      <para>Nachdem die neue Konfiguration angepasst und getestet
	wurde, kann die Konfiguration in kleinere Dateien unter
	<filename>/usr/local/etc/X11/xorg.conf.d/</filename>
	aufgeteilt werden.</para>
    </sect2>
  </sect1>

  <sect1 xml:id="x-fonts">
    <info>
      <title>Schriftarten in <application>&xorg;</application>
	benutzen</title>

      <!--
	   <authorgroup>
	    <author>
	      <firstname>Murray</firstname>
	      <surname>Stokley</surname>
	      <contrib>Contributed by </contrib>
	    </author>
	  </authorgroup>
	-->
    </info>

    <sect2 xml:id="type1">
      <title>Type 1 Schriftarten</title>

      <para>Die Schriftarten, die mit
	<application>&xorg;</application> ausgeliefert werden, eignen
	sich ganz und gar nicht für Desktop-Publishing-Anwendungen.
	Große Schriftarten zeigen bei Präsentationen deutliche
	Treppenstufen und kleine Schriftarten sind fast unleserlich.
	Es gibt allerdings mehrere hochwertige Type 1 Schriftarten
	(&postscript;), die mit &xorg; benutzt werden können.
	Beispielsweise enthalten die URW-Schriftarten
	(<package>x11-fonts/urwfonts</package>) hochwertige Versionen
	gängiger Type 1 Schriftarten (unter anderem
	<trademark class="registered">Times Roman</trademark>,
	<trademark class="registered">Helvetica</trademark>,
	<trademark class="registered">Palatino</trademark>).  Die
	Sammlung Freefonts (<package>x11-fonts/freefonts</package>)
	enthält viele weitere Schriftarten, doch sind diese für den
	Einsatz in Grafikprogrammen wie
	<application>Gimp</application> gedacht und nicht für den
	alltäglichen Gebrauch.  Weiterhin kann
	<application>&xorg;</application> mit einem Minimum an Aufwand
	konfiguriert werden, damit &truetype;-Schriftarten benutzt
	werden können.  Mehr dazu erfahren Sie in der Manualpage
	&man.X.7; und im <xref linkend="truetype"/>.</para>

      <para>Die Type 1 Schriftarten lassen sich aus der Ports-Sammlung
	wie folgt installieren:</para>

      <screen>&prompt.root; <userinput>cd /usr/ports/x11-fonts/urwfonts</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>

      <para>Analog lassen sich Freefont und andere Sammlungen
	installieren.  Damit der X-Server diese Schriftarten erkennt,
	fügen Sie eine entsprechende Zeile in die Konfigurationsdatei
	des X-Servers (<filename>/etc/X11/xorg.conf</filename>)
	hinzu:</para>

      <programlisting>FontPath "/usr/local/share/fonts/urwfonts/"</programlisting>

      <para>Alternativ kann in der X-Sitzung das folgende Kommando
	abgesetzt werden:</para>

      <screen>&prompt.user; <userinput>xset fp+ /usr/local/share/fonts/urwfonts</userinput>
&prompt.user; <userinput>xset fp rehash</userinput></screen>

      <para>Jetzt kennt der X-Server die neuen Schriftarten, jedoch
	nur bis zu Ende der Sitzung.  Soll die Änderung dauerhaft
	sein, müssen die Befehle in <filename>~/.xinitrc</filename>
	eingetragen werden, wenn X mittels <command>startx</command>
	gestartet wird, beziehungsweise in
	<filename>~/.xsession</filename>, wenn ein grafischer
	Login-Manager, wie <application>XDM</application> verwendet
	wird.  Eine dritte Möglichkeit besteht darin,
	<filename>/usr/local/etc/fonts/local.conf</filename> zu
	verwenden, was im <xref linkend="antialias"/> demonstriert
	wird.</para>
    </sect2>

    <sect2 xml:id="truetype">
      <title>&truetype;-Schriftarten</title>

      <indexterm>
	<primary>TrueType Schriftarten</primary>
      </indexterm>
      <indexterm>
	<primary>Schriftarten</primary>
	<secondary>TrueType</secondary>
      </indexterm>

      <para>&xorg; besitzt eine eingebaute Unterstützung zur
	Darstellung von &truetype;-Schriftarten.  Hierzu existieren
	zwei verschiedene Module, die diese Funktionalität aktivieren
	können.  In diesem Beispiel wird das Freetype-Modul benutzt,
	da es besser mit anderen Werkzeugen, die
	&truetype;-Schriftarten darstellen, übereinstimmt.  Um das
	Freetype-Modul zu aktivieren, muss die folgende Zeile zum
	Abschnitt <literal>"Module"</literal> in
	<filename>/etc/X11/xorg.conf</filename> hinzugefügt
	werden.</para>

      <programlisting>Load "freetype"</programlisting>

      <para>Erstellen Sie ein Verzeichnis für die
	&truetype;-Schriftarten (beispielsweise
	<filename>/usr/local/share/fonts/TrueType</filename>) und
	kopieren Sie alle Schriftarten dorthin.  Beachten Sie, dass
	die Schriftarten für <application>&xorg;</application> im
	&unix;/&ms-dos;/&windows;-Format vorliegen müssen und nicht
	direkt von einem &apple; &mac; übernommen werden können.
	Sobald die Dateien in das Verzeichnis kopiert wurden,
	verwenden Sie <application>ttmkfdir</application> um
	<filename>fonts.dir</filename> zu erstellen, damit X
	weiß, dass diese neuen Dateien installiert wurden.
	<command>ttmkfdir</command> ist in der &os; Ports-Sammlung
	unter <package>x11-fonts/ttmkfdir</package> verfügbar.</para>

      <screen>&prompt.root; <userinput>cd /usr/local/share/fonts/TrueType</userinput>
&prompt.root; <userinput>ttmkfdir -o fonts.dir</userinput></screen>

      <para>Geben Sie dem System das &truetype;-Verzeichnis, wie im
	<xref linkend="type1"/> beschrieben, bekannt:</para>

      <screen>&prompt.root; <userinput>xset fp+ /usr/local/share/fonts/TrueType</userinput>
&prompt.root; <userinput>xset fp rehash</userinput></screen>

      <para>Oder fügen Sie eine <literal>FontPath</literal>-Zeile in
	<filename>xorg.conf</filename> ein.</para>

      <para>Jetzt sollten <application>Gimp</application>,
	<application>Apache OpenOffice</application> und alle anderen
	X-Anwendungen die &truetype;-Schritarten erkennen.  Extrem
	kleine Schriftarten (Webseiten, die mit hoher Auflösung
	betrachtet werden) und sehr große Schriftarten
	(in &staroffice;) werden jetzt viel besser aussehen.</para>
    </sect2>

    <sect2 xml:id="antialias">
      <info>
	<title>Anti-aliasing</title>

	<!--
	<authorgroup>
	  <author><personname><firstname>Joe Marcus</firstname><surname>Clarke</surname></personname><contrib>Aktualisiert im Mai 2003 von </contrib></author>
	</authorgroup>
	-->
      </info>

      <indexterm>
	<primary>Anti-aliasing</primary>
      </indexterm>
      <indexterm>
	<primary>Schriftarten</primary>
	<secondary>Anti-aliasing</secondary>
      </indexterm>

      <para>Alle Schriftarten in <application>&xorg;</application>,
	die in den Verzeichnissen
	<filename>/usr/local/share/fonts/</filename> und
	<filename>~/.fonts/</filename> gefunden werden, werden
	automatisch für Anti-aliasing an Anwendungen zur Verfügung
	gestellt, die Xft beherrschen.  Die meisten aktuellen
	Anwendungen beherrschen Xft, dazu gehören auch
	<application>KDE</application>,
	<application>GNOME</application> und
	<application>Firefox</application>.</para>

      <para>In der Datei
	<filename>/usr/local/etc/fonts/local.conf</filename>
	werden die Schriftarten, die mit dem Anti-aliasing-Verfahren
	benutzt werden sollen und die Eigenschaften des Verfahrens
	festgelegt.  In diesem Abschnitt wird nur die grundlegende
	Konfiguration von Xft beschrieben.  Weitere Details entnehmen
	Sie bitte der Hilfeseite &man.fonts-conf.5;.</para>

      <indexterm><primary>XML</primary></indexterm>

      <para>Die Datei <filename>local.conf</filename> ist ein
	XML-Dokument.  Achten Sie beim
	Editieren der Datei daher auf die richtige Groß- und
	Kleinschreibung und darauf, dass alle Tags geschlossen
	sind.  Die Datei beginnt mit der üblichen XML-Deklaration
	gefolgt von einer DOCTYPE-Definition und dem
	<literal>&lt;fontconfig&gt;</literal>-Tag:</para>

      <programlisting>        &lt;?xml version="1.0"?&gt;
        &lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;
        &lt;fontconfig&gt;
      </programlisting>

      <para>Wie vorher erwähnt, stehen schon alle Schriftarten
	in <filename>/usr/local/share/fonts/</filename> und
	<filename>~/.fonts/</filename> für Anwendungen, die
	Xft unterstützen, zur Verfügung.  Wenn Sie ein
	Verzeichnis außerhalb dieser beiden Bäume
	benutzen wollen, fügen Sie eine Zeile wie die
	nachstehende zu
	<filename>/usr/local/etc/fonts/local.conf</filename> hinzu:</para>

      <programlisting>&lt;dir&gt;/path/to/my/fonts&lt;/dir&gt;</programlisting>

      <para>Wenn Sie neue Schriftarten hinzugefügt haben,
	müssen Sie den Schriftarten-Cache neu aufbauen:</para>

      <screen>&prompt.root; <userinput>fc-cache -f</userinput></screen>

      <para>Das Anti-aliasing-Verfahren zeichnet Ränder leicht
	unscharf, dadurch werden kleine Schriften besser lesbar und
	der Treppenstufen-Effekt bei wird großen Schriften vermieden.
	Auf normale Schriftgrößen sollte das Verfahren aber nicht
	angewendet werden, da dies die Augen zu sehr anstrengt.  Um
	kleinere Schriftgrößen als 14&nbsp;Punkt von dem Verfahren
	auszuschließen, fügen Sie in <filename>local.conf</filename>
	die nachstehenden Zeilen ein:</para>

      <programlisting>        &lt;match target="font"&gt;$
	>>>>&lt;test name="size" compare="less"&gt;$
	>>>>>>>>&lt;double&gt;14&lt;/double&gt;$
	>>>>&lt;/test&gt;$
	>>>>&lt;edit name="antialias" mode="assign"&gt;$
	>>>>>>>>&lt;bool&gt;false&lt;/bool&gt;$
	>>>>&lt;/edit&gt;$
	>>&lt;/match&gt;$
	>>&lt;match target="font"&gt;$
	>>>>&lt;test name="pixelsize" compare="less" qual="any"&gt;$
	>>>>>>>>&lt;double&gt;14&lt;/double&gt;$
	>>>>&lt;/test&gt;$
	>>>>&lt;edit mode="assign" name="antialias"&gt;$
	>>>>>>>>&lt;bool&gt;false&lt;/bool&gt;$
	>>>>&lt;/edit&gt;$
	>>&lt;/match&gt;</programlisting>

      <indexterm>
        <primary>Schriftarten</primary>
        <secondary>Abstände</secondary>
      </indexterm>

      <para>Das Anti-aliasing-Verfahren kann die Abstände einiger
	Fixschriften falsch darstellen, dies fällt besonders unter
	<application>KDE</application> auf.  Sie können das Problem
	umgehen, indem Sie die Abstände dieser Schriften auf den Wert
	<literal>100</literal> festsetzen.  Fügen Sie die
	nachstehenden Zeilen hinzu:</para>

      <programlisting>       &lt;match target="pattern" name="family"&gt;
           &lt;test qual="any" name="family"&gt;
               &lt;string&gt;fixed&lt;/string&gt;
           &lt;/test&gt;
           &lt;edit name="family" mode="assign"&gt;
               &lt;string&gt;mono&lt;/string&gt;
           &lt;/edit&gt;
        &lt;/match&gt;
        &lt;match target="pattern" name="family"&gt;
            &lt;test qual="any" name="family"&gt;
                &lt;string&gt;console&lt;/string&gt;
            &lt;/test&gt;
            &lt;edit name="family" mode="assign"&gt;
                &lt;string&gt;mono&lt;/string&gt;
            &lt;/edit&gt;
        &lt;/match&gt;</programlisting>

      <para>Damit werden die Namen der gebräuchlichen Fixschriften auf
	<literal>"mono"</literal> abgebildet.  Für diese Schriften
	setzen Sie dann den Abstand fest:</para>

      <programlisting>         &lt;match target="pattern" name="family"&gt;
             &lt;test qual="any" name="family"&gt;
                 &lt;string&gt;mono&lt;/string&gt;
             &lt;/test&gt;
             &lt;edit name="spacing" mode="assign"&gt;
                 &lt;int&gt;100&lt;/int&gt;
             &lt;/edit&gt;
         &lt;/match&gt;      </programlisting>

      <para>Bestimmte Schriftarten, wie Helvetica, können
	Probleme mit dem Anti-Aliasing-Verfahren verursachen.
	In der Regel erscheinen diese Schriftarten dann vertikal
	halbiert.  Im schlimmsten Fall stürzen Anwendungen als Folge
	davon ab.  Sie vermeiden dies, indem Sie betroffene
	Schriftarten in <filename>local.conf</filename> von dem
	Verfahren ausnehmen:</para>

      <programlisting>         &lt;match target="pattern" name="family"&gt;
             &lt;test qual="any" name="family"&gt;
                 &lt;string&gt;Helvetica&lt;/string&gt;
             &lt;/test&gt;
             &lt;edit name="family" mode="assign"&gt;
                 &lt;string&gt;sans-serif&lt;/string&gt;
             &lt;/edit&gt;
         &lt;/match&gt;        </programlisting>

      <para>Wenn Sie <filename>local.conf</filename> editiert haben,
	stellen Sie bitte sicher, dass die Datei mit dem Tag
	<literal>&lt;/fontconfig&gt;</literal> endet.  Ist das
	nicht der Fall, werden die Änderungen nicht
	berücksichtigt.</para>

      <para>Benutzer können eigene Einstellungen in der
	Datei <filename>~/.fonts.conf</filename> vornehmen.
	Achten Sie auch hier auf die richtige XML-Syntax.</para>

      <indexterm><primary>LCD</primary></indexterm>
      <indexterm>
	<primary>Schriftarten</primary>
	<secondary>auf einem LCD</secondary>
      </indexterm>

      <para>Mit einem <acronym>LCD</acronym> können Sie
	<foreignphrase>sub-pixel sampling</foreignphrase> anstelle von
	Anti-aliasing einsetzen.  Dieses Verfahren behandelt die
	horizontal getrennten Rot-, Grün- und Blau-Komponenten eines
	Pixels gesondert und verbessert damit (teilweise sehr wirksam)
	die horizontale Auflösung.  Die nachstehende Zeile in
	<filename>local.conf</filename> aktiviert diese
	Funktion:</para>

      <programlisting>         &lt;match target="font"&gt;
             &lt;test qual="all" name="rgba"&gt;
                 &lt;const&gt;unknown&lt;/const&gt;
             &lt;/test&gt;
             &lt;edit name="rgba" mode="assign"&gt;
                 &lt;const&gt;rgb&lt;/const&gt;
             &lt;/edit&gt;
         &lt;/match&gt;</programlisting>

      <note><para>Abhängig von der Art Ihres Bildschirms
	müssen Sie anstelle von <literal>rgb</literal> eines
	der folgenden verwenden: <literal>bgr</literal>,
	<literal>vrgb</literal> oder <literal>vbgr</literal>.
	Experimentieren Sie und vergleichen, was besser
	aussieht.</para>
      </note>
    </sect2>
  </sect1>

  <sect1 xml:id="x-xdm">
    <info>
      <title>Der X-Display-Manager</title>

      <authorgroup>
	<author>
	  <personname>
	    <firstname>Seth</firstname>
	    <surname>Kingsley</surname>
	  </personname>
	  <contrib>Beigetragen von </contrib>
	</author>
      </authorgroup>
    </info>

      <indexterm><primary>X-Display-Manager</primary></indexterm>

      <para><application>&xorg;</application> enthält den
	X-Display-Manager <application>XDM</application>, um Sitzungen
	zu verwalten.  <application>XDM</application> stellt eine
	graphische Anmeldemaske zur Verfügung, in der Sie den Server,
	auf dem eine Sitzung laufen soll, auswählen können und in der
	Sie die Autorisierungs-Informationen, wie Benutzername und
	Passwort, eingeben können.</para>

      <para>Dieser Abschnitt zeigt, wie der X-Displaymanager
	konfiguriert wird.  Einige grafische Oberflächen enthalten
	ihre eigenen graphischen Login-Manager.  Eine Anleitung zur
	Konfiguration des GNOME Display-Managers finden Sie im <xref
	  linkend="x11-wm-gnome"/>.  Eine Anleitung zur Konfiguration
	des KDE Display Managers finden Sie im <xref
	  linkend="x11-wm-kde"/>.</para>

    <sect2>
      <title><application>XDM</application> einrichten</title>

      <para><application>XDM</application> kann über das Paket oder
	den Port <package>x11/xdm</package> installiert werden.  Nach
	der Installation lässt sich <application>XDM</application>
	durch einen Eintrag in <filename>/etc/ttys</filename> bei
	jedem Start des Rechners aktivieren:</para>

      <programlisting>ttyv8   "/usr/local/bin/xdm -nodaemon"  xterm   off secure</programlisting>

      <para>Ändern Sie den Wert <literal>off</literal> zu
	<literal>on</literal> und speichern Sie die Datei.
	<literal>ttyv8</literal> zeigt an, dass
	<application>XDM</application> auf dem neunten virtuellen
	Terminal ausgeführt wird.</para>

      <para>Die Konfigurationsdateien von
	<application>XDM</application> befinden sich in
	<filename>/usr/local/lib/X11/xdm</filename>.  Dieses
	Verzeichnis enthält einige Dateien, mit denen das Verhalten
	und Aussehen von <application>XDM</application> beeinflusst
	werden kann, sowie ein paar Skripte und Programme
	zur Einrichtung des Desktops.  Eine Zusammenfassung der
	Aufgaben dieser Dateien beschreibt die <xref
	  linkend="xdm-config-files"/>.  Die genaue Syntax und
	Verwendung wird in &man.xdm.1; beschrieben.</para>

      <table frame="none" pgwide="1" xml:id="xdm-config-files">
	<title>Die Konfigurationsdateien von XDM</title>

	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>Datei</entry>
		<entry>Beschreibung</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry><filename>Xaccess</filename></entry>
	      <entry>Verbindungen zu <application>XDM</application>
		werden über das <quote>X Display Manager Connection
		Protocol</quote> (<acronym>XDMCP</acronym>)
		hergestellt.  <filename>Xaccess</filename> enthält
		die Client-Berechtigungen zur Steuerung der
		<acronym>XDMCP</acronym>-Verbindungen entfernter
		Maschinen.  In der Voreinstellung erlaubt diese
		Datei keine Verbindungen von entfernten
		Maschinen.</entry>
	    </row>

	    <row>
	      <entry><filename>Xresources</filename></entry>
	      <entry>Diese Datei steuert das Erscheinungsbild der
		Bildschirmauswahl und Anmeldemasken von
		<application>XDM</application>.  In der
		Voreinstellung erscheint ein rechteckiges
		Anmeldefenster, dass den Hostnamen und einen
		Anmeldeprompt mit <quote>Login:</quote> und
		<quote>Password</quote> anzeigt.  Das Format dieser
		Datei entspricht den Dateien im Verzeichnis
		<filename>app-defaults</filename>, die
		in der Dokumentation von
		<application>&xorg;</application> beschrieben
		sind.</entry>
	    </row>

	    <row>
	      <entry><filename>Xservers</filename></entry>
	      <entry>Diese Datei enthält eine Liste entfernter
		Rechner, die in der Bildschirmauswahl angeboten
		werden.</entry>
	    </row>

	    <row>
	      <entry><filename>Xsession</filename></entry>
	      <entry>Dieses Skript wird von
		<application>XDM</application> aufgerufen, nachdem
		sich ein Benutzer erfolgreich angemeldet hat.
		Üblicherweise besitzt jeder Benutzer eine angepasste
		Version dieses Skripts in
		<filename>~/.xsession</filename>, das dann anstelle
		von <filename>Xsession</filename> ausgeführt
		wird.</entry>
	    </row>

	    <row>
	      <entry><filename>Xsetup_*</filename></entry>
	      <entry>Diese Skripten werden automatisch ausgeführt,
		bevor die Bildschirmauswahl oder die Anmeldemasken
		angezeigt werden.  Für jeden lokalen Bildschirm gibt
		es ein Skript namens <filename>Xsetup_*</filename>,
		wobei <literal>*</literal> die lokale
		Bildschirmnummer ist.  Normalerweise werden damit
		ein oder zwei Programme, wie
		<command>xconsole</command>, im Hindergrund
		gestartet.</entry>
	    </row>

	    <row>
	      <entry><filename>xdm-config</filename></entry>
	      <entry>Konfiguration für alle auf der Maschine
		verwalteten Bildschirme.</entry>
	    </row>

	    <row>
	      <entry><filename>xdm-errors</filename></entry>
	      <entry>Enthält Fehler, die vom Server generiert
		werden.  Wenn ein von <application>XDM</application>
		verwalteter Bildschirm hängen bleibt, suchen Sie in
		dieser Datei nach Fehlermeldungen.  Für jede Sitzung
		werden die Meldungen auch in die Datei
		<filename>~/.xsession-errors</filename> des
		Benutzers geschrieben.</entry>
	    </row>

	    <row>
	      <entry><filename>xdm-pid</filename></entry>
	      <entry>Die Prozess-<acronym>ID</acronym> des gerade
		laufenden
		<application>XDM</application>-Prozesses.</entry>
	    </row>
	  </tbody>
	</tgroup>
      </table>
    </sect2>

    <sect2>
      <title>Fernzugriff einrichten</title>

      <para>In der Voreinstellung können sich nur Benutzer auf
	dem selben System über <application>XDM</application>
	anmelden.  Um es Benutzern anderer Systeme zu ermöglichen,
	sich mit dem Bildschirm-Server zu verbinden, muss der
	Zugriffsregelsatz bearbeitet und der Listener aktiviert
	werden.</para>

      <para>Um <application>XDM</application> so zu konfigurieren,
	dass jede Verbindung angenommen wird, kommentieren Sie die
	Zeile <literal>DisplayManager.requestPort</literal> in
	<filename>/usr/local/lib/X11/xdm/xdm-config</filename> aus,
	indem Sie der Zeile ein <literal>!</literal>
	voranstellen.</para>

      <programlisting>! SECURITY: do not listen for XDMCP or Chooser requests
! Comment out this line if you want to manage X terminals with xdm
DisplayManager.requestPort:     0</programlisting>

      <para>Speichern Sie die Änderungen und starten Sie
	<application>XDM</application> neu.  Um den Fernzugriff zu
	beschränken, sehen Sie sich die Beispiele in
	<filename>/usr/local/lib/X11/xdm/Xaccess</filename> an.
	Zusätzliche Informationen finden Sie in &man.xdm.1;</para>
    </sect2>
  </sect1>

  <sect1 xml:id="x11-wm">
    <info>
      <title>Grafische Oberflächen</title>

      <authorgroup>
	<author>
	  <personname>
	    <firstname>Valentino</firstname>
	    <surname>Vaschetto</surname>
	</personname>
	<contrib>Beigetragen von </contrib>
	  <!-- im Juni 2001 -->
      </author>
      </authorgroup>
    </info>

    <para>Dieser Abschnitt beschreibt die Installation der drei
      beliebtesten grafischen Oberflächen unter &os;.  Eine
      Oberfläche kann alles von einem einfachen Window-Manager bis hin
      zu kompletten Anwendungen sein.  Mehr als einhundert grafische
      Oberflächen stehen in der Kategorie <filename>x11-wm</filename>
      der Ports-Sammlung zur Verfügung.</para>

    <sect2 xml:id="x11-wm-gnome">
      <title>GNOME</title>

	<indexterm><primary>GNOME</primary></indexterm>
	<para><application>GNOME</application> ist eine
	  benutzerfreundliche Oberfläche.  Es besitzt
	  eine Leiste, mit der Anwendungen gestartet werden und die
	  Statusinformationen anzeigen kann.  Programme und Daten
	  können auf der Oberfläche abgelegt werden und
	  Standardwerkzeuge stehen zur Verfügung.  Es gibt
	  Konventionen, die es Anwendungen leicht machen,
	  zusammenzuarbeiten und ein konsistentes Erscheinungsbild
	  garantieren.  Weitere Informationen zu
	  <application>GNOME</application> unter &os; finden Sie unter
	  <link
	    xlink:href="http://www.FreeBSD.org/gnome">http://www.FreeBSD.org/gnome</link>.
	  Die Webseite enthält zusätzliche Informationen über die
	  Installation, Konfiguration und Verwaltung von
	  <application>GNOME</application> unter &os;.</para>

	<para>Diese grafische Oberfläche kann als Paket installiert
	  werden:</para>

	<screen>&prompt.root; <userinput>pkg install gnome2</userinput></screen>

	<para>Um <application>GNOME</application> stattdessen aus der
	  Ports-Sammlung zu übersetzen, nutzen Sie das folgende
	  Kommando.  <application>GNOME</application> ist eine große
	  Anwendung, die sogar auf einem schnellen Computer einige
	  Zeit zum Übersetzten benötigt.</para>

        <screen>&prompt.root; <userinput>cd /usr/ports/x11/gnome2</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>

	<para>Damit <application>GNOME</application> korrekt
	  funktioniert, muss <filename>/proc</filename> eingehängt
	  sein.  Fügen Sie daher die folgende Zeile in
	  <filename>/etc/fstab</filename> ein, damit &man.procfs.5;
	  beim Systemstart automatisch eingehängt wird:</para>

	<programlisting>proc           /proc       procfs  rw  0   0</programlisting>

	<para>Nachdem <application>GNOME</application> installiert
	  ist, weisen Sie <application>&xorg;</application> an,
	  <application>GNOME</application> zu starten.  Der einfachste
	  Weg, dies zu tun, ist über den GNOME Display Manager
	  <application>GDM</application>, der als Teil des
	  <application>GNOME</application>-Desktops installiert wird.
	  Um <application>GDM</application> zu aktivieren, fügen Sie
	  folgende Zeile in <filename>/etc/rc.conf</filename>
	  ein:</para>

	<programlisting>gdm_enable="YES"</programlisting>

	<para>In der Regel ist es ratsam, alle
	  <application>GNOME</application>-Dienste zu starten.
	  Um dies zu erreichen, fügen Sie die folgende Zeile in
	  <filename>/etc/rc.conf</filename> ein:</para>

	<programlisting>gnome_enable="YES"</programlisting>

	<para><application>GDM</application> wird nun automatisch
	  gestartet, wenn das System hochfährt.</para>

	<para><application>GNOME</application> kann alternativ auch
	  von der Kommandozeile gestartet werden, wenn eine
	  entsprechend konfigurierte <filename>~/.xinitrc</filename>
	  vorliegt.  Existiert diese Datei bereits, ersetzen Sie den
	  Aufruf des Window-Managers durch
	  <application>/usr/local/bin/gnome-session</application>.
	  Wenn <filename>.xinitrc</filename> nicht existiert,
	  erstellen Sie die Datei mit folgendem Befehl:</para>

        <screen>&prompt.user; <userinput>echo "exec /usr/local/bin/gnome-session" &gt; ~/.xinitrc</userinput></screen>

	<para>Eine dritte Methode ist, <application>XDM</application>
	  als Display-Manager zu verwenden.  In diesem Fall erstellen
	  Sie eine ausführbare <filename>~/.xsession</filename>:</para>

          <screen>&prompt.user; <userinput>echo "#!/bin/sh" &gt; ~/.xsession</userinput>
&prompt.user; <userinput>echo "exec /usr/local/bin/gnome-session" &gt;&gt; ~/.xsession</userinput>
&prompt.user; <userinput>chmod +x ~/.xsession</userinput></screen>
    </sect2>

    <sect2 xml:id="x11-wm-kde">
      <title>KDE</title>

      <indexterm><primary>KDE</primary></indexterm>

      <para><application>KDE</application> ist eine weitere, leicht
	zu benutzende Desktop-Umgebung.  Dieser Desktop bietet eine
	Sammlung von Anwendungen mit einheitlichem Erscheinungsbild
	(<foreignphrase>look and feel</foreignphrase>),
	einheitlichen Menüs, Werkzeugleisten, Tastenkombinationen,
	Farbschemata, Internationalisierung und einer zentralen,
	dialoggesteuerten Desktop-Konfiguration.  Weitere
	Informationen zu <application>KDE</application> finden Sie
	unter <link
	  xlink:href="http://www.kde.org/">http://www.kde.org/</link>.
	Spezifische Informationen für &os; finden Sie unter <link
	  xlink:href="http://freebsd.kde.org/">http://freebsd.kde.org</link>.</para>

      <para>Um das Paket <application>KDE4</application> zu
	installieren, geben Sie ein:</para>

      <screen>&prompt.root; <userinput>pkg install x11/kde4</userinput></screen>

      <para>Um <application>KDE</application> stattdessen aus dem
	Quellcode zu übersetzen, verwenden Sie das folgende
	Kommando.  Bei der Installation wird ein Menü zur Auswahl
	der Komponenten angezeigt.  <application>KDE</application>
	ist eine große Anwendung, die sogar auf einem schnellen
	Computer einige Zeit zum Übersetzen benötigt.</para>

      <screen>&prompt.root; <userinput>cd /usr/ports/x11/kde4</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>

      <indexterm>
	<primary>KDE</primary>
	<secondary>Display-Manager</secondary>
      </indexterm>

      <para><application>KDE</application> benötigt ein
	eingehängtes <filename>/proc</filename>.  Fügen
	Sie diese Zeile in <filename>/etc/rc.conf</filename> ein,
	um das Dateisystem automatisch beim Systemstart
	einzuhängen:</para>

      <programlisting>proc           /proc       procfs  rw  0   0</programlisting>

      <para>Die Installation von <application>KDE</application>
	beinhaltet den KDE Display-Manager
	<application>KDM</application>.  Um diesen Display-Manager
	zu aktivieren, fügen Sie folgende Zeile in
	<filename>/etc/rc.conf</filename> ein:</para>

      <programlisting>kdm4_enable="YES"</programlisting>

      <para>Eine zweite Möglichkeit <application>KDE</application> zu
	starten, ist <command>startx</command> in der Kommandozeile
	einzugeben.  Damit dies funktioniert, wird folgende Zeile in
	<filename>~/.xinitrc</filename> benötigt:</para>

      <programlisting>exec /usr/local/bin/startkde</programlisting>

      <para>Eine dritte Möglichkeit ist <application>KDE</application>
	über <application>XDM</application> zu starten.  Um dies zu
	tun, erstellen Sie eine ausführbare
	<filename>~/.xsession</filename> wie folgt:</para>

      <screen>&prompt.user; <userinput>echo "#!/bin/sh" &gt; ~/.xsession</userinput>
&prompt.user; <userinput>echo "exec /usr/local/bin/startkde" &gt;&gt; ~/.xsession</userinput>
&prompt.user; <userinput>chmod +x ~/.xsession</userinput></screen>

      <para>Sobald <application>KDE</application> gestartet wird,
	finden Sie im integrierten Hilfesystem weitere Informationen
	zur Benutzung der verschiedenen Menüs und Anwendungen.</para>
    </sect2>

    <sect2 xml:id="x11-wm-xfce">
      <title>Xfce</title>

      <para><application>Xfce</application> ist eine
	Desktop-Umgebung, basierend auf den von
	<application>GNOME</application> verwendeten
	GTK+-Bibliotheken.  Es hat einen geringeren Speicherbedarf
	und stellt dabei einen schlichten, effizienten und einfach
	zu benutzenden Desktop zur Verfügung.
	<application>Xfce</application> ist vollständig
	konfigurierbar, verfügt über eine Programmleiste mit
	Menüs, <foreignphrase>Applets</foreignphrase> und einen
	Programmstarter.  Zudem sind ein Datei-Manager und ein
	Sound-Manager enthalten und das Programm ist über
	<foreignphrase>Themes</foreignphrase> anpassbar.  Da es
	schnell, leicht und effizient ist, eignet sich
	<application>Xfce</application> ideal für ältere oder
	langsamere Rechner mit wenig Speicher.  Weitere
	Informationen zu <application>Xfce</application> finden
	Sie unter <link
	  xlink:href="http://www.xfce.org/">http://www.xfce.org</link>.</para>

      <para>Um das Paket <application>Xfce</application> zu
	installieren, geben Sie folgendes ein:</para>

      <screen>&prompt.root; <userinput>pkg install xfce</userinput></screen>

      <para>Um stattdessen den Port zu übersetzen:</para>

      <screen>&prompt.root; <userinput>cd /usr/ports/x11-wm/xfce4</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>

      <para>Im Gegensatz zu <application>GNOME</application> oder
	<application>KDE</application>, besitzt
	<application>Xfce</application> keinen eigenen
	Login-Manager.  Damit <application>Xfce</application> von
	der Kommandozeile mit <command>startx</command> gestartet
	werden kann, muss zunächst ein Eintrag in
	<filename>~/.xinitrc</filename> hinzugefügt werden:</para>

      <screen>&prompt.user; <userinput>echo "exec /usr/local/bin/startxfce4" &gt; ~/.xinitrc</userinput></screen>

      <para>Alternativ dazu kann <application>XDM</application>
	verwendet werden.  Um diese Methode zu konfigurieren,
	erstellen Sie eine ausführbare
	<filename>~/.xsession</filename>:</para>

      <screen>&prompt.user; <userinput>echo "#!/bin/sh" &gt; ~/.xsession</userinput>
&prompt.user; <userinput>echo "exec /usr/local/bin/startxfce4" &gt;&gt; ~/.xsession</userinput>
&prompt.user; <userinput>chmod +x ~/.xsession</userinput></screen>
    </sect2>
  </sect1>

  <sect1 xml:id="x-compiz-fusion">
    <title>Compiz Fusion installieren</title>

    <para>Der Einsatz von hübschen 3D-Effekten ist eine Möglichkeit,
      die Benutzerfreundlichkeit eines Desktop-Rechners zu
      erhöhen.</para>

    <para>Die Installation des
      <application>Compiz&nbsp;Fusion</application> Pakets ist
      einfach, aber bei der Konfiguration sind ein paar Schritte
      notwendig, die nicht in der Dokumentation des Ports beschrieben
      werden.</para>

    <sect2 xml:id="x-compiz-video-card">
      <title>Konfiguration des &os; nVidia-Treibers</title>

      <para>Desktop-Effekte erzeugen eine hohe Last auf der
	Grafikkarte.  Für nVidia-basierte Grafikkarten sind die
	proprietären Treiber für eine gute Leistung erforderlich.
	Benutzer anderer Grafikkarten können diesen Abschnitt
	überspringen und mit der Konfiguration von &xorg;
	fortfahren.</para>

      <para>Lesen Sie die <link
	  xlink:href="&url.books.faq;/x.html">FAQ zu
	  diesem Thema</link>, um herauszufinden, wie der richtige
	nVidia-Treiber ermittelt werden kann.</para>

      <para>Nachdem der richtige Treiber für die Karte ermittelt
	wurde, kann er wie jedes andere Paket installiert
	werden.</para>

      <para>Um beispielsweise den aktuellsten Treiber zu
	installieren:</para>

      <screen>&prompt.root; <userinput>pkg install x11/nvidia-driver</userinput></screen>

      <para>Der Treiber erstellt ein Kernelmodul, welches beim
	Systemstart geladen werden muss.  Fügen folgende Zeile in
	<filename>/boot/loader.conf</filename> ein:</para>

      <programlisting>nvidia_load="YES"</programlisting>

      <note>
	<para>Um das Kernelmodul direkt in den laufenden Kernel zu
	  laden, kann der Befehl <command>kldload nvidia</command>
	  eingeben werden.  Allerdings wurde festgestellt, dass einige
	  Versionen von &xorg; nicht richtig funktionieren, wenn der
	  Treiber nicht beim Systemstart geladen wurde.  Nach der
	  Änderung in <filename>/boot/loader.conf</filename> wird
	  daher ein Neustart des Systems empfohlen.</para>
      </note>

      <para>Wenn das Kernelmodul geladen ist, muss in der Regel nur
	noch eine einzige Zeile in <filename>xorg.conf</filename>
	geändert werden, um den proprietären Treiber zu
	aktivieren:</para>

      <para>Suchen Sie folgende Zeile in
	<filename>/etc/X11/xorg.conf</filename>:</para>

      <programlisting>Driver      "nv"</programlisting>

      <para>und ändern Sie die Zeile zu:</para>

      <programlisting>Driver      "nvidia"</programlisting>

      <para>Wenn Sie nun die grafische Oberfläche starten, sollten
	Sie vom nVidia Startbildschirm begrüßt werden. Alles sollte
	wie gewohnt funktionieren.</para>
    </sect2>

    <sect2 xml:id="xorg-configuration">
      <title>Konfiguration von Desktop-Effekten in xorg.conf</title>

      <para>Um <application>Compiz&nbsp;Fusion</application> zu
	aktivieren, muss <filename>/etc/X11/xorg.conf</filename>
	angepasst werden:</para>

      <para>Fügen Sie diesen Abschnitt hinzu, um Composite-Effekte zu
	aktivieren:</para>

      <programlisting>Section "Extensions"
    Option         "Composite" "Enable"
EndSection</programlisting>

      <para>Suchen Sie den Abschnitt <quote>Screen</quote>, der
	ähnlich wie hier gezeigt aussehen sollte:</para>

      <programlisting>Section "Screen"
    Identifier     "Screen0"
    Device         "Card0"
    Monitor        "Monitor0"
    ...</programlisting>

      <para>und fügen Sie die beiden folgenden Zeilen hinzu
	(z.B. nach <quote>Monitor</quote>):</para>

      <programlisting>DefaultDepth    24
Option         "AddARGBGLXVisuals" "True"</programlisting>

      <para>Suchen Sie den Abschnitt <quote>Subsection</quote>, der
	sich auf die gewünschte Bildschirmauflösung bezieht.  Wenn Sie
	z.B. 1280x1024 verwenden möchten, suchen Sie den folgenden
	Abschnitt.  Sollte die gewünschte Auflösung nicht in allen
	Unterabschnitten vorhanden sein, können Sie den entsprechenden
	Eintrag manuell hinzufügen:</para>

      <programlisting>SubSection     "Display"
    Viewport    0 0
    Modes      "1280x1024"
EndSubSection</programlisting>

      <para>Für Composite-Effekte wird eine Farbtiefe von 24&nbsp;Bit
	benötigt.  Ändern Sie dazu den obigen Abschnitt wie
	folgt:</para>

       <programlisting>SubSection     "Display"
    Viewport    0 0
    Depth       24
    Modes      "1280x1024"
EndSubSection</programlisting>

      <para>Zuletzt muss noch sichergestellt werden, dass die Module
	<quote>glx</quote> und <quote>extmod</quote> im Abschnitt
	<quote>Module</quote> geladen werden:</para>

      <programlisting>Section "Module"
    Load           "extmod"
    Load           "glx"
    ...</programlisting>

      <para>Die vorangegangenen Einstellungen können automatisch mit
	<package>x11/nvidia-xconfig</package> erledigt werden, indem
	Sie folgende Kommandos als root ausführen:</para>

      <screen>&prompt.root; <userinput>nvidia-xconfig --add-argb-glx-visuals</userinput>
&prompt.root; <userinput>nvidia-xconfig --composite</userinput>
&prompt.root; <userinput>nvidia-xconfig --depth=24</userinput></screen>
    </sect2>

    <sect2 xml:id="compiz-fusion">
      <title>Installation und Konfiguration von
	Compiz&nbsp;Fusion</title>

      <para>Die Installation von
	<application>Compiz&nbsp;Fusion</application> ist so einfach
	wie die Installation jedes anderen Pakets:</para>

      <screen>&prompt.root; <userinput>pkg install x11-wm/compiz-fusion</userinput></screen>

      <para>Wenn die Installation abgeschlossen ist, starten Sie (als
	normaler Benutzer) den grafischen Desktop mit folgendem
	Befehl:</para>

      <screen>&prompt.user; <userinput>compiz --replace --sm-disable --ignore-desktop-hints ccp &amp;</userinput>
&prompt.user; <userinput>emerald --replace &amp;</userinput></screen>

      <para>Der Bildschirm wird für einige Sekunden flackern, da der
	Window Manager (z.B. <application>Metacity</application>, wenn
	Sie <application>GNOME</application> benutzen) von
	<application>Compiz&nbsp;Fusion</application> ersetzt wird.
	<application>Emerald</application> kümmert sich um die
	Fensterdekoration (z.B. die Schatzflächenn schließen,
	minimieren und maximieren, Titelleisten, usw.).</para>

      <para>Sie können dieses einfache Skript anpassen und es dann
	beim Start automatisch ausführen lassen (z.B. durch
	Hinzufügen von <quote>Sessions</quote> beim
	<application>GNOME</application>-Desktop):</para>

      <programlisting>#! /bin/sh
compiz --replace --sm-disable --ignore-desktop-hints ccp &amp;
emerald --replace &amp;</programlisting>

      <para>Speichern Sie die Datei in Ihrem Heimatverzeichnis,
	beispielsweise als <filename>start-compiz</filename> und
	machen Sie die Datei ausführbar:</para>

      <screen>&prompt.user; <userinput>chmod +x ~/start-compiz</userinput></screen>

      <para>Benutzen Sie dann die grafische Oberfläche, um das Skript
	zu <guimenuitem>Autostart-Programme</guimenuitem> hinzuzufügen
	(beim <application>GNOME</application>-Desktop unter
	<guimenuitem>Systemwerkzeuge</guimenuitem>,
	<guimenuitem>Einstellungen</guimenuitem>,
	<guimenuitem>Sessions</guimenuitem>).</para>

      <para>Um die gewünschten Effekte und Einstellungen zu
	konfigurieren, starten Sie (wieder als normaler Benutzer)
	den
	<application>Compiz&nbsp;Config&nbsp;Einstellungs&mdash;Manager</application>:</para>

      <screen>&prompt.user; <userinput>ccsm</userinput></screen>

      <note>
	<para>In <application>GNOME</application> finden Sie diese
	  Einstellungen wieder im Menü unter
	  <guimenuitem>Systemwerkzeuge</guimenuitem>,
	  <guimenuitem>Einstellungen</guimenuitem>.</para>
      </note>

      <para>Wenn Sie <quote>gconf support</quote> während der
	Installation ausgewählt haben, können Sie diese Einstellungen
	auch im <command>gconf-editor</command> unter
	<literal>apps/compiz</literal> finden.</para>
    </sect2>
  </sect1>

  <sect1 xml:id="x11-understanding">
    <info>
      <title>Fehlersuche</title>
    </info>

    <para>Wenn die Maus nicht funktioniert, müssen Sie diese zuerst
      konfigurieren.  In neueren Versionen von
      <application>&xorg;</application> werden die
      <literal>InputDevice</literal>-Abschnitte in
      <filename>xorg.conf</filename> ignoriert, um stattdessen die
      automatisch erkannten Geräte zu verwenden.  Um das alte
      Verhalten wiederherzustellen, fügen Sie folgende Zeile zum
      Abschnitt <literal>ServerLayout</literal> oder
      <literal>ServerFlags</literal> dieser Datei hinzu:</para>

    <programlisting>Option "AutoAddDevices" "false"</programlisting>

    <note>
      <para>Wie zuvor erwähnt, wird standardmäßig der
	<application>hald</application>-Dienst automatisch die
	Tastatur erkennen.  Es kann jedoch passieren, dass das
	Tastaturlayout oder das Modell nicht korrekt erkannt wird.
	Grafische Oberflächen wie <application>GNOME</application>,
	<application>KDE</application> oder
	<application>Xfce</application> stellen Werkzeuge für die
	Konfiguration der Tastatur bereit.  Es ist allerdings auch
	möglich, die Tastatureigenschaften direkt zu setzen, entweder
	mit Hilfe von &man.setxkbmap.1; oder mit einer
	Konfigurationsregel von
	<application>hald</application>.</para>

      <para>Wenn Sie zum Beispiel eine PC 102-Tasten Tastatur mit
	französischem Layout verwenden möchten, müssen sie eine
	Tastaturkonfigurationsdatei <filename>x11-input.fdi</filename>
	für <application>hald</application> im Verzeichnis
	<filename>/usr/local/etc/hal/fdi/policy</filename> anlegen.
	Diese Datei sollte die folgenden Zeilen enthalten:</para>

      <programlisting>&lt;?xml version="1.0" encoding="iso-8859-1"?&gt;
&lt;deviceinfo version="0.2"&gt;
  &lt;device&gt;
    &lt;match key="info.capabilities" contains="input.keyboard"&gt;
      &lt;merge key="input.x11_options.XkbModel" type="string"&gt;pc102&lt;/merge&gt;
      &lt;merge key="input.x11_options.XkbLayout" type="string"&gt;fr&lt;/merge&gt;
    &lt;/match&gt;
  &lt;/device&gt;
&lt;/deviceinfo&gt;</programlisting>

      <para>Wenn diese Datei bereits existiert, kopieren Sie nur die
	Zeilen in die Datei, welche die Tastaturkonfiguration
	betreffen.</para>

      <para>Sie müssen Ihren Computer neu starten, um
	<application>hald</application> zu zwingen, diese Datei
	einzulesen.</para>

      <para>Es ist auch möglich, die gleiche Konfiguration von einem
	X-Terminal oder einem Skript über den folgenden Befehl heraus
	zu tätigen:</para>

      <screen>&prompt.user; <userinput>setxkbmap -model pc102 -layout fr</userinput></screen>

      <para>
	<filename>/usr/local/share/X11/xkb/rules/base.lst</filename>
	enthält die zur Verfügung stehenden Tastatur- und
	Layoutoptionen.</para>
    </note>

    <indexterm>
      <primary><application>&xorg;</application> anpassen</primary>
    </indexterm>

    <para>Die Konfigurationsdatei <filename>xorg.conf.new</filename>
      kann nun an bestimmte Bedürfnisse angepasst werden.  Öffnen
      Sie die Datei in einem Editor, wie &man.emacs.1; oder
      &man.ee.1;.  Falls der Monitor ein älteres oder ungewöhnliches
      Modell ist und keine automatische Erkennung unterstützt, können
      die Synchronisationsfrequenzen im Abschnitt
      <literal>"Monitor"</literal> der
      <filename>xorg.conf.new</filename> eingetragen werden.</para>

    <programlisting>Section "Monitor"
      Identifier   "Monitor0"
      VendorName   "Monitor Vendor"
      ModelName    "Monitor Model"
      HorizSync    30-107
      VertRefresh  48-120
EndSection</programlisting>

    <para>Die meisten Monitore unterstützen die automatische Erkennung
      der Synchronisationsfrequenzen, so dass eine manuelle Eingabe
      der Werte nicht erforderlich ist.  Für die wenigen Monitore, die
      keine automatische Erkennung unterstützen, sollten nur die vom
      Hersteller zur Verfügung gestellten Werte eingegeben werden, um
      einen möglichen Schaden zu vermeiden.</para>

    <para>X unterstützt die Energiesparfunktionen (DPMS, Energy Star)
      für Monitore.  Mit &man.xset.1; können die Zeitlimits für die
      DPMS-Modi standby, suspend, off vorgeben, oder zwingend
      aktiviert werden.  Die DPMS-Funktionen können mit der folgenden
      Zeile im Abschnitt <literal>"Monitor"</literal> aktiviert
      werden:</para>

    <programlisting>Option         "DPMS"</programlisting>

    <indexterm>
      <primary><filename>xorg.conf</filename></primary>
    </indexterm>

    <para>Die gewünschte Auflösung und Farbtiefe stellen sie im
      Abschnitt <literal>"Screen"</literal> ein:</para>

    <programlisting>Section "Screen"
      Identifier "Screen0"
      Device     "Card0"
      Monitor    "Monitor0"
      DefaultDepth 24
      SubSection "Display"
	      Viewport  0 0
	      Depth     24
	      Modes     "1024x768"
      EndSubSection
EndSection</programlisting>

    <para>Mit <literal>DefaultDepth</literal> wird die standardmäßige
      Farbtiefe angegeben.  Mit der Option <option>-depth</option> von
      &man.Xorg.1; lässt sich die vorgegebene Farbtiefe überschreiben.
      <literal>Modes</literal> gibt die Auflösung für die angegebene
      Farbtiefe an.  Die Farbtiefe im Beispiel beträgt 24 Bits pro
      Pixel, die zugehörige Auflösung ist 1024x768 Pixel.  Beachten
      Sie, dass in der Voreinstellung nur Standard-VESA-Modi der
      Grafikkarte angegeben werden können.</para>

    <para>Sichern Sie die Konfigurationsdatei.  Testen Sie
      anschließend die Konfiguration, wie oben beschrieben.</para>

    <note>
      <para>Bei der Fehlersuche stehen Ihnen die Protokolldateien von
	<application>&xorg;</application> zur Verfügung.  Die
	Protokolle enthalten Informationen über alle Geräte, die mit
	dem <application>&xorg;</application>-Server verbunden ist.
	Die Namen der
	<application>&xorg;</application>-Protkolldateien haben das
	Format <filename>/var/log/Xorg.0.log</filename>.  Der exakte
	Name der Datei variiert dabei von
	<filename>Xorg.0.log</filename> bis
	<filename>Xorg.8.log</filename>, und so weiter.</para>
    </note>

    <para>Wenn alles funktioniert, installieren Sie die Datei an einen
      Ort, an dem &man.Xorg.1; sie finden kann.  Typischerweise ist
      dies <filename>/etc/X11/xorg.conf</filename> oder
      <filename>/usr/local/etc/X11/xorg.conf</filename>.</para>

    <screen>&prompt.root; <userinput>cp xorg.conf.new /etc/X11/xorg.conf</userinput></screen>

    <para>Damit ist die Konfiguration von
      <application>&xorg;</application> abgeschlossesn.
      <application>&xorg;</application> kann nun mit dem Programm
      &man.startx.1; gestartet werden.  Alternativ kann der
      <application>&xorg;</application>-Server auch mithilfe von
      &man.xdm.1; gestartet werden.</para>

    <sect2>
      <title>Konfiguration des &intel; <literal>i810</literal>
	Graphics Chipsets</title>

      <indexterm>
	<primary>Intel i810 Graphic Chipset</primary>
      </indexterm>

      <para>Der &intel; i810-Chipset benötigt den Treiber
	<filename>agpgart</filename>, die AGP-Schnittstelle für
	<application>&xorg;</application>.  Die Manualpage für den
	Treiber &man.agp.4; enthält weitere Informationen.</para>

      <para>Ab jetzt kann die Hardware wie jede andere Grafikkarte
	auch konfiguriert werden.  Beachten Sie, dass der Treiber
	&man.agp.4; nicht nachträglich in einen laufenden Kernel
	geladen werden kann.  Er muss entweder fest im Kernel
	eingebunden sein, oder beim Systemstart über
	<filename>/boot/loader.conf</filename> geladen werden.</para>
    </sect2>

    <sect2>
      <title>Einen Widescreen-Monitor einsetzen</title>

      <indexterm>
	<primary>Widescreen-Monitor, Konfiguration</primary>
      </indexterm>

      <para>Dieser Abschnitt geht über die normalen
	Konfigurationsarbeiten hinaus und setzt ein wenig
	Vorwissen voraus.  Selbst wenn die Standardwerkzeuge zur
	X-Konfiguration bei diesen Geräten nicht zum Erfolg führen,
	gibt es in den Protokolldateien genug Informationen, mit denen
	Sie letztlich doch einen funktionierenden X-Server
	konfigurieren können.  Alles, was Sie dazu benötigen, ist ein
	Texteditor.</para>

      <para>Aktuelle Widescreen-Formate (wie WSXGA, WSXGA+, WUXGA,
	WXGA, WXGA+, und andere mehr) unterstützen Seitenverhältnisse
	wie 16:10 oder 10:9, die unter X Probleme verursachen können.
	Bei einem Seitenverhältnis von 16:10 sind beispielsweise
	folgende Auflösungen möglich:</para>

      <itemizedlist>
	<listitem>
	  <para>2560x1600</para>
	</listitem>

	<listitem>
	  <para>1920x1200</para>
	</listitem>

	<listitem>
	  <para>1680x1050</para>
	</listitem>

	<listitem>
	  <para>1440x900</para>
	</listitem>

	<listitem>
	  <para>1280x800</para>
	</listitem>
      </itemizedlist>

      <para>Irgendwann wird die Konfiguration vereinfacht werden,
	dass nur noch die Auflösung als <literal>Mode</literal> in
	<literal>Section "Screen"</literal> eingtragen wird,
	so wie hier:</para>

      <programlisting>Section "Screen"
Identifier  "Screen 0"
Device	    "Card 0"
Monitor	    "Monitor0"
Default Depth 24
SubSection  "Display"
	ViewPort  0 0
	Depth	  24
	Modes	  "1680x1050"
EndSubSection
EndSection</programlisting>

      <para><application>&xorg;</application> ist intelligent genug,
	um die Informationen zu den Auflösungen über I2C/DDC zu
	beziehen, und weiß daher, welche Auflösungen und Frequenzen
	der Widescreen-Monitor unterstützt.</para>

      <para>Wenn diese <literal>ModeLines</literal> in den
	Treiberdateien nicht vorhanden sind, kann es sein, dass Sie
	<application>&xorg;</application> beim Finden der korrekten
	Werte unterstützen müssen.  Dazu extrahieren Sie die
	benötigten Informationen aus
	<filename>/var/log/Xorg.0.log</filename> und
	erzeugen daraus eine funktionierende
	<literal>ModeLine</literal>.  Suchen Sie nach Zeilen ähnlich
	den folgenden:</para>

      <programlisting>(II) MGA(0): Supported additional Video Mode:
(II) MGA(0): clock: 146.2 MHz   Image Size:  433 x 271 mm
(II) MGA(0): h_active: 1680  h_sync: 1784  h_sync_end 1960 h_blank_end 2240 h_border: 0
(II) MGA(0): v_active: 1050  v_sync: 1053  v_sync_end 1059 v_blanking: 1089 v_border: 0
(II) MGA(0): Ranges: V min: 48  V max: 85 Hz, H min: 30  H max: 94 kHz, PixClock max 170 MHz</programlisting>

      <para>Diese Informationen werden auch als EDID-Informationen
	bezeichnet.  Um daraus eine funktionierende
	<literal>ModeLine</literal> zu erzeugen, müssen lediglich die
	Zahlen in die korrekte Reihenfolge gebracht werden:</para>

      <programlisting>ModeLine &lt;name&gt; &lt;clock&gt; &lt;4 horiz. timings&gt; &lt;4 vert. timings&gt;</programlisting>

      <para>Die korrekte <literal>ModeLine</literal> in
	<literal>Section "Monitor"</literal> würde für dieses Beispiel
	folgendermaßen aussehen:</para>

      <programlisting>Section "Monitor"
Identifier      "Monitor1"
VendorName      "Bigname"
ModelName       "BestModel"
ModeLine        "1680x1050" 146.2 1680 1784 1960 2240 1050 1053 1059 1089
Option          "DPMS"
EndSection</programlisting>

      <para>Nachdem diese Äderungen durchgeführt sind, sollte
	X auch auf Ihrem neuen Widescreen-Monitor starten.</para>
    </sect2>

    <sect2 xml:id="compiz-troubleshooting">
      <title>Fehersuche in Compiz&nbsp;Fusion</title>

      <qandaset>
	<qandaentry>
	  <question xml:id="no-decorations">
	    <para>Ich habe
	      <application>Compiz&nbsp;Fusion</application>
	      installiert und anschließend die hier erwähnten
	      Kommandos eingegeben. Nun fehlen den Fenstern die
	      Titelleisten und Schaltflächen. Was kann ich tun?</para>
	  </question>

	  <answer>
	    <para>Wahrscheinlich fehlt eine Einstellung in
	      <filename>/etc/X11/xorg.conf</filename>.  Überprüfen Sie
	      diese Datei gründlich, und überprüfen Sie insbesondere
	      die Richtlinien <literal>DefaultDepth</literal> und
	      <literal>AddARGBGLXVisuals</literal>.</para>
	  </answer>
	</qandaentry>

	<qandaentry>
	  <question xml:id="xorg-crash">
	    <para>Wenn ich
	      <application>Compiz&nbsp;Fusion</application> starte,
	      bringt dass den X-Server zum Absturz. Was kann ich
	      tun?</para>
	  </question>

	  <answer>
	    <para>Wenn Sie
	      <filename>/var/log/Xorg.0.log</filename> durchsuchen,
	      finden Sie wahrscheinlich Fehlermeldungen, die
	      während des Starts von X ausgegeben werden.  Die
	      häufigste Meldung ist:</para>

	    <screen>(EE) NVIDIA(0):     Failed to initialize the GLX module; please check in your X
(EE) NVIDIA(0):     log file that the GLX module has been loaded in your X
(EE) NVIDIA(0):     server, and that the module is the NVIDIA GLX module.  If
(EE) NVIDIA(0):     you continue to encounter problems, Please try
(EE) NVIDIA(0):     reinstalling the NVIDIA driver.</screen>

	    <para>Dies ist für gewöhnlich der Fall, wenn Sie
	      <application>&xorg;</application> aktualisieren.
	      Sie müssen das Paket
	      <package>x11/nvidia-driver</package> neu installieren,
	      damit GLX neu gebaut wird.</para>
	  </answer>
	</qandaentry>
      </qandaset>
    </sect2>
  </sect1>
</chapter>
