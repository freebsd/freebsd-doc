<!--
  The FreeBSD Documentation Project
  The FreeBSD Brazilian Portuguese Documentation Project

  Original revision: r39170
-->

<!DOCTYPE article PUBLIC "-//FreeBSD//DTD DocBook V4.1-Based Extension//EN" [
<!ENTITY % articles.ent PUBLIC "-//FreeBSD//ENTITIES DocBook FreeBSD Articles Entity Set//PTBR">
%articles.ent;
]>

<article>
  <articleinfo>
    <title>Guia R&aacute;pido do FreeBSD para Usu&aacute;rios 
      &linux;</title>

    <authorgroup>
      <author>
	<firstname>John</firstname>
	<surname>Ferrell</surname>
      </author>
    </authorgroup>

    <copyright>
      <year>2008</year>
      <holder>The FreeBSD Documentation Project</holder>
    </copyright>

    <releaseinfo>$FreeBSD$</releaseinfo>

    <legalnotice id="trademarks" role="trademarks">
      &tm-attrib.freebsd;
      &tm-attrib.linux;
      &tm-attrib.intel;
      &tm-attrib.redhat;
      &tm-attrib.unix;
      &tm-attrib.general;
    </legalnotice>

    <abstract>
      <para>O objetivo deste documento &eacute; familiarizar 
	rapidamente os usu&aacute;rios intermedi&aacute;rios e 
	avan&ccedil;ados de &linux; com o FreeBSD.</para>
    </abstract>
  </articleinfo>

  <sect1 id="intro">
    <title>Introdu&ccedil;&atilde;o</title>

    <para>Este documento ir&aacute; destacar as diferen&ccedil;as 
      entre &os; e &linux; para que os usu&aacute;rios 
      intermedi&aacute;rios e avan&ccedil;ados possam rapidamente 
      se familiarizar com os conceitos b&aacute;sicos do FreeBSD.
      Esta &eacute; apenas uma r&aacute;pida introdu&ccedil;&atilde;o
      t&eacute;cnica, ela n&atilde;o tenta discutir as 
      diferen&ccedil;as <quote>filos&oacute;ficas</quote> entre os 
      dois sistemas operacionais.</para>

    <para>Este documento assume que voc&ecirc; j&aacute; tem o &os; 
      instalado.  Se voc&ecirc; n&atilde;o tem o &os; instalado ou 
      precisa de ajuda com o processo de instala&ccedil;&atilde;o, 
      por favor, consulte o cap&iacute;tulo <ulink
      url="&url.base;/doc/en_US.ISO8859-1/books/handbook/install.html">
      Instalando o FreeBSD</ulink> no Handbook.</para>
  </sect1>

  <sect1 id="shells">
    <title><literal>Shells</literal>: Sem Bash?</title>

    <para>Usu&aacute;rios vindos do &linux; s&atilde;o frequentemente 
      surpreendidos por n&atilde;o encontrarem o 
      <application>Bash</application> como o
      <literal>shell</literal> padr&atilde;o no &os;.  De fato, o
      <application>Bash</application> nem mesmo est&aacute; 
      presente na instala&ccedil;&atilde;o padr&atilde;o.  Em vez 
      disso, o &os; usa o &man.tcsh.1; como <literal>shell</literal> 
      padr&atilde;o.  Embora o <application>Bash</application> e 
      seus outros <literal>shells</literal> favoritos estejam 
      dispon&iacute;veis na <ulink url="article.html#SOFTWARE">
      Cole&ccedil;&atilde;o&nbsp;de&nbsp;<literal>Ports</literal>
      </ulink> do &os;.</para>

    <para>Se voc&ecirc; instalar outros <literal>shells</literal>, o
      &man.chsh.1; poder&aacute; ser usado para definir o
      <literal>shell</literal> padr&atilde;o dos usu&aacute;rios.  
      Contudo, &eacute; recomend&aacute;vel que o 
      <literal>shell</literal> padr&atilde;o do
      <username>root</username> permane&ccedil;a inalterado.  A 
      raz&atilde;o para isso &eacute; que 
      <literal>shells</literal> n&atilde;o inclu&iacute;dos na 
      base do sistema s&atilde;o normalmente instalados em
      <filename>/usr/local/bin</filename> ou
      <filename>/usr/bin</filename>.  Caso ocorra um 
      problema no sistema de arquivos no qual est&atilde;o localizados
      o <filename>/usr/local/bin</filename> e o
      <filename>/usr/bin</filename>, eles n&atilde;o poder&atilde;o 
      ser montados.  Neste caso, o usu&aacute;rio 
      <username>root</username> n&atilde;o teria acesso ao seu 
      <literal>shell</literal> padr&atilde;o, o que o impediria de
      efetuar login.  Por este motivo uma segunda conta
      <username>root</username>, a conta <username>toor</username>, 
      foi criada para uso com <literal>shells</literal> que 
      n&atilde;o fazem parte da base do sistema.  Leia o 
      <literal>FAQ</literal> de seguran&ccedil;a para obter 
      informa&ccedil;&otilde;es sobre a <ulink
      url="&url.base;/doc/en_US.ISO8859-1/books/faq/security.html#TOOR-ACCOUNT">conta toor</ulink>.</para>
  </sect1>

  <sect1 id="software">
    <title>Pacotes e <literal>Ports</literal>: Adicionando programas 
      no &os;</title>

    <para>Al&eacute;m do tradicional m&eacute;todo &unix; de 
      instala&ccedil;&atilde;o de programas (baixar o c&oacute;digo 
      fonte, extrair, editar o c&oacute;digo fonte, e compilar),
      o &os; oferece dois outros m&eacute;todos para instalar 
      aplica&ccedil;&otilde;es: pacotes e <literal>ports</literal>.  
      Uma lista completa de todos os <literal>ports</literal> e 
      pacotes dispon&iacute;veis pode ser encontrada <ulink
      url="http://www.freebsd.org/ports/master-index.html">aqui</ulink>.</para>

    <sect2 id="packages">
      <title>Pacotes</title>

      <para>Pacotes s&atilde;o aplica&ccedil;&otilde;es 
	pr&eacute;-compiladas, o equivalente no &os; ao 
	<filename>.deb</filename> nos sistemas baseados no 
	Debian/Ubuntu e ao <filename>.rpm</filename> nos
	sistemas baseados no Red&nbsp;Hat/Fedora.  Pacotes 
	s&atilde;o instalados usando &man.pkg.add.1;.  Por exemplo, 
	o seguinte comando instala o 
	<application>Apache 2.2</application>:</para>

      <screen>&prompt.root; <userinput>pkg_add <replaceable>/tmp/apache-2.2.6_2.tbz</replaceable></userinput></screen>

      <para>Usar a op&ccedil;&atilde;o <option>-r</option> 
	dir&aacute; ao &man.pkg.add.1; para baixar automaticamente 
	o pacote e instal&aacute;-lo, juntamente com quaisquer 
	depend&ecirc;ncias que ele possua:</para>

      <screen>&prompt.root; <userinput>pkg_add -r <replaceable>apache22</replaceable></userinput>
Fetching ftp://ftp.freebsd.org/pub/FreeBSD/ports/i386/packages-6.2-release/Latest/apache22.tbz... Done.
Fetching ftp://ftp.freebsd.org/pub/FreeBSD/ports/i386/packages-6.2-release/All/expat-2.0.0_1.tbz... Done.
Fetching ftp://ftp.freebsd.org/pub/FreeBSD/ports/i386/packages-6.2-release/All/perl-5.8.8_1.tbz... Done.
[snip]

To run apache www server from startup, add apache22_enable="YES"
in your /etc/rc.conf. Extra options can be found in startup script.</screen>

      <note>
	<para>Se voc&ecirc; est&aacute; rodando uma vers&atilde;o de 
	  <literal>release</literal> do &os; (6.2, 6.3, 7.0, etc., 
	  geralmente instalada a partir de um CD-ROM) o 
	  <command>pkg_add -r</command> vai baixar o pacote compilado
	  especificamente para esta vers&atilde;o.  Este pacote
	  <emphasis>pode n&atilde;o</emphasis> ser a vers&atilde;o 
	  mais atual da aplica&ccedil;&atilde;o.  Voc&ecirc; pode 
	  usar a vari&aacute;vel <envar>PACKAGESITE</envar> para 
	  sobrescrever este comportamento padr&atilde;o.  Por 
	  exemplo, ajuste <envar>PACKAGESITE</envar> para <ulink
	  url="ftp://ftp.freebsd.org/pub/FreeBSD/ports/i386/packages-6-stable/Latest/"></ulink>
	  para baixar os pacotes mais recentes compilados para a 
	  s&eacute;rie 6.X.</para>

	<para>Voc&ecirc; pode ler mais sobre as vers&otilde;es do 
	  &os; no artigo <ulink
	  url="&url.base;/doc/en_US.ISO8859-1/articles/version-guide/">
	  Escolhendo a Vers&atilde;o do &os; Certa para Voc&ecirc;</ulink>.</para>
      </note>

      <para>Para mais informa&ccedil;&otilde;es sobre pacotes, por 
	favor, consulte a se&ccedil;&atilde;o 4.4 do Handbook do 
	&os;: <ulink
	url="&url.base;/doc/en_US.ISO8859-1/books/handbook/packages-using.html">
	Usando o Sistema de Pacotes</ulink>.</para>
    </sect2>

    <sect2 id="ports">
      <title><literal>Ports</literal></title>

      <para>O segundo m&eacute;todo para instala&ccedil;&atilde;o 
	de aplica&ccedil;&otilde;es no &os; &eacute; a 
	Cole&ccedil;&atilde;o&nbsp;de&nbsp;<literal>Ports</literal>.  
	A Cole&ccedil;&atilde;o&nbsp;de&nbsp;<literal>Ports</literal>
	&eacute; um <foreignphrase>framework</foreignphrase> de
	<filename>Makefiles</filename> e 
	<foreignphrase>patches</foreignphrase> especialmente
	customizados para a instala&ccedil;&atilde;o de v&aacute;rios
	programas a partir do c&oacute;digo fonte no &os;.  Ao 
	instalar um <literal>port</literal> o sistema ir&aacute; 
	baixar o c&oacute;digo fonte, aplicar qualquer
	<foreignphrase>patch</foreignphrase> necess&aacute;rio, 
	compilar o c&oacute;digo, e instalar a 
	aplica&ccedil;&atilde;o.  O mesmo processo ser&aacute;
	aplicado para todas as suas depend&ecirc;ncias.</para>

      <para>A Cole&ccedil;&atilde;o de <literal>Ports</literal>, por 
	vezes designada como a &aacute;rvore de 
	<literal>ports</literal>, pode ser encontrada em 
	<filename>/usr/ports</filename>.  Isto assumindo que a 
	Cole&ccedil;&atilde;o de <literal>Ports</literal> foi 
	instalada durante o processo de instala&ccedil;&atilde;o do 
	&os;.  Se a Cole&ccedil;&atilde;o de <literal>Ports</literal>
	n&atilde;o foi instalada, ela pode ser adicionada a partir 
	dos discos de instala&ccedil;&atilde;o usando 
	&man.sysinstall.8;, ou baixada dos servidores do &os; usando 
	&man.csup.1; ou &man.portsnap.8;.  Instru&ccedil;&otilde;es
	detalhadas para a instala&ccedil;&atilde;o da 
	Cole&ccedil;&atilde;o de <literal>Ports</literal> podem ser 
	encontradas na <ulink
	url="&url.base;/doc/en_US.ISO8859-1/books/handbook/ports-using.html">
	se&ccedil;&atilde;o 4.5.1</ulink> do Handbook.</para>

      <para>A instala&ccedil;&atilde;o de um <literal>port</literal> 
	&eacute; t&atilde;o simples (geralmente) quanto entrar no 
	diret&oacute;rio do <literal>port</literal> desejado e 
	iniciar o processo de compila&ccedil;&atilde;o.  O exemplo 
	seguinte instala o <application>Apache 2.2</application> a 
	partir da Cole&ccedil;&atilde;o de 
	<literal>Ports</literal>:</para>

      <screen>&prompt.root; <userinput>cd /usr/ports/www/apache22</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>

      <para>Um grande benef&iacute;cio do uso do 
	<literal>ports</literal> para instalar programas &eacute; a 
	possibilidade de personalizar as op&ccedil;&otilde;es de 
	instala&ccedil;&atilde;o.  Por exemplo, ao instalar o
	<application>Apache 2.2</application> a partir do
	<literal>ports</literal>, voc&ecirc; poder&aacute; habilitar 
	o <application>mod_ldap</application> definindo a 
	vari&aacute;vel <makevar>WITH_LDAP</makevar> ao executar
	&man.make.1;:</para>

      <screen>&prompt.root; <userinput>cd /usr/ports/www/apache22</userinput>
&prompt.root; <userinput>make WITH_LDAP="YES" install clean</userinput></screen>

      <para>Por favor, leia a se&ccedil;&atilde;o 4.5 do Handbook do 
	&os;, <ulink
        url="&url.base;/doc/en_US.ISO8859-1/books/handbook/ports-using.html">
	 Usando a Cole&ccedil;&atilde;o de 
	 <literal>Ports</literal></ulink>, para maiores 
	 informa&ccedil;&otilde;es sobre a Cole&ccedil;&atilde;o de
	<literal>Ports</literal>.</para>
    </sect2>

    <sect2 id="which">
      <title><literal>Ports</literal> ou pacotes, qual eu devo usar?</title>

      <para>Pacotes s&atilde;o apenas <literal>ports</literal>
	pr&eacute;-compilados, ent&atilde;o na pr&aacute;tica &eacute;
	uma quest&atilde;o de instalarmos a partir do c&oacute;digo 
	fonte (<literal>ports</literal>) contra instalarmos de um
        pacote bin&aacute;rio.  Cada m&eacute;todo tem seus 
	pr&oacute;prios benef&iacute;cios:</para>

      <itemizedlist>
	<title>Pacotes (bin&aacute;rio)</title>

	<listitem><simpara>Instala&ccedil;&atilde;o r&aacute;pida 
	  (a compila&ccedil;&atilde;o de grandes 
	  aplica&ccedil;&otilde;es pode ser um tanto 
	  demorada).</simpara></listitem>

	<listitem><simpara>Voc&ecirc; n&atilde;o precisar saber como 
	  compilar o programa.</simpara></listitem>

	<listitem><simpara>N&atilde;o &eacute; necess&aacute;rio 
	  instalar compiladores no seu sistema.</simpara></listitem>
      </itemizedlist>

      <itemizedlist>
	<title><literal>Ports</literal> (c&oacute;digo fonte)</title>

	<listitem><simpara>Possibilidade de personalizar as 
	  op&ccedil;&otilde;es de instala&ccedil;&atilde;o.  (Pacotes 
	  normalmente s&atilde;o compilados com as 
	  op&ccedil;&otilde;es padr&otilde;es.  Com  o 
	  <literal>ports</literal> voc&ecirc; pode personalizar 
	  v&aacute;rias op&ccedil;&otilde;es, como a 
	  compila&ccedil;&atilde;o de m&oacute;dulos adicionais ou 
	  a mudan&ccedil;a do <foreignphrase>path</foreignphrase> de 
	  instala&ccedil;&atilde;o 
	  padr&atilde;o.)</simpara></listitem>

	<listitem><simpara>Voc&ecirc; pode aplicar seus 
	  pr&oacute;prios <foreignphrase>patches</foreignphrase> se 
	  assim desejar.</simpara></listitem>
      </itemizedlist>

      <para>Se voc&ecirc; n&atilde;o tem qualquer requisito especial,
	o sistema de pacotes provavelmente vai se adequar 
	muito bem &agrave; sua situa&ccedil;&atilde;o.  Se 
	voc&ecirc; for precisar personalizar a 
	instala&ccedil;&atilde;o, o <literal>ports</literal> &eacute;
	a melhor op&ccedil;&atilde;o.  (E lembre-se, se voc&ecirc; 
	precisa personalizar a instala&ccedil;&atilde;o, mas prefere 
	pacotes, voc&ecirc; pode compilar um pacote personalizado a 
	partir do <literal>ports</literal> usando 
	<command>make</command> <maketarget>package</maketarget> e, 
	em seguida, copiar o pacote para outros servidores.)</para>
    </sect2>
  </sect1>

  <sect1 id="startup">
    <title>Inicializa&ccedil;&atilde;o do Sistema: Onde est&atilde;o 
      os <foreignphrase>run-levels</foreignphrase>?</title>

    <para>O &linux; usa o sistema <literal>SysV init</literal>, 
      enquanto o &os; usa o tradicional <literal>BSD-style</literal>
      &man.init.8;.  Sob o <literal>BSD-style</literal> &man.init.8;
      n&atilde;o existem <foreignphrase>run-levels</foreignphrase> e
      nem <filename>/etc/inittab</filename>, em vez disso a 
      inicializa&ccedil;&atilde;o &eacute; controlada pelo 
      utilit&aacute;rio &man.rc.8;.  O <literal>script</literal> 
      <filename>/etc/rc</filename> l&ecirc;
      <filename>/etc/defaults/rc.conf</filename> e
      <filename>/etc/rc.conf</filename> para determinar quais 
      servi&ccedil;os ser&atilde;o iniciados.  Os servi&ccedil;os 
      especificados s&atilde;o, ent&atilde;o, inicializados rodando 
      os <literal>scripts</literal> de inicializa&ccedil;&atilde;o 
      correspondentes em <filename>/etc/rc.d/</filename>
      e <filename>/usr/local/etc/rc.d/</filename>.  Esses
      <literal>scripts</literal> s&atilde;o similares aos
      <literal>scripts</literal> localizados em
      <filename>/etc/init.d/</filename> nos sistemas &linux;.</para>

    <sidebar>
      <para><emphasis>Por que existem dois locais para
        <literal>scripts</literal> de inicializa&ccedil;&atilde;o de
        servi&ccedil;os?</emphasis>  Os <literal>scripts</literal> 
	encontrados em <filename>/etc/rc.d/</filename> s&atilde;o 
	para aplica&ccedil;&otilde;es que s&atilde;o parte da 
	<quote>base</quote> do sistema.  (&man.cron.8;, &man.sshd.8;,
	&man.syslog.3;, e outros.)  Os <literal>scripts</literal> em
	<filename>/usr/local/etc/rc.d/</filename> s&atilde;o para 
	aplica&ccedil;&otilde;es instaladas pelo usu&aacute;rio, como
	<application>Apache</application>, 
	<application>Squid</application>, etc.</para>

      <para><emphasis>Qual &eacute; a diferen&ccedil;a entre a 
	<quote>base</quote> do sistema e as aplica&ccedil;&otilde;es 
	instaladas pelo usu&aacute;rio?</emphasis> O &os; &eacute; 
	desenvolvido como um sistema operacional completo.
	Em outras palavras, o <literal>kernel</literal>, bibliotecas
	do sistema, e utilit&aacute;rios de n&iacute;vel de 
	usu&aacute;rio (como &man.ls.1;, &man.cat.1;, &man.cp.1;, 
	etc.) s&atilde;o desenvolvidos juntos e lan&ccedil;ados como 
	um s&oacute;.  Isso &eacute; designado como 
	<quote>base</quote> do sistema.  As aplica&ccedil;&otilde;es 
	instaladas pelo usu&aacute;rio s&atilde;o 
	aplica&ccedil;&otilde;es que n&atilde;o fazem parte da
	<quote>base</quote> do sistema, como
	<application>Apache</application>, 
	<application>X11</application>,
	<application>Mozilla&nbsp;Firefox</application>, etc.  Estas
	aplica&ccedil;&otilde;es instaladas pelo usu&aacute;rio 
	s&atilde;o geralmente instaladas usando os <ulink 
	url="article.html#SOFTWARE">Pacotes e a Cole&ccedil;&atilde;o
	de <literal>Ports</literal></ulink>.  A fim de mant&ecirc;-las
	separadas da <quote>base</quote> do sistema, as
	aplica&ccedil;&otilde;es dos usu&aacute;rio s&atilde;o 
	normalmente instaladas sob <filename>/usr/local/</filename>.  
	Portanto, os bin&aacute;rios instalados pelo usu&aacute;rio 
	residem em <filename>/usr/local/bin/</filename>, arquivos de 
	configura&ccedil;&atilde;o em 
	<filename>/usr/local/etc/</filename>, e assim por 
	diante.</para>
    </sidebar>

    <para>Os Servi&ccedil;os s&atilde;o ativados espeficificando
      <literal><replaceable>NomeDoServi&ccedil;o</replaceable>_enable="YES"</literal>
      em <filename>/etc/rc.conf</filename> (&man.rc.conf.5;).  
      D&ecirc; uma olhada em 
      <filename>/etc/defaults/rc.conf</filename> para visualizar os 
      padr&otilde;es do sistema, essas configura&ccedil;&otilde;es 
      padr&otilde;es podem ser sobrescritas por 
      configura&ccedil;&otilde;es em 
      <filename>/etc/rc.conf</filename>.  Quando instalar 
      aplica&ccedil;&otilde;es adicionais n&atilde;o deixe de 
      analisar a documenta&ccedil;&atilde;o para determinar
      como ativar qualquer servi&ccedil;o associado.</para>

    <para>O seguinte trecho do <filename>/etc/rc.conf</filename> ativa
      o &man.sshd.8; e o <application>Apache 2.2</application>.  Ele
      tamb&eacute;m determina que o <application>Apache</application>
      deve ser iniciado com SSL.</para>

    <programlisting># enable SSHD
sshd_enable="YES"
# enable Apache with SSL
apache22_enable="YES"
apache22_flags="-DSSL"</programlisting>

    <para>Uma vez que o servi&ccedil;o foi ativado em
      <filename>/etc/rc.conf</filename>, ele pode ser inicializado
      pela linha de comando (sem precisar reinicializar o
      sistema):</para>

    <screen>&prompt.root; <userinput><replaceable>/etc/rc.d/sshd</replaceable> start</userinput></screen>

    <para>Se o servi&ccedil;o n&atilde;o foi ativado, ele pode ser 
      inicializado pela linha de comando usando 
      <option>forcestart</option>:</para>

    <screen>&prompt.root; <userinput><replaceable>/etc/rc.d/sshd</replaceable> forcestart</userinput></screen>
  </sect1>

  <sect1 id="network">
    <title>Configura&ccedil;&atilde;o da rede</title>

    <sect2 id="interfaces">
      <title>Interfaces de Rede</title>

      <para>Em vez do identificador gen&eacute;rico
        <emphasis>ethX</emphasis>, que o &linux; usa para identificar
        uma interface de rede, o &os; usa o nome do driver do 
	dispositivo de rede seguido por um n&uacute;mero como 
	identificador.  A seguinte sa&iacute;da do &man.ifconfig.8; 
	mostra duas interfaces de rede &intel&nbsp;Pro&nbsp;1000 
	(<devicename>em0</devicename> e <devicename>em1</devicename>):
	</para>

      <screen>&prompt.user; <userinput>ifconfig</userinput>
em0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        options=b&lt;RXCSUM,TXCSUM,VLAN_MTU&gt;
        inet 10.10.10.100 netmask 0xffffff00 broadcast 10.10.10.255
        ether 00:50:56:a7:70:b2
        media: Ethernet autoselect (1000baseTX &lt;full-duplex&gt;)
        status: active
em1: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        options=b&lt;RXCSUM,TXCSUM,VLAN_MTU&gt;
        inet 192.168.10.222 netmask 0xffffff00 broadcast 192.168.10.255
        ether 00:50:56:a7:03:2b
        media: Ethernet autoselect (1000baseTX &lt;full-duplex&gt;)
        status: active</screen>
    </sect2>

    <sect2 id="ipaddress">
      <title>Configura&ccedil;&atilde;o IP</title>

      <para>Um endere&ccedil;o IP pode ser atribu&iacute;do a uma 
	interface de rede usando &man.ifconfig.8;.  No entanto, para 
	mant&ecirc;-lo persistente entre as 
	reinicializa&ccedil;&otilde;es, a configura&ccedil;&atilde;o 
	deve ser inclu&iacute;da em <filename>/etc/rc.conf</filename>.
	O seguinte exemplo configura o <literal>hostname</literal>, o 
	endere&ccedil;o IP, e o <literal>gateway</literal> 
	padr&atilde;o:</para>

      <programlisting>hostname="server1.example.com"
ifconfig_em0="inet 10.10.10.100  netmask 255.255.255.0"
defaultrouter="10.10.10.1"</programlisting>

      <para>Use a seguinte sintaxe para configurar a interface para
        DHCP:</para>

      <programlisting>hostname="server1.example.com"
ifconfig_em0="DHCP"</programlisting>

    </sect2>
  </sect1>

  <sect1 id="firewall">
    <title><literal>Firewall</literal></title>

    <para>Como o <application>IPTABLES</application> no &linux;, o 
      &os; tamb&eacute;m oferece um <literal>firewall</literal> ao 
      n&iacute;vel de <literal>kernel</literal>; atualmente o &os; 
      oferece tr&ecirc;s op&ccedil;&otilde;es de 
      <literal>firewalls</literal>:</para>

    <itemizedlist>
      <listitem><simpara><ulink url="&url.base;/doc/en_US.ISO8859-1/books/handbook/firewalls-ipfw.html">IPFIREWALL</ulink></simpara></listitem>
      <listitem><simpara><ulink url="&url.base;/doc/en_US.ISO8859-1/books/handbook/firewalls-ipf.html">IPFILTER</ulink></simpara></listitem>
      <listitem><simpara><ulink url="&url.base;/doc/en_US.ISO8859-1/books/handbook/firewalls-pf.html">PF</ulink></simpara></listitem>
    </itemizedlist>

    <para>O <application>IPFIREWALL</application>, ou
      <application>IPFW</application> (o comando para gerenciar um
      conjunto de regras <application>IPFW</application> &eacute; 
      &man.ipfw.8;), &eacute; o <literal>firewall</literal> 
      desenvolvido e mantido pelos desenvolvedores do &os;.  O 
      <application>IPFW</application> pode ser integrado com 
      &man.dummynet.4; para prover a capacidade de controle de 
      tr&aacute;fego e simular diferentes tipos de conex&otilde;es de
      rede.</para>

    <para>Amostra de uma regra do <application>IPFW</application> para
      permitir uma conex&atilde;o de entrada do 
      <application>SSH</application>:</para>

    <programlisting>ipfw add allow tcp from any to me 22 in via $ext_if</programlisting>

    <para><application>IPFILTER</application> &eacute; um aplicativo 
      de <literal>firewall</literal> desenvolvido por 
      Darren&nbsp;Reed.  Ele n&atilde;o &eacute; espec&iacute;fico 
      para o &os; e foi portado para v&aacute;rios sistemas 
      operacionais, incluindo NetBSD, OpenBSD, SunOS, HP/UX, e 
      Solaris.</para>

    <para>Amostra do comando <application>IPFILTER</application> para
      permitir uma conex&atilde;o de entrada do 
      <application>SSH</application>:</para>

    <programlisting>pass in on $ext_if proto tcp from any to any port = 22</programlisting>

    <para>O &uacute;ltimo aplicativo de <literal>firewall</literal>,
      <application>PF</application>, &eacute; desenvolvido pelo 
      projeto OpenBSD.  O <application>PF</application> foi criado 
      como um substituto para o <application>IPFILTER</application>. 
      Como tal, a sintaxe do <application>PF</application> &eacute; 
      muito similar &agrave; do <application>IPFILTER</application>.
      O <application>PF</application> pode ser integrado com
      &man.altq.4; para prover recursos de QoS.</para>

    <para>Amostra do comando <application>PF</application> para
      permitir uma conex&atilde;o de entrada do 
      <application>SSH</application>:</para>

     <programlisting>pass in on $ext_if inet proto tcp from any to ($ext_if) port 22</programlisting>
  </sect1>

  <sect1 id="updates">
    <title>Atualizando o &os;</title>

    <para>Existem tr&ecirc;s m&eacute;todos para atualizar um 
      sistema &os;: a partir do c&oacute;digo fonte, 
      atualiza&ccedil;&atilde;o bin&aacute;ria, e a partir dos 
      discos de instala&ccedil;&atilde;o.</para>

    <para>A atualiza&ccedil;&atilde;o a partir do c&oacute;digo 
      fonte &eacute; a mais demorada, mas por outro lado &eacute; 
      a que oferece a maior flexibilidade.  O processo envolve a
      sincroniza&ccedil;&atilde;o de uma c&oacute;pia local do 
      c&oacute;digo fonte do sistema a partir dos servidores 
      <application>CVS</application> (Concurrent Versioning System) 
      do &os;.  Uma vez que o c&oacute;digo fonte local esta 
      atualizado, voc&ecirc; pode compilar a nova vers&atilde;o do
      <literal>kernel</literal> e dos aplicativos de n&iacute;vel 
      de usu&aacute;rio.  Para maiores informa&ccedil;&otilde;es 
      sobre atualiza&ccedil;&otilde;es a partir do c&oacute;digo 
      fonte veja <ulink
      url="&url.base;/doc/en_US.ISO8859-1/books/handbook/updating-upgrading.html">
      o cap&iacute;tulo sobre atualiza&ccedil;&atilde;o</ulink> no 
      Handbook do &os;.</para>

    <para>As atualiza&ccedil;&otilde;es bin&aacute;rias s&atilde;o 
      similares ao uso do <command>yum</command> ou 
      <command>apt-get</command> para atualizar sistemas &linux;.  O 
      comando &man.freebsd-update.8; vai baixar e instalar as novas 
      atualiza&ccedil;&otilde;es.  As atualiza&ccedil;&otilde;es 
      podem ser agendadas usando &man.cron.8;.</para>

    <note>
      <para>Se voc&ecirc; utilizar o &man.cron.8; para agendar as 
	atualiza&ccedil;&otilde;es, por favor, certifique-se de 
	usar <command>freebsd-update cron</command> em seu 
	&man.crontab.1; para reduzir a possibilidade de que um 
	grande n&uacute;mero de m&aacute;quinas busquem as
	atualiza&ccedil;&otilde;es todas ao mesmo tempo.</para>

      <programlisting>0 3 * * * root /usr/sbin/freebsd-update cron</programlisting>
    </note>

    <para>O &uacute;ltimo m&eacute;todo de atualiza&ccedil;&atilde;o,
      a partir dos discos de instala&ccedil;&atilde;o, &eacute; um 
      processo bastante simples.  Efetue o <literal>boot</literal> 
      a partir dos discos de instala&ccedil;&atilde;o e selecione a 
      op&ccedil;&atilde;o para atualizar.</para>
  </sect1>

  <sect1 id="procfs">
    <title>procfs: Morto, mas vivo na mem&oacute;ria</title>

    <para>No &linux;, para determinar se o encaminhamento IP 
      est&aacute; ativado, voc&ecirc; pode olhar em
      <filename>/proc/sys/net/ipv4/ip_forward</filename>.  No &os;
      voc&ecirc; precisa usar o &man.sysctl.8; para ver esta e 
      outras op&ccedil;&otilde;es do sistema, pois o &man.procfs.5; 
      tornou-se obsoleto nas vers&otilde;es mais recentes do &os;.  
      (Embora <command>sysctl</command> tamb&eacute;m esteja 
      dispon&iacute;vel no &linux;.)</para>

    <para>No exemplo do encaminhamento IP, voc&ecirc; poderia usar o
      seguinte comando para determinar se ele est&aacute; ativado no
      seu sistema FreeBSD:</para>

    <screen>&prompt.user; <userinput>sysctl net.inet.ip.forwarding</userinput>
net.inet.ip.forwarding: 0</screen>

    <para>A op&ccedil;&atilde;o <option>-a</option> &eacute; 
      utilizada para listar todas as configura&ccedil;&otilde;es 
      do sistema:</para>

    <screen>&prompt.user; <userinput>sysctl -a</userinput>
kern.ostype: FreeBSD
kern.osrelease: 6.2-RELEASE-p9
kern.osrevision: 199506
kern.version: FreeBSD 6.2-RELEASE-p9 #0: Thu Nov 29 04:07:33 UTC 2007
    root@i386-builder.daemonology.net:/usr/obj/usr/src/sys/GENERIC

kern.maxvnodes: 17517
kern.maxproc: 1988
kern.maxfiles: 3976
kern.argmax: 262144
kern.securelevel: -1
kern.hostname: server1
kern.hostid: 0
kern.clockrate: { hz = 1000, tick = 1000, profhz = 666, stathz = 133 }
kern.posix1version: 200112
...</screen>

    <note>
      <para>Alguns dos valores do <command>sysctl</command>
      est&atilde;o dispon&iacute;veis somente para 
      leitura.</para></note>

    <para>Existem ocasi&otilde;es nas quais o <literal>procfs</literal> 
      &eacute; necess&aacute;rio, como na execu&ccedil;&atilde;o de 
      programas antigos, no uso do &man.truss.1; para rastrear 
      chamadas de sistema, e para possibilitar a <ulink
      url="&url.base;/doc/en_US.ISO8859-1/books/handbook/linuxemu.html">
      Compatibilidade Bin&aacute;ria com Linux</ulink>.  
      (Embora a Compatibilidade Bin&aacute;ria com Linux use seu 
      pr&oacute;prio <literal>procfs</literal>, &man.linprocfs.5;.)  
      Se voc&ecirc; precisar montar o <literal>procfs</literal>, 
      voc&ecirc; pode adicionar a seguinte entrada no 
      <filename>/etc/fstab</filename>:</para>

    <screen>proc                /proc           procfs  rw,noauto       0       0</screen>

    <note>
      <para><option>noauto</option> vai prevenir
        <filename>/proc</filename> de ser montado automaticamente
	durante o <literal>boot</literal>.</para></note>

    <para>E ent&atilde;o monte o <literal>procfs</literal> com:</para>

    <screen>&prompt.root; <userinput>mount /proc</userinput></screen>
  </sect1>

  <sect1 id="commands">
    <title>Comandos Comuns</title>

    <sect2 id="packageCommands">
      <title>Gerenciamento de Pacotes</title>

      <para>
	<informaltable frame="none" pgwide="1">
	  <tgroup cols="3">
	    <thead>
	      <row>
		<entry>Comando no &linux; (Red&nbsp;Hat/Debian)</entry>
		<entry>Equivalente no &os;</entry>
		<entry>prop&oacute;sito</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry><command>yum install <replaceable>pacote</replaceable></command> / <command>apt-get install <replaceable>pacote</replaceable></command></entry>
		<entry><command>pkg_add -r <replaceable>pacote</replaceable></command></entry>
		<entry>Instala o <replaceable>pacote</replaceable> a partir do reposit&oacute;rio remoto</entry>
	      </row>

	      <row>
		<entry><command>rpm -ivh <replaceable>pacote</replaceable></command> / <command>dpkg -i <replaceable>pacote</replaceable></command></entry>
		<entry><command>pkg_add -v <replaceable>pacote</replaceable></command></entry>
		<entry>Instala um pacote</entry>
	      </row>

	      <row>
		<entry><command>rpm -qa</command> / <command>dpkg -l</command></entry>
		<entry><command>pkg_info</command></entry>
		<entry>Lista de pacotes instalados</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>
      </para>
    </sect2>

    <sect2 id="systemCommands">
      <title>Gerenciamento do Sistema</title>

      <para>
	<informaltable frame="none" pgwide="1">
	  <tgroup cols="3">
	    <thead>
	      <row>
		<entry>Comando no &linux;</entry>
		<entry>Equivalente no &os;</entry>
		<entry>Prop&oacute;sito</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry><command>lspci</command></entry>
		<entry><command>pciconf</command></entry>
		<entry>Lista de dispositivos PCI</entry>
	      </row>

	      <row>
		<entry><command>lsmod</command></entry>
		<entry><command>kldstat</command></entry>
		<entry>Lista de m&oacute;dulos do <literal>kernel</literal>
		  carregados</entry>
	      </row>

	      <row>
		<entry><command>modprobe</command></entry>
		<entry><command>kldload</command> / <command>kldunload</command></entry>
		<entry>Carrega/descarrega m&oacute;dulos do
		<literal>kernel</literal></entry>
	      </row>

	      <row>
		<entry><command>strace</command></entry>
		<entry><command>truss</command></entry>
		<entry>Rastrear chamadas de sistema</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>
      </para>
    </sect2>
  </sect1>

  <sect1 id="conclusion">
    <title>Conclus&atilde;o</title>

    <para>Esperamos que este documento tenha fornecido para 
      voc&ecirc; o suficiente para come&ccedil;ar a utilizar o 
      &os;.  Certifique-se de dar uma olhada no <ulink
        url="&url.base;/doc/en_US.ISO8859-1/books/handbook/index.html">
	Handbook do &os;</ulink> para se aprofundar nos 
	t&oacute;picos abordados, assim como nos muitos 
	t&oacute;picos n&atilde;o mencionados neste documento.</para>
  </sect1>
</article>
