# $FreeBSD$
# Danilo G. Baio <dbaio@FreeBSD.org>, 2019. #zanata, 2020.
# Edson Brandi <ebrandi@FreeBSD.org>, 2019. #zanata
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2020-07-26 12:09-0300\n"
"PO-Revision-Date: 2020-07-26 13:16+0000\n"
"Last-Translator: Danilo G. Baio <dbaio@FreeBSD.org>\n"
"Language-Team: Portuguese (Brazil) <https://translate-dev.freebsd.org/"
"projects/freebsd-doc/articles_geom-class/pt_BR/>\n"
"Language: pt_BR\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=2; plural=(n != 1);\n"
"X-Generator: Weblate 4.1.1\n"

#. Put one translator per line, in the form NAME <EMAIL>, YEAR1, YEAR2
msgctxt "_"
msgid "translator-credits"
msgstr ""
"Edson Brandi, ebrandi@FreeBSD.org, 2018\n"
"Danilo G. Baio, dbaio@FreeBSD.org, 2018"

#. (itstool) path: info/title
#: article.translate.xml:5
msgid "Writing a GEOM Class"
msgstr "Escrevendo uma classe GEOM"

#. (itstool) path: affiliation/address
#: article.translate.xml:14
#, no-wrap
msgid ""
"\n"
"\t    <email>ivoras@FreeBSD.org</email>\n"
"\t  "
msgstr ""
"\n"
"\t    <email>ivoras@FreeBSD.org</email>\n"
"\t  "

#. (itstool) path: authorgroup/author
#: article.translate.xml:8
msgid ""
"<personname> <firstname>Ivan</firstname> <surname>Voras</surname> </"
"personname> <affiliation> <_:address-1/> </affiliation>"
msgstr ""
"<personname> <firstname>Ivan</firstname> <surname>Voras</surname> </"
"personname> <affiliation> <_:address-1/> </affiliation>"

#. (itstool) path: legalnotice/para
#: article.translate.xml:22
msgid "FreeBSD is a registered trademark of the FreeBSD Foundation."
msgstr "FreeBSD is a registered trademark of the FreeBSD Foundation."

#. (itstool) path: legalnotice/para
#: article.translate.xml:24
msgid ""
"Intel, Celeron, Centrino, Core, EtherExpress, i386, i486, Itanium, Pentium, "
"and Xeon are trademarks or registered trademarks of Intel Corporation or its "
"subsidiaries in the United States and other countries."
msgstr ""
"Intel, Celeron, Centrino, Core, EtherExpress, i386, i486, Itanium, Pentium, "
"and Xeon are trademarks or registered trademarks of Intel Corporation or its "
"subsidiaries in the United States and other countries."

#. (itstool) path: legalnotice/para
#: article.translate.xml:28
msgid ""
"Many of the designations used by manufacturers and sellers to distinguish "
"their products are claimed as trademarks. Where those designations appear in "
"this document, and the FreeBSD Project was aware of the trademark claim, the "
"designations have been followed by the <quote>™</quote> or the <quote>®</"
"quote> symbol."
msgstr ""
"Many of the designations used by manufacturers and sellers to distinguish "
"their products are claimed as trademarks. Where those designations appear in "
"this document, and the FreeBSD Project was aware of the trademark claim, the "
"designations have been followed by the <quote>™</quote> or the <quote>®</"
"quote> symbol."

#. (itstool) path: info/pubdate
#. (itstool) path: info/releaseinfo
#: article.translate.xml:36 article.translate.xml:38
msgid ""
"$FreeBSD: head/en_US.ISO8859-1/articles/geom-class/article.xml 54291 "
"2020-06-23 13:48:26Z emaste $"
msgstr ""
"$FreeBSD: head/en_US.ISO8859-1/articles/geom-class/article.xml 54291 "
"2020-06-23 13:48:26Z emaste $"

#. (itstool) path: abstract/para
#: article.translate.xml:41
msgid ""
"This text documents some starting points in developing GEOM classes, and "
"kernel modules in general. It is assumed that the reader is familiar with C "
"userland programming."
msgstr ""
"Este texto documenta alguns pontos de partida no desenvolvimento de classes "
"GEOM e módulos do kernel em geral. Supõe-se que o leitor esteja "
"familiarizado com a programação C do userland."

#. (itstool) path: sect1/title
#: article.translate.xml:50
msgid "Introduction"
msgstr "Introdução"

#. (itstool) path: sect2/title
#: article.translate.xml:53
msgid "Documentation"
msgstr "Documentação"

#. (itstool) path: sect2/para
#: article.translate.xml:55
msgid ""
"Documentation on kernel programming is scarce — it is one of few areas where "
"there is nearly nothing in the way of friendly tutorials, and the phrase "
"<quote>use the source!</quote> really holds true. However, there are some "
"bits and pieces (some of them seriously outdated) floating around that "
"should be studied before beginning to code:"
msgstr ""
"A documentação sobre programação do kernel é escassa - é uma das poucas "
"áreas na qual não há quase nada de tutoriais amigáveis, e a frase <quote>usa "
"a fonte!</quote> realmente é verdadeira. No entanto, existem alguns pedaços "
"(alguns deles seriamente desatualizados) flutuando por ai e que devem ser "
"estudados antes de começar a codificar:"

#. (itstool) path: listitem/para
#: article.translate.xml:64
msgid ""
"The <link xlink:href=\"@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/"
"developers-handbook/index.html\">FreeBSD Developer's Handbook</link> — part "
"of the documentation project, it does not contain anything specific to "
"kernel programming, but rather some general useful information."
msgstr ""
"O <link xlink:href=\"@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/developers-"
"handbook/index.html\">Manual do Desenvolvedor do FreeBSD</link> - parte do "
"projeto de documentação, ele não contém nenhum informação específica para a "
"programação do kernel, mas possui algumas informações gerais úteis."

#. (itstool) path: listitem/para
#: article.translate.xml:72
msgid ""
"The <link xlink:href=\"@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/arch-"
"handbook/index.html\">FreeBSD Architecture Handbook</link> — also from the "
"documentation project, contains descriptions of several low-level facilities "
"and procedures. The most important chapter is 13, <link xlink:href="
"\"@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/arch-handbook/driverbasics.html"
"\">Writing FreeBSD device drivers</link>."
msgstr ""
"O <link xlink:href=\"@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/arch-"
"handbook/index.html\">Manual de Arquitetura do FreeBSD</link> - também do "
"projeto de documentação, contém descrições de várias instalações e "
"procedimentos de baixo nível. O capítulo mais importante é o 13, <link xlink:"
"href=\"@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/arch-handbook/"
"driverbasics.html\">Escrevendo drivers de dispositivo FreeBSD</link>."

#. (itstool) path: listitem/para
#: article.translate.xml:81
msgid ""
"The Blueprints section of <link xlink:href=\"http://www.freebsddiary.org"
"\">FreeBSD Diary</link> web site — contains several interesting articles on "
"kernel facilities."
msgstr ""
"A seção Blueprints do site do <link xlink:href=\"http://www.freebsddiary.org"
"\">FreeBSD Diary</link> contém vários artigos interessantes sobre os "
"recursos do kernel."

#. (itstool) path: listitem/para
#: article.translate.xml:88
msgid ""
"The man pages in section 9 — for important documentation on kernel functions."
msgstr ""
"As páginas de manual na seção 9 - para documentação importante sobre as "
"funções do kernel."

#. (itstool) path: listitem/para
#: article.translate.xml:93
msgid ""
"The <citerefentry><refentrytitle>geom</refentrytitle><manvolnum>4</"
"manvolnum></citerefentry> man page and <link xlink:href=\"http://phk.freebsd."
"dk/pubs/\">PHK's GEOM slides</link> — for general introduction of the GEOM "
"subsystem."
msgstr ""
"A página man <citerefentry><refentrytitle>geom</refentrytitle><manvolnum>4</"
"manvolnum></citerefentry> e os <link xlink:href=\"http://phk.freebsd.dk/pubs/"
"\">Slides sobre o GEOM de PHK</link> - para uma introdução geral do "
"subsistema GEOM."

#. (itstool) path: listitem/para
#: article.translate.xml:99
msgid ""
"Man pages <citerefentry><refentrytitle>g_bio</refentrytitle><manvolnum>9</"
"manvolnum></citerefentry>, <citerefentry><refentrytitle>g_event</"
"refentrytitle><manvolnum>9</manvolnum></citerefentry>, "
"<citerefentry><refentrytitle>g_data</refentrytitle><manvolnum>9</manvolnum></"
"citerefentry>, <citerefentry><refentrytitle>g_geom</"
"refentrytitle><manvolnum>9</manvolnum></citerefentry>, "
"<citerefentry><refentrytitle>g_provider</refentrytitle><manvolnum>9</"
"manvolnum></citerefentry> <citerefentry><refentrytitle>g_consumer</"
"refentrytitle><manvolnum>9</manvolnum></citerefentry>, "
"<citerefentry><refentrytitle>g_access</refentrytitle><manvolnum>9</"
"manvolnum></citerefentry> &amp; others linked from those, for documentation "
"on specific functionalities."
msgstr ""
"Páginas de manual <citerefentry><refentrytitle>g_bio</"
"refentrytitle><manvolnum>9</manvolnum></citerefentry>, "
"<citerefentry><refentrytitle>g_event</refentrytitle><manvolnum>9</"
"manvolnum></citerefentry>, <citerefentry><refentrytitle>g_data</"
"refentrytitle><manvolnum>9</manvolnum></citerefentry>, "
"<citerefentry><refentrytitle>g_geom</refentrytitle><manvolnum>9</manvolnum></"
"citerefentry>, <citerefentry><refentrytitle>g_provider</"
"refentrytitle><manvolnum>9</manvolnum></citerefentry> "
"<citerefentry><refentrytitle>g_consumer</refentrytitle><manvolnum>9</"
"manvolnum></citerefentry>, <citerefentry><refentrytitle>g_access</"
"refentrytitle><manvolnum>9</manvolnum></citerefentry> &amp; outros ligados a "
"partir deles, para documentação sobre funcionalidades específicas."

#. (itstool) path: listitem/para
#: article.translate.xml:107
msgid ""
"The <citerefentry><refentrytitle>style</refentrytitle><manvolnum>9</"
"manvolnum></citerefentry> man page — for documentation on the coding-style "
"conventions which must be followed for any code which is to be committed to "
"the FreeBSD tree."
msgstr ""
"A página do manual <citerefentry><refentrytitle>style</"
"refentrytitle><manvolnum>9</manvolnum></citerefentry> - para documentação "
"sobre as convenções de estilo de codificação que devem ser seguidas para "
"qualquer código que se destine a ser incorporado na árvore do FreeBSD."

#. (itstool) path: sect1/title
#: article.translate.xml:117
msgid "Preliminaries"
msgstr "Preliminares"

#. (itstool) path: sect1/para
#: article.translate.xml:119
msgid ""
"The best way to do kernel development is to have (at least) two separate "
"computers. One of these would contain the development environment and "
"sources, and the other would be used to test the newly written code by "
"network-booting and network-mounting filesystems from the first one. This "
"way if the new code contains bugs and crashes the machine, it will not mess "
"up the sources (and other <quote>live</quote> data). The second system does "
"not even require a proper display. Instead, it could be connected with a "
"serial cable or KVM to the first one."
msgstr ""
"A melhor maneira de fazer o desenvolvimento do kernel é ter (pelo menos) "
"dois computadores separados. Um deles conteria o ambiente de desenvolvimento "
"e o código fonte, e o outro seria usado para testar o código recém escrito, "
"inicializando por meio da rede e montando seu sistema de arquivo a partir do "
"primeiro computador. Desta forma, se o novo código contiver erros e travar a "
"máquina, isso não irá atrapalhar o código fonte (e nem nenhum outros dado "
"<quote>vivo</quote>). O segundo sistema nem sequer requer um monitor "
"adequado. Em vez disso, ele pode ser conectado por meio de um cabo serial ou "
"KVM ao primeiro computador."

#. (itstool) path: sect1/para
#: article.translate.xml:130
msgid ""
"But, since not everybody has two or more computers handy, there are a few "
"things that can be done to prepare an otherwise <quote>live</quote> system "
"for developing kernel code. This setup is also applicable for developing in "
"a <link xlink:href=\"http://www.vmware.com/\">VMWare</link> or <link xlink:"
"href=\"http://www.qemu.org/\">QEmu</link> virtual machine (the next best "
"thing after a dedicated development machine)."
msgstr ""
"Mas, como nem todo mundo tem dois ou mais computadores à mão, há algumas "
"coisas que podem ser feitas para preparar um sistema <quote>vivo </quote> "
"para desenvolver código para o kernel. Esta configuração também é aplicável "
"para desenvolvimento em uma máquina virtual criada com o <link xlink:href="
"\"http://www.vmware.com/\">VMWare</link> ou com o <link xlink:href=\"http://"
"www.qemu.org/\">QEmu</link> (a próxima melhor coisa depois de uma máquina de "
"desenvolvimento dedicada)."

#. (itstool) path: sect2/title
#: article.translate.xml:138
msgid "Modifying a System for Development"
msgstr "Modificando um sistema para desenvolvimento"

#. (itstool) path: sect2/para
#: article.translate.xml:140
msgid ""
"For any kernel programming a kernel with <option>INVARIANTS</option> enabled "
"is a must-have. So enter these in your kernel configuration file:"
msgstr ""
"Para qualquer programação do kernel, um kernel com a opção "
"<option>INVARIANTS</option> ativada é obrigatório. Então, digite estas "
"linhas no seu arquivo de configuração do kernel:"

#. (itstool) path: sect2/programlisting
#: article.translate.xml:144
#, no-wrap
msgid ""
"options INVARIANT_SUPPORT\n"
"options INVARIANTS"
msgstr ""
"options INVARIANT_SUPPORT\n"
"options INVARIANTS"

#. (itstool) path: sect2/para
#: article.translate.xml:147
msgid ""
"For more debugging you should also include WITNESS support, which will alert "
"you of mistakes in locking:"
msgstr ""
"Para ter um maior nível de depuração, você também devrá incluir o suporte ao "
"WITNESS, o qual irá alertá-lo sobre erros relacionados a bloqueios (locking):"

#. (itstool) path: sect2/programlisting
#: article.translate.xml:150
#, no-wrap
msgid ""
"options WITNESS_SUPPORT\n"
"options WITNESS"
msgstr ""
"options WITNESS_SUPPORT\n"
"options WITNESS"

#. (itstool) path: sect2/para
#: article.translate.xml:153
msgid "For debugging crash dumps, a kernel with debug symbols is needed:"
msgstr ""
"Para depurar despejos de memória, é necessário um kernel com símbolos de "
"depuração:"

#. (itstool) path: sect2/programlisting
#: article.translate.xml:156
#, no-wrap
msgid "  makeoptions    DEBUG=-g"
msgstr "  makeoptions    DEBUG=-g"

#. (itstool) path: sect2/para
#: article.translate.xml:158
msgid ""
"With the usual way of installing the kernel (<command>make installkernel</"
"command>) the debug kernel will not be automatically installed. It is called "
"<filename>kernel.debug</filename> and located in <filename>/usr/obj/usr/src/"
"sys/KERNELNAME/</filename>. For convenience it should be copied to "
"<filename>/boot/kernel/</filename>."
msgstr ""
"Com a maneira usual de instalar o kernel (<command>make installkernel</"
"command>) o kernel de depuração não será instalado automaticamente. Ele é "
"chamado de <filename>kernel.debug </filename> e fica localizado em "
"<filename>/usr/obj/usr/src/sys/KERNELNAME/</filename>. Por conveniência, "
"deve ser copiado para <filename>/boot/kernel/</filename>."

#. (itstool) path: sect2/para
#: article.translate.xml:166
msgid ""
"Another convenience is enabling the kernel debugger so you can examine a "
"kernel panic when it happens. For this, enter the following lines in your "
"kernel configuration file:"
msgstr ""
"Outra conveniência é habilitar o depurador do kernel para que você possa "
"examinar o panic do kernel quando isso acontece. Para isso, insira as "
"seguintes linhas no seu arquivo de configuração do kernel:"

#. (itstool) path: sect2/programlisting
#: article.translate.xml:170
#, no-wrap
msgid ""
"options KDB\n"
"options DDB\n"
"options KDB_TRACE"
msgstr ""
"options KDB\n"
"options DDB\n"
"options KDB_TRACE"

#. (itstool) path: sect2/para
#: article.translate.xml:174
msgid ""
"For this to work you might need to set a sysctl (if it is not on by default):"
msgstr ""
"Para que isso funcione, você pode precisar definir um sysctl (se ele não "
"estiver ativado por padrão):"

#. (itstool) path: sect2/programlisting
#: article.translate.xml:177
#, no-wrap
msgid "  debug.debugger_on_panic=1"
msgstr "  debug.debugger_on_panic=1"

#. (itstool) path: sect2/para
#: article.translate.xml:179
msgid ""
"Kernel panics will happen, so care should be taken with the filesystem "
"cache. In particular, having softupdates might mean the latest file version "
"could be lost if a panic occurs before it is committed to storage. Disabling "
"softupdates yields a great performance hit, and still does not guarantee "
"data consistency. Mounting filesystem with the <quote>sync</quote> option is "
"needed for that. For a compromise, the softupdates cache delays can be "
"shortened. There are three sysctl's that are useful for this (best to be set "
"in <filename>/etc/sysctl.conf</filename>):"
msgstr ""
"Kernel panics acontecerão, portanto, deve-se ter cuidado com o cache do "
"sistema de arquivos. Em particular, ter o softupdates habilitado pode "
"significar que a versão mais recente do arquivo pode ser perdida se um panic "
"ocorrer antes de ser committed para armazenamento. Desativar o softupdates "
"produz um grande impacto na performance e ainda não garante a consistência "
"dos dados. A montagem do sistema de arquivos com a opção <quote>sync</quote> "
"é necessária para isso. Para um compromisso, os atrasos do cache de "
"softupdates podem ser encurtados. Existem três sysctl's que são úteis para "
"isso (melhor ser configurado em <filename>/etc/sysctl.conf</filename>):"

#. (itstool) path: sect2/programlisting
#: article.translate.xml:190
#, no-wrap
msgid ""
"kern.filedelay=5\n"
"kern.dirdelay=4\n"
"kern.metadelay=3"
msgstr ""
"kern.filedelay=5\n"
"kern.dirdelay=4\n"
"kern.metadelay=3"

#. (itstool) path: sect2/para
#: article.translate.xml:194
msgid "The numbers represent seconds."
msgstr "Os números representam segundos."

#. (itstool) path: sect2/para
#: article.translate.xml:196
msgid ""
"For debugging kernel panics, kernel core dumps are required. Since a kernel "
"panic might make filesystems unusable, this crash dump is first written to a "
"raw partition. Usually, this is the swap partition. This partition must be "
"at least as large as the physical RAM in the machine. On the next boot, the "
"dump is copied to a regular file. This happens after filesystems are checked "
"and mounted, and before swap is enabled. This is controlled with two "
"<filename>/etc/rc.conf</filename> variables:"
msgstr ""
"Para depurar os panics do kernel, os dumps do núcleo do kernel são "
"necessários. Como um kernel panic pode tornar os sistemas de arquivos "
"inutilizáveis, esse despejo de memória é primeiramente gravado em uma "
"partição bruta. Normalmente, esta é a partição de swap. Essa partição deve "
"ser pelo menos tão grande quanto a RAM física na máquina. Na próxima "
"inicialização, o despejo é copiado para um arquivo normal. Isso acontece "
"depois que os sistemas de arquivos são verificados e montados e antes que o "
"swap seja ativado. Isto é controlado com duas variáveis <filename>/etc/rc."
"conf</filename>:"

#. (itstool) path: sect2/programlisting
#: article.translate.xml:206
#, no-wrap
msgid ""
"dumpdev=\"/dev/ad0s4b\"\n"
"dumpdir=\"/usr/core "
msgstr ""
"dumpdev=\"/dev/ad0s4b\"\n"
"dumpdir=\"/usr/core "

#. (itstool) path: sect2/para
#: article.translate.xml:209
msgid ""
"The <varname>dumpdev</varname> variable specifies the swap partition and "
"<varname>dumpdir</varname> tells the system where in the filesystem to "
"relocate the core dump on reboot."
msgstr ""
"A variável <varname>dumpdev</varname> especifica a partição de swap e "
"<varname>dumpdir</varname> informa ao sistema onde no sistema de arquivos "
"ele deverá realocar o dump principal na reinicialização."

#. (itstool) path: sect2/para
#: article.translate.xml:214
msgid ""
"Writing kernel core dumps is slow and takes a long time so if you have lots "
"of memory (&gt;256M) and lots of panics it could be frustrating to sit and "
"wait while it is done (twice — first to write it to swap, then to relocate "
"it to filesystem). It is convenient then to limit the amount of RAM the "
"system will use via a <filename>/boot/loader.conf</filename> tunable:"
msgstr ""
"A gravação de core dumps é lenta e leva muito tempo, então se você tiver "
"muita memória (&gt;256M) e muitos panics, pode ser frustrante sentar e "
"esperar enquanto isso é feito (duas vezes - primeiro para gravar para o "
"swap, depois para realocá-lo para o sistema de arquivos). É conveniente "
"limitar a quantidade de RAM que o sistema usará através de uma variável do "
"<filename>/boot/loader.conf</filename>:"

#. (itstool) path: sect2/programlisting
#: article.translate.xml:222
#, no-wrap
msgid "  hw.physmem=\"256M\""
msgstr "  hw.physmem=\"256M\""

#. (itstool) path: sect2/para
#: article.translate.xml:224
msgid ""
"If the panics are frequent and filesystems large (or you simply do not trust "
"softupdates+background fsck) it is advisable to turn background fsck off via "
"<filename>/etc/rc.conf</filename> variable:"
msgstr ""
"Se os panics são frequentes e os sistemas de arquivos são grandes (ou você "
"simplesmente não confia em softupdates + background fsck), é aconselhável "
"desligar o fsck em background através da variável <filename>/etc/rc.conf</"
"filename>:"

#. (itstool) path: sect2/programlisting
#: article.translate.xml:229
#, no-wrap
msgid "  background_fsck=\"NO\""
msgstr "  background_fsck=\"NO\""

#. (itstool) path: sect2/para
#: article.translate.xml:231
msgid ""
"This way, the filesystems will always get checked when needed. Note that "
"with background fsck, a new panic could happen while it is checking the "
"disks. Again, the safest way is not to have many local filesystems by using "
"another computer as an NFS server."
msgstr ""
"Dessa forma, os sistemas de arquivos sempre serão verificados quando "
"necessário. Observe que, com o fsck em segundo plano, um novo panic pode "
"acontecer enquanto ele está verificando os discos. Novamente, a maneira mais "
"segura é não ter muitos sistemas de arquivos locais, usando o outro "
"computador como um servidor NFS."

#. (itstool) path: sect2/title
#: article.translate.xml:239
msgid "Starting the Project"
msgstr "Começando o projeto"

#. (itstool) path: sect2/para
#: article.translate.xml:241
msgid ""
"For the purpose of creating a new GEOM class, an empty subdirectory has to "
"be created under an arbitrary user-accessible directory. You do not have to "
"create the module directory under <filename>/usr/src</filename>."
msgstr ""
"Para o propósito de criar uma nova classe GEOM, um subdiretório vazio deve "
"ser criado sob um diretório arbitrário acessível pelo usuário. Você não "
"precisa criar o diretório do módulo em <filename>/usr/src</filename>."

#. (itstool) path: sect2/title
#: article.translate.xml:248
msgid "The Makefile"
msgstr "O Makefile"

#. (itstool) path: sect2/para
#: article.translate.xml:250
msgid ""
"It is good practice to create <filename>Makefile</filename>s for every "
"nontrivial coding project, which of course includes kernel modules."
msgstr ""
"É uma boa prática criar <filename>Makefile</filename>s para cada projeto de "
"codificação não trivial, o que obviamente inclui módulos do kernel."

#. (itstool) path: sect2/para
#: article.translate.xml:254
msgid ""
"Creating the <filename>Makefile</filename> is simple thanks to an extensive "
"set of helper routines provided by the system. In short, here is how a "
"minimal <filename>Makefile</filename> looks for a kernel module:"
msgstr ""
"Criar o <filename>Makefile</filename> é simples graças a um extenso conjunto "
"de rotinas auxiliares fornecidas pelo sistema. Em suma, aqui está um exemplo "
"de como um Makefile <filename>mínimo</filename> para um módulo do kernel se "
"parece:"

#. (itstool) path: sect2/programlisting
#: article.translate.xml:260
#, no-wrap
msgid ""
"SRCS=g_journal.c\n"
"KMOD=geom_journal\n"
"\n"
".include &lt;bsd.kmod.mk&gt;"
msgstr ""
"SRCS=g_journal.c\n"
"KMOD=geom_journal\n"
"\n"
".include &lt;bsd.kmod.mk&gt;"

#. (itstool) path: sect2/para
#: article.translate.xml:265
msgid ""
"This <filename>Makefile</filename> (with changed filenames) will do for any "
"kernel module, and a GEOM class can reside in just one kernel module. If "
"more than one file is required, list it in the <envar>SRCS</envar> variable, "
"separated with whitespace from other filenames."
msgstr ""
"Este <filename>Makefile</filename> (com nomes de arquivos alterados) serve "
"para qualquer módulo do kernel, e uma classe GEOM pode residir em apenas um "
"módulo do kernel. Se mais de um arquivo for necessário, liste-o na variável "
"<envar>SRCS</envar>, separado com espaço em branco de outros nomes de "
"arquivos."

#. (itstool) path: sect1/title
#: article.translate.xml:274
msgid "On FreeBSD Kernel Programming"
msgstr "Programação do kernel do FreeBSD"

#. (itstool) path: sect2/title
#: article.translate.xml:277
msgid "Memory Allocation"
msgstr "Alocação de memória"

#. (itstool) path: sect2/para
#: article.translate.xml:279
msgid ""
"See <citerefentry><refentrytitle>malloc</refentrytitle><manvolnum>9</"
"manvolnum></citerefentry>. Basic memory allocation is only slightly "
"different than its userland equivalent. Most notably, <function>malloc</"
"function>() and <function>free</function>() accept additional parameters as "
"is described in the man page."
msgstr ""
"Veja o <citerefentry><refentrytitle>malloc</refentrytitle><manvolnum>9</"
"manvolnum></citerefentry>. A alocação básica de memória é apenas "
"ligeiramente diferente do seu userland equivalente. Mais notavelmente, "
"<function>malloc</function>() e <function>free</function>() aceitam "
"parâmetros adicionais conforme descrito na página do manual."

#. (itstool) path: sect2/para
#: article.translate.xml:285
msgid ""
"A <quote>malloc type</quote> must be declared in the declaration section of "
"a source file, like this:"
msgstr ""
"Um <quote>malloc type</quote> deve ser declarado na seção de declaração de "
"um arquivo fonte, assim:"

#. (itstool) path: sect2/programlisting
#: article.translate.xml:288
#, no-wrap
msgid "  static MALLOC_DEFINE(M_GJOURNAL, \"gjournal data\", \"GEOM_JOURNAL Data\");"
msgstr "  static MALLOC_DEFINE(M_GJOURNAL, \"gjournal data\", \"GEOM_JOURNAL Data\");"

#. (itstool) path: sect2/para
#: article.translate.xml:290
msgid ""
"To use this macro, <filename>sys/param.h</filename>, <filename>sys/kernel.h</"
"filename> and <filename>sys/malloc.h</filename> headers must be included."
msgstr ""
"Para usar esta macro, os cabeçalhos <filename>sys/param.h</filename>, "
"<filename>sys/kernel.h</filename> e <filename>sys/malloc.h</filename> devem "
"ser incluídos."

#. (itstool) path: sect2/para
#: article.translate.xml:295
msgid ""
"There is another mechanism for allocating memory, the UMA (Universal Memory "
"Allocator). See <citerefentry><refentrytitle>uma</"
"refentrytitle><manvolnum>9</manvolnum></citerefentry> for details, but it is "
"a special type of allocator mainly used for speedy allocation of lists "
"comprised of same-sized items (for example, dynamic arrays of structs)."
msgstr ""
"Existe outro mecanismo para alocar memória, o UMA (Universal Memory "
"Allocator). Veja <citerefentry><refentrytitle>uma</"
"refentrytitle><manvolnum>9</manvolnum></citerefentry> para detalhes, mas ele "
"é um tipo especial de alocador usado principalmente para alocação rápida de "
"listas compostas de itens do mesmo tamanho (por exemplo, matrizes dinâmicas "
"de estruturas)."

#. (itstool) path: sect2/title
#: article.translate.xml:303
msgid "Lists and Queues"
msgstr "Listas e filas"

#. (itstool) path: sect2/para
#: article.translate.xml:305
msgid ""
"See <citerefentry><refentrytitle>queue</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry>. There are a LOT of cases when a list of things "
"needs to be maintained. Fortunately, this data structure is implemented (in "
"several ways) by C macros included in the system. The most used list type is "
"TAILQ because it is the most flexible. It is also the one with largest "
"memory requirements (its elements are doubly-linked) and also the slowest "
"(although the speed variation is on the order of several CPU instructions "
"more, so it should not be taken seriously)."
msgstr ""
"Veja <citerefentry><refentrytitle>queue</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry>. Há MUITOS casos quando uma lista de coisas "
"precisa ser mantida. Felizmente, essa estrutura de dados é implementada (de "
"várias maneiras) por macros C incluídas no sistema. O tipo de lista mais "
"usado é o TAILQ, porque é o mais flexível. É também aquele com os maiores "
"requisitos de memória (seus elementos são duplamente vinculados) e também o "
"mais lento (embora a variação de velocidade seja mais da ordem de várias "
"instruções da CPU, portanto, ela não deve ser levada a sério)."

#. (itstool) path: sect2/para
#: article.translate.xml:315
msgid ""
"If data retrieval speed is very important, see "
"<citerefentry><refentrytitle>tree</refentrytitle><manvolnum>3</manvolnum></"
"citerefentry> and <citerefentry><refentrytitle>hashinit</"
"refentrytitle><manvolnum>9</manvolnum></citerefentry>."
msgstr ""
"Se a velocidade de recuperação de dados for muito importante, veja "
"<citerefentry><refentrytitle>tree</refentrytitle><manvolnum>3</manvolnum></"
"citerefentry> e <citerefentry><refentrytitle>hashinit</"
"refentrytitle><manvolnum>9</manvolnum></citerefentry>."

#. (itstool) path: sect2/title
#: article.translate.xml:320
msgid "BIOs"
msgstr "BIOS"

#. (itstool) path: sect2/para
#: article.translate.xml:322
msgid ""
"Structure <varname remap=\"structname\">bio</varname> is used for any and "
"all Input/Output operations concerning GEOM. It basically contains "
"information about what device ('provider') should satisfy the request, "
"request type, offset, length, pointer to a buffer, and a bunch of "
"<quote>user-specific</quote> flags and fields that can help implement "
"various hacks."
msgstr ""
"A estrutura <varname remap=\"structname\">bio</varname> é usada para todas e "
"quaisquer operações de Input/Output relativas ao GEOM. Ele basicamente "
"contém informações sobre qual dispositivo ('provedor') deve satisfazer a "
"solicitação, tipo de pedido, offset, comprimento, ponteiro para um buffer e "
"um monte de sinalizadores <quote>específicos do usuário</quote> e campos que "
"podem ajudar a implementar vários hacks."

#. (itstool) path: sect2/para
#: article.translate.xml:330
msgid ""
"The important thing here is that <varname remap=\"structname\">bio</"
"varname>s are handled asynchronously. That means that, in most parts of the "
"code, there is no analogue to userland's <citerefentry><refentrytitle>read</"
"refentrytitle><manvolnum>2</manvolnum></citerefentry> and "
"<citerefentry><refentrytitle>write</refentrytitle><manvolnum>2</manvolnum></"
"citerefentry> calls that do not return until a request is done. Rather, a "
"developer-supplied function is called as a notification when the request "
"gets completed (or results in error)."
msgstr ""
"O importante aqui é que os <varname remap=\"structname\">bio</varname>s são "
"tratados de forma assíncrona. Isso significa que, na maior parte do código, "
"não há nenhum análogo as chamadas <citerefentry><refentrytitle>read</"
"refentrytitle><manvolnum>2</manvolnum></citerefentry> e "
"<citerefentry><refentrytitle>write</refentrytitle><manvolnum>2</manvolnum></"
"citerefentry> que não retornam até que uma solicitação seja feita. Em vez "
"disso, uma função fornecida pelo desenvolvedor é chamada como uma "
"notificação quando a solicitação é concluída (ou resulta em erro)."

#. (itstool) path: sect2/para
#: article.translate.xml:338
msgid ""
"The asynchronous programming model (also called <quote>event-driven</quote>) "
"is somewhat harder than the much more used imperative one used in userland "
"(at least it takes a while to get used to it). In some cases the helper "
"routines <function>g_write_data</function>() and <function>g_read_data</"
"function>() can be used, but <emphasis>not always</emphasis>. In particular, "
"they cannot be used when a mutex is held; for example, the GEOM topology "
"mutex or the internal mutex held during the <function>.start</function>() "
"and <function>.stop</function>() functions."
msgstr ""
"O modelo de programação assíncrona (também chamado de <quote>orientado a "
"eventos</quote>) é um pouco mais difícil do que o imperativo muito mais "
"usado no userland (pelo menos leva um tempo para se acostumar com isso). Em "
"alguns casos, as rotinas auxiliares <function>g_write_data</function>() e "
"<function>g_read_data</function>() podem ser usadas, mas <emphasis>nem "
"sempre</emphasis>. Em particular, elas não podem ser usadas quando um mutex "
"é mantido; por exemplo, o mutex de topologia GEOM ou o mutex interno mantido "
"durante as funções <function>.start</function>() e <function>.stop</"
"function>()."

#. (itstool) path: sect1/title
#: article.translate.xml:353
msgid "On GEOM Programming"
msgstr "Programação GEOM"

#. (itstool) path: sect2/title
#: article.translate.xml:356
msgid "Ggate"
msgstr "Ggate"

#. (itstool) path: sect2/para
#: article.translate.xml:358
msgid ""
"If maximum performance is not needed, a much simpler way of making a data "
"transformation is to implement it in userland via the ggate (GEOM gate) "
"facility. Unfortunately, there is no easy way to convert between, or even "
"share code between the two approaches."
msgstr ""
"Se o desempenho máximo não for necessário, uma maneira muito mais simples de "
"fazer uma transformação de dados é implementá-lo na área do usuário por meio "
"do recurso ggate (GEOM gate). Infelizmente, não existe uma maneira fácil de "
"converter ou até mesmo compartilhar código entre as duas abordagens."

#. (itstool) path: sect2/title
#: article.translate.xml:366
msgid "GEOM Class"
msgstr "Classe GEOM"

#. (itstool) path: sect2/para
#: article.translate.xml:368
msgid ""
"GEOM classes are transformations on the data. These transformations can be "
"combined in a tree-like fashion. Instances of GEOM classes are called "
"<emphasis>geoms</emphasis>."
msgstr ""
"Classes GEOM são transformações nos dados. Essas transformações podem ser "
"combinadas em uma forma de árvore. Instâncias de classes GEOM são chamadas "
"de <emphasis>geoms</emphasis>."

#. (itstool) path: sect2/para
#: article.translate.xml:373
msgid ""
"Each GEOM class has several <quote>class methods</quote> that get called "
"when there is no geom instance available (or they are simply not bound to a "
"single instance):"
msgstr ""
"Cada classe GEOM possui vários <quote>métodos de classe</quote> que são "
"chamados quando não há nenhuma instância geom disponível (ou simplesmente "
"não estão vinculados a uma única instância):"

#. (itstool) path: listitem/para
#: article.translate.xml:379
msgid ""
"<function>.init</function> is called when GEOM becomes aware of a GEOM class "
"(when the kernel module gets loaded.)"
msgstr ""
"<function>.init</function> é chamada quando o GEOM toma conhecimento de uma "
"classe GEOM (quando o módulo do kernel é carregado)."

#. (itstool) path: listitem/para
#: article.translate.xml:385
msgid ""
"<function>.fini</function> gets called when GEOM abandons the class (when "
"the module gets unloaded)"
msgstr ""
"<function>.fini</function> é chamada quando o GEOM abandona a classe (quando "
"o módulo é descarregado)"

#. (itstool) path: listitem/para
#: article.translate.xml:391
msgid ""
"<function>.taste</function> is called next, once for each provider the "
"system has available. If applicable, this function will usually create and "
"start a geom instance."
msgstr ""
"<function>.taste</function> é chamada next, uma vez para cada provedor que o "
"sistema tiver disponível. Se aplicável, essa função geralmente criará e "
"iniciará uma instância geom."

#. (itstool) path: listitem/para
#: article.translate.xml:398
msgid ""
"<function>.destroy_geom</function> is called when the geom should be "
"disbanded"
msgstr ""
"<function>.destroy_geom</function> é chamada quando o geom deve ser desfeito"

#. (itstool) path: listitem/para
#: article.translate.xml:403
msgid ""
"<function>.ctlconf</function> is called when user requests reconfiguration "
"of existing geom"
msgstr ""
"<function>.ctlconf</function> é chamado quando o usuário solicita a "
"reconfiguração do geom existente"

#. (itstool) path: sect2/para
#: article.translate.xml:409
msgid ""
"Also defined are the GEOM event functions, which will get copied to the geom "
"instance."
msgstr ""
"Também são definidas as funções de evento GEOM, que serão copiadas para a "
"instância geom."

#. (itstool) path: sect2/para
#: article.translate.xml:412
msgid ""
"Field <function>.geom</function> in the <varname remap=\"structname"
"\">g_class</varname> structure is a LIST of geoms instantiated from the "
"class."
msgstr ""
"O campo <function>.geom</function> na estrutura <varname remap=\"structname"
"\">g_class</varname> é uma LISTA de geoms instanciados a partir da classe."

#. (itstool) path: sect2/para
#: article.translate.xml:415
msgid "These functions are called from the g_event kernel thread."
msgstr "Estas funções são chamadas a partir da thread g_event do kernel."

#. (itstool) path: sect2/title
#: article.translate.xml:420
msgid "Softc"
msgstr "Softc"

#. (itstool) path: sect2/para
#: article.translate.xml:422
msgid ""
"The name <quote>softc</quote> is a legacy term for <quote>driver private "
"data</quote>. The name most probably comes from the archaic term "
"<quote>software control block</quote>. In GEOM, it is a structure (more "
"precise: pointer to a structure) that can be attached to a geom instance to "
"hold whatever data is private to the geom instance. Most GEOM classes have "
"the following members:"
msgstr ""
"O nome <quote>softc</quote> é um termo legado para <quote>dados privados do "
"driver</quote>. O nome provavelmente vem do termo arcaico <quote>bloco de "
"controle de software</quote>. No GEOM, ele é uma estrutura (mais "
"precisamente: ponteiro para uma estrutura) que pode ser anexada a uma "
"instância geom para armazenar quaisquer dados que sejam privados para a "
"instância geom. A maioria das classes GEOM possui os seguintes membros:"

#. (itstool) path: listitem/para
#: article.translate.xml:433
msgid ""
"<varname>struct g_provider *provider</varname> : The <quote>provider</quote> "
"this geom instantiates"
msgstr ""
"<varname>struct g_provider *provider</varname> : O <quote>provedor</quote> "
"que este geom instância"

#. (itstool) path: listitem/para
#: article.translate.xml:439
msgid ""
"<varname>uint16_t n_disks</varname> : Number of consumer this geom consumes"
msgstr ""
"<varname>uint16_t n_disks</varname> : Número de consumidores que este geom "
"consome"

#. (itstool) path: listitem/para
#: article.translate.xml:444
msgid ""
"<varname>struct g_consumer **disks</varname> : Array of <varname>struct "
"g_consumer*</varname>. (It is not possible to use just single indirection "
"because struct g_consumer* are created on our behalf by GEOM)."
msgstr ""
"<varname>struct g_consumer **disks</varname>: Array de <varname>struct "
"g_consumer*</varname>. (Não é possível usar apenas uma única via indireta "
"porque o struct g_consumer* é criado em nosso nome pela GEOM)."

#. (itstool) path: sect2/para
#: article.translate.xml:452
msgid ""
"The <varname remap=\"structname\">softc</varname> structure contains all the "
"state of geom instance. Every geom instance has its own softc."
msgstr ""
"A estrutura <varname remap=\"structname\">softc</varname> contém todo o "
"estado da instância geom. Cada instância geom possui seu próprio softc."

#. (itstool) path: sect2/title
#: article.translate.xml:458
msgid "Metadata"
msgstr "Metadados"

#. (itstool) path: sect2/para
#: article.translate.xml:460
msgid ""
"Format of metadata is more-or-less class-dependent, but MUST start with:"
msgstr ""
"O formato dos metadados é mais ou menos dependente da classe, mas DEVE "
"começar com:"

#. (itstool) path: listitem/para
#: article.translate.xml:465
msgid "16 byte buffer for null-terminated signature (usually the class name)"
msgstr ""
"Buffer de 16 bytes para uma assinatura de terminação nula (geralmente o nome "
"da classe)"

#. (itstool) path: listitem/para
#: article.translate.xml:470
msgid "uint32 version ID"
msgstr "ID da versão uint32"

#. (itstool) path: sect2/para
#: article.translate.xml:474
msgid ""
"It is assumed that geom classes know how to handle metadata with version "
"ID's lower than theirs."
msgstr ""
"Assume-se que as classes geom sabem como lidar com metadados com ID de "
"versão menores que os deles."

#. (itstool) path: sect2/para
#: article.translate.xml:477
msgid ""
"Metadata is located in the last sector of the provider (and thus must fit in "
"it)."
msgstr ""
"Os metadados estão localizados no último setor do provedor (e, portanto, "
"devem caber nele)."

#. (itstool) path: sect2/para
#: article.translate.xml:480
msgid ""
"(All this is implementation-dependent but all existing code works like that, "
"and it is supported by libraries.)"
msgstr ""
"(Tudo isso depende da implementação, mas todo o código existente funciona "
"assim, e é suportado por bibliotecas.)"

#. (itstool) path: sect2/title
#: article.translate.xml:486
msgid "Labeling/creating a GEOM"
msgstr "Rotulando/criando um GEOM"

#. (itstool) path: sect2/para
#: article.translate.xml:488
msgid "The sequence of events is:"
msgstr "A sequência de eventos é:"

#. (itstool) path: listitem/para
#: article.translate.xml:492
msgid ""
"user calls <citerefentry><refentrytitle>geom</refentrytitle><manvolnum>8</"
"manvolnum></citerefentry> utility (or one of its hardlinked friends)"
msgstr ""
"o usuário chama o utilitário <citerefentry><refentrytitle>geom</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry> (ou um de seus "
"equivalentes hardlinked)"

#. (itstool) path: listitem/para
#: article.translate.xml:497
msgid ""
"the utility figures out which geom class it is supposed to handle and "
"searches for <filename>geom_<replaceable>CLASSNAME</replaceable>.so</"
"filename> library (usually in <filename>/lib/geom</filename>)."
msgstr ""
"o utilitário descobre qual classe geom ele é suposto manipular e procura "
"pela biblioteca <filename>geom_<replaceable>CLASSNAME</replaceable>.so </"
"filename> (geralmente em <filename>/lib/geom</filename>)."

#. (itstool) path: listitem/para
#: article.translate.xml:505
msgid ""
"it <citerefentry><refentrytitle>dlopen</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry>-s the library, extracts the definitions of command-"
"line parameters and helper functions."
msgstr ""
"ele <citerefentry><refentrytitle>dlopen</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry>-s a biblioteca, extrai as definições dos "
"parâmetros da linha de comandos e funções auxiliares."

#. (itstool) path: sect2/para
#: article.translate.xml:511
msgid "In the case of creating/labeling a new geom, this is what happens:"
msgstr "No caso da criação/rotulação de um novo geom, isso é o que acontece:"

#. (itstool) path: listitem/para
#: article.translate.xml:516
msgid ""
"<citerefentry><refentrytitle>geom</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> looks in the command-line argument for the command (usually "
"<option>label</option>), and calls a helper function."
msgstr ""
"O <citerefentry><refentrytitle>geom</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> procura no argumento da linha de comando pelo comando "
"(geralmente <option>label</option>) e chama uma função auxiliar ."

#. (itstool) path: listitem/para
#: article.translate.xml:522
msgid ""
"The helper function checks parameters and gathers metadata, which it "
"proceeds to write to all concerned providers."
msgstr ""
"A função auxiliar verifica parâmetros e reúne metadados, que são gravados em "
"todos os provedores envolvidos."

#. (itstool) path: listitem/para
#: article.translate.xml:528
msgid ""
"This <quote>spoils</quote> existing geoms (if any) and initializes a new "
"round of <quote>tasting</quote> of the providers. The intended geom class "
"recognizes the metadata and brings the geom up."
msgstr ""
"Este <quote>estraga</quote> geoms existentes (se existirem) e inicializa uma "
"nova rodada de <quote>degustação</quote> dos provedores. A classe geom "
"pretendida reconhece os metadados e carrega o geom."

#. (itstool) path: sect2/para
#: article.translate.xml:535
msgid ""
"(The above sequence of events is implementation-dependent but all existing "
"code works like that, and it is supported by libraries.)"
msgstr ""
"(A sequência de eventos acima é dependente da implementação, mas todo o "
"código existente funciona assim, e é suportado pelas bibliotecas.)"

#. (itstool) path: sect2/title
#: article.translate.xml:541
msgid "GEOM Command Structure"
msgstr "Estrutura do Comando GEOM"

#. (itstool) path: sect2/para
#: article.translate.xml:543
msgid ""
"The helper <filename>geom_CLASSNAME.so</filename> library exports <varname "
"remap=\"structname\">class_commands</varname> structure, which is an array "
"of <varname remap=\"structname\">struct g_command</varname> elements. "
"Commands are of uniform format and look like:"
msgstr ""
"A biblioteca helper <filename>geom_CLASSNAME.so</filename> exporta a "
"estrutura <varname remap=\"structname\">class_commands</varname>, que é uma "
"matriz dos elementos <varname remap=\"structname\">struct g_command</"
"varname>. Os comandos são uniformes no formato e se parecem com:"

#. (itstool) path: sect2/programlisting
#: article.translate.xml:548
#, no-wrap
msgid "  verb [-options] geomname [other]"
msgstr "  verb [-options] geomname [other]"

#. (itstool) path: sect2/para
#: article.translate.xml:550
msgid "Common verbs are:"
msgstr "Verbos comuns são:"

#. (itstool) path: listitem/para
#: article.translate.xml:554
msgid ""
"label — to write metadata to devices so they can be recognized at tasting "
"and brought up in geoms"
msgstr ""
"label - para gravar metadados em dispositivos para que eles possam ser "
"reconhecidos em degustações e criados em geoms"

#. (itstool) path: listitem/para
#: article.translate.xml:560
msgid "destroy — to destroy metadata, so the geoms get destroyed"
msgstr "destroy - para destruir metadados, para que as geoms sejam destruídas"

#. (itstool) path: sect2/para
#: article.translate.xml:565
msgid "Common options are:"
msgstr "Opções comuns são:"

#. (itstool) path: listitem/para
#: article.translate.xml:569
msgid "<literal>-v</literal> : be verbose"
msgstr "<literal>-v</literal> : be verbose"

#. (itstool) path: listitem/para
#: article.translate.xml:573
msgid "<literal>-f</literal> : force"
msgstr "<literal>-f</literal> : force"

#. (itstool) path: sect2/para
#: article.translate.xml:577
msgid ""
"Many actions, such as labeling and destroying metadata can be performed in "
"userland. For this, <varname remap=\"structname\">struct g_command</varname> "
"provides field <varname>gc_func</varname> that can be set to a function (in "
"the same <filename>.so</filename>) that will be called to process a verb. If "
"<varname>gc_func</varname> is NULL, the command will be passed to kernel "
"module, to <function>.ctlreq</function> function of the geom class."
msgstr ""
"Muitas ações, como rotular e destruir metadados, podem ser executadas no "
"userland. Para isso, <varname remap=\"structname\">struct g_command</"
"varname> fornece o campo <varname>gc_func</varname> que pode ser definido "
"para uma função (no mesmo <filename>.so</filename>) que será chamada para "
"processar um verbo. Se <varname>gc_func</varname> for NULL, o comando será "
"passado para o módulo do kernel, para a função <function>.ctlreq</function> "
"da classe geom."

#. (itstool) path: sect2/title
#: article.translate.xml:588
msgid "Geoms"
msgstr "Geoms"

#. (itstool) path: sect2/para
#: article.translate.xml:590
msgid ""
"Geoms are instances of GEOM classes. They have internal data (a softc "
"structure) and some functions with which they respond to external events."
msgstr ""
"Geoms são instâncias de classes GEOM. Eles possuem dados internos (uma "
"estrutura softc) e algumas funções com as quais eles respondem a eventos "
"externos."

#. (itstool) path: sect2/para
#: article.translate.xml:594
msgid "The event functions are:"
msgstr "As funções de evento são:"

#. (itstool) path: listitem/para
#: article.translate.xml:598
msgid ""
"<function>.access</function> : calculates permissions (read/write/exclusive)"
msgstr ""
"<function>.acess</function>: calcula permissões (leitura / escrita / "
"exclusiva)"

#. (itstool) path: listitem/para
#: article.translate.xml:603
msgid ""
"<function>.dumpconf</function> : returns XML-formatted information about the "
"geom"
msgstr ""
"<function>.dumpconf</function>: retorna informações formatadas em XML sobre "
"o geom"

#. (itstool) path: listitem/para
#: article.translate.xml:608
msgid ""
"<function>.orphan</function> : called when some underlying provider gets "
"disconnected"
msgstr ""
"<function>.orphan</function>: chamado quando algum provedor subjacente é "
"desconectado"

#. (itstool) path: listitem/para
#: article.translate.xml:613
msgid ""
"<function>.spoiled</function> : called when some underlying provider gets "
"written to"
msgstr ""
"<function>.spoiled</function>: chamado quando algum provedor subjacente é "
"gravado"

#. (itstool) path: listitem/para
#: article.translate.xml:618
msgid "<function>.start</function> : handles I/O"
msgstr "<function>.start</function>: lida com I/O"

#. (itstool) path: sect2/para
#: article.translate.xml:622
msgid ""
"These functions are called from the <function>g_down</function> kernel "
"thread and there can be no sleeping in this context, (see definition of "
"sleeping elsewhere) which limits what can be done quite a bit, but forces "
"the handling to be fast."
msgstr ""
"Estas funções são chamadas a partir da thread <function>g_down</function> do "
"kernel e não pode haver sleeping neste contexto, (veja a definição de "
"sleeping em outro lugar) o que limita um pouco o que pode ser feito, mas "
"força o manuseio a ser rápido ."

#. (itstool) path: sect2/para
#: article.translate.xml:628
msgid ""
"Of these, the most important function for doing actual useful work is the "
"<function>.start</function>() function, which is called when a BIO request "
"arrives for a provider managed by a instance of geom class."
msgstr ""
"Destes, a função mais importante para fazer o trabalho útil real é a função "
"<function>.start</function>(), que é chamada quando uma requisição BIO chega "
"para um provedor gerenciado por uma instância da classe geom."

#. (itstool) path: sect2/title
#: article.translate.xml:635
msgid "GEOM Threads"
msgstr "Threads GEOM"

#. (itstool) path: sect2/para
#: article.translate.xml:637
msgid "There are three kernel threads created and run by the GEOM framework:"
msgstr ""
"Existem três threads de kernel criados e executados pelo framework GEOM:"

#. (itstool) path: listitem/para
#: article.translate.xml:642
msgid ""
"<literal>g_down</literal> : Handles requests coming from high-level entities "
"(such as a userland request) on the way to physical devices"
msgstr ""
"<literal>g_down</literal> : trata de solicitações provenientes de entidades "
"de alto nível (como uma solicitação do userland) no caminho para "
"dispositivos físicos"

#. (itstool) path: listitem/para
#: article.translate.xml:648
msgid ""
"<literal>g_up</literal> : Handles responses from device drivers to requests "
"made by higher-level entities"
msgstr ""
"<literal>g_up</literal> : lida com respostas de drivers de dispositivos para "
"solicitações feitas por entidades de nível superior"

#. (itstool) path: listitem/para
#: article.translate.xml:654
msgid ""
"<literal>g_event</literal> : Handles all other cases: creation of geom "
"instances, access counting, <quote>spoil</quote> events, etc."
msgstr ""
"<literal>g_event</literal> : lida com todos os outros casos: criação de "
"instâncias geom, contagem de acessos, eventos <quote>spoil</quote>, etc."

#. (itstool) path: sect2/para
#: article.translate.xml:660
msgid ""
"When a user process issues <quote>read data X at offset Y of a file</quote> "
"request, this is what happens:"
msgstr ""
"Quando um processo do usuário emite um pedido de <quote>leitura de dados X "
"no deslocamento Y de um arquivo</quote>, isto é o que acontece:"

#. (itstool) path: listitem/para
#: article.translate.xml:665
msgid ""
"The filesystem converts the request into a struct bio instance and passes it "
"to the GEOM subsystem. It knows what geom instance should handle it because "
"filesystems are hosted directly on a geom instance."
msgstr ""
"O sistema de arquivos converte o pedido em uma instância struct bio e o "
"transmite para o subsistema GEOM. Ele sabe o que a instância geom deve "
"manipular porque os sistemas de arquivos são hospedados diretamente em uma "
"instância geom."

#. (itstool) path: listitem/para
#: article.translate.xml:672
msgid ""
"The request ends up as a call to the <function>.start</function>() function "
"made on the g_down thread and reaches the top-level geom instance."
msgstr ""
"A requisição termina como uma chamada para a função <function>.start</"
"function>() feita para a thread g_down e atinge a instância geom de nível "
"superior."

#. (itstool) path: listitem/para
#: article.translate.xml:679
msgid ""
"This top-level geom instance (for example the partition slicer) determines "
"that the request should be routed to a lower-level instance (for example the "
"disk driver). It makes a copy of the bio request (bio requests "
"<emphasis>ALWAYS</emphasis> need to be copied between instances, with "
"<function>g_clone_bio</function>()!), modifies the data offset and target "
"provider fields and executes the copy with <function>g_io_request</"
"function>()"
msgstr ""
"Essa instância geom de nível superior (por exemplo, o segmentador de "
"partições) determina que a solicitação deve ser roteada para uma instância "
"de nível inferior (por exemplo, o driver de disco). Ele faz uma cópia da "
"solicitação bio (solicitações bio <emphasis>SEMPRE</emphasis> precisam ser "
"copiadas entre instâncias, com <function>g_clone_bio</function>()!), "
"modifica os campos de dados offset e de provedor de destino e executa a "
"cópia com <function>g_io_request</function>()"

#. (itstool) path: listitem/para
#: article.translate.xml:691
msgid ""
"The disk driver gets the bio request also as a call to <function>.start</"
"function>() on the <literal>g_down</literal> thread. It talks to hardware, "
"gets the data back, and calls <function>g_io_deliver</function>() on the bio."
msgstr ""
"O driver de disco obtém a solicitação bio também como uma chamada para "
"<function>.start</function>() na thread <literal>g_down</literal>. Ela fala "
"com o hardware, recupera os dados e chama <function>g_io_deliver</"
"function>() na bio."

#. (itstool) path: listitem/para
#: article.translate.xml:700
msgid ""
"Now, the notification of bio completion <quote>bubbles up</quote> in the "
"<literal>g_up</literal> thread. First the partition slicer gets <function>."
"done</function>() called in the <literal>g_up</literal> thread, it uses "
"information stored in the bio to free the cloned <varname remap=\"structname"
"\">bio</varname> structure (with <function>g_destroy_bio</function>()) and "
"calls <function>g_io_deliver</function>() on the original request."
msgstr ""
"Agora, a notificação de bio conclusão <quote>borbulha</quote> na thread "
"<literal>g_up</literal>. Primeiro, o slicer de partição obtém <function>."
"done</function>() chamado na thread <literal>g_up</literal>, ele usa as "
"informações armazenadas na bio para liberar a estrutura <varname remap="
"\"structname\">bio</varname> clonada (com <function>g_destroy_bio</"
"function>()) e chama <function>g_io_deliver</function>() no pedido original."

#. (itstool) path: listitem/para
#: article.translate.xml:711
msgid "The filesystem gets the data and transfers it to userland."
msgstr "O sistema de arquivos obtém os dados e os transfere para o usuário."

#. (itstool) path: sect2/para
#: article.translate.xml:716
msgid ""
"See <citerefentry><refentrytitle>g_bio</refentrytitle><manvolnum>9</"
"manvolnum></citerefentry> man page for information how the data is passed "
"back and forth in the <varname remap=\"structname\">bio</varname> structure "
"(note in particular the <varname>bio_parent</varname> and "
"<varname>bio_children</varname> fields and how they are handled)."
msgstr ""
"Veja a página de manual para o <citerefentry><refentrytitle>g_bio</"
"refentrytitle><manvolnum>9</manvolnum></citerefentry> para obter informações "
"sobre como os dados são passados para frente e para trás na estrutura "
"<varname remap=\"structname\">bio</varname> (observe em particular os campos "
"<varname>bio_parent</varname> e <varname>bio_children</varname> e como eles "
"são manipulados)."

#. (itstool) path: sect2/para
#: article.translate.xml:722
msgid ""
"One important feature is: <emphasis>THERE CAN BE NO SLEEPING IN G_UP AND "
"G_DOWN THREADS</emphasis>. This means that none of the following things can "
"be done in those threads (the list is of course not complete, but only "
"informative):"
msgstr ""
"Uma característica importante: <emphasis>NAS THREADS G_UP E G_DOWN NÃO SE "
"PODE DORMIR (SELEEPING)</emphasis>. Isso significa que nenhuma das seguintes "
"coisas pode ser feita nessas threads (a lista não é completa, mas apenas "
"informativa):"

#. (itstool) path: listitem/para
#: article.translate.xml:730
msgid ""
"Calls to <function>msleep</function>() and <function>tsleep</function>(), "
"obviously."
msgstr ""
"Chamadas para <function>msleep</function>() e <function>tsleep</function>(), "
"obviamente."

#. (itstool) path: listitem/para
#: article.translate.xml:736
msgid ""
"Calls to <function>g_write_data</function>() and <function>g_read_data</"
"function>(), because these sleep between passing the data to consumers and "
"returning."
msgstr ""
"Chamadas para <function>g_write_data</function>() e <function>g_read_data</"
"function>(), porque estes dormem entre passar os dados para os consumidores "
"e retornar."

#. (itstool) path: listitem/para
#: article.translate.xml:743
msgid "Waiting for I/O."
msgstr "Esperando I/O."

#. (itstool) path: listitem/para
#: article.translate.xml:747
msgid ""
"Calls to <citerefentry><refentrytitle>malloc</refentrytitle><manvolnum>9</"
"manvolnum></citerefentry> and <function>uma_zalloc</function>() with "
"<varname>M_WAITOK</varname> flag set"
msgstr ""
"Chamadas para <citerefentry><refentrytitle>malloc</"
"refentrytitle><manvolnum>9</manvolnum></citerefentry> e "
"<function>uma_zalloc</function>() com o conjunto de flags <varname>M_WAITOK</"
"varname>"

#. (itstool) path: listitem/para
#: article.translate.xml:753
msgid "sx and other sleepable locks"
msgstr "sx e outros sleepable locks"

#. (itstool) path: sect2/para
#: article.translate.xml:757
msgid ""
"This restriction is here to stop GEOM code clogging the I/O request path, "
"since sleeping is usually not time-bound and there can be no guarantees on "
"how long will it take (there are some other, more technical reasons also). "
"It also means that there is not much that can be done in those threads; for "
"example, almost any complex thing requires memory allocation. Fortunately, "
"there is a way out: creating additional kernel threads."
msgstr ""
"Esta restrição está aqui para impedir que o código GEOM obstrua o caminho da "
"solicitação de I/O, já que sleeping normalmente não é limitado pelo tempo e "
"não pode haver garantias sobre quanto tempo levará (também existem algumas "
"outras razões mais técnicas). Isso também significa que não existe muito o "
"que possa ser feito nessas threads; por exemplo, quase qualquer coisa "
"complexa requer alocação de memória. Felizmente, existe uma saída: criar "
"threads adicionais no kernel."

#. (itstool) path: sect2/title
#: article.translate.xml:768
msgid "Kernel Threads for Use in GEOM Code"
msgstr "Threads de kernel para uso no código GEOM"

#. (itstool) path: sect2/para
#: article.translate.xml:770
msgid ""
"Kernel threads are created with <citerefentry><refentrytitle>kthread_create</"
"refentrytitle><manvolnum>9</manvolnum></citerefentry> function, and they are "
"sort of similar to userland threads in behavior, only they cannot return to "
"caller to signify termination, but must call "
"<citerefentry><refentrytitle>kthread_exit</refentrytitle><manvolnum>9</"
"manvolnum></citerefentry>."
msgstr ""
"As threads do kernel são criadas com a função "
"<citerefentry><refentrytitle>kthread_create</refentrytitle><manvolnum>9</"
"manvolnum></citerefentry>, e elas são semelhantes aos threads do userland no "
"comportamento,  eles somente não podem retornar ao chamador para exprimir a "
"conclusão, mas deve chamar <citerefentry><refentrytitle>kthread_exit</"
"refentrytitle><manvolnum>9</manvolnum></citerefentry>."

#. (itstool) path: sect2/para
#: article.translate.xml:775
msgid ""
"In GEOM code, the usual use of threads is to offload processing of requests "
"from <literal>g_down</literal> thread (the <function>.start</function>() "
"function). These threads look like <quote>event handlers</quote>: they have "
"a linked list of event associated with them (on which events can be posted "
"by various functions in various threads so it must be protected by a mutex), "
"take the events from the list one by one and process them in a big "
"<literal>switch</literal>() statement."
msgstr ""
"No código GEOM, o uso usual de threads é para descarregar o processamento de "
"requisições da thread <literal>g_down</literal> (a função <function>.start</"
"function>). Estas threads se parecem com um <quote>event handlers</quote>: "
"elas têm uma lista encadeada de eventos associados a elas (nos quais eventos "
"podem ser postados por várias funções em várias threads, portanto, devem ser "
"protegidos por um mutex), pegam os eventos da lista, um por um, e processa-"
"os em uma grande instrução <literal>switch</literal>()."

#. (itstool) path: sect2/para
#: article.translate.xml:785
msgid ""
"The main benefit of using a thread to handle I/O requests is that it can "
"sleep when needed. Now, this sounds good, but should be carefully thought "
"out. Sleeping is well and very convenient but can very effectively destroy "
"performance of the geom transformation. Extremely performance-sensitive "
"classes probably should do all the work in <function>.start</function>() "
"function call, taking great care to handle out-of-memory and similar errors."
msgstr ""
"A principal vantagem de usar uma thread para lidar com solicitações de I/O é "
"que ela pode dormir quando necessário. Agora, isso parece bom, mas deve ser "
"cuidadosamente pensado. Dormir é bom e muito conveniente, mas pode ser muito "
"efetivo em destruir o desempenho da transformação geom. As classes "
"extremamente sensíveis ao desempenho provavelmente devem fazer todo o "
"trabalho na chamada de função <function>.start</function>(), tomando muito "
"cuidado para lidar com erros de falta de memória e similares."

#. (itstool) path: sect2/para
#: article.translate.xml:794
msgid ""
"The other benefit of having a event-handler thread like that is to serialize "
"all the requests and responses coming from different geom threads into one "
"thread. This is also very convenient but can be slow. In most cases, "
"handling of <function>.done</function>() requests can be left to the "
"<literal>g_up</literal> thread."
msgstr ""
"O outro benefício de ter uma thread de manipulação de eventos como essa é "
"serializar todas as solicitações e respostas provenientes de diferentes "
"threads geom em uma thread. Isso também é muito conveniente, mas pode ser "
"lento. Na maioria dos casos, o tratamento de pedidos <function>.done</"
"function>() pode ser deixado para a thread <literal>g_up</literal>."

#. (itstool) path: sect2/para
#: article.translate.xml:801
msgid ""
"Mutexes in FreeBSD kernel (see <citerefentry><refentrytitle>mutex</"
"refentrytitle><manvolnum>9</manvolnum></citerefentry>) have one distinction "
"from their more common userland cousins — the code cannot sleep while "
"holding a mutex). If the code needs to sleep a lot, "
"<citerefentry><refentrytitle>sx</refentrytitle><manvolnum>9</manvolnum></"
"citerefentry> locks may be more appropriate. On the other hand, if you do "
"almost everything in a single thread, you may get away with no mutexes at "
"all."
msgstr ""
"Mutexes no kernel do FreeBSD (veja <citerefentry><refentrytitle>mutex</"
"refentrytitle><manvolnum>9</manvolnum></citerefentry>) têm uma distinção de "
"seus primos mais comuns do userland - o código não pode dormir enquanto "
"estiver segurando um mutex). Se o código precisar dormir muito, os bloqueios "
"<citerefentry><refentrytitle>sx</refentrytitle><manvolnum>9</manvolnum></"
"citerefentry> podem ser mais apropriados. Por outro lado, se você faz quase "
"tudo em um único thread, você pode se safar sem utilizar mutexes."
