<!-- Copyright (c) 1998, 1999 Nik Clayton, All rights reserved.

     Redistribution and use in source (SGML DocBook) and 'compiled' forms
     (SGML HTML, PDF, PostScript, RTF and so forth) with or without
     modification, are permitted provided that the following conditions
     are met:

      1. Redistributions of source code (SGML DocBook) must retain the above
         copyright notice, this list of conditions and the following
         disclaimer as the first lines of this file unmodified.

      2. Redistributions in compiled form (transformed to other DTDs,
         converted to PDF, PostScript, RTF and other formats) must reproduce
         the above copyright notice, this list of conditions and the
         following disclaimer in the documentation and/or other materials
         provided with the distribution.

     THIS DOCUMENTATION IS PROVIDED BY NIK CLAYTON "AS IS" AND ANY EXPRESS OR
     IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
     OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
     DISCLAIMED. IN NO EVENT SHALL NIK CLAYTON BE LIABLE FOR ANY DIRECT,
     INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
     (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
     SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
     HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
     STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
     ANY WAY OUT OF THE USE OF THIS DOCUMENTATION, EVEN IF ADVISED OF THE
     POSSIBILITY OF SUCH DAMAGE.

     The FreeBSD Documentation Project
     The FreeBSD Brazilian Portuguese Documentation Project

     $FreeBSD$

     Original revision: r38870

-->

<chapter id="the-website">
  <title>O Website</title>
  
  <sect1 id="the-website-prep">
    <title>Prepara&ccedil;&atilde;o</title>
    
    <para>Utilize um disco que tenha espa&ccedil;o livre suficiente. 
      Voc&ecirc; ir&aacute; precisar de 200&nbsp;MB a 500&nbsp;MB, 
      dependendo do m&eacute;todo que escolher.  Este espa&ccedil;o 
      ir&aacute; abrigar as ferramentas SGML, um subconjunto da 
      &aacute;rvore <application>svn</application>, os arquivos 
      tempor&aacute;rios de trabalho e as p&aacute;ginas web 
      instaladas.</para>
 
    <note>
      <para>Certifique-se que seus ports de 
	documenta&ccedil;&atilde;o est&atilde;o atualizados!  Quando 
	na d&uacute;vida, remova os ports antigos usando o comando 
	&man.pkg.delete.1; antes de instalar o port.  Por exemplo, 
	n&oacute;s atualmente dependemos do jade-1.2, e se voc&ecirc;
	tem instalado o jade-1.1, por favor execute:</para>

      <screen>&prompt.root; <userinput><command>pkg_delete jade-1.1</command></userinput></screen>
    </note>

    <sect2 id="the-website-svn">
      <title>Usando o <command>svn</command></title>

      <para>O <command>svn</command> &eacute; necess&aacute;rio para
	se obter (<quote><literal>check out</literal></quote>) os 
	arquivos do <literal>doc/</literal> a partir do
	reposit&oacute;rio Subversion.  O <command>svn</command> pode 
	ser instalado com o &man.pkg.add.1; ou a partir da
	cole&ccedil;&atilde;o de Ports do &os;, executando:</para>

      <screen>&prompt.root; <userinput><command>cd /usr/ports/devel/subversion</command></userinput>
&prompt.root; <userinput><command>make</command> <maketarget>install clean</maketarget></userinput></screen>

      <para>Para obter os arquivos com o c&oacute;digo fonte completo do 
	web site do &os;, execute:</para>

      <screen>&prompt.root; <userinput><command>svn checkout svn://svn.FreeBSD.org/doc/head/ <replaceable>/usr/build</replaceable></command></userinput></screen>

      <tip>
	<para>Se o comando <command>svn</command> n&atilde;o estiver sendo
	  executado pelo usu&aacute;rio <username>root</username>, 
	  certifique-se de que o diret&oacute;rio <filename
	  class="directory">/usr/build</filename> possui as
	  permiss&otilde;es adequadas ao usu&aacute;rio utilizado.  Se
	  n&atilde;o for poss&iacute;vel alterar as permiss&otilde;es,
	  utilize um diret&oacute;rio diferente para armazenar os 
	  arquivos do web site.</para>
      </tip>

      <para>Quando o <command>svn</command> terminar, a vers&atilde;o 
	atual do website do &os; estar&aacute; dispon&iacute;vel em
	<filename class="directory">/usr/build</filename>.  Se voc&eacute;
	utilizou um diret&oacute;rio alvo diferente, substitua o 
	<filename class="directory">/usr/build</filename> 
	apropriadamente ao longo do restante deste documento.</para>

      <para>&Eacute; isso!  Agora voc&ecirc; pode proceder com a 
	<link linkend="the-website-build"> gera&ccedil;&atilde;o do 
	web site</link>.</para>
      </sect2>
  </sect1>
  
  <sect1 id="the-website-build">
    <title>Construa as p&aacute;ginas web do in&iacute;cio</title>
    
	<para>Depois de ter completado os passos necess&aacute;rios
	  para obter os arquivos com o c&oacute;digo fonte do website, 
	  voc&ecirc; estar&aacute; pronto para iniciar a 
	  compila&ccedil;&atilde;o do web site.  No nosso 
	  exemplo, o diret&oacute;rio de compila&ccedil;&atilde;o 
	  &eacute; <filename 
	  class="directory"><replaceable>/usr/build</replaceable>
	  </filename> e todos os arquivos necess&aacute;rios 
	  j&aacute; est&atilde;o dispon&iacute;veis no mesmo.</para>

	<procedure>
	  <step>
	    <para>V&aacute; para o diret&oacute;rio de 
	      compila&ccedil;&atilde;o:</para>

<screen>&prompt.root; <userinput><command>cd</command> <replaceable>/usr/build</replaceable></userinput></screen>
	</step>
      
	  <step>
	    <para>A compila&ccedil;&atilde;o do web site 
	      deve ser iniciada de dentro do diret&oacute;rio <filename 
	      class="directory">en_US.ISO8859-1/htdocs</filename> 
	      executando o comando &man.make.1; <maketarget>all
	      </maketarget>, para criar as p&aacute;ginas web:</para>

<screen>&prompt.root; <userinput><command>cd</command> en_US.ISO8859-1/htdocs </userinput>
&prompt.root; <userinput><command>make</command> <maketarget>all</maketarget></userinput></screen>
		</step>
  </procedure>
 </sect1>
  
  <sect1 id="the-website-install">
    <title>Instalando as web pages em seu Web Server</title>
    
    <procedure>
      <step>
	<para>Se voc&ecirc; tiver sa&iacute;do do 
	  diret&oacute;rio <filename
	  class="directory">en_US.ISO8859-1/htdocs</filename>, volte 
	  para dele.</para>

<screen>&prompt.root; <userinput><command>cd</command> <replaceable>/usr/build/en_US.ISO8859-1/htdocs</replaceable></userinput></screen>
      </step>

      <step>
	<para>Execute o comando &man.make.1; <maketarget>install
	  </maketarget>, definindo a vari&aacute;vel <makevar>DESTDIR
	  </makevar> para o nome do diret&oacute;rio no qual deseja 
	  instalar os arquivos.  Eles ser&atilde;o instalados no 
	  <filename class="directory">$DESTDIR/data</filename> o qual
	  deve estar configurado para ser o diret&oacute;rio raiz do 
	  seu servidor web.</para>
			
<screen>&prompt.root; <userinput><command>env</command> <makevar>DESTDIR</makevar>=<replaceable>/usr/local/www</replaceable> <command>make</command> <maketarget>install</maketarget></userinput></screen>
      </step>

      <step>
	<para>Se voc&ecirc; j&aacute; instalou previamente 
	  as p&aacute;ginas web dentro deste mesmo diret&oacute;rio o 
	  processo de instala&ccedil;&atilde;o n&atilde;o ir&aacute; 
	  remover nenhuma p&aacute;gina web antiga ou desatualizada. 
	  Por exemplo, se voc&ecirc; compilar e instalar uma nova 
	  c&oacute;pia do web site todos os dias, o comando 
	  abaixo ir&aacute; procurar e remover todos os arquivos que 
	  n&atilde;o tenham sido alterados nos &uacute;ltimos 
	  tr&ecirc;s dias.</para>

<screen>&prompt.root; <userinput><command>find</command> <replaceable>/usr/local/www</replaceable> <option>-ctime</option> 3 <option>-print0</option> | <command>xargs</command> <option>-0</option> <command>rm</command></userinput></screen>
      </step>
    </procedure>
  </sect1>
  
  <sect1 id="the-website-env">
    <title>Vari&aacute;veis de ambiente</title>
    
    <variablelist>
      <varlistentry>
	<term><makevar>ENGLISH_ONLY</makevar></term>
	
	<listitem>
	  <para>Se esta vari&aacute;vel estiver definida e n&atilde;o 
	    for vazia, apenas a documenta&ccedil;&atilde;o em Ingl&ecirc;s
	    ser&aacute; compilada e instalada.  Todas as
	    tradu&ccedil;&otilde;es ser&atilde;o ignoradas. 
	    Por exemplo:</para>
	  
<screen>&prompt.root; <userinput><command>make</command> <makevar>ENGLISH_ONLY=YES</makevar> <maketarget>all</maketarget> <maketarget>install</maketarget></userinput></screen>

	  <para>Se voc&ecirc; quiser desabilitar a vari&aacute;vel
	    <makevar>ENGLISH_ONLY</makevar> e compilar todas as 
	    p&aacute;ginas, incluindo tradu&ccedil;&otilde;es, basta 
	    definir a vari&aacute;vel <makevar>ENGLISH_ONLY</makevar>
	    para um valor vazio:</para>
	
<screen>&prompt.root; <userinput><command>make</command> <makevar>ENGLISH_ONLY=""</makevar> <maketarget>all</maketarget> <maketarget>install</maketarget> <maketarget>clean</maketarget></userinput></screen>
  
	</listitem>
      </varlistentry>
      
      <varlistentry>
	<term><makevar>WEB_ONLY</makevar></term>
	
	<listitem>
	  <para>Se esta vari&aacute;vel estiver definida e n&atilde;o 
	    for vazia, apenas as p&aacute;ginas HTML do diret&oacute;rio 
	    <filename class="directory">en_US.ISO8859-1/htdocs</filename>
	    ser&atilde;o compiladas e instaladas.  Todos os demais 
	    documentos do diret&oacute;rio <filename 
	    class="directory">en_US.ISO8859-1</filename> (Handbook, FAQ, 
	    Tutorais, etc) ser&atilde;o ignorados.  Por exemplo:</para>

		<screen>&prompt.root; <userinput><command>make</command> <makevar>WEB_ONLY=YES</makevar> <maketarget>all</maketarget> <maketarget>install</maketarget></userinput></screen>	
  
	</listitem>
      </varlistentry>

      <varlistentry>
      	<term><makevar>WEB_LANG</makevar></term>

	<listitem>
	  <para>Se esta vari&aacute;vel estiver definida, apenas as 
	    p&aacute;ginas web no idioma especificado por ela
	    ser&atilde;o compiladas e instaladas dentro do 
	    diret&oacute;rio <filename class="directory">
	    <replaceable>/usr/build</replaceable></filename>.  
	    Todos os demais idiomas ser&atilde;o ignorados.  Por 
	    exemplo:</para>

<screen>&prompt.root; <userinput>make WEB_LANG="el_GR.ISO8859-7 es_ES.ISO8859-1 hu_HU.ISO8859-2 nl_NL.ISO8859-1" all install</userinput></screen>
  	</listitem>
      </varlistentry>
	
      <varlistentry>
	<term><makevar>NOPORTSCVS</makevar></term>
	
	<listitem>
	  <para>Se esta vari&aacute;vel estiver definida, o processo de
	    compila&ccedil;&atilde;o n&atilde;o far&aacute; o check 
	    out dos arquivos do ports do reposit&oacute;rio cvs.  
	    Ao inv&eacute;s disso, ele ir&aacute; copiar os arquivos 
	    a partir do <filename class="directory">/usr/ports
	    </filename> (ou do local definido na vari&aacute;vel 
	    <envar>PORTSBASE</envar>).</para>
	</listitem>
      </varlistentry>
    </variablelist>
    
    <para><makevar>WEB_ONLY</makevar>, <makevar>WEB_LANG</makevar>, 
      <makevar>ENGLISH_ONLY</makevar> e <makevar>NOPORTSCVS</makevar>
      s&atilde;o vari&aacute;veis do <command>make</command>.  
      Voc&ecirc; pode definir estas vari&aacute;veis no 
      <filename>/etc/make.conf</filename>, 
      no <filename>Makefile.inc</filename>, ou ainda como 
      vari&aacute;veis de ambiente na linha de comando ou nos 
      arquivos de inicializa&ccedil;&atilde;o do seu 
      <foreignphrase>shell</foreignphrase>.</para>
  </sect1>
</chapter>
