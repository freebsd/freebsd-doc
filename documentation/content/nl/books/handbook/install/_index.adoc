---
title: Hoofdstuk 2. FreeBSD installeren op FreeBSD 8.X en eerder
part: Deel I. Beginnen
prev: books/handbook/introduction
next: books/handbook/bsdinstall
---

[[install]]
= FreeBSD installeren op FreeBSD 8.X en eerder
:doctype: book
:toc: macro
:toclevels: 1
:icons: font
:sectnums:
:sectnumlevels: 6
:source-highlighter: rouge
:experimental:
:skip-front-matter:
:toc-title: Inhoudsopgave
:table-caption: Tabel
:figure-caption: Afbeelding
:example-caption: Voorbeeld
:xrefstyle: basic
:relfileprefix: ../
:outfilesuffix:
:sectnumoffset: 2

ifeval::["{backend}" == "html5"]
:imagesdir: ../../../../images/books/handbook/install/
endif::[]

ifeval::["{backend}" == "pdf"]
:imagesdir: ../../../../static/images/books/handbook/install/
endif::[]

ifeval::["{backend}" == "epub3"]
:imagesdir: ../../../../static/images/books/handbook/install/
endif::[]

include::shared/authors.adoc[]
include::shared/releases.adoc[]
include::shared/nl/mailing-lists.adoc[]
include::shared/nl/teams.adoc[]
include::shared/nl/urls.adoc[]

toc::[]

[[install-synopsis]]
== Overzicht

FreeBSD heeft een tekstgebaseerd, gebruikersvriendelijk installatieprogramma. FreeBSD 9.0-RELEASE en later gebruiken het installatieprogramma bsdinstall, uitgaven eerder dan 9.0-RELEASE gebruiken sysinstall voor de installatie. Dit hoofdstuk beschrijft het gebruikt van sysinstall om FreeBSD te installeren. Het gebruik van bsdinstall wordt behandeld in crossref:bsdinstall[bsdinstall,FreeBSD 9.X en nieuwer installeren].

Na het lezen van dit hoofdstuk weet de lezer:

* Hoe FreeBSD installatieschijven gemaakt kunnen worden;
* Hoe FreeBSD harde schijven benoemt en onderverdeelt;
* Hoe sysinstall gestart kan worden;
* Welke vragen sysinstall stelt, wat ze betekenen en hoe er geantwoord kan worden.

Veronderstelde voorkennis:

* De ondersteunde hardwarelijst doornemen van de versie van FreeBSD die geïnstalleerd gaat worden op aanwezigheid van de beschikbare hardware.

[NOTE]
====
In zijn algemeenheid zijn deze installatie-instructies geschreven voor computers met een i386(TM) architectuur ("PC compatible"). Waar van toepassing worden instructies voor andere platformen gegeven. Deze handleiding is zoveel mogelijk bijgewerkt, maar toch kunnen er verschillen optreden tussen de installatieprocedure en deze tekst. Er wordt aangeraden dit hoofdstuk te beschouwen als een algemene richtlijn en niet als een letterlijke handleiding voor installatie.
====

[[install-hardware]]
== Hardware-eisen

[[install-hardware-minimal]]
=== Minimale configuratie

De minimale configuratie om FreeBSD te installeren varieert met de versie van FreeBSD en de hardware-architectuur.

Een samenvatting van deze informatie wordt in de volgende secties gegeven. Afhankelijk van de methode die u kiest om FreeBSD te installeren, heeft u misschien ook een floppydrive, een ondersteunde CDROM drive, en in sommige gevallen een netwerkadapter nodig. Dit zal worden behandeld door het <<install-boot-media>>.

==== FreeBSD/i386 en FreeBSD/pc98

Zowel FreeBSD/i386 en FreeBSD/pc98 hebben een 486 of betere processor en tenminste 24 MB aan RAM nodig. U zult tenminste 150 MB aan vrije hardeschijfruimte nodig hebben voor de meest minimale installatie.

[NOTE]
====
In het geval van oude configuraties is het verkrijgen van meer RAM en meer hardeschijfruimte meestal belangrijker dan het verkrijgen van een snellere processor.
====

==== FreeBSD/amd64

Er zijn twee klassen processoren die FreeBSD/amd64 kunnen draaien. De eerste zijn AMD64 processoren, inclusief de AMD Athlon(TM)64, AMD Athlon(TM)64-FX, AMD Opteron(TM) of betere processoren.

De tweede klasse van processoren die FreeBSD/amd64 kan gebruiken omvat degenen die de Intel(R) EM64T architectuur gebruiken. Voorbeelden van deze processoren omvatten de Intel(R) Core(TM) 2 Duo, Quad, en Extreme processorfamilies en de Intel(R) Xeon(TM) 3000, 5000, en 7000 rijen van processoren.

Indien u een machine heeft die gebaseerd is op een nVidia nForce3 Pro-150, _moet_ u de BIOS-setup gebruiken om IO APIC uit te zetten. Indien u geen optie heeft om dit te doen, moet u waarschijnlijk in plaats hiervan ACPI uitzetten. Er zitten bugs in de Pro-150 chipset waarvoor we nog geen oplossing hebben gevonden.

==== FreeBSD/sparc64

Om FreeBSD/sparc64 te installeren heeft u een ondersteund platform nodig (zie <<install-hardware-supported>>).

U heeft een toegewijde schijf nodig voor FreeBSD/sparc64. Het is momenteel niet mogelijk om een schijf met een ander besturingssysteem te delen.

[[install-hardware-supported]]
=== Ondersteunde hardware

Een lijst van ondersteunde hardware wordt geleverd bij elke uitgave van FreeBSD in de FreeBSD Hardware Notes. Dit document kan normaliter worden gevonden in een bestand genaamd [.filename]#HARDWARE.TXT#, in de bovenste map van een CDROM- of FTP-distributie of in het documentatiemenu van sysinstall. Het somt, voor een gegeven architectuur, op welke hardware-apparaten door welke uitgave van FreeBSD worden ondersteund. Kopiën van de lijst van ondersteunde hardware voor verschillende uitgaven en architecturen kunnen ook gevonden worden op de http://www.FreeBSD.org/releases/[Uitgave Informatie] pagina van de FreeBSD website.

[[install-pre]]
== Voorbereidende taken

[[install-inventory]]
=== Beschrijf de computer

Probeer een computer te inventariseren voordat FreeBSD wordt geïnstalleerd. De FreeBSD installatieroutines geven een overzicht van alle componenten (harde schijven, netwerkkaarten, CD-ROM-spelers, enzovoort) met hun typenummer en fabrikant. FreeBSD probeert ook de juiste instellingen te achterhalen, zoals IRQ en IO-poort gebruik. Vanwege de verscheidenheid aan PC-hardware verloopt dit niet altijd helemaal succesvol en daarom kan het nodig zijn om de gegevens die FreeBSD achterhaalt te verbeteren.

Mocht er al een ander besturingssysteem geïnstalleerd zijn, zoals Windows(R) of Linux(R), dan is het aan te raden de mogelijkheden van dat besturingssysteem te gebruiken om te achterhalen hoe hardware is ingesteld. Als niet volledig bekend is welke instellingen een uitbreidingskaart heeft, dan kan het zijn dat ze op de kaart zelf zijn afgedrukt. Veelvoorkomende IRQ nummers zijn 3, 5 en 7 en IO-poort adressen zijn meestal geschreven als hexadecimale getallen, zoals 0x330.

Er wordt aangeraden deze informatie af te drukken of op te schrijven voordat FreeBSD wordt geïnstalleerd. Het kan handig zijn om een tabel te maken, zoals deze:

.Voorbeeld van beschrijving van componenten
[cols="1,1,1,1", frame="none", options="header"]
|===
| Component
| IRQ
| IO-poort(en)
| Opmerkingen

|Eerste harde schijf
|N/A
|N/A
|40 GB, Seagate, eerste IDE master

|CD-ROM
|N/A
|N/A
|Eerste IDE slave

|Tweede harde schijf
|N/A
|N/A
|20 GB, IBM, tweede IDE master

|Eerste IDE controller
|14
|0x1f0
|

|Netwerkkaart
|N/A
|N/A
|Intel(R) 10/100

|Modem
|N/A
|N/A
|3Com(R) 56K faxmodem, op COM1

|...
|===

Nadat de inventarisatie van de componenten in uw computer voltooid is, dient u te controleren of ze aan de hardware-eisen van de uitgave van FreeBSD die u wilt installeren voldoen.

=== Maak een back-up van gegevens

Als de computer waarop FreeBSD geïnstalleerd gaat worden waardevolle gegevens bevat, dan dient er een back-up te zijn en dient deze back-up getest te zijn voordat FreeBSD wordt geïnstalleerd. De FreeBSD installatieprocedure vraagt om bevestiging voordat er naar de schijven geschreven wordt, maar als dat eenmaal is begonnen kan het niet meer teruggedraaid worden.

[[install-where]]
=== Bepaal waar FreeBSD geïnstalleerd wordt

Als de hele harde schijf voor FreeBSD beschikbaar is, dan hoeft op dit punt verder niets gedaan te worden. Ga verder naar de volgende sectie.

Als FreeBSD echter naast een ander besturingssysteem op een computer komt, dan moet basaal bekend zijn hoe gegevens op schrijven worden opgeslagen en wat dat voor consequenties heeft.

[[install-where-i386]]
==== Indeling van schrijven voor FreeBSD/i386

Een PC schijf kan worden onderverdeeld in aparte stukken. Deze stukken heten _partities_. Aangezien FreeBSD intern ook partities heeft, kan de naamgeving snel verwarrend worden, daarom wordt naar deze schijfstukken verwezen als schijfsnedes of simpelweg snedes (slices) in FreeBSD zelf. Het FreeBSD gereedschap `fdisk` bijvoorbeeld, dat met PC diskpartities werkt, verwijst naar snedes in plaats van partities. In het ontwerp van de PC is opgenomen dat een schijf slechts vier partities kan bevatten. Deze partities heten de _primaire partities_. Om deze beperking te omzeilen is een nieuwe soort partitie bedacht, de _extended partitie_. Een schijf kan slechts één extended partitie bevatten. Binnen een extended partitie kunnen speciale partities, genaamd _logische partities_, worden aangemaakt.

Elke partitie heeft een _partitie-ID_, een getal dat aangeeft welk soort gegevens er op die partitie staan. FreeBSD-partities hebben partitie-ID `165`.

In zijn algemeenheid benoemt elk besturingssysteem partities op zijn eigen manier. Bijvoorbeeld: MS-DOS(R) en zijn afgeleiden, zoals Windows(R), geven elke primaire en logische partitie een _(station) letter_, beginnend met [.filename]#C:#.

FreeBSD moet geïnstalleerd worden op een primaire partitie. FreeBSD kan al zijn gegevens, inclusief alle bestanden die zelf zijn gemaakt, op deze partitie opslaan. Als er meerdere schijven zijn, dan kunnen er FreeBSD-partities worden aangemaakt op alle of op sommige schijven. Als FreeBSD wordt geïnstalleerd moet er een partitie beschikbaar zijn. Dit kan een lege partitie zijn die is aangemaakt of het mag een bestaande partitie zijn met gegevens die niet langer bewaard hoeven te blijven.

Als alle partities op alle schijven gebruikt worden, dan moet er een leeg gemaakt worden voor FreeBSD met de hulpprogramma's van het andere besturingssysteem dat wordt gebruikt (bijvoorbeeld `fdisk` onder MS-DOS(R) of Windows(R)).

Als er een partitie over is, dan kan die gebruikt worden. Het kan zo zijn dat één of meer van de bestaande partities verkleind moet worden.

Een minimale installatie van FreeBSD heeft 100 MB schijfruimte nodig. Dat is wel een _zeer_ minimale installatie, waarop bijna geen ruimte over is voor eigen bestanden. Een meer realistisch minimum is 250 MB zonder grafische gebruikersomgeving en 350 MB of meer als er ook een grafische gebruikersomgeving moet draaien. Als er ook nog gebruikt gemaakt wordt van een heleboel programma's van derde partijen dan is nog meer ruimte nodig.

Met commerciële software zoals PartitionMagic(R), of gratis software zoals GPartEd, kunnen partities van grootte gewijzigd worden om ruimte te maken voor FreeBSD. Van zowel PartitionMagic(R) als GPartEd is bekend dat ze met NTFS kunnen werken. GPartEd is beschikbaar op een aantal Live CD Linux-distributies, zoals http://www.sysresccd.org/[SystemRescueCD].

Er zijn problemen gemeld met het veranderen van de grootte van Microsoft(R) Vista-partities. Het beschikbaar hebben van een Vista installatie-CDROM tijdens het pogen van zo'n bewerking is aanbevolen. Zoals met al zulke schijfonderhoudtaken is een recente verzameling back-ups ook sterk aangeraden.

[WARNING]
====

Verkeerd gebruik van deze programma's kan gegevens van een schijf verwijderen. Er dient een goede, werkende back-up te zijn voordat deze programma's gebruikt worden.
====

.Gebruik van een bestaande, ongewijzigde partitie
[example]
====
Stel er is al een computer met een enkele 4 GB harde schijf waarop een versie van Windows(R) is geïnstalleerd en de schijf is verdeeld in twee schijfstations, [.filename]#C:# en [.filename]#D:#, van elk 2 GB. Er staat 1 GB aan gegevens op [.filename]#C:# en 0.5 GB aan gegevens op [.filename]#D:#.

Dit betekent dat de harde schijf twee partities heeft, één voor elke letter. Alle gegevens op [.filename]#D:# kunnen gekopieerd worden naar [.filename]#C:#, waardoor de tweede partitie beschikbaar komt voor FreeBSD.
====

.Een bestaande partitie verkleinen
[example]
====
Stel er is een computer met een enkele 4 GB harde schijf waarop een versie van Windows(R) is geïnstalleerd. Bij het installeren van Windows(R) is een grote partitie gemaakt, station [.filename]#C:# van 4 GB. Er is 1.5 GB in gebruik en voor FreeBSD is 2 GB schijfruimte wenselijk.

Voor een installatie van FreeBSD is één van onderstaande opties de oplossing:

. Maak een back-up van de Windows(R) gegevens en installeer Windows(R) opnieuw, waarbij een partitie van 2 GB wordt aanmaakt bij het installeren.
. Gebruik één van de bovengenoemde programma's zoals PartitionMagic(R) om de Windows(R)-partitie te verkleinen.

====

=== Netwerkgegevens verzamelen

Als bij de installatie van FreeBSD gebruik gemaakt wordt van een netwerk (bijvoorbeeld bij een installatie vanaf een FTP site of een NFS server), dan moeten de netwerkinstellingen bekend zijn. Deze informatie wordt gevraagd tijdens het installeren, zodat FreeBSD contact kan maken met het netwerk om de installatie te voltooien.

==== Contact maken met een Ethernet netwerk of kabel/DSL modem

Als er contact gemaakt wordt met een Ethernet netwerk of een Internetverbinding met een Ethernet netwerkkaart via de kabel of DSL, dan is de volgende informatie nodig:

. IP-adres
. IP-adres van de default gateway
. Hostnaam
. IP-adressen van de DNS server(s)
. Subnetmasker

Als deze informatie niet bekend is, dan kan deze meestal nagevraagd worden bij de systeembeheerder of service provider. Het kan zijn dat zij aangeven dat één en ander automatisch wordt toegekend door middel van _DHCP_. Het is van belang hier een notitie van te maken.

==== Contact maken met een modem

Ook door middel van inbellen bij een Internet service provider met een gewoon modem kan FreeBSD geïnstalleerd worden via Internet, het duurt alleen erg lang.

Dan is nodig:

. Het inbelnummer van een ISP
. De COM: poort waaraan het modem zit
. Gebruikersnaam en wachtwoord bij de ISP

=== Controleer op FreeBSD Errata

Hoewel het FreeBSD project er naar streeft om elke versie van FreeBSD zo stabiel mogelijk te laten zijn, kan het voorkomen dat er foutjes in het systeem sluipen. Heel af en toe beïnvloeden deze foutjes de installatieprocedure. Als ze ontdekt en opgelost zijn worden ze beschreven in de link:https://www.FreeBSD.org/releases/{rel120-current}r/errata/[FreeBSD Errata] op de FreeBSD website. Het is verstandig voor een installatie te controleren of er errata zijn om er zeker van te zijn dat er geen obstakels zijn.

Informatie over alle uitgaven, inclusief de errata staan in de link:https://www.FreeBSD.org/releases/[uitgave-informatie ] op de link:https://www.FreeBSD.org/[FreeBSD website].

=== De FreeBSD installatiebestanden

De FreeBSD installatieprocedure kan FreeBSD installeren vanaf één van de volgende plaatsen:

.Lokale media
* Cd-rom of DVD
* Een USB-geheugenstick
* Een MS-DOS(R) partitie op dezelfde computer
* SCSI of QIC tape
* Diskettestation

.Netwerk
* FTP site, indien noodzakelijk door een firewall of via een HTTP proxy
* NFS server
* Parallelle of seriële verbinding

Als FreeBSD gekocht is op CD of DVD dan is alles wat nodig is aanwezig om door te gaan naar <<install-boot-media>>.

Als de installatiebestanden nog niet beschikbaar zijn wordt in <<install-diff-media>> uitgelegd hoe de installatie via bovenstaande methoden voorbereid kan worden. Nadat de installatiebestanden beschikbaar zijn kunnen de voorbereidingen voor de installatie verdergaan in <<install-boot-media>>.

[[install-boot-media]]
=== Opstartmedia aanmaken

De FreeBSD installatieprocedure begint met het opstarten van een computer met het FreeBSD installatieprogramma. Dit programma wordt niet uitgevoerd vanuit een ander besturingssysteem. Normaliter start een computer op met het besturingssysteem dat is geïnstalleerd op een harde schijf, maar hij kan ook ingesteld worden om op te starten van een "bootable" diskette. De meeste hedendaagse computers kunnen ook opstarten van een CD-ROM in het CD-ROM station of van een USB-schijf.

[TIP]
====

Als FreeBSD op CD-ROM of DVD beschikbaar is (gekocht of zelf gebrand) en een computer kan opstarten van een CD-ROM of DVD (meestal een BIOS optie genaamd "Boot Order" of iets dergelijks), dan is het doorwerken van deze sectie niet nodig. De FreeBSD CD-ROM en DVD images zijn bootable en kunnen zonder verdere voorbereidingen gebruikt worden om FreeBSD te installeren.
====

Om een opstartbare geheugenstick te maken kunnen deze stappen gevolgd worden:

[.procedure]
====

. Bemachtig een image voor de geheugenstick
+ 
Images voor de geheugenstick voor FreeBSD 8._X_ en ouder kunnen worden gedownload vanuit de map [.filename]#ISO-IMAGES# van `ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/arch/ISO-IMAGES/versie/FreeBSD-versie-RELEASE-arch-memstick.img`. Vervang _arch_ en _versie_ door de architectuur en de versie die u wilt installeren. De geheugenstick-images voor FreeBSD/i386 {rel112-current}-RELEASE zijn beschikbaar op link:ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/ISO-IMAGES/{rel112-current}/FreeBSD-{rel112-current}-RELEASE-i386-memstick.img[ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/ISO-IMAGES/{rel112-current}/FreeBSD-{rel112-current}-RELEASE-i386-memstick.img].
+
[TIP]
======

Voor FreeBSD 9.0-RELEASE en nieuwere uitgaven wordt een ander pad voor de mappen gebruikt. Details over het downloaden en installeren van FreeBSD 9.0-RELEASE enn later wordt behandeld in crossref:bsdinstall[bsdinstall,FreeBSD 9.X en nieuwer installeren].
======
+ 
Het beeldbestand van de geheugenstick heeft een extensie [.filename]#.img#. De map [.filename]#ISO-IMAGES# bevat een aantal verschillende images, en degene die u nodig heeft zal afhangen van de FreeBSD-versie die u installeert, en in sommige gevallen van de hardware waarop u het installeert.
+
[IMPORTANT]
======
Maak voordat u verder gaat een _back-up_ van de gegevens die nu op uw USB-stick staan, aangezien deze procedure ze zal _wissen_.
======
+
. Schrijf het beeldbestand naar de geheugenstick
+
[.procedure]
****

*Procedure: FreeBSD gebruiken om het beeldbestand te schrijven*
[WARNING]
======

Het onderstaande voorbeeld vermeldt [.filename]#/dev/da0# als het doelapparaat van waar af u zal opstarten. Zorg er voor dat u het juiste apparaat als het uitvoerapparaat opgeeft om te voorkomen dat u uw bestaande gegevens vernietigt.
======
.. Het beeldbestand schrijven door middel van man:dd[1]
+ 
Het [.filename]#.img#-bestand is _geen_ gewoon bestand dat u naar de geheugenstick kopieert. Het is een afbeelding van de complete inhoud van de stick. Dit betekent dat u de bestanden _niet_ op de gewone manier van de ene schijf naar de andere kan kopieëren. U dient in plaats hiervan man:dd[1] gebruiken om de afbeelding direct naar de schijf te schrijven:
+
[source,bash]
....
# dd if=FreeBSD-11.2-RELEASE-i386-memstick.img of=/dev/da0 bs=64k
....
+ 
Als een `Operation not permitted` wordt weergegeven, controleer dan dat het apparaat niet in gebruik is en is aangekoppeld, eventueel automatisch door een gereedschap met goede intenties. Probeer het vervolgens opnieuw.
+
****
+
[.procedure]
****

*Procedure: Windows(R) gebruiken om het beeldbestand te schrijven*

Zorg ervoor dat de juiste schijf letter gebruikt wordt als doelschijf, anders kan het voorkomen dat er bestaande data wordt overschreven.

.. Image Writer for Windows verkrijgen
+ 
Image Writer for Windows is een gratis applicatie die een beeld bestand correct naar een geheugen-stick kan schrijven. Download deze van https://launchpad.net/win32-image-writer/[https://launchpad.net/win32-image-writer/] en pak deze uit in een map.
+
.. Writing The Image with Image Writer
+ 
Dubbelklik op het Win23DiskImager icoon om het programma te starten. Controleer of de schijfletter welke getoond is onder `Device` de schijf is van de geheugen-stick. Klik op het map icoon en selecteer het bestand welke naar de geheugen-stick geschreven moet worden. Klik op btn:[Save] om het bestand te accepteren. Controleer of alles correct is en dat er geen bestanden en dergelijke open zijn in andere vensters. Klik als laatste op btn:[Write] om het bestand te schrijven naar de schijf.
****
====

Om opstartdiskettes te maken kunnen de volgende stappen gevolgd worden:

[.procedure]
====

. Bemachtig de images voor opstartdiskettes
+
[IMPORTANT]
======
Merk op dat met ingang van FreeBSD 8._X_ floppy-images niet langer beschikbaar zijn. Zie de bovenstaande instructies voor hoe FreeBSD met behulp van een USB-geheugenstick te installeren, of gebruik een CD-ROM of DVD.
======
+ 
De opstartschijven zijn beschikbaar op de installatiemedia in de map [.filename]#floppies/# en kunnen ook gedownload worden uit de map floppies, `ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/arch/versie-RELEASE/floppies/`. Vervang _arch_ en _versie_ door de architectuur en het versienummer dat geïnstalleerd moet worden. De images voor bootdiskettes voor bijvoorbeeld FreeBSD/i386 {rel112-current}-RELEASE zijn beschikbaar op link:ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/{rel112-current}-RELEASE/floppies/[ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/{rel112-current}-RELEASE/floppies/].
+ 
De diskette-images hebben de extensie [.filename]#.flp#. De map [.filename]#floppies/# bevat een aantal images en het hangt af van de gewenste FreeBSD versie, en in sommige gevallen ook van de hardware, welke images nodig zijn. In de meeste gevallen zijn er vier floppies nodig, [.filename]#boot.flp#, [.filename]#kern1.flp#, [.filename]#kern2.flp#, en [.filename]#kern3.flp#. In dezelfde map staat [.filename]#README.TXT# voor de laatste informatie over de diskette-images.
+
[IMPORTANT]
======
Het FTP-programma moet ingesteld staan in _binary modus_ om de disk-images te downloaden. Sommige webbrowsers blijken de _text_ (of _ASCII_) modus te gebruiken en dan kan er niet van de diskettes opgestart worden.
======
+
. Maak de diskettes aan
+ 
Per gedownload image wordt een diskette aangemaakt. Vanzelfsprekend moeten deze diskettes vrij zijn van fouten. Het gemakkelijkst is dit te testen door de diskettes te formatteren. Vanaf de fabriek geformatteerde floppies kunnen niet vertrouwd worden. Het programma format in Windows(R) meldt niet of er `bad blocks` zijn, het markeert ze gewoon als "bad" en negeert ze. Het wordt geadviseerd schone, nieuwe floppies te gebruiken als op deze manier wordt geïnstalleerd.
+
[IMPORTANT]
======
Als bij het installeren van FreeBSD het installatieprogramma vastloopt, blijft hangen of zich op een andere manier vreemd gedraagt, dan ligt dat meestal aan de floppies. Probeer dan de diskette-images op nieuwe schijven te schrijven en probeer het opnieuw.
======
+
. Schrijf de imagebestanden op diskettes
+ 
De [.filename]#.flp#-bestanden zijn _geen_ gewone bestanden die naar een diskette te kopiëren zijn. Het zijn images van de complete inhoud van een diskette. Dit betekent dat ze _niet_ eenvoudigweg gekopieerd kunnen worden van de ene schijf naar de andere. In plaats daarvan moet speciale software gebruikt worden om de images rechtstreeks op de diskettes te schrijven.
+ 
Als de diskettes aanmaakt worden op een computer met MS-DOS(R) / Windows(R), dan levert het FreeBSD project de software `fdimage`.
+ 
Als de floppies van de CD-ROM worden gebruikt en het CD-ROM station is [.filename]#E:#, dan kan dit als volgt:
+
[source,bash]
....
E:\> tools\fdimage floppies\boot.flp A:
....
+ 
Herhaal dit commando voor elk [.filename]#.flp#-bestand, waarbij steeds een nieuwe diskette wordt gebruikt. Merk elke diskette met de naam van het bestand dat erop wordt gekopieerd. Pas de opdrachtregel steeds aan, afhankelijk van waar de [.filename]#.flp#-bestanden staan. Als er geen CD-ROM beschikbaar is dan kan `fdimage` gedownload worden vanuit de link:ftp://ftp.FreeBSD.org/pub/FreeBSD/tools/[map tools] op de FreeBSD FTP site.
+ 
Als de diskettes worden aanmaakt op een UNIX(R) systeem (zoals een ander FreeBSD systeem) dan kan man:dd[1] gebruikt worden om de imagebestanden naar diskette te kopiëren. Onder FreeBSD:
+
[source,bash]
....
# dd if=boot.flp of=/dev/fd0
....
+ 
Onder FreeBSD verwijst [.filename]#/dev/fd0# naar het eerste diskettestation (de [.filename]#A:#-schijf). [.filename]#/dev/fd1# zou de [.filename]#B:#-schijf zijn enzovoorts. Andere UNIX(R)-varianten kunnen andere namen hebben voor de diskettestations. Meer informatie staat in de documentatie van ieder systeem.
====

Het installeren van FreeBSD kan nu beginnen.

[[install-start]]
== Beginnen met de installatie

[IMPORTANT]
====
De installatie maakt geen wijzigingen op schijven totdat het volgende bericht verschijnt:

....
Last Chance: Are you SURE you want continue the installation?

If you're running this on a disk with data you wish to save then WE
STRONGLY ENCOURAGE YOU TO MAKE PROPER BACKUPS before proceeding!

We can take no responsibility for lost disk contents!
....

De installatie kan worden beëindigd op elk moment voor deze laatste waarschuwing zonder dat de inhoud van harde schijven wordt gewijzigd. Als de angst bestaat dat er iets verkeerd is ingesteld, dan kan op dat moment gewoon de computer uitgezet worden zonder dat er schade optreedt.
====

[[install-starting]]
=== Opstarten

[[install-starting-i386]]
==== Opstarten van i386(TM)

[.procedure]
====
. Begin met een computer die uit staat.
. Zet de computer aan. Als hij aangaat laat hij een optie zien om het systeeminstelmenu, of BIOS, te bereiken, gewoonlijk via kbd:[F2], kbd:[F10], kbd:[Del], of kbd:[Alt+S]. Gebruik de toets die op het scherm wordt aangegeven. In sommige gevallen laat de computer een plaatje zien terwijl hij opstart. Gewoonlijk verdwijnt dit plaatje door het intypen van kbd:[Esc] zodat eventuele verborgen berichten zichtbaar worden.
. Zoek de instelling die bepaalt vanaf welk medium de computer opstart. Dit wordt meestal aangeduid met "Boot Order" en laat een lijst met media zien, zoals `Floppy`, `CD-ROM`, `eerste harde schijf`, enzovoorts.
+ 
Als u van de CD-ROM opstart, zorg er dan voor dat de CD-ROM geselecteerd is. Als wordt opstart van een USB-schijf of een diskette, stel dat dan in. Raadpleeg in geval van twijfel de documentatie van de computer en/of het moederbord.
+ 
Maak de instellingen, bewaar de veranderingen en sluit het instelprogramma af. De computer moet dan opnieuw starten.
. Als u een "opstartbare" USB-stick heeft klaargemaakt zoals beschreven in <<install-boot-media>>, steek dan de USB-stick in voordat u de computer aanzet.
+ 
Bij opstarten vanaf CD moet na het aanzetten van de computer zo snel mogelijk de CD-ROM ingestoken worden.
+
[NOTE]
======
Voor FreeBSD 7._X_ zijn installatiediskettes beschikbaar en ze kunnen worden klaargemaakt zoals beschreven in <<install-boot-media>>. Eén van deze is de eerste opstartschijf: [.filename]#boot.flp#. Plaats deze schijf in uw diskettestation en start de computer op.
======
+ 
Als de computer opstart zoals altijd en met het huidige besturingssysteem begint, dan kan dat om de volgende redenen zijn:
.. De opstartschijven waren niet vroeg genoeg in de computer gedaan om ervan op te starten. Laat ze er dan inzitten en probeer de computer te herstarten.
.. De gemaakte wijzigingen in de BIOS zijn niet goed doorgekomen. Doe dat dan nog een keer totdat de juiste instelling gevonden is.
.. De BIOS ondersteunt het opstarten van het gekozen medium niet.

. FreeBSD start nu op. Bij opstarten vanaf CD-ROM is iets als het volgende op het scherm te zien (versie-informatie weggelaten):
+
[source,bash]
....
Booting from CD-Rom...
645MB medium detected
CD Loader 1.2

Building the boot loader arguments
Looking up /BOOT/LOADER... Found
Relocating the loader and the BTX
Starting the BTX loader

BTX loader 1.00 BTX version is 1.02
Consoles: internal video/keyboard
BIOS CD is cd0
BIOS drive C: is disk0
BIOS drive D: is disk1
BIOS 636kB/261056kB available memory

FreeBSD/i386 bootstrap loader, Revision 1.1

Loading /boot/defaults/loader.conf
/boot/kernel/kernel text=0x64daa0 data=0xa4e80+0xa9e40 syms=[0x4+0x6cac0+0x4+0x88e9d]
\
....
+ 
Bij opstarten vanaf diskette is iets als het volgende op het scherm te zien (versie-informatie weggelaten):
+
[source,bash]
....
Booting from Floppy...
Uncompressing ... done

BTX loader 1.00  BTX version is 1.01
Console: internal video/keyboard
BIOS drive A: is disk0
BIOS drive C: is disk1
BIOS 639kB/261120kB available memory

FreeBSD/i386 bootstrap loader, Revision 1.1

Loading /boot/defaults/loader.conf
/kernel text=0x277391 data=0x3268c+0x332a8 |

Insert disk labelled "Kernel floppy 1" and press any key...
....
+ 
Volg de instructies op en haal de diskette met [.filename]#boot.flp# eruit, stop de diskette met [.filename]#kern1.flp# in het station en druk op kbd:[Enter]. Start op vanaf de eerste diskette en geef volgende diskettes in als daarom wordt gevraagd.
. Of nu wordt opstart van CD-ROM, USB-stick of diskette, de opstartprocedure komt op een gegeven moment bij het bootloader-menu van FreeBSD:
+
[[boot-loader-menu]]
.FreeBSD bootloader-menu
image::boot-loader-menu.png[]
+ 
Wacht 10 seconden of druk op kbd:[Enter].
====

==== Opstarten voor sparc64

De meeste sparc64-systemen zijn ingesteld om automatisch vanaf schijf op te starten. Om FreeBSD te installeren dient u over het netwerk of vanaf een CDROM op te starten, waarvoor u in de PROM (OpenFirmware) dient te breken.

Start het systeem opnieuw op, en wacht totdat te opstartboodschappen verschijnen om dit te doen. Het hangt af van het model, maar het zou er ongeveer zo uit moeten zien:

[source,bash]
....
Sun Blade 100 (UltraSPARC-IIe), Keyboard Present
Copyright 1998-2001 Sun Microsystems, Inc.  All rights reserved.
OpenBoot 4.2, 128 MB memory installed, Serial #51090132.
Ethernet address 0:3:ba:b:92:d4, Host ID: 830b92d4.
....

Als uw systeem vanaf hier verder gaat met opstarten vanaf schijf, dient u kbd:[L1+A] of kbd:[Stop+A] op het toetsenbord in te drukken, of een `BREAK` over de seriële console te versturen (door bijvoorbeeld `~#` in man:tip[1] of man:cu[1] te gebruiken) om bij de PROM-prompt te komen. Het ziet er als volgt uit:

[source,bash]
....
ok     <.>
ok {0} <.>
....

<.> Deze prompt wordt gebruikt op systemen met slechts één CPU.

<.> Deze prompt wordt op SMP-systemen gebruikt, het cijfer geeft het aantal actieve CPUs aan.

Stop hier de CDROM in uw drive, en typ op de PROM-prompt `boot cdrom`.

[[view-probe]]
=== Resultaten van het hardware-onderzoek bekijken

De laatste paar honderd regels die op het scherm verschenen zijn bewaard en kunnen bekeken worden.

Druk op kbd:[Scroll Lock] om ze te bekijken. Hiermee wordt de scrollmodus ingeschakeld. Gebruik de pijltjestoetsen en kbd:[PageUp] en kbd:[PageDown] om de resultaten te bekijken. Druk weer op kbd:[Scroll Lock] om de scrollmodus uit te schakelen.

Dit kan nu gedaan worden om de tekst te bekijken die over het scherm rolde terwijl de kernel de hardware onderzocht. Er is tekst te zoals in <<install-dev-probe>>, maar de exacte tekst is anders, afhankelijk van de componenten in een computer.

[[install-dev-probe]]
.Voorbeeld resultaten hardware-onderzoek
[source,bash]
....
avail memory = 253050880 (247120K bytes)
Preloaded elf kernel "kernel" at 0xc0817000.
Preloaded mfs_root "/mfsroot" at 0xc0817084.
md0: Preloaded image </mfsroot> 4423680 bytes at 0xc03ddcd4

md1: Malloc disk
Using $PIR table, 4 entries at 0xc00fde60
npx0: <math processor> on motherboard
npx0: INT 16 interface
pcib0: <Host to PCI bridge> on motherboard
pci0: <PCI bus> on pcib0
pcib1:<VIA 82C598MVP (Apollo MVP3) PCI-PCI (AGP) bridge> at device 1.0 on pci0
pci1: <PCI bus> on pcib1
pci1: <Matrox MGA G200 AGP graphics accelerator> at 0.0 irq 11
isab0: <VIA 82C586 PCI-ISA bridge> at device 7.0 on pci0
isa0: <iSA bus> on isab0
atapci0: <VIA 82C586 ATA33 controller> port 0xe000-0xe00f at device 7.1 on pci0
ata0: at 0x1f0 irq 14 on atapci0
ata1: at 0x170 irq 15 on atapci0
uhci0 <VIA 83C572 USB controller> port 0xe400-0xe41f irq 10 at device 7.2 on pci
0
usb0: <VIA 83572 USB controller> on uhci0
usb0: USB revision 1.0
uhub0: VIA UHCI root hub, class 9/0, rev 1.00/1.00, addr1
uhub0: 2 ports with 2 removable, self powered
pci0: <unknown card> (vendor=0x1106, dev=0x3040) at 7.3
dc0: <ADMtek AN985 10/100BaseTX> port 0xe800-0xe8ff mem 0xdb000000-0xeb0003ff ir
q 11 at device 8.0 on pci0
dc0: Ethernet address: 00:04:5a:74:6b:b5
miibus0: <MII bus> on dc0
ukphy0: <Generic IEEE 802.3u media interface> on miibus0
ukphy0: 10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
ed0: <NE2000 PCI Ethernet (RealTek 8029)> port 0xec00-0xec1f irq 9 at device 10.
0 on pci0
ed0 address 52:54:05:de:73:1b, type NE2000 (16 bit)
isa0: too many dependant configs (8)
isa0: unexpected small tag 14
orm0: <Option ROM> at iomem 0xc0000-0xc7fff on isa0
fdc0: <NEC 72065B or clone> at port 0x3f0-0x3f5,0x3f7 irq 6 drq2 on isa0
fdc0: FIFO enabled, 8 bytes threshold
fd0: <1440-KB 3.5” drive> on fdc0 drive 0
atkbdc0: <Keyboard controller (i8042)> at port 0x60,0x64 on isa0
atkbd0: <AT Keyboard> flags 0x1 irq1 on atkbdc0
kbd0 at atkbd0
psm0: <PS/2 Mouse> irq 12 on atkbdc0
psm0: model Generic PS/@ mouse, device ID 0
vga0: <Generic ISA VGA> at port 0x3c0-0x3df iomem 0xa0000-0xbffff on isa0
sc0: <System console> at flags 0x100 on isa0
sc0: VGA <16 virtual consoles, flags=0x300>
sio0 at port 0x3f8-0x3ff irq 4 flags 0x10 on isa0
sio0: type 16550A
sio1 at port 0x2f8-0x2ff irq 3 on isa0
sio1: type 16550A
ppc0: <Parallel port> at port 0x378-0x37f irq 7 on isa0
pppc0: SMC-like chipset (ECP/EPP/PS2/NIBBLE) in COMPATIBLE mode
ppc0: FIFO with 16/16/15 bytes threshold
plip0: <PLIP network interface> on ppbus0
ad0: 8063MB <IBM-DHEA-38451> [16383/16/63] at ata0-master UDMA33
acd0: CD-RW <LITE-ON LTR-1210B> at ata1-slave PIO4
Mounting root from ufs:/dev/md0c
/stand/sysinstall running as init on vty0
....

Controleer de resultaten van het hardware-onderzoek nauwgezet om er zeker van te zijn dat FreeBSD alle componenten gevonden heeft die verwacht worden. Als een component niet is gevonden, dan wordt die niet genoemd. Een crossref:kernelconfig[kernelconfig,eigen kernel] staat u toe om apparaten te ondersteunen die niet in de [.filename]#GENERIC# kernel zitten, zoals geluidskaarten.

Na de procedure voor het opsporen van apparaten <<config-country>>. Gebruik de pijltoetsen om een land, regio, of groep te kiezen. Druk daarna op kbd:[Enter], dit stelt gemakkelijk uw land in.

[[config-country]]
.Landmenu kiezen
image::config-country.png[]

Als u [.guimenuitem]#United States# als land heeft geselecteerd, dan zal de standaard Amerikaanse toetsenbordindeling worden gebruikt, als een ander land gekozen is, zal het volgende menu worden afgebeeld. Gebruik de pijltoetsen om de juiste toetsenbordindeling te kiezen en druk op kbd:[Enter].

[[config-keymap]]
.Toetsenbordmenu kiezen
image::config-keymap.png[]

Nadat het juiste land is gekozen zal sysinstall het hoofd menu tonen.

[[using-sysinstall]]
== Inleiding Sysinstall

Het hulpprogramma sysinstall is het installatieprogramma voor FreeBSD. Het is tekstgebaseerd en is onderverdeeld in een aantal menu's en schermen die gebruikt kunnen worden om de installatieprocedure in te stellen en te beheren.

Het menu van sysinstall wordt bestuurd met de pijltjestoetsen, kbd:[Enter], kbd:[Tab], kbd:[Space] en andere toetsen. Een gedetailleerde beschrijving van de gebruikte toetsen en wat ze doen is opgenomen in de gebruikersinformatie voor sysinstall.

Selecteer de optie [.guimenuitem]#Usage# om deze informatie te lezen. Selecteer de knop btn:[Select], zoals in <<sysinstall-main3>>, en druk op kbd:[Enter].

De instructies om het menusysteem te gebruiken worden getoond. Na het lezen kan met kbd:[Enter] het hoofdmenu weer getoond worden.

[[sysinstall-main3]]
.Usage selecteren in het sysinstall hoofdmenu
image::main1.png[]

[[select-doc]]
=== Menu Documentation selecteren

Kies met de pijltjestoetsen in het hoofdmenu [.guimenuitem]#Doc# en druk op kbd:[Enter].

[[main-doc]]
.Menu Documentation selecteren
image::main-doc.png[]

Dit toont het menu Documentation.

[[docmenu1]]
.Sysinstall menu Documentation
image::docmenu1.png[]

Het is belangrijk om de documentatie te lezen.

Selecteer een document met de pijltjestoetsen en druk op kbd:[Enter] om het te bekijken. Na het lezen wordt met kbd:[Enter] teruggekeerd naar het menu Documentation.

Selecteer [.guimenuitem]#Exit# met de pijltjestoetsen en druk op kbd:[Enter] om het menu Documentation te verlaten.

[[keymap]]
=== Menu Keymap selecteren

Kies met de pijltjestoetsen [.guimenuitem]#Keymap# in het menu en druk op kbd:[Enter] om de toetsenbordinstellingen te wijzigen. Dit is alleen nodig als geen standaard of VS-toetsenbord wordt gebruikt.

[[sysinstall-keymap]]
.Sysinstall hoofdmenu
image::main-keymap.png[]

Een andere toetsenbordindeling is te kiezen door het menu-item te selecteren met omhoog/omlaag en dan op kbd:[Space] te drukken. Nog een keer kbd:[Space] deselecteert het item. Nadat de keuze is gemaakt kan met de pijltjestoetsen btn:[OK] gekozen worden en op kbd:[Enter] gedrukt worden.

In de schermafbeelding wordt maar een deel van de lijst getoond. Selecteer btn:[Cancel] door op kbd:[Tab] te drukken. Dan wordt de standaard toetsenbordindeling gebruikt en het programma gaat terug naar het hoofdmenu voor de installatie.

[[sysinstall-keymap-menu]]
.Sysinstall menu Keymap
image::keymap.png[]

[[viewsetoptions]]
=== Installatiescherm Options

Kies [.guimenuitem]#Options# en druk op kbd:[Enter].

[[sysinstall-options]]
.Sysinstall hoofdmenu
image::main-options.png[]

[[options]]
.Sysinstall opties
image::options.png[]

De standaardwaarden zijn in orde voor de meeste gebruikers en hoeven meestal niet gewijzigd te worden. De `release name` hangt af van de versie die geïnstalleerd wordt.

Er staat een beschrijving van het geselecteerde item aan de onderkant van het scherm, geaccentueerd in blauw. Eén van de opties is [.guimenuitem]#Use Defaults# waarmee opnieuw de beginwaarden worden ingesteld.

Druk op kbd:[F1] om de helptekst van de diverse opties te bekijken.

Druk op kbd:[Q] om terug te gaan naar het hoofdmenu van de installatie.

[[start-install]]
=== Een standaardinstallatie starten

De [.guimenuitem]#Standard# installatie wordt aangeraden voor nieuwe gebruikers van UNIX(R) of FreeBSD. Gebruik de pijltjestoetsen om [.guimenuitem]#Standard# te selecteren en druk op kbd:[Enter] om de installatie te starten.

[[sysinstall-standard]]
.Een standaardinstallatie starten
image::main-std.png[]

[[install-steps]]
== Schijfruimte toewijzen

Als eerste moet schijfruimte aan FreeBSD worden toegewezen en die ruimte dient gemerkt te worden zodat sysinstall deze kan voorbereiden.Om dit te kunnen doen is kennis nodig over hoe FreeBSD informatie op schijven verwacht aan te treffen.

[[install-drive-bios-numbering]]
=== BIOS schijfnummering

Voordat FreeBSD op een systeem geïnstalleerd en ingesteld kan worden is er een belangrijk onderwerp waarover kennis nodig is, met name als er meerdere harde schijven zijn.

Op een PC met een BIOS-afhankelijk besturingssysteem zoals MS-DOS(R) en Microsoft(R) Windows(R), kan het BIOS de normale schijfvolgorde abstraheren en volgt het besturingssysteem die wijzigingen. Dit stelt de gebruiker in staat op te starten van een andere schijf dan de zogenaamde "primary master". Dit is erg handig voor gebruikers die er achter zijn gekomen dat de gemakkelijkste en goedkoopste manier om een systeemback-up te maken het plaatsen van een identieke tweede harde schijf is en het daarop regelmatig kopieëren van de inhoud van de eerste schijf met Ghost  of XCOPY. Als de eerste schijf weigert of aangevallen is door een virus of vervuild is door een fout in het besturingssysteem, dan kan eenvoudig overgeschakeld worden door in het BIOS de twee schijven logisch te wisselen. Dat is als het verwisselen van de kabels, maar dan zonder de systeemkast open te maken.

Duurdere systemen met SCSI controllers hebben vaak BIOS-uitbreidingen die het mogelijk maken SCSI-schijven op soortgelijke wijze in te delen voor maximaal zeven schijven.

Een gebruiker die gewend is hiervan gebruik te maken kan verrast worden als de resultaten met FreeBSD niet overeenkomen met de verwachtingen. FreeBSD maakt geen gebruik van het BIOS en heeft dus geen kennis van "logical BIOS drive mapping". Dit kan leiden tot verbazingwekkende situaties, met name als de schijven fysiek gelijk zijn in geometrie en ook de data klonen van elkaar zijn.

Bij het gebruik van FreeBSD moet altijd de natuurlijke schijfnummering hersteld worden voordat een installatie wordt gestart en die moet ook zo blijven. Als de schijven gewisseld moeten worden, dan moet dat op de moeilijke manier: maak de systeemkast open en verplaats jumpers en kabels.

****
Willem sloopt een oude Wintel machine om er nog een FreeBSD machine voor Fred van te maken. Willem installeert een enkele SCSI-schijf met SCSI ID 0 en installeert er FreeBSD op.

Fred begint met systeem te werken, maar na een paar dagen komt hij er achter dat de oude SCSI-schijf veel fouten geeft en hij geeft het door aan Willem.

Na weer een paar dagen besluit Willem dat het tijd is om er iets aan te doen, dus hij pakt een identieke SCSI-schijf uit het "archief" met schijven in een achterkamertje. Een oppervlaktecontrole toont aan dat deze schijf goed functioneert, dus Willem installeert deze schijf als SCSI ID 4 en maakt een image kopie van schijf 0 naar schijf 4. Nu de nieuwe schijf is geïnstalleerd en het prima doet, besluit Willem dat het een goed idee is om hem in bedrijf te nemen, dus gebruikt hij de mogelijkheid van het BIOS om de schijven te hernummeren, om er voor te zorgen dat het systeem opstart van schijf 4. FreeBSD start op en werkt goed.

Fred werkt nog een paar dagen door en vlot besluiten Willem en Fred dat het tijd is voor een nieuw avontuur: tijd op om te waarderen naar een nieuwere versie van FreeBSD. Willem haalt SCSI unit 0 eruit, want die was een beetje instabiel en vervangt hem door een andere schijf uit het "archief". Willem installeert vervolgens de nieuwe versie van FreeBSD op de nieuwe SCSI ID 0 met Fred's magische Internet FTP diskettes. De installatie gaat goed.

Fred gebruikt de nieuwe versie van FreeBSD een paar dagen en bevestigt dat die goed genoeg is om gebruikt te worden op de programmeerafdeling. Het is tijd om al zijn werk vanaf de oude versie te kopiëren. Dus Fred mount SCSI ID 4 (de laatste kopie van de oudere FreeBSD versie). Fred baalt behoorlijk als hij ontdekt dat niets van zijn kostbare werk aanwezig is op SCSI ID 4.

Waar zijn de gegevens gebleven?

Toen Willem een zuivere kopie van de originele SCSI ID 0 maakte op SCSI ID 4, werd SCSI ID 4 de "nieuwe kloon". Toen Willem het SCSI BIOS zo instelde dat hij kon opstarten van SCSI ID 4 hield hij zichzelf gewoonweg voor de gek. FreeBSD draaide nog steeds op SCSI ID 0. Dit soort wijzigingen in het BIOS zorgen ervoor dat sommige of alle opstart- en laadprogramma's van de geselecteerde BIOS schijf komen, maar als de FreeBSD kernelstuurprogramma's het overnemen, wordt de BIOS nummering genegeerd en valt FreeBSD terug op de normale schijfnummering. In dit voorbeeld werkte het systeem nog steeds op de originele SCSI ID 0 en Fred's gegevens stonden daarop en niet op SCSI ID 4. Het feit dat het systeem leek te draaien vanaf SCSI ID 4 was eenvoudig een luchtkasteel als gevolg van menselijke verwachtingspatronen.

Verheugd kunnen we mededelen dat er geen enkele byte weggegooid is bij de ontdekking van dit verschijnsel. De oude SCSI-schijf ID 0 werd teruggehaald van de stapel en al Fred's werk is aan hem teruggegeven (en Willem weet nu dat hij al tot 0 kan tellen).

Hoewel in dit voorbeeld SCSI-schijven zijn gebruikt, geldt hetzelfde voor IDE-schijven.
****

[[main-fdisk]]
=== Slices maken met FDisk

[NOTE]
====
Wijzigingen die op dit punt gemaakt worden, worden niet weggeschreven naar de schijf. Als er een fout gemaakt is kan opnieuw begonnen worden door via de menu's sysinstall te verlaten en het nog een keer te proberen of door kbd:[U] te toetsen kan de optie [.guimenuitem]#Undo# gebruikt worden. Als alles te verwarrend is kan zelfs de computer uitgezet worden.
====

Na de keuze een standaardinstallatie te beginnen toont sysinstall het volgende bericht:

[source,bash]
....
                                 Message
 In the next menu, you will need to set up a DOS-style ("fdisk")
 partitioning scheme for your hard disk. If you simply wish to devote
 all disk space to FreeBSD (overwriting anything else that might be on
 the disk(s) selected) then use the (A)ll command to select the default
 partitioning scheme followed by a (Q)uit. If you wish to allocate only
 free space to FreeBSD, move to a partition marked "unused" and use the
 (C)reate command.
                                [  OK  ]

                      [ Press enter or space ]
....

Toets kbd:[Enter]. Er wordt dan een lijst getoond met alle harde schijven die de kernel gevonden heeft bij het onderzoeken van de hardware. <<sysinstall-fdisk-drive1>> toont een voorbeeld van een systeem met twee IDE-schijven. Ze heten [.filename]#ad0# en [.filename]#ad2#.

[[sysinstall-fdisk-drive1]]
.Schijf kiezen voor FDisk
image::fdisk-drive1.png[]

Waarom staat [.filename]#ad1# niet in de lijst?

Stel er zitten twee IDE-schijven in een systeem, de eerste als master op de eerste IDE controller en de andere als master op de tweede IDE controller. Als FreeBSD deze zou nummeren zoals ze worden aangetroffen, als [.filename]#ad0# en [.filename]#ad1#, dan zou het allemaal werken.

Maar als dan een derde schijf wordt toegevoegd, als slave op de eerste IDE controller, dan wordt die [.filename]#ad1# en de vorige [.filename]#ad1# wordt dan [.filename]#ad2#. Omdat apparaatnamen (zoals [.filename]#ad1s1a#) in gebruik zijn om bestandssystemen te vinden, lijken bestandssystemen niet meer in orde zijn en moeten de FreeBSD instellingen gewijzigd worden.

Om dit te omzeilen kan de kernel zo ingesteld worden dat de IDE schijven namen krijgen gebaseerd op hun lokatie en niet in de volgorde waarin ze gevonden worden. Met dat schema wordt de masterschijf op de tweede IDE controller _altijd_[.filename]#ad2#, ook als er geen [.filename]#ad0# of [.filename]#ad1# apparaten zijn.

Dit is de standaardinstelling van de FreeBSD kernel, vandaar dat dit scherm [.filename]#ad0# en [.filename]#ad2# laat zien. De machine waarop deze schermafdruk gemaakt is had IDE schijven op beide masterkanalen van de IDE controllers en geen schijven op de slavekanalen.

Nu kan de schijf waarop de FreeBSD installatie moet komen worden geselecteerd. Druk daarna op btn:[OK]. FDisk start op met een scherm vergelijkbaar met <<sysinstall-fdisk1>>.

Het scherm van FDisk bestaat uit drie delen.

Het eerste deel, de eerste twee regels van het scherm, toont de details zien van de selecteerde schijf, inclusief de FreeBSD naam, de schijfgeometrie en de totale grootte van de schijf.

Het tweede deel laat de slices zien die momenteel op de schijf aanwezig zijn, waar ze beginnen en eindigen, hoe groot ze zijn en de namen die FreeBSD ze geeft, hun omschrijving en subtype. In dit voorbeeld zijn twee kleine ongebruikte delen te zien, die een afspiegeling zijn van de schijfindeling op het systeem. Het laat ook een grote FAT-slice zien, die bijna zeker zichtbaar is als [.filename]#C:# in MS-DOS(R) of Windows(R), en een extended deel, dat de andere schijfletters kan bevatten voor MS-DOS(R) of Windows(R).

Het derde deel toont de commando's zien die beschikbaar zijn in FDisk.

[[sysinstall-fdisk1]]
.Typische `fdisk`-partities vóór het wijzigen
image::fdisk-edit1.png[]

De volgende stap hangt af van hoe de schijf moet worden opgedeeld.

Als de hele schijf voor FreeBSD wordt gebruikt (waardoor alle andere data op die schijf verwijderd wordt als later in de procedure met sysinstall wordt bevestigd dat de installatie verder kan gaan) toets dan kbd:[A], de optie [.guimenuitem]#Use Entire Disk#. De bestaande delen worden verwijderd en daarvoor in de plaats komt een klein gebied, dat als `unused` wordt aangegeven (alweer een afspiegeling van de PC schijfopmaak) en dan een groot deel voor FreeBSD. Hierna dient het nieuwe FreeBSD-deel met de pijltjestoetsen geselecteerd te worden en daarna kan kbd:[S] ingetoetst worden om het deel `bootable` te maken. Het scherm ziet er dan ongeveer uit als in <<sysinstall-fdisk2>>. Let op de `A` in de kolom `Flags`. Deze geeft aan dat dit deel _actief_ is en er van opgestart wordt.

Als er ruimte voor FreeBSD gemaakt wordt door een bestaande slice te verwijderen, dan moet dat deel geselecteerd worden met de pijltjestoetsen en kan vervolgens op kbd:[D] gedrukt worden. Daarna kan kbd:[C] getoetst worden en wordt er gevraagd hoe groot het deel moet zijn. Geef het gewenste getal in en druk op kbd:[Enter]. De standaardwaarde in dit invoervak is het grootst mogelijke deel dat gemaakt kan worden. Dat kan de grootst mogelijke aaneengesloten ruimte op de harde schijf zijn of de hele schijf.

Als er al ruimte gemaakt is voor FreeBSD (bijvoorbeeld met een programma als PartitionMagic(R)), dan kan de optie kbd:[C] gebruikt worden om een nieuw deel te maken. Opnieuw komt de vraag naar de grootte van het gebied dat aangemaakt moet worden.

[[sysinstall-fdisk2]]
.FDisk partitie voor een hele schijf
image::fdisk-edit2.png[]

Toets na afronding kbd:[Q]. De wijzigingen worden bewaard in sysinstall, maar worden nog niet op de schijf weggeschreven.

[[bootmgr]]
=== Bootmanager installeren

Hierna is het mogelijk een bootmanager te installeren. Het installeren van de FreeBSD bootmanager is verstandig als:

* Er meer dan één schijf in een systeem zit en FreeBSD op een andere dan de eerste schijf wordt geïnstalleerd;
* FreeBSD geïnstalleerd wordt naast een ander besturingssysteem op dezelfde schijf en er bij het opstarten van de computer gekozen moet worden of FreeBSD of het andere besturingssysteem wordt gestart.

Als FreeBSD het enige besturingssysteem op een computer wordt en het is geïnstalleerd op de eerste harde schijf, dan volstaat de [.guimenuitem]#Standard# bootmanager. Kies [.guimenuitem]#None# als een bootmanager van een derde partij wordt gebruikt die in staat is om FreeBSD te starten.

Maak de keuze en druk op kbd:[Enter].

[[sysinstall-bootmgr]]
.Sysinstall menu Boot Manager
image::boot-mgr.png[]

Het hulpscherm, bereikbaar via kbd:[F1], beschrijft de problemen die mogelijk zijn als de harde schijf voor meerdere besturingssystemen gebruikt gaat worden.

=== Slices maken op een andere schijf

Als er meer dan één schijf is komt het programma terug in het scherm "Select Drives" na het installeren van de bootmanager. Als FreeBSD wordt geïnstalleerd op meerdere schijven, selecteer dan een andere schijf en herhaal het indelen van de schijf met FDisk.

[IMPORTANT]
====
Als FreeBSD wordt geïnstalleerd op een andere dan de eerste schijf, dan moet de FreeBSD bootmanager geïnstalleerd worden op beide schijven.
====

[[sysinstall-fdisk-drive2]]
.Schijf selecteren verlaten
image::fdisk-drive2.png[]

Met kbd:[Tab] wordt gewisseld tussen de laatst geselecteerde schijf, btn:[OK] en btn:[Cancel].

Druk één keer op kbd:[Tab] om btn:[OK] actief te maken en druk dan op kbd:[Enter] om door te gaan met de installatie.

[[bsdlabeleditor]]
=== Partities maken met Disklabel

Nu moeten er slices in elke zojuist aangemaakte partitie aangemaakt worden. Onthoud dat elke partitie een letter heeft van `a` tot en met `h` en dat partities `b`, `c` en `d` een betekenis hebben die gehonoreerd moet worden.

Bepaalde programma's hebben voordeel van specifieke partitieschema's, met name als partities worden aanmaakt over meerdere schijven. Maar voor nu, als eerste FreeBSD installatie, is het niet zo van belang hoe de schijf wordt gepartitioneerd. Het is belangrijker dat FreeBSD wordt geïnstalleert en geleerd wordt hoe ermee te werken. FreeBSD kan altijd opnieuw geïnstalleerd worden om een partitieschema te wijzigen als er meer bekendheid is met het besturingssysteem.

Het onderstaande schema heeft vier partities. Eén als swapgebied en drie voor bestandssystemen.

.Partitieopmaak voor de eerste schijf
[cols="1,1,1,1", frame="none", options="header"]
|===
| Partitie
| Bestandssysteem
| Grootte
| Omschrijving

|`a`
|[.filename]#/#
|1 GB
|Dit is het root-bestandssysteem. Elk ander bestandssyteem wordt ergens in dit systeem aangekoppeld. 1 GB is een redelijke grootte voor dit bestandssysteem. Er wordt niet al te veel data in opgeslagen, want een normale FreeBSD installatie slaat hier ongeveer 128 MB aan gegevens op. De rest van de ruimte is voor tijdelijke gegevens en laat extra ruimte over voor het geval nieuwere versies van FreeBSD meer ruimte nodig hebben in [.filename]#/#.

|`b`
|N/A
|2-3 x RAM
|

De swapruimte van een systeem wordt op de `b`-partitie opgeslagen. De keuze van de juiste hoeveelheid swapruimte is een beetje een kunst. Een goede vuistregel is dat swapruimte twee of drie keer de hoeveelheid intern geheugen (RAM) moet zijn. Er moet minstens 64 MB aan swap zijn, dus als er minder dan 32 MB RAM in een computer zit, zet dan de swapruimte op 64 MB.

 Als er meer dan één schijf in een computer zit, dan kan er op iedere schijf swapruimte gemaakt worden. FreeBSD gebruikt dan elke schijf als swap, wat effectief de snelheid van het swappen verhoogt. Bereken in dat geval de totale hoeveelheid swap die nodig is (bijvoorbeeld 128 MB) en deel dat door het aantal schijven dat aanwezig is (bijvoorbeeld twee schijven) om de hoeveelheid swap per schijf te bepalen, in dit voorbeeld 64 MB swapruimte per schijf.

|`e`
|[.filename]#/var#
|512 MB tot 4096 MB
|De map [.filename]#/var# bevat bestanden die constant veranderen: logboekbestanden en andere administratieve bestanden. Veel van deze bestanden worden intensief gelezen of beschreven gedurende het dagelijks draaien van FreeBSD. Door deze bestanden op een apart bestandssysteem te zetten heeft FreeBSD de mogelijkheid de toegang tot deze bestanden te optimaliseren, zonder invloed te hebben op bestanden in andere map die niet zo'n toegangspatroon hebben.

|`f`
|[.filename]#/usr#
|Overige schijfruimte (minstens 8 GB)
|Alle andere bestanden worden gewoonlijk opgeslagen in [.filename]#/usr# en submappen.
|===

[WARNING]
====

De bovenstaande waardes dienen als voorbeeld en dienen alleen door ervaren gebruikers gebruikt te worden. Gebruikers worden aangeraden om de automatische partitie-indeling genaamd ``Auto Defaults``van de partitiebewerker van FreeBSD te gebruiken.
====

Als FreeBSD wordt geïnstalleerd op meer dan één schijf dan moeten ook partities aangemaakt worden op de andere slices die zijn ingesteld. De meest eenvoudige manier om dat te doen is het aanmaken van twee partities op elke schijf: een als swap en een voor een bestandssysteem.

.Partitieopmaak voor volgende schijven
[cols="1,1,1,1", frame="none", options="header"]
|===
| Partitie
| Bestandssysteem
| Grootte
| Omschrijving

|`b`
|N/A
|Zie omschrijving
|Zoals beschreven kan swapruimte over alle schijven verdeeld worden. Ook al is de `a` partitie vrij, de conventie schrijft voor dat de swapruimte op partitie `b` staat.

|`e`
|/disk__n__
|Overige schijfruimte
|De overige schijfruimte wordt gebruikt voor één grote partitie. Dit kan gemakkelijk op de `a`-partitie, in plaats van de `e`-partitie. De conventie schrijft echter voor dat partitie `a` op een slice is gereserveerd voor het bestandssysteem dat de root ([.filename]#/#) van het bestandssysteem is. Deze conventie hoeft niet gevolgd te worden, maar sysinstall doet dat wel, dus als de conventie wordt nageleefd wordt de installatie iets schoner. Er kan gekozen worden om dit bestandssysteem waar dan ook te mounten. Dit voorbeeld suggereert dat het wordt aangekoppeld als [.filename]#/diskn#, waarbij _n_ een getal is dat verandert voor elke schijf. Er kan natuurlijk ook een ander schema worden aanhouden als dat de voorkeur heeft.
|===

Na het kiezen van de partitieopmaak kunnen ze worden aangemaakt met sysinstall. Dan verschijnt het volgende bericht:

[source,bash]
....
                                 Message
 Now, you need to create BSD partitions inside of the fdisk
 partition(s) just created. If you have a reasonable amount of disk
 space (1GB or more) and don't have any special requirements, simply
 use the (A)uto command to allocate space automatically. If you have
 more specific needs or just don't care for the layout chosen by
 (A)uto, press F1 for more information on manual layout.

                                [  OK  ]
                          [ Press enter or space ]
....

Druk op kbd:[Enter] om de FreeBSD partitie-editor, Disklabel te starten.

<<sysinstall-label>> toont het scherm als Disklabel opstart. Het scherm bestaat uit drie delen.

De eerste paar regels tonen de naam van de actieve schijf en het gebied dat de partities bevat die worden aangemaakt (op dit punt noemt Disklabel dit de `Partitienaam` in plaats van de slicenaam). Dit scherm toont ook de hoeveelheid vrije ruimte in de slice. Dat is de gereserveerde ruimte in de slice die nog niet aan een partitie is toegewezen.

Het middelste deel toont de partities die aangemaakt zijn, de naam van het bestandssysteem dat elke partitie bevat, de grootte en enkele opties betreffende het aanmaken van het bestandssysteem.

Het onderste deel van het scherm toont de toetsaanslagen die geldig zijn in Disklabel.

[[sysinstall-label]]
.Sysinstall Disklabel Editor
image::disklabel-ed1.png[]

Disklabel kan automatisch de partities aanmaken en ze de standaardgrootte geven. De standaardgroottes worden met behulp van een intern algoritme om de partitiegrootte te bepalen gebaseerd op de schijfgrootte berekend. Dit kan door op kbd:[A] te drukken. Dan verschijnt een scherm zoals in <<sysinstall-label2>>. Afhankelijk van de grootte van de schrijf die wordt gebruikt zijn de standaardwaarden wel of niet van toepassing. Dit maakt niets uit, omdat de standaardwaarden niet geaccepteerd hoeven te worden.

[NOTE]
====
De standaard partitionering wijst [.filename]#/tmp# zijn eigen partitie toe en is die geen onderdeel meer van de partitie [.filename]#/#. Dit voorkomt het vollopen van de partitie [.filename]#/# met tijdelijke bestanden.
====

[[sysinstall-label2]]
.Sysinstall Disklabel Editor met standaardwaarden
image::disklabel-auto.png[]

Als er gekozen is om niet de standaard partities te gebruiken en ze te vervangen door een eigen indeling, gebruik dan de pijltjestoetsen om de eerste partitie te selecteren en druk dan op kbd:[D] om deze te verwijderen. Herhaal dit om alle aanbevolen partities te verwijderen.

Selecteer het juiste schijfdeel aan de bovenkant van het scherm om de eerste partitie aan te maken (`a`, gemount als [.filename]#/# - root) en druk op kbd:[C]. Een dialoogscherm verschijnt met de vraag hoe groot de nieuwe partitie moet zijn (zoals te zien in <<sysinstall-label-add>>). De grootte kan opgeven worden in schijfblokken of als een getal gevolgd door `M` voor megabytes, `G` voor gigabytes of `C` voor cylinders.

[[sysinstall-label-add]]
.Vrije ruimte voor de rootpartitie
image::disklabel-root1.png[]

De standaardgrootte maakt een partitie aan zo groot als de rest van het schijfdeel. Als de partitiegroottes worden gebruikt als beschreven in het eerdere voorbeeld, verwijder dan het reeds ingevulde getal met kbd:[Backspace] en type `512M`, zoals te zien in <<sysinstall-label-add2>>. Druk dan op btn:[OK].

[[sysinstall-label-add2]]
.Grootte van de rootpartitie wijzigen
image::disklabel-root2.png[]

Als de grootte van een partitie gekozen is, wordt gevraagd of deze partitie een bestandssysteem of een wisselbestand (`swap`) bevat. Deze dialoog is te zien in <<sysinstall-label-type>>. Deze eerste partitie bevat een bestandssysteem, dus controleer of [.guimenuitem]#FS# geselecteerd is en druk op kbd:[Enter].

[[sysinstall-label-type]]
.Type van de rootpartitie kiezen
image::disklabel-fs.png[]

Omdat een bestandssysteem wordt aangemaakt moet disklabel verteld worden waar het bestandssysteem gemount moet worden. Het dialoogscherm is te zien in <<sysinstall-label-mount>>. Het mountpunt van het root-bestandssysteem is [.filename]#/#, dus type `/` en druk dan op kbd:[Enter].

[[sysinstall-label-mount]]
.Root mountpunt kiezen
image::disklabel-root3.png[]

Het scherm wordt dan bijgewerkt met de nieuw aangemaakte partitie. Deze stappen moeten herhaald worden voor de andere partities. Als een wisselbestandpartitie wordt aanmaakt, wordt niet gevraagd naar het mountpunt, want wisselbestanden worden nooit gemount. Als de laatste partitie is aanmaakt, [.filename]#/usr#, kan de aangegeven grootte blijven staan, want dat is de rest van de schijf.

Het uiteindelijke FreeBSD Disklabel Editor scherm kan eruit zien als <<sysinstall-label4>>, maar de waarden kunnen afwijken. Druk op kbd:[Q] om af te sluiten.

[[sysinstall-label4]]
.Sysinstall Disklabel Editor
image::disklabel-ed2.png[]

[[install-choosing]]
== Wat installeren

[[distset]]
=== Distributieset selecteren

De keuze van de distributieset om te installeren hangt af van het gebruiksdoel van een systeem en de beschikbare schijfruimte. De voorgedefiniëerde opties variëren van het installeren van kleinste mogelijke installatie tot "alles". Nieuwelingen in UNIX(R) en/of FreeBSD kiezen bijna zeker één van voorgedefinieerde opties. Het aanpassen van de distributieset is typisch iets voor de meer ervaren gebruikers.

Druk op kbd:[F1] voor meer informatie over de distributiesets en wat ze bevatten. Na het bekijken van de informatie geeft het toetsen van kbd:[Enter] opnieuw het menu Select Distributions weer.

Als een grafische gebruikersinterface gewenst is, dan dient de configuratie van de X-server en het kiezen van een standaard bureaublad na de installatie van FreeBSD te worden uitgevoerd. Meer informatie over het installeren en instellen van een X-server staat beschreven in crossref:x11[x11,Het X Window systeem].

Xorg is de standaardversie van X11 die wordt geïnstalleerd.

Als het wenselijk is een aangepaste kernel te compileren, kies dan een optie die de broncode bevat. Meer informatie over de redenen om een aangepaste kernel te bouwen en hoe dat moet staat in crossref:kernelconfig[kernelconfig,De FreeBSD-kernel instellen].

Vanzelfsprekend is het meest uitgebreide systeem het systeem dat alles omvat. Als er genoeg schijfruimte is, kies dan met de pijltjestoetsen [.guimenuitem]#All#, zoals in <<distribution-set1>> en druk op kbd:[Enter]. Als schijfruimte een zorg is, overweeg dan een optie die meer toegespitst is op de gewenste situatie. De perfecte keuze maken is niet nodig, naderhand kunnen distributies worden toevoegd.

[[distribution-set1]]
.Distributies kiezen
image::dist-set.png[]

[[portscol]]
=== Portscollectie installeren

Na het kiezen van de gewenste distributie komt de vraag of de FreeBSD Portscollectie geïnstalleerd moet worden. De Portscollectie is een gemakkelijke en handige manier om software te installeren. De Portscollectie bevat niet de broncode die nodig is om de software te compileren. In plaats daarvan is het een verzameling bestanden die het downloaden, compileren en installeren van software automatiseert. In crossref:ports[ports,Applicaties installeren. pakketten en ports] wordt beschreven hoe de Portscollectie gebruikt kan worden.

Het installatieprogramma controleert niet of er genoeg schijfruimte is. Deze optie dient alleen gekozen te worden als er voldoende schijfruimte is. In FreeBSD {rel120-current} neemt de Portscollectie ongeveer {ports-size} schijfruimte in. Het is verstandig om aan te nemen dat in recentere versies van FreeBSD meer ruimte nodig is.

[source,bash]
....
                         User Confirmation Requested
 Would you like to install the FreeBSD ports collection?

 This will give you ready access to over 24,000 ported software packages,
 at a cost of around 500 MB of disk space when "clean" and possibly much
 more than that if a lot of the distribution tarballs are loaded
 (unless you have the extra CDs from a FreeBSD CD/DVD distribution
 available and can mount it on /cdrom, in which case this is far less
 of a problem).

 The ports collection is a very valuable resource and well worth having
 on your /usr partition, so it is advisable to say Yes to this option.

 For more information on the ports collection & the latest ports,
 visit:
     http://www.FreeBSD.org/ports

                              [ Yes ]     No
....

Selecteer btn:[yes] met de pijltjestoetsen om de Portscollectie te installeren of btn:[no] om deze optie over te slaan. Druk op kbd:[Enter] om verder te gaan. Het menu Choose Distributions wordt opnieuw getoond.

[[distribution-set2]]
.Distributies kiezen
image::dist-set2.png[]

Als alle keuzes gemaakt zijn, selecteer dan [.guimenuitem]#Exit# met de pijltjestoetsen, zorg ervoor dat btn:[OK] actief is en druk op kbd:[Enter] om verder te gaan.

[[install-media]]
== Installatiemedia kiezen

Als wordt geïnstalleerd vanaf een CD-ROM of DVD kies dan met de pijltjestoetsen de optie [.guimenuitem]#Install from a FreeBSD CD/DVD#. Zorg ervoor dat btn:[OK] actief is en druk op kbd:[Enter] om verder te gaan.

Kies voor andere installatiemethodes de desbetreffende optie en volg de aanwijzingen.

Druk op kbd:[F1] om de online help voor de installatiemedia te lezen. Druk op kbd:[Enter] om terug te gaan naar het menu mediaselectie.

[[choose-media]]
.Mediaselectie
image::media.png[]

=== FTP installatiemethoden

Er zijn drie manieren van installeren via FTP: active FTP, passive FTP of via een HTTP proxy.

Actieve FTP: [.guimenuitem]#Install from an FTP server#::
Deze optie zorgt ervoor dat alle FTP acties gebruik maken van de "Active" modus. Dit werkt niet door firewalls, maar werkt wel met oudere FTP-servers die de passieve modus niet ondersteunen. Als een verbinding blijft hangen met de passieve modus probeer dan de actieve modus!

Passieve FTP: [.guimenuitem]#Install from an FTP server through a firewall#::
Deze optie geeft sysinstall aan gebruik te maken van de "Passive" modus voor al het FTP-verkeer. Dit zorgt ervoor dat verbindingen door firewalls heen kunnen die inkomende verbindingen niet toelaten op willekeurige TCP-poorten.

FTP via een HTTP proxy: [.guimenuitem]#Install from an FTP server through a http proxy#::
Deze optie geeft sysinstall aan gebruik te maken van het HTTP protocol (zoals een webbrowser) om verbinding te maken met een proxy voor alle FTP verbindingen. De proxy vertaalt de verzoeken en stuurt ze naar de FTP server. Dit zorgt ervoor dat verbindingen door firewalls heen kunnen die helemaal geen FTP toestaan, maar wel een HTTP proxy hebben. In dit geval moet naast de FTP-server ook een HTTP proxy opgegeven worden.

Bij het gebruik van een proxy FTP-server moet meestal de server waar uiteindelijk verbinding mee gemaakt moet worden onderdeel zijn van de gebruikersnaam, na het teken "@". De proxy server "imiteert" dan de echte server. Zo kan bijvoorbeeld geïnstalleerd worden vanaf `ftp.FreeBSD.org`, gebruikmakend van proxy FTP-server `foo.example.com`, luisterend op poort 1234.

In dit geval kan in het menu opties menu als FTP gebruikersnaam `ftp@ftp.FreeBSD.org` ingevuld worden en als wachtwoord een emailadres. Als installatiemedium kan FTP ingevuld worden (of passieve FTP als de gebruikte proxy het ondersteunt) en als URL `ftp://foo.example.com:1234/pub/FreeBSD`.

Omdat [.filename]#/pub/FreeBSD# van `ftp.FreeBSD.org` via de proxy van `foo.example.com` wordt benaderd kan vanaf _die_ machine geïnstalleerd worden (die de bestanden ophaalt van `ftp.FreeBSD.org` als het installatieprogramma erom vraagt).

[[install-final-warning]]
== De installatie bevestigen

Nu kan de installatie verder gaan. Dit is ook de laatste mogelijkheid om de installatie te beëindigen ter voorkoming van wijzigingen op de harde schijf.

[source,bash]
....
                       User Confirmation Requested
 Last Chance! Are you SURE you want to continue the installation?

 If you're running this on a disk with data you wish to save then WE
 STRONGLY ENCOURAGE YOU TO MAKE PROPER BACKUPS before proceeding!

 We can take no responsibility for lost disk contents!

                             [ Yes ]    No
....

Kies btn:[yes] en druk op kbd:[Enter] om verder te gaan.

De duur van de installatie hangt af van de gekozen distributie, het installatiemedium en de snelheid van de computer. Er wordt een serie berichten getoond die de voortgang aangeeft.

De installatie is klaar als het volgende bericht wordt getoond:

[source,bash]
....
                               Message

Congratulations! You now have FreeBSD installed on your system.

We will now move on to the final configuration questions.
For any option you do not wish to configure, simply select No.

If you wish to re-enter this utility after the system is up, you may
do so by typing: /usr/sbin/sysinstall.

                                 [ OK ]

                      [  Press enter or space  ]
....

Druk op kbd:[Enter] om verder te gaan met instellingen na de installatie.

Kiezen voor btn:[no] en bevestigen met kbd:[Enter] beëindigt de installatie en er worden geen wijzigingen aan het systeem gemaakt. Het volgende bericht verschijnt:

[source,bash]
....
                                Message
Installation complete with some errors.  You may wish to scroll
through the debugging messages on VTY1 with the scroll-lock feature.
You can also choose "No" at the next prompt and go back into the
installation menus to retry whichever operations have failed.

                                 [ OK ]
....

Het bovenstaande bericht verschijnt omdat er niets is geïnstalleerd. Kies kbd:[Enter] om terug te gaan naar het menu Main Installation en de installatie te verlaten.

[[install-post]]
== Instellingen na de installatie

Na het installeren volgt de instelling van diverse opties. Een optie kan worden ingesteld door opnieuw naar de instellingenopties te gaan voordat de nieuwe FreeBSD-installatie wordt gestart of door na de installatie `sysinstall` te gebruiken en te kiezen voor [.guimenuitem]#Configure#.

[[inst-network-dev]]
=== Netwerkapparaten instellen

Als al eerder PPP is ingesteld voor een FTP-installatie verschijnt het volgende scherm niet en kan dit onderdeel worden geïnstalleerd zoals eerder beschreven.

Gedetailleerde informatie over lokale netwerken (LAN's) en het instellen van FreeBSD als een gateway of router staat in het hoofdstuk crossref:advanced-networking[advanced-networking,Netwerken voor Gevorderden].

[source,bash]
....
                      User Confirmation Requested
   Would you like to configure any Ethernet or PPP network devices?

                             [ Yes ]   No
....

Kies btn:[yes] en druk op kbd:[Enter] om een netwerkapparaat in te stellen. Kies anders btn:[no] om verder te gaan.

[[ed-config1]]
.Ethernetapparaat kiezen
image::ed0-conf.png[]

Kies de in te stellen interface met de pijltjestoetsen en druk op kbd:[Enter].

[source,bash]
....
                      User Confirmation Requested
       Do you want to try IPv6 configuration of the interface?

                              Yes   [ No ]
....

In dit gesloten lokale netwerk was het huidige type Internet protocol (IPv4) toereikend en dus werd btn:[no] geselecteerd met de pijltjestoetsen en kon met kbd:[Enter] verder gegaan worden.

Als er verbinding is met een bestaand IPv6 netwerk met een RA server, kies dan btn:[yes] en druk op kbd:[Enter]. Zoeken naar RA servers duurt een paar seconden.

[source,bash]
....
                             User Confirmation Requested
        Do you want to try DHCP configuration of the interface?

                              Yes   [ No ]
....

Kies btn:[no] met de pijltjestoetsen en druk op kbd:[Enter] als DHCP (Dynamic Host Configuration Protocol) niet nodig is.

btn:[yes] kiezen start dhclient op en als het goed gaat stelt het netwerk zichzelf in. In crossref:network-servers[network-dhcp,Automatisch netwerk instellen (DHCP)] staat meer informatie.

Het volgende scherm met netwerkinstellingen toont de instellingen van een Ethernetapparaat van een systeem dat als gateway voor een lokaal netwerk functioneert.

[[ed-config2]]
.Netwerkinstellingen voor _ed0_
image::ed0-conf2.png[]

Met kbd:[Tab] kunnen de velden geselecteerd worden waarna de juiste informatie ingevuld kan worden:

Host::
De "fully-qualified hostname", in dit geval `k6-2.example.com`.

Domain::
De naam van het domein waar toe de machine behoort, in dit geval `example.com`.

IPv4 Gateway::
Het IP-adres van de host die pakketjes doorstuurt naar niet-lokale bestemmingen. Dit moet ingesteld worden als een machine een onderdeel is van netwerk. _Laat dit veld leeg_ als de machine de gateway is naar het Internet voor het netwerk. De IPv4 Gateway staat ook bekend onder de naam default gateway of default route.

Name server::
Het IP-adres van de lokale DNS server. Er is op dit gesloten lokale netwerk geen DNS server, dus wordt het IP-adres van de DNS server van de provider gebruikt (`208.163.10.2`).

IPv4 Address::
Het IP-adres dat gebruikt moet worden voor deze interface (`192.168.0.1`).

Netmask::
Het adresblok dat gebruikt wordt door het lokale netwerk is `192.168.0.0` - `192.168.255.255` met netmasker `255.255.255.0`.

Extra options to ifconfig::
Elke interface-specifieke optie voor `ifconfig` die toegevoegd moet worden. In dit geval waren er geen.

Gebruik kbd:[Tab] om btn:[OK] te selecteren als de instellingen gereed zijn en druk op kbd:[Enter].

[source,bash]
....
                      User Confirmation Requested
        Would you like to Bring the ed0 interface up right now?

                             [ Yes ]   No
....

Het kiezen van btn:[yes] en het drukken op kbd:[Enter] maakt een machine onderdeel van een netwerk en daarna is hij klaar voor gebruik. Dit heeft echter nog weinig zin, omdat de machine nog opnieuw opgestart moet worden.

[[gateway]]
=== Als gateway instellen

[source,bash]
....
                       User Confirmation Requested
       Do you want this machine to function as a network gateway?

                              [ Yes ]    No
....

Als de machine gateway voor een lokaal netwerk is en pakketjes doorstuurt naar andere machines kies dan btn:[yes] en druk op kbd:[Enter]. Als de machine alleen host op een netwerk is, kies dan btn:[no] en druk op kbd:[Enter] om verder te gaan.

[[inetd-services]]
=== Internetdiensten instellen

[source,bash]
....
                      User Confirmation Requested
Do you want to configure inetd and the network services that it provides?

                               Yes   [ No ]
....

Door het selecteren van btn:[no] worden diverse diensten als telnetd niet aangezet. Dat betekent dat gebruikers op afstand niet met telnet bij de machine kunnen. Lokale gebruikers kunnen wel met telnet naar andere machines.

Deze diensten kunnen na de installatie worden aangezet door [.filename]#/etc/inetd.conf# te wijzigen met een editor naar keuze. In crossref:network-servers[network-inetd-overview,Overzicht] staat meer informatie.

Selecteer btn:[yes] om deze diensten in te stellen tijdens de installatie. Er wordt een extra bevestiging getoond:

[source,bash]
....
                      User Confirmation Requested
The Internet Super Server (inetd) allows a number of simple Internet
services to be enabled, including finger, ftp and telnetd.  Enabling
these services may increase risk of security problems by increasing
the exposure of your system.

With this in mind, do you wish to enable inetd?

                             [ Yes ]   No
....

Selecteer btn:[yes] om verder te gaan.

[source,bash]
....
                      User Confirmation Requested
inetd(8) relies on its configuration file, /etc/inetd.conf, to determine
which of its Internet services will be available.  The default FreeBSD
inetd.conf(5) leaves all services disabled by default, so they must be
specifically enabled in the configuration file before they will
function, even once inetd(8) is enabled.  Note that services for
IPv6 must be separately enabled from IPv4 services.

Select [Yes] now to invoke an editor on /etc/inetd.conf, or [No] to
use the current settings.

                             [ Yes ]   No
....

Het selecteren van btn:[yes] geeft de mogelijkheid diensten toe te voegen door het teken `#` aan het begin van een regel te verwijderen.

[[inetd-edit]]
.[.filename]#inetd.conf# bewerken
image::edit-inetd-conf.png[]

Druk na het toevoegen van de gewenste diensten, op kbd:[Esc] om het menu te krijgen waarin de wijzigingen opgeslagen kunnen worden en de editor verlaten kan worden.

[[ssh-login]]
=== SSH-login aanzetten

[source,bash]
....
                      User Confirmation Requested
                 Would you like to enable SSH login?
                          Yes        [  No  ]
....

Het kiezen van btn:[yes] zal man:sshd[8] aanzetten, het daemon-programma voor OpenSSH. Dit zal beveiligde toegang op afstand tot uw machine toestaan. Zie voor meer informatie over OpenSSH crossref:security[openssh,OpenSSH].

[[ftpanon]]
=== Anonieme FTP

[source,bash]
....
                      User Confirmation Requested
 Do you want to have anonymous FTP access to this machine?

                              Yes    [ No ]
....

[[deny-anon]]
==== Anonieme FTP weigeren

Het selecteren van de standaardwaarde btn:[no] en het drukken op kbd:[Enter] stelt gebruikers met toegang en een wachtwoord nog steeds in staat om de machine via FTP te benaderen.

[[ftpallow]]
==== Anonieme FTP toestaan

Als anonieme FTP wordt toegestaan kan iedereen de machine met FTP benaderen. De gevolgen voor de veiligheid van de machine moeten overwogen worden voordat deze optie wordt ingeschakeld. Meer informatie over beveiliging staat in crossref:security[security,	Beveiliging].

Selecteer met de pijltjestoetsen btn:[yes] om anonieme FTP toe te staan en druk op kbd:[Enter]. Een aanvullende bevestiging zal verschijnen:

[source,bash]
....
                       User Confirmation Requested
Anonymous FTP permits un-authenticated users to connect to the system
FTP server, if FTP service is enabled.  Anonymous users are
restricted to a specific subset of the file system, and the default
configuration provides a drop-box incoming directory to which uploads
are permitted.  You must separately enable both inetd(8), and enable
ftpd(8) in inetd.conf(5) for FTP services to be available.  If you
did not do so earlier, you will have the opportunity to enable inetd(8)
again later.

If you want the server to be read-only you should leave the upload
directory option empty and add the -r command-line option to ftpd(8)
in inetd.conf(5)

Do you wish to continue configuring anonymous FTP?

                         [ Yes ]         No
....

Dit bericht informeert u dat de FTP-dienst ook in [.filename]#/etc/inetd.conf# aangezet moet worden als u anonieme FTP-verbindingen wilt toestaan, zie <<inetd-services>>. Kies btn:[yes] en druk op kbd:[Enter] om verder te gaan; het volgende scherm zal verschijnen:

[[anon-ftp2]]
.Standaard anonieme FTP instellingen
image::ftp-anon1.png[]

Gebruik kbd:[Tab] om de informatievelden te selecteren en de juiste informatie in te vullen:

UID::
De gebruikers-ID die u aan de anonieme FTP-gebruiker wilt toekennen. Alle geuploade bestanden zullen eigendom zijn van deze ID.

Group::
In welke groep de anonieme FTP-gebruiker dient te zitten.

Comment::
Een string die deze gebruiker in [.filename]#/etc/passwd# beschrijft.

FTP Root Directory::
Waar de bestanden beschikbaar voor anonieme FTP worden bewaard.

Upload Subdirectory::
Waar bestanden geupload door anonieme FTP-gebruikers naar toe gaan.

De startmap voor FTP wordt standaard ingesteld op [.filename]#/var#. Als daar niet genoeg ruimte is voor de geschatte FTP-wensen dan kan [.filename]#/usr# gebruikt worden door de waarde FTP root directory op [.filename]#/usr/ftp# in te stellen.

Druk op kbd:[Enter] om verder te gaan als de instellingen gemaakt zijn.

[source,bash]
....
                          User Confirmation Requested
         Create a welcome message file for anonymous FTP users?

                              [ Yes ]    No
....

Na het kiezen van btn:[yes] en op kbd:[Enter] drukken opent zich een editor waarin het welkomstbericht bewerkt kan worden.

[[anon-ftp4]]
.FTP welkomstbericht bewerken
image::ftp-anon2.png[]

De bovenstaande editor is `ee`. Volg de instructies om het bericht te wijzigen of wijzig het bericht later door gebruik te maken van een editor naar keuze. Let op de bestandsnaam en lokatie onderaan het scherm van de editor.

Druk op kbd:[Esc] en een pop-up menu verschijnt met als standaardoptie [.guimenuitem]#a) leave editor#. Druk op kbd:[Enter] om de editor te verlaten en verder te gaan. Druk nog een keer op kbd:[Enter] om de eventuele wijzigingen te bewaren.

[[nfsconf]]
=== Network File System instellen

Network File System (NFS) maakt het mogelijk bestanden te delen over een netwerk. Een machine kan worden ingesteld als server, client of beide. In crossref:network-servers[network-nfs,Netwerkbestandssysteem (NFS)] staat meer informatie.

[[nsf-server-options]]
==== NFS Server

[source,bash]
....
                       User Confirmation Requested
 Do you want to configure this machine as an NFS server?

                              Yes    [ No ]
....

Kies btn:[no] als er geen noodzaak is voor een Network File System server en druk op kbd:[Enter].

Na het kiezen van btn:[yes] wordt een bericht getoond dat aangeeft dat er een betand [.filename]#exports# moet worden gemaakt.

[source,bash]
....
                               Message
Operating as an NFS server means that you must first configure an
/etc/exports file to indicate which hosts are allowed certain kinds of
access to your local filesystems.
Press [Enter] now to invoke an editor on /etc/exports
                               [ OK ]
....

Druk op kbd:[Enter] om verder te gaan. Een editor start om [.filename]#exports# te maken en te bewerken.

[[nfs-server-edit]]
.[.filename]#exports# bewerken
image::nfs-server-edit.png[]

Volg de instructies om een te exporteren bestandssysteem toe te voegen of doe het later met een editor naar keuze. Let op de bestandsnaam en lokatie onderaan het scherm van de editor.

Druk op kbd:[Esc] en een pop-up menu verschijnt met als standaardoptie [.guimenuitem]#a) leave editor#. Druk op kbd:[Enter] om de editor te verlaten en verder te gaan.

[[nfs-client-options]]
==== NFS Client

De NFS client maakt het mogelijk om NFS servers te benaderen.

[source,bash]
....
                       User Confirmation Requested
 Do you want to configure this machine as an NFS client?

                              Yes   [ No ]
....

Kies met de pijltjestoetsen de optie btn:[yes] of btn:[no] en druk op kbd:[Enter].

[[console]]
=== Systeemconsole instellen

Er is een aantal opties beschikbaar om de systeemconsole in aan te passen.

[source,bash]
....
                      User Confirmation Requested
       Would you like to customize your system console settings?

                              [ Yes ]  No
....

Om de opties te bekijken en in te stellen, kies btn:[yes] en druk op kbd:[Enter].

[[saver-options]]
.Systeemconsole instellingen
image::console-saver1.png[]

Een gebruikelijke optie is de schermbeveiliging. Gebruik de pijltjestoetsen om [.guimenuitem]#Saver# te selecteren en druk op kbd:[Enter].

[[saver-select]]
.Schermbeveiligingsopties
image::console-saver2.png[]

Kies met de pijltjestoetsen de gewenste schermbeveiliging en druk op kbd:[Enter]. Het instellingenmenu System Console verschijnt weer.

De standaard activeringstijd is 300 seconden. Kies voor het wijzigen van de activeringstijd weer [.guimenuitem]#Saver#. Kies in het optiemenu Screen Saver met de pijltjestoetsen [.guimenuitem]#Timeout# en druk op kbd:[Enter]. Een pop-up verschijnt:

[[saver-timeout]]
.Schermbeveiliging activeringstijd
image::console-saver3.png[]

Wijzig de waarde, selecteer btn:[OK] en druk op kbd:[Enter] om terug te gaan naar het instellingenmenu System Console.

[[saver-exit]]
.Systeemconsole instellingen verlaten
image::console-saver4.png[]

Met het selecteren van [.guimenuitem]#Exit# en drukken op kbd:[Enter] kan verdergegaan worden met de andere instellingen.

[[timezone]]
=== Tijdzone instellen

Het instellen van de tijdzone van een machine maakt het mogelijk om automatisch correcties door te voeren voor regionale tijdswijzigingen en het juist uitvoeren van andere tijdzone-afhankelijke functies.

Het voorbeeld toont een machine die staat in de oostelijke tijdzone van de Verenigde Staten. De keuze voor een specifiek systeem hangt af van de geografische locatie.

[source,bash]
....
                      User Confirmation Requested
          Would you like to set this machine's time zone now?

                            [ Yes ]   No
....

Selecteer btn:[yes] en druk op kbd:[Enter] om de tijdzone in te stellen.

[source,bash]
....
                       User Confirmation Requested
 Is this machine's CMOS clock set to UTC? If it is set to local time
 or you don't know, please choose NO here!

                              Yes   [ No ]
....

Kies btn:[yes] of btn:[no] afhankelijk van de instellingen van de klok van de machine en druk op kbd:[Enter].

[[set-timezone-region]]
.Regio instellen
image::timezone1.png[]

Kies met de pijltjestoetsen de juiste regio en druk op kbd:[Enter].

[[set-timezone-country]]
.Land kiezen
image::timezone2.png[]

Kies met de pijltjestoetsen het juiste land en druk op kbd:[Enter].

[[set-timezone-locality]]
.Tijdzone kiezen
image::timezone3.png[]

Kies met de pijltjestoetsen de juiste tijdzone en druk op kbd:[Enter].

[source,bash]
....
                            Confirmation
            Does the abbreviation 'EDT' look reasonable?

                            [ Yes ]   No
....

Bevestig dat de afkorting van de tijdzone juist is. Als die er goed uit ziet, druk dan op kbd:[Enter] om verder te gaan met de overige instellingen.

[[linuxcomp]]
=== Linux compatibiliteit

[NOTE]
====
Dit gedeelte is alleen van toepassing op installaties van FreeBSD 7._X_, als u FreeBSD 8._X_ installeert wordt dit scherm niet getoond.
====

[source,bash]
....
                      User Confirmation Requested
          Would you like to enable Linux binary compatibility?

                            [ Yes ]   No
....

Selecteer btn:[yes] en druk op kbd:[Enter] als de mogelijkheid om Linux software te draaien op FreeBSD geactiveerd moet worden. Deze optie installeert de voor Linux compatibiliteit benodigde pakketten.

Als via FTP wordt geïnstalleerd, dan moet de machine verbonden zijn met Internet. Soms heeft een FTP-site niet alle distributies, zoals de Linux comptabiliteit, beschikbaar. Zonodig kan deze ook later geïnstalleerd worden.

[[mouse]]
=== Muisinstellingen

Deze optie geeft de mogelijkheid om tekst te kopiëren en te plakken in de console en programma's met een 3-knops muis. Als een 2-knops muis wordt gebruikt, ga dan naar de hulppagina man:moused[8] na de installatie voor de details over het emuleren van een 3-knops muis. Dit voorbeeld toont een niet-USB muisinstelling (zoals een PS/2 of seriële poort muis):

[source,bash]
....
                      User Confirmation Requested
         Does this system have a PS/2, serial, or bus mouse?

                            [ Yes ]    No 
....

Selecteer btn:[yes] voor een PS/2-, seriële of busmuis of btn:[no] voor een USB-muis en druk op kbd:[Enter].

[[mouse-protocol]]
.Muisprotocoltype selecteren
image::mouse1.png[]

Gebruik de pijltjestoetsen om [.guimenuitem]#Type# te selecteren en druk op kbd:[Enter].

[[set-mouse-protocol]]
.Muisprotocol kiezen
image::mouse2.png[]

De muis in dit voorbeeld is een PS/2-muis, dus de standaardoptie [.guimenuitem]#Auto# was van toepassing. Selecteer met de pijltjestoetsen een andere optie om het protocol te wijzigen. Zorg ervoor dat btn:[OK] geselecteerd is en druk op kbd:[Enter] om dit menu te verlaten.

[[config-mouse-port]]
.Muispoort instellen
image::mouse3.png[]

Gebruik de pijltjestoetsen om [.guimenuitem]#Port# te selecteren en druk op kbd:[Enter].

[[set-mouse-port]]
.Muispoort instellen
image::mouse4.png[]

Dit systeem heeft een PS/2 muis, dus de standaardoptie [.guimenuitem]#PS/2# was van toepassing. Gebruik de pijltjestoetsen en druk op kbd:[Enter] om de poort te wijzigen.

[[test-daemon]]
.Muisdaemon inschakelen
image::mouse5.png[]

Gebruik tenslotte de pijltjestoetsen om [.guimenuitem]#Enable# te selecteren en druk op kbd:[Enter] om de muisdaemon aan te zetten en te testen.

[[test-mouse-daemon]]
.Het testen van de muisdaemon
image::mouse6.png[]

Beweeg de muis over het scherm en controleer of de cursor op de juiste manier reageert. Als dat in orde is, selecteer dan btn:[yes] en druk op kbd:[Enter]. Als het niet goed gaat, dan is de muis niet goed ingesteld. Kies dan btn:[no] en probeer het met andere instellingen.

Kies met de pijltjestoetsen [.guimenuitem]#Exit# en druk op kbd:[Enter] om terug te gaan naar het instellingenmenu.

[[packages]]
=== Pakketten installeren

Pakketten zijn voorgebouwde binaire bestanden en zijn een gemakkelijke manier om software te installeren.

De installatie van één pakket wordt als voorbeeld getoond. Er kunnen nog meer pakketten geïnstalleerd worden als dat wenselijk is. Na de installatie kan `sysinstall` gebruikt worden om extra pakketten te installeren.

[source,bash]
....
                     User Confirmation Requested
 The FreeBSD package collection is a collection of hundreds of
 ready-to-run applications, from text editors to games to WEB servers
 and more. Would you like to browse the collection now?

                            [ Yes ]   No
....

Na het kiezen van btn:[yes] en drukken op kbd:[Enter] verschijnt het menu pakketkeuze:

[[package-category]]
.Pakketcategorie kiezen
image::pkg-cat.png[]

Alleen pakketten die aanwezig zijn op het huidige installatiemedium zijn beschikbaar voor installatie op dat moment.

Alle beschikbare pakketten worden getoond na het selecteren van [.guimenuitem]#All#, maar er kan ook een bepaalde categorie geselecteerd worden. De categorie kan gekozen worden met de pijltjestoetsen en door te bevestigen met kbd:[Enter].

Dan wordt een menu getoond met alle beschikbare pakketten binnen de gemaakte selectie:

[[package-select]]
.Pakketten selecteren
image::pkg-sel.png[]

De shell bash is geselecteerd. Er kunnen zoveel pakketten als wenselijk gekozen worden door ze te selecteren en op de spatiebalk te drukken. Een korte beschrijving van elk pakket verschijnt in de linker benedenhoek van het scherm.

Door te drukken op kbd:[Tab] wordt gewisseld tussen het laatst geselecteerde pakket, btn:[OK] en btn:[Cancel].

Druk na het selecteren van pakketten voor installatie één keer op kbd:[Tab] om naar btn:[OK] te gaan en druk op kbd:[Enter] om terug te gaan naar het menu pakketkeuze.

De linker- en rechterpijltjestoets wisselen eveneens tussen btn:[OK] en btn:[Cancel]. Die manier kan ook gebruikt worden om btn:[OK] te kiezen en op kbd:[Enter] te drukken om terug te gaan naar het menu pakketkeuze.

[[package-install]]
.Pakketten installeren
image::pkg-install.png[]

Gebruik kbd:[Tab] en de pijltjestoetsen om btn:[Install] te selecteren en druk op kbd:[Enter]. Daarna moet de pakketinstallatie bevestigd worden:

[[package-install-confirm]]
.Pakketinstallatie bevestigen
image::pkg-confirm.png[]

Het selecteren van btn:[OK] en drukken op kbd:[Enter] start de installatie. Er worden installatieberichten getoond tot alle installaties zijn afgerond. Maak een notitie van eventuele foutmeldingen.

Na het installeren van pakketten gaat het maken van de laatste instellingen verder. Als er geen pakketten geselecteerd zijn kan om terug te gaan naar het menu toch btn:[Install] gekozen worden.

[[addusers]]
=== Gebruikers en groepen toevoegen

Er moet minstens één gebruiker toegevoegd worden tijdens de installatie, zodat het systeem gebruikt kan worden zonder als `root` aan te hoeven melden. De rootpartitie is in het algemeen klein en het draaien van programma's als `root` kan de schijfruimte snel vullen. Een groter gevaar wordt hieronder aangegeven:

[source,bash]
....
                     User Confirmation Requested
 Would you like to add any initial user accounts to the system? Adding
 at least one account for yourself at this stage is suggested since
 working as the "root" user is dangerous (it is easy to do things which
 adversely affect the entire system).

                            [ Yes ]   No
....

Kies btn:[yes] en druk op kbd:[Enter] om verder te gaan met het toevoegen van een gebruiker.

[[add-user2]]
.Gebruiker kiezen
image::adduser1.png[]

Selecteer [.guimenuitem]#User# met de pijltjestoetsen en druk op kbd:[Enter].

[[add-user3]]
.Gebruikersinformatie toevoegen
image::adduser2.png[]

De volgende beschrijvingen verschijnen in het onderste deel van het scherm als opties zijn geselecteerd met kbd:[Tab] en kunnen behulpzaam zijn bij het invullen van de benodigde informatie:

Login ID::
De aanmeldnaam van de nieuwe gebruiker (verplicht).

UID::
Het numerieke ID van de gebruiker (laat leeg voor automatische toewijzing).

Group::
De naam van de aanmeldgroep van de gebruiker (laat leeg voor automatische keuze).

Password::
Het wachtwoord voor de gebruiker (vul dit zorgvuldig in!).

Full name::
De volledige naam van de gebruiker (commentaar).

Member groups::
De groepen waar de gebruiker in zit (waar hij toegangsrechten voor krijgt).

Home directory::
De locatie van de thuismap van de gebruiker (laat leeg voor de standaardwaarde).

Login shell::
De aanmeldshell voor de gebruiker (laat leeg voor de standaardwaarde, zoals [.filename]#/bin/sh#).

De aanmeldshell is hier veranderd van [.filename]#/bin/sh# in [.filename]#/usr/local/bin/bash# om de shell bash te gebruiken die eerder is geïnstalleerd als pakket. Probeer geen shell op te geven die niet bestaat, want dan kan niet aangemeld worden. De meest gebruikte shell in de BSD-wereld is de C shell, die aangegeven kan worden als [.filename]#/bin/tcsh#.

De gebruiker is ook toegevoegd aan de groep `wheel` om het mogelijk te maken superuser te worden met `root`-rechten.

Druk op btn:[OK] als de instellingen zijn gemaakt om naar het menu `User and Group Management` terug te gaan:

[[add-user4]]
.Gebruikers en groepbeheer
image::adduser3.png[]

Op dit moment kunnen ook groepen worden toegevoegd als de specifieke behoeften bekend zijn. Dit kan ook door `sysinstall` (`/stand/sysinstall` in FreeBSD versies ouder dan 5.2) na de installatie te gebruiken.

Kies na het toevoegen van gebruikers [.guimenuitem]#Exit# met de pijltjestoetsen en druk op kbd:[Enter] om verder te gaan met de installatie.

[[rootpass]]
=== `root` wachtwoord instellen

[source,bash]
....
                        Message
 Now you must set the system manager's password.
 This is the password you'll use to log in as "root".

                         [ OK ]

               [ Press enter or space ]
....

Druk op kbd:[Enter] om het `root` wachtwoord in te stellen.

Het wachtwoord moet twee keer gelijk ingegeven worden. Het is vast overbodig om op te merken dat het belangrijk is zorg te dragen voor een manier om het wachtwoord terug te vinden in het geval het wordt vergeten. Tijdens de ingave van het wachtwoord wordt dit niet weergegeven en er worden ook geen sterretjes getoond.

[source,bash]
....
Changing local password for root.
New password:
Retype new password :
....

De installatie gaat verder als het wachtwoord succesvol is ingevoerd.

[[exit-inst]]
=== Install verlaten

Als het nodig is om extra netwerkapparaten toe te voegen of andere instellingen te maken, dan kan dat nu of later met `sysinstall`.

[source,bash]
....
                     User Confirmation Requested
 Visit the general configuration menu for a chance to set any last
 options?

                              Yes   [ No ]
....

Selecteer btn:[no] met de pijltjestoetsen en druk op kbd:[Enter] om terug te gaan naar het menu Main Installation.

[[final-main]]
.Install afsluiten
image::mainexit.png[]

Selecteer btn:[X Exit Install] met de pijltjestoetsen en druk op kbd:[Enter]. Er wordt om bevestiging gevraagd:

[source,bash]
....
                     User Confirmation Requested
 Are you sure you wish to exit? The system will reboot.

                            [ Yes ]   No
....

Selecteer btn:[yes]. Als u van het CD-ROM-station opstart zal de volgende boodschap u eraan herinneren de schijf te verwijderen:

[source,bash]
....
                    Message
 Be sure to remove the media from the drive.

                    [ OK ]
           [ Press enter or space ]
....

Het CD-ROM-station is geblokkeerd totdat de machine opnieuw wordt opgestart, dan kan de schijf snel uit het station worden gehaald. Druk op btn:[OK] om opnieuw op te starten.

Het systeem start op, dus let op eventuele foutberichten die getoond worden, zie <<freebsdboot>> voor meer details.

[[network-services]]
=== Extra netwerkdiensten instellen

Het instellen van netwerkdiensten kan afschrikwekkend zijn voor nieuwe gebruikers zonder (voldoende) voorkennis op dit gebied. Netwerken, inclusief Internet, is van levensbelang voor alle moderne besturingssystemen, inclusief FreeBSD. Als gevolg daarvan is het handig enig begrip te hebben van de uitgebreide netwerkmogelijkheden van FreeBSD. Door dit tijdens de installatie te doen hebben gebruikers in elk geval enige kennis van de diverse netwerkdiensten die hen ter beschikking staan.

Netwerkdiensten zijn programma's die invoer accepteren vanaf het netwerk. Al het mogelijke is gedaan om er voor te zorgen dat deze programma's niets "schadelijks" doen. Helaas zijn programmeurs niet perfect en in de loop van de tijd zijn er fouten gevonden in netwerkdiensten die door aanvallers zijn uitgebuit om slechte dingen te doen. Het is belangrijk alleen netwerkdiensten aan te zetten die nodig zijn. Bij twijfel kan een netwerkdienst het beste niet ingeschakeld worden totdat duidelijk is dat de dienst wél nodig is. Diensten kunnen later alsnog ingeschakeld worden door sysinstall nog een keer te draaien of door middel van de mogelijkheden van het bestand [.filename]#/etc/rc.conf#.

Het kiezen van de optie menu:Networking[] toont het volgende menu:

[[network-configuration]]
.Netwerkinstellingen - bovenste opties
image::net-config-menu1.png[]

De eerste optie, [.guimenuitem]#Interfaces#, is al behandeld in <<inst-network-dev>>, dus die wordt overgeslagen.

Kies [.guimenuitem]#AMD# voor het toevoegen van ondersteuning voor het BSD hulpprogramma voor automatisch mounten. Dit wordt meestal gebruikt in combinatie met het NFS protocol (zie verderop) voor het automatisch mounten van externe bestandssystemen. Hier zijn geen speciale instellingen nodig.

De volgende optie is [.guimenuitem]#AMD Flags#. Als deze optie wordt selecteert komt er een pop-up menu waarin de specifieke AMD vlaggen kunnen worden ingesteld. Het menu bevat al een lijst standaardopties:

[source,bash]
....
-a /.amd_mnt -l syslog /host /etc/amd.map /net /etc/amd.map
....

De optie `-a` bepaalt de standaard mountlocatie die is hier ingesteld op [.filename]#/.amd_mnt#. De optie `-l` bepaalt het standaardbestand voor [.filename]#log#, maar als `syslogd` wordt gebruikt, dan worden alle acties naar de systeemlogdaemon gestuurd. De map [.filename]#/host# wordt gebruikt om een geëxporteerd bestandssysteem van een externe host te mounten, terwijl de map [.filename]#/net# wordt gebruikt om een geëxporteerd bestandssysteem van een IP-adres te mounten. Het bestand [.filename]#/etc/amd.map# bepaalt de standaardopties voor AMD exports.

De optie [.guimenuitem]#Anon FTP# staat anonieme FTP verbindingen toe. Kies deze optie om van een machine een anonieme FTP server te maken. Hierbij zijn de beveiligingsimplicaties van belang. Er wordt een volgend menu getoond om de beveiligingsrisico's en verdere instellingen te verklaren.

Het instellingenmenu [.guimenuitem]#Gateway# maakt van de machine een gateway, zoals eerder beschreven. Hier kan de optie [.guimenuitem]#Gateway# ook gebruikt worden om de optie uit te zetten als die eerder in de installatie per ongeluk is aangezet.

De optie [.guimenuitem]#Inetd# kan gebruikt worden om de man:inetd[8] daemon in te stellen of helemaal uit te schakelen, zoals boven beschreven.

De optie [.guimenuitem]#Mail# kan gebruikt worden om de standaard MTA (Mail Transfer Agent) van het systeem in te stellen. Hiervoor wordt het volgende menu gebruikt:

[[mta-selection]]
.Standaard MTA kiezen
image::mta-main.png[]

Hier kan gekozen worden welke MTA moet worden geïnstalleerd en gebruikt. Een MTA is niets meer dan een mailserver die mail aflevert bij gebruikers op het systeem of op Internet.

Het kiezen van [.guimenuitem]#Sendmail# installeert de populaire server sendmail, die de standaard is voor FreeBSD. De optie [.guimenuitem]#Sendmail local# maakt van sendmail de standaard MTA, maar zet de mogelijkheid om mail te ontvangen vanaf het Internet uit. De andere opties, [.guimenuitem]#Postfix# en [.guimenuitem]#Exim# werken net zo als [.guimenuitem]#Sendmail#. Allebei leveren ze mail af. Sommige gebruikers geven de voorkeur aan deze alternatieven boven de sendmailMTA.

Na het kiezen van een MTA of de keuze geen MTA te installeren, verschijnt het menu netwerkinstellingen met als volgende optie [.guimenuitem]#NFS client#.

De optie [.guimenuitem]#NFS client# stelt het systeem in om te communiceren met een server via NFS. Een NFS server stelt bestandssystemen beschikbaar aan andere machines via het NFS protocol. Als de te installeren machine een op zichzelf staande machine is, dan kan deze optie uitgeschakeld blijven. Het kan zijn dat het systeem later meer instellingen nodig heeft. In crossref:network-servers[network-nfs,Netwerkbestandssysteem (NFS)] staat meer informatie over client- en serverinstellingen.

De volgende optie is [.guimenuitem]#NFS server#, die het mogelijk maakt een systeem in te stellen als NFS server. Deze optie voegt de nodige informatie toe om de dienst RPC, "remote procedure call", op te starten. RPC wordt gebruikt om de verbindingen tussen hosts en programma's te coördineren.

Daarna volgt de optie [.guimenuitem]#Ntpdate# die de tijdsynchronisatie afhandelt. Als deze wordt geselecteerd verschijnt het volgende menu:

[[Ntpdate-config]]
.Ntpdate instellingen
image::ntp-config.png[]

Kies uit dit menu de server die het dichtst bij het te installeren systeem staat. Door het kiezen van een server in de buurt is de synchronisatie preciezer omdat een verder gelegen server meer vertraging in de verbinding kan hebben.

De volgende optie is de PCNFSD selectie. Deze optie installeert het pakket package:net/pcnfsd[] uit de Portscollectie. Dat is een handig hulpprogramma dat het mogelijk maakt om aan te melden bij NFS met systemen die zelf geen aanmeldsysteem hebben, zoals het besturingssysteem MS-DOS(R) van Microsoft(R).

Door naar beneden te scrollen in het hoofdmenu worden de onderstaande opties zichtbaar:

[[Network-configuration-cont]]
.Netwerkinstellingen - onderste opties
image::net-config-menu2.png[]

De hulpprogramma's man:rpcbind[8], man:rpc.statd[8] en man:rpc.lockd[8] worden allemaal gebruikt voor "Remote Procedure Calls" (RPC). Het hulpprogramma `rpcbind` beheert de communicatie tussen NFS servers en clients en is noodzakelijk om NFS servers correct te laten werken. De daemon rpc.statd communiceert met de daemon rpc.statd op andere machines om statusinformatie te leveren. De gerapporteerde status wordt gewoonlijk bijgehouden in het bestand [.filename]#/var/db/statd.status#. De volgende optie in de lijst is [.guimenuitem]#rpc.lockd# die, mits geselecteerd, bestandslockdiensten mogelijk maakt. Dit wordt meestal gebruikt door rpc.statd om bij te houden welke hosts vragen om bestanden te locken en hoe vaak ze dat doen. Hoewel deze laatste twee opties fantastisch zijn om fouten om te sporen, zijn ze niet noodzakelijk voor NFS servers en clients om correct te werken.

De dan volgende optie in de lijst is [.guimenuitem]#Routed#, een routeringsdaemon. Het hulpprogramma man:routed[8] beheert netwerkrouteringstabellen, ontdekt "multicast" routers en stelt op verzoek kopieën van de routeringstabellen ter beschikking aan fysiek verbonden apparaten. Dit wordt vooral gebruikt door machines die dienst doen als gateway voor het lokale netwerk. Na het selecteren van deze optie verschijnt een menu waarin naar de standaardlocatie van het hulpprogramma wordt gevraagd. De standaardlocatie is al gedefiniëerd en kan met kbd:[Enter] worden geactiveerd. Dan komt er een ander menu dat vraagt om de opties die doorgegeven moeten worden aan routed op te geven. De standaard is `-q` en die staat al op het scherm.

Dan volgt de optie [.guimenuitem]#Rwhod# die, als geselecteerd, de daemon man:rwhod[8] inschakelt bij het opstarten. Het hulpprogramma `rwhod` zendt periodiek systeemberichten uit over het netwerk of verzamelt die in de modus "consumer". Meer informatie staat in de hulppagina's man:ruptime[1] en man:rwho[1].

De één na laatste optie in de lijst is de daemon man:sshd[8]. Dat is de "secure shell server" van OpenSSH en deze wordt sterk aangeraden boven de standaardservers telnet en FTP. De server sshd wordt gebruikt om een veilige verbinding op te zetten van de ene computer naar de andere door een versleutelde verbinding te gebruiken.

Tenslotte is er de optie [.guimenuitem]#TCP Extensions#. Dit schakelt TCP uitbreidingen in zoals gedefiniëerd in RFC 1323 en RFC 1644. Hoewel dit op veel machines de verbindingen kan versnellen, kan het ook de oorzaak zijn van het wegvallen van sommige verbindingen. Het wordt niet aangeraden voor servers, maar voor alleenstaande machines kan het voordelig zijn.

Nu de netwerkmogelijkheden zijn ingesteld kan het menu via [.guimenuitem]#Exit# verlaten worden en doorgegaan worden met het instellen in de volgende sectie.

[[freebsdboot]]
=== FreeBSD opstarten

[[freebsdboot-i386]]
==== FreeBSD/i386 opstarten

Als alles goed is gegaan komen er berichten over het scherm rollen en komt dit uit bij de aanmeldprompt. De inhoud van de berichten kan bekeken worden door te drukken op kbd:[Scroll-Lock] en dan met kbd:[PgUp] en kbd:[PgDn] door de tekst heen te lopen. Druk weer op kbd:[Scroll-Lock] om terug te gaan naar de prompt.

Het kan zijn dat het totale bericht niet getoond kan worden (beperking van de buffer). Dan kunnen de berichten later bekeken worden op de commandoregel door na het aanmelden `dmesg` in te geven op de prompt.

Meld aan met de gebruikersnaam en het wachtwoord die zijn aangemaakt tijdens de installatie (in dit voorbeeld `rpratt`). Vermijd het aanmelden als `root`, behalve als het noodzakelijk is.

Gebruikelijke opstartberichten (versie-informatie verwijderd):

[source,bash]
....
Copyright (c) 1992-2002 The FreeBSD Project.
Copyright (c) 1979, 1980, 1983, 1986, 1988, 1989, 1991, 1992, 1993, 1994
        The Regents of the University of California. All rights reserved.

Timecounter "i8254"  frequency 1193182 Hz
CPU: AMD-K6(tm) 3D processor (300.68-MHz 586-class CPU)
  Origin = "AuthenticAMD"  Id = 0x580  Stepping = 0
  Features=0x8001bf<FPU,VME,DE,PSE,TSC,MSR,MCE,CX8,MMX>
  AMD Features=0x80000800<SYSCALL,3DNow!>
real memory  = 268435456 (262144K bytes)
config> di sn0
config> di lnc0
config> di le0
config> di ie0
config> di fe0
config> di cs0
config> di bt0
config> di aic0
config> di aha0
config> di adv0
config> q
avail memory = 256311296 (250304K bytes)
Preloaded elf kernel "kernel" at 0xc0491000.
Preloaded userconfig_script "/boot/kernel.conf" at 0xc049109c.
md0: Malloc disk
Using $PIR table, 4 entries at 0xc00fde60
npx0: <math processor> on motherboard
npx0: INT 16 interface
pcib0: <Host to PCI bridge> on motherboard
pci0: <PCI bus> on pcib0
pcib1: <VIA 82C598MVP (Apollo MVP3) PCI-PCI (AGP) bridge> at device 1.0 on pci0
pci1: <PCI bus> on pcib1
pci1: <Matrox MGA G200 AGP graphics accelerator> at 0.0 irq 11
isab0: <VIA 82C586 PCI-ISA bridge> at device 7.0 on pci0
isa0: <ISA bus> on isab0
atapci0: <VIA 82C586 ATA33 controller> port 0xe000-0xe00f at device 7.1 on pci0
ata0: at 0x1f0 irq 14 on atapci0
ata1: at 0x170 irq 15 on atapci0
uhci0: <VIA 83C572 USB controller> port 0xe400-0xe41f irq 10 at device 7.2 on pci0
usb0: <VIA 83C572 USB controller> on uhci0
usb0: USB revision 1.0
uhub0: VIA UHCI root hub, class 9/0, rev 1.00/1.00, addr 1
uhub0: 2 ports with 2 removable, self powered
chip1: <VIA 82C586B ACPI interface> at device 7.3 on pci0
ed0: <NE2000 PCI Ethernet (RealTek 8029)> port 0xe800-0xe81f irq 9 at
device 10.0 on pci0
ed0: address 52:54:05:de:73:1b, type NE2000 (16 bit)
isa0: too many dependant configs (8)
isa0: unexpected small tag 14
fdc0: <NEC 72065B or clone> at port 0x3f0-0x3f5,0x3f7 irq 6 drq 2 on isa0
fdc0: FIFO enabled, 8 bytes threshold
fd0: <1440-KB 3.5" drive> on fdc0 drive 0
atkbdc0: <keyboard controller (i8042)> at port 0x60-0x64 on isa0
atkbd0: <AT Keyboard> flags 0x1 irq 1 on atkbdc0
kbd0 at atkbd0
psm0: <PS/2 Mouse> irq 12 on atkbdc0
psm0: model Generic PS/2 mouse, device ID 0
vga0: <Generic ISA VGA> at port 0x3c0-0x3df iomem 0xa0000-0xbffff on isa0
sc0: <System console> at flags 0x1 on isa0
sc0: VGA <16 virtual consoles, flags=0x300>
sio0 at port 0x3f8-0x3ff irq 4 flags 0x10 on isa0
sio0: type 16550A
sio1 at port 0x2f8-0x2ff irq 3 on isa0
sio1: type 16550A
ppc0: <Parallel port> at port 0x378-0x37f irq 7 on isa0
ppc0: SMC-like chipset (ECP/EPP/PS2/NIBBLE) in COMPATIBLE mode
ppc0: FIFO with 16/16/15 bytes threshold
ppbus0: IEEE1284 device found /NIBBLE
Probing for PnP devices on ppbus0:
plip0: <PLIP network interface> on ppbus0
lpt0: <Printer> on ppbus0
lpt0: Interrupt-driven port
ppi0: <Parallel I/O> on ppbus0
ad0: 8063MB <IBM-DHEA-38451> [16383/16/63] at ata0-master using UDMA33
ad2: 8063MB <IBM-DHEA-38451> [16383/16/63] at ata1-master using UDMA33
acd0: CDROM <DELTA OTC-H101/ST3 F/W by OIPD> at ata0-slave using PIO4
Mounting root from ufs:/dev/ad0s1a
swapon: adding /dev/ad0s1b as swap device
Automatic boot in progress...
/dev/ad0s1a: FILESYSTEM CLEAN; SKIPPING CHECKS
/dev/ad0s1a: clean, 48752 free (552 frags, 6025 blocks, 0.9% fragmentation)
/dev/ad0s1f: FILESYSTEM CLEAN; SKIPPING CHECKS
/dev/ad0s1f: clean, 128997 free (21 frags, 16122 blocks, 0.0% fragmentation)
/dev/ad0s1g: FILESYSTEM CLEAN; SKIPPING CHECKS
/dev/ad0s1g: clean, 3036299 free (43175 frags, 374073 blocks, 1.3% fragmentation)
/dev/ad0s1e: filesystem CLEAN; SKIPPING CHECKS
/dev/ad0s1e: clean, 128193 free (17 frags, 16022 blocks, 0.0% fragmentation)
Doing initial network setup: hostname.
ed0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> mtu 1500
        inet 192.168.0.1 netmask 0xffffff00 broadcast 192.168.0.255
        inet6 fe80::5054::5ff::fede:731b%ed0 prefixlen 64 tentative scopeid 0x1
        ether 52:54:05:de:73:1b
lo0: flags=8049<UP,LOOPBACK,RUNNING,MULTICAST> mtu 16384
        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x8
        inet6 ::1 prefixlen 128
        inet 127.0.0.1 netmask 0xff000000
Additional routing options: IP gateway=YES TCP keepalive=YES
routing daemons:.
additional daemons: syslogd.
Doing additional network setup:.
Starting final network daemons: creating ssh RSA host key
Generating public/private rsa1 key pair.
Your identification has been saved in /etc/ssh/ssh_host_key.
Your public key has been saved in /etc/ssh/ssh_host_key.pub.
The key fingerprint is:
cd:76:89:16:69:0e:d0:6e:f8:66:d0:07:26:3c:7e:2d root@k6-2.example.com
 creating ssh DSA host key
Generating public/private dsa key pair.
Your identification has been saved in /etc/ssh/ssh_host_dsa_key.
Your public key has been saved in /etc/ssh/ssh_host_dsa_key.pub.
The key fingerprint is:
f9:a1:a9:47:c4:ad:f9:8d:52:b8:b8:ff:8c:ad:2d:e6 root@k6-2.example.com.
setting ELF ldconfig path: /usr/lib /usr/lib/compat /usr/X11R6/lib
/usr/local/lib
a.out ldconfig path: /usr/lib/aout /usr/lib/compat/aout /usr/X11R6/lib/aout
starting standard daemons: inetd cron sshd usbd sendmail.
Initial rc.i386 initialization:.
rc.i386 configuring syscons: blank_time screensaver moused.
Additional ABI support: linux.
Local package initialization:.
Additional TCP options:.

FreeBSD/i386 (k6-2.example.com) (ttyv0)

login: rpratt
Password:
....

Het aanmaken van de RSA en DSA sleutels kan een tijdje duren op langzamere machines. Dit gebeurt alleen bij de eerste keer aanmelden na een nieuwe installatie. De volgende keren gaan sneller.

Als de X-server ingesteld is en er een standaard desktop is gekozen, dan kan die worden gestart door `startx` in te geven op de commandoregel.

[[shutdown]]
=== FreeBSD uitschakelen

Het is belangrijk om het besturingssysteem op de juiste manier uit te schakelen. Schakel niet gewoon de stroom uit. Neem eerst de rol van superuser aan door `su` in te geven op de commandoregel en het `root` wachtwoord in te geven. Dit kan alleen als gebruiker die lid is van de groep `wheel`. Anders moet eerst worden aangemeld als `root`. Gebruik `shutdown -h now` om het systeem uit te schakelen.

[source,bash]
....
The operating system has halted.
Please press any key to reboot.
....

Het is veilig om de stroom uit te schakelen als na het commando `shutdown` het bericht "Please press any key to reboot" getoond wordt. Als een toets wordt ingedrukt in plaats van het uitschakelen van de stroom, dan start het systeem opnieuw.

De combinatie kbd:[Ctrl+Alt+Del] kan ook gebruikt worden om het systeem te herstarten, maar dit wordt niet aangeraden tijdens normaal gebruik.

[[install-trouble]]
== Problemen oplossen

Dit onderdeel behandelt het oplossen van installatieproblemen, zoals veel voorkomende problemen die gebruikers hebben gerapporteerd. Er is ook een aantal vragen en antwoorden voor mensen die een systeem willen hebben met zowel FreeBSD als MS-DOS(R) of Windows(R) (dual-boot).

=== Wat als er iets misgaat?

Door de beperkingen van de PC-architectuur is het onmogelijk om 100% betrouwbaar een hardware-onderzoek te doen, maar er zijn een paar dingen die wel gedaan kunnen worden in geval van storingen.

Controleer het http://www.FreeBSD.org/releases/[Hardware Notes] document voor uw versie van FreeBSD om er zeker van te zijn dat de hardware ondersteund wordt.

Als de hardware wordt ondersteund, maar het systeem loopt nog steeds vast of heeft andere problemen, dient u een crossref:kernelconfig[kernelconfig,eigen kernel] te bouwen. Dit maakt het mogelijk om ondersteuning voor apparaten toe te voegen de niet in de [.filename]#GENERIC# kernel zitten. De kernel op de opstartschijven gaat er vanuit dat de hardware ingesteld is op de fabrieksinstellingen wat betreft IRQ's, IO adressen en DMA kanalen. Als de hardware anders is ingesteld, dan moet waarschijnlijk de instellingeneditor gebruikt worden om FreeBSD te vertellen waar de apparaten te vinden zijn.

Het is ook mogelijk dat een onderzoek naar een apparaat dat niet aanwezig is een probleem veroorzaakt bij een later onderzoek naar een ander apparaat dat er wel is. In dat geval moet het conflicterende stuurprogramma uitgeschakeld worden.

[NOTE]
====
Sommige installatieproblemen kunnen voorkomen of verminderd worden door de firmware op de diverse hardwarecomponenten bij te werken, zeker als het om het moederbord gaat. De firmware voor een moederbord wordt ook aangeduid als het BIOS en de meeste moederbord- en computerfabrikanten hebben een website waar upgrades en upgrade-informatie beschikbaar is.

De meeste fabrikanten raden sterk af om het BIOS te upgraden, tenzij er een goede reden voor is, zoals bijvoorbeeld een kritische update. Het upgradeproces _kan_ misgaan, wat beschadiging van de BIOS chip kan veroorzaken.
====

=== MS-DOS(R) en Windows(R) bestandssystemen gebruiken

FreeBSD ondersteunt geen bestandssystemen die gecomprimeerd zijn met het programma Double Space(TM). Daarom moet het bestandssysteem eerst gedecomprimeerd worden voordat FreeBSD de gegevens kan benaderen. Dit kan met de Compression Agent, te vinden in het menu [.guimenuitem]#Start#> [.guimenuitem]#Programma's# > [.guimenuitem]#Bureau-accessoires# > [.guimenuitem]#Systeemwerkset#.

FreeBSD kan MS-DOS(R) gebaseerde bestandssystemen (soms FAT bestandssystemen genoemd) ondersteunen. Het commando man:mount_msdosfs[8] plaatst zulke bestandssystemen in de bestaande maphierarchie, waardoor de inhoud van het bestandssysteem benaderd kan worden. Het programma man:mount_msdosfs[8] wordt normaliter niet direct gebruikt; in plaats hiervan wordt het aangeroepen door een regel in [.filename]#/etc/fstab# of door een aanroep van het gereedschap man:mount[8] met de juiste parameters.

Een typische regel in [.filename]#/etc/fstab# is:

[.programlisting]
....
/dev/ad0sN  /dos  msdosfs rw  0  0
....

[NOTE]
====
De map [.filename]#/dos# moet reeds bestaan om dit te laten werken. Zie man:fstab[5] voor details over het formaat van [.filename]#/etc/fstab#.
====

Een typische aanroep naar man:mount[8] voor een MS-DOS(R) bestandssysteem ziet er uit als:

[source,bash]
....
# mount -t msdosfs /dev/ad0s1 /mnt
....

In dit voorbeeld staat het MS-DOS(R) bestandssysteem op de eerste partitie van de primaire harde schijf. Iedere situatie kan anders zijn, dus controleer de uitvoer van de commando's `dmesg` en `mount`. Dat zou voldoende informatie moeten leveren om een idee te vormen over het partitieschema.

[NOTE]
====
FreeBSD kan schijfstukken (dat zijn MS-DOS(R) partities) anders nummeren dan andere besturingssystemen. In het bijzonder krijgen extended MS-DOS(R) partities gewoonlijk hogere schijfstuknummers dan primaire MS-DOS(R) partities. Het gereedschap man:fdisk[8] kan helpen te bepalen welke schijfstukken bij FreeBSD en welke bij andere besturingssystemen horen.
====

NTFS-partities kunnen op soortgelijke manier aangekoppeld worden met het commando man:mount_ntfs[8].

=== Vragen en antwoorden bij het oplossen van problemen

==== Mijn systeem hangt bij het opsporen van hardware tijdens het opstarten, of het gedraagt zich vreemd tijdens het installeren, of de floppydrive wordt niet onderzocht.

FreeBSD maakt veelvuldig gebruik van de ACPI-diensten van het systeem op de i386, amd64 en ia64 platformen bij het helpen van de systeemconfiguratie als het tijdens het opstarten is gedetecteerd. Helaas bestaan er nog enkele bugs in zowel het ACPI-stuurprogramma als in sommige systeemmoederborden en BIOSsen. ACPI kan worden uitgeschakeld door de hint `hint.acpi.0.disabled` in te stellen in de derde-fase-bootloader:

[source,bash]
....
 set hint.acpi.0.disabled="1"
....

Dit wordt telkens wanneer het systeem opnieuw wordt opgestart teruggezet, dus is het nodig om `hint.acpi.0.disabled="1"` aan het bestand [.filename]#/boot/loader.conf# toe te voegen. Meer informatie over de bootloader kan worden gevonden in crossref:boot[boot-synopsis,Overzicht].

==== Ik ga naar opstarten van harde schijf voor de eerste keer na het installeren van FreeBSD, de kernel laadt en onderzoekt mijn hardware, maar stopt met berichten zoals deze:

Er is een langdurig probleem in het geval dat de opstartschijf niet de eerste schijf in het systeem is. Het BIOS gebruikt een ander nummeringsschema dan FreeBSD, en uitzoeken welke nummers met welke overeenkomen is lastig goed te krijgen.

In het geval dat de opstartschijf niet de eerste schijf in het systeem is, kan FreeBSD wel wat hulp gebruiken om het te vinden. Er zijn hier twee bekende situaties, en in beide gevallen dient u FreeBSD te vertellen waar het root-bestandssysteem zich bevindt. U kunt dit doen door het BIOS schijfnummer te specificeren, het soort schijf en het FreeBSD schijfnummer voor die soort.

De eerste situatie is wanneer u twee IDE-schijven heeft, elk geconfigureerd als de meester op hun respectievelijke IDE-bus, en u FreeBSD wilt opstarten vanaf de tweede schijf. Het BIOS ziet dit als schijf 0 en schijf 1, terwijl FreeBSD ze als [.filename]#ad0# en [.filename]#ad2#.

FreeBSD staat op BIOS schijf 1, van het soort `ad` en het FreeBSD schijfnummer is 2, dus geldt:

[source,bash]
....
 1:ad(2,a)kernel
....

Merk op dat indien u een slaaf op de primaire bus heeft, bovenstaande niet nodig is (en effectief onjuist is).

De tweede situatie is omvat opstarten van een SCSI-schijf wanneer u één of meer IDE-schijven in het systeem heeft. In dit geval is het FreeBSD schijfnummer lager dan het BIOS schijfnummer. Als u twee IDE-schijven alsook de SCSI-schijf heeft, dan is de SCSI-schijf BIOS schijf 2, soort `da` en FreeBSD schijfnummer 0, dus geldt:

[source,bash]
....
 2:da(0,a)kernel
....

wanneer u FreeBSD wilt vertellen dat u van BIOS schijf 2 wilt opstarten, welke de eerste SCSI-schijf in het systeem is. Als u slechts één IDE-schijf had, zou `1:` gegolden hebben.

Wanneer u de juiste waardes heeft bepaald om te gebruiken, kunt u het commando precies zoals u het zou typen in het bestand [.filename]#/boot.config# plaatsen met een standaard tekstverwerker. Tenzij anders geïnstrueerd, gebruikt FreeBSD de inhoud van dit bestand als het standaardantwoord op de prompt `boot:`.

==== Ik ga naar opstarten van harde schijf voor de eerste keer na de installatie van FreeBSD, maar de prompt van de Boot Manager geeft telkens alleen F? weer in het opstartmenu maar het opstarten gaat niet verder.

De geometrie van de harde schijf was verkeerd ingesteld in de partitiebewerker toen u FreeBSD installeerde. Ga terug naar de partitiebewerker en specificeer de eigenlijke geometrie van uw harde schijf. U moet FreeBSD weer van het begin af herinstalleren met de juiste geometrie.

Als u geheel faalt in het bepalen van de juiste geometrie van uw machine, is hier een tip: Installeer een kleine MS-DOS(R) partitie aan het begin van de schijf en installeer FreeBSD na die partitie. Het installatieprogramma zal de MS-DOS(R) partitie zien en proberen de juiste geometrie er uit af te leiden, wat gewoonlijk werkt.

De volgende tip wordt niet meer aangeraden, maar is hier achtergelaten ter referentie:

[.blockquote]
Als u een echt toegewijde FreeBSD server of werkstation installeert waar u geen (toekomstige) compatibiliteit met MS-DOS(R), Linux of een ander besturingssysteem wilt, heeft u ook de mogelijkheid om de gehele schijf ([.guimenuitem]#A# in de partitiebewerker) te gebruiken, de niet-standaard optie selecterende waarbij FreeBSD de gehele schijf van de allereerste tot de allerlaatste sector beslaat. Dit laat alle geometrieoverwegingen buiten beschouwing, maar is wat beperkend tenzij u nooit iets anders dan FreeBSD op een schijf gaat draaien.

==== Het systeem vindt mijn man:ed[4] netwerkkaart, maar ik blijf apparaat-timeout-fouten krijgen.

Uw kaart zit waarschijnlijk op een andere IRQ dan wat is gespecificeerd in het bestand [.filename]#/boot/device.hints#. Het stuurprogramma man:ed[4] gebruikt standaard niet de "soft"-configuratie (waardes gegeven met EZSETUP in MS-DOS(R)), maar het zal de softwareconfiguratie gebruiken wanneer u `-1` specificeert in de hints voor de interface.

Verplaats òf de jumper op de kaart naar een vaste configuratie-instelling (pas indien nodig de kernelinstellingen aan), òf specificeer het IRQ als `-1` door de hint `hint.ed.0.irq="-1"` in te stellen. Dit vertelt de kernel om de softconfiguratie te gebruiken.

Een andere mogelijkheid is dat uw kaart op IRQ 9 zit, welke gedeeld is met IRQ 2 en vaak een bron van problemen is (al helemaal wanneer u een VGA-kaart heeft die IRQ 2 gebruikt!). U dient IRQ 2 en 9 te vermijden indien mogelijk.

==== Wanneer sysinstall in een X11-terminal wordt gebruikt, is het moeilijk om het gele font op de lichtgrijze achtergrond te lezen. Is er een manier om het contrast kleurcontrast van deze applicatie te verhogen?

Als X11 reeds geïnstalleerd is en de kleuren die standaard door sysinstall worden gekozen de tekst onleesbaar maken wanneer man:xterm[1] of man:rxvt[1] wordt gebruikt, voeg dan het volgende aan [.filename]#~/.Xdefaults# toe om een donkerder grijs als achtergrond te krijgen: `XTerm*color7: #c0c0c0`

[[install-advanced]]
== Installeren voor gevorderden

In dit onderdeel wordt het installeren van FreeBSD in bijzondere situaties beschreven.

[[headless-install]]
=== FreeBSD installeren op een systeem zonder monitor of toetsenbord

Dit type installatie heet ook wel een "headless install", omdat de met FreeBSD te installeren machine of geen monitor heeft aangesloten of zelfs geen VGA-uitvoer heeft. Hoe is dat mogelijk, kan de vraag zijn. Dat kan met een seriële console. Een seriële console is gewoonweg een andere machine die optreedt als monitor en toetsenbord voor een systeem. Om dit te doen moet eerst een installatie-USB-stick worden gemaakt, zoals uitgelegd is in <<install-boot-media>> of het juiste ISO-image voor de installatie worden gedownloadt (zie <<install-cdrom>>).

Volg de volgende stappen om de media te wijzigen om in een seriële console op te starten (voor een CD-ROM kan de eerste stap worden overgeslagen):

[.procedure]
====

. Installatie-USB-stick geschikt maken voor een seriële console
+ 
Als wordt opgestart van de zojuist gemaakt USB-stick, start FreeBSD op in de normale installatiemodus. FreeBSD moet echter opstarten naar een seriële console voor de installatie. Om dit te regelen moet de USB-stick gekoppeld worden aan het FreeBSD systeem met het commando man:mount[8].
+
[source,bash]
....
# mount /dev/da0a /mnt
....
+
[NOTE]
======
Pas het apparaat en het koppelpunt aan uw situatie aan.
======
+ 
Nu dat de stick is aangekoppeld, moet deze ingesteld worden om in een seriële toestand op te starten. Aan het bestand [.filename]#loader.conf# van het bestandssysteem van de USB-stick een regel worden toegevoegd dat de seriële console instelt als de systeemconsole:
+
[source,bash]
....
# echo 'console="comconsole"' >> /mnt/boot/loader.conf
....
+ 
Nu de USB-stick correct is geconfigureerd, moet deze afgekoppeld worden met man:umount[8]:
+
[source,bash]
....
# umount /mnt
....
+ 
Nu kan de USB-stick worden afgekoppeld en direct naar de derde stap van deze procedure gegaan worden.
. De installatie-CD in staat stellen om in een seriële console op te starten
+ 
Als met de CD zou worden opgestart die zojuist van het installatie-ISO-image is gemaakt (zie <<install-cdrom>>), dan zou FreeBSD opstarten in de normale installatiemodus. We willen dat FreeBSD voor de installatie opstart in een seriële console. Om dit te doen, moet het ISO-image worden uitgepakt, gewijzigd, en opnieuw worden gegenereerd voordat het op een CD-R wordt gebrandt.
+ 
Gebruik man:tar[1] om alle bestanden uit te pakken van het installatie-ISO-image, bijvoorbeeld [.filename]#FreeBSD-{rel120-current}-RELEASE-i386-disc1.iso#:
+
[source,bash]
....
# mkdir /pad/naar/headless-iso
# tar -C /pad/naar/headless-iso -pxvf FreeBSD-12.0-RELEASE-i386-disc1.iso
....
+ 
Nu moet het installatiemedium worden ingesteld om in een seriële console op te starten. Aan het bestand [.filename]#loader.conf# van het uitgepakte ISO-image moet een regel worden toegevoegd dat de seriële console als de systeemconsole instelt:
+
[source,bash]
....
# echo 'console="comconsole"' >>
 /pad/naar/headless-iso/boot/loader.conf
....
+ 
Nu kan er een nieuw ISO-image van het gewijzigde bestandssysteem worden gemaakt. Het gereedschap man:mkisofs[8] van de port package:sysutils/cdrtools[] wordt gebruikt:
+
[source,bash]
....
# mkisofs -v -b boot/cdboot -no-emul-boot -r -J -V "Headless_installatie" \
	  -o Headless-FreeBSD-12.0-RELEASEi386-disc1.iso /pad/naar/headless-iso
....
+ 
Nu het ISO-image correct is geconfigureerd, kan het met uw favoriete brandprogramma op een CD-R worden gebrandt.
. Null-modem kabel aansluiten
+ 
Nu moeten de twee machines verbonden worden met een crossref:serialcomms[term-cables-null,null-modem kabel]. De kabel kan gewoon aangesloten worden tussen de seriële poorten van de machines. _Een gewone seriële kabel werkt niet_, er is een null-modem kabel nodig omdat daarin sommige draden kruiselings zijn verbonden.
. Opstarten voor het installeren
+ 
Nu is het tijd om te beginnen met installeren. Steek de USB-stick in de machine die headless wordt geïnstalleerd en zet hem aan. Als u een voorbereidde CD-ROM gebruikt, zet dan de machine aan en steek de CD-ROM erin.
. Verbinden met de headless machine
+ 
Nu moet verbinding gemaakt worden met die machine met man:cu[1]:
+
[source,bash]
....
# cu -l /dev/cuau0
....
+ 
Gebruik op FreeBSD 7._X_ het volgende commando:
+
[source,bash]
....
# cu -l /dev/cuad0
....
====

Dat is alles! De headless machine kan bediend worden via de `cu` sessie. Het zal de kernel laden en vraagt dan wat voor terminal er gebruikt moeten worden. Selecteer de FreeBSD color console en ga verder met de installatie!

[[install-diff-media]]
== Aangepaste installatiemedia maken

[NOTE]
====
Om herhaling te voorkomen: "FreeBSD-schijf" betekent in deze context een FreeBSD CD-ROM of DVD die gekocht is of zelf is gemaakt.
====

Er kunnen zich situaties voordoen waarin aangepaste FreeBSD installatiemedia en/of bronnen gemaakt moeten worden. Dat kunnen fysieke media zijn zoals een tape of een bron die sysinstall kan gebruiken om bestanden op te halen, zoals een lokale FTP site of een MS-DOS(R)-partitie.

Bijvoorbeeld:

* Er zijn veel machines aangesloten op een lokaal netwerk en er is maar één FreeBSD-schijf. Er moet een lokale FTP site gemaakt worden met de inhoud van de FreeBSD schijf en vervolgens gebruiken andere machines die in plaats van steeds naar het Internet te moeten.
* Er is een FreeBSD-schijf, FreeBSD herkent de CD/DVD-speler niet, maar MS-DOS(R) / Windows(R) wel. De FreeBSD installatiebestanden moeten gekopieerd worden naar een MS-DOS(R) partitie op dezelfde computer en dan moet FreeBSD geïnstalleerd worden met die bestanden.
* De computer die geïnstalleerd moet worden heeft geen CD/DVD-speler of netwerkkaart, maar kan wel verbonden worden via een "Laplink-achtige" seriële of parallelle kabel met een computer die wel een CD/DVD-speler heeft.
* Er moet een tape gemaakt worden die gebruikt kan worden om FreeBSD te installeren.

[[install-cdrom]]
=== Installatie CD-ROM maken

Als onderdeel van elke versie stelt het FreeBSD project tenminste twee CDROM images beschikbaar ("ISO images") per ondersteunde architectuur. Deze images kunnen op een CD-R gebrand worden en dan gebruikt worden om FreeBSD te installeren. Als een CD-schrijver aanwezig is en bandbreedte is goedkoop, dan is dit de makkelijkste manier om FreeBSD te installeren.

[.procedure]
====

. De juiste ISO images downloaden
+ 
De ISO images voor iedere versie kunnen worden gedownload van [.filename]#ftp://ftp.FreeBSD.org/pub/FreeBSD/ISO-IMAGES-arch/versie# of de dichtstbijzijnde mirror. Vervang _arch_ en _versie_ door de gewenste waarden.
+ 
De bovenstaande map bevat meestal de volgende images:
+
.FreeBSD 7._X_ en 8._X_ ISO image-namen en verklaring
[cols="1,1", frame="none", options="header"]
|===
| Bestandsnaam
| Inhoud

|[.filename]#FreeBSD-versie-RELEASE-arch-bootonly.iso#
|Met dit CD-image kunt u het installatieproces starten door vanaf een CD-ROM-drive op te starten maar het bevat geen ondersteuning om FreeBSD van de CD zelf te installeren. U dient hiervoor een installatie vanaf het netwerk ( bijvoorbeeld een FTP-server) uit te voeren nadat u van deze CD heeft opgestart.

|FreeBSD-[.filename]#versie-RELEASE-arch-disc1.iso.gz#
|Dit DVD-image bevat alles wat u nodig heeft om het basisgedeelte van FreeBSD te installeren, een verzameling van vooraf gebouwde pakketten, en de documentatie. Het ondersteunt ook het opstarten in een "livefs" gebaseerde reddingsmodus.

|[.filename]#FreeBSD-versie-RELEASE-arch-memstick.img#
|Dit image kan naar een USB-geheugenstick worden geschreven en gebruikt worden om een installatie uit te voeren op machines die vanaf USB-drives kunnen opstarten. Het ondersteunt ook het opstarten in een "livefs" gebaseerde reddingsmodus. De documentatiepakketten worden geleverd, echter geen andere pakketten. Dit image is niet beschikbaar voor FreeBSD 7._X_.

|[.filename]#FreeBSD-versie-RELEASE-arch-disc1.iso#
|Dit CD-image bevat het basisgedeelte van FreeBSD en de documentatiepakketten maar geen andere pakketten.

|[.filename]#FreeBSD-versie-RELEASE-arch-disc2.iso#
|Een CD-image met zoveel mogelijk pakketten van derde partijen als er op de schijf passen. Dit image is niet beschikbaar voor FreeBSD 8._X_.

|FreeBSD-[.filename]#versie-RELEASE-arch-disc3.iso#
|Nog een CD-image met zoveel mogelijk pakketten van derde partijen als op de schijf passen. Dit image is niet beschikbaar voor FreeBSD 8.0 en hoger.

|[.filename]#FreeBSD-versie-RELEASE-arch-docs.iso#
|De FreeBSD documentatie. Dit beeld is niet beschikbaar voor FreeBSD 8._X_.

|[.filename]#FreeBSD-versie-RELEASE-arch-livefs.iso#
|Dit CD-image bevat ondersteuning om in een "livefs" gebaseerde reddingsmodus op te starten maar het ondersteunt niet het installeren van de CD zelf.
|===
+
[NOTE]
======
Uitgaven van FreeBSD 7._X_ voor FreeBSD 7.3 en uitgaven van FreeBSD 8.0 gebruikten een andere naamconventie. Voor de namen van hun ISO-images staat geen `FreeBSD-`.
======
+ 
U _moet_ òof het `bootonly` image downloaden, òf het beeldbestand van `disc1`. Download ze niet allebei, aangezien het beeldbestand `disc1` alles bevat wat het `bootonly` image bevat.
+ 
Gebruik de `bootonly` ISO als toegang tot Internet goedkoop is. Hiermee kan FreeBSD geïnstalleerd worden, waarna pakketten van derde partijen gedownload en geïnstalleerd kunnen worden via het ports/packages systeem (zie crossref:ports[ports,Applicaties installeren. pakketten en ports]).
+ 
Gebruik het `dvd1` image om een uitgave van FreeBSD te installeren en een redelijke hoeveelheid pakketten op de schijf te installeren.
+ 
De additionele disc images zijn nuttig, maar niet noodzakelijk, zeker niet als er breedband toegang tot Internet is.
. CD's branden
+ 
Daarna moeten de CD images op een schijf gebrand worden. Als dat wordt gedaan op een ander FreeBSD systeem, dan staat in crossref:disks[creating-cds,Optische media (CD's) aanmaken en gebruiken] meer informatie (meer in het bijzonder in crossref:disks[burncd,burncd] en crossref:disks[cdrecord,cdrecord]).
+ 
Als de CD's op een ander platform worden gebrand, gebruik dan de op dat platform beschikbare hulpprogramma's om een CD-brander aan te sturen. De images zijn samengesteld in het standaard ISO-formaat dat ondersteund wordt door de meeste CD-brandprogramma's.
====

[NOTE]
====
Als er interesse is in het bouwen van een aangepaste versie van FreeBSD dan staat hierover informatie in het link:{releng}[Release Engineering artikel].
====

[[install-ftp]]
=== Een lokale FTP site maken met een FreeBSD-schijf

FreeBSD-schijven zijn op dezelfde manier ingedeeld als de FTP site. Dat maakt het erg gemakkelijk om een lokale FTP site te maken die gebruikt kan worden door andere machines op een netwerk bij het installeren van FreeBSD.

[.procedure]
====

. Op de FreeBSD computer die de FTP site bevat moet de CD-ROM in het CD-ROM station zitten en aangekoppeld zijn op [.filename]#/cdrom#.
+
[source,bash]
....
# mount /cdrom
....
+
. Maak een gebruikersaccount voor anonieme FTP toegang in [.filename]#/etc/passwd# het bestand te bewerken met man:vipw[8] en de volgende regel toe te voegen:
+
[.programlisting]
....
ftp:*:99:99::0:0:FTP:/cdrom:/nonexistent
....
+
. Zorg ervoor dat de dienst FTP aan staat in [.filename]#/etc/inetd.conf#.
====

Iedereen met een netwerkverbinding naar de machine kan nu als mediumtype FTP kiezen en `ftp://de-machine` ingeven na het kiezen van "Other" in het menu FTP sites tijdens de installatie.

[NOTE]
====
Als de bootmedia (meestal diskettes) voor een FTP client niet precies dezelfde versie hebben als die van de lokale FTP site, dan kan sysinstall de installatie niet volledig afronden. Als de versies niet gelijk zijn, dan kan in het menu menu:Options[] de distributienaam gewijzigd worden in [.guimenuitem]#any#.
====

[WARNING]
====

Deze aanpak is in orde voor een machine die aan een lokaal netwerk hangt en beschermd wordt door een firewall. Het aanbieden van FTP-diensten aan andere machines over Internet (en niet alleen het lokale netwerk) stelt een computer bloot aan de aandacht van krakers en andere ongewenste personen. We raden sterk aan om voldoende voorzorgsmaatregelen te nemen als hiervoor wordt gekozen.
====

=== Installatiediskettes maken

Als wordt geïnstalleerd met diskettes (we adviseren om dit _niet_ te doen), hetzij vanwege niet ondersteunde hardware of eenvoudigweg omdat de persoon die installeert er op staat dingen op de moeilijkste manier te doen, dan moeten eerst diskettes gemaakt worden voor de installatie.

Er zijn minstens zoveel 1.44 MB diskettes nodig als nodig zijn om alle bestanden die in de map [.filename]#base# (basisdistributie) staan op te slaan. Als de diskettes worden gemaakt vanuit MS-DOS(R), dan _moeten_ ze geformatteerd worden met het MS-DOS(R) commando `FORMAT`. Als Windows(R) wordt gebruikt, formatteer de schijven dan via de verkenner (rechtermuisklik op [.filename]#A:# en kies dan "Format").

Vertrouw voorgeformatteerde schijven _niet_. Formatteer ze voor de zekerheid opnieuw. Veel door gebruikers gerapporteerde problemen kwamen voort uit het gebruik van verkeerd geformatteerde media, vandaar dat dit punt hier wordt benadrukt.

Als de diskettes worden gemaakt op een andere FreeBSD machine is formatteren nog steeds geen slecht idee, hoewel niet op elke diskette een MS-DOS(R) bestandssysteem nodig is. Met de commando's `bsdlabel` en `newfs` kan er een UFS bestandssysteem op gezet worden, zoals met de volgende commando's wordt getoond (voor een 3.5" 1.44 MB diskette):

[source,bash]
....
# fdformat -f 1440 fd0.1440
# bsdlabel -w fd0.1440 floppy3
# newfs -t 2 -u 18 -l 1 -i 65536 /dev/fd0
....

Daarna kunnen ze aangekoppeld en beschreven worden als elk ander bestandssysteem.

Nadat de diskettes zijn geformatteerd moeten de bestanden op de diskettes gezet worden. De distributiebestanden zijn opgedeeld in porties zodat vijf stuks gemakkelijk op een ouderwetse 1.44 MB diskette passen. Ga door met alle diskettes en zet zoveel bestanden als mogelijk op elke diskette tot alle distributies op die manier gekopiëerd zijn. Elke distributie moet in een submap op de diskette komen, bijvoorbeeld: [.filename]#a:\base\base.aa#, [.filename]#a:\base\base.ab#, enzovoorts.

[IMPORTANT]
====
Het bestand [.filename]#base.inf# dient ook op de eerste diskette van de [.filename]#base# verzameling te staan aangezien het door het installatieprogramma wordt gelezen om uit te zoeken naar hoeveel aanvullende delen te kijken wanneer de distributie opgehaald en aan elkaar geregen wordt.
====

Als tijdens de installatie het scherm Media verschijnt kan [.guimenuitem]#Floppy# gekozen worden en het installatiesysteem vraagt daarna om de overige diskettes.

[[install-msdos]]
=== Installeren vanaf een MS-DOS(R)-partitie

Om een installatie voor te bereiden vanaf een MS-DOS(R)-partitie kunnen alle bestanden vanaf de distributie in een map genaamd [.filename]#freebsd# in de hoofdmap van de partitie gezet worden, bijvoorbeeld [.filename]#c:\freebsd#. De mappenstructuur van de CD-ROM of FTP site moet gedeeltelijk worden gereproduceerd in deze map, dus we raden aan het MS-DOS(R) commando `xcopy` te gebruiken als de bron een CD-ROM is. Om bijvoorbeeld een minimale installatie van FreeBSD voor te bereiden:

[source,bash]
....
C:\> md c:\freebsd
C:\> xcopy e:\bin c:\freebsd\bin\ /s
C:\> xcopy e:\manpages c:\freebsd\manpages\ /s
....

Hierbij wordt aangenomen dat [.filename]#C:# de schijf is met voldoende vrije ruimte en dat [.filename]#E:# het CD-ROM station is.

Als er geen CD-ROM station is, dan kan de distributie gedownload worden van link:ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/{rel120-current}-RELEASE/[ftp.FreeBSD.org]. Elke distributie heeft zijn eigen map. De _base_ distributie staat bijvoorbeeld in de map link:ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/{rel120-current}-RELEASE/base/[{rel120-current}/base/].

Kopiëer de vanaf een MS-DOS(R)-partitie te installeren distributies (en waar schijfruimte voor is) en plaats ze elk onder [.filename]#c:\freebsd#. De distributie `BIN` is de enige noodzakelijke voor een minimale installatie.

=== Installeren van tape

Het installeren vanaf een tape is waarschijnlijk de gemakkelijkste manier, sneller dan een online FTP installatie of een CD-ROM installatie. Het installatieprogramma verwacht dat de bestanden eenvoudigweg getarred zijn op een tape. Na het ophalen van alle benodigde distributiebestanden moeten ze op een tape getarred worden:

[source,bash]
....
# cd /freebsd/distdir
# tar cvf /dev/rwt0 dist1 ... dist2
....

Bij het uitvoeren van de installatie moet ervoor gezorgd worden dat er voldoende ruimte is in een tijdelijke map (die gekozen kan worden) om de _volledige_ inhoud van de gemaakte tape te bevatten. Door de sequentiële toegangsmethode van een tape heeft deze manier van installeren nogal wat tijdelijke schijfruimte nodig.

[NOTE]
====
Bij het begin van de installatie moet de tape al in de drive zitten _voor_ het opstarten van de opstartdiskette. Het installatieprogramma kan hem anders niet vinden.
====

=== Installeren over een netwerk

Er zijn drie soorten netwerkinstallaties beschikbaar: Ethernet (een standaard Ethernet-controller), seriële poort (PPP), of parallelle poort (PLIP, laplink-kabel).

Voor de snelst mogelijke netwerkinstallatie is een Ethernet adapter altijd een goede keuze! FreeBSD ondersteunt de meeste Ethernetkaarten. Een overzicht van de ondersteunde kaarten (en de benodigde instellingen) is beschikbaar in de Hardware Notes voor elke versie van FreeBSD. Als gebruik gemaakt wordt van een ondersteunde PCMCIA kaart, stop deze dan in het slot _vóór_ de laptop wordt aangezet. FreeBSD ondersteunt momenteel helaas geen "hot insertion" van PCMCIA-kaarten tijdens de installatie.

Een toe te wijzen IP-adres op het netwerk, het netmask van de adresklasse en de naam voor de te installeren machine moeten ook bekend zijn. Als wordt geïnstalleerd over een PPP-verbinding en er is geen vast IP-adres, wanhoop dan niet. Het IP-adres kan dynamisch toegekend worden door een ISP. Een systeembeheerder kan aangeven welke waarden gebruikt moeten worden voor netwerkinstellingen. Als andere hosts benaderd moeten worden op naam en niet op IP-adres, dan moet ook een nameserver en mogelijk het adres van een gateway opgegeven worden (als PPP wordt gebruikt is dat het IP-adres van de provider). Bij installatie met FTP via een HTTP-proxy moet ook het adres van de proxy bekend zijn. Als het antwoord op één of meerdere vragen niet bekend is, dan moet echt gesproken worden met de systeembeheerder of ISP _vóóor_ dit soort installaties worden uitgevoerd.

Als een modem wordt gebruikt is PPP hoogstwaarschijnlijk de enige mogelijkheid. Er dient informatie over de provider beschikbaar te zijn omdat die redelijk vroeg in het installatieproces nodig is.

Als PAP of CHAP wordt gebruikt om een verbinding te maken met een ISP (met andere woorden als een verbinding gemaakt kan worden met een ISP onder Windows(R) zonder een script te gebruiken), dan is alles wat gedaan moet worden het ingeven van het `dial` commando op de ppp prompt. Anders moet bekend zijn hoe de ISP gebeld moet worden met "AT commando's" die specifiek zijn voor een modem, aangezien de PPP-dialer slechts een erg eenvoudige terminal emulator bevat. In het ppp-gebruikers crossref:ppp-and-slip[userppp,handboek] en de link:{faq}#ppp/[FAQ] staat meer informatie. Bij problemen kan de log naar het scherm worden gestuurd met het commando `set log local ...`.

Als een hard-wired verbinding naar een andere FreeBSD machine beschikbaar is kan ook overwogen worden te installeren via een "laplink" parallelle poort kabel. De snelheid van een parallelle poort is veel hoger dan wat normaal mogelijk is over een seriële kabel (tot 50 kbytes/sec), resulterend een veel snellere installatie.

==== Installeren via NFS

De installatie via NFS is redelijk rechttoe-rechtaan. Kopiëer gewoon de FreeBSD distributiebestanden die nodig zijn naar een NFS server en geef die server dan aan in de NFS-media selectie.

Als de server alleen zogenaamde "privileged ports" toestaat (zoals in z'n algemeenheid de standaard voor Sun workstations), dan moet ook de optie `NFS Secure` aangezet worden in het menu menu:Options[] voor de installatie verder kan gaan.

Bij het gebruik van een Ethernetkaart van lage kwaliteit die last heeft van erg lage overdrachtssnelheden kan ook de vlag `NFS Slow` aangezet worden.

Om de installatie van NFS te laten werken, moet de server het aankoppelen van submappen ondersteunen. Als bijvoorbeeld een FreeBSD {rel120-current} distributie op [.filename]#ziggy:/usr/archive/stuff/FreeBSD# staat, dan moet `ziggy` toestaan dat [.filename]#/usr/archive/stuff/FreeBSD# rechtstreeks wordt aangekoppeld en niet alleen [.filename]#/usr# of [.filename]#/usr/archive/stuff#.

Dit wordt vanuit het FreeBSD-bestand [.filename]#/etc/exports# geregeld door de opties `-alldirs`. Andere NFS servers kunnen andere gewoontes hebben. Bij een foutbericht `permission denied` van de server is het waarschijnlijk dat deze niet goed is ingesteld.
