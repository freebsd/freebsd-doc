---
title: Chapitre 2. Installer FreeBSD
part: Partie I. Pour commencer
prev: books/handbook/introduction
next: books/handbook/basics
showBookMenu: true
weight: 4
path: "/books/handbook/bsdinstall/"
---

[[bsdinstall]]
= Installing FreeBSD
:doctype: book
:toc: macro
:toclevels: 1
:icons: font
:sectnums:
:sectnumlevels: 6
:sectnumoffset: 2
:partnums:
:source-highlighter: rouge
:experimental:
:images-path: books/handbook/bsdinstall/

ifdef::env-beastie[]
ifdef::backend-html5[]
:imagesdir: ../../../../images/{images-path}
endif::[]
ifndef::book[]
include::shared/authors.adoc[]
include::shared/mirrors.adoc[]
include::shared/releases.adoc[]
include::shared/attributes/attributes-{{% lang %}}.adoc[]
include::shared/{{% lang %}}/teams.adoc[]
include::shared/{{% lang %}}/mailing-lists.adoc[]
include::shared/{{% lang %}}/urls.adoc[]
toc::[]
endif::[]
ifdef::backend-pdf,backend-epub3[]
include::../../../../../shared/asciidoctor.adoc[]
endif::[]
endif::[]

ifndef::env-beastie[]
toc::[]
include::../../../../../shared/asciidoctor.adoc[]
endif::[]

[[bsdinstall-synopsis]]
== Synopsis

En fonction de l'environnement utilisé, il existe plusieurs manières différentes pour obtenir un FreeBSD en mesure de fonctionner. Il existe des:

* Images de machines virtuelles, à télécharger et à importer dans l'environnement virtuel de votre choix. Elles peuvent être récupérées à partir de la page https://www.freebsd.org/where/[Download FreeBSD]. Il existe des images pour KVM ("qcow2"), VMWare ("vmdk"), Hyper-V ("vhd"), ainsi que des images disque brutes ("raw") qui sont universellement supportées. Ce ne sont pas des images d'installation, mais plutôt des instances préconfigurées ("déjà installées"), prêtes à fonctionner et à effectuer les tâches de post-installation.
* Images de machines virtuelles disponibles sur les plateformes Amazon https://aws.amazon.com/marketplace/pp/B07L6QV354[AWS Marketplace], https://azuremarketplace.microsoft.com/en-us/marketplace/apps?search=freebsd&page=1[Microsoft Azure Marketplace], et https://console.cloud.google.com/marketplace/details/freebsd-cloud/freebsd-12[Google Cloud Platform], à exécuter sur leurs services d'hébergement respectifs. Pour plus d'information sur le déploiement de FreeBSD sur Azure, veuillez consulter le chapitre correspondant de la https://docs.microsoft.com/en-us/azure/virtual-machines/linux/freebsd-intro-on-azure[Documentayion Azure].
* Images disque de cartes SD, pour les systèmes embarqués comme le Raspberry Pi ou le BeagleBone Black. Elles peuvent être téléchargées à partir de la page https://www.freebsd.org/where/[Download FreeBSD]. Ces fichiers doivent être décompressés et écrits sur une carte SD, comme un fichier d'image disque brut, à partir de laquelle la carte embarquée pourra démarrer.
* Images disque d'installation, pour installer FreeBSD sur un disque dur pour les ordinateurs de bureau, ordinateurs portables ou les systèmes serveurs.

Le reste de ce chapitre décrit les quatre cas, en expliquant comment installer FreeBSD en utilisant un programme d'installation en mode texte appelé bsdinstall.

Par défaut, les instructions d'installation de ce chapitre sont écrites pour les architectures i386(TM) et AMD64. Où elles seront applicables, des instructions spécifiques à d'autres architectures seront indiquées. Il peut y avoir des différences mineures entre le programme d'installation et ce qui est montré ici, aussi il faut utiliser ce chapitre comme un guide général plutôt qu'une suite d'instructions à suivre à la ligne près.

[NOTE]
====
Les utilisateurs préférant installer FreeBSD à l'aide d'un programme d'installation graphique peuvent être intéressés par https://ghostbsd.org[GhostBSD], https://www.midnightbsd.org[MidnightBSD] ou https://www.nomadbsd.org[NomadBSD].
====

Après la lecture de ce chapitre, vous connaîtrez:

* La configuration matérielle minimale nécessaire et les architectures matérielles supportées par FreeBSD.
* Comment créer le support d'installation de FreeBSD.
* Comment lancer bsdinstall.
* Les questions que bsdinstall posera, ce qu'elles signifient, et comment y répondre.
* Comment dépanner une installation qui a échoué.
* Comment accéder à la version "live" de FreeBSD avant d'effectuer une installation.

Avant de lire ce chapitre, vous devrez:

* Lire la liste du matériel supporté fournie avec la version de FreeBSD qui va être installée, et vérifier que le matériel du système est supporté.

[[bsdinstall-hardware]]
== Configuration matérielle minimale

La configuration minimale pour installer FreeBSD varie avec l'architecture matérielle concernée. Les architectures matérielles et les périphériques supportés par une version de FreeBSD sont listés sur la page d'link:https://www.FreeBSD.org/releases/[Information sur les versions de FreeBSD]. La page de link:https://www.FreeBSD.org/where/[Téléchargement de FreeBSD] donne également des recommandations pour le choix de l'image correcte pour les différentes architectures/

Une installation de FreeBSD nécessite un minimum de 96 Mo de RAM et 1.5 Go d'espace libre sur le disque dur. Néanmoins, des quantités aussi faibles de mémoire et d'espace disque ne sont réellement utilisables que pour des applications particulières comme les applications embarquées. Un ordinateur d'usage général aura besoin de plus de ressources. 2-4 Go de RAM et au moins 8 Go d'espace disque sont un bon point de départ.

Voici les contraintes sur les processeurs pour chaque architecture:

amd64::
C'est le type de processeur pour ordinateur de bureau et portable le plus courant, utilisé dans les systèmes modernes. Intel(R) l'appelle Intel64. D'autres fabricants l'appelle parfois x86-64.
+
Des exemples de processeurs compatibles amd64 comprennent: les AMD Athlon(TM)64, AMD Opteron(TM), Intel(R) Xeon(TM) multi-coeurs, Intel(R) Core(TM) 2 et processeurs suivants.

i386::
Les ordinateurs de bureau et portables plus anciens utilisent souvent cette architecture x86 32bits.
+
Presque tous les processeurs compatibles i386 avec une unité de calcul en virgule flottante sont supportés. Tous les processeurs Intel(R) 486 ou supérieurs sont supportés.
Néanmoins, les binaires publiés par le projet sont compilés pour le
processeur 686, une version spécifiquement compilée sera nécessaire pour
les systèmes 486 et 586.
+
FreeBSD utilisera le support de l'extension d'adresse physique ("Physical Address Extensions" ou PAE) sur les CPUs avec cette fonctionnalité. Un noyau avec la fonctionnalité PAE activée détectera la mémoire au-dessus de 4 Go et permettra son utilisation par le système. Néanmoins, utiliser PAE ajoutera des contraintes aux pilotes de périphériques et à d'autres fonctionnalités de FreeBSD.

arm64::
La plupart des cartes embarquées sont des systèmes à base d'ARM 64bits.
De nombreux serveurs arm64 sont supportés.

arm::
Les anciennes cartes armv7 sont supportées.

powerpc::
Tous les systèmes Apple(R) Mac(R) utilisant une ROM"New World" avec l'USB intégré sont supportés. Le fonctionnement SMP (multi-processeurs) est supporté sur les machines dotées de plusieurs CPUs.
+
Un noyau 32bits ne peut utiliser que les 2 premiers Go de RAM.

[[bsdinstall-pre]]
== Tâches de pré-installation

Une fois déterminé que le système répond bien aux exigences minimales en termes de matériel pour installer FreeBSD, le fichier d'installation devrait être téléchargé et le support d'installation préparé. Avant de faire cela, vérifier que le système est prêt pour une installation en vérifiant les différents éléments de la liste de contrôle suivante:

[.procedure]
====

. Sauvegarder les données importantes
+ 
Avant d'installer tout système d'exploitation, il faut _toujours_ en premier sauvegarder toutes les données importantes. Ne pas stocker la sauvegarde sur le système sur lequel aura lieu l'installation. A la place, sauvegarder les données sur un disque amovible comme un disque USB, sur un autre système sur le réseau, ou sur un système de sauvegarde en ligne. Tester la sauvegarde avant de lancer l'installation afin de s'assurer qu'elle contient tous les fichiers nécessaires. Quand le programme d'installation formate le disque du système, toutes les données stockées sur ce disque seront perdues.
. Où installer FreeBSD?
+ 
Si FreeBSD sera le seul système d'exploitation installé, cette étape peut être passée. Mais si FreeBSD partagera le disque avec un autre système d'exploitation, choisir quel disque ou partition sera utilisée pour FreeBSD.
+ 
Dans les architectures i386 et amd64, les disques durs peuvent être divisés en plusieurs partitions en utilisant une des deux méthodes de partitionnement. Le _Master Boot Record_ (MBR) traditionnel contient une table de partitions définissant jusqu'à quatre _partitions primaires_. Pour des raisons historiques, FreeBSD appelle ces partitions primaires _slices_ ( _tranches_). Une de ces partitions primaire peut devenir une _partition étendue_ contenant plusieurs _partitions logiques_. La _table de partitionnement GUID_ (_GUID Partition Table_ ou GPT) est une méthode nouvelle et plus simple pour partitionner un disque. Les implémentations classiques de GPT autorisent jusqu'à 128 partitions par disque, supprimant ainsi le recours à des partitions logiques.
+ 
Le chargeur d'amorçage de FreeBSD a besoin soit d'une partition primaire soit d'une partition GPT. Si toutes les partitions primaires ou GPT sont déjà utilisées, l'une d'entre elles devra être libérée pour FreeBSD. Pour créer une partition sans effacer les données existantes, utiliser un outil de redimensionnement de partition pour réduire une partition existante et créer une nouvelle partition en utilisant l'espace libéré.
+ 
De nombreux outils de partionnement gratuits et commerciaux sont listés sur http://en.wikipedia.org/wiki/List_of_disk_partitioning_software[ http://en.wikipedia.org/wiki/List_of_disk_partitioning_software]. GParted Live (http://gparted.sourceforge.net/livecd.php[http://gparted.sourceforge.net/livecd.php]) est un CD Live gratuit qui comprend l'éditeur de partition GParted. GParted est également disponible sur d'autres CDs Live Linux.
+
[WARNING]
======

Utilisés correctement, les outils de redimensionnement des disques peuvent créer, sans risque, l'espace nécessaire pour la création d'une nouvelle partition. Etant donnée que la possibilité de sélectionner la mauvaise partition existe, effectuer toujours une sauvegarde des données importantes et vérifier son intégrité avant de modifier les partitions du disque.
======
+ 
Disposer de différentes partitions contenant chacune un système d'exploitation différent rend possible l'installation de plusieurs systèmes d'exploitation sur un ordinateur. Une autre méthode est d'utiliser la virtualisation (crossref:virtualization[virtualization,Virtualisation]) qui permet l'exécution simultanée de plusieurs systèmes d'exploitation sans avoir à modifier les partitions du disque dur.
. Récupérer les informations relatives au réseau
+ 
Certaines méthodes d'installation de FreeBSD requièrent une connexion réseau pour télécharger les fichiers d'installation. Après toute installation, le programme d'installation proposera de configurer les interfaces réseau du système.
+ 
Si le réseau dispose d'un serveur DHCP, il peut être utilisé pour fournir une configuration réseau automatique. Si la configuration par DHCP n'est pas possible, les informations réseau suivantes pour le système doivent être obtenues auprès de l'administrateur réseau ou du fournisseur d'accès:
[[bsdinstall-collect-network-information]]
.. Adresse IP
.. Masque de sous-réseau
.. Adresse IP de la passerelle par défaut
.. Nom de domaine du réseau
.. Adresse(s) IP du serveur DNS du réseau

. Vérifier l'Errata FreeBSD
+ 
Bien que le projet FreeBSD s'efforce de s'assurer que chaque version de FreeBSD soit aussi stable que possible, des bogues peuvent parfois exister. Il est très rare que ces bogues affectent le processus d'installation. Dès que ces problèmes sont découverts et corrigés, ils sont notés dans l'Errata de FreeBSD (link:https://www.FreeBSD.org/releases/{rel121-current}r/errata/[https://www.freebsd.org/releases/{rel121-current}r/errata/]) présent sur le site Web de FreeBSD. Vérifier l'errata avant l'installation afin d'être sûr qu'il n'y a pas de problème pouvant affecter l'installation.
+ 
Les informations sur chaque version, y compris les errata, peuvent être trouvés sur le site web de FreeBSD dans la section d'information sur les différentes versions (link:https://www.FreeBSD.org/releases/[https://www.freebsd.org/releases/]).
====

[[bsdinstall-installation-media]]
=== Préparer le support d'installation

Le programme d'installation FreeBSD n'est pas une application qui peut être exécutée à partir d'un autre système d'exploitation. Au lieu de cela, télécharger un fichier d'installation de FreeBSD, copiez-le sur le support correspondant à sa taille (CD, DVD, ou clé USB) et démarrer le système pour installer à partir du support inséré ou branché sur l'ordinateur.

Les fichiers d'installation de FreeBSD sont disponibles sur link:https://www.FreeBSD.org/where/#download[www.freebsd.org/where/#download]. Chaque nom de fichier d'installation contient le numéro de la version de FreeBSD, l'architecture et le type de fichier. Par exemple pour installer FreeBSD 12.1 sur un système amd64 à partir d'un DVD, téléchargez [.filename]##FreeBSD-12.1-RELEASE-amd64-dvd1.iso##, gravez ce fichier sur un DVD, et démarrer le système avec le DVD inséré.

Les fichiers d'installation sont disponibles dans différents formats. Les formats varient en fonction de l'architecture matérielle et du type de support.

[[bsdinstall-installation-media-uefi]]
Des fichiers d'installation supplémentaires sont prévus pour les ordinateurs qui sont amorcés par UEFI (Unified Extensible Firmware Interface pour "Interface micrologicielle extensible unifiée"). Le nom de ces fichiers comprend la chaîne de caractères [.filename]#uefi#.

Types de fichiers:

* `-bootonly.iso`: C'est le plus petit fichier d'installation car il ne contient que le programme d'installation. Une connexion à Internet fonctionnelle est requise lors de l'installation puisque le programme d'installation téléchargera les fichiers nécessaires pour effectuer l'installation de FreeBSD. Ce fichier doit être gravé sur un CD en utilisant une application de gravure de CDs.
* `-disc1.iso`: Ce fichier contient tous les fichiers nécessaires pour installer FreeBSD, ses sources, et le catalogue des logiciels portés. Il doit être gravé sur un CD en utilisant une application de gravure de CDs.
* `-dvd1.iso`: Ce fichier contient tous les fichiers nécessaires pour installer FreeBSD, ses sources, et le catalogue des logiciels portés. Il contient également un ensemble de paquetages binaires populaires pour installer un gestionnaire de fenêtres et des applications de manière à ce qu'un système complet puisse être installé sans nécessiter une connexion à Internet. Ce fichier être gravé sur un DVD en utilisant une application de gravure de DVDs.
* `-memstick.img`: Ce fichier contient tous les fichiers nécessaires pour installer FreeBSD, ses sources, et le catalogue des logiciels portés. Il doit être copié sur une clé USB en suivant les instructions données plus bas.
* `-mini-memstick.img`: Comme `-bootonly.iso`, ne contient pas les fichiers d'installation, mais les téléchargera au fur et à mesure des besoins. Une connexion à Internet fonctionnelle est requise lors de l'installation. Copier ce fichier sur une clé USB comme décrit dans <<bsdinstall-usb>>.

Après avoir téléchargé le fichier image du support d'installation, téléchargez également le fichier [.filename]#CHECKSUM.SHA256# à partir du même répertoire. Calculez une _somme de contrôle_ ou _checksum_ du fichier image. FreeBSD fournit man:sha256[1] à cet effet, à utiliser comme `sha256 _fichierimage_`. Les autres systèmes d'exploitation proposent des outils similaires.

Comparez la somme de contrôle calculée avec celle donnée dans le fichier [.filename]#CHECKSUM.SHA256#. Les sommes de contrôle doivent être identiques. Si une des sommes ne correspond pas, le fichier est corrompu et devra être téléchargé à nouveau.

[[bsdinstall-usb]]
==== Ecrire un fichier image sur un disque USB

Le fichier [.filename]#\*.img# est une _image_ de l'intégralité du contenu d'une clé USB. Il _ne peut pas_ être copié directement vers le périphérique de destination comme un simple fichier. Plusieurs applications existent pour écrire le fichier [.filename]#*.img# sur une clé USB. Cette section décrit deux de ces utilitaires.

[IMPORTANT]
====
Avant de continuer, sauvegardez toutes les données importantes présentes sur la clé USB. Cette procédure effacera toutes les données sur la clé.
====

[[bsdinstall-usb-dd]]
[.procedure]
====

*Procedure: Utiliser `dd` pour écrire une image*
[WARNING]
======

Cet exemple prend [.filename]#/dev/da0# comme périphérique cible sur lequel l'image sera écrite. Vérifiez que le périphérique utilisé comme cible est bien le bon, car cette commande détruira les données existantes.
======
. L'utilitaire en ligne de commande man:dd[1] est disponible sur les systèmes BSD, Linux(R), et Mac OS(R). Pour écrire une image en utilisant `dd`, brancher la clé USB et déterminez son nom de périphérique. Indiquer, alors, le nom du fichier d'installation téléchargé et le nom du périphérique pour la clé USB. Cet exemple écrit le fichier image d'installation amd64 sur le premier périphérique USB sur un système FreeBSD existant.
+
[source,shell]
....
# dd if=FreeBSD-12.1-RELEASE-amd64-memstick.img of=/dev/da0 bs=1M conv=sync
....
+ 
Si cette commande échoue, vérifier que la clé USB n'est pas montée et que le nom de périphérique est bien celui d'un disque et non d'une partition. Certains systèmes d'exploitation pourront nécessiter l'exécution de cette commande avec man:sudo[8]. La syntaxe man:dd[1] varie légèrement en fonction des plate-formes; par exemple, Mac OS(R) a besoin d'un `bs=1m` en minuscules. Des systèmes comme Linux(R) pourront mettre en tampon les écritures. Pour forcer toutes les écritures en attente à s'effectuer, utiliser man:sync[8].
====

[.procedure]
====
*Procedure: Utiliser Windows(R) pour écrire l'image*

[WARNING]
======

Assurez-vous de préciser le bon disque comme cible, car les données existantes sur ce disque seront écrasées et détruites.
======
. Récupérer Image Writer for Windows(R)
+ 
Image Writer for Windows(R) est une application gratuite pour écrire une image sur une clé USB. Téléchargez-la depuis https://sourceforge.net/projects/win32diskimager/[https://sourceforge.net/projects/win32diskimager/] et décompressez-la dans un répertoire.
. Ecrire l'image avec Image Writer
+ 
Double-cliquez sur l'icone Win32DiskImager pour lancer le programme. Vérifiez que le lecteur affiché sous `Device` est celui de la clé USB. Cliquer sur l'icone répertoire et sélectionner l'image à écrire sur la clé. Cliquer sur btn:[Save] pour accepter le nom du fichier image. Vérifiez que tout est correct, et qu'il n'y a pas de répertoires présents sur la clé USB ouverts dans d'autres fenêtres. Puis quand tout est prêt, cliquer sur btn:[Write] pour écrire le fichier image sur la clé USB.
====

Vous êtes maintenant prêt à commencer l'installation de FreeBSD.

[[bsdinstall-start]]
== Lancer l'installation

[IMPORTANT]
====
Par défaut, le processus d'installation ne modifiera rien sur le(s) disque(s) dur(s) jusqu'au message suivant:

[.programlisting]
....
Your changes will now be written to disk. If you
have chosen to overwrite existing data, it will
be PERMANENTLY ERASED. Are you sure you want to
commit your changes?
....

L'installation peut être quittée à tout moment avant cet avertissement. Si quelque chose a mal été configurée, arrêtez juste l'ordinateur avant ce point, et aucun changement ne sera effectué sur le disque dur.
====

Cette section décrit comment démarrer le système à partir du support d'installation qui a été préparé à l'aide des instructions de <<bsdinstall-installation-media>>. Pour démarrer avec une clé USB démarrable, brancher la clé USB avant d'allumer l'ordinateur. Pour démarrer avec un CD ou un DVD, allumer l'ordinateur et insérer le disque à la première occasion. Comment configurer le système pour démarrer à partir du support utilisé dépend de l'architure matérielle.

[[bsdinstall-starting-i386]]
=== Démarrage pour les architectures i386(TM) et amd64

Ces architectures disposent d'un menu du BIOS pour sélectionner le périphérique de démarrage. En fonction du support de démarrage choisi, sélectionner le lecteur CD/DVD ou l'USB comme premier périphérique de démarrage. La plupart des systèmes proposent également la sélection du périphérique d'amorçage au démarrage à l'aide d'une touche sans avoir à entrer dans le BIOS. Généralement, la touche est soit kbd:[F10], soit kbd:[F11], soit kbd:[F12], ou encore kbd:[Escape].

Si l'ordinateur charge le système d'exploitation existant, alors soit:

. Le support d'installation n'a pas été inséré suffisamment tôt lors du processus de démarrage. Laisser le support inséré, et essayer de redémarrer l'ordinateur.
. Soit les modifications du BIOS étaient incorrectes ou non-sauvegardées. Vérifier à nouveau que le bon périphérique a été choisi comme premier périphérique de démarrage.
. Ce système est trop ancien pour supporter l'amorçage à partir du support choisi. Dans ce cas, le gestionnaire de démarrage Plop (http://www.plop.at/en/bootmanager.html[http://www.plop.at/en/bootmanager.html]) peut être utilisé pour démarrer à partir du support sélectionné.

=== Démarrage pour l'architecture PowerPC(R)

Sur la plupart des machines, maintenir la touche kbd:[C] enfoncée lors du démarrage provoquera l'amorçage du CD. Sinon appuyez sur kbd:[Command+Option+O+F], ou kbd:[Windows+Alt+O+F] dans le cas des claviers non-Apple(R). A l'invite `0`, entrez:

[source,shell]
....
 boot cd:,\ppc\loader cd:0
....

[[bsdinstall-view-probe]]
=== Menu d'amorçage FreeBSD

Une fois le système démarré à partir du support d'installation, un menu similaire au suivant sera affiché:

[[bsdinstall-newboot-loader-menu]]
.Menu du chargeur FreeBSD
image::bsdinstall-newboot-loader-menu.png[]

Par défaut, le menu attendra dix secondes une saisie de l'utilisateur avant de démarrer dans le programme d'installation de FreeBSD ou, si FreeBSD est déjà installé, avant de démarrer sous FreeBSD. Pour mettre en pause ce décompte afin d'examiner les options offertes, appuyer sur kbd:[Espace]. Pour sélectionner une option, appuyer sur le chiffre, le caractère ou la touche en surbrillance. Les options disponibles sont les suivantes.

* `Boot Multi User` (Démarrage en mode multi-utilisateur): Cette option provoquera la poursuite du processus de démarrage de FreeBSD. Si le décompte du démarrage a été mis en pause, appuyer sur kbd:[1], kbd:[B] majuscule ou minuscule, ou encore kbd:[Entrée].
* `Boot Single User` (Démarrage en mode mono-utilisateur): Ce mode peut être employé pour réparer une installation de FreeBSD existante comme décrit dans la crossref:boot[boot-singleuser,Mode mono-utilisateur]. Appuyer sur kbd:[2] ou kbd:[B] majuscule ou minuscule pour entrer dans ce mode.
* `Escape to loader prompt` (Quitter vers l'interpréteur de commandes du chargeur): Cela démarrera le système dans l'interpréteur de commandes du chargeur qui offre un nombre limité de commandes bas-niveau. Cette invite de commandes est abordée dans la crossref:boot[boot-loader,Etape trois,/boot/loader]. Appuyer sur kbd:[3] ou kbd:[Echap] pour démarrer dans ce mode.
* `Reboot`: Redémarre le système.
* `Kernel`: Charge un noyau différent.
* `Configure Boot Options`: Ouvre le menu montré et décrit sur la <<bsdinstall-boot-options-menu>>.

[[bsdinstall-boot-options-menu]]
.Menu des options du chargeur FreeBSD
image::bsdinstall-boot-options-menu.png[]

Le menu des options du chargeur est divisé en deux parties. La première partie peut être utilisée pour soit retourner au menu de démarrage principal soit pour réinitialiser les options à leur valeur par défaut.

La partie suivante est utilisée pour positionner les options disponibles sur `On` ou `Off` en appuyant sur le chiffre ou le caractère en surbrillance pour chaque option. Le système démarre toujours en utilisant le paramétrage choisi pour ces options jusqu'à ce qu'il soit modifié. Plusieurs options peuvent être modifées en utilisant ce menu:

* `ACPI Support`: Si le système se fige au démarrage, essayer de positionner cette option à `Off`.
* `Safe Mode`: Si le système se fige toujours durant le démarrage même avec l'option `ACPI Support` à `Off`, essayer de positionner cette option à `On`.
* `Single User` (Mono-utilisateur): Positionner cette option sur `On` pour réparer une installation existante de FreeBSD comme décrit dans la crossref:boot[boot-singleuser,Mode mono-utilisateur]. Une fois le problème réglé, repositionner l'option à `Off`.
* `Verbose` (Verbeux): Positionner cette option sur `On` pour voir des messages plus détaillés lors du processus de démarrage. Cela peut être utile pour dépanner un matériel.

Après avoir effectué les sélections nécessaires, appuyer sur kbd:[1] ou kbd:[Retour arrière] pour retourner au menu de démarrage principal, puis appuyer sur kbd:[Entrée] pour démarrer sous FreeBSD. Une série de messages de démarrage apparaîtra au fur et à mesure que FreeBSD détectera le matériel et chargera le programme d'installation. Une fois le démarrage achevé, le menu d'accueil de la <<bsdinstall-choose-mode>> sera affiché.

[[bsdinstall-choose-mode]]
.Menu d'accueil
image::bsdinstall-choose-mode.png[]

Appuyer sur kbd:[Enter] pour sélectionner btn:[Install] pour entrer dans le programme d'installation. Le reste de ce chapitre décrit comment utiliser ce programme d'installation. Sinon, utiliser la flèche droite ou gauche ou les lettres colorées pour sélectionner l'élément désiré. btn:[Shell] peut être sélectionné pour accéder à un interpréteur de commandes FreeBSD afin d'utiliser des utilitaires en ligne de commande pour préparer les disques avant l'installation. L'option btn:[Live CD] peut être employée pour tester FreeBSD avant de l'installer. Cette option est décrite dans la <<using-live-cd>>.

[TIP]
====

Pour relire les messages de démarrage, dont la détection du matériel, appuyer sur la touche kbd:[S] majuscule ou minuscule, puis sur kbd:[Entrée] pour accéder à un interpréteur de commandes. A l'invite, taper `more /var/run/dmesg.boot` et utiliser la barre d'espace pour faire défiler les messages. Une fois terminé, taper `exit` pour revenir au menu d'accueil.
====

[[using-bsdinstall]]
== Utilisation de bsdinstall

Cette section présente dans l'ordre les menus de bsdinstall et le type d'information qui sera demandé avant l'installation du système. Utiliser les touches fléchées pour sélectionner un menu, et ensuite la touche kbd:[Espace] pour sélectionner ou déselectionner cet élément du menu. Une fois terminé, utiliser kbd:[Enter] pour sauvegarder la sélection et passer à l'écran suivant.

[[bsdinstall-keymap]]
=== Sélectionner le menu des tables de clavier

Avant de démarrer le processus d'installation, bsdinstall chargera les fichiers de tables de clavier comme indiqué dans <<bsdinstall-keymap-loading>>.

[[bsdinstall-keymap-loading]]
.Chargement de la table de clavier
image::bsdinstall-keymap-loading.png[]

Après le chargement des tables de clavier, bsdinstall affiche le menu montré sur <<bsdinstall-keymap-10>>. Utilisez les flèches haut et bas pour choisir la table de clavier la plus proche de celle du clavier relié au système. Appuyer sur kbd:[Enter] pour sauvegarder la sélection.

[[bsdinstall-keymap-10]]
.Menu de sélection de la table de clavier
image::bsdinstall-keymap-10.png[]

[NOTE]
====
Un appui sur kbd:[Echap] provoquera la sortie de ce menu et l'utilisation de la table par défaut. Si le choix ne semble pas évident, choisir [.guimenuitem]#United States of America ISO-8859-1# est conseillé.
====

De plus, lors de la sélection d'une table de clavier différente, l'utilisateur peut tester la table et s'assurer qu'elle est correcte avant de prendre en compte le changement comme montré sur <<bsdinstall-keymap-testing>>.

[[bsdinstall-keymap-testing]]
.Menu de test de la table de clavier
image::bsdinstall-keymap-testing.png[]

[[bsdinstall-hostname]]
=== Configurer le nom de la machine

Le menu bsdinstall suivant est utilisé pour configurer le nom de machine à donner au système nouvellement installé.

[[bsdinstall-config-hostname]]
.Configuration du nom de machine
image::bsdinstall-config-hostname.png[]

Saisir un nom de machine qui est unique sur le réseau. Cela doit être un nom de machine complet comme `machine3.example.com`

[[bsdinstall-components]]
=== Choisir les composants à installer

Ensuite, bsdinstall demandera de choisir les composants optionnels à installer.

[[bsdinstall-config-components]]
.Sélection des composants à installer
image::bsdinstall-config-components.png[]

Décider quels composants installer dépendra principalement de l'utilisation prévue du système et de l'espace disque disponible. Le noyau FreeBSD et les utilitaires de base, formant ensemble ce que l'on nomme le _système de base_, sont toujours installés. Selon l'architecture, certains de ces composants peuvent ne pas apparaître:

* `base-dbg` - Outils de base comme cat, ls parmi tant d'autres avec les symboles de débogage activés.
* `kernel-dbg` - Noyau et modules avec les symboles de débogage activés.
* `lib32-dbg` - Bibliothèques de compatibilité pour l'exécution d'applications 32bits sur une version 64bits de FreeBSD avec les symboles de débogage activés.
* `lib32` - Bibliothèques de compatibilité pour l'exécution d'applications 32bits sur une version 64bits de FreeBSD.
* `ports` - Le catalogue des logiciels portés pour FreeBSD.
+ 
Le catalogue des logiciels portés est un ensemble de fichiers qui automatise le téléchargement, la compilation et l'installation de logiciels tierce-partie. Le crossref:ports[ports,Installer des applications. les logiciels pré-compilés et les logiciels portés] discute de l'utilisation du catalogue des logiciels portés.
+
[WARNING]
====

Le programme d'installation ne vérifie pas la présence de l'espace requis. Sélectionner cette option uniquement si l'espace disque suffisant est disponible. Le catalogue des logiciels portés occupe environ {ports-size} d'espace disque.
====

* `src` - Code source complet du noyau et du système de base. Bien que n'étant pas requis pour la majorité des applications, il peut être nécessaire pour compiler des pilotes de périphériques, des modules du noyau, ou des applications du catalogue des logiciels portés. Il est également utilisé pour le développement de FreeBSD. L'arborescence complète des sources demande 1 Go d'espace disque, et la recompilation du système FreeBSD complet nécessite 5 Go d'espace supplémentaire.
* `tests` - Suite d'outils de test pour FreeBSD.

[[bsdinstall-netinstall]]
=== Installation à partir du réseau

Le menu affiché dans <<bsdinstall-netinstall-notify>> n'apparaît que lors de l'installation à partir d'une image [.filename]#-bootonly.iso# ou [.filename]#-mini-memstick.img# étant donné que ces supports d'installation ne contiennent pas de copie des fichiers d'installation. Comme les fichiers d'installation doivent être récupérés par l'intermédiaire d'une connexion réseau, ce menu indique qu'une interface réseau doit être configurée en premier lieu. Si ce menu est affiché à un moment donné de l'installation, pensez à suivre les instructions données dans <<bsdinstall-config-network-dev>>.

[[bsdinstall-netinstall-notify]]
.Installation à partir du réseau
image::bsdinstall-netinstall-files.png[]

[[bsdinstall-partitioning]]
== Allouer l'espace disque

Le menu suivant est utilisé pour déterminer la méthode pour allouer l'espace disque.

[[bsdinstall-zfs-partmenu]]
.Choix du partitionnement
image::bsdinstall-zfs-partmenu.png[]

bsdinstall propose à l'utilisateur quatre méthodes pour allouer l'espace disque:

* le partitionnement `Auto (UFS)` fixe automatiquement les partitions disque et utilise le système de fichiers `UFS`.
* le partitionnement `Manual` ("Manuel") permet aux utilisateurs avancés de créer des partitions sur mesures à partir des options du menu.
* `Shell` ouvre une invite d'interpréteur de commandes dans laquelle les utilisateurs avancés peuvent créer des partitions sur mesures en utilisant des utilitaires en ligne de commande comme man:gpart[8], man:fdisk[8], et man:bsdlabel[8].
* le partitionnement `Auto (ZFS)` créé un système de fichiers racine sur ZFS avec le support optionnel du chiffrement GELI pour les _environnements de démarrage_.

Cette section décrit ce qui doit être pris en compte lors du partitionnement du disque. Elle montre ensuite comment utiliser les différentes méthodes de partionnement.

[[configtuning-initial]]
=== Choix du partitionnement

Lors du partitionnement, il faut garder à l'esprit que les disques durs transfèrent les données plus rapidement depuis les pistes extérieures que depuis les pistes intérieures. Aussi, les systèmes de fichiers plus petits et très sollicités devraient être positionnés vers l'extérieur du disque, alors que les partitions plus grandes comme [.filename]#/usr# devraient être placées vers l'intérieur du disque. C'est une bonne idée de créer les partitions dans l'ordre suivant: [.filename]#/#, espace de pagination, [.filename]#/var#, et [.filename]#/usr#.

La taille de la partition [.filename]#/var# reflète l'utilisation prévue de la machine. Cette partition est utilisée pour contenir les boîtes aux lettres de messagerie, les fichiers journaux, et les queues d'impression. Les boîtes aux lettres et les fichiers journaux peuvent croître jusqu'à atteindre des tailles inattendues en fonction du nombre d'utilisateurs et combien de temps sont conservés les fichiers journaux. En moyenne, la plupart des utilisateurs n'auront rarement besoin de plus d'un gigaoctet d'espace disque pour [.filename]#/var#.

[NOTE]
====
Parfois, beaucoup d'espace disque est nécessaire pour [.filename]#/var/tmp#. Quand de nouveaux logiciels sont installés, les outils de paquetage extraient une copie temporaire des paquetages dans [.filename]#/var/tmp#. Les logiciels importants comme Firefox, ou LibreOffice peuvent être délicats à installer si l'espace disque dans [.filename]#/var/tmp# n'est pas suffisant.
====

La partition [.filename]#/usr# contient beaucoup de fichiers nécessaires au système, dont le catalogue des logiciels portés de FreeBSD et le code source du système. Au moins 2 gigaoctets d'espace sont recommandés pour cette partition.

Lors du choix de la taille des partitions, gardez à l'esprit les besoins en espace. Manquer d'espace sur une partition alors qu'une autre est à peine utilisée peut être très frustrant.

Par principe, votre espace de pagination devrait typiquement avoir une taille double de la quantité de mémoire physique (RAM). Les systèmes avec peu de mémoire RAM pourront avoir de meilleures performances avec beaucoup plus d'espace de pagination. Configurer trop peu d'espace de pagination peut conduire à une certaine inefficacité du code de pagination de la mémoire virtuelle (VM) et peut être à l'origine de problèmes ultérieurement si vous ajoutez plus de mémoire à votre système.

Sur des systèmes importants avec de multiples disques SCSI ou de multiples disques IDE fonctionnant sur différents contrôleurs, il est vivement recommandé que vous configuriez un espace de pagination sur chaque disque, jusqu'à quatre disques. Les partitions de pagination sur les différents disques devront avoir approximativement la même taille. Le noyau peut gérer des tailles arbitraires mais les structures de données internes sont dimensionnées pour 4 fois la taille de la plus grande partition de pagination. Garder la taille des partitions de pagination proche permettra au noyau de répartir de manière optimale l'espace de pagination entre les disques. Des espaces de pagination importants ne sont pas problématiques, même s'ils sont peu utilisés. Il peut être plus simple de récupérer la main face un programme incontrôlable avant d'être forcé à redémarrer la machine.

En partitionnant correctement votre système, la fragmentation introduite sur les partitions plus petites et plus chargées en écriture ne s'étendra pas sur les partitions principalement utilisées en lecture. De plus, avoir les partitions principalement utilisées en écriture proche du bord du disque augmentera les performances d'E/S sur les partitions qui le demandent le plus. Bien qu'il soit nécessaire d'avoir de bonnes performances d'E/S sur les grandes partitions, les déplacer plus vers l'extérieur du disque ne donnera pas lieu à une augmentation significative des performances alors que le déplacement de performances alors que le déplacement de [.filename]#/var# vers le bord peut avoir un sérieux impact.

[[bsdinstall-part-guided]]
=== Partitionnement guidé avec utilisation d'UFS

Quand cette méthode est sélectionnée, un menu affichera le(s) disque(s) disponible(s). Si plusieurs disques sont connectés, choisissez celui sur lequel FreeBSD doit être installé.

[[bsdinstall-part-guided-disk]]
.Sélection parmi plusieurs disques
image::bsdinstall-part-guided-disk.png[]

Une fois le disque sélectionné, le menu suivant demande si l'installation se fait soit sur l'intégralité du disque soit sur une partition à créer à partir de l'espace libre. Si btn:[Entire Disk] est sélectionné, une partition recouvrant la totalité du disque est automatiquement créée. Sélectionner btn:[Partition] créé une partition dans l'espace inutilisé du disque.

[[bsdinstall-part-entire-part]]
.Sélection de l'intégralité du disque ou d'une partition
image::bsdinstall-part-entire-part.png[]

Après la sélection de btn:[Entire Disk], bsdinstall affiche une boîte de dialogue indiquant que le disque va être effacé.

[[bsdinstall-ufs-warning]]
.Confirmation
image::bsdinstall-ufs-warning.png[]

Le menu suivant montre une liste avec les différents types d'organisation des partitions. GPT est généralement le choix le plus adapté pour les ordinateurs de type amd64. Les ordinateurs plus anciens qui ne sont pas compatibles avec GPT devraient utiliser un partionnement de type MBR. Les autres types de partionnement sont généralement utilisés pour les ordinateurs peu courants ou anciens. Plus d'informations sont disponibles dans la <<partition-schemes>>.

[[bsdinstall-ufs-scheme]]
.Sélection du système de partionnement
image::bsdinstall-part-manual-partscheme.png[]

Une fois l'organisation des partitions créée, vérifiez-la afin de s'assurer qu'elle correspond bien aux besoins de l'installation. La sélection de btn:[Revert] permettra de revenir au partitionnement de départ, et l'appui sur btn:[Auto] créera les partitions FreeBSD automatiquement. Les partitions peuvent être créées, modifiées, ou supprimées manuellement. Quand le partitionnement est correct, sélectionner btn:[Finish] pour poursuivre l'installation.

[[bsdinstall-part-review]]
.Vérification des partitions créées
image::bsdinstall-part-review.png[]

Une fois les disques configurés, le menu suivant offre une dernière chance pour effectuer des modifications avant que les disques sélectionnés ne soient formatés. Si des changements doivent être faits, choisir btn:[Back] pour retourner dans le menu principal de partionnement. btn:[Revert  Exit] fera quitter le programme d'installation sans qu'aucun changement n'ait été appliqué au disque dur. Sélectionner btn:[Commit] pour lancer le processus d'installation.

[[bsdinstall-final-confirmation]]
.Confirmation finale
image::bsdinstall-final-confirmation.png[]

Pour poursuivre le processus d'installation, aller à la <<bsdinstall-fetching-distribution>>.

[[bsdinstall-part-manual]]
=== Partitionnement manuel

La sélection de cette méthode ouvre l'éditeur de partitions.

[[bsdinstall-part-manual-create]]
.Créer manuellement les partitions
image::bsdinstall-part-manual-create.png[]

Sélectionner le disque d'installation([.filename]#ada0# dans cet exemple) et btn:[Create] pour afficher un menu sur le choix du type de table de partitionnement.

[[bsdinstall-part-manual-partscheme]]
.Créer manuellement les partitions
image::bsdinstall-part-manual-partscheme.png[]

Le partitionnement GPT est généralement le choix le plus approprié pour les ordinateurs de type amd64 Les ordinateurs anciens qui ne sont pas compatibles avec GPT doivent utiliser à la place un partitionnement de type MBR. Les autres systèmes de partitionnement sont en général utilisés pour les ordinateurs plus anciens ou particuliers.

[[partition-schemes]]
.Tables de partitionnement
[cols="1,1", frame="none", options="header"]
|===
<| Abbréviation
<| Description

|APM
|Table de partition Apple, utilisée par l'architecture PowerPC(R).

|BSD
|Partition BSD (_BSD Labels_) sans MBR, parfois appelée _dangerously dedicated mode_ ou "mode dédié" car les utilitaires disques non-BSD peuvent ne pas la reconnaître.

|GPT
|Table de partition GUID (http://en.wikipedia.org/wiki/GUID_Partition_Table[http://en.wikipedia.org/wiki/GUID_Partition_Table"]).

|MBR
|Master Boot Record (http://en.wikipedia.org/wiki/Master_boot_record[http://en.wikipedia.org/wiki/Master_boot_record"]).
|===

Après avoir choisi et créé le partitionnement, sélectionner à nouveau btn:[Create] créera les nouvelles partitions. La touche kbd:[Tab] est utilisée pour déplacer le curseur entre les différents champs.

[[bsdinstall-part-manual-addpart]]
.Créer manuellement les partitions
image::bsdinstall-part-manual-addpart.png[]

Une installation standard de FreeBSD avec GPT utilise au moins trois partitions:

* `freebsd-boot` - Contient le code de démarrage FreeBSD.
* `freebsd-ufs` - Un système de fichiers UFS FreeBSD.
* `freebsd-zfs` - Un système de fichiers ZFS FreeBSD. Plus d'informations au sujet de ZFS est disponible dans le crossref:zfs[zfs,The Z File System (ZFS) ** Traduction en Cours **].
* `freebsd-swap` - Espace de pagination pour FreeBSD.

Consulter la page de manuel man:gpart[8] pour la description d'autres types de partitions disponibles pour GPT.

Des partitions avec plusieurs systèmes de fichiers peuvent être créées et certaines personnes préfèrent une organisation plus traditionnelle avec des partitions séparées pour les systèmes de fichiers [.filename]#/#, [.filename]#/var#, [.filename]#/tmp#, et [.filename]#/usr#. Consulter <<bsdinstall-part-manual-splitfs>>, pour un exemple.

Les tailles peuvent être entrées avec les abréviations courantes: _K_ for kilooctet, _M_ pour mégaoctets, ou _G_ pour gigaoctets.

[TIP]
====

Un alignement correct des secteurs sur le disque permet de meilleures performances, et créer des partitions de tailles multiples de 4Koctets permet de s'assurer de l'alignement sur les disques à secteur de 512 octets ou 4Koctets. Généralement, employer des tailles de partition qui sont des multiples d'1M ou 1G est le moyen le plus simple de garantir que chaque partition débute sur un multiple de 4K. Il existe une exception: la partition _freebsd-boot_ ne devrait pas dépasser 512K en raison de limitations du code de démarrage.
====

Un point de montage est nécessaire si cette partition contiendra un système de fichiers. Si une seule partition UFS unique sera créée, le point de montage devra être [.filename]#/#.

Un `Label` (ou étiquette) est le nom avec lequel la partition sera connue. Les noms ou numéros de disques peuvent varier si le disque est connecté à un contrôleur ou port différent, mais le label de partition ne changera pas. Se référer aux labels plutôt qu'aux noms de disques et numéros de partitions dans les fichiers comme [.filename]#/etc/fstab# rend le système plus tolérant aux changements de matériel. Les labels GPT apparaissent dans le répertoire [.filename]#/dev/gpt/# lorsqu'un disque est attaché au système. Les autres systèmes de partitionnement présentent d'autres possibilités au niveau des labels et leurs labels apparaissent sous différentes répertoires dans [.filename]#/dev/#.

[TIP]
====

Employez un label unique pour chaque partition pour éviter les conflits avec les labels identiques. Quelques lettres du nom du l'ordinateur, de son rôle, ou de son emplacement peuvent être ajoutées au label. Par exemple, `labroot` ou `rootfslab` pour la partition UFS racine de l'ordinateur appelé `lab`.
====

[[bsdinstall-part-manual-splitfs]]
.Création d'un système traditionnel de partitions pour systèmes de fichiers séparés
[example]
====
Pour une organisation traditionnelle de partitions dans laquelle les répertoires [.filename]#/#, [.filename]#/var#, [.filename]#/tmp#, et [.filename]#/usr# sont des systèmes de fichiers séparés ayant chacun leur propre partition, créer une table de partition GPT, puis créer les partitions comme montré ci-après. Les tailles de partitions indiquées sont celles typiques pour un disque de 20G. Si plus d'espace est disponible sur le disque cible, une partition de pagination ou une partition [.filename]#/var# plus importantes peuvent être utiles. Les labels utilisés ici sont préfixés par `ex` pour "exemple", mais le lecteur peut utiliser un autre label unique comme décrit plus haut.

Par défaut, le programme [.filename]#gptboot# de FreeBSD s'attend à ce que la première partition UFS trouvée soit la partition [.filename]#/#.

[.informaltable]
[cols="1,1,1,1", frame="none", options="header"]
|===
| Type de partition
| Taille
| Point de montage
| Label

|`freebsd-boot`
|`512K`
|
|

|`freebsd-ufs`
|`2G`
|[.filename]#/#
|`exrootfs`

|`freebsd-swap`
|`4G`
|
|`exswap`

|`freebsd-ufs`
|`2G`
|[.filename]#/var#
|`exvarfs`

|`freebsd-ufs`
|`1G`
|[.filename]#/tmp#
|`extmpfs`

|`freebsd-ufs`
|valeur proposée par défaut (le reste du disque)
|[.filename]#/usr#
|`exusrfs`
|===
====

Après la création des partitions, sélectionnez btn:[Finish] pour poursuivre l'installation et rendez-vous à la <<bsdinstall-fetching-distribution>>.

[[bsdinstall-part-zfs]]
=== Partitionnement guidé avec la racine du système de fichiers sur ZFS

Ce mode de partitionnement ne fonctionne qu'avec des disques entiers et effacera le contenu du disque entier. Le menu principal de configuration ZFS présente plusieurs options pour contrôler la création du pool (ensemble de stockage constitué d'un ou plusieurs disques).

[[bsdinstall-zfs-menu]]
.Menu de partionnement ZFS
image::bsdinstall-zfs-menu.png[]

Voici un résumé des options pouvant être utilisées dans ce menu:

* `Install` - Procède à l'installation avec les options sélectionnées.
* `Pool Type/Disks` - Permet la configuration du `Pool Type` et des disques qui formeront le pool. Le programme d'installation ZFS automatique ne supporte, actuellement qu'un seul périphérique virtuel ("top level vdev") de niveau supérieur en dehors du mode stripe (un seul disque ou concaténation de plusieurs disques). Pour créer des pools plus complexes, utilisez les instructions de la <<bsdinstall-part-shell>> pour créer le pool.
* `Rescan Devices` - Met à jour la liste des disques disponibles.
* `Disk Info` - Ce menu peut être utilisé pour inspecter chaque disque, y compris sa table des partitions et différentes autres informations comme la référence du modèle et son numéro de série s'ils sont disponibles.
* `Pool Name` - Fixe le nom du pool. Le nom par défaut est _zroot_.
* `Force 4K Sectors?` - Force l'utilisation de secteurs d'une taille de 4Ko. Par défaut, le programme d'installation créera automatiquement des partitions qui seront alignées sur des emplacements multiples de 4Ko et force ZFS à utiliser des secteurs de 4Ko. C'est sans risque même pour les disques avec des secteurs de 512 octets, et présente l'avantage de s'assurer que les pools créés sur des disques à secteurs de 512 octets pourront se voir ajouter, dans le futur, des disques avec secteurs de 4Ko comme espace de stockage supplémentaire ou en remplacement de disques défectueux. Appuyez sur la touche kbd:[Enter] pour choisir d'activer ou non cette option.
* `Encrypt Disks?` - Le chiffrement des disques permet à l'utilisateur de chiffer les disques avec GELI. Plus d'information au sujet du chiffrement des disques est disponible dans la crossref:disks[disks-encrypting-geli,Chiffrage des disques avec geli]. Appuyez sur la touche kbd:[Enter] pour choisir d'activer ou non cette option.
* `Partition Scheme` - Permet de choisir le système de partionnement. GPT est l'option recommandée dans la plupart des cas. Appuyez sur la touche kbd:[Enter] pour choisir parmi les differentes options.
* `Swap Size` - Fixe la quantité d'espace de pagination.
* `Mirror Swap?` - Permet à l'utilisateur de créer un miroir de l'espace de pagination sur chaque disque. Faites attention, activer l'espace de pagination en mode miroir rend les crashs dumps inutilisables. Appuyez sur la touche kbd:[Enter] pour choisir d'activer ou non cette option.
* `Encrypt Swap?` - Permet à l'utilisateur de chiffrer l'espace de pagination. Le système chiffre l'espace de pagination avec une clé temporaire à chaque démarrage du système et en change à chaque redémarrage. Appuyez sur la touche kbd:[Enter] pour choisir d'activer ou non cette option. Plus d'information au sujet du chiffrement de l'espace de pagination dans la crossref:disks[swap-encrypting,Chiffrage de l'espace de pagination].

Sélectionner kbd:[T] pour configurer le `Pool Type` et le ou les disques qui constitueront le pool.

[[bsdinstall-zfs-vdev_type]]
.Type de pool ZFS
image::bsdinstall-zfs-vdev_type.png[]

Voici un résumé des `Pool Type` pouvant être sélectionnés dans ce menu:

* `stripe` - Le mode striping ou entrelacé offre le maximum d'espace de stockage à partir de l'ensemble des périphériques connectés, mais pas de redondance. Si un seul disque tombe en panne, les données du pool seront perdues de manière définitive.
* `mirror` - Le mode miroir stocke une copie complète des données sur chaque disque. Le mode miroir offre de bonnes performances en lecture parce que les données sont lues à partir de tous les disques en parallèles. Les performances en écriture sont plus lentes étant donné que les données doivent être écrites sur tous les disques du pool. Ce mode permet à tous les disques sauf un de tomber en panne. Cette option nécessite aux moins deux disques.
* `raid10` - Miroirs entrelacés. Offre les meilleures performances mais le moins d'espace de stockage. Cette option nécessite un nombre pair de disques et au minimum quatre disques.
* `raidz1` - RAID à simple redondance. Permet la panne d'un seul disque. Cette option nécessite au moins trois disques.
* `raidz2` - RAID à double redondance. Permet la panne simultanée de deux disques. Cette option nécessite au moins quatre disques.
* `raidz3` - RAID à triple redondance. Permet la panne simultanée de trois disques. Cette option nécessite au moins cinq disques.

Une fois que le `Pool Type` a été sélectionné, la liste des disques disponibles est affichée, et l'utilisateur est invité à choisir un ou plusieurs disques pour former le pool. La configuration doit être alors validée pour s'assurer que suffisamment de disques ont été sélectionnés. Si ce n'est pas le cas, sélectionner btn:[Change Selection] pour retourner à la liste des disques, ou btn:[Back] pour changer de `Pool Type`.

[[bsdinstall-zfs-disk_select]]
.Sélection de disques
image::bsdinstall-zfs-disk_select.png[]

[[bsdinstall-zfs-vdev_invalid]]
.Sélection non-valide
image::bsdinstall-zfs-vdev_invalid.png[]

Si un ou plusieurs disques manquent sur la liste, ou si des disques ont été ajoutés après le lancement du programme d'installation, sélectionner btn:[- Rescan Devices] pour mettre à jour la liste des disques disponibles.

[[bsdinstall-zfs-rescan-devices]]
.Recherche des périphériques
image::bsdinstall-zfs-rescan-devices.png[]

Pour éviter d'effacer par accident les mauvais disques, le menu btn:[- Disk Info] peut être utilisé pour inspecter chaque disque, y compris sa table des partitions et plusieurs autres informations comme le modèle de disque et son numéro de série si disponibles.

[[bsdinstall-zfs-disk_info]]
.Analyse d'un disque
image::bsdinstall-zfs-disk_info.png[]

Sélectionnez kbd:[N] pour configurer le `Pool Name`. Entrez le nom souhaité puis sélectionnez btn:[OK] pour le prendre en compte ou btn:[Cancel] pour retourner au menu principal et conserver le nom par défaut.

[[bsdinstall-zfs-pool-name]]
.Nom du Pool
image::bsdinstall-zfs-pool-name.png[]

Sélectionnez kbd:[S] pour fixer la quantité d'espace de pagination. Entrez la quantité souhaitée puis sélectionnez btn:[OK] pour la prendre en compte ou btn:[Cancel] pour retourner au menu principal et conserver la quantité par défaut.

[[bsdinstall-zfs-swap-amount]]
.Quantité d'espace de pagination
image::bsdinstall-zfs-swap-amount.png[]

Une fois que toutes les options ont été configurées aux valeurs souhaitées, sélectionnez l'option btn:[Install] en haut du menu. Le programme d'installation offre alors une dernière chance de tout annuler avant que le contenu des disques sélectionnés ne soit détruit pour créer le pool ZFS.

[[bsdinstall-zfs-warning]]
.Dernière chance
image::bsdinstall-zfs-warning.png[]

Si le chiffrement GELI du disque a été activé, le programme d'installation demandera deux fois le mot de passe à utiliser pour chiffrer les disques. Ensuite, après cela, l'initialisation du chiffrement commence.

[[bsdinstall-zfs-geli_password]]
.Mot de passe de chiffrement des disques
image::bsdinstall-zfs-geli_password.png[]

[[bsdinstall-zfs-init-encription]]
.Initialisation du chiffrement
image::bsdinstall-zfs-init-encription.png[]

L'installation se poursuit alors normalement. Pour continuer l'installation, aller à <<bsdinstall-fetching-distribution>>.

[[bsdinstall-part-shell]]
=== Partitionnement à partir de l'interpréteur de commandes

Dans le cas d'installations complexes, les menus de partitionnement de bsdinstall peuvent ne pas proposer le niveau de flexibilité recherché. Les utilisateurs expérimentés peuvent sélectionner l'option btn:[Shell] à partir du menu de partitionnement afin de partitionner manuellement les disques, de créer le ou les systèmes de fichiers, d'éditer [.filename]#/tmp/bsdinstall_etc/fstab#, et de monter les systèmes de fichiers sous [.filename]#/mnt#. Une fois cela fait, taper `exit` pour retourner dans bsdinstall et poursuivre l'installation.

[[bsdinstall-fetching-distribution]]
== Récupération des fichiers de distribution

La durée de l'installation variera en fonction de la distribution choisie, du support d'installation, et de la vitesse de l'ordinateur. Une série de messages indiquera la progression de l'installation.

En premier lieu, le programme d'installation formatera le(s) disque(s) sélectionné(s) et initialisera les partitions. Ensuite, dans le cas d'une installation à partir d'un support `bootonly media` ou `mini memstick`, il téléchargera les composants sélectionnés:

[[bsdinstall-distfile-fetching]]
.Récupération des fichiers de distribution
image::bsdinstall-distfile-fetching.png[]

Ensuite, l'intégrité des fichiers de distribution est vérifiée pour s'assurer qu'ils n'ont pas été corrompus durant le téléchargement ou leur lecture à partir du support d'installation.

[[bsdinstall-distfile-verify]]
.Vérification des fichiers de distribution
image::bsdinstall-distfile-verifying.png[]

Enfin, les fichiers contrôlés sont décompressés sur le disque:

[[bsdinstall-distfile-extract]]
.Décompression des fichiers de distribution
image::bsdinstall-distfile-extracting.png[]

Une fois que tous les fichiers de distribution requis ont été décompressés, bsdinstall affichera le premier menu de post-installation. Cette série de menu est décrite dans la section suivante.

[[bsdinstall-post]]
== Comptes utilisateurs, fuseau horaire, services et renforcement de la sécurité

[[bsdinstall-post-root]]
=== Définir le mot de passe de `root`

Tout d'abord, le mot de passe de l'utilisateur `root` doit être défini. Notez que lors de la saisie du mot de passe, les caractères tapés ne sont pas affichés sur l'écran. Après sa saisie, le mot de passe devra être entré une deuxième fois. Cela permet d'éviter les erreurs de frappe.

[[bsdinstall-post-set-root-passwd]]
.Saisie du mot de passe `root`
image::bsdinstall-post-root-passwd.png[]

[[bsdinstall-timezone]]
=== Réglage du fuseau horaire

La série de menus suivante permet de déterminer l'heure locale correcte en choisissant la région du monde, le pays et le fuseau horaire. Régler le fuseau horaire permet au système de corriger automatiquement l'heure lors des modifications régionales comme l'heure d'été ou d'hiver, et d'effectuer correctement toute autre modification relative au fuseau horaire.

L'exemple présenté ici concerne une machine située dans le fuseau horaire du centre de l'Espagne en Europe. Les choix pourront varier en fonction de la zone géographique.

[[bsdinstall-timezone-region]]
.Sélectionner une région
image::bsdinstall-timezone-region.png[]

La région appropriée est choisie en utilisant les touches flèches puis en appuyant sur kbd:[Entrée].

[[bsdinstall-timezone-country]]
.Sélection d'un pays
image::bsdinstall-timezone-country.png[]

Sélectionner le pays approprié en utilisant les touches flèches et appuyer sur kbd:[Entrée].

[[bsdinstall-timezone-zone]]
.Sélection d'un fuseau horaire
image::bsdinstall-timezone-zone.png[]

Le fuseau horaire approprié est choisi en utilisant les touches flèches, puis en appuyant sur kbd:[Entrée].

[[bsdinstall-timezone-confirmation]]
.Confirmation du fuseau horaire
image::bsdinstall-timezone-confirm.png[]

Confirmez que l'abréviation pour le fuseau horaire est correcte.

[[bsdinstall-timezone-date]]
.Sélection de la date
image::bsdinstall-timezone-date.png[]

La date correcte est sélectionnée en utilisant les touches flèches puis en appuyant sur btn:[Set Date]. Sinon, la sélection de la date peut être passée en appuyant sur btn:[Skip].

[[bsdinstall-timezone-time]]
.Configuration de l'heure
image::bsdinstall-timezone-time.png[]

L'heure correcte est sélectionnée en utilisant les touches flèches puis en appuyant sur btn:[Set Time]. Sinon, cette configuration peut être passée en appuyant sur btn:[Skip].

[[bsdinstall-sysconf]]
=== Activation des services

Le menu suivant est destiné à choisir quels services système seront lancés au démarrage. Tous ces services sont optionnels. Ne lancez que les services nécessaires au fonctionnement du système.

[[bsdinstall-config-serv]]
.Sélection de services supplémentaires à activer
image::bsdinstall-config-services.png[]

Voici un résumé des services pouvant être activés dans ce menu:

* `local_unbound` - Active le résolveur DNS local. Il est important de garder à l'esprit que c'est le résolveur du système de base qui n'est destiné à être utilisé uniquement qu'en tant que résolveur cache local. Si l'objectif est de mettre en place un résolveur pour tout le réseau, installer package:dns/unbound[].
* `sshd` - Le daemon _Secure Shell_ (SSH) est utilisé pour l'accès à un système à distance via une connexion chiffrée. Activez ce service que si le système doit être accessible pour l'ouverture de session à distance.
* `moused` - Activez ce service si la souris sera utilisée à partir de la console système en ligne de commande.
* `ntpdate` - Active la mise à l'heure automatique de l'horloge au démarrage. La fonction de ce programme est désormais disponible dans le daemon man:ntpd[8]. Après une certaine période d'adaptation, l'utilitaire man:ntpdate[8] sera supprimé.
* `ntpd` - Le daemon du protocole de temps réseau (_Network Time Protocol_) (NTP) pour la synchronisation automatique de l'horloge. Activez ce service s'il y a un serveur Windows(R), Kerberos, ou LDAP sur le réseau.
* `powerd` - Utilitaire de contrôle de la gestion de l'énergie du système pour le contrôle de la consommation en énergie.
* `dumpdev` - Activer les crash dumps peut s'avérer très utile pour déboguer les problèmes du système, aussi les utilisateurs sont encouragés à activer les crashs dumps.

[[bsdinstall-hardening]]
=== Activer les options de renforcement de la sécurité

Le menu suivant est utilisé pour sélectionner quelles options de sécurité seront activées. Toutes ces options sont facultatives. Mais leur utilisation est encouragée.

[[bsdinstall-hardening-options]]
.Sélection des options de renforcement de la sécurité
image::bsdinstall-hardening.png[]

Voici un résumé des options qui peuvent être activées dans ce menu:

* `hide_uids` - Cache les processus en cours d'exécution sous des utilisateurs différents pour éviter que des utilisateurs non autorisés puissent voir les processus en cours d'exécution exécutés par d'autres utilisateurs (UID) évitant ainsi la fuite d'information.
* `hide_gids` - Cache les processus en cours d'exécution sous des groupes différents pour éviter que des utilisateurs non autorisés puissent voir les processus en cours d'exécution exécutés par d'autres groupes (GID) évitant ainsi la fuite d'information.
* `hide_jail` - Cache les processus en cours d'exécution dans des jails pour éviter que des utilisateurs non autorisés puissent voir les processus en cours d'exécution dans les jails.
* `read_msgbuf` - Désactive la lecture du tampon des messages du noyau pour les utilisateurs non autorisés en empêchant l'utilisation de man:dmesg[8] pour lire les messages du tampon de trace du noyau.
* `proc_debug` - La désactivation des fonctionnalités de débogage des processus pour les utilisateurs non autorisés désactive une variété de services de débogage inter-processus non-privilégiés, cela comprend certaines fonctionnalités procfs, ptrace(), et and ktrace(). Veuillez noter que cela empêche également le fonctionnement d'outils de débogage pour les utilisateurs non autorisés comme man:lldb[1], man:truss[1], man:procstat[1], ainsi que certaines fonctionnalités de débogage intégrées dans certains langages comme PHP, etc.
* `random_pid` - Rend aléatoire le choix de la valeur du PID de chaque nouveau processus.
* `clear_tmp` - Nettoie le répertoire [.filename]#/tmp# au démarrage du système.
* `disable_syslogd` - Désactive l'ouverture d'un socket réseau syslogd. Par défaut, FreeBSD exécute syslogd de manière sécurisée avec le paramètre `-s`. Cela évite que le daemon écoute sur le port 514 les requêtes UDP entrantes. Avec cette option activée syslogd sera exécuté avec les paramètres `-ss` ce qui empêche l'ouverture de ports par syslogd. Pour des informations supplémentaires, consultez la page de manuel man:syslogd[8].
* `disable_sendmail` - Désactive l'agent de transfert de courrier Sendmail.
* `secure_console` - Quand cette option est activée, l'invite réclame le mot de passe `root` lors de l'entrée en mode utilisateur unique.
* `disable_ddtrace` - DTrace peut fonctionner dans un mode qui affectera le noyau en exécution. Des actions destructives ne pourront pas être utilisées sauf si elles ont été explicitement autorisées. Pour activer cette option lors de l'utilisation de DTrace utilisez le paramètre `-w`. Pour des informations supplémentaires, consultez la page de manuel man:dtrace[1].

[[bsdinstall-addusers]]
=== Ajouter des utilisateurs

Le menu suivant demande de créer au moins un compte utilisateur. Il est recommandé d'utiliser un compte utilisateur pour l'ouverture de session sur le système plutôt que d'employer le compte `root`. Quand on utilise une session `root`, il n'existe aucune limite ou protection quant à ce qui peut être fait. Ouvrir une session en tant qu'utilisateur normal est plus sûr et plus sécurisé.

Sélectionner btn:[Yes] pour ajouter de nouveaux utilisateurs.

[[bsdinstall-add-user1]]
.Ajout de comptes utilisateur
image::bsdinstall-adduser1.png[]

Suivez les instructions et saisissez les informations demandées pour le compte utilisateur à ajouter. L'exemple donné dans <<bsdinstall-add-user2>> créé le compte utilisateur `asample`.

[[bsdinstall-add-user2]]
.Entrée des informations utilisateur
image::bsdinstall-adduser2.png[]

Voici un résumé des informations à saisir:

* `Username` - Le nom d'utilisateur ou identifiant que l'utilisateur entrera pour ouvrir une session. Une convention courante est d'utiliser la première lettre du prénom associé au nom, tant que chaque nom d'utilisateur reste unique sur le système. Le nom d'utilisateur est sensible à la casse et ne devrait pas contenir d'espace.
* `Full name` - Le nom complet de l'utilisateur. Il peut contenir des espaces et est utilisé comme description du compte utilisateur.
* `Uid` - L'identifiant numérique pour cet utilisateur. En général, ce champ est laissé vide de façon à ce que le système assigne par lui-même une valeur.
* `Login group` - Le groupe de l'utilisateur. Généralement il est laissé vide pour accepter le choix par défaut.
* `Invite _user_ into other groups?` - Groupes supplémentaires pour lesquels l'utilisateur sera également ajouté comme membre. Si l'utilisateur a besoin d'un accès administrateur, tapez `wheel` ici.
* `Login class` - Généralement laissé vide pour accepter la valeur par défaut.
* `Shell` - Tapez un des noms listés pour choisir l'interpréteur de commande de l'utilisateur. Consulter crossref:basics[shells,Interpréteurs de commandes - “Shells”] pour plus d'information sur les interpréteurs de commande.
* `Home directory` - Le répertoire de l'utilisateur. La valeur par défaut est, en général, correcte.
* `Home directory permissions` - Les permissions sur le répertoire utilisateur. La valeur par défaut est, en général, correcte.
* `Use password-based authentication?` - En général `yes` de manière à ce que l'utilisateur soit invité à entrer son mot de passe à l'ouverture de session.
* `Use an empty password?` - En général `no` car c'est un problème de sécurité d'avoir un mot de passe vide.
* `Use a random password?` - En général `no` de manière à ce que l'utilisateur puisse entrer son propre mot de passe à l'invite suivante.
* `Enter password` - Le mot de passe pour cet utilisateur. Les caractères tapés n'apparaîtront pas sur l'écran.
* `Enter password again` - Le mot de passe doit à nouveau être saisi pour vérification.
* `Lock out the account after creation?` - En général `no` de manière à ce que l'utilisateur puisse ouvrir une session.

Après avoir tout saisi, un résumé est affiché pour vérification. Si une erreur a été faite, entrez `no` et recommencez. Si tout est correct, entrez `yes` pour créer ce nouvel utilisateur.

[[bsdinstall-add-user3]]
.Quitter la gestion des utilisateurs et des groupes
image::bsdinstall-adduser3.png[]

S'il y a d'autres utilisateurs à ajouter, répondez `yes` à la question `Add another user?`. Entrez `no` pour terminer l'ajout d'utilisateurs et continuer l'installation.

Pour plus d'information sur l'ajout d'utilisateurs et leur gestion, consultez crossref:users[users-synopsis,Synopsis].

[[bsdinstall-final-conf]]
=== Configuration finale

Après avoir tout installé et configuré, une dernière chance de modifier les réglages est proposée.

[[bsdinstall-final-config]]
.Configuration finale
image::bsdinstall-finalconfiguration.png[]

Utilisez ce menu pour effectuer des changements ou toute configuration supplémentaire avant de terminer l'installation.

* `Add User` - Décrit dans la <<bsdinstall-addusers>>.
* `Root Password` - Décrit dans la <<bsdinstall-post-root>>.
* `Hostname` - Décrit dans la <<bsdinstall-hostname>>.
* `Network` - Décrit dans la <<bsdinstall-config-network-dev>>.
* `Services` - Décrit dans la <<bsdinstall-sysconf>>.
* `System Hardening` - Décrit dans la <<bsdinstall-hardening>>.
* `Time Zone` - Décrit dans la <<bsdinstall-timezone>>.
* `Handbook` - Télécharge et installe le Manuel FreeBSD.

Une fois la configuration finale achevée, sélectionnez btn:[Exit].

[[bsdinstall-final-modification-shell]]
.Configuration manuelle
image::bsdinstall-final-modification-shell.png[]

bsdinstall demandera s'il y a des éléments supplémentaires à configurer avant le redémarrage sur le nouveau système. Sélectionner btn:[Yes] pour quitter vers un interpréteur de commande, ou btn:[No] pour passer à la dernière étape d'installation.

[[bsdinstall-final-main]]
.Achever l'installation
image::bsdinstall-mainexit.png[]

Si d'autre configuration ou une configuration spécifique est nécessaire, choisissez btn:[Live CD] pour démarrer dans le mode du CD Live.

Si l'installation est achevée, sélectionnez btn:[Reboot] pour redémarrer l'ordinateur et démarrer le nouveau système FreeBSD. N'oubliez pas de retirer le support d'installation de FreeBSD ou l'ordinateur risque de redémarrer dessus à nouveau.

Lors du démarrage de FreeBSD, des messages d'information sont affichés. Une fois que le système a achevé son démarrage, une invite de session est affichée. A l'invite `login:`, saisissez le nom d'utilisateur ajouté lors de l'installation. Evitez d'ouvrir des sessions en tant que `root`. Consultez crossref:users[users-superuser,Le compte super-utilisateur] pour des instructions sur comment devenir super-utilisateur quand un accès administrateur est nécessaire.

Les messages qui ont défilé lors du démarrage peuvent être à nouveau visualisés en appuyant sur kbd:[Scroll-Lock] (ou kbd:[Arrêtdéfil]) pour activer le _défilement arrière du tampon des messages_. Les touches kbd:[PgUp], kbd:[PgDn], et les touches fléchées pourront être utilisées pour remonter dans les messages. Une fois terminé, appuyez à nouveau sur kbd:[Scroll-Lock] pour déverrouiller l'écran et fera revenir à l'affichage normal de la console. Pour revoir ces messages quand le système en fonctionnement depuis un certain temps, tapez `less /var/run/dmesg.boot` à partir de l'invite. Appuyez sur kbd:[q] pour retourner à l'invite de commande après la visualisation.

Si sshd a été activé dans <<bsdinstall-config-serv>>, le premier démarage pourra être un peu plus lent en raison de la génération des clés RSA et DSA. Les démarrages suivants seront plus rapides. Les empreintes des clés seront affichées, comme montré dans cet exemple:

[source,shell]
....
Generating public/private rsa1 key pair.
Your identification has been saved in /etc/ssh/ssh_host_key.
Your public key has been saved in /etc/ssh/ssh_host_key.pub.
The key fingerprint is:
10:a0:f5:af:93:ae:a3:1a:b2:bb:3c:35:d9:5a:b3:f3 root@machine3.example.com
The key's randomart image is:
+--[RSA1 1024]----+
|    o..          |
|   o . .         |
|  .   o          |
|       o         |
|    o   S        |
|   + + o         |
|o . + *          |
|o+ ..+ .         |
|==o..o+E         |
+-----------------+
Generating public/private dsa key pair.
Your identification has been saved in /etc/ssh/ssh_host_dsa_key.
Your public key has been saved in /etc/ssh/ssh_host_dsa_key.pub.
The key fingerprint is:
7e:1c:ce:dc:8a:3a:18:13:5b:34:b5:cf:d9:d1:47:b2 root@machine3.example.com
The key's randomart image is:
+--[ DSA 1024]----+
|       ..     . .|
|      o  .   . + |
|     . ..   . E .|
|    . .  o o . . |
|     +  S = .    |
|    +  . = o     |
|     +  . * .    |
|    . .  o .     |
|      .o. .      |
+-----------------+
Starting sshd.
....

Consulter crossref:security[openssh,OpenSSH] pour plus d'information au sujet des empreintes et de SSH.

FreeBSD n'installe pas d'environnement graphique par défaut, mais de nombreux sont disponibles. Consultez crossref:x11[x11,Le système X Window] pour plus d'information au sujet de l'installation et la configuration d'un gestionnaire de fenêtres graphique.

Arrêter proprement un ordinateur sous FreeBSD aide à protéger les données et même le matériel de tout dommage. _Ne coupez pas l'alimentation tant que le système n'est pas correctement arrêté!_ Si l'utilisateur est membre du groupe `wheel`, passez en super-utilisateur en tapant `su` sur la ligne de commande et en entrant le mot de passe de `root`. Ensuite, utilisez la commande `shutdown -p now` et le système se fermera proprement, et si le matériel le support, s'éteindra lui-même.

[[bsdinstall-network]]
== Interfaces réseau

[[bsdinstall-config-network-dev]]
=== Configuration des interfaces réseau

Ensuite, est affichée une liste des interfaces réseaux trouvées sur l'ordinateur. Sélectionner l'interface à configurer.

[[bsdinstall-configure-net-interface]]
.Choix d'une interface réseau
image::bsdinstall-configure-network-interface.png[]

Si une interface réseau Ethernet est choisie, le programme d'installation passera au menu montré dans la <<bsdinstall-configure-net-ipv4>>. Si une interface réseau sans-fil est choisie, le système recherchera les points d'accès sans-fil:

[[bsdinstall-wireless-scan]]
.Recherche des points d'accès sans-fil
image::bsdinstall-configure-wireless-scan.png[]

Les réseaux sans-fil sont identifiés par un _Service Set Identifier_ (SSID), qui est un nom, court, unique donné à chaque réseau. Les SSIDs trouvés durant la recherche sont affichés, suivis par une description des types de chiffrement disponibles pour chaque réseau. Si le SSID désiré n'apparaît pas dans la liste, sélectionner btn:[Rescan] pour rechercher à nouveau. Si le réseau désiré n'apparaît toujours pas, vérifiez qu'il n'y a pas de problèmes d'antenne ou essayez de rapprocher l'ordinateur du point d'accès. Rescannez après chaque modification.

[[bsdinstall-wireless-accesspoints]]
.Sélection d'un réseau sans-fil
image::bsdinstall-configure-wireless-accesspoints.png[]

Ensuite, entrer les informations de chiffrement pour se connecter au réseau sans-fil sélectionné. Le chiffrement WPA2 est fortement recommandé sachant que les chiffrements plus anciens, comme WEP, offrent peu de sécurité. Si le réseau utilise WPA2, entrez le mot de passe également connu sous le nom de _Pre-Shared Key_ (PSK). Pour des raisons de sécurité, les caractères tapés dans la boîte de saisie apparaissent sous la forme d'astérisques.

[[bsdinstall-wireless-wpa2]]
.Configuration WPA2
image::bsdinstall-configure-wireless-wpa2setup.png[]

Ensuite, indiquez si une adresse réseau en IPv4 doit être configurée ou non sur l'interface Ethernet ou sans-fil:

[[bsdinstall-configure-net-ipv4]]
.Sélection d'un fonctionnement réseau en IPv4
image::bsdinstall-configure-network-interface-ipv4.png[]

Il existe deux méthodes de configuration IPv4. En DHCP, l'interface réseau sera configurée automatiquement, c'est la méthode à privilégier si le réseau dispose d'un serveur DHCP. Sinon, les informations de configuration du réseau devront être saisies manuellement sous la forme d'une configuration statique.

[NOTE]
====
N'entrez pas de paramètres réseau au hasard, cela ne fonctionnera pas. Si un serveur DHCP n'est pas disponible, récupérez les paramètres listés dans <<bsdinstall-collect-network-information,Informations réseau nécessaires>> auprès de l'administrateur réseau ou du fournisseur d'accès à Internet.
====

Si un serveur DHCP est disponible, sélectionner btn:[Yes] dans le menu suivant pour configurer automatiquement l'interface réseau. Le programme d'installation s'arrêtera pendant environ une minute pour trouver le serveur DHCP et récupérer l'information de configuration du réseau pour le système.

[[bsdinstall-net-ipv4-dhcp]]
.Sélection de la configuration IPv4 avec DHCP
image::bsdinstall-configure-network-interface-ipv4-dhcp.png[]

S'il n'y a pas de serveur DHCP, sélectionner btn:[No] et tapez les paramètres d'adressage suivants dans le menu qui suit:

[[bsdinstall-net-ipv4-static]]
.Configuration IPv4 en statique
image::bsdinstall-configure-network-interface-ipv4-static.png[]

* `IP Address` - L'adresse IPv4 assignée à cet ordinateur. Cette adresse doit être unique et ne pas être déjà utilisée par un autre équipement sur le réseau local.
* `Subnet Mask` - Le masque de sous-réseau utilisé par le réseau.
* `Default Router` - L'adresse IP de la passerelle par défaut du réseau.

L'écran suivant demandera si l'interface doit être configurée pour l'IPv6. Si l'IPv6 est disponible et désiré, choisir btn:[Yes] pour le sélectionner.

[[bsdinstall-net-ipv6]]
.Sélection d'un réseau IPv6
image::bsdinstall-configure-network-interface-ipv6.png[]

Un réseau IPv6 peut être configuré suivant deux méthodes. Le système d'_autoconfiguration sans état_ ou _StateLess Address AutoConfiguration_ (SLAAC) demandera automatiquement les informations de configuration correctes à un routeur local. Consulter http://tools.ietf.org/html/rfc4862[http://tools.ietf.org] pour plus d'information. La configuration statique, quant à elle, demande la saisie manuelle des informations réseau.

Si un routeur IPv6 est disponible, sélectionner btn:[Yes] dans le menu suivant pour configurer automatiquement l'interface réseau. Le programme d'installation s'arrêtera pendant environ une minute pour trouver le routeur et obtenir les informations de configuration réseau pour le système.

[[bsdinstall-net-ipv6-slaac]]
.Sélection de la configuration IPv6 SLAAC
image::bsdinstall-configure-network-interface-slaac.png[]

S'il n'y a pas de routeur IPv6, sélectionnez btn:[No] et tapez les paramètres d'adressage suivants dans le menu qui suit:

[[bsdinstall-net-ipv6-static]]
.Configuration IPv6 en statique
image::bsdinstall-configure-network-interface-ipv6-static.png[]

* `IPv6 Address` - L'adresse IP assignée à cet ordinateur. Cette adresse doit être unique et ne pas être déjà utilisée par un autre équipement sur le réseau local.
* `Default Router` - L'adresse IPv6 de la passerelle par défaut du réseau.

Le dernier menu de configuration est utilisé pour configurer le système de résolution _Domain Name System_ (ou DNS) qui convertit les noms de machine en adresses réseau et inversement. Si la méthode du DHCP ou du SLAAC a été utilisée pour configurer automatiquement la carte réseau, les valeurs de configuration du système de résolution de noms (`Resolver Configuration`) pourront déjà être complétées. Dans le cas contraire, entrer le nom de domaine du réseau local dans le champ `Search`. `DNS #1` et `DNS #2` sont les adresses IPv4 et/ou IPv6 des serveurs DNS locaux. Au moins un serveur DNS est nécessaire.

[[bsdinstall-net-dns-config]]
.Configuration du DNS
image::bsdinstall-configure-network-ipv4-dns.png[]

Une fois l'interface réseau configurée, sélectionnez un site miroir qui est situé dans la même région du monde que l'ordinateur sur lequel FreeBSD doit être installé. Les fichiers peuvent être récupérés plus rapidement quand le miroir est proche de l'ordinateur cible, réduisant ainsi le temps d'installation.

[[bsdinstall-netinstall-mirror]]
.Sélection d'un site miroir
image::bsdinstall-netinstall-mirrorselect.png[]

[[bsdinstall-install-trouble]]
== Dépannage

Cette section couvre le dépannage basique de l'installation, comme les problèmes courants rencontrés.

Vérifier la liste du matériel supporté (link:https://www.FreeBSD.org/releases/[https://www.freebsd.org/releases/]) de la version de FreeBSD pour être sûr que le matériel est supporté. Si le matériel est supporté et que des blocages ou autres problèmes surviennent, compiler un noyau personnalisé en utilisant les instructions de crossref:kernelconfig[kernelconfig,Configurer le noyau de FreeBSD] pour ajouter le support pour les périphériques qui ne sont pas présents dans le noyau [.filename]#GENERIC#. Le noyau est configuré de telle façon qu'il supposera que la plupart des périphériques seront dans leur configuration d'usine en termes d'IRQs, d'adresses d'E/S, et canaux de DMA. Si le matériel a été reconfiguré, un fichier de configuration du noyau personnalisé peut indiquer à FreeBSD où trouver les choses.

[NOTE]
====
Quelques problèmes d'installation peuvent être évités ou allégés en mettant à jour le firmware de divers composants matériels, en particulier la carte mère. Le firmware de la carte mère peut également être désigné par le terme BIOS. La plupart des constructeurs de cartes mères ou d'ordinateur disposent d'un site web où peuvent être trouvées les mises à jour et les informations de mises à jour.

Les fabricants déconseillent fortement de mettre à jour le BIOS de la carte mère à moins d'avoir une bonne raison de le faire, comme une mise à jour critique. Le processus de mise à jour _peut_ mal se passer, laissant un BIOS incomplet et l'ordinateur inutilisable.
====

Si le système se bloque au démarrage pendant la détection du matériel, ou se comporte de manière étrange lors de l'installation, l'ACPI peut être le coupable. FreeBSD utilise de manière intensive le système ACPI sur les plateformes i386 et amd64, s'il est détecté au démarrage, pour aider à la configuration du matériel. Malheureusement, des bogues persistent dans le pilote ACPI, et sur les cartes mères et leur BIOS. L'ACPI peut être désactivé en positionnant le paramètre `hint.acpi.0.disabled` pour le chargeur de démarrage:

[source,shell]
....
 set hint.acpi.0.disabled="1"
....

Ce paramètre est réinitialisé à chaque démarrage du système, il est donc nécessaire d'ajouter `hint.acpi.0.disabled="1"` au fichier [.filename]#/boot/loader.conf#. Plus d'information au sujet du chargeur peut être trouvée dans la crossref:boot[boot-synopsis,Menu d'accueil].

[[using-live-cd]]
== Utilisation du CD Live

Le menu d'accueil de bsdinstall, montré dans <<bsdinstall-choose-mode>>, propose une option btn:[Live CD]. C'est utile pour ceux qui se demandent si FreeBSD est le bon choix et désirent tester certaines fonctionnalités avant l'installation.

Les points suivants devront être pris en compte avant l'utilisation du :btn:[Live CD]

* Pour utiliser le système, une authentification est nécessaire. Le nom d'utilisateur est `root`, sans mot de passe.
* Etant donné que le système s'exécute directement à partir du support d'installation, le système sera bien plus lent que s'il était installé sur un disque dur.
* Cette option ne propose qu'une invite de commande et pas d'interface graphique.
