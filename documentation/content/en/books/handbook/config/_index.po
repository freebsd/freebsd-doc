# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR The FreeBSD Project
# This file is distributed under the same license as the FreeBSD Documentation package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: FreeBSD Documentation VERSION\n"
"POT-Creation-Date: 2023-04-20 20:56-0300\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: YAML Front Matter: description
#: documentation/content/en/books/handbook/config/_index.adoc:1
#, no-wrap
msgid "This chapter explains much of the FreeBSD configuration process, including some of the parameters which can be set to tune a FreeBSD system."
msgstr ""

#. type: YAML Front Matter: part
#: documentation/content/en/books/handbook/config/_index.adoc:1
#, no-wrap
msgid "Part III. System Administration"
msgstr ""

#. type: YAML Front Matter: title
#: documentation/content/en/books/handbook/config/_index.adoc:1
#, no-wrap
msgid "Chapter 13. Configuration and Tuning"
msgstr ""

#. type: Title =
#: documentation/content/en/books/handbook/config/_index.adoc:14
#, no-wrap
msgid "Configuration and Tuning"
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:52
#, no-wrap
msgid "Synopsis"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:56
msgid ""
"One of the important aspects of FreeBSD is proper system configuration.  "
"This chapter explains much of the FreeBSD configuration process, including "
"some of the parameters which can be set to tune a FreeBSD system."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:58
msgid "After reading this chapter, you will know:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:60
msgid ""
"The basics of [.filename]#rc.conf# configuration and [.filename]#/usr/local/"
"etc/rc.d# startup scripts."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:61
msgid "How to configure and test a network card."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:62
msgid "How to configure virtual hosts on network devices."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:63
msgid "How to use the various configuration files in [.filename]#/etc#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:64
msgid "How to tune FreeBSD using man:sysctl[8] variables."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:65
msgid "How to tune disk performance and modify kernel limitations."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:67
msgid "Before reading this chapter, you should:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:69
msgid ""
"Understand UNIX(R) and FreeBSD basics (crossref:basics[basics,FreeBSD "
"Basics])."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:70
msgid ""
"Be familiar with the basics of kernel configuration and compilation "
"(crossref:kernelconfig[kernelconfig,Configuring the FreeBSD Kernel])."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:72
#, no-wrap
msgid "Starting Services"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:77
msgid ""
"Many users install third party software on FreeBSD from the Ports Collection "
"and require the installed services to be started upon system "
"initialization.  Services, such as package:mail/postfix[] or package:www/"
"apache22[] are just two of the many software packages which may be started "
"during system initialization.  This section explains the procedures "
"available for starting third party software."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:79
msgid ""
"In FreeBSD, most included services, such as man:cron[8], are started through "
"the system startup scripts."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:80
#, no-wrap
msgid "Extended Application Configuration"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:85
msgid ""
"Now that FreeBSD includes [.filename]#rc.d#, configuration of application "
"startup is easier and provides more features.  Using the key words discussed "
"in <<configtuning-rcd>>, applications can be set to start after certain "
"other services and extra flags can be passed through [.filename]#/etc/rc."
"conf# in place of hard coded flags in the startup script.  A basic script "
"may look similar to the following:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:93
#, no-wrap
msgid ""
"#!/bin/sh\n"
"#\n"
"# PROVIDE: utility\n"
"# REQUIRE: DAEMON\n"
"# KEYWORD: shutdown\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:95
#, no-wrap
msgid ". /etc/rc.subr\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:98
#, no-wrap
msgid ""
"name=utility\n"
"rcvar=utility_enable\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:100
#, no-wrap
msgid "command=\"/usr/local/sbin/utility\"\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:102
#, no-wrap
msgid "load_rc_config $name\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:109
#, no-wrap
msgid ""
"#\n"
"# DO NOT CHANGE THESE DEFAULT VALUES HERE\n"
"# SET THEM IN THE /etc/rc.conf FILE\n"
"#\n"
"utility_enable=${utility_enable-\"NO\"}\n"
"pidfile=${utility_pidfile-\"/var/run/utility.pid\"}\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:111
#, no-wrap
msgid "run_rc_command \"$1\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:115
msgid ""
"This script will ensure that the provided `utility` will be started after "
"the `DAEMON` pseudo-service.  It also provides a method for setting and "
"tracking the process ID (PID)."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:117
msgid ""
"This application could then have the following line placed in [.filename]#/"
"etc/rc.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:121
#, no-wrap
msgid "utility_enable=\"YES\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:124
msgid ""
"This method allows for easier manipulation of command line arguments, "
"inclusion of the default functions provided in [.filename]#/etc/rc.subr#, "
"compatibility with man:rcorder[8], and provides for easier configuration via "
"[.filename]#rc.conf#."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:125
#, no-wrap
msgid "Using Services to Start Services"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:129
msgid ""
"Other services can be started using man:inetd[8].  Working with man:inetd[8] "
"and its configuration is described in depth in crossref:network-"
"servers[network-inetd,“The inetd Super-Server”]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:133
msgid ""
"In some cases, it may make more sense to use man:cron[8] to start system "
"services.  This approach has a number of advantages as man:cron[8] runs "
"these processes as the owner of the man:crontab[5].  This allows regular "
"users to start and maintain their own applications."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:136
msgid ""
"The `@reboot` feature of man:cron[8], may be used in place of the time "
"specification.  This causes the job to run when man:cron[8] is started, "
"normally during system initialization."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:138
#, no-wrap
msgid "Configuring man:cron[8]"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:144
msgid ""
"One of the most useful utilities in FreeBSD is cron.  This utility runs in "
"the background and regularly checks [.filename]#/etc/crontab# for tasks to "
"execute and searches [.filename]#/var/cron/tabs# for custom crontab files.  "
"These files are used to schedule tasks which cron runs at the specified "
"times.  Each entry in a crontab defines a task to run and is known as a "
"_cron job_."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:150
msgid ""
"Two different types of configuration files are used: the system crontab, "
"which should not be modified, and user crontabs, which can be created and "
"edited as needed.  The format used by these files is documented in man:"
"crontab[5].  The format of the system crontab, [.filename]#/etc/crontab# "
"includes a `who` column which does not exist in user crontabs.  In the "
"system crontab, cron runs the command as the user specified in this column.  "
"In a user crontab, all commands run as the user who created the crontab."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:153
msgid ""
"User crontabs allow individual users to schedule their own tasks.  The "
"`root` user can also have a user [.filename]#crontab# which can be used to "
"schedule tasks that do not exist in the system [.filename]#crontab#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:155
msgid ""
"Here is a sample entry from the system crontab, [.filename]#/etc/crontab#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:168
#, no-wrap
msgid ""
"# /etc/crontab - root's crontab for FreeBSD\n"
"#\n"
"# $FreeBSD$\n"
"# <.>\n"
"SHELL=/bin/sh\n"
"PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin <.>\n"
"#\n"
"#minute\thour\tmday\tmonth\twday\twho\tcommand <.>\n"
"#\n"
"*/5\t*\t*\t*\t*\troot\t/usr/libexec/atrun <.>\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:171
msgid ""
"Lines that begin with the `+#+` character are comments. A comment can be "
"placed in the file as a reminder of what and why a desired action is "
"performed. Comments cannot be on the same line as a command or else they "
"will be interpreted as part of the command; they must be on a new line. "
"Blank lines are ignored."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:173
msgid ""
"The equals (`=`) character is used to define any environment settings. In "
"this example, it is used to define the `SHELL` and `PATH`. If the `SHELL` is "
"omitted, cron will use the default Bourne shell. If the `PATH` is omitted, "
"the full path must be given to the command or script to run."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:175
msgid ""
"This line defines the seven fields used in a system crontab: `minute`, "
"`hour`, `mday`, `month`, `wday`, `who`, and `command`. The `minute` field is "
"the time in minutes when the specified command will be run, the `hour` is "
"the hour when the specified command will be run, the `mday` is the day of "
"the month, `month` is the month, and `wday` is the day of the week. These "
"fields must be numeric values, representing the twenty-four hour clock, or a "
"`*`, representing all values for that field. The `who` field only exists in "
"the system crontab and specifies which user the command should be run as. "
"The last field is the command to be executed."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:177
msgid ""
"This entry defines the values for this cron job. The `\\*/5`, followed by "
"several more `*` characters, specifies that `/usr/libexec/atrun` is invoked "
"by `root` every five minutes of every hour, of every day and day of the "
"week, of every month.Commands can include any number of switches. However, "
"commands which extend to multiple lines need to be broken with the backslash "
"\"\\\" continuation character."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:179
#, no-wrap
msgid "Creating a User Crontab"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:182
msgid "To create a user crontab, invoke `crontab` in editor mode:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:186
#, no-wrap
msgid "% crontab -e\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:191
msgid ""
"This will open the user's crontab using the default text editor.  The first "
"time a user runs this command, it will open an empty file.  Once a user "
"creates a crontab, this command will open that file for editing."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:193
msgid ""
"It is useful to add these lines to the top of the crontab file in order to "
"set the environment variables and to remember the meanings of the fields in "
"the crontab:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:200
#, no-wrap
msgid ""
"SHELL=/bin/sh\n"
"PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin\n"
"# Order of crontab fields\n"
"# minute\thour\tmday\tmonth\twday\tcommand\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:205
msgid ""
"Then add a line for each command or script to run, specifying the time to "
"run the command.  This example runs the specified custom Bourne shell script "
"every day at two in the afternoon.  Since the path to the script is not "
"specified in `PATH`, the full path to the script is given:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:209
#, no-wrap
msgid "0\t14\t*\t*\t*\t/usr/home/dru/bin/mycustomscript.sh\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:216
msgid ""
"Before using a custom script, make sure it is executable and test it with "
"the limited set of environment variables set by cron.  To replicate the "
"environment that would be used to run the above cron entry, use:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:220
#, no-wrap
msgid "env -i SHELL=/bin/sh PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin HOME=/home/dru LOGNAME=dru /usr/home/dru/bin/mycustomscript.sh\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:224
msgid ""
"The environment set by cron is discussed in man:crontab[5].  Checking that "
"scripts operate correctly in a cron environment is especially important if "
"they include any commands that delete files using wildcards."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:229
msgid ""
"When finished editing the crontab, save the file.  It will automatically be "
"installed and cron will read the crontab and run its cron jobs at their "
"specified times.  To list the cron jobs in a crontab, use this command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:234
#, no-wrap
msgid ""
"% crontab -l\n"
"0\t14\t*\t*\t*\t/usr/home/dru/bin/mycustomscript.sh\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:237
msgid "To remove all of the cron jobs in a user crontab:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:242
#, no-wrap
msgid ""
"% crontab -r\n"
"remove crontab for dru? y\n"
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:245
#, no-wrap
msgid "Managing Services in FreeBSD"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:250
msgid ""
"FreeBSD uses the man:rc[8] system of startup scripts during system "
"initialization and for managing services.  The scripts listed in [."
"filename]#/etc/rc.d# provide basic services which can be controlled with the "
"`start`, `stop`, and `restart` options to man:service[8].  For instance, man:"
"sshd[8] can be restarted with the following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:254
#, no-wrap
msgid "# service sshd restart\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:259
msgid ""
"This procedure can be used to start services on a running system.  Services "
"will be started automatically at boot time as specified in man:rc.conf[5].  "
"For example, to enable man:natd[8] at system startup, add the following line "
"to [.filename]#/etc/rc.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:263
#, no-wrap
msgid "natd_enable=\"YES\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:267
msgid ""
"If a `natd_enable=\"NO\"` line is already present, change the `NO` to "
"`YES`.  The man:rc[8] scripts will automatically load any dependent services "
"during the next boot, as described below."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:272
msgid ""
"Since the man:rc[8] system is primarily intended to start and stop services "
"at system startup and shutdown time, the `start`, `stop` and `restart` "
"options will only perform their action if the appropriate [.filename]#/etc/"
"rc.conf# variable is set.  For instance, `sshd restart` will only work if "
"`sshd_enable` is set to `YES` in [.filename]#/etc/rc.conf#.  To `start`, "
"`stop` or `restart` a service regardless of the settings in [.filename]#/etc/"
"rc.conf#, these commands should be prefixed with \"one\".  For instance, to "
"restart man:sshd[8] regardless of the current [.filename]#/etc/rc.conf# "
"setting, execute the following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:276
#, no-wrap
msgid "# service sshd onerestart\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:280
msgid ""
"To check if a service is enabled in [.filename]#/etc/rc.conf#, run the "
"appropriate man:rc[8] script with `rcvar`.  This example checks to see if "
"man:sshd[8] is enabled in [.filename]#/etc/rc.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:288
#, no-wrap
msgid ""
"# service sshd rcvar\n"
"# sshd\n"
"#\n"
"sshd_enable=\"YES\"\n"
"#   (default: \"\")\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:293
msgid ""
"The `# sshd` line is output from the above command, not a `root` console."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:297
msgid ""
"To determine whether or not a service is running, use `status`.  For "
"instance, to verify that man:sshd[8] is running:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:302
#, no-wrap
msgid ""
"# service sshd status\n"
"sshd is running as pid 433.\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:308
msgid ""
"In some cases, it is also possible to `reload` a service.  This attempts to "
"send a signal to an individual service, forcing the service to reload its "
"configuration files.  In most cases, this means sending the service a "
"`SIGHUP` signal.  Support for this feature is not included for every service."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:311
msgid ""
"The man:rc[8] system is used for network services and it also contributes to "
"most of the system initialization.  For instance, when the [.filename]#/etc/"
"rc.d/bgfsck# script is executed, it prints out the following message:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:315
#, no-wrap
msgid "Starting background file system checks in 60 seconds.\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:318
msgid ""
"This script is used for background file system checks, which occur only "
"during system initialization."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:323
msgid ""
"Many system services depend on other services to function properly.  For "
"example, man:yp[8] and other RPC-based services may fail to start until "
"after the man:rpcbind[8] service has started.  To resolve this issue, "
"information about dependencies and other meta-data is included in the "
"comments at the top of each startup script.  The man:rcorder[8] program is "
"used to parse these comments during system initialization to determine the "
"order in which system services should be invoked to satisfy the dependencies."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:325
msgid ""
"The following key word must be included in all startup scripts as it is "
"required by man:rc.subr[8] to \"enable\" the startup script:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:327
msgid "`PROVIDE`: Specifies the services this file provides."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:330
msgid ""
"The following key words may be included at the top of each startup script.  "
"They are not strictly necessary, but are useful as hints to man:rcorder[8]:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:332
msgid ""
"`REQUIRE`: Lists services which are required for this service. The script "
"containing this key word will run _after_ the specified services."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:333
msgid ""
"`BEFORE`: Lists services which depend on this service. The script containing "
"this key word will run _before_ the specified services."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:335
msgid ""
"By carefully setting these keywords for each startup script, an "
"administrator has a fine-grained level of control of the startup order of "
"the scripts, without the need for \"runlevels\" used by some UNIX(R) "
"operating systems."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:338
msgid ""
"Additional information can be found in man:rc[8] and man:rc.subr[8].  Refer "
"to extref:{rc-scripting}[this article] for instructions on how to create "
"custom man:rc[8] scripts."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:340
#, no-wrap
msgid "Managing System-Specific Configuration"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:345
msgid ""
"The principal location for system configuration information is [.filename]#/"
"etc/rc.conf#.  This file contains a wide range of configuration information "
"and it is read at system startup to configure the system.  It provides the "
"configuration information for the [.filename]#rc*# files."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:349
msgid ""
"The entries in [.filename]#/etc/rc.conf# override the default settings in [."
"filename]#/etc/defaults/rc.conf#.  The file containing the default settings "
"should not be edited.  Instead, all system-specific changes should be made "
"to [.filename]#/etc/rc.conf#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:353
msgid ""
"A number of strategies may be applied in clustered applications to separate "
"site-wide configuration from system-specific configuration in order to "
"reduce administration overhead.  The recommended approach is to place system-"
"specific configuration into [.filename]#/etc/rc.conf.local#.  For example, "
"these entries in [.filename]#/etc/rc.conf# apply to all systems:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:359
#, no-wrap
msgid ""
"sshd_enable=\"YES\"\n"
"keyrate=\"fast\"\n"
"defaultrouter=\"10.1.1.254\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:362
msgid ""
"Whereas these entries in [.filename]#/etc/rc.conf.local# apply to this "
"system only:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:367
#, no-wrap
msgid ""
"hostname=\"node1.example.org\"\n"
"ifconfig_fxp0=\"inet 10.1.1.1/8\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:370
msgid ""
"Distribute [.filename]#/etc/rc.conf# to every system using an application "
"such as rsync or puppet, while [.filename]#/etc/rc.conf.local# remains "
"unique."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:372
msgid ""
"Upgrading the system will not overwrite [.filename]#/etc/rc.conf#, so system "
"configuration information will not be lost."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:379
msgid ""
"Both [.filename]#/etc/rc.conf# and [.filename]#/etc/rc.conf.local# are "
"parsed by man:sh[1].  This allows system operators to create complex "
"configuration scenarios.  Refer to man:rc.conf[5] for further information on "
"this topic."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:382
#, no-wrap
msgid "Setting Up Network Interface Cards"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:385
msgid ""
"Adding and configuring a network interface card (NIC) is a common task for "
"any FreeBSD administrator."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:386
#, no-wrap
msgid "Locating the Correct Driver"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:391
msgid ""
"First, determine the model of the NIC and the chip it uses.  FreeBSD "
"supports a wide variety of NICs.  Check the Hardware Compatibility List for "
"the FreeBSD release to see if the NIC is supported."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:395
msgid ""
"If the NIC is supported, determine the name of the FreeBSD driver for the "
"NIC.  Refer to [.filename]#/usr/src/sys/conf/NOTES# and [.filename]#/usr/src/"
"sys/arch/conf/NOTES# for the list of NIC drivers with some information about "
"the supported chipsets.  When in doubt, read the manual page of the driver "
"as it will provide more information about the supported hardware and any "
"known limitations of the driver."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:399
msgid ""
"The drivers for common NICs are already present in the [.filename]#GENERIC# "
"kernel, meaning the NIC should be probed during boot.  The system's boot "
"messages can be viewed by typing `more /var/run/dmesg.boot` and using the "
"spacebar to scroll through the text.  In this example, two Ethernet NICs "
"using the man:dc[4] driver are present on the system:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:416
#, no-wrap
msgid ""
"dc0: <82c169 PNIC 10/100BaseTX> port 0xa000-0xa0ff mem 0xd3800000-0xd38\n"
"000ff irq 15 at device 11.0 on pci0\n"
"miibus0: <MII bus> on dc0\n"
"bmtphy0: <BCM5201 10/100baseTX PHY> PHY 1 on miibus0\n"
"bmtphy0:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto\n"
"dc0: Ethernet address: 00:a0:cc:da:da:da\n"
"dc0: [ITHREAD]\n"
"dc1: <82c169 PNIC 10/100BaseTX> port 0x9800-0x98ff mem 0xd3000000-0xd30\n"
"000ff irq 11 at device 12.0 on pci0\n"
"miibus1: <MII bus> on dc1\n"
"bmtphy1: <BCM5201 10/100baseTX PHY> PHY 1 on miibus1\n"
"bmtphy1:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto\n"
"dc1: Ethernet address: 00:a0:cc:da:da:db\n"
"dc1: [ITHREAD]\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:420
msgid ""
"If the driver for the NIC is not present in [.filename]#GENERIC#, but a "
"driver is available, the driver will need to be loaded before the NIC can be "
"configured and used.  This may be accomplished in one of two ways:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:422
msgid ""
"The easiest way is to load a kernel module for the NIC using man:kldload[8]. "
"To also automatically load the driver at boot time, add the appropriate line "
"to [.filename]#/boot/loader.conf#. Not all NIC drivers are available as "
"modules."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:423
msgid ""
"Alternatively, statically compile support for the NIC into a custom kernel. "
"Refer to [.filename]#/usr/src/sys/conf/NOTES#, [.filename]#/usr/src/sys/arch/"
"conf/NOTES# and the manual page of the driver to determine which line to add "
"to the custom kernel configuration file. For more information about "
"recompiling the kernel, refer to crossref:kernelconfig[kernelconfig,"
"Configuring the FreeBSD Kernel]. If the NIC was detected at boot, the kernel "
"does not need to be recompiled."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:425
#, no-wrap
msgid "Using Windows(R) NDIS Drivers"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:429
msgid ""
"Unfortunately, there are still many vendors that do not provide schematics "
"for their drivers to the open source community because they regard such "
"information as trade secrets.  Consequently, the developers of FreeBSD and "
"other operating systems are left with two choices: develop the drivers by a "
"long and pain-staking process of reverse engineering or using the existing "
"driver binaries available for Microsoft(R) Windows(R) platforms."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:434
msgid ""
"FreeBSD provides \"native\" support for the Network Driver Interface "
"Specification (NDIS).  It includes man:ndisgen[8] which can be used to "
"convert a Windows(R) XP driver into a format that can be used on FreeBSD.  "
"As the man:ndis[4] driver uses a Windows(R) XP binary, it only runs on "
"i386(TM) and amd64 systems.  PCI, CardBus, PCMCIA, and USB devices are "
"supported."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:436
msgid "To use man:ndisgen[8], three things are needed:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:438
msgid "FreeBSD kernel sources."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:439
msgid "A Windows(R) XP driver binary with a [.filename]#.SYS# extension."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:440
msgid ""
"A Windows(R) XP driver configuration file with a [.filename]#.INF# extension."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:444
msgid ""
"Download the [.filename]#.SYS# and [.filename]#.INF# files for the specific "
"NIC.  Generally, these can be found on the driver CD or at the vendor's "
"website.  The following examples use [.filename]#W32DRIVER.SYS# and [."
"filename]#W32DRIVER.INF#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:448
msgid ""
"The driver bit width must match the version of FreeBSD.  For FreeBSD/i386, "
"use a Windows(R) 32-bit driver.  For FreeBSD/amd64, a Windows(R) 64-bit "
"driver is needed."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:451
msgid ""
"The next step is to compile the driver binary into a loadable kernel "
"module.  As `root`, use man:ndisgen[8]:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:455
#, no-wrap
msgid "# ndisgen /path/to/W32DRIVER.INF /path/to/W32DRIVER.SYS\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:460
msgid ""
"This command is interactive and prompts for any extra information it "
"requires.  A new kernel module will be generated in the current directory.  "
"Use man:kldload[8] to load the new module:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:464
#, no-wrap
msgid "# kldload ./W32DRIVER_SYS.ko\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:469
msgid ""
"In addition to the generated kernel module, the [.filename]#ndis.ko# and [."
"filename]#if_ndis.ko# modules must be loaded.  This should happen "
"automatically when any module that depends on man:ndis[4] is loaded.  If "
"not, load them manually, using the following commands:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:474
#, no-wrap
msgid ""
"# kldload ndis\n"
"# kldload if_ndis\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:477
msgid ""
"The first command loads the man:ndis[4] miniport driver wrapper and the "
"second loads the generated NIC driver."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:480
msgid ""
"Check man:dmesg[8] to see if there were any load errors.  If all went well, "
"the output should be similar to the following:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:488
#, no-wrap
msgid ""
"ndis0: <Wireless-G PCI Adapter> mem 0xf4100000-0xf4101fff irq 3 at device 8.0 on pci1\n"
"ndis0: NDIS API version: 5.0\n"
"ndis0: Ethernet address: 0a:b1:2c:d3:4e:f5\n"
"ndis0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps\n"
"ndis0: 11g rates: 6Mbps 9Mbps 12Mbps 18Mbps 36Mbps 48Mbps 54Mbps\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:491
msgid "From here, [.filename]#ndis0# can be configured like any other NIC."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:494
msgid ""
"To configure the system to load the man:ndis[4] modules at boot time, copy "
"the generated module, [.filename]#W32DRIVER_SYS.ko#, to [.filename]#/boot/"
"modules#.  Then, add the following line to [.filename]#/boot/loader.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:498
#, no-wrap
msgid "W32DRIVER_SYS_load=\"YES\"\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:500
#, no-wrap
msgid "Configuring the Network Card"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:504
msgid ""
"Once the right driver is loaded for the NIC, the card needs to be "
"configured.  It may have been configured at installation time by man:"
"bsdinstall[8]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:506
msgid "To display the NIC configuration, enter the following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:528
#, no-wrap
msgid ""
"% ifconfig\n"
"dc0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> metric 0 mtu 1500\n"
"        options=80008<VLAN_MTU,LINKSTATE>\n"
"        ether 00:a0:cc:da:da:da\n"
"        inet 192.168.1.3 netmask 0xffffff00 broadcast 192.168.1.255\n"
"        media: Ethernet autoselect (100baseTX <full-duplex>)\n"
"        status: active\n"
"dc1: flags=8802<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> metric 0 mtu 1500\n"
"        options=80008<VLAN_MTU,LINKSTATE>\n"
"        ether 00:a0:cc:da:da:db\n"
"        inet 10.0.0.1 netmask 0xffffff00 broadcast 10.0.0.255\n"
"        media: Ethernet 10baseT/UTP\n"
"        status: no carrier\n"
"lo0: flags=8049<UP,LOOPBACK,RUNNING,MULTICAST> metric 0 mtu 16384\n"
"        options=3<RXCSUM,TXCSUM>\n"
"        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x4\n"
"        inet6 ::1 prefixlen 128\n"
"        inet 127.0.0.1 netmask 0xff000000\n"
"        nd6 options=3<PERFORMNUD,ACCEPT_RTADV>\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:531
msgid "In this example, the following devices were displayed:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:533
msgid "[.filename]#dc0#: The first Ethernet interface."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:534
msgid "[.filename]#dc1#: The second Ethernet interface."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:535
msgid "[.filename]#lo0#: The loopback device."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:538
msgid ""
"FreeBSD uses the driver name followed by the order in which the card is "
"detected at boot to name the NIC.  For example, [.filename]#sis2# is the "
"third NIC on the system using the man:sis[4] driver."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:541
msgid ""
"In this example, [.filename]#dc0# is up and running.  The key indicators are:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:543
msgid "`UP` means that the card is configured and ready."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:544
msgid "The card has an Internet (`inet`) address, `192.168.1.3`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:545
msgid ""
"It has a valid subnet mask (`netmask`), where `0xffffff00` is the same as "
"`255.255.255.0`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:546
msgid "It has a valid broadcast address, `192.168.1.255`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:547
msgid "The MAC address of the card (`ether`) is `00:a0:cc:da:da:da`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:548
msgid ""
"The physical media selection is on autoselection mode (`media: Ethernet "
"autoselect (100baseTX <full-duplex>)`). In this example, [.filename]#dc1# is "
"configured to run with `10baseT/UTP` media. For more information on "
"available media types for a driver, refer to its manual page."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:549
msgid ""
"The status of the link (`status`) is `active`, indicating that the carrier "
"signal is detected. For [.filename]#dc1#, the `status: no carrier` status is "
"normal when an Ethernet cable is not plugged into the card."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:551
msgid "If the man:ifconfig[8] output had shown something similar to:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:559
#, no-wrap
msgid ""
"dc0: flags=8843<BROADCAST,SIMPLEX,MULTICAST> metric 0 mtu 1500\n"
"\toptions=80008<VLAN_MTU,LINKSTATE>\n"
"\tether 00:a0:cc:da:da:da\n"
"\tmedia: Ethernet autoselect (100baseTX <full-duplex>)\n"
"\tstatus: active\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:562
msgid "it would indicate the card has not been configured."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:566
msgid ""
"The card must be configured as `root`.  The NIC configuration can be "
"performed from the command line with man:ifconfig[8] but will not persist "
"after a reboot unless the configuration is also added to [.filename]#/etc/rc."
"conf#.  If a DHCP server is present on the LAN, just add this line:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:570
#, no-wrap
msgid "ifconfig_dc0=\"DHCP\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:573
msgid "Replace _dc0_ with the correct value for the system."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:575
msgid ""
"The line added, then, follow the instructions given in <<config-network-"
"testing>>."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:580
msgid ""
"If the network was configured during installation, some entries for the "
"NIC(s) may be already present.  Double check [.filename]#/etc/rc.conf# "
"before adding any lines."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:584
msgid ""
"If there is no DHCP server, the NIC(s) must be configured manually.  Add a "
"line for each NIC present on the system, as seen in this example:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:589
#, no-wrap
msgid ""
"ifconfig_dc0=\"inet 192.168.1.3 netmask 255.255.255.0\"\n"
"ifconfig_dc1=\"inet 10.0.0.1 netmask 255.255.255.0 media 10baseT/UTP\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:593
msgid ""
"Replace [.filename]#dc0# and [.filename]#dc1# and the IP address information "
"with the correct values for the system.  Refer to the man page for the "
"driver, man:ifconfig[8], and man:rc.conf[5] for more details about the "
"allowed options and the syntax of [.filename]#/etc/rc.conf#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:596
msgid ""
"If the network is not using DNS, edit [.filename]#/etc/hosts# to add the "
"names and IP addresses of the hosts on the LAN, if they are not already "
"there.  For more information, refer to man:hosts[5] and to [.filename]#/usr/"
"share/examples/etc/hosts#."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:600
msgid ""
"If there is no DHCP server and access to the Internet is needed, manually "
"configure the default gateway and the nameserver:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:605
#, no-wrap
msgid ""
"# sysrc defaultrouter=\"your_default_router\"\n"
"# echo 'nameserver your_DNS_server' >> /etc/resolv.conf\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:610
#, no-wrap
msgid "Testing and Troubleshooting"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:614
msgid ""
"Once the necessary changes to [.filename]#/etc/rc.conf# are saved, a reboot "
"can be used to test the network configuration and to verify that the system "
"restarts without any configuration errors.  Alternatively, apply the "
"settings to the networking system with this command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:618
#, no-wrap
msgid "# service netif restart\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:623
msgid ""
"If a default gateway has been set in [.filename]#/etc/rc.conf#, also issue "
"this command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:627
#, no-wrap
msgid "# service routing restart\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:632
msgid "Once the networking system has been relaunched, test the NICs."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:633
#, no-wrap
msgid "Testing the Ethernet Card"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:636
msgid ""
"To verify that an Ethernet card is configured correctly, man:ping[8] the "
"interface itself, and then man:ping[8] another machine on the LAN:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:646
#, no-wrap
msgid ""
"% ping -c5 192.168.1.3\n"
"PING 192.168.1.3 (192.168.1.3): 56 data bytes\n"
"64 bytes from 192.168.1.3: icmp_seq=0 ttl=64 time=0.082 ms\n"
"64 bytes from 192.168.1.3: icmp_seq=1 ttl=64 time=0.074 ms\n"
"64 bytes from 192.168.1.3: icmp_seq=2 ttl=64 time=0.076 ms\n"
"64 bytes from 192.168.1.3: icmp_seq=3 ttl=64 time=0.108 ms\n"
"64 bytes from 192.168.1.3: icmp_seq=4 ttl=64 time=0.076 ms\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:650
#, no-wrap
msgid ""
"--- 192.168.1.3 ping statistics ---\n"
"5 packets transmitted, 5 packets received, 0% packet loss\n"
"round-trip min/avg/max/stddev = 0.074/0.083/0.108/0.013 ms\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:661
#, no-wrap
msgid ""
"% ping -c5 192.168.1.2\n"
"PING 192.168.1.2 (192.168.1.2): 56 data bytes\n"
"64 bytes from 192.168.1.2: icmp_seq=0 ttl=64 time=0.726 ms\n"
"64 bytes from 192.168.1.2: icmp_seq=1 ttl=64 time=0.766 ms\n"
"64 bytes from 192.168.1.2: icmp_seq=2 ttl=64 time=0.700 ms\n"
"64 bytes from 192.168.1.2: icmp_seq=3 ttl=64 time=0.747 ms\n"
"64 bytes from 192.168.1.2: icmp_seq=4 ttl=64 time=0.704 ms\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:665
#, no-wrap
msgid ""
"--- 192.168.1.2 ping statistics ---\n"
"5 packets transmitted, 5 packets received, 0% packet loss\n"
"round-trip min/avg/max/stddev = 0.700/0.729/0.766/0.025 ms\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:671
msgid ""
"To test network resolution, use the host name instead of the IP address.  If "
"there is no DNS server on the network, [.filename]#/etc/hosts# must first be "
"configured.  To this purpose, edit [.filename]#/etc/hosts# to add the names "
"and IP addresses of the hosts on the LAN, if they are not already there.  "
"For more information, refer to man:hosts[5] and to [.filename]#/usr/share/"
"examples/etc/hosts#."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:672
#, no-wrap
msgid "Troubleshooting"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:676
msgid ""
"When troubleshooting hardware and software configurations, check the simple "
"things first.  Is the network cable plugged in? Are the network services "
"properly configured? Is the firewall configured correctly? Is the NIC "
"supported by FreeBSD? Before sending a bug report, always check the Hardware "
"Notes, update the version of FreeBSD to the latest STABLE version, check the "
"mailing list archives, and search the Internet."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:679
msgid ""
"If the card works, yet performance is poor, read through man:tuning[7].  "
"Also, check the network configuration as incorrect network settings can "
"cause slow connections."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:684
msgid ""
"Some users experience one or two `device timeout` messages, which is normal "
"for some cards.  If they continue, or are bothersome, determine if the "
"device is conflicting with another device.  Double check the cable "
"connections.  Consider trying another card."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:689
msgid ""
"To resolve `watchdog timeout` errors, first check the network cable.  Many "
"cards require a PCI slot which supports bus mastering.  On some old "
"motherboards, only one PCI slot allows it, usually slot 0.  Check the NIC "
"and the motherboard documentation to determine if that may be the problem."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:694
msgid ""
"`No route to host` messages occur if the system is unable to route a packet "
"to the destination host.  This can happen if no default route is specified "
"or if a cable is unplugged.  Check the output of `netstat -rn` and make sure "
"there is a valid route to the host.  If there is not, read crossref:advanced-"
"networking[network-routing,“Gateways and Routes”]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:698
msgid ""
"`ping: sendto: Permission denied` error messages are often caused by a "
"misconfigured firewall.  If a firewall is enabled on FreeBSD but no rules "
"have been defined, the default policy is to deny all traffic, even man:"
"ping[8].  Refer to crossref:firewalls[firewalls,Firewalls] for more "
"information."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:703
msgid ""
"Sometimes performance of the card is poor or below average.  In these cases, "
"try setting the media selection mode from `autoselect` to the correct media "
"selection.  While this works for most hardware, it may or may not resolve "
"the issue.  Again, check all the network settings, and refer to man:"
"tuning[7]."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:705
#, no-wrap
msgid "Virtual Hosts"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:709
msgid ""
"A common use of FreeBSD is virtual site hosting, where one server appears to "
"the network as many servers.  This is achieved by assigning multiple network "
"addresses to a single interface."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:712
msgid ""
"A given network interface has one \"real\" address, and may have any number "
"of \"alias\" addresses.  These aliases are normally added by placing alias "
"entries in [.filename]#/etc/rc.conf#, as seen in this example:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:716
#, no-wrap
msgid "ifconfig_fxp0_alias0=\"inet xxx.xxx.xxx.xxx netmask xxx.xxx.xxx.xxx\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:720
msgid ""
"Alias entries must start with `alias__0__` using a sequential number such as "
"`alias0`, `alias1`, and so on.  The configuration process will stop at the "
"first missing number."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:724
msgid ""
"The calculation of alias netmasks is important.  For a given interface, "
"there must be one address which correctly represents the network's netmask.  "
"Any other addresses which fall within this network must have a netmask of "
"all ``1``s, expressed as either `255.255.255.255` or `0xffffffff`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:729
msgid ""
"For example, consider the case where the [.filename]#fxp0# interface is "
"connected to two networks: `10.1.1.0` with a netmask of `255.255.255.0` and "
"`202.0.75.16` with a netmask of `255.255.255.240`.  The system is to be "
"configured to appear in the ranges `10.1.1.1` through `10.1.1.5` and "
"`202.0.75.17` through `202.0.75.20`.  Only the first address in a given "
"network range should have a real netmask.  All the rest (`10.1.1.2` through "
"`10.1.1.5` and `202.0.75.18` through `202.0.75.20`) must be configured with "
"a netmask of `255.255.255.255`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:731
msgid ""
"The following [.filename]#/etc/rc.conf# entries configure the adapter "
"correctly for this scenario:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:743
#, no-wrap
msgid ""
"ifconfig_fxp0=\"inet 10.1.1.1 netmask 255.255.255.0\"\n"
"ifconfig_fxp0_alias0=\"inet 10.1.1.2 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias1=\"inet 10.1.1.3 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias2=\"inet 10.1.1.4 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias3=\"inet 10.1.1.5 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias4=\"inet 202.0.75.17 netmask 255.255.255.240\"\n"
"ifconfig_fxp0_alias5=\"inet 202.0.75.18 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias6=\"inet 202.0.75.19 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias7=\"inet 202.0.75.20 netmask 255.255.255.255\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:747
msgid ""
"A simpler way to express this is with a space-separated list of IP address "
"ranges.  The first address will be given the indicated subnet mask and the "
"additional addresses will have a subnet mask of `255.255.255.255`."
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:751
#, no-wrap
msgid "ifconfig_fxp0_aliases=\"inet 10.1.1.1-5/24 inet 202.0.75.17-20/28\"\n"
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:754
#, no-wrap
msgid "Configuring System Logging"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:760
msgid ""
"Generating and reading system logs is an important aspect of system "
"administration.  The information in system logs can be used to detect "
"hardware and software issues as well as application and system configuration "
"errors.  This information also plays an important role in security auditing "
"and incident response.  Most system daemons and applications will generate "
"log entries."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:766
msgid ""
"FreeBSD provides a system logger, syslogd, to manage logging.  By default, "
"syslogd is started when the system boots.  This is controlled by the "
"variable `syslogd_enable` in [.filename]#/etc/rc.conf#.  There are numerous "
"application arguments that can be set using `syslogd_flags` in [.filename]#/"
"etc/rc.conf#.  Refer to man:syslogd[8] for more information on the available "
"arguments."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:768
msgid ""
"This section describes how to configure the FreeBSD system logger for both "
"local and remote logging and how to perform log rotation and log management."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:769
#, no-wrap
msgid "Configuring Local Logging"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:776
msgid ""
"The configuration file, [.filename]#/etc/syslog.conf#, controls what syslogd "
"does with log entries as they are received.  There are several parameters to "
"control the handling of incoming events.  The _facility_ describes which "
"subsystem generated the message, such as the kernel or a daemon, and the "
"_level_ describes the severity of the event that occurred.  This makes it "
"possible to configure if and where a log message is logged, depending on the "
"facility and level.  It is also possible to take action depending on the "
"application that sent the message, and in the case of remote logging, the "
"hostname of the machine generating the logging event."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:784
msgid ""
"This configuration file contains one line per action, where the syntax for "
"each line is a selector field followed by an action field.  The syntax of "
"the selector field is _facility.level_ which will match log messages from "
"_facility_ at level _level_ or higher.  It is also possible to add an "
"optional comparison flag before the level to specify more precisely what is "
"logged.  Multiple selector fields can be used for the same action, and are "
"separated with a semicolon (`;`).  Using `*` will match everything.  The "
"action field denotes where to send the log message, such as to a file or "
"remote log host.  As an example, here is the default [.filename]#syslog."
"conf# from FreeBSD:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:822
#, no-wrap
msgid ""
"# $FreeBSD$\n"
"#\n"
"#       Spaces ARE valid field separators in this file. However,\n"
"#       other *nix-like systems still insist on using tabs as field\n"
"#       separators. If you are sharing this file between systems, you\n"
"#       may want to use only tabs as field separators here.\n"
"#       Consult the syslog.conf(5) manpage.\n"
"*.err;kern.warning;auth.notice;mail.crit                /dev/console\n"
"*.notice;authpriv.none;kern.debug;lpr.info;mail.crit;news.err   /var/log/messages\n"
"security.*                                      /var/log/security\n"
"auth.info;authpriv.info                         /var/log/auth.log\n"
"mail.info                                       /var/log/maillog\n"
"lpr.info                                        /var/log/lpd-errs\n"
"ftp.info                                        /var/log/xferlog\n"
"cron.*                                          /var/log/cron\n"
"!-devd\n"
"*.=debug                                        /var/log/debug.log\n"
"*.emerg                                         *\n"
"# uncomment this to log all writes to /dev/console to /var/log/console.log\n"
"#console.info                                   /var/log/console.log\n"
"# uncomment this to enable logging of all log messages to /var/log/all.log\n"
"# touch /var/log/all.log and chmod it to mode 600 before it will work\n"
"#*.*                                            /var/log/all.log\n"
"# uncomment this to enable logging to a remote loghost named loghost\n"
"#*.*                                            @loghost\n"
"# uncomment these if you're running inn\n"
"# news.crit                                     /var/log/news/news.crit\n"
"# news.err                                      /var/log/news/news.err\n"
"# news.notice                                   /var/log/news/news.notice\n"
"# Uncomment this if you wish to see messages produced by devd\n"
"# !devd\n"
"# *.>=info\n"
"!ppp\n"
"*.*                                             /var/log/ppp.log\n"
"!*\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:825
msgid "In this example:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:827
msgid ""
"Line 8 matches all messages with a level of `err` or higher, as well as "
"`kern.warning`, `auth.notice` and `mail.crit`, and sends these log messages "
"to the console ([.filename]#/dev/console#)."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:828
msgid ""
"Line 12 matches all messages from the `mail` facility at level `info` or "
"above and logs the messages to [.filename]#/var/log/maillog#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:829
msgid ""
"Line 17 uses a comparison flag (`=`) to only match messages at level `debug` "
"and logs them to [.filename]#/var/log/debug.log#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:830
msgid ""
"Line 33 is an example usage of a program specification. This makes the rules "
"following it only valid for the specified program. In this case, only the "
"messages generated by ppp are logged to [.filename]#/var/log/ppp.log#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:832
msgid ""
"The available levels, in order from most to least critical are `emerg`, "
"`alert`, `crit`, `err`, `warning`, `notice`, `info`, and `debug`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:835
msgid ""
"The facilities, in no particular order, are `auth`, `authpriv`, `console`, "
"`cron`, `daemon`, `ftp`, `kern`, `lpr`, `mail`, `mark`, `news`, `security`, "
"`syslog`, `user`, `uucp`, and `local0` through `local7`.  Be aware that "
"other operating systems might have different facilities."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:837
msgid ""
"To log everything of level `notice` and higher to [.filename]#/var/log/"
"daemon.log#, add the following entry:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:841
#, no-wrap
msgid "daemon.notice                                        /var/log/daemon.log\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:845
msgid ""
"For more information about the different levels and facilities, refer to man:"
"syslog[3] and man:syslogd[8].  For more information about [.filename]#/etc/"
"syslog.conf#, its syntax, and more advanced usage examples, see man:syslog."
"conf[5]."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:846
#, no-wrap
msgid "Log Management and Rotation"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:855
msgid ""
"Log files can grow quickly, taking up disk space and making it more "
"difficult to locate useful information.  Log management attempts to mitigate "
"this.  In FreeBSD, newsyslog is used to manage log files.  This built-in "
"program periodically rotates and compresses log files, and optionally "
"creates missing log files and signals programs when log files are moved.  "
"The log files may be generated by syslogd or by any other program which "
"generates log files.  While newsyslog is normally run from man:cron[8], it "
"is not a system daemon.  In the default configuration, it runs every hour."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:860
msgid ""
"To know which actions to take, newsyslog reads its configuration file, [."
"filename]#/etc/newsyslog.conf#.  This file contains one line for each log "
"file that newsyslog manages.  Each line states the file owner, permissions, "
"when to rotate that file, optional flags that affect log rotation, such as "
"compression, and programs to signal when the log is rotated.  Here is the "
"default configuration in FreeBSD:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:902
#, no-wrap
msgid ""
"# configuration file for newsyslog\n"
"# $FreeBSD$\n"
"#\n"
"# Entries which do not specify the '/pid_file' field will cause the\n"
"# syslogd process to be signalled when that log file is rotated.  This\n"
"# action is only appropriate for log files which are written to by the\n"
"# syslogd process (ie, files listed in /etc/syslog.conf).  If there\n"
"# is no process which needs to be signalled when a given log file is\n"
"# rotated, then the entry for that file should include the 'N' flag.\n"
"#\n"
"# The 'flags' field is one or more of the letters: BCDGJNUXZ or a '-'.\n"
"#\n"
"# Note: some sites will want to select more restrictive protections than the\n"
"# defaults.  In particular, it may be desirable to switch many of the 644\n"
"# entries to 640 or 600.  For example, some sites will consider the\n"
"# contents of maillog, messages, and lpd-errs to be confidential.  In the\n"
"# future, these defaults may change to more conservative ones.\n"
"#\n"
"# logfilename          [owner:group]    mode count size when  flags [/pid_file] [sig_num]\n"
"/var/log/all.log                        600  7     *    @T00  J\n"
"/var/log/amd.log                        644  7     100  *     J\n"
"/var/log/auth.log                       600  7     100  @0101T JC\n"
"/var/log/console.log                    600  5     100  *     J\n"
"/var/log/cron                           600  3     100  *     JC\n"
"/var/log/daily.log                      640  7     *    @T00  JN\n"
"/var/log/debug.log                      600  7     100  *     JC\n"
"/var/log/kerberos.log                   600  7     100  *     J\n"
"/var/log/lpd-errs                       644  7     100  *     JC\n"
"/var/log/maillog                        640  7     *    @T00  JC\n"
"/var/log/messages                       644  5     100  @0101T JC\n"
"/var/log/monthly.log                    640  12    *    $M1D0 JN\n"
"/var/log/pflog                          600  3     100  *     JB    /var/run/pflogd.pid\n"
"/var/log/ppp.log        root:network    640  3     100  *     JC\n"
"/var/log/devd.log                       644  3     100  *     JC\n"
"/var/log/security                       600  10    100  *     JC\n"
"/var/log/sendmail.st                    640  10    *    168   B\n"
"/var/log/utx.log                        644  3     *    @01T05 B\n"
"/var/log/weekly.log                     640  5     1    $W6D0 JN\n"
"/var/log/xferlog                        600  7     100  *     JC\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:911
msgid ""
"Each line starts with the name of the log to be rotated, optionally followed "
"by an owner and group for both rotated and newly created files.  The `mode` "
"field sets the permissions on the log file and `count` denotes how many "
"rotated log files should be kept.  The `size` and `when` fields tell "
"newsyslog when to rotate the file.  A log file is rotated when either its "
"size is larger than the `size` field or when the time in the `when` field "
"has passed.  An asterisk (`*`) means that this field is ignored.  The "
"_flags_ field gives further instructions, such as how to compress the "
"rotated file or to create the log file if it is missing.  The last two "
"fields are optional and specify the name of the Process ID (PID) file of a "
"process and a signal number to send to that process when the file is rotated."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:914
msgid ""
"For more information on all fields, valid flags, and how to specify the "
"rotation time, refer to man:newsyslog.conf[5].  Since newsyslog is run from "
"man:cron[8], it cannot rotate files more often than it is scheduled to run "
"from man:cron[8]."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:916
#, no-wrap
msgid "Configuring Remote Logging"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:920
msgid ""
"Monitoring the log files of multiple hosts can become unwieldy as the number "
"of systems increases.  Configuring centralized logging can reduce some of "
"the administrative burden of log file administration."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:924
msgid ""
"In FreeBSD, centralized log file aggregation, merging, and rotation can be "
"configured using syslogd and newsyslog.  This section demonstrates an "
"example configuration, where host `A`, named `logserv.example.com`, will "
"collect logging information for the local network.  Host `B`, named "
"`logclient.example.com`, will be configured to pass logging information to "
"the logging server."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:925
#, no-wrap
msgid "Log Server Configuration"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:929
msgid ""
"A log server is a system that has been configured to accept logging "
"information from other hosts.  Before configuring a log server, check the "
"following:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:931
msgid ""
"If there is a firewall between the logging server and any logging clients, "
"ensure that the firewall ruleset allows UDP port 514 for both the clients "
"and the server."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:932
msgid ""
"The logging server and all client machines must have forward and reverse "
"entries in the local DNS. If the network does not have a DNS server, create "
"entries in each system's [.filename]#/etc/hosts#. Proper name resolution is "
"required so that log entries are not rejected by the logging server."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:935
msgid ""
"On the log server, edit [.filename]#/etc/syslog.conf# to specify the name of "
"the client to receive log entries from, the logging facility to be used, and "
"the name of the log to store the host's log entries.  This example adds the "
"hostname of `B`, logs all facilities, and stores the log entries in [."
"filename]#/var/log/logclient.log#."
msgstr ""

#. type: Block title
#: documentation/content/en/books/handbook/config/_index.adoc:936
#, no-wrap
msgid "Sample Log Server Configuration"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:944
#, no-wrap
msgid ""
"+logclient.example.com\n"
"*.*     /var/log/logclient.log\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:950
msgid ""
"When adding multiple log clients, add a similar two-line entry for each "
"client.  More information about the available facilities may be found in man:"
"syslog.conf[5]."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:952
msgid "Next, configure [.filename]#/etc/rc.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:957
#, no-wrap
msgid ""
"syslogd_enable=\"YES\"\n"
"syslogd_flags=\"-a logclient.example.com -v -v\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:963
msgid ""
"The first entry starts syslogd at system boot.  The second entry allows log "
"entries from the specified client.  The `-v -v` increases the verbosity of "
"logged messages.  This is useful for tweaking facilities as administrators "
"are able to see what type of messages are being logged under each facility."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:967
msgid ""
"Multiple `-a` options may be specified to allow logging from multiple "
"clients.  IP addresses and whole netblocks may also be specified.  Refer to "
"man:syslogd[8] for a full list of possible options."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:969
msgid "Finally, create the log file:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:973
#, no-wrap
msgid "# touch /var/log/logclient.log\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:976
msgid "At this point, syslogd should be restarted and verified:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:981
#, no-wrap
msgid ""
"# service syslogd restart\n"
"# pgrep syslog\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:985
msgid ""
"If a PID is returned, the server restarted successfully, and client "
"configuration can begin.  If the server did not restart, consult [."
"filename]#/var/log/messages# for the error."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:986
#, no-wrap
msgid "Log Client Configuration"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:990
msgid ""
"A logging client sends log entries to a logging server on the network.  The "
"client also keeps a local copy of its own logs."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:992
msgid ""
"Once a logging server has been configured, edit [.filename]#/etc/rc.conf# on "
"the logging client:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:997
#, no-wrap
msgid ""
"syslogd_enable=\"YES\"\n"
"syslogd_flags=\"-s -v -v\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1001
msgid ""
"The first entry enables syslogd on boot up.  The second entry prevents logs "
"from being accepted by this client from other hosts (`-s`) and increases the "
"verbosity of logged messages."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1004
msgid ""
"Next, define the logging server in the client's [.filename]#/etc/syslog."
"conf#.  In this example, all logged facilities are sent to a remote system, "
"denoted by the `@` symbol, with the specified hostname:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1008
#, no-wrap
msgid "*.*\t\t@logserv.example.com\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1011
msgid "After saving the edit, restart syslogd for the changes to take effect:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1015
#: documentation/content/en/books/handbook/config/_index.adoc:1045
#, no-wrap
msgid "# service syslogd restart\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1018
msgid ""
"To test that log messages are being sent across the network, use man:"
"logger[1] on the client to send a message to syslogd:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1022
#, no-wrap
msgid "# logger \"Test message from logclient\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1025
msgid ""
"This message should now exist both in [.filename]#/var/log/messages# on the "
"client and [.filename]#/var/log/logclient.log# on the log server."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1026
#, no-wrap
msgid "Debugging Log Servers"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1032
msgid ""
"If no messages are being received on the log server, the cause is most "
"likely a network connectivity issue, a hostname resolution issue, or a typo "
"in a configuration file.  To isolate the cause, ensure that both the logging "
"server and the logging client are able to `ping` each other using the "
"hostname specified in their [.filename]#/etc/rc.conf#.  If this fails, check "
"the network cabling, the firewall ruleset, and the hostname entries in the "
"DNS server or [.filename]#/etc/hosts# on both the logging server and "
"clients.  Repeat until the `ping` is successful from both hosts."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1036
msgid ""
"If the `ping` succeeds on both hosts but log messages are still not being "
"received, temporarily increase logging verbosity to narrow down the "
"configuration issue.  In the following example, [.filename]#/var/log/"
"logclient.log# on the logging server is empty and [.filename]#/var/log/"
"messages# on the logging client does not indicate a reason for the failure.  "
"To increase debugging output, edit the `syslogd_flags` entry on the logging "
"server and issue a restart:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1040
#, no-wrap
msgid "syslogd_flags=\"-d -a logclient.example.com -v -v\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1048
msgid ""
"Debugging data similar to the following will flash on the console "
"immediately after the restart:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1059
#, no-wrap
msgid ""
"logmsg: pri 56, flags 4, from logserv.example.com, msg syslogd: restart\n"
"syslogd: restarted\n"
"logmsg: pri 6, flags 4, from logserv.example.com, msg syslogd: kernel boot file is /boot/kernel/kernel\n"
"Logging to FILE /var/log/messages\n"
"syslogd: kernel boot file is /boot/kernel/kernel\n"
"cvthname(192.168.1.10)\n"
"validate: dgram from IP 192.168.1.10, port 514, name logclient.example.com;\n"
"rejected in rule 0 due to name mismatch.\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1064
msgid ""
"In this example, the log messages are being rejected due to a typo which "
"results in a hostname mismatch.  The client's hostname should be "
"`logclient`, not `logclien`.  Fix the typo, issue a restart, and verify the "
"results:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1080
#, no-wrap
msgid ""
"# service syslogd restart\n"
"logmsg: pri 56, flags 4, from logserv.example.com, msg syslogd: restart\n"
"syslogd: restarted\n"
"logmsg: pri 6, flags 4, from logserv.example.com, msg syslogd: kernel boot file is /boot/kernel/kernel\n"
"syslogd: kernel boot file is /boot/kernel/kernel\n"
"logmsg: pri 166, flags 17, from logserv.example.com,\n"
"msg Dec 10 20:55:02 <syslog.err> logserv.example.com syslogd: exiting on signal 2\n"
"cvthname(192.168.1.10)\n"
"validate: dgram from IP 192.168.1.10, port 514, name logclient.example.com;\n"
"accepted in rule 0.\n"
"logmsg: pri 15, flags 0, from logclient.example.com, msg Dec 11 02:01:28 trhodes: Test message 2\n"
"Logging to FILE /var/log/logclient.log\n"
"Logging to FILE /var/log/messages\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1083
msgid ""
"At this point, the messages are being properly received and placed in the "
"correct file."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1084
#, no-wrap
msgid "Security Considerations"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1090
msgid ""
"As with any network service, security requirements should be considered "
"before implementing a logging server.  Log files may contain sensitive data "
"about services enabled on the local host, user accounts, and configuration "
"data.  Network data sent from the client to the server will not be encrypted "
"or password protected.  If a need for encryption exists, consider using "
"package:security/stunnel[], which will transmit the logging data over an "
"encrypted tunnel."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1098
msgid ""
"Local security is also an issue.  Log files are not encrypted during use or "
"after log rotation.  Local users may access log files to gain additional "
"insight into system configuration.  Setting proper permissions on log files "
"is critical.  The built-in log rotator, newsyslog, supports setting "
"permissions on newly created and rotated log files.  Setting log files to "
"mode `600` should prevent unwanted access by local users.  Refer to man:"
"newsyslog.conf[5] for additional information."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:1100
#, no-wrap
msgid "Configuration Files"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1102
#, no-wrap
msgid "[.filename]#/etc# Layout"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1106
msgid ""
"There are a number of directories in which configuration information is "
"kept.  These include:"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/config/_index.adoc:1112
#, no-wrap
msgid "[.filename]#/etc#"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/config/_index.adoc:1114
#, no-wrap
msgid "Generic system-specific configuration information."
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/config/_index.adoc:1115
#, no-wrap
msgid "[.filename]#/etc/defaults#"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/config/_index.adoc:1117
#, no-wrap
msgid "Default versions of system configuration files."
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/config/_index.adoc:1118
#, no-wrap
msgid "[.filename]#/etc/mail#"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/config/_index.adoc:1120
#, no-wrap
msgid "Extra man:sendmail[8] configuration and other MTA configuration files."
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/config/_index.adoc:1121
#, no-wrap
msgid "[.filename]#/etc/ppp#"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/config/_index.adoc:1123
#, no-wrap
msgid "Configuration for both user- and kernel-ppp programs."
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/config/_index.adoc:1124
#, no-wrap
msgid "[.filename]#/usr/local/etc#"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/config/_index.adoc:1126
#, no-wrap
msgid "Configuration files for installed applications. May contain per-application subdirectories."
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/config/_index.adoc:1127
#, no-wrap
msgid "[.filename]#/usr/local/etc/rc.d#"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/config/_index.adoc:1129
#, no-wrap
msgid "man:rc[8] scripts for installed applications."
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/config/_index.adoc:1130
#, no-wrap
msgid "[.filename]#/var/db#"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/config/_index.adoc:1131
#, no-wrap
msgid "Automatically generated system-specific database files, such as the package database and the man:locate[1] database."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1133
#, no-wrap
msgid "Hostnames"
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1135
#, no-wrap
msgid "[.filename]#/etc/resolv.conf#"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1138
msgid ""
"How a FreeBSD system accesses the Internet Domain Name System (DNS) is "
"controlled by man:resolv.conf[5]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1140
msgid "The most common entries to [.filename]#/etc/resolv.conf# are:"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/config/_index.adoc:1146
#, no-wrap
msgid "`nameserver`"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/config/_index.adoc:1148
#, no-wrap
msgid "The IP address of a name server the resolver should query. The servers are queried in the order listed with a maximum of three."
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/config/_index.adoc:1149
#, no-wrap
msgid "`search`"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/config/_index.adoc:1151
#, no-wrap
msgid "Search list for hostname lookup. This is normally determined by the domain of the local hostname."
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/config/_index.adoc:1152
#, no-wrap
msgid "`domain`"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/config/_index.adoc:1153
#, no-wrap
msgid "The local domain name."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1156
msgid "A typical [.filename]#/etc/resolv.conf# looks like this:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1162
#, no-wrap
msgid ""
"search example.com\n"
"nameserver 147.11.1.11\n"
"nameserver 147.11.100.30\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1167
msgid "Only one of the `search` and `domain` options should be used."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1170
msgid ""
"When using DHCP, man:dhclient[8] usually rewrites [.filename]#/etc/resolv."
"conf# with information received from the DHCP server."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1171
#, no-wrap
msgid "[.filename]#/etc/hosts#"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1176
msgid ""
"[.filename]#/etc/hosts# is a simple text database which works in conjunction "
"with DNS and NIS to provide host name to IP address mappings.  Entries for "
"local computers connected via a LAN can be added to this file for simplistic "
"naming purposes instead of setting up a man:named[8] server.  Additionally, "
"[.filename]#/etc/hosts# can be used to provide a local record of Internet "
"names, reducing the need to query external DNS servers for commonly accessed "
"names."
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1211
#, no-wrap
msgid ""
"# $FreeBSD$\n"
"#\n"
"#\n"
"# Host Database\n"
"#\n"
"# This file should contain the addresses and aliases for local hosts that\n"
"# share this file.  Replace 'my.domain' below with the domainname of your\n"
"# machine.\n"
"#\n"
"# In the presence of the domain name service or NIS, this file may\n"
"# not be consulted at all; see /etc/nsswitch.conf for the resolution order.\n"
"#\n"
"#\n"
"::1\t\t\tlocalhost localhost.my.domain\n"
"127.0.0.1\t\tlocalhost localhost.my.domain\n"
"#\n"
"# Imaginary network.\n"
"#10.0.0.2\t\tmyname.my.domain myname\n"
"#10.0.0.3\t\tmyfriend.my.domain myfriend\n"
"#\n"
"# According to RFC 1918, you can use the following IP networks for\n"
"# private nets which will never be connected to the Internet:\n"
"#\n"
"#\t10.0.0.0\t-   10.255.255.255\n"
"#\t172.16.0.0\t-   172.31.255.255\n"
"#\t192.168.0.0\t-   192.168.255.255\n"
"#\n"
"# In case you want to be able to connect to the Internet, you need\n"
"# real official assigned numbers.  Do not try to invent your own network\n"
"# numbers but instead get one from your network provider (if any) or\n"
"# from your regional registry (ARIN, APNIC, LACNIC, RIPE NCC, or AfriNIC.)\n"
"#\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1214
msgid "The format of [.filename]#/etc/hosts# is as follows:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1218
#, no-wrap
msgid "[Internet address] [official hostname] [alias1] [alias2] ...\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1221
msgid "For example:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1225
#, no-wrap
msgid "10.0.0.1 myRealHostname.example.com myRealHostname foobar1 foobar2\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1228
msgid "Consult man:hosts[5] for more information."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:1230
#, no-wrap
msgid "Tuning with man:sysctl[8]"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1235
msgid ""
"man:sysctl[8] is used to make changes to a running FreeBSD system.  This "
"includes many advanced options of the TCP/IP stack and virtual memory system "
"that can dramatically improve performance for an experienced system "
"administrator.  Over five hundred system variables can be read and set using "
"man:sysctl[8]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1237
msgid ""
"At its core, man:sysctl[8] serves two functions: to read and to modify "
"system settings."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1239
msgid "To view all readable variables:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1243
#, no-wrap
msgid "% sysctl -a\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1246
msgid "To read a particular variable, specify its name:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1251
#, no-wrap
msgid ""
"% sysctl kern.maxproc\n"
"kern.maxproc: 1044\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1254
msgid "To set a particular variable, use the _variable_=_value_ syntax:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1259
#, no-wrap
msgid ""
"# sysctl kern.maxfiles=5000\n"
"kern.maxfiles: 2088 -> 5000\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1262
msgid ""
"Settings of sysctl variables are usually either strings, numbers, or "
"booleans, where a boolean is `1` for yes or `0` for no."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1265
msgid ""
"To automatically set some variables each time the machine boots, add them to "
"[.filename]#/etc/sysctl.conf#.  For more information, refer to man:sysctl."
"conf[5] and <<configtuning-sysctlconf>>."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1267
#, no-wrap
msgid "[.filename]#sysctl.conf#"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1273
msgid ""
"The configuration file for man:sysctl[8], [.filename]#/etc/sysctl.conf#, "
"looks much like [.filename]#/etc/rc.conf#.  Values are set in a "
"`variable=value` form.  The specified values are set after the system goes "
"into multi-user mode.  Not all variables are settable in this mode."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1275
msgid ""
"For example, to turn off logging of fatal signal exits and prevent users "
"from seeing processes started by other users, the following tunables can be "
"set in [.filename]#/etc/sysctl.conf#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1280
#, no-wrap
msgid ""
"# Do not log fatal signal exits (e.g., sig 11)\n"
"kern.logsigexit=0\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1284
#, no-wrap
msgid ""
"# Prevent users from seeing information about processes that\n"
"# are being run under another UID.\n"
"security.bsd.see_other_uids=0\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1287
#, no-wrap
msgid "man:sysctl[8] Read-only"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1290
msgid ""
"In some cases it may be desirable to modify read-only man:sysctl[8] values, "
"which will require a reboot of the system."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1292
msgid ""
"For instance, on some laptop models the man:cardbus[4] device will not probe "
"memory ranges and will fail with errors similar to:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1297
#, no-wrap
msgid ""
"cbb0: Could not map register memory\n"
"device_probe_and_attach: cbb0 attach returned 12\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1302
msgid ""
"The fix requires the modification of a read-only man:sysctl[8] setting.  Add "
"`hw.pci.allow_unsupported_io_range=1` to [.filename]#/boot/loader.conf# and "
"reboot.  Now man:cardbus[4] should work properly."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:1304
#, no-wrap
msgid "Tuning Disks"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1311
msgid ""
"The following section will discuss various tuning mechanisms and options "
"which may be applied to disk devices.  In many cases, disks with mechanical "
"parts, such as SCSI drives, will be the bottleneck driving down the overall "
"system performance.  While a solution is to install a drive without "
"mechanical parts, such as a solid state drive, mechanical drives are not "
"going away anytime in the near future.  When tuning disks, it is advisable "
"to utilize the features of the man:iostat[8] command to test various changes "
"to the system.  This command will allow the user to obtain valuable "
"information on system IO."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1312
#, no-wrap
msgid "Sysctl Variables"
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1314
#, no-wrap
msgid "`vfs.vmiodirenable`"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1325
msgid ""
"The `vfs.vmiodirenable` man:sysctl[8] variable may be set to either `0` "
"(off) or `1` (on).  It is set to `1` by default. This variable controls how "
"directories are cached by the system.  Most directories are small, using "
"just a single fragment (typically 1 K) in the file system and typically 512 "
"bytes in the buffer cache.  With this variable turned off, the buffer cache "
"will only cache a fixed number of directories, even if the system has a huge "
"amount of memory.  When turned on, this man:sysctl[8] allows the buffer "
"cache to use the VM page cache to cache the directories, making all the "
"memory available for caching directories.  However, the minimum in-core "
"memory used to cache a directory is the physical page size (typically 4 K) "
"rather than 512 bytes.  Keeping this option enabled is recommended if the "
"system is running any services which manipulate large numbers of files.  "
"Such services can include web caches, large mail systems, and news systems.  "
"Keeping this option on will generally not reduce performance, even with the "
"wasted memory, but one should experiment to find out."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1326
#, no-wrap
msgid "`vfs.write_behind`"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1332
msgid ""
"The `vfs.write_behind` man:sysctl[8] variable defaults to `1` (on).  This "
"tells the file system to issue media writes as full clusters are collected, "
"which typically occurs when writing large sequential files.  This avoids "
"saturating the buffer cache with dirty buffers when it would not benefit I/O "
"performance.  However, this may stall processes and under certain "
"circumstances should be turned off."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1333
#, no-wrap
msgid "`vfs.hirunningspace`"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1339
msgid ""
"The `vfs.hirunningspace` man:sysctl[8] variable determines how much "
"outstanding write I/O may be queued to disk controllers system-wide at any "
"given instance.  The default is usually sufficient, but on machines with "
"many disks, try bumping it up to four or five _megabytes_.  Setting too high "
"a value which exceeds the buffer cache's write threshold can lead to bad "
"clustering performance.  Do not set this value arbitrarily high as higher "
"write values may add latency to reads occurring at the same time."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1342
msgid ""
"There are various other buffer cache and VM page cache related man:sysctl[8] "
"values.  Modifying these values is not recommended as the VM system does a "
"good job of automatically tuning itself."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1343
#, no-wrap
msgid "`vm.swap_idle_enabled`"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1351
msgid ""
"The `vm.swap_idle_enabled` man:sysctl[8] variable is useful in large multi-"
"user systems with many active login users and lots of idle processes.  Such "
"systems tend to generate continuous pressure on free memory reserves.  "
"Turning this feature on and tweaking the swapout hysteresis (in idle "
"seconds) via `vm.swap_idle_threshold1` and `vm.swap_idle_threshold2` "
"depresses the priority of memory pages associated with idle processes more "
"quickly then the normal pageout algorithm.  This gives a helping hand to the "
"pageout daemon.  Only turn this option on if needed, because the tradeoff is "
"essentially pre-page memory sooner rather than later which eats more swap "
"and disk bandwidth.  In a small system this option will have a determinable "
"effect, but in a large system that is already doing moderate paging, this "
"option allows the VM system to stage whole processes into and out of memory "
"easily."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1352
#, no-wrap
msgid "`hw.ata.wc`"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1360
msgid ""
"Turning off IDE write caching reduces write bandwidth to IDE disks, but may "
"sometimes be necessary due to data consistency issues introduced by hard "
"drive vendors.  The problem is that some IDE drives lie about when a write "
"completes.  With IDE write caching turned on, IDE hard drives write data to "
"disk out of order and will sometimes delay writing some blocks indefinitely "
"when under heavy disk load.  A crash or power failure may cause serious file "
"system corruption.  Check the default on the system by observing the `hw.ata."
"wc` man:sysctl[8] variable.  If IDE write caching is turned off, one can set "
"this read-only variable to `1` in [.filename]#/boot/loader.conf# in order to "
"enable it at boot time."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1362
msgid "For more information, refer to man:ata[4]."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1363
#, no-wrap
msgid "`SCSI_DELAY` (`kern.cam.scsi_delay`)"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1370
msgid ""
"The `SCSI_DELAY` kernel configuration option may be used to reduce system "
"boot times.  The defaults are fairly high and can be responsible for `15` "
"seconds of delay in the boot process.  Reducing it to `5` seconds usually "
"works with modern drives.  The `kern.cam.scsi_delay` boot time tunable "
"should be used.  The tunable and kernel configuration option accept values "
"in terms of _milliseconds_ and _not seconds_."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1372
#, no-wrap
msgid "Soft Updates"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1377
msgid ""
"To fine-tune a file system, use man:tunefs[8].  This program has many "
"different options.  To toggle Soft Updates on and off, use:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1382
#, no-wrap
msgid ""
"# tunefs -n enable /filesystem\n"
"# tunefs -n disable /filesystem\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1386
msgid ""
"A file system cannot be modified with man:tunefs[8] while it is mounted.  A "
"good time to enable Soft Updates is before any partitions have been mounted, "
"in single-user mode."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1393
msgid ""
"Soft Updates is recommended for UFS file systems as it drastically improves "
"meta-data performance, mainly file creation and deletion, through the use of "
"a memory cache.  There are two downsides to Soft Updates to be aware of.  "
"First, Soft Updates guarantee file system consistency in the case of a "
"crash, but could easily be several seconds or even a minute behind updating "
"the physical disk.  If the system crashes, unwritten data may be lost.  "
"Secondly, Soft Updates delay the freeing of file system blocks.  If the root "
"file system is almost full, performing a major update, such as `make "
"installworld`, can cause the file system to run out of space and the update "
"to fail."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1394
#, no-wrap
msgid "More Details About Soft Updates"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1398
msgid ""
"Meta-data updates are updates to non-content data like inodes or "
"directories.  There are two traditional approaches to writing a file "
"system's meta-data back to disk."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1411
msgid ""
"Historically, the default behavior was to write out meta-data updates "
"synchronously.  If a directory changed, the system waited until the change "
"was actually written to disk.  The file data buffers (file contents) were "
"passed through the buffer cache and backed up to disk later on "
"asynchronously.  The advantage of this implementation is that it operates "
"safely.  If there is a failure during an update, meta-data is always in a "
"consistent state.  A file is either created completely or not at all.  If "
"the data blocks of a file did not find their way out of the buffer cache "
"onto the disk by the time of the crash, man:fsck[8] recognizes this and "
"repairs the file system by setting the file length to `0`.  Additionally, "
"the implementation is clear and simple.  The disadvantage is that meta-data "
"changes are slow.  For example, `rm -r` touches all the files in a directory "
"sequentially, but each directory change will be written synchronously to the "
"disk.  This includes updates to the directory itself, to the inode table, "
"and possibly to indirect blocks allocated by the file.  Similar "
"considerations apply for unrolling large hierarchies using `tar -x`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1422
msgid ""
"The second approach is to use asynchronous meta-data updates.  This is the "
"default for a UFS file system mounted with `mount -o async`.  Since all meta-"
"data updates are also passed through the buffer cache, they will be "
"intermixed with the updates of the file content data.  The advantage of this "
"implementation is there is no need to wait until each meta-data update has "
"been written to disk, so all operations which cause huge amounts of meta-"
"data updates work much faster than in the synchronous case.  This "
"implementation is still clear and simple, so there is a low risk for bugs "
"creeping into the code.  The disadvantage is that there is no guarantee for "
"a consistent state of the file system If there is a failure during an "
"operation that updated large amounts of meta-data, like a power failure or "
"someone pressing the reset button, the file system will be left in an "
"unpredictable state.  There is no opportunity to examine the state of the "
"file system when the system comes up again as the data blocks of a file "
"could already have been written to the disk while the updates of the inode "
"table or the associated directory were not.  It is impossible to implement a "
"man:fsck[8] which is able to clean up the resulting chaos because the "
"necessary information is not available on the disk.  If the file system has "
"been damaged beyond repair, the only choice is to reformat it and restore "
"from backup."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1430
msgid ""
"The usual solution for this problem is to implement _dirty region logging_, "
"which is also referred to as _journaling_.  Meta-data updates are still "
"written synchronously, but only into a small region of the disk.  Later on, "
"they are moved to their proper location.  Since the logging area is a small, "
"contiguous region on the disk, there are no long distances for the disk "
"heads to move, even during heavy operations, so these operations are quicker "
"than synchronous updates.  Additionally, the complexity of the "
"implementation is limited, so the risk of bugs being present is low.  A "
"disadvantage is that all meta-data is written twice, once into the logging "
"region and once to the proper location, so performance \"pessimization\" "
"might result.  On the other hand, in case of a crash, all pending meta-data "
"operations can be either quickly rolled back or completed from the logging "
"area after the system comes up again, resulting in a fast file system "
"startup."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1446
msgid ""
"Kirk McKusick, the developer of Berkeley FFS, solved this problem with Soft "
"Updates.  All pending meta-data updates are kept in memory and written out "
"to disk in a sorted sequence (\"ordered meta-data updates\").  This has the "
"effect that, in case of heavy meta-data operations, later updates to an item "
"\"catch\" the earlier ones which are still in memory and have not already "
"been written to disk.  All operations are generally performed in memory "
"before the update is written to disk and the data blocks are sorted "
"according to their position so that they will not be on the disk ahead of "
"their meta-data.  If the system crashes, an implicit \"log rewind\" causes "
"all operations which were not written to the disk appear as if they never "
"happened.  A consistent file system state is maintained that appears to be "
"the one of 30 to 60 seconds earlier.  The algorithm used guarantees that all "
"resources in use are marked as such in their blocks and inodes.  After a "
"crash, the only resource allocation error that occurs is that resources are "
"marked as \"used\" which are actually \"free\".  man:fsck[8] recognizes this "
"situation, and frees the resources that are no longer used.  It is safe to "
"ignore the dirty state of the file system after a crash by forcibly mounting "
"it with `mount -f`.  In order to free resources that may be unused, man:"
"fsck[8] needs to be run at a later time.  This is the idea behind the "
"_background man:fsck[8]_: at system startup time, only a _snapshot_ of the "
"file system is recorded and man:fsck[8] is run afterwards.  All file systems "
"can then be mounted \"dirty\", so the system startup proceeds in multi-user "
"mode.  Then, background man:fsck[8] is scheduled for all file systems where "
"this is required, to free resources that may be unused.  File systems that "
"do not use Soft Updates still need the usual foreground man:fsck[8]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1453
msgid ""
"The advantage is that meta-data operations are nearly as fast as "
"asynchronous updates and are faster than _logging_, which has to write the "
"meta-data twice.  The disadvantages are the complexity of the code, a higher "
"memory consumption, and some idiosyncrasies.  After a crash, the state of "
"the file system appears to be somewhat \"older\".  In situations where the "
"standard synchronous approach would have caused some zero-length files to "
"remain after the man:fsck[8], these files do not exist at all with Soft "
"Updates because neither the meta-data nor the file contents have been "
"written to disk.  Disk space is not released until the updates have been "
"written to disk, which may take place some time after running man:rm[1].  "
"This may cause problems when installing large amounts of data on a file "
"system that does not have enough free space to hold all the files twice."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:1455
#, no-wrap
msgid "Tuning Kernel Limits"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1458
#, no-wrap
msgid "File/Process Limits"
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1461
#, no-wrap
msgid "`kern.maxfiles`"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1466
msgid ""
"The `kern.maxfiles` man:sysctl[8] variable can be raised or lowered based "
"upon system requirements.  This variable indicates the maximum number of "
"file descriptors on the system.  When the file descriptor table is full, "
"`file: table is full` will show up repeatedly in the system message buffer, "
"which can be viewed using man:dmesg[8]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1469
msgid ""
"Each open file, socket, or fifo uses one file descriptor.  A large-scale "
"production server may easily require many thousands of file descriptors, "
"depending on the kind and number of services running concurrently."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1475
msgid ""
"In older FreeBSD releases, the default value of `kern.maxfiles` is derived "
"from `maxusers` in the kernel configuration file.  `kern.maxfiles` grows "
"proportionally to the value of `maxusers`.  When compiling a custom kernel, "
"consider setting this kernel configuration option according to the use of "
"the system.  From this number, the kernel is given most of its pre-defined "
"limits.  Even though a production machine may not have 256 concurrent users, "
"the resources needed may be similar to a high-scale web server."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1481
msgid ""
"The read-only man:sysctl[8] variable `kern.maxusers` is automatically sized "
"at boot based on the amount of memory available in the system, and may be "
"determined at run-time by inspecting the value of `kern.maxusers`.  Some "
"systems require larger or smaller values of `kern.maxusers` and values of "
"`64`, `128`, and `256` are not uncommon.  Going above `256` is not "
"recommended unless a huge number of file descriptors is needed.  Many of the "
"tunable values set to their defaults by `kern.maxusers` may be individually "
"overridden at boot-time or run-time in [.filename]#/boot/loader.conf#.  "
"Refer to man:loader.conf[5] and [.filename]#/boot/defaults/loader.conf# for "
"more details and some hints."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1489
msgid ""
"In older releases, the system will auto-tune `maxusers` if it is set to `0`. "
"footnote:[The auto-tuning algorithm sets maxusers equal to the amount of "
"memory in the system, with a minimum of 32, and a maximum of 384.].  When "
"setting this option, set `maxusers` to at least `4`, especially if the "
"system runs Xorg or is used to compile software.  The most important table "
"set by `maxusers` is the maximum number of processes, which is set to `20 + "
"16 * maxusers`.  If `maxusers` is set to `1`, there can only be `36` "
"simultaneous processes, including the `18` or so that the system starts up "
"at boot time and the `15` or so used by Xorg.  Even a simple task like "
"reading a manual page will start up nine processes to filter, decompress, "
"and view it.  Setting `maxusers` to `64` allows up to `1044` simultaneous "
"processes, which should be enough for nearly all uses.  If, however, the "
"error is displayed when trying to start another program, or a server is "
"running with a large number of simultaneous users, increase the number and "
"rebuild."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1494
msgid ""
"`maxusers` does _not_ limit the number of users which can log into the "
"machine.  It instead sets various table sizes to reasonable values "
"considering the maximum number of users on the system and how many processes "
"each user will be running."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1496
#, no-wrap
msgid "`kern.ipc.soacceptqueue`"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1503
msgid ""
"The `kern.ipc.soacceptqueue` man:sysctl[8] variable limits the size of the "
"listen queue for accepting new `TCP` connections.  The default value of "
"`128` is typically too low for robust handling of new connections on a "
"heavily loaded web server.  For such environments, it is recommended to "
"increase this value to `1024` or higher.  A service such as man:sendmail[8], "
"or Apache may itself limit the listen queue size, but will often have a "
"directive in its configuration file to adjust the queue size.  Large listen "
"queues do a better job of avoiding Denial of Service (DoS) attacks."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1505
#, no-wrap
msgid "Network Limits"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1516
msgid ""
"The `NMBCLUSTERS` kernel configuration option dictates the amount of network "
"Mbufs available to the system.  A heavily-trafficked server with a low "
"number of Mbufs will hinder performance.  Each cluster represents "
"approximately 2 K of memory, so a value of `1024` represents `2` megabytes "
"of kernel memory reserved for network buffers.  A simple calculation can be "
"done to figure out how many are needed.  A web server which maxes out at "
"`1000` simultaneous connections where each connection uses a 6 K receive and "
"16 K send buffer, requires approximately 32 MB worth of network buffers to "
"cover the web server.  A good rule of thumb is to multiply by `2`, so 2x32 "
"MB / 2 KB = 64 MB / 2 kB = `32768`.  Values between `4096` and `32768` are "
"recommended for machines with greater amounts of memory.  Never specify an "
"arbitrarily high value for this parameter as it could lead to a boot time "
"crash.  To observe network cluster usage, use `-m` with man:netstat[1]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1519
msgid ""
"The `kern.ipc.nmbclusters` loader tunable should be used to tune this at "
"boot time.  Only older versions of FreeBSD will require the use of the "
"`NMBCLUSTERS` kernel man:config[8] option."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1524
msgid ""
"For busy servers that make extensive use of the man:sendfile[2] system call, "
"it may be necessary to increase the number of man:sendfile[2] buffers via "
"the `NSFBUFS` kernel configuration option or by setting its value in [."
"filename]#/boot/loader.conf# (see man:loader[8] for details).  A common "
"indicator that this parameter needs to be adjusted is when processes are "
"seen in the `sfbufa` state.  The man:sysctl[8] variable `kern.ipc.nsfbufs` "
"is read-only.  This parameter nominally scales with `kern.maxusers`, however "
"it may be necessary to tune accordingly."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1528
msgid ""
"Even though a socket has been marked as non-blocking, calling man:"
"sendfile[2] on the non-blocking socket may result in the man:sendfile[2] "
"call blocking until enough ``struct sf_buf``'s are made available."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1530
#, no-wrap
msgid "`net.inet.ip.portrange.*`"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1542
msgid ""
"The `net.inet.ip.portrange.*` man:sysctl[8] variables control the port "
"number ranges automatically bound to `TCP` and `UDP` sockets.  There are "
"three ranges: a low range, a default range, and a high range.  Most network "
"programs use the default range which is controlled by `net.inet.ip.portrange."
"first` and `net.inet.ip.portrange.last`, which default to `1024` and `5000`, "
"respectively.  Bound port ranges are used for outgoing connections and it is "
"possible to run the system out of ports under certain circumstances.  This "
"most commonly occurs when running a heavily loaded web proxy.  The port "
"range is not an issue when running a server which handles mainly incoming "
"connections, such as a web server, or has a limited number of outgoing "
"connections, such as a mail relay.  For situations where there is a shortage "
"of ports, it is recommended to increase `net.inet.ip.portrange.last` "
"modestly.  A value of `10000`, `20000` or `30000` may be reasonable. "
"Consider firewall effects when changing the port range.  Some firewalls may "
"block large ranges of ports, usually low-numbered ports, and expect systems "
"to use higher ranges of ports for outgoing connections.  For this reason, it "
"is not recommended that the value of `net.inet.ip.portrange.first` be "
"lowered."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1543
#, no-wrap
msgid "Virtual Memory"
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1545
#, no-wrap
msgid "`kern.maxvnodes`"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1552
msgid ""
"A vnode is the internal representation of a file or directory.  Increasing "
"the number of vnodes available to the operating system reduces disk I/O.  "
"Normally, this is handled by the operating system and does not need to be "
"changed.  In some cases where disk I/O is a bottleneck and the system is "
"running out of vnodes, this setting needs to be increased.  The amount of "
"inactive and free RAM will need to be taken into account."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1554
msgid "To see the current number of vnodes in use:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1559
#, no-wrap
msgid ""
"# sysctl vfs.numvnodes\n"
"vfs.numvnodes: 91349\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1562
msgid "To see the maximum vnodes:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1567
#, no-wrap
msgid ""
"# sysctl kern.maxvnodes\n"
"kern.maxvnodes: 100000\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1573
msgid ""
"If the current vnode usage is near the maximum, try increasing `kern."
"maxvnodes` by a value of `1000`.  Keep an eye on the number of `vfs."
"numvnodes`.  If it climbs up to the maximum again, `kern.maxvnodes` will "
"need to be increased further.  Otherwise, a shift in memory usage as "
"reported by man:top[1] should be visible and more memory should be active."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:1575
#, no-wrap
msgid "Adding Swap Space"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1579
msgid ""
"Sometimes a system requires more swap space.  This section describes two "
"methods to increase swap space: adding swap to an existing partition or new "
"hard drive, and creating a swap file on an existing partition."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1581
msgid ""
"For information on how to encrypt swap space, which options exist, and why "
"it should be done, refer to crossref:disks[swap-encrypting,“Encrypting "
"Swap”]."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1583
#, no-wrap
msgid "Swap on a New Hard Drive or Existing Partition"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1587
msgid ""
"Adding a new hard drive for swap gives better performance than using a "
"partition on an existing drive.  Setting up partitions and hard drives is "
"explained in crossref:disks[disks-adding,“Adding Disks”] while crossref:"
"bsdinstall[configtuning-initial,“Designing the Partition Layout”] discusses "
"partition layouts and swap partition size considerations."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1590
msgid "Use `swapon` to add a swap partition to the system.  For example:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1594
#, no-wrap
msgid "# swapon /dev/ada1s1b\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1602
msgid ""
"It is possible to use any partition not currently mounted, even if it "
"already contains data.  Using `swapon` on a partition that contains data "
"will overwrite and destroy that data.  Make sure that the partition to be "
"added as swap is really the intended partition before running `swapon`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1605
msgid ""
"To automatically add this swap partition on boot, add an entry to [."
"filename]#/etc/fstab#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1609
#, no-wrap
msgid "/dev/ada1s1b\tnone\tswap\tsw\t0\t0\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1613
msgid ""
"See man:fstab[5] for an explanation of the entries in [.filename]#/etc/"
"fstab#.  More information about `swapon` can be found in man:swapon[8]."
msgstr ""

#. type: Block title
#: documentation/content/en/books/handbook/config/_index.adoc:1615
#: documentation/content/en/books/handbook/config/_index.adoc:1623
#, no-wrap
msgid "Creating a Swap File"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1618
msgid ""
"These examples create a 512M swap file called [.filename]#/usr/swap0# "
"instead of using a partition."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1621
msgid ""
"Using swap files requires that the module needed by man:md[4] has either "
"been built into the kernel or has been loaded before swap is enabled.  See "
"crossref:kernelconfig[kernelconfig,Configuring the FreeBSD Kernel] for "
"information about building a custom kernel."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1628
msgid "Create the swap file:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1632
#, no-wrap
msgid "# dd if=/dev/zero of=/usr/swap0 bs=1m count=512\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1635
msgid "Set the proper permissions on the new file:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1639
#, no-wrap
msgid "# chmod 0600 /usr/swap0\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1642
msgid ""
"Inform the system about the swap file by adding a line to [.filename]#/etc/"
"fstab#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1646
#, no-wrap
msgid "md\tnone\tswap\tsw,file=/usr/swap0,late\t0\t0\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1649
msgid ""
"Swap space will be added on system startup. To add swap space immediately, "
"use man:swapon[8]:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1653
#, no-wrap
msgid "# swapon -aL\n"
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/config/_index.adoc:1658
#, no-wrap
msgid "Power and Resource Management"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1668
msgid ""
"It is important to utilize hardware resources in an efficient manner.  Power "
"and resource management allows the operating system to monitor system limits "
"and to possibly provide an alert if the system temperature increases "
"unexpectedly.  An early specification for providing power management was the "
"Advanced Power Management (APM) facility.  APM controls the power usage of a "
"system based on its activity.  However, it was difficult and inflexible for "
"operating systems to manage the power usage and thermal properties of a "
"system.  The hardware was managed by the BIOS and the user had limited "
"configurability and visibility into the power management settings.  The "
"APMBIOS is supplied by the vendor and is specific to the hardware platform.  "
"An APM driver in the operating system mediates access to the APM Software "
"Interface, which allows management of power levels."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1676
msgid ""
"There are four major problems in APM.  First, power management is done by "
"the vendor-specific BIOS, separate from the operating system.  For example, "
"the user can set idle-time values for a hard drive in the APMBIOS so that, "
"when exceeded, the BIOS spins down the hard drive without the consent of the "
"operating system.  Second, the APM logic is embedded in the BIOS, and it "
"operates outside the scope of the operating system.  This means that users "
"can only fix problems in the APMBIOS by flashing a new one into the ROM, "
"which is a dangerous procedure with the potential to leave the system in an "
"unrecoverable state if it fails.  Third, APM is a vendor-specific "
"technology, meaning that there is a lot of duplication of efforts and bugs "
"found in one vendor's BIOS may not be solved in others.  Lastly, the APMBIOS "
"did not have enough room to implement a sophisticated power policy or one "
"that can adapt well to the purpose of the machine."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1681
msgid ""
"The Plug and Play BIOS (PNPBIOS) was unreliable in many situations.  PNPBIOS "
"is 16-bit technology, so the operating system has to use 16-bit emulation in "
"order to interface with PNPBIOS methods.  FreeBSD provides an APM driver as "
"APM should still be used for systems manufactured at or before the year "
"2000.  The driver is documented in man:apm[4]."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1685
msgid ""
"The successor to APM is the Advanced Configuration and Power Interface "
"(ACPI).  ACPI is a standard written by an alliance of vendors to provide an "
"interface for hardware resources and power management.  It is a key element "
"in _Operating System-directed configuration and Power Management_ as it "
"provides more control and flexibility to the operating system."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1688
msgid ""
"This chapter demonstrates how to configure ACPI on FreeBSD.  It then offers "
"some tips on how to debug ACPI and how to submit a problem report containing "
"debugging information so that developers can diagnosis and fix ACPI issues."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1690
#, no-wrap
msgid "Configuring ACPI"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1695
msgid ""
"In FreeBSD the man:acpi[4] driver is loaded by default at system boot and "
"should _not_ be compiled into the kernel.  This driver cannot be unloaded "
"after boot because the system bus uses it for various hardware "
"interactions.  However, if the system is experiencing problems, ACPI can be "
"disabled altogether by rebooting after setting `hint.acpi.0.disabled=\"1\"` "
"in [.filename]#/boot/loader.conf# or by setting this variable at the loader "
"prompt, as described in crossref:boot[boot-loader,“Stage Three”]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1700
msgid ""
"ACPI and APM cannot coexist and should be used separately.  The last one to "
"load will terminate if the driver notices the other is running."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1705
msgid ""
"ACPI can be used to put the system into a sleep mode with `acpiconf`, the `-"
"s` flag, and a number from `1` to `5`.  Most users only need `1` (quick "
"suspend to RAM) or `3` (suspend to RAM).  Option `5` performs a soft-off "
"which is the same as running `halt -p`."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1710
msgid ""
"The man:acpi_video[4] driver uses link:https://uefi.org/specs/ACPI/6.4/"
"Apx_B_Video_Extensions/Apx_B_Video_Extensions.html[ACPI Video Extensions] to "
"control display switching and backlight brightness.  It must be loaded after "
"any of the DRM kernel modules.  After loading the driver, the kbd:[Fn] "
"brightness keys will change the brightness of the screen.  It is possible to "
"check the ACPI events by inspecting [.filename]#/var/run/devd.pipe#:"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1718
msgid ""
"...  # cat /var/run/devd.pipe !system=ACPI subsystem=Video type=brightness "
"notify=62 !system=ACPI subsystem=Video type=brightness notify=63 !"
"system=ACPI subsystem=Video type=brightness notify=64 ..."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1721
msgid ""
"Other options are available using `sysctl`.  Refer to man:acpi[4] and man:"
"acpiconf[8] for more information."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1723
#, no-wrap
msgid "Common Problems"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1730
msgid ""
"ACPI is present in all modern computers that conform to the ia32 (x86) and "
"amd64 (AMD) architectures.  The full standard has many features including "
"CPU performance management, power planes control, thermal zones, various "
"battery systems, embedded controllers, and bus enumeration.  Most systems "
"implement less than the full standard.  For instance, a desktop system "
"usually only implements bus enumeration while a laptop might have cooling "
"and battery management support as well.  Laptops also have suspend and "
"resume, with their own associated complexity."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1734
msgid ""
"An ACPI-compliant system has various components.  The BIOS and chipset "
"vendors provide various fixed tables, such as FADT, in memory that specify "
"things like the APIC map (used for SMP), config registers, and simple "
"configuration values.  Additionally, a bytecode table, the Differentiated "
"System Description Table DSDT, specifies a tree-like name space of devices "
"and methods."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1740
msgid ""
"The ACPI driver must parse the fixed tables, implement an interpreter for "
"the bytecode, and modify device drivers and the kernel to accept information "
"from the ACPI subsystem.  For FreeBSD, Intel(R) has provided an interpreter "
"(ACPI-CA) that is shared with Linux(R) and NetBSD.  The path to the ACPI-CA "
"source code is [.filename]#src/sys/contrib/dev/acpica#.  The glue code that "
"allows ACPI-CA to work on FreeBSD is in [.filename]#src/sys/dev/acpica/"
"Osd#.  Finally, drivers that implement various ACPI devices are found in [."
"filename]#src/sys/dev/acpica#."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1744
msgid ""
"For ACPI to work correctly, all the parts have to work correctly.  Here are "
"some common problems, in order of frequency of appearance, and some possible "
"workarounds or fixes.  If a fix does not resolve the issue, refer to <<ACPI-"
"submitdebug>> for instructions on how to submit a bug report."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1745
#, no-wrap
msgid "Mouse Issues"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1749
msgid ""
"In some cases, resuming from a suspend operation will cause the mouse to "
"fail.  A known work around is to add `hint.psm.0.flags=\"0x3000\"` to [."
"filename]#/boot/loader.conf#."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1750
#, no-wrap
msgid "Suspend/Resume"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1756
msgid ""
"ACPI has three suspend to RAM (STR) states, `S1`-`S3`, and one suspend to "
"disk state (STD), called `S4`.  STD can be implemented in two separate "
"ways.  The ``S4``BIOS is a BIOS-assisted suspend to disk and ``S4``OS is "
"implemented entirely by the operating system.  The normal state the system "
"is in when plugged in but not powered up is \"soft off\" (`S5`)."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1759
msgid ""
"Use `sysctl hw.acpi` to check for the suspend-related items.  These example "
"results are from a Thinkpad:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1764
#, no-wrap
msgid ""
"hw.acpi.supported_sleep_state: S3 S4 S5\n"
"hw.acpi.s4bios: 0\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1768
msgid ""
"Use `acpiconf -s` to test `S3`, `S4`, and `S5`.  An `s4bios` of one (`1`) "
"indicates ``S4``BIOS support instead of `S4` operating system support."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1774
msgid ""
"When testing suspend/resume, start with `S1`, if supported.  This state is "
"most likely to work since it does not require much driver support.  No one "
"has implemented `S2`, which is similar to `S1`.  Next, try `S3`.  This is "
"the deepest STR state and requires a lot of driver support to properly "
"reinitialize the hardware."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1777
msgid ""
"A common problem with suspend/resume is that many device drivers do not "
"save, restore, or reinitialize their firmware, registers, or device memory "
"properly.  As a first attempt at debugging the problem, try:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1783
#, no-wrap
msgid ""
"# sysctl debug.bootverbose=1\n"
"# sysctl debug.acpi.suspend_bounce=1\n"
"# acpiconf -s 3\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1788
msgid ""
"This test emulates the suspend/resume cycle of all device drivers without "
"actually going into `S3` state.  In some cases, problems such as losing "
"firmware state, device watchdog time out, and retrying forever, can be "
"captured with this method.  Note that the system will not really enter `S3` "
"state, which means devices may not lose power, and many will work fine even "
"if suspend/resume methods are totally missing, unlike real `S3` state."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1790
msgid ""
"If the previous test worked, on a laptop it is possible to configure the "
"system to suspend into `S3` on lid close and resume when it is open back "
"again:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1794
#, no-wrap
msgid "# sysctl hw.acpi.lid_switch_state=S3\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1797
msgid "This change can be made persistent across reboots:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1801
#, no-wrap
msgid "# echo 'hw.acpi.lid_switch_state=S3' >> /etc/sysctl.conf\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1804
msgid ""
"Harder cases require additional hardware, such as a serial port and cable "
"for debugging through a serial console, a Firewire port and cable for using "
"man:dcons[4], and kernel debugging skills."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1811
msgid ""
"To help isolate the problem, unload as many drivers as possible.  If it "
"works, narrow down which driver is the problem by loading drivers until it "
"fails again.  Typically, binary drivers like [.filename]#nvidia.ko#, display "
"drivers, and USB will have the most problems while Ethernet interfaces "
"usually work fine.  If drivers can be properly loaded and unloaded, automate "
"this by putting the appropriate commands in [.filename]#/etc/rc.suspend# and "
"[.filename]#/etc/rc.resume#.  Try setting `hw.acpi.reset_video` to `1` if "
"the display is messed up after resume.  Try setting longer or shorter values "
"for `hw.acpi.sleep_delay` to see if that helps."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1817
msgid ""
"Try loading a recent Linux(R) distribution to see if suspend/resume works on "
"the same hardware.  If it works on Linux(R), it is likely a FreeBSD driver "
"problem.  Narrowing down which driver causes the problem will assist "
"developers in fixing the problem.  Since the ACPI maintainers rarely "
"maintain other drivers, such as sound or ATA, any driver problems should "
"also be posted to the {freebsd-current} and mailed to the driver "
"maintainer.  Advanced users can include debugging man:printf[3]s in a "
"problematic driver to track down where in its resume function it hangs."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1821
msgid ""
"Finally, try disabling ACPI and enabling APM instead.  If suspend/resume "
"works with APM, stick with APM, especially on older hardware (pre-2000).  It "
"took vendors a while to get ACPI support correct and older hardware is more "
"likely to have BIOS problems with ACPI."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1822
#, no-wrap
msgid "System Hangs"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1826
msgid ""
"Most system hangs are a result of lost interrupts or an interrupt storm.  "
"Chipsets may have problems based on boot, how the BIOS configures interrupts "
"before correctness of the APIC (MADT) table, and routing of the System "
"Control Interrupt (SCI)."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1830
msgid ""
"Interrupt storms can be distinguished from lost interrupts by checking the "
"output of `vmstat -i` and looking at the line that has `acpi0`.  If the "
"counter is increasing at more than a couple per second, there is an "
"interrupt storm.  If the system appears hung, try breaking to DDB (kbd:"
"[CTRL+ALT+ESC] on console) and type `show interrupts`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1832
msgid ""
"When dealing with interrupt problems, try disabling APIC support with `hint."
"apic.0.disabled=\"1\"` in [.filename]#/boot/loader.conf#."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1833
#, no-wrap
msgid "Panics"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1840
msgid ""
"Panics are relatively rare for ACPI and are the top priority to be fixed.  "
"The first step is to isolate the steps to reproduce the panic, if possible, "
"and get a backtrace.  Follow the advice for enabling `options DDB` and "
"setting up a serial console in crossref:serialcomms[serialconsole-"
"ddb,“Entering the DDB Debugger from the Serial Line”] or setting up a dump "
"partition.  To get a backtrace in DDB, use `tr`.  When handwriting the "
"backtrace, get at least the last five and the top five lines in the trace."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1844
msgid ""
"Then, try to isolate the problem by booting with ACPI disabled.  If that "
"works, isolate the ACPI subsystem by using various values of `debug.acpi."
"disable`.  See man:acpi[4] for some examples."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1845
#, no-wrap
msgid "System Powers Up After Suspend or Shutdown"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1851
msgid ""
"First, try setting `hw.acpi.disable_on_poweroff=\"0\"` in [.filename]#/boot/"
"loader.conf#.  This keeps ACPI from disabling various events during the "
"shutdown process.  Some systems need this value set to `1` (the default) for "
"the same reason.  This usually fixes the problem of a system powering up "
"spontaneously after a suspend or poweroff."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/config/_index.adoc:1853
#, no-wrap
msgid "BIOS Contains Buggy Bytecode"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1857
msgid ""
"Some BIOS vendors provide incorrect or buggy bytecode.  This is usually "
"manifested by kernel console messages like this:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1862
#, no-wrap
msgid ""
"ACPI-1287: *** Error: Method execution failed [\\\\_SB_.PCI0.LPC0.FIGD._STA] \\\\\n"
"(Node 0xc3f6d160), AE_NOT_FOUND\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1866
msgid ""
"Often, these problems may be resolved by updating the BIOS to the latest "
"revision.  Most console messages are harmless, but if there are other "
"problems, like the battery status is not working, these messages are a good "
"place to start looking for problems."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1867
#, no-wrap
msgid "Overriding the Default AML"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1871
msgid ""
"The BIOS bytecode, known as ACPI Machine Language (AML), is compiled from a "
"source language called ACPI Source Language (ASL).  The AML is found in the "
"table known as the Differentiated System Description Table (DSDT)."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1876
msgid ""
"The goal of FreeBSD is for everyone to have working ACPI without any user "
"intervention.  Workarounds are still being developed for common mistakes "
"made by BIOS vendors.  The Microsoft(R) interpreter ([.filename]#acpi.sys# "
"and [.filename]#acpiec.sys#) does not strictly check for adherence to the "
"standard, and thus many BIOS vendors who only test ACPI under Windows(R) "
"never fix their ASL.  FreeBSD developers continue to identify and document "
"which non-standard behavior is allowed by Microsoft(R)'s interpreter and "
"replicate it so that FreeBSD can work without forcing users to fix the ASL."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1879
msgid ""
"To help identify buggy behavior and possibly fix it manually, a copy can be "
"made of the system's ASL.  To copy the system's ASL to a specified file "
"name, use `acpidump` with `-t`, to show the contents of the fixed tables, "
"and `-d`, to disassemble the AML:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1883
#, no-wrap
msgid "# acpidump -td > my.asl\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1887
msgid ""
"Some AML versions assume the user is running Windows(R).  To override this, "
"set `hw.acpi.osname=_\"Windows 2009\"_` in [.filename]#/boot/loader.conf#, "
"using the most recent Windows(R) version listed in the ASL."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1891
msgid ""
"Other workarounds may require [.filename]#my.asl# to be customized.  If this "
"file is edited, compile the new ASL using the following command.  Warnings "
"can usually be ignored, but errors are bugs that will usually prevent ACPI "
"from working correctly."
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1895
#, no-wrap
msgid "# iasl -f my.asl\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1899
msgid ""
"Including `-f` forces creation of the AML, even if there are errors during "
"compilation.  Some errors, such as missing return statements, are "
"automatically worked around by the FreeBSD interpreter."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1902
msgid ""
"The default output filename for `iasl` is [.filename]#DSDT.aml#.  Load this "
"file instead of the BIOS's buggy copy, which is still present in flash "
"memory, by editing [.filename]#/boot/loader.conf# as follows:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1907
#, no-wrap
msgid ""
"acpi_dsdt_load=\"YES\"\n"
"acpi_dsdt_name=\"/boot/DSDT.aml\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1911
msgid ""
"Be sure to copy [.filename]#DSDT.aml# to [.filename]#/boot#, then reboot the "
"system.  If this fixes the problem, send a man:diff[1] of the old and new "
"ASL to {freebsd-acpi} so that developers can work around the buggy behavior "
"in [.filename]#acpica#."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1913
#, no-wrap
msgid "Getting and Submitting Debugging Info"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1921
msgid ""
"The ACPI driver has a flexible debugging facility. A set of subsystems and "
"the level of verbosity can be specified.  The subsystems to debug are "
"specified as layers and are broken down into components "
"(`ACPI_ALL_COMPONENTS`) and ACPI hardware support (`ACPI_ALL_DRIVERS`).  The "
"verbosity of debugging output is specified as the level and ranges from just "
"report errors (`ACPI_LV_ERROR`) to everything (`ACPI_LV_VERBOSE`).  The "
"level is a bitmask so multiple options can be set at once, separated by "
"spaces.  In practice, a serial console should be used to log the output so "
"it is not lost as the console message buffer flushes.  A full list of the "
"individual layers and levels is found in man:acpi[4]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1925
msgid ""
"Debugging output is not enabled by default. To enable it, add `options "
"ACPI_DEBUG` to the custom kernel configuration file if ACPI is compiled into "
"the kernel.  Add `ACPI_DEBUG=1` to [.filename]#/etc/make.conf# to enable it "
"globally.  If a module is used instead of a custom kernel, recompile just "
"the [.filename]#acpi.ko# module as follows:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1929
#, no-wrap
msgid "# cd /sys/modules/acpi/acpi && make clean && make ACPI_DEBUG=1\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1933
msgid ""
"Copy the compiled [.filename]#acpi.ko# to [.filename]#/boot/kernel# and add "
"the desired level and layer to [.filename]#/boot/loader.conf#.  The entries "
"in this example enable debug messages for all ACPI components and hardware "
"drivers and output error messages at the least verbose level:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1938
#, no-wrap
msgid ""
"debug.acpi.layer=\"ACPI_ALL_COMPONENTS ACPI_ALL_DRIVERS\"\n"
"debug.acpi.level=\"ACPI_LV_ERROR\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1943
msgid ""
"If the required information is triggered by a specific event, such as a "
"suspend and then resume, do not modify [.filename]#/boot/loader.conf#.  "
"Instead, use `sysctl` to specify the layer and level after booting and "
"preparing the system for the specific event.  The variables which can be set "
"using `sysctl` are named the same as the tunables in [.filename]#/boot/"
"loader.conf#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1945
msgid ""
"Once the debugging information is gathered, it can be sent to {freebsd-acpi} "
"so that it can be used by the FreeBSD ACPI maintainers to identify the root "
"cause of the problem and to develop a solution."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/config/_index.adoc:1949
msgid ""
"Before submitting debugging information to this mailing list, ensure the "
"latest BIOS version is installed and, if available, the embedded controller "
"firmware version."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1952
msgid "When submitting a problem report, include the following information:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1954
msgid ""
"Description of the buggy behavior, including system type, model, and "
"anything that causes the bug to appear. Note as accurately as possible when "
"the bug began occurring if it is new."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1955
msgid ""
"The output of `dmesg` after running `boot -v`, including any error messages "
"generated by the bug."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1956
msgid ""
"The `dmesg` output from `boot -v` with ACPI disabled, if disabling ACPI "
"helps to fix the problem."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1957
msgid ""
"Output from `sysctl hw.acpi`. This lists which features the system offers."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1958
msgid ""
"The URL to a pasted version of the system's ASL. Do _not_ send the ASL "
"directly to the list as it can be very large. Generate a copy of the ASL by "
"running this command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/config/_index.adoc:1962
#, no-wrap
msgid "# acpidump -dt > name-system.asl\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1966
msgid ""
"Substitute the login name for _name_ and manufacturer/model for _system_.  "
"For example, use [.filename]#njl-FooCo6000.asl#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1973
msgid ""
"Most FreeBSD developers watch the {freebsd-current}, but one should submit "
"problems to {freebsd-acpi} to be sure it is seen.  Be patient when waiting "
"for a response.  If the bug is not immediately apparent, submit a bug "
"report.  When entering a PR, include the same information as requested "
"above.  This helps developers to track the problem and resolve it.  Do not "
"send a PR without emailing {freebsd-acpi} first as it is likely that the "
"problem has been reported before."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/config/_index.adoc:1975
#, no-wrap
msgid "References"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1978
msgid "More information about ACPI may be found in the following locations:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1980
msgid ""
"The FreeBSD ACPI Mailing List Archives (https://lists.freebsd.org/pipermail/"
"freebsd-acpi/[https://lists.freebsd.org/pipermail/freebsd-acpi/])"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1981
msgid ""
"The ACPI 2.0 Specification (http://acpi.info/spec.htm[http://acpi.info/spec."
"htm])"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/config/_index.adoc:1981
msgid ""
"man:acpi[4], man:acpi_thermal[4], man:acpidump[8], man:iasl[8], and man:"
"acpidb[8]"
msgstr ""
