---
title: Бүлэг 6. X Цонхот систем
part: хэсэг I. Эхлэл
prev: books/handbook/ports
next: books/handbook/partii
---

[[x11]]
= X Цонхот систем
:doctype: book
:toc: macro
:toclevels: 1
:icons: font
:sectnums:
:sectnumlevels: 6
:source-highlighter: rouge
:experimental:
:skip-front-matter:
:toc-title: Гарчиг
:table-caption: Хүснэгт
:figure-caption: Зураг
:example-caption: Жишээ
:xrefstyle: basic
:relfileprefix: ../
:outfilesuffix:
:sectnumoffset: 6

ifeval::["{backend}" == "html5"]
:imagesdir: ../../../images/books/handbook/x11/
endif::[]

ifeval::["{backend}" == "pdf"]
:imagesdir: ../../../../static/images/books/handbook/x11/
endif::[]

ifeval::["{backend}" == "epub3"]
:imagesdir: ../../../../static/images/books/handbook/x11/
endif::[]

include::shared/authors.adoc[]
include::shared/releases.adoc[]
include::shared/mn/mailing-lists.adoc[]
include::shared/mn/teams.adoc[]
include::shared/mn/urls.adoc[]

toc::[]

[[x11-synopsis]]
== Ерөнхий агуулга

FreeBSD хэрэглэгчдэд зориулж график горимоор хангахын тулд X11-г ашигладаг. X11 бол Х Цонхот системийн чөлөөтэй түгээгддэг хувилбар бөгөөд Xorg-д (болон энд дурдагдаагүй бусад програм хангамжийн багцуудад) хийгдсэн байдаг. X11-ийн Анхдагч бөгөөд албан ёсны хувилбар нь X.Org сангаас гаргасан Xorg бөгөөд түүний лиценз нь FreeBSD-ийн лицензтэй ижил төсөөтэй билээ.

X11-н дэмждэг дэлгэцтэй холбоотой төхөөрөмжийн талаар http://www.x.org/[Xorg] вэб хуудаснаас хараарай.

Энэ бүлгийг уншиж дууссаны дараа та дараах зүйлсийг мэдэх болно:

* X Цонхот системийн төрөл бүрийн бүрдлүүд болон тэд хэрхэн хоорондоо хамтарч ажилладаг тухай.
* X11-г хэрхэн суулгаж тохируулах.
* Төрөл бүрийн цонхот орчныг хэрэглэх.
* TrueType(R) төрлийн үсгийн маягийг X11 дээр хэрхэн хэрэглэх.
* Өөрийнхөө системийг график горимд хэрхэн нэвтрэлт хийлгэх тухай (XDM).

Энэ бүлгийг уншихаасаа өмнө та дараах зүйлсийг гүйцэтгэх хэрэгтэй:

* Гуравдагчдын бүтээсэн програмыг хэрхэн суулгах тухай мэддэг байх хэрэгтэй (crossref:ports[ports,Програм суулгах. Багцууд болон портууд]).

[[x-understanding]]
== X-г таньж мэдэх

Microsoft(R) Windows(R) болон Mac OS(R) зэрэг график горимыг урьд нь хэрэглэдэг байсан зарим хүмүүс анх удаагаа X-г хэрэглэх үед нэгэн төрлийн цочролд автаж магадгүй юм. 

Х-н төрөл бүрийн бүрдлүүд хоорондоо хэрхэн хамтарч ажилладаг талаар бүрэн мэдэх шаардлагагүй ч гэсэн түүний тухай үндсэн ойлголт авсан үед X-н хүчин чадлыг зөв ашиглаж болох юм.

=== Яагаад X гэж?

X нь UNIX(R)-д зориулж бүтээсэн цонхот системийн анхдагч нь биш ч хамгийн их түгсэн нь мөн билээ. X-н анхны хөгжүүлэгчид нь Х-г бичихээсээ өмнө өөр цонхот систем дээр ажиллацгааж байсан юм. Тэр системийг нь "W" ("Window" гэсэн үг) гэж нэрлэдэг байжээ. X нь ердөө л Ром үсгийн дараагийн үсэг байв.

X нь заримдаа "X", "X Window System буюу Х цонхот систем", "X11" гэх мэтчилэн янз бүрээр нэрлэгддэг. Магадгүй Х11-г "X Цонх" гэж нэрлэсэн хүмүүс их байгааг анзаарч магадгүй юм. Дэлгэрэнгүй мэдээлэл man:X[7] дээр буй.

=== X үйлчлүүлэгч/сервер загвар

X нь анхнаасаа сүлжээтэй ажиллана гэж тооцож зохиогдсон бөгөөд "үйлчлүүлэгч-сервер" загвар хэрэглэдэг.

X загварт "X сервер" нь хулгана, гар, дэлгэцтэй ажилладаг. Энэ үед серверийн үүрэг бол дэлгэцийг удирдах, гар ба хулгана болон бусад оролт эсвэл гаралтын төхөөрөмжүүдээс (жишээ нь "tablet" нь оролтын төхөөрөмж маягаар ашиглагдаж видео проектор нь гаралтын төхөөрөмж байж болох юм) мэдээллийг хүлээж аван зохицуулах үйлдлүүдийг хариуцаж ажиллаж байдаг. X програм болгон (XTerm эсвэл Firefox гэх мэт) уг серверийн "үйлчлүүлэгч" нь юм. Үйлчлүүлэгч нь сервер уруу жишээлбэл "энэ байрлалд цонх зурна уу" гэх мэтийн хүсэлт илгээж болдог байхад серверээс үйлчлүүлэгч рүү жишээлбэл "Хэрэглэгч OK товч дээр дарсан шүү" гэх мэтийн мэдэгдэл буцааж илгээж байдаг.

Гэртээ юм уу эсвэл жижигхэн албан байгууллагын орчинд X сервер болон X үйлчлүүлэгч нь нэг компьютер дээр ажиллаж байдаг. Гэхдээ X серверийг багахан чадалтай компьютер дээр ажиллуулаад харин Х програмуудыг арай хүчтэй компьютер (үйлчлүүлэгч) дээр ажиллуулбал хамгийн тохирсон албаны хэрэглээ байж болох билээ. Ийм нөхцөлд Х сервер болон үйлчлүүлэгчийн хоорондох холболт сүлжээгээр хийгдэнэ.

Ийм хэрэглээ нь Х-г өөрөөр хэрэглэнэ гэж бодож байсан зарим хүмүүсийг гайхшруулж магадгүй юм. Тийм хүмүүс "X серверийг" маш хүчтэй мундаг эд байх ёстой ба бага чадалтай нь "X үйлчлүүлэгчийн" үүрэг гүйцэтгэж ширээн дээр байх ёстой гэж бодсон байдаг.

Х сервер нь дэлгэц болон гар залгагдсан компьютер нь бөгөөд Х үйлчлүүлэгч нь дэлгэц дээр цонх дүрсэлдэг програмууд шүү гэдгийг санах нь тун чухал.

Сервер болон үйлчлүүлэгч хоёрыг нэг төрлийн компьютер юм уу эсвэл нэг төрлийн үйлдлийн систем дээр ажиллах ёстой гэсэн ямар ч албадсан заавар байдаггүй. Х серверийг Microsoft(R) Windows(R) эсвэл Apple-н Mac OS(R) дээр ажиллуулж болдог бөгөөд иймэрхүү үйлдлийг гүйцэтгэж байдаг маш олон үнэгүй юм уу худалдааны програмууд байдаг.

=== Цонх зохицуулагч

X-н загварын зарчим нь UNIX(R)-н "хэрэгсэл болохоос бодлого биш" гэсэн зарчимтай тун ижил байдаг. Энэ нь юу гэсэн үг вэ гэхээр, Х нь үйлдлүүд хэрхэн биелэгдэх ёстой талаар ямар ч бичлэг хийдэггүй. Харин түүний оронд хэрэглэгчдэд зориулсан хэрэгслүүдээр хангагдсан байдаг бөгөөд тэдгээрийг яаж хэрэглэх нь хэрэглэгчийн үүрэг юм.

Энэ зарчмын дагуу Х нь цонхнуудыг хэрхэн харагдах, хулгана хэрхэн хөдлөх, ямар товч хэрэглэж цонхнуудын хооронд дамжих (Microsoft(R) Windows(R) дээрх kbd:[Alt+Tab] товчлуурын хослол шиг), цонх болгоны дээрх гарчгийн самбар яаж харагдах, цонх болгонд хаах товч байх ёстой юу үгүй гэх зэргийн бүртгэл болон заавруудыг агуулж байдаггүй.

Харин түүний оронд иймэрхүү хариуцлагыг X нь "Цонх зохицуулагч" гэж нэрлэгдэх програм руу дамжуулдаг. Х-д зориулсан http://xwinman.org/[олон цонх зохицуулагчид] байдаг. Эдгээр цонх зохицуулагч болгон тус тусдаа өөрсдийн өөрийн гэсэн төрөл бүрийн харуулах загвартай байдаг ба зарим нь өөртөө "virtual desktops буюу хийсвэр компьютерийн дэлгэцийг" дэмждэг бөгөөд тэд нарын зарим нь тийм хийсвэр дэлгэцэндээ сэлгэх товчлуурууд агуулж байхад зарим нь "Start буюу Эхлэх" товч юм уу түүнтэй ижил төхөөрөмж агуулж байдаг. Мөн зарим нь "themeable буюу дэлгэцийн дурын өөрчлөлт" хийж харагдах загваруудын бүрдлийг агуулан сэлгэж хэрэглэх зэргээр хэрэглэгдэж байдаг билээ. Цонх зохицуулагчдыг портын цуглуулга доторх [.filename]#x11-wm# төрөлд олж болно.

Мөн түүнчлэн KDE болон GNOME дэлгэцийн орчнууд нь өөрсдийн гэсэн цонх зохицуулагчтай байдаг ба тэр нь дэлгэцийн орчиндоо агуулагдчихсан ажиллаж байдаг.

Цонх зохицуулагч бүр өөр өөрсдийн тохируулах аргатай байдаг. Зарим нь тохируулгын файлыг гараараа бичих ёстой гэдэг байхад зарим нь ихэнх тохируулгын үйлдлүүдийг GUI буюу график орчны хэрэгслээр хийдэг; мэдэж байгаагаар, нэг цонх зохицуулагч (Sawfish) Lisp програмын хэллэгээр бичигдсэн тохиргооны файлтай байдаг.

[NOTE]
.Сонгогдож идэвхжүүлэх бодлого
====
Цонх зохицуулагчийн бас нэг үүрэг бол "сонгогдож идэвхжих бодлого " билээ. Цонх болгон ямар нэгэн байдлаар сонгогдсоноо илэрхийлж идэвхжин гарнаас оруулсан мэдээллийг хүлээж авах бөгөөд идэвхтэй болсноо нүдэнд харуулагдахаар дүрсэлж харуулах хэрэгтэй байдаг.

Түгээмэл болсон, сонгогдож идэвхжих бодлогыг "идэвхжүүлэхийн-тулд-дарах" гэж нэрлэдэг. Энэ загварыг Microsoft(R) Windows(R) хэрэглэдэг бөгөөд хулгана дарах үед заагдсан цонх нь идэвхитэй болно.

X ямар нэгэн сонгож идэвхжүүлэх бодлогыг дэмждэггүй. Харин түүний оронд цонх зохицуулагч гуай тухайн үед ямар цонх идэвхжих вэ гэдгийг хянаж байдаг. Цонх зохицуулагч бүр өөр өөрсдийн сонгож идэвхжүүлэх арга хэрэглэдэг. Тэд бараг бүгдээрээ дарж идэвхжүүлэх бодлого баримталж байхад тун цөөхөн нь өөр зарчим баримталсан байдаг. 

Хамгийн түгээмэл сонгож идэвхжүүлэх бодлогууд бол:

хулганыг дагаж идэвхжүүл::
Хулганы заагч байгаа цонхыг сонгогдсон гэж авч үздэг. Цонхыг хамгийн өмнө нь байлгах шаардлагагүй бөгөөд нэмж товч даралгүй хулганы байрлалыг өөрчилснөөр цонхыг идэвхжүүлж болно. 

унтамхай-идэвхжүүлэлт::
Энэ бодлого бол хулгана-дагаж-идэвхжүүл бодлогын өргөжүүлсэн арга юм.хулгана-дагаж-идэвхжүүл бодлого дээр хэрэв хулгана эх цонхон дээр (эсвэл арын дэвсгэр) очвол ямар ч цонх идэвхтэй болдоггүй. Харин унтамхай-идэвхжүүлэлт дээр хэрэв хулгана өөрийнхөө цонхноос гараад өөр цонх уруу орсон үед тэр цонх идэвхтэй болдог.

идэвхжүүлэхийн-тулд-дарах::
Хулганы товч дарахад л тухайн цонх идэвхжинэ. Уг цонх тэгээд "дэлгэгдэх" бөгөөд бүх цонхны өмнө харуулагддаг. Ингээд дарагдсан бүх товчнуудын өгөгдлүүд энэ цонх уруу илгээгдэж байдаг. 

Маш олон цонх зохицуулагчид өөр бодлого дэмжих эсвэл жаахан өөрчилсөн бодлого хэрэглэдэг. Тухайн цонх зохицуулагчийн бичиг баримтаас нь нэмэгдэл мэдээлэл аваарай.
====

=== Widgets буюу багажнууд

X-н хэрэгсэл болохоос бодлого биш зарчмыг өргөтгөн програм болгоныг төлөөлсөн багаж дэлгэц дээр харуулагддаг.

"Багажнууд" гэдэг нь дарагдах, эсвэл ямар нэгэн аргаар өөрчлөгдөж байдаг дэлгэц дээрх зүйлс бөгөөд товч, чагталдаг цонх, бөөрөнхий сонгодог товч, тэмдэгт зурагнууд, жагсаалтууд зэрэг юм. Microsoft(R) Windows(R) харин тэдгээрийг "controls буюу хянагчид" гэж нэрлэсэн байдаг.

Microsoft(R) Windows(R) болон Apple-н Mac OS(R) хоёр багажны маш тогтсон загвартай билээ. Програм хөгжүүлэгчид нь өөрсдийн програмуудаа нийтлэг харуулагдах загвараар аль болох хийх зарчмыг баримталж байдаг. X-ийн хувьд бол тодорхой нэг график загвар, аль эсвэл багажнуудын олонлогийг заавал баримтлах нь тийм ч ухаалаг бус санаа юм.

Тийм болохоор Х програмуудыг хоорондоо адилхан харагдах нийтлэг загвартай байдаг гэж бодох хэрэггүй. Түгээмэл дэлгэрсэн багажны цуглуулгууд байдаг бөгөөд үүнд KDE-н хэрэглэдэг Qt, аль эсвэл GNOME-н хэрэглэдэг GTK+ зэрэг орчин үеийн багажнуудын олонлогийг дурдаж болно. Энэ нь UNIX(R)-н харагдах дэлгэцийн маягийн хувьд зарим нэг давхцалд хүргэх бөгөөд ингэснээр мэдээж юмсыг шинэ хэрэглэгчдийн хувьд илүү хялбар болгох юм.

[[x-install]]
== X11-г суулгах нь

Xorg бол FreeBSD-н X11 гүйцэтгэл юм. Xorg нь X.Org сангаас гаргасан Х цонхот системийн Х сервер. Xorg нь XFree86(TM) 4.4RC2 болон X11R6.6 хоёрын эх бичлэг дээр үндэслэгдсэн билээ. FreeBSD-н портын цуглуулга дотор байгаа Xorg-н хувилбар нь 7.7 гэж буй.

Портын цуглуулгаас Xorg-г суулгахын тулд:

[source,bash]
....
# cd /usr/ports/x11/xorg
# make install clean
....

[NOTE]
====
Xorg-г бүхлээр нь хөрвүүлэхийн тулд хамгийн багадаа 4 ГБ хэмжээ сул байлгах хэрэгтэйг анхаараарай.
====

X11-г багц хэлбэрээр мөн суулгаж болно. Хоёрт хэлбэрийн файлыг нь man:pkg_add[1] хэрэгслээр Х11-г суулгаж болдог. Алсад байгаа серверээс нөхөж суулгадаг боломжийг man:pkg_add[1] хэрэглэх үед багцнаас хувилбарынх нь дугаарыг устгах хэрэгтэй. Тэгээд man:pkg_add[1] нь автоматаар сүүлийн хувилбарыг нь нөхөж суулгадаг.

Xorg-н хамгийн сүүлийн хэлбэрийг нь автоматаар нөхөж суулгахын тулд ердөө л дараах тушаалыг өгнө:

[source,bash]
....
# pkg_add -r xorg
....

[NOTE]
====
Дээрх жишээгээр бол X11-г сервер, үйлчлүүлэгч, үсгийн маяг зэрэгтэй нь бүхлээр нь суулгана. Х11-н багц болон портууд нь тусдаа мөн суугдаж болдог.

X11 түгээлтийг хамгийн бага хэлбэрээр суулгахын тулд package:x11/xorg-minimal[]-г та суулгаж болно.
====

Энэ бүлгийн үлдсэн хэсэгт Х11-г суулгаж тохируулан хэрхэн эвтэйхэн компьютерийн дэлгэц бэлдэх талаар өгүүлэх болно.

[[x-config]]
== X11-н тохируулга

=== Тохируулж эхлэхээс өмнө

Ихэнх тохиолдолд X11 нь өөрөө тохируулагддаг. Хуучин болон ердийн биш төхөөрөмжтэй хүмүүс тохируулахаасаа өмнө тоног төхөөрөмжийн талаар мэдээлэл цуглуулах нь хэрэгтэй байж магадгүй юм.

* Дэлгэцийн давтамжууд
* Видео картын схемийн мэдээлэл
* Видео картын санах ойн хэмжээ

Дэлгэцийн нягтрал ба зурах давтамж нь мониторын хэвтээ ба босоо давтамжуудаас хамаардаг. Бараг бүх мониторууд эдгээрийг электроноор автоматаар илрүүлэх дэмжлэгтэй байдаг. Цөөн мониторууд эдгээр утгуудгүй байдаг бөгөөд хэвлэсэн гарын авлага болон үйлдвэрлэгчийн вэб сайтаас үзүүлэлтүүдийг олж авах хэрэгтэй.

Видео картын бичих схемийг бас автоматаар илрүүлдэг бөгөөд энэ нь зөв видео драйвер сонгоход ашиглагддаг. Хүссэн үр дүнд автоматаар илрүүлэх явц хүргэхгүй бол хэрэглэгчийн хувьд ямар бичил схем суулгагдсан болохыг мэдэх нь хэрэг болдог.

Видео картын санах ой максимум нягтрал ба үзүүлж болох өнгөний гүнг тодорхойлдог.

=== X11-н тохиргоо

Гар болон хулганыг автоматаар танихын тулд Xorg нь HAL-ийг ашигладаг. package:sysutils/hal[] болон package:devel/dbus[] портууд нь package:x11/xorg[]-ийн хамаарал болон суудаг боловч тэдгээрийг [.filename]#/etc/rc.conf# файл дахь дараах оруулгуудыг засварлан идэвхжүүлэх ёстой:

[.programlisting]
....
hald_enable="YES"
dbus_enable="YES"
....

Эдгээр үйлчилгээнүүдийг дараа дараачийн Xorg тохиргоог оролдох эсвэл ашиглахаасаа өмнө эхлүүлсэн байх шаардлагатай (гараар эсвэл дахин ачаалах замаар).

Xorg нь ямар нэг тохиргооны алхмуудыг цааш хийлгүйгээр дараах тушаалыг бичин ихэвчлэн ажилладаг:

[source,bash]
....
% startx
....

Автомат тохиргоо нь зарим нэг тоног төхөөрөмжийн хувьд ажиллахгүй байх юм уу эсвэл зарим нэг зүйлсийг хүссэнээр тэр бүр тохируулж чаддаггүй. Энэ тохиолдлуудад гараар тохиргоог хийх шаардлагатай.

[NOTE]
====
GNOME, KDE эсвэл Xfce зэрэг ширээний орчнууд нь хэрэглэгчид нягтрал зэрэг дэлгэцийн өгөгдлүүдийг хялбарханаар тохируулах боломж бүхий хэрэгслүүдтэй. Хэрэв анхдагч тохиргоог хүлээн авах боломжгүй бөгөөд та ширээний орчин суулгахаар шийдсэн бол ширээний орчны суулгалтыг үргэлжлүүлж тохирох дэлгэц тохируулах хэрэгслийг ашиглаарай.
====

X11-г тохируулах нь олон үе шаттай явц билээ. Хамгийн эхний алхам бол анхдагч тохируулгын файлыг бэлдэх билээ. Супер хэрэглэгчийн эрхээр ердөө л дараах тушаалыг өгнө:

[source,bash]
....
# Xorg -configure
....

Ингэснээр [.filename]#/root# сан дотор [.filename]#xorg.conf.new# гэсэн нэртэй Х11 ийн тохиргооны үндсэн файл үүсгэгддэг (та man:su[1] тушаалаар юм уу эсвэл анхнаасаа супер хэрэглэгчийн эрхээр орсон байсан ч супер хэрэглэгчийн `$HOME` буюу эх сан дотор үүсгэх болно). Х11 гуай тухайн систем дээр байгаа график төхөөрөмжийг таних оролдлого хийж таниулах програмын мэдээллийг уг тохируулга руу бичдэг. 

Дараагийн алхам бол уг тохируулга файлыг ашиглаад график төхөөрөмжтэй Xorg ажиллаж чадаж байгааг турших юм. Дараах тушаалыг оруулах хэрэгтэй:

[source,bash]
....
# Xorg -config xorg.conf.new -retro
....

Хэрэв хар саарал дэвсгэр дээр Х хэлбэртэй хулганы заагч харагдаж байвал амжилттай боллоо гэсэн үг. Туршилтаас гарахын тулд эхлүүлсэн виртуал консол руу kbd:[Ctrl+Alt+Fn] (эхний виртуал консолын хувьд kbd:[F1]) товчлууруудын хослолыг дарж шилжин kbd:[Ctrl+C] дарна.

[NOTE]
====
kbd:[Ctrl+Alt+Backspace] товчлууруудын хослолыг ашиглан Xorg-с бас гарч болно. Үүнийг идэвхжүүлэхийн тулд дараах тушаалыг дурын X терминал эмулятороос оруулж болно:

[source,bash]
....
% setxkbmap -option terminate:ctrl_alt_bksp
....

Эсвэл hald-д зориулсан гарын тохиргооны файл [.filename]#x11-input.fdi#-г [.filename]#/usr/local/etc/hal/fdi/policy# санд үүсгэн хадгалж болно. Энэ файл нь дараах мөрүүдтэй байх ёстой:

[.programlisting]
....
<?xml version="1.0" encoding="utf-8"?>
<deviceinfo version="0.2">
  <device>
    <match key="info.capabilities" contains="input.keyboard">
	  <merge key="input.x11_options.XkbOptions" type="string">terminate:ctrl_alt_bksp</merge>
    </match>
  </device>
</deviceinfo>
....

Та hald-гээр энэ файлыг уншуулахын тулд өөрийн машиныг дахин ачаалах хэрэгтэй болно.

Дараах мөрийг [.filename]#xorg.conf.new# файлын `ServerLayout` эсвэл `ServerFlags` хэсэгт нэмж өгөх ёстой болно:

[.programlisting]
....
Option	"DontZap"	"off"
....

====

Хэрэв хулгана ажиллахгүй байвал өмнөх туршилтыг дахин хийхээсээ өмнө хулганаа тохируулах шаардлагатай. FreeBSD-г суулгах бүлэгт буй crossref:install[mouse,Хулганы тохиргоо] хэсгээс харна уу. Сүүлийн үеийн Xorg-с эхлээд [.filename]#xorg.conf# файл дахь `InputDevice` хэсгүүдээс автоматаар илрүүлсэн төхөөрөмжүүдийг илүүд үздэг. Хуучин байдалд нь эргүүлж оруулахын тулд дараах мөрийг энэ файлын `ServerLayout` эсвэл `ServerFlags` хэсэгт нэмэх хэрэгтэй:

[.programlisting]
....
Option "AutoAddDevices" "false"
....

Оролтын төхөөрөмжүүдийг дараа нь урьдны хувилбаруудад хийсний нэгэн адилаар хэрэгцээтэй бусад тохируулгуудын (жишээ нь гарын байрлалыг сэлгэх) хамтаар тохируулж болдог.

[NOTE]
====
Өмнө тайлбарласны адил анхдагчаар hald демон таны гарыг автоматаар мэдэх болно. Таны гарын байрлал эсвэл загвар зөв биш байж болох боловч GNOME, KDE эсвэл Xfce зэрэг ширээний орчнууд гарыг тохируулах хэрэгслүүдтэй байдаг. Гэхдээ гарын тохиргоог man:setxkbmap[1] хэрэгсэл эсвэл hald-ийн тохиргооны дүрмийн тусламжтайгаар шууд тохируулах боломжтой байдаг.

Жишээ нь хэрэв Франц байрлалтай PC 102 товчлууртай гарыг хэн нэгэн ашиглахыг хүсэж байгаа бол hald-д зориулсан [.filename]#x11-input.fdi# гэсэн гарын тохиргооны файлыг үүсгэж [.filename]#/usr/local/etc/hal/fdi/policy# санд хадгалах хэрэгтэй. Энэ файл нь дараах мөрүүдийг агуулсан байх ёстой:

[.programlisting]
....
<?xml version="1.0" encoding="utf-8"?>
<deviceinfo version="0.2">
  <device>
    <match key="info.capabilities" contains="input.keyboard">
	  <merge key="input.x11_options.XkbModel" type="string">pc102</merge>
	  <merge key="input.x11_options.XkbLayout" type="string">fr</merge>
    </match>
  </device>
</deviceinfo>
....

Хэрэв энэ файл байгаа бол хуулаад гарын тохиргооны мөрүүдийг өөрийн файлдаа нэмэх хэрэгтэй.

hald-ээр энэ файлыг уншуулахын тулд та өөрийн машиныг дахин ачаалах хэрэгтэй.

Адил тохиргоог X терминалаас эсвэл энэ тушаалын мөрөөс скриптээр хийх боломжтой:

[source,bash]
....
% setxkbmap -model pc102 -layout fr
....

[.filename]#/usr/local/shared/X11/xkb/rules/base.lst# файл нь төрөл бүрийн боломжит гар, байрлал, сонголтуудыг харуулдаг.
====

[.filename]#xorg.conf.new# файлыг одоо өөрийнхөө хүсэлд тохируулан сайжруулах хэрэгтэй. Уг файлыг man:emacs[1] эсвэл man:ee[1] зэрэг засварлагчаар нээнэ. Хэрэв монитор хуучны эсвэл давтамжийг автоматаар мэдэрдэг ердийнх шиг биш бол [.filename]#xorg.conf.new# файл дотор `"Monitor"` гэсэн хэсэгт оруулж өгөөрэй:

[.programlisting]
....
Section "Monitor"
        Identifier   "Monitor0"
        VendorName   "Monitor Vendor"
        ModelName    "Monitor Model"
        HorizSync    30-107
        VertRefresh  48-120
EndSection
....

Ихэнх мониторууд давтамжийг автоматаар мэдэрдэг бөгөөд гараар оруулах заавал шаардлагагүй. Автоматаар мэдэрдэг дэмжлэг байхгүй шинэ мониторуудын хувьд үйлдвэрлэгчээс зөвхөн зааж өгсөн утгуудыг оруулж эвдрэлээр сэргийлээрэй.

X нь DPMS (Тэжээл хэмнэх) чадвартай дэлгэцийг дэмждэг. man:xset[1] програм цаг дуусах нөхцлийг шалгаад дэлгэцийг standby, suspend, эсвэл off буюу нөөц, түр салгах, эсвэл унтраах зэрэг горимд шилжүүлдэг. Хэрэв та дэлгэцэндээ DPMS шинж чанарыг хэрэгжүүлнэ гэж бодож байвал дараах мөрийг monitor хэсэгт нэмэх хэрэгтэй:

[.programlisting]
....

        Option       "DPMS"
....

Та [.filename]#xorg.conf.new# файлыг засварлагч дээр нээсэн хэвээр байгаа болохоор дэлгэцийн зуралтын хэмжээ болон өнгөний нягтыг оруулж өгч болно. Эдгээр утгыг `"Screen"` хэсэгт оруулдаг:

[.programlisting]
....
Section "Screen"
        Identifier "Screen0"
        Device     "Card0"
        Monitor    "Monitor0"
        DefaultDepth 24
        SubSection "Display"
                Viewport  0 0
                Depth     24
                Modes     "1024x768"
        EndSubSection
EndSection
....

`DefaultDepth`-д өгсөн утга нь анхдагч хэрэглэх өнгөний нягт юм. Хэрэв анхдагч утгыг нь ачаалах үед дарж өөрчлөж хэрэглэнэ гэвэл man:Xorg[1]-г ажиллуулах тушаалд `-depth` гэсэн сонголтыг хүссэн утгатай хамт оруулан хэрэглэж болно. `Modes` гэсэн түлхүүр үг нь заасан өнгөтэй үеийн дэлгэцийн зурах хэмжээг зааж байдаг. Тухайн график дүрслэгчийн үйлдвэрлэгчээс зааж өгсөн стандарт VESA горимууд л зөвшөөрөгдсөн гэдгийг анхаарна уу. Дээрх жишээн дээр дэлгэцийн анхдагч өнгөний нягт нь нэг цэгийг хорин дөрвөн битээр илэрхийлнэ гэж заасан байгаа бөгөөд ийм нягтшилтай үедээ өргөөшөө 1024, өндрөөшөө 768 цэгээр зурж харуул хэмээн зааж өгөв.

Эцэст нь тохируулгын файлаа хадгалаад өмнө заасны дагуу дахин турших хэрэгтэй.

[NOTE]
====
Хүндрэл гарсан үед танд хэрэгтэй нэг хэрэгсэл бол Х11-ийн log буюу бүртгэл тэмдэглэлийн файл юм. Энэ файлд Х11-д залгагдсан төхөөрөмжийн тухай мэдээллүүд оршиж байдаг. Xorg-н бүртгэл тэмдэглэлийн нэрний загвар нь [.filename]#/var/log/Xorg.0.log# хэлбэртэй байдаг. Энэ файлын жинхэнэ нэр нь [.filename]#Xorg.0.log#-оос [.filename]#Xorg.8.log#-н хооронд өөрчлөгдөж байдаг.
====

Хэрэв бүх зүйл сайн болж өнгөрсөн бол тохируулгын файлаа man:Xorg[1]-д олдох газарт байрлуулах хэрэгтэй. Үүнийг голдуу [.filename]#/etc/X11/xorg.conf# эсвэл [.filename]#/usr/local/etc/X11/xorg.conf# гэсэн байрлалд хуулдаг.

[source,bash]
....
# cp xorg.conf.new /etc/X11/xorg.conf
....

X11-г тохируулах явц ингээд гүйцлээ. Xorg-г та одоо man:startx[1] хэрэгслээр эхлүүлж болно. Х11 сервер нь мөн man:xdm[1]-р эхлүүлэгдэж болдог.

=== Нэмэгдэл тохиргоо

==== Intel(R) `i810` Graphics Chipsets-г тохируулах

Intel(R) i810 integrated chipsets төрлийн график дүрслэгчдийг тохируулахын тулд [.filename]#agpgart# AGP програмууд X11-д хэрэгтэй байдаг. man:agp[4]-н драйверийн гарын авлагаас нэмэгдэл мэдээллийг хараарай.

Энэ нь мөн бусад график хавтангуудын төхөөрөмжийг тохируулахад хэрэглэгддэг. Системийнхээ цөмд man:agp[4] драйверийг оруулж хөрвүүлээгүй бол man:kldload[8] тушаалаар драйверийг дуудсан үед ажиллахгүй гэдгийг анхаарна уу. Уг драйвер анхнаасаа цөмд оруулж бэлтгэгдсэн байх ёстой юм уу эсвэл ачаалах үед [.filename]#/boot/loader.conf#-р цөмд нэмэгдсэн байх ёстой.

==== Өргөн дэлгэцийн горим нэмэх

Энэ хэсэгт таныг тохируулгын жаахан илүү мэдлэгтэй гэж үзэх болно. Мөн энэ хэсэгт дээр өгүүлсэн ердийн тохиргоо хийхийг авч үзэхгүй. Бүртгэл мэдээллийн файлыг ашиглаж тохиргоог ямар нэгэн аргаар дуусгаж болно. Хамгийн багадаа текст засварлагч байхад л уг тохируулгыг хийж болох хангалттай.

16:10 болон 10:9 зэрэг харуулах харьцааг дэмждэг одоогийн өргөн дэлцгэцүүд (WSXGA, WSXGA+, WUXGA, WXGA, WXGA+, гэх мэт) жаахан хүндрэлтэй байж болзошгүй. Зарим төрлийн 16:10 харуулах харьцаануудыг дурдвал:

* 2560x1600
* 1920x1200
* 1680x1050
* 1440x900
* 1280x800

Зарим тохиолдолд `Section "Screen"` хэсгийн `Mode` хэсэгт эдгээр харьцаануудын нэгийг бичсэнээр тохиргоог амархан гүйцээж болдог:

[.programlisting]
....
Section "Screen"
Identifier "Screen0"
Device     "Card0"
Monitor    "Monitor0"
DefaultDepth 24
SubSection "Display"
	Viewport  0 0
	Depth     24
	Modes     "1680x1050"
EndSubSection
EndSection
....

Xorg нь тухайн өргөн дэлгэцээс I2C/DDC мэдээллийг нь авах ухаантай болохоор уг дэлгэцийн харгалзах зуралтын давтамжийг нь мэдэж чаддаг. 

Хэрэв эдгээр `ModeLines`-ууд нь драйвер дотор байхгүй байвал Xorg танд жаахан тусламж өгч чаддаг. [.filename]#/var/log/Xorg.0.log# файлаас ажиллаж болох `ModeLine`-уудыг харж болно. Дараах шиг мөрийн хэсгүүдийг харах хэрэгтэй:

[.programlisting]
....
(II) MGA(0): Supported additional Video Mode:
(II) MGA(0): clock: 146.2 MHz   Image Size:  433 x 271 mm
(II) MGA(0): h_active: 1680  h_sync: 1784  h_sync_end 1960 h_blank_end 2240 h_border: 0
(II) MGA(0): v_active: 1050  v_sync: 1053  v_sync_end 1059 v_blanking: 1089 v_border: 0
(II) MGA(0): Ranges: V min: 48  V max: 85 Hz, H min: 30  H max: 94 kHz, PixClock max 170 MHz
....

Энэ мэдээллийг EDID мэдээлэл гэдэг. Үүгээр `ModeLine` мөрийг үүсгэхийн тулд ердөө л тэдгээрийг зөв дарааллаар нь оруулж бичихэд хангалттай:

[.programlisting]
....
ModeLine <name> <clock> <4 horiz. timings> <4 vert. timings>
....

Тэгэхээр дээр жишээний дагуу `Section "Monitor"` хэсэгт `ModeLine` мөрийг дараах маягаар оруулна:

[.programlisting]
....
Section "Monitor"
Identifier      "Monitor1"
VendorName      "Bigname"
ModelName       "BestModel"
ModeLine        "1680x1050" 146.2 1680 1784 1960 2240 1050 1053 1059 1089
Option          "DPMS"
EndSection
....

Ингэж энгийн засварлалт хийж дуусгаад Х-ийг өргөн дэлгэцтэй нь шинээр ажиллуулж болно.

[[x-fonts]]
== X11 дээр үсгийн маяг хэрэглэх нь

[[type1]]
=== Type1 төрлийн үсгийн маяг

Х11 тэй хамт ирдэг анхдагч үсгийн маягууд нь ширээний програмуудад тийм сайн тохиромжтой байж чаддаггүй. Том үсэгнүүд нь зарим нь арзайж харагдах, зарим man:getenv[3]-н жижиг үсэгнүүд тийм аятайхан харагддаггүй гэх мэт онцгүй тохиолдлууд тулгардаг. Гэхдээ Х11 дээр хэрэглэгдэх боломжтой үнэгүй өндөр чанарын Type1 (PostScript(R)) төрлийн үсгийн маягууд байдаг. Жишээ нь URW үсгийн цуглуулганд (package:x11-fonts/urwfonts[]) өндөр чанарын type1 (Times Roman(TM), Helvetica(TM), Palatino(TM) гэх мэтчилэн) үсгийн маягууд орсон байдаг. Мөн Freefonts цуглуулганд (package:x11-fonts/freefonts[]) маш олон төрлийн үсгийн маяг байдаг бөгөөд ихэнх нь графиктай ажилладаг Gimp зэрэг програмд зориулагдсан болохоор дэлгэцийн харуулах зориулалтанд хэрэглэгддэггүй. Бас Х11 дээр цөөхөн тохиргоо хийгээд TrueType(R) төрлийн үсгийн маяг хэрэглэдэг болгож болдог. man:X[7] хуудаснаас юм уу эсвэл <<truetype,TrueType(R) үсгийн маягийн хэсгээс>> нэмэлт мэдээллүүдийг уншина уу.

Дээрх Type1 үсгийг портын цуглуулгаас суулгахын тулд дараах тушаалыг оруулна:

[source,bash]
....
# cd /usr/ports/x11-fonts/urwfonts
# make install clean
....

Энэ үйлдлийг бусад цуглуулган дээр мөн адил хийнэ. X серверт эдгээр үсгээ таниулахын тулд тохируулгын файлд ([.filename]#/etc/X11/xorg.conf#) дараах мөрийг нэмж өгдөг:

[.programlisting]
....
FontPath "/usr/local/lib/X11/fonts/URW/"
....

эсвэл Х ажиллаж байх үед дараах тушаалыг өгч болно:

[source,bash]
....
% xset fp+ /usr/local/lib/X11/fonts/URW
% xset fp rehash
....

Энэ тушаал нь Х хэсгийг хаагдах хүртэл хүчинтэй бөгөөд ийм байдалд хүргэхгүй гэвэл ачаалах үед уншигддаг эхлэх файлд нэмж өгдөг (`startx`-н эхлэх үед уншдаг файл нь [.filename]#~/.xinitrc#, харин XDM зэргийн график нэвтрэлт хийдэг програмын эхлэн уншдаг файл нь [.filename]#~/.xsession# байдаг ). Гурав дахь арга бол шинэ [.filename]#/usr/local/etc/fonts/local.conf# файл хэрэглэх юм: <<antialias,anti-aliasing>> хэсгээс уншина уу. 

[[truetype]]
=== TrueType(R) үсгийн маяг

Xorg нь өөртөө бас TrueType(R) төрлийн үсгийн маягийг харуулах гүйцэтгэлтэй суусан байдаг. Үүнийг гүйцэтгэх хоёр төрлийн гүйцэтгэл бий. Энэ хэсэгт freetype модулийг харуулсан ба нөгөө үсгийн маяг харуулагчийг бодвол илүү тогтвортой билээ. freetype модулийг идэвхжүүлэхийн тулд дараах мөрийг [.filename]#/etc/X11/xorg.conf# файлын `"Module"` хэсэгт нэмнэ.

[.programlisting]
....
Load  "freetype"
....

Одоо TrueType(R) үсгийн маягт зориулсан сан үүсгээд (жишээлбэл [.filename]#/usr/local/lib/X11/fonts/TrueType#) бүх TrueType(R) үсгүүдээ тэр санд хуулна. Macintosh(R) машинаас TrueType(R) төрлийн үсгийн маягийг шууд хуулж болохгүй гэдгийг анхаарах хэрэгтэй. Эдгээр нь Х11 дээр хэрэглэгдэхийн тулд UNIX(R)/MS-DOS(R)/Windows(R) хэлбэрийнх байх ёстой. Тэр санд хуулсныхаа дараа ttmkfdir-г ашиглаж [.filename]#fonts.dir# файл үүсгэдэг бөгөөд ингэснээр Х-н үсэг харуулагч нь шинэ файл суугдлаа гэдгийг таньдаг. `ttmkfdir` нь FreeBSD-н портын цуглуулганд package:x11-fonts/ttmkfdir[] гэж буй.

[source,bash]
....
# cd /usr/local/lib/X11/fonts/TrueType
# ttmkfdir -o fonts.dir
....

Одоо TrueType(R) санг үсгийн маягийн таних замд нэмэх ёстой. Энэ нь дээр <<type1,Type1>> үсгийн маягт дээр өгүүлсэнтэй ижилхэн 

[source,bash]
....
% xset fp+ /usr/local/lib/X11/fonts/TrueType
% xset fp rehash
....

гэж нэмэх юм уу эсвэл [.filename]#xorg.conf# файл дотор `FontPath` гэж нэмнэ.

Ингээд болох нь тэр. Одоо man:getenv[3], Gimp, StarOffice(TM), гэх мэтчилэн бүх X програмууд суугдсан TrueType(R) үсгийн маягуудыг таних ёстой. Маш бага хэмжээтэй (өндөр нарийвчлалтай дэлгэц дээр үзүүлэгдэх вэбийн текстүүд) эсвэл маш том үсэгнүүд (StarOffice(TM) дээр) арай илүү харагдана.

[[antialias]]
=== Anti-Aliased үсгийн маяг

X11-ийн [.filename]#/usr/local/lib/X11/fonts/# ба [.filename]#~/.fonts/# дотор байгаа бүх үсгийн маягууд автоматаар anti-aliasing гэж Xft-нийцтэй програмд хэрэглэгдэх боломжтой болсон. KDE, GNOME, Firefox зэрэг хамгийн сүүлийн үеийн Xft-нийцтэй програмууд байдаг.

Ямар үсгийн маягууд нь anti-aliased болохыг хянах эсвэл anti-aliasing шинж чанаруудыг тохируулахын тулд [.filename]#/usr/local/etc/fonts/local.conf# файлыг үүсгэх (хэрэв байвал засварлах) хэрэгтэй. Xft үсгийн маягийн системийн хэд хэдэн шинж чанарууд энэ файлаар тохируулагддаг бөгөөд энэ хэсэгт зөвхөн энгийн хэдийг жишээ татах болно. Дэлгэрэнгүй мэдээллийг man:fonts-conf[5] хуудаснаас харна уу.

Энэ файл нь XML хэлбэрийн байх ёстой. Том жижиг үсгийн хэмжээнд нь анхааралтай хандах хэрэгтэй. Мөн нээгдсэн таглааг бас зөв хаасан байх ёстой. Энэ файл эхлэхдээ энгийн DOCTYPE тодорхойлолтоор эхэлдэг бөгөөд дараа нь `<fontconfig>` таглаа араас нь залгаж явдаг:

[.programlisting]
....

      <?xml version="1.0"?>
      <!DOCTYPE fontconfig SYSTEM "fonts.dtd">
      <fontconfig>
....

Өмнө хэлсэнчлэн [.filename]#/usr/local/lib/X11/fonts/# болон [.filename]#~/.fonts/# санд байгаа үсгийн маягууд автоматаар Xft-нийцтэй програмд танигддаг. Та үүнээс өөр санд үсгийн маяг байрлуулсан бол [.filename]#/usr/local/etc/fonts/local.conf# файлд доор дурдсантай ижил мөр оруулж өгөх хэрэгтэй:

[.programlisting]
....
<dir>/үсгийн/маягийн/байгаа/сангийн</зам>
....

Шинэ үсэг, ялангуяа шинэ сан нэмсний дараа үсгийн маягийн түр хадгалагдсан орон зайг дараах тушаалаар сэргээх ёстой:

[source,bash]
....
# fc-cache -f
....

Anti-aliasing нь ирмэгийг жаахан уусгаж зөөлрүүлэн харагдуулдаг болохоор жижиг үсгүүдийг уншихад эвтэйхэн болгодог бөгөөд том үсгийн "шаталсан ирмэгийг" зөөллөж гөлийлгөдөг. Иймэрхүү зөөллөсөн шинэ чанар нь ердийн текст дээр хэрэгжихээр нүдэнд ядаргаатай өвтгөх нөлөө үүсгэж магадгүй юм. Тэгэхээр 14-н хэмжээнээс бага үсгийн маяганд anti-aliasing шинж чанарыг хэрэглэхгүй гэж бодвол дараах мөрийг оруулаарай:

[.programlisting]
....
        <match target="font">
            <test name="size" compare="less">
                <double>14</double>
            </test>
            <edit name="antialias" mode="assign">
                <bool>false</bool>
            </edit>
        </match>
        <match target="font">
            <test name="pixelsize" compare="less" qual="any">
                <double>14</double>
            </test>
            <edit mode="assign" name="antialias">
                <bool>false</bool>
            </edit>
        </match>
....

Жигд зай авалттай үсгийн маяганд anti-aliasing шинж чанар зөв хэрэгжихгүй байж магадгүй. Энэ асуудал KDE дээр их тулгардаг. Үүний засах нэг арга бол тийм үсгүүдийн зай авалтыг 100 байх ёстой гэж зааж өгдөг. Дараах мөрийг нэмж үүнийг гүйцэтгэнэ:

[.programlisting]
....
       <match target="pattern" name="family">
           <test qual="any" name="family">
               <string>fixed</string>
           </test>
           <edit name="family" mode="assign">
               <string>mono</string>
           </edit>
        </match>
        <match target="pattern" name="family">
            <test qual="any" name="family">
                <string>console</string>
            </test>
            <edit name="family" mode="assign">
                <string>mono</string>
            </edit>
        </match>
....

(энэ нь бусад ердийн ижил зай авалттай үсгийн маягуудыг `"mono"` гэсэн нэрээр хандана гэж зааж өгч байна) тэгээд дараа нь:

[.programlisting]
....
         <match target="pattern" name="family">
             <test qual="any" name="family">
                 <string>mono</string>
             </test>
             <edit name="spacing" mode="assign">
                 <int>100</int>
             </edit>
         </match>
....

Helvetica зэрэг зарим үсгийн маягуудад anti-aliased хэрэглэх үед бага зэрэг хүндрэлүүд гарч болзошгүй. Энэ загвар нь тийм үсгийн маягуудын талыг нь хасах шинж илэрдэг. Хамгийн муугаар бодоход програмууд ажиллах үедээ нурдаг. Үүнээс сэргийлэхийн тулд [.filename]#local.conf# файлд дараах мөрийг нэмнэ:

[.programlisting]
....
         <match target="pattern" name="family">
             <test qual="any" name="family">
                 <string>Helvetica</string>
             </test>
             <edit name="family" mode="assign">
                 <string>sans-serif</string>
             </edit>
         </match>
....

[.filename]#local.conf# файлыг засварлаж дуусаад уг файлыг `</fontconfig>` таглаагаар дууссан эсэхийг шалгаарай. Ингээгүй бол уг файлын өөрчлөлтийг үл хэрэгсэж хэрэгжүүлдэггүй.

Эцэст нь хэрэглэгчид өөрсдийн гэсэн тохируулгаа хувийн сан дотор буй [.filename]#.fonts.conf# файл дотор хийж болдог. Ингэхийн тулд хэрэглэгч бүр [.filename]#~/.fonts.conf# файл үүсгэх хэрэгтэй. Энэ файл нь мөн XML хэлбэртэй байх ёстой.

Сүүлчийн үг: LCD дэлгэцтэй үед sub-pixel харуулалт хэрэглэх хүсэлт гарч болзошгүй. Энэ нь үндсэндээ (хэвтээ чиглэлд нь салгасан) улаан, ногоон болон цэнхэр өнгийн бүрдлүүдийг тусад нь салгаж харуулснаар хэвтээ чиглэлийн дүрслэх чадварыг сайжруулдаг. Үр дүн нь мэдээж маш сайн харуулалт үүсдэг. Ингэж зөвшөөрүүлэхийн тулд [.filename]#local.conf# файлд дараах мөрийг нэмнэ:

[.programlisting]
....

         <match target="font">
             <test qual="all" name="rgba">
                 <const>unknown</const>
             </test>
             <edit name="rgba" mode="assign">
                 <const>rgb</const>
             </edit>
         </match>
....

[NOTE]
====
Дэлгэцийн төрлөөс хамаарч `rgb` нь `bgr`, `vrgb` эсвэл `vbgr` гэж өөрчлөгдөж болзошгүй тул янз янзаар нь туршиж аль нь илүү тохирч байгааг олоорой.
====

[[x-xdm]]
== X Display Manager буюу харуулалт зохицуулагч

=== Ерөнхий ойлголт

X Display Manager (XDM) буюу Х харуулалт зохицуулагч гэдэг нь Х цонхот системд сонгогдон хэрэглэгдэж болох бөгөөд нэвтрэх үйлдэлд хэрэглэгддэг. Энэ нь бага хүчин чадалтай "X терминал", ширээний програмын орчин, мөн том сүлжээнд буй харуулалтын сервер зэрэг төрөл бүрийн нөхцөлд хэрэглэгддэг. Нэгэнт Х цонхот систем нь сүлжээ болон бүртгэлийн бие даасан гүйцэтгэлтэй болохоор Х үйлчлүүлэгч болон серверүүдийн хоорондох холбоог тохируулах маш олон арга бий. XDM нь холбогдож болох серверүүдийг график горимд дүрсэлж харуулдаг бөгөөд нэр болон нууц үг оруулах нөхцөл биелүүлж өгдөг.

Та XDM-г хэрэглэгчид зориулж man:getty[8] хэрэгслийн биелүүлдэг гүйцэтгэлтэй (crossref:serialcomms[term-config,Тохиргоо] хэсгээс дэлгэрэнгүйг харна уу) ижил гэж бодох хэрэгтэй. Тэгэхээр энэ нь систем рүү нэвтрэх үйлдлийг гүйцэтгэдэг бөгөөд нэвтрүүлэхдээ тухайн хэрэглэгчийн орчинг ажиллуулж (голдуу Х цонхны зохицуулагч байдаг ) хэрэглэгчийг гарах хүртэл нь хүлээж байдаг. Мөн өөр хэрэглэгч холбогдох үед холбогдох дэлгэцийг харуулан нэвтрэх үйлдэл хийлгэх боломжийг XDM биелүүлж байдаг.

=== XDM-г хэрэглэх нь

XDM-ийг ашиглаж эхлэхийн тулд package:x11/xdm[] портыг суулгана (энэ нь анхдагчаар Xorg-ийн сүүлийн үеийн хувилбаруудтай цуг суудаггүй). Дараа нь XDM далд чөтгөрийг [.filename]#/usr/local/bin/xdm# гэсэн байрлалаас олж болно. Энэ нь `root` эрхтэй хүнээр ямар ч үед эхлүүлэгдэж болдог бөгөөд эхлэнгүүтээ уг машинд буй Х цонхыг зохицуулах үүргийг гүйцэтгэж эхэлдэг. Хэрэв XDM-г машиныг шинээр ачаалагдах болгонд эхлүүлэх хүсэлтэй байгаа бол үүнийг биелүүлэх хамгийн эвтэйхэн зам бол [.filename]#/etc/ttys# файлд оруулга хийж өгөх билээ. Энэ файлын зохион байгуулалтын талаар crossref:serialcomms[term-etcttys,/etc/ttys уруу оруулгууд нэмэх нь] хэсэгт хараарай. [.filename]#/etc/ttys# файл дотор XDM-г виртуал терминал дээр далд чөтгөр хэлбэрээр ажиллуулна гэсэн дараах мөр байдаг:

[source,bash]
....
ttyv8   "/usr/local/bin/xdm -nodaemon"  xterm   off secure
....

Анхдагч тохируулгаараа энэ нь хоригдсон байдаг бөгөөд идэвхжүүлэхийг хүсвэл тав дахь үг болох `off` гэснийг `on` болгож өөрчлөөд man:init[8]-г crossref:serialcomms[term-hup,/etc/ttys-г init тушаалаар дахин уншуулах] дээр заасны дагуу шинээр ачаалах хэрэгтэй. Эхний талбар нь уг програмын зохицуулах терминалын нэр бөгөөд `ttyv8` гэсэн буй. Энэ нь XDM есдүгээр виртуал терминал дээр ажиллаж эхэлнэ гэсэн үг юм.

=== XDM-г тохируулах нь

XDM-г тохируулах файл [.filename]#/usr/local/lib/X11/xdm# санд байдаг. Энэ сан дотор XDM-н харагдцыг өөрчилж тохируулах хэд хэдэн файл бий. Голдуу дараах төрлийн файлууд байдаг:

[.informaltable]
[cols="1,1", frame="none", options="header"]
|===
| Файл
| Тодорхойлолт

|[.filename]#Xaccess#
|Хэрэглэгчийн эрхийн дүрэм.

|[.filename]#Xresources#
|X-н resource буюу эх сурвалж анхдагч утгууд.

|[.filename]#Xservers#
|Дотоод юм уу алсад буй холбогдож болох дэлгэц зохицуулагчдын жагсаалт.

|[.filename]#Xsession#
|Нэвтрэх үед тухайн орчинд үйлдэгддэг анхдагч скрипт.

|[.filename]#Xsetup_#*
|Нэвтрэх үйлдлээс өмнө нь програмуудыг ачаалагч скрипт.

|[.filename]#xdm-config#
|Уг машин дээр ажиллаж байгаа бүх харуулагчдыг ерөнхийд нь тохируулагч файл.

|[.filename]#xdm-errors#
|Сервер програмаас үүсгэгдсэн алдаанууд.

|[.filename]#xdm-pid#
|Одоогийн ажиллаж байгаа XDM-н процесс ID дугаар.
|===

Мөн энэ сан дотор XDM-г ажиллаж байх үед уг график орчныг тохируулдаг скрипт болон програмууд байдаг. Саяны жагсаасан файлуудын зориулалтыг ерөнхийд нь дор дурдав. Уг файлуудыг хэрэглэх дэлгэрэнгүй заавар нь man:xdm[1] хуудсанд тодорхойлогдсон байгаа.

Анхныхаа тохируулгаар бол энгийн нэгэн нэвтрэх дөрвөлжин цонх дотор уг машины нэр харуулагдсан байдаг ба том үсгээр "Login:" гэж бичээд доод хэсэгт нь "Password:" гэж нууц үг оруулах талбар байдаг. Энэ цонхноос эхлэн XDM-н харагдцыг өөрчилж эхэлж болох юм.

==== Xaccess

XDM-ээр хянагддаг харуулагчтай холбогдох протоколыг X Display Manager Connection Protocol (XDMCP) гэж нэрлэдэг. Энэ файл нь алсад буй компьютераас XDMCP холболт ямар дүрмээр хийгдэхийг заан хянаж байдаг. Энэ нь алсаас холбогдох холболтыг хүлээж авах тохиргоог [.filename]#xdm-config# файлд хийх хүртэл хориотой байдаг. Анхдагч тохиргоогоороо бол ямар ч хэрэглэгчийн холболтыг зөвшөөрөхгүй гэж заагдсан байдаг.

==== Xresources

Энэ нь харуулагчдыг сонгох нэвтрэх дэлгэцийн харуулалтыг өөрчилж болох анхдагч утгууд хадгалсан файл юм. Энэ файлаар нэвтрэх програмыг өөрчилж болно. Файлын зохион байгуулалт нь Х11-н бичиг баримтад заасантай ижил загвартай байдаг.

==== Xservers

Энэ нь сонгогдож болох харуулагчдын жагсаалт хадгалсан файл.

==== Xsession

Энэ файл нь XDM-д зориулсан хэрэглээг холбогдсоны дараа гүйцэтгэгдэх скрипт файл юм. Ихэнхдээ хэрэглэгчид өөрсдийнхөө эхлэл санд буй [.filename]#~/.xsession# файл дотор өөрсдийн гэсэн ажиллуулах бичлэгээ бичиж энэ файлын гүйцэтгэлийг дардаг.

==== Xsetup_*

Энэ файл нь нэвтрэх цонх болон харуулагчдыг сонгогдохоос өмнө автоматаар ажилладаг. Харуулагч болгонд зориулсан скрипт нь [.filename]#Xsetup_# нэрэн дээр харуулагчийн дугаар залгагдсан нэртэй байдаг ( жишээ нь дотоод харуулагч [.filename]#Xsetup_0# гэсэн нэртэй байдаг). Энэ файлд голдуу `xconsole` зэргийн нэг юм уу хоёр програмыг ар талд ажиллуулж байхаар бичсэн байдаг.

==== xdm-config

Энэ файлд харуулагч болгонд хэрэглэгдэх програмын анхдагч утга хэлбэрийн тохируулгууд байдаг.

==== xdm-errors

Энэ файл дотор XDM-н ажиллуулахыг оролдсон серверээс гарсан алдаануудыг бичсэн байдаг. Хэрэв XDM-н эхлүүлсэн дэлгэц ямар нэгэн замаар гацах юм бол юунаас болсон эсэхийг нь мэдэх хамгийн зөв газар бол энэ билээ. Эдгээр алдаанууд мөн хэрэглэгчийн тухайн орчноос хамаарч [.filename]#~/.xsession-errors# файл дотор бас бичигддэг.

=== Сүлжээний харуулагч серверийг ажиллуулах

Бусад хэрэглэгчдийг харуулагч сервер рүү холбохын тулд та хандах эрхийн дүрмийг засварлаж холболт хүлээж авагчийг зөвшөөрүүлэх хэрэгтэй. Анхдагч утгаараа үүнийг хорьсон байдаг. XDM-г холболт хүлээж авдаг болгохын тулд эхлээд [.filename]#xdm-config# файл доторх мөрийг тайлбар мөр болгож хүчингүй болгох хэрэгтэй:

[source,bash]
....
! SECURITY: do not listen for XDMCP or Chooser requests
! Comment out this line if you want to manage X terminals with xdm
DisplayManager.requestPort:     0
....

тэгээд XDM-ийг шинээр эхлүүлэх хэрэгтэй. Ийм файлд "#" тэмдгээр тайлбар мэт болгож хасдаггүй харин "!" тэмдэг хэрэглэх хэрэгтэй гэдгийг санах хэрэгтэй. [.filename]##Xaccess## файл доторхоос жишээнүүдийг харах хэрэгтэй бөгөөд man:xdm[1] гарын авлагаас дэлгэрэнгүй унших нь зүйтэй.

=== XDM-н орлуулгууд

XDM-г орлох хэд хэдэн програм бий. Тэдний нэг болох KDM-г ( KDE-тэй цуг ирдэг) энэ бүлэгт тайлбарлах болно. Харуулалт зохицуулагч KDM нь маш олон төрлийн харуулах загварыг санал болгодог бөгөөд нэвтрэх үед цонх зохицуулагчдыг давхар сонгож болох боломж өгдөг.

[[x11-wm]]
== Дэлгэцийн орчин

Энэ хэсэгт FreeBSD-н Х-д зориулсан төрөл бүрийн дэлгэцийн орчнуудыг тайлбарлах болно. "Дэлгэцийн орчин" гэдэгт энгийн цонх зохицуулагчаас авахуулаад төрөл бүрийн ширээний програмыг агуулсан цогц програмууд болох KDE болон GNOME зэрэг ордог. 

[[x11-wm-gnome]]
=== GNOME

[[x11-wm-gnome-about]]
==== GNOME-н тухай

GNOME гэдэг нь компьютераа тохируулахад тань амарчилж хөнгөвчилсөн дэлгэцийн програмын орчин юм. GNOME дотор самбар (програм эхлүүлэх болон төлөв байдлыг нь харуулах зорилготой), дэлгэцийн орон зай (програмууд байрлахад зориулагдсан ), дэлгэцийн хэрэгслүүд болон програмуудын цуглуулга, мөн програмууд өөр хоорондоо зохицож ажиллахад зориулагдсан хэд хэдэн журам агуулагдаж байдаг. Өөр үйлдлийн систем юм уу эсвэл өөр орчинд ажиллаж сурсан хүмүүст GNOME-н санал болгож байгаа хүчтэй бөгөөд аятайхан график орчин нь дасахад амар санагддаг. FreeBSD дээрх GNOME-н талаар дэлгэрэнгүй мэдээллийг http://www.FreeBSD.org/gnome[FreeBSD-н GNOME Төслийн] вэб хуудаснаас харах хэрэгтэй. Уг вэб хуудсанд GNOME-г хэрхэн суулгаж тохируулан мөн зохицуулах талаар нэлээн өргөн хэмжээний асуулт хариултууд байдаг. 

[[x11-wm-gnome-install]]
==== GNOME-г суулгах

Энэ програм хангамжийг портын цуглуулга юм уу эсвэл багцаас хялбар аргаар суулгаж болно:

Сүлжээнээс GNOME-г багц хэлбэрээр нь суулгахыг хүсвэл дараах тушаалыг өгөхөд хангалттай:

[source,bash]
....
# pkg_add -r gnome2
....

GNOME-г порт дотор эх бичлэгээс нь хөрвүүлж суулгахыг хүсвэл дараах тушаалаар суулгана:

[source,bash]
....
# cd /usr/ports/x11/gnome2
# make install clean
....

Зөв ажиллагааг хангахын тулд GNOME нь [.filename]#/proc# файлын системийг холбосон байхыг шаарддаг. Эхлүүлэх явцад man:procfs[5]-г автоматаар холбохын тулд доорхи

[.programlisting]
....
proc           /proc       procfs  rw  0   0
....

мөрийг [.filename]#/etc/fstab# файлд нэмж өгөх хэрэгтэй.

GNOME суугдсаны дараа Х серверт анхдагч цонх зохицуулагчийн оронд GNOME эхлэхийг зааж өгөх хэрэг гардаг. 

GNOME-г эхлүүлэх амархан арга бол GNOME-н харуулалтыг зохицуулагч буюу GDM-г хэрэглэх билээ. GDM нь GNOME-той хамт суугддаг боловч анхдагч тохиргоогоороо бол идэвхжээгүй байдаг. Дараах мөрийг [.filename]#/etc/rc.conf# файлд нэмж идэвхжүүлж болно:

[.programlisting]
....
gdm_enable="YES"
....

Дахин ачаалсны дараа GNOME автоматаар эхэлдэг.

GNOME-ийн бүх үйлчилгээг ихэвчлэн GDM-тэй цуг эхлүүлэх шаардлага байдаг. Ингэхийн тулд дараах мөрийг [.filename]#/etc/rc.conf# файлд нэмнэ:

[.programlisting]
....
gnome_enable="YES"
....

GNOME-г мөн тушаал бичдэг мөрнөөс [.filename]#.xinitrc# файлд зөв тохируулга хийснээр ажиллуулж бас болно. Хэрэв [.filename]#.xinitrc# файл өмнө нь байж байвал уг файлд байгаа цонх зохицуулагч эхлэх мөрийг арилгаад оронд нь /usr/local/bin/gnome-session гэж оруулах хэрэгтэй. Хэрэв нэг их онц чухал мөр уг тохиргооны файл дотор байхгүй гэж та мэдэж байгаа бол дараах тушаалыг өгч бас болно:

[source,bash]
....
% echo "/usr/local/bin/gnome-session" > ~/.xinitrc
....

Тэгээд `startx` гэсэн тушаалыг бичихэд GNOME дэлгэцийн орчин эхлэх болно.

[NOTE]
====
Хэрэв XDM юм уу ямар нэгэн өөр дэлгэцийн орчин хэрэглэгдэж байсан бол [.filename]#.xsession# гэсэн файл үүсгээд уг файл дотор өмнө ярьж байсан оруулгыг оруулах хэрэгтэй. Ингэхийн тулд уг файлыг засварлагчаар нээгээд дотор байгаа мөрийг /usr/local/bin/gnome-session мөрөөр дарж бичихэд болно: 
====

[source,bash]
....
% echo "#!/bin/sh" > ~/.xsession
% echo "/usr/local/bin/gnome-session" >> ~/.xsession
% chmod +x ~/.xsession
....

Өөр нэг сонголт бол цонх зохицуулагчид өөрчлөлт хийж нэвтрэлт хийгдэх үед дэлгэцийн орчныг сонгож болдгоор тохируулж болдог. <<x11-wm-kde-details,KDE-н дэлгэрэнгүй>> хэсэгт KDE-н дэлгэцийн орчны зохицуулагч KDM дээр хэрхэн үүнийг хийдэг талаар тайлбарласан байгаа.

[[x11-wm-kde]]
=== KDE

[[x11-wm-kde-about]]
==== KDE-н тухай

KDE бол хэрэглэхэд тун амар орчин үеийн дэлгэцийн орчин юм. Хэрэглэгчид хэрэгтэй KDE-н санал болгодог зарим зүйлс бол:

* Орчин үеийн сайхан дэлгэцийн орчин
* Сүлжээгээр ажиллуулахад ямар ч хүндрэлгүй
* KDE дэлгэцийн орчин болон түүний програмуудад зориулж өөртөө агуулсан тусламжийн системтэй
* KDE-н бүх програмууддаа тохирсон загвар маягтай
* Стандартчлагдсан цэс болон багажит самбар, гарын товчлолууд, өнгөний хүснэгт гэх мэтчилэн.
* Internationalization буюу олон хэлийн дэмжлэг: KDE нь 55 гаран гадаад хэл дээр боломжтой
* Бүх дэлгэцийн орчны тохируулгыг төвлөрүүлсэн цонхот загвартай тохиргоо хийх боломж
* Маш олон KDE програмууд

KDE нь Konqueror нэртэй UNIX(R) ертөнцөд өрсөлдөөн ихтэй хөтлөгчүүдийн нэг болох вэб хөтлөгчтэй хамт ирдэг. KDE-н талаар дэлгэрэнгүй мэдээллийг http://www.kde.org/[KDE вэб хуудаснаас] харж болно. KDE-тэй холбоотой эх үүсвэрүүд болон FreeBSD-тэй холбоотой тусгай мэдээллийг http://freebsd.kde.org/[KDE/FreeBSD-ийн санаачлага] вэб хуудаснаас лавлах хэрэгтэй.

FreeBSD дээр KDE-н хоёр хувилбар байдаг. Хувилбар 3 нь удаан хугацааны туршид байгаа бөгөөд портын цуглуулгад байдаг боловч цааш хөгжүүлэлт хийгдэхгүй бөгөөд ажиллахгүй байж болох асуудалтай. Хувилбар 4 нь шинэчлэгдсэн бөгөөд KDE хэрэглэгчийн хувьд анхдагч сонголт юм. Эдгээр нь бүр цуг зэрэгцэн суулгагдаж болдог.

[[x11-wm-kde-install]]
==== KDE-г суулгах нь

GNOME болон бусад дэлгэцийн орчны програмуудыг суулгадаг шиг энэхүү програм хангамжийг портын цуглуулга юм уу эсвэл багцаас хялбар аргаар суулгаж болно:

Сүлжээгээр KDE 3-г багц хэлбэрээр суулгана гэвэл дараах тушаалыг өгөхөд л болно:

[source,bash]
....
# pkg_add -r kde
....

Сүлжээгээр KDE 4-г багц хэлбэрээр суулгана гэвэл дараах тушаалыг өгөхөд л болно:

[source,bash]
....
# pkg_add -r kde4
....

man:pkg_add[1] автоматаар уг програмын сүүлийн хувилбарыг нь нөхөж суулгах болно.

KDE 3-г эх бичлэгээс нь хөрвүүлж суулгана гэвэл портын цуглуулгыг ашиглаарай:

[source,bash]
....
# cd /usr/ports/x11/kde3
# make install clean
....

KDE 4-г эх бичлэгээс нь хөрвүүлж суулгана гэвэл портын цуглуулгыг ашиглаарай:

[source,bash]
....
# cd /usr/ports/x11/kde4
# make install clean
....

KDE суугдсаны дараа Х серверт анхдагч цонх зохицуулагчийн оронд KDE-г ажиллуулна гэж зааж өгөх хэрэгтэй. Үүний тулд [.filename]#.xinitrc# файлыг дараах аргаар засварлаж мөн болно:

KDE 3-н хувьд:

[source,bash]
....
% echo "exec startkde" > ~/.xinitrc
....

KDE 4-н хувьд:

[source,bash]
....
% echo "exec /usr/local/kde4/bin/startkde" > ~/.xinitrc
....

Одоо ингээд `startx` тушаалыг ажиллуулбал KDE дэлгэцийн орчин эхлэх болно.

Хэрэв урьд нь XDM зэрэг өөр дэлгэцийн орчин хэрэглэгдэж байсан бол тохируулга арай өөр байх болно. Тэр үед [.filename]#.xsession# файлыг засварлах хэрэгтэй. Энэ бүлгийн сүүл хэсэгт KDM-н талаар зааварласан байгаа.

[[x11-wm-kde-details]]
=== KDE-н талаар дэлгэрэнгүй

Одоо KDE суугдсан байгаа болохоор ихэнх зүйлсийг та тусламжийн системийг нь ашиглан нээж олох юм уу эсвэл зүгээр л цэснүүд дээр дарж туршиж болох юм. Windows(R) эсвэл Mac(R) төрлийн хэрэглэгчдэд бол бараг гэртээ байгаа юм шиг л сэтгэгдэл төрөх байх.

KDE-н хамгийн сайн заавар бичиг баримтууд интернэт дээр бий. KDE өөртэйгөө хамт Konqueror хөтлөгч мөн маш олон програм болон өргөжүүлсэн бичиг баримтуудтай ирдэг. Бүлгийн үлдсэн хэсэгт санамсаргүй нээж олсон ч гэсэн сурахад хүндрэлтэй техникийн зарим асуудлуудыг зааварчлах болно.

[[x11-wm-kde-kdm]]
==== KDE Display Manager буюу KDE-н дэлгэцийн зохицуулагч

Олон хэрэглэгчтэй системийн администратор хэрэглэгчдэд график нэвтрэх горим хэрэглэхийг хүсдэг. Өмнө тайлбарласны дагуу <<x-xdm,XDM>> ийм зорилгоор бас хэрэглэгдэж болно. Гэхдээ KDE бас үүнтэй ижил үүрэг гүйцэтгэж чадах KDM нэртэй харагдац сайтай эвтэйхэн нэвтрэх хэсгийг санал болгодог. Мөн хэрэглэгч бүр уг зохицуулагчийн цэснээс ямар дэлгэцийн орчинд холбогдохоо (KDE, GNOME, эсвэл бусад өөр) нэвтрэх үедээ сонгож болдог.

KDM-г идэвхжүүлэхийн тулд KDE-ийн хувилбараас хамааран өөр өөр файлыг засварлах хэрэгтэй болдог.

KDE 3-н хувьд [.filename]#/etc/ttys# файлд буй `ttyv8` гэсэн оруулгатай хэсгийг дараах маягаар өөрчлөх ёстой:

[.programlisting]
....
ttyv8 "/usr/local/bin/kdm -nodaemon" xterm on secure
....

KDE 4-н хувьд man:procfs[5]-г холбож [.filename]#/etc/rc.conf# файлд дараах мөрийг нэмэх ёстой:

[.programlisting]
....
kdm4_enable="YES"
....

[[x11-wm-xfce]]
=== Xfce

[[x11-wm-xfce-about]]
==== Xfce-н тухай

Xfce нь GNOME дээр хэрэглэгддэг GTK+ хэрэгсэл дээр үндэслэгдсэн дэлгэцийн орчин бөгөөд хэрэглэхэд маш хөнгөн амархан тохируулгатай билээ. Өнгөц харахад UNIX(R) системүүд дээр байдаг үнэтэй зарагддаг CDE дэлгэцийн орчинтой төсөөтэй. Xfce-н зарим шинж чанарыг дурдвал:

* Дэлгэцийн орчинд ажиллахад тун амар хялбаршуулсан
* Хулганы чирж тавих үйлдэл зэрэгт бүрэн тохируулагдсан 
* Цэс болон програм ачаалах үндсэн самбар нь CDE-тэй ижил
* Цонх зохицуулагч, файл зохицуулагч, дууны оролт гаралтыг зохицуулагч, GNOME-н дэмжлэгтэй програмуудыг ажиллуулах тохиромж зэрэг олон зүйлсийг багтаасан
* Орчноо өөрчилж болдог (GTK+ дэмжлэгтэй учраас)
* Түргэн, хөнгөн үр бүтээлтэй болохоор санах ойн хязгаарлалтай удаан машинуудад тун тохиромжтой.

Xfce-н дэлгэрэнгүй мэдээллийг http://www.xfce.org/[Xfce вэб хуудаснаас] хараарай.

[[x11-wm-xfce-install]]
==== Xfce-г суулгах нь

Xfce-н багц хувилбар (үүнийг бичиж байх үед) байдаг. Суулгахын тулд ердөө л:

[source,bash]
....
# pkg_add -r xfce4
....

Мөн портын цуглуулга дотроос эх бичлэгээс нь хөрвүүлж суулгаж болно:

[source,bash]
....
# cd /usr/ports/x11-wm/xfce4
# make install clean
....

Одоо Х серверт Х орчныг эхлүүлэх үед Xfce-г ажиллуул гэж зааж өгөхийн тулд:

[source,bash]
....
% echo "/usr/local/bin/startxfce4" > ~/.xinitrc
....

Дараагийн удаа Х эхлэх үед Xfce нь дэлгэцийн орчин болсон байна. Мөн өмнөх орчнуудтай ижил, хэрэв XDM зэрэг өөр орчин урьд нь хэрэглэгдэж байсан бол [.filename]#.xsession# файлыг үүсгээд <<x11-wm-gnome,GNOME>> хэсэгт тайлбарласан шиг гэхдээ [.filename]#/usr/local/bin/startxfce4# гэсэн утгыг оруулах юм уу эсвэл нэвтрэх үед сонгогдохоор болгож тохируулахыг хүсвэл <<x11-wm-kde-kdm,kdm>> хэсэгт тайлбарласны дагуу хийх хэрэгтэй.
