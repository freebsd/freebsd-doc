---
title: 2. Fejezet - A FreeBSD telepítése
part: I. Rész - Bevezetés
prev: books/handbook/introduction
next: books/handbook/basics
showBookMenu: true
weight: 4
path: "/books/handbook/install/"
---

[[install]]
= A FreeBSD telepítése
:doctype: book
:toc: macro
:toclevels: 1
:icons: font
:sectnums:
:sectnumlevels: 6
:sectnumoffset: 2
:partnums:
:source-highlighter: rouge
:experimental:
:images-path: books/handbook/install/

ifdef::env-beastie[]
ifdef::backend-html5[]
:imagesdir: ../../../../images/{images-path}
endif::[]
ifndef::book[]
include::shared/authors.adoc[]
include::shared/mirrors.adoc[]
include::shared/releases.adoc[]
include::shared/attributes/attributes-{{% lang %}}.adoc[]
include::shared/{{% lang %}}/teams.adoc[]
include::shared/{{% lang %}}/mailing-lists.adoc[]
include::shared/{{% lang %}}/urls.adoc[]
toc::[]
endif::[]
ifdef::backend-pdf,backend-epub3[]
include::../../../../../shared/asciidoctor.adoc[]
endif::[]
endif::[]

ifndef::env-beastie[]
toc::[]
include::../../../../../shared/asciidoctor.adoc[]
endif::[]

[[install-synopsis]]
== Áttekintés

A FreeBSD telepítéséhez egy könnyen használható szöveges telepítõprogram, a sysinstall használható. Ez a FreeBSD alapértelmezett telepítõprogramja, habár ezt a különféle gyártók kedvük szerint lecserélhetik. Ebben a fejezetben bemutatjuk a FreeBSD sysinstall segítségével történõ telepítését.

A fejezet elolvasása során megismerjük:

* hogyan készítsünk telepítõlemezeket a FreeBSD-hez;
* a FreeBSD miként hivatkozza és osztja fel a merevlemezeinket;
* hogyan indítsuk el a sysinstall programot;
* milyen kérdéseket tesz fel nekünk a sysinstall, mire gondol, hogyan is kell azokat megválaszolni.

A fejezet elolvasásához ajánlott:

* a telepítendõ FreeBSD verzióhoz tartozó támogatott hardvereket felsoroló lista átolvasása és benne a saját hardvereszközeink megkeresése.

[NOTE]
====
Általánosan elmondható, hogy a most következõ telepítési utasítások az i386(TM) ("PC kompatibilis") architektúrájú számítógépekre vonatkoznak. Ahol erre szükség van, ott más platformokra vonatkozó utasítások is szerepelhetnek. Habár ezt a leírás igyekszünk a lehetõ legjobban naprakészen tartani, elképzelhetõ, hogy felfedezhetünk kisebb eltéréseket a telepítõben és az itt leírtak közt. Ezért ezt a fejezetet inkább egy általános útmutatónak javasoljuk, nem pedig egy szó szerint értelmezendõ kézikönyvként.
====

[[install-hardware]]
== Hardverkövetelmények

[[install-hardware-minimal]]
=== Minimális konfiguráció

A FreeBSD telepítéséhez szükséges minimális konfiguráció FreeBSD verziónként és architektúránként eltérõ.

A minimális konfigurációt a FreeBSD honlapján a http://www.FreeBSD.org/releases/[kiadásokról szóló oldalon], az "Installation Notes" részben találhatjuk meg. Ezt a következõ szakaszokban foglaljuk össze. A FreeBSD telepítésének módszerétõl függõen szükségünk lehet egy hajlékonylemezes (floppy) vagy CD-ROM meghajtóra, esetleg egy hálózati kártyára. Ezt a <<install-boot-media>>ban tárgyaljuk.

==== FreeBSD/i386 és FreeBSD/pc98

A FreeBSD/i386 és FreeBSD/pc98 egyaránt egy 486 vagy jobb processzort és legalább 24 MB memóriát igényel. A legkisebb telepítéshez legalább 150 MB szabad lemezterület szükséges.

[NOTE]
====
Régebbi konfigurációk esetén nem egy gyorsabb processzor, hanem inkább több memória beszerzése, illetve több lemezterület felszabadítása a fontosabb.
====

==== FreeBSD/alpha

[NOTE]
====
Az Alpha támogatás a FreeBSD 7.0 beindulásával eltávolításra került. A FreeBSD 6._X_ sorozat az utolsó, amely valamilyen támogatást ajánl ehhez az architektúrához. Ezzel kapcsolatban részletesebben a http://www.FreeBSD.org/releases/[kiadásokkal] kapcsolatos információkat tartalmazó oldalon olvashatunk a FreeBSD honlapján.
====

==== FreeBSD/amd64

Két típusú processzor képes futtatni a FreeBSD/amd64 verzióját. Az elsõ ezek közül az AMD64 processzorok, beleértve az AMD Athlon(TM)64, AMD Athlon(TM)64-FX, AMD Opteron(TM) vagy újabb processzorokat.

A FreeBSD/amd64 verzióját kihasználni képes processzorok másik csoportja az Intel(R) EM64T architektúrájára épülõ processzorok. Ilyen processzor például az Intel(R) Core(TM) 2 Duo, Quad és Extreme processzorcsaládok, valamint az Intel(R) Xeon(TM) 3000, 5000 és 7000 sorozatszámú processzorai.

Ha nVidia nForce3 Pro-150 alapú géppel rendelkezünk, ki _kell_ kapcsolnunk a BIOS-ban az IO APIC használatát. Ha nem találnánk ilyen beállítást, akkor helyette magát az ACPI-t kell kikapcsolnunk. A Pro-150 chipsetnek vannak bizonyos hibái, amelyekre eddig még nem sikerült megfelelõ megoldást találnunk.

==== FreeBSD/sparc64

A FreeBSD/sparc64 telepítéséhez egy támogatott platformra van szükségünk (lásd: <<install-hardware-supported>>).

A FreeBSD/sparc64 telepítéséhez egy egész lemezre lesz szükségünk, mivel a rendszer jelenleg nem képes megosztani azt más operációs rendszerekkel.

[[install-hardware-supported]]
=== Támogatott hardverek

A FreeBSD minden kiadásához mellékelik a támogatott hardverek listáját "FreeBSD Hardware Notes" címmel. Ez a dokumentum többnyire a [.filename]#HARDWARE.TXT# nevû állomány, amelyet a rendszer CD-n vagy FTP-n keresztül elérhetõ változatának gyökerében vagy a sysinstall dokumentációkat tartalmazó menüjében találhatunk meg.

[[install-pre]]
== A telepítés elõtt elvégzendõ feladatok

[[install-inventory]]
=== Készítsünk leltárt a számítógépünkrõl

A FreeBSD telepítése elõtt érdemes összeszedni, pontosan mi minden is található a számítógépünkben. A FreeBSD telepítõrutinjai mutatni fogják a különbözõ komponensek (merevlemezek, hálózati kártyák, CD-meghajtók és a többi) modelljét és gyártóját. A FreeBSD ezenkívü megpróbálja kideríteni a megjelenõ eszközök pontos konfigurációját is, beleértve a használt IRQ és IO portok kiosztását. A PC-s hardverek különféle szeszélyei miatt azonban ez az iménti folyamat nem minden esetben megbízható, ezért elõfordulhat, hogy helyesbíteni kell a FreeBSD által megállapított értékeket.

Ha már van a gépünkön egy másik operációs rendszer, például Windows(R) vagy Linux(R), akkor mindenképpen hasznos lehet az általa felkínált eszközökkel lekérdezni a hardvereink beállításait. Ha nem lennénk biztosak benne, hogy az adott bõvítõkártyákat pontosan milyen beállításokkal is használjuk, nézzük meg ezeket magán a kártyán. A népszerû IRQ értékek általában a 3, 5 és 7, valamint az IO portok számát általában tizenhatos számrendszerben szerepeltetik, például 0x330.

Javasoljuk, hogy nyomtassuk ki vagy írjuk le ezeket a paramétereket a FreeBSD telepítése elõtt. Ehhez rendezzük ezeket egy táblázatban, valahogy így:

.Példa egy eszközleltárra
[cols="1,1,1,1", frame="none", options="header"]
|===
| Eszköz neve
| IRQ
| IO portok
| Megjegyzés

|Elsõ merevlemez
|-
|-
|Mérete 40 GB, gyártmánya Seagate, elsõdleges IDE master

|CD-ROM meghajtó
|-
|-
|Elsõdleges IDE slave

|Második merevlemez
|-
|-
|Mérete 20 GB, gyártmánya IBM, másodlagos IDE master

|Elsõ IDE vezérlõ
|14
|0x1f0
|

|Hálózati kártya
|-
|-
|Intel(R) 10/100

|Modem
|-
|-
|3Com(R) 56K-s faxmodem, COM1

|...
|===

Ahogy elkészítettük a számítógépünk alkatrészeit tartalmazó listát, vessük ezeket össze a telepítendõ FreeBSD kiadás által megkövetelt eszközökkel.

=== Mentsük le az adatainkat

Amennyiben a FreeBSD telepítéséhez használt számítógép számunkra értékes adatokat tárol, igyekezzünk lementeni ezeket, és a FreeBSD tényleges telepítése elõtt gyõzõdjünk is meg róla, hogy a mentés sikeres volt. A FreeBSD telepítõrutinjai természetesen megerõsítést fognak kérni bármilyen adat lemezre írása elõtt, azonban ha egyszer már elindítottuk a folyamatot, már semmit sem tudunk visszafordítani.

[[install-where]]
=== Döntsük el a FreeBSD telepítésének helyét

Ha a FreeBSD telepítéséhez az egész merevlemezünket fel akarjuk használni, akkor még nincs miért izgatnunk magunkat - nyugodtan átléphetjük ezt a szakaszt.

Amikor viszont a FreeBSD-t más operációs rendszerek mellé szeretnénk telepíteni, ismernünk kell, miként is helyezkednek el az adatok a lemezeken, és hogy ez miként is érint bennünket.

[[install-where-i386]]
==== A lemezek kiosztása a FreeBSD/i386 esetén

A PC-k által használt lemezek különálló darabokra tagolhatóak. Ezeket a darabokat __partíciók__nak nevezzük. Mivel azonban a FreeBSD maga is tárol partíciókat, ezért ez az elnevezés pillanatok alatt megtévesztõvé válhat, ezért ezeket a lemezdarabokat a FreeBSD lemezslice-oknak vagy egyszerûen csak slice-oknak hívja. Például a PC-s lemezpartíciókkal dolgozó, `fdisk` nevû FreeBSD-s segédprogram partíciók helyett is slice-okra hivatkozik. A PC lemezenként alapvetõen csak négy partíciót enged meg. Ezeket a partíciókat nevezik _elsõdleges partícióknak_. Ettõl a korlátozástól egy új típus, a _kiterjesztett partíció_ létrehozásával szabadultak meg, amivel így négynél több partíció is készíthetõ. Lemezenként egyetlen ilyen kiterjesztett partíció található, de ezen belül speciális, ún. _logikai partíciók_ hozhatóak létre.

Minden partíciónak van egy _partíció-azonosítója_, melyet a partíción található adatok típusának megállapítására használnak. A FreeBSD partícióinak azonosítója a `165`.

Általánosságban véve minden operációs rendszer így azonosítja a partíciókat. Például a DOS és annak leszármazottai, mint például a Windows(R), minden elsõdleges és logikai partícióhoz egy [.filename]#C:#-tõl induló _meghajtó-betûjelet_ társít.

A FreeBSD-t egy elsõdleges partícióra kell telepíteni. A FreeBSD az összes adatát, beleértve minden általunk létrehozott állományt is, ezen az egyetlen partíción fogja elhelyezni. Ha viszont több lemezünk van, többen is, vagy akár mindegyiken létrehozhatunk FreeBSD-s partíciókat. A FreeBSD telepítésekor azonban legalább egy ilyen partíciónak használhatónak kell lennie. Ez lehet elõre megtisztított üres partíciói is, vagy akár egy olyan partíció, amelyen már nem használt adatok vannak.

Ha már mindegyik partíciónk betelt, akkor a többi operációs rendszer által felkínált eszközök (például MS-DOS(R)-ban vagy Windows(R)-ban az `fdisk`) valamelyikével elõször fel kell közülük szabadítanunk egyet a FreeBSD számára.

Amennyiben akadna egy használható partíció, akkor használjuk azt. Ekkor azonban elõfordulhat, hogy ehhez elõször a meglévõk közül össze kell majd zsugorítanunk valamelyiket.

A FreeBSD legkisebb telepíthetõ változata nagyjából 100 MB lemezterületet igényel. Azonban ez egy _nagyon_ kicsi változat és szinte semmi helyet nem hagy a saját állományainknak. Sokkal valósághûbb, ha grafikus felület nélkül nagyjából 250 MB-ot mondunk, és legalább 350 MB-ot a grafikus felület használata esetén. Ha ezeken felül további szoftvereket is telepíteni kívánunk, még több helyre lesz szükségünk.

Amikor a FreeBSD számára akarunk helyet csinálni, vagy partíciókat akarunk átméretezni, használjuk például a PartitionMagic(R) nevû kereskedelmi szoftvert, vagy esetleg egy olyan szabad szoftvert, mint például a GParted. Ismereteink szerint a PartitionMagic(R) és a GParted is használható az NTFS partíciókkal. A GParted számos live linuxos disztribúción megtalálható, ilyen többek közt a http://www.sysresccd.org[SystemRescueCD].

Gondok lehetnek azonban a Microsoft(R) Vista által használt partíciókkal. Ezért nem árt, ha az átméretezésekor a kezünk ügyében van a Vista telepítõ CD-je. Természetesen, mint minden lemezkarbantási mûvelet esetén, ilyenkor is határozottan ajánlott biztonsági mentéseket készíteni.

[WARNING]
====

Az említett eszközök helytelen használata megsemmisítheti a lemezeinken tárolt adatokat, ezért a használatuk elõtt gondoskodjunk friss, mûködõképes biztonsági mentésekrõl.
====

.Meglevõ partíció használata a méret megváltoztatása nélkül
[example]
====
Tegyük fel, hogy a számítógépünkben egyetlen 4 GB méretû lemez van, amelyen megtalálható a Windows(R) valamelyik verziója, és ezt a lemezt korábban két, egyaránt 2 GB méretû meghajtóra osztottuk, a [.filename]#C:#-re és [.filename]#D:#-re. 1 GB adatunk van a [.filename]#C:# meghajtón és fél GB a [.filename]#D:#-n.

Mindez tehát azt jelenti, hogy a lemezünkön két partíció található, betûjelenként egy. Ha átmásoljuk a [.filename]#D:# meghajtón levõ adatainkat a [.filename]#C:# meghajtóra, akkor ezzel felszabadíthatjuk a FreeBSD számára a második partíciót.
====

.Meglevõ partíció zsugorítása
[example]
====
Tegyük fel, hogy a számítógépünkben egyetlen 4 GB méretû lemez van, amelyet teljes egészében a Windows(R) valamelyik példánya foglal el. A Windows(R) telepítése során ezért minden bizonnyal egyetlen nagy partíciót hoztunk létre, amely a [.filename]#C:# betûjelet kapta és a mérete 4 GB. Jelen pillanatban másfél GB helyet használunk a lemezen, és szeretnénk a FreeBSD számára 2 GB helyet felszabadítani.

A FreeBSD telepítéséhez a következõk valamelyikét kell tennünk:

. Mentsük le a Windows(R)-os adatainkat, telepítsük újra a Windows(R)-t úgy, hogy egy 2 GB méretû partíciót választunk neki a telepítése során.
. A partíció összezsugorítására használjuk az elõbb említett alkalmazásokat, például a PartitionMagic(R)-et.

====

=== Szedjük össze a hálózati beállításainkat

Amennyiben a FreeBSD telepítésének részeként hálózatra is szándékozunk csatlakozni (például egy FTP vagy NFS szerverrõl akarunk telepíteni), ismernünk kell a hálózatra vonatkozó beállításainkat is. A telepítõ rá fog kérdezni ezekre az információkra, amelyek megadása után a FreeBSD a telepítés befejezéséhez csatlakozni tud majd a hálózatra.

==== Csatlakozás Ethernet-hálózaton, kábel- vagy DSL-modemen keresztül

Ha egy Ethernet-hálózathoz, vagy magához az internethez csatlakozunk egy DSL- vagy kábelmodemen keresztül, akkor az alábbi adatokra lesz szükségünk:

. IP-cím
. Az alapértelmezett átjáró IP-címe
. A gépünk neve
. DNS (névfeloldó) szerverek IP-címei
. Hálózati maszk

Ha nem ismerjük ezeket, érdeklõdjünk a rendszergazdától vagy a szolgáltatónktól. Elképzelhetõ az is, hogy mindezen információkat _DHCP_ segítségével, automatikusan kapjuk meg. Ezt is mindenképpen jegyezzük fel.

==== Kapcsolódás modemmel

Ha az internet-szolgáltatónkhoz hagyományos modemen keresztül csatlakozunk, akkor is tudjuk telepíteni a FreeBSD-t interneten keresztül, azonban ez nagyon sokáig tarthat.

Ehhez tudnunk kell:

. Az internet-szolgáltatónk behívószámát
. A soros (COM) port számát, amelyen keresztül a modem kapcsolódik a gépünkhöz
. Az internet-szolgáltatónktól kapott felhasználói nevet és jelszót

=== Olvassuk el FreeBSD hibajegyzékét

Habár a FreeBSD Projekt igyekszik a FreeBSD minden egyes kiadását a lehetõ legmegbízhatóbban felkészíteni, hibák óhatatlanul is maradnak bennük. Nagyon ritka esetekben ezek a hibák magára a telepítés folyamatára is kihathatnak. Amint ezeket a problémákat sikerül felderíteni és javítani, rögvest megjelennek a FreeBSD honlapján található http://www.FreeBSD.org/releases/{rel120-current}R/errata/[hibajegyzékben] (angolul). A telepítés elõtt ezért mindig ajánlott átolvasni ezt a dokumentumot, így megbizonyosodunk róla, hogy semmilyen utólag felmerült probléma nem akadályozza munkánkat.

Az összes kiadáshoz tartozó információ, beleértve az egyes kiadások hibajegyzékeit is, a link:https://www.FreeBSD.org/[FreeBSD honlapjáról] a link:https://www.FreeBSD.org/releases/[kiadásokra vonatkozó információkat] tartalmazó részen érhetõ el (angolul).

=== Szerezzük be a FreeBSD telepítéséhez szükséges állományokat

A FreeBSD telepítése az alábbi helyek bármelyikén megtalálható állományok felhasználásával történik:

.Lokálisan:
* CD vagy DVD
* Ugyanazon a számítógépen levõ MS-DOS(R) partíció
* Pendrive (USB-flash-tároló)
* SCSI- vagy QIC-szalag
* Floppylemezek

.Hálózaton keresztül:
* FTP oldalról, tûzfalon keresztül vagy szükség szerint HTTP proxy használatával
* NFS szerverrõl
* Párhuzamos vagy soros vonali kapcsolaton keresztül

Ha megvásároltuk a FreeBSD telepítõ CD-jét vagy DVD-jét, akkor már mindennel rendelkezünk a telepítéshez. Lépjünk bátran tovább a következõ szakaszra (<<install-boot-media>>)!

Ha eddig még nem szereztük volna be a FreeBSD telepítéséhez szükséges állományokat, ugorjunk a <<install-diff-media>>hoz, ahol megtudhatjuk, hogyan készítsük elõ a FreeBSD telepítését az imént felsorolt helyzetekben. A szakasz elolvasása után pedig jöjjünk vissza ide, majd folytassuk az olvasást a <<install-boot-media>>ban.

[[install-boot-media]]
=== Készítsünk egy rendszerindító lemezt

A FreeBSD telepítése úgy kezdõdik, hogy a számítógépünkkel a FreeBSD telepítõjét indítjuk el - ez viszont nem egy olyan program, amit más operációs rendszerben el tudunk indítani. A számítógépünk általában a merevlemezünkre telepített operációs rendszert indítja el, azonban beállítható úgy is, hogy az indulásához egy ún. "rendszerindító" (bootolható) floppy lemezt használjon. Napjaink számítógépei azonban a CD-meghajtóban levõ CD-krõl vagy USB lemezrõl is el tudnak indulni.

[TIP]
====

Ha CD-n vagy DVD-n megvan a FreeBSD telepítõje (akár megvettük, akár éppen magunk készítettük) és a számítógépünk tud CD-rõl vagy DVD-rõl rendszert indítani (a BIOS-ban van egy "Boot Order" vagy hozzá hasonló nevû beállítás), akkor kihagyhatjuk ezt a szakaszt. A FreeBSD CD- és DVD image-ek kiírásával egy rendszerindításra alkalmas lemezt kapunk, amirõl minden további elõkészület nélkül telepíthetünk.
====

Rendszerindításra alkalmas pendrive-ot az alábbi lépések mentén tudunk készíteni:

[.procedure]
====
. Az image állomány letöltése
+ 
A pendrive-okhoz készült image állományok a [.filename]#ISO-IMAGES/# könyvtárból tölthetõek le, `ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/architektúra/ISO-IMAGES/verzió/FreeBSD-{rel120-current}-RELEASE-architektúra-memstick.img` néven. Az _architektúra_ és _verzió_ helyére a telepítendõ architektúrát és verziószámot helyettesítsük be. Ennek megfelelõen tehát például a FreeBSD/i386 {rel120-current}-RELEASE változata a link:ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/ISO-IMAGES/{rel120-current}/FreeBSD-{rel120-current}-RELEASE-i386-memstick.img[ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/ISO-IMAGES/{rel120-current}/FreeBSD-{rel120-current}-RELEASE-i386-memstick.img] címrõl érhetõ el.
+ 
A pendrive image [.filename]#.img# kiterjesztéssel rendelkezik. A [.filename]#ISO-IMAGES/# könyvtár általában több különféle állományt tartalmaz, ezek közül kell választanunk a FreeBSD telepítendõ változatának, és sok esetben a telepítéshez rendelkezésre álló hardver típusának megfelelõen.
+
[IMPORTANT]
======
A következõ lépés megkezdése elõtt _készítsünk biztonsági mentést_ a pendrive tartalmáról, mivel minden rajta levõ adat _törlõdni_ fog.
======
+
. A pendrive elõkészítése
+
[WARNING]
======

Az itt található példában a rendszerindításhoz és így a mûvelet végrehajtásához a [.filename]#/dev/da0# nevû eszközt fogjuk használni. Ezt ne felejtsük el helyettesíteni a rendszerünkön erre a célra használt eszköz nevével, máskülönben kárt tehetünk az adatainkban.
======
+ 
A `kern.geom.debugflags` változó értékének megfelelõ beállításával engedélyezzük a céleszközön a Master Boot Record írását.
+
[source,shell]
....
#  sysctl kern.geom.debugflags=16
....
+
. Az image pendrive-ra írása
+ 
Az [.filename]#.img# kiterjesztésû állományt _nem_ egyszerûen a pendrive-ra kell másolni, ez a lemez teljes tartalmát magában foglalja. Ennek megfelelõen _nem_ egyszerûen állományokat kell másolnunk az egyik lemezrõl a másikra. Helyette a man:dd[1] parancs segítségével írjuk az image állomány tartalmát közvetlenül a lemezre.
+
[source,shell,subs="attributes"]
....
# dd if=FreeBSD-{rel120-current}-RELEASE-i386-memstick.img of=/dev/da0 bs=64k
....
====

Rendszerindításra alkalmas floppy lemezt az alábbi lépések mentén tudunk készíteni:

[.procedure]
====
. A rendszerindító lemezek image-einek beszerzése
+
[IMPORTANT]
======
A FreeBSD 8.0 kiadásától kezdõdõen megszûnik a floppy lemezek támogatása. Helyette telepítsünk pendrive-ról, amelyrõl fentebb olvashatunk, vagy egyszerûen használjunk CD-t vagy DVD-t.
======
+ 
A rendszerindító lemezek a telepítõeszköz [.filename]#floppies/# könyvtárában találhatóak, illetve letölthetõek az `ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/architektúra/változat-RELEASE/floppies/` helyrõl. Az _architektúra_ és _változat_ helyére természtesen írjuk be a telepíteni kívánt architektúrát és verziót. Így például a FreeBSD/i386 {rel120-current}-RELEASE rendszerindító lemezei az link:ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/{rel120-current}-RELEASE/floppies/[ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/{rel120-current}-RELEASE/floppies/] címrõl érhetõek el.
+ 
A floppyk image-ei [.filename]#.flp# kiterjesztésûek. A [.filename]#floppies/# könyvtár számos különféle image-et tartalmaz, ezek közül leginkább a telepítendõ FreeBSD változat, valamint emellett olykor konkrétan a hardver határozza meg a használandót. Az esetek túlnyomó részében négy floppyra lesz szükségünk: [.filename]#boot.flp#, [.filename]#kern1.flp#, [.filename]#kern2.flp# és [.filename]#kern3.flp#. A lemezek image-eit illetõ legfrissebb információkat ugyanazon a könyvtáron belül szereplõ [.filename]#README.TXT# állományban olvashatjuk (angolul).
+
[IMPORTANT]
======
Az FTP-hez használt programunkat az image-ek letöltése során ne felejtsük el _bináris (binary)_ átviteli módban használni. Egyes böngészõk hajlamosak ugyanis _szöveges (text vagy ASCII)_ átviteli módot használni, ami viszont csak abból vehetõ észre, hogy nem tudjuk a lemezekrõl elindítani a rendszert.
======
+
. A floppyk elõkészítése
+ 
Mindegyik letöltendõ image-hez elõ kell készíteni egy-egy hajlékonylemezt. Nagyon fontos, hogy ezek a lemezek teljesen hibátlanok legyenek. Errõl a legkönnyebben úgy gyõzõdhetünk meg, ha a lemezeket magunk formázzuk, és nem bízunk a különféle elõreformázott (preformatted) floppykban. A Windows(R)-ban található formázó segédprogram sem árul el nekünk semmit a lemezeken található hibás részekrõl, egyszerûen csak "rossznak" (bad) jelöli meg és figyelmen kívül hagyja ezeket. Határozottan ajánljuk, hogy amennyiben a telepítésnek ezt a módját választjuk, mindig használjunk teljesen új floppykat.
+
[IMPORTANT]
======
Ha megpróbáljuk telepíteni a FreeBSD-t, és a telepítõprogram összeomlik, lefagy vagy bármilyen furcsaságot mûvel, elsõként mindenképpen a floppykra gyanakodhatunk. Ilyenkor írjuk ki az image-eket új lemezekre és próbálkozzunk újra a telepítéssel.
======
+
. Az image állományok írása a floppykra
+ 
Az [.filename]#.flp# kiterjesztésû állományok _nem_ a lemezre másolható hagyományos állományok, hanem a lemezek teljes tartalmának képei, ezért ezeket egyszerûen _nem_ másolhatjuk egyik lemezrõl a másikra. Az image-ek közvetlen lemezreírásához ehelyett kifejezetten erre a célra alkalmas eszközöket kell használnunk.
+ 
Azok számára, akik a floppykat MS-DOS(R)/Windows(R) rendszerû számítógépeken kívánják elkészíteni, mellékeltünk egy `fdimage` nevû segédprogramot.
+ 
Ha a CD-meghajtónk betûjele például [.filename]#E:# és a telepítõ CD-n található image-eket szeretnénk kiírni vele, akkor ezt a parancsot kell kiadnunk:
+
[source,shell]
....
E:\> tools\fdimage floppies\boot.flp A:
....
+ 
Ezután ismételten adjuk ki az iménti parancsot minden egyes használni kívánt [.filename]#.flp# állományra, azonban elõtte mindig tegyünk be egy újabb floppyt, és a ráírt image-ek neveivel folyamatosan címkézzük fel a lemezeket. A megadott parancsot természetesen mindig írjuk át a konkrét [.filename]#.flp# állományok tényleges elérési útvonalainak megfelelõen. Ha nincs CD-nk, akkor az `fdimage` programot az FreeBSD FTP oldalán található link:ftp://ftp.FreeBSD.org/pub/FreeBSD/tools/[tools könyvtárból] is letölthetjük.
+ 
Amikor a lemezeket egy UNIX(R) rendszeren készítenénk el (például egy másik FreeBSD rendszeren), akkor a man:dd[1] parancs is használható az image állományok közvetlen lemezreírásához. FreeBSD alatt így néz ki a paraméterezése:
+
[source,shell]
....
# dd if=boot.flp of=/dev/fd0
....
+ 
FreeBSD-n a [.filename]#/dev/fd0# az elsõ hajlékonylemezes meghajtóra hivatkozik (tehát az [.filename]#A:# betûjelû meghajtóra). Ennek megfelelõen a [.filename]#/dev/fd1# jelenti a [.filename]#B:# meghajtót és így tovább. Más UNIX(R) változatok esetleg más neveket használhatnak a hajlékonylemezes meghajtók megnevezésére, ezért errõl érdemes ilyenkor tájékozódni az adott rendszerhez tartozó dokumentációban.
====

Most már készen állunk a FreeBSD telepítésére!

[[install-start]]
== A telepítés megkezdése

[IMPORTANT]
====
Alapértelmezés szerint a telepítés egészen addig nem fog semmit sem írni a lemezekre, amíg a következõ üzenet fel nem bukkan:

....
Last Chance: Are you SURE you want continue the installation?

If you're running this on a disk with data you wish to save then WE
STRONGLY ENCOURAGE YOU TO MAKE PROPER BACKUPS before proceeding!

We can take no responsibility for lost disk contents!
....

A szöveg fordítása:

....
Utolsó esély: BIZTOSAN folytatni kívánja a telepítést?

Ha olyan lemezre szeretne telepíteni, amelyen fontos adatok
találhatóak, HATÁROZOTTAN JAVASOLJUK, hogy a továbblépés elõtt
KÉSZÍTSEN RÓLUK MEGBÍZHATÓ BIZTONSÁGI MÁSOLATOT!

Nem vállalunk semmilyen felelõsséget az elveszett adatokért!
....

A telepítõbõl tehát a fenti, végsõ figyelmeztetés elõtt bármikor ki lehet lépni anélkül, hogy a merevlemezünkön levõ adatokat veszélyeztetnénk. Ha úgy érezzük, hogy valamit véletlenül rosszul állítottunk volna be a telepítés során, ekkor még minden komolyabb kár okozása nélkül kikapcsolhatjuk a számítógépünket.
====

[[install-starting]]
=== A rendszer indítása

[[install-starting-i386]]
==== Rendszerindítás i386(TM)-on

[.procedure]
====
. Kezdjünk egy kikapcsolt számítógéppel.
. Kapcsoljuk be a számítógépet. Az indulása során látnunk kell egy olyan opciót, amivel be tudunk lépni a rendszer beállításait tartalmazó menübe, avagy a BIOS-ba. Ezt többnyire a kbd:[F2], kbd:[F10], kbd:[Del] vagy a kbd:[Alt+S] lenyomásával érhetjük el. Ezek közül használjuk a képernyõn megjelenõ billentyûket. Elõfordulhat, hogy induláskor a számítógépünk semmilyen szöveget, csak egy képet mutat. Ilyenkor általában a kbd:[Esc] billentyû megnyomására eltûnik a kép és láthatóvá válnak a számunkra fontos üzenetek.
. Miután beléptünk a menübe, keressük meg azt a beállítást, amely a rendszerindításhoz használt eszközt határozza meg. Ennek a neve sokszor "Boot Order" (rendszerindítási sorrend) vagy valami hozzá hasonló. Itt mindenféle eszköz felsorolását találjuk: `Floppy`, `CDROM`, `First Hard Disk` (elsõ merevlemezes meghajtó) és így tovább.
+ 
Ha CD-rõl akarjuk a telepítést elindítani, akkor akkor a `CDROM` eszközt válasszuk. Ha bármilyen kétség merülne fel bennünk, keressük meg ezt a beállítást a számítógéphez és/vagy az alaplaphoz kapott kézikönyvben.
+ 
Igényeink szerint végezzük el a beállítást, majd mentsük el és lépjünk ki. Most indítsuk újra a számítógépet.
. Ha a <<install-boot-media>>ban leírtak szerint rendszerindító pendrive-ot készítettünk, akkor bekapcsolás elõtt csatlakoztassuk a számítógéphez.
+ 
Ha CD-rõl indítjuk a telepítést, akkor kapcsoljuk be a számítógépet és az elindulása után igyekezzünk minél hamarabb betenni a lemezt a meghajtóba.
+
[NOTE]
======
A FreeBSD 7.3 és az azt megelõzõ változatokban a <<install-boot-media>>ban leírtak szerint elõkészített floppy-ról is el tudjuk kezdeni a telepítést. Ezek egyike lesz az elsõ rendszerindító lemez, a [.filename]#boot.flp#. Helyezzük ezt a lemezt a meghajtóba, és indítsuk el vele a számítógépet.
======
+ 
Ha minden próbálkozásunk ellenére a számítógépünk a megszokott módon indul és a meglevõ operációs rendszert tölti be, akkor a következõkkel lehet a gond:
.. A lemezeket nem raktuk be eléggé korán. Hagyjuk benn ezeket és próbáljuk meg ismét újraindítani a számítógépet.
.. Nem állítottuk be jól a BIOS-t. Próbáljuk meg egészen addig újra végrehajtani az elõzõ lépést, amíg a megfelelõ beállítást el nem találjuk.
.. A BIOS nem támogatja a kiválasztott eszközrõl történõ rendszerindítást.

. A FreeBSD megkezdi az indulását. Ha CD-rõl indítjuk, akkor valami ehhez hasonlót fogunk látni (a konkrét verzióra vonatkozó adatokat itt most kihagytuk):
+
[source,shell]
....
Booting from CD-Rom...
645MB medium detected
CD Loader 1.2

Building the boot loader arguments
Looking up /BOOT/LOADER... Found
Relocating the loader and the BTX
Starting the BTX loader

BTX loader 1.00 BTX version is 1.02
Console: internal video/keyboard
BIOS CD is cd0
BIOS drive C: is disk0
BIOS drive D: is disk1
BIOS 639kB/261056kB available memory

FreeBSD/i386 bootstrap loader, Revision 1.1

Loading /boot/defaults/loader.conf
/boot/kernel/kernel text=0x64daa0 data=0xa4e80+0xa9e40 syms=[0x4+0x6cac0+0x4+0x88e9d]
\
....
+ 
Amikor floppyról indítjuk a rendszert, ehhez hasonlóval találkozhatunk (itt sem szerepelnek most verzióadatok):
+
[source,shell]
....
Booting from Floppy...
Uncompressing ... done

BTX loader 1.00  BTX version is 1.01
Console: internal video/keyboard
BIOS drive A: is disk0
BIOS drive C: is disk1
BIOS 639kB/261120kB available memory

FreeBSD/i386 bootstrap loader, Revision 1.1

Loading /boot/defaults/loader.conf
/kernel text=0x277391 data=0x3268c+0x332a8 |

Insert disk labelled "Kernel floppy 1" and press any key...
....
+ 
Kövessük a képernyõn megjelenõ utasítást ("Helyezze be a "Kernel floppy 1" címkéjû lemezt és nyomjon meg egy billentyût..."), tehát vegyük ki a [.filename]#boot.flp# image-hez tartozó lemezt és tegyük be helyette a [.filename]#kern1.flp# image-hez tartozó lemezt, majd nyomjuk le az kbd:[Enter] billentyût. Várjuk meg amíg a rendszer megkezdi az indulást az elsõ lemezrõl, majd az utasításoknak megfelelõen folyamatosan tegyük be a soron következõ lemezeket.
. Miután elindítottuk a rendszert CD-rõl, pendrive-ról vagy floppy-ról, a rendszerindítási folyamat be fogja hozni a FreeBSD rendszertöltõjének menüjét:
+
[[boot-loader-menu]]
.FreeBSD rendszerbetöltõ menüje
image::boot-loader-menu.png[]
+ 
Várjuk ki a tíz másodperces szünetet vagy egybõl nyomjuk le az kbd:[Enter] billentyût.
====

==== Rendszerindítás sparc64-en

A legtöbb sparc64 alapú rendszert úgy állították be, hogy automatikusan lemezrõl induljon. A FreeBSD telepítéséhez azonban hálózaton keresztül vagy CD-rõl kell indítanunk a rendszert, ezért módosítanunk kell a PROM (az OpenFirmware) beállításait.

Mindehhez indítsuk újra a rendszert és várjuk meg, amíg feltûnik a rendszerindító üzenet. A konkrét üzenet nagyban függ a számítógép típusától, azonban valami ilyesmi lesz:

[source,shell]
....
Sun Blade 100 (UltraSPARC-IIe), Keyboard Present
Copyright 1998-2001 Sun Microsystems, Inc.  All rights reserved.
OpenBoot 4.2, 128 MB memory installed, Serial #51090132.
Ethernet address 0:3:ba:b:92:d4, Host ID: 830b92d4.
....

Amikor megpróbálja a rendszert elindítani a lemezrõl, a PROM parancssorának bekéréshez nyomjuk le a billentyûzeten az kbd:[L1+A] vagy a kbd:[Stop+A] billentyûket, esetleg a soros konzolon keresztül küldjünk egy `BREAK` parancsot (például a man:tip[1] vagy man:cu[1] man oldalakon szereplõ `~#` parancs használatával). Körülbelül így néz ki:

[source,shell]
....
ok     <.>
ok {0} <.>
....

<.> Ez a fajta parancssor csak az egy processzorral rendelkezõ rendszereken jelenik meg.

<.> Ez a fajta parancssor többprocesszoros (SMP) rendszereken jelenik meg, ahol a szám az éppen aktív processzor sorszámát jelöli.

Most helyezzük a CD-t a meghajtóba, és a PROM parancssorában pedig gépeljük be `boot cdrom` parancsot.

[[view-probe]]
=== Az eszközkeresés eredményeinek vizsgálata

A képernyõn megjelenõ utolsó pár száz sor mindig eltárolódik, késõbb tetszõlegesen átvizsgálhatóak.

A puffer tartalmának átnézéséhez nyomjuk le a kbd:[Scroll Lock] billentyût, amivel bekapcsoljuk a korábban megjelent üzenetek közti visszalépést. Itt a nyílbillentyûk, vagy a kbd:[PageUp] és kbd:[PageDown] billentyûk használhatóak a kiírások átböngészéséhez. A kbd:[Scroll Lock] ismételt lenyomásával kiléphetünk ebbõl a módból.

Tegyük most mi is ezt, és nézzük az összes olyan üzenetet, amely a rendszermag indulása során keletkezett. A <<install-dev-probe>>ban látható szövegekhez hasonlóakat fogunk találni, habár ez a számítógépben található konkrét eszközöktõl függõen eltérõ lehet.

[[install-dev-probe]]
.Példa az eszközkeresés eredményeire
[source,shell]
....
avail memory = 253050880 (247120K bytes)
Preloaded elf kernel "kernel" at 0xc0817000.
Preloaded mfs_root "/mfsroot" at 0xc0817084.
md0: Preloaded image </mfsroot> 4423680 bytes at 0xc03ddcd4

md1: Malloc disk
Using $PIR table, 4 entries at 0xc00fde60
npx0: <math processor> on motherboard
npx0: INT 16 interface
pcib0: <Host to PCI bridge> on motherboard
pci0: <PCI bus> on pcib0
pcib1:<VIA 82C598MVP (Apollo MVP3) PCI-PCI (AGP) bridge> at device 1.0 on pci0
pci1: <PCI bus> on pcib1
pci1: <Matrox MGA G200 AGP graphics accelerator> at 0.0 irq 11
isab0: <VIA 82C586 PCI-ISA bridge> at device 7.0 on pci0
isa0: <iSA bus> on isab0
atapci0: <VIA 82C586 ATA33 controller> port 0xe000-0xe00f at device 7.1 on pci0
ata0: at 0x1f0 irq 14 on atapci0
ata1: at 0x170 irq 15 on atapci0
uhci0 <VIA 83C572 USB controller> port 0xe400-0xe41f irq 10 at device 7.2 on pci
0
usb0: <VIA 83572 USB controller> on uhci0
usb0: USB revision 1.0
uhub0: VIA UHCI root hub, class 9/0, rev 1.00/1.00, addr1
uhub0: 2 ports with 2 removable, self powered
pci0: <unknown card> (vendor=0x1106, dev=0x3040) at 7.3
dc0: <ADMtek AN985 10/100BaseTX> port 0xe800-0xe8ff mem 0xdb000000-0xeb0003ff ir
q 11 at device 8.0 on pci0
dc0: Ethernet address: 00:04:5a:74:6b:b5
miibus0: <MII bus> on dc0
ukphy0: <Generic IEEE 802.3u media interface> on miibus0
ukphy0: 10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
ed0: <NE2000 PCI Ethernet (RealTek 8029)> port 0xec00-0xec1f irq 9 at device 10.
0 on pci0
ed0 address 52:54:05:de:73:1b, type NE2000 (16 bit)
isa0: too many dependant configs (8)
isa0: unexpected small tag 14
orm0: <Option ROM> at iomem 0xc0000-0xc7fff on isa0
fdc0: <NEC 72065B or clone> at port 0x3f0-0x3f5,0x3f7 irq 6 drq2 on isa0
fdc0: FIFO enabled, 8 bytes threshold
fd0: <1440-KB 3.5" drive> on fdc0 drive 0
atkbdc0: <Keyboard controller (i8042)> at port 0x60,0x64 on isa0
atkbd0: <AT Keyboard> flags 0x1 irq1 on atkbdc0
kbd0 at atkbd0
psm0: <PS/2 Mouse> irq 12 on atkbdc0
psm0: model Generic PS/@ mouse, device ID 0
vga0: <Generic ISA VGA> at port 0x3c0-0x3df iomem 0xa0000-0xbffff on isa0
sc0: <System console> at flags 0x100 on isa0
sc0: VGA <16 virtual consoles, flags=0x300>
sio0 at port 0x3f8-0x3ff irq 4 flags 0x10 on isa0
sio0: type 16550A
sio1 at port 0x2f8-0x2ff irq 3 on isa0
sio1: type 16550A
ppc0: <Parallel port> at port 0x378-0x37f irq 7 on isa0
pppc0: SMC-like chipset (ECP/EPP/PS2/NIBBLE) in COMPATIBLE mode
ppc0: FIFO with 16/16/15 bytes threshold
plip0: <PLIP network interface> on ppbus0
ad0: 8063MB <IBM-DHEA-38451> [16383/16/63] at ata0-master UDMA33
acd0: CD-RW <LITE-ON LTR-1210B> at ata1-slave PIO4
Mounting root from ufs:/dev/md0c
/stand/sysinstall running as init on vty0
....

Figyelmesen olvassuk át az üzeneteket, és bizonyosodjuk meg róla, hogy a FreeBSD minden számunkra fontos eszközt felismert. Ha nem látunk egy eszközt, akkor azt valószínûleg nem találta meg. Egy crossref:kernelconfig[kernelconfig,saját rendszermag] létrehozásával azonban fel tudunk ismertetni olyan eszközöket is, amelyek támogatása eredetileg nem szerepel a [.filename]#GENERIC# rendszermagban. Ilyenek például a hangkártyák.

A FreeBSD 6.2 vagy késõbbi változataiban az eszközök felkutatása után a <<config-country>>ban láthatóak következnek. Itt a nyílbillentyûk segítségével választhatjuk ki az országot (country), térséget (region) vagy csoportot (group). Az kbd:[Enter] lenyomása után pillanatok alatt beállítódik az országunk. Ha meg akarjuk ismételni az iménti beállítást, pillanatok alatt ki tudunk lépni a sysinstall programból.

[[config-country]]
.Az ország kiválasztása
image::config-country.png[]

Ha országként [.guimenuitem]#United States# (Egyesült Államok) került beállításra, akkor a szabványos amerikai billentyûzet-kiosztás állítódik be. A többi ország esetében az alábbi menü jelenik meg. A kurzormozgató billentyûk segítségével ekkor keressük meg ki a számunkra megfelelõ kiosztást, és az kbd:[Enter] billentyû lenyomásával válasszuk ki.

[[config-keymap]]
.A billentyûzet típusának kiválasztása
image::config-keymap.png[]

[[sysinstall-exit]]
.Kilépés a sysinstall programból
image::sysinstall-exit.png[]

A telepítõprogram fõképernyõjén válasszuk ki a nyílbillentyûkkel az [.guimenuitem]#Exit Install# ("Kilépés a telepítésbõl") menüpontot. Erre a következõ üzenet fog megjelenni:

[source,shell]
....
                      User Confirmation Requested
         Are you sure you wish to exit? The system will reboot

                            [ Yes ]    No
....

Az üzenet fordítása:

[source,shell]
....
                  Felhasználói megerősítés szükséges
         Valóban ki akar lépni? A rendszer ezt követően újra fog
         indulni

                           [ Igen ]    Nem
....

Ha a btn:[yes] választ adjuk és a CD-t az újraindításkor is a meghajtóban hagyjuk, akkor a telepítõprogram még egyszer el fog indulni.

Ha floppyról indítottuk volna a rendszert, az újraindítás elõtt vegyük ki a [.filename]#boot.flp# image-et tartalmazó lemezt.

[[using-sysinstall]]
== A sysinstall bemutatása

A sysinstall a FreeBSD Projekt által fejlesztett telepítõprogram. Konzol alapú, menükre és képernyõkre oszlik, amelyeken a beállításokat és a telepítési folyamat irányítását tudjuk elvégezni.

A sysinstall menürendszerét több más billentyû mellett legfõképpen a nyílbillentyûkkel, az kbd:[Enter], kbd:[Tab] és a kbd:[Szóköz] billentyûkkel kezelhetjük. Ezek és az általuk elvégezhetõ feladatok részletes leírása a sysinstall használatáról szóló információk között található.

Ennek megtekintéséhez elõször gyõzõdjünk meg róla, hogy a <<sysinstall-main3>> által illusztrált helyzetnek megfelelõen kiválasztottuk a [.guimenuitem]#Usage# ("Használat") menüpontot és a btn:[Select] ("Kiválaszt") feliratú gombon állunk, majd nyomjuk le az kbd:[Enter] billentyût.

Ezt követõen megjelenik a menürendszer használatát bemutató leírás. Miután végigolvastuk, a fõmenübe az kbd:[Enter] billentyû lenyomásával tudunk visszajutni.

[[sysinstall-main3]]
.A "Usage" kiválasztása a sysinstall fõmenüjében
image::main1.png[]

[[select-doc]]
=== A dokumentációs menü kiválasztása

A fõmenüben a nyílbillentyûkkel válasszuk a [.guimenuitem]#Doc# feliratú menüpontot és nyomjuk meg az kbd:[Enter] billentyût.

[[main-doc]]
.A dokumentációs menü kiválasztása
image::main-doc.png[]

Ezzel megjelenik a dokumentációs menü.

[[docmenu1]]
.A sysinstall dokumentációs menüje
image::docmenu1.png[]

Feltétlenül olvassuk el az itt található leírásokat.

A dokumentumok elolvasásához elõször válasszunk közülük a nyílbillentyûkkel, majd nyomjuk meg az kbd:[Enter] billentyût. A dokumentum elolvasása után az kbd:[Enter] lenyomásával tudunk visszatérni a dokumentációs menübe.

A dokumentációs menübõl a fõmenübe úgy tudunk kilépni, ha a nyílbillentyûkkel kiválasztjuk az [.guimenuitem]#Exit# ("Kilépés") menüpontot és megnyomjuk az kbd:[Enter] billentyût.

[[keymap]]
=== A billentyûkiosztás menüjének kiválasztása

A billentyûzetkiosztás megváltoztatásához válasszuk ki a nyílbillentyûk segítségével a [.guimenuitem]#Keymap# menüpontot a menübõl és nyomjuk meg az kbd:[Enter] billentyût. Erre természetesen csak akkor lesz szükségünk, ha nem szabványos vagy nem angol billentyûzetet használunk.

[[sysinstall-keymap]]
.A sysinstall fõmenüje
image::main-keymap.png[]

A különbözõ billentyûkiosztásoknak megfelelõ menüpontok a fel/le nyílak és a kbd:[Szóköz] billentyû segítségével választhatóak ki. A kbd:[Szóköz] ismételt lenyomásával töröljük a választásunkat. A befejezéshez válasszuk ki a nyilakkal a btn:[OK] gombot és nyomjuk le az kbd:[Enter] billentyût.

A mellékelt képen a lista egy része látható csupán. Ha a kbd:[Tab] billentyûvel a btn:[Cancel] gombot választjuk, akkor az alapértelmezett billentyûkiosztást kapjuk és visszakerülünk a fõmenübe.

[[sysinstall-keymap-menu]]
.A sysinstall billentyûkiosztást beállító menüje
image::keymap.png[]

[[viewsetoptions]]
=== A telepítés beállításai tartalmazó képernyõ

Válasszuk az [.guimenuitem]#Options# ("Beállítások") menüpontot, majd nyomjuk le az kbd:[Enter] billentyût.

[[sysinstall-options]]
.A sysinstall fõmenüje
image::main-options.png[]

[[options]]
.A sysinstall beállításai
image::options.png[]

Az itt szereplõ alapértelmezett értékek a legtöbb felhasználó számára minden további nélkül megfelelnek, nem szükséges a megváltoztatásuk. A kiadás neve ("release name") mezõ értéke a telepítendõ verziótól függõen változhat.

A kiválasztott mezõ rövid leírása a képernyõ alján, kékkel kiemelten jelenik meg. A [.guimenuitem]#Use Defaults# ("Az alapértelmezések használata") beállítás az alapértelmezésére állítja vissza az összes értéket.

Az kbd:[F1] lenyomásával elolvashatjuk a különbözõ beállításokhoz tartozó súgót.

A kbd:[Q] billentyûvel visszatérhetünk a fõmenübe.

[[start-install]]
=== Egy szabványos telepítés megkezdése

A [.guimenuitem]#Standard# ("Szabványos") elnevezésû menüpont által felkínált telepítési módszer ajánlott a UNIX(R)-szal vagy a FreeBSD-vel most ismerkedõk számára. A telepítés megkezdéséhez a nyilakkal válasszuk ki a [.guimenuitem]#Standard# menüpontot, majd nyomjuk meg az kbd:[Enter] billentyût.

[[sysinstall-standard]]
.Egy szabványos telepítés megkezdése
image::main-std.png[]

[[install-steps]]
== Lemezterület lefoglalása

Elsõ feladatunk lemezterületet foglalni a FreeBSD számára, majd megcímkézni azt, hogy a sysinstall elõ tudja készíteni. Ehhez tisztában kell lennünk azzal, hogy a FreeBSD milyen formában is keresi az adatokat a lemezünkön.

[[install-drive-bios-numbering]]
=== A BIOS meghajtószámozása

Egy témára különösen tekintettel kell lennünk mielõtt telepítenénk és beállítanánk a FreeBSD-t a rendszerünkön, fõleg abban az esetben, ha több merevlemezünk is van.

Egy BIOS-függõ operációs rendszert, például MS-DOS(R)-t vagy Windows(R)-t futattó PC esetén a BIOS az operációs rendszer beleegyezésével képes elvonatkoztatni a lemezek megszokott sorrendjétõl. Ennek köszönhetõen a felhasználó nem csak az ún. "primary master" (elsõdleges master) merevlemezes meghajtótól tudja elindítani a rendszert. Ez kifejezetten kényelmes megoldás az olyan felhasználók számára, akik az elsõvel teljesen megegyezõ második merevlemez megvásárlásával kialakították a rendszerük egyszerû és egyben a legolcsóbb biztonsági mentését, amire a Ghost vagy XCOPY programokkal tudnak rendszeres másolatokat készíteni. Így, ha az elsõdleges meghajtó tönkremegy vagy vírus támadja meg, esetleg az operációs rendszer egy hiba miatt használhatatlanná teszi, akkor a BIOS-t utasíthatjuk a meghajtók logikai cseréjére és ezzel könnyen helyre tudjuk állítani. Olyan, mintha a ház felnyitása nélkül felcseréltük volna a lemezeket bekötõ kábeleket.

A SCSI-vezérlõkkel szerelt drágább rendszerek gyakran tartalmaznak olyan BIOS-bõvítéseket, amelyeken keresztül a SCSI-lemezek ugyanígy tetszõlegesen átrendezhetõek, egészen hét meghajtóig.

Az ilyen lehetõségek használatához szokott felhasználókat azonban könnyen csalódás érheti, amikor a FreeBSD nem az elvárásaiknak megfelelõen cselekszik. A FreeBSD ugyanis nem használja a BIOS-t és nem ismeri a "BIOS logikai meghajtókiosztását". Ez meghökkentõ eredményekre vezethet, fõleg akkor, amikor paramétereiket tekintve a meghajtók fizikailag teljesen megegyeznek és ráadásul egymás másolatait tartalmazzák.

A FreeBSD telepítése elõtt mindig állítsuk vissza a BIOS-ban a meghajtók eredeti sorrendjét, és a használatához hagyjuk is így ezt a beállítást. Ha valamiért mégis meg kellene cserélnünk a meghajtókat, akkor ezentúl válasszuk a nehezebb utat: nyissuk ki a gépházat és kössük át a kábeleket, tegyük át a jumpereket mi magunk.

Vili fogott egy öreg Winteles számítógépet, hogy készítsen belõle egy FreeBSD-s rendszert Frédinek. Vili ehhez beszerel egy SCSI-meghajtót, ami így nullás SCSI-egység lesz, majd telepíti rá a FreeBSD-t.

Frédi nekilát használni a rendszert, azonban pár nap elteltével tapasztalja, hogy az öregecske SCSI-meghajtó számos apróbb hibát jelez, és ezért szól Vilinek.

Néhány nappal késõbb Vili eldönti, ideje pontot tenni az ügy végére, ezért a raktárban levõ SCSI-lemezek köztül elhoz az eredetivel egy teljesen megegyezõt. Az elõzetes felületellenõrzés eredményei szerint a meghajtó tökéletesen mûködik, ezért Vili beszerelni ezt a meghajtót a négyes SCSI-egységként, majd lemásolja a nullás meghajtó tartalmát a négyesre. Miután beszerelte a tökéletesen üzemelõ új meghajtót, Vili úgy határoz, ideje megkezdeni a használatát, ezért beállítja a SCSI BIOS-át, hogy a rendszer a nullás helyett ezentúl a négyes egységrõl induljon. A FreeBSD elindul és mindenki örül.

Frédi ezután folytatja megszokott munkáját, majd Vili és Frédi úgy gondolják, itt az ideje az újabb izgalmaknak - frissítsünk a FreeBSD egy újabb változatára. Vili ekkor eltávolítja a nullás SCSI-egységet, mivel már egyébként is kezdett tönkremenni, és kicseréli egy másik teljesen azonos lemezes meghajtóra. Vili ezt követõen Frédi internetrõl letöltött varázslatos floppyjainak segítségével feltelepíti a FreeBSD új verzióját az új nullás SCSI-egységre. A telepítés minden gond nélkül lezajlik.

Frédi próbálgatja is a FreeBSD új változatát néhány napig, és számára ez elegendõ bizonyíték ahhoz, hogy a munkahelyén is használja. Ideje hát átmásolni a régi munkáit, ezért Frédi csatlakoztatja a (korábbi FreeBSD változat legfrissebb változatát tartalmazó) négyes SCSI-egységet. Frédin azonban hirtelen aggodalom tör ki, hiszen a négyes SCSI-egységen sehol sem találja munkája féltett eredményeit.

Hova tûntek azok a komisz adatok?

Amikor Vili másolatot készített az eredeti nullás SCSI-egységrõl a négyes SCSI-egységre, a négyes egység egy "új klón" lett. Amikor a rendszerindításhoz Vili átrendezte a meghajtókat a SCSI BIOS-ban, azzal csak magát csapta be, ugyanis a FreeBSD továbbra is a nullás SCSI-egységrõl indult el! A BIOS által kiválasztott meghajtóról az effajta beállítások hatására ugyan behozható a rendszerindító és -betöltõ programok egy része, de amikor a FreeBSD rendszermagja átveszi a vezérlést, a BIOS által meghatározott sorrendiség figyelmen kívül marad és a FreeBSD visszatér a meghajtók eredeti rendezéséhez. Tehát ebben az esetben a rendszer továbbra is az eredeti nullás SCSI-egységrõl folytatja a mûködést, és Frédi összes adata itt található, nem pedig a négyes SCSI-egységen. A négyes SCSI-egységrõl futó rendszer illuziója így mindössze az emberi elvárások szüleménye.

Örömmel említjük meg, hogy egyetlen byte-nyi adat sem sérült meg vagy pusztult el a jelenség felfedezése során. A korábbi nullás SCSI-egységet még sikerült megmenteni a szemétdombról és Frédi összes munkája visszakerült (és Vili most már el tud számolni nulláig).

Habár a tanmesénkben SCSI-meghajtókról esett szó, ugyanez fennáll az IDE-meghajtókra is.

[[main-fdisk]]
=== Slice-ok létrehozása az FDisk használatával

[NOTE]
====
Itt még semmilyen változtatás nem kerül lemezre. Ha úgy érezzük, hogy valamit rosszul csináltunk és újra el akarjuk kezdeni a telepítést, a menük segítségével büntetlenül távozhatunk a sysinstallból és újra próbálkozhatunk, vagy az kbd:[U] billentyû lenyomásával aktiválhatjuk az [.guimenuitem]#Undo# ("Visszacsinál") funkciót. Ha véletlenül összezavarodtunk volna és nem találunk kilépési lehetõséget, akkor bármikor ki tudjuk kapcsolni a számítógépet.
====

A sysinstallban a szabványos telepítés megkezdésekor az alábbi üzenet jelenik meg:

[source,shell]
....
                                 Message
 In the next menu, you will need to set up a DOS-style ("fdisk")
 partitioning scheme for your hard disk. If you simply wish to devote
 all disk space to FreeBSD (overwriting anything else that might be on
 the disk(s) selected) then use the (A)ll command to select the default
 partitioning scheme followed by a (Q)uit. If you wish to allocate only
 free space to FreeBSD, move to a partition marked "unused" and use the
 (C)reate command.
                                [  OK  ]

                      [ Press enter or space ]
....

Az üzenet fordítása:

[source,shell]
....
                                  Üzenet
 A most következő menüben össze kell állítanunk a merevlemezünk
 DOS-szerű ("fdiskes") partícióit. Amennyiben egyszerűen csak át
 akarjuk adni az összes lemezterületet a FreeBSD számára (ezzel
 felülírva mindent, ami a kiválasztott lemezeken található), akkor
 az alapértelmezett partíció-kiosztás kiválasztásához használjuk az
 (A)ll (Mind), majd utána a (Q)uit (Kilépés) parancsokat. Ha viszont
 csak az éppen szabad területet szánjuk a FreeBSD-nek, lépjünk egy
 "unused" ("üres") feliratú partícióra és használjuk a (C)reate
 (Létrehozás) parancsot.

                               [  OK  ]

            [ Nyomja le az Enter vagy a Szóköz billentyűt ]
....

Az utasításnak megfelelõen nyomjuk le az kbd:[Enter] billentyût. Ezután a rendszermag által az eszközök felkutatása során megtalált összes merevlemezes meghajtót láthatjuk. A <<sysinstall-fdisk-drive1>> egy két IDE-lemezzel rendelkezõ rendszert mutat be, amelyeknek nevei rendre [.filename]#ad0# és [.filename]#ad2#.

[[sysinstall-fdisk-drive1]]
.A meghajtó kiválasztása az FDisk számára
image::fdisk-drive1.png[]

Feltûnhet, hogy itt nem szerepel az [.filename]#ad1#. Vajon miért maradt ki?

Képzeljük el, mi történne, ha két IDE-csatolós merevlemezünk lenne: az egyik az elsõ IDE-vezérlõn, a másik pedig a második IDE-vezérlõn lenne master. Ha a FreeBSD a megtalálásuk szerint [.filename]#ad0# és [.filename]#ad1# nevekkel számozná ezeket, attól még minden remekül mûködhetne.

Ha azonban beszerelnénk egy harmadik lemezt, például egy slave eszközt kapcsolnánk az elsõ IDE-vezérlõre, akkor már ez lenne a [.filename]#ad1#, és ennek megfelelõen a korábban [.filename]#ad1# megnevezésû meghajtó pedig az [.filename]#ad2#. Mivel az állományrendszerek felkutatására általában az eszközneveket (mint amilyen a [.filename]#ad1s1a#) használják, ezért ilyenkor azt tapasztalhatnánk, hogy bizonyos állományrendszerek helytelenül jelennek meg, ezért meg kell változtatnunk a FreeBSD ezeket érintõ beállításait.

A probléma megoldására a rendszermag beállítható úgy, hogy az IDE-lemezeket a kapcsolódásuk szerint azonosítsa, ne pedig a megtalálásuk sorrendje szerint. Ezzel a kialakítással a második IDE-vezérlõn található master lemez _mindig_ az [.filename]#ad2# eszköz lesz, tehát még olyankor is, amikor egyáltalán nincs a rendszerünkben [.filename]#ad0# vagy [.filename]#ad1# eszköz.

Ez a beállítás alapértelmezés a FreeBSD rendszermagjában, és ez magyarázza, hogy az iménti ábra miért csak [.filename]#ad0# és [.filename]#ad2# eszközöket mutat. Tehát a képen szereplõ számítógép mind a két IDE-vezérlõjének master csatornáján található egy-egy IDE-lemez, a slave csatornákon pedig nincs egy sem.

Itt válasszuk ki azt a lemezt, amelyre a FreeBSD-t telepíteni kívánjuk, majd nyomjuk meg a btn:[OK] gombot. Erre az <<sysinstall-fdisk1>> által bemutatott képernyõvel elindul az FDisk.

Az FDisk képernyõje három részre osztható.

Az elsõ részben, amely a képernyõ felsõ két sorát foglalja össze, láthatjuk az éppen kiválasztott lemez adatait: a FreeBSD szerinti nevét, a paramétereit és az összméretét.

A második részben láthatjuk a lemezen megtalálható slice-okat: hol kezdõdnek (Offset) és hol érnek véget (End); mekkorák (Size); a FreeBSD milyen névvel hivatkozik rájuk (Name); milyen leírás (Description) és altípus (Subtype) tartozik hozzájuk. A példában két kicsi üres slice-ot láthatunk, ami a PC-k lemezkiosztására jellemzõ. Ezenkívül felfedezhetünk egy nagyobb méretû FAT típusú slice-ot is, amely az MS-DOS(R) / Windows(R) világban szinte minden bizonnyal a [.filename]#C:# betûjelet viseli, valamint egy kiterjesztett slice-ot is, amely az MS-DOS(R) / Windows(R) számára további meghajtókat is tartalmazhat.

A harmadik részben az FDisk mûködtetésére használható parancsok láthatóak.

[[sysinstall-fdisk1]]
.Átlagos Fdisk partíciók szerkesztés elõtt
image::fdisk-edit1.png[]

A most következõ teendõink attól függenek, hogy miként is akarjuk felosztani a lemezünket.

Ha az egész lemezt a FreeBSD használatára áldozzuk (és amikor majd megerõsítjük a sysinstall számára a továbblépést, a lemezen így minden más adat törlõdni fog), akkor nyomjuk le az kbd:[A] billentyût, amely megfelel a [.guimenuitem]#Use Entire Disk# (Az egész lemez használata) menüpontnak. A létezõ slice-ok eltávolításra kerülnek és helyettük megjelenik egy `unused` (üres) jelzésû kis méretû terület (elvégre PC-rõl beszélünk), valamint egy nagyobb slice a FreeBSD számára. Ha így jártunk el, akkor válasszuk ki nyilakkal a frissen létrejött FreeBSD slice-ot és az kbd:[S] billentyû lenyomásával jelöljük be indíthatónak (bootable). A képernyõ ekkor a <<sysinstall-fdisk2>> által mutatotthoz fog erõsen hasonlítani. A `Flags` (Beállítások) oszlopban láthatjuk az `A` jelzést, amelybõl kiderül, hogy az adott slice _aktív_, tehát róla tud indulni a rendszer.

Ha a FreeBSD számára egy meglevõ slice törlésével szeretnénk helyet csinálni, akkor ehhez válasszuk ki nyílbillentyûkkel a használni kivánt slice-ot és nyomjuk le a kbd:[D] billentyût. Ezután nyomjuk le a kbd:[C] billentyût is, amire felbukkan a létrehozandó slice méretét kérdezõ ablak. Adjuk meg a számunkra megfelelõ méretet a számunkra megfelelõ formában, majd zárjuk le az kbd:[Enter] lenyomásával. Az ablakban szereplõ alapértelmezett érték a létrehozható lehetõ legnagyobb méretû slice-ot adja meg, ami vagy a legnagyobb összefüggõ üres terület, vagy pedig az egész merevlemez összterülete lehet.

Ha már korábban készítettünk elõ helyet a FreeBSD-nek (például egy PartitionMagic(R) vagy egy hozzá hasonló alkalmazás segítségével), akkor csak elegendõ az új slice létrehozásához megnyomnunk a kbd:[C] billentyût. Ekkor szintén megkérdezésre kerül a létrehozandó slice mérete.

[[sysinstall-fdisk2]]
.Particionálás az Fdisk "Using Entire Disk" funkciójával
image::fdisk-edit2.png[]

Amikor befejeztük, nyomjuk le a kbd:[Q] billentyût. Ekkor a sysinstall elmenti a beállított értékeket, azonban a lemezre ekkor még nem kerülnek ki.

[[bootmgr]]
=== A rendszerválasztó telepítése

Mindezek után lehetõségünk nyílik telepíteni egy rendszerválasztót (boot manager). Általában véve akkor van szükségünk a FreeBSD rendszerválasztójának telepítésére, ha:

* Egynél több meghajtónk van, és közülük nem az elsõ meghajtóra telepítjük a FreeBSD-t.
* A FreeBSD-t ugyanazon a lemezen más operációs rendszerek mellé telepítjük, és szeretnénk választhatóvá tenni, hogy a számítógép indításakor a FreeBSD vagy a többi operációs rendszer induljon-e el.

Amennyiben a FreeBSD lesz az egyetlen operációs rendszer a gépünkön és az elsõ merevlemezes meghajtóra telepítjük, akkor a [.guimenuitem]#Standard# (Szabványos) rendszerválasztó tökéletesen megteszi. Ha viszont a FreeBSD indításához egy másik rendszerválasztót szeretnénk használni, válasszuk a [.guimenuitem]#None# (Nincs) opciót.

Válasszunk, majd nyomjuk le az kbd:[Enter] billentyût!

[[sysinstall-bootmgr]]
.A sysinstall rendszerválasztókat tartalmazó menüje
image::boot-mgr.png[]

Az kbd:[F1] billentyû lenyomásán keresztül elérhetõ súgóképernyõn olvashatunk az egy merevlemezen több operációs rendszer használatával kapcsolatos problémákról.

=== Slice-ok létrehozása egy másik meghajtón

Ha egynél több meghajtónk van, a program a rendszerválasztó képernyõje után ismét visszatér a meghajtók kiválasztásához. Amennyiben a FreeBSD-t egy másik meghajtóra is telepíteni szeretnénk, itt válasszuk ki azt és ismételjük meg vele az imént az FDisk programmal végzett felosztási folyamatot.

[IMPORTANT]
====
Amikor a FreeBSD-t nem az elsõ meghajtóra telepítjük, akkor a FreeBSD rendszerválasztóját mind a két meghajtóra telepíteni kell.
====

[[sysinstall-fdisk-drive2]]
.Kilépés a meghajtóválasztó menübõl
image::fdisk-drive2.png[]

A kbd:[Tab] billentyûvel tudunk váltani a legutoljára kiválasztott meghajtó, a btn:[OK] és a btn:[Cancel] gombok között.

Az btn:[OK] gombra álláshoz nyomjuk le egyszer a kbd:[Tab]ot, majd a telepítés folytatásához nyomjuk le az kbd:[Enter] billentyût.

[[bsdlabeleditor]]
=== Partíciók létrehozása a Disklabel segítségével

A következõ lépésként létre kell hoznunk partíciókat a frissen létrehozott slice-okban. Ne felejtsük el, hogy minden partíció rendelkezik egy `a`-tól `h`-ig terjedõ betûjellel, amelyek közül a `b`, `c` és `d` jelzésûeknek külön szerepe van, amire tekintettel kell lennünk.

Bizonyos alkalmazások kedvelnek egyes partíciókiosztási sémákat, különösen az egynél több lemezen elhelyezkedõ partíciókat. Azonban az elsõ FreeBSD telepítésünk során még nem annyira fontos koncentrálnunk a lemezünk hatékony felosztására. Sokkal inkább fontosabb, hogy elõször egyszerûen csak telepítsük a FreeBSD-t és tanuljuk meg a használatát. Amikor már jobban ismerni fogjuk az operációs rendszert, a partíciók kiosztásának megváltoztatásához mindig újra tudjuk telepíteni a FreeBSD-t.

Ebben a sémában négy partíció szerepel - egy a lapozóállománynak és három az állományrendszereknek.

.Az elsõ lemez partícióinak kiosztása
[cols="1,1,1,1", frame="none", options="header"]
|===
| Partíció
| Állományrendszer
| Méret
| Leírás

|`a`
|[.filename]#/#
|1 GB
|Ez a rendszerindításhoz használt, más néven a gyökér állományrendszer (root filesystem). Minden további állományrendszer ehhez csatlakozik valahol. Ennek az állományrendszernek 1 GB méret elfogadható, mivel nem fogunk túlságosan sok adatot tárolni rajta, a FreeBSD telepítõje is csak nagyjából 128 MB adatot fog ide tenni. Az így fennmaradó lemezterület felhasználható átmeneti adatok tárolására, illetve a [.filename]#/# könyvtárban helyet ad a FreeBSD késõbbi változatainak terjeszkedéséhez is.

|`b`
|-
|RAM mérete x 2-3
|

A rendszer lapozóállománya a `b` partíción tárolódik. Itt a megfelelõ méret megválasztása egyfajta mûvészet, azonban minden esetben hasznosnak bizonyulhat, ha tudjuk, hogy méretnek mindig érdemes a fizikai avagy központi memória (RAM) méretének két, esetleg háromszorosát választani. Legyen mindig legalább 64 MB-nyi méretû lapozóállományunk, és ha 32 MB RAM-nál kevesebb van a számítógépünkben, akkor is legalább 64 MB-ra állítsuk be.

Ha egynél több lemezünk van, mindegyikre rakhatunk lapozóállományt, ezzel a FreeBSD mindegyikõjüket fel tudja használni lapozásra, amivel pedig gyakorlatilag felgyorsítja a folyamatot. Ilyenkor számoljunk úgy, hogy elõször meghatározzuk a teljes lapozóállomány méretét (például 128 MB), majd ezt elosztjuk a rendelkezésünkre álló lemezek számával (például kettõ). Ebbõl kiszámítható az egyes lemezeken elhelyezendõ lapozóállomány mérete, ami most a példánk szerint 64 MB lesz.

|`e`
|[.filename]#/var#
|512 MB-tl 4096 MB-ig
|A [.filename]#/var# könyvtár foglalja magában az állandó változó naplóállományokat, valamint a többi, adminisztrációhoz használt állományt. Ezek többsége a FreeBSD mindennapos mûködése közben folyamatosan íródnak vagy olvasódnak. Ha ezeket az állományokat egy külön állományrendszerre rakjuk, akkor ezzel segítünk a FreeBSD-nek optimalizálni az ilyen állományok elérését anélkül, hogy ez hatással lenne a többi, más hozzáférési gyakorisággal bíró állományra.

|`f`
|[.filename]#/usr#
|A lemez többi része (legalább 8 GB)
|Az összes többi állomány többnyire a [.filename]#/usr# könyvtárban és annak alkönyvtáraiban helyezkedik el.
|===

[WARNING]
====

Az imént megadott értékeket csak példaként adtuk meg és csak a tapasztalt felhasználók számára ajánljuk. A többi felhasználónak inkább a partíciók automatikus kiosztását javasoljuk a FreeBSD partíciószerkesztõjében található `Auto Defaults` opció használatával.
====

Ha a FreeBSD-t egynél több lemezre telepítjük, akkor a korábban megadott többi slice-ban is létre kell hoznunk partíciókat. Ezt legegyszerûbben úgy tehetjük meg, ha minden lemezen létrehozunk két partíciót: egyet a lapozóállománynak, egyet pedig az állományrendszernek.

.Több lemez partícióinak kiosztása
[cols="1,1,1,1", frame="none", options="header"]
|===
| Partíció
| Állományrendszer
| Méret
| Leírás

|`b`
|-
|Lásd a leírást
|Ahogy már korábban is említettük, szét tudjuk osztani a lapozóállományt a lemezek között. Habár az `a` partíció szabad, a hagyományok mégis azt diktálják, hogy a lapozáshoz használt terület maradjon a `b` partíción.

|`e`
|/disk__n__
|A lemez többi része
|A lemez fennmaradó része egyetlen nagy partícióval fedhetõ le. Ez az `e` partíció helyett lehetne minden további nélkül az `a` partíció, azonban a hagyományok szerint az `a` partíciónak a rendszer gyökér állományrendszerét ([.filename]#/#) kell tartalmaznia. Nekünk ugyan nem kellene ezt a megszokást követnünk, azonban a sysinstall viszont így tesz, ezért ezzel a választással csak magunkkal teszünk jót. Az állományrendszer bárhová csatlakoztatható - ebben a példában a lemezeket rendre a [.filename]#/diskn# könyvtárakhoz csatoltuk, ahol az _n_ az adott lemez sorszáma. De itt természetesen más rendszert is követhetünk.
|===

A partíciók elrendezésének kigondolása után most már létre is hozathatjuk ezeket a sysinstall segítségével. Ekkor a következõ üzenetet fogjuk látni:

[source,shell]
....
                                 Message
 Now, you need to create BSD partitions inside of the fdisk
 partition(s) just created. If you have a reasonable amount of disk
 space (1GMB or more) and don't have any special requirements, simply
 use the (A)uto command to allocate space automatically. If you have
 more specific needs or just don't care for the layout chosen by
 (A)uto, press F1 for more information on manual layout.

                                [  OK  ]
                          [ Press enter or space ]
....

Az üzenet fordítása:

[source,shell]
....
                                  Üzenet
Most létre kell hoznunk az fdiskkel nemrég elkészített partíciókban a
BSD-s partíciókat. Ha van hozzá elegendő helyünk (1G vagy több) és
nincs semmilyen különleges elvárásunk, akkor egyszerűen csak osszuk
fel automatikusan az (A)uto paranccsal. Amennyiben azonban ennél
többre lenne szükségünk, vagy csak nincs szükségünk az (A)uto által
felkínált sémára, az F1 lenyomására bővebb információkat is kaphatunk
a kézi kiosztás lehetőségeiről.

                                [  OK  ]
            [ Nyomja le az Enter vagy a Szóköz billentyűt ]
....

Nyomjuk le a kbd:[Enter] billentyût a FreeBSD partíciószerkesztõjének, avagy a Disklabel elindításához.

A <<sysinstall-label>> mutatja a Disklabel elsõ elindulásakor megjelenõ képet. A képernyõ három részre tagolható.

A felsõ pár sorban a jelenleg használt lemez nevét láthatjuk, valamint azt a slice-ot, ami az általunk létrehozott partíciókat tartalmazza (itt a Disklabel a `Partition name` megnevezéssel hivatkozik a slice-ra). A képernyõn továbbá láthatjuk a slice-ban levõ szabad helyet is, vagyis azt a helyet, amely ugyan a slice-hoz tartozik, viszont még nem rendeltünk hozzá partíciót.

A képernyõ közepén találhatóak az eddig már létrehozott partíciók, az általuk tartalmazott állományrendszerek, azok mérete és az állományrendszerek létrehozására vonatkozó különbözõ beállítások.

A képernyõ alsó harmadában a Disklabel programban használható billentyûk felsorolása szerepel.

[[sysinstall-label]]
.A sysinstall Disklabel partíciószerkesztõje
image::disklabel-ed1.png[]

A Disklabel képes magától partíciókat készíteni a nekik megfelelõ alapértelmezett méretekkel. A partíciók automatikus méretét egy belsõ partícióméretezõ algoritmus számítja ki a lemez összmérete alapján. Próbáljuk most mi is ezt ki, és nyomjuk le az kbd:[A] billentyût. Ekkor a <<sysinstall-label2>> szerint illusztráltaknak megfelelõ képernyõt tapasztalhatunk. A használt lemez méretétõl függõen az alapértelmezett értékek megfelelõek lesznek vagy sem. Ez igazából nem számít, hiszen nem kell feltétlenül elfogadnunk az alapértelmezetten megállapított értékeket.

[NOTE]
====
Az alapértelmezett partícionálási sémában a [.filename]#/tmp# könyvtár nem a [.filename]#/# könyvtár része lesz, hanem saját partíciót kapott. Ezzel igyekszünk elkerülni, hogy a [.filename]#/# partíció átmenetileg tárolt állományokkal teljen be.
====

[[sysinstall-label2]]
.A sysinstall Disklabel partíciószerkesztõje, alapértelmezett értékekkel
image::disklabel-auto.png[]

Ha nem az alapértelmezett partíciókat szeretnénk használni, és le akarjuk váltani ezeket a saját magunk által megadottakra, akkor a nyílbillentyûkkel válasszuk ki az elsõ partíciót és a törléséhez nyomjuk meg a kbd:[D] billentyût. Hasonlóan járjunk el az összes többi javasolt partíció törléséhez.

Az elsõ (`a`, vagyis a [.filename]#/# könyvtárként, azaz a gyökérként csatolt) partíció elkészítéséhez elõször gyõzõdjünk arról, hogy a felsõ sorban a megfelelõ slice van kiválasztva, majd nyomjuk meg a kbd:[C] billentyût. Ekkor az új partíció méretét kérdezõ párbeszédablak jelenik meg (lásd: <<sysinstall-label-add>>). Itt a méret a lemez blokkjainak számában adható meg, amit viszont `M`-mel lezárva megabyte-ban, `G`-vel gigabyte-ban vagy `C`-vel cilinderben is kifejezhetünk.

[[sysinstall-label-add]]
.Szabad hely a gyökérpartíción
image::disklabel-root1.png[]

Az alapértelmezés szerint felkínált méret az egész slice-ot lefoglaló partíciót hoz létre. Amennyiben a korábbi példában tárgyalt partícióméreteket kívánjuk használni, akkor a kbd:[Backspace] billentyû használatával töröljük ki az így megadott értéket, és helyette gépeljük be, hogy `512M`, ahogy ez a <<sysinstall-label-add2>> segítségével is látható. A bevitelt zárjuk a btn:[OK] gomb lenyomásával.

[[sysinstall-label-add2]]
.A gyökérpartíció méretének szerkesztése
image::disklabel-root2.png[]

Miután meghatároztuk a partíció méretét, a telepítõ megkérdezi, hogy a létrehozandó partícióban állományrendszer vagy lapozóállomány foglaljon-e helyet. Ennek a párbeszédablakját a <<sysinstall-label-type>> mutatja. Mivel az elsõ partíciónk állományrendszert fog tartalmazni, ezért mindenképpen az [.guimenuitem]#FS# paramétert válasszuk ki, majd nyomjuk meg az kbd:[Enter] billentyût.

[[sysinstall-label-type]]
.A gyökérpartíció típusának kiválasztása
image::disklabel-fs.png[]

Végezetül, mivel egy állományrendszert hoztunk létre, meg kell mondanunk a Disklabelnek, hova csatlakoztassa. A hozzá tartozó párbeszédablak a <<sysinstall-label-mount>>n látható. A gyökér állományrendszer csatlakozási pontja a [.filename]#/#, ezért itt csak annyit adjunk meg, hogy `/` és zárjuk az kbd:[Enter] billentyû lenyomásával.

[[sysinstall-label-mount]]
.A gyökér csatlakozási pontjának megadása
image::disklabel-root3.png[]

A képernyõn látható lista ezután az újonnan létrehozott partíciónak megfelelõen frissül. A többi partícióra ugyanígy meg kell ismételnünk ezt a mûveletsort. Arra azonban figyeljünk, hogy a lapozásra használt partíciót létrehozásánál a szerkesztõ nem fogja megkérdezni a csatlakozási pontot, hiszen az ilyen típusú partíciókat sosem csatlakoztatjuk. A [.filename]#/usr#, vagyis az utolsó partíció készítése során a slice fennmaradó részének lefoglalásához már nyugodtan meghagyhatjuk a felajánlott értéket.

A FreeBSD partíciószerkesztõjének utolsó képernyõje a <<sysinstall-label4>>n hasonlóhoz, habár az általunk választott értékek minden bizonnyal eltérnek. A mûvelet befejezéséhez nyomjuk le a kbd:[Q] billentyût.

[[sysinstall-label4]]
.A Disklabel partíciószerkesztõ
image::disklabel-ed2.png[]

[[install-choosing]]
== A telepítendõ összetevõk kiválasztása

[[distset]]
=== A terjesztések típusának kiválasztása

A telepítendõ terjesztések típusa nagyban függ attól, hogy a rendszerünket mire szándékozzuk majd használni és mennyi szabad hely áll rendelkezésünkre. Az elõre megadott beállítások a lehetõ legkisebb konfiguráció telepítésétõl egészen a komplett rendszer telepítéséig terjednek. A UNIX(R) és/vagy FreeBSD világában még az új felhasználók számára szinte tökéletesen megfelelõnek bizonyulhat az egyik ilyen elõkészített beállítás kiválasztása. A terjesztések kiválogatása pedig általában a tapasztaltabb felhasználók számára lehet hasznos.

Az kbd:[F1] billentyûvel többet is megtudhatunk a terjesztések különbözõ típusairól és bennük található összetevõkrõl. Miután befejeztük a súgó áttanulmányozását, nyomjuk le az kbd:[Enter] billentyût, és ezzel visszatérünk a terjesztések kiválasztását tartalmazó menübe.

Ha grafikus felületet szeretnénk használni, akkor az X szerver beállítását az alapértelmezett munkakörnyezet beállítását a FreeBSD telepítése után kell megtenni. Az X szerver beállításáról részletesebben a crossref:x11[x11,Az X Window System]ban olvashatunk.

Ha egy saját rendszermag építését is fontolgatjuk, akkor olyan terjesztést válasszuk, amiben a forráskód (kernel source) is megtalálható. A saját rendszermag építésének hátterérõl és mikéntjérõl lásd a crossref:kernelconfig[kernelconfig,A FreeBSD rendszermag testreszabása]et.

Értelemszerûen a legsokoldalúbb rendszer az, amiben minden megtalálató. Így aztán, ha a lemezünk is megengedi, a nyilak és az kbd:[Enter] használatával válasszuk a [.guimenuitem]#All# (Minden) opciót, ahogy azt az <<distribution-set1>> is mutatja. Ha viszont úgy érezzük, hogy ehhez nem eléggé nagy a lemezünk, akkor válasszuk az igényeinkhez jobban illeszkedõ típust. Sokat azonban ne üljünk a tökéletes megoldás kiötlésén, hiszen ezek a terjesztések még a telepítés befejezése után is hozzáadhatóak a rendszerünkhöz.

[[distribution-set1]]
.A terjesztések kiválasztása
image::dist-set.png[]

[[portscol]]
=== A Portgyûjtemény telepítése

Miután kiválasztottuk a nekünk megfelelõ terjesztést, a telepítõprogram felajánlja a FreeBSD Portgyûjteményének (Ports Collection) telepítésének lehetõségét. A portok gyûjteménye a szoftverek telepítésének egyszerû és kényelmes módja. A Portgyûjtemény önmaga nem tartalmazza a szoftverek lefordításához szükséges forráskódot, hanem helyette csupán azokat az állományokat, amelyek a különbözõ külsõs programok letöltéséhez, fordításához és telepítéséhez kellenek. A crossref:ports[ports,Alkalmazások telepítése. csomagok és portok]ben megtalálhatjuk, miként is kell használni ezt a gyûjteményt.

A telepítõprogram nem fogja ellenõrizni a kibontásához szükséges helyet, ezért csak abban az esetben válasszuk ezt a lehetõséget, ha mindenképpen elfér a merevlemezünkön. A FreeBSD jelenlegi, {rel120-current} változatában a Portgyûjtemény nagyjából {ports-size} helyet foglal el a lemezen. A FreeBSD frissebb verzióiban nyugodtan feltételezhetünk ennél valamivel nagyobb értéket is.

[source,shell]
....
                         User Confirmation Requested
 Would you like to install the FreeBSD ports collection?

 This will give you ready access to over 20 000 ported software packages,
 at a cost of around 417 MB of disk space when "clean" and possibly much
 more than that if a lot of the distribution tarballs are loaded
 (unless you have the extra CDs from a FreeBSD CD/DVD distribution
 available and can mount it on /cdrom, in which case this is far less
 of a problem).

 The Ports Collection is a very valuable resource and well worth having
 on your /usr partition, so it is advisable to say Yes to this option.

 For more information on the Ports Collection & the latest ports,
 visit:
     http://www.FreeBSD.org/ports

                              [ Yes ]     No
....

Az üzenet fordítása:

[source,shell]
....
                      Felhasználói megerősítés szükséges
 Szeretné telepíteni a FreeBSD portjainak gyűjteményét?

 Ezen keresztül közel 20 000 portolt szoftvercsomaghoz tudunk
 könnyedén hozzáférni, amelyek "tiszta" állapotukban nagyjából
 417 MB lemezterületünkbe kerülnek, ami a későbbiekben
 valószínűleg majd növekedni fog, ahogy letöltjük a különböző
 szoftverekhez tartozó állományokat (hacsak nincs meg a FreeBSD
 valamelyik CD- vagy DVD alapú terjesztésének az összes lemeze,
 amelyeket a /cdrom könyvtárba csatlakoztatva el tudjuk ezeket érni,
 mert ekkor kevesebb gondunk lesz vele).

 A Portgyűjtemény egy nagyon értékes erőforrás, amelynek megéri helyet
 szentelni a /usr partíciónkon, ezért javasoljuk, hogy válassza az
 "Igen" opciót. A Portgyűjteményről és annak legújabb portjairól a
 http://www.FreeBSD.org/ports oldalon olvashat részletesebben.

                             [ Igen ]     Nem
....

A Portgyûjtemény telepítéséhez a btn:[yes] gombot, ennek kihagyásához pedig a btn:[no] gombot válasszuk ki a nyilakkal, majd az kbd:[Enter] lenyomásával mehetünk tovább. Ekkor a kiválasztott terjesztések menüje fog újra megjelenni.

[[distribution-set2]]
.A terjesztések telepítésének megerõsítése
image::dist-set2.png[]

Ha elégedettek vagyunk a beállításokkal, válasszuk ki a nyilakkal az [.guimenuitem]#Exit# menüpontot, gyõzõdjünk meg róla, hogy a btn:[OK] gombon állunk, majd nyomjuk le az kbd:[Enter] billentyût a folytatáshoz.

[[install-media]]
== A telepítés eszközének kiválasztása

Ha CD-rõl vagy DVD-rõl telepítünk, akkor a következõ képernyõn a nyílbillentyûkkel válasszuk ki a [.guimenuitem]#Install from a CDROM or DVD# (Telepítés CD-rõl vagy DVD-rõl) menüpontot. Ügyeljünk a btn:[OK] gomb kiválasztására is, majd a telepítés megkezdéséhez nyomjuk meg az kbd:[Enter] billenyût.

A telepítés másfajta módszereinek alkalmazásához válasszuk ki a menüpontok közül a nekünk megfelelõt és kövessük a megjelenõ utasításokat.

Az kbd:[F1] billentyû lenyomására megjelenik az adott telepítõeszközhöz tartozó súgó. Innen az kbd:[Enter] lenyomása után térhetünk vissza a menühöz.

[[choose-media]]
.A telepítési eszköz kiválasztása
image::media.png[]

[NOTE]
.elepítés FTP szerverrõl
====
Három FTP-s telepítési mód közül választhatunk: aktív, passzív vagy HTTP proxyn keresztül.

Aktív FTP: [.guimenuitem]#Install from an FTP server# (Telepítés FTP szerverrõl)::
Ezzel a beállítással az összes FTP-n keresztüli átvitel "aktív" módban történik. Ez tûzfalak esetén nem mûködik, de gyakran alkalmazható olyan régebbi FTP szerverek esetén, amelyek nem ismerik az passzív adatátvitelt. Ha (az alapértelmezett) passzív módban megakadna a kapcsolat, próbáljunk meg helyette az aktívat.

Passzív FTP: [.guimenuitem]#Install from an FTP server through a firewall# (Telepítés tûzfalon keresztül FTP szerverrõl)::
Ezzel a beállítással a sysinstall programot az FTP mûvelet végrehajtásakor a "passzív" mód használatára utasítjuk. Így át tudunk menni olyan tûzfalakon is, amelyek nem engedik a véletlenszerû TCP portokon érkezõ kapcsolatokat.

FTP HTTP proxyn keresztül: [.guimenuitem]#Install from an FTP server through a http proxy# (Telepítés HTTP proxyn keresztül FTP szerverrõl)::
Ezzel a beállítással megmondhatjuk a sysinstall programnak, hogy (egy böngészõhöz hasonlóan) a HTTP protokollon keresztül használja az FTP mûveletek elvégzéséhez használt proxyt. Ennek a proxynak lesz a feladata az átadott kérések lefordítása és elküldése az FTP szervernek. Ennek köszönhetõen át tudunk menni olyan tûzfalakon is, amelyek egyáltalán nem engednek semmilyen FTP mûveletet, azonban tartozik hozzájuk egy HTTP proxy. Ilyenkor az FTP szerver beállításai mellett meg kell adnunk ezt a HTTP proxyt is.

Az FTP szervert proxyn keresztül általában úgy érjük el, hogy a felhasználói név részeként egy "@" jellel elválasztva megadjuk a ténylegesen elérni kívánt szerver nevét. A proxy szerver ezután "helyettesíti" a valódi szervert. Például tegyük fel, hogy a `ftp.FreeBSD.org` szerverrõl akarunk telepíteni az 1234 porton várakozó `ize.minta.com` proxy használatával.

Ehhez lépjünk be a beállításokat tartalmazó menübe, állítsuk az FTP kapcsolathoz használt felhasználói nevet az `ftp@ftp.FreeBSD.org` értékre, majd jelszónak adjuk meg az e-mail címünket. Telepítési eszközként adjuk meg az FTP-t (vagy a passzív FTP-t, amennyiben a proxy ismeri) és a `ftp://ize.minta.com:1234/pub/FreeBSD` címet.

Mivel az `ftp.FreeBSD.org` címrõl származó [.filename]#/pub/FreeBSD# könyvtár a `ize.minta.com` szerveren keresztül érhetõ el számunkra, ezért lényegében _arról_ a géprõl fogunk telepíteni (amely pedig a telepítõ kéréseire elhozza a `ftp.FreeBSD.org` szervertõl az állományokat).
====

[[install-final-warning]]
== A telepítés véglegesítése

Ezután ha óhajtjuk, megkezdhetjük a telepítést. Ez egyben az utolsó lehetõségünk a telepítés megszakítására és merevlemezünket érintõ változtatások érvénytelenítésére.

[source,shell]
....
                       User Confirmation Requested
 Last Chance! Are you SURE you want to continue the installation?

 If you're running this on a disk with data you wish to save then WE
 STRONGLY ENCOURAGE YOU TO MAKE PROPER BACKUPS before proceeding!

 We can take no responsibility for lost disk contents!

                             [ Yes ]    No
....

Az üzenet fordítása:

[source,shell]
....
                    Felhasználói megerősítés szükséges
 Utolsó esély: BIZTOSAN folytatni kívánja a telepítést?

 Ha olyan lemezre szeretne telepíteni, amelyen fontos adatok
 találhatóak, HATÁROZOTTAN JAVASOLJUK, hogy a továbblépés előtt
 KÉSZÍTSEN RÓLUK MEGBÍZHATÓ BIZTONSÁGI MÁSOLATOT!

 Nem vállalunk semmilyen felelősséget az elvesztett adatokért!

                            [ Igen ]    Nem
....

A továbblépéshez válasszuk a btn:[yes] gombot és nyomjuk meg az kbd:[Enter] billentyût.

A telepítés idõtartama a kiválasztott terjesztéstõl, a telepítésre használt eszköztõl és számítógépünk sebességétõl függ. A folyamat elõrehaladásáról üzenetek sorozata tájékoztat minket.

A telepítés befejezése után a következõ üzenet jelenik meg:

[source,shell]
....
                               Message

Congratulations! You now have FreeBSD installed on your system.

We will now move on to the final configuration questions.
For any option you do not wish to configure, simply select No.

If you wish to re-enter this utility after the system is up, you may
do so by typing: /usr/sbin/sysinstall.

                                 [ OK ]

                      [  Press enter or space  ]
....

A szöveg fordítása:

[source,shell]
....
                               Üzenet

Gratulálunk, sikeresen telepítette a FreeBSD rendszert a számítógépére!

Most rátérünk az utolsó néhány kérdésre. A "Nem" választásával
egyszerűen átugorhatjuk mindazt, amit nem szeretnénk beállítani. Ezt a
segédprogramot a rendszer újbóli elindítása után a "/usr/sbin/sysinstall"
parancs begépelésével tudjuk elérni.

                                 [ OK ]

            [ Nyomja le az Enter vagy a Szóköz billentyűt ]
....

Az kbd:[Enter] billentyû lenyomásával megkezdhetjük a telepítés utáni beállításokat.

A btn:[no] gomb kiválasztásával és az kbd:[Enter] lenyomásával megszakíthatjuk a telepítést, így a rendszerünkön semmilyen változtatás nem történik. Ilyenkor a következõ üzenet jelenik meg:

[source,shell]
....
                                Message
Installation complete with some errors.  You may wish to scroll
through the debugging messages on VTY1 with the scroll-lock feature.
You can also choose "No" at the next prompt and go back into the
installation menus to retry whichever operations have failed.

                                 [ OK ]
....

Az üzenet fordítása:

[source,shell]
....
                                 Üzenet
A telepítés során hiba történt. A Scroll Lock használatával érdemes
átnézni a VTY1 terminál megjelenő üzeneteket. A következő ablakban a
"Nem" választásával vissza tudunk menni a telepítőmenühöz és
megpróbálkozhatunk ismét a sikertelen műveletek végrehajtásával.

                                 [ OK ]
....

Ez az üzenet azért jelent meg, mert semmit sem sikerült telepíteni. Innen az kbd:[Enter] megnyomásával térhetünk vissza a fõmenübe, majd onnan tudunk kilépni a telepítõbõl.

[[install-post]]
== A telepítés után

A sikeres telepítést különféle beállítások követik. Közülük az új FreeBSD rendszer indítása elõtt bármelyik megismételhetõ a beállítások opcióit tartalmazó menü újbóli használatával, vagy pedig a telepítés után a `sysinstall` parancs kiadásával, majd a [.guimenuitem]#Configure# (Beállítások) menüpont kiválasztásával.

[[inst-network-dev]]
=== A hálózati eszközök beállítása

A következõ képernyõ már nem jelenik meg, ha az FTP szerveren keresztüli telepítéshez korábban már beállítottuk a PPP kapcsolatot. Ez a korábbiakban említettek szerint állítható be.

Ha többet szeretnénk megtudni a helyi hálózatokról (LAN), vagy a FreeBSD-t átjáróként, illetve útválasztóként kívánjuk beállítani, olvassuk el az crossref:advanced-networking[advanced-networking,Egyéb haladó hálózati témák] címû fejezetet.

[source,shell]
....
                      User Confirmation Requested
   Would you like to configure any Ethernet or PPP network devices?

                             [ Yes ]   No
....

Fordítása:

[source,shell]
....
                   Felhasználói megerősítés szükséges
  Szeretnénk beállítani valamilyen Ethernet- vagy PPP hálózati eszközt?

                            [ Igen ]   Nem
....

A hálózati eszközeink beállításához válasszuk a btn:[yes] gombot, majd nyomjuk meg az kbd:[Enter] billentyût. Ellenkezõ esetben a btn:[no] gombbal mehetünk tovább.

[[ed-config1]]
.Az Ethernet-eszköz kiválasztása
image::ed0-conf.png[]

A beállítandó csatoló kiválasztásához használjuk a nyílbillentyûket és utána nyomjuk meg az kbd:[Enter] billentyût.

[source,shell]
....
                      User Confirmation Requested
       Do you want to try IPv6 configuration of the interface?

                              Yes   [ No ]
....

Fordítás:

[source,shell]
....
                   Felhasználói megerősítés szükséges
           Megpróbálkozik az IPv6 beállításával a csatolón?

                             Igen   [ Nem ]
....

A példánkban szereplõ helyi hálózatban az aktuális internetes protokoll (IPv4) egyelõre megfelelõ, ezért válasszuk a btn:[no] gombot és nyomjuk meg az kbd:[Enter] billentyût.

Amennyiben RA-szerveren keresztül egy már létezõ IPv6 hálózathoz csatlakozunk, akkor válasszuk a btn:[yes] gombot és nyomjuk meg az kbd:[Enter] billentyût. Ezt követõen az RA-szerverek felderítése kezdõdik meg, ami néhány másodpercig eltarthat.

[source,shell]
....
                             User Confirmation Requested
        Do you want to try DHCP configuration of the interface?

                              Yes   [ No ]
....

Az üzenet fordítása:

[source,shell]
....
                          Felhasználói megerősítés szükséges
            Megpróbálkozik a DHCP használatával a csatolón?

                             Igen   [ Nem ]
....

Ha nincs szükségünk a DHCP (Dynamic Host Configuration Protocol, azaz a Dinamikus állomáskonfigurációs protokoll) használatára, akkor a btn:[no] gomb kiválasztásával majd az kbd:[Enter] lenyomásával továbbléphetünk.

A btn:[yes] gomb kiválasztására elindul a dhclient nevû program, és amennyiben sikerrel jár, magától kitölti a hálózati beállításokra vonatkozó adatokat. Ennek részleteit a crossref:network-servers[network-dhcp,A hálózat automatikus beállítása (DHCP)]ben találhatjuk meg.

Az alábbi hálózati beállító képernyõ mutatja a helyi hálózat átjárójaként használni kívánt Ethernet-eszköz konfigurációját.

[[ed-config2]]
.Az ed0 hálózati beállítása
image::ed0-conf2.png[]

A kbd:[Tab] billentyûvel tudunk navigálni az adatlap mezõi között és kitölteni ezeket a megfelelõ információkkal:

Host (Számítógépnév)::
A számítógépünk teljes neve, amely a példában most `k6-2.example.com`.

Domain (Tartomány)::
Annak a tartománynak a neve, amelyben a számítógépünk a található. Ez itt konkrétan a `example.com`.

IPv4 Gateway (IPv4-átjáró)::
A helyben nem elérhetõ célok megközelítésére használt gép IP-címe. Ezt a mezõt mindenképpen töltsük ki akkor, ha a számítógépünk valamilyen hálózatba van kötve. Azonban _hagyjuk üresen_, ha a számítógép a hálózat átjárója az internet felé. Az IPv4 átjárót más néven "default gateway"-nek (alapértelmezett átjárónak) vagy "default route"-nak (alapértelmezett útvonalnak) is nevezik.

Name server (Névszerver)::
A helyi DNS (névfeloldó) szerverünk IP-címe. Ha nem található ilyen a helyi hálózatunkon, akkor az internet-szolgáltató DNS szerverének címét (a példában ez a `208.163.10.2`) adjuk meg.

IPv4 address (IPv4-cím)::
A csatoló IP-címe, amely az ábrán a `192.168.0.1`.

Netmask (Hálózati maszk)::
A helyi hálózatban használt címtartomány a `192.168.0.0` - `192.168.0.255`, amihez a `255.255.255.0` hálózati maszk tartozik.

Extra options to ifconfig (Az ifconfig további beállításai)::
Az `ifconfig` parancs adott csatolóra vonatkozó egyéb beállításai. Jelen esetünkben itt semmi sem szerepel.

Miután végeztünk, a kbd:[Tab] billentyû lenyomásával válasszuk ki a btn:[OK] gombot és nyomjuk le az kbd:[Enter] billentyût.

[source,shell]
....
                      User Confirmation Requested
        Would you like to bring the ed0 interface up right now?

                             [ Yes ]   No
....

A fordítás:

[source,shell]
....
                   Felhasználói megerősítés szükséges
                     Aktiválja most az ed0 csatolót?

                            [ Igen ]   Nem
....

A btn:[yes] gomb kiválasztásával, majd az kbd:[Enter] lenyomásával csatlakoztatjuk a számítógépet a hálózathoz, ami ezután használhatóvá válik. Ez azonban a telepítés számára nem jelent túlságosan sokat, hiszen ettõl függetlenül a számítógépet egyébként is újra kell majd indítanunk.

[[gateway]]
=== Az átjáró beállítása

[source,shell]
....
                       User Confirmation Requested
       Do you want this machine to function as a network gateway?

                              [ Yes ]    No
....

A fordítás:

[source,shell]
....
                    Felhasználói megerősítés szükséges
       Ezt a számítógépet hálózati átjáróként is használni akarja?

                             [ Igen ]    Nem
....

Ha a számítógépet a helyi hálózat átjárójaként használni akarjuk gépek közti csomagok továbbítására, akkor válasszuk a btn:[yes] gombot és nyomjuk meg hozzá az kbd:[Enter] billentyût. Ha viszont ez a gép csupán a hálózat egy tagja, akkor válasszuk a btn:[no] gombot és a folytatáshoz nyomjuk meg az kbd:[Enter] billentyût.

[[inetd-services]]
=== A hálózati szolgáltatások beállítása

[source,shell]
....
                      User Confirmation Requested
Do you want to configure inetd and the network services that it provides?

                               Yes   [ No ]
....

Fordítás:

[source,shell]
....
                   Felhasználói megerősítés szükséges
Beállítja az inetd démont és az általa felkínált hálózati szolgáltatásokat?

                              Igen   [ Nem ]
....

Ha itt a btn:[no] gombot választjuk, akkor ezzel kikapcsoljuk a különbözõ szolgáltatásokat, például a telnetd démont. Ez azt jelenti, hogy a távoli felhasználók nem lesznek képesek a telnet program használatával belépni erre a számítógépre. A helyi felhasználók viszont továbbra is képesek lesznek távoli számítógépeket elérni a telnet segítségével.

Az [.filename]#/etc/inetd.conf# átírásával azonban ezek a szolgáltatások késõbb természetesen engedélyezhetõek. A crossref:network-servers[network-inetd-overview,Áttekintés] foglalkozik a téma részleteivel.

A btn:[yes] gomb választásával már a telepítés során beállíthatjuk a szolgáltatásokat. Ekkor egy további párbeszédablak is felbukkan:

[source,shell]
....
                      User Confirmation Requested
The Internet Super Server (inetd) allows a number of simple Internet
services to be enabled, including finger, ftp and telnetd.  Enabling
these services may increase risk of security problems by increasing
the exposure of your system.

With this in mind, do you wish to enable inetd?

                             [ Yes ]   No
....

Fordítása:

[source,shell]
....
                   Felhasználói megerősítés szükséges
A fő internetes kiszolgáló (az inetd) számos egyszerű internetes
szolgáltatás, többek közt a finger, ftp és telnet elérését teszi
lehetővé. Ezen szolgáltatások engedélyezése azonban a felmerülő
biztonsági problémák kockázatát, mivel ezzel rendszerünket jobban
kitesszük támadásoknak.

Mindezek tudatában használni kívánja az inetd démont?

                            [ Igen ]   Nem
....

A folytatáshoz válasszuk a btn:[yes] gombot.

[source,shell]
....
                      User Confirmation Requested
inetd(8) relies on its configuration file, /etc/inetd.conf, to determine
which of its Internet services will be available.  The default FreeBSD
inetd.conf(5) leaves all services disabled by default, so they must be
specifically enabled in the configuration file before they will
function, even once inetd(8) is enabled.  Note that services for
IPv6 must be separately enabled from IPv4 services.

Select [Yes] now to invoke an editor on /etc/inetd.conf, or [No] to
use the current settings.

                             [ Yes ]   No
....

Fordítás:

[source,shell]
....
                   Felhasználói megerősítés szükséges
Az inetd(8) démonnak az elérhető internetes szolgáltatások
megállapításához szüksége van a beállításait tartalmazó
/etc/inetd.conf állományra. A FreeBSD-hez tartozó inetd.conf(5)
állomány alapértelmezés szerint az összes szolgáltatást letiltja,
ezért a működéséhez minden egyes szolgáltatást külön kell engedélyezni
az említett állományban, még abban az esetben is, ha az inetd(8)
démont korábban már engedélyeztük. Az IPv6 szolgáltatások az IPv4
szolgáltatásoktól külön engedélyezendőek.

Az [ Igen ] választásával behívjuk az /etc/inetd.conf szerkesztését,
míg a [ Nem ] választásával pedig az imént felvázolt beállításokat
fogadjuk el.

                            [ Igen ]   Nem
....

A btn:[yes] gomb kiválasztásával lehetõségünk nyílik szolgáltatásokat engedélyezni a sorok elején található `#` jel törlésével.

[[inetd-edit]]
.Az [.filename]#inetd.conf# módosítása
image::edit-inetd-conf.png[]

Miután felvettük az összes használni kívánt szolgáltatást, az kbd:[Esc] billentyû lenyomásával elõhozhatjuk azt a menüt, ahol elmenthetjük a módosításainkat és kiléphetünk.

[[ssh-login]]
=== Az SSH-n keresztüli bejelentkezés engedélyezése

[source,shell]
....
                      User Confirmation Requested
                  Would you like to enable SSH login?
                           Yes        [  No  ]
....

Fordítás:

[source,shell]
....
                   Felhasználói megerősítés szükséges
               Engedélyezi az SSH-n keresztüli bejelentkezést?
                          Igen        [  Nem  ]
....

A btn:[yes] gomb kiválasztása engedélyezi az OpenSSH-hoz tartozó man:sshd[8] démont, aminek segítségével a számítógépünkre biztonságosan be tudunk jelentkezni távolról. Az OpenSSH részleteirõl lásd a crossref:security[openssh,OpenSSH]t.

[[ftpanon]]
=== Anonim FTP

[source,shell]
....
                      User Confirmation Requested
 Do you want to have anonymous FTP access to this machine?

                              Yes    [ No ]
....

Fordítás:

[source,shell]
....
                   Felhasználói megerősítés szükséges
 Hozzáférhető legyen ez a számítógép anonim FTP használatán keresztül?

                             Igen    [ Nem ]
....

[[deny-anon]]
==== Az anonim FTP tiltása

Az alapértelmezett btn:[no] gomb kiválasztásával és az kbd:[Enter] billentyû lenyomásával a jelszóval védett FTP hozzáféréssel rendelkezõ felhasználók továbbra is elérhetik a számítógépünket.

[[ftpallow]]
==== Az anonim FTP engedélyezése

Ha ezt választjuk, akkor anonim FTP kapcsolaton keresztül bárki hozzáférhet a számítógépünkhöz. Ebben az esetben azonban alaposan meg kell fontolnunk néhány biztonsági következményt. A beállítással járó kockázatokról az crossref:security[security,Biztonság]ben olvashatunk többet.

Az anonim FTP bekapcsolásához a nyílbillentyûkkel válasszuk ki a btn:[yes] feliratú gombot és nyomjuk meg az kbd:[Enter] billentyût. Ekkor egy további párbeszédablak is megjelenik:

[source,shell]
....
                       User Confirmation Requested
 Anonymous FTP permits un-authenticated users to connect to the system
 FTP server, if FTP service is enabled.  Anonymous users are
 restricted to a specific subset of the file system, and the default
 configuration provides a drop-box incoming directory to which uploads
 are permitted.  You must separately enable both inetd(8), and enable
 ftpd(8) in inetd.conf(5) for FTP services to be available.  If you
 did not do so earlier, you will have the opportunity to enable inetd(8)
 again later.

 If you want the server to be read-only you should leave the upload
 directory option empty and add the -r command-line option to ftpd(8)
 in inetd.conf(5)

 Do you wish to continue configuring anonymous FTP?

                          [ Yes ]         No
....

Az üzenet fordítása:

[source,shell]
....
                     Felhasználói megerősítés szükséges

 Az anonim FTP használatával a rendszer FTP szolgáltatásához
 hitelesítetlen felhasználók is hozzáférhetnek, amennyiben az aktív. A
 névtelen felhasználók az állományrendszernek csak egy részét érhetik
 el, valamint az alapbeállítások szerint a feltöltést egy külön erre
 a célra fenntartott könyvtárba végezhetik el. Az FTP szolgáltatás
 használatát külön engedélyeznünk kell az inetd(8) démon részéről és
 az inetd.conf(5) állományban található ftpd(8) démon aktiválásával.
 Ha eddig még nem tettük volna meg, akkor az inetd(8) használatát
 később még újra engedélyezhetjük.

 Ha csak letöltést kívánunk engedni, akkor hagyjuk a feltöltési
 könyvtárra vonatkozó paramétert üresen és az inetd.conf(5)
 állományban az ftpd(8) parancssorához adjuk hozzá az -r kapcsolót.

 Folytatja az anonim FTP beállítását?

                         [ Igen ]         Nem
....

Az üzenet értesít minket arról, hogy az anonim FTP kapcsolatok engedélyezéséhez az FTP szolgáltatást az [.filename]#/etc/inetd.conf# állományban is be kell majd kapcsolni, lásd <<inetd-services>>. Válasszuk a btn:[yes] gombot és a folytatáshoz nyomjuk meg az kbd:[Enter] billentyût. Ekkor a következõ képernyõ jön elõ:

[[anon-ftp2]]
.Az anonim FTP alapbeállításai
image::ftp-anon1.png[]

A beállítások kitöltése során a kbd:[Tab] billentyûvel mozoghatunk az adatmezõk között:

UID (felhasználói azonosító)::
A névtelen FTP felhasználókhoz társított felhasználói azonosító. A feltöltött állomány tulajdonosa ez az azonosító lesz.

Group (csoport)::
A névtelen FTP felhasználók csoportja.

Comment (megjegyzés)::
Ez a szöveg szerepel a felhasználónál az [.filename]#/etc/passwd# állományban.

FTP Root Directory (az FTP gyökere)::
Itt találhatóak az anonim FTP-n keresztül elérhetõ állományok.

Upload Subdirectory (feltöltési könyvtár)::
A névtelen FTP felhasználók által feltöltött állományok ide kerülnek.

Az FTP gyökere alapból a [.filename]#/var# könyvtár lesz. Ha a becsült FTP-forgalom lebonyolításához itt nem rendelkezünk elegendõ hellyel, akkor az [.filename]#/usr# könyvtárban található [.filename]#/usr/ftp# alkönyvtár is beállítható az FTP gyökerének.

Ha elfogadhatónak találjuk az értékeket, nyomjuk le az kbd:[Enter] billentyût a folytatáshoz.

[source,shell]
....
                          User Confirmation Requested
         Create a welcome message file for anonymous FTP users?

                              [ Yes ]    No
....

Fordítás:

[source,shell]
....
                       Felhasználói megerősítés szükséges
        Létre kíván hozni egy köszöntő üzenetet tartalmazó állományt
        az anonim FTP felhasználók számára?

                             [ Igen ]    Nem
....

A btn:[yes] választásával és az kbd:[Enter] megnyomásával az üzenet szerkesztéséhez egy szövegszerkesztõ fog elindulni.

[[anon-ftp4]]
.Az FTP köszöntõ üzenetének szerkesztése
image::ftp-anon2.png[]

Ez az `ee` szövegszerkesztõ. Az üzenet átírásához használjuk a megadott utasításokat, de akár késõbb is módosíthatjuk ezt a kedvenc szövegszerkesztõnkkel. Ehhez a módosítandó állomány neve és helye a szerkesztõ képernyõjének alján olvasható.

A kilépéshez az kbd:[Esc] lenyomására felbukkanó menüben alapból az [.guimenuitem]#a) leave editor# (kilépés a szerkesztõbõl) menüpont érhetõ el, ezért itt az kbd:[Enter] lenyomásával léphetünk tovább. Az kbd:[Enter] ismételt lenyomásával elmenthetjük a módosításainkat.

[[nfsconf]]
=== A hálózati állományrendszer beállítása

A hálózati állományrendszer (Network File System, NFS) állományok közzétételét teszi lehetõvé hálózaton keresztül. Használata során egy számítógép beállítható szervernek, kliensnek vagy akár mindkettõnek. Ezzel kapcsolatban a crossref:network-servers[network-nfs,A hálózati állományrendszer (NFS)] ajánlott elolvasásra.

[[nsf-server-options]]
==== Az NFS szerver

[source,shell]
....
                       User Confirmation Requested
 Do you want to configure this machine as an NFS server?

                              Yes    [ No ]
....

A fordítása:

[source,shell]
....
                   Felhasználói megerősítés szükséges
   Be akarja állítani NFS szervernek ezt a számítógépet?

                             Igen    [ Nem ]
....

Ha nincs szükségünk a hálózati állományrendszer szerver részére, akkor válasszuk a btn:[no] gombot és nyomjuk le az kbd:[Enter] billentyût.

Amennyiben a btn:[yes] gombot választjuk, egy üzenet fogja közölni velünk, hogy létre kell hoznunk az [.filename]#exports# állományt.

[source,shell]
....
                               Message
Operating as an NFS server means that you must first configure an
/etc/exports file to indicate which hosts are allowed certain kinds of
access to your local filesystems.
Press [Enter] now to invoke an editor on /etc/exports
                               [ OK ]
....

Az üzenet fordítása:

[source,shell]
....
                               Üzenet
Az NFS szerver működtetéséhez először az /etc/exports állomány
összeállításán keresztül meg kell adnunk, hogy milyen gépek milyen
típusú hozzáféréssel rendelkezzenek a helyi állományrendszereinken.
Az [Enter] lenyomására megkezdődik az /etc/exports állomány
szerkesztése.
                              [ OK ]
....

Az kbd:[Enter] billentyû lenyomásával továbbléphetünk. Ekkor az [.filename]#exports# állomány létrehozására és szerkesztésére egy szövegszerkesztõ indul el.

[[nfs-server-edit]]
.Az [.filename]#exports# szerkesztése
image::nfs-server-edit.png[]

A exportálni kívánt állományrendszerek felsorolásához használjuk képernyõn a megadott utasításokat, vagy tegyük meg ezt késõbb az általunk választott szövegszerkesztõ segítségével. Ilyenkor ne felejtsük el megjegyezni az állomány képernyõ alján látható nevét és helyét.

Amikor végeztünk, az kbd:[Esc] billentyûvel felhozható menüben alapból az [.guimenuitem]#a) leave editor# (kilépés a szövegszerkesztõbõl) menüpont aktív, ezért itt a folytatáshoz egyszerûen nyomjuk le az kbd:[Enter] billentyût.

[[nfs-client-options]]
==== Az NFS kliens

Az NFS kliens beállításával NFS szerverekhez tudunk hozzáférni.

[source,shell]
....
                       User Confirmation Requested
 Do you want to configure this machine as an NFS client?

                              Yes   [ No ]
....

Fordítás:

[source,shell]
....
                    Felhasználói megerősítés szükséges
      Beállítja NFS kliensnek ezt a számítógépet?

                             Igen   [ Nem ]
....

A nyílbillentyûkkel igényeinknek megfelelõen válasszuk a btn:[yes] vagy btn:[no] gombokat és utána nyomjuk meg az kbd:[Enter] billentyût.

[[console]]
=== A rendszerkonzol beállításai

Számos beállítás kapcsolódik a rendszerben található konzolok testreszabásához.

[source,shell]
....
                      User Confirmation Requested
       Would you like to customize your system console settings?

                              [ Yes ]  No
....

Fordítás:

[source,shell]
....
                   Felhasználói megerősítés szükséges
               Testreszabja a rendszerkonzol beállításait?

                             [ Igen ]  Nem
....

A beállítások megtekintéséhez és megváltoztatásához válasszuk a btn:[yes] gombot és nyomjuk le az kbd:[Enter] billentyût.

[[saver-options]]
.A rendszerkonzol beállításai
image::console-saver1.png[]

A képernyõkímélõ beállítása egy gyakori opció. A nyilak használatával álljunk a [.guimenuitem]#Saver# menüpontra, majd nyomjuk le az kbd:[Enter] billentyût.

[[saver-select]]
.A képernyõkímélõ beállításai
image::console-saver2.png[]

A nyilakkal válasszuk ki a használni kívánt képernyõkímélõt és nyomjuk meg hozzá az kbd:[Enter] billentyût. Ekkor a rendszerkonzol beállításait tartalmazó menü jelenik meg ismét.

Az aktivizálódás ideje alapbeállítás szerint 300 másodperc. Ennek megváltoztatásához válasszuk ismét a [.guimenuitem]#Saver# menüpontot. A képernyõkímélõ beállításait tartalmazó menüben a nyílbillentyûkkel válasszuk a [.guimenuitem]#Timeout# (Idõkorlát) menüpontot és nyomjuk meg az kbd:[Enter] billentyût. Ekkor egy párbeszédablak jelenik meg:

[[saver-timeout]]
.A képernyõkímélõhöz tartozó idõkorlát beállítása
image::console-saver3.png[]

Miután megváltoztattuk az értéket, a rendszerkonzol beállításához a btn:[OK] gomb kiválasztásával, majd az kbd:[Enter] billentyû lenyomásával térhetünk vissza.

[[saver-exit]]
.Kilépés a rendszerkonzol beállító menüjébõl
image::console-saver4.png[]

A [.guimenuitem]#Exit# (Kilépés) választásával és az kbd:[Enter] lenyomásával folytathatjuk tovább a telepítés utólagos beállításait.

[[timezone]]
=== Az idõzóna beállítása

Ha kiválasztjuk számítógépünk számára a megfelelõ idõzónát, akkor lehetõvé tesszük, hogy magától elvégezze a helyi idõhöz kapcsolódó összes szükséges korrekciót és helyesen kezelje az idõzónákhoz kapcsolódó többi funkciót.

A példában az Egyesült Államok keleti idõzónájában elhelyezkedõ számítógépet láthatunk. A mi beállításaink természetesen a saját földrajzi helyzetünktõl függenek.

[source,shell]
....
                      User Confirmation Requested
          Would you like to set this machine's time zone now?

                            [ Yes ]   No
....

Fordítás:

[source,shell]
....
                    Felhasználói megerősítés szükséges
                 Beállítja most a számítógép időzónáját?

                           [ Igen ]   Nem
....

A btn:[yes] gomb és az kbd:[Enter] billentyû segítségével kiválaszthatjuk az idõzóna beállítását.

[source,shell]
....
                       User Confirmation Requested
 Is this machine's CMOS clock set to UTC? If it is set to local time
 or you don't know, please choose NO here!

                              Yes   [ No ]
....

Fordítás:

[source,shell]
....
                     Felhasználói megerősítés szükséges
 A számítógép órája az egységes világidőhöz (UTC) van beállítva? Ha a
 helyi időhöz vagy nem tudjuk, akkor itt válasszuk a NEM gombot!

                             Igen   [ Nem ]
....

A számítógépünk órájának beállításának megfelelõen válasszuk a btn:[yes] vagy btn:[no] gombot, és nyomjuk meg az kbd:[Enter] billentyût.

[[set-timezone-region]]
.A térség kiválasztása
image::timezone1.png[]

A nyilakkal kiválasztható a megfelelõ térség, amit aztán az kbd:[Enter] billentyûvel tudunk lezárni.

[[set-timezone-country]]
.Az ország kiválasztása
image::timezone2.png[]

A megfelelõ ország a nyílbillentyûkkel, valamint az kbd:[Enter] billentyûvel választható ki.

[[set-timezone-locality]]
.Az idõzóna kiválasztása
image::timezone3.png[]

A nekünk megfelelõ idõzóna a nyilakkal választható meg, amit ezután az kbd:[Enter] billentyûvel tudunk jóváhagyni.

[source,shell]
....
                            Confirmation
            Does the abbreviation 'EDT' look reasonable?

                            [ Yes ]   No
....

Az üzenet fordítása:

[source,shell]
....
                             Megerősítés
                 Ezek szerint az 'EDT' elfogadható?

                           [ Igen ]   Nem
....

Erõsítsük meg, hogy az idõzóna helyes-e. Ha rendbenlevõnek látszik, nyomjuk meg az kbd:[Enter] billentyût a folytatáshoz.

[[linuxcomp]]
=== Linux binárisok használata

[NOTE]
====
Ez a rész csak a FreeBSD 7._X_ telepítésére vonatkozik, FreeBSD 8._X_ esetén ez a képernyõ nem jelenik meg.
====

[source,shell]
....
                      User Confirmation Requested
          Would you like to enable Linux binary compatibility?

                            [ Yes ]   No
....

A fordítás:

[source,shell]
....
                   Felhasználói megerősítés szükséges
               Engedélyezi a Linux binárisok futtatását?

                           [ Igen ]   Nem
....

A btn:[yes] gomb kiválasztásával és az kbd:[Enter] lenyomásával megengedjük, hogy a Linuxra készült szoftvereket futtassunk FreeBSD-n. A telepítõ ennek biztosításához még további csomagokat is fel fog rakni.

Ha FTP-n keresztül telepítünk, akkor a számítógépnek csatlakoznia kell az internetre. Ilyenkor elõfordulhat, hogy az FTP szerveren nem találhatóak meg a Linux(R) kompatibilitással kapcsolatos csomagok. Ezeket azonban késõbb is telepíthetjük.

[[mouse]]
=== Az egér beállításai

Ezen beállítás használatával egy háromgombos egérrel lehetõségünk adódik a konzol és a felhasználói programok között kivágni és bemásolni szövegeket. Kétgombos egér használata esetén nézzük meg a man:moused[8] man oldalán, miként tudjuk emulálni a háromgombos mûködést. A következõ példa egy nem USB-s (tehát PS/2-es vagy soros portra csatlakozó) egér beállítását illusztrálja:

[source,shell]
....
                      User Confirmation Requested
         Does this system have a PS/2, serial, or bus mouse?

                            [ Yes ]    No 
....

Fordítás:

[source,shell]
....
                   Felhasználói megerősítés szükséges
      Csatlakozik a rendszeréhez PS/2-es, soros vagy buszos egér?

                           [ Igen ]    Nem
....

A PS/2, soros vagy buszos egér használatához válasszuk a btn:[yes] gombot, illetve az USB-s egérhez pedig a btn:[no] gombot, majd nyomjuk meg az kbd:[Enter] billentyût.

[[mouse-protocol]]
.Az egér által használt protokoll típusának beállítása
image::mouse1.png[]

A nyílbillentyûk használatával keressük ki a [.guimenuitem]#Type# (Típus) menüpontot és nyomjuk le az kbd:[Enter] billentyût.

[[set-mouse-protocol]]
.Az egér protokolljának beállítása
image::mouse2.png[]

A példában használt egér típusa PS/2, ezért itt a alapértelmezés szerint felkínált [.guimenuitem]#Auto# megfelelõ. A protokoll megváltoztatásához a nyilakkal válasszunk ki egy másikat. Ezután gondoskodjunk róla, hogy az btn:[OK] gombot választottuk ki és a kilépéshez nyomjuk meg az kbd:[Enter] billentyût.

[[config-mouse-port]]
.Az egér portjának beállítása
image::mouse3.png[]

A nyílbillentyûkkel válasszuk ki a [.guimenuitem]#Port# menüpontot és nyomjuk meg az kbd:[Enter] billentyût.

[[set-mouse-port]]
.Az egér portjának kiválasztása
image::mouse4.png[]

Mivel a példában szereplõ rendszerhez egy PS/2 egér csatlakozik, ezért az alapértelmezett [.guimenuitem]#PS/2# menüpont megfelelõnek tûnik. A port megváltoztatásához használjuk a nyilakat, majd nyomjuk le az kbd:[Enter] billentyût.

[[test-daemon]]
.Az egérdémon engedélyezése
image::mouse5.png[]

Befejezésül a egérhez tartozó démon aktiválásához és kipróbálásához válasszuk ki a nyilakkal az [.guimenuitem]#Enable# (Engedélyezés) menüpontot.

[[test-mouse-daemon]]
.Az egérdémon kipróbálása
image::mouse6.png[]

Próbáljuk mozgatni a képernyõn megjelenõ egérkurzort, és ellenõrizzük, hogy a kurzor a mozdulatainknak megfelelõen reagál-e. Ha mindent rendben találunk, akkor válasszuk a btn:[yes] gombot és nyomjuk le az kbd:[Enter] billentyût. Ellenkezõ esetben az egeret nem jól állítottuk be - válasszuk a btn:[no] gombot és kísérletezzünk tovább más beállításokkal.

Az utólagos beállítások folytatásához válasszuk elõször az [.guimenuitem]#Exit# (Kilépés) menüpontot, majd nyomjuk meg az kbd:[Enter] billentyût.

[[packages]]
=== Csomagok telepítése

A csomagok elõre lefordított binárisokat tartalmaznak, és használatukkal igen kényelmesen tudunk szoftvereket telepíteni.

Szemléltetés céljából most bemutatjuk az egyik ilyen csomag telepítését. Természetesen igény szerint más csomagokat is hozzávehetünk. A telepítés után a `sysinstall` parancs használható további csomagok telepítésére.

[source,shell]
....
                     User Confirmation Requested
 The FreeBSD package collection is a collection of hundreds of
 ready-to-run applications, from text editors to games to WEB servers
 and more. Would you like to browse the collection now?

                            [ Yes ]   No
....

Az üzenet fordítása:

[source,shell]
....
                 Felhasználói megerősítés szükséges
 A FreeBSD csomaggyűjteménye többezernyi azonnal használható
 alkalmazást tartalmaz, a szövegszerkesztőktől a játékokon keresztül a
 WEBszervereken át szinte mindent. Át kívánja lapozni most ezt a
 gyűjteményt?

                           [ Igen ]   Nem
....

A btn:[yes] kiválasztása és az kbd:[Enter] lenyomása után a csomagválasztó képernyõ következik:

[[package-category]]
.A csomagok kategóriájának kiválasztása
image::pkg-cat.png[]

Ekkor csak az adott telepítõeszközön elérhetõ csomagok fognak megjelenni.

Az összes csomagot az [.guimenuitem]#All# (Mind) menüpont kiválasztásával láthatjuk, vagy leszûkíthetjük ezt egy adott kategóriára is. Álljunk a kiválasztott kategóriához tartozó menüpontra és nyomjuk meg az kbd:[Enter] billentyût.

Ezután egy menü fogja felsorolni az adott kategórián belül telepíthetõ csomagokat:

[[package-select]]
.Csomag kiválasztása
image::pkg-sel.png[]

A példában a bash parancsértelmezõt választottuk ki. Válogassunk kedvünkre a csomagok között, és álljunk a telepíteni kívántakra, majd a kbd:[Szóköz] billentyû lenyomásával jelöljük be ezeket. Minden egyes csomag rövid leírása a képernyõ bal alsó sarkában olvasható.

A kbd:[Tab] billentyû segítségével mozoghatunk az utoljára kiválasztott csomag, az btn:[OK] és btn:[Cancel] gombok között.

Miután bejelöltük az összes telepítésre szánt csomagot, a csomagválasztó menübe úgy tudunk visszatérni, ha a kbd:[Tab] billentyûvel átváltunk az btn:[OK] gombra és nyomjuk meg az kbd:[Enter] billentyût.

Ezeken felül a bal és jobb nyilak használhatóak az btn:[OK] és btn:[Cancel] gombok közti váltásra. Ugyanezzel a módszerrel választható ki az btn:[OK] gomb is, ami után az kbd:[Enter] billentyû megnyomásával visszajutunk a csomagválasztó menübe.

[[package-install]]
.Csomagok telepítése
image::pkg-install.png[]

A nyilakkal és a kbd:[Tab] billentyûvel válasszuk ki az btn:[Install] (Telepítés) gombot és nyomjuk meg az kbd:[Enter] billentyût. Ekkor meg kell erõsítenünk a csomagok telepítését:

[[package-install-confirm]]
.Csomagok telepítésének megerõsítése
image::pkg-confirm.png[]

Az btn:[OK] kiválasztása majd az kbd:[Enter] billentyû lenyomása indítja el a csomagok telepítését. A telepítés befejezéséig különbözõ üzenetek fognak megjelenni. Figyeljünk az ilyenkor felbukkanó hibaüzenetekre!

A beállítások véglegesítése a csomagok telepítése után folytatódik. Amennyiben egyetlen csomagot sem választottunk és szeretnénk továbblépni, akkor is az btn:[Install] (Telepítés) gombot válasszuk.

[[addusers]]
=== Felhasználók és csoportok felvétele

A telepítés során legalább egy felhasználót érdemes hozzáadnunk a rendszerhez, mivel a rendszer használatához így nem kell `root` felhasználóként bejelentkezni. Általánosságban véve ahhoz egyébként is kicsi a gyökérpartíció, hogy `root` felhasználóként (rendszeradminisztrátorként) futtassunk rajta programokat, és gyorsan be is telik. A nagyobb veszélyt azonban itt olvashatjuk:

[source,shell]
....
                     User Confirmation Requested
 Would you like to add any initial user accounts to the system? Adding
 at least one account for yourself at this stage is suggested since
 working as the "root" user is dangerous (it is easy to do things which
 adversely affect the entire system).

                            [ Yes ]   No
....

[source,shell]
....
                  Felhasználói megerősítés szükséges
 Szeretnénk mosta rendszerbe felvenni felhasználói fiókokat? Ebben a
 lépésben legalább egy felhasználó felvétele javasolt, hiszen "root"
 felhasználóként veszélyes dolgozni (mivel így könnyen tehetünk olyan
 dolgokat, amelyek káros hatással lehetnek rendszerünkre).

                           [ Igen ]   Nem
....

Ezért válasszuk a btn:[yes] gombot és az kbd:[Enter] billentyû lenyomásával lépjünk tovább a felhasználók felvételéhez.

[[add-user2]]
.Felhasználók kiválasztása
image::adduser1.png[]

A nyílbillentyûkkel válasszuk ki a [.guimenuitem]#User# (Felhasználó) menüpontot és nyomjuk meg az kbd:[Enter] billentyût.

[[add-user3]]
.A felhasználó adatainak megadása
image::adduser2.png[]

Amikor a kbd:[Tab] billentyûvel lépkedünk a kitöltendõ mezõk között, a képernyõ alsó részén az alábbi leírások magyarázzák az egyes mezõk tartalmát:

Login ID (Bejelentkezési azonosító)::
Az új felhasználó bejelentkezési neve (kötelezõ).

UID (Felhasználói azonosító)::
A felhasználó számszerû azonosítója (automatikusan létrejön, ha üresen hagyjuk).

Group (Csoport)::
A felhasználó bejelentkezési csoportjának neve (automatikusan létrejön, ha üresen hagyjuk).

Password (Jelszó)::
A felhasználó jelszava (óvatosan bánjunk ezzel a mezõvel!)

Full name (Teljes név)::
A felhasználó teljes neve (megjegyzés).

Member groups (További csoportok)::
A felhasználó ezen csoportoknak is tagja (tehát rendelkezik az engedélyeikkel).

Home directory (Felhasználói könyvtár)::
A felhasználó saját könyvtára (ha üresen hagyjuk, az alapértelmezés szerint töltõdik ki).

Login shell (Parancsértelmezõl)::
A felhasználó által használt parancsértelmezõ (ha üresen hagyjuk, az alapértelmezés szerint töltõdik, mint például [.filename]#/bin/sh#).

Az ábrán a bejelentkezés után használt parancsértelmezõt a [.filename]#/bin/sh# parancsértelmezõrõl a [.filename]#/usr/local/bin/bash# parancsértelmezõre változtattuk, így most a korábban telepített bash parancsértelmezõt fogjuk használni. Itt ne is próbáljunk nem létezõ parancsértelmezõt kiválasztani, hiszen ekkor nem tudunk majd bejelentkezni. A BSD világban egyébként a C shell a leggyakrabban használt, amelyet a [.filename]#/bin/tcsh# megadásával választhatjuk ki.

Az ábrán szereplõ felhasználót ezenkívül még a `wheel` csoportba is felvettük, aminek köszönhetõen képes lesz a rendszerünkben a `root` felhasználói jogaival rendelkezõ rendszeradminisztrátorrá válni.

Amikor mindent megfelelõnek találunk, nyomjunk az btn:[OK] gombra és ekkor ismét a felhasználók és csoportok karbantartását tartalmazó menü jelenik meg:

[[add-user4]]
.Kilépés a felhasználók és csoportok menüjébõl
image::adduser3.png[]

Csoportokat is létre tudunk hozni, amennyiben erre szükségünk lenne. Ez a rész a telepítés befejezése után továbbra is elérhetõ a `sysinstall` parancs segítségével.

Amikor befejeztük a felhasználók hozzáadását, a nyilakkal válasszuk ki az [.guimenuitem]#Exit# (Kilépés) menüpontot és a telepítés folytatásához nyomjuk meg az kbd:[Enter] billentyût.

[[rootpass]]
=== A `root` felhasználó jelszavának megadása

[source,shell]
....
                        Message
 Now you must set the system manager's password.
 This is the password you'll use to log in as "root".

                         [ OK ]

               [ Press enter or space ]
....

Fordítása:

[source,shell]
....
                         Üzenet
 Most meg kell adnia a rendszergazda jelszavát. Ezt a jelszót
 kell a "root" felhasználó bejelentkezésekor használni.

                         [ OK ]

     [ Nyomja le az Enter vagy a Szóköz billentyűt ]
....

A `root` felhasználó jelszavának beállításához nyomjuk meg az kbd:[Enter] billentyût.

A jelszót kétszer kell megadnunk. Felesleges megemlíteni, hogy gondoskodjunk arról az esetrõl is, ha véletlenül elfelejtenénk ezt a jelszót. Megemlítjük, hogy az itt begépelt jelszó nem lesz látható és a betûk helyett sem jelennek meg csillagok.

[source,shell]
....
New password:
Retype new password :
....

A jelszó sikeres megadása után a telepítés folytatódik.

[[exit-inst]]
=== Kilépés a telepítõbõl

Ha be szeretnénk még állítani <<network-services,egyéb hálózati szolgáltatást>> vagy valamilyen más konfigurációs lépést kívánunk még elvégezni, ezen a ponton megtehetjük vagy a telepítés után a `sysinstall` parancs kiadásával.

[source,shell]
....
                     User Confirmation Requested
 Visit the general configuration menu for a chance to set any last
 options?

                              Yes   [ No ]
....

Fordítás:

[source,shell]
....
                  Felhasználói megerősítés szükséges
 Végignézi még utoljára a beállításokat arra az esetre, ha véletlenül
 kihagytunk volna valamit?

                             Igen   [ Nem ]
....

Ha a nyilakkal a btn:[no] gombot választjuk, majd megnyomjuk rajta az kbd:[Enter] billentyût, akkor visszatérünk a telepítõ fõmenüjébe.

[[final-main]]
.Kilépés a telepítõbõl
image::mainexit.png[]

Válasszuk ki a nyílbillentyûkkel a btn:[X Exit Install] (Kilépés a telepítõbõl) gombot és nyomjuk meg az kbd:[Enter] billentyût. Ezután meg kell erõsítenünk kilépési szándékunkat:

[source,shell]
....
                     User Confirmation Requested
 Are you sure you wish to exit? The system will reboot.

                            [ Yes ]   No
....

Fordítás:

[source,shell]
....
                  Felhasználói megerősítés szükséges
         Valóban ki akar lépni? A rendszer ezt követően újra fog
         indulni!

                           [ Igen ]    Nem
....

Válasszuk a btn:[yes] gombot. Ha CD-meghajtóról indítottuk a telepítést, akkor a következõ üzenet fog figyelmeztetni minket a lemez kivételére:

[source,shell]
....
                     Message
 Be sure to remove the media from the drive.

                    [ OK ]
           [ Press enter or space ]
....

Fordítás:

[source,shell]
....
                     Üzenet
 Ne felejtsük el kivenni a CD-lemezt a meghajtóból.

                    [ OK ]
        [ Nyomjunk Entert vagy szóközt ]
....

A CD-meghajtó egészen az újraindítás megkezdéséig zárolt lesz, ezért csak ekkor tudjuk (gyorsan) kivenni a meghajtóból a lemezt. Nyomjuk meg az btn:[OK] gombot az újraindításhoz.

A rendszer újraindul, legyünk résen és figyeljük a megjelenõ hibaüzeneteket, errõl bõvebben lásd a <<freebsdboot>>ban.

[[network-services]]
=== További hálózati szolgálatások beállítása

A hálózati szolgáltatások terén csekély tapasztalattal rendelkezõ kezdõ felhasználók számára ijesztõ lehet ezek beállítása. A hálózatok és többek közt az internet kezelése napjaink modern operációs rendszereink, így a FreeBSD-nek is az egyik fontos területe. Ezért nagyon hasznos ismernünk valamennyire a FreeBSD által felkínált hálózati lehetõségeket. A telepítés közben ezért a felhasználónak tisztában kell lennie a rendelkezésére álló szolgáltatásokkal.

A hálózati szolgáltatások olyan programok, amelyek a hálózat minden részérõl fogadnak adatokat. Mindent el kell követnünk annak érdekében, hogy ezek a programok ne tehessenek semmilyen "kárt". Sajnos a programozók sem tökéletesek, és az idõk során már elõfordult párszor, hogy a hálózati szolgáltatásokban maradtak hibák, amelyek kihasználásával a támadók rossz dolgokat tudtak csinálni. Ezért fontos, hogy csak is azokat a szolgáltatásokat engedélyezzük, amelyekre ténylegesen szükségünk van. Ha nem tudjuk eldönteni, akkor az a legjobb, ha egészen addig egyiket sem engedélyezzük, amíg valóban szükségünk nem lesz rájuk. A sysinstall újbóli elindításával vagy az [.filename]#/etc/rc.conf# megfelelõ beállításával mindig tudunk új szolgáltatásokat aktiválni.

A [.guimenuitem]#Networking# (Hálózatok) menüpont kiválasztása után valami ilyesmit láthatunk:

[[network-configuration]]
.A hálózati beállítások menüjének felsõ szintje
image::net-config-menu1.png[]

Ezek közül a [.guimenuitem]#Interfaces# (Csatolók), vagyis az elsõ menüpontról korábban már szó esett a <<inst-network-dev>>ban, ezért ez most nyugodtan kihagyható.

Az [.guimenuitem]#AMD# menüpont kiválasztásával engedélyezzük a BSD automatikus csatlakoztatásokért felelõs segédeszközét (AMD, az AutoMounter Daemon). Ezt általában az NFS protokollal (lásd lentebb) együtt szokás használni a távoli állományrendszerek automatikus csatlakoztatásához. Itt nincs szükség semmilyen különleges beállításra.

A következõ sorban az [.guimenuitem]#AMD Flags# (Az AMD beállításai) menüpont szerepel. Kiválasztása után az AMD beállításait bekérõ ablak fog felbukkani. Ez már számos alapértelmezett beállítást tartalmaz:

[source,shell]
....
-a /.amd_mnt -l syslog /host /etc/amd.map /net /etc/amd.map
....

A `-a` kapcsolóval adjuk meg a csatlakozási pontok alapértelmezett helyét, amely ebben az esetben az [.filename]#/.amd_mnt#. A `-l` kapcsolóval adjuk meg az alapértelmezett [.filename]#log# (napló) állományt, habár a `syslogd` használata során az összes naplózási tevékenység a rendszer naplózó démonján fut majd keresztül. A [.filename]#/host# könyvtárba fognak csatlakozni a távoli gépek exportált állományrendszerei, míg a [.filename]#/net# könyvtárba a különbözõ IP-címekrõl exportált állományrendszerek kerülnek csatlakoztatásra. Az [.filename]#/etc/amd.map# állomány tartalmazza az AMD exportjainak alapértelmezett beállításait.

Az [.guimenuitem]#Anon FTP# menüponton keresztül engedélyezhetjük az anonim FTP kapcsolatokat. A menüpont kiválasztásával számítógépünket egy anonim FTP szerverré tehetjük, azonban legyünk tekintettel a beállításhoz tartozó biztonsági veszélyekre! A kiválasztásakor egy ablak tájékoztat minket a beállítás részleteirõl és felmerülõ biztonsági kockázatokról.

A [.guimenuitem]#Gateway# (Átjáró) menüpont használatával a korábbiakban tárgyaltak szerint állíthatjuk be számítógépünket hálózati átjárónak. Ugyanekkor a [.guimenuitem]#Gateway# menüben nyílik lehetõségük kikapcsolni ezt a beállítást, amennyiben a telepítési folyamat korábbi lépései során véletlenül engedélyeztük volna.

Az [.guimenuitem]#Inetd# menüpont segítségével beállíthatjuk, vagy akár teljesen ki is kapcsolhatjuk a korábban tárgyalt man:inetd[8] démont.

A [.guimenuitem]#Mail# (Levelezés) menüpontban beállíthatjuk a rendszer alapértelmezett MTA avagy levéltovábbító ügynökét (Mail Transfer Agent). Ennek hatására a következõ menü jelenik meg:

[[mta-selection]]
.Az alapértelmezett MTA kiválasztása
image::mta-main.png[]

Itt válaszhatunk, hogy a különbözõ levélküldõ rendszerek közül melyiket telepítsük alapértelmezettként. Egy ilyen alkalmazás lényegében nem több, mint egy levélküldésre használt szerver, amely továbbítja a rendszerben vagy az interneten található felhasználók számára a leveleket.

A [.guimenuitem]#Sendmail# választásával a FreeBSD alapból felkínált megoldását, a népszerû sendmail szervert telepíthetjük. A [.guimenuitem]#Sendmail local# (Helyi Sendmail) menüpont kiválasztásával szintén a sendmail lesz a telepítendõ levélküldõ szerver, azonban nem lesz képes az internetrõl érkezõ leveleket fogadni. Az itt felsorolt többi beállítás, tehát a [.guimenuitem]#Postfix# és [.guimenuitem]#Exim#, a [.guimenuitem]#Sendmail# beállításához hasonlóan zajlik. Mind a kettõ elektronikus levelek kézbesítésére használható, azonban bizonyos felhasználók a sendmail helyett inkább ezek valamelyikét használják.

Valamelyik vagy éppen semelyik levéltovábbító szerver kiválasztása után az [.guimenuitem]#NFS client# (NFS kliens) beállítására vonatkozó menü jelentkezik.

Az [.guimenuitem]#NFS client# beállításával a rendszerünk NFS szerverekkel lesz képes kapcsolatba lépni. Egy ilyen NFS szerver az NFS protokoll segítségével a hálózaton keresztül elérhetõvé tesz állományrendszereket. Ha gépünk független, akkor nem fontos kiválasztanunk ezt a menüpontot. A rendszernek késõbb további beállításokra is szüksége lehet, amelyekrõl az crossref:network-servers[network-nfs,A hálózati állományrendszer (NFS)]ban olvashatunk részletesebben.

Az [.guimenuitem]#NFS server# (NFS szerver) menüpont kiválasztásával hozzájárulunk, hogy rendszerünk NFS szerverként üzemeljen. Ehhez meg kell adnunk az RPC, vagyis a távoli eljáráshívások kiszolgálásának elindításához szükséges adatokat is. Az RPC használatával a különbözõ kiszolgálók és programok között tudjuk vezérelni a kapcsolatot.

A sorban az [.guimenuitem]#Ntpdate# beállítása következik, ahol az idõszinkronizációhoz kapcsolódó opciókat találjuk. Kiválasztásakor az ábrán szereplõhöz hasonló menü fog megjelenni:

[[Ntpdate-config]]
.Az Ntpdate beállítása
image::ntp-config.png[]

Ebbõl a menübõl válasszuk ki a hozzánk legközelebb levõ szevert. Egy közeli szerver megadásával az idõszinkronizáció sokkalta pontosabbá válik, mivel a tõlünk távolabbi szerverek kapcsolatának késleltetése nagyobb lehet.

A következõ beállítás az PCNFSD. Ennek kiválasztása során a Portgyûjteménybõl telepítésre kerül a package:net/pcnfsd[] csomag. Ez lényegében egy hasznos segédprogram, amellyel olyan operációs rendszerek számára tudunk hitelesítést szolgáltatni az NFS használata során, amelyek maguktól erre nem képesek, mint például a Microsoft(R) MS-DOS(R) rendszere.

A többi beállítás megtekintéséhez egy kicsit lejjebb kell haladnunk a listában:

[[Network-configuration-cont]]
.A hálózati beállítások menüjének alsó szintje
image::net-config-menu2.png[]

Az man:rpcbind[8] és man:rpc.statd[8], valamint az man:rpc.lockd[8] segédprogramok mind a távoli eljáráshívásokhoz (Remote Procedure Call, RPC) használhatóak. Az `rpcbind` segédprogram az NFS szerverei és kliensei között felügyeli a kapcsolatot, ezért a használata az NFS szerverek és kliensek mûködéséhez elengedhetetlen. Az állapot figyeléséhez az rpc.statd démon felveszi a kapcsolatot a többi gépen futó rpc.statd démonokkal. A jelentett állapotok általában a [.filename]#/var/db/statd.status# állományban találhatóak. Itt a következõként felsorolt elem az [.guimenuitem]#rpc.lockd#, amelynek kiválasztásával állományzárolási szolgáltatásokat érhetünk el. Ezt többnyire az rpc.statd démonnal együtt alkalmazzák a zárolásokat kérõ gépek és a kérések gyakoriságának nyilvántartására. Míg ezekkel a beállításokkal gyönyörûen nyomon lehet követni a mûködést, az NFS szerverek és kliensek megfelelõ mûködéséhez nem kötelezõ a használatuk.

Ahogy haladunk tovább a listában, a következõ elem a [.guimenuitem]#Routed#, vagyis az útválasztásért felelõs démon lesz. A man:routed[8] segédprogram a hálózati útválasztó táblázatokat tartja karban, felderíti az elérhetõ útválasztókat és kérésre bármelyik hozzá fizikailag csatlakozó gép számára átadja az általa nyilvántartott útválasztási adatokat. Ezt leginkább a helyi hálózat átjárójaként mûködõ számítógépek használják. Kiválasztásakor egy ablak fog rákérdezni a segédprogram helyére. Az itt alapból felkínált érték általában megfelelõ, ezért nyugtázhatjuk az kbd:[Enter] billentyû lenyomásával. Ezt követõen egy másik menü jelenik meg, ahol a routed beállításait adhatjuk meg. Itt alapértelmezés szerint a `-q` kapcsoló szerepel.

A következõ sor az [.guimenuitem]#Rwhod# beállításé, aminek kiválasztásával el tudjuk indíttatni az man:rwhod[8] démont a rendszer elindítása során. Az `rwhod` segédprogram a rendszerüzeneteket a hálózaton idõközönként szétküldi vagy "figyelõ" (consumer) módban összegyûjti ezeket. Ennek pontosabb részleteit az man:ruptime[1] és man:rwho[1] man oldalakon találhatjuk meg.

Az man:sshd[8] démoné az utolsó elõtti beállítás. Ez az OpenSSH biztonságos shell szervere, melyet a szabványos telnet és FTP szerverek helyett ajánlanak. Az sshd szerver tehát két gép közti biztonságos, titkosított kapcsolatok létrehozására használható.

A lista végén a [.guimenuitem]#TCP Extensions# (TCP kiterjesztések) menüpontot találhatjuk. Segítségével a TCPRFC 1323 és RFC 1644 dokumentumokban leírt kiterjesztéseinek használatát engedélyezhetjük. Ezzel egyes gépek esetén felgyorsulhat a kapcsolat, azonban más esetekben pedig eldobódhat. Ez szerverek használatánál nem ajánlott, viszont független gépeknél kifizetõdõ lehet.

Most, miután beállítottuk a hálózati szolgáltatásokat, lépjünk vissza a lista elején található [.guimenuitem]#X Exit# (Kilépés) menüpontra és folytassuk a beállítást a következõ opcióval, vagy egyszerûen az [.guimenuitem]#X Exit# kétszeri kiválasztásával, majd a btn:[X Exit Install] (Kilépés a telepítõbõl) gomb lenyomásával lépjünk ki a sysinstall programból.

[[freebsdboot]]
=== A FreeBSD indulása

[[freebsdboot-i386]]
==== A FreeBSD/i386 indulása

Ha minden remekült ment, a képernyõn lentrõl felfelé gördülõ üzeneteket fogunk látni, majd a rendszer várni fog tõlünk egy bejelentkezési nevet. A kiírt üzeneteket között a kbd:[Scroll Lock] lenyomása után a kbd:[PgUp] és kbd:[PgDn] billentyûk használatával tudunk lapozni. A kbd:[Scroll Lock] ismételt lenyomásával visszatérünk a bejelentkezéshez.

Nem minden esetben lesz látható az összes üzenet (a puffer végessége miatt), de miután bejelentkeztünk, ezeket a `dmesg` parancs kiadásával is megnézhetjük.

Bejelentkezni a telepítéskor megadott felhasználói név/jelszó párossal tudunk (a példában ez most `rpratt`). Lehetõleg ne jelentkezzünk be `root` felhasználóként!

A rendszer indításakor jellemzõen elõforduló üzenetek (a verzióra vonatkozó adatokat kihagytuk):

[source,shell]
....
Copyright (c) 1992-2002 The FreeBSD Project.
Copyright (c) 1979, 1980, 1983, 1986, 1988, 1989, 1991, 1992, 1993, 1994
        The Regents of the University of California. All rights reserved.

Timecounter "i8254"  frequency 1193182 Hz
CPU: AMD-K6(tm) 3D processor (300.68-MHz 586-class CPU)
  Origin = "AuthenticAMD"  Id = 0x580  Stepping = 0
  Features=0x8001bf<FPU,VME,DE,PSE,TSC,MSR,MCE,CX8,MMX>
  AMD Features=0x80000800<SYSCALL,3DNow!>
real memory  = 268435456 (262144K bytes)
config> di sn0
config> di lnc0
config> di le0
config> di ie0
config> di fe0
config> di cs0
config> di bt0
config> di aic0
config> di aha0
config> di adv0
config> q
avail memory = 256311296 (250304K bytes)
Preloaded elf kernel "kernel" at 0xc0491000.
Preloaded userconfig_script "/boot/kernel.conf" at 0xc049109c.
md0: Malloc disk
Using $PIR table, 4 entries at 0xc00fde60
npx0: <math processor> on motherboard
npx0: INT 16 interface
pcib0: <Host to PCI bridge> on motherboard
pci0: <PCI bus> on pcib0
pcib1: <VIA 82C598MVP (Apollo MVP3) PCI-PCI (AGP) bridge> at device 1.0 on pci0
pci1: <PCI bus> on pcib1
pci1: <Matrox MGA G200 AGP graphics accelerator> at 0.0 irq 11
isab0: <VIA 82C586 PCI-ISA bridge> at device 7.0 on pci0
isa0: <ISA bus> on isab0
atapci0: <VIA 82C586 ATA33 controller> port 0xe000-0xe00f at device 7.1 on pci0
ata0: at 0x1f0 irq 14 on atapci0
ata1: at 0x170 irq 15 on atapci0
uhci0: <VIA 83C572 USB controller> port 0xe400-0xe41f irq 10 at device 7.2 on pci0
usb0: <VIA 83C572 USB controller> on uhci0
usb0: USB revision 1.0
uhub0: VIA UHCI root hub, class 9/0, rev 1.00/1.00, addr 1
uhub0: 2 ports with 2 removable, self powered
chip1: <VIA 82C586B ACPI interface> at device 7.3 on pci0
ed0: <NE2000 PCI Ethernet (RealTek 8029)> port 0xe800-0xe81f irq 9 at
device 10.0 on pci0
ed0: address 52:54:05:de:73:1b, type NE2000 (16 bit)
isa0: too many dependant configs (8)
isa0: unexpected small tag 14
fdc0: <NEC 72065B or clone> at port 0x3f0-0x3f5,0x3f7 irq 6 drq 2 on isa0
fdc0: FIFO enabled, 8 bytes threshold
fd0: <1440-KB 3.5" drive> on fdc0 drive 0
atkbdc0: <keyboard controller (i8042)> at port 0x60-0x64 on isa0
atkbd0: <AT Keyboard> flags 0x1 irq 1 on atkbdc0
kbd0 at atkbd0
psm0: <PS/2 Mouse> irq 12 on atkbdc0
psm0: model Generic PS/2 mouse, device ID 0
vga0: <Generic ISA VGA> at port 0x3c0-0x3df iomem 0xa0000-0xbffff on isa0
sc0: <System console> at flags 0x1 on isa0
sc0: VGA <16 virtual consoles, flags=0x300>
sio0 at port 0x3f8-0x3ff irq 4 flags 0x10 on isa0
sio0: type 16550A
sio1 at port 0x2f8-0x2ff irq 3 on isa0
sio1: type 16550A
ppc0: <Parallel port> at port 0x378-0x37f irq 7 on isa0
ppc0: SMC-like chipset (ECP/EPP/PS2/NIBBLE) in COMPATIBLE mode
ppc0: FIFO with 16/16/15 bytes threshold
ppbus0: IEEE1284 device found /NIBBLE
Probing for PnP devices on ppbus0:
plip0: <PLIP network interface> on ppbus0
lpt0: <Printer> on ppbus0
lpt0: Interrupt-driven port
ppi0: <Parallel I/O> on ppbus0
ad0: 8063MB <IBM-DHEA-38451> [16383/16/63] at ata0-master using UDMA33
ad2: 8063MB <IBM-DHEA-38451> [16383/16/63] at ata1-master using UDMA33
acd0: CDROM <DELTA OTC-H101/ST3 F/W by OIPD> at ata0-slave using PIO4
Mounting root from ufs:/dev/ad0s1a
swapon: adding /dev/ad0s1b as swap device
Automatic boot in progress...
/dev/ad0s1a: FILESYSTEM CLEAN; SKIPPING CHECKS
/dev/ad0s1a: clean, 48752 free (552 frags, 6025 blocks, 0.9% fragmentation)
/dev/ad0s1f: FILESYSTEM CLEAN; SKIPPING CHECKS
/dev/ad0s1f: clean, 128997 free (21 frags, 16122 blocks, 0.0% fragmentation)
/dev/ad0s1g: FILESYSTEM CLEAN; SKIPPING CHECKS
/dev/ad0s1g: clean, 3036299 free (43175 frags, 374073 blocks, 1.3% fragmentation)
/dev/ad0s1e: filesystem CLEAN; SKIPPING CHECKS
/dev/ad0s1e: clean, 128193 free (17 frags, 16022 blocks, 0.0% fragmentation)
Doing initial network setup: hostname.
ed0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> mtu 1500
        inet 192.168.0.1 netmask 0xffffff00 broadcast 192.168.0.255
        inet6 fe80::5054::5ff::fede:731b%ed0 prefixlen 64 tentative scopeid 0x1
        ether 52:54:05:de:73:1b
lo0: flags=8049<UP,LOOPBACK,RUNNING,MULTICAST> mtu 16384
        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x8
        inet6 ::1 prefixlen 128
        inet 127.0.0.1 netmask 0xff000000
Additional routing options: IP gateway=YES TCP keepalive=YES
routing daemons:.
additional daemons: syslogd.
Doing additional network setup:.
Starting final network daemons: creating ssh RSA host key
Generating public/private rsa1 key pair.
Your identification has been saved in /etc/ssh/ssh_host_key.
Your public key has been saved in /etc/ssh/ssh_host_key.pub.
The key fingerprint is:
cd:76:89:16:69:0e:d0:6e:f8:66:d0:07:26:3c:7e:2d root@k6-2.example.com
 creating ssh DSA host key
Generating public/private dsa key pair.
Your identification has been saved in /etc/ssh/ssh_host_dsa_key.
Your public key has been saved in /etc/ssh/ssh_host_dsa_key.pub.
The key fingerprint is:
f9:a1:a9:47:c4:ad:f9:8d:52:b8:b8:ff:8c:ad:2d:e6 root@k6-2.example.com.
setting ELF ldconfig path: /usr/lib /usr/lib/compat /usr/X11R6/lib
/usr/local/lib
a.out ldconfig path: /usr/lib/aout /usr/lib/compat/aout /usr/X11R6/lib/aout
starting standard daemons: inetd cron sshd usbd sendmail.
Initial rc.i386 initialization:.
rc.i386 configuring syscons: blank_time screensaver moused.
Additional ABI support: linux.
Local package initialization:.
Additional TCP options:.

FreeBSD/i386 (k6-2.example.com) (ttyv0)

login: rpratt
Password:
....

Az RSA és DSA kulcsok generálása a lassabb gépeken sokág is eltarthat, habár ez mindig csak a friss telepítések utáni elsõ indításkor történik meg. A rendszer késõbbi indulásai ettõl már gyorsabbak lesznek.

Ha X szervert is beállítottunk és választottunk hozzá egy alapértelmezett munkakörnyezetet, akkor ezt a parancssorból a `startx` kiadásával elindíthatjuk el.

[[shutdown]]
=== A FreeBSD leállítása

Fontos, hogy mindig szabályosan állítsuk le az operációs rendszert, ne kapcsoljuk ki csak úgy egyszerûen a számítógépünket! A leállításhoz elõször a `su` parancs kiadásával, majd itt a `root` jelszavának megadásával vegyük fel az ehhez szükséges rendszeradminisztrátori jogosultságokat. Ez viszont csak abban az esetben fog mûködni, ha a felhasználónk tagja a `wheel` csoportnak. Minden más esetben egyszerûen jelentkezzünk be `root` felhasználóként és használjuk a `shutdown -h now` parancsot.

[source,shell]
....
The operating system has halted.
Please press any key to reboot.
....

A fenti üzenet jelzi, hogy a leállító parancs kiadása után már kikapcsolhatjuk a számítógépet, vagy ha ehelyett egy billentyût nyomunk le, akkor a gép újraindul.

A kbd:[Ctrl+Alt+Del] billentyûkombináció használatával is újra tudjuk indítani a rendszert, azonban ez normál mûködés közben nem ajánlott.

[[install-trouble]]
== Hibakeresés

A most következõ szakaszban azokra a telepítés során felmerülõ problémákra próbálunk meg megoldásokat adni, amelyeket eddig már sokan jeleztek nekünk. Ezek mellett szerepel néhány kérdés és válasz is a FreeBSD és az MS-DOS(R) vagy Windows(R) közös használatáról.

=== Mit tegyünk ha valami nem mûködik

A PC architektúra különféle korlátozásai miatt szinte lehetetlen 100%-ban megbízhatóvá tenni az eszközök felderítését, azonban ennek hibája kapcsán néhány dolgot még tenni tudunk.

Ellenõrizzük a http://www.FreeBSD.org/releases/[Hardware Notes] (Hardverjegyzék) címû dokumentumban, hogy az adott hardvert a FreeBSD valóban ismeri.

Amennyiben a hardvereszközünket a rendszer ismeri, azonban még mindig jelentkeznek fagyások vagy egyéb gondok, készítenünk kell egy crosssref:kernelconfig[kernelconfig,saját rendszermag]ot. Ezzel olyan eszközök támogatását is beépíthetjük a rendszermagba, amelyek eredetileg nem szerepelnek a [.filename]#GENERIC# rendszermagban. A telepítéshez készített rendszerindító lemezeken található rendszermag a legtöbb eszközt a gyári IRQ, IO-cím és DMA csatorna beállításaik mentén próbálja felkutatni. Ha viszont a hardverünket átállítottuk, ennek megfelelõen módosítanunk kell a rendszermag beállításait és újra kell fordítanunk, hogy a FreeBSD tudja, hol is keresse az eszközt.

Olyan is adódhat, hogy egy nem létezõ eszköz keresése egy utána keresendõ másik, jelenlevõ eszköz felkutatását akadályozza meg. Ilyenkor az ütközõ meghajtókat le kell tiltani.

[NOTE]
====
Egyes problémák elkerülhetõek vagy csillapíthatóak a különbözõ hardverösszetevõk, különösen az alaplapi firmware frissítésével. Az alaplap firmware-jére sokszor csak BIOS-ként hivatkoznak, és a legtöbb alaplap- vagy számítógépgyártó honlapján találhatjuk meg ezeket, valamint a rájuk vonatkozó utasításokat.

A legtöbb gyártó azonban erõsen tiltakozik az alaplapi BIOS-frissítések ellen, és csak indokolt esetekben, például kritikus javításoknál javasolják. A frissítés kimenetele _lehet_ rossz is, aminek következménye a BIOS tartós károsodása.
====

=== Az MS-DOS(R) és Windows(R) állományrendszereinek használata

A FreeBSD jelenleg nem támogatja a Double Space(TM) alkalmazással tömörített állományrendszereket, ezért a FreeBSD csak úgy tud az adataihoz hozzáférni, ha elõtte kitömörítjük ezeket. Ezt a [.guimenuitem]#Start# menü [.guimenuitem]#Programs# (Programok) > [.guimenuitem]#System Tools# (Rendszereszközök) menüjében található Compression Agent (Lemeztömörítés) elindításával tehetjük meg.

A FreeBSD támogatja az MS-DOS(R) alapú (gyakran csak FAT típusúnak nevezett) állományrendszereket. A man:mount_msdosfs[8] parancs segítségével az ilyen rendszerek könnyedén becsatlakoztathatók a már létezõ könyvtárszerkezetbe, amivel így el tudjuk érni a tartalmát. A man:mount_msdosfs[8] programot általában nem közvetlenül hívjuk meg, hanem az [.filename]#/etc/fstab# vagy a man:mount[8] segédprogram megfelelõ paraméterezésével.

Az [.filename]#/etc/fstab# állományban általában így néz ki egy ilyen sor:

[.programlisting]
....
/dev/ad0sN  /dos	msdosfs rw 0 0
....

[NOTE]
====
A mûvelet végrehajtásához a [.filename]#/dos# könyvtárnak már léteznie kell. Az [.filename]#/etc/fstab# pontos formátumával kapcsolatban a man:fstab[5] man oldalt olvassuk el.
====

Az MS-DOS(R) állományrendszerek esetében a man:mount[8] parancsot többnyire így adjuk ki:

[source,shell]
....
# mount -t msdosfs /dev/ad0s1 /mnt
....

Ebben a példában a MS-DOS(R) állományrendszer az elsõdleges merevlemez elsõ partícióján helyezkedik el. A mi helyzetünk ettõl eltérõ lehet, ezért ehhez vizsgáljuk meg a `dmesg` és `mount` parancsok kimeneteit. Segítségükkel elegendõ információt tudunk összeszedni a gépünkön található partíciók kiosztásáról.

[NOTE]
====
Elõfordulhat, hogy a FreeBSD a többi operációs rendszertõl eltérõ módon számozza a slice-okat (vagyis az MS-DOS(R) partíciókat). Konkrétan: a kiterjesztett MS-DOS(R) partíciók általában nagyobb sorszámot kapnak, mint az elsõdleges MS-DOS(R) partíciók. Az man:fdisk[8] segédprogram segíthet megállapítani, hogy mely slice-ok tartoznak a FreeBSD-hez és melyek más operációs rendszerekhez.
====

A man:mount_ntfs[8] parancs használatával az NTFS partíciók hasonló módon csatlakoztathatóak.

=== Kérdések és válaszok

==== A rendszerem teljesen leáll amikor az indítás során eszközöket próbál megtalálni, vagy furcsán viselkedik a telepítés során, esetleg a floppy meghajtót nem is keresi.

A FreeBSD az i386, amd64 és ia64 platformokon az indítás közben az eszközök felderítésében erõsen építkeznek a rendszeren elérhetõ ACPI szolgáltatásra. Sajnos még mindig vannak hibák az ACPI meghajtóban, az alaplapokban és a BIOS-okban. A rendszerbetöltõ harmadik fokozatában viszont az `hint.acpi.0.disabled` megadásával kikapcsolható az ACPI használata:

[source,shell]
....
 set hint.acpi.0.disabled="1"
....

Ez a beállítás a rendszer minden egyes indításakor törlõdik, ezért a `hint.acpi.0.disabled="1"` bejegyzést fel kell vennünk a [.filename]#/boot/loader.conf# állományba. A rendszerbetöltõ mûködésérõl részletesebben a crossref:boot[boot-synopsis,Áttekintés]ban olvashatunk.

==== A FreeBSD telepítése után elõször indítom el a merevlemezrõl a rendszert, a rendszermag betöltõdik és nekilát felkutatni a hardvereszközöket, azonban megáll a következõ üzenettel:

Ez egy régóta fennálló probléma olyan rendszerek esetén, ahol a rendszerindításhoz használt lemez nem az elsõ. A BIOS a FreeBSD-tõl eltérõ sorszámozást használ, és az általa alkalmazott megfeleltetések megfejtése nehézkes.

Amikor a rendszer indítására használt lemez nem az elsõ lemez a rendszerünkben, segítenünk kell a FreeBSD-nek a megtalálásában. Két gyakori helyzet alakulhat ki, és mind a kettõben el kell árulnunk a FreeBSD-nek, hogy hol található a rendszer indításához használható gyökér állományrendszer. Ezt a lemez BIOS-ban nyilvántartott sorszámának, típusának és a neki megfelelõ FreeBSD szerinti lemezszám megadásával tehetjük meg.

Az elsõ szituációban két IDE-lemezünk van, mind a kettõt masterként állítottuk be a hozzájuk tartozó IDE-buszokon, és a közülük a másodikról akarjuk indítani a FreeBSD-t. A BIOS ezeket 0. és 1. lemezként látja, miközben a FreeBSD pedig [.filename]#ad0# és [.filename]#ad2# eszközként.

A FreeBSD 1. BIOS-számozású lemezen van, amelynek a típusa `ad` és a FreeBSD szerinti a 2 sorszámot viseli. Ezért ezt kell használnunk:

[source,shell]
....
 1:ad(2,a)kernel
....

Ha az elsõdleges buszon van egy slave meghajtónk, akkor mindez nem szükséges (és valószínûleg rossz is).

A második szituációban egy SCSI-lemezrõl akarjuk indítani a rendszert, miközben egy vagy több IDE-lemez is található a gépünkben. Ebben az esetben a FreeBSD szerinti sorszám kisebb lesz, mint a BIOS szerinti. Ha tehát a két IDE-lemezünk mellett van még egy SCSI-lemez is, akkor annak a BIOS szerinti sorszáma 2, a típusa `da` és a FreeBSD szerinti sorszáma pedig 0. Ennek megfelelõen a

[source,shell]
....
 2:da(0,a)kernel
....

sorral tudjuk elárulni a FreeBSD-nek, hogy a BIOS szerint 2. lemezrõl akarjuk indítani, amely a rendszerben található elsõ SCSI-lemeznek felel meg. Ha csak egy IDE-lemezünk van, akkor a sort kezdjük az `1:` beírásával.

Miután megtaláltuk a megfelelõ értékeket, a hozzá tartozó sort egy szövegszerkesztõ segítségével tegyük közvetlenül a [.filename]#/boot.config# állományba. A FreeBSD ezen állomány tartalmát fogja alapból felhasználni a `boot:` bekérésénél, hacsak másképpen nem utasítjuk.

==== A telepítés után elõször próbálom meg elindítani a merevlemezrõl a FreeBSD-t, azonban a rendszerválasztó mindig csak F? opciókat kínál fel, és a rendszer indítása sem halad tovább.

A FreeBSD telepítése során rosszul adtunk meg a partíciószerkesztõben a merevlemezhez tartozó geometriát. Menjünk vissza a partíciószerkesztõhöz és adjuk meg újra a merevlemezünk helyes geometriáját. Ennek használatához pedig a FreeBSD-t is újra kell telepítenünk.

Ha egyáltalán képtelenek vagyunk megállapítani a merevlemezhez tartozó geometriát, akkor próbáljuk meg ezt: a lemez elején hozzunk létre egy kis méretû DOS partíciót és rakjuk utána a FreeBSD-t. Amikor a telepítõprogram észreveszi a DOS partíciót, megpróbálja magától kikövetkeztetni belõle a helyes geometriát, ami általában mûködik is.

Ez a tanács ugyan már nem érvényes, de álljon itt felvilágosításként:

[.blockquote]
Ha teljesen egy FreeBSD alapú szerver vagy munkaállomás kialakítására szánjuk a számítógépünket, és nem törõdünk a DOS-szal, Linuxszal és a többi operációs rendszerrel történõ (jövõbeli) kompatibilitással, használhatjuk akár az egész lemezt is (a partíciószerkesztõben ez az [.guimenuitem]#A# opció). Ezzel egy olyan nem szabványos beállítást engedélyezünk, amivel a FreeBSD elfoglalja a lemezt annak legelsõ szektorától a legutolsó szektoráig. Ilyenkor ugyan el tudunk tekinteni a geometriával kapcsolatos beállításoktól, azonban így a FreeBSD-n kívül semmilyen más operációs rendszert nem tudunk majd futtatni a gépen.

==== A rendszer megtalálja a man:ed[4] hálózati kártyámat, azonban folyamatosan hibát ad idõtúllépésre hivatkozva.

Az említett kártya valószínûleg a [.filename]#/boot/device.hints# állományban beállítottaktól eltérõ IRQ-t használ. A man:ed[4] meghajtó alapértelmezés szerint nem használ "szoftveres" beállításokat (amiket DOS-ban az EZSETUP használatával adunk meg), viszont engedélyezhetjük, ha a kártyánál megadjuk az `-l` beállítást.

Hardveresen ezt a kártyán levõ jumperek segítségével állíthatjuk be (ehhez változtassuk meg a rendszermag beállításait is, amennyiben szükséges), vagy a `-l` kapcsolón keresztül a `hint.ed.0.irq="-l"` megadásával utasíthatjuk a rendszermagot az IRQ szoftveres beállítására.

Másik lehetõség, amikor a kártyánk a 9-es IRQ-t használja, amelyet általában megosztanak a 2-es IRQ-val, ami gyakori problémák forrása (különösen abban az esetben, amikor a VGA kártya a 2-es IRQ-t használja!) lehet. Lehetõleg ne használjuk a 2-es és 9-es IRQ-kat.

==== Amikor a sysinstall programot egy X11 terminálban futtatom, a sárga színû betûket viszonylag nehéz olvasni a világosszürke háttérrel. Esetleg lehet valahogy növelni a kontrasztotszínek kontraszt az alkalmazás használatakor?

Ha az X11 telepítése után a sysinstall által választott színekkel nem olvasható a szöveg man:xterm[1] vagy man:rxvt[1] terminálokban, akkor vegyük fel a következõ sort a felhasználói könyvtárunkban levõ [.filename]#.Xdefaults# konfigurációs állományunkba: `XTerm*color7:#c0c0c0`. Ezzel majd egy sötétebb szürke hátteret kapunk.

[[install-advanced]]
== Telepítési útmutató haladóknak

Ebben a szakaszban megtudhatjuk, hogyan telepítsük a FreeBSD-t speciális esetekben.

[[headless-install]]
=== A FreeBSD telepítése billentyûzet vagy monitor nélkül

A telepítés ezen fajtáját "fej nélküli telepítésnek" (headless install) hívják, mivel a gép, amire a FreeBSD-t telepíteni akarjuk, nem rendelkezik monitorral vagy éppen még VGA kimenettel sem. Felmerülhet a kérdés: hogyan lehetséges mindez? A soros vonali konzol használatával! A soros konzol segítségével lényegében egy másik számítógép monitorját és billentyûzetét használjuk. Ennek megvalósításához elsõként kövessük a rendszerindító pendrive készítésének <<install-boot-media>>ban leírt lépéseit, vagy töltsük le a megfelelõ ISO image-et a telepítéshez, lásd <<install-cdrom>>.

A következõ lépésekkel tehetjük képessé a soros konzolon keresztüli rendszerindításra: (CD-lemez használata esetén az elsõ lépésre nincs szükség)

[.procedure]
====

. A rendszerindító pendrive átállítása soros konzolra
+ 
Ha a korábban elõkészített pendrive-val most csak egyszerûen elindítanánk a FreeBSD-t, akkor a megszokott telepítési módban indulna el. Mi viszont azt akarjuk, hogy a telepítéshez a FreeBSD a soros konzolon keresztül induljon el. Ehhez csatlakoztassuk az eszközt a számítógéphez, valamint a man:mount[8] paranccsal FreeBSD rendszerünkhöz pedig a hozzátartozó állományrendszert.
+
[source,shell]
....
# mount /dev/da0a /mnt
....
+
[NOTE]
======
A konkrét eszköznevet és csatlakozási pontot módosítsuk a saját környezetünknek megfelelõen.
======
+ 
Most, miután már fizikailag és logikailag is csatlakoztattuk a pendrive-ot, be kell állítanunk a soros konzol használatára rendszerindítás közben. Ehhez egy [.filename]#loader.conf# nevû állományt kell elhelyeznünk a pendrive állományrendszerén a soros konzolra (mint rendszerkonzolra) vonatkozó beállítással:
+
[source,shell]
....
# echo 'console="comconsole"' >> /mnt//boot/loader.conf
....
+ 
Miután a pendrive-on sikeresen elvégeztük a szükséges beállítást, válasszuk le a man:umount[8] parancs kiadásával:
+
[source,shell]
....
# umount /mnt
....
+ 
Most már leválaszthatjuk a pendrive-ot, és ugorjunk közvetlenül a harmadik lépésre.
. A null-modem kábel csatlakoztatása
+ 
Össze kell kötnünk a két számítógépet egy crossref:serialcomms[term-cables-null,null-modem kábel]lel. Nincs más teendõnk, mit összekapcsolni a két gép soros portjait. _Itt a szokásos soros kábel nem mûködik_, konkrétan null-modem kábelre van szükség, mivel benne néhány vezetéket máshogy kötöttek be.
. A telepítõ CD beállítása soros konzolra
+ 
Ha a telepítésre szánt ISO image-bõl készített lemezzel (lásd <<install-cdrom>>) a FreeBSD normál módban indul el. A soros konzol használatához viszont kibontani, módosítani és újragenerálni kell az adott image-et mielõtt lemezre írnánk.
+ 
A korábban, például a [.filename]#FreeBSD-8.1-RELEASE-i386-disc1.iso# néven letöltött image-bõl a man:tar[1] segédprogrammal tudjuk kinyerni a benne tárolt összes állományt:
+
[source,shell]
....
# mkdir /a/hasznalt/iso/helye
# tar -C /a/hasznalt/iso/helye -pxvf FreeBSD-8.1-RELEASE-i386-disc1.iso
....
+ 
Ezt követõen módosítanunk kell a telepítõlemezt a soros konzol használatára. Ehhez egy [.filename]#loader.conf# állományt kell hozzáadnunk a kibontott ISO image tartalmához. Ebben állítjuk be a soros konzolt rendszerkonzolnak:
+
[source,shell]
....
# echo 'console="comconsole"' >> /a/hasznalt/iso/helye/boot/loader.conf
....
+ 
Ezután készítsünk egy új ISO image-et a módosított tartalom alapján. Ehhez a package:sysutils/cdrtools[] port részeként elérhetõ man:mkisofs[8] segédprogramot használjuk:
+
[source,shell]
....
# mkisofs -v -b boot/cdboot -no-emul-boot -r -J -V "soroskonzolos" -o soroskonzolos-FreeBSD-8.1-RELEASE-i386-disc1.iso /a/hasznalt/iso/helye
....
+ 
Most már van egy megfelelõen összeállított ISO image-ünk, amelyet CD-lemezre tudunk írni a kedvenc CD-író alkalmazásunkkal.
. A telepítés indítása
+ 
Most már ideje elkezdeni a telepítést. Tegyük a [.filename]#boot.flp# image-et tartalmazó lemezt a fej nélkül telepítendõ gép meghajtójába és kapcsoljuk be.
. Kapcsolódás a fej nélküli gépre
+ 
Ezután a man:cu[1] parancs felhasználásával kapcsolódjunk rá a gépre:
+
[source,shell]
....
# cu -l /dev/cuau0
....
+ 
Ezt FreeBSD 7._X_ esetén így kell használnunk:
+
[source,shell]
....
# cu -l /dev/cuad0
....
====

Ezzel készen is vagyunk! Innentõl a `cu` által megnyitott kapcsolaton keresztül tudjuk vezérelni a fej nélküli számítógépet. Hamarosan betölti a rendszermagot, majd megkérdezi a használt terminál típusát. Itt válasszuk ki a színes FreeBSD konzolt (FreeBSD color console) és folytassuk a telepítést a megszokott módon.

[[install-diff-media]]
== Saját telepítõeszköz elkészítése

[NOTE]
====
Az ismétlések elkerülése végett a továbbiakban a "FreeBSD lemez" a megvásárolható vagy a magunk által készített FreeBSD CD-re vagy DVD-re vonatkozik.
====

Adódhatnak olyan esetek, amikor létre kell hoznunk a FreeBSD telepítésére használt saját eszközünket és/vagy forrásunkat. Ez lehet egy tetszõleges fizikai eszköz, például szalag, vagy bármilyen olyan forrás, ahonnan a sysinstall képes állományokat elérni, például egy FTP oldal vagy egy MS-DOS(R) partíció.

Például:

* Egy FreeBSD lemezünk van és több hálózaton kapcsolódó számítógépünk. Készíteni akarunk egy helyi FTP oldalt a FreeBSD lemez felhasználásával, és így a hálózaton levõ gépre az internet helyett innen telepítjük a rendszert.
* Van egy FreeBSD lemezünk, azonban a FreeBSD-nek nem sikerült felismernie a CD/DVD-meghajtónkat, viszont az MS-DOS(R)/Windows(R)-nak igen. Felmásoljuk a FreeBSD telepítéséhez használt állományokat ugyanazon a számítógépen található egyik DOS partícióra, majd a FreeBSD-t ezekkel telepítjük.
* A gépben, amelyre telepíteni akarunk, nincs CD/DVD-meghajtó vagy hálózati kártya, viszont "Laplink stílusú" soros vagy párhuzamos kábellel hozzá tudunk kapcsolódni egy olyan számítógéprõl, amelyben viszont van.
* Készíteni akarunk a FreeBSD telepítésére használható szalagot.

[[install-cdrom]]
=== Telepítõ CD készítése

A FreeBSD Projekt minden kiadás részeként architektúránként elérhetõvé tesz legalább két CD image-et ("ISO image-et"). Ha rendelkezünk CD-íróval, ezeket az image-eket fel-, illetve ki tudjuk írni ("égetni") CD-re, és a FreeBSD telepítésére tudjuk használni. Tehát ha van a kezünk ügyében CD-író és olcsón jutunk nagyobb sebességû interneteléréshez, akkor a FreeBSD telepítésének ez a legkönnyebb módja.

[.procedure]
====

. A megfelelõ ISO image-ek letöltése
+ 
Az egyes kiadások ISO image-ei letölthetõek a [.filename]#ftp://ftp.FreeBSD.org/pub/FreeBSD/ISO-IMAGES-architektúra/változat# címrõl vagy annak legközelebbi tükrözésérõl. Az _architektúra_ és _változat_ részeket igényeinknek megfelelõen helyettesítsük.
+ 
Az említett könyvtár általában a következõ lemezek image-eit tartalmazza:
+
.FreeBSD 7._X_ és 8._X_ ISO image-ek nevei és jelentései
[cols="1,1", frame="none", options="header"]
|===
| Állománynév
| Tartalom

|[.filename]#FreeBSD-változat-RELEASE-architektúra-bootonly.iso#
|Ezzel a CD image-dzsel tudjuk a FreeBSD CD-meghajtóról indításával elkezdeni a telepítést. Fontos tudnunk azonban, hogy ez az image nem tartalmazza a FreeBSD telepítéséhez szükséges komponenseket. Ezt a rendszer indítása után hálózaton keresztül (például egy FTP szerver segítségével) tudjuk megtenni.

|[.filename]#FreeBSD-változat-RELEASE-architektúra-dvd1.iso.gz#
|Ez a DVD image minden, az alap FreeBSD rendszer telepítéséhez szükséges komponenst tartalmaz, bináris csomagokkal és dokumentációval együtt. Ezenkívül még "élõ" rendszert is tudunk indítani vele, közvetlenül a lemezrõl.

|[.filename]#FreeBSD-változat-RELEASE-architektúra-memstick.img#
|Ez az image egy USB pendrive-ra írható, és minden olyan számítógépen használható, amely képes ilyen eszközrõl elindulni. Támogatja az "élõ" módot is, amellyel rendszerünket állíthatjuk helyre. Ez az image nem érhetõ el FreeBSD 7.3 vagy korábbi rendszerek esetén.

|[.filename]#FreeBSD-változat-RELEASE-architektúra-disc1.iso#
|Ez az image tartalmazza az alap FreeBSD operációs rendszert és a hozzá tartozó dokumentációt, de semmilyen más további csomagot nem.

|[.filename]#FreeBSD-változat-RELEASE-architektúra-disc2.iso#
|Ezen az image-en bináris csomagok találhatóak. Ilyen a FreeBSD 8.0 és az utána következõ változatoknál már nincs.

|[.filename]#FreeBSD-változat-RELEASE-architektúra-disc3.iso#
|Ez egy másik image, amelyen szintén bináris csomagok találhatóak. Ilyen a FreeBSD 8.0 és az utána következõ változatoknál már nincs.

|[.filename]#FreeBSD-változat-RELEASE-architektúra-docs.iso#
|A FreeBSD dokumentációja.

|[.filename]#FreeBSD-változat-RELEASE-architektúra-livefs.iso#
|Ez az image a rendszerhelyreállításhoz használt "élõ" indítási módot támogatja, telepítést alapvetõen nem lehet vele végezni.
|===
+
[NOTE]
======
A FreeBSD 7.3 és a FreeBSD 8.1 elõtti 7._X_, illetve 8._X_ kiadások egy ettõl eltérõ elnevezési sémát követnek: a hozzájuk tartozó ISO image-ek neveiben nem szerepel a `FreeBSD-` elõtag.
======
+ 
Le _kell_ töltenünk az elsõ lemez vagy (ha elérhetõ) a `bootonly` lemez ISO image-einek egyikét. A kettõt egyszerre viszont ne töltsük le, mivel a `disc1` image tartalmaz mindent, ami a `bootonly` image-en megtalálható.
+ 
Akkor használjuk a `bootonly` jelzésû image-et, ha szélessávú interneteléréssel rendelkezünk. Segítségével el tudjuk kezdeni a FreeBSD telepítését, és szükség szerint a port/csomagrendszer (lásd crossref:ports[ports,Alkalmazások telepítése. csomagok és portok]) használatával csomagokat tudunk letölteni és telepíteni.
+ 
A DVD image-ét (`dvd1`) akkor érdemes használni, ha a FreeBSD adott kiadásának telepítése mellett igényt tartunk valamennyi csomagra is.
+ 
A további lemezek image-ei is hasznosak lehetnek, de nem feltétlenül kellenek a telepítéshez, fõleg abban az esetben, amikor gyors interneteléréssel rendelkezünk.
. A CD-k írása
+ 
Ezután lemezekre kell írnunk a letöltött image-eket. Amennyiben ezt egy másik FreeBSD rendszeren végezzük, ennek részleteirõl a crossref:disks[creating-cds,Lézeres tárolóeszközök (CD-k) létrehozása és használata] számol be (különösen a crossref:disks[burncd,burncd] és a crossref:disks[cdrecord,cdrecord] leírása).
+ 
Ha másik platformon végezzük ezt a mûveletet, akkor az adott platformon felkínált CD-író szoftverekkel kell dolgoznunk. Az image-ek szabványos ISO formátumúak, amelyet szinte az összes CD-író alkalmazás ismer.
====

[NOTE]
====
Ha kíváncsiak vagyunk egy saját FreeBSD kiadás elkészítésére, olvassuk el a extref:{releng}[kiadások szervezésérõl szóló cikket (angolul)].
====

[[install-ftp]]
=== Helyi FTP oldal létrehozása FreeBSD lemezzel

A FreeBSD lemezeken az FTP oldalakéhoz hasonló elrendezést találunk. Ez megkönnyíti a hálózatunkban található számítógépekhez a FreeBSD telepítésére használható helyi FTP oldal létrehozását.

[.procedure]
====

. Az FTP oldalnak otthont adó FreeBSD számítógépen tegyük a CD-t a meghajtóba, majd csatlakoztassuk a [.filename]#/cdrom# könyvtárba.
+
[source,shell]
....
# mount /cdrom
....
+
. Hozzunk létre egy anonim FTP hozzáférést az [.filename]#/etc/passwd# állományban. A man:vipw[8] segítségével tehát illesszük be a következõ sort az [.filename]#/etc/passwd# állományba:
+
[.programlisting]
....
ftp:*:99:99::0:0:FTP:/cdrom:/nonexistent
....
+
. Gondoskodjuk róla, hogy az FTP szolgáltatás engedélyezve legyen az [.filename]#/etc/inetd.conf# állományban.
====

Most már bárki, aki képes csatlakozni ehhez a számítógéphez, a telepítés típusának ki tudja választani az FTP-t. Az FTP oldalak menüjében válassza az "Other" (Egyéb) pontot, majd adja meg az `ftp://gépnév` címet.

[NOTE]
====
Ha az FTP-n csatlakozó kliensek rendszerindításhoz használt eszköze (általában a floppy) verziója nem egyezik meg tökéletesen a helyi FTP oldalon találhatóval, akkor a sysinstall nem engedi a telepítést. Ha a változatok nem hasonlóak és ezt felül akarjuk bírálni, akkor be kell lépnünk az menu:Options[] (Beállítások) menübe, ahol át kell állítanunk a terjesztés nevét (distribution name) [.guimenuitem]#any# (bármelyik)-re.
====

[WARNING]
====

A fenti megközelítés kizárólag csak egy tûzfallal védett helyi hálózaton javasolt. FTP szolgáltatás létrehozása az interneten (és nem a helyi hálózatunkban) levõ számítógépek számára különbözõ támadásoknak és egyéb kellemetlenségeknek teszi ki a számítógépünket. Határozottan javasoljuk, hogy ebben az esetben különösen ügyeljünk a biztonságra.
====

=== Telepítõfloppyk létrehozása

Ha floppylemezrõl kellene telepítenünk (amit viszont _semmiképpen sem_ ajánlanánk) egy nem támogatott hardvereszköz miatt, vagy mert egyszerûen szeretjük a dolgok nehezebbik oldalát megfogni, akkor ehhez elõször elõ kell készítenünk pár lemezt.

Legalább annyi 1,44 MB-os lemezre van szükségünk, mint amennyire ráférnek a [.filename]#base# (alapterjesztés) könyvtárban található állományok. Ha DOS-ban hozzuk létre ezeket a lemezeket, akkor a használatukhoz meg _kell_ formázni ezeket az MS-DOS(R) `FORMAT` parancsával. Windows(R) használata esetén az Windows Explorerben (Intézõben) tudjuk megformázni a lemezeket (kattintsunk a jobb gombbal az [.filename]#A:# meghajtóra, majd válasszuk a "Format" (Formázás) menüpontot).

_Ne_ bízzunk a gyárilag formázott ("pre-formatted" jelzésû) lemezekben! Menjünk biztosra és formázzuk meg mi magunk is lemezeket. A felhasználóinktól régebben számtalan olyan panasz érkezett, amely a helytelenül megformázott lemezbõl fakadt, ezért erre most kiemelten felhívjuk a figyelmet.

A formázás abban az esetben sem bizonyul rossz ötletnek, ha egy másik FreeBSD gépen gyártjuk le a lemezeket, habár nem kell mindegyik lemezre DOS állományrendszert tennünk. Helyette a `bsdlabel` és `newfs` parancsok használatával UFS állományrendszert is tehetünk rájuk, ahogy (1,44 MB méretû lemezek esetén) ezt az alábbi parancsok mutatják:

[source,shell]
....
# fdformat -f 1440 fd0.1440
# bsdlabel -w fd0.1440 floppy3
# newfs -t 2 -u 18 -l 1 -i 65536 /dev/fd0
....

Ezután a többi állományrendszerhez hasonlóan a lemezeket tudjuk csatlakoztatni és írni.

Miután megformáztuk a lemezeket, rájuk kell másolnunk az állományokat. A terjesztésekhez tartozó állományokat adott méretû darabokra szeleteltük, így kényelmesen ráférnek egy hagyományos 1,44 MB méretû floppyra. Menjünk végig az összes floppyn és mindegyikre pakoljuk fel a lehetõ legtöbb állományt egészen addig, amíg így az összes szükséges terjesztést össze nem szedtük. A floppykon minden terjesztés kerüljön egy hozzá tartozó alkönyvtárba, például: [.filename]#a:\base\base.aa#, [.filename]#a:\base\base.ab# és így tovább.

[IMPORTANT]
====
Az elsõ lemezre rá kell másolnunk a [.filename]#base.inf# nevû állományt is, mivel ennek beolvasásával lesz képes kitalálni a telepítõ, hogy a terjesztések összeszedése és összefûzése során mennyi darabot keressen.
====

Ahogy elérkezünk a telepítõeszköz kiválasztásához a telepítés folyamatában, ott válasszuk a [.guimenuitem]#Floppy# menüpontot, majd utána kövessük a felbukkanó üzeneteket.

[[install-msdos]]
=== Telepítés MS-DOS(R) partícióról

Amikor egy MS-DOS(R) partícióról akarunk telepíteni, elõkészítés gyanánt másoljuk a terjesztésekhez tartozó állományokat a partícióra egy [.filename]#freebsd# könyvtárba. Ez lesz például a [.filename]#c:\freebsd#. Ebben a könyvtárban igyekezzük minél jobban megtartani a CD vagy az FTP oldal könyvtárszerkezetét, ezért erre a CD-rõl történõ átmásolásra a DOS `xcopy` parancsát javasoljuk. Például így tudjuk elõkészíteni a FreeBSD legegyszerûbb változatának telepítését:

[source,shell]
....
C:\> md c:\freebsd
C:\> xcopy e:\bin c:\freebsd\bin\ /s
C:\> xcopy e:\manpages c:\freebsd\manpages\ /s
....

A fentiekben feltételeztük, hogy ehhez a [.filename]#C:# meghajtón elég szabad helyünk van, valamint az [.filename]#E:# meghajtón érjük el a CD-t.

Ha nincs CD-meghajtónk, az link:ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/{rel120-current}-RELEASE/[ftp.FreeBSD.org] címrõl letölthetjük a terjesztésket. Minden egyes terjesztés külön könyvtárban található, tehát például a _base_ (alap) terjesztés az link:ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/{rel120-current}-RELEASE/base/[{rel120-current}/base/] könyvtárban található.

Mindegyik telepítendõ terjesztést (ami még elfér) másoljuk át az MS-DOS(R) partíció [.filename]#c:\freebsd# könyvtárába - a telepítéshez egyébként egyedül a `BIN` terjesztés szükséges.

=== Telepítõszalag létrehozása

Valószínûleg a szalagos módszer a legegyszerûbb, egyfajta élõ FTP-s vagy CD-s telepítés. A telepítõprogram arra számít, hogy a szalagon az állományok egymás után helyezkednek el. Tehát miután beszereztük a nekünk kellõ terjesztésekhez tartozó összes állományt, egyszerûen vegyük fel ezeket a szalagra:

[source,shell]
....
# cd /freebsd/distdir
# tar cvf /dev/rwt0 dist1 ... dist2
....

Mielõtt telepítenénk, ellenõrizzük, hogy legyen elég helyünk valamelyik (a telepítés során majd kiválasztható átmeneti) könyvtárban ahhoz, hogy az itt létrehozott szalag _teljes_ tartalma elférjen benne. Mivel a szalagok csak szekvenciálisan érhetõek el, ezért ennél a módszernél jó sok ideiglenes tárhelyre lesz szükségünk.

[NOTE]
====
A telepítés megkezdése után a szalagnak már _azelõtt_ a meghajtóban kell lennie, hogy rendszerindító floppyról elindítanánk a rendszert, máskülönben nem találja meg.
====

=== Mielõtt hálózatról telepítenénk

Háromféle hálózati telepítési mód létezik: Ethernet (szabványos Ethernet-vezérlõvel), soros port (PPP) vagy párhuzamos port (PLIP (laplink kábel)).

Valószínûleg az Ethernet-csatlakozó választásával érjük el a leggyorsabb hálózati telepítést. A FreeBSD ismeri a legtöbb PC-s Ethernet kártyát. Az ismert kártyák (és a hozzájuk tartozó beállítások) a FreeBSD egyes kiadásának hardverjegyzékében (Hardware Notes) találhatóak meg. Amennyiben egy támogatott PCMCIA Ethernet kártyát használunk, mindig a laptop bekapcsolása _elõtt_ helyezzük be! A FreeBSD telepítés közben sajnos nem támogatja a PCMCIA kártyák menetközbeni behelyezését.

Ezenkívül még ismernünk kell a hálózaton kapott IP-címünket, az általa használt címosztály hálózati maszkját, a gépünk nevét. Ha PPP kapcsolaton keresztül telepítünk és nincs statikus IP-címünk, akkor minden bizonnyal az internet-szolgáltatónktól kaptunk egyet dinamikusan. A konkrét hálózati beállításokat a hálózatunk rendszergazdájától is érdemes megkérdezni. Ha a hálózaton levõ többi gépre névvel és nem IP-címmel hivatkozunk, akkor szükségünk lesz még egy név(feloldó) szerverre és az internet eléréséhez egy átjáró címére is (ha PPP-t használunk, ez a szolgáltatónk IP-címe lesz). Ha FTP-rõl HTTP proxy használatával telepítünk, akkor a proxy címe is kelleni fog. Ha magunktól nem vagyunk képesek ezekre a kérdésekre válaszolni, akkor az ilyen típusú telepítés megkezdése _elõtt_ tényleg segítséget kell kérnünk egy rendszergazdától vagy az internet-szolgáltatónktól.

Ha modemet használunk, akkor a PPP szinte biztosan megfelel nekünk. Gondoskodjunk róla, hogy már a telepítés korai szakaszában rendelkezésünkre áll az internet-szolgáltatónkkal kapcsolatosan minden hasznos információ.

Ha PAP vagy CHAP használatával kapcsolódunk a szolgáltatónkhoz (másképp szólva Windows(R)-ban így tudunk szkriptek nélkül csatlakozni), mindössze a `dial` parancsot kell kiadnunk a ppp parancssorában. Minden más esetben tudnunk kell a modemünk saját "AT parancsaival" tárcsázni az internet-szolgáltatónkat, hiszen ehhez a PPP tárcsázó csak egy nagyon kezdetleges terminálemulációt nyújt. Ezzel kapcsolatban olvassuk el crossref:ppp-and-slip[userppp,a kézikönyv] és a extref:{faq}[GYIK, _ppp] idevágó részeit. Ha gondjaink akadnának, a naplózás a `set log local ...` parancs kiadásával átirányítható közvetlenül a képernyõre.

Ha kötött módon tudunk csatlakozni egy másik (2.0-R vagy késõbbi verziójú) FreeBSD géphez, akkor megpróbálkozhatunk a párhuzamos "laplink" kábellel. A párhuzamos porton keresztüli adatátvitel sebessége a soros vonalénál jóval nagyobb (egészen 50 kbyte/mp), ezért vele a telepítés is gyorsabb.

==== Mielõtt NFS-rõl telepítenénk

A telepítés NFS-en keresztül szinte magától értetõdik. Egyszerûen csak másoljuk a FreeBSD terjesztéseihez tartozó állományokat az NFS szerverre és állítsuk be rá az NFS telepítõeszközt.

Ha a szerver csak "privilegizált portokat" ismer (ami általában alapértelmezett a Sun munkaállomásoknál), a telepítés megkezdése elõtt az menu:Options[] (Beállítások) menüben be kell állítani az `NFS Secure` (Biztonságos NFS) opciót.

Ha egy gyenge minõségû és kis adatátviteli sebességû Ethernet kártyánk van, akkor emellett még hasznos lehet beállítani az `NFS Slow` (Lassú NFS) opciót is.

Az NFS-en keresztüli telepítés mûködéséhez a szervernek támogatnia kell az alkönyvtárak csatlakoztatását is, tehát például ha a FreeBSD {rel120-current} terjesztésünk a [.filename]#ziggy:/usr/archive/stuff/FreeBSD# könyvtárban található, akkor `ziggy` nevû gépnek lehetõvé kell tennie a [.filename]#/usr/archive/stuff/FreeBSD# könyvtár közvetlen csatlakoztatását is, nem csak a [.filename]#/usr# vagy [.filename]#/usr/archive/stuff# könyvtárakét.

A FreeBSD [.filename]#/etc/exports# állományában ezt az `-alldirs` beállítással vezérelhetjük. Más NFS szervereken esetleg más megszokásokat kell követnünk. Amennyiben a szervertõl `permission denied` (hozzáférés megtagadva) üzeneteket kapjuk, valószínû, hogy ezt nem állítottuk be megfelelõen.
