---
title: Глава 3. Установка FreeBSD версий 9.X и более поздних
part: Часть I. В начале
prev: books/handbook/install
next: books/handbook/basics
---

[[bsdinstall]]
= Установка FreeBSD версий 9.X и более поздних
:doctype: book
:toc: macro
:toclevels: 1
:icons: font
:sectnums:
:sectnumlevels: 6
:source-highlighter: rouge
:experimental:
:skip-front-matter:
:toc-title: Содержание
:table-caption: Таблица
:figure-caption: Рисунок
:example-caption: Пример
:xrefstyle: basic
:relfileprefix: ../
:outfilesuffix:
:sectnumoffset: 3

ifeval::["{backend}" == "html5"]
:imagesdir: ../../../../images/books/handbook/bsdinstall/
endif::[]

ifeval::["{backend}" == "pdf"]
:imagesdir: ../../../../static/images/books/handbook/bsdinstall/
endif::[]

ifeval::["{backend}" == "epub3"]
:imagesdir: ../../../../static/images/books/handbook/bsdinstall/
endif::[]

include::shared/authors.adoc[]
include::shared/releases.adoc[]
include::shared/ru/mailing-lists.adoc[]
include::shared/ru/teams.adoc[]
include::shared/ru/urls.adoc[]

toc::[]

[[bsdinstall-synopsis]]
== Краткий обзор

FreeBSD поставляется с простой в использовании текстовой программой установки. FreeBSD 9.0-RELEASE и более поздние укомплектованы установщиком, называемым bsdinstall, в то время как в релизах, предшествующих FreeBSD 9.0-RELEASE, для установки используется sysinstall. В этом разделе описана работа с программой bsdinstall. Работа с установщиком sysinstall описана в crossref:install[install, Установка FreeBSD версий 8.X и более ранних].

После прочтения этого раздела вы будете знать:

* Как создавать установочные носители для FreeBSD.
* Разбиение и именование разделов жестких дисков во FreeBSD.
* Как запустить bsdinstall.
* Вопросы, задаваемые утилитой bsdinstall, что они значат и как на них отвечать.

Перед прочтением этого раздела вам необходимо:

* Прочитать список поддерживаемого оборудования, который прилагается к устанавливаемой вами версии FreeBSD, а также убедиться, что ваше оборудование поддерживается.

[NOTE]
====
В общем, эти инструкции по установке написаны для машин архитектуры i386(TM) ("PC-совместимая"). Там, где это необходимо, будут даны указания для других платформ. Между установщиком и этим документом могут быть незначительные различия, поэтому используйте эту главу как общее руководство, а не как точную пошаговую инструкцию.
====

[[bsdinstall-hardware]]
== Аппаратные требования

[[bsdinstall-hardware-minimal]]
=== Минимальная конфигурация

Минимальная аппаратная конфигурация, достаточная для установки FreeBSD, зависит от версии FreeBSD и от аппаратной архитектуры.

Краткое изложение этой информации дано в следующих разделах. В зависимости от способа установки FreeBSD вам также может потребоваться поддерживаемый привод CDROM, а в некоторых случаях - сетевой адаптер. Об этом будет сказано в <<bsdinstall-installation-media>>.

==== FreeBSD/i386

Для FreeBSD/i386 необходим 486 процессор или выше, а также - как минимум 64 МБ ОЗУ. Для самой минимальной установки потребуется не менее 1.1 ГБ свободного места на жестком диске.

[NOTE]
====
Для устаревших компьютеров более эффективным способом повышения производительности является увеличение объема ОЗУ и объема жесткого диска, нежели установка более быстродействующего процессора.
====

==== FreeBSD/amd64

Существует два класса процессоров, на которых может работать FreeBSD/amd64. К первому принадлежат процессоры AMD64, включая AMD Athlon(TM)64, AMD Athlon(TM)64-FX, AMD Opteron(TM) и более новые.

Ко второму классу процессоров, на которых работает FreeBSD/amd64, принадлежат процессоры архитектуры Intel(R) EM64T. Перечень процессоров включает следующие семейства: Intel(R) Core(TM) 2 Duo, Quad, Extreme, семейства Intel(R) Xeon(TM) 3000, 5000 и 7000, а также Intel(R) Core(TM) i3, i5 и i7.

Если ваш компьютер построен на чипсете nVidia nForce3 Pro-150, то вам _необходимо_ отключить IO APIC в BIOS. Если для этого нет опции в BIOS, отключите ACPI в операционной системе. В чипсете Pro-150 содержатся ошибки, для которых пока не существует исправлений.

==== FreeBSD/powerpc Apple(R) Macintosh(R)

Поддерживаются все американские системы Apple(R) Macintosh(R) с встроенным USB. Для многопроцессорных машин есть поддержка SMP.

Ядро (32-бит) может адресовать лишь первые 2 ГБ ОЗУ. На Blue & White PowerMac G3 не поддерживается FireWire(R).

==== FreeBSD/sparc64

Поддерживаемые FreeBSD/sparc64 системы перечислены в проекте http://www.freebsd.org/platforms/sparc/[ FreeBSD/sparc64].

Для FreeBSD/sparc64 требуется отдельный жесткий диск. На данный момент нет возможности разделять диск с другой операционной системой.

[[bsdinstall-hardware-supported]]
=== Поддерживаемое оборудование

Архитектуры и устройства, поддерживаемые каждым релизом FreeBSD, перечислены в файле Hardware Notes. Файл, как правило, называется [.filename]#HARDWARE.TXT#, и располагается в корневом каталоге установочного носителя. Также копии списка поддерживаемого оборудования находятся на странице http://www.FreeBSD.org/releases/[Release Information] веб сайта FreeBSD.

[[bsdinstall-pre]]
== Перед установкой

=== Сделайте резервные копии данных

Сделайте резервные копии всех важных данных с того компьютера, на который планируется установка FreeBSD. Проверьте пригодность резервных копий до начала установки. Перед внесением изменений на диск инсталлятор FreeBSD запросит подтверждение, но как только изменения будут внесены, то отменить их уже будет невозможно.

[[bsdinstall-where]]
=== Решите куда установить FreeBSD

Если FreeBSD будет единственной установленной операционной системой, и она будет занимать весь жесткий диск, то можете смело пропустить этот раздел. Но если FreeBSD будет разделять диск с другими операционными системами, то во время установки вам понадобится понимание принципов разбиения дисков.

[[bsdinstall-where-i386]]
==== Разделы диска для FreeBSD/i386 и FreeBSD/amd64

Весь объем жестких дисков может быть разделен на множество частей. Эти части называются _разделами_.

Есть два способа деления диска на разделы. Традиционный способ - _Master Boot Record_ (MBR) - хранит таблицу разделов, вмещающую до четырех _первичных разделов_. (Так сложилось исторически, что во FreeBSD эти разделы называются _слайсами_.) Возможны ситуации, в которых четыре раздела недостаточно, поэтому один из первичных разделов может быть превращен в _расширенный раздел_. Внутри расширенного раздела может быть создано несколько _логических разделов_. Результирующая структура выглядит немного неуклюже, но такова она есть.

Создание _Таблицы Разделов GUID_ (GUID Partition Table, GPT) - это более новый и простой способ деления диска. Также новый способ (GPT) по сравнению с традиционным способом разбиения (MBR) гораздо более гибкий. Распространённые реализации GPT позволяют создавать до 128 разделов на одном диске, тем самым исключая необходимость создания неудобных сущностей наподобие логических дисков.

[WARNING]
====

Некоторые старые операционные системы, например Windows(R) XP, не совместимы со схемой GPT. Если на один диск необходимо установить FreeBSD совместно с такой операционной системой, то следует воспользоваться схемой MBR.
====

Стандартному загрузчику FreeBSD необходим первичный раздел (MBR) или GPT раздел. (Обратитесь к crossref:boot[boot, Процесс загрузки FreeBSD] за более подробной информацией о процессе загрузки FreeBSD.) Если все первичные или GPT разделы уже задействованы, то для FreeBSD один из них необходимо будет освободить.

Минимальная установка FreeBSD занимает ни много ни мало - 1 ГБ дискового пространства. Однако, это _очень_ минимальная установка, практически не оставляющая свободного места. Более реалистичным минимумом является 3 ГБ без графической подсистемы, а если будет использоваться графическая подсистема, то 5 ГБ или более. Свободное пространство также потребуется приложениям от третьих лиц.

Для создания разделов существует разнообразие свободно распространяемых и коммерческих http://en.wikipedia.org/wiki/List_of_disk_partitioning_software[утилит]. http://gparted.sourceforge.net/livecd.php[GParted Live] это свободно распространяемый загрузочный дистрибутив, в который включен редактор разделов GParted. Также GParted включен в многие другие дистрибутивы Live CD от Linux.

[WARNING]
====

Утилиты для создания разделов могут повредить ваши данные. Поэтому сделайте полную резервную копию и проверьте её целостность перед модификацией разделов диска.
====

Определенные трудности составляет изменение размеров разделов Microsoft(R) Vista. В таких случаях может пригодиться установочный CDROM от самой Microsoft(R) Vista.

.Использование существующего раздела
[example]
====
Компьютер с ОС Windows(R) имеет жесткий диск размером 40 ГБ, диск разбит на два раздела по 20 ГБ. Windows(R) именует их дисками [.filename]#C:# и [.filename]#D:#. На диске [.filename]#C:# данными занято 10 ГБ, а на диске [.filename]#D:# - 5 ГБ.

Перемещение данных с диска [.filename]#D:# на диск [.filename]#C:# освобождает второй раздел для установки FreeBSD.
====

.Уменьшение размера существующего раздела
[example]
====
Компьютер с ОС Windows(R) имеет жесткий диск размером 40 ГБ, на котором создан один большой раздел, занимающий весь жесткий диск. Windows(R) именует этот раздел диском [.filename]#C:#. На этом разделе данные занимают 15 ГБ. Конечная цель - отвести для Windows(R) раздел размером 20 ГБ, а второй раздел размером 20 ГБ задействовать для установки FreeBSD.

Подобное перераспределение можно выполнить одним из двух способов:

. Сделайте резервную копию данных вашей Windows(R). Далее, переустановите Windows(R), создав во время инсталляции раздел размером 20 ГБ.
. Используйте утилиту редактирования разделов (наподобие GParted) для уменьшения раздела Windows(R), а в освободившемся пространстве создайте новый раздел для установки FreeBSD.

====

Разделы диска, содержащие разные операционные системы, делают возможной загрузку по выбору одной из имеющихся операционных систем. Альтернативный способ, позволяющий загружать несколько операционных систем в одно и то же время, описан в разделе, называемом crossref:virtualization[virtualization, virtualization].

[[bsdinstall-collect-network-information]]
=== Соберите информацию о сетевых настройках

Некоторым вариантам установки FreeBSD для загрузки файлов необходимо наличие соединения с сетью. Инсталлятор запросит информацию о подключении для настройки соединения с сетью через интерфейс Ethernet (через кабельный модем или к модем DSL с интерфейсом Ethernet).

Для автоматического конфигурирования сетевых интерфейсов часто применяется протокол _DHCP_. Если в подключаемой сети сервис DHCP отсутствует, информацию о подключении к необходимо взять у системного администратора или провайдера Интернет.

. IP адрес
. Маска подсети
. IP адрес шлюза по умолчанию
. Доменное имя локальной сети
. IP адрес DNS сервера/серверов

=== Проверьте сведения об обнаруженных ошибках FreeBSD

Хотя проект FreeBSD борется за то, чтобы каждый релиз FreeBSD был настолько стабильным, насколько это возможно, ошибки порой вкрадываются в процесс разработки. В очень редких случаях эти ошибки влияют на процесс установки. Как только эти проблемы обнаруживаются и исправляются, их описание попадает в link:https://www.FreeBSD.org/releases/{rel120-current}R/errata/[сообщения об ошибках FreeBSD], находящиеся на сайте FreeBSD. Проверьте сообщения об ошибках перед установкой и убедитесь, что отсутствуют проблемы, которые могут затронуть установку.

Информация о всех релизах, включая сообщения об ошибках каждого релиза, может быть найдена на странице link:https://www.FreeBSD.org/releases/[информации о релизах] link:https://www.FreeBSD.org/[веб сайта FreeBSD].

[[bsdinstall-installation-media]]
=== Подготовка установочного носителя информации

Установка FreeBSD начинается с загрузки компьютера с установочного носителя, будь то CD, DVD или USB флеш-накопитель. Инсталлятор - это не та программа, которую можно запустить из другой операционной системы.

В дополнение к стандартному установочному носителю, который содержит копии всех установочных файлов FreeBSD, также существует вариант, предназначенный исключительно для загрузки и называемый _bootonly_. Установочный носитель bootonly не содержит копий инсталляционных файлов, а загружает их из сети во время установки. Поэтому образ bootonly CD гораздо меньше объемом, а также при его использовании загружаются лишь необходимые файлы, тем самым уменьшается нагрузка на сетевое соединение.

Копии образов установочных носителей находятся на link:https://www.FreeBSD.org/where/[веб сайте FreeBSD]. Также, в каталоге с файлами установочных образов находится файл [.filename]#CHECKSUM.SHA256#, который понадобится вам для проверки целостности скачанного файла образа. Проверка целостности файла образа производится сравнением _контрольных сумм_. Для подсчета последних FreeBSD предоставляет man:sha256[1], другие операционные системы также располагают подобными программами. Сравните полученную контрольную сумму с одной из [.filename]#CHECKSUM.SHA256#. Контрольные суммы должны совпасть полностью. Несовпадение контрольных сумм значит, что файл поврежден и к использованию не пригоден.

[TIP]
====

Если у вас уже имеется копия FreeBSD на CDROM, DVD, или USB флеш-накопителе, то нижеследующий текст можно опустить.
====

CD- и DVD-образы FreeBSD являются загрузочными. Для установки необходим один из них. Запишите образ на CD или DVD диск при помощи программы для записи CD, которая есть в вашей текущей операционной системе. Во FreeBSD запись дисков осуществляется утилитой man:cdrecord[1] из комплекта [.filename]#sysutils/cdrtools# Коллекции Портов.

Для создания загрузочного флеш-накопителя выполните следующие шаги:

[[bsdinstall-installation-media-memory-stick]]
[.procedure]
====

. Получение образа для флеш-накопителя
+ 
Образы для флеш-накопителя для FreeBSD 9.0-RELEASE и более поздних могут быть скачаны с каталога [.filename]#ISO-IMAGES/# по адресу `ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/_arch_/_arch_/ISO-IMAGES/_version_/FreeBSD-_version_-RELEASE-_arch_-memstick.img`. Замените _arch_ и _version_ соответственно на архитектуру и номер версии которую вы планируете установить. Например, образы для флеш-накопителей FreeBSD/i386 9.0-RELEASE находятся на link:ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/i386/ISO-IMAGES/9.0/FreeBSD-9.0-RELEASE-i386-memstick.img[ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/i386/ISO-IMAGES/9.0/FreeBSD-9.0-RELEASE-i386-memstick.img].
+
[TIP]
======

Для FreeBSD 8._X_ и более ранних версий используется иной путь каталогов. Детали загрузки и установки FreeBSD 8._X_ и более ранних версий описаны в crossref:install[install, Установка FreeBSD версий 8.X и более ранних].
======
+ 
Имя образа для флеш-накопителя имеет суффикс [.filename]#.img#. Каталог [.filename]#ISO-IMAGES/# содержит определённое количество разных образов, и выбор конкретного образа зависит от устанавливаемой версии FreeBSD, а в некоторых случаях - и от аппаратного обеспечения.
+
[IMPORTANT]
======
Перед продолжением _сделайте резервную копию_ данных с флеш-накопителя, так как следующая процедура _уничтожит_ их.
======
+
. Запись образа на флеш-накопитель
+
[.procedure]
======
*Procedure: Использование FreeBSD для записи образа*

[WARNING]
****

В нижеследующем примере показано использование [.filename]#/dev/da0# в качестве устройства, на которое производится запись. Удостоверьтесь в том, что целевое устройство выбрано верно, иначе вы можете повредить существующие данные.
****
.. Запись образа при помощи man:dd[1]
+ 
Файл [.filename]#.img# не является обычным файлом. Это _образ_ всего содержимого флеш-накопителя. Этот файл _не может_ быть просто скопированным подобно обычному файлу, он должен быть записан непосредственно на целевое устройство при помощи man:dd[1]:
+
[source,bash]
....
# dd if=FreeBSD-9.0-RELEASE-i386-memstick.img of=/dev/da0 bs=64k
....
======
+
[.procedure]
======
*Procedure: Использование Windows(R) для записи образа*

[WARNING]
****

Удостоверьтесь в правильности выбора буквы диска, указываемой как целевое устройство, иначе вы перезапишете и повредите существующие данные.
****
.. Получение Image Writer для Windows(R)
+ 
Image Writer для Windows(R) - это свободно распространяемое приложение, при помощи которого можно корректно записать образ на флеш-накопитель. Скачайте его с https://launchpad.net/win32-image-writer/[https://launchpad.net/win32-image-writer/] и сохраните в любую директорию.
.. Запись образа при помощи Image Writer
+ 
Кликните дважды на иконке Win32DiskImager для запуска приложения. Удостоверьтесь, что буква диска, отображаемая в боксе `Device`, соответствует устройству флеш-накопителя. Кликните на иконке с папкой и выберите образ, который будет записан на флеш-накопитель. Нажмите кнопку btn:[Save] для подтверждения выбора имени файла. Проверьте, что всё верно, а также что нет открытых директорий с флеш-накопителя в других окнах. Когда всё готово, нажмите кнопку btn:[Write] для записи образа на флеш-накопитель.
======
====

[NOTE]
====
Установка с дискет более не поддерживается.
====

Теперь вы готовы начать установку FreeBSD.

[[bsdinstall-start]]
== Начало установки

[IMPORTANT]
====
По умолчанию, установщик не изменяет данные на ваших дисках до тех пор, пока вы не увидите следующее сообщение:

....
Your changes will now be written to disk.  If you
have chosen to overwrite existing data, it will
be PERMANENTLY ERASED. Are you sure you want to
commit your changes?
....

Установка может быть прервана в любой момент до появления этого предупреждения, при этом содержимое дисков изменено не будет. Если вы обеспокоены тем, что что-то было настроено неверно, то вы можете просто выключить компьютер до этого сообщения, при этом никаких повреждений существующих данных не произойдет.
====

[[bsdinstall-starting]]
=== Загрузка

[[bsdinstall-starting-i386]]
==== Загрузка на i386(TM) и amd64

[.procedure]
====

. Если вы подготовили "загрузочный" USB-накопитель, как описано в <<bsdinstall-installation-media>>, то вставьте его в USB гнездо перед включением компьютера.
+ 
Если вы загружаетесь с CDROM, то вам необходимо будет включить компьютер и при первой возможности вставить CD диск.
. Настройте вашу машину на загрузку с CDROM или с USB, в зависимости от того, какое устройство используется для установки. Настройки BIOS позволяют выбрать конкретное загрузочное устройство. Большинство систем также предоставляют возможность выбрать загрузочное устройство во время запуска, часто эта возможность активируется по нажатию клавиши kbd:[F10], kbd:[F11], kbd:[F12] или kbd:[Escape].
. Если ваш компьютер загружается как обычно и запускает существующую операционную систему, то:
.. Диск не был вставлен заблаговременно. Оставьте его в приводе и попробуйте перезагрузить ваш компьютер.
.. Ранее внесенные изменения в BIOS не сработали. Попробуйте повторить шаг настройки BIOS пока не получите необходимый порядок загрузки.
.. Ваш нынешний BIOS не поддерживает загрузку с имеющегося загрузочного накопителя. В этом случае можно использовать http://www.plop.at/en/bootmanager.html[Plop Boot Manager] для загрузки более старых машин с CD или USB.
+
. FreeBSD начнет загружаться. Если вы загружаетесь с CDROM, вы увидите поток сообщений, подобный следующему (информация о версиях опущена):
+
[source,bash]
....
Booting from CD-ROM...
645MB medium detected
CD Loader 1.2

Building the boot loader arguments
Looking up /BOOT/LOADER... Found
Relocating the loader and the BTX
Starting the BTX loader

BTX loader 1.00 BTX version is 1.02
Consoles: internal video/keyboard
BIOS CD is cd0
BIOS drive C: is disk0
BIOS drive D: is disk1
BIOS 636kB/261056kB available memory

FreeBSD/i386 bootstrap loader, Revision 1.1

Loading /boot/defaults/loader.conf
/boot/kernel/kernel text=0x64daa0 data=0xa4e80+0xa9e40 syms=[0x4+0x6cac0+0x4+0x88e9d]
\
....
+
. Отображается меню загрузчика FreeBSD:
+
[[bsdinstall-boot-loader-menu]]
.Меню загрузчика FreeBSD
image::bsdinstall-boot-loader-menu.png[]
+ 
Выждите десять секунд или нажмите kbd:[Enter].
====

==== Загрузка Macintosh(R) PowerPC(R)

На большинстве машин удерживание клавиши kbd:[C] на клавиатуре во время начальной загрузки активирует загрузку с CD. Иначе, удерживайте kbd:[Command+Option+O+F], или kbd:[Windows+Alt+O+F] на не-Apple(R) клавиатурах. На приглашение `0 >` введите

[source,bash]
....
 boot cd:,\ppc\loader cd:0
....

Для Xserves без клавиатур, ознакомьтесь с загрузкой в Open Firmware, которая описана на http://support.apple.com/kb/TA26930[сайте поддержки Apple(R)].

==== Загрузка sparc64

Большинство систем sparc64 настроены на автоматическую загрузку с жесткого диска. Для того, чтобы установить FreeBSD, вам потребуется выполнить загрузку по сети или с CDROM, что подразумевает получение доступа к PROM (OpenFirmware).

Для того, чтобы получить доступ к PROM, перегрузите систему и дождитесь появления загрузочных сообщений. Вид сообщений зависит от модели машины, но должен выглядеть подобно следующему:

[source,bash]
....
Sun Blade 100 (UltraSPARC-IIe), Keyboard Present
Copyright 1998-2001 Sun Microsystems, Inc.  All rights reserved.
OpenBoot 4.2, 128 MB memory installed, Serial 51090132.
Ethernet address 0:3:ba:b:92:d4, Host ID: 830b92d4.
....

Если ваша система продолжает загружаться с жесткого диска, то чтобы получить приглашение PROM вам необходимо нажать на клавиатуре kbd:[L1+A] или kbd:[Stop+A], или же послать сигнал `BREAK` через последовательную консоль (используя, например, `~#` в man:tip[1] или man:cu[1]). Приглашение выглядит подобно следующему:

[source,bash]
....
ok     <.>
ok {0} <.>
....

<.> Приглашение, отображающееся на системах с одним центральным процессором.

<.> Приглашение, отображающееся на многопроцессорных (SMP) системах, цифра указывает на количество активных центральных процессоров.

На этом этапе вставьте CDROM в привод и наберите `boot cdrom` в приглашении PROM.

[[bsdinstall-view-probe]]
=== Просмотр результата определения устройств (device probe)

Выводимые на экран во время начальной загрузки системы последние пару сотен строк сохраняются, и при необходимости могут быть просмотрены.

Чтобы просмотреть содержимое буфера, нажмите kbd:[Scroll Lock]. Это включит режим буфера прокрутки. Далее, для просмотра сохраненных сообщений вы можете использовать клавиши навигации или клавиши kbd:[PageUp] и kbd:[PageDown]. Чтобы выйти из режима просмотра буфера нажмите еще раз kbd:[Scroll Lock].

Включите прокрутку экранного буфера и просмотрите сообщения, которые были вытеснены с экрана во время определения устройств ядром. Вы увидите текст, подобный к <<bsdinstall-dev-probe>>, однако его содержимое будет отличаться в зависимости от комплекта устройств, установленных в ваш компьютер.

[[bsdinstall-dev-probe]]
.Типичный вывод сообщений определения устройств
[source,bash]
....
Copyright (c) 1992-2011 The FreeBSD Project.
Copyright (c) 1979, 1980, 1983, 1986, 1988, 1989, 1991, 1992, 1993, 1994
        The Regents of the University of California. All rights reserved.
FreeBSD is a registered trademark of The FreeBSD Foundation.
FreeBSD 9.0-RELEASE #0 r225473M: Sun Sep 11 16:07:30 BST 2011
    root@psi:/usr/obj/usr/src/sys/GENERIC amd64
CPU: Intel(R) Core(TM)2 Duo CPU     T9400  @ 2.53GHz (2527.05-MHz K8-class CPU)
  Origin = "GenuineIntel"  Id = 0x10676  Family = 6  Model = 17  Stepping = 6
  Features=0xbfebfbff<FPU,VME,DE,PSE,TSC,MSR,PAE,MCE,CX8,APIC,SEP,MTRR,PGE,MCA,CMOV,PAT,PSE36,CLFLUSH,DTS,ACPI,MMX,FXSR,SSE,SSE2,SS,HTT,TM,PBE>
  Features2=0x8e3fd<SSE3,DTES64,MON,DS_CPL,VMX,SMX,EST,TM2,SSSE3,CX16,xTPR,PDCM,SSE4.1>
  AMD Features=0x20100800<SYSCALL,NX,LM>
  AMD Features2=0x1<LAHF>
  TSC: P-state invariant, performance statistics
real memory  = 3221225472 (3072 MB)
avail memory = 2926649344 (2791 MB)
Event timer "LAPIC" quality 400
ACPI APIC Table: <TOSHIB A0064   >
FreeBSD/SMP: Multiprocessor System Detected: 2 CPUs
FreeBSD/SMP: 1 package(s) x 2 core(s)
 cpu0 (BSP): APIC ID:  0
 cpu1 (AP): APIC ID:  1
ioapic0: Changing APIC ID to 1
ioapic0 <Version 2.0> irqs 0-23 on motherboard
kbd1 at kbdmux0
acpi0: <TOSHIB A0064> on motherboard
acpi0: Power Button (fixed)
acpi0: reservation of 0, a0000 (3) failed
acpi0: reservation of 100000, b6690000 (3) failed
Timecounter "ACPI-safe" frequency 3579545 Hz quality 850
acpi_timer0: <24-bit timer at 3.579545MHz> port 0xd808-0xd80b on acpi0
cpu0: <ACPI CPU> on acpi0
ACPI Warning: Incorrect checksum in table [ASF!] - 0xFE, should be 0x9A (20110527/tbutils-282)
cpu1: <ACPI CPU> on acpi0
pcib0: <ACPI Host-PCI bridge> port 0xcf8-0xcff on acpi0
pci0: <ACPI PCI bus> on pcib0
vgapci0: <VGA-compatible display> port 0xcff8-0xcfff mem 0xff400000-0xff7fffff,0xe0000000-0xefffffff irq 16 at device 2.0 on pci0
agp0: <Intel GM45 SVGA controller> on vgapci0
agp0: aperture size is 256M, detected 131068k stolen memory
vgapci1: <VGA-compatible display> mem 0xffc00000-0xffcfffff at device 2.1 on pci0
pci0: <simple comms> at device 3.0 (no driver attached)
em0: <Intel(R) PRO/1000 Network Connection 7.2.3> port 0xcf80-0xcf9f mem 0xff9c0000-0xff9dffff,0xff9fe000-0xff9fefff irq 20 at device 25.0 on pci0
em0: Using an MSI interrupt
em0: Ethernet address: 00:1c:7e:6a:ca:b0
uhci0: <Intel 82801I (ICH9) USB controller> port 0xcf60-0xcf7f irq 16 at device 26.0 on pci0
usbus0: <Intel 82801I (ICH9) USB controller> on uhci0
uhci1: <Intel 82801I (ICH9) USB controller> port 0xcf40-0xcf5f irq 21 at device 26.1 on pci0
usbus1: <Intel 82801I (ICH9) USB controller> on uhci1
uhci2: <Intel 82801I (ICH9) USB controller> port 0xcf20-0xcf3f irq 19 at device 26.2 on pci0
usbus2: <Intel 82801I (ICH9) USB controller> on uhci2
ehci0: <Intel 82801I (ICH9) USB 2.0 controller> mem 0xff9ff800-0xff9ffbff irq 19 at device 26.7 on pci0
usbus3: EHCI version 1.0
usbus3: <Intel 82801I (ICH9) USB 2.0 controller> on ehci0
hdac0: <Intel 82801I High Definition Audio Controller> mem 0xff9f8000-0xff9fbfff irq 22 at device 27.0 on pci0
pcib1: <ACPI PCI-PCI bridge> irq 17 at device 28.0 on pci0
pci1: <ACPI PCI bus> on pcib1
iwn0: <Intel(R) WiFi Link 5100> mem 0xff8fe000-0xff8fffff irq 16 at device 0.0 on pci1
pcib2: <ACPI PCI-PCI bridge> irq 16 at device 28.1 on pci0
pci2: <ACPI PCI bus> on pcib2
pcib3: <ACPI PCI-PCI bridge> irq 18 at device 28.2 on pci0
pci4: <ACPI PCI bus> on pcib3
pcib4: <ACPI PCI-PCI bridge> at device 30.0 on pci0
pci5: <ACPI PCI bus> on pcib4
cbb0: <RF5C476 PCI-CardBus Bridge> at device 11.0 on pci5
cardbus0: <CardBus bus> on cbb0
pccard0: <16-bit PCCard bus> on cbb0
isab0: <PCI-ISA bridge> at device 31.0 on pci0
isa0: <ISA bus> on isab0
ahci0: <Intel ICH9M AHCI SATA controller> port 0x8f58-0x8f5f,0x8f54-0x8f57,0x8f48-0x8f4f,0x8f44-0x8f47,0x8f20-0x8f3f mem 0xff9fd800-0xff9fdfff irq 19 at device 31.2 on pci0
ahci0: AHCI v1.20 with 4 3Gbps ports, Port Multiplier not supported
ahcich0: <AHCI channel> at channel 0 on ahci0
ahcich1: <AHCI channel> at channel 1 on ahci0
ahcich2: <AHCI channel> at channel 4 on ahci0
acpi_lid0: <Control Method Lid Switch> on acpi0
battery0: <ACPI Control Method Battery> on acpi0
acpi_button0: <Power Button> on acpi0
acpi_acad0: <AC Adapter> on acpi0
acpi_toshiba0: <Toshiba HCI Extras> on acpi0
acpi_tz0: <Thermal Zone> on acpi0
attimer0: <AT timer> port 0x40-0x43 irq 0 on acpi0
Timecounter "i8254" frequency 1193182 Hz quality 0
Event timer "i8254" frequency 1193182 Hz quality 100
atkbdc0: <Keyboard controller (i8042)> port 0x60,0x64 irq 1 on acpi0
atkbd0: <AT Keyboard> irq 1 on atkbdc0
kbd0 at atkbd0
atkbd0: [GIANT-LOCKED]
psm0: <PS/2 Mouse> irq 12 on atkbdc0
psm0: [GIANT-LOCKED]
psm0: model GlidePoint, device ID 0
atrtc0: <AT realtime clock> port 0x70-0x71 irq 8 on acpi0
Event timer "RTC" frequency 32768 Hz quality 0
hpet0: <High Precision Event Timer> iomem 0xfed00000-0xfed003ff on acpi0
Timecounter "HPET" frequency 14318180 Hz quality 950
Event timer "HPET" frequency 14318180 Hz quality 450
Event timer "HPET1" frequency 14318180 Hz quality 440
Event timer "HPET2" frequency 14318180 Hz quality 440
Event timer "HPET3" frequency 14318180 Hz quality 440
uart0: <16550 or compatible> port 0x3f8-0x3ff irq 4 flags 0x10 on acpi0
sc0: <System console> at flags 0x100 on isa0
sc0: VGA <16 virtual consoles, flags=0x300>
vga0: <Generic ISA VGA> at port 0x3c0-0x3df iomem 0xa0000-0xbffff on isa0
ppc0: cannot reserve I/O port range
est0: <Enhanced SpeedStep Frequency Control> on cpu0
p4tcc0: <CPU Frequency Thermal Control> on cpu0
est1: <Enhanced SpeedStep Frequency Control> on cpu1
p4tcc1: <CPU Frequency Thermal Control> on cpu1
Timecounters tick every 1.000 msec
hdac0: HDA Codec #0: Realtek ALC268
hdac0: HDA Codec #1: Lucent/Agere Systems (Unknown)
pcm0: <HDA Realtek ALC268 PCM #0 Analog> at cad 0 nid 1 on hdac0
pcm1: <HDA Realtek ALC268 PCM #1 Analog> at cad 0 nid 1 on hdac0
usbus0: 12Mbps Full Speed USB v1.0
usbus1: 12Mbps Full Speed USB v1.0
usbus2: 12Mbps Full Speed USB v1.0
usbus3: 480Mbps High Speed USB v2.0
ugen0.1: <Intel> at usbus0
uhub0: <Intel UHCI root HUB, class 9/0, rev 1.00/1.00, addr 1> on usbus0
ugen1.1: <Intel> at usbus1
uhub1: <Intel UHCI root HUB, class 9/0, rev 1.00/1.00, addr 1> on usbus1
ugen2.1: <Intel> at usbus2
uhub2: <Intel UHCI root HUB, class 9/0, rev 1.00/1.00, addr 1> on usbus2
ugen3.1: <Intel> at usbus3
uhub3: <Intel EHCI root HUB, class 9/0, rev 2.00/1.00, addr 1> on usbus3
uhub0: 2 ports with 2 removable, self powered
uhub1: 2 ports with 2 removable, self powered
uhub2: 2 ports with 2 removable, self powered
uhub3: 6 ports with 6 removable, self powered
ugen2.2: <vendor 0x0b97> at usbus2
uhub8: <vendor 0x0b97 product 0x7761, class 9/0, rev 1.10/1.10, addr 2> on usbus2
ugen1.2: <Microsoft> at usbus1
ada0 at ahcich0 bus 0 scbus1 target 0 lun 0
ada0: <Hitachi HTS543225L9SA00 FBEOC43C> ATA-8 SATA 1.x device
ada0: 150.000MB/s transfers (SATA 1.x, UDMA6, PIO 8192bytes)
ada0: Command Queueing enabled
ada0: 238475MB (488397168 512 byte sectors: 16H 63S/T 16383C)
ada0: Previously was known as ad4
ums0: <Microsoft Microsoft 3-Button Mouse with IntelliEyeTM, class 0/0, rev 1.10/3.00, addr 2> on usbus1
SMP: AP CPU #1 Launched!
cd0 at ahcich1 bus 0 scbus2 target 0 lun 0
cd0: <TEAC DV-W28S-RT 7.0C> Removable CD-ROM SCSI-0 device
cd0: 150.000MB/s transfers (SATA 1.x, ums0: 3 buttons and [XYZ] coordinates ID=0
UDMA2, ATAPI 12bytes, PIO 8192bytes)
cd0: cd present [1 x 2048 byte records]
ugen0.2: <Microsoft> at usbus0
ukbd0: <Microsoft Natural Ergonomic Keyboard 4000, class 0/0, rev 2.00/1.73, addr 2> on usbus0
kbd2 at ukbd0
uhid0: <Microsoft Natural Ergonomic Keyboard 4000, class 0/0, rev 2.00/1.73, addr 2> on usbus0
Trying to mount root from cd9660:/dev/iso9660/FREEBSD_INSTALL [ro]...
....

Внимательно просмотрите вывод определения устройств и убедитесь, что FreeBSD обнаружила все ожидаемые вами устройства. Если устройство не было найдено, то оно не будет упомянуто в выводе. crossref:kernelconfig[kernelconfig-custom-kernel,Модули ядра] позволяют вам добавить поддержку устройств, драйвера которых отсутствуют в ядре [.filename]#GENERIC#.

После процедуры определения устройств вы увидите <<bsdinstall-choose-mode>>. Установочный носитель может использоваться одним из трёх способов: для установки FreeBSD, как <<using-live-cd,Live CD>>, или просто для доступа к оболочке FreeBSD. Используйте клавиши навигации для выбора опции, а kbd:[Enter] - для подтверждения выбора.

[[bsdinstall-choose-mode]]
.Выбор вариантов работы установочного носителя
image::bsdinstall-choose-mode.png[]

Выбор опции btn:[Install] вызовет программу-установщик.

[[using-bsdinstall]]
== Введение в bsdinstall

bsdinstall это текстовая программа для установки FreeBSD, созданная {nwhitehorn} и представленная в 2011 году для FreeBSD 9.0.

[NOTE]
====
В комплекте с http://pcbsd.org[PC-BSD] есть программа pc-sysinstall от {kmoore}, которая также может использоваться для http://wiki.pcbsd.org/index.php/Use_PC-BSD_Installer_to_Install_FreeBSD[ установки FreeBSD]. Несмотря на то, что эту программу путают с bsdinstall, обе они между собой никак не связаны.
====

Система меню bsdinstall контролируется клавишами навигации, а также kbd:[Enter], kbd:[Tab], kbd:[Space] и другими.

[[bsdinstall-keymap]]
=== Выбор раскладки клавиатуры (Keymap)

В зависимости от используемой системной консоли, bsdinstall может предложить выбрать отличную от настроенной по умолчанию раскладку клавиатуры.

[[bsdinstall-keymap-select-default]]
.Выбор раскладки клавиатуры
image::bsdinstall-keymap-select-default.png[]

Если нажата кнопка btn:[YES], отобразится следующее меню выбора раскладки клавиатуры. Иначе, это меню выбора отображено не будет, а будет использоваться раскладка клавиатуры по умолчанию.

[[bsdinstall-config-keymap]]
.Меню выбора раскладки клавиатуры
image::bsdinstall-config-keymap.png[]

Используя клавиши навигации и клавишу kbd:[Enter] выберите раскладку, которая наиболее близко соответствует клавиатуре, подключенной к системе.

[NOTE]
====
Нажатие kbd:[Esc] приведет к выбору раскладки по умолчанию. Выбор опции [.guimenuitem]#United States of America ISO-8859-1# тоже является безопасным в том случае, если возникают трудности с определением раскладки.
====

[[bsdinstall-hostname]]
=== Установка имени хоста

Далее, bsdinstall предложит указать имя хоста для устанавливаемой системы.

[[bsdinstall-config-hostname]]
.Установка имени хоста
image::bsdinstall-config-hostname.png[]

Вводимое имя хоста должно быть полным (fully-qualified), например: `machine3.example.com`.

[[bsdinstall-components]]
=== Выбор устанавливаемых компонентов

Далее, bsdinstall предложит выбрать дополнительные компоненты для установки.

[[bsdinstall-config-components]]
.Выбор устанавливаемых компонентов
image::bsdinstall-config-components.png[]

Определение перечня компонентов для установки в наибольшей мере зависит от планируемого использования системы и от количества доступного дискового пространства. Ядро и набор утилит FreeBSD (вместе называемые "базовой системой") устанавливаются всегда.

В зависимости от типа установки, некоторые из следующих компонентов могут не появляться.

.Дополнительные компоненты
* `doc` - Дополнительная документация, преимущественно исторического характера. Документация, предоставляемая Проектом Документирования FreeBSD может быть установлена позже.
* `games` - Несколько традиционных игр BSD, в том числе fortune, rot13, и другие.
* `lib32` - Библиотеки совместимости для запуска 32-битных приложений на 64-битных версиях FreeBSD.
* `ports` - Коллекция Портов FreeBSD.
+ 
Коллекция Портов - это простой и удобный способ установки программ. Она не содержит исходных кодов, необходимых для компиляции приложений. Коллекция Портов - это множество файлов, при помощи которого автоматизируется загрузка, компиляция и установка программных пакетов сторонних разработчиков. В crossref:ports[ports, Установка приложений. порты и пакеты] описано, как использовать коллекцию портов.
+
[WARNING]
====

Программа установки не проверяет наличие свободного места. Поэтому выбирайте эту опцию лишь тогда, когда имеется достаточно свободного места на жестком диске. Что касается FreeBSD 9.0, Коллекция Портов занимает около {ports-size} дискового пространства. Учтите, что для более новых версий FreeBSD занимаемое Коллекцией Портов дисковое пространство будет расти.
====

* `src` - Исходный код системы.
+ 
FreeBSD распространяется с полным исходным кодом как для ядра, так и для программ базовой системы. Для большинства приложений исходный код системы не нужен, однако он может потребоваться при построении некоторых программ, распространяемых в виде исходных кодов (например, драйверов или модулей ядра), или для разработки FreeBSD.
+ 
Полное дерево исходных кодов требует 1 ГБ дискового пространства, пересборка всей системы FreeBSD требует дополнительно 5 ГБ пространства.

[[bsdinstall-netinstall]]
== Установка по сети

Установочный носитель _bootonly_ не содержит копий установочных файлов. В случае использования такого носителя необходимые файлы должны быть получены загрузкой из сети.

[[bsdinstall-netinstall-notify]]
.Установка по сети
image::bsdinstall-netinstall-files.png[]

После настройки сетевого соединения, которая детально описана в <<bsdinstall-config-network-dev>>, выбирается зеркало сайта. Зеркала сайта содержат копии файлов FreeBSD. Выберите зеркало, размещенное в том регионе мира, что и компьютер, на который устанавливается FreeBSD. Если зеркало расположено ближе к целевому компьютеру, то файлы могут быть получены быстрее, тем самым уменьшится время установки.

[[bsdinstall-netinstall-mirror]]
.Выбор зеркала сайта
image::bsdinstall-netinstall-mirrorselect.png[]

Дальнейший сценарий одинаков для всех способов установки.

[[bsdinstall-partitioning]]
== Выделение дискового пространства

Есть три способа осуществить разбиение дискового пространства для FreeBSD. _Шаблонное_ (_guided_) разбиение автоматически настраивает разделы диска, _ручное_ (_manual_) разбиение позволяет опытным пользователям создавать разделы согласно своим требованиям. И наконец, есть возможность вызвать командный интерпретатор, в котором можно будет непосредственно запускать утилиты наподобие man:gpart[8], man:fdisk[8] и man:bsdlabel[8].

[[bsdinstall-part-guided-manual]]
.Выбор способа разбиения: шаблонное (guided) или ручное (manual)
image::bsdinstall-part-guided-manual.png[]

[[bsdinstall-part-guided]]
=== Шаблонное (guided) разбиение

Если в системе есть несколько дисков, то выберите один, на который будет устанавливаться FreeBSD.

[[bsdinstall-part-guided-disk]]
.Выбор из множества дисков
image::bsdinstall-part-guided-disk.png[]

Для FreeBSD может быть выделен весь диск или только его часть. Если выбирается btn:[Entire Disk], то создается стандартное разбиение, занимающее весь диск. Выбрав btn:[Partition], вы получите создание разделов в неиспользуемой области диска.

[[bsdinstall-part-entire-part]]
.Выбор всего диска или раздела
image::bsdinstall-part-entire-part.png[]

По завершении разбиения дискового пространства внимательно просмотрите результат. Если была допущена ошибка, то вам предоставляется возможность либо вернуть конфигурацию к исходному состоянию нажав btn:[Revert], либо выполнить автоматическое переразбиение выбрав btn:[Auto]. Также разделы могут быть созданы, изменены или удалены вручную. Если результат разбиения корректен, выберите btn:[Finish] для продолжения установки.

[[bsdinstall-part-review]]
.Просмотр созданных разделов
image::bsdinstall-part-review.png[]

[[bsdinstall-part-manual]]
=== Ручное (manual) разбиение

Ручное разбиение начинается с редактора разделов.

[[bsdinstall-part-manual-create]]
.Ручное создание разделов
image::bsdinstall-part-manual-create.png[]

Перемещение подсвечивания на имя устройства (в этом примере - [.filename]#ada0#) и выбор btn:[Create] приведет вас к меню с перечнем _схем разбиения_.

[[bsdinstall-part-manual-partscheme]]
.Выбор схемы разбиения
image::bsdinstall-part-manual-partscheme.png[]

Как правило, схема GPT является наиболее подходящей для PC-совместимых компьютеров. Для более старых операционных систем, которые несовместимы с GPT, может потребоваться разбиение MBR. Остальные схемы разбиения в общем используются для нераспространенных или старых компьютерных систем.

.Схемы разбиения
[cols="1,1", frame="none", options="header"]
|===
<| Аббревиатура
<| Описание

|APM
|http://support.apple.com/kb/TA21692[Apple Partition Map], используемая на PowerPC(R) Macintosh(R).

|BSD
|Метки BSD без MBR, иногда называемые "dangerously dedicated mode". За подробностями обратитесь к man:bsdlabel[8].

|GPT
|http://en.wikipedia.org/wiki/GUID_Partition_Table[Таблица разделов GUID.]

|MBR
|http://en.wikipedia.org/wiki/Master_boot_record[Master Boot Record.]

|PC98
|http://en.wikipedia.org/wiki/Pc9801[Разновидность MBR, используемая компьютерами NEC PC-98.]

|VTOC8
|Volume Table Of Contents, используемая компьютерами Sun SPARC64 и UltraSPARC.
|===

После того, как схема разбиения определена, повторный выбор btn:[Create] приводит к созданию новых разделов диска.

[[bsdinstall-part-manual-addpart]]
.Создание нового раздела
image::bsdinstall-part-manual-addpart.png[]

Стандартная установка FreeBSD со схемой GPT создаст как минимум три раздела:

.Стандартные GPT разделы FreeBSD
* `freebsd-boot` - загрузочный код FreeBSD.
* `freebsd-ufs` - файловая система UFS FreeBSD.
* `freebsd-swap` - FreeBSD область подкачки.

Также необходимо упомянуть, что для разделов, которые будут содержать файловую систему ZFS FreeBSD следует задействовать тип раздела `freebsd-zfs`. Обратитесь к crossref:disks[filesystems-zfs,Файловая система ZFS]. Сведения об имеющихся в наличии типах разделов GPT содержатся в man:gpart[8].

Разумеется, возможно создание большего количества разделов с файловыми системами, и некоторые пользователи предпочитают выделять отдельные разделы для таких файловых систем, как [.filename]#/#, [.filename]#/var#, [.filename]#/tmp#, и [.filename]#/usr#. Иллюстрация подобного разбиения приведена в <<bsdinstall-part-manual-splitfs>>.

При указании размеров допускается использование общепринятых аббревиатур, таких как _K_ для килобайт, _M_ для мегабайт, или _G_ для гигабайт.

[TIP]
====

Должное выравнивание секторов обеспечивает наилучшую производительность, а создание разделов с размерами, кратными 4 Кбайт, помогает обеспечить правильное выравнивание как на дисках с размером сектора 512 байт, так и на устройствах с размером сектора 4 Кбайт. В общем, задание размеров, кратных 1 Мбайт или 1 Гбайт - это наиболее простой способ выполнить выравнивание начал разделов на позицию, кратную 4 Кбайт. Исключение: на данный момент размер раздела _freebsd-boot_ не должен превышать 512 Кбайт из-за ограничений загрузочного кода.
====

В случае, если раздел будет содержать файловую систему, ей потребуется точка монтирования. Если планируется создать единственный раздел UFS, то точка монтирования должна быть [.filename]#/#.

Также будет запрошена _метка_. Метка - это имя, присвоенное разделу. Имя устройства или его номер может измениться если устройство будет подключено к другому контроллеру или порту, а метка раздела останется неизменной. Ссылки на метки вместо имён устройств и номеров разделов в файлах типа [.filename]#/etc/fstab# делают систему более толерантной к замене оборудования. Метки GPT появляются после подключения диска в каталоге [.filename]#/dev/gpt/#. У других схем разбиения есть свои особенности поддержки меток, и их метки располагаются в других подкаталогах каталога [.filename]#/dev/#.

[TIP]
====

Во избежание конфликтов имен меток используйте уникальные имена для каждой файловой системы. Несколько букв, взятых от имени компьютера, его назначения или размещения может быть добавлено к метке. Например, корневому разделу UFS для компьютера в лаборатории можно присвоить метку `labroot` или `rootfs-lab`.
====

[[bsdinstall-part-manual-splitfs]]
.Создание традиционного разбиения под файловые системы.
[example]
====
Для традиционного разбиения, в котором каталоги [.filename]#/#, [.filename]#/var#, [.filename]#/tmp# и [.filename]#/usr# представляют собой отдельные файловые системы на их собственных разделах, создайте схему разбиения GPT, потом создайте разделы, как это указано ниже. Показанные размеры разделов являются типичными для жесткого диска размером 20Гб. Если диск большего размера, то будет уместным отвести больше места для раздела подкачки или для раздела с файловой системой [.filename]#/var#. Задействованные в этом примере метки имеют префикс `ex`, от слова "example", вам же рекомендуется использовать другие уникальные имена меток.

По умолчанию, загрузчик [.filename]#gptboot# FreeBSD ожидает, что первый найденный раздел UFS будет корневым разделом ([.filename]#/#).

[.informaltable]
[cols="1,1,1,1", frame="none", options="header"]
|===
| Тип раздела
| Размер
| Точка монтирования
| Метка

|`freebsd-boot`
|`512K`

|`freebsd-ufs`
|`2G`
|[.filename]#/#
|`exrootfs`

|`freebsd-swap`
|`4G`
|
|`exswap`

|`freebsd-ufs`
|`2G`
|[.filename]#/var#
|`exvarfs`

|`freebsd-ufs`
|`1G`
|[.filename]#/tmp#
|`extmpfs`

|`freebsd-ufs`
|соглашайтесь со значением по умолчанию (оставшаяся часть объема диска)
|[.filename]#/usr#
|`exusrfs`
|===
====

Для продолжения установки по завершении создания необходимых разделов выберите btn:[Finish].

[[bsdinstall-final-warning]]
== Завершение установки

Следующий шаг - ваш последний шанс прервать установку и предотвратить изменение данных на жестком диске.

[[bsdinstall-final-confirmation]]
.Заключительное подтверждение
image::bsdinstall-final-confirmation.png[]

Для продолжения выберите btn:[Commit]. Если необходимо внести изменения, для возвращения к редактору разделов нажмите btn:[Back]. Выбор btn:[Revert & Exit] дает возможность выйти из установщика без внесения изменений на жесткий диск.

Продолжительность установки варьируется в зависимости от выбранного дистрибутива, способа установки и быстродействия компьютера. Далее последует очередь сообщений, информирующих о ходе установки.

Первым делом установщик запишет информацию о разделах на диск и отформатирует разделы посредством `newfs`.

Если выполняется установка по сети, то bsdinstall продолжит загрузку необходимых файлов дистрибутива.

[[bsdinstall-distfile-fetching]]
.Загрузка файлов дистрибутива
image::bsdinstall-distfile-fetching.png[]

Далее последует проверка целостности файлов дистрибутива, чтобы удостовериться, что они не были повреждены во время загрузки или чтения с установочного носителя.

[[bsdinstall-distfile-verify]]
.Проверка файлов дистрибутива
image::bsdinstall-distfile-verifying.png[]

И в заключение, проверенные файлы распаковываются на диск.

[[bsdinstall-distfile-extract]]
.Извлечение файлов дистрибутива
image::bsdinstall-distfile-extracting.png[]

Как только запрошенные файлы дистрибутива распакуются, bsdinstall приступит к выполнению послеустановочных конфигурационных задач (смотрите <<bsdinstall-post>>).

[[bsdinstall-post]]
== После установки

После успешной установки FreeBSD последуют меню настройки различных опций. Настройки опций могут быть изменены путем повторного входа в соответствующие разделы финального конфигурационного меню перед загрузкой в свежеустановленную систему FreeBSD.

[[bsdinstall-post-root]]
=== Установка пароля пользователя `root`

Установка пароля пользователя `root` - обязательна. Заметьте, что во время ввода пароля набираемые символы не отображаются на экране. После ввода будет запрошен повторный ввод пароля. Это помогает предотвратить опечатки при наборе.

[[bsdinstall-post-set-root-passwd]]
.Установка пароля пользователя `root`
image::bsdinstall-post-root-passwd.png[]

Настройки опций продолжатся после успешной установки пароля.

[[bsdinstall-config-network-dev]]
=== Настройка сетевых интерфейсов

[NOTE]
====
Настройка сетевых интерфейсов будет опущена в случае, если она уже была выполнена как часть подготовки при установке _bootonly_.
====

Далее будет отображен перечень всех сетевых интерфейсов, найденных на компьютере. Выберите тот, который планируете настроить.

[[bsdinstall-configure-net-interface]]
.Выберите сетевой интерфейс
image::bsdinstall-configure-network-interface.png[]

[[bsdinstall-configure-net-wireless]]
==== Настройка беспроводного сетевого интерфейса

Если выбран беспроводной сетевой интерфейс, то для подключения к сети потребуется ввести параметры сетевой идентификации и безопасности.

Беспроводные сети распознаются по так называемому Service Set Identifier, или SSID. SSID - это краткое уникальное имя, присваиваемое каждой сети.

Большинство беспроводных сетей шифруют передаваемые данные чтобы защитить их от неавторизированного прослушивания. Настоятельно рекомендуется применять стандарт WPA2. Более старые стандарты, например WEP, не обеспечивают достаточного уровня безопасности.

Первым делом, при подключении к беспроводной сети необходимо выполнить поиск беспроводных точек доступа.

[[bsdinstall-wireless-scan]]
.Поиск беспроводных точек доступа
image::bsdinstall-configure-wireless-scan.png[]

Список найденных сетей будет содержать несколько SSID с описанием типов шифрования, поддерживаемых обнаруженными беспроводными сетями. Если искомый SSID не появляется в списке, то запустите сканирование повторно, выбрав btn:[Rescan]. Если искомая сеть снова не появится в списке, проверьте соединение с антенной или попробуйте разместить компьютер ближе к точке доступа. Запускайте повторный поиск после каждого вашего действия.

[[bsdinstall-wireless-accesspoints]]
.Выбор беспроводной сети
image::bsdinstall-configure-wireless-accesspoints.png[]

После выбора сети потребуется ввести дополнительную информацию о соединении. Для WPA2 потребуется пароль (также известный как Pre-Shared Key или PSK). В целях безопасности набираемые в поле ввода пароля символы на экране отображаются звездочками.

[[bsdinstall-wireless-wpa2]]
.Настройка WPA2
image::bsdinstall-configure-wireless-wpa2setup.png[]

После выбора беспроводной сети и ввода сопутствующих параметров безопасности последует настройка сетевых протоколов.

[[bsdinstall-ipv4]]
==== Настройка сетевых протоколов: IPv4

Определитесь, есть ли необходимость в подключении к сети IPv4. Это наиболее распространённый сетевой протокол.

[[bsdinstall-configure-net-ipv4]]
.Выберите настройку протокола IPv4
image::bsdinstall-configure-network-interface-ipv4.png[]

Существует два способа настройки протокола IPv4 на сетевом интерфейсе. Сервис _DHCP_ автоматически установит корректную конфигурацию сетевого интерфейса, и это - предпочтительный способ настройки. _Статическая_ конфигурация требует ручного ввода настроек протокола IPv4.

[NOTE]
====
Не пытайтесь ввести произвольные данные, они работать не будут. Получите перечисленную в <<bsdinstall-collect-network-information>> информацию у сетевого администратора или поставщика услуг Интернет.
====

[[bsdinstall-net-ipv4-dhcp-config]]
===== Настройка протокола IPv4 на сетевом интерфейсе посредством DHCP

Если в сети есть сервис DHCP, то для автоматического конфигурирования сетевого интерфейса выберите btn:[Yes].

[[bsdinstall-net-ipv4-dhcp]]
.Выбор настройки протокола IPv4 посредством DHCP
image::bsdinstall-configure-network-interface-ipv4-dhcp.png[]

[[bsdinstall-net-ipv4-static-config]]
===== Статическая настройка протокола IPv4 на сетевом интерфейсе

Статическая настройка сетевого интерфейса требует ввода некоторой информации о подключении IPv4.

[[bsdinstall-net-ipv4-static]]
.Статическая настройка IPv4 на сетевом интерфейсе
image::bsdinstall-configure-network-interface-ipv4-static.png[]

* `IP Address` - адрес IPv4, который должен быть установлен на этом компьютере. Этот адрес должен быть уникальным и не должен использоваться другим оборудованием в локальной сети.
* `Subnet Mask` - маска, используемая в локальной сети. Часто маска имеет значение `255.255.255.0`.
* `Default Router` - IP адрес маршрутизатора для этого подключения. Обычно этот адрес установлен на маршрутизаторе или ином сетевом оборудовании, которое соединяет локальную сеть с сетью Интернет. Также известен, как _шлюз по умолчанию (default gateway)_.

[[bsdinstall-ipv6]]
==== Настройка сетевых протоколов: IPv6

IPv6 это более новый сетевой протокол. Если есть необходимость и возможность подключения к сети IPv6, выберите в этом меню btn:[Yes].

[[bsdinstall-net-ipv6]]
.Выберите настройку протокола IPv6 на сетевом интерфейсе
image::bsdinstall-configure-network-interface-ipv6.png[]

Для протокола IPv6 также возможны два способа настройки сетевого интерфейса. _SLAAC_ или _StateLess Address AutoConfiguration_ автоматически установит корректные настройки сетевого интерфейса. _Статическая_ конфигурация требует ручного ввода настроек протокола IPv6.

[[bsdinstall-net-ipv6-slaac-config]]
===== IPv6 SLAAC

SLAAC позволяет сетевому элементу запросить у локального маршрутизатора необходимую для автоматической настройки информацию. За подробностями обратитесь к http://tools.ietf.org/html/rfc4862[RFC4862].

[[bsdinstall-net-ipv6-slaac]]
.Выберите настройку протокола IPv6 посредством SLAAC
image::bsdinstall-configure-network-interface-slaac.png[]

[[bsdinstall-net-ipv6-static-config]]
===== Статическая настройка протокола IPv6 на сетевом интерфейсе

Статическая настройка сетевого интерфейса требует ручного ввода информации о IPv6 подключении.

[[bsdinstall-net-ipv6-static]]
.Статическая настройка протокола IPv6
image::bsdinstall-configure-network-interface-ipv6-static.png[]

* `IPv6 Address` - вводимый вручную IP адрес, который присвоен этому компьютеру. Этот адрес должен быть уникальным и не должен быть занят другим оборудованием в локальной сети.
* `Default Router` - IPv6 адрес маршрутизатора для этой сети. Обычно, это адрес маршрутизатора или другого сетевого оборудования, которое соединяет локальную сеть с сетью Интернет. Также известен как _шлюз по умолчанию_.

[[bsdinstall-net-dns]]
==== Настройка Резолвера DNS

_Domain Name System_ (или _DNS_) Резолвер выполняет преобразования имен хостов в сетевые адреса, а также преобразования сетевых адресов в имена хостов. Если для автоматического конфигурирования сетевого интерфейса использовался DHCP или SLAAC, то информация о Резолвере может уже присутствовать в системе. Иначе, впишите в поле Search имя локального домена. DNS #1 и DNS #2 - это IP адреса локальных серверов DNS. По крайней мере один сервер должен быть указан.

[[bsdinstall-net-dns-config]]
.Конфигурирование Резолвера DNS
image::bsdinstall-configure-network-ipv4-dns.png[]

[[bsdinstall-timezone]]
=== Установка часового пояса

Установка часового пояса для вашей машины позволит ей автоматически корректировать время согласно местным законам и правильно выполнять остальные зависимые от часового пояса функции.

Данный пример верен для машины, находящейся в восточном часовом поясе Соединенных Штатов. Разумеется, ваши настройки должны соответствовать вашему географическому местоположению.

[[bsdinstall-local-utc]]
.Выбор местного времени или времени UTC
image::bsdinstall-set-clock-local-utc.png[]

Выберите btn:[Yes] или btn:[No] согласно тому, как настроены часы вашего компьютера, далее нажмите kbd:[Enter]. Если вы не знаете какое значение выбрать, UTC или местное, то нажмите btn:[No] для того, чтобы выбрать наиболее распространённую конфигурацию - местное время.

[[bsdinstall-timezone-region]]
.Выберите регион
image::bsdinstall-timezone-region.png[]

Соответствующий регион выбирается при помощи клавиш навигации и подтверждается нажатием клавиши kbd:[Enter].

[[bsdinstall-timezone-country]]
.Выберите страну
image::bsdinstall-timezone-country.png[]

Выберите необходимую страну при помощи клавиш навигации и подтвердите выбор клавишей kbd:[Enter].

[[bsdinstall-timezone-zone]]
.Выберите часовой пояс
image::bsdinstall-timezone-zone.png[]

Соответствующий часовой пояс выбирается клавишами навигации и подтверждается нажатием клавиши kbd:[Enter].

[[bsdinstall-timezone-confirmation]]
.Подтверждение выбора часового пояса
image::bsdinstall-timezone-confirm.png[]

Подтвердите, что аббревиатура для часового пояса является приемлемой. Если данная опция настроена верно, то нажмите клавишу kbd:[Enter] для продолжения послеустановочного конфигурирования.

[[bsdinstall-sysconf]]
=== Активирование дополнительных сетевых сервисов

На данном этапе установщик предлагает отметить дополнительные сетевые сервисы, которые будут запускаться при загрузке системы. Все нижеследующие сервисы не являются обязательными.

[[bsdinstall-config-serv]]
.Выбор дополнительных активируемых сервисов
image::bsdinstall-config-services.png[]

.Дополнительные сервисы
* `sshd` - Secure Shell (SSH) демон для безопасного удаленного доступа.
* `moused` - Обеспечивает использование мыши в системной консоли.
* `ntpd` - Network Time Protocol (NTP) демон для автоматической синхронизации времени.
* `powerd` - Системная утилита для контроля потребляемой мощности и профилей энергосбережения.

[[bsdinstall-crashdump]]
=== Разрешение сохранения аварийных дампов

Далее, bsdinstall запросит, будет ли разрешено создание аварийных дампов (crash dump) на целевой системе. Сохранение аварийных дампов может быть весьма полезным при поиске неполадок в системе, поэтому пользователям рекомендуется при всякой возможности включать сохранение аварийных дампов. Выберите btn:[Yes] для разрешения сохранения аварийных дампов или btn:[No] для отмены их сохранения и продолжения послеустановочной настройки.

[[bsdinstall-config-crashdump]]
.Разрешение сохранения аварийных дампов
image::bsdinstall-config-crashdump.png[]

[[bsdinstall-addusers]]
=== Добавление пользователей

Добавление хотя бы одного пользователя в процессе установки позволит эксплуатировать систему исключая необходимость входа под учетной записью `root`. Работа в системе с правами пользователя `root` особенна тем, что по существу нет ограничений или защиты от действий пользователя. Вход под обычным пользователем является более благоразумным и безопасным.

Для добавления новых пользователей выберите btn:[Yes].

[[bsdinstall-add-user1]]
.Добавление пользовательских учетных записей
image::bsdinstall-adduser1.png[]

Введите информацию о новом пользователе.

[[bsdinstall-add-user2]]
.Ввод информации о пользователе
image::bsdinstall-adduser2.png[]

.Информация о пользователе
* `Username` - Имя, которое будет набирать пользователь для входа в систему. Часто оно формируется из объединенных вместе первой буквы имени и фамилии.
* `Full name` - Полное имя пользователя.
* `Uid` - Идентификатор пользователя. Обычно это поле не заполняется, система сама присвоит ему значение.
* `Login group` - Имя группы для этого пользователя. Обычно это поле также не заполняется, система поставит значение по умолчанию.
* `Invite _user_ into other groups?` - Перечень групп, в которые будет внесен пользователь.
* `Login class` - Обычно оставляется пустым для принятия значения по умолчанию.
* `Shell` - Интерактивная оболочка для этого пользователя. В данном примере была выбрана оболочка man:csh[1].
* `Home directory` - Домашний каталог пользователя. Как правило, значение по умолчанию является корректным.
* `Home directory permissions` - Права на домашний каталог пользователя. Значение по умолчанию является корректным в большинстве случаев.
* `Use password-based authentication?` - Обычно "yes".
* `Use an empty password?` - Обычно "no".
* `Use a random password?` - Обычно "no".
* `Enter password` - Пароль для этого пользователя. Набираемые символы не отображаются на экране.
* `Enter password again` - Пароль необходимо ввести еще раз (для сверки).
* `Lock out the account after creation?` - Обычно "no".

После заполнения необходимых полей будет отображен итог и система переспросит, корректны ли введённые данные. Если во время ввода информации была допущена ошибка, то необходимо ответить `no` и ввести данные еще раз. Если вас всё устраивает, выберите `yes` для создания новой учетной записи пользователя.

[[bsdinstall-add-user3]]
.Заполненная форма ввода информации о новом пользователе
image::bsdinstall-adduser3.png[]

Ответьте `yes` на вопрос "Add another user?" если необходимо добавить другие учетные записи. Для завершения добавления пользователей и продолжения послеустановочной настройки выберите `no`.

За более детальной информацией об управлении учетными записями обратитесь к crossref:basics[users-synopsis,Пользователи и основы управления учетными записями].

[[bsdinstall-final-conf]]
=== Завершение настройки

После того, как установка и конфигурирование завершены, вам предоставляется заключительная возможность подкорректировать настройки.

[[bsdinstall-final-config]]
.Финальное конфигурационное меню
image::bsdinstall-finalconfiguration.png[]

Используйте это меню для внесения любых изменений или для выполнения дополнительного конфигурирования перед завершением установки.

.Опции финального конфигурационного меню
* `Add User` - Описано в <<bsdinstall-addusers>>.
* `Root Password` - Описано в <<bsdinstall-post-root>>.
* `Hostname` - Описано в <<bsdinstall-hostname>>.
* `Network` - Описано в <<bsdinstall-config-network-dev>>.
* `Services` - Описано в <<bsdinstall-sysconf>>.
* `Time Zone` - Описано в <<bsdinstall-timezone>>.
* `Handbook` - Загрузка и установка Руководства FreeBSD (которое вы в данный момент читаете).

По завершении настройки для выхода из финального конфигурационного меню выберите btn:[Exit].

[[bsdinstall-final-modification-shell]]
.Ручная настройка
image::bsdinstall-final-modification-shell.png[]

bsdinstall уточнит, есть ли какие настройки, которые необходимо выполнить до перезагрузки в свежеустановленную систему. Для входа в командный интерпретатор новой системы выберите btn:[Yes], для перехода к последнему шагу установки нажмите btn:[No].

[[bsdinstall-final-main]]
.Завершение установки
image::bsdinstall-mainexit.png[]

Если необходимо дальнейшее конфигурирование или особая установка, то выбор btn:[Live CD] загрузит установочный носитель в режим Live CD.

После того, как установка завершена, для перезагрузки компьютера и запуска новой системы FreeBSD выберите btn:[Reboot]. Не забудьте извлечь установочный CD, DVD или USB-накопитель, иначе компьютер может снова с него загрузиться.

[[bsdinstall-freebsdboot]]
=== Загрузка и завершение работы FreeBSD

[[bsdinstall-freebsdboot-i386]]
==== (FreeBSD/i386 Booting) Загрузка FreeBSD/i386

Во время загрузки FreeBSD отображается множество информационных сообщений. Большинство из них вытеснится за пределы экрана; это нормально. По завершении загрузки системы будет отображено приглашение ко входу (login prompt). Сообщения, которые переместились за пределы экрана, могут быть просмотрены: при нажатии kbd:[Scroll-Lock] включается режим _буфера прокрутки_. Клавиши kbd:[PgUp], kbd:[PgDn], а также клавиши навигации могут быть задействованы для прокручивания буфера. Повторное нажатие kbd:[Scroll-Lock] разблокирует дисплей и вернет его в нормальный режим.

На приглашение `login:` введите добавленное во время установки имя пользователя, в этом примере - `asample`. За исключением случаев крайней необходимости избегайте входа под учетной записью `root`.

Упомянутый выше буфер прокрутки ограничен в размере, поэтому в него могут умещаться не все сообщения. После входа в систему большинство из них можно просмотреть подав команду `dmesg | less` из командной строки. Для возврата к командной строке после просмотра сообщений нажмите kbd:[q].

Типичные сообщения загрузки (информация о версиях опущена):

[source,bash]
....
Copyright (c) 1992-2011 The FreeBSD Project.
Copyright (c) 1979, 1980, 1983, 1986, 1988, 1989, 1991, 1992, 1993, 1994
        The Regents of the University of California. All rights reserved.
FreeBSD is a registered trademark of The FreeBSD Foundation.

    root@farrell.cse.buffalo.edu:/usr/obj/usr/src/sys/GENERIC amd64
CPU: Intel(R) Core(TM)2 Duo CPU     E8400  @ 3.00GHz (3007.77-MHz K8-class CPU)
  Origin = "GenuineIntel"  Id = 0x10676  Family = 6  Model = 17  Stepping = 6
  Features=0x783fbff<FPU,VME,DE,PSE,TSC,MSR,PAE,MCE,CX8,APIC,SEP,MTRR,PGE,MCA,CMOV,PAT,PSE36,MMX,FXSR,SSE,SSE2>
  Features2=0x209<SSE3,MON,SSSE3>
  AMD Features=0x20100800<SYSCALL,NX,LM>
  AMD Features2=0x1<LAHF>
real memory  = 536805376 (511 MB)
avail memory = 491819008 (469 MB)
Event timer "LAPIC" quality 400
ACPI APIC Table: <VBOX   VBOXAPIC>
ioapic0: Changing APIC ID to 1
ioapic0 <Version 1.1> irqs 0-23 on motherboard
kbd1 at kbdmux0
acpi0: <VBOX VBOXXSDT> on motherboard
acpi0: Power Button (fixed)
acpi0: Sleep Button (fixed)
Timecounter "ACPI-fast" frequency 3579545 Hz quality 900
acpi_timer0: <32-bit timer at 3.579545MHz> port 0x4008-0x400b on acpi0
cpu0: <ACPI CPU> on acpi0
pcib0: <ACPI Host-PCI bridge> port 0xcf8-0xcff on acpi0
pci0: <ACPI PCI bus> on pcib0
isab0: <PCI-ISA bridge> at device 1.0 on pci0
isa0: <ISA bus> on isab0
atapci0: <Intel PIIX4 UDMA33 controller> port 0x1f0-0x1f7,0x3f6,0x170-0x177,0x376,0xd000-0xd00f at device 1.1 on pci0
ata0: <ATA channel 0> on atapci0
ata1: <ATA channel 1> on atapci0
vgapci0: <VGA-compatible display> mem 0xe0000000-0xe0ffffff irq 18 at device 2.0 on pci0
em0: <Intel(R) PRO/1000 Legacy Network Connection 1.0.3> port 0xd010-0xd017 mem 0xf0000000-0xf001ffff irq 19 at device 3.0 on pci0
em0: Ethernet address: 08:00:27:9f:e0:92
pci0: <base peripheral> at device 4.0 (no driver attached)
pcm0: <Intel ICH (82801AA)> port 0xd100-0xd1ff,0xd200-0xd23f irq 21 at device 5.0 on pci0
pcm0: <SigmaTel STAC9700/83/84 AC97 Codec>
ohci0: <OHCI (generic) USB controller> mem 0xf0804000-0xf0804fff irq 22 at device 6.0 on pci0
usbus0: <OHCI (generic) USB controller> on ohci0
pci0: <bridge> at device 7.0 (no driver attached)
acpi_acad0: <AC Adapter> on acpi0
atkbdc0: <Keyboard controller (i8042)> port 0x60,0x64 irq 1 on acpi0
atkbd0: <AT Keyboard> irq 1 on atkbdc0
kbd0 at atkbd0
atkbd0: [GIANT-LOCKED]
psm0: <PS/2 Mouse> irq 12 on atkbdc0
psm0: [GIANT-LOCKED]
psm0: model IntelliMouse Explorer, device ID 4
attimer0: <AT timer> port 0x40-0x43,0x50-0x53 on acpi0
Timecounter "i8254" frequency 1193182 Hz quality 0
Event timer "i8254" frequency 1193182 Hz quality 100
sc0: <System console> at flags 0x100 on isa0
sc0: VGA <16 virtual consoles, flags=0x300>
vga0: <Generic ISA VGA> at port 0x3c0-0x3df iomem 0xa0000-0xbffff on isa0
atrtc0: <AT realtime clock> at port 0x70 irq 8 on isa0
Event timer "RTC" frequency 32768 Hz quality 0
ppc0: cannot reserve I/O port range
Timecounters tick every 10.000 msec
pcm0: measured ac97 link rate at 485193 Hz
em0: link state changed to UP
usbus0: 12Mbps Full Speed USB v1.0
ugen0.1: <Apple> at usbus0
uhub0: <Apple OHCI root HUB, class 9/0, rev 1.00/1.00, addr 1> on usbus0
cd0 at ata1 bus 0 scbus1 target 0 lun 0
cd0: <VBOX CD-ROM 1.0> Removable CD-ROM SCSI-0 device
cd0: 33.300MB/s transfers (UDMA2, ATAPI 12bytes, PIO 65534bytes)
cd0: Attempt to query device size failed: NOT READY, Medium not present
ada0 at ata0 bus 0 scbus0 target 0 lun 0
ada0: <VBOX HARDDISK 1.0> ATA-6 device
ada0: 33.300MB/s transfers (UDMA2, PIO 65536bytes)
ada0: 12546MB (25694208 512 byte sectors: 16H 63S/T 16383C)
ada0: Previously was known as ad0
Timecounter "TSC" frequency 3007772192 Hz quality 800
Root mount waiting for: usbus0
uhub0: 8 ports with 8 removable, self powered
Trying to mount root from ufs:/dev/ada0p2 [rw]...
Setting hostuuid: 1848d7bf-e6a4-4ed4-b782-bd3f1685d551.
Setting hostid: 0xa03479b2.
Entropy harvesting: interrupts ethernet point_to_point kickstart.
Starting file system checks:
/dev/ada0p2: FILE SYSTEM CLEAN; SKIPPING CHECKS
/dev/ada0p2: clean, 2620402 free (714 frags, 327461 blocks, 0.0% fragmentation)
Mounting local file systems:.
vboxguest0 port 0xd020-0xd03f mem 0xf0400000-0xf07fffff,0xf0800000-0xf0803fff irq 20 at device 4.0 on pci0
vboxguest: loaded successfully
Setting hostname: machine3.example.com.
Starting Network: lo0 em0.
lo0: flags=8049<UP,LOOPBACK,RUNNING,MULTICAST> metric 0 mtu 16384
        options=3<RXCSUM,TXCSUM>
        inet6 ::1 prefixlen 128
        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x3
        inet 127.0.0.1 netmask 0xff000000
        nd6 options=21<PERFORMNUD,AUTO_LINKLOCAL>
em0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> metric 0 mtu 1500
        options=9b<RXCSUM,TXCSUM,VLAN_MTU,VLAN_HWTAGGING,VLAN_HWCSUM>
        ether 08:00:27:9f:e0:92
        nd6 options=29<PERFORMNUD,IFDISABLED,AUTO_LINKLOCAL>
        media: Ethernet autoselect (1000baseT <full-duplex>)
        status: active
Starting devd.
Starting Network: usbus0.
DHCPREQUEST on em0 to 255.255.255.255 port 67
DHCPACK from 10.0.2.2
bound to 192.168.1.142 -- renewal in 43200 seconds.
add net ::ffff:0.0.0.0: gateway ::1
add net ::0.0.0.0: gateway ::1
add net fe80::: gateway ::1
add net ff02::: gateway ::1
ELF ldconfig path: /lib /usr/lib /usr/lib/compat /usr/local/lib
32-bit compatibility ldconfig path: /usr/lib32
Creating and/or trimming log files.
Starting syslogd.
No core dumps found.
Clearing /tmp (X related).
Updating motd:.
Configuring syscons: blanktime.
Generating public/private rsa1 key pair.
Your identification has been saved in /etc/ssh/ssh_host_key.
Your public key has been saved in /etc/ssh/ssh_host_key.pub.
The key fingerprint is:
10:a0:f5:af:93:ae:a3:1a:b2:bb:3c:35:d9:5a:b3:f3 root@machine3.example.com
The key's randomart image is:
+--[RSA1 1024]----+
|    o..          |
|   o . .         |
|  .   o          |
|       o         |
|    o   S        |
|   + + o         |
|o . + *          |
|o+ ..+ .         |
|==o..o+E         |
+-----------------+
Generating public/private dsa key pair.
Your identification has been saved in /etc/ssh/ssh_host_dsa_key.
Your public key has been saved in /etc/ssh/ssh_host_dsa_key.pub.
The key fingerprint is:
7e:1c:ce:dc:8a:3a:18:13:5b:34:b5:cf:d9:d1:47:b2 root@machine3.example.com
The key's randomart image is:
+--[ DSA 1024]----+
|       ..     . .|
|      o  .   . + |
|     . ..   . E .|
|    . .  o o . . |
|     +  S = .    |
|    +  . = o     |
|     +  . * .    |
|    . .  o .     |
|      .o. .      |
+-----------------+
Starting sshd.
Starting cron.
Starting background file system checks in 60 seconds.

Thu Oct  6 19:15:31 MDT 2011

FreeBSD/amd64 (machine3.example.com) (ttyv0)

login:
....

На медленных машинах генерирование ключей RSA и DSA может занять ощутимое время. Это происходит лишь при первой загрузке новой системы, и лишь в случае, когда sshd настроен на автоматический запуск. Последующие загрузки будут проходить быстрее.

По умолчанию во FreeBSD не устанавливается никаких графических оболочек, однако в наличии они имеются. За более подробной информацией обратитесь к crossref:x11[x11, X Window System].

[[bsdinstall-shutdown]]
=== Завершение работы FreeBSD

Корректное завершение работы компьютера с FreeBSD помогает защитить от повреждений не только данные, но даже и аппаратное обеспечение. Не стоит просто выключать питание. Если вы входите в группу `wheel`, то станьте суперпользователем набрав в командной строке команду `su` и введя пароль пользователя `root`. Или же, войдите в систему как `root` и наберите команду `shutdown -p now`. Система корректно завершит работу и выключится.

Комбинация клавиш kbd:[Ctrl+Alt+Del] может быть задействована для перезагрузки системы, однако во время нормальной работы пользоваться ею не рекомендуется.

[[bsdinstall-install-trouble]]
== Решение проблем

Нижеследующий раздел описывает часто встречающиеся и сообщенные пользователями проблемы, возникающие в ходе установки.

=== Что делать, если что-то идет не так

По причине различных ограничений архитектуры PC, определение периферийных устройств (device probing) не может быть достоверным на все 100%, однако, есть несколько шагов, которые вы можете предпринять, если определение завершится неудачно.

Просмотрите http://www.FreeBSD.org/releases/[Информацию об оборудовании (Hardware Notes)] для вашей версии FreeBSD чтобы убедиться, что ваше оборудование поддерживается.

Если ваше оборудование поддерживается, а зависания или другие проблемы продолжаются, то вам необходимо будет построить crossref:kernelconfig[kernelconfig,собственное ядро]. Это позволит вам добавить поддержку устройств, которые отсутствуют в ядре [.filename]#GENERIC#. Ядро на установочных дисках сконфигурировано исходя из предположения, что большинство устройств находятся в настройках по умолчанию касательно прерываний, адресов ввода/вывода, каналов DMA. Если ваше оборудование было перенастроено, то вам скорее всего необходимо будет отредактировать конфигурационный файл ядра и пересобрать его, чтобы сообщить FreeBSD о настройках, отличных от предполагаемых.

Также возможны случаи, когда процедура определения (probe) для отсутствующего устройства приводит к сбою процедуры определения для другого устройства, присутствующего в аппаратной конфигурации. В этом случае необходимо отключить процедуру (процедуры) определения для конфликтующего драйвера (драйверов).

[NOTE]
====
Некоторое количество проблем с установкой может быть устранено или уменьшено путем обновления встроенного программного обеспечения различных аппаратных компонентов, особенно - материнской платы. Встроенное программное обеспечение материнской платы обычно называется BIOS. У большинства производителей материнских плат и компьютеров есть Web-сайты, содержащие как информацию об обновлениях, так и сами обновления.

В общем, производители не рекомендуют обновлять BIOS материнской платы, если на то нет веских причин, например, таких как появление критически важного обновления. Процесс обновления _может_ потерпеть неудачу, тем самым оставив BIOS поврежденным, а компьютер - нерабочим.
====

=== Решение проблем: вопросы и ответы

==== Моя система зависает во время загрузки на этапе определения устройств (probing), или она ведет себя странно во время установки.

Касательно платформ i386, amd64 и ia64: если во время загрузки была обнаружена система ACPI, то FreeBSD повсеместно использует её для конфигурирования оборудования. К сожалению, до сих пор существуют неполадки как в драйвере ACPI, так и среди материнских плат и их BIOS. ACPI может быть отключена путём установки значения переменной `hint.acpi.0.disabled` на третьем этапе загрузки:

[source,bash]
....
 set hint.acpi.0.disabled="1"
....

Это значение сбрасывается каждый раз при загрузке системы, поэтому строку `hint.acpi.0.disabled="1"` необходимо добавить в файл [.filename]#/boot/loader.conf#. Информация о загрузчике приведена в crossref:boot[boot-synopsis,Описание].

[[using-live-cd]]
== Использование Live CD

FreeBSD Live CD находится на том же CD диске, что и установочная программа. Это удобно для тех пользователей, которые всё еще размышляют о пригодности для них ОС FreeBSD и желают проверить некоторые функциональные возможности до начала установки.

[NOTE]
====
При работе с Live CD следует учесть следующее:

* Для получения доступа к системе необходимо осуществить аутентификацию. Допустимое имя пользователя - `root`, пароль - пустой.
* Так как система работает непосредственно с CD, производительность будет заметно ниже чем у системы, установленной на жесткий диск.
* Live CD предоставляет в распоряжение командную строку, а не графический интерфейс.

====
