---
title: Κεφάλαιο 8. Πολυμέσα
part: Μέρος II. Βασικές Εργασίες
prev: books/handbook/desktop
next: books/handbook/kernelconfig
showBookMenu: true
weight: 11
path: "/books/handbook/multimedia/"
---

[[multimedia]]
= Πολυμέσα
:doctype: book
:toc: macro
:toclevels: 1
:icons: font
:sectnums:
:sectnumlevels: 6
:sectnumoffset: 8
:partnums:
:source-highlighter: rouge
:experimental:
:images-path: books/handbook/multimedia/

ifdef::env-beastie[]
ifdef::backend-html5[]
:imagesdir: ../../../../images/{images-path}
endif::[]
ifndef::book[]
include::shared/authors.adoc[]
include::shared/mirrors.adoc[]
include::shared/releases.adoc[]
include::shared/attributes/attributes-{{% lang %}}.adoc[]
include::shared/{{% lang %}}/teams.adoc[]
include::shared/{{% lang %}}/mailing-lists.adoc[]
include::shared/{{% lang %}}/urls.adoc[]
toc::[]
endif::[]
ifdef::backend-pdf,backend-epub3[]
include::../../../../../shared/asciidoctor.adoc[]
endif::[]
endif::[]

ifndef::env-beastie[]
toc::[]
include::../../../../../shared/asciidoctor.adoc[]
endif::[]

[[multimedia-synopsis]]
== Σύνοψη

Το FreeBSD υποστηρίζει μεγάλη ποικιλία από κάρτες ήχου, επιτρέποντας σας έτσι να απολαύσετε υψηλής πιστότητας ήχο από τον υπολογιστή σας. Περιλαμβάνεται η δυνατότητα να εγγράψετε και να αναπαράγετε ήχο MPEG Audio Layer 3 (MP3), WAV, και Ogg Vorbis καθώς και πολλά άλλα formats. Το FreeBSD Ports Collection επίσης περιέχει εφαρμογές που σας επιτρέπουν να επεξεργαστείτε τον ηχογραφημένο σας ήχο, να προσθέσετε ηχητικά εφέ, και να ελέγξετε συσκευές MIDI.

Με λίγο πειραματισμό, το FreeBSD μπορεί να υποστηρίξει αναπαραγωγή αρχείων video και DVD. Ο αριθμός των εφαρμογών που κωδικοποιούν, μετατρέπουν, και αναπαράγουν διάφορους τύπους video είναι πιο περιορισμένος από τον αριθμό των εφαρμογών ήχου. Για παράδειγμα, όταν γράφηκε αυτό το κείμενο, δεν υπήρχε καμιά καλή εφαρμογή επανακωδικοποίησης στη συλλογή των Ports του FreeBSD, που θα μπορούσε να χρησιμοποιηθεί για μετατροπή μεταξύ formats, όπως το package:audio/sox[]. Παρ' όλα αυτά, το τοπίο σε αυτό τον τομέα, και όσο αφορά το λογισμικό, αλλάζει ραγδαία.

Το κεφάλαιο αυτό θα περιγράψει τα απαραίτητα βήματα για τη ρύθμιση της κάρτας ήχου σας. Η ρύθμιση και εγκατάσταση του X11 (crossref:x11[x11,Το Σύστημα X Window]) έχει ήδη φροντίσει για τα πιθανά προβλήματα υλικού της κάρτας γραφικών σας, αν και μπορεί να χρειάζεται να εφαρμόσετε κάποιες ακόμα μικρο-ρυθμίσεις για καλύτερη αναπαραγωγή.

Αφού διαβάσετε αυτό το κεφάλαιο, θα ξέρετε:

* Πως να ρυθμίσετε το σύστημα σας ώστε να αναγνωρίζεται η κάρτα ήχου σας.
* Μεθόδους για να ελέγξετε τη λειτουργία της κάρτας σας.
* Πως να επιλύσετε προβλήματα σχετικά με τις ρυθμίσεις ήχου. 
* Πως να αναπαράγετε και να κωδικοποιήσετε MP3 και άλλους τύπους αρχείων ήχου.
* Πως υποστηρίζεται το video από τον X server.
* Κάποια ports αναπαραγωγής/κωδικοποίησης video που δίνουν καλά αποτελέσματα.
* Πως να αναπαράγετε DVD, και αρχεία [.filename]#.mpg# και [.filename]#.avi#.
* Πως να κάνετε rip το περιεχόμενο CD και DVD σε αρχεία.
* Πως να ρυθμίσετε μια κάρτα τηλεόρασης.
* Πως να ρυθμίσετε ένα σαρωτή εικόνων.

Πριν διαβάσετε αυτό το κεφάλαιο, θα πρέπει:

* Να ξέρετε πως θα ρυθμίσετε και θα εγκαταστήσετε νέο πυρήνα (crossref:kernelconfig[kernelconfig,Ρυθμίζοντας τον Πυρήνα του FreeBSD]).

[WARNING]
====

Αν προσπαθήσετε να προσαρτήσετε μουσικά CD με την εντολή man:mount[8] θα προκληθεί κατ' ελάχιστον σφάλμα, ή στη χειρότερη περίπτωση _kernel panic_. Τέτοια μέσα έχουν εξειδικευμένες κωδικοποιήσεις που διαφέρουν από το συνηθισμένο σύστημα αρχείων ISO.
====

[[sound-setup]]
== Ρύθμιση της Κάρτας Ήχου

[[sound-device]]
=== Ρυθμίζοντας το Σύστημα

Πριν ξεκινήσετε, θα πρέπει να ξέρετε το μοντέλο της κάρτας που έχετε, το ολοκληρωμένο κύκλωμα που χρησιμοποιεί, καθώς και αν είναι PCI ή ISA. Το FreeBSD υποστηρίζει μεγάλη ποικιλία καρτών ήχου, τόσο PCI όσο και ISA. Ελέγξτε τις υποστηριζόμενες συσκευές ήχου στις link:{u-rel120-hardware}[Σημειώσεις Υλικού] για να δείτε αν η κάρτα σας υποστηρίζεται. Στις Σημειώσεις Υλικού αναφέρεται επίσης ποιο πρόγραμμα οδήγησης υποστηρίζει την κάρτα σας.

Για να χρησιμοποιήσετε την συσκευή ήχου που διαθέτετε, θα πρέπει να φορτώσετε τον κατάλληλο οδηγό συσκευής. Αυτό μπορεί να επιτευχθεί με δύο τρόπους. Ο ευκολότερος είναι απλώς να φορτώσετε ένα module (άρθρωμα) για την κάρτα ήχου στον πυρήνα, χρησιμοποιώντας την εντολή man:kldload[8], με τη βοήθεια της γραμμής εντολών: 

[source,shell]
....
# kldload snd_emu10k1
....

ή προσθέτοντας την κατάλληλη γραμμή στο αρχείο [.filename]#/boot/loader.conf# όπως παρακάτω:

[.programlisting]
....
snd_emu10k1_load="YES"
....

Τα παραπάνω παραδείγματα είναι για μια κάρτα ήχου Creative SoundBlaster(R) Live!. Υπάρχουν διαθέσιμα και άλλα modules για κάρτες ήχου και μπορείτε να τα δείτε στο αρχείο [.filename]#/boot/defaults/loader.conf#. Αν δεν είστε σίγουρος για το πρόγραμμα οδήγησης που πρέπει να χρησιμοποιήσετε, μπορείτε να προσπαθήσετε να φορτώσετε το module [.filename]#snd_driver#:

[source,shell]
....
# kldload snd_driver
....

Πρόκειται για ένα μετα-πρόγραμμα οδήγησης, το οποίο φορτώνει με μιας όλα τα κοινά προγράμματα οδήγησης για κάρτες ήχου. Με τον τρόπο αυτό μπορείτε να επιταχύνετε την ανίχνευση για το σωστό οδηγό. Μπορείτε επίσης να φορτώσετε όλα τα προγράμματα οδήγησης μέσω του αρχείου [.filename]#/boot/loader.conf#.

Αν επιθυμείτε να βρείτε το επιλεγμένο πρόγραμμα οδήγησης της κάρτας σας μετά τη φόρτωση του [.filename]#snd_driver#, μπορείτε να ελέγξετε το αρχείο [.filename]#/dev/sndstat# με την βοήθεια της εντολής `cat /dev/sndstat`.

Μια δεύτερη μέθοδος είναι να μεταγλωττίσετε την υποστήριξη της κάρτας ήχου σας, στατικά, απευθείας στον πυρήνα. Το παρακάτω τμήμα παρέχει τις πληροφορίες που χρειάζεστε για να προσθέσετε υποστήριξη για το υλικό σας με αυτό τον τρόπο. Για περισσότερες πληροφορίες σχετικά με την μεταγλώττιση του πυρήνα, δείτε το crossref:kernelconfig[kernelconfig,Ρυθμίζοντας τον Πυρήνα του FreeBSD]. 

==== Δημιουργώντας Προσαρμοσμένο Πυρήνα με Υποστήριξη Ήχου

Αρχικά, πρέπει να προσθέσετε το γενικό πρόγραμμα οδήγησης ήχου (audio framework driver) man:sound[4] στον πυρήνα σας. Θα χρειαστεί να προσθέσετε την ακόλουθη γραμμή στο αρχείο ρυθμίσεων του πυρήνα: 

[.programlisting]
....
device sound
....

Έπειτα, θα πρέπει να προσθέσετε υποστήριξη για την κάρτα ήχου σας. Πρέπει να γνωρίζετε από πριν ποιο πρόγραμμα οδήγησης την υποστηρίζει. Ελέγξτε τη λίστα των υποστηριζόμενων καρτών στις link:{u-rel120-hardware}[Σημειώσεις Υλικού], για να καθορίσετε το σωστό οδηγό για την δική σας. Για παράδειγμα, ή Creative SoundBlaster(R) Live!, υποστηρίζεται από τον οδηγό man:snd_emu10k1[4]. Για να προσθέσετε υποστήριξη για αυτή την κάρτα, χρησιμοποιήστε την ακόλουθη γραμμή:

[.programlisting]
....
device snd_emu10k1
....

Βεβαιωθείτε ότι διαβάσατε την σελίδα του manual για το πρόγραμμα οδήγησης, ώστε να χρησιμοποιήσετε τη σωστή σύνταξη. Η ακριβής σύνταξη για κάθε υποστηριζόμενη κάρτα ήχου στο αρχείο ρυθμίσεων πυρήνα, μπορεί να βρεθεί επίσης στο αρχείο [.filename]#/usr/src/sys/conf/NOTES#.

Για κάρτα ήχου τύπου ISA που δεν είναι Plug'N'Play μπορεί να χρειαστεί να δώσετε στον πυρήνα πληροφορίες σχετικά με τις ρυθμίσεις της (όπως το IRQ, θύρα I/O κλπ), όπως γίνεται τυπικά σε αυτές τις περιπτώσεις. Αυτό μπορεί να γίνει μέσω του αρχείου [.filename]#/boot/device.hints#. Κατά τη διαδικασία της εκκίνησης, ο man:loader[8] θα διαβάσει το αρχείο και θα μεταβιβάσει τις ρυθμίσεις στον πυρήνα. Για παράδειγμα, μια παλιά Creative SoundBlaster(R) 16 ISA μη-PnP κάρτα χρησιμοποιεί το πρόγραμμα οδήγησης man:snd_sbc[4] σε συνδυασμό με το `snd_sb16`. Για την κάρτα αυτή πρέπει να προστεθούν οι παρακάτω γραμμές στο αρχείο ρυθμίσεων πυρήνα:

[.programlisting]
....
device snd_sbc
device snd_sb16
....

και οι παρακάτω γραμμές στο αρχείο [.filename]#/boot/device.hints#:

[.programlisting]
....
hint.sbc.0.at="isa"
hint.sbc.0.port="0x220"
hint.sbc.0.irq="5"
hint.sbc.0.drq="1"
hint.sbc.0.flags="0x15"
....

Στην περίπτωση αυτή, η κάρτα χρησιμοποιεί τη θύρα I/O `0x220` και το IRQ `5`.

Η σύνταξη που χρησιμοποιείται στο αρχείο [.filename]#/boot/device.hints# εξηγείται στη σελίδα manual του man:sound[4] καθώς και στη σελίδα manual του αντίστοιχου προγράμματος οδήγησης.

Οι ρυθμίσεις που φαίνονται παραπάνω είναι οι προεπιλεγμένες. Σε ορισμένες περιπτώσεις, μπορεί να χρειαστεί να αλλάξετε το IRQ ή άλλες ρυθμίσεις ώστε να ταιριάζουν με τις ρυθμίσεις της κάρτας σας. Δείτε τη σελίδα manual της man:snd_sbc[4] για περισσότερες πληροφορίες σχετικά με την κάρτα αυτή.

[[sound-testing]]
=== Δοκιμάζοντας την Κάρτα Ήχου

Αφού κάνετε επανεκκίνηση με τον νέο πυρήνα (ή αφού φορτώσετε το απαραίτητο module), Θα πρέπει να δείτε μηνύματα σχετικά με την κάρτα ήχου στην προσωρινή μνήμη (buffer) καταγραφής του συστήματος (man:dmesg[8]) αντίστοιχα με τα παρακάτω:

[source,shell]
....
pcm0: <Intel ICH3 (82801CA)> port 0xdc80-0xdcbf,0xd800-0xd8ff irq 5 at device 31.5 on pci0
pcm0: [GIANT-LOCKED]
pcm0: <Cirrus Logic CS4205 AC97 Codec>
....

Η κατάσταση της κάρτας ήχου μπορεί να ελεγχθεί μέσω του αρχείου [.filename]#/dev/sndstat#:

[source,shell]
....
# cat /dev/sndstat
FreeBSD Audio Driver (newpcm)
Installed devices:
pcm0: <Intel ICH3 (82801CA)> at io 0xd800, 0xdc80 irq 5 bufsz 16384
kld snd_ich (1p/2r/0v channels duplex default)
....

Τα μηνύματα στο σύστημα σας μπορεί να είναι διαφορετικά. Αν δεν δείτε συσκευές τύπου [.filename]#pcm#, επιστρέψτε και ελέγξτε τα βήματα που κάνατε προηγουμένως. Κοιτάξτε το αρχείο ρυθμίσεων πυρήνα και βεβαιωθείτε ότι έχετε επιλέξει το σωστό πρόγραμμα οδήγησης. Για συνήθη προβλήματα και την αντιμετώπιση τους, δείτε το τμήμα <<troubleshooting>>.

Αν όλα πάνε καλά, η κάρτα ήχου σας θα λειτουργεί. Αν ο οδηγός CD ή DVD που διαθέτετε είναι συνδεμένος με την κάρτα ήχου μέσω της αναλογικής του εξόδου, μπορείτε να βάλετε ένα μουσικό CD και να το αναπαράγετε με το πρόγραμμα man:cdcontrol[1]:

[source,shell]
....
% cdcontrol -f /dev/acd0 play 1
....

Άλλες εφαρμογές, όπως το package:audio/workman[] παρέχουν φιλικότερο περιβάλλον εργασίας. Ίσως θέλετε να εγκαταστήσετε μια εφαρμογή όπως το package:audio/mpg123[] για να αναπαράγετε αρχεία ήχου MP3.

Ένας άλλος γρήγορος τρόπος για να ελέγξετε την κάρτα ήχου σας, είναι να στείλετε δεδομένα στην συσκευή [.filename]#/dev/dsp#, όπως παρακάτω:

[source,shell]
....
% cat filename > /dev/dsp
....

όπου το [.filename]#filename# μπορεί να είναι οποιοδήποτε αρχείο. Η παραπάνω εντολή θα πρέπει να παράγει κάποιο ήχο (θόρυβο) επιβεβαιώνοντας τη σωστή λειτουργία της κάρτας ήχου.

[NOTE]
====
Τα αρχεία συσκευών [.filename]#/dev/dsp*# δημιουργούνται αυτόματα όταν χρειάζεται. Δεν υπάρχουν αν δεν χρησιμοποιούνται και δεν θα εμφανιστούν στην έξοδο της man:ls[1]
====

Η ένταση ήχου της κάρτας μπορεί να αλλάξει μέσω της εντολής man:mixer[8]. Περισσότερες πληροφορίες μπορείτε να βρείτε στην σελίδα του manual της man:mixer[8].

[[troubleshooting]]
==== Συνηθισμένα Προβλήματα

[.informaltable]
[cols="1,1", frame="none", options="header"]
|===
| Πρόβλημα
| Λύση

|`sb_dspwr(XX) timed out`
|

Δεν είναι σωστά ρυθμισμένη η θύρα I/O.

|`bad irq XX`
|

Το IRQ δεν είναι σωστά ρυθμισμένο. Βεβαιωθείτε ότι το IRQ που έχετε δηλώσει είναι το ίδιο με αυτό που έχει ρυθμιστεί στην κάρτα.

|`xxx: gus pcm not attached, out of memory`
|

Δεν υπάρχει αρκετή διαθέσιμη μνήμη για να γίνει χρήση της συσκευής.

|`xxx: can't open /dev/dsp!`
|

Ελέγξτε με την βοήθεια της εντολής `fstat \| grep dsp` αν κάποια άλλη εφαρμογή απασχολεί τη συγκεκριμένη συσκευή. Συνήθεις ύποπτοι είναι η εφαρμογή esound καθώς και το σύστημα υποστήριξης ήχου του περιβάλλοντος KDE.
|===

Ένα ακόμα πρόβλημα δημιουργείται από ορισμένες σύγχρονες κάρτες γραφικών οι οποίες περιέχουν μια δική τους συσκευή ήχου για χρήση μέσω συνδέσεων HDMI ή αντίστοιχων. Σε ορισμένες περιπτώσεις, είναι πιθανόν αυτή η συσκευή να εντοπισθεί πριν την κανονική κάρτα ήχου με αποτέλεσμα να πάρει τη θέση της προεπιλεγμένης συσκευής ήχου. Για να ελέγξετε αν συμβαίνει αυτό, εκτελέστε την εντολή dmesg και ψάξτε για τη λέξη `pcm`. Η έξοδος θα μοιάζει με την παρακάτω:

[.programlisting]
....
...
hdac0: HDA Driver Revision: 20100226_0142
hdac1: HDA Driver Revision: 20100226_0142
hdac0: HDA Codec #0: NVidia (Unknown)
hdac0: HDA Codec #1: NVidia (Unknown)
hdac0: HDA Codec #2: NVidia (Unknown)
hdac0: HDA Codec #3: NVidia (Unknown)
pcm0: <HDA NVidia (Unknown) PCM #0 DisplayPort> at cad 0 nid 1 on hdac0
pcm1: <HDA NVidia (Unknown) PCM #0 DisplayPort> at cad 1 nid 1 on hdac0
pcm2: <HDA NVidia (Unknown) PCM #0 DisplayPort> at cad 2 nid 1 on hdac0
pcm3: <HDA NVidia (Unknown) PCM #0 DisplayPort> at cad 3 nid 1 on hdac0
hdac1: HDA Codec #2: Realtek ALC889
pcm4: <HDA Realtek ALC889 PCM #0 Analog> at cad 2 nid 1 on hdac1
pcm5: <HDA Realtek ALC889 PCM #1 Analog> at cad 2 nid 1 on hdac1
pcm6: <HDA Realtek ALC889 PCM #2 Digital> at cad 2 nid 1 on hdac1
pcm7: <HDA Realtek ALC889 PCM #3 Digital> at cad 2 nid 1 on hdac1
...
....

Στο παράδειγμα μας, η κάρτα γραφικών (`NVidia`) εντοπίστηκε πριν την κανονική κάρτα ήχου (`Realtek ALC889`). Για να χρησιμοποιήσετε την πραγματική κάρτα ήχου ως την προεπιλεγμένη συσκευή ήχου, αλλάξτε το `hw.snd.default_unit` όπως φαίνεται παρακάτω:

[source,shell]
....
# sysctl hw.snd.default_unit=n
....

Το _n_ είναι ο αριθμός της συσκευής που θα χρησιμοποιηθεί, στο παράδειγμα μας το `4`. Προσθέστε την παρακάτω γραμμή στο [.filename]#/etc/sysctl.conf# για να γίνει μόνιμη αυτή η αλλαγή:

[.programlisting]
....
hw.snd.default_unit=4
....

[[sound-multiple-sources]]
=== Χρησιμοποιώντας Πολλαπλές Πηγές Ήχου

Είναι πολλές φορές επιθυμητό να έχουμε πολλαπλές πηγές ήχου που να αναπαράγονται ταυτόχρονα, όπως όταν για παράδειγμα το esound ή το artsd δεν επιτρέπουν κοινή χρήση της συσκευής ήχου σε κάποια συγκεκριμένη εφαρμογή.

Το FreeBSD επιτρέπει αυτή τη λειτουργία μέσω των _Εικονικών Καναλιών Ήχου (Virtual Sound Channels)_, τα οποία μπορούν να ενεργοποιηθούν μέσω των δυνατοτήτων που παρέχονται από το man:sysctl[8]. Τα Εικονικά Κανάλια σας επιτρέπουν να πολυπλέξετε τους ήχους που αναπαράγει η κάρτα σας, αναμιγνύοντας τον ήχο στον πυρήνα. 

Για να ρυθμίσετε το πλήθος των εικονικών καναλιών, υπάρχουν τρεις ρυθμίσεις sysctl που μπορούν να γίνουν αν είστε ο χρήστης `root`, όπως φαίνεται παρακάτω:

[source,shell]
....
# sysctl dev.pcm.0.play.vchans=4
# sysctl dev.pcm.0.rec.vchans=4
# sysctl hw.snd.maxautovchans=4
....

Το παραπάνω παράδειγμα παραχωρεί τέσσερα εικονικά κανάλια, τα οποία άνετα επαρκούν για καθημερινή χρήση. Οι τιμές `dev.pcm.0.play.vchans=4` και `dev.pcm.0.rec.vchans=4` αναφέρονται στον αριθμό των εικονικών καναλιών που διαθέτει η συσκευή [.filename]#pcm0# για αναπαραγωγή και εγγραφή, και μπορούν να ρυθμιστούν μετά την προσάρτηση της συσκευής. Η μεταβλητή `hw.snd.maxautovchans` είναι ο αριθμός των εικονικών καναλιών που παραχωρούνται σε μια νέα συσκευή ήχου όταν αυτή προσαρτάται μέσω της εντολής man:kldload[8]. Καθώς το module [.filename]#pcm# μπορεί να φορτωθεί ανεξάρτητα από τα προγράμματα οδήγησης του υλικού, το `hw.snd.maxautovchans` μπορεί να αποθηκεύσει το μέγιστο πλήθος των εικονικών καναλιών που θα παραχωρηθούν σε όσες συσκευές ήχου προσαρτηθούν αργότερα. Δείτε τη σελίδα manual man:pcm[4] για περισσότερες λεπτομέρειες.

[NOTE]
====
Δεν μπορείτε να αλλάξετε τον αριθμό των εικονικών καναλιών μιας συσκευής όσο αυτή είναι σε χρήση. Πρώτα κλείστε όσα προγράμματα χρησιμοποιούν τη συσκευή, όπως προγράμματα αναπαραγωγής μουσικής ή δαίμονες ήχου.
====

Η σωστή συσκευή [.filename]#pcm# αποδίδεται αυτόματα και διάφανα σε κάθε πρόγραμμα που ζητά να χρησιμοποιήσει το [.filename]#/dev/dsp0#.

=== Ρυθμίζοντας Προεπιλεγμένες Τιμές για τα Κανάλια του Μίκτη

Οι προεπιλεγμένες τιμές για τα διάφορα κανάλια του μίκτη, είναι ενσωματωμένες στον πηγαίο κώδικα του προγράμματος οδήγησης man:pcm[4]. Υπάρχουν πολλές διαφορετικές εφαρμογές και δαίμονες που σας επιτρέπουν να αλλάξετε τιμές στο μίκτη, απομνημονεύοντας τις μεταξύ διαδοχικών κλήσεων, αλλά ή λύση αυτή δεν είναι και η καλύτερη. Είναι δυνατόν να ορίσετε προεπιλεγμένες τιμές μίξης σε επίπεδο προγράμματος οδήγησης. Αυτό μπορεί να επιτευχθεί με την ρύθμιση κατάλληλων τιμών στο αρχείο [.filename]#/boot/device.hints#, π.χ.:

[.programlisting]
....
hint.pcm.0.vol="50"
....

Το παραπάνω ρυθμίζει την ένταση του ήχου στην προεπιλεγμένη τιμή 50, όταν φορτωθεί το module man:pcm[4].

[[sound-mp3]]
== Ήχος MP3

Τα αρχεία ήχου MP3 (MPEG Layer 3 Audio) επιτυγχάνουν ποιότητα ήχου πολύ κοντά στο μουσικό CD, και είναι καλό να έχετε δυνατότητα αναπαραγωγής τους στο FreeBSD σύστημα σας.

[[mp3-players]]
=== Προγράμματα Αναπαραγωγής MP3

Το πιο δημοφιλές, με μεγάλη διαφορά, πρόγραμμα αναπαραγωγής MP3 για το Χ11, είναι η εφαρμογή XMMS (X Multimedia System). Μπορείτε να χρησιμοποιήσετε τα skins του Winamp με το XMMS καθώς το γραφικό του περιβάλλον είναι σχεδόν όμοιο με το Winamp της Nullsoft. Το XMMS έχει επίσης ενσωματωμένη δυνατότητα χρήσης plug-ins.

Το XMMS μπορεί να εγκατασταθεί από το port package:multimedia/xmms[] ή από πακέτο.

Το περιβάλλον του XMMS το καθιστά εύκολο στη χρήση, καθώς διαθέτει λίστα αναπαραγωγής (playlist), γραφικό ισοσταθμιστή και άλλες λειτουργίες. Όσοι είναι εξοικειωμένοι με το Winamp θα βρουν το XMMS απλό στη χρήση του.

Το port package:audio/mpg123[] είναι ένα εναλλακτικό πρόγραμμα αναπαραγωγής MP3 μέσω της γραμμής εντολών. 

Το mpg123 μπορεί να εκτελεστεί καθορίζοντας τη συσκευή ήχου και το αρχείο MP3 στη γραμμή εντολών. Θεωρώντας ότι η συσκευή ήχου είναι το [.filename]#/dev/dsp1.0# και θέλετε να αναπαράγετε το αρχείο _Foobar-GreatestHits.mp3_, θα χρησιμοποιήσετε την παρακάτω εντολή:

[source,shell]
....
# mpg123 -a /dev/dsp1.0 Foobar-GreatestHits.mp3
High Performance MPEG 1.0/2.0/2.5 Audio Player for Layer 1, 2 and 3.
Version 0.59r (1999/Jun/15). Written and copyrights by Michael Hipp.
Uses code from various people. See 'README' for more!
THIS SOFTWARE COMES WITH ABSOLUTELY NO WARRANTY! USE AT YOUR OWN RISK!

Playing MPEG stream from Foobar-GreatestHits.mp3 ...
MPEG 1.0 layer III, 128 kbit/s, 44100 Hz joint-stereo

....

[[rip-cd]]
=== Αποθήκευση (Rip) Αρχείων από Μουσικά CD

Πριν κωδικοποιήσετε ένα ολόκληρο CD ή ένα κομμάτι από CD σε αρχείο MP3, θα πρέπει να αντιγράψετε τα μουσικά δεδομένα από το CD στο σκληρό σας δίσκο. Αυτό γίνεται γράφοντας τα δεδομένα τύπου CDDA (CD Digital Audio) σε αρχεία WAV.

Το εργαλείο `cdda2wav`, το οποίο ανήκει στη συλλογή εργαλείων package:sysutils/cdrtools[] μπορεί να χρησιμοποιηθεί τόσο για την ανάκτηση των δεδομένων ήχου από μουσικά CD, όσο και πληροφοριών που σχετίζονται με αυτά.

Έχοντας το μουσικό CD στον οδηγό, μπορείτε να χρησιμοποιήσετε την ακόλουθη εντολή (ως `root`) για να αποθηκεύσετε ένα ολόκληρο CD σε χωριστά (ανά κομμάτι) αρχεία WAV:

[source,shell]
....
# cdda2wav -D 0,1,0 -B
....

Το cdda2wav υποστηρίζει οδηγούς CDROM τύπου ATAPI (IDE). Για να διαβάσετε δεδομένα από μια συσκευή IDE, χρησιμοποιήστε το όνομα συσκευής αντί για τον αριθμό μονάδας SCSI. Για παράδειγμα, για να αποθηκεύσετε το κομμάτι 7 από ένα οδηγό IDE:

[source,shell]
....
# cdda2wav -D /dev/acd0 -t 7
....

Το `-D _0,1,0_` δείχνει τη συσκευή SCSI [.filename]#0,1,0#, που αντιστοιχεί στην έξοδο της εντολής `cdrecord -scanbus`.

Για να διαβάσετε μεμονωμένα κομμάτια, χρησιμοποιήστε την επιλογή `-t` όπως φαίνεται παρακάτω:

[source,shell]
....
# cdda2wav -D 0,1,0 -t 7
....

Το παράδειγμα αυτό διαβάζει το κομμάτι επτά του μουσικού CD. Για να διαβάσετε μια σειρά από κομμάτια, για παράδειγμα από το ένα ως το επτά, καθορίστε μια περιοχή:

[source,shell]
....
# cdda2wav -D 0,1,0 -t 1+7
....

Μπορείτε επίσης να χρησιμοποιήσετε το βοηθητικό πρόγραμμα man:dd[1] για να διαβάσετε μουσικά κομμάτια από οδηγούς ATAPI. Διαβάστε το crossref:disks:[duplicating-audiocds,Duplicating Audio CDs] για περισσότερες πληροφορίες σχετικά με αυτή τη δυνατότητα.

[[mp3-encoding]]
=== Κωδικοποιώντας MP3

Στις μέρες μας, το προτιμώμενο πρόγραμμα κωδικοποίησης είναι το Lame. Μπορείτε να το βρείτε στη συλλογή των ports, στο package:audio/lame[].

Χρησιμοποιώντας τα αρχεία WAV που έχετε αποθηκεύσει, μπορείτε να μετατρέψετε το αρχείο [.filename]#audio01.wav# σε [.filename]#audio01.mp3# με την εντολή:

[source,shell]
....
# lame -h -b 128 \
--tt "Foo Song Title" \
--ta "FooBar Artist" \
--tl "FooBar Album" \
--ty "2001" \
--tc "Ripped and encoded by Foo" \
--tg "Genre" \
audio01.wav audio01.mp3
....

Τα 128 kbits είναι η τυπικά χρησιμοποιούμενη ποιότητα για αρχεία MP3. Ωστόσο, πολλοί προτιμούν μεγαλύτερη ποιότητα όπως 160 ή 192. Όσο μεγαλύτερος είναι ο ρυθμός δεδομένων (bitrate), τόσο περισσότερο χώρο αποθήκευσης θα χρειάζεται το αρχείο MP3 που θα προκύψει, ωστόσο και η ποιότητα θα είναι υψηλότερη. Η επιλογή `-h` ενεργοποιεί τη δυνατότητα "υψηλότερης ποιότητας αλλά ελαφρά πιο αργής κωδικοποίησης". Οι επιλογές που ξεκινούν με `--t` δείχνουν ετικέτες (tags) ID3, οι οποίες συνήθως περιέχουν πληροφορίες σχετικές με το τραγούδι και οι οποίες μπορούν να ενσωματωθούν μέσα σε αρχεία MP3. Μπορείτε να βρείτε περισσότερες επιλογές σχετικά με την κωδικοποίηση, αν συμβουλευτείτε τη σελίδα manual του προγράμματος lame.

[[mp3-decoding]]
=== Αποκωδικοποιώντας MP3

Για να μπορέσετε να γράψετε μουσικό CD από αρχεία MP3, θα πρέπει να τα μετατρέψετε ξανά σε μορφή ασυμπίεστου αρχείου WAV. Τόσο το XMMS όσο και το mpg123 υποστηρίζουν εξαγωγή αρχείου MP3 σε ασυμπίεστη μορφή αρχείου.

Γράφοντας στο Δίσκο μέσω του XMMS: 

[.procedure]
. Ξεκινήστε το XMMS.
. Κάντε δεξί κλικ στο παράθυρο της εφαρμογής για να ανοίξετε το μενού του XMMS.
. Επιλέξτε `Preferences` από τα `Options`.
. Αλλάξτε το Output Plugin σε "Disk Writer Plugin".
. Πιέστε `Configure`.
. Γράψτε (ή επιλέξτε browse) ένα κατάλογο για να αποθηκεύσετε τα αποσυμπιεσμένα αρχεία.
. Φορτώστε το αρχείο MP3 στο XMMS όπως συνήθως, με την ένταση στο 100% και τις ρυθμίσεις EQ ανενεργές.
. Πιέστε το `Play`. Το XMMS θα φαίνεται ότι αναπαράγει το MP3, αλλά δεν θα ακούγεται κανείς ήχος. Στην πραγματικότητα αναπαράγει το MP3 σε αρχείο.
. Όταν τελειώσετε, βεβαιωθείτε ότι επαναφέρατε τη ρύθμιση του προεπιλεγμένου Output Plugin στην προηγούμενη επιλογή της, για να μπορέσετε να ακούσετε ξανά αρχεία MP3.

Γράφοντας στην έξοδο μέσω του mpg123: 

[.procedure]
. Εκτελέστε `mpg123 -s audio01.mp3 > audio01.pcm`

Το XMMS γράφει αρχεία σε μορφή WAV, ενώ το mpg123 μετατρέπει το MP3 σε μη- επεξεργασμένα (raw) δεδομένα ήχου PCM. Και οι δύο αυτές μορφές μπορούν να χρησιμοποιηθούν με την εφαρμογή cdrecord για τη δημιουργία μουσικών CD. Για την εφαρμογή man:burncd[8] θα πρέπει να χρησιμοποιήσετε δεδομένα PCM. Αν χρησιμοποιήσετε αρχεία WAV θα παρατηρήσετε ένα μικρό ήχο (tick) στην αρχή κάθε κομματιού. Ο ήχος αυτός προέρχεται από την επικεφαλίδα (header) του αρχείου WAV. Μπορείτε να αφαιρέσετε την επικεφαλίδα με τη βοήθεια του προγράμματος SoX (μπορείτε να το εγκαταστήσετε από το port package:audio/sox[] ή το αντίστοιχο πακέτο):

[source,shell]
....
% sox -t wav -r 44100 -s -w -c 2 track.wav track.raw
....

Διαβάστε το crossref:disks[creating-cds,Creating and Using CD Media] για περισσότερες πληροφορίες σχετικά με τη χρήση CD εγγραφής στο FreeBSD

[[video-playback]]
== Αναπαραγωγή Video

Η αναπαραγωγή video είναι μια καινούρια και ραγδαία αναπτυσσόμενη περιοχή εφαρμογών. Θα χρειαστεί να δείξετε υπομονή. Δεν πρόκειται να λειτουργήσουν όλα τόσο ομαλά όπως στον ήχο.

Πριν ξεκινήσετε, θα πρέπει να γνωρίζετε το μοντέλο της κάρτας γραφικών που έχετε καθώς και το ολοκληρωμένο κύκλωμα που χρησιμοποιεί. Αν και το Xorg υποστηρίζει μεγάλη γκάμα από κάρτες γραφικών, αυτές που παρέχουν καλή απόδοση είναι λιγότερες. Για να πάρετε μια λίστα των εκτεταμένων δυνατοτήτων που υποστηρίζονται από την κάρτα σας, χρησιμοποιήστε την εντολή man:xdpyinfo[1] την ώρα που εκτελούνται τα X11.

Είναι γενικά καλή ιδέα να έχετε ένα μικρό αρχείο MPEG το οποίο μπορεί να χρησιμοποιηθεί για δοκιμές διαφορετικών επιλογών και προγραμμάτων αναπαραγωγής. Κάποια προγράμματα αναπαραγωγής DVD αναζητούν από προεπιλογή το δίσκο DVD στη συσκευή [.filename]#/dev/dvd#. Σε ορισμένα το όνομα της συσκευής είναι ενσωματωμένο στον κώδικα του προγράμματος. Για το λόγο αυτό, ίσως είναι χρήσιμο να φτιάξετε συμβολικές συνδέσεις προς τις πραγματικές συσκευές:

[source,shell]
....
# ln -sf /dev/acd0 /dev/dvd
# ln -sf /dev/acd0 /dev/rdvd
....

Σημειώστε ότι λόγω της φύσης του συστήματος man:devfs[5], αυτού του είδους οι συνδέσεις δεν παραμένουν μετά την επανεκκίνηση του συστήματος σας. Για να δημιουργούνται οι συμβολικές συνδέσεις αυτόματα σε κάθε εκκίνηση του συστήματος σας, προσθέστε τις ακόλουθες γραμμές στο αρχείο [.filename]#/etc/devfs.conf#: 

[.programlisting]
....
link acd0 dvd
link acd0 rdvd
....

Επιπρόσθετα, η αποκωδικοποίηση DVD, η οποία χρειάζεται κλήση ειδικών λειτουργιών του DVD-ROM, απαιτεί και άδεια εγγραφής (write permission) στις συσκευές DVD.

Για τη βελτίωση της λειτουργίας της κοινόχρηστης μνήμης του συστήματος X11, συνίσταται να αυξήσετε τις τιμές κάποιων μεταβλητών man:sysctl[8]:

[.programlisting]
....
kern.ipc.shmmax=67108864
kern.ipc.shmall=32768
....

[[video-interface]]
=== Προσδιορισμός Δυνατοτήτων Κάρτας Γραφικών

Υπάρχουν αρκετοί διαφορετικοί τρόποι για την απεικόνιση video στο X11. Το τι θα δουλέψει τελικά, εξαρτάται σε μεγάλο βαθμό από το υλικό σας. Κάθε μέθοδος που περιγράφουμε παρακάτω θα δώσει διαφορετική ποιότητα σε διαφορετικό υλικό. Επίσης, η αναπαραγωγή video στο X11 είναι ένα θέμα στο οποίο πρόσφατα δίνεται μεγάλη σημασία, και πιθανόν θα υπάρχουν αρκετές βελτιώσεις σε κάθε νέα έκδοση του Xorg.

Κατάλογος κοινών διεπαφών video:

. X11: Συνηθισμένη έξοδος του X11 με χρήση κοινόχρηστης μνήμης. 
. XVideo: μια επέκταση της διεπαφής X11 που υποστηρίζει αναπαραγωγή video σε οποιαδήποτε σχεδιάσιμη επιφάνεια του X11.
. SDL: Simple Directmedia Layer.
. DGA: Direct Graphics Access.
. SVGAlib: Επίπεδο γραφικών χαμηλού επιπέδου για κονσόλα.

[[video-interface-xvideo]]
==== XVideo

Το Xorg διαθέτει μια επέκταση που ονομάζεται _XVideo_ (γνωστή και ως Xvideo, Xv, xv) και το οποίο επιτρέπει την απευθείας απεικόνιση video σε σχεδιάσιμα αντικείμενα μέσω ειδικής επιτάχυνσης. Η επέκταση αυτή παρέχει αναπαραγωγή πολύ καλής ποιότητας, ακόμα και σε μηχανήματα χαμηλών προδιαγραφών.

Για να δείτε αν χρησιμοποιείται η επέκταση, χρησιμοποιήστε την εντολή `xvinfo`:

[source,shell]
....
% xvinfo
....

Το XVideo υποστηρίζεται από την κάρτα σας αν το αποτέλεσμα δείχνει όπως παρακάτω:

[source,shell]
....
X-Video Extension version 2.2
screen #0
  Adaptor #0: "Savage Streams Engine"
    number of ports: 1
    port base: 43
    operations supported: PutImage
    supported visuals:
      depth 16, visualID 0x22
      depth 16, visualID 0x23
    number of attributes: 5
      "XV_COLORKEY" (range 0 to 16777215)
              client settable attribute
              client gettable attribute (current value is 2110)
      "XV_BRIGHTNESS" (range -128 to 127)
              client settable attribute
              client gettable attribute (current value is 0)
      "XV_CONTRAST" (range 0 to 255)
              client settable attribute
              client gettable attribute (current value is 128)
      "XV_SATURATION" (range 0 to 255)
              client settable attribute
              client gettable attribute (current value is 128)
      "XV_HUE" (range -180 to 180)
              client settable attribute
              client gettable attribute (current value is 0)
    maximum XvImage size: 1024 x 1024
    Number of image formats: 7
      id: 0x32595559 (YUY2)
        guid: 59555932-0000-0010-8000-00aa00389b71
        bits per pixel: 16
        number of planes: 1
        type: YUV (packed)
      id: 0x32315659 (YV12)
        guid: 59563132-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
      id: 0x30323449 (I420)
        guid: 49343230-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
      id: 0x36315652 (RV16)
        guid: 52563135-0000-0000-0000-000000000000
        bits per pixel: 16
        number of planes: 1
        type: RGB (packed)
        depth: 0
        red, green, blue masks: 0x1f, 0x3e0, 0x7c00
      id: 0x35315652 (RV15)
        guid: 52563136-0000-0000-0000-000000000000
        bits per pixel: 16
        number of planes: 1
        type: RGB (packed)
        depth: 0
        red, green, blue masks: 0x1f, 0x7e0, 0xf800
      id: 0x31313259 (Y211)
        guid: 59323131-0000-0010-8000-00aa00389b71
        bits per pixel: 6
        number of planes: 3
        type: YUV (packed)
      id: 0x0
        guid: 00000000-0000-0000-0000-000000000000
        bits per pixel: 0
        number of planes: 0
        type: RGB (packed)
        depth: 1
        red, green, blue masks: 0x0, 0x0, 0x0
....

Παρατηρήστε επίσης ότι τα formats που εμφανίζονται (YUV2, YUV12, κ.λ.π.) δεν διατίθενται σε όλες τις εκδόσεις του XVideo, και η απουσία τους μπορεί να επηρεάσει κάποια προγράμματα αναπαραγωγής.

Αν το αποτέλεσμα δείχνει κάπως έτσι:

[source,shell]
....
X-Video Extension version 2.2
screen #0
no adaptors present
....

Τότε πιθανώς το XVideo δεν υποστηρίζεται από την κάρτα σας.

Αν το XVideo δεν υποστηρίζεται από την κάρτα σας, αυτό σημαίνει απλά ότι θα είναι πιο δύσκολο ο υπολογιστής σας να ανταποκριθεί στις υπολογιστικές απαιτήσεις της απεικόνισης video. Ωστόσο, ανάλογα με την κάρτα γραφικών και τον επεξεργαστή σας, είναι ακόμα πιθανόν να έχετε ικανοποιητική αναπαραγωγή. Ίσως πρέπει να διαβάσετε μεθόδους για τη βελτίωση της απόδοσης, στα προχωρημένα θέματα, <<video-further-reading>>.

[[video-interface-SDL]]
==== Το Επίπεδο Simple Directmedia Layer

Το Simple Directmedia Layer, SDL, προορίζονταν να γίνει ένα επίπεδο συμβατότητας μεταξύ των Microsoft(R) Windows(R), BeOS, και του UNIX(R), επιτρέποντας ανάπτυξη εφαρμογών ήχου και εικόνας, κατάλληλες για κάθε μια από αυτές τις πλατφόρμες (cross-platform). Το επίπεδο SDL παρέχει χαμηλού επιπέδου πρόσβαση στο υλικό, και σε ορισμένες περιπτώσεις μπορεί να είναι πιο αποδοτικό από την διεπαφή X11.

Το SDL μπορεί να βρεθεί στο package:devel/sdl12[].

[[video-interface-DGA]]
==== Το Επίπεδο Direct Graphics Access

Το Direct Graphics Access είναι μια επέκταση του X11 που επιτρέπει σε ένα πρόγραμμα να προσπεράσει τον X server και να αλλάξει απευθείας τα περιεχόμενα του framebuffer (μνήμης γραφικών). Δεδομένου ότι βασίζεται σε διαχείριση μνήμης χαμηλού επιπέδου, τα προγράμματα που το χρησιμοποιούν πρέπει να εκτελούνται ως `root`.

Η επέκταση DGA μπορεί να ελεγχθεί και να μετρηθεί ως προς την απόδοση της με το πρόγραμμα man:dga[1]. Όταν εκτελείται η εντολή `dga`, αλλάζει τα χρώματα της οθόνης σε κάθε πίεση ενός πλήκτρου. Για να ακυρώσετε την εκτέλεση, πιέστε kbd:[q]. 

[[video-ports]]
=== Πακέτα και Ports που Σχετίζονται με Video

Το τμήμα αυτό περιγράφει το λογισμικό που διατίθεται στη συλλογή των ports του FreeBSD και το οποίο μπορεί να χρησιμοποιηθεί για αναπαραγωγή video. Ο τομέας της αναπαραγωγής video είναι ιδιαίτερα ενεργός όσο αφορά την ανάπτυξη λογισμικού, και έτσι οι δυνατότητες των εφαρμογών πιθανώς να αποκλίνουν κάπως από αυτές που περιγράφονται εδώ.

Είναι αρχικά σημαντικό να γνωρίζετε ότι αρκετές από τις εφαρμογές video που εκτελούνται στο FreeBSD αναπτύχθηκαν αρχικά ως εφαρμογές Linux. Πολλές από αυτές τις εφαρμογές είναι ακόμα ποιότητας beta. Κάποια από τα προβλήματα που μπορεί να συναντήσετε στις εφαρμογές video του FreeBSD περιλαμβάνουν:

. Μια εφαρμογή δεν μπορεί να αναπαράγει ένα αρχείο που δημιουργήθηκε από κάποια άλλη.
. Μια εφαρμογή δεν μπορεί να αναπαράγει ένα αρχείο που δημιούργησε η ίδια.
. Η ίδια εφαρμογή, σε δυο διαφορετικά μηχανήματα, και αφού έχει μεταγλωττιστεί σε κάθε μηχάνημα ειδικά για αυτό, αναπαράγει το ίδιο αρχείο με διαφορετικό τρόπο.
. Κάποιο φαινομενικά απλό φίλτρο, όπως αυτό της αλλαγής μεγέθους εικόνας (rescaling), έχει ως αποτέλεσμα την δημιουργία κακής ποιότητας video (τεχνουργημάτων) εξαιτίας προβληματικής ρουτίνας μεγέθυνσης
. Κάποια εφαρμογή τερματίζεται απότομα συχνά.
. Δεν εγκαθίσταται η τεκμηρίωση του προγράμματος κατά την εγκατάσταση του port, ενώ μπορεί να βρεθεί είτε στο δικτυακό τόπο του προγράμματος είτε στον κατάλογο [.filename]#work# του port.

Πολλές από τις εφαρμογές αυτές μπορεί επίσης να παρουσιάσουν συμπτώματα "Linux-ισμού". Μπορεί δηλ. να εμφανίζουν προβλήματα που οφείλονται στον τρόπο με τον οποίο υλοποιούνται κάποιες στάνταρ βιβλιοθήκες στις διανομές του Linux, ή ίσως οι συγγραφείς να έχουν θεωρήσει ως δεδομένες κάποιες δυνατότητες του πυρήνα όπως υπάρχουν στο Linux. Τα προβλήματα αυτά δεν είναι σίγουρο ότι ανακαλύπτονται και διορθώνονται πάντα από τους συντηρητές του port, το οποίο μπορεί να οδηγήσει σε προβλήματα όπως τα παρακάτω:

. Χρήση του αρχείου [.filename]#/proc/cpuinfo# για την ανίχνευση των δυνατοτήτων του επεξεργαστή.
. Κακή χρήση των threads (νημάτων) το οποίο οδηγεί το πρόγραμμα σε κόλλημα αντί για κανονικό τερματισμό στο τέλος της εκτέλεσης. 
. Χρήση λογισμικού που δεν υπάρχει ακόμα στη συλλογή των ports του FreeBSD σε συνδυασμό με την εφαρμογή.

Μέχρι στιγμής οι συγγραφείς των εφαρμογών αυτών έχουν αποδειχθεί συνεργάσιμοι με τους συντηρητές των ports, ώστε να ελαχιστοποιηθούν οι επεμβάσεις που χρειάζονται για την μετατροπή (porting) των εφαρμογών. 

[[video-mplayer]]
==== MPlayer

Ο MPlayer είναι μια εφαρμογή αναπαραγωγής video που αναπτύχθηκε πρόσφατα και εξελίσσεται ταχύτατα. Οι στόχοι της ομάδας ανάπτυξης του MPlayer είναι η ταχύτητα και η ευελιξία στο Linux και στα άλλα Unix. Η δημιουργία του ξεκίνησε όταν ο αρχηγός της ομάδας ανάπτυξης κουράστηκε να αντιμετωπίζει τα προβλήματα αναπαραγωγής των μέχρι τότε διαθέσιμων προγραμμάτων. Κάποιοι υποστηρίζουν ότι το γραφικό περιβάλλον θυσιάστηκε για να δημιουργηθεί μια ομοιόμορφη σχεδίαση. Ωστόσο, μόλις συνηθίσετε τις επιλογές που δίνονται από τη γραμμή εντολών και τα αντίστοιχα πλήκτρα, θα μπορέσετε να τον χρησιμοποιήσετε αρκετά καλά. 

[[video-mplayer-building]]
===== Μεταγλώττιση του MPlayer

Ο MPlayer βρίσκεται στο package:multimedia/mplayer[]. Ο MPlayer κάνει πλήθος ελέγχων του υλικού κατά τη διαδικασία της μεταγλώττισης, φτιάχνοντας έτσι ένα εκτελέσιμο το οποίο δεν έχει φορητότητα από ένα σύστημα σε ένα άλλο. Για το σκοπό αυτό, είναι σημαντικό να τον εγκαταστήσετε από τα ports και όχι από έτοιμο πακέτο. Επιπρόσθετα, μπορείτε να καθορίσετε πλήθος επιλογών στην γραμμή εντολών του `make` όπως περιγράφεται στο [.filename]#Makefile# και κατά την έναρξη της διαδικασίας μεταγλώττισης:

[source,shell]
....
# cd /usr/ports/multimedia/mplayer
# make
N - O - T - E

Take a careful look into the Makefile in order
to learn how to tune mplayer towards you personal preferences!
For example,
make WITH_GTK1
builds MPlayer with GTK1-GUI support.
If you want to use the GUI, you can either install
/usr/ports/multimedia/mplayer-skins
or download official skin collections from
http://www.mplayerhq.hu/homepage/dload.html
....

Οι προεπιλεγμένες επιλογές μάλλον είναι κατάλληλες για τους περισσότερους χρήστες. Αν ωστόσο χρειάζεστε τον αποκωδικοποιητή XviD, θα πρέπει να καθορίσετε την επιλογή `WITH_XVID` στην γραμμή εντολών. Μπορείτε επίσης να ορίσετε την προεπιλεγμένη συσκευή DVD χρησιμοποιώντας την επιλογή `WITH_DVD_DEVICE`, διαφορετικά θα χρησιμοποιηθεί η προεπιλεγμένη συσκευή [.filename]#/dev/acd0#.

Όταν γράφονταν αυτό το κείμενο, το port του MPlayer δημιουργούσε επίσης την τεκμηρίωση του προγράμματος και δύο εκτελέσιμα, τον `mplayer`, και τον `mencoder`, το οποίο είναι ένα εργαλείο για επανακωδικοποίηση video.

Η HTML τεκμηρίωση του MPlayer είναι ιδιαίτερα πληροφοριακή. Αν ο αναγνώστης βρει ότι οι πληροφορίες αυτού του κεφαλαίου όσο αφορά το υλικό και τις διεπαφές video είναι ελλιπείς, η τεκμηρίωση του MPlayer αποτελεί ένα ιδιαίτερα αναλυτικό συμπλήρωμα. Θα πρέπει σίγουρα να διαθέσετε χρόνο για να διαβάσετε την τεκμηρίωση του MPlayer αν αναζητάτε πληροφορίες σχετικά με την υποστήριξη video στο UNIX(R). 

[[video-mplayer-using]]
===== Χρησιμοποιώντας τον MPlayer

Κάθε χρήστης του MPlayer πρέπει να δημιουργήσει ένα υποκατάλογο [.filename]#.mplayer# μέσα στον προσωπικό του κατάλογο. Για να δημιουργήσετε τον απαραίτητο υποκατάλογο, μπορείτε να γράψετε το παρακάτω:

[source,shell]
....
% cd /usr/ports/multimedia/mplayer
% make install-user
....

Οι επιλογές της γραμμής εντολών του `mplayer` περιγράφονται στη σελίδα του manual. Για ακόμα περισσότερες λεπτομέρειες, υπάρχει τεκμηρίωση σε μορφή HTML. Στο τμήμα αυτό θα περιγράψουμε μερικές μόνο κοινές χρήσεις.

Για να αναπαράγετε ένα αρχείο, όπως το [.filename]#testfile.avi#, μέσω ενός από τα αρκετά video interfaces χρησιμοποιήστε την επιλογή `-vo`:

[source,shell]
....
% mplayer -vo xv testfile.avi
....

[source,shell]
....
% mplayer -vo sdl testfile.avi
....

[source,shell]
....
% mplayer -vo x11 testfile.avi
....

[source,shell]
....
# mplayer -vo dga testfile.avi
....

[source,shell]
....
# mplayer -vo 'sdl:dga' testfile.avi
....

Αξίζει τον κόπο να δοκιμάσετε όλες αυτές τις επιλογές, καθώς η απόδοση τους εξαρτάται από πολλούς παράγοντες και διαφοροποιείται αρκετά ανάλογα με το υλικό του υπολογιστή σας.

Για αναπαραγωγή από DVD, αντικαταστήστε το [.filename]#testfile.avi# με `dvd://_N_ -dvd-device _DEVICE_` όπου το _N_ είναι ο αριθμός του τίτλου (title number) που επιθυμείτε να αναπαράγετε και [.filename]#DEVICE# είναι το όνομα συσκευής του DVD-ROM. Για παράδειγμα, για να αναπαράγετε τον τίτλο 3 από τη συσκευή [.filename]#/dev/dvd#:

[source,shell]
....
# mplayer -vo xv dvd://3 -dvd-device /dev/dvd
....

[NOTE]
====
Η προεπιλεγμένη συσκευή DVD μπορεί να καθοριστεί κατά τη διάρκεια της μεταγλώττισης του MPlayer port μέσω της επιλογής `WITH_DVD_DEVICE`. Από προεπιλογή, η συσκευή αυτή είναι η [.filename]#/dev/acd0#. Μπορείτε να βρείτε περισσότερες πληροφορίες στο αρχείο [.filename]#Makefile# του port.
====

Για τα πλήκτρα που χρησιμοποιούνται για παύση, διακοπή, μετακίνηση κλπ. κατά τη διάρκεια της αναπαραγωγής, συμβουλευτείτε την βοήθεια που μπορείτε να δείτε εκτελώντας `mplayer -h` ή διαβάστε τη σελίδα του manual. 

Επιπρόσθετα, σημαντικές επιλογές αναπαραγωγής είναι: `-fs -zoom` το οποίο ενεργοποιεί απεικόνιση σε πλήρη οθόνη και το `-framedrop` το οποίο βοηθάει στην αύξηση της απόδοσης.

Για να μείνει το μέγεθος της γραμμής εντολών το δυνατόν μικρό, ο χρήστης μπορεί να δημιουργήσει ένα αρχείο [.filename]#.mplayer/config# και να ορίσει εκεί τις προεπιλεγμένες επιλογές:

[.programlisting]
....
vo=xv
fs=yes
zoom=yes
....

Τέλος, ο `mplayer` μπορεί να χρησιμοποιηθεί για την εξαγωγή (rip) ενός τίτλου DVD σε ένα αρχείο [.filename]#.vob# file. Για την εξαγωγή του δεύτερου τίτλου από ένα DVD, γράψτε:

[source,shell]
....
# mplayer -dumpstream -dumpfile out.vob dvd://2 -dvd-device /dev/dvd
....

Το αρχείο εξόδου, [.filename]#out.vob#, θα είναι τύπου MPEG και μπορείτε να το μεταχειριστείτε μέσω άλλων πακέτων video που περιγράφονται σε αυτό το τμήμα.

[[video-mencoder]]
===== mencoder

Πριν χρησιμοποιήσετε το `mencoder` είναι καλή ιδέα να εξοικειωθείτε με τις επιλογές που αναφέρονται στην τεκμηρίωση HTML. Υπάρχει σελίδα manual, αλλά δεν είναι πολύ χρήσιμη χωρίς την HTML τεκμηρίωση. Υπάρχουν πάρα πολλοί τρόποι για να βελτιώσετε την ποιότητα, να μειώσετε το ρυθμό δεδομένων (bitrate) να αλλάξετε μορφή αρχείου, και κάποια από αυτά τα κόλπα μπορεί να κάνουν τη διαφορά μεταξύ καλής και κακής απόδοσης. Εδώ θα δείτε μερικά παραδείγματα για να ξεκινήσετε. Πρώτα μια απλή αντιγραφή: 

[source,shell]
....
% mencoder input.avi -oac copy -ovc copy -o output.avi
....

Λανθασμένοι συνδυασμοί στη γραμμή εντολών, μπορεί να δώσουν αρχεία εξόδου τα οποία δεν μπορεί να αναπαράγει ούτε ο ίδιος ο `mplayer`. Έτσι, αν απλώς θέλετε να κάνετε rip ένα αρχείο, μείνετε στην επιλογή `-dumpfile` του `mplayer`.

Για να μετατρέψετε το [.filename]#input.avi# σε codec MPEG4 με ήχο MPEG3 (απαιτείται το package:audio/lame[]):

[source,shell]
....
% mencoder input.avi -oac mp3lame -lameopts br=192 \
	 -ovc lavc -lavcopts vcodec=mpeg4:vhq -o output.avi
....

Με τον τρόπο αυτό παράγεται έξοδος που μπορεί να αναπαραχθεί από τον `mplayer` και το `xine`. 

Μπορείτε να αντικαταστήσετε το [.filename]#input.avi# με την επιλογή `dvd://1 -dvd-device /dev/dvd` και να το εκτελέσετε ως `root` για να επανακωδικοποιήσετε απευθείας ένα τίτλο DVD. Μια και πιθανώς δεν θα μείνετε ικανοποιημένος με το αποτέλεσμα από την πρώτη φορά, σας συνιστούμε να κατεβάσετε τον τίτλο σε ένα αρχείο και να δουλέψετε σε αυτό.

[[video-xine]]
==== Το Πρόγραμμα Αναπαραγωγής xine

Το xine είναι ένα project με ευρύ σκοπό, το οποίο προορίζεται όχι μόνο να γίνει ένα πρόγραμμα όλα σε ένα όσο αφορά το video, αλλά επίσης στο να παράγει μια επαναχρησιμοποιήσιμη βασική βιβλιοθήκη και ένα αρθρωτό εκτελέσιμο το οποίο μπορεί να επεκταθεί με πρόσθετα (plugins). Μπορείτε να το εγκαταστήσετε τόσο από πακέτο, όσο και από το port, package:multimedia/xine[].

Το xine είναι ακόμα κάπως χοντροκομμένο, αλλά σίγουρα έχει ξεκινήσει καλά. Στην πράξη, το xine χρειάζεται είτε γρήγορο επεξεργαστή και κάρτα γραφικών, ή υποστήριξη της επέκτασης XVideo. Το γραφικό περιβάλλον είναι χρησιμοποιήσιμο, αλλά κάπως αδέξια φτιαγμένο.

Την ώρα που γράφονταν αυτές οι γραμμές δεν διανέμονταν module μαζί με την εφαρμογή xine, ικανό να αναπαράγει DVD με CSS κωδικοποίηση. Υπάρχουν εκδόσεις από τρίτους κατασκευαστές οι οποίες έχουν ενσωματωμένο το παραπάνω module αλλά καμιά από αυτές δεν βρίσκεται στην συλλογή των ports του FreeBSD.

Σε σύγκριση με τον MPlayer, το xine κάνει περισσότερα για το χρήστη, αλλά την ίδια στιγμή, δεν επιτρέπει τόσο λεπτομερειακό έλεγχο. Το xine αποδίδει καλύτερα σε λειτουργία XVideo. 

Από προεπιλογή, το xine θα ξεκινήσει σε γραφικό περιβάλλον (GUI). Μπορείτε να χρησιμοποιήσετε το μενού για να ανοίξετε ένα συγκεκριμένο αρχείο:

[source,shell]
....
% xine
....

Εναλλακτικά, μπορείτε να το καλέσετε να αναπαράγει ένα αρχείο απευθείας από την γραμμή εντολών, χωρίς τη χρήση του GUI:

[source,shell]
....
% xine -g -p mymovie.avi
....

[[video-ports-transcode]]
==== Τα Βοηθητικά Προγράμματα transcode

Η εφαρμογή transcode δεν είναι πρόγραμμα αναπαραγωγής, αλλά μια σουίτα εργαλείων για επανακωδικοποίηση αρχείων video και ήχου. Με την εφαρμογή transcode, έχετε την δυνατότητα να αναμίξετε αρχεία video, να επισκευάσετε χαλασμένα αρχεία, χρησιμοποιώντας εργαλεία της γραμμής εντολών τα οποία χειρίζονται δεδομένα από τα κανάλια [.filename]#stdin/stdout#. 

Μεγάλο πλήθος εφαρμογών μπορούν να καθοριστούν κατά τη διάρκεια της μεταγλώττισης του port package:multimedia/transcode[] και συνιστούμε την ακόλουθη γραμμή εντολών για τη μεταγλώττιση του transcode:

[source,shell]
....
# make WITH_OPTIMIZED_CFLAGS=yes WITH_LIBA52=yes WITH_LAME=yes WITH_OGG=yes \
WITH_MJPEG=yes -DWITH_XVID=yes
....

Οι προτεινόμενες επιλογές είναι κατάλληλες για τους περισσότερους χρήστες.

Για να σας δείξουμε τις ικανότητες του `transcode`, δείτε ένα παράδειγμα μετατροπής αρχείου DivX σε PAL MPEG-1 (PAL VCD): 

[source,shell]
....
% transcode -i input.avi -V --export_prof vcd-pal -o output_vcd
% mplex -f 1 -o output_vcd.mpg output_vcd.m1v output_vcd.mpa
....

Το αρχείο MPEG που προκύπτει, το [.filename]#output_vcd.mpg#, μπορεί να αναπαραχθεί από τον MPlayer. Μπορείτε επίσης να γράψετε το αρχείο σε ένα CD-R για να δημιουργήσετε ένα Video CD, και στην περίπτωση αυτή θα χρειαστεί να εγκαταστήσετε τα προγράμματα package:multimedia/vcdimager[] και package:sysutils/cdrdao[].

Υπάρχει σελίδα manual για το `transcode`, αλλά πρέπει επίσης να συμβουλευτείτε το http://www.transcoding.org/cgi-bin/transcode[transcode wiki] για περισσότερες πληροφορίες και παραδείγματα.

[[video-further-reading]]
=== Επιπλέον Διάβασμα

Υπάρχει ραγδαία εξέλιξη στα διαθέσιμα πακέτα video για το FreeBSD. Είναι αρκετά πιθανό ότι στο άμεσο μέλλον πολλά από τα προβλήματα που αναφέρονται εδώ θα έχουν επιλυθεί. Στο ενδιάμεσο διάστημα, όσοι ενδιαφέρονται να χρησιμοποιήσουν τις δυνατότητες A/V του FreeBSD στο έπακρο θα πρέπει να συνδυάσουν γνώσεις από διάφορα FAQ και tutorials και να χρησιμοποιήσουν αρκετές διαφορετικές εφαρμογές. Το τμήμα αυτό υπάρχει ακριβώς για να δείξει στον αναγνώστη που μπορεί να βρει τέτοιες πρόσθετες πληροφορίες.

Η http://www.mplayerhq.hu/DOCS/[Τεκμηρίωση του Mplayer ] είναι αρκετά πληροφοριακή όσο αφορά το τεχνικό επίπεδο. Αν έχετε σκοπό να αποκτήσετε υψηλό ποσοστό εμπειρίας σε σχέση με το video στο UNIX(R), θα πρέπει οπωσδήποτε να την συμβουλευτείτε. Η λίστα αλληλογραφίας του MPlayer είναι εχθρική σε όποιον δεν έχει κάνει τον κόπο να διαβάσει την τεκμηρίωση, έτσι αν σκοπεύετε να κάνετε αναφορές σφαλμάτων, βεβαιωθείτε ότι την έχετε διαβάσει.

Το http://dvd.sourceforge.net/xine-howto/en_GB/html/howto.html[ xine HOWTO] περιέχει ένα κεφάλαιο σχετικά με την βελτίωση της απόδοσης, το οποίο είναι κοινό για όλα τα προγράμματα αναπαραγωγής.

Τέλος, υπάρχουν κάποιες άλλες πολλά υποσχόμενες εφαρμογές που ίσως επιθυμείτε να δοκιμάσετε:

* Το http://avifile.sourceforge.net/[Avifile] το οποίο είναι επίσης port, package:multimedia/avifile[].
* Το http://www.dtek.chalmers.se/groups/dvd/[Ogle] το οποίο είναι επίσης port, package:multimedia/ogle[].
* Το http://xtheater.sourceforge.net/[Xtheater]
* Το package:multimedia/dvdauthor[], το οποίο είναι εφαρμογή DVD authoring ανοικτού κώδικα.

[[tvcard]]
== Ρύθμιση Κάρτας Τηλεόρασης

=== Εισαγωγή

Οι κάρτες τηλεόρασης σας επιτρέπουν να βλέπετε τηλεόραση, κανονική ή καλωδιακή, στον υπολογιστή σας. Οι περισσότερες από αυτές δέχονται επίσης σήμα σύνθετου (composite) video, μέσω εισόδου RCA ή S-video, και κάποιες από αυτές διαθέτουν και ραδιοφωνικό δέκτη FM.

Το FreeBSD παρέχει υποστήριξη για κάρτες TV τύπου PCI που χρησιμοποιούν τα ολοκληρωμένα κυκλώματα σύλληψης video, Brooktree Bt848/849/878/879 ή Conexant CN-878/Fusion 878a με το πρόγραμμα οδήγησης man:bktr[4]. Θα πρέπει επίσης να βεβαιωθείτε ότι η κάρτα έρχεται με δέκτη που υποστηρίζεται. Συμβουλευτείτε τη σελίδα manual του man:bktr[4] για να δείτε τη λίστα των υποστηριζόμενων δεκτών.

=== Εγκαθιστώντας το Πρόγραμμα Οδήγησης

Για να χρησιμοποιήσετε την κάρτα θα πρέπει να φορτώσετε το πρόγραμμα οδήγησης man:bktr[4], προσθέτοντας την ακόλουθη γραμμή στο αρχείο [.filename]#/boot/loader.conf#:

[.programlisting]
....
bktr_load="YES"
....

Εναλλακτικά, μπορείτε να προσθέσετε στατική υποστήριξη για την κάρτα στο πυρήνα σας, και για το σκοπό αυτό προσθέστε τις ακόλουθες γραμμές στο αρχείο ρυθμίσεων του πυρήνα:

[.programlisting]
....
device  bktr
device  iicbus
device  iicbb
device  smbus
....

Οι επιπρόσθετοι οδηγοί συσκευών είναι απαραίτητοι, επειδή τα εξαρτήματα της κάρτας επικοινωνούν μεταξύ τους διαμέσου ενός διαύλου I2C. Αφού κάνετε τις απαραίτητες αλλαγές στο αρχείο, μεταγλωττίστε και εγκαταστήστε το νέο πυρήνα.

Μόλις τελειώσετε με αυτή τη διαδικασία, θα πρέπει να επανεκκινήσετε το σύστημα σας. Κατά τη διάρκεια της εκκίνησης, θα πρέπει να δείτε κάποια μηνύματα από την κάρτα σας, όπως τα παρακάτω: 

[.programlisting]
....
bktr0: <BrookTree 848A> mem 0xd7000000-0xd7000fff irq 10 at device 10.0 on pci0
iicbb0: <I2C bit-banging driver> on bti2c0
iicbus0: <Philips I2C bus> on iicbb0 master-only
iicbus1: <Philips I2C bus> on iicbb0 master-only
smbus0: <System Management Bus> on bti2c0
bktr0: Pinnacle/Miro TV, Philips SECAM tuner.
....

Φυσικά, τα μηνύματα αυτά θα διαφέρουν ανάλογα με το υλικό σας. Ωστόσο θα πρέπει να ελέγξετε ότι ανιχνεύθηκε σωστά ο δέκτης. Είναι δυνατόν να αλλάξετε κάποιες από τις παραμέτρους που ανιχνεύθηκαν χρησιμοποιώντας MIBs του man:sysctl[8] καθώς και επιλογές στο αρχείο ρυθμίσεων πυρήνα. Για παράδειγμα, να θέλετε να επιβάλετε ο δέκτης να είναι τύπου Philips SECAM, θα πρέπει να προσθέσετε την ακόλουθη γραμμή στο αρχείο ρυθμίσεων του πυρήνα σας:

[.programlisting]
....
options OVERRIDE_TUNER=6
....

ή μπορείτε να χρησιμοποιήσετε απευθείας το man:sysctl[8]:

[source,shell]
....
# sysctl hw.bt848.tuner=6
....

Δείτε τη σελίδα manual του man:bktr[4] καθώς και το αρχείο [.filename]#/usr/src/sys/conf/NOTES# για περισσότερες λεπτομέρειες σχετικά με τις διαθέσιμες επιλογές.

=== Χρήσιμες Εφαρμογές

Για να χρησιμοποιήσετε την κάρτα τηλεόρασης, θα πρέπει να εγκαταστήσετε μια από τις παρακάτω εφαρμογές:

* Το package:multimedia/fxtv[] παρέχει δυνατότητα να δείτε τηλεόραση σε παράθυρο, καθώς και την δυνατότητα σύλληψης εικόνας / ήχου / video.
* Το package:multimedia/xawtv[] είναι επίσης εφαρμογή τηλεόρασης, με δυνατότητες όμοιες με το fxtv.
* Το package:misc/alevt[] αποκωδικοποιεί και απεικονίζει Videotext/Teletext.
* Το package:audio/xmradio[] είναι μια εφαρμογή για να χρησιμοποιήσετε το δέκτη FM που είναι ενσωματωμένος σε κάποιες κάρτες τηλεόρασης.
* Το package:audio/wmtune[] είναι μια βολική desktop εφαρμογή για ραδιοφωνικούς δέκτες.

Μπορείτε να βρείτε περισσότερες εφαρμογές στη συλλογή των Ports του FreeBSD.

=== Αντιμετώπιση Προβλημάτων

Αν αντιμετωπίσετε κάποιο πρόβλημα με την κάρτα τηλεόρασης, θα πρέπει πρώτα να ελέγξετε αν το ολοκληρωμένο σύλληψης video καθώς και ο δέκτης υποστηρίζονται από το πρόγραμμα οδήγησης man:bktr[4] και αν έχετε χρησιμοποιήσει τις σωστές ρυθμίσεις στις επιλογές σας. Για επιπλέον υποστήριξη καθώς και διάφορες ερωτήσεις σχετικά με την κάρτα σας, ίσως θέλετε να επικοινωνήσετε με τη λίστα {freebsd-multimedia} και να διαβάσετε τις παλιότερες δημοσιεύσεις από τα αρχεία της λίστας. 

[[mythtv]]
== MythTV

Το MythTV είναι ένα πρόγραμμα τύπου PVR (Προσωπικός καταγραφέας video).

Στον κόσμο του Linux(R) το MythTV είναι ένα γνωστό πρόγραμμα με πολλές εξαρτήσεις οι οποίες δυσκολεύουν την εγκατάσταση του. Το port του FreeBSD απλοποιεί το μεγαλύτερο μέρος της διαδικασίας αλλά ορισμένα τμήματα του πρέπει να εγκατασταθούν χειροκίνητα. Η ενότητα αυτή περιέχει οδηγίες που θα σας βοηθήσουν να ρυθμίσετε το MythTV.

=== Υλικό

Το MythTV έχει σχεδιαστεί να χρησιμοποιεί το V4L για την πρόσβαση σε συσκευές video όπως κωδικοποιητές (encoders) και δέκτες. Τη δεδομένη στιγμή, το MythTV λειτουργεί καλύτερα με κάρτες DVB-S/C/T με διασύνδεση USB που υποστηρίζονται από το package:multimedia/webcamd[] καθώς το webcamd παρέχει μια εφαρμογή χρήστη για το V4L. Οποιαδήποτε κάρτα DVB που υποστηρίζεται από το webcamd θα πρέπει φυσιολογικά να λειτουργεί με το MythTV. Μπορείτε ωστόσο να βρείτε http://wiki.freebsd.org/WebcamCompat[εδώ] μια λίστα με δοκιμάσμενες κάρτες. Για κάρτες τις Hauppauge μπορείτε να βρείτε προγράμματα οδήγησης στα πακέτα package:multimedia/pvr250[] και package:multimedia/pvrxxx[], αλλά να έχετε υπόψη σας ότι χρησιμοποιούν μια μη-τυποποιημένη διεπαφή η οποία δεν λειτουργεί με εκδόσεις του MythTV μεταγενέστερες της 0.23.

Το http://wiki.freebsd.org/HTPC[HTPC] περιέχει μια λίστα όλων των διαθέσιμων προγραμμάτων οδήγησης DVB.

=== Εξαρτήσεις

Καθώς το MythTV είναι ευέλικτο και αρθρωτό, επιτρέπει στο χρήστη να έχει το frontend και το backend σε διαφορετικά μηχανήματα.

Για το frontend, απαιτείται το package:multimedia/mythtv-frontend[] και ο εξυπηρετητής X τον οποίο μπορείτε να βρείτε στο package:x11/xorg[]. Ιδανικά, ο υπολογιστής που θα εκτελεί το frontend θα πρέπει επίσης να έχει μια κάρτα γραφικών η οποία να υποστηρίζει XvMC και προαιρετικά ένα τηλεχειριστήριο συμβατό με LIRC.

Για το backend, χρειάζεται το package:multimedia/mythtv[] όπως και μια βάση δεδομένων MySQL(TM) και προαιρετικά ένας δέκτης και αποθηκευτικός χώρος για εγγραφές. Το πακέτο για την MySQL(TM) θα πρέπει να εγκατασταθεί αυτόματα ως εξάρτηση κατά την εγκατάσταση του package:multimedia/mythtv[].

=== Εγκατάσταση MythTV

Για να εγκαταστήσετε το MythTV, χρησιμοποιήστε τα παρακάτω βήματα. Αρχικά εγκαταστήστε το MythTV από την Συλλογή των Ports του FreeBSD:

[source,shell]
....
# cd /usr/ports/multimedia/mythtv
# make install
....

Εγκαταστήστε τη βάση δεδομένων του MythTV:

[source,shell]
....
# mysql -uroot -p < /usr/local/shared/mythtv/database/mc.sql
....

Ρυθμίστε το backend:

[source,shell]
....
# mythtv-setup
....

Ξεκινήστε το backend:

[source,shell]
....
# echo 'mythbackend_enable="YES"' >> /etc/rc.conf
# /usr/local/etc/rc.d/mythbackend start
....

[[scanners]]
== Σαρωτές Εικόνας

=== Εισαγωγή

Στο FreeBSD η πρόσβαση σε σαρωτές παρέχεται από το SANE (Scanner Access Now Easy) API το οποίο διατίθεται μέσα από την συλλογή των Ports του FreeBSD. Το SANE χρησιμοποιεί επίσης κάποιους οδηγούς συσκευών του FreeBSD για να αποκτήσει πρόσβαση στο υλικό του σαρωτή.

Το FreeBSD υποστηρίζει σαρωτές SCSI και USB. Βεβαιωθείτε ότι ο σαρωτής σας υποστηρίζεται από το SANE πριν ξεκινήσετε οποιαδήποτε εγκατάσταση και ρύθμιση. Το SANE διαθέτει μια λίστα http://www.sane-project.org/sane-supported-devices.html[ υποστηριζόμενων συσκευών] η οποία παρέχει πληροφορίες για την υποστήριξη κάθε σαρωτή και την εξέλιξη της. Σε συστήματα πριν το FreeBSD 8.X θα βρείτε επίσης τη λίστα των υποστηριζόμενων USB σαρωτών στη σελίδα manual του man:uscanner[4].

=== Ρύθμιση του Πυρήνα

Όπως είπαμε παραπάνω, υποστηρίζονται σαρωτές τόσο SCSI όσο και USB. Ανάλογα με το τρόπο διασύνδεσης του σαρωτή σας, θα χρειαστείτε διαφορετικούς οδηγούς συσκευών.

[[scanners-kernel-usb]]
==== Διασύνδεση USB

Ο πυρήνας [.filename]#GENERIC#, από προεπιλογή, περιέχει τους οδηγούς συσκευών που απαιτούνται για την υποστήριξη σαρωτών USB. Αν αποφασίσετε να χρησιμοποιήσετε εξειδικευμένο πυρήνα, βεβαιωθείτε ότι έχετε τις ακόλουθες γραμμές στο αρχείο ρυθμίσεων σας:

[.programlisting]
....
device usb
device uhci
device ohci
device ehci
....

Σε συστήματα πριν το FreeBSD 8.X, θα χρειαστείτε επίσης την παρακάτω γραμμή:

[.programlisting]
....
device uscanner
....

Σε αυτές τις εκδόσεις του FreeBSD, η υποστήριξη των σαρωτών USB γίνεται μέσω της συσκευής man:uscanner[4]. Από το FreeBSD 8.0 και μετά, η υποστήριξη αυτή παρέχεται απευθείας από τη βιβλιοθήκη man:libusb[3].

Αφού επανεκκινήσετε με το σωστό πυρήνα, συνδέστε το USB σαρωτή σας. Θα πρέπει να δείτε μια γραμμή σχετική με την ανίχνευση του σαρωτή στην προσωρινή μνήμη μηνυμάτων του συστήματος (man:dmesg[8]):

[source,shell]
....
ugen0.2: <EPSON> at usbus0
....

ή σε ένα σύστημα FreeBSD 7.X:

[source,shell]
....
uscanner0: EPSON EPSON Scanner, rev 1.10/3.02, addr 2
....

Τα μηνύματα αυτά δείχνουν ότι ο σαρωτής μας χρησιμοποιεί την συσκευή [.filename]#/dev/ugen0.2# ή την συσκευή [.filename]#/dev/uscanner0# ανάλογα με την έκδοση του FreeBSD που χρησιμοποιείται. Στο παράδειγμα μας, χρησιμοποιήσαμε ένα σαρωτή EPSON Perfection(R) 1650 USB.

==== Διασύνδεση Τύπου SCSI

Αν ο σαρωτής σας έρχεται με διασύνδεση τύπου SCSI, είναι σημαντικό να γνωρίζετε τι κάρτα ελεγκτή SCSI θα χρησιμοποιήσετε. Ανάλογα με το ολοκληρωμένο κύκλωμα της κάρτας SCSI που χρησιμοποιείται, θα πρέπει να ρυθμίσετε κατάλληλα το αρχείο ρυθμίσεων πυρήνα. Ο πυρήνας [.filename]#GENERIC# υποστηρίζει τους πιο κοινούς ελεγκτές SCSI. Βεβαιωθείτε ότι διαβάσατε το αρχείο [.filename]#NOTES# και προσθέστε τη σωστή γραμμή στο αρχείο ρυθμίσεων πυρήνα. Εκτός από το πρόγραμμα οδήγησης του ελεγκτή SCSI, θα πρέπει ακόμα να έχετε τις ακόλουθες γραμμές στο αρχείο ρυθμίσεων του πυρήνα σας:

[.programlisting]
....
device scbus
device pass
....

Μόλις μεταγλωττίσετε και εγκαταστήσετε τον πυρήνα, θα μπορέσετε να δείτε τις συσκευές στην προσωρινή μνήμη μηνυμάτων συστήματος, κατά τη διάρκεια της εκκίνησης:

[source,shell]
....
pass2 at aic0 bus 0 target 2 lun 0
pass2: <AGFA SNAPSCAN 600 1.10> Fixed Scanner SCSI-2 device
pass2: 3.300MB/s transfers
....

Αν ο σαρωτής σας δεν ήταν ενεργοποιημένος κατά την εκκίνηση του συστήματος σας, είναι ακόμα δυνατόν να εξαναγκάσετε τον εντοπισμό του, εκτελώντας ανίχνευση του διαύλου SCSI με την βοήθεια της εντολής man:camcontrol[8]:

[source,shell]
....
# camcontrol rescan all
Re-scan of bus 0 was successful
Re-scan of bus 1 was successful
Re-scan of bus 2 was successful
Re-scan of bus 3 was successful
....

Ο σαρωτής θα εμφανιστεί τότε στη λίστα των συσκευών SCSI:

[source,shell]
....
# camcontrol devlist
<IBM DDRS-34560 S97B>              at scbus0 target 5 lun 0 (pass0,da0)
<IBM DDRS-34560 S97B>              at scbus0 target 6 lun 0 (pass1,da1)
<AGFA SNAPSCAN 600 1.10>           at scbus1 target 2 lun 0 (pass3)
<PHILIPS CDD3610 CD-R/RW 1.00>     at scbus2 target 0 lun 0 (pass2,cd0)
....

Περισσότερες πληροφορίες σχετικά με τις συσκευές SCSI είναι διαθέσιμες στις σελίδες manual man:scsi[4] και man:camcontrol[8]. 

=== Ρύθμιση του SANE

Το σύστημα SANE χωρίζεται σε δύο κομμάτια: στο backend (package:graphics/sane-backends[]) και στο frontend (package:graphics/sane-frontends[]). Το backend παρέχει πρόσβαση στον ίδιο το σαρωτή. Στη λίστα http://www.sane-project.org/sane-supported-devices.html[ υποστηριζόμενων συσκευών] του SANE μπορείτε να βρείτε ποιο backend υποστηρίζει τον σαρωτή σας. Είναι υποχρεωτικό να βρείτε το σωστό backend για να μπορέσετε να χρησιμοποιήσετε το σαρωτή σας. Το τμήμα του frontend παρέχει το γραφικό περιβάλλον εργασίας για τη σάρωση (xscanimage).

Το πρώτο βήμα είναι να εγκαταστήσετε το port ή το πακέτο package:graphics/sane-backends[]. Μετά χρησιμοποιήστε την εντολή `sane-find-scanner` για να ελέγξετε την ανίχνευση του σαρωτή σας από το σύστημα SANE:

[source,shell]
....
# sane-find-scanner -q
found SCSI scanner "AGFA SNAPSCAN 600 1.10" at /dev/pass3
....

Η έξοδος θα σας δείξει το είδος σύνδεσης του σαρωτή καθώς και το όνομα συσκευής που χρησιμοποιείται για τη σύνδεση με το σύστημα σας. Το όνομα του κατασκευαστή και του μοντέλου ίσως να μην εμφανιστούν, αλλά αυτό δεν είναι σημαντικό.

[NOTE]
====
Ορισμένοι USB σαρωτές απαιτούν τη φόρτωση firmware. Η διαδικασία εξηγείται στη σελίδα manual του backend. Θα πρέπει επίσης να διαβάσετε τις σελίδες manual man:sane-find-scanner[1] και man:linprocfs[7].
====

Πρέπει τώρα να ελέγξουμε αν ο σαρωτής θα αναγνωριστεί από το frontend πρόγραμμα σάρωσης. Από προεπιλογή, το SANE backend έρχεται με ένα εργαλείο γραμμής εντολών, το man:sane[1]. Η εντολή αυτή σας επιτρέπει την απαρίθμηση των συσκευών και τη σάρωσης εικόνας από τη γραμμή εντολών. Η επιλογή `-L` χρησιμοποιείται για την απαρίθμηση των συσκευών σάρωσης:

[source,shell]
....
# scanimage -L
device `snapscan:/dev/pass3' is a AGFA SNAPSCAN 600 flatbed scanner
....

Ή για παράδειγμα με τον σαρωτή που χρησιμοποιήσαμε στο <<scanners-kernel-usb>>:

[source,shell]
....
# scanimage -L
device 'epson2:libusb:/dev/usb:/dev/ugen0.2' is a Epson GT-8200 flatbed scanner
....

Η παραπάνω έξοδος προέρχεται από ένα σύστημα FreeBSD 8.X και η γραμμή `'epson2:libusb:/dev/usb:/dev/ugen0.2'` μας πληροφορεί για το όνομα του backend (`epson2`) και το όνομα της συσκευής (`/dev/ugen0.2`) που χρησιμοποιεί ο σαρωτής μας.

[NOTE]
====
Αν δεν δείτε έξοδο, ή δείτε ένα μήνυμα ότι δεν ανιχνεύθηκε σαρωτής, σημαίνει ότι το man:sane[1] δεν μπόρεσε να αναγνωρίσει το σαρωτή. Αν συμβεί αυτό, θα χρειαστεί να επεξεργαστείτε το αρχείο ρυθμίσεων του backend και να ορίσετε το σαρωτή που θα χρησιμοποιηθεί. Ο κατάλογος [.filename]#/usr/local/etc/sane.d/# περιέχει όλα τα αρχεία ρυθμίσεων του backend. Το πρόβλημα αναγνώρισης εμφανίζεται σε ορισμένα μοντέλα USB σαρωτών.

Για παράδειγμα, με το σαρωτή USB που χρησιμοποιείται στο <<scanners-kernel-usb>>, η εντολή `sane-find-scanner` δίνει τις ακόλουθες πληροφορίες:

[source,shell]
....
# sane-find-scanner -q
found USB scanner (UNKNOWN vendor and product) at device /dev/uscanner0
....

Ο σαρωτής βρέθηκε, χρησιμοποιεί διασύνδεση USB και το όνομα συσκευής του είναι [.filename]#/dev/uscanner0#. Τώρα πρέπει να δούμε αν αναγνωρίζεται και σωστά:

[source,shell]
....
# scanimage -L

No scanners were identified. If you were expecting something different,
check that the scanner is plugged in, turned on and detected by the
sane-find-scanner tool (if appropriate). Please read the documentation
which came with this software (README, FAQ, manpages).
....

Αφού ο σαρωτής δεν αναγνωρίστηκε, θα χρειαστεί να επεξεργαστούμε το αρχείο [.filename]#/usr/local/etc/sane.d/epson2.conf#. Το μοντέλο σαρωτή που χρησιμοποιήθηκε ήταν το EPSON Perfection(R) 1650, έτσι ξέρουμε ότι ο σαρωτής θα χρησιμοποιεί το backend `epson2`. Βεβαιωθείτε ότι διαβάσατε τα βοηθητικά σχόλια στα αρχεία ρυθμίσεων του backend. Είναι αρκετά απλό να αλλάξετε γραμμές: Μετατρέψτε σε σχόλια όσες γραμμές δείχνουν λάθος τύπο διασύνδεσης για το σαρωτή σας (στην περίπτωση μας θα μετατρέψουμε σε σχόλια όλες τις γραμμές που ξεκινάνε με τη λέξη `scsi` καθώς ο σαρωτής μας χρησιμοποιεί διασύνδεση USB), και προσθέστε στο τέλος του αρχείου μια γραμμή που να ορίζει το είδος διασύνδεσης και το όνομα συσκευής που χρησιμοποιείτε. Στην περίπτωση μας προσθέσαμε την ακόλουθη γραμμή:

[.programlisting]
....
usb /dev/uscanner0
....

Σας παρακαλούμε να βεβαιωθείτε ότι διαβάσατε τα σχόλια που παρέχονται στο αρχείο ρυθμίσεων του backend καθώς και στις αντίστοιχες σελίδες manual για περισσότερες λεπτομέρειες καθώς και για τη σύνταξη που πρέπει να χρησιμοποιήσετε. Μπορούμε τώρα να επιβεβαιώσουμε ότι ο σαρωτής αναγνωρίζεται:

[source,shell]
....
# scanimage -L
device `epson:/dev/uscanner0' is a Epson GT-8200 flatbed scanner
....

Ο USB σαρωτής μας αναγνωρίστηκε. Δεν είναι σημαντικό ότι η μάρκα και το μοντέλο δεν ταιριάζουν ακριβώς με το δικό μας. Το βασικό σημείο είναι το πεδίο `epson:/dev/uscanner0'`, το οποίο δείχνει το σωστό backend και όνομα συσκευής.
====

Μόλις η εντολή `scanimage -L` μπορέσει να δει το σαρωτή, η ρύθμιση έχει ολοκληρωθεί. Η συσκευή είναι έτοιμη να χρησιμοποιηθεί.

Αν και η man:sane[1] μας επιτρέπει να σαρώσουμε εικόνα από τη γραμμή εντολών, είναι προτιμότερο να χρησιμοποιήσουμε κάποιο πρόγραμμα σε γραφικό περιβάλλον για την εργασία αυτή. Το SANE μας προσφέρει ένα απλό αλλά αποδοτικό γραφικό περιβάλλον: το xscanimage (package:graphics/sane-frontends[]).

Το Xsane (package:graphics/xsane[]) είναι επίσης ένα δημοφιλές frontend πρόγραμμα σάρωσης. To frontend αυτό προσφέρει προχωρημένες δυνατότητες, όπως διαφορετικούς τρόπους σάρωσης (φωτοτυπία, fax, κλπ) διόρθωση χρωμάτων, πολλαπλή σάρωση κ.α. Και οι δύο αυτές εφαρμογές διατίθενται επίσης σαν πρόσθετο (plugin) πρόγραμμα για χρήση με το GIMP.

=== Δίνοντας σε Άλλους Χρήστες Πρόσβαση στο Σαρωτή σας

Όλες οι παραπάνω λειτουργίες έγιναν με τα προνόμια του χρήστη `root`. Μπορεί ωστόσο, να θέλετε να δώσετε πρόσβαση στο σαρωτή σας και σε άλλους χρήστες. Ο χρήστης χρειάζεται άδεια ανάγνωσης και εγγραφής στο αρχείο συσκευής που χρησιμοποιείται από το σαρωτή. Σαν παράδειγμα, ο σαρωτής μας χρησιμοποιεί το αρχείο συσκευής [.filename]#/dev/ugen0.2# το οποίο στην πραγματικότητα είναι ένας συμβολικός δεσμός προς το πραγματικό αρχείο συσκευής, το [.filename]#/dev/usb/0.2.0# (μπορείτε να το επιβεβαιώσετε εύκολα με μια ματιά στον κατάλογο [.filename]#/dev#). Τόσο ο συμβολικός δεσμός όσο και το αρχείο συσκευής ανήκουν στις ομάδες `wheel` και `operator`. Αν προσθέσουμε το χρήστη `_joe_` σε αυτές τις ομάδες, θα μπορεί να χρησιμοποιήσει το σαρωτή. Για λόγους ασφαλείας όμως θα πρέπει να είμαστε ιδιαίτερα προσεκτικοί όταν προσθέτουμε ένα χρήστη σε μια ομάδα, ειδικά αν πρόκειται για την `wheel`. Μια καλύτερη λύση θα ήταν να δημιουργήσουμε μια ομάδα ειδικά για τη χρήση των συσκευών USB, και να επιτρέψουμε πρόσβαση στον σαρωτή στα μέλη της ομάδας αυτής.

Για παράδειγμα, θα χρησιμοποιήσουμε μια ομάδα με το όνομα `_usb_`. Το πρώτο βήμα είναι η δημιουργία αυτής της ομάδας με τη βοήθεια της εντολής man:pw[8]:

[source,shell]
....
# pw groupadd usb
....

Θα πρέπει έπειτα να αλλάξουμε τα δικαιώματα του συμβολικού δεσμού [.filename]#/dev/ugen0.2# και του αρχείου συσκευής [.filename]#/dev/ugen0.2.0# ώστε να είναι προσβάσιμα από την ομάδα `usb` με δυνατότητα εγγραφής (δικαιώματα `0660` ή `0664`). Από προεπιλογή, μόνο ο ιδιοκτήτης αυτών των αρχείων (ο `root`) έχει τα απαραίτητα δικαιώματα εγγραφής. Όλα τα παραπάνω μπορούν να γίνουν με τις παρακάτω γραμμές στο αρχείο [.filename]#/etc/devfs.rules#:

[.programlisting]
....
[system=5]
add path ugen0.2 mode 660 group usb
add path usb/0.2.0 mode 0660 group usb
....

Οι χρήστες του FreeBSD 7.X θα χρειαστούν τις παρακάτω γραμμές, με το σωστό αρχείο συσκευής (τις περισσότερες φορές θα είναι το [.filename]#/dev/uscanner0#):

[.programlisting]
....
[system=5]
add path uscanner0 mode 0660 group usb
....

Έπειτα, προσθέστε την ακόλουθη γραμμή στο αρχείο [.filename]#/etc/rc.conf# και επανεκκινήστε το μηχάνημα: 

[.programlisting]
....
devfs_system_ruleset="system"
....

Περισσότερες πληροφορίες σχετικά με αυτές τις γραμμές, μπορείτε να βρείτε στη σελίδα manual του man:devfs[8].

Έπειτα από τα παραπάνω βήματα, για να δώσετε πρόσβαση στο USB σαρωτή σε κάποιο χρήστη, αρκεί να προσθέσετε το λογαριασμό του στην ομάδα `_usb_`:

[source,shell]
....
# pw groupmod usb -m joe
....

Για περισσότερες λεπτομέρειες, διαβάστε τη σελίδα manual του man:pw[8].
